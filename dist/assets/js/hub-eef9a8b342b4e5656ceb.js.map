{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/utils/phoenix-utils.js","webpack:///./src/utils/resizeShadowCameraFrustum.js","webpack:///./src/components/directional-light.js","webpack:///./src/components/layers.js","webpack:///./src/components/loop-animation.js","webpack:///./src/components/media-loader.js","webpack:///./src/components/quack.js","webpack:///./src/components/scene-preview-camera.js","webpack:///./src/components/skybox.js","webpack:///./src/components/spawn-controller.js","webpack:///./src/components/super-spawner.js","webpack:///./src/components/water.js","webpack:///./src/components/particle-emitter.js","webpack:///./src/utils/component-mappings.js","webpack:///./src/gltf-component-mappings.js","webpack:///./src/assets/images/logo.svg","webpack:///./src/assets/images/giphy_logo.png","webpack:///./src/utils/history.js","webpack:///./src/assets/images/media-error.gif","webpack:///./src/assets/camera_tool.glb","webpack:///./src/assets/images/mic_granted.png","webpack:///./src/assets/images/mic_granted@2x.png","webpack:///./src/assets/images/mic_small.png","webpack:///./src/assets/images/mic_small@2x.png","webpack:///./src/assets/images/dropdown_arrow.png","webpack:///./src/assets/images/dropdown_arrow@2x.png","webpack:///./src/assets/images/add-owner.png","webpack:///./src/assets/images/remove-owner.png","webpack:///./src/assets/images/mobile_screen_entry.svg","webpack:///./src/assets/images/desktop_screen_entry.svg","webpack:///./src/assets/images/generic_vr_entry.svg","webpack:///./src/assets/images/gearvr_entry.svg","webpack:///./src/assets/images/daydream_entry.svg","webpack:///./src/assets/sfx/tick.mp3","webpack:///./src/assets/images/link_dialog_header.svg","webpack:///./src/assets/images/presence_phone.png","webpack:///./src/assets/images/presence_desktop.png","webpack:///./src/assets/images/presence_discord.png","webpack:///./src/assets/images/presence_camera.png","webpack:///./src/assets/images/presence_vr.png","webpack:///./src/assets/images/level_background.png","webpack:///./src/assets/images/level_background@2x.png","webpack:///./src/assets/images/level_fill.png","webpack:///./src/assets/images/level_fill@2x.png","webpack:///./src/assets/images/mic_level.png","webpack:///./src/assets/images/mic_level@2x.png","webpack:///./src/assets/images/level_action_background.png","webpack:///./src/assets/images/level_action_background@2x.png","webpack:///./src/assets/images/level_action_fill.png","webpack:///./src/assets/images/level_action_fill@2x.png","webpack:///./src/assets/images/speaker_level.png","webpack:///./src/assets/images/speaker_level@2x.png","webpack:///./src/assets/sfx/tone.webm","webpack:///./src/assets/sfx/tone.mp3","webpack:///./src/assets/sfx/tone.ogg","webpack:///./src/assets/sfx/tone.wav","webpack:///./src/assets/images/change_avatar.svg","webpack:///./src/systems/render-manager/unlit-batch.vert","webpack:///./src/systems/render-manager/unlit-batch.frag","webpack:///./src/utils/avatar-utils.js","webpack:///./src/assets/images/spritesheets/sprite-system-spritesheet.png","webpack:///./src/systems/sprites/sprite.vert","webpack:///./src/systems/sprites/sprite.frag","webpack:///./src/utils/fullscreen.js","webpack:///./src/materials/MobileStandardMaterial.js","webpack:///./src/storage/media-search-store.js","webpack:///./src/airtable.js","webpack:///./src/react-components/state-link.js","webpack:///./src/utils/media-url-utils.js","webpack:///./src/components/gltf-model-plus.js","webpack:///./src/utils/promisify-worker.js","webpack:///./src/utils/async-utils.js","webpack:///./src/utils/audio-context-fix.js","webpack:///./src/utils/threejs-positional-audio-updatematrixworld.js","webpack:///./src/components/bone-mute-state-indicator.js","webpack:///./src/components/bone-visibility.js","webpack:///./src/components/offset-relative-to.js","webpack:///./src/components/hud-controller.js","webpack:///./src/components/icon-button.js","webpack:///./src/components/text-button.js","webpack:///./src/components/block-button.js","webpack:///./src/components/mute-button.js","webpack:///./src/components/kick-button.js","webpack:///./src/components/close-vr-notice-button.js","webpack:///./src/components/leave-room-button.js","webpack:///./src/components/visible-if-permitted.js","webpack:///./src/components/visibility-on-content-type.js","webpack:///./src/components/hide-when-pinned-and-forbidden.js","webpack:///./src/components/networked-avatar.js","webpack:///./src/components/pinnable.js","webpack:///./src/components/drop-object-button.js","webpack:///./src/components/remove-networked-object-button.js","webpack:///./src/components/camera-focus-button.js","webpack:///./src/components/visible-to-owner.js","webpack:///./src/components/emit-state-change.js","webpack:///./src/components/action-to-event.js","webpack:///./src/components/action-to-remove.js","webpack:///./src/components/emit-scene-event-on-remove.js","webpack:///./src/components/follow-in-fov.js","webpack:///./src/components/matrix-auto-update.js","webpack:///./src/components/tweet-media-button.js","webpack:///./src/components/hover-menu.js","webpack:///./src/components/disable-frustum-culling.js","webpack:///./src/components/set-active-camera.js","webpack:///./src/components/track-pose.js","webpack:///./src/components/replay.js","webpack:///./src/components/visibility-by-path.js","webpack:///./src/components/tags.js","webpack:///./src/components/billboard.js","webpack:///./src/components/periodic-full-syncs.js","webpack:///./src/components/hoverable-visuals.js","webpack:///./src/systems/frame-scheduler.js","webpack:///./src/systems/app-mode.js","webpack:///./src/systems/permissions.js","webpack:///./src/systems/exit-on-blur.js","webpack:///./src/systems/camera-tools.js","webpack:///./src/constants.js","webpack:///./src/components/owned-object-limiter.js","webpack:///./src/components/set-unowned-body-kinematic.js","webpack:///./src/components/networked-counter.js","webpack:///./src/components/set-yxz-order.js","webpack:///./src/components/nav-mesh-helper.js","webpack:///./src/components/tools/drawing-manager.js","webpack:///./src/systems/userinput/paths.js","webpack:///./src/components/environment-map.js","webpack:///./src/utils/media-highlight-frag.glsl","webpack:///./src/assets/images/cubemap/posx.jpg","webpack:///./src/assets/images/cubemap/negx.jpg","webpack:///./src/assets/images/cubemap/posy.jpg","webpack:///./src/assets/images/cubemap/negy.jpg","webpack:///./src/assets/images/cubemap/posz.jpg","webpack:///./src/assets/images/cubemap/negz.jpg","webpack:///./src/utils/disable-ios-zoom.js","webpack:///./src/App.js","webpack:///./src/utils/component-utils.js","webpack:///./src/components/mute-mic.js","webpack:///./src/components/toggle-flying.js","webpack:///./src/components/in-world-hud.js","webpack:///./src/components/virtual-gamepad-controls.js","webpack:///./src/components/ik-controller.js","webpack:///./src/components/hand-controls2.js","webpack:///./src/components/character-controller.js","webpack:///./src/components/hover-visuals.js","webpack:///./src/components/player-info.js","webpack:///./src/components/hand-poses.js","webpack:///./src/components/freeze-controller.js","webpack:///./src/components/visibility-while-frozen.js","webpack:///./src/components/stats-plus.js","webpack:///./src/components/media-views.js","webpack:///./src/components/avatar-volume-controls.js","webpack:///./src/components/pinch-to-move.js","webpack:///./src/components/pitch-yaw-rotator.js","webpack:///./src/components/position-at-box-shape-border.js","webpack:///./src/components/pin-networked-object-button.js","webpack:///./src/components/unmute-video-button.js","webpack:///./src/components/destroy-at-extreme-distances.js","webpack:///./src/components/camera-tool.js","webpack:///./src/components/clone-media-button.js","webpack:///./src/components/open-media-button.js","webpack:///./src/components/transform-object-button.js","webpack:///./src/components/teleporter.js","webpack:///./src/components/hubs-text.js","webpack:///./src/systems/userinput/sets.js","webpack:///./src/utils/vr-caps-detect.js","webpack:///./src/utils/share.js","webpack:///./src/react-components/state-route.js","webpack:///./src/react-components/promote-client-dialog.js","webpack:///./src/react-components/client-info-dialog.js","webpack:///./src/react-components/loader.js","webpack:///./src/react-components/auto-exit-warning.js","webpack:///./src/react-components/entry-buttons.js","webpack:///./src/react-components/profile-entry-panel.js","webpack:///./src/react-components/media-browser.js","webpack:///./src/react-components/create-object-dialog.js","webpack:///./src/react-components/change-scene-dialog.js","webpack:///./src/react-components/avatar-url-dialog.js","webpack:///./src/react-components/help-dialog.js","webpack:///./src/react-components/invite-dialog.js","webpack:///./src/react-components/invite-team-dialog.js","webpack:///./src/react-components/link-dialog.js","webpack:///./src/react-components/safari-dialog.js","webpack:///./src/react-components/safari-mic-dialog.js","webpack:///./src/react-components/room-settings-dialog.js","webpack:///./src/react-components/close-room-dialog.js","webpack:///./src/systems/tips.js","webpack:///./src/react-components/tip.js","webpack:///./src/react-components/webrtc-screenshare-unsupported-dialog.js","webpack:///./src/react-components/webassembly-unsupported-dialog.js","webpack:///./src/react-components/webvr-recommend-dialog.js","webpack:///./src/react-components/feedback-dialog.js","webpack:///./src/react-components/leave-room-dialog.js","webpack:///./src/react-components/room-info-dialog.js","webpack:///./src/react-components/oauth-dialog.js","webpack:///./src/react-components/tweet-dialog.js","webpack:///./src/react-components/lobby-chat-box.js","webpack:///./src/react-components/chat-command-help.js","webpack:///./src/utils/serialize-element.js","webpack:///./src/react-components/presence-list.js","webpack:///./src/react-components/chat-message.js","webpack:///./src/react-components/in-world-chat-box.js","webpack:///./src/react-components/avatar-editor.js","webpack:///./src/react-components/mic-level-widget.js","webpack:///./src/react-components/output-level-widget.js","webpack:///./src/react-components/photo-message.js","webpack:///./src/react-components/video-message.js","webpack:///./src/react-components/image-message.js","webpack:///./src/react-components/presence-log.js","webpack:///./src/react-components/settings-menu.js","webpack:///./src/react-components/preload-overlay.js","webpack:///./src/react-components/2d-hud.js","webpack:///./src/react-components/spectating-label.js","webpack:///./src/utils/vr-interstitial.js","webpack:///./src/react-components/ui-root.js","webpack:///./src/utils/hub-channel.js","webpack:///./src/utils/physics-utils.js","webpack:///./src/message-dispatch.js","webpack:///./src/scene-entry-manager.js","webpack:///./src/utils/pinned-entity-to-gltf.js","webpack:///./src/subscriptions.js","webpack:///./src/systems/personal-space-bubble.js","webpack:///./src/systems/userinput/devices/mouse.js","webpack:///./src/systems/userinput/array-backed-set.js","webpack:///./src/systems/userinput/devices/keyboard.js","webpack:///./src/systems/userinput/devices/hud.js","webpack:///./src/systems/userinput/devices/xbox-controller.js","webpack:///./src/systems/userinput/pose.js","webpack:///./src/systems/userinput/arm-model.js","webpack:///./src/systems/userinput/devices/copy-sitting-to-standing-transform.js","webpack:///./src/systems/userinput/devices/oculus-go-controller.js","webpack:///./src/systems/userinput/devices/gear-vr-controller.js","webpack:///./src/systems/userinput/devices/oculus-touch-controller.js","webpack:///./src/systems/userinput/devices/daydream-controller.js","webpack:///./src/systems/userinput/devices/vive-controller.js","webpack:///./src/systems/userinput/devices/windows-mixed-reality-controller.js","webpack:///./src/systems/userinput/devices/gyro.js","webpack:///./src/systems/interactions.js","webpack:///./src/systems/userinput/devices/app-aware-mouse.js","webpack:///./src/systems/userinput/devices/touchscreen/assignments.js","webpack:///./src/systems/userinput/devices/app-aware-touchscreen.js","webpack:///./src/systems/userinput/bindings/xforms.js","webpack:///./src/utils/dpad.js","webpack:///./src/systems/userinput/bindings/utils.js","webpack:///./src/systems/userinput/bindings/keyboard-mouse-user.js","webpack:///./src/systems/userinput/bindings/touchscreen-user.js","webpack:///./src/systems/userinput/bindings/keyboard-debugging.js","webpack:///./src/systems/userinput/bindings/oculus-touch-user.js","webpack:///./src/systems/userinput/bindings/vive-user.js","webpack:///./src/systems/userinput/bindings/windows-mixed-reality-user.js","webpack:///./src/systems/userinput/bindings/xbox-controller-user.js","webpack:///./src/systems/userinput/bindings/daydream-user.js","webpack:///./src/systems/userinput/bindings/cardboard-user.js","webpack:///./src/systems/userinput/bindings/oculus-go-user.js","webpack:///./src/systems/userinput/resolve-action-sets.js","webpack:///./src/systems/userinput/devices/gamepad.js","webpack:///./src/systems/userinput/bindings/generic-gamepad.js","webpack:///./src/systems/userinput/userinput.js","webpack:///./src/systems/userinput/userinput-debug.js","webpack:///./src/systems/ui-hotkeys.js","webpack:///./src/systems/cursor-targetting-system.js","webpack:///./src/systems/constraints-system.js","webpack:///./src/systems/two-point-stretching-system.js","webpack:///./src/systems/button-systems.js","webpack:///./src/systems/hover-menu-system.js","webpack:///./src/systems/super-spawner-system.js","webpack:///./src/systems/haptic-feedback-system.js","webpack:///./src/systems/render-manager/hubs-batch-raw-uniform-group.js","webpack:///./src/systems/render-manager-system.js","webpack:///./src/systems/lobby-camera-system.js","webpack:///./src/systems/hubs-systems.js","webpack:///./src/systems/capture-system.js","webpack:///./src/systems/sprites.js","webpack:///./src/systems/post-physics.js","webpack:///./src/components/scalable-when-grabbed.js","webpack:///./src/components/cursor-controller.js","webpack:///./src/components/tools/pen.js","webpack:///./src/utils/sharedbuffergeometry.js","webpack:///./src/utils/sharedbuffergeometrymanager.js","webpack:///./src/components/tools/networked-drawing.js","webpack:///./src/network-schemas.js","webpack:///./src/hub.js","webpack:///./src/utils/concurrent-load-detector.js","webpack:///./src/utils/threejs-allocation-patches.js","webpack:///./src/react-components/dialog-container.js","webpack:///./src/assets/images/warning_icon.png","webpack:///./src/systems/sound-effects-system.js","webpack:///./src/assets/images/warning_icon@2x.png","webpack:///./src/react-components/avatar-preview.js","webpack:///./src/react-components/sign-in-dialog.js","webpack:///./src/assets/stylesheets/media-browser.scss","webpack:///./src/assets/stylesheets/sign-in-dialog.scss","webpack:///./src/assets/stylesheets/hub.scss","webpack:///./src/components/virtual-gamepad-controls.css","webpack:///./src/assets/stylesheets/ui-root.scss","webpack:///./src/assets/stylesheets/entry.scss","webpack:///./src/assets/stylesheets/invite-dialog.scss","webpack:///./src/assets/stylesheets/promote-client-dialog.scss","webpack:///./src/assets/stylesheets/client-info-dialog.scss","webpack:///./src/assets/stylesheets/loader.scss","webpack:///./src/assets/stylesheets/profile.scss","webpack:///./src/assets/stylesheets/avatar-preview.scss","webpack:///./src/assets/stylesheets/create-object-dialog.scss","webpack:///./src/assets/stylesheets/change-scene-dialog.scss","webpack:///./src/assets/stylesheets/avatar-url-dialog.scss","webpack:///./src/assets/stylesheets/link-dialog.scss","webpack:///./src/assets/stylesheets/room-settings-dialog.scss","webpack:///./src/assets/stylesheets/close-room-dialog.scss","webpack:///./src/assets/stylesheets/tip.scss","webpack:///./src/assets/stylesheets/feedback-dialog.scss","webpack:///./src/assets/stylesheets/leave-room-dialog.scss","webpack:///./src/assets/stylesheets/room-info-dialog.scss","webpack:///./src/assets/stylesheets/oauth-dialog.scss","webpack:///./src/assets/stylesheets/tweet-dialog.scss","webpack:///./src/assets/stylesheets/message-entry.scss","webpack:///./src/assets/stylesheets/chat-command-help.scss","webpack:///./src/assets/stylesheets/presence-log.scss","webpack:///./src/assets/stylesheets/presence-list.scss","webpack:///./src/assets/stylesheets/avatar-editor.scss","webpack:///./src/assets/stylesheets/settings-menu.scss","webpack:///./src/assets/stylesheets/preload-overlay.scss","webpack:///./src/assets/stylesheets/2d-hud.scss","webpack:///./src/assets/images/spritesheets/css-spritesheet.css","webpack:///./src/assets/stylesheets/spectating-label.scss","webpack:///./src/utils/qs_truthy.js","webpack:///./src/utils/scene-graph.js","webpack:///./src/utils/auto-box-collider.js","webpack:///./src/loaders/HubsTextureLoader.js","webpack:///./src/utils/media-utils.js","webpack:///./src/axonpark/messages.js","webpack:///./src/utils/i18n.js","webpack:///./src/utils/logging.js","webpack:///./src/components/audio-feedback.js","webpack:///./src/utils/auth-channel.js","webpack:///./src/utils/animation.js","webpack:///./src/utils/three-utils.js","webpack:///./src/utils/material-utils.js","webpack:///./src/utils/mask-email.js","webpack:///./src/react-components/media-tiles.js","webpack:///./src/utils/webgl.js","webpack:///./src/assets/LoadingObject_Atom.glb","webpack:///./src/assets/sfx/teleport-loop.mp3","webpack:///./src/assets/sfx/quickTurn.mp3","webpack:///./src/assets/sfx/tap_mellow.mp3","webpack:///./src/assets/sfx/PenSpawn.mp3","webpack:///./src/assets/sfx/PenDraw1.mp3","webpack:///./src/assets/sfx/PicSnapHey.mp3","webpack:///./src/assets/sfx/welcome.mp3","webpack:///./src/assets/sfx/quack.mp3","webpack:///./src/assets/sfx/specialquack.mp3","webpack:///./src/assets/sfx/pop.mp3","webpack:///./src/assets/sfx/Eb_blip.mp3","webpack:///./src/assets/sfx/tack.mp3","webpack:///./src/assets/sfx/A_bendUp.mp3","webpack:///./src/assets/sfx/suspense.mp3","webpack:///./src/assets/waternormals.jpg","webpack:///./src/utils/identity.js","webpack:///./src/storage/store.js","webpack:///./src/utils/crypto.js","webpack:///./src/utils/link-channel.js","webpack:///./src/utils/focus-utils.js","webpack:///./src/assets/images/mic_denied.png","webpack:///./src/assets/images/mic_denied@2x.png","webpack:///./src/object-types.js","webpack:///./src/assets/avatars/avatars.js","webpack:///./src/telemetry.js","webpack:///./src/utils/debug-log.js","webpack:///./src/utils/threejs-world-update.js","webpack:///./src/components/animation.js","webpack:///./src/components/ambient-light.js","webpack:///./src/components/animation-mixer.js","webpack:///./src/components/css-class.js","webpack:///./src/components/duck.js","webpack:///./src/components/heightfield.js","webpack:///./src/components/hemisphere-light.js","webpack:///./src/components/hide-when-quality.js","webpack:///./src/components/point-light.js","webpack:///./src/components/spot-light.js","webpack:///./src/components/floaty-object.js","webpack:///./src/components/trigger-volume.js","webpack:///./src/components/video-pause-state.js","webpack:///./src/components/debug.js","webpack:///./src/utils/image-bitmap-utils.js","webpack:///./src/systems/nav.js","webpack:///./src/components/event-repeater.js","webpack:///./src/react-components/wrap-with-audio.js","webpack:///./src/utils/next-tick.js","webpack:///./src/utils/permissions-utils.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","6","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","document","createElement","getReticulumFetchUrl","path","absolute","reticulumMeta","invalidatedReticulumMetaThisSession","invalidateReticulumMeta","_invalidateReticulumMeta","this","arguments","getReticulumMeta","_getReticulumMeta","querySelector","version","getAttribute","pool","phx_host","fetch","then","_ref2","_asyncToGenerator","res","json","_x6","phxHostOverride","URLSearchParams","location","search","connectToReticulum","_connectToReticulum","debug","params","qs","getNewSocketUrl","_ref3","socketProtocol","protocol","socketHost","socketPort","process","RETICULUM_SOCKET_SERVER","URL","port","socketUrl","console","log","socketSettings","logger","kind","msg","socket","Socket","connect","onError","endPointPath","endPoint","pathname","newEndPoint","getLandingPageForPhoto","photoUrl","parsedUrl","replace","fetchReticulumAuthenticated","url","method","payload","token","APP","store","state","credentials","retUrl","headers","content-type","authorization","body","JSON","stringify","_ref","text","parse","e","_x","createAndRedirectToNewHub","_x2","_x3","_x4","_x5","_createAndRedirectToNewHub","sceneId","sceneUrl","createUrl","assets","Name","SceneUrl","record","airtableAssets","find","fields","hub","default_environment_gltf_bundle_url","Store","error","update","email","creatorAssignmentToken","creator_assignment_token","creatorAssignmentTokens","hubId","hub_id","embedToken","embed_token","embedTokens","host","getPresenceEntryForSession","presences","sessionId","presence","entries","k","metas","getPresenceContextForSession","context","getPresenceProfileForSession","profile","migrateChannelToSocket","oldChannel","channel","topic","bindings","item","on","event","callback","pushBuffer","timeout","oldJoinPush","joinPush","join","recHooks","receive","status","Promise","resolve","discordBridgesForPresences","channels","values","discordBridges","Array","map","b","boundingBox","THREE","Box3","frustumBox","inverseLightMatrixWorld","Matrix4","tempBox","FRUSTUM_PADDING","NEAR_CLIPPING_PLANE","FAR_CLIPPING_PLANE","verts","Vector3","AFRAME","registerComponent","schema","color","type","intensity","default","castShadow","shadowMapResolution","shadowBias","shadowRadius","init","el","light","DirectionalLight","position","set","target","add","setObject3D","sceneEl","systems","registerLight","rendererSystem","renderer","prevData","Color","applyColorCorrection","copy","shadow","bias","radius","width","height","prevWidth","prevHeight","mapSize","dispose","camera","matrixNeedsUpdate","tick","quality","scene","makeEmpty","traverse","node","geometry","computeBoundingBox","applyMatrix4","matrixWorld","union","min","max","x","y","z","getInverse","expandByPoint","left","right","bottom","top","near","far","updateProjectionMatrix","resizeShadowCameraFrustum","object3D","remove","removeObject3D","Layers","reflection","inWorldHud","exclusive","addEventListener","oldData","obj","layers","mask","layer","oldValue","newValue","enable","disable","removeEventListener","paused","clip","mixerEl","findAncestorWithComponent","updateClip","warn","currentAction","mixer","animations","components","clipName","action","clipAction","enabled","setLoop","LoopRepeat","Infinity","play","destroy","stop","SHAPE","require","loadingObject","GLTFLoader","load","loadingObjectSrc","gltf","batchMeshes","qsTruthy","disableBatching","fileId","fileIsOwned","src","resize","contentType","contentSubtype","animate","mediaOptions","v","showLoader","clearLoadingTimeout","onMediaLoaded","animating","NAF","utils","getNetworkedEntity","networkedEl","updateScale","center","mesh","getObject3D","box","getBox","scaleCoefficient","getScaleCoefficient","scale","multiplyScalar","addVectors","sub","removeShape","id","removeAttribute","dt","loaderMixer","loadingSoundNode","soundEffectsSystem","stopSoundNode","setAttribute","object3DMap","useFancyLoader","clone","Mesh","BoxGeometry","MeshBasicMaterial","AnimationMixer","loadingClip","loadingScaleClip","AnimationClip","VectorKeyframeTrack","setTimeout","BOX","is","isMine","playSoundLooped","SOUND_MEDIA_LOADING","showLoaderTimeout","clearTimeout","updateHoverableVisuals","hoverableVisuals","injectedCustomShaderChunks","uniforms","injectCustomShaderChunks","setFromObject","getBoundingSphere","boundingSphere","physicsShape","shouldUpdateScale","playSoundOneShot","SOUND_MEDIA_LOADED","finish","minHalfExtent","pager","repositionToolbar","addMeshScaleAnimation","initialScale","onComplete","step","lastValue","anim","animatables","Math","Number","MIN_VALUE","config","duration","easing","elasticity","loop","round","targets","complete","anime","_this","thumbnail","canonicalUrl","accessibleUrl","resolveUrl","origin","startsWith","meta","expected_content_type","proxiedUrlFor","guessContentType","fetchContentType","emit","raw","material","isHLS","qsTime","parseInt","searchParams","startTime","hash","substring","reduceAngularFloat","releaseGravity","detail","projection","once","assign","time","dirs","template","batch","includes","HULL","addAnimationComponents","inflate","modelToWorldScale","Error","mayChangeScene","permissions","can","isHubsAvatarUrl","isHubsRoomUrl","isHubsSceneUrl","index","_this2","toolbar","imageSrc","onNext","onPrev","_ensureUI","_this3","hasSetupUI","maxIndex","fetchMaxContentIndex","getElementById","appendChild","importNode","content","nextButton","prevButton","pageLabel","_this4","pageSrc","parentNode","removeChild","takeOwnership","quackPercentage","specialQuackPercentage","_handleGrabStart","pause","rand","random","SOUND_SPECIAL_QUACK","SOUND_QUACK","lerp","start","end","newRot","Quaternion","positionOnly","startPoint","startRotation","quaternion","targetPoint","targetRotDelta","Euler","targetRotation","setFromEuler","premultiply","performance","now","backwards","ranOnePass","tick2","streamerCamera","streamer","getCurrentStreamer","getStreamerCamera","setMatrixWorld","translateZ","from","to","fromRot","toRot","slerp","rotation","setFromQuaternion","isBotMode","Sky","shader","SkyShader","ShaderMaterial","fragmentShader","vertexShader","UniformsUtils","side","BackSide","BoxBufferGeometry","constructor","luminance","turbidity","rayleigh","mieCoefficient","mieDirectionalG","sunPosition","inclination","azimuth","distance","sky","skyScene","Scene","cubeCamera","CubeCamera","updateEnvironmentMap","requestAnimationFrame","theta","PI","phi","cos","sin","normalize","environmentMapComponent","vrEnabled","vr","pmremGenerator","PMREMGenerator","renderTarget","texture","pmremCubeUVPacker","PMREMCubeUVPacker","cubeLods","CubeUVRenderTarget","playerHeight","loadedEvent","moveToSpawnPoint","spawnPoints","querySelectorAll","spawnPoint","getLastWorldPosition","visible","COLLISION_LAYERS","useCustomSpawnPosition","spawnPosition","useCustomSpawnRotation","spawnRotation","useCustomSpawnScale","spawnScale","spawnCooldown","centerSpawnedObject","spawnEvent","animateFromCursor","cooldownTimeout","handPosition","onSpawnEvent","tempSpawnHandPosition","classList","entity","addMedia","ObjectContentOrigins","SPAWNER","cursor","getWorldPosition","getWorldQuaternion","userinput","scenes","interaction","willAnimateFromCursor","paths","actions","rightHand","matrix","rightRemote","held","spawning","activateCooldown","waitForEvent","delay","dur","syncToPhysics","sx","sy","sz","collisionFilterMask","NONE","DEFAULT_SPAWNER","MobileWater","options","undefined","normalSampler","waterNormals","sunDirection","sunColor","waterColor","eye","distortionScale","FrontSide","fog","mirrorShader","merge","UniformsLib","size","ShaderChunk","transparent","lights","reject","TextureLoader","wrapS","wrapT","RepeatWrapping","needsUpdate","Water","speed","forceMobile","waterMesh","waterGeometry","loadWaterNormals","waterNormalMap","waterConfig","textureWidth","textureHeight","device","isMobile","isMobileVR","water","mirrorCamera","setStyle","startColor","middleColor","endColor","startOpacity","middleOpacity","endOpacity","colorCurve","sizeCurve","startSize","endSize","sizeRandomness","ageRandomness","lifetime","lifetimeRandomness","particleCount","startVelocity","endVelocity","velocityCurve","angularVelocity","particleEmitter","ParticleEmitter","updateParticles","textureLoaded","textureLoader","getSanitizedComponentMapping","inputComponent","inputProperty","publicComponents","publicComponent","publicProperty","publicProperties","mappedComponent","mappedProperty","getMappedValue","PHYSICS_CONSTANTS","TYPE","FIT","decayMigration","componentName","componentData","range","decay","mediaInflator","isControlled","networked","hasVolume","templateName","controls","isHubsDestinationUrl","href","owner","persistent","networkId","videoPaused","autoPlay","volume","audioType","hidePlaybackControls","distanceModel","rolloffFactor","refDistance","maxDistance","coneInnerAngle","coneOuterAngle","coneOuterGain","GLTFModelPlus","isHandCollisionTarget","cursorController","mass","STATIC","collisionFilterGroup","INTERACTABLES","euler","orientation","fit","MANUAL","offset","halfExtents","_componentName","nav","zone","found","isMesh","loadMesh","pageIndex","video","loop-animation","indexToEntityMap","enterComponent","enterProperty","enterValue","leaveComponent","leaveProperty","leaveValue","enterComponentMapping","leaveComponentMapping","targetEntity","message","colliders","HEIGHTFIELD","margin","heightfieldDistance","heightfieldData","MESH","ALL","includeInvisible","pushOrUpdateHistory","history","newPathname","newSearch","newLength","__historyLength","_objectSpread","__duplicate","isDuplicate","pushHistoryState","replaceHistoryState","pushHistoryPath","clearHistoryState","popToBeginningOfHubHistory","navigateToPriorPage","len","unsubscribe","listen","go","sluglessPath","split","withSlug","AVATAR_TYPES","LEGACY","SKINNABLE","legacyAvatarIds","avatars","a","getAvatarType","avatarId","indexOf","resp","fetchAvatar","_fetchAvatar","avatar_id","gltf_url","avatar","model","fetchSkinnableAvatar","getAvatarSrc","fetchAvatarGltfUrl","getAvatarThumbnailUrl","_getAvatarThumbnailUrl","files","__webpack_exports__","willRequireUserGesture","showFullScreenIfAvailable","showFullScreenIfWasFullScreen","screenfull__WEBPACK_IMPORTED_MODULE_0__","screenfull__WEBPACK_IMPORTED_MODULE_0___default","hasEnteredFullScreenThisSession","shouldShowFullScreen","isIOS","screenfull","isFullscreen","request","VERTEX_SHADER","FRAGMENT_SHADER","MobileStandardMaterial","[object Object]","args","super","_defineProperty","parameters","uvTransform","Matrix3","diffuse","opacity","aoMapIntensity","aoMap","emissive","emissiveMap","alphaTest","skinning","morphTargets","vertexColors","mobileMaterial","fromStandardMaterial","SOURCES","EMPTY_RESULT","URL_SOURCE_TO_TO_API_SOURCE","images","videos","youtube","gifs","sketchfab","poly","twitch","favorites","MEDIA_SOURCE_DEFAULT_FILTERS","SEARCH_CONTEXT_PARAMS","MediaSearchStore","EventTarget","dispatchEvent","CustomEvent","urlSource","getUrlMediaSource","previousSource","urlParams","requestIndex","currentRequestIndex","locationSearchParams","isMy","param","source","navigator","languages","singular","credentialsAccountId","toString","lastSavedUrl","isFetching","nextCursor","next_cursor","lastFetchedUrl","legacyAvatar","preview","gltfs","delta","goBack","filter","query","delete","keepSource","keepNav","_stashedParams","_stashedSource","q","_sourceNavigate","hideNav","useLastStashedParams","currentQuery","getSearchClearedSearchParams","useValue","hasAccountWithAvatars","_hasAccountWithAvatars","stashLastSearchParams","_stashLastSearchParams","hasMediaPath","setHistory","_update","Airtable","configure","endpointUrl","apiKey","base","airtableAssetsInitialState","DarkLogo","Icon","airtableMessages","select","view","firstPage","err","records","StateLink","React","Component","handleClick","props","onClick","defaultPrevented","button","metaKey","altKey","ctrlKey","shiftKey","isModifiedEvent","preventDefault","stateKey","stateValue","stateDetail","render","innerRef","className","children","react__WEBPACK_IMPORTED_MODULE_0___default","ref","PropTypes","bool","string","func","scaledThumbnailUrlFor","getCustomGLTFParserURLResolver","nonCorsProxyDomains","CORS_PROXY_SERVER","commonKnownContentTypes","glb","png","jpg","jpeg","pdf","mp4","mp3","farsparkEncodeUrl","str","btoa","encodeURIComponent","_","p1","String","fromCharCode","b64EncodeUnicode","farsparkUrl","urlHostname","hostname","hasIndex","domain","endsWith","gltfUrl","test","corsProxyPrefix","originalUrlParts","decodeURIComponent","dataUrlRegex","matches","match","extension","pop","hubsSceneRegex","hubsAvatarRegex","hubsRoomRegex","raycast","acceleratedRaycast","gltfCache","Map","cache","count","retain","has","cacheItem","release","disposeNode","inflightGltfs","extractZipFile","promisifyWorker","SketchfabZipWorker","defaultInflator","multiple","isArray","cloneSkinnedMesh","cloneLookup","parallelTraverse","sourceNode","clonedNode","boundsTree","sourceMesh","isSkinnedMesh","sourceBones","skeleton","bones","clonedMesh","sourceBone","bindMatrix","cloneGltf","getHubsComponents","hubsComponents","userData","gltfExtensions","MOZ_hubs_components","HUBS_components","legacyComponents","componentKey","inflator","inflateEntities","templates","isRoot","childEntities","child","entityComponents","append","uuid","order","matrixAutoUpdate","identity","decompose","toLowerCase","parent","gltfIndex","attachTemplate","root","templateRoot","targetEls","cloneNode","attributes","loadGLTF","_loadGLTF","preferredTechnique","onProgress","jsonPreprocessor","fileMap","loadingManager","LoadingManager","setURLModifier","gltfLoader","parser","createParser","extensions","oldHeightfieldNode","nodes","heightfield","runMigration","materials","MOZ_alt_materials","altMaterialIndex","extras","Object3D","DefaultMatrixAutoUpdate","mapMaterials","isMeshStandardMaterial","keys","forEach","revokeObjectURL","useCache","loadTemplates","applySrc","batchManagerSystem","removeObject","templateEl","firstElementChild","loadModel","technique","promise","charAt","assetEl","lastSrc","inflatedEl","disposeLastInflatedEl","addObject","initMixer","hasBufferGeometry","isBufferGeometry","hasBoundsTree","geo","triCount","MeshBVH","strategy","maxDepth","object3DToSet","nextTick","inflatedEntity","prop","inflateComponents","rewires","applyEnvironmentMap","f","format","worker","nextItemId","outstanding","onmessage","handlers","transfer","postMessage","waitForDOMContentLoaded","readyState","eventName","eventObj","ctx","AudioContext","getContext","resume","PositionalAudio","updateMatrixWorld","force","setInitial","_lastPosition","_lastOrientation","_lastListenerPosition","panner","listener","applyQuaternion","abs","EPSILON","positionX","positionY","positionZ","setPosition","setOrientation","unmutedBoneName","mutedBoneName","onPos","offPos","onStateToggled","unmutedBone","getObjectByName","mutedBone","modelLoaded","updateMuteState","muted","lastVisible","updateMatrices","selfDestruct","updateOffset","QUARTER_CIRCLE","offsetVector","localToWorld","worldToLocal","rotateOnAxis","TWOPI","head","lookCutoff","animRange","yawCutoff","onChildHovered","removeHoverEvents","isYLocked","lockedHeadPositionY","lookDir","lookEuler","hoverableChildren","hud","pitch","RAD2DEG","yawDif","deltaAngle","forceHudVisible","activity","hasHoveredInWorldHud","clamp","hudLocked","hudOutOfView","DEG2RAD","image","hoverImage","activeImage","activeHoverImage","disabledImage","active","disabled","tooltip","tooltipText","activeTooltipText","onHover","hovering","updateButtonState","onHoverOut","sprite","textHoverColor","textColor","backgroundHoverColor","backgroundColor","textEl","noop","dependencies","block","clientId","hubChannel","hide","mute","kick","updateVisibility","canOrWillIfCreator","mediaLoader","mediaImage","mediaVideo","currentContentType","matchesType","matchesSubtype","whenPinned","_updateUI","_updateUIOnStateChange","targetEl","isPinned","pinnable","pinned","pinnedAndForbidden","left_hand_pose","right_hand_pose","_fireEventsAndAnimate","pinStateChanged","currentScale","isHeld","leftHand","wasHeld","modifyGravityOnRelease","gravity","angularDamping","linearDamping","linearSleepingThreshold","angularSleepingThreshold","DEFAULT_INTERACTABLE","activate","track","selector","cameraSystem","myCamera","getMyCamera","focus","isVisible","shouldBeVisible","onStateChange","newOwner","transform","oneof","stateadded","stateremoved","withPermission","needsPermission","updatePermissions","hasPermission","onPermissionsUpdated","requireOwnership","angle","targetPos","snappedRot","snappedQ","snappedXForm","snappedXFormWorld","tempVector","_applyMaskedTargetRotation","started","compose","multiplyMatrices","_updateMatrixAutoUpdate","dim","onFrozenStateChange","getHoverMenu","applyHoverState","menuPromise","menu","allowed","setScalar","frustumCulled","currentActiveCamera","activeCameraEl","setActiveCamera","canvas","matrixIsModified","playhead","poseIndex","overflow","poses","timestamp","isHoldable","offersHandConstraint","offersRemoteConstraint","singleActionButton","holdableButton","isPen","isHoverMenuChild","didUpdateOnce","_updateBillboard","_updateIsInView","schedule","unschedule","isInView","frustum","Frustum","frustumMatrix","boxTemp","expandBox","playerCamera","screenCamera","projectionMatrix","matrixWorldInverse","setFromMatrix","intersectsBox","isInViewOfCamera","setFromMatrixPosition","lookAt","lastSync","syncAll","validMaterials","_utils_material_utils__WEBPACK_IMPORTED_MODULE_0__","_utils_permissions_utils__WEBPACK_IMPORTED_MODULE_1__","interactorOneTransform","interactorTwoTransform","enableSweepingEffect","Sphere","sweepParams","forEachMaterial","contains","meshToEl","isFrozen","showEffect","showHoverEffect","interactorOne","interactorTwo","hovered","toArray","worldY","elements","scaledRadius","uniform","hubs_EnableSweepingEffect","hubs_IsFrozen","hubs_SweepParams","hubs_HighlightInteractorOne","hubs_InteractorOnePos","hubs_HighlightInteractorTwo","hubs_InteractorTwoPos","hubs_Time","registerSystem","registry","queues","frameIndex","queue","idx","invert","updateComponentState","inVRMode","class","handler","permissionName","fetchPermissions","onBlur","onFocus","onTimeout","onEnterVR","isOculusBrowser","userAgent","enteredVR","lastTimeoutCheck","exitTimeout","cameraEls","cameraUpdateCount","ticks","register","_onOwnershipChange","deregister","avatarUpdated","onAvatarUpdated","updateViewfinder","ENVIRONMENT","AVATAR","HANDS","UNOWNED_INTERACTABLE","counter","_syncCounterRegistration","timestamps","setBodyKinematic","didThisOnce","locked","clear","_destroyOldest","oldestEl","minTs","MAX_VALUE","ts","_destroy","teleporters","queryCollisionEntities","_onComponentInitialized","drawingToPen","drawingEl","drawing","createDrawing","getDrawing","pen","returnDrawing","toggleScreenShare","snapRotateLeft","snapRotateRight","logDebugFrame","logInteractionState","cameraDelta","lobbyCameraDelta","characterAcceleration","boost","startGazeTeleport","stopGazeTeleport","spawnPen","ensureFrozen","toggleFreeze","thaw","muteMic","toggleFlying","focusChat","focusChatCommand","toggleCamera","takeSnapshot","mediaExit","mediaSearch1","mediaSearch2","mediaSearch3","mediaSearch4","mediaSearch5","mediaSearch6","mediaSearch7","mediaSearch8","transformModifier","rayObjectRotation","pose","hideLine","grab","drop","modDelta","startDrawing","stopDrawing","undoDrawing","penNextColor","penPrevColor","scalePenTip","scaleGrabbedGrabbable","mediaVolumeMod","switchDrawMode","startTeleport","stopTeleport","thumb","middleRingPinky","exitMirror","haptics","actuators","mouse","coords","movementXY","buttonLeft","buttonRight","wheel","smartMouse","cursorPose","touchscreen","touchCameraDelta","gyroCameraDelta","pinch","initialDistance","currentDistance","isTouching","isTouchingGrabbable","tap1","tap2","tap3","tap4","tap5","gyro","averageDeltaX","averageDeltaY","penButton","keyboard","gamepad","gamepadIndex","buttonIndex","pressed","touched","axis","axisIndex","xbox","buttonName","axisName","axesSum","oculusgo","trigger","touchpad","axisX","axisY","gearVRController","daydream","rightOculusTouch","leftOculusTouch","axes","wmrController","wmr","grip","joystick","vive","createDefaultEnvironmentMap","_createDefaultEnvironmentMap","urls","cubeMapPosX","cubeMapNegX","cubeMapPosY","cubeMapNegY","cubeMapPosZ","cubeMapNegZ","CubeTextureLoader","RGBFormat","environmentMap","envMap","disableiOSZoom","detect_browser__WEBPACK_IMPORTED_MODULE_0__","detectOS","lastTouchAtMs","ev","Date","getTime","isDoubleTouch","App","_storage_store__WEBPACK_IMPORTED_MODULE_0__","_storage_media_search_store__WEBPACK_IMPORTED_MODULE_1__","mediaSearchStore","setQuality","registerComponentInstance","component","componentRegistry","deregisterComponentInstance","playerInfos","playerInfo","playerSessionId","streaming","bindAllEvents","events","unbindAllEvents","eventSrc","toggleEvents","muteEvents","unmuteEvents","onToggle","onMute","onUnmute","connection","adapter","SOUND_TOGGLE_MIC","enableMicrophone","removeState","addState","mic","spawn","cameraBtn","inviteBtn","background","flyBtn","updateButtonStates","evt","onMicClick","onSpawnClick","onPenClick","SOUND_SPAWN_PEN","onCameraClick","onFlyClick","playerRig","fly","onInviteClick","onEnterVr","onExitVr","onFirstInteraction","onMoveJoystickChanged","onMoveJoystickEnd","onLookJoystickChanged","onLookJoystickEnd","mockJoystickContainer","styles","leftMock","mockJoystick","leftMockSmall","inner","rightMock","rightMockSmall","leftTouchZone","touchZone","leftStick","nipplejs","fadeTime","rightTouchZone","rightStick","inVr","moving","rotating","moveEvent","rotateYEvent","rotateXEvent","off","radian","style","display","leftController","rightController","LEGACY_HAND_ROTATIONS","makeRotationFromEuler","HAND_ROTATIONS","leftEye","rightEye","neck","chest","hips","rotationSpeed","alwaysUpdate","_runScheduledWork","flipY","makeRotationY","cameraForward","headTransform","hipsPosition","invHipsToHeadVector","middleEyeMatrix","middleEyePosition","invMiddleEyeToHead","cameraYRotation","cameraYQuaternion","invHipsQuaternion","headQuaternion","rootToChest","invRootToChest","ikRoot","findIKRoot","hasConvergedHips","lastCameraTransform","divideScalar","makeTranslation","negate","updateMatrix","hasNewCameraTransform","equals","forceIkUpdate","setFromRotationMatrix","epsilon","u","w","inverse","handRotations","avatarType","updateHand","handRotation","handObject3D","controllerObject3D","isLeft","handMatrix","spaceInvader","handHiddenByPersonalSpace","invading","multiply","cameraWorld","pos","containsPoint","POSES","poseForFingers","hand","subpath","previous","current","groundAcc","pivot","snapRotationDegrees","navGroup","navNode","velocity","accelerationInput","pendingSnapRotationMatrix","_withinWarningLimit","_warningCount","setAccelerationInput","setAngularVelocity","leftRotationMatrix","rightRotationMatrix","reset","SOUND_SNAP_ROTATE","teleportTo","rig","deltaFromHeadToTargetForHead","targetForHead","targetForRig","targetWorldPosition","pathfinder","getGroup","_setNavNode","clampStep","move","trans","transInv","pivotPos","rotationAxis","yawMatrix","rotationMatrix","rotationInvMatrix","pivotRotationMatrix","pivotRotationInvMatrix","startPos","startScale","deltaSeconds","userinputAngularVelocity","rotationDelta","acc","makeRotationAxis","updateVelocity","lengthSq","setPositionOnNavMesh","_warnWithWarningLimit","getClosestNode","zones","dvx","dvz","handleLeftVisuals","handleRightVisuals","hadLeftVisualLastFrame","hadRightVisualLastFrame","interactingElement","hideVisual","ensureAvatarNodes","some","originalRoot","scale-audio-feedback","avatarSrc","displayName","communityIdentifier","isOwner","isRecording","applyProperties","updateDisplayName","applyDisplayName","handleModelError","isLocalPlayerInfo","networkedEntity","getCreator","playerPresence","updateDisplayNameFromPresenceMeta","presenceMeta","recording","roles","nametagEl","communityIdentifierEl","recordingBadgeEl","modBadgeEl","modelEl","resetToRandomLegacyAvatar","open","thumbDown","indexDown","mrpDown","thumbUp","point","fist","NETWORK_POSES","animatePose","suffix","networkField","getNetworkedAvatar","networkedAvatar","parentEl","prev","curr","fadeOut","fadeIn","setHandPose","toggleEvent","hasFoundFreeze","frozen","SOUND_FREEZE","SOUND_THAW","withinDistance","requireHoverOnNonMobile","camWorldPos","objWorldPos","cam","hoverableSearch","hoverable","shouldNotBeVisible","isWithinDistance","distanceToSquared","isTransforming","transforming","toggle","onExpand","onCollapse","stats","threeStats","aframeStats","plugins","rStats","css","fps","caption","below","batchdraws","batchinstances","batchatlassize","groups","createStats","statsEl","statsHeaderEl","statsTitleEl","innerHTML","collapseEl","insertBefore","firstChild","fpsEl","lastFpsUpdate","lastFps","frameCount","inVR","vrStatsEnabled","initVRStats","lastUpdate","vrPanel","whiteSpace","baseline","depthTest","toggleVRStats","physics","addComponent","removeComponent","beforeStep","afterStep","frame","batchingEnabled","batchManager","batches","instanceCount","atlas","arrayDepth","toFixed","info","calls","triangles","show","ONCE_TRUE","TYPE_IMG_PNG","parseGIF","GIFWorker","VOLUME_LABELS","GIFTexture","Texture","frames","delays","disposals","_ctx","generateMipmaps","isVideoTexture","minFilter","NearestFilter","frameStartTime","clearRect","drawImage","arrayBuffer","rawImageData","delayTimes","loadCnt","img","Image","onload","encoding","sRGBEncoding","LinearFilter","catch","videoEl","autoplay","preload","crossOrigin","createVideoTexture","createVideoEl","VideoTexture","streamClientId","stream","getMediaStream","srcObject","MediaStream","getVideoTracks","HLS","isSupported","baseUrl","hls","xhrSetup","xhr","buildAbsoluteURL","loadSource","attachMedia","Events","ERROR","fatal","ErrorTypes","NETWORK_ERROR","startLoad","MEDIA_ERROR","recoverMediaError","canPlayType","onerror","hasResolved","resolveOnce","poll","videoHeight","videoWidth","scaleToAspectRatio","ratio","disposeTexture","HTMLVideoElement","textureCache","inflightTextures","errorImage","errorImageSrc","errorTexture","magFilter","errorCacheItem","timeFmt","floor","h","tickRate","syncTolerance","onPauseStateChange","tryUpdateVideoPlaybackState","updateSrc","seekForward","seekBack","volumeUp","volumeDown","snap","changeVolumeBy","togglePlaying","videoMutedAt","localSnapCount","isSnapping","onSnapImageLoaded","hoverMenu","playbackControls","playPauseButton","volumeUpButton","volumeDownButton","seekForwardButton","seekBackButton","snapButton","timeLabel","volumeLabel","updateVolumeLabel","updateHoverMenuBasedOnLiveState","updatePlaybackState","applyPersistentFirstSync","getNetworkOwner","audioListener","AudioListener","cameraEl","videoIsLive","currentTime","SOUND_CAMERA_TOOL_TOOK_SNAPSHOT","blob","toBlob","file","File","addAndArrangeMedia","_ignorePauseStateChanges","audio","gain","_playbackStateChangeTimeout","cleanUp","audioSource","createMediaElementSource","setDistanceModel","setRolloffFactor","setRefDistance","setMaxDistance","Audio","setNodeSource","updateLiveState","levels","currentLevel","details","live","LEVEL_SWITCHED","SphereBufferGeometry","PlaneBufferGeometry","DoubleSide","volumeMod","disconnect","_hasRetainedTexture","currentSrcIsRetained","createGIFTexture","createImageTexture","sound","pinchDelta","degToRad","radToDeg","minPitch","maxPitch","yaw","onRotateX","pendingXRotation","look","deltaPitch","deltaYaw","lookX","lookY","HALF_PI","THREE_HALF_PI","forward","back","zero","dir","halfExtent","_updateBox","_setupTarget","opening","wasVisible","scaleChanged","previousScaleX","previousScaleY","previousScaleZ","isAnimating","targetPosition","pointOnBoxFace","pointOnBoxFaceToCamera","boxCenter","tempParentWorldScale","boxFaceNormal","forceNewExtents","targetSquareDistance","targetDir","targetHalfExtentStr","targetHalfExtent","targetCameraDot","halfExtentStr","subVectors","cameraAngleDotBoxNormal","dot","squareDistance","setFromMatrixScale","sqrt","targetScale","finalScale","tipSelector","labelSelector","tipEl","labelEl","onHovered","onUnhovered","wasPinned","SOUND_PIN","_discordBridges","canPin","getPromotionTokenForFile","xMin","xMax","yMin","yMax","zMin","zMax","_checkForDestroy","cameraModelPromise","cameraModelSrc","pathsMap","player-right-controller","player-left-controller","videoCodec","codec","MediaRecorder","isTypeSupported","videoMimeType","hasWebGL2","allowVideo","CAPTURE_WIDTH","CAPTURE_HEIGHT","CAPTURE_DURATIONS","DEFAULT_CAPTURE_DURATION","snapCanvas","pixels","imageData","createImageData","bitmap","createImageBitmap","captureDuration","captureAudio","label","showCameraViewfinder","WebGLRenderTarget","RGBAFormat","depth","stencil","PerspectiveCamera","viewfinderInViewThisFrame","updateUI","aspect","screen","selfieScreen","labelActionBackground","labelBackground","durationLabel","snapIcon","recordIcon","recordAlphaIcon","snapMenu","cancelButton","nextDurationButton","prevDurationButton","snapClicked","cancelSnapping","changeDuration","stopButton","stopRecording","captureAudioButton","captureAudioIcon","updateRenderTargetNextTick","findIndex","newIdx","trackTarget","playerHead","SOUND_CAMERA_TOOL_COUNTDOWN","snapCountdown","countdownInterval","setInterval","camera_tool_asyncToGenerator","clearInterval","takeSnapshotNextTick","beginRecording","hasDuration","isPhoto","isRecordingUnbound","videoRecorder","showActionLabelBackground","videoContext","videoCanvas","videoImageData","videoPixels","Uint8Array","captureStream","selfAudio","getAudioTracks","destination","createMediaStreamDestination","getInput","createMediaStreamSource","addTrack","mimeType","chunks","recordingStartTime","ondataavailable","videoCountdown","videoCountdownInterval","_free","onstop","recordingDuration","Blob","playerIsBehindCamera","MAX_DURATION_TO_LIMIT_LOOPS","objectType","ObjectTypes","CAMERA","cancel","heldLeftHand","heldRightHand","heldRightRemote","heldThisFrame","grabPath","isHolding","updateSnapMenuOrientation","isHoldingTrigger","isHoldingSnapshotTrigger","snapTriggerTimeout","releaseInterval","tock","tempHeadScale","headEl","playerHud","hudEl","analyser","getAudioFeedbackScale","playerHudWasVisible","spriteSystem","tmpVRFlag","tmpOnAfterRender","onAfterRender","videoRenderTarget","setRenderTarget","srcX0","srcY0","srcX1","srcY1","dest","dstX0","dstY0","dstX1","dstY1","gl","srcFramebuffer","properties","__webglFramebuffer","destFramebuffer","bindFramebuffer","READ_FRAMEBUFFER","DRAW_FRAMEBUFFER","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","blitFramebuffer","COLOR_BUFFER_BIT","LINEAR","readRenderTargetPixels","putImageData","snapPixels","RENDER_WIDTH","pixelsToPNG","grabberId","grabberPaths","playerWorld","playerToCamera","cameraForwardPoint","cameraForwardWorld","AMMO_BODY_ATTRIBUTES","TRANSFORM_MODE","AXIS","PUPPET","CURSOR","ALIGN","SCALE","STEP_LENGTH","CAMERA_WORLD_QUATERNION","CAMERA_WORLD_POSITION","TARGET_WORLD_QUATERNION","v2","q2","onGrabStart","transformSystem","startTransform","onGrabEnd","stopTransform","dxStore","dxApplied","dyAll","dyStore","dyApplied","puppet","initialControllerOrientation","initialControllerOrientation_inverse","initialObjectOrientation","currentControllerOrientation","controllerOrientationDelta","planarInfo","plane","wireframe","normal","intersections","previousPointOnPlane","currentPointOnPlane","deltaOnPlane","finalProjectedVec","startPlaneCasting","raycaster","sign","sign2","dxAll","hasScaled","hasRotated","hasRecentered","puppetingTick","cursorAxisOrScaleTick","cameraToPlaneDistance","intersection","projectOnPlane","modify","setFromAxisAngle","scaleFactor","newScale","FORWARD","TWO_PI","RayCurve","numPoints","BufferGeometry","vertices","Float32Array","uvs","addAttribute","BufferAttribute","setDynamic","drawMode","TriangleStripDrawMode","direction","parabolicCurve","p0","v0","out","setDirection","UP","cross","setWidth","setPoint","posA","posB","checkLineIntersection","meshes","referenceNormal","landingMaxAngle","hitPoint","intersects","intersectObjects","collisionNormal","angleNormals","angleTo","isValidNormalsAngle","face","LANDING_NORMAL","vecHelper","confirm","collisionEntities","hitCylinderColor","hitCylinderRadius","outerRadius","hitCylinderHeight","isTeleporting","rayCurve","teleportEntity","parabola","hit","Raycaster","rigWorldPosition","newRigWorldPosition","teleportOriginWorldPosition","teleportEventDetail","oldPosition","newPosition","prevHitHeight","hitEntity","createHitEntity","stopPlayingTeleportSound","teleportingSound","sfx","timeTeleporting","playSoundLoopedWithGain","SOUND_TELEPORT_START","characterController","SOUND_TELEPORT_END","collidedIndex","timeSegment","percentToDraw","segmentT","hitEntityOpacity","easeOutIn","dRadii","outerScale","easeIn","outerTorus","torus","cylinder","primitive","radiusTubular","segmentsRadial","segmentsTubular","segmentsHeight","openEnded","MAX_ANISOTROPY","computeWidth","wrapPixels","wrapCount","widthFactor","FONTS","roboto","font","ch","chars","yoffset","sum","digitsum","digits","xadvance","computeFontWidthFactor","ImageLoader","anisotropy","loadTexture","align","oneOf","anchor","letterSpacing","lineHeight","tabSize","xOffset","zOffset","shaderData","getShaderData","shaderObject","shaders","Shader","createTextGeometry","attrName","updateFont","currentFont","updateGeometry","updateLayout","parseSide","all","pages","layout","geometryComponent","textScale","descender","TypeError","ascender","geometryUpdateBase","geometryUpdateData","newLineRegex","tabRegex","isFinite","common","sets","detect","browser","VR_DEVICE_AVAILABILITY","yes","no","maybe","GENERIC_ENTRY_TYPE_DEVICE_BLACKLIST","getAvailableVREntryTypes","_getAvailableVREntryTypes","ua","isSamsungBrowser","isWebVRCapableBrowser","hasNativeWebVRImplementation","isDaydreamCapableBrowser","isIDevice","isFirefoxBrowser","isUIWebView","mediaDevices","safari","isCardboardCapableBrowser","displays","getVRDisplays","generic","cardboard","gearvr","isMaybeGearVRCompatibleDevice","isMaybeDaydreamCompatibleDevice","capabilities","canPresent","canShare","share","opts","title","tweetLink","StateRoute","_this$props","routeProps","_objectWithoutProperties","react_default","es_Route","_extends","PromoteClientDialog","dialog_container","promote_client_dialog_extends","index_es","confirmButton","onConfirm","onClose","ClientInfoDialog","client_info_dialog_defineProperty","avatarThumbnailUrl","performConditionalSignIn","client_info_dialog_asyncToGenerator","addOwner","getPresenceEntry","showNonHistoriedDialog","removeOwner","unhide","componentDidMount","setState","mayKick","mayMute","targetIsOwner","targetIsCreator","creator","targetIsSignedIn","signed_in","mayAddOwner","mayRemoveOwner","isHidden","client_info_dialog_extends","clientInfoDialog","wide","roomInfo","clientProfileImage","clientActionButtons","buttonIcon","add_owner_default","remove_owner_default","Loader","loader_defineProperty","loadingNum","loadedNum","doneWithInitialLoad","loadingTimeout","tryFinishLoading","environmentSceneLoaded","onLoaded","onObjectLoading","onObjectLoaded","componentWillUnmount","nomore","loaderStyles","loadingText","progress","usual","locale","lang","messages","loadingIcon","finished","AutoExitWarning","secondsRemaining","wrap_with_audio","onCancel","propTypes","number","EntryButton","cx","entryButton","entryButtonSecondary","secondary","iconSrc","icon","contents","prefixMessageId","bolded","mediumMessageId","subtitle","isInHMD","TwoDEntryButton","entryButtonProps","MobileScreenEntryImg","DesktopScreenEntryImg","GenericEntryButton","GenericVREntryImg","DaydreamEntryButton","DaydreamEntryImg","ProfileEntryPanel","profile_entry_panel_defineProperty","getStateFromProfile","hasChangedName","hasChangedNowOrPreviously","hasAcceptedProfile","stopPropagation","entry","profile_entry_panel_asyncToGenerator","storeUpdated","nameInput","setAvatarFromMediaResult","refetchAvatar","componentDidUpdate","_prevProps","prevState","formatMessage","intl","profileEntry","close","react_fontawesome_index_es","faTimes","onSubmit","saveStateAndFinish","form","classNames","darkened","htmlFor","displayNameOverride","formFieldText","handleTextFieldFocus","handleTextFieldBlur","onChange","required","spellCheck","pattern","SCHEMA","definitions","inp","avatar_preview","avatarGltfUrl","account_id","state_link","hideDelete","returnToProfile","editAvatar","faPencilAlt","chooseAvatar","sourceNavigateWithNoNav","formSubmit","links","rel","logo","injectIntl","PRIVACY_POLICY_LINKS","DEFAULT_FACETS","MediaBrowser","media_browser_defineProperty","facets","showNav","selectNextResult","clearStashedQueryOnClose","newState","getStoreAndHistoryState","selectEntry","inputRef","getUrlSource","suggestions","forceNow","_sendQueryTimeout","filterQueryNavigate","lucky_query","handleQueryUpdated","onMediaSearchResultEntrySelected","sourceNavigate","facet","pushExitMediaBrowserHistory","isSceneApiType","isAvatarApiType","dialog","clearStashedQuery","pageNavigate","browserDiv","scrollTop","sourceChanged","showCustomOption","hideSearch","showEmptyStringOnNoResult","handleCustomClicked","showCustomMediaDialog","mediaBrowser","header","noSearch","headerLeft","headerCenter","favoritesHeader","faStar","faSearch","autoFocus","placeholder","onKeyDown","handleEntryClicked","trim","blur","engineAttribution","engineAttributionContents","headerRight","createButton","faLink","faCloudUploadAlt","createLink","handleSourceClicked","navSource","navSourceSelected","navRightPad","navScrollArrow","faAngleRight","handleFacetClicked","media_tiles","handlePager","emptyString","attributionHostnames","giphy.com","giphyLogo","media.giphy.com","DEFAULT_OBJECT_URL","instructions","references","mobileInstructions","desktopInstructions","lastUrl","fileInputId","CreateObjectDialog","create_object_dialog_defineProperty","fileName","attributionImage","validity","valid","fileInput","onCreate","other","create_object_dialog_objectWithoutProperties","smallButton","cancelIcon","uploadButton","uploadIcon","faPaperclip","filenameLabel","leftSideOfInput","urlInput","onUrlChange","create_object_dialog_extends","onCreateClicked","addMediaForm","hideFileInput","onFileChange","inputBorder","buttons","actionButton","ChangeSceneDialog","change_scene_dialog_defineProperty","onChangeClicked","changeSceneForm","spokeCreate","spokeLaunch","AvatarUrlDialog","avatar_url_dialog_defineProperty","avatarUrlDialog","HelpDialog","help_dialog_extends","textAlign","InviteDialog","invite_dialog_defineProperty","copyButtonActive","shareButtonActive","link","entryCode","embedUrl","entryCodeString","num","pad","shortLinkText","shortLink","embedText","modal","isModal","attachPoint","hubLinkLink","code","digit","readOnly","linkButton","copyClicked","allowShare","shareClicked","embed","showEmbedTip","embedTipWrap","embedTip","embedTipAttachPoint","hasPush","subscribe","onSubscribeChanged","checked","isSubscribed","enterVrButton","InviteTeamDialog","invite_team_dialog_defineProperty","inviteButtonText","requestSupport","invite_team_dialog_extends","inviteClicked","LinkDialog","linkCode","codeLoadingPanel","imageHeader","LinkDialogHeader","keepOpen","closeButton","SafariDialog","safari_dialog_defineProperty","copyLinkButtonText","onCopyClicked","copyLinkClicked","safari_dialog_extends","SafariMicDialog","safari_mic_dialog_extends","reload","RoomSettingsDialog","room_settings_dialog_defineProperty","initialSettings","renderCheckbox","member_permission","permission","permissionDisabled","member_permissions","room_settings_dialog_objectSpread","room_settings_dialog_extends","roomSettingsForm","autoComplete","nameField","newMemberPermissions","spawn_and_move_media","spawn_camera","pin_objects","permissionsGroup","CloseRoomDialog","close_room_dialog_extends","LOCAL_CLOSE_TIPS","KEEP_ACTIVE_AFTER_GLOBAL_CLOSE","localStorageCache","finishedScopes","tipPlatform","platformTips","desktop","mobile","standalone","isTipFinished","tip","localStorage","getItem","markTipFinished","storeData","setItem","handleTipClose","fullTip","scope","tips","VALIDATORS","activeSets","cursorHoldingPen","locomotion","accel","turning","spawn_menu","mediaCounter","freeze_gesture","cursorHoldingInteractable","cursorHoveringOnInteractable","menu_hover","invite","cursorHoldingCamera","object_grab","object_rotate_button","object_scale_button","object_recenter_button","object_pin","hasPinned","object_zoom","object_scale","pen_color","pen_size","pen_mode","freeze_mode","video_share_mode","mute_mode","feedback","entryCount","activeTips","_finishedScopes","_performStep","_userinput","_mediaCounter","prevTop","prevBottom","chosenTip","finishCount","Tip","tipRegion","broadcastTarget","tipBody","splitTip","splitTipIcon","tipLink","tipRoot","tipCancel","WebRTCScreenshareUnsupportedDialog","webrtc_screenshare_unsupported_dialog_extends","flexDirection","alignItems","fontSize","WebAssemblyUnsupportedDialog","webassembly_unsupported_dialog_extends","WebVRRecommendDialog","webvr_recommend_dialog_extends","FeedbackDialog","feedback_dialog_extends","formFrame","frameBorder","marginHeight","marginWidth","LeaveRoomDialog","leave_room_dialog_extends","leaveRoom","messageType","destinationUrl","RoomInfoDialog","toAttributionDiv","attribution","attributionName","attributionAuthor","author","attributions","hubName","room_info_dialog_extends","sceneScreenshot","screenshot_url","sceneDetails","sceneMain","sceneName","sceneCreator","sceneAttributions","sceneButtons","OAuthDialog","renderSignInDisclaimer","oauthTypeName","privacyNotice","renderTweetDisclaimer","twitterMessage","oauthInfo","closable","oauth_dialog_extends","oauthButtons","oauthButton","oauthTwitterButton","oauthDiscordButton","array","emojiPlugin","createEmojiPlugin","hashtagPlugin","createHashtagPlugin","linkifyPlugin","createLinkifyPlugin","counterPlugin","createCounterPlugin","addEmoji","emoji","editorState","contentState","getCurrentContent","entityKey","createEntity","emojiUnicode","getLastCreatedEntityKey","currentSelectionState","getSelection","emojiAddedContent","emojiEndPos","blockSize","afterRemovalContentState","Modifier","removeRange","targetSelection","getSelectionAfter","insertText","getAnchorOffset","blockKey","getAnchorKey","getBlockForKey","getLength","newEditorState","EditorState","forceSelection","TweetDialog","createEditorStateWithText","editorRef","sendTweet","media_stored_file_url","getPlainText","posting","posted","renderPostedDialog","tweet_dialog_extends","allowOverflow","tweetButton","renderTweetDialog","EmojiSuggestions","EmojiSelect","CharCounter","additionalClass","dialogBackground","tweet","editor","editorInner","draft_js_plugins_editor_lib_default","emojiButton","emojiSuggestions","limit","media","tweetLoader","LobbyChatBox","lobby_chat_box_defineProperty","pendingMessage","onSendMessage","textRows","pendingMessageTextareaHeight","pendingMessageFieldHeight","discordSnippet","occupantSnippet","occupantCount","messageEntryPlaceholder","sendMessage","messageEntry","messageEntryDisabled","messageEntryInput","rows","messageEntryButton","messageEntrySubmit","faPaperPlane","ChatCommandHelp","commands","commandHelp","commandHelpOnTop","onTop","matchingPrefix","command","defaultStylesByTagName","noStyleTags","BASE","HEAD","HTML","META","NOFRAME","NOSCRIPT","PARAM","SCRIPT","STYLE","TITLE","tagNames","computeDefaultStyleByTagName","tagName","defaultStyle","element","computedStyle","getComputedStyle","warmSerializeElement","navigateToClientInfo","currentParams","PresenceList","presence_list_defineProperty","expanded","CameraImage","PhoneImage","hmd","HMDImage","discord","DiscordImage","DesktopImage","getPresenceImage","isBot","badge","moderatorBadge","row","listItem","self","clientLink","renderExpandedList","presenceList","domForPresence","signIn","signedIn","maskEmail","onSignOut","onSignIn","rootStyles","presenceInfo","presenceInfoSelected","faUsers","messageCanvas","emojiRegex","urlRegex","messageBodyDom","fromSessionId","includeFromLink","multiLine","wrapStyle","messageWrapMulti","messageWrap","mono","messageBodyClasses","messageBody","messageBodyMulti","messageBodyMono","includeClientLink","onFromClick","words","outWords","word","wordWrap","cleanedBody","messageSource","messageSourceLink","Linkify_default","toEmojis","renderChatMessage","allowEmojiRender","lowResolution","isOneLine","isEmoji","presenceLog","presenceLogSpawn","entryDom","presenceLogEntry","presenceLogEntryOneLine","presenceLogEmoji","ReactDOM","objectScale","offsetWidth","offsetHeight","xhtml","nodeType","Node","ELEMENT_NODE","cssTexts","toUpperCase","cssText","ii","cssPropName","outerHTML","serializeElement","chat_message_asyncToGenerator","unmountComponentAtNode","meshEntity","blobUrl","createObjectURL","isRawProperty","meshMaterial","spawnChatMessage","_spawnChatMessage","ChatMessage","maySpawn","iconButton","spawnMessage","InWorldChatBox","in_world_chat_box_defineProperty","messageEntryInRoom","messageEntryOnMobile","chat_command_help_ChatCommandHelp","accept","onObjectCreated","enableSpawning","messageEntryButtonInRoom","messageEntryUpload","faCamera","faPlus","messageEntryInputInRoom","messageEntryInputNoSpawn","messageEntrySpawn","AVATARS_API","AvatarEditor","avatar_editor_defineProperty","parent_avatar_listing_id","previewGltfUrl","avatar_editor_asyncToGenerator","creatorAttribution","inputFiles","base_gltf_url","KHR_binary_glTF","bin","getWrappedInstance","snapshot","filesToUpload","uploading","fileUploads","upload","avatar_editor_objectSpread","file_id","access_token","promotion_token","reduce","createOrUpdateAvatar","onSave","avatarEditor","uploadAvatar","textField","textarea","fileField","mapField","checkbox","avatar_editor_extends","confirmDelete","deleteAvatar","MicLevelWidget","mic_level_widget_defineProperty","startAnalyser","stopAnalyser","micUpdateInterval","micLevelMovingAverage","MovingAverage","average","movingAverage","micClip","level_background_default","srcSet","level_background_2x_default","muteOnEntry","level_fill_default","level_fill_2x_default","hasAudioTrack","mic_level_default","mic_level_2x_default","mic_denied_default","mic_denied_2x_default","OutputLevelWidget","output_level_widget_defineProperty","tonePlaying","playTestTone","toneClip","webmTone","mp3Tone","oggTone","wavTone","testToneTimeout","speakerClip","level_action_background_default","level_action_background_2x_default","level_action_fill_default","level_action_fill_2x_default","speaker_level_default","speaker_level_2x_default","PhotoMessage","landingPageUrl","onShareClicked","mediaBody","VideoMessage","ImageMessage","spawnImage","PresenceLog","presence_log_defineProperty","entryClasses","presenceLogEntryWithButton","presenceLogChat","expired","oldName","newName","inRoom","presenceClasses","presenceLogInRoom","domForEntry","SettingsMenu","settings_menu_defineProperty","renderExpandedMenu","rowClasses","settingsRow","rowHeader","showRoomSettings","showRoomInfo","hubScene","showStreamerMode","flyEnabled","settingsMenu","change_avatar_default","listItemLink","toggleFlyMode","faInfoCircle","faDoorClosed","faVideo","toggleStreamerMode","faBars","cornerButton","cornerButtonSelected","isStreaming","PreloadOverlay","treatment","screenshot","mainPanel","onLoadClicked","loadButton","SPRITESHEET_ICONS","MIC","spritesheet","mic0","mic1","mic2","mic3","mic4","mic5","mic6","mic7","MIC_OFF","micOff0","micOff1","micOff2","micOff3","micOff4","micOff5","micOff6","micOff7","TopHUD","_2d_hud_defineProperty","showVideoShareOptions","lastActiveMediaSource","micLevel","cameraDisabled","penDisabled","mediaDisabled","micLevelForVolume","videoShareMediaSource","onEndShareVideo","onShareVideo","onShareVideoNotCapable","videoShareExtraOptionTypes","primaryVideoShareType","showExtrasOnHover","hideVideoSharingButtonTimeout","capitalize","videoShare","handleVideoShareClicked","onMouseOver","videoShareExtraOptions","onMouseOut","videoSharingButtons","buildVideoSharingButtons","tipDivForType","cancelFunc","topTip","watching","topTipNoHud","onWatchEnded","tipCancelText","showVideoShareFailed","hideVideoShareFailedTip","activeTip","micIconClass","container","unselectable","uiStyles","uiInteractive","panel","onToggleMute","sourceNavigateToDefaultSource","hasActiveCamera","onSpawnCamera","flyingEnabled","onToggleFlying","isCursorHoldingPen","onToggleFreeze","onSpawnPen","showStreamingTip","hideStreamingTip","react_components_2d_hud","SpectatingLabel","_isIn2DInterstitial","_exitAction","afterUserGesturePrompt","handleExitTo2DInterstitial","isLower","exitAction","exitVR","vrNotice","exit2DInterstitialAndEnterVR","exit","enterVR","isIn2DInterstitial","avatarEditorDebug","addLocaleData","en","HMD_MIC_REGEXES","IN_ROOM_MODAL_ROUTER_PATHS","IN_ROOM_MODAL_QUERY_VARS","LOBBY_MODAL_ROUTER_PATHS","LOBBY_MODAL_QUERY_VARS","LOBBY_MODAL_QUERY_VALUES","enumerateDevices","isMobilePhoneOrVR","AUTO_EXIT_TIMER_SECONDS","UIRoot","ui_root_defineProperty","enterInVR","entered","showShareDialog","broadcastTipDismissed","linkCodeCancel","miniInviteActivated","didConnectToNetworkedScene","noMoreLoadingUpdates","hideLoader","waitingOnAudio","mediaStream","audioTrack","micDevices","autoExitTimerStartedAt","autoExitTimerInterval","secondsRemainingBeforeAutoExit","exited","signInMessageId","authChannel","signInCompleteMessageId","signInContinueTextId","onContinueAfterSignIn","SignInDialog","ui_root_asyncToGenerator","authComplete","startAuthentication","authStarted","continueText","onContinue","subscriptions","isFavorited","initialIsFavorited","sceneLoaded","mediaSource","updateSubscribedState","forcedVREntryType","enterDaydream","enter2D","disableAutoExitOnConcurrentLoad","secondsSinceStart","checkForAutoExit","endAutoExitTimer","reason","exitScene","grantedMicLabels","setMediaStreamToDefault","beginOrSkipAudioSetup","performDirectEntryFlow","availableVREntryTypes","_ref7","constraints","deviceId","exact","fetchAudioTrack","setupNewMediaStream","hasAudio","lastUsedMicDeviceId","settings","ideal","_ref9","getUserMedia","recreateAudioStream","_ref10","setLocalMediaStream","fetchMicDevices","micDeviceId","micDeviceIdForMicLabel","micLabelForMediaStream","mediaStreamForMicAnalysis","entry_step","onAudioReadyButton","hasHmdMicrophone","selectedMicLabel","enterScene","onFinished","linkChannel","generateCode","hasOpenedShare","updateScene","ui_root_objectSpread","DialogClass","closeDialog","beginStreaming","endStreaming","_ref15","signOut","broadcastedRoomConfirmed","confirmedBroadcastedRooms","interstitial","onInterstitialPromptClicked","roomUnavailableReason","platformUnsupportedReason","exitSubtitleId","logo_default","promptForNameAndAvatarBeforeEntry","hubIsBound","entryStyles","entryPanel","collapseButton","roomSubtitle","lobby_chat_box","buttonContainer","attemptLink","secondaryActionButton","wideButton","buttonSubtitle","handleForceEntry","faArrowLeft","audioLoader","granted","onMicGrantButton","mic_granted_default","mic_granted_2x_default","subtitleId","mic_level_widget_MicLevelWidget","output_level_widget_OutputLevelWidget","selectedMicDeviceId","micDeviceChanged","mic_small_default","mic_small_2x_default","dropdown_arrow_default","dropdown_arrow_2x_default","shouldShowHmdMicWarning","warning_icon_default","warning_icon_2x_default","overlay","showSafariMicDialog","safari_mic_dialog_SafariMicDialog","showSafariDialog","safari_dialog_SafariDialog","showWebAssemblyDialog","webassembly_unsupported_dialog_WebAssemblyUnsupportedDialog","exitEventHandler","prevProps","showSignInDialog","showContextualSignInDialog","willCompileAndUploadMaterials","compileAndUploadMaterials","onConcurrentLoad","onSceneLoaded","onAframeStateChanged","onShareVideoEnabled","onShareVideoDisabled","onShareVideoFailed","onStoreChanged","audioContext","playSound","onMouseLeave","isExited","showPreload","isLoading","ui","ui-root","in-modal-or-overlay","isInModalOrOverlay","serviceWorker","showOAuthDialog","showInterstitialPrompt","oauth_dialog_OAuthDialog","onCloseOAuthDialog","renderExitedPane","react_components_loader","onLoadingFinished","renderInterstitialPrompt","renderBotMode","enteredOrWatching","enteredOrWatchingOrPreload","inEntryFlow","entryDialog","isWaitingForAutoExit","auto_exit_warning","state_route","renderDevicePanel","renderMicPanel","renderAudioSetupPanel","renderEntryStartPanel","dialogBoxContentsClassNames","uiDialogBoxContents","backgrounded","showVREntryButton","presenceLogEntries","showMediaBrowser","hasTopTip","clientInfoClientId","getClientInfoClientId","showClientInfo","hasEmbedPresence","hasDiscordBridges","showBroadcastTip","showInviteTip","streamingTip","streamingTipAttachPoint","streamingTipClose","streamingTipMessage","streamerName","Provider","preload_overlay_PreloadOverlay","onPreloadLoadClicked","profile_entry_panel","ui_root_extends","avatar_editor_AvatarEditor","onAvatarSaved","react_components_media_browser","renderDialog","hubMemberPermissions","updateHub","closeHub","createObject","changeScene","setAvatarUrl","client_info_dialog_ClientInfoDialog","uiDialog","presence_log_PresenceLog","tip_Tip","confirmBroadcastedRoom","in_world_chat_box","leaveButton","inviteStyles","inviteContainer","inviteContainerBelowHud","inviteContainerInverted","inviteTip","inviteTipAttachPoint","onMiniInviteClicked","inviteMiniButton","enterButton","invite_dialog_InviteDialog","hubEntryCode","initialIsSubscribed","link_dialog_LinkDialog","cameraModeExitButton","presence_list_PresenceList","settings_menu_SettingsMenu","spectating_label_SpectatingLabel","topHud","toggleMute","shareVideo","endShareVideo","showWebRTCScreenshareUnsupportedDialog","nagCornerButton","isSupportAvailable","MS_PER_DAY","MS_PER_MONTH","isSameMonth","da","db","getFullYear","getMonth","HUB_CREATOR_PERMISSIONS","VALID_PERMISSIONS","HubChannel","hub_channel_defineProperty","Presence","_permissions","jwtDecode","nextRefresh","exp","hub_channel_asyncToGenerator","entryDisplayType","vrDisplay","isPresenting","initialOccupantCount","publisher","initialOccupants","entryEvent","hub_channel_objectSpread","getEntryTimingFlags","entryTimingFlags","isNewDaily","isNewMonthly","isNewDayWindow","isNewMonthWindow","storedLastEnteredAt","lastEnteredAt","lastEntered","msSinceLastEntered","getDate","isSameDay","object_type","update_hub","close_hub","subscription","allow","creatorAssignmentTokenEntry","_getCreatorAssignmentToken","perms_token","setPermissionsFromToken","_signedIn","oauth_url","gltfNode","fileAccessToken","promotionToken","gltf_node","file_access_token","permsToken","session_id","_blockedSessionIds","unblock","entities","completeSync","_ref4","Set","migrateToSocket","presenceBindings","onJoin","caller","onLeave","onSync","endRecording","exceedsDensityThreshold","subtree","bounds","boundingData","isHighDensity","leftResult","rightResult","isGeometryHighDensity","roots","_roots","traverseMeshesAndAddShapes","shapes","meshRoot","group","__proto__","navMesh","shapePrefix","groupEnd","DUCK_URL","MessageDispatch","entryManager","addToPresenceLog","remountUI","message_dispatch_defineProperty","commandParts","dispatchCommand","activeElement","scales","curScale","physicsSystem","captureSystem","setDebug","rename","available","isDebug","SceneEntryManager","scene_entry_manager_defineProperty","whenSceneLoaded","_entered","scene_entry_manager_asyncToGenerator","session","verbose","_setupPlayerRig","_setupBlocking","_setupKicking","_setupMedia","_setupCamera","_spawnAvatar","SOUND_ENTER_SCENE","_runBot","sendEntryEvent","toISOString","bumpEntryCount","hasLoaded","localMediaStream","getTracks","setAnimationLoop","_setPlayerInfoFromProfile","avatarScale","kickedClientId","_unpinElement","removeEntity","removeEntitiesOfClient","storedPromotionToken","gltfComponents","equalArray","every","translation","mediaSrc","mediaContentSubtype","pinnedEntityToGltf","pin","_signInAndPinOrUnpinElement","_pinElement","_disableSignInOnPinAction","unpin","spawnMediaInfrontOfPlayer","contentOrigin","or","currentVideoShareEntity","FILE","sendObjectSpawnedEvent","contentEditable","uiRoot","clipboardData","getData","CLIPBOARD","dataTransfer","isHandlingVideoShare","shareVideoMediaStream","newStream","frameRate","removeTrack","spawnDelay","_ref8","audioEl","audioInput","dataInput","getAudio","crossorigin","onchange","getRecording","mozCaptureStream","INIT_TIMEOUT_MS","urlBase64ToUint8Array","base64String","base64","repeat","rawData","atob","outputArray","charCodeAt","Subscriptions","subscriptions_defineProperty","registration","vapidPublicKey","_isSubscribed","subscriptions_asyncToGenerator","startedAt","pushManager","convertedVapidKey","permissionState","userVisibleOnly","applicationServerKey","getSubscription","endpoint","pushSubscription","has_remaining_subscriptions","invaderPos","bubblePos","createSphereGizmo","WireframeGeometry","line","LineSegments","invaders","bubbles","tickCount","_updateInvaders","registerBubble","bubble","unregisterBubble","registerInvader","invader","unregisterInvader","updateDebug","setInvading","tempInvasionFlags","setInvaderFlag","distanceSquared","radiusSum","flushInvadingFlagsForIndex","meshName","targetMesh","useMaterial","invadingOpacity","findInvaderMesh","radiusSquared","system","modeMod","WheelEvent","DOM_DELTA_PIXEL","DOM_DELTA_LINE","DOM_DELTA_PAGE","isInModal","MouseDevice","queueEvent","deltaX","deltaY","deltaMode","clientX","innerWidth","clientY","innerHeight","movementX","movementY","mouseDownLeftThisFrame","mouseDownRightThisFrame","write","didStopProcessingEarly","setVector2","setValueType","ArrayBackedSet","initialItems","items","oncontextmenu","KeyboardDevice","seenKeys","nodeName","HudDevice","XboxControllerDevice","buttonMap","buttonId","axisMap","axisId","getGamepads","connected","xboxPaths","hapticActuators","Pose","fromOriginAndDirection","setFromUnitVectors","fromCameraProjection","normalizedX","normalizedY","unproject","EYES_TO_ELBOW","FOREARM","applyArmModel","controllerEuler","deltaControllerPosition","controllerQuaternion","controllerPosition","gamepadPose","headObject3D","userHeight","applyAxisAngle","up","fromArray","applyEuler","copySittingToStandingTransform","stageParameters","sittingToStandingTransform","ONES","TOUCHPAD","TRIGGER","OculusGoControllerDevice","sittingToStandingMatrix","rayObject","rayMatrixWorld","setPose","setMatrix4","TOUCHPAD_X","TOUCHPAD_Y","GearVRControllerDevice","leftOculusTouchButtonMap","rightOculusTouchButtonMap","LEFT_HAND_OFFSET","RIGHT_HAND_OFFSET","OculusTouchControllerDevice","buttonMaps","devicePaths","handOffset","HAND_OFFSET","POSE","MATRIX","DaydreamControllerDevice","RAY_ROTATION","ViveControllerDevice","isViveWand","gamepads","WindowsMixedRealityControllerDevice","CircularBuffer","fill","writePtr","difference","GyroDevice","hmdEuler","hmdQuaternion","prevX","prevY","dXBuffer","dYBuffer","hasPolyfill","webvrpolyfill","getPolyfillDisplays","frameData","VRFrameData","getFrameData","dX","dY","findHandCollisionTargetForHand","driver","numManifolds","dispatcher","getNumManifolds","handPtr","Ammo","getPointer","persistentManifold","getManifoldByIndexInternal","body0ptr","getBody0","body1ptr","getBody1","numContacts","getNumContacts","getContactPoint","getDistance","els","tags","remoteHoverTargets","findRemoteHoverTarget","updateCursorIntersection","rightRemoteHoverTarget","dropPath","hoverFn","getRightRemoteHoverTarget","previousState","tickInteractor","lostOwnership","canMove","rightHandTeleporter","gazeTeleporter","rightHandInteracting","rightHandTeleporting","rightRemotePenIntersectingInVR","enableRightRemote","SOUND_HOVER_OR_GRAB","calculateCursorPose","AppAwareMouseDevice","prevButtonLeft","clickedOnAnything","prevCursorPose","prevOrigin","prevDirection","rawIntersections","cursorTargettingSystem","remoteHoverTarget","isInteractable","touchIsAssigned","touch","assignments","assignment","identifier","jobIsAssigned","job","unassign","findByJob","findByTouch","MOVE_CURSOR_JOB","MOVE_CAMERA_JOB","FIRST_PINCHER_JOB","SECOND_PINCHER_JOB","TAP_PATHS","x1","y1","x2","y2","dx","dy","getPlayerCamera","AppAwareTouchscreenDevice","pendingTap","maxTouchCount","tapIndexToWriteNextFrame","framesUntilGrab","framesUntilUnassign","second","first","cameraMover","isFirstTouch","isSecondTouch","isThirdTouch","hasSecondPinch","setFromCamera","shouldMoveCursor","cursorJob","previousAssignment","changedTouches","touches","hasCursorJob","hasCameraJob","xforms","scalar","scaleExp","pow","deadzone","deadzoneSize","split_vec2","compose_vec2","copyIfFalse","copyIfTrue","zeroIfDefined","true","rising","risingWithFrameDelay","falling","vec2Zero","poseFromCameraProjection","vec2dpad","deadzoneRadius","invertX","invertY","deadzoneRadiusSquared","atan2","always","constValue","wasd_to_vec2","vec2","add_vec2","max_vec2","normalize_vec2","any","touch_axis_scroll","snap_to","touching","addSetsToBindings","mapping","setName","binding","togglePenWithP","togglePenWithHud","keyboardMouseUserBindings","global","xform","priority","cursorHoldingUI","cursorHoveringOnVideo","inputFocused","cursorHoveringOnUI","touchCamDelta","touchscreenUserBindings","cursorHoveringOnPen","keyboardDebuggingBindings","leftButton","leftAxis","leftPose","rightButton","rightAxis","rightPose","rightGripRisingGrab","lowerButtons","leftGripPressed1","leftGripPressed2","rightGripPressed1","rightGripPressed2","leftTriggerPressed1","leftTriggerPressed2","rightTriggerPressed1","rightTriggerPressed2","oculusTouchUserBindings","north","south","east","west","override","leftHandHoveringOnNothing","cursorHoveringOnNothing","leftHandHoveringOnInteractable","leftHandHoldingInteractable","leftHandHoveringOnPen","leftHandHoldingPen","rightHandHoveringOnInteractable","rightHandHoldingInteractable","rightHandHoveringOnPen","rightHandHoldingPen","cursorHoveringOnCamera","rightHandHoveringOnCamera","leftHandHoveringOnCamera","rightHandHoldingCamera","leftHandHoldingCamera","rightHandHoveringOnNothing","lButton","lAxis","lPose","lJoyScaled","lJoyXScaled","lJoyYScaled","lTouch","lTouchScaled","lTouchXScaled","lTouchYScaled","lDpadNorth","lDpadSouth","lDpadEast","lDpadWest","lDpadCenter","lTriggerFallingStopDrawing","lGripFallingStopDrawing","lTriggerRisingGrab","lGripRisingGrab","lTouchpadRising2","lTouchpadRising1","touchCharacterAcceleration","lCharacterAcceleration","leftBoost","rButton","rAxis","rPose","rTouch","rJoy","rDpadNorth1","rDpadSouth1","rDpadEast1","rDpadWest1","rDpadCenter1","rDpadNorth2","rDpadSouth2","rDpadEast2","rDpadWest2","rDpadCenter2","rDpadCenterStrip","rTouchpadRising","rTouchpadFalling","rightBoost","rTriggerRisingGrab","rGripRisingGrab","cursorDrop1","cursorDrop2","rTriggerStopTeleport","rTouchpadStopTeleport","ensureFrozenViaDpad","ensureFrozenViaKeyboard","thawViaDpad","thawViaKeyboard","rSnapRight1","rSnapLeft1","rSnapRight2","rSnapLeft2","keyboardSnapRight","keyboardSnapLeft","keyboardCharacterAcceleration","wasd_vec2","arrows_vec2","keyboardBoost","leftTouchpadPressed1","leftTouchpadPressed2","leftTouchpadFallingStopTeleport","leftTriggerFallingStopTeleport","leftGripFallingWhileHoldingPen","viveUserBindings","leftHandTeleporting","viveWandUserBindings","lGripPressed","rGripPressed","rTriggerPressed","rJoyNorth","rGripRising","rTriggerRising","rGripFalling","rTriggerFalling","dpadVariables","padWest","padEast","padNorth","padSouth","padCenter","padCenterStrip","dpadBindings","neverFrozenBinding","penBindings","forCursor","padY","triggerPressed","padPressed","padTouched","padRising","padCenterStripTouched","handPoseBindings","gripPressed","holdingCameraBindings","wmrUserBindings","leftPadPressed","rightPadPressed","leftPadFalling","rightPadFalling","keyboardSaceFalling","freezeBindings","rJoyWest","rJoyEast","rJoyWestRising","rJoyEastRising","keyboardQRising","keyboardERising","teleportationAndRotationBindings","lJoyXDeadzoned","lJoyYDeadzoned","characterAccelerationBindings","cursorMediaVolumeModBindings","rPadNorthOrSouth","rPadNorthOrSouthPressed","rPadNorthOrSouthPressedY","cursorModDeltaBindings","scaledRightJoystickVertical","scaledLeftJoystickCursorDelta","deadzonedRightJoystickHorizontal","deadzonedRightJoystickVertical","deadzonedLeftJoystickHorizontal","deadzonedLeftJoystickVertical","disableForwardOnTrigger","scaledLeftJoystickHorizontal","scaledLeftJoystickVertical","scaledLeftJoystickForwardAcceleration","xboxControllerUserBindings","cursorHoldingNothing","touchpadRising","touchpadFalling","touchpadPressed","dpadNorth","dpadSouth","dpadEast","dpadWest","dpadCenter","brushSizeDelta","cursorModDelta","dpadSouthDrop","dpadCenterDrop","grabBinding","dropOnCenterOrSouth","daydreamUserBindings","cardboardUserBindings","generate3DOFTriggerBindings","touchpadButton","triggerButton","touchpadX","touchpadXForPen","touchpadY","touchpadYForPen","triggerRising","triggerFalling","dpadCenterStrip","dpadBottomCenterStrip","togglePen","dropBinding","leftTeleporter","rightTeleporter","GamepadDevice","buttonPath","gamepadBindings","oculusGoUserBindings","gearVRControllerUserBindings","satisfiesPath","satisfyPath","satisfiedBy","canMask","masker","masked","maskerKey","maskerPath","maskedKey","isActive","toggleSet","pendingSetChanges","generation","generations","mat4","prevActiveSets","xformStates","activeDevices","registeredMappings","registeredMappingsChanged","vrGamepadMappings","nonVRGamepadMappings","updateBindingsForVRMode","activeDevice","gamepadConnected","gamepadDevice","maybeToggleXboxMapping","vrAxesSum","mouseMovement","nonXboxActivity","hasXboxMapping","prevSortedBindings","sortedBindings","mappings","unsorted","sorted","dependencySort","masks","masksRow","bindingsRow","col","computeMasks","teleporter","leftHandHoveringOnVideo","rightHandHoveringOnVideo","resolveActionSets","activeSetsChanged","il","elem","jl","arrayContentsDiffer","actives","prevActives","prevMasked","maskedRow","computeExecutionStrategy","bindingExistedLastFrame","PATHS_TO_SHOW","userinputFrameStatus","replacer","pathsOutput","val","textContent","sb","logBindings","MEDIA_SEARCH_PATHS","prefix","CursorTargettingSystem","setDirty","dirty","observer","MutationObserver","observe","childList","populateEntities","ACTIVATION_STATE","ConstraintsSystem","prevLeftHand","prevRightHand","prevRightRemote","constraintTag","entityId","hasAnotherConstraint","activationState","ACTIVE_TAG","DISABLE_DEACTIVATION","COLLISION_FILTER_MASK_HANDS","distanceBetweenStretchers","obj1","obj2","distanceTo","TwoPointStretchingSystem","leftStretcher","rightStretcher","previousLeftStretcher","previousRightStretcher","stretched","initialStretchDistance","SingleActionButtonSystem","didInteractThisFrame","HoldableButtonSystem","prevHeld","hasButtonComponent","BUTTON_COMPONENT_NAMES","dispatch","HOVERED","UNHOVERED","HoverButtonSystem","getHoverableButton","getSpecificHoverMenu","HoverMenuSystem","findHoverMenu","prevHoverMenu","SuperSpawnerSystem","maybeSpawn","superSpawner","performSpawn","spawnedEntity","copyState","STRENGTH","DROP","PICKUP","BUTTON_PRESSED","HOVER","STRETCH_BASE","STRETCH_DISTANCE","TELEPORTING","TELEPORTED","determineStrength","HapticFeedbackSystem","twoPointStretchingSystem","didClickButton","leftActuator","rightActuator","leftHandStrength","rightHandStrength","rightRemoteStrength","buttonPressedStrength","stretchingStrength","stretchSystem","stretcherLeft","stretcherRight","leftStrength","rightStrength","pulse","tempVec3","tempVec4","INSTANCE_DATA_BYTE_LENGTH","DEFAULT_COLOR","HIDE_MATRIX","makeScale","sizeofInstances","HubsBatchRawUniformGroup","BatchRawUniformGroup","maxInstances","ArrayBuffer","hubs_sweepParams","byteLength","hubs_interactorOnePos","hubs_isFrozen","Uint32Array","hubs_interactorTwoPos","hubs_time","instanceId","setInstanceTransform","setInstanceColor","isSpawner","hideDueToPinning","highlightInteractorOne","highlightInteractorTwo","MAX_INSTANCES","UBO_BYTE_LENGTH","BatchManagerSystem","WeakMap","WebGL2RenderingContext","getParameter","MAX_UNIFORM_BLOCK_SIZE","ubo","BatchManager","unlit","unlitBatchVert","unlitBatchFrag","rootObject","batchedCount","addMesh","removeMesh","LobbyCameraSystem","constraintsSystem","singleActionButtonSystem","holdableButtonSystem","hoverButtonSystem","hoverMenuSystem","superSpawnerSystem","hapticFeedbackSystem","SoundEffectsSystem","lobbyCameraSystem","_gotAudioTrack","_recorderTimeout","_initRecorder","_stream","_recorder","_tryAddingAudioTrack","multiviewVertPrefix","nonmultiviewVertPrefix","multiviewFragPrefix","nonmultiviewFragPrefix","didRegisterWithSystem","didFailToRegister","registered","updateUVs","normalizedFrame","memo","missingSprites","ret","raycastOnSprite","vA","vB","vC","vD","intersectionInfo","intersect","ray","intersectTriangle","getHoverableVisuals","comp","ZEROS","SpriteSystem","slots","indexWithSprite","maxSprites","spriteWithIndex","stack","concat","multiview","vert","frag","spritesheetPng","spritesheetTexture","RawShaderMaterial","u_spritesheet","mvCols","InterleavedBuffer","InterleavedBufferAttribute","indices","setIndex","createGeometry","renderOrder","RENDER_ORDER","HUD_ICONS","uniformsNeedUpdate","aEnableSweepingEffect","aSweepParams","enableSweepingEffectValue","setXY","aUvs","aVertices","setXYZ","hubsSystems","deltaScale","addScalar","clampScalar","HIGHLIGHT","NO_HIGHLIGHT","TRANSFORM_COLOR_1","TRANSFORM_COLOR_2","defaultDistance","minDistance","firstHitOnly","lineGeometry","Line","LineBasicMaterial","cameraPos","isGrabbing","addScaledVector","lerpHSL","posePosition","cursorPosition","positionArray","computeBoundingSphere","DRAW_MODE","drawFrequency","minDistanceBetweenPoints","drawingManager","availableColors","minRadius","maxRadius","timeSinceLastDraw","lastPosition","currentDrawing","worldPosition","colorIndex","grabbed","originalPosition","lastIntersectionDistance","MeshStandardMaterial","penTip","lineStartPosition","lineEndPosition","worldQuaternion","_startDraw","SOUND_PEN_START_DRAW","_endDraw","SOUND_PEN_STOP_DRAW","penScaleMod","_changeRadius","_changeColor","SOUND_PEN_CHANGE_COLOR","_undoDraw","SOUND_PEN_UNDO_DRAW","getLastWorldQuaternion","_setPenVisible","_setLineVisible","lastIntersectedObject","getLastPoint","_getNormal","draw","directionToCamera","crossVectors","startDraw","endDraw","undoDraw","mod","SharedBufferGeometry","primitiveMode","maxBufferSize","geometries","addBuffer","restartPrimitive","addVertex","prevIdx","componentSize","diff","undo","normals","colors","setDrawRange","addColor","g","addNormal","buffer","SharedBufferGeometryManager","sharedBuffers","addSharedBuffer","getSharedBuffer","copyData","fromIndex","toIndex","segments","defaultRadius","maxDrawTimeout","maxLines","maxPointsPerLine","_receiveData","networkBuffer","sendNetworkBufferQueue","drawStarted","lineStarted","remoteLineStarted","receivedBufferParts","bufferIndex","connectedToOwner","networkBufferInitialized","VertexColors","sharedBufferGeometryManager","lastPoint","lastSegments","currentSegments","sharedBuffer","vertexCount","networkBufferCount","currentPointCount","invalidPointRead","lastReadPointCount","networkBufferHistory","onConnect","getNetworkId","drawingId","subscribeToDataChannel","unsubscribeToDataChannel","isConnected","hasActiveDataChannel","sendDataGuaranteed","_broadcastDrawing","_drawFromNetwork","_sendNetworkBuffer","_deleteExpiredLines","copyArray","broadcastDataGuaranteed","didWork","pointCount","setHex","_draw","_updateBuffer","drawTime","datum","idxLength","uv","parts","ceil","dataType","_addToNetworkBuffer","getHexString","capNormal","radiusMultiplier","_generateSegments","_drawCylinder","_drawEndCap","_endLine","_addDegenerateTriangle","_restartPrimitive","_drawCap","_pushToNetworkBuffer","_drawPoint","projectedDirection","projectedPoint","clock","elapsedTime","copyDirection","copyNormal","setLength","getHex","_addVertex","down","segmentIndex","segment","segmentsList","angleIncrement","_rotatePointAroundAxis","calculatedDirection","registerNetworkSchemas","vectorRequiresUpdate","almostEqualVec3","schemas","requiresNetworkUpdate","BUILD_VERSION","patchWebGLRenderingContext","HUD_BACKGROUND","isEmbed","AmmoWasm","locateFile","firstSyncSource","syncSource","isTelemetryDisabled","loadingEnvironmentURL","registerTelemetry","instanceKey","started_at","onStorageEvent","detectConcurrentLoad","uiProps","routerBaseName","createBrowserHistory","basename","qsVREntryType","userinputSets","Router","Route","react_components_ui_root","hub_objectSpread","hub_isBotMode","hub_store","hub_mediaSearchStore","mountUI","updateUIForHub","entry_code","updateEnvironmentForHub","isLegacyBundle","environmentScene","model_url","defaultSpaceTopic","topics","glbAsset","asset_type","bundleAsset","hasExtension","baseURL","LoaderUtils","extractUrlBase","environmentEl","childNodes","Cache","messageDispatch","allowNAFTraffic","hubs","embedTokenEntry","executeOnLoadActions","onMediaSearchCancelled","objectsScene","objectsUrl","objectsEl","connectToScene","hub_asyncToGenerator","room","serverURL","newHostPollInterval","setReconnectionListeners","currentServerURL","serverUrl","newServerURL","getHost","sendViaPhoenix","reliable","isOpen","connectionState","reliableTransport","unreliableTransport","loadEnvironmentAndConnect","connectError","isFull","_ref12","_x17","enterSceneWhenLoaded","WebAssembly","detectedOS","ready","setRegistration","setRegistrationFailed","initialized","texImage2D","compressedTexImage2D","patchThreeAllocations","AuthChannel","predicate","messageId","onFailure","actionError","_x9","_x10","_x11","_x12","sceneInfo","isInOAuth","exitOAuth","clearOnLoadActions","serializableDetail","getTwitterOAuthURL","enqueueOnLoadAction","LinkChannel","handleEarlyVRMode","getVRDisplay","videoComponent","chatFocusTarget","RTCDataChannelEvent","buildNumber","hasVREntryDevice","onFirstEnvironmentLoad","previewCamera","reorder","setupLobbyCamera","runBotMode","retDeployReconnectInterval","retPhxChannel","_ref5","setVapidPublicKey","vapid_public_key","_x13","pushSubscriptionEndpoint","getCurrentEndpoint","oauthFlowPermsToken","Cookies","createHubChannelParams","push_subscription_endpoint","auth_token","migrateToNewReticulumServer","_ref6","deployNotification","ret_version","ret_pool","tryReconnect","oldSocket","setSocket","teardown","_x14","_x15","hubPhxChannel","SOUND_CHAT_MESSAGE","isInitialJoin","setPhoenixChannel","session_token","vrHudPresenceCount","sendProfileUpdate","__hadInitialSync","isSelf","currentMeta","setClientId","setJoinToken","setHubChannel","setSubscribed","web_push","hub_requires_oauth","handleHubChannelJoined","_x16","oauth_info","onData","incomingMessage","userInfo","getAuthor","_createInWorldLogMessage","createInWorldLogMessage","stale_fields","titleParts","oldSlug","slug","entry_mode","DialogContainer","currentTarget","onContainerClicked","_wrap_with_audio__WEBPACK_IMPORTED_MODULE_3__","_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_5__","isRequired","_assets_sfx_tick_mp3__WEBPACK_IMPORTED_MODULE_0__","_assets_sfx_tick_mp3__WEBPACK_IMPORTED_MODULE_0___default","_assets_sfx_teleport_loop_mp3__WEBPACK_IMPORTED_MODULE_1__","_assets_sfx_teleport_loop_mp3__WEBPACK_IMPORTED_MODULE_1___default","_assets_sfx_quickTurn_mp3__WEBPACK_IMPORTED_MODULE_2__","_assets_sfx_quickTurn_mp3__WEBPACK_IMPORTED_MODULE_2___default","_assets_sfx_tap_mellow_mp3__WEBPACK_IMPORTED_MODULE_3__","_assets_sfx_tap_mellow_mp3__WEBPACK_IMPORTED_MODULE_3___default","_assets_sfx_PenSpawn_mp3__WEBPACK_IMPORTED_MODULE_4__","_assets_sfx_PenSpawn_mp3__WEBPACK_IMPORTED_MODULE_4___default","_assets_sfx_PenDraw1_mp3__WEBPACK_IMPORTED_MODULE_5__","_assets_sfx_PenDraw1_mp3__WEBPACK_IMPORTED_MODULE_5___default","_assets_sfx_PicSnapHey_mp3__WEBPACK_IMPORTED_MODULE_6__","_assets_sfx_PicSnapHey_mp3__WEBPACK_IMPORTED_MODULE_6___default","_assets_sfx_welcome_mp3__WEBPACK_IMPORTED_MODULE_7__","_assets_sfx_welcome_mp3__WEBPACK_IMPORTED_MODULE_7___default","_assets_sfx_quack_mp3__WEBPACK_IMPORTED_MODULE_8__","_assets_sfx_quack_mp3__WEBPACK_IMPORTED_MODULE_8___default","_assets_sfx_specialquack_mp3__WEBPACK_IMPORTED_MODULE_9__","_assets_sfx_specialquack_mp3__WEBPACK_IMPORTED_MODULE_9___default","_assets_sfx_pop_mp3__WEBPACK_IMPORTED_MODULE_10__","_assets_sfx_pop_mp3__WEBPACK_IMPORTED_MODULE_10___default","_assets_sfx_Eb_blip_mp3__WEBPACK_IMPORTED_MODULE_11__","_assets_sfx_Eb_blip_mp3__WEBPACK_IMPORTED_MODULE_11___default","_assets_sfx_tack_mp3__WEBPACK_IMPORTED_MODULE_12__","_assets_sfx_tack_mp3__WEBPACK_IMPORTED_MODULE_12___default","_assets_sfx_A_bendUp_mp3__WEBPACK_IMPORTED_MODULE_13__","_assets_sfx_A_bendUp_mp3__WEBPACK_IMPORTED_MODULE_13___default","_assets_sfx_suspense_mp3__WEBPACK_IMPORTED_MODULE_14__","_assets_sfx_suspense_mp3__WEBPACK_IMPORTED_MODULE_14___default","soundEnum","pendingEffects","soundsAndUrls","URL_TICK","URL_TELEPORT_LOOP","URL_QUICK_TURN","URL_TAP_MELLOW","URL_PEN_SPAWN","URL_PEN_DRAW","URL_CAMERA_SNAPSHOT","URL_WELCOME","URL_QUACK","URL_SPECIAL_QUACK","URL_POP","URL_FREEZE","URL_TACK","URL_MEDIA_LOADING","URL_MEDIA_LOADED","loading","audioBufferPromise","decodeAudioData","sounds","audioBuffer","enqueueSound","createBufferSource","createGain","TEXTURE_PROPS","base_map","emissive_map","normal_map","orm_map","ALL_MAPS","createRenderer","alpha","useDevicePixelRatio","antialias","premultipliedAlpha","preserveDrawingBuffer","powerPreference","WebGLRenderer","gammaOutput","gammaFactor","physicallyCorrectLights","setPixelRatio","devicePixelRatio","createImageBitmapFromURL","ORBIT_ANGLE","DEFAULT_MARGIN","fitBoxInFrustum","halfYExtents","halfVertFOV","fov","tan","AvatarPreview","clientWidth","clientHeight","OrbitControls","enablePan","HemisphereLight","loadPreviewAvatar","setAvatar","Clock","snapshotCanvas","snapshotCamera","snapshotRenderer","setClearAlpha","previewRenderer","setClearColor","getDelta","parentElement","setSize","resetCamera","getCenter","domElement","imageBitmaps","disposeImageBitmap","oldProps","applyMaps","previewMesh","idleAnimation","idleAnimationAction","getImage","onUpdate","originalMaps","bm","newProps","mapName","applyMap","applyMapToPreview","revertMap","react__WEBPACK_IMPORTED_MODULE_2___default","_assets_images_warning_icon_png__WEBPACK_IMPORTED_MODULE_0___default","_assets_images_warning_icon_2x_png__WEBPACK_IMPORTED_MODULE_1___default","react_intl__WEBPACK_IMPORTED_MODULE_4__","withRef","react_intl__WEBPACK_IMPORTED_MODULE_2__","signInComplete","continueButton","signInForm","emailField","terms","_dialog_container__WEBPACK_IMPORTED_MODULE_4__","media-browser","header-center","engine-attribution","engine-attribution-contents","favorites-header","no-search","nav-right-pad","nav-source","nav-source-selected","nav-scroll-arrow","tiles","tile","last-joined","lastJoined","tile-link","tileLink","tile-content","tileContent","avatar-tile","avatarTile","edit-avatar","create-tile","createTile","tiles-variable","tilesVariable","page-number","pageNumber","pager-button-disabled","pagerButtonDisabled","header-left","header-right","create-button","create-link","empty-string","media-browser-inline","mediaBrowserInline","email-field","next-button","continue-button","sign-in-form","sign-in-complete","ui-dialog","ui-interactive","presence-info","corner-button","profile-entry","form-submit","nag-corner-button","choose-scene-button","chooseSceneButton","choose-avatar","entry-button-secondary","entry-panel","button-container","secondary-action-button","leave-button","entry-button","action-button","collapse-button","favorite-button","favoriteButton","form-field-text","lobby-label","lobbyLabel","rename-button","renameButton","wide-button","screen-sharing","screenSharing","invite-tip","loading-text","streaming-tip","streaming-tip-attach-point","streaming-tip-close","streaming-tip-message","ui-dialog-box-contents","in-room-favorite-button","inRoomFavoriteButton","occupant-count","presence-info-selected","camera-mode-exit-button","corner-button-selected","invite-tip-attach-point","avatar-editor","display-name","entry-dialog","favorited","room-subtitle","lobby","profile-icon","profileIcon","button-subtitle","audio-loader","webvr-link-container","webvrLinkContainer","webvr-link","webvrLink","invite-container","link-button","enter-vr-button","invite-button","inviteButton","enter-button","invite-mini-button","embed-text","invite-container-inverted","embed-tip-wrap","embed-tip","hide-small-screens","hideSmallScreens","invite-container-below-hud","attach-point","keep-open","digit_2","digit2","digit_3","digit3","code-loading-panel","hub-link-link","embed-tip-attach-point","cancel-button","confirm-button","client-action-buttons","client-info-dialog","community-identifier","client-info","clientInfo","client-profile-image","client-details","clientDetails","client-main","clientMain","button-icon","small-button","input-border","left-side-of-input","add-media-form","cancel-icon","upload-icon","hide-file-input","spoke-launch","change-scene-button","changeSceneButton","spoke-create","avatar-url-dialog","close-button","name-field","room-settings-form","permissions-group","permission-disabled","tip-root","tip-link","tip-cancel","split-tip","split-tip-icon","spawn_menu-icon","spawnMenuIcon","object_rotate_button-icon","objectRotateButtonIcon","object_scale_button-icon","objectScaleButtonIcon","object_recenter_button-icon","objectRecenterButtonIcon","form-frame","leave-room","room-info","scene-screenshot","scene-details","scene-main","scene-name","scene-creator","scene-attributions","attribution-name","attribution-author","oauth-discord-button","oauth-twitter-button","oauth-button","oauth-type-name","oauth-icon","oauthIcon","privacy-notice","oauth-buttons","twitter-message","tweet-button","editor-inner","emoji-button","highlight","tweet-loader","dialog-background","message-entry-in-room","message-entry-spawn","message-entry-input","message-entry","message-entry-disabled","message-entry-button","message-entry-button-in-room","message-entry-upload","message-entry-input-in-room","message-entry-input-no-spawn","message-entry-on-mobile","command-help","presence-log","presence-log-entry","message-body","message-body-multi","message-body-mono","message-wrap","message-wrap-multi","message-source","message-source-link","icon-button","spawn-message","presence-log-entry-with-button","presence-log-in-room","presence-log-spawn","presence-log-entry-one-line","presence-log-emoji","client-link","presence-list","row-header","list-item","list-item-link","sign-in","moderator-badge","bottom-links-main","bottomLinksMain","bottom-links","bottomLinks","settings-menu","settings-row","load-button","hub-name","main-panel","tip-cancel-text","top-tip","column","attach_video_share_mode","attachVideoShareMode","attach_video_share_failed","attachVideoShareFailed","attach_pen_mode","attachPenMode","attach_mute_mode","attachMuteMode","attach_freeze_mode","attachFreezeMode","top-tip-no-hud","video-share-extra-options","small","large","video-share","freeze","mobile-media-picker","mobileMediaPicker","share_camera","shareCamera","share_screen","shareScreen","share_window","shareWindow","mic-0","mic-1","mic-2","mic-3","mic-4","mic-5","mic-6","mic-7","mic-off-0","mic-off-1","mic-off-2","mic-off-3","mic-off-4","mic-off-5","mic-off-6","mic-off-7","computeObjectAABB","boxRoot","isEmpty","matrixWorldNeedsUpdate","dZ","HubsTextureLoader","manager","DefaultLoadingManager","onLoad","loadTextureAsync","imageLoader","ImageBitmapLoader","setCrossOrigin","setPath","cacheKey","resolveURL","loader","loadAsync","mediaAPIEndpoint","resolveUrlCache","media_utils_asyncToGenerator","resultPromise","Content-Type","response","ok","statusText","desiredContentType","formData","FormData","interactableId","needsToBeUploaded","fireLoadingTimeout","reader","FileReader","DataView","getUint16","marker","getUint32","little","readAsArrayBuffer","getOrientation","srcUrl","uploadPromotionTokens","objectTypeForOriginAndContentType","vertexRegex","fragRegex","shaderUniforms","newMaterial","onBeforeCompile","vlines","vindex","unshift","flines","findex","mediaHighlightFrag","mediaPos","snapCount","mirrorOrientation","rotateY","eventType","_createImageTexture","modifiedTranslations","translations","motto","i18n_messages","navigatorLang","language","userLanguage","localeData","debug__WEBPACK_IMPORTED_MODULE_0__","debug__WEBPACK_IMPORTED_MODULE_0___default","_qs_truthy__WEBPACK_IMPORTED_MODULE_1__","logFilter","calculateVolume","getByteTimeDomainData","amplitude","currVolume","tempScaleFromPosition","tempScaleToPosition","fromObject","toObject","minScale","maxScale","prevVolume","_updateAnalysis","createAnalyser","fftSize","frequencyBinCount","soundSource","avatarIsQuiet","currentVolume","lastSeenVolume","connectAnalyser","_playerCamera","audioAnalyser","SPRITE_NAMES","MIC_HOVER","MIC_OFF_HOVER","loudest","prevSpriteName","decayingVolume","spriteName","verifyAuthentication","authTopic","authToken","authPayload","handleAuthCredentials","tempVector3","disposeMaterial","mtrl","lightMap","bumpMap","normalMap","specularMap","materialArray","MeshFaceMaterial","MultiMaterial","fn","emailParts","emailIdentity","emailDomain","dayjs","extend","relativeTime","PUBLISHER_FOR_ENTRY_TYPE","sketchfab_model","poly_model","twitch_stream","MediaTiles","isImage","isAvatar","imageAspect","imageWidth","imageHeight","isHub","getTileDimensions","publisherName","_state_link__WEBPACK_IMPORTED_MODULE_14__","_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_6__","faExternalLinkAlt","react_intl__WEBPACK_IMPORTED_MODULE_5__","last_activated_at","fromNow","createTileWidth","createTileHeight","hasMeta","apiSource","isVariableWidth","hasNext","hasPrevious","entryToTile","previousPage","faAngleLeft","page","nextPage","originalGetExtension","WebGLRenderingContext","getExtension","supportsFloatTextures","dataTexture","DataTexture","FloatType","Camera","getError","checkFloatTextureSupport","names","selectRandom","arr","avatarIds","av","generateDefaultProfile","LOCAL_STORE_KEY","STORE_STATE_CACHE_KEY","OAUTH_FLOW_CREDENTIALS_KEY","validator","Validator","additionalProperties","personalAvatarId","confirmedDiscordRooms","onLoadActions","$ref","oauthFlowCredentials","getJSON","resetConfirmedBroadcastedRooms","clearStoredArray","resetTipActivityFlags","currentEntryCount","arrayMerge","destinationArray","sourceArray","mergeOpts","finalState","validate","deriveKey","privateKey","publicKey","crypto","subtle","public","publicKeyToString","exportKey","stringToPublicKey","importKey","namedCurve","stringToArrayBuffer","buf","arrayBufferToString","keyPair","generateKey","publicKeyString","incomingPublicKeyString","iv","incomingPublicKey","secret","encryptedData","encrypt","base64value","ciphertext","decrypt","LINK_ACTION_TIMEOUT","getLetter","readyToSend","leftChannel","leave","incoming","_generatePublicKeyAndEncryptedObject","generatePublicKeyAndEncryptedObject","public_key","target_session_id","reply_to_session_id","_generateKeys","generateKeys","numOccupants","_x7","_x8","_decryptObject","decryptObject","_fullscreen__WEBPACK_IMPORTED_MODULE_1__","isExitingFullscreenDueToFocus","URL_IMAGE","URL_VIDEO","URL_MODEL","URL_PDF","URL_AUDIO","FILE_IMAGE","FILE_VIDEO","FILE_MODEL","FILE_PDF","FILE_AUDIO","CLIPBOARD_IMAGE","CLIPBOARD_VIDEO","CLIPBOARD_MODEL","CLIPBOARD_PDF","CLIPBOARD_AUDIO","SPAWNER_IMAGE","SPAWNER_VIDEO","SPAWNER_MODEL","SPAWNER_PDF","SPAWNER_AUDIO","UNKNOWN","objectTypeForOrigin","urlType","fileType","clipboardType","spawnerType","objectTypeMimePrefixLookupMap","image/","model/","application/x-zip-compressed","video/","application/vnd.apple.mpegurl","application/x-mpegurl","audio/","application/pdf","srcSuffixLookupMap",".m3u8","raven_js__WEBPACK_IMPORTED_MODULE_0__","raven_js__WEBPACK_IMPORTED_MODULE_0___default","ga","trackedPage","trackedTitle","sentryDsn","SENTRY_DSN","gaTrackingId","GA_TRACKING_ID","Raven","install","_qs_truthy__WEBPACK_IMPORTED_MODULE_0__","showLog","debugLog","debugLogInput","debugLogEval","onsubmit","eval","minimized","debugLogMinimize","onclick","scrollHeight","origConsoleLog","origConsoleError","origConsoleWarn","objs","firstObj","shouldScroll","onunhandledrejection","zeroPos","zeroQuat","oneScale","bindingSetters","PropertyBinding","SetterByBindingTypeAndVersioning","Versioning","setter","MatrixWorldNeedsUpdate","targetObject","getWorldScale","handleMatrixModification","cachedMatrixWorld","applyMatrix","forceLocalUpdate","forceWorldUpdate","skipParents","hasHadFirstMatrixUpdate","childrenNeedMatrixWorldUpdate","forceChildrenWorldUpdate","q1","m1","isVector3","isCamera","isLight","extractRotation","animation","colorHelperFrom","colorHelperTo","getComponentProperty","setComponentProperty","splitCache","TYPE_COLOR","STRING_COMPONENTS","STRING_OBJECT3D","toRadians","addEventListeners","eventNames","removeEventListeners","getRawProperty","splitDot","setRawProperty","propertyName","targetValue","startEvents","pauseEvents","resumeEvents","eventDetail","animationIsPlaying","onStartEvent","beginAnimation","pauseAnimation","resumeAnimation","fromColor","toColor","targetsArray","updateConfigForDefault","updateConfigForRawColor","createAndStartAnimation","cancelDelayedStart","pausedWasPlaying","updateConfig","delayTimeout","stopRelatedAnimations","waitComponentInitRawProperty","setColorConfig","isBoolean","isNaN","parseFloat","aframeProperty","updateConfigForVector","coordinates","propType","getPropertyType","cb","wait","AmbientLight","initialForce","maxForce","hasBody","CANNON","Vec3","applyForce","generateAndAddHeightfield","shape","mult","cannonOffset","Heightfield","elementSize","addShape","skyColor","groundColor","onQualityChanged","PointLight","innerConeAngle","outerConeAngle","SpotLight","penumbra","autoLockOnLoad","autoLockOnRelease","gravitySpeedLimit","onGrab","onRelease","ammoBody","_makeStaticWhenAtRest","linearThreshold","angularThreshold","isAtRest","getLinearVelocity","length2","getAngularVelocity","hasBeenHereBefore","_onBodyLoaded","setLocked","getVelocity","stuckTo","_unstickObject","sizeVec","boundingBoxWorldPositionVec","colliderWorldPositionVec","collidingLastFrame","setFromCenterAndSize","isColliding","onVideoLoaded","origDispatch","firstObject","toDataURL","imageBitmap","HTMLImageElement","Pathfinding","Geometry","fromBufferGeometry","setZoneData","createZone","eventSource","eventListeners","_handleEvent","ReactAudioContext","WithHoverSound","react__WEBPACK_IMPORTED_MODULE_0__","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","createContext","Consumer","cloneElement","onMouseEnter","networkedTemplate"],"mappings":"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CPC,OAAO,GAKHC,GAAW,CACf,IACA,OACA,UACA,OACA,UACA,QACA,QACA,IACA,OACA,MACA,MACA,aACA,OACA,KACA,SACA,SACA,UACA,SACA,OACA,OACA,MACA,WACA,UACA,WACA,KACA,MACA,UACA,MACA,MACA,KACA,KACA,KACA,QACA,WACA,aACA,SACA,OACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,SACA,SACA,KACA,OACA,IACA,SACA,MACA,QACA,MACA,MACA,SACA,QACA,SACA,KACA,OACA,MACA,OACA,OACA,OACA,OACA,QACA,MACA,OACA,WACA,SACA,KACA,SACA,WACA,SACA,IACA,QACA,MACA,WACA,IACA,KACA,KACA,OACA,IACA,OACA,SACA,UACA,SACA,QACA,SACA,OACA,SACA,QACA,MACA,UACA,MACA,MACA,QACA,QACA,KACA,WACA,QACA,KACA,QACA,OACA,QACA,KACA,QACA,IACA,KACA,MACA,QACA,OAGF,SAASC,GAA6BC,GACpC,MAAMC,EAAe,GACfC,EAAU76F,SAAS4E,KAAK8V,YAAY1a,SAASC,cAAc06F,IAC3DG,EAAgBC,iBAAiBF,GACvC,IAAK,IAAIr+F,EAAI,EAAGA,EAAIs+F,EAAcp+F,OAAQF,IACxCo+F,EAAaE,EAAct+F,IAAMs+F,EAAcA,EAAct+F,IAG/D,OADAwD,SAAS4E,KAAKuW,YAAY0/E,GACnBD,EAWF,SAASI,KACd,IAAK,IAAIx+F,EAAI,EAAGA,EAAIi+F,GAAS/9F,OAAQF,IAC9Bs9F,GAAYW,GAASj+F,MACxBq9F,GAAuBY,GAASj+F,IAAMk+F,GAA6BD,GAASj+F,2RC/H3E,SAASy+F,GAAqB7tE,EAAS6b,GAC5C,MAAMiyD,EAAgB,IAAIx5F,gBAAgB0rB,EAAQzrB,SAASC,QAEIY,qBAA3BxC,SAAS2B,SAASuF,MACpDg0F,EAAc9vF,IAAI,YAAa69B,GAC/Bnb,aAAgBV,EAASA,EAAQzrB,SAAS8B,SAAUy3F,EAAclnE,aAElElG,aAAgBV,EAASoB,aAASpB,EAAQzrB,qBAAsB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","file":"assets/js/hub-eef9a8b342b4e5656ceb.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t6: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([2151,1,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import { Socket } from \"phoenix\";\nimport { generateHubName } from \"../utils/name-generation\";\nimport { airtableAssets, airtableAssetsInitialState } from '../airtable'\n\nimport Store from \"../storage/store\";\n\nconst resolverLink = document.createElement(\"a\");\nexport function getReticulumFetchUrl(path, absolute = false) {\n  if (process.env.RETICULUM_SERVER) {\n    return `https://${process.env.RETICULUM_SERVER}${path}`;\n  } else if (absolute) {\n    resolverLink.href = path;\n    return resolverLink.href;\n  } else {\n    return path;\n  }\n}\n\nlet reticulumMeta = null;\nlet invalidatedReticulumMetaThisSession = false;\n\nexport async function invalidateReticulumMeta() {\n  invalidatedReticulumMetaThisSession = true;\n  reticulumMeta = null;\n}\n\nexport async function getReticulumMeta() {\n  if (!reticulumMeta) {\n    // Initially look up version based upon page, avoiding round-trip, otherwise fetch.\n    if (!invalidatedReticulumMetaThisSession && document.querySelector(\"meta[name='ret:version']\")) {\n      reticulumMeta = {\n        version: document.querySelector(\"meta[name='ret:version']\").getAttribute(\"value\"),\n        pool: document.querySelector(\"meta[name='ret:pool']\").getAttribute(\"value\"),\n        phx_host: document.querySelector(\"meta[name='ret:phx_host']\").getAttribute(\"value\")\n      };\n    } else {\n      await fetch(getReticulumFetchUrl(\"/api/v1/meta\")).then(async res => {\n        reticulumMeta = await res.json();\n      });\n    }\n  }\n\n  const qs = new URLSearchParams(location.search);\n  const phxHostOverride = qs.get(\"phx_host\");\n\n  if (phxHostOverride) {\n    reticulumMeta.phx_host = phxHostOverride;\n  }\n\n  return reticulumMeta;\n}\n\nexport async function connectToReticulum(debug = false, params = null) {\n  const qs = new URLSearchParams(location.search);\n\n  const getNewSocketUrl = async () => {\n    const socketProtocol = qs.get(\"phx_protocol\") || (document.location.protocol === \"https:\" ? \"wss:\" : \"ws:\");\n    let socketHost = qs.get(\"phx_host\");\n    let socketPort = qs.get(\"phx_port\");\n\n    const reticulumMeta = await getReticulumMeta();\n    socketHost = socketHost || process.env.RETICULUM_SOCKET_SERVER || reticulumMeta.phx_host;\n    socketPort =\n      socketPort ||\n      (process.env.RETICULUM_SERVER ? new URL(`${socketProtocol}//${process.env.RETICULUM_SERVER}`).port : \"443\");\n    return `${socketProtocol}//${socketHost}${socketPort ? `:${socketPort}` : \"\"}`;\n  };\n\n  const socketUrl = await getNewSocketUrl();\n  console.log(`Phoenix Socket URL: ${socketUrl}`);\n\n  const socketSettings = {};\n\n  if (debug) {\n    socketSettings.logger = (kind, msg, data) => {\n      console.log(`${kind}: ${msg}`, data);\n    };\n  }\n\n  if (params) {\n    socketSettings.params = params;\n  }\n\n  const socket = new Socket(`${socketUrl}/socket`, socketSettings);\n  socket.connect();\n  socket.onError(async () => {\n    // On error, underlying reticulum node may have died, so rebalance by\n    // fetching a new healthy node to connect to.\n    invalidateReticulumMeta();\n\n    const endPointPath = new URL(socket.endPoint).pathname;\n    const newSocketUrl = await getNewSocketUrl();\n    const newEndPoint = `${newSocketUrl}${endPointPath}`;\n    console.log(`Socket error, changed endpoint to ${newEndPoint}`);\n    socket.endPoint = newEndPoint;\n  });\n\n  return socket;\n}\n\nexport function getLandingPageForPhoto(photoUrl) {\n  const parsedUrl = new URL(photoUrl);\n  return getReticulumFetchUrl(parsedUrl.pathname.replace(\".png\", \".html\") + parsedUrl.search, true);\n}\n\nexport function fetchReticulumAuthenticated(url, method = \"GET\", payload) {\n  const { token } = window.APP.store.state.credentials;\n  const retUrl = getReticulumFetchUrl(url);\n  const params = {\n    headers: { \"content-type\": \"application/json\" },\n    method\n  };\n  if (token) {\n    params.headers.authorization = `bearer ${token}`;\n  }\n  if (payload) {\n    params.body = JSON.stringify(payload);\n  }\n  return fetch(retUrl, params).then(async r => {\n    const result = await r.text();\n    try {\n      return JSON.parse(result);\n    } catch (e) {\n      // Some reticulum responses, particularly DELETE requests, don't return json.\n      return result;\n    }\n  });\n}\n\nexport async function createAndRedirectToNewHub(name, sceneId, sceneUrl, replace) {\n  const createUrl = getReticulumFetchUrl(\"/api/v1/hubs\");\n\n  let assets = {Name: \"Test\", SceneUrl: null};\n\n  const record = await airtableAssets.find('recHqITRS7cBMwn9i')\n\n  if (record) assets = record.fields;\n  \n  // const payload = { hub: { name: name || generateHubName() } };\n  const payload = { hub: { name: assets.Name } };\n  \n\n  // if (sceneId) {\n    // payload.hub.scene_id = sceneId;\n  // } else {\n    // payload.hub.default_environment_gltf_bundle_url = sceneUrl;\n  // }\n    \n    payload.hub.default_environment_gltf_bundle_url = assets.SceneUrl;\n    \n\n  const headers = { \"content-type\": \"application/json\" };\n  const store = new Store();\n  if (store.state && store.state.credentials.token) {\n    headers.authorization = `bearer ${store.state.credentials.token}`;\n  }\n\n  let res = await fetch(createUrl, {\n    body: JSON.stringify(payload),\n    headers,\n    method: \"POST\"\n  }).then(r => r.json());\n\n  if (res.error === \"invalid_token\") {\n    // Clear the invalid token from store.\n    store.update({ credentials: { token: null, email: null } });\n\n    // Create hub anonymously\n    delete headers.authorization;\n    res = await fetch(createUrl, {\n      body: JSON.stringify(payload),\n      headers,\n      method: \"POST\"\n    }).then(r => r.json());\n  }\n\n  const hub = res;\n  let url = hub.url;\n\n  const creatorAssignmentToken = hub.creator_assignment_token;\n  if (creatorAssignmentToken) {\n    store.update({ creatorAssignmentTokens: [{ hubId: hub.hub_id, creatorAssignmentToken: creatorAssignmentToken }] });\n\n    // Don't need to store the embed token if there's no creator assignment token, since that means\n    // we are the owner and will get the embed token on page load.\n    const embedToken = hub.embed_token;\n\n    if (embedToken) {\n      store.update({ embedTokens: [{ hubId: hub.hub_id, embedToken: embedToken }] });\n    }\n  }\n\n  if (process.env.RETICULUM_SERVER && document.location.host !== process.env.RETICULUM_SERVER) {\n    url = `/hub.html?hub_id=${hub.hub_id}`;\n  }\n\n  if (replace) {\n    document.location.replace(url);\n  } else {\n    document.location = url;\n  }\n}\n\nexport function getPresenceEntryForSession(presences, sessionId) {\n  const entry = Object.entries(presences || {}).find(([k]) => k === sessionId) || [];\n  const presence = entry[1];\n  return (presence && presence.metas && presence.metas[0]) || {};\n}\n\nexport function getPresenceContextForSession(presences, sessionId) {\n  return (getPresenceEntryForSession(presences, sessionId) || {}).context || {};\n}\n\nexport function getPresenceProfileForSession(presences, sessionId) {\n  return (getPresenceEntryForSession(presences, sessionId) || {}).profile || {};\n}\n\n// Takes the given channel, and creates a new channel with the same bindings\n// with the given socket, joins it, and leaves the old channel after joining.\n//\n// NOTE: This function relies upon phoenix channel object internals, so this\n// function will need to be reviewed if/when we ever update phoenix.js\nexport function migrateChannelToSocket(oldChannel, socket, params) {\n  const channel = socket.channel(oldChannel.topic, params || oldChannel.params);\n\n  for (let i = 0, l = oldChannel.bindings.length; i < l; i++) {\n    const item = oldChannel.bindings[i];\n    channel.on(item.event, item.callback);\n  }\n\n  for (let i = 0, l = oldChannel.pushBuffer.length; i < l; i++) {\n    const item = oldChannel.pushBuffer[i];\n    channel.push(item.event, item.payload, item.timeout);\n  }\n\n  const oldJoinPush = oldChannel.joinPush;\n  const joinPush = channel.join();\n\n  for (let i = 0, l = oldJoinPush.recHooks.length; i < l; i++) {\n    const item = oldJoinPush.recHooks[i];\n    joinPush.receive(item.status, item.callback);\n  }\n\n  return new Promise(resolve => {\n    joinPush.receive(\"ok\", () => {\n      // Clear all event handlers first so no duplicate messages come in.\n      oldChannel.bindings = [];\n      resolve(channel);\n    });\n  });\n}\n\nexport function discordBridgesForPresences(presences) {\n  const channels = [];\n  for (const p of Object.values(presences)) {\n    for (const m of p.metas) {\n      if (m.profile && m.profile.discordBridges) {\n        Array.prototype.push.apply(channels, m.profile.discordBridges.map(b => b.channel.name));\n      }\n    }\n  }\n  return channels;\n}\n","const boundingBox = new THREE.Box3();\nconst frustumBox = new THREE.Box3();\nconst inverseLightMatrixWorld = new THREE.Matrix4();\nconst tempBox = new THREE.Box3();\nconst FRUSTUM_PADDING = 1;\nconst NEAR_CLIPPING_PLANE = -500;\nconst FAR_CLIPPING_PLANE = 500;\nconst verts = [\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3()\n];\n\nexport default function resizeShadowCameraFrustum(light, scene) {\n  // Reset bounding box\n  frustumBox.makeEmpty();\n  boundingBox.makeEmpty();\n\n  // Grow the extents of boundingBox for every geometry in the scene that has castShadow set to true.\n  scene.traverse(node => {\n    const geometry = node.geometry;\n\n    if (geometry && node.castShadow) {\n      if (!geometry.boundingBox) {\n        geometry.computeBoundingBox();\n      }\n\n      tempBox.copy(geometry.boundingBox);\n\n      // Apply matrix transforming bounding box from model space to world space\n      tempBox.applyMatrix4(node.matrixWorld);\n\n      boundingBox.union(tempBox);\n    }\n  });\n\n  // Transform the resulting bounding box from world space to light space.\n  // Construct a new bounding box in light space that contains the corners of the bounding box in world space.\n  const min = boundingBox.min;\n  const max = boundingBox.max;\n\n  verts[0].set(min.x, min.y, min.z);\n  verts[1].set(min.x, min.y, max.z);\n  verts[2].set(min.x, max.y, min.z);\n  verts[3].set(min.x, max.y, max.z);\n  verts[4].set(max.x, min.y, min.z);\n  verts[5].set(max.x, min.y, max.z);\n  verts[6].set(max.x, max.y, min.z);\n  verts[7].set(max.x, max.y, max.z);\n\n  inverseLightMatrixWorld.getInverse(light.shadow.camera.matrixWorld);\n\n  for (let i = 0; i < verts.length; i++) {\n    verts[i].applyMatrix4(inverseLightMatrixWorld);\n    frustumBox.expandByPoint(verts[i]);\n  }\n\n  // Update the camera frustum to fit the resulting bounding box.\n  // Everything in the frustum that has castShadow set to true will cast a shadow.\n  // Everything in the frustum that has receiveShadow set to true will receive a shadow.\n  // FRUSTUM_PADDING is added to avoid clipping the edges of shadows.\n  // TODO: Determine why shadows flicker when light is moved fast. The light's matrixWorld is probably being updated a frame behind.\n  const camera = light.shadow.camera;\n  camera.left = frustumBox.min.x - FRUSTUM_PADDING;\n  camera.right = frustumBox.max.x + FRUSTUM_PADDING;\n  camera.bottom = frustumBox.min.y - FRUSTUM_PADDING;\n  camera.top = frustumBox.max.y + FRUSTUM_PADDING;\n  camera.near = frustumBox.min.z + NEAR_CLIPPING_PLANE;\n  camera.far = frustumBox.max.z + FAR_CLIPPING_PLANE;\n  camera.updateProjectionMatrix();\n}\n","import resizeShadowCameraFrustum from \"../utils/resizeShadowCameraFrustum\";\n\nAFRAME.registerComponent(\"directional-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.DirectionalLight();\n    this.light.position.set(0, 0, 0);\n    this.light.target.position.set(0, 0, 1);\n    this.light.add(this.light.target);\n    this.el.setObject3D(\"directional-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n    this.rendererSystem = this.el.sceneEl.systems.renderer;\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      const color = new THREE.Color(this.data.color);\n      this.rendererSystem.applyColorCorrection(color);\n      light.color.copy(color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n\n    this.light.shadow.camera.matrixNeedsUpdate = true;\n  },\n\n  tick() {\n    if (window.APP && window.APP.quality === \"low\") {\n      return;\n    }\n\n    resizeShadowCameraFrustum(this.light, this.el.sceneEl.object3D);\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"directional-light\");\n  }\n});\n","export const Layers = {\n  // Layers 0 - 2 reserverd by ThreeJS and AFrame.\n  reflection: 3\n};\n\n/**\n * Sets layer flags on the underlying Object3D\n * @namespace environment\n * @component layers\n */\nAFRAME.registerComponent(\"layers\", {\n  schema: {\n    reflection: { type: \"boolean\", default: false },\n    inWorldHud: { type: \"boolean\", default: false },\n    exclusive: { type: \"boolean\", default: false } // if true, only these layers will be set\n  },\n  init() {\n    this.update = this.update.bind(this);\n    this.el.addEventListener(\"model-loaded\", this.update);\n  },\n  update(oldData) {\n    const obj = this.el.object3D;\n\n    if (this.data.exclusive) {\n      obj.traverse(o => (o.layers.mask = 0));\n    }\n\n    for (const [name, layer] of Object.entries(Layers)) {\n      const oldValue = oldData[name];\n      const newValue = this.data[name];\n\n      if (oldValue !== newValue) {\n        if (newValue) {\n          obj.traverse(o => o.layers.enable(layer));\n        } else {\n          obj.traverse(o => o.layers.disable(layer));\n        }\n      }\n    }\n  },\n  remove() {\n    this.el.removeEventListener(\"model-loaded\", this.update);\n  }\n});\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\n\n/**\n * Loops the given clip using this entity's animation mixer\n * @component loop-animation\n */\nAFRAME.registerComponent(\"loop-animation\", {\n  schema: {\n    paused: { type: \"boolean\", default: false },\n    clip: { type: \"string\" }\n  },\n\n  init() {\n    this.mixerEl = findAncestorWithComponent(this.el, \"animation-mixer\");\n\n    if (!this.mixerEl) {\n      console.warn(\"loop-animation component could not find an animation-mixer in its ancestors.\");\n      return;\n    }\n\n    this.updateClip();\n  },\n\n  update(oldData) {\n    if ((oldData.clip !== this.data.clip || oldData.paused !== this.data.paused) && this.mixerEl) {\n      if (oldData.clip !== this.data.clip) {\n        this.updateClip();\n      }\n\n      if (this.currentAction) {\n        this.currentAction.paused = this.data.paused;\n      }\n    }\n  },\n\n  updateClip() {\n    const { mixer, animations } = this.mixerEl.components[\"animation-mixer\"];\n    const clipName = this.data.clip;\n\n    if (animations.length === 0) {\n      return;\n    }\n\n    let clip;\n\n    if (!clipName) {\n      clip = animations[0];\n    } else {\n      clip = animations.find(({ name }) => name === clipName);\n    }\n\n    if (!clip) {\n      return;\n    }\n\n    const action = mixer.clipAction(clip, this.el.object3D);\n    action.enabled = true;\n    action.setLoop(THREE.LoopRepeat, Infinity).play();\n    this.currentAction = action;\n  },\n\n  destroy() {\n    if (this.currentAction) {\n      this.currentAction.enabled = false;\n      this.currentAction.stop();\n    }\n  }\n});\n","import { getBox, getScaleCoefficient } from \"../utils/auto-box-collider\";\nimport { resolveUrl, injectCustomShaderChunks } from \"../utils/media-utils\";\nimport {\n  guessContentType,\n  proxiedUrlFor,\n  isHubsRoomUrl,\n  isHubsSceneUrl,\n  isHubsAvatarUrl\n} from \"../utils/media-url-utils\";\nimport { addAnimationComponents } from \"../utils/animation\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\nimport \"three/examples/js/loaders/GLTFLoader\";\nimport loadingObjectSrc from \"../assets/LoadingObject_Atom.glb\";\nimport { SOUND_MEDIA_LOADING, SOUND_MEDIA_LOADED } from \"../systems/sound-effects-system\";\n\nimport anime from \"animejs\";\n\nconst SHAPE = require(\"aframe-physics-system/src/constants\").SHAPE;\n\nconst gltfLoader = new THREE.GLTFLoader();\nlet loadingObject;\ngltfLoader.load(loadingObjectSrc, gltf => {\n  loadingObject = gltf;\n});\n\nconst fetchContentType = url => {\n  return fetch(url, { method: \"HEAD\" }).then(r => r.headers.get(\"content-type\"));\n};\n\nconst fetchMaxContentIndex = url => {\n  return fetch(url).then(r => parseInt(r.headers.get(\"x-max-content-index\")));\n};\n\nconst boundingBox = new THREE.Box3();\n\nconst batchMeshes = qsTruthy(\"batchMeshes\");\nconst disableBatching = qsTruthy(\"disableBatching\");\n\nAFRAME.registerComponent(\"media-loader\", {\n  schema: {\n    fileId: { type: \"string\" },\n    fileIsOwned: { type: \"boolean\" },\n    src: { type: \"string\" },\n    resize: { default: false },\n    resolve: { default: false },\n    contentType: { default: null },\n    contentSubtype: { default: null },\n    animate: { default: true },\n    mediaOptions: {\n      default: {},\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n\n  init() {\n    this.onError = this.onError.bind(this);\n    this.showLoader = this.showLoader.bind(this);\n    this.clearLoadingTimeout = this.clearLoadingTimeout.bind(this);\n    this.onMediaLoaded = this.onMediaLoaded.bind(this);\n    this.animating = false;\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.networkedEl = networkedEl;\n    });\n  },\n\n  updateScale: (function() {\n    const center = new THREE.Vector3();\n    return function(resize) {\n      const mesh = this.el.getObject3D(\"mesh\");\n      const box = getBox(this.el, mesh);\n      const scaleCoefficient = resize ? getScaleCoefficient(0.5, box) : 1;\n      mesh.scale.multiplyScalar(scaleCoefficient);\n      const { min, max } = box;\n      center.addVectors(min, max).multiplyScalar(0.5 * scaleCoefficient);\n      mesh.position.sub(center);\n      mesh.matrixNeedsUpdate = true;\n    };\n  })(),\n\n  removeShape(id) {\n    if (this.el.getAttribute(\"ammo-shape__\" + id)) {\n      this.el.removeAttribute(\"ammo-shape__\" + id);\n    }\n  },\n\n  tick(t, dt) {\n    if (this.loaderMixer) {\n      this.loaderMixer.update(dt / 1000);\n    }\n  },\n\n  remove() {\n    if (this.loadingSoundNode) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.stopSoundNode(this.loadingSoundNode);\n      this.loadingSoundNode = null;\n    }\n  },\n\n  onError() {\n    this.el.removeAttribute(\"gltf-model-plus\");\n    this.el.removeAttribute(\"media-pager\");\n    this.el.removeAttribute(\"media-video\");\n    this.el.setAttribute(\"media-image\", { src: \"error\" });\n    this.clearLoadingTimeout();\n  },\n\n  showLoader() {\n    if (this.el.object3DMap.mesh) {\n      this.clearLoadingTimeout();\n      return;\n    }\n    const useFancyLoader = !!loadingObject;\n    const mesh = useFancyLoader\n      ? loadingObject.scene.clone()\n      : new THREE.Mesh(new THREE.BoxGeometry(), new THREE.MeshBasicMaterial());\n    this.el.setObject3D(\"mesh\", mesh);\n    this.updateScale(true);\n    if (useFancyLoader) {\n      this.loaderMixer = new THREE.AnimationMixer(mesh);\n\n      this.loadingClip = this.loaderMixer.clipAction(loadingObject.animations[0]);\n      this.loadingScaleClip = this.loaderMixer.clipAction(\n        new THREE.AnimationClip(null, 1000, [\n          new THREE.VectorKeyframeTrack(\".scale\", [0, 0.2], [0, 0, 0, mesh.scale.x, mesh.scale.y, mesh.scale.z])\n        ])\n      );\n      setTimeout(() => {\n        if (!this.loaderMixer) return; // Animation/loader was stopped early\n        this.el.setAttribute(\"ammo-shape__loader\", { type: SHAPE.BOX });\n      }, 200);\n\n      this.loadingClip.play();\n      this.loadingScaleClip.play();\n    }\n    if (this.el.sceneEl.is(\"entered\") && (!this.networkedEl || NAF.utils.isMine(this.networkedEl))) {\n      this.loadingSoundNode = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundLooped(\n        SOUND_MEDIA_LOADING\n      );\n    }\n    delete this.showLoaderTimeout;\n  },\n\n  clearLoadingTimeout() {\n    clearTimeout(this.showLoaderTimeout);\n    if (this.loadingSoundNode) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.stopSoundNode(this.loadingSoundNode);\n      this.loadingSoundNode = null;\n    }\n    if (this.loaderMixer) {\n      this.loadingClip.stop();\n      this.loadingScaleClip.stop();\n      delete this.loaderMixer;\n      delete this.loadingScaleClip;\n      delete this.loadingClip;\n    }\n    delete this.showLoaderTimeout;\n    this.removeShape(\"loader\");\n  },\n\n  updateHoverableVisuals() {\n    const hoverableVisuals = this.el.components[\"hoverable-visuals\"];\n\n    if (hoverableVisuals) {\n      if (!this.injectedCustomShaderChunks) {\n        this.injectedCustomShaderChunks = true;\n        hoverableVisuals.uniforms = injectCustomShaderChunks(this.el.object3D);\n      }\n\n      boundingBox.setFromObject(this.el.object3DMap.mesh);\n      boundingBox.getBoundingSphere(hoverableVisuals.boundingSphere);\n    }\n  },\n\n  onMediaLoaded(physicsShape = null, shouldUpdateScale) {\n    const el = this.el;\n    this.clearLoadingTimeout();\n\n    if (this.el.sceneEl.is(\"entered\")) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_MEDIA_LOADED);\n    }\n\n    const finish = () => {\n      this.animating = false;\n\n      if (physicsShape) {\n        el.setAttribute(\"ammo-shape\", {\n          type: physicsShape,\n          minHalfExtent: 0.04\n        });\n      }\n\n      this.updateHoverableVisuals();\n\n      const pager = el.components[\"media-pager\"];\n\n      if (pager) {\n        pager.repositionToolbar();\n      }\n    };\n\n    if (this.data.animate) {\n      if (!this.animating) {\n        this.animating = true;\n        if (shouldUpdateScale) this.updateScale(this.data.resize);\n        const mesh = this.el.getObject3D(\"mesh\");\n        const scale = { x: 0.001, y: 0.001, z: 0.001 };\n        scale.x = mesh.scale.x < scale.x ? mesh.scale.x * 0.001 : scale.x;\n        scale.y = mesh.scale.y < scale.y ? mesh.scale.x * 0.001 : scale.y;\n        scale.z = mesh.scale.z < scale.z ? mesh.scale.x * 0.001 : scale.z;\n        this.addMeshScaleAnimation(mesh, scale, finish);\n      }\n    } else {\n      if (shouldUpdateScale) this.updateScale(this.data.resize);\n      finish();\n    }\n  },\n\n  addMeshScaleAnimation(mesh, initialScale, onComplete) {\n    const step = (function() {\n      const lastValue = {};\n      return function(anim) {\n        const value = anim.animatables[0].target;\n\n        value.x = Math.max(Number.MIN_VALUE, value.x);\n        value.y = Math.max(Number.MIN_VALUE, value.y);\n        value.z = Math.max(Number.MIN_VALUE, value.z);\n\n        // For animation timeline.\n        if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n          return;\n        }\n\n        lastValue.x = value.x;\n        lastValue.y = value.y;\n        lastValue.z = value.z;\n\n        mesh.scale.set(value.x, value.y, value.z);\n        mesh.matrixNeedsUpdate = true;\n      };\n    })();\n\n    const config = {\n      duration: 400,\n      easing: \"easeOutElastic\",\n      elasticity: 400,\n      loop: 0,\n      round: false,\n      x: mesh.scale.x,\n      y: mesh.scale.y,\n      z: mesh.scale.z,\n      targets: [initialScale],\n      update: anim => step(anim),\n      complete: anim => {\n        step(anim);\n        onComplete();\n      }\n    };\n\n    mesh.scale.copy(initialScale);\n    mesh.matrixNeedsUpdate = true;\n\n    return anime(config);\n  },\n\n  async update(oldData) {\n    try {\n      const { src, contentSubtype } = this.data;\n\n      if (src !== oldData.src && !this.showLoaderTimeout) {\n        this.showLoaderTimeout = setTimeout(this.showLoader, 100);\n      }\n\n      if (!src) return;\n\n      let canonicalUrl = src;\n      let accessibleUrl = src;\n      let contentType = this.data.contentType;\n      let thumbnail;\n\n      if (this.data.resolve) {\n        const result = await resolveUrl(src);\n        canonicalUrl = result.origin;\n        // handle protocol relative urls\n        if (canonicalUrl.startsWith(\"//\")) {\n          canonicalUrl = location.protocol + canonicalUrl;\n        }\n        contentType = (result.meta && result.meta.expected_content_type) || contentType;\n        thumbnail = result.meta && result.meta.thumbnail && proxiedUrlFor(result.meta.thumbnail);\n      }\n\n      // todo: we don't need to proxy for many things if the canonical URL has permissive CORS headers\n      accessibleUrl = proxiedUrlFor(canonicalUrl, null);\n\n      // if the component creator didn't know the content type, we didn't get it from reticulum, and\n      // we don't think we can infer it from the extension, we need to make a HEAD request to find it out\n      contentType = contentType || guessContentType(canonicalUrl) || (await fetchContentType(accessibleUrl));\n\n      // We don't want to emit media_resolved for index updates.\n      if (src !== oldData.src) {\n        this.el.emit(\"media_resolved\", { src, raw: accessibleUrl, contentType });\n      }\n\n      if (\n        contentType.startsWith(\"video/\") ||\n        contentType.startsWith(\"audio/\") ||\n        AFRAME.utils.material.isHLS(canonicalUrl, contentType)\n      ) {\n        const parsedUrl = new URL(src);\n        const qsTime = parseInt(parsedUrl.searchParams.get(\"t\"));\n        const hashTime = parseInt(new URLSearchParams(parsedUrl.hash.substring(1)).get(\"t\"));\n        const startTime = hashTime || qsTime || 0;\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-image\");\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.addEventListener(\n          \"video-loaded\",\n          e => {\n            this.onMediaLoaded(e.detail.projection === \"flat\" ? SHAPE.BOX : null);\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\n          \"media-video\",\n          Object.assign({}, this.data.mediaOptions, { src: accessibleUrl, time: startTime, contentType })\n        );\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else if (contentType.startsWith(\"image/\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"image-loaded\",\n          e => {\n            this.onMediaLoaded(e.detail.projection === \"flat\" ? SHAPE.BOX : null);\n\n            if (contentSubtype === \"photo-camera\") {\n              this.el.setAttribute(\"hover-menu__photo\", {\n                template: \"#photo-hover-menu\",\n                dirs: [\"forward\", \"back\"]\n              });\n            }\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.setAttribute(\n          \"media-image\",\n          Object.assign({}, this.data.mediaOptions, { src: accessibleUrl, contentType, batch: !disableBatching })\n        );\n\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else if (contentType.startsWith(\"application/pdf\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        // two small differences:\n        // 1. we pass the canonical URL to the pager so it can easily make subresource URLs\n        // 2. we don't remove the media-image component -- media-pager uses that internally\n        this.el.setAttribute(\"media-pager\", Object.assign({}, this.data.mediaOptions, { src: canonicalUrl }));\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.addEventListener(\"image-loaded\", this.clearLoadingTimeout, { once: true });\n        this.el.addEventListener(\"preview-loaded\", () => this.onMediaLoaded(SHAPE.BOX), { once: true });\n\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else if (\n        contentType.includes(\"application/octet-stream\") ||\n        contentType.includes(\"x-zip-compressed\") ||\n        contentType.startsWith(\"model/gltf\")\n      ) {\n        this.el.removeAttribute(\"media-image\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"model-loaded\",\n          () => {\n            this.onMediaLoaded(SHAPE.HULL, true);\n            addAnimationComponents(this.el);\n          },\n          { once: true }\n        );\n        this.el.addEventListener(\"model-error\", this.onError, { once: true });\n        this.el.setAttribute(\n          \"gltf-model-plus\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: accessibleUrl,\n            contentType: contentType,\n            inflate: true,\n            batch: !disableBatching && batchMeshes,\n            modelToWorldScale: this.data.resize ? 0.0001 : 1.0\n          })\n        );\n      } else if (contentType.startsWith(\"text/html\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"image-loaded\",\n          () => {\n            const mayChangeScene = this.el.sceneEl.systems.permissions.can(\"update_hub\");\n\n            if (isHubsAvatarUrl(src)) {\n              this.el.setAttribute(\"hover-menu__hubs-item\", {\n                template: \"#avatar-link-hover-menu\",\n                dirs: [\"forward\", \"back\"]\n              });\n            } else if (isHubsRoomUrl(src) || (isHubsSceneUrl(src) && mayChangeScene)) {\n              this.el.setAttribute(\"hover-menu__hubs-item\", {\n                template: \"#hubs-destination-hover-menu\",\n                dirs: [\"forward\", \"back\"]\n              });\n            } else {\n              this.el.setAttribute(\"hover-menu__link\", { template: \"#link-hover-menu\", dirs: [\"forward\", \"back\"] });\n            }\n            this.onMediaLoaded(SHAPE.BOX);\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.setAttribute(\n          \"media-image\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: thumbnail,\n            contentType: guessContentType(thumbnail) || \"image/png\",\n            batch: !disableBatching\n          })\n        );\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else {\n        throw new Error(`Unsupported content type: ${contentType}`);\n      }\n    } catch (e) {\n      console.error(\"Error adding media\", e);\n      this.onError();\n    }\n  }\n});\n\nAFRAME.registerComponent(\"media-pager\", {\n  schema: {\n    src: { type: \"string\" },\n    index: { default: 0 }\n  },\n\n  init() {\n    this.toolbar = null;\n    this.imageSrc = null;\n    this.onNext = this.onNext.bind(this);\n    this.onPrev = this.onPrev.bind(this);\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.networkedEl = networkedEl;\n    });\n\n    this.el.addEventListener(\"image-loaded\", async e => {\n      this.imageSrc = e.detail.src;\n      await this._ensureUI();\n      this.update();\n    });\n  },\n\n  async _ensureUI() {\n    if (this.hasSetupUI || !this.imageSrc) return;\n    this.hasSetupUI = true;\n\n    // unfortunately, since we loaded the page image in an img tag inside media-image, we have to make a second\n    // request for the same page to read out the max-content-index header\n    this.maxIndex = await fetchMaxContentIndex(this.imageSrc);\n    const template = document.getElementById(\"paging-toolbar\");\n    this.el.querySelector(\".interactable-ui\").appendChild(document.importNode(template.content, true));\n    this.toolbar = this.el.querySelector(\".paging-toolbar\");\n    // we have to wait a tick for the attach callbacks to get fired for the elements in a template\n    setTimeout(() => {\n      this.nextButton = this.el.querySelector(\".next-button [text-button]\");\n      this.prevButton = this.el.querySelector(\".prev-button [text-button]\");\n      this.pageLabel = this.el.querySelector(\".page-label\");\n\n      this.nextButton.object3D.addEventListener(\"interact\", this.onNext);\n      this.prevButton.object3D.addEventListener(\"interact\", this.onPrev);\n\n      this.update();\n      this.el.emit(\"preview-loaded\");\n    }, 0);\n  },\n\n  async update() {\n    if (!this.data.src) return;\n\n    const pageSrc = proxiedUrlFor(this.data.src, this.data.index);\n    this.el.setAttribute(\"media-image\", { src: pageSrc, contentType: guessContentType(pageSrc) || \"image/png\" });\n\n    await this._ensureUI();\n\n    if (this.pageLabel) {\n      this.pageLabel.setAttribute(\"text\", \"value\", `${this.data.index + 1}/${this.maxIndex + 1}`);\n      this.repositionToolbar();\n    }\n  },\n\n  remove() {\n    if (this.toolbar) {\n      this.toolbar.parentNode.removeChild(this.toolbar);\n    }\n  },\n\n  onNext() {\n    if (!NAF.utils.isMine(this.networkedEl) && !NAF.utils.takeOwnership(this.networkedEl)) return;\n    this.el.setAttribute(\"media-pager\", \"index\", Math.min(this.data.index + 1, this.maxIndex));\n    this.el.emit(\"pager-page-changed\");\n  },\n\n  onPrev() {\n    if (!NAF.utils.isMine(this.networkedEl) && !NAF.utils.takeOwnership(this.networkedEl)) return;\n    this.el.setAttribute(\"media-pager\", \"index\", Math.max(this.data.index - 1, 0));\n    this.el.emit(\"pager-page-changed\");\n  },\n\n  repositionToolbar() {\n    const ammoShape = this.el.getAttribute(\"ammo-shape\");\n    if (!ammoShape) return;\n\n    this.toolbar.object3D.position.y = -0.7;\n    this.toolbar.object3D.matrixNeedsUpdate = true;\n  }\n});\n","import { SOUND_QUACK, SOUND_SPECIAL_QUACK } from \"../systems/sound-effects-system\";\n\nAFRAME.registerComponent(\"quack\", {\n  schema: {\n    quackPercentage: { default: 1 },\n    specialQuackPercentage: { default: 0.01 }\n  },\n\n  init: function() {\n    this._handleGrabStart = this._handleGrabStart.bind(this);\n  },\n\n  play: function() {\n    this.el.object3D.addEventListener(\"interact\", this._handleGrabStart);\n  },\n\n  pause: function() {\n    this.el.object3D.removeEventListener(\"interact\", this._handleGrabStart);\n  },\n\n  _handleGrabStart: function() {\n    const rand = Math.random();\n    if (rand < this.data.specialQuackPercentage) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SPECIAL_QUACK);\n    } else if (rand < this.data.quackPercentage) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_QUACK);\n    }\n  }\n});\n","import { setMatrixWorld } from \"../utils/three-utils\";\nimport { getCurrentStreamer } from \"../utils/component-utils\";\n\nfunction getStreamerCamera() {\n  const streamer = getCurrentStreamer();\n  if (streamer) {\n    return streamer.el.querySelector(\".camera\").object3D;\n  }\n  return null;\n}\n\nfunction lerp(start, end, t) {\n  return (1 - t) * start + t * end;\n}\n\nconst newRot = new THREE.Quaternion();\n\n/**\n * Nicely pans the camera for previewing a scene. There's some weirdness with this right now\n * since it ends up panning in a direction dependent upon the start camera orientation,\n * but it's good enough for now.\n */\nAFRAME.registerComponent(\"scene-preview-camera\", {\n  schema: {\n    duration: { default: 90, type: \"number\" },\n    positionOnly: { default: false, type: \"boolean\" }\n  },\n\n  init: function() {\n    this.startPoint = this.el.object3D.position.clone();\n    this.startRotation = this.el.object3D.quaternion.clone();\n\n    this.targetPoint = this.el.object3D.position.clone();\n    this.targetPoint.y = Math.max(this.targetPoint.y - 1.5, 1);\n    this.targetPoint.add(new THREE.Vector3(2, 0, -2));\n\n    const targetRotDelta = new THREE.Euler(-0.15, 0.0, 0.15);\n    this.targetRotation = new THREE.Quaternion();\n    this.targetRotation.setFromEuler(targetRotDelta);\n    this.targetRotation.premultiply(this.startRotation);\n\n    this.startTime = performance.now();\n    this.backwards = false;\n    this.ranOnePass = false;\n  },\n\n  tick2: function() {\n    const streamerCamera = getStreamerCamera();\n    if (streamerCamera) {\n      setMatrixWorld(this.el.object3D, streamerCamera.matrixWorld);\n      // Move camera forward just a bit so that we don't see the avatar's eye cylinders.\n      this.el.object3D.translateZ(-0.1);\n      this.el.object3D.matrixNeedsUpdate = true;\n    } else {\n      let t = (performance.now() - this.startTime) / (1000.0 * this.data.duration);\n      t = Math.min(1.0, Math.max(0.0, t));\n\n      if (!this.ranOnePass) {\n        t = t * (2 - t);\n      } else {\n        t = t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n      }\n\n      const from = this.backwards ? this.targetPoint : this.startPoint;\n      const to = this.backwards ? this.startPoint : this.targetPoint;\n      const fromRot = this.backwards ? this.targetRotation : this.startRotation;\n      const toRot = this.backwards ? this.startRotation : this.targetRotation;\n\n      THREE.Quaternion.slerp(fromRot, toRot, newRot, t);\n\n      this.el.object3D.position.set(lerp(from.x, to.x, t), lerp(from.y, to.y, t), lerp(from.z, to.z, t));\n\n      if (!this.data.positionOnly) {\n        this.el.object3D.rotation.setFromQuaternion(newRot);\n      }\n\n      this.el.object3D.matrixNeedsUpdate = true;\n\n      if (t >= 0.9999) {\n        this.ranOnePass = true;\n        this.backwards = !this.backwards;\n        this.startTime = performance.now();\n      }\n    }\n  }\n});\n","import \"three/examples/js/pmrem/PMREMGenerator\";\nimport \"three/examples/js/pmrem/PMREMCubeUVPacker\";\nimport qsTruthy from \"../utils/qs_truthy\";\nconst isBotMode = qsTruthy(\"bot\");\n\n/**\n * @author zz85 / https://github.com/zz85\n *\n * Based on \"A Practical Analytic Model for Daylight\"\n * aka The Preetham Model, the de facto standard analytic skydome model\n * http://www.cs.utah.edu/~shirley/papers/sunsky/sunsky.pdf\n *\n * First implemented by Simon Wallner\n * http://www.simonwallner.at/projects/atmospheric-scattering\n *\n * Improved by Martin Upitis\n * http://blenderartists.org/forum/showthread.php?245954-preethams-sky-impementation-HDR\n *\n * Three.js integration by zz85 http://twitter.com/blurspline\n */\n\nTHREE.Sky = function() {\n  const shader = THREE.Sky.SkyShader;\n\n  const material = new THREE.ShaderMaterial({\n    fragmentShader: shader.fragmentShader,\n    vertexShader: shader.vertexShader,\n    uniforms: THREE.UniformsUtils.clone(shader.uniforms),\n    side: THREE.BackSide\n  });\n\n  THREE.Mesh.call(this, new THREE.BoxBufferGeometry(1, 1, 1), material);\n};\n\nTHREE.Sky.prototype = Object.create(THREE.Mesh.prototype);\nTHREE.Sky.prototype.constructor = THREE.Sky;\n\nTHREE.Sky.SkyShader = {\n  uniforms: {\n    luminance: { value: 1 },\n    turbidity: { value: 2 },\n    rayleigh: { value: 1 },\n    mieCoefficient: { value: 0.005 },\n    mieDirectionalG: { value: 0.8 },\n    sunPosition: { value: new THREE.Vector3() }\n  },\n\n  vertexShader: [\n    \"uniform vec3 sunPosition;\",\n    \"uniform float rayleigh;\",\n    \"uniform float turbidity;\",\n    \"uniform float mieCoefficient;\",\n\n    \"varying vec3 vWorldPosition;\",\n    \"varying vec3 vSunDirection;\",\n    \"varying float vSunfade;\",\n    \"varying vec3 vBetaR;\",\n    \"varying vec3 vBetaM;\",\n    \"varying float vSunE;\",\n\n    \"const vec3 up = vec3( 0.0, 1.0, 0.0 );\",\n\n    // constants for atmospheric scattering\n    \"const float e = 2.71828182845904523536028747135266249775724709369995957;\",\n    \"const float pi = 3.141592653589793238462643383279502884197169;\",\n\n    // wavelength of used primaries, according to preetham\n    \"const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\",\n    // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n    // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\n    \"const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\",\n\n    // mie stuff\n    // K coefficient for the primaries\n    \"const float v = 4.0;\",\n    \"const vec3 K = vec3( 0.686, 0.678, 0.666 );\",\n    // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\n    \"const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\",\n\n    // earth shadow hack\n    // cutoffAngle = pi / 1.95;\n    \"const float cutoffAngle = 1.6110731556870734;\",\n    \"const float steepness = 1.5;\",\n    \"const float EE = 1000.0;\",\n\n    \"float sunIntensity( float zenithAngleCos ) {\",\n    \"\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\",\n    \"\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\",\n    \"}\",\n\n    \"vec3 totalMie( float T ) {\",\n    \"\tfloat c = ( 0.2 * T ) * 10E-18;\",\n    \"\treturn 0.434 * c * MieConst;\",\n    \"}\",\n\n    \"void main() {\",\n\n    \"\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\",\n    \"\tvWorldPosition = worldPosition.xyz;\",\n\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n    \"\tvSunDirection = normalize( sunPosition );\",\n\n    \"\tvSunE = sunIntensity( dot( vSunDirection, up ) );\",\n\n    \"\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\",\n\n    \"\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\",\n\n    // extinction (absorbtion + out scattering)\n    // rayleigh coefficients\n    \"\tvBetaR = totalRayleigh * rayleighCoefficient;\",\n\n    // mie coefficients\n    \"\tvBetaM = totalMie( turbidity ) * mieCoefficient;\",\n\n    \"}\"\n  ].join(\"\\n\"),\n\n  fragmentShader: [\n    \"varying vec3 vWorldPosition;\",\n    \"varying vec3 vSunDirection;\",\n    \"varying float vSunfade;\",\n    \"varying vec3 vBetaR;\",\n    \"varying vec3 vBetaM;\",\n    \"varying float vSunE;\",\n\n    \"uniform float luminance;\",\n    \"uniform float mieDirectionalG;\",\n\n    \"const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\",\n\n    // constants for atmospheric scattering\n    \"const float pi = 3.141592653589793238462643383279502884197169;\",\n\n    \"const float n = 1.0003;\", // refractive index of air\n    \"const float N = 2.545E25;\", // number of molecules per unit volume for air at\n    // 288.15K and 1013mb (sea level -45 celsius)\n\n    // optical length at zenith for molecules\n    \"const float rayleighZenithLength = 8.4E3;\",\n    \"const float mieZenithLength = 1.25E3;\",\n    \"const vec3 up = vec3( 0.0, 1.0, 0.0 );\",\n    // 66 arc seconds -> degrees, and the cosine of that\n    \"const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\",\n\n    // 3.0 / ( 16.0 * pi )\n    \"const float THREE_OVER_SIXTEENPI = 0.05968310365946075;\",\n    // 1.0 / ( 4.0 * pi )\n    \"const float ONE_OVER_FOURPI = 0.07957747154594767;\",\n\n    \"float rayleighPhase( float cosTheta ) {\",\n    \"\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\",\n    \"}\",\n\n    \"float hgPhase( float cosTheta, float g ) {\",\n    \"\tfloat g2 = pow( g, 2.0 );\",\n    \"\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\",\n    \"\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\",\n    \"}\",\n\n    // Filmic ToneMapping http://filmicgames.com/archives/75\n    \"const float A = 0.15;\",\n    \"const float B = 0.50;\",\n    \"const float C = 0.10;\",\n    \"const float D = 0.20;\",\n    \"const float E = 0.02;\",\n    \"const float F = 0.30;\",\n\n    \"const float whiteScale = 1.0748724675633854;\", // 1.0 / Uncharted2Tonemap(1000.0)\n\n    \"vec3 Uncharted2Tonemap( vec3 x ) {\",\n    \"\treturn ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;\",\n    \"}\",\n\n    \"void main() {\",\n    // optical length\n    // cutoff angle at 90 to avoid singularity in next formula.\n    \"\tfloat zenithAngle = acos( max( 0.0, dot( up, normalize( vWorldPosition - cameraPos ) ) ) );\",\n    \"\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\",\n    \"\tfloat sR = rayleighZenithLength * inverse;\",\n    \"\tfloat sM = mieZenithLength * inverse;\",\n\n    // combined extinction factor\n    \"\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\",\n\n    // in scattering\n    \"\tfloat cosTheta = dot( normalize( vWorldPosition - cameraPos ), vSunDirection );\",\n\n    \"\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\",\n    \"\tvec3 betaRTheta = vBetaR * rPhase;\",\n\n    \"\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );\",\n    \"\tvec3 betaMTheta = vBetaM * mPhase;\",\n\n    \"\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\",\n    \"\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\",\n\n    // nightsky\n    \"\tvec3 direction = normalize( vWorldPosition - cameraPos );\",\n    \"\tfloat theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]\",\n    \"\tfloat phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]\",\n    \"\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\",\n    \"\tvec3 L0 = vec3( 0.1 ) * Fex;\",\n\n    // composition + solar disc\n    \"\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\",\n    \"\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;\",\n\n    \"\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\",\n\n    \"\tvec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );\",\n    \"\tvec3 color = curr * whiteScale;\",\n\n    \"\tvec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\",\n\n    \"\tgl_FragColor = vec4( retColor, 1.0 );\",\n\n    \"}\"\n  ].join(\"\\n\")\n};\n\nAFRAME.registerComponent(\"skybox\", {\n  schema: {\n    turbidity: { type: \"number\", default: 10 },\n    rayleigh: { type: \"number\", default: 2 },\n    luminance: { type: \"number\", default: 1 },\n    mieCoefficient: { type: \"number\", default: 0.005 },\n    mieDirectionalG: { type: \"number\", default: 0.8 },\n    inclination: { type: \"number\", default: 0 },\n    azimuth: { type: \"number\", default: 0.15 },\n    distance: { type: \"number\", default: 8000 }\n  },\n\n  init() {\n    this.sky = new THREE.Sky();\n    this.el.setObject3D(\"mesh\", this.sky);\n    this.skyScene = new THREE.Scene();\n    this.cubeCamera = new THREE.CubeCamera(1, 100000, 512);\n    this.skyScene.add(this.cubeCamera);\n\n    this.updateEnvironmentMap = this.updateEnvironmentMap.bind(this);\n    // HACK: Render environment map on next frame to avoid bug where the render target texture is black.\n    // This is likely due to the custom elements attached callback being synchronous on Chrome but not Firefox.\n    // Added timeout due to additional case where texture is black in Firefox.\n    requestAnimationFrame(() => setTimeout(this.updateEnvironmentMap));\n  },\n\n  update(oldData) {\n    const uniforms = this.sky.material.uniforms;\n\n    if (this.data.turbidity !== oldData.turbidity) {\n      uniforms.turbidity.value = this.data.turbidity;\n    }\n\n    if (this.data.rayleigh !== oldData.rayleigh) {\n      uniforms.rayleigh.value = this.data.rayleigh;\n    }\n\n    if (this.data.luminance !== oldData.luminance) {\n      uniforms.luminance.value = this.data.luminance;\n    }\n\n    if (this.data.mieCoefficient !== oldData.mieCoefficient) {\n      uniforms.mieCoefficient.value = this.data.mieCoefficient;\n    }\n\n    if (this.data.mieDirectionalG !== oldData.mieDirectionalG) {\n      uniforms.mieDirectionalG.value = this.data.mieDirectionalG;\n    }\n\n    if (\n      this.data.inclination !== oldData.inclination ||\n      this.data.azimuth !== oldData.azimuth ||\n      this.data.distance !== oldData.distance\n    ) {\n      const theta = Math.PI * (this.data.inclination - 0.5);\n      const phi = 2 * Math.PI * (this.data.azimuth - 0.5);\n\n      const distance = this.data.distance;\n\n      const x = distance * Math.cos(phi);\n      const y = distance * Math.sin(phi) * Math.sin(theta);\n      const z = distance * Math.sin(phi) * Math.cos(theta);\n\n      uniforms.sunPosition.value.set(x, y, z).normalize();\n\n      // HACK Remove this if condition and always set the scale based on distance when the existing environments\n      // have their sky scales set to 1.\n      if (this.el.object3D.scale.x === 1) {\n        this.sky.scale.set(distance, distance, distance);\n      }\n\n      this.el.object3D.matrixNeedsUpdate = true;\n    }\n\n    this.updateEnvironmentMap();\n  },\n\n  updateEnvironmentMap() {\n    const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n\n    if (environmentMapComponent && !isBotMode) {\n      const renderer = this.el.sceneEl.renderer;\n      this.skyScene.add(this.sky);\n      this.cubeCamera.update(renderer, this.skyScene);\n      this.el.setObject3D(\"mesh\", this.sky);\n      const vrEnabled = renderer.vr.enabled;\n      renderer.vr.enabled = false;\n      const pmremGenerator = new THREE.PMREMGenerator(this.cubeCamera.renderTarget.texture);\n      pmremGenerator.update(renderer);\n      const pmremCubeUVPacker = new THREE.PMREMCubeUVPacker(pmremGenerator.cubeLods);\n      pmremCubeUVPacker.update(renderer);\n      renderer.vr.enabled = vrEnabled;\n      environmentMapComponent.updateEnvironmentMap(pmremCubeUVPacker.CubeUVRenderTarget.texture);\n      pmremGenerator.dispose();\n      pmremCubeUVPacker.dispose();\n    }\n  },\n\n  remove() {\n    this.el.removeObject3D(\"mesh\");\n  }\n});\n","import { getLastWorldPosition } from \"../utils/three-utils\";\n\n/**\n * Used on a player-rig to move the player to a random spawn point on entry.\n * @namespace avatar\n * @component spawn-controller\n */\nAFRAME.registerComponent(\"spawn-controller\", {\n  schema: {\n    target: { type: \"selector\" },\n    camera: { type: \"selector\", default: \"#player-camera\" },\n    playerHeight: { default: 1.6 },\n    loadedEvent: { type: \"string\" }\n  },\n  init() {\n    this.moveToSpawnPoint = this.moveToSpawnPoint.bind(this);\n    this.data.target.addEventListener(this.data.loadedEvent, this.moveToSpawnPoint);\n  },\n  moveToSpawnPoint() {\n    const spawnPoints = document.querySelectorAll(\"[spawn-point]\");\n\n    if (spawnPoints.length === 0) {\n      // Keep default position\n      return;\n    }\n\n    const camera = this.data.camera;\n    const spawnPointIndex = Math.round((spawnPoints.length - 1) * Math.random());\n    const spawnPoint = spawnPoints[spawnPointIndex];\n\n    getLastWorldPosition(spawnPoint.object3D, this.el.object3D.position);\n    this.el.object3D.rotation.copy(spawnPoint.object3D.rotation);\n\n    if (this.el.sceneEl.is(\"vr-mode\")) {\n      // Rotate the player rig such that the vr-camera faces forward.\n      this.el.object3D.rotation.y -= this.data.camera.object3D.rotation.y;\n    } else {\n      // Reset the camera transform in 2D mode.\n      camera.object3D.position.set(0, this.data.playerHeight, 0);\n      camera.object3D.rotation.set(0, 0, 0);\n      camera.object3D.matrixNeedsUpdate = true;\n    }\n\n    // Camera faces -Z direction. Flip rotation on Y axis to face the correct direction.\n    this.el.object3D.rotation.y += Math.PI;\n    this.el.object3D.matrixNeedsUpdate = true;\n\n    // Reset pitch-yaw-rotator after any scene-preview-camera rotation.\n    if (camera.components[\"pitch-yaw-rotator\"]) {\n      camera.components[\"pitch-yaw-rotator\"].set(camera.object3D.rotation.x, camera.object3D.rotation.y);\n    }\n  }\n});\n\n/**\n * Marks an entity as a potential spawn point.\n * @namespace environment\n * @component spawn-point\n */\nAFRAME.registerComponent(\"spawn-point\", {\n  init() {\n    this.el.object3D.visible = false;\n  }\n});\n","/* global require AFRAME THREE setTimeout clearTimeout */\nimport { addMedia } from \"../utils/media-utils\";\nimport { waitForEvent } from \"../utils/async-utils\";\nimport { ObjectContentOrigins } from \"../object-types\";\nimport { paths } from \"../systems/userinput/paths\";\n\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\n/**\n * Spawns networked objects when grabbed or when a specified event is fired.\n * @namespace network\n * @component super-spawner\n */\nAFRAME.registerComponent(\"super-spawner\", {\n  schema: {\n    /**\n     * Source of the media asset the spawner will spawn when grabbed. This can be a gltf, video, or image, or a url that the reticiulm media API can resolve to a gltf, video, or image.\n     */\n    src: { default: \"\" },\n\n    /**\n     * Whether to use the Reticulum media resolution API to interpret the src URL (e.g. find a video URL for Youtube videos.)\n     */\n    resolve: { default: false },\n\n    /**\n     * Whether to resize the media on load.\n     */\n    resize: { default: false },\n\n    /**\n     * The template to use for this object\n     */\n    template: { default: \"\" },\n\n    /**\n     * Spawn the object at a custom position, rather than at the center of the spanwer.\n     */\n    useCustomSpawnPosition: { default: false },\n    spawnPosition: { type: \"vec3\" },\n\n    /**\n     * Spawn the object with a custom orientation, rather than copying that of the spawner.\n     */\n    useCustomSpawnRotation: { default: false },\n    spawnRotation: { type: \"vec4\" },\n\n    /**\n     * Spawn the object with a custom scale, rather than copying that of the spawner.\n     */\n    useCustomSpawnScale: { default: false },\n    spawnScale: { type: \"vec3\" },\n\n    /**\n     * The spawner will become invisible and ungrabbable for this ammount of time after being grabbed. This can prevent rapidly spawning objects.\n     */\n    spawnCooldown: { default: 1 },\n\n    /**\n     * Center the spawned object on the hand that grabbed it after it finishes loading. By default the object will be grabbed relative to where the spawner was grabbed\n     */\n    centerSpawnedObject: { default: false },\n\n    /**\n     * Optional event to listen for to spawn an object on the preferred superHand\n     */\n    spawnEvent: { type: \"string\" },\n\n    /**\n     * If true, will spawn the object at the cursor and animate it into the hand.\n     */\n    animateFromCursor: { type: \"boolean\" }\n  },\n\n  init() {\n    this.cooldownTimeout = null;\n    this.handPosition = new THREE.Vector3();\n\n    this.onSpawnEvent = this.onSpawnEvent.bind(this);\n\n    this.sceneEl = document.querySelector(\"a-scene\");\n\n    this.tempSpawnHandPosition = new THREE.Vector3();\n  },\n\n  play() {\n    if (this.data.spawnEvent) {\n      this.el.sceneEl.addEventListener(this.data.spawnEvent, this.onSpawnEvent);\n    }\n  },\n\n  pause() {\n    if (this.data.spawnEvent) {\n      this.el.sceneEl.removeEventListener(this.data.spawnEvent, this.onSpawnEvent);\n    }\n    if (this.cooldownTimeout) {\n      clearTimeout(this.cooldownTimeout);\n      this.cooldownTimeout = null;\n      this.el.setAttribute(\"visible\", true);\n      this.el.classList.add(\"interactable\");\n    }\n  },\n\n  async onSpawnEvent() {\n    if (this.cooldownTimeout || !this.el.sceneEl.is(\"entered\")) {\n      return;\n    }\n\n    const entity = addMedia(\n      this.data.src,\n      this.data.template,\n      ObjectContentOrigins.SPAWNER,\n      null,\n      this.data.resolve,\n      false\n    ).entity;\n\n    const cursor = document.querySelector(\"#cursor\");\n    cursor.object3D.getWorldPosition(entity.object3D.position);\n    cursor.object3D.getWorldQuaternion(entity.object3D.quaternion);\n    entity.object3D.matrixNeedsUpdate = true;\n\n    if (this.data.useCustomSpawnScale) {\n      entity.object3D.scale.copy(this.data.spawnScale);\n    }\n\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const willAnimateFromCursor = this.data.animateFromCursor && userinput.get(paths.actions.rightHand.matrix);\n    if (!willAnimateFromCursor) {\n      interaction.state.rightRemote.held = entity;\n      interaction.state.rightRemote.spawning = true;\n    }\n    this.activateCooldown();\n    await waitForEvent(\"body-loaded\", entity);\n\n    cursor.object3D.getWorldPosition(entity.object3D.position);\n    cursor.object3D.getWorldQuaternion(entity.object3D.quaternion);\n    entity.object3D.matrixNeedsUpdate = true;\n\n    if (willAnimateFromCursor) {\n      document.querySelector(\"#player-right-controller\").object3D.getWorldPosition(this.handPosition);\n      entity.setAttribute(\"animation__spawn-at-cursor\", {\n        property: \"position\",\n        delay: 500,\n        dur: 1500,\n        from: { x: entity.object3D.position.x, y: entity.object3D.position.y, z: entity.object3D.position.z },\n        to: { x: this.handPosition.x, y: this.handPosition.y, z: this.handPosition.z },\n        easing: \"easeInOutBack\"\n      });\n    } else {\n      interaction.state.rightRemote.spawning = false;\n    }\n    entity.components[\"ammo-body\"].syncToPhysics();\n  },\n\n  activateCooldown() {\n    if (this.data.spawnCooldown > 0) {\n      const [sx, sy, sz] = [this.el.object3D.scale.x, this.el.object3D.scale.y, this.el.object3D.scale.z];\n\n      this.el.setAttribute(\"visible\", false);\n      this.el.object3D.scale.set(0.001, 0.001, 0.001);\n      this.el.object3D.matrixNeedsUpdate = true;\n      this.el.classList.remove(\"interactable\");\n      this.el.setAttribute(\"ammo-body\", { collisionFilterMask: COLLISION_LAYERS.NONE });\n      this.cooldownTimeout = setTimeout(() => {\n        this.el.setAttribute(\"visible\", true);\n        this.el.classList.add(\"interactable\");\n        this.el.setAttribute(\"ammo-body\", { collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER });\n        this.el.removeAttribute(\"animation__spawner-cooldown\");\n        this.el.setAttribute(\"animation__spawner-cooldown\", {\n          property: \"scale\",\n          delay: 50,\n          dur: 350,\n          from: { x: 0.001, y: 0.001, z: 0.001 },\n          to: { x: sx, y: sy, z: sz },\n          easing: \"easeOutElastic\"\n        });\n\n        this.cooldownTimeout = null;\n      }, this.data.spawnCooldown * 1000);\n    }\n  }\n});\n","import { Layers } from \"./layers\";\nimport \"../vendor/Water\";\nimport waterNormalMap from \"../assets/waternormals.jpg\";\n\n/**\n * @author jbouny / https://github.com/jbouny\n *\n * Work based on :\n * @author Slayvin / http://slayvin.net : Flat mirror for three.js\n * @author Stemkoski / http://www.adelphi.edu/~stemkoski : An implementation of water shader based on the flat mirror\n * @author Jonas Wagner / http://29a.ch/ && http://29a.ch/slides/2012/webglwater/ : Water shader explanations in WebGL\n */\n\nfunction MobileWater(geometry, options) {\n  THREE.Mesh.call(this, geometry);\n\n  const scope = this;\n\n  options = options || {};\n\n  const time = options.time !== undefined ? options.time : 0.0;\n  const normalSampler = options.waterNormals !== undefined ? options.waterNormals : null;\n  const sunDirection =\n    options.sunDirection !== undefined ? options.sunDirection : new THREE.Vector3(0.70707, 0.70707, 0.0);\n  const sunColor = new THREE.Color(options.sunColor !== undefined ? options.sunColor : 0xffffff);\n  const waterColor = new THREE.Color(options.waterColor !== undefined ? options.waterColor : 0x7f7f7f);\n  const eye = options.eye !== undefined ? options.eye : new THREE.Vector3(0, 0, 0);\n  const distortionScale = options.distortionScale !== undefined ? options.distortionScale : 20.0;\n  const side = options.side !== undefined ? options.side : THREE.FrontSide;\n  const fog = options.fog !== undefined ? options.fog : false;\n\n  const mirrorShader = {\n    uniforms: THREE.UniformsUtils.merge([\n      THREE.UniformsLib[\"lights\"],\n      {\n        normalSampler: { value: null },\n        time: { value: 0.0 },\n        size: { value: 1.0 },\n        distortionScale: { value: 20.0 },\n        sunColor: { value: new THREE.Color(0x7f7f7f) },\n        sunDirection: { value: new THREE.Vector3(0.70707, 0.70707, 0) },\n        eye: { value: new THREE.Vector3() },\n        waterColor: { value: new THREE.Color(0x555555) }\n      }\n    ]),\n\n    vertexShader: `\n      uniform float time;\n      varying vec4 worldPosition;\n\n      void main() {\n      \tworldPosition = modelMatrix * vec4( position, 1.0 );\n      \tvec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );\n      \tgl_Position = projectionMatrix * mvPosition;\n\n      }\n    `,\n\n    fragmentShader: `\n      uniform float time;\n      uniform float size;\n      uniform float distortionScale;\n      uniform sampler2D normalSampler;\n      uniform vec3 sunColor;\n      uniform vec3 sunDirection;\n      uniform vec3 eye;\n      uniform vec3 waterColor;\n\n      varying vec4 worldPosition;\n\n      vec4 getNoise( vec2 uv ) {\n      \tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\n      \tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\n      \tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\n      \tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\n      \tvec4 noise = texture2D( normalSampler, uv0 ) +\n      \t\ttexture2D( normalSampler, uv1 ) +\n      \t\ttexture2D( normalSampler, uv2 ) +\n      \t\ttexture2D( normalSampler, uv3 );\n      \treturn noise * 0.5 - 1.0;\n      }\n\n      void sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {\n      \tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\n      \tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );\n      \tspecularColor += pow( direction, shiny ) * sunColor * spec;\n      \tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\n      }\n\n      ${THREE.ShaderChunk[\"common\"]}\n      ${THREE.ShaderChunk[\"packing\"]}\n      ${THREE.ShaderChunk[\"bsdfs\"]}\n      ${THREE.ShaderChunk[\"lights_pars_begin\"]}\n\n      void main() {\n      \tvec4 noise = getNoise( worldPosition.xz * size );\n      \tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\n\n      \tvec3 diffuseLight = vec3(0.0);\n      \tvec3 specularLight = vec3(0.0);\n\n      \tvec3 worldToEye = eye-worldPosition.xyz;\n      \tvec3 eyeDirection = normalize( worldToEye );\n      \tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\n\n      \tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\n      \tfloat rf0 = 0.3;\n      \tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\n      \tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\n      \tvec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ), ( 0.5 + specularLight ), reflectance);\n      \tvec3 outgoingLight = albedo;\n      \tgl_FragColor = vec4( outgoingLight, 1 );\n      }\n    `\n  };\n\n  const material = new THREE.ShaderMaterial({\n    fragmentShader: mirrorShader.fragmentShader,\n    vertexShader: mirrorShader.vertexShader,\n    uniforms: THREE.UniformsUtils.clone(mirrorShader.uniforms),\n    transparent: false,\n    lights: true,\n    side: side,\n    fog: fog\n  });\n\n  material.uniforms.time.value = time;\n  material.uniforms.normalSampler.value = normalSampler;\n  material.uniforms.sunColor.value = sunColor;\n  material.uniforms.waterColor.value = waterColor;\n  material.uniforms.sunDirection.value = sunDirection;\n  material.uniforms.distortionScale.value = distortionScale;\n\n  material.uniforms.eye.value = eye;\n\n  scope.material = material;\n}\n\nMobileWater.prototype = Object.create(THREE.Mesh.prototype);\nMobileWater.prototype.constructor = THREE.Water;\n\nasync function loadWaterNormals(url) {\n  const texture = await new Promise((resolve, reject) =>\n    new THREE.TextureLoader().load(url, resolve, undefined, reject)\n  );\n  texture.wrapS = texture.wrapT = THREE.RepeatWrapping;\n  texture.needsUpdate = true;\n  return texture;\n}\n\nAFRAME.registerComponent(\"water\", {\n  schema: {\n    waterColor: { type: \"color\", default: \"#001e0f\" },\n    distortionScale: { type: \"number\", default: 3.7 },\n    sunColor: { type: \"color\", default: \"#ffffff\" },\n    inclination: { type: \"number\", default: 0 },\n    azimuth: { type: \"number\", default: 0 },\n    distance: { type: \"number\", default: 1 },\n    speed: { type: \"number\", default: 0.1 },\n    forceMobile: { type: \"boolean\", default: false }\n  },\n  init() {\n    const waterMesh = this.el.getObject3D(\"mesh\");\n    const waterGeometry = waterMesh.geometry;\n\n    // Render THREE.Water shader instead of THREE.Mesh\n    waterMesh.visible = false;\n\n    loadWaterNormals(waterNormalMap).then(waterNormals => {\n      const waterConfig = {\n        textureWidth: 512,\n        textureHeight: 512,\n        waterNormals: waterNormals,\n        sunDirection: this.data.sunDirection,\n        sunColor: new THREE.Color(this.data.sunColor),\n        waterColor: new THREE.Color(this.data.waterColor),\n        distortionScale: this.data.distortionScale,\n        fog: false\n      };\n\n      if (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR() || this.data.forceMobile) {\n        this.water = new MobileWater(waterGeometry, waterConfig);\n      } else {\n        this.water = new THREE.Water(waterGeometry, waterConfig);\n        this.water.mirrorCamera.layers.set(Layers.reflection);\n      }\n\n      this.el.setObject3D(\"water\", this.water);\n    });\n  },\n\n  update(oldData) {\n    if (this.data.forceMobile !== oldData.forceMobile) {\n      this.el.removeObject3D(\"water\");\n      this.init();\n      return;\n    }\n\n    if (!this.water) {\n      return;\n    }\n\n    const uniforms = this.water.material.uniforms;\n\n    if (this.data.waterColor !== oldData.waterColor) {\n      uniforms.waterColor.value.setStyle(this.data.waterColor);\n    }\n\n    if (this.data.distortionScale !== oldData.distortionScale) {\n      uniforms.distortionScale.value = this.data.distortionScale;\n    }\n\n    if (this.data.sunColor !== oldData.sunColor) {\n      uniforms.sunColor.value.setStyle(this.data.sunColor);\n    }\n\n    if (\n      this.data.inclination !== oldData.inclination ||\n      this.data.azimuth !== oldData.azimuth ||\n      this.data.distance !== oldData.distance\n    ) {\n      const theta = Math.PI * (this.data.inclination - 0.5);\n      const phi = 2 * Math.PI * (this.data.azimuth - 0.5);\n\n      const distance = this.data.distance;\n\n      const x = distance * Math.cos(phi);\n      const y = distance * Math.sin(phi) * Math.sin(theta);\n      const z = distance * Math.sin(phi) * Math.cos(theta);\n\n      uniforms.sunDirection.value.set(x, y, z);\n    }\n  },\n\n  tick(time) {\n    if (this.water) {\n      this.water.material.uniforms.time.value = (time / 1000) * this.data.speed;\n    }\n  },\n\n  remove() {\n    this.el.removeObject3D(\"water\");\n    const waterMesh = this.el.getObject3D(\"mesh\");\n    waterMesh.visible = true;\n  }\n});\n","import { ParticleEmitter } from \"@mozillareality/three-particle-emitter\";\nimport { textureLoader } from \"../utils/media-utils\";\n\nAFRAME.registerComponent(\"particle-emitter\", {\n  schema: {\n    src: { type: \"string\" },\n    startColor: { type: \"color\" },\n    middleColor: { type: \"color\" },\n    endColor: { type: \"color\" },\n    startOpacity: { type: \"number\" },\n    middleOpacity: { type: \"number\" },\n    endOpacity: { type: \"number\" },\n    colorCurve: { type: \"string\" },\n    sizeCurve: { type: \"string\" },\n    startSize: { type: \"number\" },\n    endSize: { type: \"number\" },\n    sizeRandomness: { type: \"number\" },\n    ageRandomness: { type: \"number\" },\n    lifetime: { type: \"number\" },\n    lifetimeRandomness: { type: \"number\" },\n    particleCount: { type: \"number\" },\n    startVelocity: { type: \"vec3\" },\n    endVelocity: { type: \"vec3\" },\n    velocityCurve: { type: \"string\" },\n    angularVelocity: { type: \"number\" }\n  },\n\n  init() {\n    this.particleEmitter = new ParticleEmitter(null);\n    this.particleEmitter.visible = false;\n    this.el.setObject3D(\"particle-emitter\", this.particleEmitter);\n    this.updateParticles = false;\n  },\n\n  update(prevData) {\n    const data = this.data;\n    const particleEmitter = this.particleEmitter;\n\n    if (prevData.src !== data.src) {\n      this.textureLoaded = false;\n      textureLoader.load(\n        data.src,\n        texture => {\n          this.particleEmitter.material.uniforms.map.value = texture;\n          this.particleEmitter.visible = true;\n          this.updateParticles = true;\n        },\n        undefined,\n        console.error\n      );\n    }\n\n    if (\n      prevData.startColor !== data.startColor ||\n      prevData.startSize !== data.startSize ||\n      prevData.sizeRandomness !== data.sizeRandomness ||\n      prevData.ageRandomness !== data.ageRandomness ||\n      prevData.lifetime !== data.lifetime ||\n      prevData.lifetimeRandomness !== data.lifetimeRandomness ||\n      prevData.particleCount !== data.particleCount\n    ) {\n      this.updateParticles = true;\n    }\n\n    particleEmitter.startColor.set(data.startColor);\n    particleEmitter.middleColor.set(data.middleColor);\n    particleEmitter.endColor.set(data.endColor);\n    particleEmitter.startOpacity = data.startOpacity;\n    particleEmitter.middleOpacity = data.middleOpacity;\n    particleEmitter.endOpacity = data.endOpacity;\n    particleEmitter.colorCurve = data.colorCurve;\n    particleEmitter.sizeCurve = data.sizeCurve;\n    particleEmitter.startSize = data.startSize;\n    particleEmitter.endSize = data.endSize;\n    particleEmitter.sizeRandomness = data.sizeRandomness;\n    particleEmitter.ageRandomness = data.ageRandomness;\n    particleEmitter.lifetime = data.lifetime;\n    particleEmitter.lifetimeRandomness = data.lifetimeRandomness;\n    particleEmitter.particleCount = data.particleCount;\n    particleEmitter.startVelocity.copy(data.startVelocity);\n    particleEmitter.endVelocity.copy(data.endVelocity);\n    particleEmitter.velocityCurve = data.velocityCurve;\n    particleEmitter.angularVelocity = data.angularVelocity;\n  },\n\n  tick(time, dt) {\n    if (this.updateParticles) {\n      this.particleEmitter.updateParticles();\n      this.updateParticles = false;\n    }\n\n    if (this.particleEmitter.visible) {\n      this.particleEmitter.update(dt / 1000);\n    }\n  }\n});\n","export function getSanitizedComponentMapping(inputComponent, inputProperty, publicComponents) {\n  const publicComponent = publicComponents[inputComponent];\n\n  if (!publicComponent) {\n    throw new Error(`Component \"${inputComponent}\" is not public.`);\n  }\n\n  const publicProperty = publicComponent.publicProperties[inputProperty];\n\n  if (!publicProperty) {\n    throw new Error(`Component \"${inputComponent}\"'s property \"${inputProperty}\" is not public.`);\n  }\n\n  return {\n    mappedComponent: publicComponent.mappedComponent,\n    mappedProperty: publicProperty.mappedProperty,\n    getMappedValue: publicProperty.getMappedValue\n  };\n}\n","import \"./components/gltf-model-plus\";\nimport { getSanitizedComponentMapping } from \"./utils/component-mappings\";\nimport { isHubsDestinationUrl } from \"./utils/media-url-utils\";\nconst PHYSICS_CONSTANTS = require(\"aframe-physics-system/src/constants\"),\n  TYPE = PHYSICS_CONSTANTS.TYPE,\n  SHAPE = PHYSICS_CONSTANTS.SHAPE,\n  FIT = PHYSICS_CONSTANTS.FIT;\nconst COLLISION_LAYERS = require(\"./constants\").COLLISION_LAYERS;\n\nAFRAME.GLTFModelPlus.registerComponent(\"duck\", \"duck\");\nAFRAME.GLTFModelPlus.registerComponent(\"quack\", \"quack\");\nAFRAME.GLTFModelPlus.registerComponent(\"sound\", \"sound\");\nAFRAME.GLTFModelPlus.registerComponent(\"css-class\", \"css-class\");\nAFRAME.GLTFModelPlus.registerComponent(\"interactable\", \"css-class\", (el, componentName) => {\n  el.setAttribute(componentName, \"interactable\");\n});\nAFRAME.GLTFModelPlus.registerComponent(\"super-spawner\", \"super-spawner\", (el, componentName, componentData) => {\n  //TODO: Do not automatically add these components\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n  el.setAttribute(\"hoverable-visuals\", {\n    cursorController: \"#cursor-controller\"\n  });\n  el.setAttribute(componentName, componentData);\n});\nAFRAME.GLTFModelPlus.registerComponent(\"gltf-model-plus\", \"gltf-model-plus\");\nAFRAME.GLTFModelPlus.registerComponent(\"media-loader\", \"media-loader\");\nAFRAME.GLTFModelPlus.registerComponent(\"body\", \"ammo-body\", el => {\n  //This is only required for migration of old environments with super-spawners\n  //will no longer be needed when spawners are added via Spoke instead.\n  el.setAttribute(\"ammo-body\", {\n    mass: 0,\n    type: TYPE.STATIC,\n    collisionFilterGroup: COLLISION_LAYERS.INTERACTABLES,\n    collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER\n  });\n});\nAFRAME.GLTFModelPlus.registerComponent(\"ammo-shape\", \"ammo-shape\");\nAFRAME.GLTFModelPlus.registerComponent(\"hide-when-quality\", \"hide-when-quality\");\nAFRAME.GLTFModelPlus.registerComponent(\"light\", \"light\", (el, componentName, componentData) => {\n  if (componentData.distance === 0) {\n    componentData.decay = 0;\n  }\n  el.setAttribute(componentName, componentData);\n  if (componentData.castShadow) {\n    // HACK: component.light isn't set until one frame after setArrtibute\n    setTimeout(() => {\n      el.components.light.light.shadow.camera.matrixNeedsUpdate = true;\n    }, 0);\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"ambient-light\", \"ambient-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"directional-light\", \"directional-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"hemisphere-light\", \"hemisphere-light\");\nfunction decayMigration(el, componentName, componentData) {\n  if (componentData.range === 0) {\n    componentData.decay = 0;\n  }\n  el.setAttribute(componentName, componentData);\n}\nAFRAME.GLTFModelPlus.registerComponent(\"point-light\", \"point-light\", decayMigration);\nAFRAME.GLTFModelPlus.registerComponent(\"spot-light\", \"spot-light\", decayMigration);\n\nAFRAME.GLTFModelPlus.registerComponent(\"skybox\", \"skybox\");\nAFRAME.GLTFModelPlus.registerComponent(\"layers\", \"layers\");\nAFRAME.GLTFModelPlus.registerComponent(\"shadow\", \"shadow\");\nAFRAME.GLTFModelPlus.registerComponent(\"water\", \"water\");\nAFRAME.GLTFModelPlus.registerComponent(\"scale-audio-feedback\", \"scale-audio-feedback\");\nAFRAME.GLTFModelPlus.registerComponent(\"animation-mixer\", \"animation-mixer\");\nAFRAME.GLTFModelPlus.registerComponent(\"loop-animation\", \"loop-animation\");\nAFRAME.GLTFModelPlus.registerComponent(\n  \"box-collider\",\n  \"ammo-shape\",\n  (() => {\n    const euler = new THREE.Euler();\n    return (el, componentName, componentData) => {\n      const { scale, rotation } = componentData;\n      euler.set(rotation.x, rotation.y, rotation.z);\n      const orientation = new THREE.Quaternion().setFromEuler(euler);\n      el.setAttribute(componentName, {\n        type: SHAPE.BOX,\n        fit: FIT.MANUAL,\n        offset: componentData.position,\n        halfExtents: { x: scale.x / 2, y: scale.y / 2, z: scale.z / 2 },\n        orientation\n      });\n    };\n  })()\n);\nAFRAME.GLTFModelPlus.registerComponent(\"visible\", \"visible\", (el, componentName, componentData) => {\n  if (typeof componentData === \"object\") {\n    el.setAttribute(componentName, componentData.visible);\n  } else {\n    el.setAttribute(componentName, componentData);\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"spawn-point\", \"spawn-point\");\nAFRAME.GLTFModelPlus.registerComponent(\"sticky-zone\", \"sticky-zone\");\nAFRAME.GLTFModelPlus.registerComponent(\"nav-mesh\", \"nav-mesh\", (el, _componentName, componentData) => {\n  const nav = AFRAME.scenes[0].systems.nav;\n  const zone = componentData.zone || \"character\";\n  let found = false;\n  el.object3D.traverse(node => {\n    if (node.isMesh && !found) {\n      found = true;\n      nav.loadMesh(node, zone);\n    }\n  });\n  // There isn't actually an a-frame nav-mesh component, but we want to tag this el as a nav-mesh since\n  // nav-mesh-helper will query for it later.\n  el.setAttribute(\"nav-mesh\");\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"pinnable\", \"pinnable\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"media\", \"media\", (el, componentName, componentData) => {\n  if (componentData.id) {\n    el.setAttribute(\"networked\", {\n      template: \"#interactable-media\",\n      owner: \"scene\",\n      persistent: true,\n      networkId: componentData.id\n    });\n  }\n\n  el.setAttribute(\"media-loader\", {\n    src: componentData.src,\n    resize: true,\n    resolve: true,\n    fileIsOwned: true,\n    animate: false,\n    contentSubtype: componentData.contentSubtype\n  });\n\n  if (componentData.pageIndex) {\n    el.setAttribute(\"media-pager\", { index: componentData.pageIndex });\n  }\n\n  if (componentData.paused !== undefined) {\n    el.setAttribute(\"media-video\", { videoPaused: componentData.paused });\n  }\n\n  if (componentData.time) {\n    el.setAttribute(\"media-video\", { time: componentData.time });\n  }\n});\n\nfunction mediaInflator(el, componentName, componentData, components) {\n  let isControlled = true;\n\n  if (components.networked) {\n    // TODO: When non-hubs links can be traversed, make all link components controlled so you can open them.\n    isControlled =\n      componentData.controls || isHubsDestinationUrl(componentData.src) || isHubsDestinationUrl(componentData.href);\n\n    const hasVolume = componentName === \"video\";\n    const templateName = isControlled || hasVolume ? \"#static-controlled-media\" : \"#static-media\";\n\n    el.setAttribute(\"networked\", {\n      template: templateName,\n      owner: \"scene\",\n      persistent: true,\n      networkId: components.networked.id\n    });\n  }\n\n  const mediaOptions = {};\n\n  if (componentName === \"video\" || componentName === \"image\") {\n    mediaOptions.projection = componentData.projection;\n  }\n\n  if (componentName === \"video\") {\n    mediaOptions.videoPaused = !componentData.autoPlay;\n    mediaOptions.volume = componentData.volume;\n    mediaOptions.loop = componentData.loop;\n    mediaOptions.audioType = componentData.audioType;\n    mediaOptions.hidePlaybackControls = !isControlled;\n\n    if (componentData.audioType === \"pannernode\") {\n      mediaOptions.distanceModel = componentData.distanceModel;\n      mediaOptions.rolloffFactor = componentData.rolloffFactor;\n      mediaOptions.refDistance = componentData.refDistance;\n      mediaOptions.maxDistance = componentData.maxDistance;\n      mediaOptions.coneInnerAngle = componentData.coneInnerAngle;\n      mediaOptions.coneOuterAngle = componentData.coneOuterAngle;\n      mediaOptions.coneOuterGain = componentData.coneOuterGain;\n    }\n\n    el.setAttribute(\"video-pause-state\", { paused: mediaOptions.videoPaused });\n  }\n\n  const src = componentName === \"link\" ? componentData.href : componentData.src;\n\n  el.setAttribute(\"media-loader\", {\n    src,\n    resize: true,\n    resolve: true,\n    fileIsOwned: true,\n    animate: false,\n    mediaOptions\n  });\n}\n\nAFRAME.GLTFModelPlus.registerComponent(\"image\", \"image\", mediaInflator);\nAFRAME.GLTFModelPlus.registerComponent(\"video\", \"video\", mediaInflator, (name, property, value) => {\n  if (property === \"paused\") {\n    return { name: \"video-pause-state\", property, value };\n  } else {\n    return null;\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"link\", \"link\", mediaInflator);\n\nAFRAME.GLTFModelPlus.registerComponent(\"hoverable\", \"is-remote-hover-target\", el => {\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"spawner\", \"spawner\", (el, componentName, componentData) => {\n  el.setAttribute(\"media-loader\", {\n    src: componentData.src,\n    resolve: true,\n    fileIsOwned: true,\n    animate: false\n  });\n  el.setAttribute(\"css-class\", \"interactable\");\n  el.setAttribute(\"super-spawner\", {\n    src: componentData.src,\n    resolve: true,\n    template: \"#interactable-media\"\n  });\n  el.setAttribute(\"hoverable-visuals\", {\n    cursorController: \"#cursor-controller\"\n  });\n  el.setAttribute(\"ammo-body\", {\n    mass: 0,\n    type: TYPE.STATIC,\n    collisionFilterGroup: COLLISION_LAYERS.INTERACTABLES,\n    collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER\n  });\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n});\n\nconst publicComponents = {\n  video: {\n    mappedComponent: \"video-pause-state\",\n    publicProperties: {\n      paused: {\n        mappedProperty: \"paused\",\n        getMappedValue(value) {\n          return !!value;\n        }\n      }\n    }\n  },\n  \"loop-animation\": {\n    mappedComponent: \"loop-animation\",\n    publicProperties: {\n      paused: {\n        mappedProperty: \"paused\",\n        getMappedValue(value) {\n          return !!value;\n        }\n      }\n    }\n  }\n};\n\nAFRAME.GLTFModelPlus.registerComponent(\n  \"trigger-volume\",\n  \"trigger-volume\",\n  (el, componentName, componentData, components, indexToEntityMap) => {\n    const {\n      size,\n      target,\n      enterComponent,\n      enterProperty,\n      enterValue,\n      leaveComponent,\n      leaveProperty,\n      leaveValue\n    } = componentData;\n\n    let enterComponentMapping, leaveComponentMapping, targetEntity;\n\n    try {\n      enterComponentMapping = getSanitizedComponentMapping(enterComponent, enterProperty, publicComponents);\n      leaveComponentMapping = getSanitizedComponentMapping(leaveComponent, leaveProperty, publicComponents);\n\n      targetEntity = indexToEntityMap[target];\n\n      if (!targetEntity) {\n        throw new Error(`Couldn't find target entity with index: ${target}.`);\n      }\n    } catch (e) {\n      console.warn(`Error inflating gltf component \"trigger-volume\": ${e.message}`);\n      return;\n    }\n\n    // Filter out scope and colliders properties.\n    el.setAttribute(\"trigger-volume\", {\n      colliders: \"#player-camera\",\n      size,\n      target: targetEntity,\n      enterComponent: enterComponentMapping.mappedComponent,\n      enterProperty: enterComponentMapping.mappedProperty,\n      enterValue: enterComponentMapping.getMappedValue(enterValue),\n      leaveComponent: leaveComponentMapping.mappedComponent,\n      leaveProperty: leaveComponentMapping.mappedProperty,\n      leaveValue: leaveComponentMapping.getMappedValue(leaveValue)\n    });\n  }\n);\n\nAFRAME.GLTFModelPlus.registerComponent(\"heightfield\", \"heightfield\", (el, componentName, componentData) => {\n  el.setAttribute(\"ammo-shape__heightfield\", {\n    type: SHAPE.HEIGHTFIELD,\n    margin: 0.01,\n    fit: FIT.MANUAL,\n    heightfieldDistance: componentData.distance,\n    offset: componentData.offset,\n    heightfieldData: componentData.data\n  });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"trimesh\", \"trimesh\", el => {\n  el.setAttribute(\"ammo-shape__trimesh\", {\n    type: SHAPE.MESH,\n    margin: 0.01,\n    fit: FIT.ALL,\n    includeInvisible: true\n  });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"particle-emitter\", \"particle-emitter\");\n","module.exports = __webpack_public_path__ + \"assets/images/logo-8f1dfd234d060073524bc29912a24f75.svg\";","module.exports = __webpack_public_path__ + \"assets/images/giphy_logo-1dcbee43e18919c0bd0c999be8602628.png\";","// Utilities for manipulating state history. This provides a number of functions which\n// need to be used to manipulate history state so we can deal with edge cases around\n// entry back button and refreshes once entered.\n//\n// These functions also transparently deal with the room slug, so incoming calls can ignore\n// dealing with it, and provides APIs for getting the non-slug part of the path.\n//\n// The slug cannot be part of the basename for history, because the slug changes intra-session\n// if the room is renamed.\n\n// This pushes/replaces a new k, v pair into the history, while maintaining all the other\n// keys, or clears state if k if null.\n//\n// Also maintains a length key that can be used to find the length of the history chain\n// (across refreshes) for the current room.\nfunction pushOrUpdateHistory(history, replace, k, v, detail, newPathname, newSearch) {\n  let state = {};\n  const newLength = ((history.location.state && history.location.state.__historyLength) || 0) + (replace ? 0 : 1);\n\n  if (k || newPathname || newSearch) {\n    state = history.location.state ? { ...history.location.state } : {};\n    delete state.__duplicate;\n\n    if (k) {\n      state[k] = v;\n      state.key = k;\n      state.value = v;\n      state.detail = detail;\n    }\n  }\n\n  const pathname =\n    newPathname !== undefined ? newPathname : history.location.pathname === \"/\" ? \"\" : history.location.pathname;\n\n  const search = newSearch !== undefined ? newSearch : history.location.search;\n\n  // If popToBeginningOfHubHistory was previously used, there is a duplicate entry\n  // at the top of the history stack (which was needed to wipe out forward history)\n  // so we use this opportunity to replace it.\n  const isDuplicate = history.location.state && history.location.state.__duplicate;\n  const method = replace || isDuplicate ? history.replace : history.push;\n  state.__historyLength = newLength;\n\n  method({ pathname, search, state });\n}\n\nexport function pushHistoryState(history, k, v, detail) {\n  pushOrUpdateHistory(history, false, k, v, detail);\n}\n\nexport function replaceHistoryState(history, k, v, detail) {\n  pushOrUpdateHistory(history, true, k, v, detail);\n}\n\nexport function pushHistoryPath(history, path, search) {\n  pushOrUpdateHistory(history, false, null, null, null, path, search);\n}\n\nexport function clearHistoryState(history) {\n  pushOrUpdateHistory(history, false);\n}\n\n// This will pop the browser history to the first entry that was for this hubs room,\n// and then push a duplicate entry onto the history stack in order to wipe out forward\n// history.\nexport function popToBeginningOfHubHistory(history, navigateToPriorPage) {\n  if (!history.location.state || history.location.state.__historyLength === undefined) return;\n\n  const len = history.location.state.__historyLength;\n  if (len === 0) return;\n\n  return new Promise(resolve => {\n    // After the go() completes, we push a duplicate history entry onto the stack\n    // in order to wipe out forward history. We also optionally go back -2 if we wanted\n    // to go back to the prior page.\n    const unsubscribe = history.listen(() => {\n      unsubscribe();\n      history.push({\n        pathname: history.location.pathname,\n        search: history.location.search,\n        state: { __historyLength: 0, __duplicate: true }\n      });\n      if (navigateToPriorPage) history.go(-2); // Go back to history entry before beginning.\n      resolve();\n    });\n\n    history.go(-len);\n  });\n}\n\n// This will pop the browser history to the entry before the first entry for this hubs room.\nexport function navigateToPriorPage(history) {\n  popToBeginningOfHubHistory(history, true);\n}\n\n// Returns the part of the pathname that does not include the slug\nexport function sluglessPath(location) {\n  const parts = location.pathname.split(\"/\");\n  return `/${parts.slice(2).join(\"/\")}`;\n}\n\n// Returns a new path that includes the current slug as a prefix to the\n// provided path.\nexport function withSlug(location, path) {\n  const parts = location.pathname.split(\"/\");\n  return `/${parts[1]}${path}`;\n}\n","module.exports = \"data:image/gif;base64,R0lGODlhEAAQAIQaAAAAAAEBAQABBQEBAgEBBQMDAwAykwBk+wFk+/85Af47AwCIHgCJHgGJHgCKHgOJIPc63vc64Pc64YeHhwDySLu7wru8wru8w7y8wwD6/v///////////////////////yH+EUNyZWF0ZWQgd2l0aCBHSU1QACH5BAEKAB8ALAAAAAAQABAAAAVl4AeMZDl9KAqkLDqd6YrN9HzC4jdbTUPDMBnGQWEAKphBYKTSYR6LRQE5y+VmlUAAc+lWrMIa4nBYxXQJcabMkkUUtLGhJZNA4BiC4HyVSCJpKRhgOktmgoRVLDSELY5mTHQlKyEAOw==\"","module.exports = __webpack_public_path__ + \"assets/camera_tool-a25d0894a6b635779bd4ed41f2de0411.glb\";","module.exports = __webpack_public_path__ + \"assets/images/mic_granted-5d41c8098b2c1a084f07dd3a2473983f.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_granted@2x-f84d9eb002832eeeb768529e6cb1e93e.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_small-b81b3397cc985eb8d3d67a4f007158cc.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_small@2x-d04ff548fa26495f69249f0c34f44b72.png\";","module.exports = __webpack_public_path__ + \"assets/images/dropdown_arrow-601450f494125f8caccec2271aebd4cb.png\";","module.exports = __webpack_public_path__ + \"assets/images/dropdown_arrow@2x-1023ab0bd743b3525d99986de89f0c3b.png\";","module.exports = __webpack_public_path__ + \"assets/images/add-owner-c3f352da151b4a5be71defd565720235.png\";","module.exports = __webpack_public_path__ + \"assets/images/remove-owner-02b96ad3a84badda798fde00ac4c2243.png\";","module.exports = __webpack_public_path__ + \"assets/images/mobile_screen_entry-b29fcd32c8f70bb828c1abceb62f93e2.svg\";","module.exports = __webpack_public_path__ + \"assets/images/desktop_screen_entry-e5ff9b5e64caa694e9b4183e532fcb17.svg\";","module.exports = __webpack_public_path__ + \"assets/images/generic_vr_entry-c648c26ce1388450df7edbd92ec00f5e.svg\";","module.exports = __webpack_public_path__ + \"assets/images/gearvr_entry-dcea59d35d7fae4c8b9c4985c1743851.svg\";","module.exports = __webpack_public_path__ + \"assets/images/daydream_entry-6e2716960046992dbd6b0e87bf8c2c3a.svg\";","module.exports = __webpack_public_path__ + \"assets/sfx/tick-b0fcbf1d9b6f92a24bec12f9bae1e42a.mp3\";","module.exports = __webpack_public_path__ + \"assets/images/link_dialog_header-b15568ca2056d8be7a58c359e6a9ca51.svg\";","module.exports = __webpack_public_path__ + \"assets/images/presence_phone-fd7ea0e8be441172a758704055604e5f.png\";","module.exports = __webpack_public_path__ + \"assets/images/presence_desktop-be24a9f21df60cd831ad66b67282d6f2.png\";","module.exports = __webpack_public_path__ + \"assets/images/presence_discord-e05ead6e6ebc08df9291738d0aa6986d.png\";","module.exports = __webpack_public_path__ + \"assets/images/presence_camera-aaa719190a30677416c33e3dda33d7ef.png\";","module.exports = __webpack_public_path__ + \"assets/images/presence_vr-563f3bd1c0f37473a3303f4a6049288c.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_background-9744d0690bba7838e4a75949d9645c09.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_background@2x-bf55b6a808963d89ff7ce04c516c232c.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_fill-35626a008836cbdc34ec624e16f5b723.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_fill@2x-b3e3675f8281c84660fb5b47eb66126e.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_level-d197b930a4350dc80adb2446babb05e1.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_level@2x-9d49309c2f0e55e5c54193237658768b.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_action_background-5aeb2dca8113545a2bc3e56dc702001b.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_action_background@2x-3a7ab65c95a1b4037d701c8fa16c3cd6.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_action_fill-4e639ed717b8a9a7da4426665ec2dcf4.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_action_fill@2x-eb547f6337c0ea74b35da9812ee3e04b.png\";","module.exports = __webpack_public_path__ + \"assets/images/speaker_level-9567a1a6f33d4d0e59e57903b08369c9.png\";","module.exports = __webpack_public_path__ + \"assets/images/speaker_level@2x-b5e6a12f613576cf5c1a1b96e8c9d8d0.png\";","module.exports = __webpack_public_path__ + \"assets/sfx/tone-624e72d19fe0cea1b85ca174cb6be256.webm\";","module.exports = __webpack_public_path__ + \"assets/sfx/tone-3fa0defb5172b2533fedcc1929605799.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/tone-78ae5a60f0e336f384919eee9f5a2e18.ogg\";","module.exports = __webpack_public_path__ + \"assets/sfx/tone-4604a4c98f36f3e0c6980295bc5c7ffe.wav\";","module.exports = __webpack_public_path__ + \"assets/images/change_avatar-a426739806600c28e20a614cbade29f2.svg\";","module.exports = \"#version 300 es\\nprecision highp float;\\nprecision highp int;\\n\\n// Keep these separate so three only sets them once\\nuniform mat4 viewMatrix;\\nuniform mat4 projectionMatrix;\\n\\nlayout(std140) uniform InstanceData {\\n  mat4 transforms[MAX_INSTANCES];\\n  vec4 colors[MAX_INSTANCES];\\n  vec4 uvTransforms[MAX_INSTANCES];\\n  vec4 mapSettings[MAX_INSTANCES];\\n\\n  vec4 hubs_SweepParams[MAX_INSTANCES];\\n\\n  vec3 hubs_InteractorOnePos;\\n  bool hubs_IsFrozen;\\n\\n  vec3 hubs_InteractorTwoPos;\\n  float hubs_Time;\\n\\n} instanceData;\\n\\nout vec3 hubs_WorldPosition;\\n\\nin vec3 position;\\nin vec2 uv;\\n\\n#ifdef PSEUDO_INSTANCING\\nin float instance;\\nflat out uint vInstance;\\n#endif\\n\\n#ifdef VERTEX_COLORS\\nin vec3 color;\\n#endif\\n\\nout vec2 vUv;\\nout vec4 vColor;\\n\\nflat out vec4 vUVTransform;\\nflat out vec4 vMapSettings;\\n\\nvoid main() {\\n  #ifdef PSEUDO_INSTANCING\\n  uint instanceIndex = uint(instance);\\n  #elif\\n  uint instanceIndex = gl_InstanceID;\\n  #endif\\n\\n  vColor = instanceData.colors[instanceIndex];\\n\\n  #ifdef VERTEX_COLORS\\n  vColor *= vec4(color, 1.0);\\n  #endif\\n\\n  vUv = uv;\\n  vUVTransform = instanceData.uvTransforms[instanceIndex];\\n  vMapSettings = instanceData.mapSettings[instanceIndex];\\n\\n  gl_Position = projectionMatrix * viewMatrix * instanceData.transforms[instanceIndex] * vec4(position, 1.0);\\n\\n  hubs_WorldPosition = (instanceData.transforms[instanceIndex] * vec4(position, 1.0)).xyz;\\n  vInstance = instanceIndex;\\n}\\n\"","module.exports = \"#version 300 es\\nprecision highp float;\\nprecision highp int;\\nprecision highp sampler2DArray;\\n\\n\\nlayout(std140) uniform InstanceData {\\n  mat4 transforms[MAX_INSTANCES];\\n  vec4 colors[MAX_INSTANCES];\\n  vec4 uvTransforms[MAX_INSTANCES];\\n  vec4 mapSettings[MAX_INSTANCES];\\n\\n  vec4 hubs_SweepParams[MAX_INSTANCES];\\n\\n  vec3 hubs_InteractorOnePos;\\n  bool hubs_IsFrozen;\\n\\n  vec3 hubs_InteractorTwoPos;\\n  float hubs_Time;\\n\\n} instanceData;\\nin vec3 hubs_WorldPosition;\\n#ifdef PSEUDO_INSTANCING\\nflat in uint vInstance;\\n#endif\\n\\n\\nuniform sampler2DArray map;\\n\\nin vec2 vUv;\\nin vec4 vColor;\\nflat in vec4 vUVTransform;\\nflat in vec4 vMapSettings;\\n\\nout vec4 outColor;\\n\\nfloat applyWrapping(float value, int mode) {\\n  if (mode == 0) {\\n    // CLAMP_TO_EDGE - default\\n    return clamp(value, 0.0, 1.0);\\n  } else if (mode == 1) {\\n    // REPEAT\\n    return fract(value);\\n  } else {\\n    // MIRRORED_REPEAT\\n    float n = mod(value, 2.0);\\n    return mix(n, 2.0 - n, step(1.0, n));\\n  }\\n}\\n\\nvoid main() {\\n  vec2 uv = vUv;\\n\\n  int wrapS = int(vMapSettings.y);\\n  int wrapT = int(vMapSettings.z);\\n  uv.s = applyWrapping(uv.s, wrapS);\\n  uv.t = applyWrapping(uv.t, wrapT);\\n\\n  vec2 uvMin = vUVTransform.xy;\\n  vec2 uvScale = vUVTransform.zw;\\n  uv = uvMin + uv * uvScale;\\n\\n  int mapIdx = int(vMapSettings.x);\\n  outColor = texture(map, vec3(uv, mapIdx)) * vColor;\\n  if(outColor.a == 0.0) {\\n      discard;\\n  }\\n\\n  bool hubs_HighlightInteractorOne = instanceData.hubs_SweepParams[vInstance].z > 0.0;\\n  bool hubs_HighlightInteractorTwo = instanceData.hubs_SweepParams[vInstance].w > 0.0;\\n  bool hubs_IsFrozen = instanceData.hubs_IsFrozen;\\n\\n  if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\\n\\n      bool hubs_EnableSweepingEffect = true;\\n      vec2 hubs_SweepParams = instanceData.hubs_SweepParams[vInstance].xy;\\n      float hubs_Time = instanceData.hubs_Time;\\n\\n      float ratio = 0.0;\\n\\n      if (hubs_EnableSweepingEffect) {\\n          float size = hubs_SweepParams.t - hubs_SweepParams.s;\\n          float line = mod(hubs_Time / 500.0 * size, size * 3.0) + hubs_SweepParams.s - size / 3.0;\\n\\n          if (hubs_WorldPosition.y < line) {\\n              // Highlight with a sweeping gradient.\\n              ratio = max(0.0, 1.0 - (line - hubs_WorldPosition.y) / (size * 1.5));\\n          }\\n      }\\n\\n      // Highlight with a gradient falling off with distance.\\n      float pulse = 9.0 + 3.0 * (sin(hubs_Time / 1000.0) + 1.0);\\n\\n      if (hubs_HighlightInteractorOne) {\\n          float dist1 = distance(hubs_WorldPosition, instanceData.hubs_InteractorOnePos);\\n          ratio += -min(1.0, pow(dist1 * pulse, 3.0)) + 1.0;\\n      }\\n\\n      if (hubs_HighlightInteractorTwo) {\\n          float dist2 = distance(hubs_WorldPosition, instanceData.hubs_InteractorTwoPos);\\n          ratio += -min(1.0, pow(dist2 * pulse, 3.0)) + 1.0;\\n      }\\n\\n      ratio = min(1.0, ratio);\\n\\n      // Gamma corrected highlight color\\n      vec3 highlightColor = vec3(0.184, 0.499, 0.933);\\n\\n      outColor = vec4((outColor.rgb * (1.0 - ratio)) + (highlightColor * ratio), outColor.a);\\n  }\\n\\n}\\n\"","import { fetchReticulumAuthenticated } from \"./phoenix-utils\";\nimport { proxiedUrlFor } from \"./media-url-utils\";\nimport { avatars } from \"../assets/avatars/avatars\";\n\nexport const AVATAR_TYPES = {\n  LEGACY: \"legacy\",\n  SKINNABLE: \"skinnable\",\n  URL: \"url\"\n};\n\nconst legacyAvatarIds = avatars.map(a => a.id);\nexport function getAvatarType(avatarId) {\n  if (!avatarId || legacyAvatarIds.indexOf(avatarId) !== -1) return AVATAR_TYPES.LEGACY;\n  if (avatarId.startsWith(\"http\")) return AVATAR_TYPES.URL;\n  return AVATAR_TYPES.SKINNABLE;\n}\n\nasync function fetchSkinnableAvatar(avatarId) {\n  const resp = await fetchReticulumAuthenticated(`/api/v1/avatars/${avatarId}`);\n  return resp && resp.avatars && resp.avatars[0];\n}\n\nexport async function fetchAvatar(avatarId) {\n  switch (getAvatarType(avatarId)) {\n    case AVATAR_TYPES.LEGACY:\n      return {\n        avatar_id: avatarId,\n        gltf_url: avatars.find(avatar => avatar.id === avatarId).model\n      };\n    case AVATAR_TYPES.SKINNABLE:\n      return fetchSkinnableAvatar(avatarId);\n    case AVATAR_TYPES.URL:\n      return {\n        avatar_id: avatarId,\n        gltf_url: proxiedUrlFor(avatarId)\n      };\n  }\n}\n\nasync function fetchAvatarGltfUrl(avatarId) {\n  return fetchAvatar(avatarId).then(avatar => avatar && avatar.gltf_url);\n}\n\nexport function getAvatarSrc(avatarId) {\n  switch (getAvatarType(avatarId)) {\n    case AVATAR_TYPES.LEGACY:\n      return `#${avatarId}`;\n    case AVATAR_TYPES.SKINNABLE:\n      return fetchAvatarGltfUrl(avatarId);\n    case AVATAR_TYPES.URL:\n      return proxiedUrlFor(avatarId);\n    default:\n      return avatarId;\n  }\n}\n\nexport async function getAvatarThumbnailUrl(avatarId) {\n  switch (getAvatarType(avatarId)) {\n    case AVATAR_TYPES.LEGACY:\n      return avatars.find(avatar => avatar.id === avatarId).thumbnail;\n    case AVATAR_TYPES.SKINNABLE:\n      return fetchAvatar(avatarId).then(avatar => avatar.files.thumbnail);\n    default:\n      return \"https://asset-bundles-prod.reticulum.io/bots/avatar_unavailable.png\";\n  }\n}\n","module.exports = __webpack_public_path__ + \"assets/images/spritesheets/sprite-system-spritesheet-130dcf3207a49678c64825cb92d8cb8f.png\";","module.exports = \"attribute vec4 mvCol0;\\nattribute vec4 mvCol1;\\nattribute vec4 mvCol2;\\nattribute vec4 mvCol3;\\nattribute vec3 a_vertices;\\nattribute vec2 a_uvs;\\nvarying vec2 v_uvs;\\nattribute float a_hubs_EnableSweepingEffect;\\nvarying float v_hubs_EnableSweepingEffect;\\nattribute vec2 a_hubs_SweepParams;\\nvarying vec2 v_hubs_SweepParams;\\nvarying vec3 hubs_WorldPosition;\\n\\nvoid main() {\\n  mat4 mv = mat4(mvCol0, mvCol1, mvCol2, mvCol3);\\n  gl_Position = projectionMatrix * modelViewMatrix * mv * vec4(a_vertices, 1.0);\\n  v_uvs = a_uvs;\\n  v_hubs_EnableSweepingEffect = a_hubs_EnableSweepingEffect;\\n  v_hubs_SweepParams = a_hubs_SweepParams;\\n\\n  vec4 wt = vec4(a_vertices, 1.0);\\n  hubs_WorldPosition = (mv * wt).xyz;\\n}\\n\"","module.exports = \"precision mediump float;\\n\\nuniform sampler2D u_spritesheet;\\n\\nvarying vec2 v_uvs;\\n\\nvarying float v_hubs_EnableSweepingEffect;\\nvarying vec2 v_hubs_SweepParams;\\nvarying vec3 hubs_WorldPosition;\\nuniform bool hubs_HighlightInteractorOne;\\nuniform vec3 hubs_InteractorOnePos;\\nuniform bool hubs_HighlightInteractorTwo;\\nuniform vec3 hubs_InteractorTwoPos;\\nuniform float hubs_Time;\\n\\n#define GAMMA_FACTOR 2.2\\n\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n  return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\\n}\\n\\nvec4 linearToOutputTexel( vec4 value ) {\\n  return LinearToGamma( value, float( GAMMA_FACTOR ) );\\n}\\n\\nvoid main() {\\n    vec4 texColor = texture2D(u_spritesheet, v_uvs);\\n\\n    float ratio = 0.0;\\n    if (v_hubs_EnableSweepingEffect > 0.9 ) {\\n        float size = v_hubs_SweepParams.t - v_hubs_SweepParams.s * 1.0;\\n        float line = mod(hubs_Time / 500.0 * size, size * 3.0) + v_hubs_SweepParams.s - size / 3.0;\\n        if (hubs_WorldPosition.y < line) {\\n            ratio = max(0.0, 1.0 - (line - hubs_WorldPosition.y) / (size * 1.5));\\n        }\\n\\n    }\\n    ratio = min(1.0, ratio);\\n\\n    vec4 highlightColor = linearToOutputTexel(vec4(0.184, 0.499, 0.933, 1.0));\\n    gl_FragColor = vec4((texColor.rgb * (1.0 - ratio)) + (highlightColor.rgb * ratio), texColor.a);\\n}\\n\"","import screenfull from \"screenfull\";\n\nlet hasEnteredFullScreenThisSession = false;\n\nfunction shouldShowFullScreen() {\n  // Disable full screen on iOS, since Safari's fullscreen mode does not let you prevent native pinch-to-zoom gestures.\n  return (\n    (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR()) &&\n    !AFRAME.utils.device.isIOS() &&\n    screenfull.enabled\n  );\n}\n\nexport function willRequireUserGesture() {\n  return !screenfull.isFullscreen && shouldShowFullScreen();\n}\n\nexport function showFullScreenIfAvailable() {\n  if (shouldShowFullScreen()) {\n    screenfull.request();\n    hasEnteredFullScreenThisSession = true;\n  }\n}\n\nexport function showFullScreenIfWasFullScreen() {\n  if (hasEnteredFullScreenThisSession && !screenfull.isFullscreen) {\n    screenfull.request();\n  }\n}\n","const VERTEX_SHADER = `\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n  #include <uv_vertex>\n  #include <uv2_vertex>\n  #include <color_vertex>\n  #include <skinbase_vertex>\n\n  #include <begin_vertex>\n  #include <morphtarget_vertex>\n  #include <skinning_vertex>\n  #include <project_vertex>\n  #include <logdepthbuf_vertex>\n\n  #include <worldpos_vertex>\n  #include <clipping_planes_vertex>\n  #include <fog_vertex>\n}\n`;\n\nconst FRAGMENT_SHADER = `\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <aomap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n  #include <clipping_planes_fragment>\n\n  vec4 diffuseColor = vec4(diffuse, opacity);\n  ReflectedLight reflectedLight = ReflectedLight(vec3(0.0), vec3(0.0), vec3(0.0), vec3(0.0));\n  vec3 totalEmissiveRadiance = emissive;\n\n  #include <logdepthbuf_fragment>\n  #include <map_fragment>\n  #include <color_fragment>\n  #include <alphatest_fragment>\n  #include <emissivemap_fragment>\n\n  reflectedLight.indirectDiffuse += vec3(1.0);\n\n  #include <aomap_fragment>\n\n  reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n  vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n  gl_FragColor = vec4(outgoingLight, diffuseColor.a);\n\n  #include <premultiplied_alpha_fragment>\n  #include <tonemapping_fragment>\n  #include <encodings_fragment>\n  #include <fog_fragment>\n}\n`;\n\nexport default class MobileStandardMaterial extends THREE.ShaderMaterial {\n  type = \"MobileStandardMaterial\";\n  isMobileStandardMaterial = true;\n  static fromStandardMaterial(material) {\n    const parameters = {\n      vertexShader: VERTEX_SHADER,\n      fragmentShader: FRAGMENT_SHADER,\n      uniforms: {\n        uvTransform: { value: new THREE.Matrix3() },\n        diffuse: { value: material.color },\n        opacity: { value: material.opacity },\n        map: { value: material.map },\n        aoMapIntensity: { value: material.aoMapIntensity },\n        aoMap: { value: material.aoMap },\n        emissive: { value: material.emissive },\n        emissiveMap: { value: material.emissiveMap }\n      },\n      fog: true,\n      lights: false,\n      opacity: material.opacity,\n      transparent: material.transparent,\n      alphaTest: material.alphaTest,\n      skinning: material.skinning,\n      morphTargets: material.morphTargets,\n      vertexColors: material.vertexColors\n    };\n\n    const mobileMaterial = new MobileStandardMaterial(parameters);\n\n    mobileMaterial.color = material.color;\n    mobileMaterial.map = material.map;\n    mobileMaterial.aoMap = material.aoMap;\n    mobileMaterial.aoMapIntensity = material.aoMapIntensity;\n    mobileMaterial.emissive = material.emissive;\n    mobileMaterial.emissiveMap = material.emissiveMap;\n\n    return mobileMaterial;\n  }\n  clone() {\n    return MobileStandardMaterial.fromStandardMaterial(this);\n  }\n}\n","import { EventTarget } from \"event-target-shim\";\nimport { getReticulumFetchUrl, fetchReticulumAuthenticated } from \"../utils/phoenix-utils\";\nimport { pushHistoryPath, sluglessPath, withSlug } from \"../utils/history\";\n\nexport const SOURCES = [\"poly\", \"sketchfab\", \"videos\", \"scenes\", \"gifs\", \"images\", \"twitch\"];\n\nconst EMPTY_RESULT = { entries: [], meta: {} };\n\nconst URL_SOURCE_TO_TO_API_SOURCE = {\n  scenes: \"scene_listings\",\n  images: \"bing_images\",\n  videos: \"bing_videos\",\n  youtube: \"youtube_videos\",\n  gifs: \"tenor\",\n  sketchfab: \"sketchfab\",\n  poly: \"poly\",\n  twitch: \"twitch\",\n  favorites: \"favorites\"\n};\n\nexport const MEDIA_SOURCE_DEFAULT_FILTERS = {\n  gifs: \"trending\",\n  sketchfab: \"featured\",\n  scenes: \"featured\",\n  favorites: \"my-favorites\"\n};\n\nconst SEARCH_CONTEXT_PARAMS = [\"q\", \"filter\", \"cursor\"];\n\n// This class is responsible for fetching and storing media search results and provides a\n// convenience API for performing history updates relevant to search navigation.\nexport default class MediaSearchStore extends EventTarget {\n  constructor() {\n    super();\n\n    this.requestIndex = 0;\n  }\n\n  setHistory(history) {\n    this.history = history;\n\n    this._update(this.history.location);\n\n    this.history.listen(location => {\n      this._update(location);\n    });\n  }\n\n  _update = async location => {\n    this.result = null;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    const urlSource = this.getUrlMediaSource(location);\n    if (!urlSource) return;\n\n    if (!this.previousSource || this.previousSource !== urlSource) {\n      this.dispatchEvent(new CustomEvent(\"sourcechanged\"));\n      this.previousSource = urlSource;\n    }\n\n    const urlParams = new URLSearchParams(location.search);\n\n    this.requestIndex++;\n    const currentRequestIndex = this.requestIndex;\n    const searchParams = new URLSearchParams();\n    const locationSearchParams = new URLSearchParams(location.search);\n    const isMy = locationSearchParams.get(\"filter\") && locationSearchParams.get(\"filter\").startsWith(\"my-\");\n\n    for (const param of SEARCH_CONTEXT_PARAMS) {\n      if (!urlParams.get(param)) continue;\n      searchParams.set(param, urlParams.get(param));\n    }\n\n    searchParams.get(\"locale\", navigator.languages[0]);\n\n    let source;\n    if (urlSource === \"avatars\" || urlSource === \"scenes\") {\n      // Avatars + scenes are special since we request them from a different source based on the facet.\n      const singular = urlSource === \"avatars\" ? \"avatar\" : \"scene\";\n      source = isMy ? `${singular}s` : `${singular}_listings`;\n    } else {\n      source = URL_SOURCE_TO_TO_API_SOURCE[urlSource];\n    }\n    searchParams.set(\"source\", source);\n\n    let fetch = true;\n\n    if (source === \"avatars\" || source === \"scenes\" || source === \"favorites\") {\n      if (isMy) {\n        if (window.APP.store.credentialsAccountId) {\n          searchParams.set(\"user\", window.APP.store.credentialsAccountId);\n        } else {\n          fetch = false; // Don't fetch my-* if not signed in\n        }\n      }\n    }\n\n    const path = `/api/v1/media/search?${searchParams.toString()}`;\n    const url = getReticulumFetchUrl(path);\n    if (this.lastSavedUrl === url) return;\n\n    this.isFetching = true;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n    const result = fetch ? await fetchReticulumAuthenticated(path) : EMPTY_RESULT;\n\n    if (this.requestIndex != currentRequestIndex) return;\n\n    this.result = result;\n    this.nextCursor = this.result && this.result.meta && this.result.meta.next_cursor;\n    this.lastFetchedUrl = url;\n    this.isFetching = false;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n  };\n\n  _legacyAvatarToSearchEntry = legacyAvatar => {\n    return {\n      id: legacyAvatar.id,\n      type: \"avatar_listing\",\n      url: legacyAvatar.url,\n      images: { preview: { url: legacyAvatar.thumbnail, width: 720, height: 1280 } },\n      gltfs: { avatar: legacyAvatar.model }\n    };\n  };\n\n  pageNavigate = delta => {\n    if (delta === -1) {\n      this.history.goBack();\n    } else {\n      const location = this.history.location;\n      const searchParams = new URLSearchParams(location.search);\n      searchParams.set(\"cursor\", this.nextCursor);\n      pushHistoryPath(this.history, location.pathname, searchParams.toString());\n    }\n  };\n\n  filterQueryNavigate = (filter, query) => {\n    const location = this.history.location;\n    const searchParams = new URLSearchParams(location.search);\n\n    if (query) {\n      searchParams.set(\"q\", query);\n    } else {\n      searchParams.delete(\"q\");\n    }\n\n    if (filter) {\n      searchParams.set(\"filter\", filter);\n    } else {\n      searchParams.delete(\"filter\");\n    }\n\n    if (filter) {\n      searchParams.set(\"cursor\", filter);\n    } else {\n      searchParams.delete(\"cursor\");\n    }\n\n    pushHistoryPath(this.history, location.pathname, searchParams.toString());\n  };\n\n  getSearchClearedSearchParams = (location, keepSource, keepNav) => {\n    const searchParams = new URLSearchParams(location.search);\n\n    // Strip browsing query params\n    searchParams.delete(\"q\");\n    searchParams.delete(\"filter\");\n    searchParams.delete(\"cursor\");\n\n    if (!keepNav) {\n      searchParams.delete(\"media_nav\");\n    }\n\n    if (!keepSource) {\n      searchParams.delete(\"media_source\");\n    }\n\n    return searchParams;\n  };\n\n  _stashLastSearchParams = location => {\n    const searchParams = new URLSearchParams(location.search);\n\n    this._stashedParams = {};\n    this._stashedSource = null;\n\n    const source = this.getUrlMediaSource(location);\n\n    // HACK for now do not stash favorite search, since that ends up being a source\n    // we do not reveal in the media browser UX. Revisit the rules here when we have a\n    // proper favorites browser. Then, we should have two separate stashes.\n    if (source === \"favorites\") return;\n    this._stashedSource = source;\n\n    for (const param of SEARCH_CONTEXT_PARAMS) {\n      const value = searchParams.get(param);\n\n      if (value) {\n        this._stashedParams[param] = value;\n      }\n    }\n  };\n\n  clearStashedQuery = () => {\n    if (!this._stashedParams) return;\n    delete this._stashedParams.q;\n  };\n\n  sourceNavigate = source => {\n    this._sourceNavigate(source, false, true);\n  };\n\n  sourceNavigateToDefaultSource = () => {\n    this._sourceNavigate(this._stashedSource ? this._stashedSource : SOURCES[0], false, true);\n  };\n\n  sourceNavigateWithNoNav = source => {\n    this._sourceNavigate(source, true, false);\n  };\n\n  _sourceNavigate = async (source, hideNav, useLastStashedParams) => {\n    const currentQuery = new URLSearchParams(this.history.location.search).get(\"q\");\n    const searchParams = this.getSearchClearedSearchParams(this.history.location);\n\n    if (currentQuery) {\n      searchParams.set(\"q\", currentQuery);\n    } else {\n      if (useLastStashedParams && this._stashedParams) {\n        for (const param of SEARCH_CONTEXT_PARAMS) {\n          const value = this._stashedParams[param];\n\n          // Only q param is compatible across sources, so keep it if is stashed.\n          const useValue = param === \"q\" || this._stashedSource === source;\n\n          if (value && useValue) {\n            searchParams.set(param, value);\n          }\n        }\n      } else {\n        if (source === \"avatars\") {\n          const hasAccountWithAvatars = await this._hasAccountWithAvatars();\n          searchParams.set(\"filter\", hasAccountWithAvatars ? \"my-avatars\" : \"featured\");\n        } else if (MEDIA_SOURCE_DEFAULT_FILTERS[source]) {\n          searchParams.set(\"filter\", MEDIA_SOURCE_DEFAULT_FILTERS[source]);\n        }\n      }\n    }\n\n    this._stashedParams = null;\n    this._stashedSource = null;\n\n    if (hideNav) {\n      searchParams.set(\"media_nav\", \"false\");\n    }\n\n    if (process.env.RETICULUM_SERVER && document.location.host !== process.env.RETICULUM_SERVER) {\n      searchParams.set(\"media_source\", source);\n      pushHistoryPath(this.history, this.history.location.pathname, searchParams.toString());\n    } else {\n      pushHistoryPath(this.history, withSlug(this.history.location, `/media/${source}`), searchParams.toString());\n    }\n  };\n\n  _hasAccountWithAvatars = async () => {\n    const { credentialsAccountId } = window.APP.store;\n    if (!credentialsAccountId) return false;\n\n    const searchParams = new URLSearchParams();\n    const source = \"avatars\";\n    searchParams.set(\"source\", source);\n    searchParams.set(\"user\", credentialsAccountId);\n    const result = await fetchReticulumAuthenticated(`/api/v1/media/search?${searchParams.toString()}`);\n    return !!(result && result.entries) && result.entries.length > 0;\n  };\n\n  getUrlMediaSource = location => {\n    const { search } = location;\n    const urlParams = new URLSearchParams(search);\n    const pathname = sluglessPath(location);\n\n    if (!pathname.startsWith(\"/media\") && !urlParams.get(\"media_source\")) return null;\n    return urlParams.get(\"media_source\") || pathname.substring(7);\n  };\n\n  pushExitMediaBrowserHistory = (history, stashLastSearchParams = true) => {\n    if (!history) history = this.history;\n\n    if (stashLastSearchParams) this._stashLastSearchParams(history.location);\n\n    const { pathname } = history.location;\n    const hasMediaPath = sluglessPath(history.location).startsWith(\"/media\");\n    pushHistoryPath(\n      history,\n      hasMediaPath ? withSlug(history.location, \"/\") : pathname,\n      this.getSearchClearedSearchParams(history.location).toString()\n    );\n    this.dispatchEvent(new CustomEvent(\"media-exit\"));\n  };\n}\n","import Airtable from 'airtable';\nAirtable.configure({\n    endpointUrl: 'https://api.airtable.com',\n    apiKey: 'keyOHSVeLr3ryLrL5'\n});\n\nconst base = Airtable.base('appIR0AlHDFG5WR8z');\n\nexport const airtableAssetsInitialState = { DarkLogo: null, Name: null, Icon: null }\nexport const airtableAssets = base('Assets');\n\nexport const airtableMessages = base('Messages').select({\n    view: 'Grid view'\n}).firstPage(async (err, records) => {\n    if (err) { console.error(err); return; }\n    const record = records[0];\n    // console.log(record.get('Motto'))\n    return record;\n\n    // records.forEach(function(record) {\n    //     console.log('Retrieved', record.get('Motto'));\n    // });\n});;\n// .find('recHqITRS7cBMwn9i', (err, record) => record.fields);\n// export const airtableAssets = () => base('Assets')\n\n// export default base;","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { pushHistoryState, replaceHistoryState } from \"../utils/history\";\n\nfunction isModifiedEvent(event) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\n\n/**\n * A history-aware link that pushes/replaces the state, but not the path, in the browser history.\n */\nclass StateLink extends React.Component {\n  static propTypes = {\n    history: PropTypes.object,\n    innerRef: PropTypes.object,\n    replace: PropTypes.bool,\n    stateKey: PropTypes.string,\n    stateValue: PropTypes.string,\n    stateDetail: PropTypes.object,\n    target: PropTypes.string,\n    onClick: PropTypes.func,\n    children: PropTypes.node,\n    className: PropTypes.string\n  };\n\n  async handleClick(event, history) {\n    if (this.props.onClick) this.props.onClick(event);\n\n    if (\n      !event.defaultPrevented && // onClick prevented default\n      event.button === 0 && // ignore everything but left clicks\n      (!this.props.target || this.props.target === \"_self\") && // let browser handle \"target=_blank\" etc.\n      !isModifiedEvent(event) // ignore clicks with modifier keys\n    ) {\n      event.preventDefault();\n      const method = this.props.replace ? replaceHistoryState : pushHistoryState;\n      method(history, this.props.stateKey, this.props.stateValue, this.props.stateDetail);\n    }\n  }\n\n  render() {\n    const { innerRef, target, className, children } = this.props;\n    return (\n      <a\n        target={target}\n        className={className}\n        onClick={event => this.handleClick(event, this.props.history)}\n        href=\"#\"\n        ref={innerRef}\n      >\n        {children}\n      </a>\n    );\n  }\n}\n\nexport default StateLink;\n","const nonCorsProxyDomains = (process.env.NON_CORS_PROXY_DOMAINS || \"\").split(\",\");\nif (process.env.CORS_PROXY_SERVER) {\n  nonCorsProxyDomains.push(process.env.CORS_PROXY_SERVER);\n}\n\nconst commonKnownContentTypes = {\n  gltf: \"model/gltf\",\n  glb: \"model/gltf-binary\",\n  png: \"image/png\",\n  jpg: \"image/jpeg\",\n  jpeg: \"image/jpeg\",\n  pdf: \"application/pdf\",\n  mp4: \"video/mp4\",\n  mp3: \"audio/mpeg\"\n};\n\n// thanks to https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding\nfunction b64EncodeUnicode(str) {\n  // first we use encodeURIComponent to get percent-encoded UTF-8, then we convert the percent-encodings\n  // into raw bytes which can be fed into btoa.\n  const CHAR_RE = /%([0-9A-F]{2})/g;\n  return btoa(encodeURIComponent(str).replace(CHAR_RE, (_, p1) => String.fromCharCode(\"0x\" + p1)));\n}\n\nconst farsparkEncodeUrl = url => {\n  // farspark doesn't know how to read '=' base64 padding characters\n  // translate base64 + to - and / to _ for URL safety\n  return b64EncodeUnicode(url)\n    .replace(/=+$/g, \"\")\n    .replace(/\\+/g, \"-\")\n    .replace(/\\//g, \"_\");\n};\n\nexport const scaledThumbnailUrlFor = (url, width, height) => {\n  const farsparkUrl = `https://${process.env.FARSPARK_SERVER}/thumbnail/${farsparkEncodeUrl(\n    url\n  )}?w=${width}&h=${height}`;\n\n  try {\n    const urlHostname = new URL(url).hostname;\n\n    if (process.env.RETICULUM_SERVER) {\n      const retHostname = new URL(`https://${process.env.RETICULUM_SERVER}`).hostname;\n      if (retHostname === urlHostname) return url;\n    }\n  } catch (e) {\n    return farsparkUrl;\n  }\n\n  return farsparkUrl;\n};\n\nexport const proxiedUrlFor = (url, index = null) => {\n  if (!(url.startsWith(\"http:\") || url.startsWith(\"https:\"))) return url;\n\n  const hasIndex = index !== null;\n\n  if (!hasIndex) {\n    // Skip known domains that do not require CORS proxying.\n    try {\n      const parsedUrl = new URL(url);\n      if (nonCorsProxyDomains.find(domain => parsedUrl.hostname.endsWith(domain))) return url;\n    } catch (e) {\n      // Ignore\n    }\n  }\n\n  if (hasIndex || !process.env.CORS_PROXY_SERVER) {\n    const method = hasIndex ? \"extract\" : \"raw\";\n    return `https://${process.env.FARSPARK_SERVER}/0/${method}/0/0/0/${index || 0}/${farsparkEncodeUrl(url)}`;\n  } else {\n    return `https://${process.env.CORS_PROXY_SERVER}/${url}`;\n  }\n};\n\nexport const getCustomGLTFParserURLResolver = gltfUrl => url => {\n  if (typeof url !== \"string\" || url === \"\") return \"\";\n  if (/^(https?:)?\\/\\//i.test(url)) return url;\n  if (/^data:.*,.*$/i.test(url)) return url;\n  if (/^blob:.*$/i.test(url)) return url;\n\n  if (process.env.CORS_PROXY_SERVER) {\n    // For absolute paths with a CORS proxied gltf URL, re-write the url properly to be proxied\n    const corsProxyPrefix = `https://${process.env.CORS_PROXY_SERVER}/`;\n\n    if (gltfUrl.startsWith(corsProxyPrefix)) {\n      const originalUrl = decodeURIComponent(gltfUrl.substring(corsProxyPrefix.length));\n      const originalUrlParts = originalUrl.split(\"/\");\n\n      // Drop the .gltf filename\n      const path = new URL(url).pathname;\n      const assetUrl = originalUrlParts.slice(0, originalUrlParts.length - 1).join(\"/\") + \"/\" + path;\n      return corsProxyPrefix + assetUrl;\n    }\n  }\n\n  return url;\n};\n\nconst dataUrlRegex = /data:([a-zA-Z0-9]+\\/[a-zA-Z0-9-.+]+).*,.*/;\n\nexport const guessContentType = url => {\n  if (url.startsWith(\"hubs://\") && url.endsWith(\"/video\")) return \"video/vnd.hubs-webrtc\";\n  if (url.startsWith(\"data:\")) {\n    const matches = dataUrlRegex.match(url);\n    if (matches.length > 0) {\n      matches[1];\n    }\n  }\n  const extension = new URL(url, window.location).pathname.split(\".\").pop();\n  return commonKnownContentTypes[extension];\n};\nconst hubsSceneRegex = /https?:\\/\\/(hubs.local(:\\d+)?|(smoke-)?hubs.mozilla.com)\\/scenes\\/(\\w+)\\/?\\S*/;\nconst hubsAvatarRegex = /https?:\\/\\/(hubs.local(:\\d+)?|(smoke-)?hubs.mozilla.com)\\/avatars\\/(\\w+)\\/?\\S*/;\nconst hubsRoomRegex = /https?:\\/\\/(hubs.local(:\\d+)?|(smoke-)?hubs.mozilla.com)\\/(\\w+)\\/?\\S*/;\nexport const isHubsSceneUrl = hubsSceneRegex.test.bind(hubsSceneRegex);\nexport const isHubsRoomUrl = url => !isHubsSceneUrl(url) && hubsRoomRegex.test(url);\nexport const isHubsDestinationUrl = url => isHubsSceneUrl(url) || isHubsRoomUrl(url);\nexport const isHubsAvatarUrl = hubsAvatarRegex.test.bind(hubsAvatarRegex);\n","import nextTick from \"../utils/next-tick\";\nimport { mapMaterials } from \"../utils/material-utils\";\nimport SketchfabZipWorker from \"../workers/sketchfab-zip.worker.js\";\nimport MobileStandardMaterial from \"../materials/MobileStandardMaterial\";\nimport { textureLoader } from \"../utils/media-utils\";\nimport { getCustomGLTFParserURLResolver } from \"../utils/media-url-utils\";\nimport { promisifyWorker } from \"../utils/promisify-worker.js\";\nimport { MeshBVH, acceleratedRaycast } from \"three-mesh-bvh\";\nimport { disposeNode } from \"../utils/three-utils\";\n\nTHREE.Mesh.prototype.raycast = acceleratedRaycast;\n\nclass GLTFCache {\n  cache = new Map();\n\n  set(src, gltf) {\n    this.cache.set(src, {\n      gltf,\n      count: 0\n    });\n    return this.retain(src);\n  }\n\n  has(src) {\n    return this.cache.has(src);\n  }\n\n  get(src) {\n    return this.cache.get(src);\n  }\n\n  retain(src) {\n    const cacheItem = this.cache.get(src);\n    cacheItem.count++;\n    return cacheItem;\n  }\n\n  release(src) {\n    const cacheItem = this.cache.get(src);\n\n    if (!cacheItem) {\n      console.error(`Releasing uncached gltf ${src}`);\n      return;\n    }\n\n    cacheItem.count--;\n    if (cacheItem.count <= 0) {\n      cacheItem.gltf.scene.traverse(disposeNode);\n      this.cache.delete(src);\n    }\n  }\n}\nconst gltfCache = new GLTFCache();\nconst inflightGltfs = new Map();\n\nconst extractZipFile = promisifyWorker(new SketchfabZipWorker());\n\nfunction defaultInflator(el, componentName, componentData) {\n  if (!AFRAME.components[componentName]) {\n    throw new Error(`Inflator failed. \"${componentName}\" component does not exist.`);\n  }\n  if (AFRAME.components[componentName].multiple && Array.isArray(componentData)) {\n    for (let i = 0; i < componentData.length; i++) {\n      el.setAttribute(componentName + \"__\" + i, componentData[i]);\n    }\n  } else {\n    el.setAttribute(componentName, componentData);\n  }\n}\n\nAFRAME.GLTFModelPlus = {\n  // eslint-disable-next-line no-unused-vars\n  components: {},\n  registerComponent(componentKey, componentName, inflator) {\n    inflator = inflator || defaultInflator;\n    AFRAME.GLTFModelPlus.components[componentKey] = { inflator, componentName };\n  }\n};\n\nfunction parallelTraverse(a, b, callback) {\n  callback(a, b);\n\n  for (let i = 0; i < a.children.length; i++) {\n    parallelTraverse(a.children[i], b.children[i], callback);\n  }\n}\n\nfunction generateMeshBVH(object3D) {\n  object3D.traverse(obj => {\n    // note that we might already have a bounds tree if this was a clone of an object with one\n    const hasBufferGeometry = obj.isMesh && obj.geometry.isBufferGeometry;\n    const hasBoundsTree = hasBufferGeometry && obj.geometry.boundsTree;\n    if (hasBufferGeometry && !hasBoundsTree && obj.geometry.attributes.position) {\n      const geo = obj.geometry;\n      const triCount = geo.index ? geo.index.count / 3 : geo.attributes.position.count / 3;\n      // only bother using memory and time making a BVH if there are a reasonable number of tris,\n      // and if there are too many it's too painful and large to tolerate doing it (at least until\n      // we put this in a web worker)\n      if (triCount > 1000 && triCount < 1000000) {\n        // note that bounds tree construction creates an index as a side effect if one doesn't already exist\n        geo.boundsTree = new MeshBVH(obj.geometry, { strategy: 0, maxDepth: 30 });\n      }\n    }\n  });\n}\n\n// Modified version of Don McCurdy's AnimationUtils.clone\n// https://github.com/mrdoob/three.js/pull/14494\nfunction cloneSkinnedMesh(source) {\n  const cloneLookup = new Map();\n\n  const clone = source.clone();\n\n  parallelTraverse(source, clone, function(sourceNode, clonedNode) {\n    cloneLookup.set(sourceNode, clonedNode);\n    if (sourceNode.isMesh && sourceNode.geometry.boundsTree) {\n      clonedNode.geometry.boundsTree = sourceNode.geometry.boundsTree;\n    }\n  });\n\n  source.traverse(function(sourceMesh) {\n    if (!sourceMesh.isSkinnedMesh) return;\n\n    const sourceBones = sourceMesh.skeleton.bones;\n    const clonedMesh = cloneLookup.get(sourceMesh);\n\n    clonedMesh.skeleton = sourceMesh.skeleton.clone();\n\n    clonedMesh.skeleton.bones = sourceBones.map(function(sourceBone) {\n      if (!cloneLookup.has(sourceBone)) {\n        throw new Error(\"Required bones are not descendants of the given object.\");\n      }\n\n      return cloneLookup.get(sourceBone);\n    });\n\n    clonedMesh.bind(clonedMesh.skeleton, sourceMesh.bindMatrix);\n  });\n\n  return clone;\n}\n\nfunction cloneGltf(gltf) {\n  return {\n    animations: gltf.animations,\n    scene: cloneSkinnedMesh(gltf.scene)\n  };\n}\n\nfunction getHubsComponents(node) {\n  const hubsComponents =\n    node.userData.gltfExtensions &&\n    (node.userData.gltfExtensions.MOZ_hubs_components || node.userData.gltfExtensions.HUBS_components);\n\n  // We can remove support for legacy components when our environment, avatar and interactable models are\n  // updated to match Spoke output.\n  const legacyComponents = node.userData.components;\n\n  return hubsComponents || legacyComponents;\n}\n\n/// Walks the tree of three.js objects starting at the given node, using the GLTF data\n/// and template data to construct A-Frame entities and components when necessary.\n/// (It's unnecessary to construct entities for subtrees that have no component data\n/// or templates associated with any of their nodes.)\n///\n/// Returns the A-Frame entity associated with the given node, if one was constructed.\nconst inflateEntities = function(indexToEntityMap, node, templates, isRoot, modelToWorldScale = 1) {\n  // TODO: Remove this once we update the legacy avatars to the new node names\n  if (node.name === \"Chest\") {\n    node.name = \"Spine\";\n  } else if (node.name === \"Root Scene\") {\n    node.name = \"AvatarRoot\";\n  } else if (node.name === \"Bot_Skinned\") {\n    node.name = \"AvatarMesh\";\n  }\n\n  // inflate subtrees first so that we can determine whether or not this node needs to be inflated\n  const childEntities = [];\n  const children = node.children.slice(0); // setObject3D mutates the node's parent, so we have to copy\n  for (const child of children) {\n    const el = inflateEntities(indexToEntityMap, child, templates);\n    if (el) {\n      childEntities.push(el);\n    }\n  }\n\n  const entityComponents = getHubsComponents(node);\n\n  const nodeHasBehavior = !!entityComponents || node.name in templates;\n  if (!nodeHasBehavior && !childEntities.length && !isRoot) {\n    return null; // we don't need an entity for this node\n  }\n\n  const el = document.createElement(\"a-entity\");\n  el.append.apply(el, childEntities);\n\n  // Remove invalid CSS class name characters.\n  const className = (node.name || node.uuid).replace(/[^\\w-]/g, \"\");\n  el.classList.add(className);\n\n  // AFRAME rotation component expects rotations in YXZ, convert it\n  if (node.rotation.order !== \"YXZ\") {\n    node.rotation.setFromQuaternion(node.quaternion, \"YXZ\");\n  }\n\n  // Copy over the object's transform to the THREE.Group and reset the actual transform of the Object3D\n  // all updates to the object should be done through the THREE.Group wrapper\n  el.object3D.position.copy(node.position);\n  el.object3D.rotation.copy(node.rotation);\n  el.object3D.scale.copy(node.scale).multiplyScalar(modelToWorldScale);\n  el.object3D.matrixNeedsUpdate = true;\n\n  node.matrixAutoUpdate = false;\n  node.matrix.identity();\n  node.matrix.decompose(node.position, node.rotation, node.scale);\n\n  el.setObject3D(node.type.toLowerCase(), node);\n  if (entityComponents && \"nav-mesh\" in entityComponents) {\n    el.setObject3D(\"mesh\", node);\n  }\n\n  // Set the name of the `THREE.Group` to match the name of the node,\n  // so that `THREE.PropertyBinding` will find (and later animate)\n  // the group. See `PropertyBinding.findNode`:\n  // https://github.com/mrdoob/three.js/blob/dev/src/animation/PropertyBinding.js#L211\n  el.object3D.name = node.name;\n  if (node.animations) {\n    // Pass animations up to the group object so that when we can pass the group as\n    // the optional root in `THREE.AnimationMixer.clipAction` and use the hierarchy\n    // preserved under the group (but not the node). Otherwise `clipArray` will be\n    // `null` in `THREE.AnimationClip.findByName`.\n    node.parent.animations = node.animations;\n  }\n\n  const gltfIndex = node.userData.gltfIndex;\n  if (gltfIndex !== undefined) {\n    indexToEntityMap[gltfIndex] = el;\n  }\n\n  return el;\n};\n\nfunction inflateComponents(inflatedEntity, indexToEntityMap) {\n  inflatedEntity.object3D.traverse(object3D => {\n    const entityComponents = getHubsComponents(object3D);\n    const el = object3D.el;\n\n    if (entityComponents && el) {\n      for (const prop in entityComponents) {\n        if (entityComponents.hasOwnProperty(prop) && AFRAME.GLTFModelPlus.components.hasOwnProperty(prop)) {\n          const { componentName, inflator } = AFRAME.GLTFModelPlus.components[prop];\n          inflator(el, componentName, entityComponents[prop], entityComponents, indexToEntityMap);\n        }\n      }\n    }\n  });\n}\n\nfunction attachTemplate(root, name, templateRoot) {\n  const targetEls = root.querySelectorAll(\".\" + name);\n  for (const el of targetEls) {\n    const root = templateRoot.cloneNode(true);\n    // Merge root element attributes with the target element\n    for (const { name, value } of root.attributes) {\n      el.setAttribute(name, value);\n    }\n\n    // Append all child elements\n    while (root.children.length > 0) {\n      el.appendChild(root.children[0]);\n    }\n  }\n}\n\nfunction runMigration(version, json) {\n  if (version < 2) {\n    //old heightfields will be on the same node as the nav-mesh, delete those\n    const oldHeightfieldNode = json.nodes.find(node => {\n      let components = null;\n      if (node.extensions && node.extensions.MOZ_hubs_components) {\n        components = node.extensions.MOZ_hubs_components;\n      } else if (node.extensions && node.extensions.HUBS_components) {\n        components = node.extensions.HUBS_components;\n      }\n      return components && components.heightfield && components[\"nav-mesh\"];\n    });\n    if (oldHeightfieldNode) {\n      if (oldHeightfieldNode.extensions.MOZ_hubs_components) {\n        delete oldHeightfieldNode.extensions.MOZ_hubs_components.heightfield;\n      } else if (oldHeightfieldNode.extensions.HUBS_components) {\n        delete oldHeightfieldNode.extensions.HUBS_components.heightfield;\n      }\n    }\n  }\n}\n\nexport async function loadGLTF(src, contentType, preferredTechnique, onProgress, jsonPreprocessor) {\n  let gltfUrl = src;\n  let fileMap;\n\n  if (contentType.includes(\"model/gltf+zip\") || contentType.includes(\"application/x-zip-compressed\")) {\n    fileMap = await extractZipFile(gltfUrl);\n    gltfUrl = fileMap[\"scene.gtlf\"];\n  }\n\n  const loadingManager = new THREE.LoadingManager();\n  loadingManager.setURLModifier(getCustomGLTFParserURLResolver(gltfUrl));\n  const gltfLoader = new THREE.GLTFLoader(loadingManager);\n\n  const parser = await new Promise((resolve, reject) => gltfLoader.createParser(gltfUrl, resolve, onProgress, reject));\n\n  parser.textureLoader = textureLoader;\n\n  if (jsonPreprocessor) {\n    parser.json = jsonPreprocessor(parser.json);\n  }\n\n  let version = 0;\n  if (\n    parser.json.extensions &&\n    parser.json.extensions.MOZ_hubs_components &&\n    parser.json.extensions.MOZ_hubs_components.hasOwnProperty(\"version\")\n  ) {\n    version = parser.json.extensions.MOZ_hubs_components.version;\n  }\n  runMigration(version, parser.json);\n\n  const materials = parser.json.materials;\n  if (materials) {\n    for (let i = 0; i < materials.length; i++) {\n      const material = materials[i];\n\n      if (\n        material.extensions &&\n        material.extensions.MOZ_alt_materials &&\n        material.extensions.MOZ_alt_materials[preferredTechnique] !== undefined\n      ) {\n        const altMaterialIndex = material.extensions.MOZ_alt_materials[preferredTechnique];\n        materials[i] = materials[altMaterialIndex];\n      }\n    }\n  }\n\n  const nodes = parser.json.nodes;\n\n  if (nodes) {\n    for (let i = 0; i < nodes.length; i++) {\n      const node = nodes[i];\n\n      if (!node.extras) {\n        node.extras = {};\n      }\n\n      node.extras.gltfIndex = i;\n    }\n  }\n\n  const gltf = await new Promise(parser.parse.bind(parser));\n\n  gltf.scene.traverse(object => {\n    // GLTFLoader sets matrixAutoUpdate on animated objects, we want to keep the defaults\n    object.matrixAutoUpdate = THREE.Object3D.DefaultMatrixAutoUpdate;\n\n    object.material = mapMaterials(object, material => {\n      if (material.isMeshStandardMaterial && preferredTechnique === \"KHR_materials_unlit\") {\n        return MobileStandardMaterial.fromStandardMaterial(material);\n      }\n\n      return material;\n    });\n  });\n\n  if (fileMap) {\n    // The GLTF is now cached as a THREE object, we can get rid of the original blobs\n    Object.keys(fileMap).forEach(URL.revokeObjectURL);\n  }\n\n  return gltf;\n}\n\n/**\n * Loads a GLTF model, optionally recursively \"inflates\" the child nodes of a model into a-entities and sets\n * whitelisted components on them if defined in the node's extras.\n * @namespace gltf\n * @component gltf-model-plus\n */\nAFRAME.registerComponent(\"gltf-model-plus\", {\n  schema: {\n    src: { type: \"string\" },\n    contentType: { type: \"string\" },\n    useCache: { default: true },\n    inflate: { default: false },\n    batch: { default: false },\n    modelToWorldScale: { type: \"number\", default: 1 }\n  },\n\n  init() {\n    this.preferredTechnique =\n      window.APP && window.APP.quality === \"low\" ? \"KHR_materials_unlit\" : \"pbrMetallicRoughness\";\n\n    // This can be set externally if a consumer wants to do some node preprocssing.\n    this.jsonPreprocessor = null;\n\n    this.loadTemplates();\n  },\n\n  update() {\n    this.applySrc(this.data.src, this.data.contentType);\n  },\n\n  remove() {\n    if (this.data.batch && this.model) {\n      this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.removeObject(this.el.object3DMap.mesh);\n    }\n    if (this.data.src) {\n      gltfCache.release(this.data.src);\n    }\n  },\n\n  loadTemplates() {\n    this.templates = {};\n    this.el.querySelectorAll(\":scope > template\").forEach(templateEl => {\n      const root = document.importNode(templateEl.firstElementChild || templateEl.content.firstElementChild, true);\n      this.templates[templateEl.getAttribute(\"data-name\")] = root;\n    });\n  },\n\n  async loadModel(src, contentType, technique, useCache) {\n    if (useCache) {\n      if (gltfCache.has(src)) {\n        gltfCache.retain(src);\n        return cloneGltf(gltfCache.get(src).gltf);\n      } else {\n        if (inflightGltfs.has(src)) {\n          const gltf = await inflightGltfs.get(src);\n          gltfCache.retain(src);\n          return cloneGltf(gltf);\n        } else {\n          const promise = loadGLTF(src, contentType, technique, null, this.jsonPreprocessor);\n          inflightGltfs.set(src, promise);\n          const gltf = await promise;\n          inflightGltfs.delete(src);\n          gltfCache.set(src, gltf);\n          return cloneGltf(gltf);\n        }\n      }\n    } else {\n      return loadGLTF(src, contentType, technique, null, this.jsonPreprocessor);\n    }\n  },\n\n  async applySrc(src, contentType) {\n    try {\n      // If the src attribute is a selector, get the url from the asset item.\n      if (src && src.charAt(0) === \"#\") {\n        const assetEl = document.getElementById(src.substring(1));\n        src = assetEl.getAttribute(\"src\");\n      }\n\n      if (src === this.lastSrc) return;\n\n      if (this.lastSrc) {\n        gltfCache.release(this.lastSrc);\n      }\n\n      this.lastSrc = src;\n\n      if (!src) {\n        if (this.inflatedEl) {\n          console.warn(\"gltf-model-plus set to an empty source, unloading inflated model.\");\n          this.disposeLastInflatedEl();\n        }\n        return;\n      }\n\n      this.el.emit(\"model-loading\");\n      const gltf = await this.loadModel(src, contentType, this.preferredTechnique, this.data.useCache);\n\n      // If we started loading something else already\n      // TODO: there should be a way to cancel loading instead\n      if (src != this.lastSrc) return;\n\n      // If we had inflated something already before, clean that up\n      this.disposeLastInflatedEl();\n\n      this.model = gltf.scene || gltf.scenes[0];\n      this.model.animations = gltf.animations;\n\n      if (this.data.batch) {\n        this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.addObject(this.model);\n      }\n\n      if (gltf.animations.length > 0) {\n        this.el.setAttribute(\"animation-mixer\", {});\n        this.el.components[\"animation-mixer\"].initMixer(gltf.animations);\n      } else {\n        generateMeshBVH(this.model);\n      }\n\n      const indexToEntityMap = {};\n\n      let object3DToSet = this.model;\n      if (\n        this.data.inflate &&\n        (this.inflatedEl = inflateEntities(\n          indexToEntityMap,\n          this.model,\n          this.templates,\n          true,\n          this.data.modelToWorldScale\n        ))\n      ) {\n        this.el.appendChild(this.inflatedEl);\n\n        object3DToSet = this.inflatedEl.object3D;\n        // TODO: Still don't fully understand the lifecycle here and how it differs between browsers, we should dig in more\n        // Wait one tick for the appended custom elements to be connected before attaching templates\n        await nextTick();\n        if (src != this.lastSrc) return; // TODO: there must be a nicer pattern for this\n\n        inflateComponents(this.inflatedEl, indexToEntityMap);\n\n        for (const name in this.templates) {\n          attachTemplate(this.el, name, this.templates[name]);\n        }\n      }\n\n      // The call to setObject3D below recursively clobbers any `el` backreferences to entities\n      // in the entire inflated entity graph to point to `object3DToSet`.\n      //\n      // We don't want those overwritten, since lots of code assumes `object3d.el` points to the relevant\n      // A-Frame entity for that three.js object, so we back them up and re-wire them here. If we didn't do\n      // this, all the `el` properties on these object3ds would point to the `object3DToSet` which is either\n      // the model or the root GLTF inflated entity.\n      const rewires = [];\n\n      object3DToSet.traverse(o => {\n        const el = o.el;\n        if (el) rewires.push(() => (o.el = el));\n      });\n\n      const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n\n      if (environmentMapComponent) {\n        environmentMapComponent.applyEnvironmentMap(object3DToSet);\n      }\n\n      this.el.setObject3D(\"mesh\", object3DToSet);\n\n      rewires.forEach(f => f());\n\n      this.el.emit(\"model-loaded\", { format: \"gltf\", model: this.model });\n    } catch (e) {\n      gltfCache.release(src);\n      console.error(\"Failed to load glTF model\", e, this);\n      this.el.emit(\"model-error\", { format: \"gltf\", src });\n    }\n  },\n\n  disposeLastInflatedEl() {\n    if (this.inflatedEl) {\n      this.inflatedEl.parentNode.removeChild(this.inflatedEl);\n\n      this.inflatedEl.object3D.traverse(x => {\n        if (x.material && x.material.dispose) {\n          x.material.dispose();\n        }\n\n        if (x.geometry) {\n          if (x.geometry.dispose) {\n            x.geometry.dispose();\n          }\n\n          x.geometry.boundsTree = null;\n        }\n      });\n\n      delete this.inflatedEl;\n\n      this.el.removeAttribute(\"animation-mixer\");\n    }\n  }\n});\n","// Wrapper for a worker which accepts work items and responds with results.\n//\n// The worker must receive messages with data of the shape { id, payload }, and then respond\n// with messages containing matching IDs of the shape { id, result, err }.\n//\n// Returns a function that accepts a work item, sends it to the worker, and returns a promise that\n// will resolve with the result or reject with the error.\n//\nexport function promisifyWorker(worker) {\n  let nextItemId = 0;\n  const outstanding = {}; // item ID: { resolve, reject }\n\n  worker.onmessage = msg => {\n    const { id, result, err } = msg.data;\n    const handlers = outstanding[id];\n    if (handlers == null) {\n      console.error(`Unknown message with ID ${id} received from ${worker}.`);\n    } else {\n      delete outstanding[id];\n      if (err != null) {\n        handlers.reject(new Error(err));\n      } else {\n        handlers.resolve(result);\n      }\n    }\n  };\n\n  return function(data, transfer) {\n    const id = nextItemId++;\n    const promise = new Promise((resolve, reject) => {\n      outstanding[id] = { resolve, reject };\n    });\n    worker.postMessage({ id, payload: data }, transfer);\n    return promise;\n  };\n}\n","export const waitForDOMContentLoaded = function() {\n  if (document.readyState === \"complete\" || document.readyState === \"loaded\" || document.readyState === \"interactive\") {\n    return Promise.resolve(null);\n  } else {\n    return new Promise(resolve => {\n      window.addEventListener(\"DOMContentLoaded\", resolve);\n    });\n  }\n};\n\nexport const waitForEvent = function(eventName, eventObj) {\n  return new Promise(resolve => {\n    eventObj.addEventListener(eventName, resolve, { once: true });\n  });\n};\n","/**\n * Chrome and Safari will start Audio contexts in a \"suspended\" state.\n * A user interaction (touch/mouse event) is needed in order to resume the AudioContext.\n */\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const ctx = THREE.AudioContext.getContext();\n\n  function resume() {\n    ctx.resume();\n\n    setTimeout(function() {\n      if (ctx.state === \"running\") {\n        document.body.removeEventListener(\"touchend\", resume, false);\n        document.body.removeEventListener(\"mouseup\", resume, false);\n      }\n    }, 0);\n  }\n\n  document.body.addEventListener(\"touchend\", resume, false);\n  document.body.addEventListener(\"mouseup\", resume, false);\n});\n","// Monkeypatch to address performance issue with updating panner nodes\n// TODO this needs to be merged into 3.js\n\nTHREE.PositionalAudio.prototype.updateMatrixWorld = (function() {\n  const position = new THREE.Vector3();\n  const quaternion = new THREE.Quaternion();\n\n  const scale = new THREE.Vector3();\n  const orientation = new THREE.Vector3();\n\n  return function updateMatrixWorld(force) {\n    THREE.Object3D.prototype.updateMatrixWorld.call(this, force);\n\n    let setInitial = false;\n\n    if (!this._lastPosition) {\n      setInitial = true;\n      this._lastPosition = new THREE.Vector3();\n      this._lastOrientation = new THREE.Vector3();\n      this._lastListenerPosition = new THREE.Vector3();\n    }\n\n    const panner = this.panner;\n    const listener = panner.context.listener;\n    this.matrixWorld.decompose(position, quaternion, scale);\n    orientation.set(0, 0, 1).applyQuaternion(quaternion);\n\n    // Need to update the position on this node if either the listener moves or this node moves,\n    // because otherwise there are audio artifacts in Chrome.\n    if (\n      setInitial ||\n      Math.abs(position.x - this._lastPosition.x) > Number.EPSILON ||\n      Math.abs(position.y - this._lastPosition.y) > Number.EPSILON ||\n      Math.abs(position.z - this._lastPosition.z) > Number.EPSILON ||\n      Math.abs(orientation.x - this._lastOrientation.x) > Number.EPSILON ||\n      Math.abs(orientation.y - this._lastOrientation.y) > Number.EPSILON ||\n      Math.abs(orientation.z - this._lastOrientation.z) > Number.EPSILON ||\n      (listener.positionX && Math.abs(listener.positionX.value - this._lastListenerPosition.x) > Number.EPSILON) ||\n      (listener.positionY && Math.abs(listener.positionY.value - this._lastListenerPosition.y) > Number.EPSILON) ||\n      (listener.positionZ && Math.abs(listener.positionZ.value - this._lastListenerPosition.z) > Number.EPSILON)\n    ) {\n      panner.setPosition(position.x, position.y, position.z);\n      panner.setOrientation(orientation.x, orientation.y, orientation.z);\n\n      this._lastPosition.x = position.x;\n      this._lastPosition.y = position.y;\n      this._lastPosition.z = position.z;\n\n      this._lastOrientation.x = orientation.x;\n      this._lastOrientation.y = orientation.y;\n      this._lastOrientation.z = orientation.z;\n\n      if (listener.positionX && listener.positionY && listener.positionZ) {\n        this._lastListenerPosition.x = listener.positionX.value;\n        this._lastListenerPosition.y = listener.positionY.value;\n        this._lastListenerPosition.z = listener.positionZ.value;\n      }\n    }\n  };\n})();\n","/**\n * Toggles the position of 2 bones into \"on\" and \"off\" positions to indicate mute state.\n * @namespace avatar\n * @component bone-mute-state-indicator\n */\nAFRAME.registerComponent(\"bone-mute-state-indicator\", {\n  schema: {\n    unmutedBoneName: { default: \"Watch_Joint_MicON\" },\n    mutedBoneName: { default: \"Watch_Joint_Muted\" },\n    onPos: { default: 0.81 },\n    offPos: { default: 0.5 }\n  },\n\n  init() {\n    this.onStateToggled = this.onStateToggled.bind(this);\n    this.el.addEventListener(\"model-loaded\", () => {\n      this.unmutedBone = this.el.object3D.getObjectByName(this.data.unmutedBoneName);\n      this.mutedBone = this.el.object3D.getObjectByName(this.data.mutedBoneName);\n      this.modelLoaded = true;\n\n      this.updateMuteState();\n    });\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateToggled);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateToggled);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateToggled);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateToggled);\n  },\n\n  onStateToggled(e) {\n    if (!e.detail.state === \"muted\") return;\n    this.updateMuteState();\n  },\n\n  updateMuteState() {\n    if (!this.modelLoaded) return;\n    const muted = this.el.sceneEl.is(\"muted\");\n    this.mutedBone.position.y = muted ? this.data.onPos : this.data.offPos;\n    this.unmutedBone.position.y = !muted ? this.data.onPos : this.data.offPos;\n    this.mutedBone.matrixNeedsUpdate = true;\n    this.unmutedBone.matrixNeedsUpdate = true;\n  }\n});\n","/**\n * Scales an object to near-zero if the object is invisible. Useful for bones representing avatar body parts.\n * @namespace avatar\n * @component bone-visibility\n */\nAFRAME.registerComponent(\"bone-visibility\", {\n  tick() {\n    const { visible } = this.el.object3D;\n\n    if (this.lastVisible !== visible) {\n      if (visible) {\n        this.el.object3D.scale.set(1, 1, 1);\n      } else {\n        // Three.js doesn't like updating matrices with 0 scale, so we set it to a near zero number.\n        this.el.object3D.scale.set(0.00000001, 0.00000001, 0.00000001);\n      }\n\n      this.lastVisible = visible;\n      this.el.object3D.updateMatrices(true, true);\n      this.el.object3D.updateMatrixWorld(true, true);\n    }\n  }\n});\n","/**\n * Positions an entity relative to a given target when the given event is fired.\n * @component offset-relative-to\n */\nAFRAME.registerComponent(\"offset-relative-to\", {\n  schema: {\n    target: {\n      type: \"selector\"\n    },\n    offset: {\n      type: \"vec3\"\n    },\n    on: {\n      type: \"string\"\n    },\n    orientation: {\n      default: 1 // see doc/image_orientations.gif\n    },\n    selfDestruct: {\n      default: false\n    }\n  },\n  init() {\n    this.updateOffset = this.updateOffset.bind(this);\n    if (this.data.on) {\n      this.el.sceneEl.addEventListener(this.data.on, this.updateOffset);\n    } else {\n      this.updateOffset();\n    }\n  },\n\n  updateOffset: (function() {\n    const y = new THREE.Vector3(0, 1, 0);\n    const z = new THREE.Vector3(0, 0, -1);\n    const QUARTER_CIRCLE = Math.PI / 2;\n    const offsetVector = new THREE.Vector3();\n    return function() {\n      const obj = this.el.object3D;\n      const target = this.data.target.object3D;\n      offsetVector.copy(this.data.offset);\n      target.localToWorld(offsetVector);\n      if (obj.parent) {\n        obj.parent.worldToLocal(offsetVector);\n      }\n      obj.position.copy(offsetVector);\n      target.getWorldQuaternion(obj.quaternion);\n\n      // See doc/image_orientations.gif\n      switch (this.data.orientation) {\n        case 8:\n          obj.rotateOnAxis(z, 3 * QUARTER_CIRCLE);\n          break;\n        case 7:\n          obj.rotateOnAxis(z, 3 * QUARTER_CIRCLE);\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 6:\n          obj.rotateOnAxis(z, QUARTER_CIRCLE);\n          break;\n        case 5:\n          obj.rotateOnAxis(z, QUARTER_CIRCLE);\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 4:\n          obj.rotateOnAxis(z, 2 * QUARTER_CIRCLE);\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 3:\n          obj.rotateOnAxis(z, 2 * QUARTER_CIRCLE);\n          break;\n        case 2:\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 1:\n        default:\n          break;\n      }\n\n      obj.matrixNeedsUpdate = true;\n\n      if (this.data.selfDestruct) {\n        if (this.data.on) {\n          this.el.sceneEl.removeEventListener(this.data.on, this.updateOffset);\n        }\n        this.el.removeAttribute(\"offset-relative-to\");\n      }\n    };\n  })()\n});\n","const TWOPI = Math.PI * 2;\nfunction deltaAngle(a, b) {\n  const p = Math.abs(b - a) % TWOPI;\n  return p > Math.PI ? TWOPI - p : p;\n}\n\n/**\n * Positions the HUD and toggles app mode based on where the user is looking\n * @namespace ui\n * @component hud-controller\n */\nAFRAME.registerComponent(\"hud-controller\", {\n  schema: {\n    head: { type: \"selector\" },\n    offset: { default: 0.7 }, // distance from hud above head,\n    lookCutoff: { default: 20 }, // angle at which the hud should be \"on\",\n    animRange: { default: 30 }, // degrees over which to animate the hud into view\n    yawCutoff: { default: 50 } // yaw degrees at wich the hud should reoirent even if the user is looking up\n  },\n  init() {\n    this.onChildHovered = this.onChildHovered.bind(this);\n    this.removeHoverEvents = this.removeHoverEvents.bind(this);\n    this.isYLocked = false;\n    this.lockedHeadPositionY = 0;\n    this.lookDir = new THREE.Vector3();\n    this.lookEuler = new THREE.Euler();\n    this.store = window.APP.store;\n    this.hoverableChildren = this.el.querySelectorAll(\"[is-remote-hover-target]\");\n  },\n\n  tick() {\n    const hud = this.el.object3D;\n    const head = this.data.head.object3D;\n\n    const { offset, lookCutoff, animRange, yawCutoff } = this.data;\n\n    const pitch = head.rotation.x * THREE.Math.RAD2DEG;\n    const yawDif = deltaAngle(head.rotation.y, hud.rotation.y) * THREE.Math.RAD2DEG;\n\n    // HUD is always visible until first hover, to increase discoverability.\n    const forceHudVisible = !this.store.state.activity.hasHoveredInWorldHud;\n\n    // animate the hud into place over animRange degrees as the user aproaches the lookCutoff angle\n    let t = 1 - THREE.Math.clamp(lookCutoff - pitch, 0, animRange) / animRange;\n\n    // HUD is locked down while showing tooltip or if forced.\n    if (forceHudVisible) {\n      t = 1;\n    }\n\n    // Once the HUD is in place it should stay in place until you look sufficiently far down\n    if (t === 1) {\n      this.lockedHeadPositionY = head.position.y;\n      this.hudLocked = true;\n    } else if (this.hudLocked && pitch < lookCutoff - animRange / 2) {\n      this.hudLocked = false;\n    }\n\n    if (this.hudLocked) {\n      t = 1;\n    }\n\n    // Reorient the hud only if the user is looking away from the hud, for right now this arbitrarily means the hud is 1/2 way animated away\n    // TODO: come up with better huristics for this that maybe account for the user turning away from the hud \"too far\", also animate the position so that it doesnt just snap.\n    const hudOutOfView = yawDif >= yawCutoff || pitch < lookCutoff - animRange / 2;\n\n    if (hudOutOfView) {\n      this.lookDir.set(0, 0, -1);\n      this.lookDir.applyQuaternion(head.quaternion);\n      this.lookDir.add(head.position);\n      hud.position.x = this.lookDir.x;\n      hud.position.z = this.lookDir.z;\n      hud.rotation.copy(head.rotation);\n      hud.rotation.x = 0;\n      hud.rotation.z = 0;\n    }\n\n    hud.visible = !hudOutOfView || forceHudVisible;\n    hud.position.y = (this.isYLocked ? this.lockedHeadPositionY : head.position.y) + offset + (1 - t) * offset;\n    hud.rotation.x = (1 - t) * THREE.Math.DEG2RAD * 90;\n    hud.matrixNeedsUpdate = true;\n  },\n\n  play() {\n    for (let i = 0; i < this.hoverableChildren.length; i++) {\n      this.hoverableChildren[i].object3D.addEventListener(\"hovered\", this.onChildHovered);\n    }\n  },\n\n  pause() {\n    this.removeHoverEvents();\n  },\n\n  removeHoverEvents() {\n    for (let i = 0; i < this.hoverableChildren.length; i++) {\n      this.hoverableChildren[i].object3D.removeEventListener(\"hovered\", this.onChildHovered);\n    }\n  },\n\n  onChildHovered() {\n    if (!this.store.state.activity.hasHoveredInWorldHud) {\n      this.store.update({ activity: { hasHoveredInWorldHud: true } });\n      this.removeHoverEvents();\n    }\n  }\n});\n","/**\n * A button with an image, tooltip, hover states.\n * @namespace ui\n * @component icon-button\n */\nAFRAME.registerComponent(\"icon-button\", {\n  schema: {\n    image: { type: \"string\" },\n    hoverImage: { type: \"string\" },\n    activeImage: { type: \"string\" },\n    activeHoverImage: { type: \"string\" },\n    disabledImage: { type: \"string\" },\n    active: { type: \"boolean\" },\n    disabled: { type: \"boolean\" },\n    tooltip: { type: \"selector\" },\n    tooltipText: { type: \"string\" },\n    activeTooltipText: { type: \"string\" }\n  },\n\n  init() {\n    this.el.object3D.matrixNeedsUpdate = true;\n    this.onHover = () => {\n      this.hovering = true;\n      if (this.data.tooltip) {\n        this.data.tooltip.object3D.visible = true;\n      }\n      this.updateButtonState();\n    };\n    this.onHoverOut = () => {\n      this.hovering = false;\n      if (this.data.tooltip) {\n        this.data.tooltip.object3D.visible = false;\n      }\n      this.updateButtonState();\n    };\n  },\n\n  play() {\n    this.updateButtonState();\n    this.el.object3D.addEventListener(\"hovered\", this.onHover);\n    this.el.object3D.addEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"hovered\", this.onHover);\n    this.el.object3D.removeEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  update() {\n    this.updateButtonState();\n  },\n\n  updateButtonState() {\n    const hovering = this.hovering;\n    const active = this.data.active;\n    const disabled = this.data.disabled;\n\n    let image;\n    if (disabled) {\n      image = \"disabledImage\";\n    } else if (active) {\n      image = hovering ? \"activeHoverImage\" : \"activeImage\";\n    } else {\n      image = hovering ? \"hoverImage\" : \"image\";\n    }\n\n    if (this.el.components.sprite) {\n      if (this.data[image]) {\n        this.el.setAttribute(\"sprite\", \"name\", this.data[image]);\n      } else {\n        console.warn(`No ${image} image on me.`, this);\n      }\n    } else {\n      console.error(\"No sprite.\");\n    }\n\n    if (this.data.tooltip && hovering) {\n      const tooltipText =\n        (this.data.active ? this.data.activeTooltipText : this.data.tooltipText) + (disabled ? \" Disabled\" : \"\");\n      this.data.tooltip.querySelector(\"[text]\").setAttribute(\"text\", \"value\", tooltipText);\n    }\n  }\n});\n","/**\n * A button with text\n * @namespace ui\n * @component text-button\n */\nAFRAME.registerComponent(\"text-button\", {\n  schema: {\n    textHoverColor: { type: \"string\" },\n    textColor: { type: \"string\" },\n    backgroundHoverColor: { type: \"string\" },\n    backgroundColor: { type: \"string\" }\n  },\n\n  init() {\n    // TODO: This is a bit of a hack to deal with position \"component\" not setting matrixNeedsUpdate. Come up with a better solution.\n    this.el.object3D.matrixNeedsUpdate = true;\n    this.onHover = () => {\n      this.hovering = true;\n      this.updateButtonState();\n    };\n    this.onHoverOut = () => {\n      this.hovering = false;\n      this.updateButtonState();\n    };\n    this.textEl = this.el.querySelector(\"[text]\");\n  },\n\n  play() {\n    this.updateButtonState();\n    this.el.object3D.addEventListener(\"hovered\", this.onHover);\n    this.el.object3D.addEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"hovered\", this.onHover);\n    this.el.object3D.removeEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  update() {\n    this.updateButtonState();\n  },\n\n  updateButtonState() {\n    const hovering = this.hovering;\n    this.el.setAttribute(\"slice9\", \"color\", hovering ? this.data.backgroundHoverColor : this.data.backgroundColor);\n\n    if (this.textEl) {\n      this.textEl.setAttribute(\"text\", \"color\", hovering ? this.data.textHoverColor : this.data.textColor);\n    }\n  }\n});\n\nconst noop = function() {};\n// TODO: this should ideally be fixed upstream somehow but its pretty tricky since text is just a geometry not a different type of Object3D, and Object3D is what handles raycast checks.\nAFRAME.registerComponent(\"text-raycast-hack\", {\n  dependencies: [\"text\"],\n  init() {\n    this.el.getObject3D(\"text\").raycast = noop;\n  }\n});\n","/**\n * Registers a click handler and invokes the block method on the NAF adapter for the owner associated with its entity.\n * @namespace network\n * @component block-button\n */\nAFRAME.registerComponent(\"block-button\", {\n  init() {\n    this.onClick = () => {\n      this.block(this.owner);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.owner = networkedEl.components.networked.data.owner;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  block(clientId) {\n    window.APP.hubChannel.hide(clientId);\n  }\n});\n","AFRAME.registerComponent(\"mute-button\", {\n  init() {\n    this.onClick = () => {\n      this.mute(this.owner);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.owner = networkedEl.components.networked.data.owner;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  async mute(clientId) {\n    this.el.sceneEl.emit(\"action_mute_client\", { clientId });\n  }\n});\n","AFRAME.registerComponent(\"kick-button\", {\n  init() {\n    this.onClick = () => {\n      this.kick(this.owner);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.owner = networkedEl.components.networked.data.owner;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  async kick(clientId) {\n    this.el.sceneEl.emit(\"action_kick_client\", { clientId });\n  }\n});\n","AFRAME.registerComponent(\"close-vr-notice-button\", {\n  init() {\n    this.onClick = () => {\n      this.el.sceneEl.emit(\"action_vr_notice_closed\");\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"leave-room-button\", {\n  init() {\n    this.onClick = () => {\n      this.el.sceneEl.emit(\"leave_room_requested\");\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"visible-if-permitted\", {\n  schema: {\n    type: \"string\"\n  },\n  init() {\n    this.updateVisibility = this.updateVisibility.bind(this);\n    this.updateVisibility();\n    window.APP.hubChannel.addEventListener(\"permissions_updated\", this.updateVisibility);\n  },\n  updateVisibility() {\n    this.el.object3D.visible = this.el.sceneEl.systems.permissions.canOrWillIfCreator(this.data);\n  },\n  remove() {\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.updateVisibility);\n  }\n});\n","AFRAME.registerComponent(\"visibility-on-content-type\", {\n  schema: {\n    contentType: { type: \"string\" },\n    contentSubtype: { type: \"string\" },\n    visible: { type: \"boolean\", default: true }\n  },\n\n  init() {\n    this.updateVisibility = this.updateVisibility.bind(this);\n\n    NAF.utils.getNetworkedEntity(this.el).then(el => {\n      this.networkedEl = el;\n      el.addEventListener(\"media_resolved\", ({ detail: { contentType } }) => this.updateVisibility(contentType));\n      this.updateVisibility();\n    });\n  },\n\n  updateVisibility(contentType) {\n    const mediaLoader = this.networkedEl.components[\"media-loader\"];\n    const mediaImage = this.networkedEl.components[\"media-image\"];\n    const mediaVideo = this.networkedEl.components[\"media-video\"];\n    const currentContentType =\n      contentType || (mediaVideo && mediaVideo.data.contentType) || (mediaImage && mediaImage.data.contentType);\n    const matchesType =\n      !this.data.contentType ||\n      (currentContentType && currentContentType.toLowerCase().split(\";\")[0] === this.data.contentType);\n    const matchesSubtype =\n      !this.data.contentSubtype ||\n      (mediaLoader.data.contentSubtype && mediaLoader.data.contentSubtype === this.data.contentSubtype);\n    const matches = !!(matchesType && matchesSubtype);\n    this.el.object3D.visible = this.data.visible ? matches : !matches;\n  }\n});\n","AFRAME.registerComponent(\"hide-when-pinned-and-forbidden\", {\n  schema: {\n    // Hide regardless of being forbidden.\n    whenPinned: { type: \"boolean\" }\n  },\n  init() {\n    this._updateUI = this._updateUI.bind(this);\n    this._updateUIOnStateChange = this._updateUIOnStateChange.bind(this);\n    this.el.sceneEl.addEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n\n      this._updateUI();\n      this.targetEl.addEventListener(\"pinned\", this._updateUI);\n      this.targetEl.addEventListener(\"unpinned\", this._updateUI);\n    });\n  },\n\n  remove() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    if (this.targetEl) {\n      this.targetEl.removeEventListener(\"pinned\", this._updateUI);\n      this.targetEl.removeEventListener(\"unpinned\", this._updateUI);\n    }\n  },\n\n  _updateUIOnStateChange(e) {\n    if (e.detail !== \"frozen\") return;\n    this._updateUI();\n  },\n\n  _updateUI() {\n    if (!this.targetEl) return;\n    const isPinned = this.targetEl.components.pinnable && this.targetEl.components.pinnable.data.pinned;\n\n    if (this.data.whenPinned) {\n      this.el.object3D.visible = !isPinned;\n    } else {\n      const pinnedAndForbidden = isPinned && !window.APP.hubChannel.canOrWillIfCreator(\"pin_objects\");\n      this.el.object3D.visible = !pinnedAndForbidden;\n    }\n  }\n});\n","/**\n * Stores networked avatar state.\n * @namespace avatar\n * @component networked-avatar\n */\nAFRAME.registerComponent(\"networked-avatar\", {\n  schema: {\n    left_hand_pose: { default: 0 },\n    right_hand_pose: { default: 0 }\n  }\n});\n","AFRAME.registerComponent(\"pinnable\", {\n  schema: {\n    pinned: { default: false }\n  },\n\n  init() {\n    this._fireEventsAndAnimate = this._fireEventsAndAnimate.bind(this);\n\n    // Fire pinned events when page changes so we can persist the page.\n    this.el.addEventListener(\"pager-page-changed\", this._fireEventsAndAnimate);\n\n    // Fire pinned events when video state changes so we can persist the page.\n    this.el.addEventListener(\"owned-video-state-changed\", this._fireEventsAndAnimate);\n  },\n\n  update(oldData) {\n    this._fireEventsAndAnimate(oldData);\n  },\n\n  _fireEventsAndAnimate(oldData, force) {\n    // We need to guard against _fireEventsAndAnimate being called during entity initialization,\n    // when the networked component isn't initialized yet.\n    if (this.el.components.networked && this.el.components.networked.data && !NAF.utils.isMine(this.el)) return;\n\n    // Avoid firing events during initialization by checking if the pin state has changed before doing so.\n    const pinStateChanged = !!oldData.pinned !== this.data.pinned;\n\n    if (this.data.pinned) {\n      if (pinStateChanged || force) {\n        this.el.emit(\"pinned\", { el: this.el });\n      }\n\n      this.el.removeAttribute(\"animation__pin-start\");\n      this.el.removeAttribute(\"animation__pin-end\");\n      const currentScale = this.el.object3D.scale;\n\n      this.el.setAttribute(\"animation__pin-start\", {\n        property: \"scale\",\n        dur: 200,\n        from: { x: currentScale.x, y: currentScale.y, z: currentScale.z },\n        to: { x: currentScale.x * 1.1, y: currentScale.y * 1.1, z: currentScale.z * 1.1 },\n        easing: \"easeOutElastic\"\n      });\n\n      this.el.setAttribute(\"animation__pin-end\", {\n        property: \"scale\",\n        delay: 200,\n        dur: 200,\n        from: { x: currentScale.x * 1.1, y: currentScale.y * 1.1, z: currentScale.z * 1.1 },\n        to: { x: currentScale.x, y: currentScale.y, z: currentScale.z },\n        easing: \"easeOutElastic\"\n      });\n\n      if (this.el.components[\"ammo-body\"]) {\n        this.el.setAttribute(\"ammo-body\", { type: \"static\" });\n      }\n    } else {\n      if (pinStateChanged || force) {\n        this.el.emit(\"unpinned\", { el: this.el });\n      }\n    }\n  },\n\n  isHeld(el) {\n    const { leftHand, rightHand, rightRemote } = el.sceneEl.systems.interaction.state;\n    return leftHand.held === el || rightHand.held === el || rightRemote.held === el;\n  },\n\n  tick() {\n    const held = this.isHeld(this.el);\n\n    if (!held && this.wasHeld) {\n      this._fireEventsAndAnimate(this.data, true);\n    }\n\n    this.wasHeld = held;\n  }\n});\n","const COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nAFRAME.registerComponent(\"drop-object-button\", {\n  init() {\n    this.onClick = () => {\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) return;\n\n      this.targetEl.setAttribute(\"floaty-object\", { modifyGravityOnRelease: false });\n      this.targetEl.setAttribute(\"ammo-body\", {\n        type: \"dynamic\",\n        gravity: { x: 0, y: -9.8, z: 0 },\n        angularDamping: 0.01,\n        linearDamping: 0.01,\n        linearSleepingThreshold: 1.6,\n        angularSleepingThreshold: 2.5,\n        collisionFilterMask: COLLISION_LAYERS.DEFAULT_INTERACTABLE\n      });\n      this.targetEl.components[\"ammo-body\"].body.activate();\n\n      // Remove drop button after using it\n      this.el.parentNode.removeChild(this.el);\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"remove-networked-object-button\", {\n  init() {\n    this.onClick = () => {\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) return;\n\n      this.targetEl.setAttribute(\"animation__remove\", {\n        property: \"scale\",\n        dur: 200,\n        to: { x: 0.01, y: 0.01, z: 0.01 },\n        easing: \"easeInQuad\"\n      });\n\n      this.el.parentNode.removeAttribute(\"visibility-while-frozen\");\n      this.el.parentNode.setAttribute(\"visible\", false);\n\n      this.targetEl.addEventListener(\"animationcomplete\", () => {\n        NAF.utils.takeOwnership(this.targetEl);\n        this.targetEl.parentNode.removeChild(this.targetEl);\n      });\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"camera-focus-button\", {\n  schema: {\n    track: { default: false },\n    selector: { default: null }\n  },\n\n  init() {\n    this.cameraSystem = this.el.sceneEl.systems[\"camera-tools\"];\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      if (this.data.selector) {\n        this.targetEl = networkedEl.querySelector(this.data.selector);\n      } else {\n        this.targetEl = networkedEl;\n      }\n    });\n\n    this.onClick = () => {\n      const myCamera = this.cameraSystem.getMyCamera();\n      if (!myCamera) return;\n\n      myCamera.components[\"camera-tool\"].focus(this.targetEl, this.data.track);\n    };\n  },\n\n  tick() {\n    const isVisible = this.el.object3D.visible;\n    const shouldBeVisible = !!(this.cameraSystem && this.cameraSystem.getMyCamera());\n\n    if (isVisible !== shouldBeVisible) {\n      this.el.setAttribute(\"visible\", shouldBeVisible);\n    }\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","/**\n * Toggles the visibility of this entity based on networked ownership\n * @namespace ui\n * @component visible-to-owner\n */\nAFRAME.registerComponent(\"visible-to-owner\", {\n  init() {\n    this.onStateChange = e => {\n      this.el.setAttribute(\"visible\", e.detail.newOwner === NAF.clientId);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(el => {\n      el.addEventListener(\"ownership-changed\", this.onStateChange);\n      this.el.setAttribute(\"visible\", NAF.utils.isMine(el));\n    });\n  }\n});\n","AFRAME.registerComponent(\"emit-state-change\", {\n  multiple: true,\n  schema: {\n    state: { type: \"string\" },\n    transform: { type: \"string\", oneof: [\"rising\", \"falling\"] },\n    event: { type: \"string\" }\n  },\n\n  init() {\n    this.stateadded = this.stateadded.bind(this);\n    this.stateremoved = this.stateremoved.bind(this);\n  },\n\n  stateadded(e) {\n    if (e.detail === this.data.state) {\n      this.el.emit(this.data.event);\n    }\n  },\n  stateremoved(e) {\n    if (e.detail === this.data.state) {\n      this.el.emit(this.data.event);\n    }\n  },\n\n  update() {\n    this.el.removeEventListener(\"stateadded\", this.stateadded);\n    this.el.removeEventListener(\"stateremoved\", this.stateremoved);\n\n    if (this.data.transform === \"rising\") {\n      this.el.addEventListener(\"stateadded\", this.stateadded);\n    }\n    if (this.data.transform === \"falling\") {\n      this.el.addEventListener(\"stateremoved\", this.stateremoved);\n    }\n  }\n});\n","AFRAME.registerComponent(\"action-to-event\", {\n  multiple: true,\n\n  schema: {\n    path: { type: \"string\" },\n    event: { type: \"string\" },\n    withPermission: { type: \"string\" }\n  },\n\n  init() {\n    this.needsPermission = !!this.data.withPermission;\n    this.updatePermissions = () => {\n      if (!this.needsPermission) return;\n      this.hasPermission = window.APP.hubChannel.canOrWillIfCreator(this.data.withPermission);\n    };\n  },\n\n  play() {\n    this.el.sceneEl.systems.permissions.onPermissionsUpdated(this.updatePermissions);\n  },\n\n  pause() {\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.updatePermissions);\n  },\n\n  tick() {\n    if (this.needsPermission && !this.hasPermission) return;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    if (userinput.get(this.data.path)) {\n      this.el.emit(this.data.event);\n    }\n  }\n});\n","AFRAME.registerComponent(\"action-to-remove\", {\n  multiple: true,\n\n  schema: {\n    path: { type: \"string\" },\n    requireOwnership: { type: \"boolean\", default: true }\n  },\n\n  init() {\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.networkedEl = networkedEl;\n    });\n  },\n\n  tick() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    if (!userinput.get(this.data.path)) return;\n    if (this.data.requireOwnership && this.networkedEl && !NAF.utils.isMine(this.networkedEl)) return;\n\n    this.el.parentNode.removeChild(this.el);\n  }\n});\n","AFRAME.registerComponent(\"emit-scene-event-on-remove\", {\n  schema: {\n    event: { default: null }\n  },\n\n  remove() {\n    if (this.data.event) {\n      this.el.sceneEl.emit(this.data.event, { el: this.el });\n    }\n  }\n});\n","AFRAME.registerComponent(\"follow-in-fov\", {\n  schema: {\n    target: { type: \"selector\" },\n    offset: { type: \"vec3\" },\n    speed: { type: \"number\", default: 0.003 },\n    angle: { type: \"number\", default: 45 }\n  },\n\n  init() {\n    this.targetPos = new THREE.Vector3();\n    this.offset = new THREE.Vector3();\n    this.offset.copy(this.data.offset);\n\n    this.snappedRot = new THREE.Euler();\n    this.snappedQ = new THREE.Quaternion();\n    this.snappedXForm = new THREE.Matrix4();\n    this.snappedXFormWorld = new THREE.Matrix4();\n    this.tempVector = new THREE.Vector3();\n  },\n\n  tick(t, dt) {\n    if (!this.el.object3D.visible) return;\n\n    const obj = this.el.object3D;\n    const target = this.data.target.object3D;\n\n    // Compute position + rotation by projecting offset along a downward ray in target space,\n    // and mask out Z rotation.\n    this._applyMaskedTargetRotation(\n      -this.data.angle * THREE.Math.DEG2RAD,\n      target.rotation.y,\n      0,\n      this.snappedXFormWorld\n    );\n\n    this.targetPos.copy(this.offset);\n    this.targetPos.applyMatrix4(this.snappedXFormWorld);\n\n    if (obj.parent) {\n      obj.parent.worldToLocal(this.targetPos);\n    }\n\n    if (!this.started) {\n      obj.position.copy(this.targetPos);\n      this.started = true;\n    } else {\n      const t = this.data.speed * dt;\n\n      obj.position.set(\n        obj.position.x + (this.targetPos.x - obj.position.x) * t,\n        obj.position.y + (this.targetPos.y - obj.position.y) * t,\n        obj.position.z + (this.targetPos.z - obj.position.z) * t\n      );\n    }\n\n    this.snappedXFormWorld.decompose(this.tempVector, obj.quaternion, this.tempVector);\n    obj.matrixNeedsUpdate = true;\n  },\n\n  _applyMaskedTargetRotation(x, y, z, to) {\n    const target = this.data.target.object3D;\n    this.snappedRot.set(x, y, z, target.rotation.order);\n    this.snappedQ.setFromEuler(this.snappedRot);\n\n    this.snappedXForm.compose(\n      target.position,\n      this.snappedQ,\n      target.scale\n    );\n\n    to.multiplyMatrices(target.parent.matrixWorld, this.snappedXForm);\n  }\n});\n","AFRAME.registerComponent(\"matrix-auto-update\", {\n  schema: {\n    target: { type: \"string\" }\n  },\n\n  init: function() {\n    this._updateMatrixAutoUpdate = this._updateMatrixAutoUpdate.bind(this);\n    this._updateMatrixAutoUpdate();\n  },\n\n  play: function() {\n    this.el.sceneEl.addEventListener(\"object3dset\", this._updateMatrixAutoUpdate);\n  },\n\n  pause: function() {\n    this.el.sceneEl.removeEventListener(\"object3dset\", this._updateMatrixAutoUpdate);\n  },\n\n  _updateMatrixAutoUpdate: function() {\n    if (this.data.target) {\n      this.el.getObject3D(this.data.target).matrixAutoUpdate = true;\n    } else {\n      this.el.object3D.matrixAutoUpdate = true;\n    }\n  }\n});\n","AFRAME.registerComponent(\"tweet-media-button\", {\n  init() {\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n    });\n\n    this.onClick = () => {\n      const hasDiscordBridges = window.APP.hubChannel && window.APP.hubChannel.discordBridges().length > 0;\n\n      const text = !hasDiscordBridges\n        ? `Taken in hubs.mozilla.com - join me now at hub.link/${window.APP.hubChannel.hubId}! `\n        : `Taken in hubs.mozilla.com `;\n\n      const { src, contentSubtype } = this.targetEl.components[\"media-loader\"].data;\n      this.el.sceneEl.emit(\"action_media_tweet\", { url: src, contentSubtype, text, el: this.targetEl });\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"hover-menu\", {\n  multiple: true,\n  schema: {\n    template: { type: \"selector\" },\n    dirs: { type: \"array\" },\n    dim: { default: true },\n    withPermission: { type: \"string\" }\n  },\n\n  async init() {\n    this.onFrozenStateChange = this.onFrozenStateChange.bind(this);\n    this.hovering = false;\n    await this.getHoverMenu();\n    this.applyHoverState();\n  },\n\n  getHoverMenu() {\n    if (this.menuPromise) return this.menuPromise;\n    return (this.menuPromise = new Promise(resolve => {\n      const menu = this.el.appendChild(document.importNode(this.data.template.content, true).children[0]);\n      // we have to wait a tick for the attach callbacks to get fired for the elements in a template\n      setTimeout(() => {\n        this.menu = menu;\n        this.el.setAttribute(\"position-at-box-shape-border\", {\n          target: \".hover-container\",\n          dirs: this.data.dirs,\n          animate: false,\n          scale: false\n        });\n        resolve(this.menu);\n      });\n    }));\n  },\n\n  onFrozenStateChange(e) {\n    if (!e.detail === \"frozen\") return;\n    this.applyHoverState();\n  },\n\n  applyHoverState() {\n    if (!this.menu) return;\n    const allowed = !this.data.withPermission || window.APP.hubChannel.canOrWillIfCreator(this.data.withPermission);\n    this.menu.object3D.visible = allowed && !this.el.sceneEl.is(\"frozen\") && this.hovering;\n    if (this.data.dim && this.el.object3DMap.mesh && this.el.object3DMap.mesh.material) {\n      this.el.object3DMap.mesh.material.color.setScalar(this.menu.object3D.visible ? 0.5 : 1);\n    }\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onFrozenStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onFrozenStateChange);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onFrozenStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onFrozenStateChange);\n  }\n});\n","AFRAME.registerComponent(\"disable-frustum-culling\", {\n  init() {\n    this.el.object3D.traverse(o => (o.frustumCulled = false));\n  }\n});\n","AFRAME.registerComponent(\"set-active-camera\", {\n  init() {\n    // This is a hack needed to set the active camera because sometimes A-Frame will create the default camera and set it to the active camera on startup because the query selector to find an existing camera in the scene fails.\n\n    const cameraSystem = this.el.sceneEl.systems.camera;\n    const currentActiveCamera = cameraSystem.activeCameraEl;\n\n    if (currentActiveCamera !== this.el) {\n      cameraSystem.setActiveCamera(this.el);\n\n      // Also A-Frame fails to delete the default camera :P\n      currentActiveCamera.parentNode.removeChild(currentActiveCamera);\n\n      // Look controls leaves behind this CSS class.\n      this.el.sceneEl.canvas.classList.remove(\"a-grab-cursor\");\n    }\n  }\n});\n","AFRAME.registerComponent(\"track-pose\", {\n  schema: {\n    path: { type: \"string\" }\n  },\n\n  tick() {\n    const matrix = AFRAME.scenes[0].systems.userinput.get(this.data.path);\n    if (matrix) {\n      const o = this.el.object3D;\n      o.matrix.copy(matrix);\n      o.matrix.decompose(o.position, o.quaternion, o.scale);\n      o.matrixIsModified = true;\n    }\n  }\n});\n","AFRAME.registerComponent(\"replay\", {\n  init: function() {\n    this.playhead = 0;\n    this.poseIndex = 0;\n  },\n\n  tick: function(t, dt) {\n    let overflow = false;\n    while (!overflow && this.playhead >= this.poses[this.poseIndex].timestamp) {\n      this.el.setAttribute(\"position\", this.poses[this.poseIndex].position);\n      this.el.setAttribute(\"rotation\", this.poses[this.poseIndex].rotation);\n      this.el.object3D.matrixNeedsUpdate = true;\n      this.poseIndex += 1;\n      overflow = this.poseIndex === this.poses.length;\n    }\n\n    this.playhead += dt;\n\n    if (overflow) {\n      this.playhead = 0;\n      this.poseIndex = 0;\n    }\n  }\n});\n","AFRAME.registerComponent(\"visibility-by-path\", {\n  schema: {\n    path: { type: \"string\" }\n  },\n  tick() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const shouldBeVisible = !!userinput.get(this.data.path);\n    if (this.el.object3D.visible !== shouldBeVisible) {\n      this.el.setAttribute(\"visible\", shouldBeVisible);\n    }\n  }\n});\n","AFRAME.registerComponent(\"tags\", {\n  schema: {\n    isHandCollisionTarget: { default: false },\n    isHoldable: { default: false },\n    offersHandConstraint: { default: false },\n    offersRemoteConstraint: { default: false },\n    singleActionButton: { default: false },\n    holdableButton: { default: false },\n    isPen: { default: false },\n    isHoverMenuChild: { default: false }\n  },\n  update() {\n    if (this.didUpdateOnce) {\n      console.warn(\"Do not edit tags with .setAttribute\");\n    }\n    this.didUpdateOnce = true;\n  }\n});\n","const isMobileVR = AFRAME.utils.device.isMobileVR();\n\n// Billboard component that only updates visible objects and only those in the camera view on mobile VR.\nAFRAME.registerComponent(\"billboard\", {\n  init: function() {\n    this.target = new THREE.Vector3();\n    this._updateBillboard = this._updateBillboard.bind(this);\n    this._updateIsInView = this._updateIsInView.bind(this);\n\n    if (isMobileVR) {\n      this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._updateIsInView, \"billboards\");\n    }\n  },\n  remove() {\n    if (isMobileVR) {\n      this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._updateIsInView, \"billboards\");\n    }\n  },\n\n  tick() {\n    if (this.isInView || !isMobileVR) {\n      this._updateBillboard();\n    }\n  },\n\n  _updateIsInView: (function() {\n    const frustum = new THREE.Frustum();\n    const frustumMatrix = new THREE.Matrix4();\n    const box = new THREE.Box3();\n    const boxTemp = new THREE.Box3();\n\n    const expandBox = o => {\n      if (o.geometry) {\n        o.updateMatrices();\n        o.geometry.computeBoundingBox();\n        boxTemp.copy(o.geometry.boundingBox).applyMatrix4(o.matrixWorld);\n        box.expandByPoint(boxTemp.min);\n        box.expandByPoint(boxTemp.max);\n      }\n    };\n\n    const isInViewOfCamera = (obj, screenCamera) => {\n      frustumMatrix.multiplyMatrices(screenCamera.projectionMatrix, screenCamera.matrixWorldInverse);\n      frustum.setFromMatrix(frustumMatrix);\n      box.makeEmpty();\n      obj.traverse(expandBox);\n\n      // NOTE: not using box.setFromObject here because text nodes do not have Z values in their geometry buffer,\n      // and that routine ultimately assumes they do.\n      return frustum.intersectsBox(box);\n    };\n\n    return function() {\n      if (!this.el.object3D.visible) {\n        this.isInView = false;\n        return;\n      }\n\n      if (!this.playerCamera) {\n        this.playerCamera = document.querySelector(\"#player-camera\").getObject3D(\"camera\");\n      }\n\n      if (!this.playerCamera) return;\n\n      this.isInView = isInViewOfCamera(this.el.object3D, this.playerCamera);\n    };\n  })(),\n\n  _updateBillboard: function() {\n    if (!this.el.object3D.visible) return;\n\n    const camera = this.el.sceneEl.camera;\n    const object3D = this.el.object3D;\n\n    if (camera) {\n      // Set the camera world position as the target.\n      this.target.setFromMatrixPosition(camera.matrixWorld);\n      object3D.lookAt(this.target);\n      object3D.matrixNeedsUpdate = true;\n    }\n  }\n});\n","const SYNC_DURATION_MS = 5000;\n\n// HACK this is a hacky component that is used to mitigate the situation where a first sync is missed on critical\n// networked elements. (At the time of this writing, specifically just the user's avatar.) The motivation\n// is that there have been a variety of issues resulting in missed avatar instantiation messages, and\n// this is meant to ensure we recover from those in the cases where they occur.\n//\n// This component, when added, will re-send a isFirstSync message for the networked object is it attached to\n// every SYNC_DURATION_MS milliseconds.\nAFRAME.registerComponent(\"periodic-full-syncs\", {\n  init() {\n    this.lastSync = 0;\n  },\n\n  tick() {\n    const now = performance.now();\n\n    if (now - this.lastSync >= SYNC_DURATION_MS && this.el.components && this.el.components.networked) {\n      this.lastSync = now;\n\n      // Sends an undirected first sync message.\n      this.el.components.networked.syncAll(null, true);\n    }\n  }\n});\n","import { forEachMaterial } from \"../utils/material-utils\";\nimport { showHoverEffect } from \"../utils/permissions-utils\";\n\nconst interactorOneTransform = [];\nconst interactorTwoTransform = [];\n\nexport const validMaterials = [\"MeshStandardMaterial\", \"MeshBasicMaterial\", \"MobileStandardMaterial\"];\n/**\n * Applies effects to a hoverable based on hover state.\n * @namespace interactables\n * @component hoverable-visuals\n */\nAFRAME.registerComponent(\"hoverable-visuals\", {\n  schema: {\n    enableSweepingEffect: { type: \"boolean\", default: true }\n  },\n  init() {\n    // uniforms and boundingSphere are set from the component responsible for loading the mesh.\n    this.uniforms = null;\n    this.boundingSphere = new THREE.Sphere();\n\n    this.sweepParams = [0, 0];\n  },\n  remove() {\n    this.uniforms = null;\n    this.boundingBox = null;\n\n    // Used when the object is batched\n    const batchManagerSystem = AFRAME.scenes[0].systems[\"hubs-systems\"].batchManagerSystem;\n    this.el.object3D.traverse(object => {\n      if (!object.material) return;\n      forEachMaterial(object, material => {\n        if (\n          !validMaterials.includes(material.type) ||\n          object.el.classList.contains(\"ui\") ||\n          object.el.classList.contains(\"hud\") ||\n          object.el.getAttribute(\"text-button\")\n        )\n          return;\n\n        batchManagerSystem.meshToEl.delete(object);\n      });\n    });\n  },\n  tick(time) {\n    if (!this.uniforms || !this.uniforms.length) return;\n\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n    const showEffect = showHoverEffect(this.el);\n\n    let interactorOne, interactorTwo;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    if (interaction.state.leftHand.hovered === this.el || interaction.state.leftHand.held === this.el) {\n      interactorOne = interaction.options.leftHand.entity.object3D;\n    }\n    if (interaction.state.rightRemote.hovered === this.el || interaction.state.rightRemote.held === this.el) {\n      interactorTwo = interaction.options.rightRemote.entity.object3D;\n    }\n    if (interaction.state.rightHand.hovered === this.el || interaction.state.rightHand.held === this.el) {\n      interactorTwo = interaction.options.rightHand.entity.object3D;\n    }\n\n    if (interactorOne) {\n      interactorOne.matrixWorld.toArray(interactorOneTransform);\n    }\n    if (interactorTwo) {\n      interactorTwo.matrixWorld.toArray(interactorTwoTransform);\n    }\n\n    if (interactorOne || interactorTwo || isFrozen) {\n      const worldY = this.el.object3D.matrixWorld.elements[13];\n      const scaledRadius = this.el.object3D.scale.y * this.boundingSphere.radius;\n      this.sweepParams[0] = worldY - scaledRadius;\n      this.sweepParams[1] = worldY + scaledRadius;\n    }\n\n    for (let i = 0, l = this.uniforms.length; i < l; i++) {\n      const uniform = this.uniforms[i];\n      uniform.hubs_EnableSweepingEffect.value = this.data.enableSweepingEffect && showEffect;\n      uniform.hubs_IsFrozen.value = isFrozen;\n      uniform.hubs_SweepParams.value = this.sweepParams;\n\n      uniform.hubs_HighlightInteractorOne.value = !!interactorOne && showEffect;\n      uniform.hubs_InteractorOnePos.value[0] = interactorOneTransform[12];\n      uniform.hubs_InteractorOnePos.value[1] = interactorOneTransform[13];\n      uniform.hubs_InteractorOnePos.value[2] = interactorOneTransform[14];\n\n      uniform.hubs_HighlightInteractorTwo.value = !!interactorTwo && showEffect;\n      uniform.hubs_InteractorTwoPos.value[0] = interactorTwoTransform[12];\n      uniform.hubs_InteractorTwoPos.value[1] = interactorTwoTransform[13];\n      uniform.hubs_InteractorTwoPos.value[2] = interactorTwoTransform[14];\n\n      if (interactorOne || interactorTwo || isFrozen) {\n        uniform.hubs_Time.value = time;\n      }\n    }\n  }\n});\n","// Given a function and a queue name, schedules things so a single function\n// from a given queue will be called per frame.\nAFRAME.registerSystem(\"frame-scheduler\", {\n  init() {\n    // Registry a map from queue name to list of registered functions.\n    this.registry = new Map();\n    this.queues = [];\n    this.frameIndex = 0;\n  },\n\n  schedule(func, queue) {\n    if (!this.registry.has(queue)) {\n      this.queues.push(queue);\n      this.registry.set(queue, []);\n    }\n\n    this.registry.get(queue).push(func);\n  },\n\n  unschedule(func) {\n    for (let i = 0; i < this.queues.length; i++) {\n      const queue = this.queues[i];\n      const entries = this.registry.get(queue);\n      const idx = entries.indexOf(func);\n\n      if (idx >= 0) {\n        entries.splice(idx, 1);\n      }\n    }\n  },\n\n  tick: function() {\n    for (let i = 0; i < this.queues.length; i++) {\n      const queue = this.queues[i];\n      const entries = this.registry.get(queue);\n      if (entries.length === 0) continue;\n\n      entries[this.frameIndex % entries.length]();\n    }\n\n    this.frameIndex++;\n  }\n});\n","/* global AFRAME */\n\n/**\n * Toggle visibility of an entity based on if the user is in vr mode or not\n * @namespace vr-mode\n * @component vr-mode-toggle-visibility\n */\nAFRAME.registerComponent(\"vr-mode-toggle-visibility\", {\n  schema: {\n    invert: { type: \"boolean\", default: false }\n  },\n\n  init() {\n    this.updateComponentState = this.updateComponentState.bind(this);\n  },\n\n  play() {\n    this.updateComponentState();\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  updateComponentState() {\n    const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n    this.el.setAttribute(\"visible\", inVRMode !== this.data.invert);\n  }\n});\n\n/**\n * Toggle the isPlaying state of a component based on app mode\n * @namespace vr-mode\n * @component vr-mode-toggle-playing\n */\nAFRAME.registerComponent(\"vr-mode-toggle-playing\", {\n  multiple: true,\n  schema: {\n    invert: { type: \"boolean\", default: false }\n  },\n\n  init() {\n    this.updateComponentState = this.updateComponentState.bind(this);\n  },\n\n  play() {\n    this.updateComponentState();\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  updateComponentState() {\n    const componentName = this.id;\n    const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n    this.el.components[componentName][inVRMode !== this.data.invert ? \"play\" : \"pause\"]();\n  }\n});\n\n/**\n * Toggle a CSS class based upon app mode.\n * @namespace vr-mode\n * @component vr-mode-toggle-class\n */\nAFRAME.registerComponent(\"vr-mode-toggle-class\", {\n  multiple: true,\n  schema: {\n    invert: { type: \"boolean\", default: false },\n    class: { type: \"string\", default: \"\" }\n  },\n\n  init() {\n    this.updateComponentState = this.updateComponentState.bind(this);\n  },\n\n  play() {\n    this.updateComponentState();\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  updateComponentState() {\n    const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n\n    if (inVRMode) {\n      this.el.classList.add(this.data.class);\n    } else {\n      this.el.classList.remove(this.data.class);\n    }\n  }\n});\n","AFRAME.registerSystem(\"permissions\", {\n  onPermissionsUpdated(handler) {\n    if (window.APP.hubChannel) {\n      window.APP.hubChannel.addEventListener(\"permissions_updated\", handler);\n    } else {\n      window.addEventListener(\n        \"hub_channel_ready\",\n        () => window.APP.hubChannel.addEventListener(\"permissions_updated\", handler),\n        { once: true }\n      );\n    }\n  },\n  can(permissionName) {\n    return !!window.APP.hubChannel.can(permissionName);\n  },\n  canOrWillIfCreator(permissionName) {\n    return !!window.APP.hubChannel.canOrWillIfCreator(permissionName);\n  },\n  fetchPermissions() {\n    return window.APP.hubChannel.fetchPermissions();\n  }\n});\n","/**\n * Emits an \"exit\" event when a user has stopped using the app for a certain period of time\n * @system exit-on-blur\n */\nAFRAME.registerSystem(\"exit-on-blur\", {\n  init() {\n    this.onBlur = this.onBlur.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onTimeout = this.onTimeout.bind(this);\n    this.onEnterVR = this.onEnterVR.bind(this);\n\n    this.isOculusBrowser = navigator.userAgent.match(/Oculus/);\n    this.enteredVR = false;\n\n    window.addEventListener(\"blur\", this.onBlur);\n    window.addEventListener(\"focus\", this.onFocus);\n    this.el.addEventListener(\"enter-vr\", this.onEnterVR);\n\n    this.lastTimeoutCheck = 0;\n    this.exitTimeout = null;\n  },\n\n  tick(t) {\n    // This is a hack to detect when an Oculus Go user has taken off the headset and the headset has\n    // entered standby mode. Currently Oculus Browser is not emitting a blur, vrdisplaydeactivate,\n    // vrdisplayblur, visibilitychange, or vrdisplaypresentchange event, so we wait 15 seconds after\n    // the last requestAnimationFrame callback to determine if the headset has gone into standby mode.\n    // We also check that you have entered VR so that this timeout does not occur in the setup UI.\n    if (\n      this.isOculusBrowser &&\n      this.enteredVR &&\n      (this.lastTimeoutCheck === 0 || t - this.lastTimeoutCheck >= 1000.0) // Don't do this clear every frame, slow.\n    ) {\n      this.lastTimeoutCheck = t;\n      clearTimeout(this.exitTimeout);\n      this.exitTimeout = setTimeout(this.onTimeout, 15 * 1000);\n    }\n  },\n\n  onEnterVR() {\n    this.enteredVR = true;\n  },\n\n  onBlur() {\n    if (this.el.isMobile) {\n      clearTimeout(this.exitTimeout);\n      this.exitTimeout = setTimeout(this.onTimeout, 30 * 1000);\n    }\n  },\n\n  onFocus() {\n    if (this.el.isMobile) {\n      clearTimeout(this.exitTimeout);\n    }\n  },\n\n  onTimeout() {\n    this.el.dispatchEvent(new CustomEvent(\"exit\"));\n  },\n\n  remove() {\n    clearTimeout(this.exitTimeout);\n    window.removeEventListener(\"blur\", this.onBlur);\n  }\n});\n","// Used for tracking and managing camera tools in the scene\n\nconst CAMERA_UPDATE_FRAME_DELAY = 10; // Update one camera every N'th frame\n\nAFRAME.registerSystem(\"camera-tools\", {\n  init() {\n    this.cameraEls = [];\n    this.cameraUpdateCount = 0;\n    this.ticks = 0;\n  },\n\n  register(el) {\n    this.cameraEls.push(el);\n    el.addEventListener(\"ownership-changed\", this._onOwnershipChange);\n    delete this.myCamera;\n  },\n\n  deregister(el) {\n    this.cameraEls = this.cameraEls.filter(c => c !== el);\n    el.removeEventListener(\"ownership-changed\", this._onOwnershipChange);\n    delete this.myCamera;\n  },\n\n  avatarUpdated() {\n    this.cameraEls.forEach(el => delete el.components[\"camera-tool\"].onAvatarUpdated());\n  },\n\n  getMyCamera() {\n    if (this.myCamera !== undefined) return this.myCamera;\n    this.myCamera = this.cameraEls.find(NAF.utils.isMine) || null;\n    return this.myCamera;\n  },\n\n  _onOwnershipChange() {\n    this.myCamera = null;\n  },\n\n  tick() {\n    this.ticks++;\n\n    // We update at most one camera viewfinder per frame.\n    if (this.ticks % CAMERA_UPDATE_FRAME_DELAY === 0) {\n      if (this.cameraEls.length == 0) return;\n\n      this.cameraUpdateCount++;\n      this.cameraEls[this.cameraUpdateCount % this.cameraEls.length].components[\"camera-tool\"].updateViewfinder();\n    }\n  }\n});\n","module.exports = {\n  COLLISION_LAYERS: {\n    ALL: -1,\n    NONE: 0,\n    INTERACTABLES: 1,\n    ENVIRONMENT: 2,\n    AVATAR: 4,\n    HANDS: 8,\n    DEFAULT_INTERACTABLE: 1 | 2 | 4 | 8,\n    UNOWNED_INTERACTABLE: 1 | 8,\n    DEFAULT_SPAWNER: 1 | 8\n  }\n};\n","/* global AFRAME NAF performance */\nAFRAME.registerComponent(\"owned-object-limiter\", {\n  schema: {\n    counter: { type: \"selector\" }\n  },\n\n  init() {\n    this.counter = this.data.counter.components[\"networked-counter\"];\n  },\n\n  tick() {\n    this._syncCounterRegistration();\n    const isHeld = this.el.sceneEl.systems.interaction.isHeld(this.el);\n    if (!isHeld && this.wasHeld && this.counter.timestamps.has(this.el)) {\n      this.counter.timestamps.set(this.el, performance.now());\n    }\n    this.wasHeld = isHeld;\n  },\n\n  remove() {\n    this.counter.deregister(this.el);\n  },\n\n  _syncCounterRegistration() {\n    if (!this.el.components[\"networked\"]) return;\n\n    const isPinned = this.el.components[\"pinnable\"] && this.el.components[\"pinnable\"].data.pinned;\n\n    if (NAF.utils.isMine(this.el) && !isPinned) {\n      this.counter.register(this.el);\n    } else {\n      this.counter.deregister(this.el);\n    }\n  }\n});\n","/* global NAF */\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nAFRAME.registerComponent(\"set-unowned-body-kinematic\", {\n  init() {\n    this.setBodyKinematic = this.setBodyKinematic.bind(this);\n  },\n  play() {\n    this.el.addEventListener(\"ownership-lost\", this.setBodyKinematic);\n\n    if (!this.didThisOnce) {\n      // Do this in play instead of init so that the ammo-body and networked components are done\n      this.didThisOnce = true;\n\n      if (!NAF.utils.isMine(this.el)) {\n        this.setBodyKinematic();\n      }\n    }\n  },\n  pause() {\n    this.el.removeEventListener(\"ownership-lost\", this.setBodyKinematic);\n  },\n  setBodyKinematic() {\n    this.el.setAttribute(\"ammo-body\", {\n      type: \"kinematic\",\n      collisionFilterMask: COLLISION_LAYERS.UNOWNED_INTERACTABLE\n    });\n    if (this.el.components[\"floaty-object\"]) {\n      this.el.components[\"floaty-object\"].locked = true;\n    }\n  }\n});\n","/* global AFRAME performance */\n/**\n * Limits networked interactables to a maximum number at any given time\n * @namespace network\n * @component networked-counter\n */\nAFRAME.registerComponent(\"networked-counter\", {\n  schema: {\n    max: { default: 3 }\n  },\n\n  init() {\n    this.timestamps = new Map();\n    this.el.object3D.visible = false;\n  },\n\n  remove() {\n    this.timestamps.clear();\n  },\n\n  count() {\n    return this.timestamps.size;\n  },\n\n  register(el) {\n    if (this.data.max <= 0 || this.timestamps.has(el)) return;\n\n    this.timestamps.set(el, performance.now());\n    if (this.timestamps.size > this.data.max) {\n      this._destroyOldest();\n    }\n  },\n\n  deregister(el) {\n    if (!this.timestamps.has(el)) return;\n    this.timestamps.delete(el);\n  },\n\n  _destroyOldest() {\n    const interaction = this.el.sceneEl.systems.interaction;\n    let oldestEl = null,\n      minTs = Number.MAX_VALUE;\n    this.timestamps.forEach((ts, el) => {\n      if (ts < minTs && !interaction.isHeld(el) && NAF.utils.isMine(el)) {\n        oldestEl = el;\n        minTs = ts;\n      }\n    });\n    this._destroy(oldestEl);\n  },\n\n  _destroy(el) {\n    // Pause the entity so that it won't just re-register itself immediately in owned-object-limiter.\n    el.pause();\n    // networked-interactable's remove will also call deregister, but it will happen async so we do it here as well.\n    this.deregister(el);\n    el.parentNode.removeChild(el);\n  }\n});\n","AFRAME.registerComponent(\"set-yxz-order\", {\n  init: function() {\n    this.el.object3D.rotation.order = \"YXZ\";\n  }\n});\n","/**\n * Initializes teleporters when the environment bundle has loaded.\n * @namespace environment\n * @component nav-mesh-helper\n */\nAFRAME.registerComponent(\"nav-mesh-helper\", {\n  init: function() {\n    this.el.addEventListener(\"model-loaded\", () => {\n      const teleporters = document.querySelectorAll(\"[teleporter]\");\n      for (let i = 0; i < teleporters.length; i++) {\n        teleporters[i].components[\"teleporter\"].queryCollisionEntities();\n      }\n    });\n  }\n});\n","/**\n * Drawing Manager\n * Manages what networked-drawings are available to pen components\n * @namespace drawing\n * @component drawing-manager\n */\nAFRAME.registerComponent(\"drawing-manager\", {\n  init() {\n    this._onComponentInitialized = this._onComponentInitialized.bind(this);\n\n    this.el.object3D.visible = false;\n    this.drawingToPen = new Map();\n  },\n\n  remove() {\n    if (this.drawingEl) {\n      this.drawingEl.removeEventListener(\"componentinitialized\", this._onComponentInitialized);\n    }\n  },\n\n  _onComponentInitialized(e) {\n    if (e.detail.name == \"networked-drawing\") {\n      this.drawing = this.drawingEl.components[\"networked-drawing\"];\n    }\n  },\n\n  createDrawing() {\n    if (!this.drawingEl) {\n      this.drawingEl = document.createElement(\"a-entity\");\n      this.drawingEl.setAttribute(\"networked\", \"template: #interactable-drawing\");\n      this.el.sceneEl.appendChild(this.drawingEl);\n\n      this.drawingEl.addEventListener(\"componentinitialized\", this._onComponentInitialized);\n    }\n  },\n\n  getDrawing(pen) {\n    //TODO: future handling of multiple drawings\n    if (this.drawing && (!this.drawingToPen.has(this.drawing) || this.drawingToPen.get(this.drawing) === pen)) {\n      this.drawingToPen.set(this.drawing, pen);\n      return this.drawing;\n    }\n\n    return null;\n  },\n\n  returnDrawing(pen) {\n    if (this.drawingToPen.has(this.drawing) && this.drawingToPen.get(this.drawing) === pen) {\n      this.drawingToPen.delete(this.drawing);\n    }\n  }\n});\n","export const paths = {};\npaths.noop = \"/noop\";\npaths.actions = {};\npaths.actions.log = \"/actions/log\";\npaths.actions.toggleScreenShare = \"/actions/toggleScreenShare\";\npaths.actions.snapRotateLeft = \"/actions/snapRotateLeft\";\npaths.actions.snapRotateRight = \"/actions/snapRotateRight\";\npaths.actions.angularVelocity = \"/actions/angularVelocity\";\npaths.actions.logDebugFrame = \"/actions/logDebugFrame\";\npaths.actions.logInteractionState = \"/actions/logInteractionState\";\npaths.actions.cameraDelta = \"/actions/cameraDelta\";\npaths.actions.lobbyCameraDelta = \"/actions/lobbyCameraDelta\";\npaths.actions.characterAcceleration = \"/actions/characterAcceleration\";\npaths.actions.boost = \"/actions/boost\";\npaths.actions.startGazeTeleport = \"/actions/startTeleport\";\npaths.actions.stopGazeTeleport = \"/actions/stopTeleport\";\npaths.actions.spawnPen = \"/actions/spawnPen\";\npaths.actions.ensureFrozen = \"/actions/ensureFrozen\";\npaths.actions.toggleFreeze = \"/actions/toggleFreeze\";\npaths.actions.thaw = \"/actions/thaw\";\npaths.actions.muteMic = \"/actions/muteMic\";\npaths.actions.toggleFlying = \"/actions/toggleFlying\";\npaths.actions.focusChat = \"/actions/focusChat\";\npaths.actions.focusChatCommand = \"/actions/focusChatCommand\";\npaths.actions.toggleCamera = \"/actions/toggleCamera\";\npaths.actions.takeSnapshot = \"/actions/takeSnapshot\";\npaths.actions.mediaExit = \"/actions/mediaExit\";\npaths.actions.mediaSearch1 = \"/actions/mediaSearch1\";\npaths.actions.mediaSearch2 = \"/actions/mediaSearch2\";\npaths.actions.mediaSearch3 = \"/actions/mediaSearch3\";\npaths.actions.mediaSearch4 = \"/actions/mediaSearch4\";\npaths.actions.mediaSearch5 = \"/actions/mediaSearch5\";\npaths.actions.mediaSearch6 = \"/actions/mediaSearch6\";\npaths.actions.mediaSearch7 = \"/actions/mediaSearch7\";\npaths.actions.mediaSearch8 = \"/actions/mediaSearch8\";\npaths.actions.transformModifier = \"/actions/transformModifier\";\npaths.actions.rayObjectRotation = \"/actions/rayObjectRotation\";\npaths.actions.cursor = {};\npaths.actions.cursor.pose = \"/actions/cursorPose\";\npaths.actions.cursor.hideLine = \"/actions/cursorHideLine\";\npaths.actions.cursor.grab = \"/actions/cursorGrab\";\npaths.actions.cursor.drop = \"/actions/cursorDrop\";\npaths.actions.cursor.modDelta = \"/actions/cursorModDelta\";\npaths.actions.cursor.startDrawing = \"/actions/cursorStartDrawing\";\npaths.actions.cursor.stopDrawing = \"/actions/cursorStopDrawing\";\npaths.actions.cursor.undoDrawing = \"/actions/cursorUndoDrawing\";\npaths.actions.cursor.penNextColor = \"/actions/cursorPenNextColor\";\npaths.actions.cursor.penPrevColor = \"/actions/cursorPenPrevColor\";\npaths.actions.cursor.scalePenTip = \"/actions/cursorScalePenTip\";\npaths.actions.cursor.scaleGrabbedGrabbable = \"/actions/cursorScaleGrabbedGrabbable\";\npaths.actions.cursor.mediaVolumeMod = \"/actions/cursor/mediaVolumeMod\";\npaths.actions.cursor.takeSnapshot = \"/actions/cursorTakeSnapshot\";\npaths.actions.pen = {};\npaths.actions.pen.remove = \"/actions/pen/remove\";\npaths.actions.rightHand = {};\npaths.actions.rightHand.matrix = \"/actions/rightHand/matrix\";\npaths.actions.rightHand.pose = \"/actions/rightHandPose\";\npaths.actions.rightHand.grab = \"/actions/rightHandGrab\";\npaths.actions.rightHand.drop = \"/actions/rightHandDrop\";\npaths.actions.rightHand.modDelta = \"/actions/rightHandModDelta\";\npaths.actions.rightHand.startDrawing = \"/actions/rightHandStartDrawing\";\npaths.actions.rightHand.stopDrawing = \"/actions/rightHandStopDrawing\";\npaths.actions.rightHand.undoDrawing = \"/actions/rightHandUndoDrawing\";\npaths.actions.rightHand.switchDrawMode = \"/actions/rightHandSwitchDrawMode\";\npaths.actions.rightHand.penNextColor = \"/actions/rightHandPenNextColor\";\npaths.actions.rightHand.penPrevColor = \"/actions/rightHandPenPrevColor\";\npaths.actions.rightHand.scalePenTip = \"/actions/rightHandScalePenTip\";\npaths.actions.rightHand.startTeleport = \"/actions/rightHand/startTeleport\";\npaths.actions.rightHand.stopTeleport = \"/actions/rightHand/stopTeleport\";\npaths.actions.rightHand.takeSnapshot = \"/actions/rightHandTakeSnapshot\";\npaths.actions.rightHand.thumb = \"/actions/rightHand/thumbDown\";\npaths.actions.rightHand.index = \"/actions/rightHand/indexDown\";\npaths.actions.rightHand.middleRingPinky = \"/actions/rightHand/middleRingPinkyDown\";\npaths.actions.leftHand = {};\npaths.actions.leftHand.matrix = \"/actions/leftHand/matrix\";\npaths.actions.leftHand.pose = \"/actions/leftHandPose\";\npaths.actions.leftHand.grab = \"/actions/leftHandGrab\";\npaths.actions.leftHand.drop = \"/actions/leftHandDrop\";\npaths.actions.leftHand.modDelta = \"/actions/leftHandModDelta\";\npaths.actions.leftHand.startDrawing = \"/actions/leftHandStartDrawing\";\npaths.actions.leftHand.stopDrawing = \"/actions/leftHandStopDrawing\";\npaths.actions.leftHand.undoDrawing = \"/actions/leftHandUndoDrawing\";\npaths.actions.leftHand.switchDrawMode = \"/actions/leftHandSwitchDrawMode\";\npaths.actions.leftHand.penNextColor = \"/actions/leftHandPenNextColor\";\npaths.actions.leftHand.penPrevColor = \"/actions/leftHandPenPrevColor\";\npaths.actions.leftHand.scalePenTip = \"/actions/leftHandScalePenTip\";\npaths.actions.leftHand.startTeleport = \"/actions/leftHand/startTeleport\";\npaths.actions.leftHand.stopTeleport = \"/actions/leftHand/stopTeleport\";\npaths.actions.leftHand.takeSnapshot = \"/actions/leftHandTakeSnapshot\";\npaths.actions.leftHand.thumb = \"/actions/leftHand/thumbDown\";\npaths.actions.leftHand.index = \"/actions/leftHand/indexDown\";\npaths.actions.leftHand.middleRingPinky = \"/actions/leftHand/middleRingPinkyDown\";\npaths.actions.camera = {};\npaths.actions.camera.exitMirror = \"/actions/cameraExitMirror\";\npaths.haptics = {};\npaths.haptics.actuators = {};\npaths.haptics.actuators.left = \"/haptics/actuators/left\";\npaths.haptics.actuators.right = \"/haptics/actuators/right\";\n\npaths.device = {};\npaths.device.mouse = {};\npaths.device.mouse.coords = \"/device/mouse/coords\";\npaths.device.mouse.movementXY = \"/device/mouse/movementXY\";\npaths.device.mouse.buttonLeft = \"/device/mouse/buttonLeft\";\npaths.device.mouse.buttonRight = \"/device/mouse/buttonRight\";\npaths.device.mouse.wheel = \"/device/mouse/wheel\";\npaths.device.smartMouse = {};\npaths.device.smartMouse.cursorPose = \"/device/smartMouse/cursorPose\";\npaths.device.smartMouse.cameraDelta = \"/device/smartMouse/cameraDelta\";\npaths.device.touchscreen = {};\npaths.device.touchscreen.cursorPose = \"/device/touchscreen/cursorPose\";\npaths.device.touchscreen.touchCameraDelta = \"/device/touchscreen/touchCameraDelta\";\npaths.device.touchscreen.gyroCameraDelta = \"/device/touchscreen/gyroCameraDelta\";\npaths.device.touchscreen.cameraDelta = \"/device/touchscreen/cameraDelta\";\npaths.device.touchscreen.pinch = {};\npaths.device.touchscreen.pinch.delta = \"/device/touchscreen/pinch/delta\";\npaths.device.touchscreen.pinch.initialDistance = \"/device/touchscreen/pinch/initialDistance\";\npaths.device.touchscreen.pinch.currentDistance = \"/device/touchscreen/pinch/currentDistance\";\npaths.device.touchscreen.isTouching = \"/device/touchscreen/isTouching\";\npaths.device.touchscreen.isTouchingGrabbable = \"/device/touchscreen/isTouchingGrabbable\";\npaths.device.touchscreen.tap1 = \"/device/touchscreen/tap1\";\npaths.device.touchscreen.tap2 = \"/device/touchscreen/tap2\";\npaths.device.touchscreen.tap3 = \"/device/touchscreen/tap3\";\npaths.device.touchscreen.tap4 = \"/device/touchscreen/tap4\";\npaths.device.touchscreen.tap5 = \"/device/touchscreen/tap5\";\npaths.device.gyro = {};\npaths.device.gyro.averageDeltaX = \"/device/gyro/averageDeltaX\";\npaths.device.gyro.averageDeltaY = \"/device/gyro/averageDeltaY\";\npaths.device.hud = {};\npaths.device.hud.penButton = \"/device/hud/penButton\";\n\npaths.device.keyboard = {\n  map: new Map(),\n  key: function(k) {\n    let path = this.map.get(k);\n    if (path) {\n      return path;\n    }\n    path = `/device/keyboard/${k.toLowerCase()}`;\n    this.map.set(k, path);\n    return path;\n  }\n};\n\npaths.device.gamepad = gamepadIndex => ({\n  button: buttonIndex => ({\n    pressed: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/pressed`,\n    touched: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/touched`,\n    value: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/value`\n  }),\n  axis: axisIndex => `/device/gamepad/${gamepadIndex}/axis/${axisIndex}`\n});\n\nconst xbox = \"/device/xbox/\";\npaths.device.xbox = {\n  v: name => `/vars/xbox/${name}`,\n  button: buttonName => ({\n    pressed: `${xbox}button/${buttonName}/pressed`,\n    touched: `${xbox}button/${buttonName}/touched`,\n    value: `${xbox}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${xbox}axis/${axisName}`;\n  },\n  axesSum: `${xbox}axis/sum`\n};\n\npaths.device.oculusgo = {\n  // TODO remove these in favor of the direct accessors\n  button: buttonName => ({\n    pressed: `/device/oculusgo/button/${buttonName}/pressed`,\n    touched: `/device/oculusgo/button/${buttonName}/touched`,\n    value: `/device/oculusgo/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/oculusgo/axis/${axisName}`;\n  },\n  //\n  trigger: {\n    pressed: \"/device/oculusgo/button/trigger/pressed\",\n    touched: \"/device/oculusgo/button/trigger/touched\",\n    value: \"/device/oculusgo/button/trigger/value\"\n  },\n  touchpad: {\n    pressed: \"/device/oculusgo/button/touchpad/pressed\",\n    touched: \"/device/oculusgo/button/touchpad/touched\",\n    value: \"/device/oculusgo/button/touchpad/value\",\n    axisX: \"/device/oculusgo/axis/touchpadX\",\n    axisY: \"/device/oculusgo/axis/touchpadY\"\n  },\n  pose: \"/device/oculusgo/pose\",\n  matrix: \"/device/oculusgo/matrix\",\n  v: name => {\n    return `/vars/oculusgo/${name}`;\n  }\n};\n\nconst gearVRController = \"/device/gearVRController/\";\npaths.device.gearVRController = {\n  button: buttonName => ({\n    pressed: `${gearVRController}button/${buttonName}/pressed`,\n    touched: `${gearVRController}button/${buttonName}/touched`,\n    value: `${gearVRController}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${gearVRController}axis/${axisName}`;\n  },\n  pose: `${gearVRController}pose`,\n  matrix: `${gearVRController}matrix`,\n  v: name => {\n    return `/vars/gearVRController/${name}`;\n  }\n};\n\nconst daydream = \"/device/daydream/\";\npaths.device.daydream = {\n  button: buttonName => ({\n    pressed: `${daydream}button/${buttonName}/pressed`,\n    touched: `${daydream}button/${buttonName}/touched`,\n    value: `${daydream}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${daydream}axis/${axisName}`;\n  },\n  pose: `${daydream}pose`,\n  matrix: `${daydream}matrix`\n};\n\nconst rightOculusTouch = \"/device/rightOculusTouch/\";\npaths.device.rightOculusTouch = {\n  button: buttonName => ({\n    pressed: `${rightOculusTouch}button/${buttonName}/pressed`,\n    touched: `${rightOculusTouch}button/${buttonName}/touched`,\n    value: `${rightOculusTouch}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${rightOculusTouch}axis/${axisName}`;\n  },\n  axesSum: `${rightOculusTouch}axis/sum`,\n  pose: `${rightOculusTouch}pose`,\n  matrix: `${rightOculusTouch}matrix`\n};\n\nconst leftOculusTouch = \"/device/leftOculusTouch/\";\npaths.device.leftOculusTouch = {\n  button: buttonName => ({\n    pressed: `${leftOculusTouch}button/${buttonName}/pressed`,\n    touched: `${leftOculusTouch}button/${buttonName}/touched`,\n    value: `${leftOculusTouch}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${leftOculusTouch}axis/${axisName}`;\n  },\n  axesSum: `${leftOculusTouch}axis/sum`,\n  pose: `${leftOculusTouch}pose`,\n  matrix: `${leftOculusTouch}matrix`\n};\n\npaths.device.vive = {};\npaths.device.vive.left = {\n  button: buttonName => ({\n    pressed: `/device/vive/left/button/${buttonName}/pressed`,\n    touched: `/device/vive/left/button/${buttonName}/touched`,\n    value: `/device/vive/left/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/vive/left/axis/${axisName}`;\n  },\n  axesSum: \"/device/vive/left/axis/sum\",\n  pose: `/device/vive/left/pose`,\n  matrix: `/device/vive/left/matrix`\n};\npaths.device.vive.right = {\n  button: buttonName => ({\n    pressed: `/device/vive/right/button/${buttonName}/pressed`,\n    touched: `/device/vive/right/button/${buttonName}/touched`,\n    value: `/device/vive/right/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/vive/right/axis/${axisName}`;\n  },\n  axesSum: \"/device/vive/right/axis/sum\",\n  pose: `/device/vive/right/pose`,\n  matrix: `/device/vive/right/matrix`\n};\n\nfunction button(device, side, name) {\n  return {\n    pressed: `${device}${side}/button/${name}/pressed`,\n    touched: `${device}${side}/button/${name}/touched`,\n    value: `${device}${side}/button/${name}/value`\n  };\n}\n\nfunction axes(device, side, name) {\n  return {\n    axisX: `${device}${side}/axis/${name}X`,\n    axisY: `${device}${side}/axis/${name}Y`\n  };\n}\n\nfunction wmrController(side) {\n  const wmr = \"/device/wmr/\";\n  return {\n    touchpad: {\n      ...button(wmr, side, \"touchpad\"),\n      ...axes(wmr, side, \"touchpad\")\n    },\n    trigger: button(wmr, side, \"trigger\"),\n    grip: button(wmr, side, \"grip\"),\n    menu: button(wmr, side, \"menu\"),\n    joystick: axes(wmr, side, \"joystick\"),\n    pose: `${wmr}${side}/pose`,\n    matrix: `${wmr}${side}/matrix`\n  };\n}\npaths.device.wmr = {};\npaths.device.wmr.v = name => `/vars/wmr/${name}`;\npaths.device.wmr.k = name => `/vars/wmr/keyboard/${name}`;\npaths.device.wmr.left = wmrController(\"left\");\npaths.device.wmr.right = wmrController(\"right\");\n","import { forEachMaterial } from \"../utils/material-utils\";\nimport cubeMapPosX from \"../assets/images/cubemap/posx.jpg\";\nimport cubeMapNegX from \"../assets/images/cubemap/negx.jpg\";\nimport cubeMapPosY from \"../assets/images/cubemap/posy.jpg\";\nimport cubeMapNegY from \"../assets/images/cubemap/negy.jpg\";\nimport cubeMapPosZ from \"../assets/images/cubemap/posz.jpg\";\nimport cubeMapNegZ from \"../assets/images/cubemap/negz.jpg\";\n\nexport async function createDefaultEnvironmentMap() {\n  const urls = [cubeMapPosX, cubeMapNegX, cubeMapPosY, cubeMapNegY, cubeMapPosZ, cubeMapNegZ];\n  const texture = await new Promise((resolve, reject) =>\n    new THREE.CubeTextureLoader().load(urls, resolve, undefined, reject)\n  );\n  texture.format = THREE.RGBFormat;\n  return texture;\n}\n\nAFRAME.registerComponent(\"environment-map\", {\n  init() {\n    this.environmentMap = null;\n\n    this.updateEnvironmentMap = this.updateEnvironmentMap.bind(this);\n  },\n\n  updateEnvironmentMap(environmentMap) {\n    this.environmentMap = environmentMap;\n    this.applyEnvironmentMap(this.el.object3D);\n  },\n\n  applyEnvironmentMap(object3D) {\n    object3D.traverse(object => {\n      forEachMaterial(object, material => {\n        if (material.isMeshStandardMaterial) {\n          material.envMap = this.environmentMap;\n          material.needsUpdate = true;\n        }\n      });\n    });\n  }\n});\n","module.exports = \"if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\\n  float ratio = 0.0;\\n\\n  if (hubs_EnableSweepingEffect) {\\n    float size = hubs_SweepParams.t - hubs_SweepParams.s;\\n    float line = mod(hubs_Time / 500.0 * size, size * 3.0) + hubs_SweepParams.s - size / 3.0;\\n\\n    if (hubs_WorldPosition.y < line) {\\n      // Highlight with a sweeping gradient.\\n      ratio = max(0.0, 1.0 - (line - hubs_WorldPosition.y) / (size * 1.5));\\n    }\\n  }\\n\\n  // Highlight with a gradient falling off with distance.\\n  float pulse = 9.0 + 3.0 * (sin(hubs_Time / 1000.0) + 1.0);\\n\\n  if (hubs_HighlightInteractorOne) {\\n    float dist1 = distance(hubs_WorldPosition, hubs_InteractorOnePos);\\n    ratio += -min(1.0, pow(dist1 * pulse, 3.0)) + 1.0;\\n  } \\n\\n  if (hubs_HighlightInteractorTwo) {\\n    float dist2 = distance(hubs_WorldPosition, hubs_InteractorTwoPos);\\n    ratio += -min(1.0, pow(dist2 * pulse, 3.0)) + 1.0;\\n  }\\n\\n  ratio = min(1.0, ratio);\\n\\n  // Gamma corrected highlight color\\n  vec3 highlightColor = vec3(0.184, 0.499, 0.933);\\n\\n  gl_FragColor.rgb = (gl_FragColor.rgb * (1.0 - ratio)) + (highlightColor * ratio);\\n}\\n\"","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posx-d235fb97df77b607be04b84125f40e7c.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negx-35034574e114423babdea92b6a2eb97a.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posy-d0c4e1e7979d75923d4d8b49c191bc6e.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negy-35808d21d1d17ac1b84d3184e365093b.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posz-de29aa8396196e4b040cd5305e351dbe.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negz-d73d18a8b7994524dc39a6ea3fcf43fc.jpg\";","import { detectOS } from \"detect-browser\";\n\nexport function disableiOSZoom() {\n  if (detectOS(navigator.userAgent) !== \"iOS\") return;\n\n  let lastTouchAtMs = 0;\n\n  document.addEventListener(\"touchmove\", ev => {\n    if (ev.scale === 1) return;\n\n    ev.preventDefault();\n  });\n\n  document.addEventListener(\"touchend\", ev => {\n    const now = new Date().getTime();\n    const isDoubleTouch = now - lastTouchAtMs <= 300;\n    lastTouchAtMs = now;\n\n    if (isDoubleTouch) {\n      ev.preventDefault();\n    }\n  });\n}\n","import Store from \"./storage/store\";\nimport MediaSearchStore from \"./storage/media-search-store\";\n\nexport class App {\n  constructor() {\n    this.scene = null;\n    this.quality = \"low\";\n    this.store = new Store();\n    this.mediaSearchStore = new MediaSearchStore();\n  }\n\n  setQuality(quality) {\n    if (this.quality === quality) {\n      return false;\n    }\n\n    this.quality = quality;\n\n    if (this.scene) {\n      this.scene.dispatchEvent(new CustomEvent(\"quality-changed\", { detail: quality }));\n    }\n\n    return true;\n  }\n}\n","// Provides a global registry of running components\nexport function registerComponentInstance(component, name) {\n  window.APP.componentRegistry = window.APP.componentRegistry || {};\n  window.APP.componentRegistry[name] = window.APP.componentRegistry[name] || [];\n  window.APP.componentRegistry[name].push(component);\n}\n\nexport function deregisterComponentInstance(component, name) {\n  if (!window.APP.componentRegistry || !window.APP.componentRegistry[name]) return;\n  window.APP.componentRegistry[name].splice(window.APP.componentRegistry[name].indexOf(component), 1);\n}\n\nexport function getCurrentStreamer() {\n  if (!window.APP || !window.APP.componentRegistry || !window.APP.hubChannel || !window.APP.hubChannel.presence)\n    return null;\n  const playerInfos = window.APP.componentRegistry[\"player-info\"] || [];\n  const presences = window.APP.hubChannel.presence.state;\n\n  for (let i = 0; i < playerInfos.length; i++) {\n    const playerInfo = playerInfos[i];\n    const presence = presences[playerInfo.playerSessionId];\n\n    if (presence && presence.metas[0] && presence.metas[0].streaming) {\n      return playerInfo;\n    }\n  }\n\n  return null;\n}\n","import { SOUND_TOGGLE_MIC } from \"../systems/sound-effects-system\";\n\nconst bindAllEvents = function(elements, events, f) {\n  if (!elements || !elements.length) return;\n  for (const el of elements) {\n    events.length &&\n      events.forEach(e => {\n        el.addEventListener(e, f);\n      });\n  }\n};\nconst unbindAllEvents = function(elements, events, f) {\n  if (!elements || !elements.length) return;\n  for (const el of elements) {\n    events.length &&\n      events.forEach(e => {\n        el.removeEventListener(e, f);\n      });\n  }\n};\n\n/**\n * Toggles the microphone on the current network connection based on the given events.\n * @namespace network\n * @component mute-mic\n */\nAFRAME.registerComponent(\"mute-mic\", {\n  schema: {\n    eventSrc: { type: \"selectorAll\" },\n    toggleEvents: { type: \"array\" },\n    muteEvents: { type: \"array\" },\n    unmuteEvents: { type: \"array\" }\n  },\n  init: function() {\n    this.onToggle = this.onToggle.bind(this);\n    this.onMute = this.onMute.bind(this);\n    this.onUnmute = this.onUnmute.bind(this);\n  },\n\n  play: function() {\n    const { eventSrc, toggleEvents, muteEvents, unmuteEvents } = this.data;\n    bindAllEvents(eventSrc, toggleEvents, this.onToggle);\n    bindAllEvents(eventSrc, muteEvents, this.onMute);\n    bindAllEvents(eventSrc, unmuteEvents, this.onUnmute);\n  },\n\n  pause: function() {\n    const { eventSrc, toggleEvents, muteEvents, unmuteEvents } = this.data;\n    unbindAllEvents(eventSrc, toggleEvents, this.onToggle);\n    unbindAllEvents(eventSrc, muteEvents, this.onMute);\n    unbindAllEvents(eventSrc, unmuteEvents, this.onUnmute);\n  },\n\n  onToggle: function() {\n    if (!NAF.connection.adapter) return;\n    if (!this.el.sceneEl.is(\"entered\")) return;\n\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_TOGGLE_MIC);\n    if (this.el.is(\"muted\")) {\n      NAF.connection.adapter.enableMicrophone(true);\n      this.el.removeState(\"muted\");\n    } else {\n      NAF.connection.adapter.enableMicrophone(false);\n      this.el.addState(\"muted\");\n    }\n  },\n\n  onMute: function() {\n    if (!NAF.connection.adapter) return;\n    if (!this.el.is(\"muted\")) {\n      NAF.connection.adapter.enableMicrophone(false);\n      this.el.addState(\"muted\");\n    }\n  },\n\n  onUnmute: function() {\n    if (this.el.is(\"muted\")) {\n      NAF.connection.adapter.enableMicrophone(true);\n      this.el.removeState(\"muted\");\n    }\n  }\n});\n","import { SOUND_TOGGLE_FLYING } from \"../systems/sound-effects-system\";\n\nconst bindAllEvents = function(elements, events, f) {\n  if (!elements || !elements.length) return;\n  for (const el of elements) {\n    events.length &&\n      events.forEach(e => {\n        el.addEventListener(e, f);\n      });\n  }\n};\nconst unbindAllEvents = function(elements, events, f) {\n  if (!elements || !elements.length) return;\n  for (const el of elements) {\n    events.length &&\n      events.forEach(e => {\n        el.removeEventListener(e, f);\n      });\n  }\n};\n\n/**\n * Toggles flying.\n * @namespace network\n * @component toggle-flying\n */\nAFRAME.registerComponent(\"toggle-flying\", {\n  schema: {\n    eventSrc: { type: \"selectorAll\" },\n    toggleEvents: { type: \"array\" },\n    // flyingEvents: { type: \"array\" },\n  },\n  init: function() {\n    this.onToggle = this.onToggle.bind(this);\n    // this.onFlying = this.onFlying.bind(this);\n  },\n\n  play: function() {\n    const { eventSrc, toggleEvents } = this.data;\n    bindAllEvents(eventSrc, toggleEvents, this.onToggle);\n   // bindAllEvents(eventSrc, flyingEvents, this.onFlying);\n    \n  },\n\n  pause: function() {\n    const { eventSrc, toggleEvents } = this.data;\n    unbindAllEvents(eventSrc, toggleEvents, this.onToggle);\n    // unbindAllEvents(eventSrc, flyingEvents, this.onFlying);\n  },\n\n  onToggle: function() {\n    if (!this.el.sceneEl.is(\"entered\")) return;\n\n    // this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_TOGGLE_MIC);\n    if (this.el.is(\"flying\")) {\n      this.el.removeState(\"flying\");\n    } else {\n      this.el.addState(\"flying\");\n    }\n  },\n\n  // onFlying: function() {\n  //   if (!this.el.is(\"flying\")) {  \n  //     this.el.addState(\"flying\");\n  //   } else {\n  //     this.el.removeState(\"flying\");\n  //   }\n  // },\n});\n","import { SOUND_SPAWN_PEN } from \"../systems/sound-effects-system\";\n/**\n * HUD panel for muting, freezing, and other controls that don't necessarily have hardware buttons.\n * @namespace ui\n * @component in-world-hud\n */\nAFRAME.registerComponent(\"in-world-hud\", {\n  init() {\n    this.mic = this.el.querySelector(\".mic\");\n    this.spawn = this.el.querySelector(\".spawn\");\n    // this.pen = this.el.querySelector(\".penhud\");\n    this.cameraBtn = this.el.querySelector(\".camera-btn\");\n    this.inviteBtn = this.el.querySelector(\".invite-btn\");\n    this.background = this.el.querySelector(\".bg\");\n    this.flyBtn = this.el.querySelector(\".fly-btn\");\n\n    this.updateButtonStates = () => {\n      this.mic.setAttribute(\"mic-button\", \"active\", this.el.sceneEl.is(\"muted\"));\n      // this.pen.setAttribute(\"icon-button\", \"active\", this.el.sceneEl.is(\"pen\"));\n      this.cameraBtn.setAttribute(\"icon-button\", \"active\", this.el.sceneEl.is(\"camera\"));\n      this.flyBtn.setAttribute(\"icon-button\", \"active\", this.el.sceneEl.is(\"flying\"));\n\n      if (window.APP.hubChannel) {\n        this.spawn.setAttribute(\"icon-button\", \"disabled\", !window.APP.hubChannel.can(\"spawn_and_move_media\"));\n        // this.pen.setAttribute(\"icon-button\", \"disabled\", !window.APP.hubChannel.can(\"spawn_drawing\"));\n        this.cameraBtn.setAttribute(\"icon-button\", \"disabled\", !window.APP.hubChannel.can(\"spawn_camera\"));\n      }\n\n    };\n    this.updateButtonStates();\n\n    this.onStateChange = evt => {\n      if (!(evt.detail === \"muted\" || evt.detail === \"frozen\" || evt.detail === \"pen\" || evt.detail === \"camera\" || evt.detail === \"flying\"))\n        return;\n      this.updateButtonStates();\n    };\n\n    this.onMicClick = () => {\n      this.el.emit(\"action_mute\");\n    };\n\n    this.onSpawnClick = () => {\n      if (!window.APP.hubChannel.can(\"spawn_and_move_media\")) return;\n      this.el.emit(\"action_spawn\");\n    };\n\n    this.onPenClick = () => {\n      if (!window.APP.hubChannel.can(\"spawn_drawing\")) return;\n      this.el.emit(\"spawn_pen\");\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SPAWN_PEN);\n    };\n\n    this.onCameraClick = () => {\n      if (!window.APP.hubChannel.can(\"spawn_camera\")) return;\n      this.el.emit(\"action_toggle_camera\");\n    };\n\n    this.onFlyClick = () => {\n      this.el.emit(\"action_fly\");\n      const playerRig = document.querySelector(\"#player-rig\");\n      const enabled = playerRig.getAttribute(\"character-controller\", \"fly\").fly; \n      playerRig.setAttribute(\"character-controller\", \"fly\", !enabled);  \n    };\n\n    this.onInviteClick = () => {\n      this.el.emit(\"action_invite\");\n    };\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateChange);\n    this.el.sceneEl.systems.permissions.onPermissionsUpdated(this.updateButtonStates);\n\n    this.mic.object3D.addEventListener(\"interact\", this.onMicClick);\n    this.spawn.object3D.addEventListener(\"interact\", this.onSpawnClick);\n    // this.pen.object3D.addEventListener(\"interact\", this.onPenClick);\n    this.cameraBtn.object3D.addEventListener(\"interact\", this.onCameraClick);\n    this.flyBtn.object3D.addEventListener(\"interact\", this.onFlyClick);\n    this.inviteBtn.object3D.addEventListener(\"interact\", this.onInviteClick);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateChange);\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.updateButtonStates);\n\n    this.mic.object3D.removeEventListener(\"interact\", this.onMicClick);\n    this.spawn.object3D.removeEventListener(\"interact\", this.onSpawnClick);\n    // this.pen.object3D.removeEventListener(\"interact\", this.onPenClick);\n    this.cameraBtn.object3D.removeEventListener(\"interact\", this.onCameraClick);\n    this.flyBtn.object3D.removeEventListener(\"interact\", this.onFlyClick);\n    this.inviteBtn.object3D.removeEventListener(\"interact\", this.onInviteClick);\n  }\n});\n","import nipplejs from \"nipplejs\";\nimport styles from \"./virtual-gamepad-controls.css\";\n\n/**\n * Instantiates 2D virtual gamepads and emits associated events.\n * @namespace user-input\n * @component virtual-gamepad-controls\n */\nAFRAME.registerComponent(\"virtual-gamepad-controls\", {\n  schema: {},\n\n  init() {\n    this.onEnterVr = this.onEnterVr.bind(this);\n    this.onExitVr = this.onExitVr.bind(this);\n    this.onFirstInteraction = this.onFirstInteraction.bind(this);\n    this.onMoveJoystickChanged = this.onMoveJoystickChanged.bind(this);\n    this.onMoveJoystickEnd = this.onMoveJoystickEnd.bind(this);\n    this.onLookJoystickChanged = this.onLookJoystickChanged.bind(this);\n    this.onLookJoystickEnd = this.onLookJoystickEnd.bind(this);\n\n    this.mockJoystickContainer = document.createElement(\"div\");\n    this.mockJoystickContainer.classList.add(styles.mockJoystickContainer);\n    const leftMock = document.createElement(\"div\");\n    leftMock.classList.add(styles.mockJoystick);\n    const leftMockSmall = document.createElement(\"div\");\n    leftMockSmall.classList.add(styles.mockJoystick, styles.inner);\n    leftMock.appendChild(leftMockSmall);\n    this.mockJoystickContainer.appendChild(leftMock);\n    const rightMock = document.createElement(\"div\");\n    rightMock.classList.add(styles.mockJoystick);\n    const rightMockSmall = document.createElement(\"div\");\n    rightMockSmall.classList.add(styles.mockJoystick, styles.inner);\n    rightMock.appendChild(rightMockSmall);\n    this.mockJoystickContainer.appendChild(rightMock);\n    document.body.appendChild(this.mockJoystickContainer);\n\n    // Setup gamepad elements\n    const leftTouchZone = document.createElement(\"div\");\n    leftTouchZone.classList.add(styles.touchZone, styles.left);\n    document.body.appendChild(leftTouchZone);\n\n    this.leftTouchZone = leftTouchZone;\n\n    this.leftStick = nipplejs.create({\n      zone: this.leftTouchZone,\n      color: \"white\",\n      fadeTime: 0\n    });\n\n    this.leftStick.on(\"start\", this.onFirstInteraction);\n    this.leftStick.on(\"move\", this.onMoveJoystickChanged);\n    this.leftStick.on(\"end\", this.onMoveJoystickEnd);\n\n    const rightTouchZone = document.createElement(\"div\");\n    rightTouchZone.classList.add(styles.touchZone, styles.right);\n    document.body.appendChild(rightTouchZone);\n\n    this.rightTouchZone = rightTouchZone;\n\n    this.rightStick = nipplejs.create({\n      zone: this.rightTouchZone,\n      color: \"white\",\n      fadeTime: 0\n    });\n\n    this.rightStick.on(\"start\", this.onFirstInteraction);\n    this.rightStick.on(\"move\", this.onLookJoystickChanged);\n    this.rightStick.on(\"end\", this.onLookJoystickEnd);\n\n    this.inVr = false;\n    this.moving = false;\n    this.rotating = false;\n\n    this.moveEvent = {\n      axis: [0, 0]\n    };\n    this.rotateYEvent = {\n      value: 0\n    };\n    this.rotateXEvent = {\n      value: 0\n    };\n\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.onEnterVr);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.onExitVr);\n  },\n\n  onFirstInteraction() {\n    this.leftStick.off(\"start\", this.onFirstInteraction);\n    this.rightStick.off(\"start\", this.onFirstInteraction);\n    document.body.removeChild(this.mockJoystickContainer);\n  },\n\n  onMoveJoystickChanged(event, joystick) {\n    const angle = joystick.angle.radian;\n    const force = joystick.force < 1 ? joystick.force : 1;\n    const moveStrength = 1.85;\n    const x = Math.cos(angle) * force * moveStrength;\n    const z = Math.sin(angle) * force * moveStrength;\n    this.moving = true;\n    this.moveEvent.axis[0] = x;\n    this.moveEvent.axis[1] = z;\n  },\n\n  onMoveJoystickEnd() {\n    this.moving = false;\n    this.moveEvent.axis[0] = 0;\n    this.moveEvent.axis[1] = 0;\n    this.el.sceneEl.emit(\"move\", this.moveEvent);\n  },\n\n  onLookJoystickChanged(event, joystick) {\n    // Set pitch and yaw angles on right stick move\n    const angle = joystick.angle.radian;\n    const force = joystick.force < 1 ? joystick.force : 1;\n    const turnStrength = 0.5;\n    this.rotating = true;\n    this.rotateYEvent.value = Math.cos(angle) * force * turnStrength;\n    this.rotateXEvent.value = Math.sin(angle) * force * turnStrength;\n  },\n\n  onLookJoystickEnd() {\n    this.rotating = false;\n    this.rotateYEvent.value = 0;\n    this.rotateXEvent.value = 0;\n    this.el.sceneEl.emit(\"rotateY\", this.rotateYEvent);\n    this.el.sceneEl.emit(\"rotateX\", this.rotateXEvent);\n  },\n\n  tick() {\n    if (!this.inVr) {\n      if (this.moving) {\n        this.el.sceneEl.emit(\"move\", this.moveEvent);\n      }\n\n      if (this.rotating) {\n        this.el.sceneEl.emit(\"rotateY\", this.rotateYEvent);\n        this.el.sceneEl.emit(\"rotateX\", this.rotateXEvent);\n      }\n    }\n  },\n\n  onEnterVr() {\n    // Hide the joystick controls\n    this.inVr = true;\n    this.leftTouchZone.style.display = \"none\";\n    this.rightTouchZone.style.display = \"none\";\n  },\n\n  onExitVr() {\n    // Show the joystick controls\n    this.inVr = false;\n    this.leftTouchZone.style.display = \"block\";\n    this.rightTouchZone.style.display = \"block\";\n  },\n\n  remove() {\n    this.el.sceneEl.removeEventListener(\"entervr\", this.onEnterVr);\n    this.el.sceneEl.removeEventListener(\"exitvr\", this.onExitVr);\n    document.body.removeChild(this.mockJoystickContainer);\n    document.body.removeChild(this.leftTouchZone);\n    document.body.removeChild(this.rightTouchZone);\n  }\n});\n","const { Vector3, Quaternion, Matrix4, Euler } = THREE;\n\nimport { AVATAR_TYPES } from \"../utils/avatar-utils\";\n\nfunction quaternionAlmostEquals(epsilon, u, v) {\n  // Note: q and -q represent same rotation\n  return (\n    (Math.abs(u.x - v.x) < epsilon &&\n      Math.abs(u.y - v.y) < epsilon &&\n      Math.abs(u.z - v.z) < epsilon &&\n      Math.abs(u.w - v.w) < epsilon) ||\n    (Math.abs(-u.x - v.x) < epsilon &&\n      Math.abs(-u.y - v.y) < epsilon &&\n      Math.abs(-u.z - v.z) < epsilon &&\n      Math.abs(-u.w - v.w) < epsilon)\n  );\n}\n\n/**\n * Provides access to the end effectors for IK.\n * @namespace avatar\n * @component ik-root\n */\nAFRAME.registerComponent(\"ik-root\", {\n  schema: {\n    camera: { type: \"string\", default: \".camera\" },\n    leftController: { type: \"string\", default: \".left-controller\" },\n    rightController: { type: \"string\", default: \".right-controller\" }\n  },\n  update(oldData) {\n    if (this.data.camera !== oldData.camera) {\n      this.camera = this.el.querySelector(this.data.camera);\n    }\n\n    if (this.data.leftController !== oldData.leftController) {\n      this.leftController = this.el.querySelector(this.data.leftController);\n    }\n\n    if (this.data.rightController !== oldData.rightController) {\n      this.rightController = this.el.querySelector(this.data.rightController);\n    }\n  }\n});\n\nfunction findIKRoot(entity) {\n  while (entity && !(entity.components && entity.components[\"ik-root\"])) {\n    entity = entity.parentNode;\n  }\n  return entity && entity.components[\"ik-root\"];\n}\n\nconst LEGACY_HAND_ROTATIONS = {\n  left: new Matrix4().makeRotationFromEuler(new Euler(-Math.PI / 2, Math.PI / 2, 0)),\n  right: new Matrix4().makeRotationFromEuler(new Euler(Math.PI / 2, Math.PI / 2, 0))\n};\n\nconst HAND_ROTATIONS = {\n  left: new Matrix4().makeRotationFromEuler(new Euler(-Math.PI / 2, Math.PI / 2, 0)),\n  right: new Matrix4().makeRotationFromEuler(new Euler(-Math.PI / 2, -Math.PI / 2, 0))\n};\n\n/**\n * Performs IK on a hip-rooted skeleton to align the hip, head and hands with camera and controller inputs.\n * @namespace avatar\n * @component ik-controller\n */\nAFRAME.registerComponent(\"ik-controller\", {\n  schema: {\n    leftEye: { type: \"string\", default: \"LeftEye\" },\n    rightEye: { type: \"string\", default: \"RightEye\" },\n    head: { type: \"string\", default: \"Head\" },\n    neck: { type: \"string\", default: \"Neck\" },\n    leftHand: { type: \"string\", default: \"LeftHand\" },\n    rightHand: { type: \"string\", default: \"RightHand\" },\n    chest: { type: \"string\", default: \"Spine\" },\n    hips: { type: \"string\", default: \"Hips\" },\n    rotationSpeed: { default: 5 },\n    alwaysUpdate: { type: \"boolean\", default: false }\n  },\n\n  init() {\n    this._runScheduledWork = this._runScheduledWork.bind(this);\n    this._updateIsInView = this._updateIsInView.bind(this);\n\n    this.flipY = new Matrix4().makeRotationY(Math.PI);\n\n    this.cameraForward = new Matrix4();\n    this.headTransform = new Matrix4();\n    this.hipsPosition = new Vector3();\n\n    this.invHipsToHeadVector = new Vector3();\n\n    this.middleEyeMatrix = new Matrix4();\n    this.middleEyePosition = new Vector3();\n    this.invMiddleEyeToHead = new Matrix4();\n\n    this.cameraYRotation = new Euler();\n    this.cameraYQuaternion = new Quaternion();\n\n    this.invHipsQuaternion = new Quaternion();\n    this.headQuaternion = new Quaternion();\n\n    this.rootToChest = new Matrix4();\n    this.invRootToChest = new Matrix4();\n\n    this.ikRoot = findIKRoot(this.el);\n\n    this.isInView = true;\n    this.hasConvergedHips = false;\n    this.lastCameraTransform = new THREE.Matrix4();\n    this.playerCamera = document.querySelector(\"#player-camera\").getObject3D(\"camera\");\n\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._runScheduledWork, \"ik\");\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._runScheduledWork, \"ik\");\n  },\n\n  update(oldData) {\n    if (this.data.leftEye !== oldData.leftEye) {\n      this.leftEye = this.el.object3D.getObjectByName(this.data.leftEye);\n    }\n\n    if (this.data.rightEye !== oldData.rightEye) {\n      this.rightEye = this.el.object3D.getObjectByName(this.data.rightEye);\n    }\n\n    if (this.data.head !== oldData.head) {\n      this.head = this.el.object3D.getObjectByName(this.data.head);\n    }\n\n    if (this.data.neck !== oldData.neck) {\n      this.neck = this.el.object3D.getObjectByName(this.data.neck);\n    }\n\n    if (this.data.leftHand !== oldData.leftHand) {\n      this.leftHand = this.el.object3D.getObjectByName(this.data.leftHand);\n    }\n\n    if (this.data.rightHand !== oldData.rightHand) {\n      this.rightHand = this.el.object3D.getObjectByName(this.data.rightHand);\n    }\n\n    if (this.data.chest !== oldData.chest) {\n      this.chest = this.el.object3D.getObjectByName(this.data.chest);\n    }\n\n    if (this.data.hips !== oldData.hips) {\n      this.hips = this.el.object3D.getObjectByName(this.data.hips);\n    }\n\n    // Set middleEye's position to be right in the middle of the left and right eyes.\n    this.middleEyePosition.addVectors(this.leftEye.position, this.rightEye.position);\n    this.middleEyePosition.divideScalar(2);\n    this.middleEyeMatrix.makeTranslation(this.middleEyePosition.x, this.middleEyePosition.y, this.middleEyePosition.z);\n    this.invMiddleEyeToHead = this.middleEyeMatrix.getInverse(this.middleEyeMatrix);\n\n    this.invHipsToHeadVector\n      .addVectors(this.chest.position, this.neck.position)\n      .add(this.head.position)\n      .negate();\n  },\n\n  tick(time, dt) {\n    if (!this.ikRoot) {\n      return;\n    }\n\n    const root = this.ikRoot.el.object3D;\n    const { camera, leftController, rightController } = this.ikRoot;\n\n    camera.object3D.updateMatrix();\n\n    const hasNewCameraTransform = !this.lastCameraTransform.equals(camera.object3D.matrix);\n\n    // Optimization: if the camera hasn't moved and the hips converged to the target orientation on a previous frame,\n    // then the avatar does not need any IK this frame.\n    //\n    // Update in-view avatars every frame, and update out-of-view avatars via frame scheduler.\n    if (\n      this.data.alwaysUpdate ||\n      this.forceIkUpdate ||\n      (this.isInView && (hasNewCameraTransform || !this.hasConvergedHips))\n    ) {\n      if (hasNewCameraTransform) {\n        this.lastCameraTransform.copy(camera.object3D.matrix);\n      }\n\n      const {\n        hips,\n        head,\n        neck,\n        chest,\n        cameraForward,\n        headTransform,\n        invMiddleEyeToHead,\n        invHipsToHeadVector,\n        flipY,\n        cameraYRotation,\n        cameraYQuaternion,\n        invHipsQuaternion,\n        rootToChest,\n        invRootToChest\n      } = this;\n\n      // Camera faces the -Z direction. Flip it along the Y axis so that it is +Z.\n      cameraForward.multiplyMatrices(camera.object3D.matrix, flipY);\n\n      // Compute the head position such that the hmd position would be in line with the middleEye\n      headTransform.multiplyMatrices(cameraForward, invMiddleEyeToHead);\n\n      // Then position the hips such that the head is aligned with headTransform\n      // (which positions middleEye in line with the hmd)\n      hips.position.setFromMatrixPosition(headTransform).add(invHipsToHeadVector);\n\n      // Animate the hip rotation to follow the Y rotation of the camera with some damping.\n      cameraYRotation.setFromRotationMatrix(cameraForward, \"YXZ\");\n      cameraYRotation.x = 0;\n      cameraYRotation.z = 0;\n      cameraYQuaternion.setFromEuler(cameraYRotation);\n      Quaternion.slerp(hips.quaternion, cameraYQuaternion, hips.quaternion, (this.data.rotationSpeed * dt) / 1000);\n\n      this.hasConvergedHips = quaternionAlmostEquals(0.0001, cameraYQuaternion, hips.quaternion);\n\n      // Take the head orientation computed from the hmd, remove the Y rotation already applied to it by the hips,\n      // and apply it to the head\n      invHipsQuaternion.copy(hips.quaternion).inverse();\n      head.quaternion.setFromRotationMatrix(headTransform).premultiply(invHipsQuaternion);\n\n      hips.updateMatrix();\n      rootToChest.multiplyMatrices(hips.matrix, chest.matrix);\n      invRootToChest.getInverse(rootToChest);\n\n      root.matrixNeedsUpdate = true;\n      neck.matrixNeedsUpdate = true;\n      head.matrixNeedsUpdate = true;\n      chest.matrixNeedsUpdate = true;\n    }\n\n    const { leftHand, rightHand } = this;\n\n    const handRotations =\n      this.ikRoot.el.components[\"player-info\"].data.avatarType === AVATAR_TYPES.LEGACY\n        ? LEGACY_HAND_ROTATIONS\n        : HAND_ROTATIONS;\n    if (leftHand) this.updateHand(handRotations.left, leftHand, leftController.object3D, true, this.isInView);\n    if (rightHand) this.updateHand(handRotations.right, rightHand, rightController.object3D, false, this.isInView);\n    this.forceIkUpdate = false;\n  },\n\n  updateHand(handRotation, handObject3D, controllerObject3D, isLeft, isInView) {\n    const handMatrix = handObject3D.matrix;\n\n    // TODO: This coupling with personal-space-invader is not ideal.\n    // There should be some intermediate thing managing multiple opinions about object visibility\n    const spaceInvader = handObject3D.el.components[\"personal-space-invader\"];\n    const handHiddenByPersonalSpace = spaceInvader && spaceInvader.invading;\n\n    handObject3D.visible = !handHiddenByPersonalSpace && controllerObject3D.visible;\n\n    // Optimization: skip IK update if not in view and not forced by frame scheduler\n    if (controllerObject3D.visible && (isInView || this.forceIkUpdate || this.data.alwaysUpdate)) {\n      handMatrix.multiplyMatrices(this.invRootToChest, controllerObject3D.matrix);\n\n      handMatrix.multiply(handRotation);\n\n      handObject3D.position.setFromMatrixPosition(handMatrix);\n      handObject3D.rotation.setFromRotationMatrix(handMatrix);\n      handObject3D.matrixNeedsUpdate = true;\n    }\n  },\n\n  _runScheduledWork() {\n    // Every scheduled run, we force an IK update on the next frame (so at most one avatar with forced IK per frame)\n    // and also update the this.isInView bit on the avatar which is used to determine if an IK update should be run\n    // every frame.\n    this.forceIkUpdate = true;\n\n    this._updateIsInView();\n  },\n\n  _updateIsInView: (function() {\n    const frustum = new THREE.Frustum();\n    const frustumMatrix = new THREE.Matrix4();\n    const cameraWorld = new THREE.Vector3();\n    const isInViewOfCamera = (screenCamera, pos) => {\n      frustumMatrix.multiplyMatrices(screenCamera.projectionMatrix, screenCamera.matrixWorldInverse);\n      frustum.setFromMatrix(frustumMatrix);\n      return frustum.containsPoint(pos);\n    };\n\n    return function() {\n      const camera = this.ikRoot.camera.object3D;\n      camera.getWorldPosition(cameraWorld);\n\n      this.isInView = isInViewOfCamera(this.playerCamera, cameraWorld);\n    };\n  })()\n});\n","import { paths } from \"../systems/userinput/paths\";\n\nconst POSES = {\n  open: \"open\",\n  point: \"point\",\n  fist: \"fist\",\n  hold: \"hold\",\n  thumbUp: \"thumbUp\",\n  thumbDown: \"thumbDown\",\n  indexDown: \"indexDown\",\n  pinch: \"pinch\",\n  mrpDown: \"mrpDown\"\n};\n\n/**\n * Emits events indicating that avatar hands should be posed differently.\n * @namespace user-input\n * @component hand-controls2\n */\nAFRAME.registerComponent(\"hand-controls2\", {\n  schema: { default: \"left\" },\n\n  init() {\n    this.pose = POSES.open;\n  },\n\n  poseForFingers(thumb, index, middleRingPinky) {\n    if (!thumb && !index && !middleRingPinky) {\n      return POSES.open;\n    } else if (thumb && index && middleRingPinky) {\n      return POSES.fist;\n    } else if (!thumb && index && middleRingPinky) {\n      return POSES.thumbUp;\n    } else if (!thumb && !index && middleRingPinky) {\n      return POSES.mrpDown;\n    } else if (!thumb && index && !middleRingPinky) {\n      return POSES.indexDown;\n    } else if (thumb && !index && !middleRingPinky) {\n      return POSES.thumbDown;\n    } else if (thumb && index && !middleRingPinky) {\n      return POSES.pinch;\n    } else if (thumb && !index && middleRingPinky) {\n      return POSES.point;\n    }\n\n    console.warn(`Did not find matching pose for thumb ${thumb}, index ${index}, middleRingPinky ${middleRingPinky}`);\n    return POSES.open;\n  },\n\n  tick() {\n    const hand = this.data;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const subpath = hand === \"left\" ? paths.actions.leftHand : paths.actions.rightHand;\n    const thumb = userinput.get(subpath.thumb);\n    const index = userinput.get(subpath.index);\n    const middleRingPinky = userinput.get(subpath.middleRingPinky);\n    const pose = this.poseForFingers(thumb, index, middleRingPinky);\n    if (pose !== this.pose) {\n      this.el.emit(\"hand-pose\", { previous: this.pose, current: pose });\n      this.pose = pose;\n    }\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\nimport { SOUND_SNAP_ROTATE } from \"../systems/sound-effects-system\";\nconst CLAMP_VELOCITY = 0.01;\nconst MAX_DELTA = 0.2;\nconst EPS = 10e-6;\nconst MAX_WARNINGS = 10;\n\nconst NAV_ZONE = \"character\";\n\n/**\n * Avatar movement controller that listens to move, rotate and teleportation events and moves the avatar accordingly.\n * The controller accounts for playspace offset and orientation and depends on the nav mesh system for translation.\n * @namespace avatar\n * @component character-controller\n */\nAFRAME.registerComponent(\"character-controller\", {\n  schema: {\n    groundAcc: { default: 5.5 },\n    easing: { default: 10 },\n    pivot: { type: \"selector\" },\n    snapRotationDegrees: { default: THREE.Math.DEG2RAD * 45 },\n    rotationSpeed: { default: -3 },\n    fly: { default: false }\n  },\n\n  init: function() {\n    this.navGroup = null;\n    this.navNode = null;\n    this.velocity = new THREE.Vector3(0, 0, 0);\n    this.accelerationInput = new THREE.Vector3(0, 0, 0);\n    this.pendingSnapRotationMatrix = new THREE.Matrix4();\n    this.angularVelocity = 0; // Scalar value because we only allow rotation around Y\n    this._withinWarningLimit = true;\n    this._warningCount = 0;\n    this.setAccelerationInput = this.setAccelerationInput.bind(this);\n    this.snapRotateLeft = this.snapRotateLeft.bind(this);\n    this.snapRotateRight = this.snapRotateRight.bind(this);\n    this.setAngularVelocity = this.setAngularVelocity.bind(this);\n    this.el.sceneEl.addEventListener(\"nav-mesh-loaded\", () => {\n      this.navGroup = null;\n      this.navNode = null;\n    });\n  },\n\n  update: function() {\n    this.leftRotationMatrix = new THREE.Matrix4().makeRotationY(this.data.snapRotationDegrees);\n    this.rightRotationMatrix = new THREE.Matrix4().makeRotationY(-this.data.snapRotationDegrees);\n  },\n\n  play: function() {\n    const eventSrc = this.el.sceneEl;\n    eventSrc.addEventListener(\"move\", this.setAccelerationInput);\n    eventSrc.addEventListener(\"rotateY\", this.setAngularVelocity);\n  },\n\n  pause: function() {\n    const eventSrc = this.el.sceneEl;\n    eventSrc.removeEventListener(\"move\", this.setAccelerationInput);\n    eventSrc.removeEventListener(\"rotateY\", this.setAngularVelocity);\n    this.reset();\n  },\n\n  reset() {\n    this.accelerationInput.set(0, 0, 0);\n    this.velocity.set(0, 0, 0);\n    this.angularVelocity = 0;\n    this.pendingSnapRotationMatrix.identity();\n  },\n\n  setAccelerationInput: function(event) {\n    const axes = event.detail.axis;\n    this.accelerationInput.set(axes[0], 0, axes[1]);\n  },\n\n  setAngularVelocity: function(event) {\n    this.angularVelocity = event.detail.value;\n  },\n\n  snapRotateLeft: function() {\n    this.pendingSnapRotationMatrix.copy(this.leftRotationMatrix);\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SNAP_ROTATE);\n  },\n\n  snapRotateRight: function() {\n    this.pendingSnapRotationMatrix.copy(this.rightRotationMatrix);\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SNAP_ROTATE);\n  },\n\n  // We assume the rig is at the root, and its local position === its world position.\n  teleportTo: (function() {\n    const rig = new THREE.Vector3();\n    const head = new THREE.Vector3();\n    const deltaFromHeadToTargetForHead = new THREE.Vector3();\n    const targetForHead = new THREE.Vector3();\n    const targetForRig = new THREE.Vector3();\n    return function teleportTo(targetWorldPosition) {\n      const o = this.el.object3D;\n      o.getWorldPosition(rig);\n      this.data.pivot.object3D.getWorldPosition(head);\n      targetForHead.copy(targetWorldPosition);\n      targetForHead.y += this.data.pivot.object3D.position.y;\n      deltaFromHeadToTargetForHead.copy(targetForHead).sub(head);\n      targetForRig.copy(rig).add(deltaFromHeadToTargetForHead);\n\n      const pathfinder = this.el.sceneEl.systems.nav.pathfinder;\n      this.navGroup = pathfinder.getGroup(NAV_ZONE, targetForRig, true, true);\n      this.navNode = null;\n      this._setNavNode(targetForRig);\n      pathfinder.clampStep(rig, targetForRig, this.navNode, NAV_ZONE, this.navGroup, o.position);\n      o.matrixNeedsUpdate = true;\n    };\n  })(),\n\n  tick: (function() {\n    const move = new THREE.Matrix4();\n    const trans = new THREE.Matrix4();\n    const transInv = new THREE.Matrix4();\n    const pivotPos = new THREE.Vector3();\n    const rotationAxis = new THREE.Vector3(0, 1, 0);\n    const yawMatrix = new THREE.Matrix4();\n    const rotationMatrix = new THREE.Matrix4();\n    const rotationInvMatrix = new THREE.Matrix4();\n    const pivotRotationMatrix = new THREE.Matrix4();\n    const pivotRotationInvMatrix = new THREE.Matrix4();\n    const startPos = new THREE.Vector3();\n    const startScale = new THREE.Vector3();\n\n    return function(t, dt) {\n      if (!this.el.sceneEl.is(\"entered\")) return;\n      const deltaSeconds = dt / 1000;\n      const root = this.el.object3D;\n      const pivot = this.data.pivot.object3D;\n      const distance = this.data.groundAcc * deltaSeconds;\n\n      const userinput = AFRAME.scenes[0].systems.userinput;\n      const userinputAngularVelocity = userinput.get(paths.actions.angularVelocity);\n      if (userinputAngularVelocity !== null && userinputAngularVelocity !== undefined) {\n        this.angularVelocity = userinputAngularVelocity;\n      }\n      const rotationDelta = this.data.rotationSpeed * this.angularVelocity * deltaSeconds;\n\n      pivot.updateMatrices();\n      root.updateMatrices();\n\n      startScale.copy(root.scale);\n      startPos.copy(root.position);\n\n      if (userinput.get(paths.actions.snapRotateLeft)) {\n        this.snapRotateLeft();\n      }\n      if (userinput.get(paths.actions.snapRotateRight)) {\n        this.snapRotateRight();\n      }\n      const acc = userinput.get(paths.actions.characterAcceleration);\n      if (acc) {\n        this.accelerationInput.set(\n          this.accelerationInput.x + acc[0],\n          this.accelerationInput.y + 0,\n          this.accelerationInput.z + acc[1]\n        );\n      }\n\n      pivotPos.copy(pivot.position);\n      pivotPos.applyMatrix4(root.matrix);\n      trans.setPosition(pivotPos);\n      transInv.makeTranslation(-pivotPos.x, -pivotPos.y, -pivotPos.z);\n      rotationMatrix.makeRotationAxis(rotationAxis, root.rotation.y);\n      rotationInvMatrix.makeRotationAxis(rotationAxis, -root.rotation.y);\n      pivotRotationMatrix.makeRotationAxis(rotationAxis, pivot.rotation.y);\n      pivotRotationInvMatrix.makeRotationAxis(rotationAxis, -pivot.rotation.y);\n      this.updateVelocity(deltaSeconds, pivot);\n      this.accelerationInput.set(0, 0, 0);\n\n      const boost = userinput.get(paths.actions.boost) ? 2 : 1;\n      move.makeTranslation(\n        this.velocity.x * distance * boost,\n        this.velocity.y * distance * boost,\n        this.velocity.z * distance * boost\n      );\n      yawMatrix.makeRotationAxis(rotationAxis, rotationDelta);\n\n      // Translate to middle of playspace (player rig)\n      root.matrix.premultiply(transInv);\n      // Zero playspace (player rig) rotation\n      root.matrix.premultiply(rotationInvMatrix);\n      // Zero pivot (camera/head) rotation\n      root.matrix.premultiply(pivotRotationInvMatrix);\n      // Apply joystick translation\n      root.matrix.premultiply(move);\n      // Apply joystick yaw rotation\n      root.matrix.premultiply(yawMatrix);\n      // Apply snap rotation if necessary\n      root.matrix.premultiply(this.pendingSnapRotationMatrix);\n      // Reapply pivot (camera/head) rotation\n      root.matrix.premultiply(pivotRotationMatrix);\n      // Reapply playspace (player rig) rotation\n      root.matrix.premultiply(rotationMatrix);\n      // Reapply playspace (player rig) translation\n      root.matrix.premultiply(trans);\n      // update pos/rot/scale\n      root.matrix.decompose(root.position, root.quaternion, root.scale);\n\n      // TODO: the above matrix trnsfomraitons introduce some floating point errors in scale, this reverts them to\n      // avoid spamming network with fake scale updates\n      root.scale.copy(startScale);\n\n      this.pendingSnapRotationMatrix.identity(); // Revert to identity\n\n      if (this.velocity.lengthSq() > EPS && !this.data.fly) {\n        this.setPositionOnNavMesh(startPos, root.position, root);\n      }\n\n      root.matrixNeedsUpdate = true;\n    };\n  })(),\n\n  _warnWithWarningLimit: function(msg) {\n    if (!this._withinWarningLimit) return;\n    this._warningCount++;\n    if (this._warningCount > MAX_WARNINGS) {\n      this._withinWarningLimit = false;\n      msg = \"Warning count exceeded. Will not log further warnings\";\n    }\n    console.warn(\"character-controller\", msg);\n  },\n\n  _setNavNode: function(pos) {\n    if (this.navNode !== null) return;\n    const { pathfinder } = this.el.sceneEl.systems.nav;\n    this.navNode =\n      pathfinder.getClosestNode(pos, NAV_ZONE, this.navGroup, true) ||\n      pathfinder.getClosestNode(pos, NAV_ZONE, this.navGroup);\n  },\n\n  setPositionOnNavMesh: function(start, end, object3D) {\n    const { pathfinder } = this.el.sceneEl.systems.nav;\n    if (!(NAV_ZONE in pathfinder.zones)) return;\n    if (this.navGroup === null) {\n      this.navGroup = pathfinder.getGroup(NAV_ZONE, end, true, true);\n    }\n    this._setNavNode(end);\n    this.navNode = pathfinder.clampStep(start, end, this.navNode, NAV_ZONE, this.navGroup, object3D.position);\n    object3D.matrixNeedsUpdate = true;\n  },\n\n  updateVelocity: function(dt, pivot) {\n    const data = this.data;\n    const velocity = this.velocity;\n\n    // If FPS too low, reset velocity.\n    if (dt > MAX_DELTA) {\n      velocity.x = 0;\n      velocity.y = 0;\n      velocity.z = 0;\n      return;\n    }\n\n    // Decay velocity.\n    if (velocity.x !== 0) {\n      velocity.x -= velocity.x * data.easing * dt;\n    }\n    if (velocity.y !== 0) {\n      velocity.y -= velocity.y * data.easing * dt;\n    }\n    if (velocity.z !== 0) {\n      velocity.z -= velocity.z * data.easing * dt;\n    }\n\n    const dvx = data.groundAcc * dt * this.accelerationInput.x;\n    const dvz = data.groundAcc * dt * -this.accelerationInput.z;\n    velocity.x += dvx;\n\n    if (this.data.fly) {\n      velocity.y += dvz * -Math.sin(pivot.rotation.x);\n      velocity.z += dvz * Math.cos(pivot.rotation.x);\n    } else {\n      velocity.z += dvz;\n    }\n\n    const decay = 0.7;\n    this.accelerationInput.x = this.accelerationInput.x * decay;\n    this.accelerationInput.z = this.accelerationInput.z * decay;\n\n    if (Math.abs(velocity.x) < CLAMP_VELOCITY) {\n      velocity.x = 0;\n    }\n    if (Math.abs(velocity.y) < CLAMP_VELOCITY) {\n      velocity.y = 0;\n    }\n    if (Math.abs(velocity.z) < CLAMP_VELOCITY) {\n      velocity.z = 0;\n    }\n  }\n});\n","import { showHoverEffect } from \"../utils/permissions-utils\";\n\n/**\n * Applies effects to a hoverer based on hover state.\n * @namespace interactables\n * @component hover-visuals\n */\nAFRAME.registerComponent(\"hover-visuals\", {\n  schema: {\n    hand: { type: \"string\" }\n  },\n  init() {\n    // uniforms are set from the component responsible for loading the mesh.\n    this.handleLeftVisuals = this.handleLeftVisuals.bind(this);\n    this.handleRightVisuals = this.handleRightVisuals.bind(this);\n    this.hadLeftVisualLastFrame = false;\n    this.hadRightVisualLastFrame = false;\n    this.uniforms = null;\n  },\n  remove() {\n    this.uniforms = null;\n  },\n  tick() {\n    if (!this.uniforms || !this.uniforms.length) return;\n\n    // Push down loops to assist JIT:\n    if (this.data.hand === \"left\") {\n      this.handleLeftVisuals();\n    } else {\n      this.handleRightVisuals();\n    }\n  },\n\n  handleLeftVisuals: function() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const interactingElement = interaction.state.leftHand.held || interaction.state.leftHand.hovered;\n    const hideVisual = !interactingElement || !showHoverEffect(interactingElement);\n\n    // Last frame, we didn't have a visual so no need to update uniforms.\n    if (hideVisual && !this.hadLeftVisualLastFrame) return;\n    this.hadLeftVisualLastFrame = !hideVisual;\n\n    const elements = this.el.object3D.matrixWorld.elements;\n\n    for (let i = 0, l = this.uniforms.length; i < l; i++) {\n      const uniform = this.uniforms[i];\n      uniform.hubs_HighlightInteractorOne.value = !hideVisual;\n      uniform.hubs_InteractorOnePos.value[0] = elements[12];\n      uniform.hubs_InteractorOnePos.value[1] = elements[13];\n      uniform.hubs_InteractorOnePos.value[2] = elements[14];\n    }\n  },\n\n  handleRightVisuals: function() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n\n    const interactingElement = interaction.state.rightHand.held || interaction.state.rightHand.hovered;\n    const hideVisual = !interactingElement || !showHoverEffect(interactingElement);\n\n    // Last frame, we didn't have a visual so no need to update uniforms.\n    if (hideVisual && !this.hadRightVisualLastFrame) return;\n    this.hadRightVisualLastFrame = !hideVisual;\n\n    const elements = this.el.object3D.matrixWorld.elements;\n\n    for (let i = 0, l = this.uniforms.length; i < l; i++) {\n      const uniform = this.uniforms[i];\n      uniform.hubs_HighlightInteractorTwo.value = !hideVisual;\n      uniform.hubs_InteractorTwoPos.value[0] = elements[12];\n      uniform.hubs_InteractorTwoPos.value[1] = elements[13];\n      uniform.hubs_InteractorTwoPos.value[2] = elements[14];\n    }\n  }\n});\n","import { injectCustomShaderChunks } from \"../utils/media-utils\";\nimport { AVATAR_TYPES } from \"../utils/avatar-utils\";\nimport { registerComponentInstance } from \"../utils/component-utils\";\nimport { deregisterComponentInstance } from \"../utils/component-utils\";\n\nfunction ensureAvatarNodes(json) {\n  const { nodes } = json;\n  if (!nodes.some(node => node.name === \"Head\")) {\n    // If the avatar model doesn't have a Head node. The user has probably chosen a custom GLB.\n    // So, we need to construct a suitable hierarchy for avatar functionality to work.\n    // We re-parent the original root node to the Head node and set the scene root to a new AvatarRoot.\n\n    // Note: We assume that the first node in the primary scene is the one we care about.\n    const originalRoot = json.scenes[json.scene].nodes[0];\n    nodes.push({ name: \"LeftEye\", extensions: { MOZ_hubs_components: {} } });\n    nodes.push({ name: \"RightEye\", extensions: { MOZ_hubs_components: {} } });\n    nodes.push({\n      name: \"Head\",\n      children: [originalRoot, nodes.length - 1, nodes.length - 2],\n      extensions: { MOZ_hubs_components: { \"scale-audio-feedback\": \"\" } }\n    });\n    nodes.push({ name: \"Neck\", children: [nodes.length - 1] });\n    nodes.push({ name: \"Spine\", children: [nodes.length - 1] });\n    nodes.push({ name: \"Hips\", children: [nodes.length - 1] });\n    nodes.push({ name: \"AvatarRoot\", children: [nodes.length - 1] });\n    json.scenes[json.scene].nodes[0] = nodes.length - 1;\n  }\n  return json;\n}\n\n/**\n * Sets player info state, including avatar choice and display name.\n * @namespace avatar\n * @component player-info\n */\nAFRAME.registerComponent(\"player-info\", {\n  schema: {\n    avatarSrc: { type: \"string\" },\n    avatarType: { type: \"string\", default: AVATAR_TYPES.LEGACY }\n  },\n  init() {\n    this.displayName = null;\n    this.communityIdentifier = null;\n    this.isOwner = false;\n    this.isRecording = false;\n    this.applyProperties = this.applyProperties.bind(this);\n    this.updateDisplayName = this.updateDisplayName.bind(this);\n    this.applyDisplayName = this.applyDisplayName.bind(this);\n    this.handleModelError = this.handleModelError.bind(this);\n\n    this.isLocalPlayerInfo = this.el.id === \"player-rig\";\n    this.playerSessionId = null;\n\n    if (!this.isLocalPlayerInfo) {\n      NAF.utils.getNetworkedEntity(this.el).then(networkedEntity => {\n        this.playerSessionId = NAF.utils.getCreator(networkedEntity);\n        const playerPresence = window.APP.hubChannel.presence.state[this.playerSessionId];\n        if (playerPresence) {\n          this.updateDisplayNameFromPresenceMeta(playerPresence.metas[0]);\n        }\n      });\n    }\n    registerComponentInstance(this, \"player-info\");\n  },\n  remove() {\n    deregisterComponentInstance(this, \"player-info\");\n  },\n  play() {\n    this.el.addEventListener(\"model-loaded\", this.applyProperties);\n    this.el.sceneEl.addEventListener(\"presence_updated\", this.updateDisplayName);\n    if (this.isLocalPlayerInfo) {\n      this.el.querySelector(\".model\").addEventListener(\"model-error\", this.handleModelError);\n    }\n  },\n  pause() {\n    this.el.removeEventListener(\"model-loaded\", this.applyProperties);\n    this.el.sceneEl.removeEventListener(\"presence_updated\", this.updateDisplayName);\n    if (this.isLocalPlayerInfo) {\n      this.el.querySelector(\".model\").removeEventListener(\"model-error\", this.handleModelError);\n    }\n  },\n  update() {\n    this.applyProperties();\n  },\n  updateDisplayName(e) {\n    if (!this.playerSessionId && this.isLocalPlayerInfo) {\n      this.playerSessionId = NAF.clientId;\n    }\n    if (!this.playerSessionId) return;\n    if (this.playerSessionId !== e.detail.sessionId) return;\n\n    this.updateDisplayNameFromPresenceMeta(e.detail);\n  },\n  updateDisplayNameFromPresenceMeta(presenceMeta) {\n    this.displayName = presenceMeta.profile.displayName;\n    this.communityIdentifier = presenceMeta.profile.communityIdentifier;\n    this.isRecording = !!(presenceMeta.streaming || presenceMeta.recording);\n    this.isOwner = !!(presenceMeta.roles && presenceMeta.roles.owner);\n    this.applyDisplayName();\n  },\n  applyDisplayName() {\n    const nametagEl = this.el.querySelector(\".nametag\");\n    if (this.displayName && nametagEl) {\n      nametagEl.setAttribute(\"text\", { value: this.displayName });\n    }\n    const communityIdentifierEl = this.el.querySelector(\".communityIdentifier\");\n    if (communityIdentifierEl) {\n      if (this.communityIdentifier) {\n        communityIdentifierEl.setAttribute(\"text\", { value: this.communityIdentifier });\n      }\n    }\n    const recordingBadgeEl = this.el.querySelector(\".recordingBadge\");\n    if (recordingBadgeEl) {\n      recordingBadgeEl.object3D.visible = this.isRecording;\n    }\n\n    const modBadgeEl = this.el.querySelector(\".modBadge\");\n    if (modBadgeEl) {\n      modBadgeEl.object3D.visible = !this.isRecording && this.isOwner;\n    }\n  },\n  applyProperties() {\n    this.applyDisplayName();\n\n    const modelEl = this.el.querySelector(\".model\");\n    if (this.data.avatarSrc && modelEl) {\n      modelEl.components[\"gltf-model-plus\"].jsonPreprocessor = ensureAvatarNodes;\n      modelEl.setAttribute(\"gltf-model-plus\", \"src\", this.data.avatarSrc);\n      this.el.sceneEl.systems[\"camera-tools\"].avatarUpdated();\n    }\n\n    const uniforms = injectCustomShaderChunks(this.el.object3D);\n    this.el.querySelectorAll(\"[hover-visuals]\").forEach(el => {\n      el.components[\"hover-visuals\"].uniforms = uniforms;\n    });\n  },\n  handleModelError() {\n    window.APP.store.resetToRandomLegacyAvatar();\n  }\n});\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\n\nconst POSES = {\n  open: \"allOpen\",\n  thumbDown: \"thumbDown\",\n  indexDown: \"indexDown\",\n  mrpDown: \"mrpDown\",\n  thumbUp: \"thumbsUp\",\n  point: \"point\",\n  fist: \"allGrip\",\n  pinch: \"pinch\"\n};\n\nconst NETWORK_POSES = [\"allOpen\", \"thumbDown\", \"indexDown\", \"mrpDown\", \"thumbsUp\", \"point\", \"allGrip\", \"pinch\"];\n\n/**\n * Animates between poses based on networked pose state using an animation mixer.\n * @namespace avatar\n * @component hand-pose\n */\nAFRAME.registerComponent(\"hand-pose\", {\n  multiple: true,\n\n  init() {\n    this.pose = 0;\n    this.animatePose = this.animatePose.bind(this);\n    const mixerEl = findAncestorWithComponent(this.el, \"animation-mixer\");\n    const suffix = this.id == \"left\" ? \"_L\" : \"_R\";\n    this.mixer = mixerEl && mixerEl.components[\"animation-mixer\"].mixer;\n    if (!this.mixer || !this.mixer.clipAction(POSES.open + suffix)) {\n      console.warn(\"Avatar does not an 'allOpen' animation, disabling hand animations\");\n      this.el.removeAttribute(\"hand-pose\");\n      return;\n    }\n    this.from = this.to = this.mixer.clipAction(POSES.open + suffix);\n    this.from.play();\n    this.networkField = `${this.id}_hand_pose`;\n\n    const getNetworkedAvatar = el => {\n      if (!el) {\n        window.setTimeout(() => {\n          getNetworkedAvatar(this.el);\n        }, 1000);\n        return;\n      }\n      const networkedAvatar = el.components && el.components[\"networked-avatar\"];\n      if (networkedAvatar) {\n        return networkedAvatar;\n      }\n      return getNetworkedAvatar(el.parentEl);\n    };\n    this.networkedAvatar = getNetworkedAvatar(this.el);\n  },\n\n  tick() {\n    if (\n      !this.networkedAvatar ||\n      !this.networkedAvatar.data ||\n      this.networkedAvatar.data[this.networkField] === this.pose\n    ) {\n      return;\n    }\n\n    this.animatePose(NETWORK_POSES[this.pose], NETWORK_POSES[this.networkedAvatar.data[this.networkField]]);\n    this.pose = this.networkedAvatar.data[this.networkField];\n  },\n\n  animatePose(prev, curr) {\n    this.from.stop();\n    this.to.stop();\n\n    const duration = 0.065;\n    const suffix = this.id == \"left\" ? \"_L\" : \"_R\";\n    this.from = this.mixer.clipAction(prev + suffix);\n    this.to = this.mixer.clipAction(curr + suffix);\n\n    this.from.fadeOut(duration);\n    this.to.fadeIn(duration);\n    this.to.play();\n    this.from.play();\n\n    this.mixer.update(0.001);\n  }\n});\n\n/**\n * Sets the networked hand pose state based on hand-pose events.\n * @namespace avatar\n * @component hand-pose-controller\n */\nAFRAME.registerComponent(\"hand-pose-controller\", {\n  multiple: true,\n  schema: {\n    eventSrc: { type: \"selector\" },\n    networkedAvatar: { type: \"selector\" }\n  },\n  init: function() {\n    this.setHandPose = this.setHandPose.bind(this);\n  },\n\n  play: function() {\n    this.data.eventSrc.addEventListener(\"hand-pose\", this.setHandPose);\n  },\n\n  pause: function() {\n    this.data.eventSrc.removeEventListener(\"hand-pose\", this.setHandPose);\n  },\n\n  setHandPose: function(evt) {\n    this.data.networkedAvatar.setAttribute(\n      \"networked-avatar\",\n      `${this.id}_hand_pose`,\n      NETWORK_POSES.indexOf(POSES[evt.detail.current])\n    );\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\nimport { SOUND_FREEZE, SOUND_THAW } from \"../systems/sound-effects-system\";\n\n/**\n * Toggles freezing of network traffic on the given event.\n * @namespace network\n * @component freeze-controller\n */\nAFRAME.registerComponent(\"freeze-controller\", {\n  schema: {\n    toggleEvent: { type: \"string\" }\n  },\n\n  init: function() {\n    this.onToggle = this.onToggle.bind(this);\n  },\n\n  play: function() {\n    this.el.addEventListener(this.data.toggleEvent, this.onToggle);\n  },\n\n  pause: function() {\n    this.el.removeEventListener(this.data.toggleEvent, this.onToggle);\n  },\n\n  tick: function() {\n    const scene = this.el.sceneEl;\n    if (!scene.is(\"entered\")) return;\n\n    const userinput = scene.systems.userinput;\n    const ensureFrozen = userinput.get(paths.actions.ensureFrozen);\n    const thaw = userinput.get(paths.actions.thaw);\n    const toggleFreeze = userinput.get(paths.actions.toggleFreeze);\n\n    const toggleFreezeDueToInput =\n      (this.el.is(\"frozen\") && thaw) || (!this.el.is(\"frozen\") && ensureFrozen) || toggleFreeze;\n\n    if (toggleFreezeDueToInput) {\n      this.onToggle();\n    }\n  },\n\n  onToggle: function() {\n    window.APP.store.update({ activity: { hasFoundFreeze: true } });\n    if (!NAF.connection.adapter) return;\n    NAF.connection.adapter.toggleFreeze();\n    if (NAF.connection.adapter.frozen) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_FREEZE);\n      this.el.addState(\"frozen\");\n    } else {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_THAW);\n      this.el.removeState(\"frozen\");\n    }\n  }\n});\n","import { getLastWorldPosition } from \"../utils/three-utils\";\n\nconst isMobile = AFRAME.utils.device.isMobile();\n\n/**\n * Toggles the visibility of this entity when the scene is frozen.\n * @namespace ui\n * @component visibility-while-frozen\n */\nAFRAME.registerComponent(\"visibility-while-frozen\", {\n  schema: {\n    withinDistance: { type: \"number\" },\n    visible: { type: \"boolean\", default: true },\n    requireHoverOnNonMobile: { type: \"boolean\", default: true },\n    withPermission: { type: \"string\" }\n  },\n\n  init() {\n    this.updateVisibility = this.updateVisibility.bind(this);\n    this.camWorldPos = new THREE.Vector3();\n    this.objWorldPos = new THREE.Vector3();\n    this.cam = this.el.sceneEl.camera.el.object3D;\n\n    let hoverableSearch = this.el;\n\n    while (hoverableSearch !== document) {\n      if (hoverableSearch.getAttribute(\"is-remote-hover-target\") !== null) {\n        this.hoverable = hoverableSearch;\n        break;\n      }\n\n      hoverableSearch = hoverableSearch.parentNode;\n    }\n    if (!this.hoverable && this.data.requireHoverOnNonMobile) {\n      console.error(\"Didn't find a remote hover target.\");\n    }\n\n    this.onStateChange = evt => {\n      if (!evt.detail === \"frozen\") return;\n      this.updateVisibility();\n    };\n    this.updateVisibility();\n  },\n\n  tick() {\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n    const isVisible = this.el.object3D.visible;\n    const shouldNotBeVisible = isFrozen === !this.data.visible;\n    if (!isVisible && shouldNotBeVisible) return;\n\n    this.updateVisibility();\n  },\n\n  updateVisibility() {\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n\n    let isWithinDistance = true;\n    const isVisible = this.el.object3D.visible;\n\n    if (this.data.withinDistance) {\n      if (!isVisible) {\n        // Edge case, if the object is not visible force a matrix update\n        // since the main matrix update loop will not do it.\n        this.el.object3D.updateMatrices(true, true);\n      }\n\n      getLastWorldPosition(this.cam, this.camWorldPos);\n      this.objWorldPos.copy(this.el.object3D.position);\n      this.el.object3D.localToWorld(this.objWorldPos);\n\n      isWithinDistance =\n        this.camWorldPos.distanceToSquared(this.objWorldPos) < this.data.withinDistance * this.data.withinDistance;\n    }\n\n    const isTransforming = AFRAME.scenes[0].systems[\"transform-selected-object\"].transforming;\n\n    const allowed = !this.data.withPermission || window.APP.hubChannel.canOrWillIfCreator(this.data.withPermission);\n\n    let shouldBeVisible =\n      allowed &&\n      ((isFrozen && this.data.visible) || (!isFrozen && !this.data.visible)) &&\n      isWithinDistance &&\n      !isTransforming;\n\n    if (this.data.requireHoverOnNonMobile && !isMobile) {\n      shouldBeVisible =\n        shouldBeVisible &&\n        ((this.hoverable && AFRAME.scenes[0].systems.interaction.state.rightRemote.hovered === this.hoverable) ||\n          isVisible);\n    }\n\n    if (isVisible !== shouldBeVisible) {\n      this.el.setAttribute(\"visible\", shouldBeVisible);\n    }\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateChange);\n\n    if (this.hoverable) {\n      this.hoverable.object3D.addEventListener(\"hovered\", this.updateVisibility);\n      this.hoverable.object3D.addEventListener(\"unhovered\", this.updateVisibility);\n    }\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateChange);\n\n    if (this.hoverable) {\n      this.hoverable.object3D.addEventListener(\"hovered\", this.updateVisibility);\n      this.hoverable.object3D.addEventListener(\"unhovered\", this.updateVisibility);\n    }\n  }\n});\n\n/**\n * Toggles the interactivity of a UI entity while the scene is frozen.\n * @namespace ui\n * @component ui-class-while-frozen\n */\nAFRAME.registerComponent(\"ui-class-while-frozen\", {\n  init() {\n    this.onStateChange = evt => {\n      if (!evt.detail === \"frozen\") return;\n      this.el.classList.toggle(\"ui\", this.el.sceneEl.is(\"frozen\"));\n    };\n    this.el.classList.toggle(\"ui\", this.el.sceneEl.is(\"frozen\"));\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateChange);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateChange);\n  }\n});\n","import \"./stats-plus.css\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\n// Adapted from https://github.com/aframevr/aframe/blob/master/src/components/scene/stats.js\n\nfunction createStats(scene) {\n  const threeStats = new window.threeStats(scene.renderer);\n  const aframeStats = new window.aframeStats(scene);\n  const plugins = scene.isMobile ? [] : [threeStats, aframeStats];\n  return new window.rStats({\n    css: [], // Our stylesheet is injected from AFrame.\n    values: {\n      fps: { caption: \"fps\", below: 30 },\n      batchdraws: { caption: \"Draws\" },\n      batchinstances: { caption: \"Instances\" },\n      batchatlassize: { caption: \"Atlas Size\" }\n    },\n    groups: [\n      { caption: \"Framerate\", values: [\"fps\", \"raf\", \"physics\"] },\n      { caption: \"Batching\", values: [\"batchdraws\", \"batchinstances\", \"batchatlassize\"] }\n    ],\n    plugins: plugins\n  });\n}\n\nconst HIDDEN_CLASS = \"a-hidden\";\n\nAFRAME.registerComponent(\"stats-plus\", {\n  // Whether or not the stats panel is expanded.\n  // Shows FPS counter when collapsed.\n  schema: { default: false },\n  init() {\n    this.onExpand = this.onExpand.bind(this);\n    this.onCollapse = this.onCollapse.bind(this);\n    this.onEnterVr = this.onEnterVr.bind(this);\n    this.onExitVr = this.onExitVr.bind(this);\n\n    const scene = this.el.sceneEl;\n    this.stats = createStats(scene);\n    this.statsEl = document.querySelector(\".rs-base\");\n\n    // Add header to stats panel so we can collapse it\n    const statsHeaderEl = document.createElement(\"div\");\n    statsHeaderEl.classList.add(\"rs-header\");\n\n    const statsTitleEl = document.createElement(\"h1\");\n    statsTitleEl.innerHTML = \"Stats\";\n    statsHeaderEl.appendChild(statsTitleEl);\n\n    const collapseEl = document.createElement(\"div\");\n    collapseEl.classList.add(\"rs-collapse-btn\");\n    collapseEl.innerHTML = \"X\";\n    collapseEl.addEventListener(\"click\", this.onCollapse);\n    statsHeaderEl.appendChild(collapseEl);\n\n    this.statsEl.insertBefore(statsHeaderEl, this.statsEl.firstChild);\n\n    // Add fps counter to the page\n    this.fpsEl = document.createElement(\"div\");\n    this.fpsEl.addEventListener(\"click\", this.onExpand);\n    this.fpsEl.classList.add(\"rs-fps-counter\");\n    document.body.appendChild(this.fpsEl);\n    this.lastFpsUpdate = performance.now();\n    this.lastFps = 0;\n    this.frameCount = 0;\n    this.inVR = scene.is(\"vr-mode\");\n\n    if (scene.isMobile) {\n      this.statsEl.classList.add(\"rs-mobile\");\n      this.fpsEl.classList.add(\"rs-mobile\");\n    }\n\n    scene.addEventListener(\"enter-vr\", this.onEnterVr);\n    scene.addEventListener(\"exit-vr\", this.onExitVr);\n\n    this.vrStatsEnabled = qsTruthy(\"vrstats\");\n    if (this.vrStatsEnabled) {\n      this.initVRStats();\n    }\n    this.lastUpdate = 0;\n  },\n  initVRStats() {\n    this.vrPanel = document.createElement(\"a-entity\");\n    this.vrPanel.setAttribute(\"text\", { width: 0.5, whiteSpace: \"pre\", value: \"_\", baseline: \"bottom\" });\n    this.vrPanel.addEventListener(\n      \"loaded\",\n      () =>\n        this.vrPanel.object3D.traverse(x => {\n          if (x.material) x.material.depthTest = false;\n        }),\n      { once: true }\n    );\n    this.el.append(this.vrPanel);\n    const background = document.createElement(\"a-plane\");\n    background.setAttribute(\"color\", \"#333333\");\n    background.setAttribute(\"material\", \"shader\", \"flat\");\n    background.setAttribute(\"material\", \"depthTest\", false);\n    background.setAttribute(\"width\", 0.1);\n    background.setAttribute(\"height\", 0.12);\n    background.setAttribute(\"position\", \"-0.2 0.055 0\");\n    this.el.append(background);\n  },\n  toggleVRStats() {\n    if (this.vrStatsEnabled) {\n      this.el.object3D.visible = false;\n      this.vrStatsEnabled = false;\n    } else {\n      if (!this.vrPanel) {\n        this.initVRStats();\n      }\n      this.el.object3D.visible = true;\n      this.vrStatsEnabled = true;\n    }\n  },\n  play() {\n    this.el.sceneEl.systems.physics.addComponent(this);\n  },\n  pause() {\n    this.el.sceneEl.systems.physics.removeComponent(this);\n  },\n  beforeStep() {\n    this.stats(\"physics\").start();\n  },\n  afterStep() {\n    this.stats(\"physics\").end();\n  },\n  update(oldData) {\n    if (oldData !== this.data) {\n      if (this.data) {\n        this.statsEl.classList.remove(HIDDEN_CLASS);\n        this.fpsEl.classList.add(HIDDEN_CLASS);\n      } else {\n        this.statsEl.classList.add(HIDDEN_CLASS);\n        this.fpsEl.classList.remove(HIDDEN_CLASS);\n      }\n    }\n  },\n  tick(time) {\n    const stats = this.stats;\n    if (this.data || this.vrStatsEnabled) {\n      // Update rStats\n      stats(\"rAF\").tick();\n      stats(\"FPS\").frame();\n\n      const batchManagerSystem = this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem;\n      if (batchManagerSystem.batchingEnabled) {\n        const batchManager = batchManagerSystem.batchManager;\n        stats(\"batchdraws\").set(batchManager.batches.length);\n        stats(\"batchinstances\").set(batchManager.instanceCount);\n        stats(\"batchatlassize\").set(batchManager.atlas.arrayDepth);\n      }\n\n      stats().update();\n    } else if (!this.inVR) {\n      // Update the fps counter\n      const now = performance.now();\n      this.frameCount++;\n\n      // Update the fps counter text once a second\n      if (now >= this.lastFpsUpdate + 1000) {\n        const fps = Math.round(this.frameCount / ((now - this.lastFpsUpdate) / 1000));\n        if (fps !== this.lastFps) {\n          this.fpsEl.innerHTML = Math.round(fps) + \" FPS\";\n          this.lastFps = fps;\n        }\n        this.lastFpsUpdate = now;\n        this.frameCount = 0;\n      }\n    }\n    if (this.vrStatsEnabled && time - this.lastUpdate > 100) {\n      this.vrPanel.setAttribute(\n        \"text\",\n        \"value\",\n        [\n          `f ${stats(\"fps\")\n            .value()\n            .toFixed(0)}`,\n          `r ${stats(\"raf\")\n            .value()\n            .toFixed(0)}`,\n          `p ${stats(\"physics\")\n            .value()\n            .toFixed(0)}`,\n          `c ${this.el.sceneEl.renderer.info.render.calls}`,\n          `t ${(this.el.sceneEl.renderer.info.render.triangles / 1000).toFixed(0)}k`\n        ].join(\"\\n\")\n      );\n      this.lastUpdate = time;\n    }\n  },\n  onEnterVr() {\n    this.inVR = true;\n    // Hide all stats elements when entering VR on mobile\n    if (this.el.sceneEl.isMobile) {\n      this.statsEl.classList.add(HIDDEN_CLASS);\n      this.fpsEl.classList.add(HIDDEN_CLASS);\n    }\n  },\n  onExitVr() {\n    this.inVR = false;\n    // Revert to previous state whe exiting VR on mobile\n    if (this.el.sceneEl.isMobile) {\n      if (this.data) {\n        this.statsEl.classList.remove(HIDDEN_CLASS);\n      } else {\n        this.fpsEl.classList.remove(HIDDEN_CLASS);\n      }\n    }\n  },\n  onExpand() {\n    this.el.setAttribute(this.name, true);\n  },\n  onCollapse() {\n    this.el.setAttribute(this.name, false);\n  },\n  remove() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.hide);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.show);\n\n    if (this.statsEl) {\n      this.statsEl.parentNode.removeChild(this.statsEl);\n      this.fpsEl.parentNode.removeChild(this.fpsEl);\n    }\n  }\n});\n","/* global performance THREE AFRAME NAF MediaStream process setTimeout */\nimport GIFWorker from \"../workers/gifparsing.worker.js\";\nimport errorImageSrc from \"!!url-loader!../assets/images/media-error.gif\";\nimport { paths } from \"../systems/userinput/paths\";\nimport HLS from \"hls.js/dist/hls.light.js\";\nimport { addAndArrangeMedia, createImageTexture } from \"../utils/media-utils\";\nimport { proxiedUrlFor } from \"../utils/media-url-utils\";\nimport { buildAbsoluteURL } from \"url-toolkit\";\nimport { SOUND_CAMERA_TOOL_TOOK_SNAPSHOT } from \"../systems/sound-effects-system\";\nimport { promisifyWorker } from \"../utils/promisify-worker.js\";\n\nconst ONCE_TRUE = { once: true };\nconst TYPE_IMG_PNG = { type: \"image/png\" };\nconst parseGIF = promisifyWorker(new GIFWorker());\n\nexport const VOLUME_LABELS = [];\nfor (let i = 0; i <= 20; i++) {\n  let s = \"|\";\n  for (let j = 0; j <= 20; j++) {\n    s += i >= j ? \"|\" : \" \";\n  }\n  s += \"|\";\n  VOLUME_LABELS[i] = s;\n}\n\nclass GIFTexture extends THREE.Texture {\n  constructor(frames, delays, disposals) {\n    super(document.createElement(\"canvas\"));\n    this.image.width = frames[0].width;\n    this.image.height = frames[0].height;\n\n    this._ctx = this.image.getContext(\"2d\");\n\n    this.generateMipmaps = false;\n    this.isVideoTexture = true;\n    this.minFilter = THREE.NearestFilter;\n\n    this.frames = frames;\n    this.delays = delays;\n    this.disposals = disposals;\n\n    this.frame = 0;\n    this.frameStartTime = Date.now();\n  }\n\n  update() {\n    if (!this.frames || !this.delays || !this.disposals) return;\n    const now = Date.now();\n    if (now - this.frameStartTime > this.delays[this.frame]) {\n      if (this.disposals[this.frame] === 2) {\n        this._ctx.clearRect(0, 0, this.image.width, this.image.width);\n      }\n      this.frame = (this.frame + 1) % this.frames.length;\n      this.frameStartTime = now;\n      this._ctx.drawImage(this.frames[this.frame], 0, 0, this.image.width, this.image.height);\n      this.needsUpdate = true;\n    }\n  }\n}\n\nasync function createGIFTexture(url) {\n  return new Promise((resolve, reject) => {\n    fetch(url, { mode: \"cors\" })\n      .then(r => r.arrayBuffer())\n      .then(rawImageData => parseGIF(rawImageData, [rawImageData]))\n      .then(result => {\n        const { frames, delayTimes, disposals } = result;\n        let loadCnt = 0;\n        for (let i = 0; i < frames.length; i++) {\n          const img = new Image();\n          img.onload = e => {\n            loadCnt++;\n            frames[i] = e.target;\n            if (loadCnt === frames.length) {\n              const texture = new GIFTexture(frames, delayTimes, disposals);\n              texture.image.src = url;\n              texture.encoding = THREE.sRGBEncoding;\n              texture.minFilter = THREE.LinearFilter;\n              resolve(texture);\n            }\n          };\n          img.src = frames[i];\n        }\n      })\n      .catch(reject);\n  });\n}\n\nconst isIOS = AFRAME.utils.device.isIOS();\n\n/**\n * Create video element to be used as a texture.\n *\n * @param {string} src - Url to a video file.\n * @returns {Element} Video element.\n */\nasync function createVideoEl() {\n  const videoEl = document.createElement(\"video\");\n  videoEl.setAttribute(\"playsinline\", \"\");\n  videoEl.setAttribute(\"webkit-playsinline\", \"\");\n  // iOS Safari requires the autoplay attribute, or it won't play the video at all.\n  videoEl.autoplay = true;\n  // iOS Safari will not play videos without user interaction. We mute the video so that it can autoplay and then\n  // allow the user to unmute it with an interaction in the unmute-video-button component.\n  videoEl.muted = isIOS;\n  videoEl.preload = \"auto\";\n  videoEl.crossOrigin = \"anonymous\";\n\n  return videoEl;\n}\n\nfunction createVideoTexture(url, contentType) {\n  return new Promise(async (resolve, reject) => {\n    const videoEl = await createVideoEl();\n\n    const texture = new THREE.VideoTexture(videoEl);\n    texture.minFilter = THREE.LinearFilter;\n    texture.encoding = THREE.sRGBEncoding;\n\n    if (url.startsWith(\"hubs://\")) {\n      const streamClientId = url.substring(7).split(\"/\")[1]; // /clients/<client id>/video is only URL for now\n      const stream = await NAF.connection.adapter.getMediaStream(streamClientId, \"video\");\n      videoEl.srcObject = new MediaStream(stream.getVideoTracks());\n      // If hls.js is supported we always use it as it gives us better events\n    } else if (AFRAME.utils.material.isHLS(url, contentType)) {\n      if (HLS.isSupported()) {\n        const corsProxyPrefix = `https://${process.env.CORS_PROXY_SERVER}/`;\n        const baseUrl = url.startsWith(corsProxyPrefix) ? url.substring(corsProxyPrefix.length) : url;\n        const hls = new HLS({\n          xhrSetup: (xhr, u) => {\n            if (u.startsWith(corsProxyPrefix)) {\n              u = u.substring(corsProxyPrefix.length);\n            }\n\n            // HACK HLS.js resolves relative urls internally, but our CORS proxying screws it up. Resolve relative to the original unproxied url.\n            // TODO extend HLS.js to allow overriding of its internal resolving instead\n            if (!u.startsWith(\"http\")) {\n              u = buildAbsoluteURL(baseUrl, u.startsWith(\"/\") ? u : `/${u}`);\n            }\n\n            xhr.open(\"GET\", proxiedUrlFor(u));\n          }\n        });\n        texture.hls = hls;\n        hls.loadSource(url);\n        hls.attachMedia(videoEl);\n        hls.on(HLS.Events.ERROR, function(event, data) {\n          if (data.fatal) {\n            switch (data.type) {\n              case HLS.ErrorTypes.NETWORK_ERROR:\n                // try to recover network error\n                hls.startLoad();\n                break;\n              case HLS.ErrorTypes.MEDIA_ERROR:\n                hls.recoverMediaError();\n                break;\n              default:\n                reject(event);\n                return;\n            }\n          }\n        });\n        // If not, see if native support will work\n      } else if (videoEl.canPlayType(contentType)) {\n        videoEl.src = url;\n        videoEl.onerror = reject;\n      } else {\n        reject(\"HLS unsupported\");\n      }\n    } else {\n      videoEl.src = url;\n      videoEl.onerror = reject;\n    }\n\n    let hasResolved = false;\n\n    const resolveOnce = () => {\n      if (hasResolved) return;\n      hasResolved = true;\n      resolve(texture);\n    };\n\n    videoEl.addEventListener(\"canplay\", resolveOnce, { once: true });\n\n    // HACK: Sometimes iOS fails to fire the canplay event, so we poll for the video dimensions to appear instead.\n    if (isIOS) {\n      const poll = () => {\n        if ((texture.image.videoHeight || texture.image.height) && (texture.image.videoWidth || texture.image.width)) {\n          resolveOnce();\n        } else {\n          setTimeout(poll, 500);\n        }\n      };\n\n      poll();\n    }\n  });\n}\n\nfunction scaleToAspectRatio(el, ratio) {\n  const width = Math.min(1.0, 1.0 / ratio);\n  const height = Math.min(1.0, ratio);\n  el.object3DMap.mesh.scale.set(width, height, 1);\n  el.object3DMap.mesh.matrixNeedsUpdate = true;\n}\n\nfunction disposeTexture(texture) {\n  if (texture.image instanceof HTMLVideoElement) {\n    const video = texture.image;\n    video.pause();\n    video.src = \"\";\n    video.load();\n  }\n\n  if (texture.hls) {\n    texture.hls.destroy();\n  }\n\n  texture.dispose();\n}\n\nclass TextureCache {\n  cache = new Map();\n\n  set(src, texture) {\n    const image = texture.image;\n    this.cache.set(src, {\n      texture,\n      ratio: (image.videoHeight || image.height) / (image.videoWidth || image.width),\n      count: 0\n    });\n    return this.retain(src);\n  }\n\n  has(src) {\n    return this.cache.has(src);\n  }\n\n  get(src) {\n    return this.cache.get(src);\n  }\n\n  retain(src) {\n    const cacheItem = this.cache.get(src);\n    cacheItem.count++;\n    // console.log(\"retain\", src, cacheItem.count);\n    return cacheItem;\n  }\n\n  release(src) {\n    const cacheItem = this.cache.get(src);\n\n    if (!cacheItem) {\n      console.error(`Releasing uncached texture src ${src}`);\n      return;\n    }\n\n    cacheItem.count--;\n    // console.log(\"release\", src, cacheItem.count);\n    if (cacheItem.count <= 0) {\n      // Unload the video element to prevent it from continuing to play in the background\n      disposeTexture(cacheItem.texture);\n      this.cache.delete(src);\n    }\n  }\n}\n\nconst textureCache = new TextureCache();\nconst inflightTextures = new Map();\n\nconst errorImage = new Image();\nerrorImage.src = errorImageSrc;\nconst errorTexture = new THREE.Texture(errorImage);\nerrorTexture.magFilter = THREE.NearestFilter;\nerrorImage.onload = () => {\n  errorTexture.needsUpdate = true;\n};\nconst errorCacheItem = { texture: errorTexture, ratio: 1 };\n\nfunction timeFmt(t) {\n  let s = Math.floor(t),\n    h = Math.floor(s / 3600);\n  s -= h * 3600;\n  let m = Math.floor(s / 60);\n  s -= m * 60;\n  if (h < 10) h = `0${h}`;\n  if (m < 10) m = `0${m}`;\n  if (s < 10) s = `0${s}`;\n  return h === \"00\" ? `${m}:${s}` : `${h}:${m}:${s}`;\n}\n\nAFRAME.registerComponent(\"media-video\", {\n  schema: {\n    src: { type: \"string\" },\n    contentType: { type: \"string\" },\n    volume: { type: \"number\", default: 0.5 },\n    loop: { type: \"boolean\", default: true },\n    audioType: { type: \"string\", default: \"pannernode\" },\n    hidePlaybackControls: { type: \"boolean\", default: false },\n    distanceModel: { type: \"string\", default: \"inverse\" },\n    rolloffFactor: { type: \"number\", default: 1 },\n    refDistance: { type: \"number\", default: 1 },\n    maxDistance: { type: \"number\", default: 10000 },\n    coneInnerAngle: { type: \"number\", default: 360 },\n    coneOuterAngle: { type: \"number\", default: 0 },\n    coneOuterGain: { type: \"number\", default: 0 },\n    videoPaused: { type: \"boolean\" },\n    projection: { type: \"string\", default: \"flat\" },\n    time: { type: \"number\" },\n    tickRate: { default: 1000 }, // ms interval to send time interval updates\n    syncTolerance: { default: 2 }\n  },\n\n  init() {\n    this.onPauseStateChange = this.onPauseStateChange.bind(this);\n    this.tryUpdateVideoPlaybackState = this.tryUpdateVideoPlaybackState.bind(this);\n    this.updateSrc = this.updateSrc.bind(this);\n\n    this.seekForward = this.seekForward.bind(this);\n    this.seekBack = this.seekBack.bind(this);\n    this.volumeUp = this.volumeUp.bind(this);\n    this.volumeDown = this.volumeDown.bind(this);\n    this.snap = this.snap.bind(this);\n    this.changeVolumeBy = this.changeVolumeBy.bind(this);\n    this.togglePlaying = this.togglePlaying.bind(this);\n\n    this.lastUpdate = 0;\n    this.videoMutedAt = 0;\n    this.localSnapCount = 0;\n    this.isSnapping = false;\n    this.onSnapImageLoaded = () => (this.isSnapping = false);\n\n    this.el.setAttribute(\"hover-menu__video\", { template: \"#video-hover-menu\", dirs: [\"forward\", \"back\"] });\n    this.el.components[\"hover-menu__video\"].getHoverMenu().then(menu => {\n      // If we got removed while waiting, do nothing.\n      if (!this.el.parentNode) return;\n\n      this.hoverMenu = menu;\n\n      this.playbackControls = this.el.querySelector(\".video-playback\");\n      this.playPauseButton = this.el.querySelector(\".video-playpause-button\");\n      this.volumeUpButton = this.el.querySelector(\".video-volume-up-button\");\n      this.volumeDownButton = this.el.querySelector(\".video-volume-down-button\");\n      this.seekForwardButton = this.el.querySelector(\".video-seek-forward-button\");\n      this.seekBackButton = this.el.querySelector(\".video-seek-back-button\");\n      this.snapButton = this.el.querySelector(\".video-snap-button\");\n      this.timeLabel = this.el.querySelector(\".video-time-label\");\n      this.volumeLabel = this.el.querySelector(\".video-volume-label\");\n\n      this.playPauseButton.object3D.addEventListener(\"interact\", this.togglePlaying);\n      this.seekForwardButton.object3D.addEventListener(\"interact\", this.seekForward);\n      this.seekBackButton.object3D.addEventListener(\"interact\", this.seekBack);\n      this.volumeUpButton.object3D.addEventListener(\"interact\", this.volumeUp);\n      this.volumeDownButton.object3D.addEventListener(\"interact\", this.volumeDown);\n      this.snapButton.object3D.addEventListener(\"interact\", this.snap);\n\n      this.updateVolumeLabel();\n      this.updateHoverMenuBasedOnLiveState();\n      this.updatePlaybackState();\n    });\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.networkedEl = networkedEl;\n      this.networkedEl.components.networked.applyPersistentFirstSync();\n      this.updatePlaybackState();\n\n      // For scene-owned videos, take ownership after a random delay if nobody\n      // else has so there is a timekeeper. Do not due this on iOS because iOS has an\n      // annoying \"auto-pause\" feature that forces one non-autoplaying video to play\n      // at once, which will pause the videos for everyone in the room if owned.\n      if (!isIOS && NAF.utils.getNetworkOwner(this.networkedEl) === \"scene\") {\n        setTimeout(() => {\n          if (NAF.utils.getNetworkOwner(this.networkedEl) === \"scene\") {\n            NAF.utils.takeOwnership(this.networkedEl);\n          }\n        }, 2000 + Math.floor(Math.random() * 2000));\n      }\n    });\n\n    // from a-sound\n    const sceneEl = this.el.sceneEl;\n    sceneEl.audioListener = sceneEl.audioListener || new THREE.AudioListener();\n    if (sceneEl.camera) {\n      sceneEl.camera.add(sceneEl.audioListener);\n    }\n    sceneEl.addEventListener(\"camera-set-active\", function(evt) {\n      evt.detail.cameraEl.getObject3D(\"camera\").add(sceneEl.audioListener);\n    });\n  },\n\n  seekForward() {\n    if ((!this.videoIsLive && NAF.utils.isMine(this.networkedEl)) || NAF.utils.takeOwnership(this.networkedEl)) {\n      this.video.currentTime += 30;\n      this.el.setAttribute(\"media-video\", \"time\", this.video.currentTime);\n    }\n  },\n\n  seekBack() {\n    if ((!this.videoIsLive && NAF.utils.isMine(this.networkedEl)) || NAF.utils.takeOwnership(this.networkedEl)) {\n      this.video.currentTime -= 10;\n      this.el.setAttribute(\"media-video\", \"time\", this.video.currentTime);\n    }\n  },\n\n  changeVolumeBy(v) {\n    this.el.setAttribute(\"media-video\", \"volume\", THREE.Math.clamp(this.data.volume + v, 0, 1));\n    this.updateVolumeLabel();\n  },\n\n  volumeUp() {\n    this.changeVolumeBy(0.1);\n  },\n\n  volumeDown() {\n    this.changeVolumeBy(-0.1);\n  },\n\n  async snap() {\n    if (this.isSnapping) return;\n    this.isSnapping = true;\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_TOOK_SNAPSHOT);\n\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = this.video.videoWidth;\n    canvas.height = this.video.videoHeight;\n    canvas.getContext(\"2d\").drawImage(this.video, 0, 0, canvas.width, canvas.height);\n    const blob = await new Promise(resolve => canvas.toBlob(resolve));\n    const file = new File([blob], \"snap.png\", TYPE_IMG_PNG);\n\n    this.localSnapCount++;\n    const { entity } = addAndArrangeMedia(this.el, file, \"photo-snapshot\", this.localSnapCount);\n    entity.addEventListener(\"image-loaded\", this.onSnapImageLoaded, ONCE_TRUE);\n  },\n\n  togglePlaying() {\n    // See onPauseStateChanged for note about iOS\n    if (isIOS && this.video.paused && NAF.utils.isMine(this.networkedEl)) {\n      this.video.play();\n      return;\n    }\n\n    if (this.networkedEl && (NAF.utils.isMine(this.networkedEl) || NAF.utils.takeOwnership(this.networkedEl))) {\n      this.tryUpdateVideoPlaybackState(!this.data.videoPaused);\n    }\n  },\n\n  onPauseStateChange() {\n    // iOS Safari will auto-pause other videos if one is manually started (not autoplayed.) So, to keep things\n    // easy to reason about, we *never* broadcast pauses from iOS.\n    //\n    // if an iOS safari user pauses and plays a video they'll pause all the other videos,\n    // which isn't great, but this check will at least ensure they don't pause those videos\n    // for all other users in the room! Of course, if they go and hit play on those videos auto-paused,\n    // they will become the timekeeper, and will seek everyone to where the video was auto-paused.\n    //\n    // This specific case will diverge the network schema and the video player state, so that\n    // this.data.videoPaused is false (so others will keep playing it) but our local player will\n    // have stopped. So we deal with this special case as well when we press the play button.\n    if (isIOS && this.video.paused && NAF.utils.isMine(this.networkedEl)) {\n      return;\n    }\n\n    // Used in the HACK in hub.js for dealing with auto-pause in Oculus Browser\n    if (this._ignorePauseStateChanges) return;\n\n    this.el.setAttribute(\"media-video\", \"videoPaused\", this.video.paused);\n\n    if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n      this.el.emit(\"owned-video-state-changed\");\n    }\n  },\n\n  updatePlaybackState(force) {\n    if (this.hoverMenu) {\n      this.playbackControls.object3D.visible = !this.data.hidePlaybackControls && !!this.video;\n      this.timeLabel.object3D.visible = !this.data.hidePlaybackControls;\n\n      const isPinned = this.el.components.pinnable && this.el.components.pinnable.data.pinned;\n      this.playPauseButton.object3D.visible = !!this.video && (!isPinned || window.APP.hubChannel.can(\"pin_objects\"));\n      this.snapButton.object3D.visible = !!this.video && window.APP.hubChannel.can(\"spawn_and_move_media\");\n      this.seekForwardButton.object3D.visible = !!this.video && !this.videoIsLive;\n      this.seekBackButton.object3D.visible = !!this.video && !this.videoIsLive;\n    }\n\n    // Only update playback position for videos you don't own\n    if (force || (this.networkedEl && !NAF.utils.isMine(this.networkedEl) && this.video)) {\n      if (Math.abs(this.data.time - this.video.currentTime) > this.data.syncTolerance) {\n        this.tryUpdateVideoPlaybackState(this.data.videoPaused, this.data.time);\n      } else {\n        this.tryUpdateVideoPlaybackState(this.data.videoPaused);\n      }\n    }\n\n    // Volume is local, always update it\n    if (this.audio) {\n      this.audio.gain.gain.value = this.data.volume;\n    }\n  },\n\n  tryUpdateVideoPlaybackState(pause, currentTime) {\n    if (this._playbackStateChangeTimeout) {\n      clearTimeout(this._playbackStateChangeTimeout);\n      delete this._playbackStateChangeTimeout;\n    }\n\n    if (!this.videoIsLive && currentTime !== undefined) {\n      this.video.currentTime = currentTime;\n    }\n\n    if (this.hoverMenu) {\n      this.playPauseButton.setAttribute(\"icon-button\", \"active\", pause);\n    }\n\n    if (pause) {\n      this.video.pause();\n    } else {\n      // Need to deal with the fact play() may fail if user has not interacted with browser yet.\n      this.video.play().catch(() => {\n        if (pause !== this.data.videoPaused) return;\n        this._playbackStateChangeTimeout = setTimeout(() => this.tryUpdateVideoPlaybackState(pause, currentTime), 1000);\n      });\n    }\n  },\n\n  async update(oldData) {\n    const src = this.data.src;\n    this.updatePlaybackState();\n\n    if (!src || src === oldData.src) return;\n    return this.updateSrc(oldData);\n  },\n\n  async updateSrc(oldData) {\n    const { src } = this.data;\n\n    this.cleanUp();\n    if (this.mesh && this.mesh.material) {\n      this.mesh.material.map = null;\n      this.mesh.material.needsUpdate = true;\n    }\n\n    let texture;\n    try {\n      texture = await createVideoTexture(src, this.data.contentType);\n\n      // No way to cancel promises, so if src has changed while we were creating the texture just throw it away.\n      if (this.data.src !== src) {\n        disposeTexture(texture);\n        return;\n      }\n\n      if (!src.startsWith(\"hubs://\")) {\n        // TODO FF error here if binding mediastream: The captured HTMLMediaElement is playing a MediaStream. Applying volume or mute status is not currently supported -- not an issue since we have no audio atm in shared video.\n        texture.audioSource = this.el.sceneEl.audioListener.context.createMediaElementSource(texture.image);\n\n        if (this.data.audioType === \"pannernode\") {\n          this.audio = new THREE.PositionalAudio(this.el.sceneEl.audioListener);\n          this.audio.setDistanceModel(this.data.distanceModel);\n          this.audio.setRolloffFactor(this.data.rolloffFactor);\n          this.audio.setRefDistance(this.data.refDistance);\n          this.audio.setMaxDistance(this.data.maxDistance);\n          this.audio.panner.coneInnerAngle = this.data.coneInnerAngle;\n          this.audio.panner.coneOuterAngle = this.data.coneOuterAngle;\n          this.audio.panner.coneOuterGain = this.data.coneOuterGain;\n        } else {\n          this.audio = new THREE.Audio(this.el.sceneEl.audioListener);\n        }\n\n        this.audio.setNodeSource(texture.audioSource);\n        this.el.setObject3D(\"sound\", this.audio);\n      }\n\n      this.video = texture.image;\n      this.video.loop = this.data.loop;\n      this.video.addEventListener(\"pause\", this.onPauseStateChange);\n      this.video.addEventListener(\"play\", this.onPauseStateChange);\n\n      if (texture.hls) {\n        const updateLiveState = () => {\n          this.videoIsLive = texture.hls.levels[texture.hls.currentLevel].details.live;\n          this.updateHoverMenuBasedOnLiveState();\n        };\n        texture.hls.on(HLS.Events.LEVEL_SWITCHED, updateLiveState);\n        if (texture.hls.currentLevel >= 0) {\n          updateLiveState();\n        }\n      } else {\n        this.videoIsLive = this.video.duration === Infinity;\n        this.updateHoverMenuBasedOnLiveState();\n      }\n\n      if (isIOS) {\n        const template = document.getElementById(\"video-unmute\");\n        this.el.appendChild(document.importNode(template.content, true));\n        this.el.setAttribute(\"position-at-box-shape-border__unmute-ui\", {\n          target: \".unmute-ui\",\n          dirs: [\"forward\", \"back\"]\n        });\n      }\n    } catch (e) {\n      console.error(\"Error loading video\", this.data.src, e);\n      texture = errorTexture;\n    }\n\n    const projection = this.data.projection;\n\n    if (!this.mesh || projection !== oldData.projection) {\n      const material = new THREE.MeshBasicMaterial();\n\n      let geometry;\n\n      if (projection === \"360-equirectangular\") {\n        geometry = new THREE.SphereBufferGeometry(1, 64, 32);\n        // invert the geometry on the x-axis so that all of the faces point inward\n        geometry.scale(-1, 1, 1);\n      } else {\n        geometry = new THREE.PlaneBufferGeometry();\n        material.side = THREE.DoubleSide;\n      }\n\n      this.mesh = new THREE.Mesh(geometry, material);\n      this.el.setObject3D(\"mesh\", this.mesh);\n    }\n\n    this.mesh.material.map = texture;\n    this.mesh.material.needsUpdate = true;\n\n    if (projection === \"flat\") {\n      scaleToAspectRatio(this.el, texture.image.videoHeight / texture.image.videoWidth);\n    }\n\n    this.updatePlaybackState(true);\n\n    if (this.video.muted) {\n      this.videoMutedAt = performance.now();\n    }\n\n    this.el.emit(\"video-loaded\", { projection: projection });\n  },\n\n  updateHoverMenuBasedOnLiveState() {\n    if (!this.hoverMenu) return;\n\n    this.seekForwardButton.object3D.visible = !this.videoIsLive;\n    this.seekBackButton.object3D.visible = !this.videoIsLive;\n\n    if (this.videoIsLive) {\n      this.timeLabel.setAttribute(\"text\", \"value\", \"LIVE\");\n    }\n  },\n\n  updateVolumeLabel() {\n    this.volumeLabel.setAttribute(\n      \"text\",\n      \"value\",\n      this.data.volume === 0 ? \"MUTE\" : VOLUME_LABELS[Math.floor(this.data.volume / 0.05)]\n    );\n  },\n\n  tick() {\n    if (!this.video) return;\n\n    const userinput = this.el.sceneEl.systems.userinput;\n    const interaction = this.el.sceneEl.systems.interaction;\n    const volumeMod = userinput.get(paths.actions.cursor.mediaVolumeMod);\n    if (interaction.state.rightRemote.hovered === this.el && volumeMod) {\n      this.changeVolumeBy(volumeMod);\n    }\n\n    const isHeld = interaction.isHeld(this.el);\n\n    if (this.wasHeld && !isHeld) {\n      this.localSnapCount = 0;\n    }\n\n    this.wasHeld = isHeld;\n\n    if (this.hoverMenu && this.hoverMenu.object3D.visible && !this.videoIsLive) {\n      this.timeLabel.setAttribute(\n        \"text\",\n        \"value\",\n        `${timeFmt(this.video.currentTime)} / ${timeFmt(this.video.duration)}`\n      );\n    }\n\n    // If a non-live video is currently playing and we own it, send out time updates\n    if (!this.data.videoPaused && !this.videoIsLive && this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n      const now = performance.now();\n      if (now - this.lastUpdate > this.data.tickRate) {\n        this.el.setAttribute(\"media-video\", \"time\", this.video.currentTime);\n        this.lastUpdate = now;\n      }\n    }\n  },\n\n  cleanUp() {\n    if (this.mesh && this.mesh.material) {\n      disposeTexture(this.mesh.material.map);\n    }\n  },\n\n  remove() {\n    this.cleanUp();\n\n    if (this.audio) {\n      this.el.removeObject3D(\"sound\");\n      this.audio.disconnect();\n      delete this.audio;\n    }\n\n    if (this.video) {\n      this.video.removeEventListener(\"pause\", this.onPauseStateChange);\n      this.video.removeEventListener(\"play\", this.onPauseStateChange);\n    }\n    if (this.hoverMenu) {\n      this.playPauseButton.object3D.removeEventListener(\"interact\", this.togglePlaying);\n      this.volumeUpButton.object3D.removeEventListener(\"interact\", this.volumeUp);\n      this.volumeDownButton.object3D.removeEventListener(\"interact\", this.volumeDown);\n      this.seekForwardButton.object3D.removeEventListener(\"interact\", this.seekForward);\n      this.seekBackButton.object3D.removeEventListener(\"interact\", this.seekBack);\n    }\n  }\n});\n\nAFRAME.registerComponent(\"media-image\", {\n  schema: {\n    src: { type: \"string\" },\n    projection: { type: \"string\", default: \"flat\" },\n    contentType: { type: \"string\" },\n    batch: { default: false }\n  },\n\n  remove() {\n    if (this.data.batch && this.mesh) {\n      this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.removeObject(this.mesh);\n    }\n    if (this._hasRetainedTexture) {\n      textureCache.release(this.data.src);\n      this.currentSrcIsRetained = false;\n    }\n  },\n\n  async update(oldData) {\n    let texture;\n    let ratio = 1;\n\n    try {\n      const { src, contentType } = this.data;\n      if (!src) return;\n\n      this.el.emit(\"image-loading\");\n\n      if (this.mesh && this.mesh.map && src !== oldData.src) {\n        this.mesh.material.map = null;\n        this.mesh.material.needsUpdate = true;\n        if (this.mesh.map !== errorTexture) {\n          textureCache.release(oldData.src);\n          this.currentSrcIsRetained = false;\n        }\n      }\n\n      let cacheItem;\n      if (textureCache.has(src)) {\n        cacheItem = textureCache.retain(src);\n      } else {\n        if (src === \"error\") {\n          cacheItem = errorCacheItem;\n        } else if (inflightTextures.has(src)) {\n          await inflightTextures.get(src);\n          cacheItem = textureCache.retain(src);\n        } else {\n          let promise;\n          if (contentType.includes(\"image/gif\")) {\n            promise = createGIFTexture(src);\n          } else if (contentType.startsWith(\"image/\")) {\n            promise = createImageTexture(src);\n          } else {\n            throw new Error(`Unknown image content type: ${contentType}`);\n          }\n          inflightTextures.set(src, promise);\n          texture = await promise;\n          inflightTextures.delete(src);\n          cacheItem = textureCache.set(src, texture);\n        }\n\n        // No way to cancel promises, so if src has changed or this entity was removed while we were creating the texture just throw it away.\n        if (this.data.src !== src || !this.el.parentNode) {\n          textureCache.release(src);\n          return;\n        }\n      }\n\n      texture = cacheItem.texture;\n      ratio = cacheItem.ratio;\n\n      this.currentSrcIsRetained = true;\n    } catch (e) {\n      console.error(\"Error loading image\", this.data.src, e);\n      texture = errorTexture;\n      this.currentSrcIsRetained = false;\n    }\n\n    const projection = this.data.projection;\n\n    if (!this.mesh || projection !== oldData.projection) {\n      const material = new THREE.MeshBasicMaterial();\n\n      let geometry;\n\n      if (projection === \"360-equirectangular\") {\n        geometry = new THREE.SphereBufferGeometry(1, 64, 32);\n        // invert the geometry on the x-axis so that all of the faces point inward\n        geometry.scale(-1, 1, 1);\n      } else {\n        geometry = new THREE.PlaneBufferGeometry(1, 1, 1, 1, texture.flipY);\n        material.side = THREE.DoubleSide;\n      }\n\n      this.mesh = new THREE.Mesh(geometry, material);\n      this.el.setObject3D(\"mesh\", this.mesh);\n    }\n\n    // We only support transparency on gifs. Other images will support cutout as part of batching, but not alpha transparency for now\n    this.mesh.material.transparent =\n      !this.data.batch || texture == errorTexture || this.data.contentType.includes(\"image/gif\");\n    this.mesh.material.map = texture;\n    this.mesh.material.needsUpdate = true;\n\n    if (projection === \"flat\") {\n      scaleToAspectRatio(this.el, ratio);\n    }\n\n    if (texture !== errorTexture && this.data.batch) {\n      this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.addObject(this.mesh);\n    }\n\n    this.el.emit(\"image-loaded\", { src: this.data.src, projection: projection });\n  }\n});\n","import { VOLUME_LABELS } from \"./media-views\";\n\nAFRAME.registerComponent(\"avatar-volume-controls\", {\n  schema: {\n    volume: { type: \"number\", default: 1.0 }\n  },\n\n  init() {\n    this.volumeUp = this.volumeUp.bind(this);\n    this.volumeDown = this.volumeDown.bind(this);\n    this.changeVolumeBy = this.changeVolumeBy.bind(this);\n    this.volumeUpButton = this.el.querySelector(\".avatar-volume-up-button\");\n    this.volumeDownButton = this.el.querySelector(\".avatar-volume-down-button\");\n    this.volumeLabel = this.el.querySelector(\".avatar-volume-label\");\n    this.volumeUpButton.object3D.addEventListener(\"interact\", this.volumeUp);\n    this.volumeDownButton.object3D.addEventListener(\"interact\", this.volumeDown);\n\n    this.updateVolumeLabel();\n  },\n\n  changeVolumeBy(v) {\n    this.el.setAttribute(\"avatar-volume-controls\", \"volume\", THREE.Math.clamp(this.data.volume + v, 0, 1));\n    this.updateVolumeLabel();\n  },\n\n  volumeUp() {\n    this.changeVolumeBy(0.1);\n  },\n\n  volumeDown() {\n    this.changeVolumeBy(-0.1);\n  },\n\n  update() {\n    if (this.audio) {\n      this.audio.gain.gain.value = this.data.volume;\n    }\n  },\n\n  updateVolumeLabel() {\n    this.volumeLabel.setAttribute(\n      \"text\",\n      \"value\",\n      this.data.volume === 0 ? \"Muted\" : VOLUME_LABELS[Math.floor(this.data.volume / 0.05)]\n    );\n  },\n\n  tick() {\n    if (this.audio) return;\n\n    // Walk up to Spine and then search down.\n    const source = this.el.parentNode.parentNode.querySelector(\"[networked-audio-source]\");\n    if (!source) return;\n\n    this.audio = source.components[\"networked-audio-source\"].sound;\n    this.update();\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\n\nAFRAME.registerComponent(\"pinch-to-move\", {\n  schema: {\n    speed: { default: 0.25 }\n  },\n  init() {\n    this.axis = [0, 0];\n  },\n  tick() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const pinch = userinput.get(paths.device.touchscreen.pinchDelta);\n    if (pinch) {\n      this.axis[1] = pinch * this.data.speed;\n      this.el.emit(\"move\", { axis: this.axis });\n    }\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\n\nconst degToRad = THREE.Math.degToRad;\nconst radToDeg = THREE.Math.radToDeg;\n\nAFRAME.registerComponent(\"pitch-yaw-rotator\", {\n  schema: {\n    minPitch: { default: -90 },\n    maxPitch: { default: 90 }\n  },\n\n  init() {\n    this.pitch = 0;\n    this.yaw = 0;\n    this.onRotateX = this.onRotateX.bind(this);\n    this.el.sceneEl.addEventListener(\"rotateX\", this.onRotateX);\n    this.el.sceneEl.addEventListener(\"enter-vr\", () => this.pause());\n    this.el.sceneEl.addEventListener(\"exit-vr\", () => this.play());\n    this.pendingXRotation = 0;\n  },\n\n  onRotateX(e) {\n    this.pendingXRotation += e.detail.value;\n  },\n\n  look(deltaPitch, deltaYaw) {\n    const { minPitch, maxPitch } = this.data;\n    this.pitch += deltaPitch;\n    this.pitch = THREE.Math.clamp(this.pitch, minPitch, maxPitch);\n    this.yaw += deltaYaw;\n  },\n\n  set(pitch, yaw) {\n    const { minPitch, maxPitch } = this.data;\n    this.pitch = THREE.Math.clamp(radToDeg(pitch), minPitch, maxPitch);\n    this.yaw = radToDeg(yaw);\n  },\n\n  tick() {\n    const scene = AFRAME.scenes[0];\n    const userinput = scene.systems.userinput;\n    const cameraDelta = userinput.get(scene.is(\"entered\") ? paths.actions.cameraDelta : paths.actions.lobbyCameraDelta);\n    let lookX = this.pendingXRotation;\n    let lookY = 0;\n    if (cameraDelta) {\n      lookY += cameraDelta[0];\n      lookX += cameraDelta[1];\n    }\n    if (lookX !== 0 || lookY !== 0) {\n      this.look(lookX, lookY);\n      this.el.object3D.rotation.set(degToRad(this.pitch), degToRad(this.yaw), 0);\n      this.el.object3D.rotation.order = \"YXZ\";\n    }\n    this.pendingXRotation = 0;\n  }\n});\n","import { getBox } from \"../utils/auto-box-collider.js\";\nimport { getLastWorldPosition } from \"../utils/three-utils\";\n\nconst PI = Math.PI;\nconst HALF_PI = PI / 2;\nconst THREE_HALF_PI = 3 * HALF_PI;\nconst right = new THREE.Vector3(1, 0, 0);\nconst forward = new THREE.Vector3(0, 0, 1);\nconst left = new THREE.Vector3(-1, 0, 0);\nconst back = new THREE.Vector3(0, 0, -1);\nconst zero = new THREE.Vector3(0, 0, 0);\nconst dirs = {\n  left: {\n    dir: left,\n    rotation: THREE_HALF_PI,\n    halfExtent: \"x\"\n  },\n  right: {\n    dir: right,\n    rotation: HALF_PI,\n    halfExtent: \"x\"\n  },\n  forward: {\n    dir: forward,\n    rotation: 0,\n    halfExtent: \"z\"\n  },\n  back: {\n    dir: back,\n    rotation: PI,\n    halfExtent: \"z\"\n  }\n};\n\nAFRAME.registerComponent(\"position-at-box-shape-border\", {\n  multiple: true,\n  schema: {\n    target: { type: \"string\" },\n    dirs: { default: [\"left\", \"right\", \"forward\", \"back\"] },\n    animate: { default: true },\n    scale: { default: true }\n  },\n\n  init() {\n    this.cam = this.el.sceneEl.camera.el.object3D;\n    this._updateBox = this._updateBox.bind(this);\n    this._setupTarget = this._setupTarget.bind(this);\n    this.halfExtents = new THREE.Vector3();\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._updateBox, \"media-components\");\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._updateBox, \"media-components\");\n  },\n\n  update() {\n    this.dirs = this.data.dirs.map(d => dirs[d]);\n  },\n\n  _setupTarget() {\n    this.targetEl = this.el.querySelector(this.data.target);\n    if (!this.targetEl) {\n      console.warn(`Race condition on position-at-box-shape-border on selector ${this.data.target}`);\n      return;\n    }\n\n    this.target = this.targetEl.object3D;\n\n    this.targetEl.addEventListener(\"animationcomplete\", () => {\n      this.targetEl.removeAttribute(\"animation__show\");\n    });\n\n    this.target.scale.setScalar(0.01); // To avoid \"pop\" of gigantic button first time\n    this.target.matrixNeedsUpdate = true;\n  },\n\n  tick() {\n    if (!this.target) {\n      this._setupTarget();\n      return;\n    }\n\n    if (!this.el.getObject3D(\"mesh\")) {\n      return;\n    }\n\n    const isVisible = this.targetEl.object3D.visible;\n    const opening = isVisible && !this.wasVisible;\n    const scaleChanged =\n      this.el.object3D.scale.x !== this.previousScaleX ||\n      this.el.object3D.scale.y !== this.previousScaleY ||\n      this.el.object3D.scale.z !== this.previousScaleZ;\n    const isAnimating = this.targetEl.getAttribute(\"animation__show\");\n\n    // If the target is being shown or the scale changed while the opening animation is being run,\n    // we need to start or re-start the animation.\n    if (opening || (scaleChanged && isAnimating)) {\n      this._updateBox(this.data.animate, true);\n    }\n\n    this.wasVisible = isVisible;\n    this.previousScaleX = this.el.object3D.scale.x;\n    this.previousScaleY = this.el.object3D.scale.y;\n    this.previousScaleZ = this.el.object3D.scale.z;\n  },\n\n  _updateBox: (function() {\n    const camWorldPos = new THREE.Vector3();\n    const targetPosition = new THREE.Vector3();\n    const pointOnBoxFace = new THREE.Vector3();\n    const pointOnBoxFaceToCamera = new THREE.Vector3();\n    const boxCenter = new THREE.Vector3();\n    const tempParentWorldScale = new THREE.Vector3();\n    const boxFaceNormal = new THREE.Vector3();\n    const min = new THREE.Vector3(0.001, 0.001, 0.001);\n\n    return function(animate, forceNewExtents) {\n      if (forceNewExtents || this.mesh !== this.el.getObject3D(\"mesh\")) {\n        this.mesh = this.el.getObject3D(\"mesh\");\n\n        const box = getBox(this.el, this.mesh);\n        this.halfExtents = box.min\n          .clone()\n          .negate()\n          .add(box.max)\n          .multiplyScalar(0.65);\n\n        this.halfExtents.max(min);\n      }\n\n      if (!this.target) return;\n\n      getLastWorldPosition(this.cam, camWorldPos);\n\n      let targetSquareDistance = Infinity;\n      let targetDir = this.dirs[0].dir;\n      let targetHalfExtentStr = this.dirs[0].halfExtent;\n      let targetHalfExtent = this.halfExtents[targetHalfExtentStr];\n      let targetRotation = this.dirs[0].rotation;\n      let targetCameraDot = -1.1;\n\n      this.el.object3D.updateMatrices();\n\n      for (let i = 0; i < this.dirs.length; i++) {\n        const dir = this.dirs[i].dir;\n        const halfExtentStr = this.dirs[i].halfExtent;\n        const halfExtent = this.halfExtents[halfExtentStr];\n        pointOnBoxFace.copy(dir).multiplyScalar(halfExtent);\n        boxCenter.copy(zero);\n\n        this.el.object3D.localToWorld(pointOnBoxFace);\n        this.el.object3D.localToWorld(boxCenter);\n\n        pointOnBoxFaceToCamera.subVectors(camWorldPos, pointOnBoxFace);\n        pointOnBoxFaceToCamera.normalize();\n\n        boxFaceNormal.subVectors(pointOnBoxFace, boxCenter);\n        boxFaceNormal.normalize();\n\n        // Compute dot between camera + box normal to ensure menus are going to be\n        // somewhat perpendicular to camera frustum\n        const cameraAngleDotBoxNormal = boxFaceNormal.dot(pointOnBoxFaceToCamera);\n\n        const squareDistance = pointOnBoxFace.distanceToSquared(camWorldPos);\n        if (cameraAngleDotBoxNormal > targetCameraDot) {\n          targetSquareDistance = squareDistance;\n          targetDir = dir;\n          targetHalfExtent = halfExtent;\n          targetRotation = this.dirs[i].rotation;\n          targetHalfExtentStr = halfExtentStr;\n          targetCameraDot = cameraAngleDotBoxNormal;\n        }\n      }\n\n      this.target.position.copy(targetPosition.copy(targetDir).multiplyScalar(targetHalfExtent));\n      this.target.rotation.set(0, targetRotation, 0);\n\n      tempParentWorldScale.setFromMatrixScale(this.target.parent.matrixWorld);\n\n      const distance = Math.sqrt(targetSquareDistance);\n      const scale = Math.max(this.halfExtents.x, this.halfExtents.z) * distance;\n      const targetScale = Math.min(2.0, Math.max(0.5, scale * tempParentWorldScale.x));\n      const finalScale = this.data.scale ? targetScale / tempParentWorldScale.x : 1;\n\n      if (animate) {\n        this.targetEl.removeAttribute(\"animation__show\");\n\n        this.targetEl.setAttribute(\"animation__show\", {\n          property: \"scale\",\n          dur: 300,\n          from: { x: finalScale * 0.8, y: finalScale * 0.8, z: finalScale * 0.8 },\n          to: { x: finalScale, y: finalScale, z: finalScale },\n          easing: \"easeOutElastic\"\n        });\n      } else if (!this.targetEl.getAttribute(\"animation__show\")) {\n        this.target.scale.setScalar(finalScale);\n      }\n\n      this.target.matrixNeedsUpdate = true;\n    };\n  })()\n});\n","import { getPromotionTokenForFile } from \"../utils/media-utils\";\nimport { SOUND_PIN } from \"../systems/sound-effects-system\";\n\nAFRAME.registerComponent(\"pin-networked-object-button\", {\n  schema: {\n    // Selector for label informing users about Discord bridging of pins.\n    tipSelector: { type: \"string\" },\n\n    // Selector for label to change when pinned/unpinned, must be sibling of this components element\n    labelSelector: { type: \"string\" }\n  },\n\n  init() {\n    this._updateUI = this._updateUI.bind(this);\n    this._updateUIOnStateChange = this._updateUIOnStateChange.bind(this);\n    this.el.sceneEl.addEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    this.tipEl = this.el.parentNode.querySelector(this.data.tipSelector);\n    this.labelEl = this.el.parentNode.querySelector(this.data.labelSelector);\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n\n      this._updateUI();\n      this.targetEl.addEventListener(\"pinned\", this._updateUI);\n      this.targetEl.addEventListener(\"unpinned\", this._updateUI);\n    });\n\n    this.onHovered = () => {\n      this.hovering = true;\n      this._updateUI();\n    };\n\n    this.onUnhovered = () => {\n      this.hovering = false;\n      this._updateUI();\n    };\n\n    this.onClick = () => {\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) return;\n\n      const wasPinned = this.targetEl.components.pinnable && this.targetEl.components.pinnable.data.pinned;\n      this.targetEl.setAttribute(\"pinnable\", \"pinned\", !wasPinned);\n      if (!wasPinned) {\n        this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_PIN);\n      }\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n    this.el.object3D.addEventListener(\"hovered\", this.onHovered);\n    this.el.object3D.addEventListener(\"unhovered\", this.onUnhovered);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n    this.el.object3D.removeEventListener(\"hovered\", this.onHovered);\n    this.el.object3D.removeEventListener(\"unhovered\", this.onUnhovered);\n  },\n\n  remove() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    if (this.targetEl) {\n      this.targetEl.removeEventListener(\"pinned\", this._updateUI);\n      this.targetEl.removeEventListener(\"unpinned\", this._updateUI);\n    }\n  },\n\n  _discordBridges() {\n    return window.APP.hubChannel.discordBridges();\n  },\n\n  _updateUIOnStateChange(e) {\n    if (e.detail !== \"frozen\") return;\n    this._updateUI();\n  },\n\n  _updateUI() {\n    const { fileIsOwned, fileId } = this.targetEl.components[\"media-loader\"].data;\n    const canPin =\n      window.APP.hubChannel.can(\"pin_objects\") && !!(fileIsOwned || (fileId && getPromotionTokenForFile(fileId)));\n    this.el.object3D.visible = canPin;\n    this.labelEl.object3D.visible = canPin;\n\n    const isPinned = this.targetEl.getAttribute(\"pinnable\") && this.targetEl.getAttribute(\"pinnable\").pinned;\n    const discordBridges = this._discordBridges();\n    this.tipEl.object3D.visible = !!(canPin && !isPinned && this.hovering && discordBridges.length > 0);\n\n    if (!canPin) return;\n    this.labelEl.setAttribute(\"text\", \"value\", isPinned ? \"un-pin\" : \"pin\");\n    this.el.setAttribute(\"text-button\", \"backgroundColor\", isPinned ? \"#fff\" : \"#ff3550\");\n    this.el.setAttribute(\"text-button\", \"backgroundHoverColor\", isPinned ? \"#bbb\" : \"#fc3545\");\n  }\n});\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\n\nAFRAME.registerComponent(\"unmute-video-button\", {\n  init() {\n    this.onClick = () => {\n      const videoEl = findAncestorWithComponent(this.el, \"media-video\");\n      const mediaVideo = videoEl.components[\"media-video\"];\n      if (!mediaVideo || !mediaVideo.video || !mediaVideo.videoMutedAt) return;\n\n      // iOS initially plays the sound and *then* mutes it, and sometimes a second video playing\n      // can break all sound in the app. (Likely a Safari bug.) Adding a delay before the unmute\n      // occurs seems to help with reducing this.\n      if (performance.now() - mediaVideo.videoMutedAt < 3000) {\n        return;\n      }\n\n      if (mediaVideo.video.muted) {\n        mediaVideo.video.muted = false;\n        this.el.setAttribute(\"visible\", false);\n      }\n    };\n  },\n\n  play() {\n    // Safari won't accept grab-start or even mousedown as user-initiated gestures,\n    // so we have to use a global touchstart event here.\n    document.addEventListener(\"touchstart\", this.onClick);\n  },\n\n  pause() {\n    document.removeEventListener(\"touchstart\", this.onClick);\n  }\n});\n","import { getLastWorldPosition } from \"../utils/three-utils\";\n\nAFRAME.registerComponent(\"destroy-at-extreme-distances\", {\n  schema: {\n    xMin: { default: -1000 },\n    xMax: { default: 1000 },\n    yMin: { default: -1000 },\n    yMax: { default: 1000 },\n    zMin: { default: -1000 },\n    zMax: { default: 1000 }\n  },\n\n  init() {\n    this._checkForDestroy = this._checkForDestroy.bind(this);\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._checkForDestroy, \"media-components\");\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._checkForDestroy, \"media-components\");\n  },\n\n  _checkForDestroy: (function() {\n    const pos = new THREE.Vector3();\n    return function() {\n      const { xMin, xMax, yMin, yMax, zMin, zMax } = this.data;\n      getLastWorldPosition(this.el.object3D, pos);\n\n      if (pos.x < xMin || pos.x > xMax || pos.y < yMin || pos.y > yMax || pos.z < zMin || pos.z > zMax) {\n        if (!this.el.components.networked || NAF.utils.isMine(this.el)) {\n          this.el.parentNode.removeChild(this.el);\n        }\n      }\n    };\n  })()\n});\n","import { addAndArrangeMedia } from \"../utils/media-utils\";\nimport { createImageBitmap } from \"../utils/image-bitmap-utils\";\nimport { ObjectTypes } from \"../object-types\";\nimport { paths } from \"../systems/userinput/paths\";\nimport { SOUND_CAMERA_TOOL_TOOK_SNAPSHOT, SOUND_CAMERA_TOOL_COUNTDOWN } from \"../systems/sound-effects-system\";\nimport { getAudioFeedbackScale } from \"./audio-feedback\";\n\nimport cameraModelSrc from \"../assets/camera_tool.glb\";\n\nconst cameraModelPromise = new Promise(resolve => new THREE.GLTFLoader().load(cameraModelSrc, resolve));\n\nconst pathsMap = {\n  \"player-right-controller\": {\n    takeSnapshot: paths.actions.rightHand.takeSnapshot\n  },\n  \"player-left-controller\": {\n    takeSnapshot: paths.actions.leftHand.takeSnapshot\n  },\n  cursor: {\n    takeSnapshot: paths.actions.cursor.takeSnapshot\n  }\n};\n\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\nconst VIEWFINDER_FPS = 6;\nconst VIDEO_FPS = 25;\n// Prefer h264 if available due to faster decoding speec on most platforms\nconst videoCodec = [\"h264\", \"vp9\", \"vp8\"].find(\n  codec => window.MediaRecorder && MediaRecorder.isTypeSupported(`video/webm; codecs=${codec}`)\n);\nconst videoMimeType = videoCodec ? `video/webm; codecs=${videoCodec}` : null;\nconst hasWebGL2 = !!document.createElement(\"canvas\").getContext(\"webgl2\");\nconst allowVideo = !!videoMimeType && hasWebGL2;\n\nconst CAPTURE_WIDTH = isMobileVR ? 640 : 1280;\nconst CAPTURE_HEIGHT = isMobileVR ? 360 : 720;\nconst RENDER_WIDTH = 1280;\nconst RENDER_HEIGHT = 720;\nconst CAPTURE_DURATIONS = allowVideo ? [0, 3, 7, 15, 30, 60, Infinity] : [0];\nconst DEFAULT_CAPTURE_DURATION = allowVideo ? 3 : 0;\nconst COUNTDOWN_DURATION = 3;\nconst VIDEO_LOOPS = 3; // Number of times to loop the videos we spawn before stopping them (for perf)\nconst MAX_DURATION_TO_LIMIT_LOOPS = 31; // Max duration for which we limit loops (eg GIFs vs long form videos)\n\nconst snapCanvas = document.createElement(\"canvas\");\n\nasync function pixelsToPNG(pixels, width, height) {\n  snapCanvas.width = width;\n  snapCanvas.height = height;\n  const context = snapCanvas.getContext(\"2d\");\n\n  const imageData = context.createImageData(width, height);\n  imageData.data.set(pixels);\n  const bitmap = await createImageBitmap(imageData);\n  context.scale(1, -1);\n  context.drawImage(bitmap, 0, -height);\n  const blob = await new Promise(resolve => snapCanvas.toBlob(resolve));\n  return new File([blob], \"snap.png\", { type: \"image/png\" });\n}\n\nfunction blitFramebuffer(renderer, src, srcX0, srcY0, srcX1, srcY1, dest, dstX0, dstY0, dstX1, dstY1) {\n  const gl = renderer.context;\n\n  // Copies from one framebuffer to another. Note that at the end of this function, you need to restore\n  // the original framebuffer via setRenderTarget\n  const srcFramebuffer = renderer.properties.get(src).__webglFramebuffer;\n  const destFramebuffer = renderer.properties.get(dest).__webglFramebuffer;\n\n  if (srcFramebuffer && destFramebuffer) {\n    gl.bindFramebuffer(gl.READ_FRAMEBUFFER, srcFramebuffer);\n    gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, destFramebuffer);\n\n    if (gl.checkFramebufferStatus(gl.READ_FRAMEBUFFER) === gl.FRAMEBUFFER_COMPLETE) {\n      gl.blitFramebuffer(srcX0, srcY0, srcX1, srcY1, dstX0, dstY0, dstX1, dstY1, gl.COLOR_BUFFER_BIT, gl.LINEAR);\n    }\n  }\n}\n\nAFRAME.registerComponent(\"camera-tool\", {\n  schema: {\n    captureDuration: { default: DEFAULT_CAPTURE_DURATION },\n    captureAudio: { default: false },\n    isSnapping: { default: false },\n    isRecording: { default: false },\n    label: { default: \"\" }\n  },\n\n  init() {\n    this.lastUpdate = performance.now();\n    this.localSnapCount = 0; // Counter that is used to arrange photos/videos\n\n    this.showCameraViewfinder = !isMobileVR;\n\n    this.renderTarget = new THREE.WebGLRenderTarget(RENDER_WIDTH, RENDER_HEIGHT, {\n      format: THREE.RGBAFormat,\n      minFilter: THREE.LinearFilter,\n      magFilter: THREE.NearestFilter,\n      encoding: THREE.sRGBEncoding,\n      depth: false,\n      stencil: false\n    });\n\n    this.camera = new THREE.PerspectiveCamera(50, RENDER_WIDTH / RENDER_HEIGHT, 0.1, 30000);\n    this.camera.rotation.set(0, Math.PI, 0);\n    this.camera.position.set(0, 0, 0.05);\n    this.camera.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"camera\", this.camera);\n\n    const material = new THREE.MeshBasicMaterial({\n      map: this.renderTarget.texture\n    });\n\n    // Bit of a hack here to only update the renderTarget when the screens are in view\n    material.map.isVideoTexture = true;\n    material.map.update = () => {\n      if (this.showCameraViewfinder) {\n        this.viewfinderInViewThisFrame = true;\n      }\n    };\n\n    this.el.sceneEl.addEventListener(\"stateadded\", () => this.updateUI());\n    this.el.sceneEl.addEventListener(\"stateremoved\", () => this.updateUI());\n\n    cameraModelPromise.then(model => {\n      const mesh = model.scene.clone();\n      mesh.scale.set(2, 2, 2);\n      mesh.matrixNeedsUpdate = true;\n      this.el.setObject3D(\"mesh\", mesh);\n\n      const width = 0.28;\n      const geometry = new THREE.PlaneBufferGeometry(width, width / this.camera.aspect);\n\n      const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n      if (environmentMapComponent) {\n        environmentMapComponent.applyEnvironmentMap(this.el.object3D);\n      }\n\n      this.screen = new THREE.Mesh(geometry, material);\n      this.screen.rotation.set(0, Math.PI, 0);\n      this.screen.position.set(0, 0, -0.042);\n      this.screen.matrixNeedsUpdate = true;\n      this.el.setObject3D(\"screen\", this.screen);\n\n      this.selfieScreen = new THREE.Mesh(geometry, material);\n      this.selfieScreen.position.set(0, 0.4, 0);\n      this.selfieScreen.scale.set(-2, 2, 2);\n      this.selfieScreen.matrixNeedsUpdate = true;\n      this.el.setObject3D(\"selfieScreen\", this.selfieScreen);\n\n      this.label = this.el.querySelector(\".label\");\n      this.labelActionBackground = this.el.querySelector(\".label-action-background\");\n      this.labelBackground = this.el.querySelector(\".label-background\");\n      this.durationLabel = this.el.querySelector(\".duration\");\n\n      this.snapIcon = this.el.querySelector(\".snap-icon\");\n      this.recordIcon = this.el.querySelector(\".record-icon\");\n      this.recordAlphaIcon = this.el.querySelector(\".record-alpha-icon\");\n\n      this.label.object3D.visible = false;\n      this.durationLabel.object3D.visible = false;\n\n      this.snapMenu = this.el.querySelector(\".camera-snap-menu\");\n      this.playerCamera = document.querySelector(\"#player-camera\").getObject3D(\"camera\");\n      this.snapButton = this.el.querySelector(\".snap-button\");\n      this.cancelButton = this.el.querySelector(\".cancel-button\");\n      this.nextDurationButton = this.el.querySelector(\".next-duration\");\n      this.prevDurationButton = this.el.querySelector(\".prev-duration\");\n      this.snapButton.object3D.addEventListener(\"interact\", () => this.snapClicked());\n      this.cancelButton.object3D.addEventListener(\"interact\", () => this.cancelSnapping());\n      this.nextDurationButton.object3D.addEventListener(\"interact\", () => this.changeDuration(1));\n      this.prevDurationButton.object3D.addEventListener(\"interact\", () => this.changeDuration(-1));\n      this.stopButton = this.el.querySelector(\".stop-button\");\n      this.stopButton.object3D.addEventListener(\"interact\", () => this.stopRecording());\n      this.captureAudioButton = this.el.querySelector(\".capture-audio\");\n      this.captureAudioIcon = this.el.querySelector(\".capture-audio-icon\");\n      this.captureAudioButton.object3D.addEventListener(\"interact\", () =>\n        this.el.setAttribute(\"camera-tool\", \"captureAudio\", !this.data.captureAudio)\n      );\n\n      this.updateUI();\n\n      this.updateRenderTargetNextTick = true;\n\n      this.cameraSystem = this.el.sceneEl.systems[\"camera-tools\"];\n      this.cameraSystem.register(this.el);\n    });\n  },\n\n  remove() {\n    this.cameraSystem.deregister(this.el);\n    this.el.sceneEl.emit(\"camera_removed\");\n    this.stopRecording();\n  },\n\n  updateViewfinder() {\n    this.updateRenderTargetNextTick = true;\n  },\n\n  changeDuration(delta) {\n    const idx = CAPTURE_DURATIONS.findIndex(d => this.data.captureDuration == d);\n    const newIdx = idx === 0 && delta === -1 ? CAPTURE_DURATIONS.length - 1 : (idx + delta) % CAPTURE_DURATIONS.length;\n    this.el.setAttribute(\"camera-tool\", \"captureDuration\", CAPTURE_DURATIONS[newIdx]);\n  },\n\n  focus(el, track) {\n    if (track) {\n      this.trackTarget = el;\n    } else {\n      this.trackTarget = null;\n    }\n\n    this.lookAt(el);\n  },\n\n  lookAt: (function() {\n    const targetPos = new THREE.Vector3();\n    return function(el) {\n      targetPos.setFromMatrixPosition(el.object3D.matrixWorld);\n      this.el.object3D.lookAt(targetPos);\n      this.el.object3D.matrixNeedsUpdate = true;\n    };\n  })(),\n\n  onAvatarUpdated() {\n    delete this.playerHead;\n  },\n\n  snapClicked() {\n    if (this.data.isSnapping) return;\n    if (!NAF.utils.isMine(this.el) && !NAF.utils.takeOwnership(this.el)) return;\n\n    this.el.setAttribute(\"camera-tool\", \"isSnapping\", true);\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_COUNTDOWN);\n\n    this.snapCountdown = COUNTDOWN_DURATION;\n    this.el.setAttribute(\"camera-tool\", \"label\", `${this.snapCountdown}`);\n\n    this.countdownInterval = setInterval(async () => {\n      if (!NAF.utils.isMine(this.el) && !NAF.utils.takeOwnership(this.el)) {\n        clearInterval(this.countdownInterval);\n        this.countdownInterval = null;\n        return;\n      }\n\n      this.snapCountdown--;\n\n      if (this.snapCountdown === 0) {\n        clearInterval(this.countdownInterval);\n        this.countdownInterval = null;\n\n        if (this.data.captureDuration === 0) {\n          this.el.setAttribute(\"camera-tool\", { label: \"\", isSnapping: false });\n          this.takeSnapshotNextTick = true;\n        } else {\n          this.beginRecording(this.data.captureDuration);\n        }\n      } else {\n        this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_COUNTDOWN);\n        this.el.setAttribute(\"camera-tool\", \"label\", `${this.snapCountdown}`);\n      }\n    }, 1000);\n  },\n\n  cancelSnapping() {\n    clearInterval(this.countdownInterval);\n    this.stopRecording(true);\n    this.updateUI();\n  },\n\n  update() {\n    this.updateUI();\n  },\n\n  updateUI() {\n    if (!this.label) return;\n\n    const label = this.data.label;\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n    const hasDuration = this.data.captureDuration !== 0 && this.data.captureDuration !== Infinity;\n    const isPhoto = this.data.captureDuration === 0;\n\n    const isRecordingUnbound = !hasDuration && this.data.isRecording && this.videoRecorder;\n    this.label.object3D.visible = !!label && !isRecordingUnbound;\n    const showActionLabelBackground = this.label.object3D.visible && this.data.isRecording && !isRecordingUnbound;\n\n    if (label) {\n      this.label.setAttribute(\"text\", { value: label, color: showActionLabelBackground ? \"#fafafa\" : \"#ff3464\" });\n    }\n\n    this.labelActionBackground.object3D.visible = showActionLabelBackground;\n    this.labelBackground.object3D.visible = this.label.object3D.visible && !showActionLabelBackground;\n\n    this.stopButton.object3D.visible = isRecordingUnbound;\n\n    if (hasDuration) {\n      this.durationLabel.setAttribute(\"text\", \"value\", `${this.data.captureDuration}`);\n    }\n\n    this.durationLabel.object3D.visible = hasDuration && !this.data.isSnapping && !isFrozen;\n    this.recordIcon.object3D.visible = !hasDuration && !isPhoto && !isFrozen;\n    this.recordAlphaIcon.object3D.visible = hasDuration && !isPhoto && !isFrozen;\n    this.snapIcon.object3D.visible = isPhoto && !isFrozen;\n    this.snapButton.object3D.visible = !this.data.isSnapping && !isFrozen;\n    this.cancelButton.object3D.visible = this.data.isSnapping && !isFrozen;\n    this.prevDurationButton.object3D.visible = this.nextDurationButton.object3D.visible =\n      !this.data.isSnapping && allowVideo && !isFrozen;\n\n    this.captureAudioIcon.setAttribute(\"icon-button\", \"active\", this.data.captureAudio);\n  },\n\n  async beginRecording(duration) {\n    if (!this.videoContext) {\n      this.videoCanvas = document.createElement(\"canvas\");\n      this.videoCanvas.width = CAPTURE_WIDTH;\n      this.videoCanvas.height = CAPTURE_HEIGHT;\n      this.videoContext = this.videoCanvas.getContext(\"2d\");\n      this.videoImageData = this.videoContext.createImageData(CAPTURE_WIDTH, CAPTURE_HEIGHT);\n      this.videoPixels = new Uint8Array(CAPTURE_WIDTH * CAPTURE_HEIGHT * 4);\n      this.videoImageData.data.set(this.videoPixels);\n    }\n\n    const stream = new MediaStream();\n    const track = this.videoCanvas.captureStream(VIDEO_FPS).getVideoTracks()[0];\n\n    if (this.data.captureAudio) {\n      const selfAudio = await NAF.connection.adapter.getMediaStream(NAF.clientId, \"audio\");\n\n      // NOTE: if we don't have a self audio track, we can end up generating an empty video (browser bug?)\n      // if no audio comes through on the listener source. (Eg the room is otherwise silent.)\n      // So for now, if we don't have a track, just disable audio capture.\n      if (selfAudio && selfAudio.getAudioTracks().length > 0) {\n        const context = THREE.AudioContext.getContext();\n        const destination = context.createMediaStreamDestination();\n\n        const listener = this.el.sceneEl.audioListener;\n        if (listener) {\n          // NOTE audio is not captured from camera vantage point for now.\n          listener.getInput().connect(destination);\n        }\n        context.createMediaStreamSource(selfAudio).connect(destination);\n\n        const audio = destination.stream.getAudioTracks()[0];\n        stream.addTrack(audio);\n      }\n    }\n\n    stream.addTrack(track);\n    this.videoRecorder = new MediaRecorder(stream, { mimeType: videoMimeType });\n    const chunks = [];\n    const recordingStartTime = performance.now();\n\n    this.videoRecorder.ondataavailable = e => chunks.push(e.data);\n\n    this.updateRenderTargetNextTick = true;\n\n    this.videoRecorder.start();\n    this.el.setAttribute(\"camera-tool\", { isRecording: true, label: \" \" });\n    this.el.sceneEl.emit(\"action_camera_recording_started\");\n\n    if (duration !== Infinity) {\n      this.videoCountdown = this.data.captureDuration;\n      this.el.setAttribute(\"camera-tool\", \"label\", `${this.videoCountdown}`);\n\n      this.videoCountdownInterval = setInterval(() => {\n        this.videoCountdown--;\n\n        if (this.videoCountdown === 0) {\n          this.stopRecording();\n          this.videoCountdownInterval = null;\n        } else {\n          this.el.setAttribute(\"camera-tool\", \"label\", `${this.videoCountdown}`);\n        }\n      }, 1000);\n    }\n\n    this.videoRecorder._free = () => (chunks.length = 0); // Used for cancelling\n    this.videoRecorder.onstop = async () => {\n      this.el.sceneEl.emit(\"action_camera_recording_ended\");\n\n      if (chunks.length === 0) return;\n      const mimeType = chunks[0].type;\n      const recordingDuration = performance.now() - recordingStartTime;\n      const blob = new Blob(chunks, { type: mimeType });\n\n      chunks.length = 0;\n\n      const { entity, orientation } = addAndArrangeMedia(\n        this.el,\n        new File([blob], \"capture\", { type: mimeType.split(\";\")[0] }), // Drop codec\n        \"video-camera\",\n        this.localSnapCount,\n        !!this.playerIsBehindCamera\n      );\n\n      entity.addEventListener(\n        \"video-loaded\",\n        () => {\n          // If we were recording audio, then pause the video immediately after starting.\n          //\n          // Or, to limit the # of concurrent videos playing, if it was a short clip, let it loop\n          // a few times and then pause it.\n          if (this.data.captureAudio || recordingDuration <= MAX_DURATION_TO_LIMIT_LOOPS * 1000) {\n            setTimeout(() => {\n              if (!NAF.utils.isMine(entity) && !NAF.utils.takeOwnership(entity)) return;\n              entity.components[\"media-video\"].tryUpdateVideoPlaybackState(true);\n            }, this.data.captureAudio ? 0 : recordingDuration * VIDEO_LOOPS + 100);\n          }\n        },\n        { once: true }\n      );\n\n      this.localSnapCount++;\n\n      orientation.then(() => this.el.sceneEl.emit(\"object_spawned\", { objectType: ObjectTypes.CAMERA }));\n    };\n  },\n\n  stopRecording(cancel) {\n    if (this.videoRecorder) {\n      if (cancel) {\n        this.videoRecorder.onstop = () => {};\n        this.videoRecorder._free();\n      }\n\n      this.videoRecorder.stop();\n      this.videoRecorder = null;\n\n      if (!cancel) {\n        this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_TOOK_SNAPSHOT);\n      }\n    }\n    clearInterval(this.videoCountdownInterval);\n\n    this.videoCountdownInterval = null;\n    this.el.setAttribute(\"camera-tool\", \"label\", \"\");\n    this.el.setAttribute(\"camera-tool\", { isRecording: false, isSnapping: false });\n  },\n\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const heldLeftHand = interaction.state.leftHand.held === this.el;\n    const heldRightHand = interaction.state.rightHand.held === this.el;\n    const heldRightRemote = interaction.state.rightRemote.held === this.el;\n\n    const heldThisFrame =\n      (heldLeftHand && userinput.get(interaction.options.leftHand.grabPath)) ||\n      (heldRightHand && userinput.get(interaction.options.rightHand.grabPath)) ||\n      (heldRightRemote && userinput.get(interaction.options.rightRemote.grabPath));\n\n    const isHolding = heldLeftHand || heldRightHand || heldRightRemote;\n\n    this.updateSnapMenuOrientation();\n\n    if (heldThisFrame) {\n      this.localSnapCount = 0;\n    }\n\n    this.showCameraViewfinder = isHolding || !isMobileVR || this.data.isSnapping || this.videoRecorder;\n\n    if (this.screen && this.selfieScreen) {\n      this.screen.visible = this.selfieScreen.visible = !!this.showCameraViewfinder;\n    }\n\n    // Always draw held, snapping, or recording camera viewfinders with a decent framerate\n    if (\n      (isHolding || this.data.isSnapping || this.videoRecorder) &&\n      performance.now() - this.lastUpdate >= 1000 / (this.videoRecorder ? VIDEO_FPS : VIEWFINDER_FPS)\n    ) {\n      this.updateRenderTargetNextTick = true;\n    }\n\n    const isHoldingTrigger = this.isHoldingSnapshotTrigger();\n    const isPermittedToUse = window.APP.hubChannel.can(\"spawn_camera\");\n\n    if (isPermittedToUse) {\n      // If the user lets go of the trigger before 500ms, take a picture, otherwise record until they let go.\n      if (isHoldingTrigger && !this.data.isSnapping && !this.snapTriggerTimeout) {\n        this.snapTriggerTimeout = setTimeout(() => {\n          if (this.isHoldingSnapshotTrigger()) {\n            this.el.setAttribute(\"camera-tool\", \"isSnapping\", true);\n            this.beginRecording(Infinity);\n\n            const releaseInterval = setInterval(() => {\n              if (this.isHoldingSnapshotTrigger()) return;\n              this.stopRecording();\n              clearInterval(releaseInterval);\n            }, 500);\n          }\n\n          this.snapTriggerTimeout = null;\n        }, 500);\n      } else if (!isHoldingTrigger && !this.data.isSnapping && this.snapTriggerTimeout) {\n        clearTimeout(this.snapTriggerTimeout);\n        this.snapTriggerTimeout = null;\n        this.takeSnapshotNextTick = true;\n      }\n    }\n  },\n\n  tock: (function() {\n    const tempHeadScale = new THREE.Vector3();\n\n    return function tock() {\n      const sceneEl = this.el.sceneEl;\n      const renderer = this.renderer || sceneEl.renderer;\n      const now = performance.now();\n\n      // Perform lookAt in tock so it will re-orient after grabs, etc.\n      if (this.trackTarget) {\n        if (this.trackTarget.parentNode) {\n          this.lookAt(this.trackTarget);\n        } else {\n          this.trackTarget = null; // Target removed\n        }\n      }\n\n      if (!this.playerHead) {\n        const headEl = document.getElementById(\"player-head\");\n        this.playerHead = headEl && headEl.object3D;\n      }\n\n      if (!this.playerHud) {\n        const hudEl = document.getElementById(\"player-hud\");\n        this.playerHud = hudEl && hudEl.object3D;\n      }\n\n      if (\n        this.takeSnapshotNextTick ||\n        (this.updateRenderTargetNextTick && (this.viewfinderInViewThisFrame || this.videoRecorder))\n      ) {\n        if (this.playerHead) {\n          tempHeadScale.copy(this.playerHead.scale);\n\n          // We want to scale our own head in between frames now that we're taking a video/photo.\n          let scale = 1;\n          // TODO: The local-audio-analyser has the non-networked media stream, which is active\n          // even while the user is muted. This should be looking at a different analyser that\n          // has the networked media stream instead.\n          const analyser = this.el.sceneEl.systems[\"local-audio-analyser\"];\n\n          if (analyser && this.playerHead.el.components[\"scale-audio-feedback\"]) {\n            scale = getAudioFeedbackScale(this.el.object3D, this.playerHead, 1, 2, analyser.volume);\n          }\n\n          this.playerHead.scale.set(scale, scale, scale);\n          this.playerHead.updateMatrices(true, true);\n          this.playerHead.updateMatrixWorld(true, true);\n        }\n\n        let playerHudWasVisible = false;\n\n        if (this.playerHud) {\n          playerHudWasVisible = this.playerHud.visible;\n          this.playerHud.visible = false;\n          if (this.el.sceneEl.systems[\"post-physics\"]) {\n            this.el.sceneEl.systems[\"post-physics\"].spriteSystem.mesh.visible = false;\n          }\n        }\n\n        const tmpVRFlag = renderer.vr.enabled;\n        const tmpOnAfterRender = sceneEl.object3D.onAfterRender;\n        delete sceneEl.object3D.onAfterRender;\n        renderer.vr.enabled = false;\n\n        if (allowVideo && this.videoRecorder && !this.videoRenderTarget) {\n          // Create a separate render target for video becuase we need to flip and (sometimes) downscale it before\n          // encoding it to video.\n          this.videoRenderTarget = new THREE.WebGLRenderTarget(CAPTURE_WIDTH, CAPTURE_HEIGHT, {\n            format: THREE.RGBAFormat,\n            minFilter: THREE.LinearFilter,\n            magFilter: THREE.NearestFilter,\n            encoding: THREE.sRGBEncoding,\n            depth: false,\n            stencil: false\n          });\n\n          // Used to set up framebuffer in three.js as a side effect\n          renderer.setRenderTarget(this.videoRenderTarget);\n        }\n\n        renderer.setRenderTarget(this.renderTarget);\n        renderer.render(sceneEl.object3D, this.camera);\n        renderer.setRenderTarget(null);\n\n        renderer.vr.enabled = tmpVRFlag;\n        sceneEl.object3D.onAfterRender = tmpOnAfterRender;\n        if (this.playerHead) {\n          this.playerHead.scale.copy(tempHeadScale);\n          this.playerHead.updateMatrices(true, true);\n          this.playerHead.updateMatrixWorld(true, true);\n        }\n        if (this.playerHud) {\n          this.playerHud.visible = playerHudWasVisible;\n          if (this.el.sceneEl.systems[\"post-physics\"]) {\n            this.el.sceneEl.systems[\"post-physics\"].spriteSystem.mesh.visible = true;\n          }\n        }\n        this.lastUpdate = now;\n\n        if (this.videoRecorder) {\n          // This blit operation will (if necessary) scale/resample the view finder render target and, importantly,\n          // flip the texture on Y\n          blitFramebuffer(\n            renderer,\n            this.renderTarget,\n            0,\n            0,\n            RENDER_WIDTH,\n            RENDER_HEIGHT,\n            this.videoRenderTarget,\n            0,\n            CAPTURE_HEIGHT,\n            CAPTURE_WIDTH,\n            0\n          );\n          renderer.readRenderTargetPixels(\n            this.videoRenderTarget,\n            0,\n            0,\n            CAPTURE_WIDTH,\n            CAPTURE_HEIGHT,\n            this.videoPixels\n          );\n          this.videoImageData.data.set(this.videoPixels);\n          this.videoContext.putImageData(this.videoImageData, 0, 0);\n        }\n\n        this.updateRenderTargetNextTick = false;\n        this.viewfinderInViewThisFrame = false;\n      }\n\n      if (this.takeSnapshotNextTick) {\n        if (!this.snapPixels) {\n          this.snapPixels = new Uint8Array(RENDER_WIDTH * RENDER_HEIGHT * 4);\n        }\n        renderer.readRenderTargetPixels(this.renderTarget, 0, 0, RENDER_WIDTH, RENDER_HEIGHT, this.snapPixels);\n\n        pixelsToPNG(this.snapPixels, RENDER_WIDTH, RENDER_HEIGHT).then(file => {\n          const { orientation } = addAndArrangeMedia(\n            this.el,\n            file,\n            \"photo-camera\",\n            this.localSnapCount,\n            !!this.playerIsBehindCamera\n          );\n\n          orientation.then(() => {\n            this.el.sceneEl.emit(\"object_spawned\", { objectType: ObjectTypes.CAMERA });\n          });\n        });\n        sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_TOOK_SNAPSHOT);\n        this.takeSnapshotNextTick = false;\n        this.localSnapCount++;\n      }\n    };\n  })(),\n\n  isHoldingSnapshotTrigger: function() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const heldLeftHand = interaction.state.leftHand.held === this.el;\n    const heldRightHand = interaction.state.rightHand.held === this.el;\n    const heldRightRemote = interaction.state.rightRemote.held === this.el;\n\n    let grabberId;\n    if (heldRightHand) {\n      grabberId = \"player-right-controller\";\n    } else if (heldLeftHand) {\n      grabberId = \"player-left-controller\";\n    } else if (heldRightRemote) {\n      grabberId = \"cursor\";\n    }\n\n    if (grabberId) {\n      const grabberPaths = pathsMap[grabberId];\n      if (userinput.get(grabberPaths.takeSnapshot)) {\n        return true;\n      }\n    }\n\n    return !!userinput.get(paths.actions.takeSnapshot);\n  },\n\n  updateSnapMenuOrientation: (function() {\n    const playerWorld = new THREE.Vector3();\n    const cameraWorld = new THREE.Vector3();\n    const playerToCamera = new THREE.Vector3();\n    const cameraForwardPoint = new THREE.Vector3();\n    const cameraForwardWorld = new THREE.Vector3();\n    return function() {\n      this.el.object3D.getWorldPosition(cameraWorld);\n      this.playerCamera.getWorldPosition(playerWorld);\n      playerToCamera.subVectors(playerWorld, cameraWorld);\n      cameraForwardPoint.set(0, 0, 1);\n      this.el.object3D.localToWorld(cameraForwardPoint);\n      cameraForwardWorld.subVectors(cameraForwardPoint, cameraWorld);\n      cameraForwardWorld.normalize();\n      playerToCamera.normalize();\n\n      const playerIsBehindCamera = cameraForwardWorld.dot(playerToCamera) < 0;\n\n      if (this.playerIsBehindCamera !== playerIsBehindCamera) {\n        this.playerIsBehindCamera = playerIsBehindCamera;\n        this.snapMenu.object3D.rotation.set(0, this.playerIsBehindCamera ? Math.PI : 0, 0);\n        this.snapMenu.object3D.matrixNeedsUpdate = true;\n      }\n    };\n  })()\n});\n","import { addMedia } from \"../utils/media-utils\";\nimport { ObjectContentOrigins } from \"../object-types\";\nimport { guessContentType } from \"../utils/media-url-utils\";\n\nAFRAME.registerComponent(\"clone-media-button\", {\n  init() {\n    this.updateSrc = () => {\n      const src = (this.src = this.targetEl.components[\"media-loader\"].data.src);\n      const visible = src && guessContentType(src) !== \"video/vnd.hubs-webrtc\";\n      this.el.object3D.visible = !!visible;\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n      this.targetEl.addEventListener(\"media_resolved\", this.updateSrc, { once: true });\n      this.updateSrc();\n    });\n\n    this.onClick = () => {\n      const src = this.src;\n      const { contentSubtype, resize } = this.targetEl.components[\"media-loader\"].data;\n      const { entity } = addMedia(src, \"#interactable-media\", ObjectContentOrigins.URL, contentSubtype, true, resize);\n\n      entity.object3D.matrixNeedsUpdate = true;\n\n      entity.setAttribute(\"offset-relative-to\", {\n        target: \"#player-camera\",\n        offset: { x: 0, y: 0, z: -1.5 }\n      });\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","import { isHubsSceneUrl, isHubsRoomUrl, isHubsAvatarUrl } from \"../utils/media-url-utils\";\nimport { guessContentType } from \"../utils/media-url-utils\";\n\nAFRAME.registerComponent(\"open-media-button\", {\n  init() {\n    this.label = this.el.querySelector(\"[text]\");\n\n    this.updateSrc = () => {\n      const src = (this.src = this.targetEl.components[\"media-loader\"].data.src);\n      const visible = src && guessContentType(src) !== \"video/vnd.hubs-webrtc\";\n      const mayChangeScene = this.el.sceneEl.systems.permissions.canOrWillIfCreator(\"update_hub\");\n\n      this.el.object3D.visible = !!visible;\n\n      if (visible) {\n        let label = \"open link\";\n        if (isHubsAvatarUrl(src)) {\n          label = \"use avatar\";\n        } else if (isHubsSceneUrl(src) && mayChangeScene) {\n          label = \"use scene\";\n        } else if (isHubsRoomUrl(src)) {\n          label = \"visit room\";\n        }\n        this.label.setAttribute(\"text\", \"value\", label);\n      }\n    };\n\n    this.onClick = () => {\n      const mayChangeScene = this.el.sceneEl.systems.permissions.canOrWillIfCreator(\"update_hub\");\n\n      if (isHubsAvatarUrl(this.src)) {\n        const avatarId = new URL(this.src).pathname.split(\"/\").pop();\n        window.APP.store.update({ profile: { avatarId } });\n      } else if (isHubsSceneUrl(this.src) && mayChangeScene) {\n        this.el.sceneEl.emit(\"scene_media_selected\", this.src);\n      } else if (isHubsRoomUrl(this.src)) {\n        location.href = this.src;\n      } else {\n        window.open(this.src);\n      }\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n      this.targetEl.addEventListener(\"media_resolved\", this.updateSrc, { once: true });\n      this.updateSrc();\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\nconst AMMO_BODY_ATTRIBUTES = { type: \"kinematic\", collisionFilterMask: COLLISION_LAYERS.HANDS };\n\nconst TRANSFORM_MODE = {\n  AXIS: \"axis\",\n  PUPPET: \"puppet\",\n  CURSOR: \"cursor\",\n  ALIGN: \"align\",\n  SCALE: \"scale\"\n};\n\nconst SCALE_SENSITIVITY = 100;\nconst MIN_SCALE = 0.1;\nconst MAX_SCALE = 100;\n\nconst STEP_LENGTH = Math.PI / 10;\nconst CAMERA_WORLD_QUATERNION = new THREE.Quaternion();\nconst CAMERA_WORLD_POSITION = new THREE.Vector3();\nconst TARGET_WORLD_QUATERNION = new THREE.Quaternion();\nconst v = new THREE.Vector3();\nconst v2 = new THREE.Vector3();\nconst q = new THREE.Quaternion();\nconst q2 = new THREE.Quaternion();\n\nAFRAME.registerComponent(\"transform-button\", {\n  schema: {\n    mode: {\n      type: \"string\",\n      oneof: Object.values(TRANSFORM_MODE),\n      default: TRANSFORM_MODE.CURSOR\n    },\n    axis: { type: \"vec3\", default: null }\n  },\n  init() {\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n    });\n    const rightHand = document.querySelector(\"#player-right-controller\");\n    this.onGrabStart = e => {\n      if (!this.targetEl) {\n        return;\n      }\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) {\n        return;\n      }\n      if (this.targetEl.body) {\n        this.targetEl.setAttribute(\"ammo-body\", AMMO_BODY_ATTRIBUTES);\n      }\n      this.transformSystem = this.transformSystem || AFRAME.scenes[0].systems[\"transform-selected-object\"];\n      this.transformSystem.startTransform(\n        this.targetEl.object3D,\n        e.object3D.el.id === \"cursor\" ? rightHand.object3D : e.object3D,\n        this.data\n      );\n    };\n    this.onGrabEnd = () => {\n      this.transformSystem = this.transformSystem || AFRAME.scenes[0].systems[\"transform-selected-object\"];\n      this.transformSystem.stopTransform();\n    };\n  },\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onGrabStart);\n    this.el.object3D.addEventListener(\"holdable-button-down\", this.onGrabStart);\n    this.el.object3D.addEventListener(\"holdable-button-up\", this.onGrabEnd);\n  },\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onGrabStart);\n    this.el.object3D.removeEventListener(\"holdable-button-down\", this.onGrabStart);\n    this.el.object3D.removeEventListener(\"holdable-button-up\", this.onGrabEnd);\n  }\n});\n\nAFRAME.registerSystem(\"transform-selected-object\", {\n  init() {\n    this.target = null;\n    this.mode = null;\n    this.transforming = false;\n    this.axis = new THREE.Vector3();\n    this.store = window.APP.store;\n\n    this.dxStore = 0;\n    this.dxApplied = 0;\n    this.dyAll = 0;\n    this.dyStore = 0;\n    this.dyApplied = 0;\n\n    this.puppet = {\n      initialControllerOrientation: new THREE.Quaternion(),\n      initialControllerOrientation_inverse: new THREE.Quaternion(),\n      initialObjectOrientation: new THREE.Quaternion(),\n      currentControllerOrientation: new THREE.Quaternion(),\n      controllerOrientationDelta: new THREE.Quaternion()\n    };\n\n    this.planarInfo = {\n      plane: new THREE.Mesh(\n        new THREE.PlaneBufferGeometry(100000, 100000, 2, 2),\n        new THREE.MeshBasicMaterial({\n          visible: false,\n          wireframe: true,\n          side: THREE.DoubleSide,\n          transparent: true,\n          opacity: 0.3\n        })\n      ),\n      normal: new THREE.Vector3(),\n      intersections: [],\n      previousPointOnPlane: new THREE.Vector3(),\n      currentPointOnPlane: new THREE.Vector3(),\n      deltaOnPlane: new THREE.Vector3(),\n      finalProjectedVec: new THREE.Vector3()\n    };\n    this.el.object3D.add(this.planarInfo.plane);\n  },\n\n  stopTransform() {\n    this.transforming = false;\n  },\n\n  startPlaneCasting() {\n    const { plane, intersections, previousPointOnPlane } = this.planarInfo;\n\n    this.el.camera.getWorldQuaternion(CAMERA_WORLD_QUATERNION);\n    plane.quaternion.copy(CAMERA_WORLD_QUATERNION);\n    this.target.getWorldPosition(plane.position);\n    plane.matrixNeedsUpdate = true;\n    plane.updateMatrixWorld(true);\n\n    intersections.length = 0;\n    this.raycaster =\n      this.raycaster || document.querySelector(\"#cursor-controller\").components[\"cursor-controller\"].raycaster;\n    const far = this.raycaster.far;\n    this.raycaster.far = 1000;\n    plane.raycast(this.raycaster, intersections);\n    this.raycaster.far = far;\n    this.transforming = !!intersections[0];\n    if (!this.transforming) {\n      return;\n    }\n\n    previousPointOnPlane.copy(intersections[0].point);\n\n    this.target.getWorldQuaternion(TARGET_WORLD_QUATERNION);\n\n    v.set(0, 0, -1).applyQuaternion(CAMERA_WORLD_QUATERNION);\n    v2.set(0, 0, -1).applyQuaternion(TARGET_WORLD_QUATERNION);\n    this.sign = v.dot(v2) > 0 ? 1 : -1;\n\n    v.set(0, 1, 0); //.applyQuaternion(this.CAMERA_WORLD_QUATERNION);\n    v2.set(0, 1, 0).applyQuaternion(TARGET_WORLD_QUATERNION);\n    this.sign2 = v.dot(v2) > 0 ? 1 : -1;\n\n    this.dyAll = 0;\n    this.dyStore = 0;\n    this.dyApplied = 0;\n    this.dxAll = 0;\n    this.dxStore = 0;\n    this.dxApplied = 0;\n  },\n\n  startTransform(target, hand, data) {\n    this.target = target;\n    this.hand = hand;\n    this.mode = data.mode;\n    this.transforming = true;\n\n    if (this.mode === TRANSFORM_MODE.ALIGN) {\n      this.store.update({ activity: { hasRecentered: true } });\n      return;\n    } else if (this.mode === TRANSFORM_MODE.SCALE) {\n      this.store.update({ activity: { hasScaled: true } });\n    } else {\n      this.store.update({ activity: { hasRotated: true } });\n    }\n\n    if (this.mode === TRANSFORM_MODE.PUPPET) {\n      this.target.getWorldQuaternion(this.puppet.initialObjectOrientation);\n      this.hand.getWorldQuaternion(this.puppet.initialControllerOrientation);\n      this.puppet.initialControllerOrientation_inverse.copy(this.puppet.initialControllerOrientation).inverse();\n      return;\n    }\n\n    if (this.mode === TRANSFORM_MODE.AXIS) {\n      this.axis.copy(data.axis);\n    }\n\n    this.startPlaneCasting();\n  },\n\n  puppetingTick() {\n    // Find controller delta as a quaternion, then apply it to the object, snapping in fixed increments if desired:\n    // Snap to fixed angle increments by converting to an Euler,\n    // restricting the angles using Math.floor, and converting back to a quaternion.\n    const {\n      currentControllerOrientation,\n      controllerOrientationDelta,\n      initialControllerOrientation_inverse,\n      initialObjectOrientation\n    } = this.puppet;\n    this.hand.getWorldQuaternion(currentControllerOrientation);\n    controllerOrientationDelta.copy(initialControllerOrientation_inverse).premultiply(currentControllerOrientation);\n    this.target.quaternion.copy(initialObjectOrientation).premultiply(controllerOrientationDelta);\n    this.target.matrixNeedsUpdate = true;\n  },\n\n  cursorAxisOrScaleTick() {\n    const {\n      plane,\n      normal,\n      intersections,\n      previousPointOnPlane,\n      currentPointOnPlane,\n      deltaOnPlane,\n      finalProjectedVec\n    } = this.planarInfo;\n\n    this.target.getWorldPosition(plane.position);\n    this.el.camera.getWorldQuaternion(plane.quaternion);\n    plane.matrixNeedsUpdate = true;\n    const cameraToPlaneDistance = v.sub(plane.position).length();\n\n    intersections.length = 0;\n    const far = this.raycaster.far;\n    this.raycaster.far = 1000;\n    plane.raycast(this.raycaster, intersections);\n    this.raycaster.far = far;\n    const intersection = intersections[0]; // point\n    if (!intersection) return;\n\n    normal.set(0, 0, -1).applyQuaternion(plane.quaternion);\n\n    currentPointOnPlane.copy(intersection.point);\n    deltaOnPlane.copy(currentPointOnPlane).sub(previousPointOnPlane);\n    const SENSITIVITY = 10;\n    finalProjectedVec\n      .copy(deltaOnPlane)\n      .projectOnPlane(normal)\n      .applyQuaternion(q.copy(plane.quaternion).inverse())\n      .multiplyScalar(SENSITIVITY / cameraToPlaneDistance);\n    if (this.mode === TRANSFORM_MODE.CURSOR || this.mode === TRANSFORM_MODE.SCALE) {\n      const modify = AFRAME.scenes[0].systems.userinput.get(paths.actions.transformModifier);\n\n      this.dyAll = this.dyStore + finalProjectedVec.y;\n      this.dyApplied = modify ? this.dyAll : Math.round(this.dyAll / STEP_LENGTH) * STEP_LENGTH;\n      this.dyStore = this.dyAll - this.dyApplied;\n\n      this.dxAll = this.dxStore + finalProjectedVec.x;\n      this.dxApplied = modify ? this.dxAll : Math.round(this.dxAll / STEP_LENGTH) * STEP_LENGTH;\n      this.dxStore = this.dxAll - this.dxApplied;\n\n      if (this.mode === TRANSFORM_MODE.CURSOR) {\n        this.target.getWorldQuaternion(TARGET_WORLD_QUATERNION);\n        v.set(1, 0, 0).applyQuaternion(modify ? CAMERA_WORLD_QUATERNION : TARGET_WORLD_QUATERNION);\n        q.setFromAxisAngle(v, modify ? -this.dyApplied : this.sign2 * this.sign * -this.dyApplied);\n\n        if (modify) {\n          v.set(0, 1, 0).applyQuaternion(CAMERA_WORLD_QUATERNION);\n        } else {\n          v.set(0, 1, 0);\n        }\n        q2.setFromAxisAngle(v, this.dxApplied);\n\n        this.target.quaternion.premultiply(q).premultiply(q2);\n      } else {\n        const scaleFactor =\n          THREE.Math.clamp(finalProjectedVec.y + finalProjectedVec.x, -0.0005, 0.0005) * SCALE_SENSITIVITY;\n\n        const newScale = this.target.scale.x * (1.0 + scaleFactor);\n\n        if (newScale > MIN_SCALE && newScale < MAX_SCALE) {\n          this.target.scale.multiplyScalar(1.0 + scaleFactor);\n        }\n      }\n\n      this.target.matrixNeedsUpdate = true;\n    } else if (this.mode === TRANSFORM_MODE.AXIS) {\n      this.dxAll = this.dxStore + finalProjectedVec.x;\n      this.dxApplied = Math.round(this.dxAll / STEP_LENGTH) * STEP_LENGTH;\n      this.dxStore = this.dxAll - this.dxApplied;\n\n      this.target.quaternion.multiply(q.setFromAxisAngle(this.axis, -this.sign * this.dxApplied));\n      this.target.matrixNeedsUpdate = true;\n    }\n\n    previousPointOnPlane.copy(currentPointOnPlane);\n  },\n\n  tick() {\n    if (!this.transforming) {\n      return;\n    }\n\n    if (this.mode === TRANSFORM_MODE.ALIGN) {\n      this.el.camera.getWorldPosition(CAMERA_WORLD_POSITION);\n      this.target.lookAt(CAMERA_WORLD_POSITION);\n      this.transforming = false;\n      return;\n    }\n\n    if (this.mode === TRANSFORM_MODE.PUPPET) {\n      this.puppetingTick();\n      return;\n    }\n    this.cursorAxisOrScaleTick();\n  }\n});\n\nAFRAME.registerComponent(\"transform-button-selector\", {\n  tick() {\n    const hand = AFRAME.scenes[0].systems.userinput.get(paths.actions.rightHand.pose);\n    if (!hand) {\n      if (this.el.components[\"transform-button\"].data.mode !== TRANSFORM_MODE.CURSOR) {\n        this.el.setAttribute(\"transform-button\", \"mode\", TRANSFORM_MODE.CURSOR);\n      }\n    } else {\n      if (this.el.components[\"transform-button\"].data.mode !== TRANSFORM_MODE.PUPPET) {\n        this.el.setAttribute(\"transform-button\", \"mode\", TRANSFORM_MODE.PUPPET);\n      }\n    }\n  }\n});\n\nconst FORWARD = new THREE.Vector3(0, 0, 1);\nconst TWO_PI = 2 * Math.PI;\nAFRAME.registerComponent(\"visible-if-transforming\", {\n  init() {},\n  tick(t) {\n    const shouldBeVisible = AFRAME.scenes[0].systems[\"transform-selected-object\"].transforming;\n    const visibleNeedsUpdate = this.el.getAttribute(\"visible\") !== shouldBeVisible;\n    if (visibleNeedsUpdate) {\n      this.el.setAttribute(\"visible\", AFRAME.scenes[0].systems[\"transform-selected-object\"].transforming);\n    }\n\n    if (shouldBeVisible) {\n      this.el.object3D.quaternion.setFromAxisAngle(FORWARD, TWO_PI * Math.sin(t / 1000.0));\n      this.el.object3D.matrixNeedsUpdate = true;\n    }\n  }\n});\n","const CYLINDER_TEXTURE =\n  \"data:image/png;base64,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\";\n\nimport { SOUND_TELEPORT_START, SOUND_TELEPORT_END } from \"../systems/sound-effects-system\";\n\nfunction easeIn(t) {\n  return t * t;\n}\n\nfunction easeOutIn(t) {\n  if (t < 0.5) return 0.5 * ((t = t * 2 - 1) * t * t + 1);\n  return 0.5 * (t = t * 2 - 1) * t * t + 0.5;\n}\n\nconst RayCurve = function(numPoints, width) {\n  this.geometry = new THREE.BufferGeometry();\n  this.vertices = new Float32Array(numPoints * 3 * 2);\n  this.uvs = new Float32Array(numPoints * 2 * 2);\n  this.width = width;\n\n  this.geometry.addAttribute(\"position\", new THREE.BufferAttribute(this.vertices, 3).setDynamic(true));\n\n  this.material = new THREE.MeshBasicMaterial({\n    side: THREE.DoubleSide,\n    transparent: true\n  });\n\n  this.mesh = new THREE.Mesh(this.geometry, this.material);\n  this.mesh.drawMode = THREE.TriangleStripDrawMode;\n\n  this.mesh.frustumCulled = false;\n  this.mesh.vertices = this.vertices;\n\n  this.direction = new THREE.Vector3();\n  this.numPoints = numPoints;\n};\n\nRayCurve.prototype = {\n  setDirection: function(direction) {\n    const UP = new THREE.Vector3(0, 1, 0);\n    this.direction\n      .copy(direction)\n      .cross(UP)\n      .normalize()\n      .multiplyScalar(this.width / 2);\n  },\n\n  setWidth: function(width) {\n    this.width = width;\n  },\n\n  setPoint: (function() {\n    const posA = new THREE.Vector3();\n    const posB = new THREE.Vector3();\n\n    return function(i, point) {\n      posA.copy(point).add(this.direction);\n      posB.copy(point).sub(this.direction);\n\n      let idx = 2 * 3 * i;\n      this.vertices[idx++] = posA.x;\n      this.vertices[idx++] = posA.y;\n      this.vertices[idx++] = posA.z;\n\n      this.vertices[idx++] = posB.x;\n      this.vertices[idx++] = posB.y;\n      this.vertices[idx++] = posB.z;\n\n      this.geometry.attributes.position.needsUpdate = true;\n    };\n  })()\n};\n\nfunction parabolicCurve(p0, v0, t, out) {\n  out.x = p0.x + v0.x * t;\n  out.y = p0.y + v0.y * t - 4.9 * t * t;\n  out.z = p0.z + v0.z * t;\n  return out;\n}\n\nfunction isValidNormalsAngle(collisionNormal, referenceNormal, landingMaxAngle) {\n  const angleNormals = referenceNormal.angleTo(collisionNormal);\n  return THREE.Math.RAD2DEG * angleNormals <= landingMaxAngle;\n}\n\nconst checkLineIntersection = (function() {\n  const direction = new THREE.Vector3();\n  return function checkLineIntersection(start, end, meshes, raycaster, referenceNormal, landingMaxAngle, hitPoint) {\n    direction.copy(end).sub(start);\n    const distance = direction.length();\n    raycaster.far = distance;\n    raycaster.set(start, direction.normalize());\n    const intersects = raycaster.intersectObjects(meshes, true);\n    if (intersects.length > 0 && isValidNormalsAngle(intersects[0].face.normal, referenceNormal, landingMaxAngle)) {\n      hitPoint.copy(intersects[0].point);\n      return true;\n    }\n    return false;\n  };\n})();\n\nfunction getMeshes(collisionEntities) {\n  return collisionEntities\n    .map(function(entity) {\n      return entity.getObject3D(\"mesh\");\n    })\n    .filter(function(n) {\n      return n;\n    });\n}\n\nconst MISS_OPACITY = 0.1;\nconst HIT_OPACITY = 0.3;\nconst MISS_COLOR = 0xff0000;\nconst HIT_COLOR = 0x00ff00;\nconst FORWARD = new THREE.Vector3(0, 0, -1);\nconst LANDING_NORMAL = new THREE.Vector3(0, 1, 0);\nconst MAX_LANDING_ANGLE = 45;\nconst DRAW_TIME_MS = 400;\nconst q = new THREE.Quaternion();\nconst vecHelper = new THREE.Vector3();\n\nAFRAME.registerComponent(\"teleporter\", {\n  schema: {\n    start: { type: \"string\" },\n    confirm: { type: \"string\" },\n    speed: { default: 12 },\n    collisionEntities: { default: \"\" },\n    hitCylinderColor: { type: \"color\", default: \"#99ff99\" },\n    hitCylinderRadius: { default: 0.25, min: 0 },\n    outerRadius: { default: 0.6, min: 0 },\n    hitCylinderHeight: { default: 0.3, min: 0 }\n  },\n\n  init() {\n    this.isTeleporting = false;\n    this.rayCurve = new RayCurve(20, 0.025);\n    this.rayCurve.mesh.visible = false;\n    this.teleportEntity = document.createElement(\"a-entity\");\n    this.teleportEntity.setObject3D(\"mesh\", this.rayCurve.mesh);\n    this.el.sceneEl.appendChild(this.teleportEntity);\n\n    this.p0 = new THREE.Vector3();\n    this.v0 = new THREE.Vector3();\n    this.parabola = Array.from(new Array(this.rayCurve.numPoints), () => new THREE.Vector3());\n    this.hit = false;\n    this.hitPoint = new THREE.Vector3();\n    this.meshes = [];\n    this.raycaster = new THREE.Raycaster();\n    this.rigWorldPosition = new THREE.Vector3();\n    this.newRigWorldPosition = new THREE.Vector3();\n    this.teleportOriginWorldPosition = new THREE.Vector3();\n\n    this.teleportEventDetail = {\n      oldPosition: this.rigWorldPosition,\n      newPosition: this.newRigWorldPosition,\n      hitPoint: this.hitPoint\n    };\n    this.prevHitHeight = 0;\n    this.direction = new THREE.Vector3();\n    this.hitEntity = this.createHitEntity();\n    this.hitEntity.object3D.visible = false;\n    this.el.sceneEl.appendChild(this.hitEntity);\n    this.queryCollisionEntities();\n  },\n\n  queryCollisionEntities: function() {\n    this.collisionEntities = [].slice.call(this.el.sceneEl.querySelectorAll(this.data.collisionEntities));\n    this.meshes = getMeshes(this.collisionEntities);\n  },\n\n  remove() {\n    this.stopPlayingTeleportSound();\n  },\n\n  stopPlayingTeleportSound() {\n    if (this.teleportingSound) {\n      const sfx = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem;\n      sfx.stopSoundNode(this.teleportingSound.source);\n      this.teleportingSound = null;\n    }\n  },\n\n  tick(t, dt) {\n    if (!this.el.sceneEl.is(\"entered\")) return;\n    const sfx = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const { start, confirm, speed } = this.data;\n    const object3D = this.el.object3D;\n\n    if (!this.isTeleporting && userinput.get(start)) {\n      this.isTeleporting = true;\n      this.timeTeleporting = 0;\n      this.hit = false;\n      this.rayCurve.mesh.visible = true;\n      this.rayCurve.mesh.updateMatrixWorld();\n      this.rayCurve.mesh.material.opacity = MISS_OPACITY;\n      this.rayCurve.mesh.material.color.set(MISS_COLOR);\n      this.rayCurve.mesh.material.needsUpdate = true;\n      this.teleportingSound = sfx.playSoundLoopedWithGain(SOUND_TELEPORT_START);\n      if (this.teleportingSound) {\n        this.teleportingSound.gain.gain.value = 0.005;\n      }\n    }\n\n    if (!this.isTeleporting) {\n      return;\n    }\n    if (this.teleportingSound) {\n      this.teleportingSound.gain.gain.value = Math.min(0.025, this.teleportingSound.gain.gain.value + 0.00002 * dt);\n    }\n\n    if (userinput.get(confirm)) {\n      this.hitEntity.setAttribute(\"visible\", false);\n      this.isTeleporting = false;\n      this.rayCurve.mesh.visible = false;\n\n      if (this.teleportingSound) {\n        this.stopPlayingTeleportSound();\n      }\n\n      if (!this.hit || this.timeTeleporting < DRAW_TIME_MS) {\n        return;\n      }\n\n      this.characterController =\n        this.characterController || document.querySelector(\"#player-rig\").components[\"character-controller\"];\n      this.characterController.teleportTo(this.hitPoint);\n\n      sfx.playSoundOneShot(SOUND_TELEPORT_END);\n      return;\n    }\n\n    this.timeTeleporting += dt;\n    object3D.updateMatrixWorld();\n    object3D.matrixWorld.decompose(this.p0, q, vecHelper);\n    this.direction\n      .copy(FORWARD)\n      .applyQuaternion(q)\n      .normalize();\n    this.rayCurve.setDirection(this.direction);\n    this.v0.copy(this.direction).multiplyScalar(speed);\n\n    let collidedIndex = this.rayCurve.numPoints - 1;\n\n    this.hit = false;\n    this.parabola[0].copy(this.p0);\n    const timeSegment = 1 / (this.rayCurve.numPoints - 1);\n    for (let i = 1; i < this.rayCurve.numPoints; i++) {\n      const t = i * timeSegment;\n      parabolicCurve(this.p0, this.v0, t, vecHelper);\n      this.parabola[i].copy(vecHelper);\n\n      if (\n        checkLineIntersection(\n          this.parabola[i - 1],\n          this.parabola[i],\n          this.meshes,\n          this.raycaster,\n          LANDING_NORMAL,\n          MAX_LANDING_ANGLE,\n          this.hitPoint\n        )\n      ) {\n        this.hit = true;\n        collidedIndex = i;\n        break;\n      }\n    }\n\n    const percentToDraw = this.timeTeleporting > DRAW_TIME_MS ? 1 : this.timeTeleporting / DRAW_TIME_MS;\n    const percentRaycasted = collidedIndex / (this.rayCurve.numPoints - 1);\n    const segmentT = (percentToDraw * percentRaycasted) / (this.rayCurve.numPoints - 1);\n\n    for (let i = 0; i < this.rayCurve.numPoints; i++) {\n      const t = i * segmentT;\n      parabolicCurve(this.p0, this.v0, t, vecHelper);\n      this.rayCurve.setPoint(i, vecHelper);\n    }\n\n    const color = this.hit ? HIT_COLOR : MISS_COLOR;\n    const opacity = this.hit && this.timeTeleporting >= DRAW_TIME_MS ? HIT_OPACITY : MISS_OPACITY;\n    this.rayCurve.material.color.set(color);\n    this.rayCurve.material.opacity = opacity;\n\n    this.hitEntity.setAttribute(\"visible\", this.hit);\n    if (this.hit) {\n      this.hitEntity.setAttribute(\"position\", this.hitPoint);\n      this.hitEntity.object3D.traverse(o => {\n        o.matrixNeedsUpdate = true;\n      });\n      const hitEntityOpacity = HIT_OPACITY * easeOutIn(percentToDraw);\n      const dRadii = this.data.outerRadius - this.data.hitCylinderRadius;\n      const outerScale = (this.data.outerRadius - easeIn(percentToDraw) * dRadii) / this.data.outerRadius;\n      this.outerTorus.object3D.scale.set(outerScale, outerScale, 1);\n      this.torus.setAttribute(\"material\", \"opacity\", hitEntityOpacity);\n      this.cylinder.setAttribute(\"material\", \"opacity\", hitEntityOpacity);\n    }\n  },\n\n  createHitEntity() {\n    const data = this.data;\n\n    // Parent.\n    const hitEntity = document.createElement(\"a-entity\");\n    hitEntity.className = \"hitEntity\";\n\n    // Torus.\n    this.torus = document.createElement(\"a-entity\");\n    this.torus.setAttribute(\"geometry\", {\n      primitive: \"torus\",\n      radius: data.hitCylinderRadius,\n      radiusTubular: 0.01,\n      segmentsRadial: 16,\n      segmentsTubular: 18\n    });\n    this.torus.setAttribute(\"rotation\", { x: 90, y: 0, z: 0 });\n    this.torus.setAttribute(\"material\", {\n      shader: \"flat\",\n      color: data.hitCylinderColor,\n      side: \"double\",\n      depthTest: false\n    });\n    hitEntity.appendChild(this.torus);\n\n    // Cylinder.\n    this.cylinder = document.createElement(\"a-entity\");\n    this.cylinder.setAttribute(\"position\", { x: 0, y: data.hitCylinderHeight / 2, z: 0 });\n    if (window.createImageBitmap !== undefined) {\n      this.cylinder.setAttribute(\"rotation\", { x: 0, y: 0, z: 180 });\n    }\n    this.cylinder.setAttribute(\"geometry\", {\n      primitive: \"cylinder\",\n      segmentsHeight: 1,\n      radius: data.hitCylinderRadius,\n      height: data.hitCylinderHeight,\n      openEnded: true\n    });\n    this.cylinder.setAttribute(\"material\", {\n      shader: \"flat\",\n      color: data.hitCylinderColor,\n      side: \"double\",\n      src: CYLINDER_TEXTURE,\n      transparent: true,\n      depthTest: false\n    });\n    hitEntity.appendChild(this.cylinder);\n\n    // create another torus for animating when the hit destination is ready to go\n    this.outerTorus = document.createElement(\"a-entity\");\n    this.outerTorus.setAttribute(\"geometry\", {\n      primitive: \"torus\",\n      radius: data.outerRadius,\n      radiusTubular: 0.01,\n      segmentsRadial: 16,\n      segmentsTubular: 18\n    });\n    this.outerTorus.setAttribute(\"rotation\", { x: 90, y: 0, z: 0 });\n    this.outerTorus.setAttribute(\"material\", {\n      shader: \"flat\",\n      color: data.hitCylinderColor,\n      side: \"double\",\n      opacity: HIT_OPACITY,\n      depthTest: false\n    });\n    this.outerTorus.setAttribute(\"id\", \"outerTorus\");\n    hitEntity.appendChild(this.outerTorus);\n\n    return hitEntity;\n  }\n});\n","import createTextGeometry from \"three-bmfont-text\";\n\n// 1 to match other A-Frame default widths.\nconst DEFAULT_WIDTH = 1;\n\n// @bryik set anisotropy to 16. Improves look of large amounts of text when viewed from angle.\nconst MAX_ANISOTROPY = 16;\n\n/**\n * Due to using negative scale, we return the opposite side specified.\n * https://github.com/mrdoob/three.js/pull/12787/\n */\nfunction parseSide(side) {\n  switch (side) {\n    case \"back\": {\n      return THREE.FrontSide;\n    }\n    case \"double\": {\n      return THREE.DoubleSide;\n    }\n    default: {\n      return THREE.BackSide;\n    }\n  }\n}\n\n/**\n * Determine wrap pixel count. Either specified or by experimental fudge factor.\n * Note that experimental factor will never be correct for variable width fonts.\n */\nfunction computeWidth(wrapPixels, wrapCount, widthFactor) {\n  return wrapPixels || (0.5 + wrapCount) * widthFactor;\n}\n\n/**\n * Compute default font width factor to use.\n */\nfunction computeFontWidthFactor(font) {\n  let sum = 0;\n  let digitsum = 0;\n  let digits = 0;\n  for (const ch of font.chars) {\n    sum += ch.xadvance;\n    if (ch.id >= 48 && ch.id <= 57) {\n      digits++;\n      digitsum += ch.xadvance;\n    }\n  }\n  return digits ? digitsum / digits : sum / font.chars.length;\n}\n\nfunction loadFont(src) {\n  return fetch(src)\n    .then(resp => resp.json())\n    .then(font => {\n      // Fix negative Y offsets for Roboto MSDF font from tool. Experimentally determined.\n      if (src.indexOf(\"/Roboto-msdf.json\") >= 0) {\n        for (const ch of font.chars) {\n          ch.yoffset += 30;\n        }\n      }\n      font.widthFactor = computeFontWidthFactor(font);\n      return font;\n    });\n}\n\nfunction loadTexture(src) {\n  return new Promise((resolve, reject) => {\n    new THREE.ImageLoader().load(\n      src,\n      image => {\n        const texture = new THREE.Texture();\n        texture.image = image;\n        texture.needsUpdate = true;\n        texture.anisotropy = MAX_ANISOTROPY;\n        resolve(texture);\n      },\n      undefined,\n      err => {\n        console.error(\"Error loading font image\", src, err);\n        reject(null);\n      }\n    );\n  });\n}\n\nconst FONTS = {\n  roboto: {\n    json: loadFont(\"https://cdn.aframe.io/fonts/Roboto-msdf.json\"),\n    texture: loadTexture(\"https://cdn.aframe.io/fonts/Roboto-msdf.png\")\n  }\n};\n\nAFRAME.registerComponent(\"text\", {\n  multiple: true,\n  schema: {\n    align: { type: \"string\", default: \"left\", oneOf: [\"left\", \"right\", \"center\"] },\n    alphaTest: { default: 0.5 },\n    // `anchor` defaults to center to match geometries.\n    anchor: { default: \"center\", oneOf: [\"left\", \"right\", \"center\", \"align\"] },\n    baseline: { default: \"center\", oneOf: [\"top\", \"center\", \"bottom\"] },\n    color: { type: \"color\", default: \"#FFF\" },\n    font: { type: \"string\", default: \"roboto\" },\n    // `height` has no default, will be populated at layout.\n    height: { type: \"number\" },\n    letterSpacing: { type: \"number\", default: 0 },\n    // `lineHeight` defaults to font's `lineHeight` value.\n    lineHeight: { type: \"number\" },\n    // `negate` must be true for fonts generated with older versions of msdfgen (white background).\n    negate: { type: \"boolean\", default: true },\n    opacity: { type: \"number\", default: 1.0 },\n    side: { default: \"front\", oneOf: [\"front\", \"back\", \"double\"] },\n    tabSize: { default: 4 },\n    transparent: { default: true },\n    value: { type: \"string\" },\n    whiteSpace: { default: \"normal\", oneOf: [\"normal\", \"pre\", \"nowrap\"] },\n    // `width` defaults to geometry width if present, else `DEFAULT_WIDTH`.\n    width: { type: \"number\" },\n    // `wrapCount` units are about one default font character. Wrap roughly at this number.\n    wrapCount: { type: \"number\", default: 40 },\n    // `wrapPixels` will wrap using bmfont pixel units (e.g., dejavu's is 32 pixels).\n    wrapPixels: { type: \"number\" },\n    // `xOffset` to add padding.\n    xOffset: { type: \"number\", default: 0 },\n    // `zOffset` will provide a small z offset to avoid z-fighting.\n    zOffset: { type: \"number\", default: 0.001 }\n  },\n\n  init: function() {\n    const shaderData = this.getShaderData(this.data);\n    this.shaderObject = new AFRAME.shaders[\"msdf\"].Shader();\n    this.shaderObject.el = this.el;\n    this.shaderObject.init(shaderData);\n    this.shaderObject.update(shaderData);\n    this.shaderObject.material.transparent = shaderData.transparent; // Apparently, was not set on `init` nor `update`.\n    this.shaderObject.material.side = shaderData.side;\n    this.geometry = createTextGeometry();\n    this.mesh = new THREE.Mesh(this.geometry, this.shaderObject.material);\n    this.el.setObject3D(this.attrName, this.mesh);\n  },\n\n  update: function(oldData) {\n    const data = this.data;\n    const shaderData = this.getShaderData(this.data);\n    this.shaderObject.update(shaderData);\n    this.shaderObject.material.transparent = shaderData.transparent; // Apparently, was not set on `init` nor `update`.\n    this.shaderObject.material.side = shaderData.side;\n\n    // New font. `updateFont` will later change data and layout.\n    if (oldData.font !== data.font) {\n      this.updateFont().catch(err => console.error(err));\n    }\n\n    // Not a new font, but we need to accomodate other changes with the existing font.\n    if (this.currentFont != null) {\n      this.updateGeometry(this.geometry, this.currentFont);\n      this.updateLayout(this.currentFont);\n    }\n  },\n\n  /**\n   * Clean up geometry, material, texture, mesh, objects.\n   */\n  remove: function() {\n    this.geometry.dispose();\n    this.geometry = null;\n    this.el.removeObject3D(this.attrName);\n    this.shaderObject.material.dispose();\n    this.shaderObject.material = null;\n    delete this.shaderObject;\n  },\n\n  getShaderData: (function() {\n    const shaderData = {};\n    return function(data) {\n      shaderData.alphaTest = data.alphaTest;\n      shaderData.color = data.color;\n      shaderData.opacity = data.opacity;\n      shaderData.side = parseSide(data.side);\n      shaderData.transparent = data.transparent;\n      shaderData.negate = data.negate;\n      return shaderData;\n    };\n  })(),\n\n  /**\n   * Load font for geometry, load font image for material, and apply.\n   */\n  updateFont: function() {\n    const data = this.data;\n    const geometry = this.geometry;\n\n    // Make invisible during font swap.\n    this.mesh.visible = false;\n    const fetchFontData = Promise.all([FONTS[data.font].json, FONTS[data.font].texture]);\n    return fetchFontData.then(([font, texture]) => {\n      if (font.pages.length !== 1) {\n        throw new Error(\"Currently only single-page bitmap fonts are supported.\");\n      }\n      this.currentFont = font;\n      this.updateGeometry(geometry, font);\n      this.shaderObject.update({ map: texture });\n      this.updateLayout(font);\n      this.mesh.visible = true;\n    });\n  },\n\n  /**\n   * Update layout with anchor, alignment, baseline, and considering any meshes.\n   */\n  updateLayout: function(font) {\n    const el = this.el;\n    const data = this.data;\n    const geometry = this.geometry;\n    const mesh = this.mesh;\n\n    if (!geometry.layout) {\n      return;\n    }\n\n    // Determine width to use (defined width, geometry's width, or default width).\n    const geometryComponent = el.getAttribute(\"geometry\");\n    const width = data.width || (geometryComponent && geometryComponent.width) || DEFAULT_WIDTH;\n\n    // Determine wrap pixel count. Either specified or by experimental fudge factor.\n    // Note that experimental factor will never be correct for variable width fonts.\n    const textRenderWidth = computeWidth(data.wrapPixels, data.wrapCount, font.widthFactor);\n    const textScale = width / textRenderWidth;\n\n    // Determine height to use.\n    const layout = geometry.layout;\n    const height = textScale * (layout.height + layout.descender);\n\n    // Update geometry dimensions to match text layout if width and height are set to 0.\n    // For example, scales a plane to fit text.\n    if (geometryComponent && geometryComponent.primitive === \"plane\") {\n      if (!geometryComponent.width) {\n        el.setAttribute(\"geometry\", \"width\", width);\n      }\n      if (!geometryComponent.height) {\n        el.setAttribute(\"geometry\", \"height\", height);\n      }\n    }\n\n    // Calculate X position to anchor text left, center, or right.\n    const anchor = data.anchor === \"align\" ? data.align : data.anchor;\n    let x, y;\n    if (anchor === \"left\") {\n      x = 0;\n    } else if (anchor === \"right\") {\n      x = -1 * layout.width;\n    } else if (anchor === \"center\") {\n      x = (-1 * layout.width) / 2;\n    } else {\n      throw new TypeError(\"Invalid text.anchor property value\", anchor);\n    }\n\n    // Calculate Y position to anchor text top, center, or bottom.\n    const baseline = data.baseline;\n    if (baseline === \"bottom\") {\n      y = 0;\n    } else if (baseline === \"top\") {\n      y = -1 * layout.height + layout.ascender;\n    } else if (baseline === \"center\") {\n      y = (-1 * layout.height) / 2;\n    } else {\n      throw new TypeError(\"Invalid text.baseline property value\", baseline);\n    }\n\n    // Position and scale mesh to apply layout.\n    mesh.position.x = x * textScale + data.xOffset;\n    mesh.position.y = y * textScale;\n    // Place text slightly in front to avoid Z-fighting.\n    mesh.position.z = data.zOffset;\n    mesh.scale.set(textScale, -1 * textScale, textScale);\n  },\n\n  /**\n   * Update the text geometry using `three-bmfont-text.update`.\n   */\n  updateGeometry: (function() {\n    const geometryUpdateBase = {};\n    const geometryUpdateData = {};\n    const newLineRegex = /\\\\n/g;\n    const tabRegex = /\\\\t/g;\n\n    return function(geometry, font) {\n      const data = this.data;\n\n      geometryUpdateData.font = font;\n      geometryUpdateData.lineHeight =\n        data.lineHeight && isFinite(data.lineHeight) ? data.lineHeight : font.common.lineHeight;\n      geometryUpdateData.text = data.value\n        .toString()\n        .replace(newLineRegex, \"\\n\")\n        .replace(tabRegex, \"\\t\");\n      geometryUpdateData.width = computeWidth(data.wrapPixels, data.wrapCount, font.widthFactor);\n      geometry.update(Object.assign(geometryUpdateBase, data, geometryUpdateData));\n    };\n  })()\n});\n","export const sets = {};\nsets.global = \"global\";\nsets.inputFocused = \"inputFocused\";\nsets.cursorHoveringOnPen = \"cursorHoveringOnPen\";\nsets.cursorHoveringOnCamera = \"cursorHoveringOnCamera\";\nsets.cursorHoveringOnInteractable = \"cursorHoveringOnInteractable\";\nsets.cursorHoveringOnUI = \"cursorHoveringOnUI\";\nsets.cursorHoveringOnVideo = \"cursorHoveringOnVideo\";\nsets.cursorHoveringOnNothing = \"cursorHoveringOnNothing\";\nsets.cursorHoldingPen = \"cursorHoldingPen\";\nsets.cursorHoldingCamera = \"cursorHoldingCamera\";\nsets.cursorHoldingInteractable = \"cursorHoldingInteractable\";\nsets.cursorHoldingUI = \"cursorHoldingUI\";\nsets.cursorHoldingNothing = \"cursorHoldingNothing\";\nsets.rightHandTeleporting = \"rightHandTeleporting\";\nsets.rightHandHoveringOnPen = \"rightHandHoveringOnPen\";\nsets.rightHandHoveringOnCamera = \"rightHandHoveringOnCamera\";\nsets.rightHandHoveringOnInteractable = \"rightHandHoveringOnInteractable\";\nsets.rightHandHoveringOnNothing = \"rightHandHoveringOnNothing\";\nsets.rightHandHoldingPen = \"rightHandHoldingPen\";\nsets.rightHandHoldingCamera = \"rightHandHoldingCamera\";\nsets.rightHandHoldingInteractable = \"rightHandHoldingInteractable\";\nsets.leftHandTeleporting = \"leftHandTeleporting\";\nsets.leftHandHoveringOnPen = \"leftHandHoveringOnPen\";\nsets.leftHandHoveringOnCamera = \"leftHandHoveringOnCamera\";\nsets.leftHandHoveringOnInteractable = \"leftHandHoveringOnInteractable\";\nsets.leftHandHoldingPen = \"leftHandHoldingPen\";\nsets.leftHandHoldingCamera = \"leftHandHoldingCamera\";\nsets.leftHandHoldingInteractable = \"leftHandHoldingInteractable\";\nsets.leftHandHoveringOnNothing = \"leftHandHoveringOnNothing\";\n","const { detect } = require(\"detect-browser\");\n\nconst browser = detect();\n\n// Precision on device detection is fuzzy -- we can sometimes know if a device is definitely\n// available, or definitely *not* available, and assume it may be available otherwise.\nexport const VR_DEVICE_AVAILABILITY = {\n  yes: \"yes\", // Implies VR can be launched into on this device immediately, in this browser\n  no: \"no\", // Implies this VR device is definitely not supported regardless of browser\n  maybe: \"maybe\" // Implies this device may support this VR platform, but may not be installed or in a compatible browser\n};\n\nfunction isMaybeGearVRCompatibleDevice(ua) {\n  return /\\WAndroid\\W/.test(ua);\n}\n\nfunction isMaybeDaydreamCompatibleDevice(ua) {\n  return /\\WAndroid\\W/.test(ua);\n}\n\n// Blacklist of VR device name regex matchers that we do not want to consider as valid VR devices\n// that can be entered into as a \"generic\" entry flow.\nconst GENERIC_ENTRY_TYPE_DEVICE_BLACKLIST = [/cardboard/i];\n\n// Tries to determine VR entry compatibility regardless of the current browser.\n//\n// For each VR \"entry type\", returns VR_DEVICE_AVAILABILITY.yes if that type can be launched into directly from this browser\n// on this device, returns VR_DEVICE_AVAILABILITY.no if that type is known to not be possible to ever use on this device no matter what,\n// and VR_DEVICE_AVAILABILITY.maybe if the device potentially could support that type if a different browser was running, or if\n// the software was setup, an HMD was purchased, etc.\n//\n// When \"yes\" or \"maybe\", we should present the option. If \"maybe\", when chosen try to get them into a compatible browser.\n// Once in a compatible browser, we should assume it will work (if it doesn't, it's because they don't have the headset,\n// haven't installed the software, our guess about their phone was wrong, etc.)\n//\n// At the time of this writing there are the following VR \"entry types\" that will be validated by this method:\n//\n// - screen: Enter \"on-screen\" in 2D\n// - generic: Generic WebVR (platform/OS agnostic indicator if a general 'Enter VR' option should be presented.)\n// - daydream: Google Daydream\n// - gearvr: Oculus GearVR\n// - cardboard: Google Cardboard\n//\nexport async function getAvailableVREntryTypes() {\n  const ua = navigator.userAgent;\n  const isSamsungBrowser = browser.name === \"chrome\" && /SamsungBrowser/.test(ua);\n  const isMobile = AFRAME.utils.device.isMobile();\n  const isMobileVR = AFRAME.utils.device.isMobileVR();\n\n  // This needs to be kept up-to-date with the latest browsers that can support VR and Hubs.\n  // Checking for navigator.getVRDisplays always passes b/c of polyfill.\n  const isWebVRCapableBrowser = window.hasNativeWebVRImplementation;\n\n  const isDaydreamCapableBrowser = !!(isWebVRCapableBrowser && browser.name === \"chrome\" && !isSamsungBrowser);\n  const isIDevice = AFRAME.utils.device.isIOS();\n  const isFirefoxBrowser = browser.name === \"firefox\";\n  const isUIWebView = typeof navigator.mediaDevices === \"undefined\";\n\n  const safari = isIDevice\n    ? !isUIWebView\n      ? VR_DEVICE_AVAILABILITY.yes\n      : VR_DEVICE_AVAILABILITY.maybe\n    : VR_DEVICE_AVAILABILITY.no;\n\n  const isCardboardCapableBrowser = !!(isMobile && !isIDevice && browser.name === \"chrome\" && !isSamsungBrowser);\n\n  let displays = [];\n  try {\n    // Skip getVRDisplays on desktop Chrome since the API is in a broken state there.\n    // See https://github.com/mozilla/hubs/issues/892\n    if (browser.name !== \"chrome\" || isMobile) {\n      // We pull the displays on non-WebVR capable mobile browsers so we can pick up cardboard.\n      displays = isWebVRCapableBrowser || isCardboardCapableBrowser ? await navigator.getVRDisplays() : [];\n    }\n  } catch (e) {\n    console.warn(\"navigator.getVRDisplays() failed\", e);\n  }\n\n  const isOculusBrowser = /Oculus/.test(ua);\n\n  const screen = isMobileVR\n    ? VR_DEVICE_AVAILABILITY.no\n    : isIDevice && isUIWebView\n      ? VR_DEVICE_AVAILABILITY.maybe\n      : VR_DEVICE_AVAILABILITY.yes;\n\n  // HACK -- we prompt the user to install firefox if they click the VR button on a non-WebVR compatible\n  // browser. once we change this (ie when Chrome has VR support) then this check can be removed. Without this\n  // check if you have FF on Mac/Linux you'll get the confusing flow of having a VR button but then\n  // being asked to download FF.\n  const isNonWebVRFirefox = !isWebVRCapableBrowser && isFirefoxBrowser;\n  let generic = isMobile || isNonWebVRFirefox ? VR_DEVICE_AVAILABILITY.no : VR_DEVICE_AVAILABILITY.maybe;\n  let cardboard = VR_DEVICE_AVAILABILITY.no;\n\n  // We only consider GearVR support as \"maybe\" and never \"yes\". The only browser\n  // that will detect GearVR outside of VR is Samsung Internet, and we'd prefer to launch into Oculus\n  // Browser for now since Samsung Internet requires an additional WebVR installation + flag, so return \"maybe\".\n  //\n  // If we are in Oculus Browser (ie, we are literally wearing a GearVR) then return 'yes'.\n  let gearvr = VR_DEVICE_AVAILABILITY.no;\n  if (isMaybeGearVRCompatibleDevice(ua)) {\n    gearvr = isOculusBrowser ? VR_DEVICE_AVAILABILITY.yes : VR_DEVICE_AVAILABILITY.maybe;\n  }\n\n  // For daydream detection, we first check if they are on an Android compatible device, and assume they\n  // may support daydream *unless* this browser has WebVR capabilities, in which case we can do better.\n  let daydream =\n    isMaybeDaydreamCompatibleDevice(ua) && !isMobileVR ? VR_DEVICE_AVAILABILITY.maybe : VR_DEVICE_AVAILABILITY.no;\n\n  cardboard =\n    isCardboardCapableBrowser && displays.find(d => d.capabilities.canPresent && /cardboard/i.test(d.displayName))\n      ? VR_DEVICE_AVAILABILITY.yes\n      : VR_DEVICE_AVAILABILITY.no;\n\n  if (isWebVRCapableBrowser) {\n    // Generic is supported for non-blacklisted devices and presentable HMDs.\n    generic = displays.find(\n      d => d.capabilities.canPresent && !GENERIC_ENTRY_TYPE_DEVICE_BLACKLIST.find(r => r.test(d.displayName))\n    )\n      ? VR_DEVICE_AVAILABILITY.yes\n      : VR_DEVICE_AVAILABILITY.no;\n\n    // For daydream detection, in a WebVR browser we can increase confidence in daydream compatibility.\n    const hasDaydreamWebVRDevice = displays.find(d => /daydream/i.test(d.displayName));\n\n    if (hasDaydreamWebVRDevice) {\n      // If we detected daydream via WebVR\n      daydream = VR_DEVICE_AVAILABILITY.yes;\n      generic = VR_DEVICE_AVAILABILITY.no;\n    } else if (isDaydreamCapableBrowser) {\n      // If we didn't detect daydream in a daydream capable browser, we definitely can't run daydream at all.\n      daydream = VR_DEVICE_AVAILABILITY.no;\n    }\n  }\n\n  return { screen, generic, gearvr, daydream, cardboard, safari };\n}\n","const isMobileVR = AFRAME.utils.device.isMobileVR();\n\nexport function canShare() {\n  // TODO, fix up when OB/FxR support sharing\n  return navigator.share && !isMobileVR;\n}\n\n/**\n * Wraps navigator.share with a fallback to twitter for unsupported browsers\n */\nexport function share(opts) {\n  if (canShare()) {\n    return navigator.share(opts);\n  } else {\n    const { title, url } = opts;\n    const width = 550;\n    const height = 420;\n    const left = (screen.width - width) / 2;\n    const top = (screen.height - height) / 2;\n    const params = `scrollbars=no,menubar=no,toolbar=no,status=no,width=${width},height=${height},top=${top},left=${left}`;\n    const tweetLink = `https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${encodeURIComponent(\n      title\n    )}`;\n    window.open(tweetLink, \"_blank\", params);\n    return Promise.resolve();\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Route } from \"react-router\";\n\n/**\n * A react-router Route that looks for a key/value pair in the state to render something.\n */\nclass StateRoute extends React.Component {\n  static propTypes = {\n    stateKey: PropTypes.string,\n    stateValue: PropTypes.string,\n    history: PropTypes.object\n  };\n\n  render() {\n    const { history, stateKey, stateValue, ...routeProps } = this.props;\n\n    if (\n      (!history.location.state && !stateValue) ||\n      (history.location.state &&\n        (history.location.state[stateKey] === stateValue || (!history.location.state[stateKey] && !stateValue)))\n    ) {\n      return <Route path=\"/\" {...routeProps} />;\n    }\n\n    return null;\n  }\n}\n\nexport default StateRoute;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport styles from \"../assets/stylesheets/promote-client-dialog.scss\";\nimport DialogContainer from \"./dialog-container\";\n\nexport default class PromoteClientDialog extends Component {\n  static propTypes = {\n    displayName: PropTypes.string,\n    onConfirm: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Promote User\" {...this.props}>\n        <div className={styles.message}>\n          <FormattedMessage id=\"promote.message\" />\n        </div>\n        <button\n          className={styles.confirmButton}\n          onClick={() => {\n            this.props.onConfirm();\n            this.props.onClose();\n          }}\n        >\n          <FormattedMessage id=\"promote.confirm-prefix\" />\n          <span>{this.props.displayName}</span>\n        </button>\n        <button className={styles.cancelButton} onClick={() => this.props.onClose()}>\n          <FormattedMessage id=\"promote.cancel\" />\n        </button>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport DialogContainer from \"./dialog-container.js\";\nimport PromoteClientDialog from \"./promote-client-dialog.js\";\nimport styles from \"../assets/stylesheets/client-info-dialog.scss\";\nimport { FormattedMessage } from \"react-intl\";\nimport { sluglessPath } from \"../utils/history\";\nimport { getAvatarThumbnailUrl } from \"../utils/avatar-utils\";\n\nexport function getClientInfoClientId(location) {\n  const { search } = location;\n  const urlParams = new URLSearchParams(search);\n  const pathname = sluglessPath(location);\n\n  if (!pathname.startsWith(\"/client\") && !urlParams.get(\"client_id\")) return null;\n  return urlParams.get(\"client_id\") || pathname.substring(9);\n}\n\nexport default class ClientInfoDialog extends Component {\n  static propTypes = {\n    clientId: PropTypes.string,\n    history: PropTypes.object,\n    hubChannel: PropTypes.object,\n    presences: PropTypes.object,\n    performConditionalSignIn: PropTypes.func,\n    onClose: PropTypes.func,\n    showNonHistoriedDialog: PropTypes.func\n  };\n\n  state = {\n    avatarThumbnailUrl: null\n  };\n\n  kick() {\n    const { clientId, performConditionalSignIn, hubChannel, onClose } = this.props;\n\n    performConditionalSignIn(\n      () => hubChannel.can(\"kick_users\"),\n      async () => await hubChannel.kick(clientId),\n      \"kick-user\"\n    );\n\n    onClose();\n  }\n\n  hide() {\n    const { clientId, onClose, hubChannel } = this.props;\n    hubChannel.hide(clientId);\n    onClose();\n  }\n\n  mute() {\n    const { clientId, performConditionalSignIn, hubChannel, onClose } = this.props;\n\n    performConditionalSignIn(\n      () => hubChannel.can(\"mute_users\"),\n      async () => await hubChannel.mute(clientId),\n      \"mute-user\"\n    );\n\n    onClose();\n  }\n\n  addOwner() {\n    const { clientId, performConditionalSignIn, hubChannel, onClose } = this.props;\n    const { profile } = this.getPresenceEntry();\n\n    performConditionalSignIn(\n      () => hubChannel.can(\"update_roles\"),\n      async () => {\n        onClose();\n\n        this.props.showNonHistoriedDialog(PromoteClientDialog, {\n          displayName: profile.displayName,\n          onConfirm: () => hubChannel.addOwner(clientId)\n        });\n      },\n      \"add-owner\"\n    );\n  }\n\n  removeOwner() {\n    const { clientId, performConditionalSignIn, hubChannel, onClose } = this.props;\n\n    performConditionalSignIn(\n      () => hubChannel.can(\"update_roles\"),\n      async () => await hubChannel.removeOwner(clientId),\n      \"remove-owner\"\n    );\n\n    onClose();\n  }\n\n  unhide() {\n    const { clientId, hubChannel, onClose } = this.props;\n    hubChannel.unhide(clientId);\n    onClose();\n  }\n\n  getPresenceEntry() {\n    if (!this.props.presences) return null;\n\n    const presence = Object.entries(this.props.presences).find(([k]) => k === this.props.clientId);\n    if (!presence) return { profile: {}, roles: {} };\n\n    const metas = presence[1].metas;\n    return metas[metas.length - 1];\n  }\n\n  componentDidMount() {\n    const { profile } = this.getPresenceEntry();\n    if (profile.avatarId) {\n      getAvatarThumbnailUrl(profile.avatarId).then(avatarThumbnailUrl => this.setState({ avatarThumbnailUrl }));\n    }\n  }\n\n  render() {\n    const { profile, roles } = this.getPresenceEntry();\n\n    const { displayName, communityIdentifier } = profile;\n    const { hubChannel, clientId, onClose } = this.props;\n    const title = (\n      <div className={styles.title}>\n        {displayName}\n        <div className={styles.communityIdentifier}>{communityIdentifier}</div>\n      </div>\n    );\n    const mayKick = hubChannel.canOrWillIfCreator(\"kick_users\");\n    const mayMute = hubChannel.canOrWillIfCreator(\"mute_users\");\n    const targetIsOwner = !!roles.owner;\n    const targetIsCreator = !!roles.creator;\n    const targetIsSignedIn = !!roles.signed_in;\n    const mayAddOwner = hubChannel.canOrWillIfCreator(\"update_roles\") && !targetIsOwner && !targetIsCreator;\n    const mayRemoveOwner = hubChannel.canOrWillIfCreator(\"update_roles\") && targetIsOwner && !targetIsCreator;\n    const isHidden = hubChannel.isHidden(clientId);\n\n    return (\n      <DialogContainer className={styles.clientInfoDialog} title={title} wide={true} {...this.props}>\n        <div className={styles.roomInfo}>\n          <div className={styles.clientProfileImage}>\n            <img src={this.state.avatarThumbnailUrl} />\n          </div>\n          <div className={styles.clientActionButtons}>\n            {mayAddOwner && (\n              <button\n                onClick={() => this.addOwner()}\n                disabled={!targetIsSignedIn}\n                title={targetIsSignedIn ? \"Promote\" : `${profile.displayName} is signed out.`}\n              >\n                <img className={styles.buttonIcon} src=\"../assets/images/add-owner.png\" />\n                <FormattedMessage id=\"client-info.add-owner\" />\n              </button>\n            )}\n            {mayRemoveOwner && (\n              <button onClick={() => this.removeOwner()}>\n                <img className={styles.buttonIcon} src=\"../assets/images/remove-owner.png\" />\n                <FormattedMessage id=\"client-info.remove-owner\" />\n              </button>\n            )}\n            {!isHidden && (\n              <button onClick={() => this.hide()}>\n                <FormattedMessage id=\"client-info.hide-button\" />\n              </button>\n            )}\n            {isHidden && (\n              <button onClick={() => this.unhide()}>\n                <FormattedMessage id=\"client-info.unhide-button\" />\n              </button>\n            )}\n            {mayMute && (\n              <button onClick={() => this.mute()}>\n                <FormattedMessage id=\"client-info.mute-button\" />\n              </button>\n            )}\n            {mayKick && (\n              <button onClick={() => this.kick()}>\n                <FormattedMessage id=\"client-info.kick-button\" />\n              </button>\n            )}\n            <button className={styles.cancel} onClick={onClose}>\n              <FormattedMessage id=\"client-info.cancel\" />\n            </button>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { IntlProvider, FormattedMessage } from \"react-intl\";\nimport { lang, messages } from \"../utils/i18n\";\nimport loaderStyles from \"../assets/stylesheets/loader.scss\";\n\nclass Loader extends Component {\n  static propTypes = {\n    scene: PropTypes.object,\n    finished: PropTypes.bool,\n    onLoaded: PropTypes.func\n  };\n\n  doneWithInitialLoad = false;\n  state = {\n    loadingNum: 0,\n    loadedNum: 0\n  };\n\n  componentDidMount() {\n    this.props.scene.addEventListener(\"model-loading\", this.onObjectLoading);\n    this.props.scene.addEventListener(\"image-loading\", this.onObjectLoading);\n    this.props.scene.addEventListener(\"model-loaded\", this.onObjectLoaded);\n    this.props.scene.addEventListener(\"image-loaded\", this.onObjectLoaded);\n    this.props.scene.addEventListener(\"model-error\", this.onObjectLoaded);\n    this.props.scene.addEventListener(\n      \"environment-scene-loaded\",\n      () => {\n        this.environmentSceneLoaded = true;\n        this.tryFinishLoading();\n      },\n      { once: true }\n    );\n  }\n\n  componentWillUnmount() {\n    this.props.scene.removeEventListener(\"model-loading\", this.onObjectLoading);\n    this.props.scene.removeEventListener(\"image-loading\", this.onObjectLoading);\n    this.props.scene.removeEventListener(\"model-loaded\", this.onObjectLoaded);\n    this.props.scene.removeEventListener(\"image-loaded\", this.onObjectLoaded);\n    this.props.scene.removeEventListener(\"model-error\", this.onObjectLoaded);\n  }\n\n  onObjectLoading = () => {\n    if (!this.doneWithInitialLoad && this.loadingTimeout) {\n      window.clearTimeout(this.loadingTimeout);\n      this.loadingTimeout = null;\n    }\n\n    this.setState(state => {\n      return { loadingNum: state.loadingNum + 1 };\n    });\n  };\n\n  onObjectLoaded = () => {\n    this.setState(state => {\n      return { loadedNum: state.loadedNum + 1 };\n    });\n\n    this.tryFinishLoading();\n  };\n\n  tryFinishLoading = () => {\n    if (!this.doneWithInitialLoad && this.loadingTimeout) window.clearTimeout(this.loadingTimeout);\n\n    if (this.environmentSceneLoaded) {\n      this.loadingTimeout = window.setTimeout(() => {\n        this.doneWithInitialLoad = true;\n        if (this.props.onLoaded) {\n          this.props.onLoaded();\n        }\n      }, 1500);\n    }\n  };\n\n  render() {\n    const nomore = (\n      <h4 className={loaderStyles.loadingText}>\n        <FormattedMessage id=\"loader.entering_lobby\" />\n      </h4>\n    );\n    const progress = this.state.loadingNum === 0 ? \" \" : `${this.state.loadedNum} / ${this.state.loadingNum} `;\n    const usual = (\n      <h4 className={loaderStyles.loadingText}>\n        <FormattedMessage id=\"loader.loading\" />\n        {progress}\n        <FormattedMessage id={this.state.loadingNum !== 1 ? \"loader.objects\" : \"loader.object\"} />\n        ...\n      </h4>\n    );\n    return (\n      <IntlProvider locale={lang} messages={messages}>\n        <div className=\"loading-panel\">\n          <img className=\"loading-panel__logo\" style={{height: 150, width: 150}} src={this.props.loadingIcon} />\n\n          {this.props.finished ? nomore : usual}\n\n          <div className=\"loader-wrap loader-bottom\">\n            <div className=\"loader\">\n              <div className=\"loader-center\" />\n            </div>\n          </div>\n        </div>\n      </IntlProvider>\n    );\n  }\n}\n\nexport default Loader;\n","import React from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport PropTypes from \"prop-types\";\n\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nconst AutoExitWarning = props => (\n  <div className=\"autoexit-panel\">\n    <div className=\"autoexit-panel__title\">\n      <FormattedMessage id=\"autoexit.title\" />\n      <span>{props.secondsRemaining}</span>\n      <FormattedMessage id=\"autoexit.title_units\" />\n    </div>\n    <div className=\"autoexit-panel__subtitle\">\n      <FormattedMessage id=\"autoexit.subtitle\" />\n    </div>\n    <WithHoverSound>\n      <div className=\"autoexit-panel__cancel-button\" onClick={props.onCancel}>\n        <FormattedMessage id=\"autoexit.cancel\" />\n      </div>\n    </WithHoverSound>\n  </div>\n);\n\nAutoExitWarning.propTypes = {\n  secondsRemaining: PropTypes.number,\n  onCancel: PropTypes.func\n};\n\nexport default AutoExitWarning;\n","import React from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport PropTypes from \"prop-types\";\n\nimport MobileScreenEntryImg from \"../assets/images/mobile_screen_entry.svg\";\nimport DesktopScreenEntryImg from \"../assets/images/desktop_screen_entry.svg\";\nimport GenericVREntryImg from \"../assets/images/generic_vr_entry.svg\";\nimport GearVREntryImg from \"../assets/images/gearvr_entry.svg\";\nimport DaydreamEntryImg from \"../assets/images/daydream_entry.svg\";\nimport styles from \"../assets/stylesheets/entry.scss\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport cx from \"classnames\";\n\nconst EntryButton = props => {\n  return (\n    <WithHoverSound>\n      <button\n        className={cx([{ [styles.entryButton]: true, [styles.entryButtonSecondary]: props.secondary }])}\n        onClick={props.onClick}\n      >\n        <img src={props.iconSrc} className={styles.icon} />\n        <div className={styles.label}>\n          <div className={styles.contents}>\n            <span>\n              <FormattedMessage id={props.prefixMessageId} />\n            </span>\n            <span className={styles.bolded}>\n              <FormattedMessage id={props.mediumMessageId} />\n            </span>\n            {props.subtitle && (\n              <div className={styles.subtitle}>\n                <FormattedMessage id={props.subtitle} />\n              </div>\n            )}\n          </div>\n        </div>\n      </button>\n    </WithHoverSound>\n  );\n};\n\nEntryButton.propTypes = {\n  onClick: PropTypes.func,\n  iconSrc: PropTypes.string,\n  secondary: PropTypes.bool,\n  prefixMessageId: PropTypes.string,\n  mediumMessageId: PropTypes.string,\n  subtitle: PropTypes.string,\n  isInHMD: PropTypes.bool\n};\n\nconst isMobile = AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR();\n\nexport const TwoDEntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: isMobile ? MobileScreenEntryImg : DesktopScreenEntryImg,\n    prefixMessageId: \"entry.screen-prefix\",\n    mediumMessageId: isMobile ? \"entry.mobile-screen\" : \"entry.desktop-screen\"\n  };\n\n  return <EntryButton {...entryButtonProps} />;\n};\n\nexport const GenericEntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: GenericVREntryImg,\n    prefixMessageId: \"entry.generic-prefix\",\n    mediumMessageId: \"entry.generic-medium\",\n    subtitle: isMobile ? null : \"entry.generic-subtitle-desktop\"\n  };\n\n  return <EntryButton {...entryButtonProps} />;\n};\n\nexport const GearVREntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: GearVREntryImg,\n    prefixMessageId: \"entry.gearvr-prefix\",\n    mediumMessageId: \"entry.gearvr-medium\"\n  };\n\n  return <EntryButton {...entryButtonProps} />;\n};\n\nexport const DaydreamEntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: DaydreamEntryImg,\n    prefixMessageId: \"entry.daydream-prefix\",\n    mediumMessageId: \"entry.daydream-medium\"\n  };\n\n  return <EntryButton {...entryButtonProps} />;\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport { faPencilAlt } from \"@fortawesome/free-solid-svg-icons/faPencilAlt\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport { SCHEMA } from \"../storage/store\";\nimport styles from \"../assets/stylesheets/profile.scss\";\n// import hubLogo from \"../assets/images/hub-preview-white.png\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport { fetchAvatar } from \"../utils/avatar-utils\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { replaceHistoryState } from \"../utils/history\";\nimport StateLink from \"./state-link\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\n\nimport AvatarPreview from \"./avatar-preview\";\n\nclass ProfileEntryPanel extends Component {\n  static propTypes = {\n    displayNameOverride: PropTypes.string,\n    store: PropTypes.object,\n    mediaSearchStore: PropTypes.object,\n    messages: PropTypes.object,\n    finished: PropTypes.func,\n    intl: PropTypes.object,\n    history: PropTypes.object,\n    avatarId: PropTypes.string,\n    onClose: PropTypes.func\n  };\n\n  state = {\n    avatarId: null,\n    displayName: null,\n    avatar: null\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = this.getStateFromProfile();\n    if (props.avatarId) {\n      this.state.avatarId = props.avatarId;\n    }\n    this.props.store.addEventListener(\"statechanged\", this.storeUpdated);\n    this.scene = document.querySelector(\"a-scene\");\n  }\n\n  getStateFromProfile = () => {\n    const { displayName, avatarId } = this.props.store.state.profile;\n    return { displayName, avatarId };\n  };\n\n  storeUpdated = () => this.setState(this.getStateFromProfile());\n\n  saveStateAndFinish = e => {\n    e && e.preventDefault();\n\n    const { displayName } = this.props.store.state.profile;\n    const { hasChangedName } = this.props.store.state.activity;\n\n    const hasChangedNowOrPreviously = hasChangedName || this.state.displayName !== displayName;\n    this.props.store.update({\n      activity: {\n        hasChangedName: hasChangedNowOrPreviously,\n        hasAcceptedProfile: true\n      },\n      profile: {\n        displayName: this.state.displayName,\n        avatarId: this.state.avatarId\n      }\n    });\n    this.props.finished();\n  };\n\n  stopPropagation = e => {\n    e.stopPropagation();\n  };\n\n  setAvatarFromMediaResult = ({ detail: entry }) => {\n    this.setState({ avatarId: entry.id });\n    // Replace history state with the current avatar id since this component gets destroyed when we open the\n    // avatar editor and we want the back button to work. We read the history state back via the avatarId prop.\n    // We read the current state key from history since it could be \"overlay\" or \"entry_step\".\n    replaceHistoryState(this.props.history, this.props.history.location.state.key, \"profile\", { avatarId: entry.id });\n  };\n\n  componentDidMount() {\n    if (this.nameInput) {\n      // stop propagation so that avatar doesn't move when wasd'ing during text input.\n      this.nameInput.addEventListener(\"keydown\", this.stopPropagation);\n      this.nameInput.addEventListener(\"keypress\", this.stopPropagation);\n      this.nameInput.addEventListener(\"keyup\", this.stopPropagation);\n    }\n    this.scene.addEventListener(\"action_selected_media_result_entry\", this.setAvatarFromMediaResult);\n    // This handles editing avatars in the entry_step, since this component remains mounted with the same avatarId\n    this.scene.addEventListener(\"action_avatar_saved\", this.refetchAvatar);\n\n    this.refetchAvatar();\n  }\n\n  componentDidUpdate(_prevProps, prevState) {\n    if (prevState.avatarId !== this.state.avatarId) {\n      this.refetchAvatar();\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.store.removeEventListener(\"statechanged\", this.storeUpdated);\n    if (this.nameInput) {\n      this.nameInput.removeEventListener(\"keydown\", this.stopPropagation);\n      this.nameInput.removeEventListener(\"keypress\", this.stopPropagation);\n      this.nameInput.removeEventListener(\"keyup\", this.stopPropagation);\n    }\n    this.scene.removeEventListener(\"action_selected_media_result_entry\", this.setAvatarFromMediaResult);\n    this.scene.removeEventListener(\"action_avatar_saved\", this.refetchAvatar);\n  }\n\n  refetchAvatar = async () => {\n    const avatar = await fetchAvatar(this.state.avatarId);\n    if (this.state.avatarId !== avatar.avatar_id) return; // This is an old result, ignore it\n    this.setState({ avatar });\n  };\n\n  render() {\n    const { formatMessage } = this.props.intl;\n\n    return (\n      <div className={styles.profileEntry}>\n        <div className={styles.close}>\n          <a onClick={() => this.props.onClose()}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </a>\n        </div>\n        <form onSubmit={this.saveStateAndFinish} className={styles.form}>\n          <div className={classNames([styles.box, styles.darkened])}>\n            <label htmlFor=\"#profile-entry-display-name\" className={styles.title}>\n              <FormattedMessage id=\"profile.header\" />\n            </label>\n            {this.props.displayNameOverride ? (\n              <span className={styles.displayName}>{this.props.displayNameOverride}</span>\n            ) : (\n              <input\n                id=\"profile-entry-display-name\"\n                className={styles.formFieldText}\n                value={this.state.displayName}\n                onFocus={e => handleTextFieldFocus(e.target)}\n                onBlur={() => handleTextFieldBlur()}\n                onChange={e => this.setState({ displayName: e.target.value })}\n                required\n                spellCheck=\"false\"\n                pattern={SCHEMA.definitions.profile.properties.displayName.pattern}\n                title={formatMessage({ id: \"profile.display_name.validation_warning\" })}\n                ref={inp => (this.nameInput = inp)}\n              />\n            )}\n\n            {this.state.avatar ? (\n              <div className={styles.preview}>\n                <AvatarPreview avatarGltfUrl={this.state.avatar.gltf_url} />\n\n                {this.state.avatar.account_id === this.props.store.credentialsAccountId && (\n                  <StateLink\n                    stateKey=\"overlay\"\n                    stateValue=\"avatar-editor\"\n                    stateDetail={{ avatarId: this.state.avatarId, hideDelete: true, returnToProfile: true }}\n                    history={this.props.history}\n                    className={styles.editAvatar}\n                  >\n                    <FontAwesomeIcon icon={faPencilAlt} />\n                  </StateLink>\n                )}\n\n                <div className={styles.chooseAvatar}>\n                  <a onClick={() => this.props.mediaSearchStore.sourceNavigateWithNoNav(\"avatars\")}>\n                    <FormattedMessage id=\"profile.choose_avatar\" />\n                  </a>\n                </div>\n              </div>\n            ) : (\n              <div className={styles.preview}>\n                <div className={styles.chooseAvatar}>\n                  <a onClick={() => this.props.mediaSearchStore.sourceNavigateWithNoNav(\"avatars\")}>\n                    <FormattedMessage id=\"profile.choose_avatar\" />\n                  </a>\n                </div>\n              </div>\n            )}\n\n            <WithHoverSound>\n              <input className={styles.formSubmit} type=\"submit\" value={formatMessage({ id: \"profile.save\" })} />\n            </WithHoverSound>\n            <div className={styles.links}>\n              <WithHoverSound>\n                <a\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  href=\"https://github.com/mozilla/hubs/blob/master/TERMS.md\"\n                >\n                  <FormattedMessage id=\"profile.terms_of_use\" />\n                </a>\n              </WithHoverSound>\n\n              <WithHoverSound>\n                <a\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  href=\"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\"\n                >\n                  <FormattedMessage id=\"profile.privacy_notice\" />\n                </a>\n              </WithHoverSound>\n            </div>\n          </div>\n        </form>\n        <img className={styles.logo} src={this.props.logo} />\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(ProfileEntryPanel);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport { faAngleRight } from \"@fortawesome/free-solid-svg-icons/faAngleRight\";\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons/faSearch\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons/faStar\";\nimport { faCloudUploadAlt } from \"@fortawesome/free-solid-svg-icons/faCloudUploadAlt\";\nimport { faLink } from \"@fortawesome/free-solid-svg-icons/faLink\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport styles from \"../assets/stylesheets/media-browser.scss\";\nimport { pushHistoryPath, pushHistoryState, sluglessPath } from \"../utils/history\";\nimport { SOURCES } from \"../storage/media-search-store\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { showFullScreenIfWasFullScreen } from \"../utils/fullscreen\";\nimport MediaTiles from \"./media-tiles\";\n\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\nconst PRIVACY_POLICY_LINKS = {\n  videos: \"https://privacy.microsoft.com/en-us/privacystatement\",\n  images: \"https://privacy.microsoft.com/en-us/privacystatement\",\n  gifs: \"https://tenor.com/legal-privacy\",\n  sketchfab: \"https://sketchfab.com/privacy\",\n  poly: \"https://policies.google.com/privacy\",\n  youtube: \"https://policies.google.com/privacy\",\n  twitch: \"https://www.twitch.tv/p/legal/privacy-policy/\"\n};\n\nconst DEFAULT_FACETS = {\n  sketchfab: [\n    { text: \"Animals\", params: { filter: \"animals-pets\" } },\n    { text: \"Architecture\", params: { filter: \"architecture\" } },\n    { text: \"Art\", params: { filter: \"art-abstract\" } },\n    { text: \"Vehicles\", params: { filter: \"cars-vehicles\" } },\n    { text: \"Characters\", params: { filter: \"characters-creatures\" } },\n    { text: \"Culture\", params: { filter: \"cultural-heritage-history\" } },\n    { text: \"Gadgets\", params: { filter: \"electronics-gadgets\" } },\n    { text: \"Fashion\", params: { filter: \"fashion-style\" } },\n    { text: \"Food\", params: { filter: \"food-drink\" } },\n    { text: \"Furniture\", params: { filter: \"furniture-home\" } },\n    { text: \"Music\", params: { filter: \"music\" } },\n    { text: \"Nature\", params: { filter: \"nature-plants\" } },\n    { text: \"News\", params: { filter: \"news-politics\" } },\n    { text: \"People\", params: { filter: \"people\" } },\n    { text: \"Places\", params: { filter: \"places-travel\" } },\n    { text: \"Science\", params: { filter: \"science-technology\" } },\n    { text: \"Sports\", params: { filter: \"sports-fitness\" } },\n    { text: \"Weapons\", params: { filter: \"weapons-military\" } }\n  ],\n  poly: [\n    { text: \"Animals\", params: { filter: \"animals\" } },\n    { text: \"Architecture\", params: { filter: \"architecture\" } },\n    { text: \"Art\", params: { filter: \"art\" } },\n    { text: \"Food\", params: { filter: \"food\" } },\n    { text: \"Nature\", params: { filter: \"nature\" } },\n    { text: \"Objects\", params: { filter: \"objects\" } },\n    { text: \"People\", params: { filter: \"people\" } },\n    { text: \"Scenes\", params: { filter: \"scenes\" } },\n    { text: \"Transport\", params: { filter: \"transport\" } }\n  ],\n  avatars: [\n    { text: \"Featured\", params: { filter: \"featured\" } },\n    { text: \"My Avatars\", params: { filter: \"my-avatars\" } }\n  ],\n  favorites: [],\n  scenes: [{ text: \"Featured\", params: { filter: \"featured\" } }, { text: \"My Scenes\", params: { filter: \"my-scenes\" } }]\n};\n\nclass MediaBrowser extends Component {\n  static propTypes = {\n    mediaSearchStore: PropTypes.object,\n    history: PropTypes.object,\n    intl: PropTypes.object,\n    hubChannel: PropTypes.object,\n    onMediaSearchResultEntrySelected: PropTypes.func,\n    performConditionalSignIn: PropTypes.func\n  };\n\n  state = { query: \"\", facets: [], showNav: true, selectNextResult: false, clearStashedQueryOnClose: false };\n\n  constructor(props) {\n    super(props);\n    this.state = this.getStoreAndHistoryState(props);\n    this.props.mediaSearchStore.addEventListener(\"statechanged\", this.storeUpdated);\n    this.props.mediaSearchStore.addEventListener(\"sourcechanged\", this.sourceChanged);\n  }\n\n  componentDidMount() {}\n\n  componentWillUnmount() {\n    this.props.mediaSearchStore.removeEventListener(\"statechanged\", this.storeUpdated);\n    this.props.mediaSearchStore.removeEventListener(\"sourcechanged\", this.sourceChanged);\n  }\n\n  storeUpdated = () => {\n    const newState = this.getStoreAndHistoryState(this.props);\n    this.setState(newState);\n\n    if (this.state.selectNextResult) {\n      if (newState.result && newState.result.entries.length > 0) {\n        this.selectEntry(newState.result.entries[0]);\n      } else {\n        this.close();\n      }\n    }\n  };\n\n  sourceChanged = () => {\n    if (this.inputRef && !isMobile && !isMobileVR) {\n      this.inputRef.focus();\n    }\n  };\n\n  getUrlSource = searchParams =>\n    searchParams.get(\"media_source\") || sluglessPath(this.props.history.location).substring(7);\n\n  getStoreAndHistoryState = props => {\n    const searchParams = new URLSearchParams(props.history.location.search);\n    const result = props.mediaSearchStore.result;\n\n    const newState = { result, query: this.state.query || searchParams.get(\"q\") || \"\" };\n    const urlSource = this.getUrlSource(searchParams);\n    newState.showNav = !!(searchParams.get(\"media_nav\") !== \"false\");\n\n    if (result && result.suggestions && result.suggestions.length > 0) {\n      newState.facets = result.suggestions.map(s => {\n        return { text: s, params: { q: s } };\n      });\n    } else {\n      newState.facets = DEFAULT_FACETS[urlSource] || [];\n    }\n\n    return newState;\n  };\n\n  handleQueryUpdated = (query, forceNow) => {\n    this.setState({ result: null });\n\n    if (this._sendQueryTimeout) {\n      clearTimeout(this._sendQueryTimeout);\n      this._sendQueryTimeout = null;\n    }\n\n    if (forceNow) {\n      this.props.mediaSearchStore.filterQueryNavigate(\"\", query);\n    } else {\n      // Don't update search on every keystroke, but buffer for some ms.\n      this._sendQueryTimeout = setTimeout(() => {\n        // Drop filter for now, so entering text drops into \"search all\" mode\n        this.props.mediaSearchStore.filterQueryNavigate(\"\", query);\n        this._sendQueryTimeout = null;\n      }, 500);\n    }\n\n    this.setState({ query });\n  };\n\n  handleEntryClicked = (evt, entry) => {\n    evt.preventDefault();\n\n    if (!entry.lucky_query) {\n      this.selectEntry(entry);\n    } else {\n      // Entry has a pointer to another \"i'm feeling lucky\" query -- used for trending videos\n      //\n      // Also, mark the browser to clear the stashed query on close, since this is a temporary\n      // query we are running to get the result we want.\n      this.setState({ clearStashedQueryOnClose: true });\n      this.handleQueryUpdated(entry.lucky_query, true);\n    }\n  };\n\n  selectEntry = entry => {\n    if (!this.props.onMediaSearchResultEntrySelected) return;\n    this.props.onMediaSearchResultEntrySelected(entry);\n    this.close();\n  };\n\n  handleSourceClicked = source => {\n    this.props.mediaSearchStore.sourceNavigate(source);\n  };\n\n  handleFacetClicked = facet => {\n    const searchParams = this.getSearchClearedSearchParams(true, true);\n\n    for (const [k, v] of Object.entries(facet.params)) {\n      searchParams.set(k, v);\n    }\n\n    pushHistoryPath(this.props.history, this.props.history.location.pathname, searchParams.toString());\n  };\n\n  getSearchClearedSearchParams = (keepSource, keepNav) => {\n    return this.props.mediaSearchStore.getSearchClearedSearchParams(this.props.history.location, keepSource, keepNav);\n  };\n\n  pushExitMediaBrowserHistory = (stashLastSearchParams = true) => {\n    this.props.mediaSearchStore.pushExitMediaBrowserHistory(this.props.history, stashLastSearchParams);\n  };\n\n  showCustomMediaDialog = source => {\n    const isSceneApiType = source === \"scenes\";\n    const isAvatarApiType = source === \"avatars\";\n    this.pushExitMediaBrowserHistory(!isAvatarApiType);\n    const dialog = isSceneApiType ? \"change_scene\" : isAvatarApiType ? \"avatar_url\" : \"create\";\n    pushHistoryState(this.props.history, \"modal\", dialog);\n  };\n\n  close = () => {\n    showFullScreenIfWasFullScreen();\n    const urlSource = this.getUrlSource(new URLSearchParams(this.props.history.location.search));\n    this.pushExitMediaBrowserHistory(urlSource !== \"avatars\" && urlSource !== \"favorites\");\n    if (this.state.clearStashedQueryOnClose) {\n      this.props.mediaSearchStore.clearStashedQuery();\n    }\n  };\n\n  handlePager = delta => {\n    this.setState({ result: null });\n    this.props.mediaSearchStore.pageNavigate(delta);\n    this.browserDiv.scrollTop = 0;\n  };\n\n  render() {\n    const { formatMessage } = this.props.intl;\n    const searchParams = new URLSearchParams(this.props.history.location.search);\n    const urlSource = this.getUrlSource(searchParams);\n    const isSceneApiType = urlSource === \"scenes\";\n    const isFavorites = urlSource === \"favorites\";\n    const showCustomOption =\n      !isFavorites && (!isSceneApiType || this.props.hubChannel.canOrWillIfCreator(\"update_hub\"));\n    const entries = (this.state.result && this.state.result.entries) || [];\n    const hideSearch = urlSource === \"avatars\" || urlSource === \"favorites\";\n    const showEmptyStringOnNoResult = urlSource !== \"avatars\" && urlSource !== \"scenes\";\n\n    // Don't render anything if we just did a feeling lucky query and are waiting on result.\n    if (this.state.selectNextResult) return <div />;\n    const handleCustomClicked = urlSource => {\n      const isAvatarApiType = urlSource === \"avatars\";\n      if (isAvatarApiType) {\n        this.showCustomMediaDialog(urlSource);\n      } else {\n        this.props.performConditionalSignIn(\n          () => !isSceneApiType || this.props.hubChannel.can(\"update_hub\"),\n          () => this.showCustomMediaDialog(urlSource),\n          \"change-scene\"\n        );\n      }\n    };\n\n    return (\n      <div className={styles.mediaBrowser} ref={browserDiv => (this.browserDiv = browserDiv)}>\n        <div className={classNames([styles.box, styles.darkened])}>\n          <div className={classNames(styles.header, { [styles.noSearch]: hideSearch })}>\n            <div className={styles.headerLeft}>\n              <a onClick={() => this.close()}>\n                <i>\n                  <FontAwesomeIcon icon={faTimes} />\n                </i>\n              </a>\n            </div>\n            <div className={styles.headerCenter}>\n              {urlSource === \"favorites\" && (\n                <div className={styles.favoritesHeader}>\n                  <i>\n                    <FontAwesomeIcon icon={faStar} />\n                  </i>\n                  <FormattedMessage id=\"media-browser.favorites-header\" />\n                </div>\n              )}\n              {!hideSearch && (\n                <div className={styles.search}>\n                  <i>\n                    <FontAwesomeIcon icon={faSearch} />\n                  </i>\n                  <input\n                    type=\"text\"\n                    autoFocus={!isMobile && !isMobileVR}\n                    ref={r => (this.inputRef = r)}\n                    placeholder={formatMessage({\n                      id: `media-browser.search-placeholder.${urlSource}`\n                    })}\n                    onFocus={e => handleTextFieldFocus(e.target)}\n                    onBlur={() => handleTextFieldBlur()}\n                    onKeyDown={e => {\n                      if (e.key === \"Enter\" && e.ctrlKey) {\n                        if (entries.length > 0 && !this._sendQueryTimeout) {\n                          this.handleEntryClicked(e, entries[0]);\n                        } else if (this.state.query.trim() !== \"\") {\n                          this.handleQueryUpdated(this.state.query, true);\n                          this.setState({ selectNextResult: true });\n                        } else {\n                          this.close();\n                        }\n                      } else if (e.key === \"Escape\" || (e.key === \"Enter\" && isMobile)) {\n                        e.target.blur();\n                      }\n                    }}\n                    value={this.state.query}\n                    onChange={e => this.handleQueryUpdated(e.target.value)}\n                  />\n                </div>\n              )}\n              <div className={styles.engineAttribution}>\n                {!hideSearch &&\n                  urlSource !== \"scenes\" &&\n                  urlSource !== \"avatars\" &&\n                  urlSource !== \"favorites\" && (\n                    <div className={styles.engineAttributionContents}>\n                      <FormattedMessage id={`media-browser.powered_by.${urlSource}`} />\n                      {PRIVACY_POLICY_LINKS[urlSource] && (\n                        <a href={PRIVACY_POLICY_LINKS[urlSource]} target=\"_blank\" rel=\"noreferrer noopener\">\n                          <FormattedMessage id=\"media-browser.privacy_policy\" />\n                        </a>\n                      )}\n                    </div>\n                  )}\n                {urlSource === \"scenes\" && (\n                  <div className={styles.engineAttributionContents}>\n                    <FormattedMessage id={`media-browser.powered_by.${urlSource}`} />\n                    <a href=\"/spoke\" target=\"_blank\" rel=\"noreferrer noopener\">\n                      <FormattedMessage id=\"media-browser.spoke\" />\n                    </a>\n                    |\n                    <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"/?report\">\n                      <FormattedMessage id=\"media-browser.report_issue\" />\n                    </a>\n                  </div>\n                )}\n              </div>\n            </div>\n            <div className={styles.headerRight}>\n              {showCustomOption && (\n                <a onClick={() => handleCustomClicked(urlSource)} className={styles.createButton}>\n                  <i>\n                    <FontAwesomeIcon icon={[\"scenes\", \"avatars\"].includes(urlSource) ? faLink : faCloudUploadAlt} />\n                  </i>\n                </a>\n              )}\n              {showCustomOption && (\n                <a onClick={() => handleCustomClicked(urlSource)} className={styles.createLink}>\n                  <FormattedMessage\n                    id={`media-browser.add_custom_${\n                      this.state.result && isSceneApiType ? \"scene\" : urlSource === \"avatars\" ? \"avatar\" : \"object\"\n                    }`}\n                  />\n                </a>\n              )}\n            </div>\n          </div>\n\n          {this.state.showNav && (\n            <div className={styles.nav}>\n              {SOURCES.map(s => (\n                <a\n                  onClick={() => this.handleSourceClicked(s)}\n                  key={s}\n                  className={classNames({ [styles.navSource]: true, [styles.navSourceSelected]: urlSource === s })}\n                >\n                  <FormattedMessage id={`media-browser.nav_title.${s}`} />\n                </a>\n              ))}\n              <div className={styles.navRightPad}>&nbsp;</div>\n              <div className={styles.navScrollArrow}>\n                <FontAwesomeIcon icon={faAngleRight} />\n              </div>\n            </div>\n          )}\n\n          {this.state.facets &&\n            this.state.facets.length > 0 && (\n              <div className={styles.facets}>\n                {this.state.facets.map((s, i) => (\n                  <a onClick={() => this.handleFacetClicked(s)} key={i} className={styles.facet}>\n                    {s.text}\n                  </a>\n                ))}\n              </div>\n            )}\n\n          {this.props.mediaSearchStore.isFetching ||\n          this._sendQueryTimeout ||\n          (this.state.result && this.state.result.entries.length > 0) ||\n          !showEmptyStringOnNoResult ? (\n            <MediaTiles\n              result={this.state.result}\n              history={this.props.history}\n              urlSource={urlSource}\n              handleEntryClicked={this.handleEntryClicked}\n              handlePager={this.handlePager}\n            />\n          ) : (\n            <div className={styles.emptyString}>\n              <FormattedMessage id={`media-browser.empty.${urlSource}`} />\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(MediaBrowser);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport giphyLogo from \"../assets/images/giphy_logo.png\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPaperclip } from \"@fortawesome/free-solid-svg-icons/faPaperclip\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport styles from \"../assets/stylesheets/create-object-dialog.scss\";\nimport cx from \"classnames\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nconst attributionHostnames = {\n  \"giphy.com\": giphyLogo,\n  \"media.giphy.com\": giphyLogo\n};\n\nconst DEFAULT_OBJECT_URL = \"https://asset-bundles-prod.reticulum.io/interactables/Ducky/DuckyMesh-438ff8e022.gltf\";\nconst isMobile = AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR();\nconst instructions = \"Paste a URL to an image, video, model, scene, or upload.\";\nconst desktopTips = \"Tip: You can paste URLs directly into Hubs with Ctrl+V\";\nconst references = (\n  <span>\n    For models, try{\" \"}\n    <a href=\"https://sketchfab.com/search?features=downloadable&type=models\" target=\"_blank\" rel=\"noopener noreferrer\">\n      Sketchfab\n    </a>,{\" \"}\n    <a href=\"http://poly.google.com/\" target=\"_blank\" rel=\"noopener noreferrer\">\n      Google Poly\n    </a>, or our{\" \"}\n    <a href=\"https://sketchfab.com/mozillareality\" target=\"_blank\" rel=\"noopener noreferrer\">\n      collection\n    </a>.\n  </span>\n);\n\nconst mobileInstructions = (\n  <div>\n    <p>{instructions}</p>\n    <p>{references}</p>\n  </div>\n);\nconst desktopInstructions = (\n  <div>\n    <p>{instructions}</p>\n    <p>{references}</p>\n    <p>{desktopTips}</p>\n  </div>\n);\n\nlet lastUrl = \"\";\nconst fileInputId = \"file-input\";\n\nexport default class CreateObjectDialog extends Component {\n  state = {\n    url: \"\",\n    file: null,\n    fileName: \"\"\n  };\n\n  static propTypes = {\n    onCreate: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  componentDidMount() {\n    this.setState({ url: lastUrl });\n  }\n\n  componentWillUnmount() {\n    lastUrl = this.state.url;\n  }\n\n  onUrlChange = e => {\n    let attributionImage = this.state.attributionImage;\n    if (e.target && e.target.value && e.target.validity.valid) {\n      const url = new URL(e.target.value);\n      attributionImage = attributionHostnames[url.hostname];\n    }\n    this.setState({\n      url: e.target && e.target.value,\n      attributionImage: attributionImage\n    });\n  };\n\n  onFileChange = e => {\n    this.setState({\n      file: e.target.files[0],\n      fileName: e.target.files[0].name\n    });\n  };\n\n  reset = e => {\n    e.preventDefault();\n    this.setState({\n      url: \"\",\n      file: null,\n      fileName: \"\"\n    });\n    this.fileInput.value = null;\n  };\n\n  onCreateClicked = e => {\n    e.preventDefault();\n    this.props.onCreate(this.state.file || this.state.url || DEFAULT_OBJECT_URL);\n    this.props.onClose();\n  };\n\n  render() {\n    const { onCreate, onClose, ...other } = this.props; // eslint-disable-line no-unused-vars\n\n    const cancelButton = (\n      <WithHoverSound>\n        <label className={cx(styles.smallButton, styles.cancelIcon)} onClick={this.reset}>\n          <FontAwesomeIcon icon={faTimes} />\n        </label>\n      </WithHoverSound>\n    );\n    const uploadButton = (\n      <WithHoverSound>\n        <label htmlFor={fileInputId} className={cx(styles.smallButton, styles.uploadIcon)}>\n          <FontAwesomeIcon icon={faPaperclip} />\n        </label>\n      </WithHoverSound>\n    );\n    const filenameLabel = <label className={cx(styles.leftSideOfInput)}>{this.state.fileName}</label>;\n    const urlInput = (\n      <input\n        className={cx(styles.leftSideOfInput)}\n        placeholder=\"Image/Video/glTF URL\"\n        onFocus={e => handleTextFieldFocus(e.target)}\n        onBlur={() => handleTextFieldBlur()}\n        onChange={this.onUrlChange}\n        type=\"url\"\n        value={this.state.url}\n      />\n    );\n\n    return (\n      <DialogContainer title=\"Create Object\" onClose={this.props.onClose} {...other}>\n        <div>\n          {isMobile ? mobileInstructions : desktopInstructions}\n          <form onSubmit={this.onCreateClicked}>\n            <div className={styles.addMediaForm}>\n              <input\n                id={fileInputId}\n                ref={f => (this.fileInput = f)}\n                className={styles.hideFileInput}\n                type=\"file\"\n                onChange={this.onFileChange}\n              />\n              <div className={styles.inputBorder}>\n                {this.state.file ? filenameLabel : urlInput}\n                {this.state.url || this.state.fileName ? cancelButton : uploadButton}\n              </div>\n              <div className={styles.buttons}>\n                <WithHoverSound>\n                  <button className={styles.actionButton}>\n                    <span>Create</span>\n                  </button>\n                </WithHoverSound>\n              </div>\n              {this.state.attributionImage ? (\n                <div>\n                  <img src={this.state.attributionImage} />\n                </div>\n              ) : null}\n            </div>\n          </form>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/change-scene-dialog.scss\";\nimport cx from \"classnames\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { FormattedMessage } from \"react-intl\";\n\nexport default class ChangeSceneDialog extends Component {\n  state = {\n    url: \"\"\n  };\n\n  static propTypes = {\n    onChange: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  onUrlChange = e => {\n    this.setState({\n      url: e.target && e.target.value\n    });\n  };\n\n  reset = e => {\n    e.preventDefault();\n    this.setState({ url: \"\" });\n  };\n\n  onChangeClicked = e => {\n    e.preventDefault();\n\n    if (this.state.url) {\n      this.props.onChange(this.state.url);\n    }\n\n    this.props.onClose();\n  };\n\n  render() {\n    const { onChange, onClose } = this.props; // eslint-disable-line no-unused-vars\n\n    return (\n      <DialogContainer title=\"Custom Scene\" onClose={this.props.onClose}>\n        <div>\n          <div>\n            <p>\n              Paste a URL to a{\" \"}\n              <a href=\"/spoke\" target=\"_blank\" rel=\"noopener noreferrer\">\n                Spoke\n              </a>{\" \"}\n              scene or a URL to a{\" \"}\n              <a href=\"https://en.wikipedia.org/wiki/GlTF#GLB\" target=\"_blank\" rel=\"noopener noreferrer\">\n                GLB\n              </a>.\n            </p>\n          </div>\n          <form onSubmit={this.onChangeClicked}>\n            <div className={styles.changeSceneForm}>\n              <div className={styles.inputBorder}>\n                <input\n                  className={cx(styles.leftSideOfInput)}\n                  placeholder=\"Scene URL\"\n                  onFocus={e => handleTextFieldFocus(e.target)}\n                  onBlur={() => handleTextFieldBlur()}\n                  onChange={this.onUrlChange}\n                  type=\"url\"\n                  value={this.state.url}\n                />\n              </div>\n              <div className={styles.buttons}>\n                <button className={styles.actionButton}>\n                  <FormattedMessage id=\"change-scene-dialog.change-scene\" />\n                </button>\n              </div>\n              <div className={styles.spokeCreate}>\n                <div>\n                  <FormattedMessage id=\"change-scene-dialog.create-in-spoke\" />\n                </div>\n                <a className={styles.spokeLaunch} href=\"/spoke/new\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  <FormattedMessage id=\"change-scene-dialog.new-spoke-project\" />\n                </a>\n              </div>\n            </div>\n          </form>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport styles from \"../assets/stylesheets/avatar-url-dialog.scss\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\n\nexport default class AvatarUrlDialog extends Component {\n  state = {\n    url: \"\"\n  };\n\n  static propTypes = {\n    onChange: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  onUrlChange = e => {\n    this.setState({\n      url: e.target && e.target.value\n    });\n  };\n\n  onChangeClicked = e => {\n    e.preventDefault();\n\n    if (this.state.url) {\n      this.props.onChange(this.state.url);\n    }\n\n    this.props.onClose();\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Custom Avatar URL\" className={styles.avatarUrlDialog} onClose={this.props.onClose}>\n        <p>\n          Paste a URL to a{\" \"}\n          <a href=\"https://en.wikipedia.org/wiki/GlTF#GLB\" target=\"_blank\" rel=\"noopener noreferrer\">\n            GLB\n          </a>.\n        </p>\n        <form className=\"form\" onSubmit={this.onChangeClicked}>\n          <input\n            className=\"url-field\"\n            placeholder=\"Avatar GLB URL\"\n            onFocus={e => handleTextFieldFocus(e.target)}\n            onBlur={() => handleTextFieldBlur()}\n            onChange={this.onUrlChange}\n            type=\"url\"\n            value={this.state.url}\n          />\n          <button className=\"submit\">\n            <FormattedMessage id=\"avatar-url-dialog.apply\" />\n          </button>\n        </form>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class HelpDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"Getting Started\" {...this.props}>\n        <div className=\"info-dialog__help\">\n          <p style={{ textAlign: \"center\" }}>\n            Join the Hubs community on{\" \"}\n            <WithHoverSound>\n              <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://discord.gg/wHmY4nd\">\n                Discord\n              </a>\n            </WithHoverSound>\n            !\n          </p>\n          <p>When in a room, other avatars can see and hear you.</p>\n          <p>\n            Use your controller&apos;s action button to teleport from place to place. If it has a grip, use it to pick\n            up objects.\n          </p>\n          <p>\n            In VR, <b>look up</b> to find your menu.\n          </p>\n          <p>\n            The <b>Mic Toggle</b> mutes your mic.\n          </p>\n          <p>\n            The <b>Pause Toggle</b> pauses all other avatars and lets you block others or pin or remove objects.\n          </p>\n          <p>\n            See detailed{\" \"}\n            <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/mozilla/hubs/wiki/Hubs-Features\">\n              feature\n            </a>{\" \"}\n            and{\" \"}\n            <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/mozilla/hubs/wiki/Hubs-Controls\">\n              controls\n            </a>{\" \"}\n            documentation.\n          </p>\n          <p className=\"dialog__box__contents__links\">\n            <WithHoverSound>\n              <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/mozilla/hubs/blob/master/TERMS.md\">\n                <FormattedMessage id=\"profile.terms_of_use\" />\n              </a>\n            </WithHoverSound>\n            <WithHoverSound>\n              <a\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                href=\"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\"\n              >\n                <FormattedMessage id=\"profile.privacy_notice\" />\n              </a>\n            </WithHoverSound>\n            <WithHoverSound>\n              <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"/?report\">\n                <FormattedMessage id=\"help.report_issue\" />\n              </a>\n            </WithHoverSound>\n          </p>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport copy from \"copy-to-clipboard\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\nimport { share, canShare } from \"../utils/share\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport styles from \"../assets/stylesheets/invite-dialog.scss\";\n\nfunction pad(num, size) {\n  let s = `${num}`;\n  while (s.length < size) s = `0${s}`;\n  return s;\n}\n\nexport default class InviteDialog extends Component {\n  static propTypes = {\n    entryCode: PropTypes.number,\n    hubId: PropTypes.string,\n    allowShare: PropTypes.bool,\n    isModal: PropTypes.bool,\n    onClose: PropTypes.func,\n    hasPush: PropTypes.bool,\n    isSubscribed: PropTypes.bool,\n    onSubscribeChanged: PropTypes.func,\n    embedUrl: PropTypes.string\n  };\n\n  state = {\n    copyButtonActive: false,\n    shareButtonActive: false\n  };\n\n  shareClicked = url => {\n    this.setState({ shareButtonActive: true });\n    share({ url, title: \"Join me now in #hubs!\" }).then(() => {\n      this.setState({ shareButtonActive: false });\n    });\n  };\n\n  copyClicked = link => {\n    this.setState({ copyButtonActive: true });\n    setTimeout(() => this.setState({ copyButtonActive: false }), 5000);\n\n    copy(link);\n  };\n\n  render() {\n    const { entryCode, embedUrl } = this.props;\n\n    const entryCodeString = pad(entryCode, 6);\n    const shortLinkText = `hub.link/${this.props.hubId}`;\n    const shortLink = \"https://\" + shortLinkText;\n    const embedText = `<iframe src=\"${embedUrl}\" style=\"width: 1024px; height: 768px;\" allow=\"microphone; camera; vr; speaker;\"></iframe>`;\n\n    return (\n      <div className={classNames({ [styles.dialog]: true, [styles.modal]: this.props.isModal })}>\n        {!this.props.isModal && <div className={styles.attachPoint} />}\n        <WithHoverSound>\n          <button className={styles.close} onClick={() => this.props.onClose()}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </button>\n        </WithHoverSound>\n        <div>\n          <FormattedMessage id={`invite.enter_via${this.props.isModal ? \"_modal\" : \"\"}`} />\n          <WithHoverSound>\n            <a href=\"https://hub.link\" target=\"_blank\" className={styles.hubLinkLink} rel=\"noopener noreferrer\">\n              hub.link\n            </a>\n          </WithHoverSound>\n          <FormattedMessage id=\"invite.and_enter_code\" />\n        </div>\n        <div className={styles.code}>\n          {entryCodeString.split(\"\").map((d, i) => (\n            <div className={classNames({ [styles.digit]: true, [styles[`digit_${i}`]]: true })} key={`link_code_${i}`}>\n              {d}\n            </div>\n          ))}\n        </div>\n        <div>\n          <FormattedMessage id={`invite.or_visit${this.props.isModal ? \"_modal\" : \"\"}`} />\n        </div>\n        <div className={styles.domain}>\n          <input type=\"text\" readOnly onFocus={e => e.target.select()} value={shortLinkText} />\n        </div>\n        <div className={styles.buttons}>\n          <WithHoverSound>\n            <button className={styles.linkButton} onClick={this.copyClicked.bind(this, shortLink)}>\n              <span>{this.state.copyButtonActive ? \"copied!\" : \"copy\"}</span>\n            </button>\n          </WithHoverSound>\n          {this.props.allowShare &&\n            canShare() && (\n              <WithHoverSound>\n                <button className={styles.linkButton} onClick={this.shareClicked.bind(this, shortLink)}>\n                  <span>{this.state.shareButtonActive ? \"sharing...\" : \"share\"}</span>\n                </button>\n              </WithHoverSound>\n            )}\n          {this.props.allowShare &&\n            !canShare() && (\n              <WithHoverSound>\n                <button className={styles.linkButton} onClick={this.shareClicked.bind(this, shortLink)}>\n                  <FormattedMessage id=\"invite.tweet\" />\n                </button>\n              </WithHoverSound>\n            )}\n        </div>\n        {embedUrl && (\n          <div className={styles.embed}>\n            <div>\n              <FormattedMessage id={`invite.embed`} />\n            </div>\n            <div className={styles.embedText}>\n              <input\n                type=\"text\"\n                readOnly\n                onFocus={e => {\n                  e.target.select();\n                  this.setState({ showEmbedTip: true });\n                }}\n                onBlur={() => this.setState({ showEmbedTip: false })}\n                value={embedText}\n              />\n            </div>\n            {this.state.showEmbedTip && (\n              <div className={styles.embedTipWrap}>\n                <div className={styles.embedTip}>\n                  <div className={styles.embedTipAttachPoint} />\n                  <FormattedMessage id=\"invite.embed-tip\" />\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n        {this.props.hasPush && (\n          <div className={styles.subscribe}>\n            <input\n              id=\"subscribe\"\n              type=\"checkbox\"\n              onChange={() => this.props.onSubscribeChanged()}\n              checked={this.props.isSubscribed}\n            />\n            <label htmlFor=\"subscribe\">\n              <FormattedMessage id=\"entry.notify_me\" />\n            </label>\n          </div>\n        )}\n\n        {this.props.isModal && (\n          <button className={styles.enterVrButton} onClick={() => this.props.onClose()}>\n            <FormattedMessage id=\"entry.return-to-vr\" />\n          </button>\n        )}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\nimport PropTypes from \"prop-types\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class InviteTeamDialog extends Component {\n  static propTypes = {\n    hubChannel: PropTypes.object\n  };\n\n  state = {\n    inviteButtonText: \"invite a hubs team member\"\n  };\n\n  constructor(props) {\n    super(props);\n  }\n\n  inviteClicked = () => {\n    this.setState({ inviteButtonText: \"OK! We'll be there shortly.\" });\n    this.props.hubChannel.requestSupport();\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Let's Chat!\" {...this.props}>\n        <div>\n          <div>\n            <p>Have an idea for Hubs? Having trouble?</p>\n            <p>We&apos;d love to chat. Someone from our team will join you in just a few minutes.</p>\n          </div>\n          <div className=\"invite-team-form\">\n            <div className=\"invite-team-form__buttons\">\n              <WithHoverSound>\n                <button className=\"invite-team-form__action-button\" onClick={this.inviteClicked}>\n                  <span>{this.state.inviteButtonText}</span>\n                </button>\n              </WithHoverSound>\n            </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\nimport LinkDialogHeader from \"../assets/images/link_dialog_header.svg\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nimport styles from \"../assets/stylesheets/link-dialog.scss\";\n\nexport default class LinkDialog extends Component {\n  static propTypes = {\n    linkCode: PropTypes.string,\n    onClose: PropTypes.func\n  };\n\n  render() {\n    const { linkCode } = this.props;\n\n    return (\n      <div className={styles.dialog}>\n        <WithHoverSound>\n          <div className={styles.close} onClick={() => this.props.onClose()}>\n            <span></span>\n          </div>\n        </WithHoverSound>\n        <div>\n          {!linkCode && (\n            <div>\n              <div className={classNames(\"loading-panel\", styles.codeLoadingPanel)}>\n                <div className=\"loader-wrap\">\n                  <div className=\"loader\">\n                    <div className=\"loader-center\" />\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n          {linkCode && (\n            <div className={styles.contents}>\n              <img className={styles.imageHeader} src={LinkDialogHeader} />\n              <div className={styles.header}>\n                <FormattedMessage id=\"link.connect_headset\" />\n              </div>\n              <div>\n                <FormattedMessage id=\"link.in_your_browser\" />\n              </div>\n              <WithHoverSound>\n                <a href=\"https://hub.link\" className={styles.domain} target=\"_blank\" rel=\"noopener noreferrer\">\n                  hub.link\n                </a>\n              </WithHoverSound>\n              <div>\n                <FormattedMessage id=\"link.enter_code\" />\n              </div>\n              {linkCode && (\n                <div className={styles.code}>\n                  {linkCode.split(\"\").map((d, i) => (\n                    <span className={styles.digit} key={`link_code_${i}`}>\n                      {d}\n                    </span>\n                  ))}\n                </div>\n              )}\n              <div className={styles.keepOpen}>\n                <FormattedMessage id=\"link.do_not_close\" />\n              </div>\n              <WithHoverSound>\n                <button className={styles.closeButton} onClick={() => this.props.onClose()}>\n                  <FormattedMessage id=\"link.cancel\" />\n                </button>\n              </WithHoverSound>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport copy from \"copy-to-clipboard\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class SafariDialog extends Component {\n  state = {\n    copyLinkButtonText: \"copy\"\n  };\n\n  copyLinkClicked = link => {\n    copy(link);\n    this.setState({ copyLinkButtonText: \"copied!\" });\n  };\n\n  render() {\n    const onCopyClicked = this.copyLinkClicked.bind(this, document.location);\n    return (\n      <DialogContainer title=\"Open in Safari\" {...this.props}>\n        <div>\n          <div>Axon Park does not support your current browser on iOS. Copy and paste this link directly in Safari.</div>\n          <div className=\"invite-form\">\n            <input\n              type=\"text\"\n              readOnly\n              onFocus={e => e.target.select()}\n              value={document.location}\n              className=\"invite-form__link_field\"\n            />\n            <div className=\"invite-form__buttons\">\n              <WithHoverSound>\n                <button className=\"invite-form__action-button\" onClick={onCopyClicked}>\n                  <span>{this.state.copyLinkButtonText}</span>\n                </button>\n              </WithHoverSound>\n            </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\n\nexport default class SafariMicDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"Microphone Access Required\" {...this.props}>\n        <div>\n          <div>\n            Hubs requires microphone permissions in Safari. <br />\n            Please reload and allow microphone access to continue.\n          </div>\n          <div className=\"invite-form\">\n            <div className=\"invite-form__buttons\">\n              <button className=\"invite-form__action-button\" onClick={() => location.reload()}>\n                Reload\n              </button>\n            </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\n\nimport styles from \"../assets/stylesheets/room-settings-dialog.scss\";\nimport DialogContainer from \"./dialog-container\";\n\nexport default class RoomSettingsDialog extends Component {\n  static propTypes = {\n    initialSettings: PropTypes.object,\n    onChange: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = props.initialSettings;\n  }\n\n  onSubmit = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onChange(this.state);\n    this.props.onClose();\n  };\n\n  renderCheckbox(member_permission, disabled, onChange) {\n    return (\n      <label className={cx(styles.permission, { [styles.permissionDisabled]: disabled })} key={member_permission}>\n        <input\n          type=\"checkbox\"\n          checked={this.state.member_permissions[member_permission]}\n          disabled={disabled}\n          onChange={\n            onChange ||\n            (e =>\n              this.setState({\n                member_permissions: { ...this.state.member_permissions, [member_permission]: e.target.checked }\n              }))\n          }\n        />\n        <FormattedMessage id={`room-settings.${member_permission}`} />\n      </label>\n    );\n  }\n\n  render() {\n    return (\n      <DialogContainer title=\"Room Settings\" {...this.props}>\n        <form onSubmit={this.onSubmit} className={styles.roomSettingsForm}>\n          <span className={styles.subtitle}>\n            <FormattedMessage id=\"room-settings.name-subtitle\" />\n          </span>\n          <input\n            name=\"name\"\n            type=\"text\"\n            required\n            autoFocus\n            autoComplete=\"off\"\n            placeholder=\"Room name\"\n            value={this.state.name}\n            onFocus={e => handleTextFieldFocus(e.target)}\n            onBlur={() => handleTextFieldBlur()}\n            onChange={e => this.setState({ name: e.target.value })}\n            className={styles.nameField}\n          />\n          <span className={styles.subtitle}>\n            <FormattedMessage id=\"room-settings.permissions-subtitle\" />\n          </span>\n          <div className={styles.permissions}>\n            {this.renderCheckbox(\"spawn_and_move_media\", false, e => {\n              const newMemberPermissions = {\n                spawn_and_move_media: e.target.checked\n              };\n              if (!e.target.checked) {\n                newMemberPermissions.spawn_camera = false;\n                newMemberPermissions.pin_objects = false;\n              }\n              this.setState({ member_permissions: { ...this.state.member_permissions, ...newMemberPermissions } });\n            })}\n            <div className={styles.permissionsGroup}>\n              {this.renderCheckbox(\"spawn_camera\", !this.state.member_permissions.spawn_and_move_media)}\n              {this.renderCheckbox(\"pin_objects\", !this.state.member_permissions.spawn_and_move_media)}\n            </div>\n            {this.renderCheckbox(\"spawn_drawing\")}\n          </div>\n          <button type=\"submit\" className={styles.nextButton}>\n            <FormattedMessage id=\"room-settings.apply\" />\n          </button>\n        </form>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport styles from \"../assets/stylesheets/close-room-dialog.scss\";\nimport DialogContainer from \"./dialog-container\";\n\nexport default class CloseRoomDialog extends Component {\n  static propTypes = {\n    onConfirm: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Close Room\" {...this.props}>\n        <div className={styles.message}>\n          <FormattedMessage id=\"close-room.message\" />\n        </div>\n        <button\n          className={styles.confirmButton}\n          onClick={() => {\n            this.props.onConfirm();\n            this.props.onClose();\n          }}\n        >\n          <FormattedMessage id=\"close-room.confirm\" />\n        </button>\n        <button className={styles.cancelButton} onClick={() => this.props.onClose()}>\n          <FormattedMessage id=\"close-room.cancel\" />\n        </button>\n      </DialogContainer>\n    );\n  }\n}\n","import { sets } from \"./userinput/sets\";\nimport { paths } from \"./userinput/paths\";\n\n// The output of this system is activeTips which shows, if any, the tips to show at the top\n// and bottom of the screen. There are named tips (eg locomotion) that each have validators.\n//\n// Each frame we run all the non-finished validators and take the first tip (by order)\n// which is VALID. Any tip that returns FINISHED will no longer be considered without\n// a local storage reset.\n\n// Validators can return these values:\n//\n// INVALID - Tip is not valid to show\n// VALID - Tip is valid to show\n// FINISH - Tip should always be assumed INVALID going forward\n//\n//\n// Tips have \"scope\", which is a certain context within which the validators are run (right now,\n// just the top of bottom of the screen.) They are also platform-local.\nconst INVALID = 0;\nconst VALID = 1;\nconst FINISH = 2;\n\nconst LOCAL_STORAGE_KEY = \"__hubs_finished_tips\";\nconst NUM_ENTRIES_FOR_FEEDBACK_TIP = 3;\n\nconst TIPS = {\n  desktop: {\n    top: [\"pen_mode\", \"video_share_mode\", \"mute_mode\"],\n    bottom: [\n      \"look\",\n      \"locomotion\",\n      \"turning\",\n      \"spawn_menu\",\n      \"object_grab\",\n      \"object_zoom\",\n      \"object_scale\",\n      \"freeze_gesture\",\n      \"menu_hover\",\n      \"object_recenter_button\",\n      \"object_rotate_button\",\n      \"object_scale_button\",\n      \"object_pin\",\n      \"invite\",\n      \"pen_color\",\n      \"pen_size\",\n      \"feedback\"\n    ]\n  },\n  mobile: {\n    top: [\"pen_mode\", \"video_share_mode\", \"freeze_mode\", \"mute_mode\"],\n    bottom: [\n      \"look\",\n      \"locomotion\",\n      \"spawn_menu\",\n      \"object_grab\",\n      \"freeze_gesture\",\n      \"object_recenter_button\",\n      \"object_rotate_button\",\n      \"object_scale_button\",\n      \"object_pin\",\n      \"invite\",\n      \"feedback\"\n    ]\n  },\n  standalone: { top: [], bottom: [] }\n};\n\n// These tips, if closed, will only clear themselves, not all tips.\nconst LOCAL_CLOSE_TIPS = [\"feedback\", \"invite\", \"object_pin\"];\n\n// These tips will remain active even if the user closes the tips globally.\nconst KEEP_ACTIVE_AFTER_GLOBAL_CLOSE = [\"feedback\"];\n\nlet localStorageCache = null;\nlet finishedScopes = {}; // Optimization, lets system skip scopes altogether once finished.\n\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\nconst tipPlatform = () => {\n  if (isMobileVR) return \"standalone\";\n  return isMobile ? \"mobile\" : \"desktop\";\n};\n\nconst platformTips = TIPS[tipPlatform()];\n\nconst isTipFinished = tip => {\n  if (localStorageCache === null) {\n    localStorageCache = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));\n  }\n\n  return !!(localStorageCache[tip] && localStorageCache[tip].finished);\n};\n\nexport const markTipFinished = tip => {\n  const storeData = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));\n  storeData[tip] = { finished: true };\n  localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(storeData));\n  localStorageCache = null;\n};\n\nexport const handleTipClose = (fullTip, scope) => {\n  const tip = fullTip.split(\".\")[1];\n\n  // Invite and pinning tips should be locally cleared, others should clear all remaining tips.\n  const tips = LOCAL_CLOSE_TIPS.includes(tip) ? [tip] : platformTips[scope];\n\n  for (let i = 0; i < tips.length; i++) {\n    const t = tips[i];\n\n    if (!KEEP_ACTIVE_AFTER_GLOBAL_CLOSE.includes(t) || t === tip) {\n      markTipFinished(t);\n    }\n  }\n};\n\nexport const resetTips = () => {\n  localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify({}));\n  localStorageCache = null;\n  window.APP.store.resetTipActivityFlags();\n  window.APP.store.resetConfirmedBroadcastedRooms();\n  finishedScopes = {};\n};\n\nconst VALIDATORS = {\n  look: function(userinput) {\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    const cameraDelta = userinput.get(\n      isMobile ? paths.device.touchscreen.touchCameraDelta : paths.device.smartMouse.cameraDelta\n    );\n    return cameraDelta ? FINISH : VALID;\n  },\n  locomotion: function(userinput) {\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    const accel = userinput.get(paths.actions.characterAcceleration);\n\n    // User moved\n    return accel && (accel[0] !== 0 || accel[1] !== 0) ? FINISH : VALID;\n  },\n  turning: function(userinput) {\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (userinput.get(paths.actions.snapRotateLeft) || userinput.get(paths.actions.snapRotateRight)) return FINISH;\n    return VALID;\n  },\n  spawn_menu: function(userinput, scene, mediaCounter) {\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (mediaCounter.count() === 0) return VALID;\n    return FINISH;\n  },\n  freeze_gesture: function(userinput, scene, mediaCounter) {\n    if (mediaCounter.count() === 0) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingInteractable)) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (scene.is(\"frozen\") && userinput.activeSets.includes(sets.cursorHoveringOnInteractable)) return FINISH;\n    return scene.is(\"frozen\") ? INVALID : VALID;\n  },\n  menu_hover: function(userinput, scene, mediaCounter) {\n    if (mediaCounter.count() === 0) return INVALID;\n    if (!scene.is(\"frozen\")) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (scene.is(\"frozen\") && userinput.activeSets.includes(sets.cursorHoveringOnInteractable)) return FINISH;\n    return VALID;\n  },\n  invite: function(userinput, scene) {\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingCamera)) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingInteractable)) return INVALID;\n    return scene.is(\"copresent\") ? FINISH : VALID;\n  },\n  object_grab: function(userinput, scene, mediaCounter) {\n    if (scene.is(\"frozen\")) return INVALID;\n    if (mediaCounter.count() === 0) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingCamera)) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingInteractable)) return FINISH;\n    return VALID;\n  },\n  object_rotate_button: function(userinput, scene, mediaCounter, store) {\n    if (!scene.is(\"frozen\")) return INVALID;\n    if (mediaCounter.count() === 0) return INVALID;\n    if (store && store.state.activity.hasRotated) return FINISH;\n    return VALID;\n  },\n  object_scale_button: function(userinput, scene, mediaCounter, store) {\n    if (!scene.is(\"frozen\")) return INVALID;\n    if (mediaCounter.count() === 0) return INVALID;\n    if (store && store.state.activity.hasScaled) return FINISH;\n    return VALID;\n  },\n  object_recenter_button: function(userinput, scene, mediaCounter, store) {\n    if (!scene.is(\"frozen\")) return INVALID;\n    if (mediaCounter.count() === 0) return INVALID;\n    if (store && store.state.activity.hasRecentered) return FINISH;\n    return VALID;\n  },\n  object_pin: function(userinput, scene, mediaCounter, store) {\n    if (!scene.is(\"frozen\")) return INVALID;\n    if (mediaCounter.count() === 0) return INVALID;\n    if (store && store.state.activity.hasPinned) return FINISH;\n    return VALID;\n  },\n  object_zoom: function(userinput, scene) {\n    if (scene.is(\"frozen\")) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingCamera)) return INVALID;\n    if (!userinput.activeSets.includes(sets.cursorHoldingInteractable)) return INVALID;\n    if (userinput.get(paths.actions.cursor.modDelta)) return FINISH;\n    return VALID;\n  },\n  object_scale: function(userinput, scene) {\n    if (scene.is(\"frozen\")) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingCamera)) return INVALID;\n    if (!userinput.activeSets.includes(sets.cursorHoldingInteractable)) return INVALID;\n    if (userinput.get(paths.actions.cursor.scaleGrabbedGrabbable)) return FINISH;\n    return VALID;\n  },\n  pen_color: function(userinput) {\n    if (!userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (userinput.get(paths.actions.cursor.penNextColor) || userinput.get(paths.actions.cursor.penPrevColor)) {\n      return FINISH;\n    }\n    return VALID;\n  },\n  pen_size: function(userinput) {\n    if (!userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (userinput.get(paths.actions.cursor.scalePenTip)) return FINISH;\n    return VALID;\n  },\n  pen_mode: function(userinput) {\n    if (!userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    return VALID;\n  },\n  freeze_mode: function(userinput, scene) {\n    return scene.is(\"frozen\") ? VALID : INVALID;\n  },\n  video_share_mode: function(userinput, scene) {\n    return scene.is(\"sharing_video\") ? VALID : INVALID;\n  },\n  mute_mode: function(userinput, scene) {\n    return scene.is(\"muted\") ? VALID : INVALID;\n  },\n  feedback: function(userinput, scene, mediaCounter, store) {\n    if (store && store.state.activity.entryCount >= NUM_ENTRIES_FOR_FEEDBACK_TIP) return VALID;\n    return INVALID;\n  }\n};\n\nAFRAME.registerSystem(\"tips\", {\n  init: function() {\n    this.activeTips = {};\n    this._finishedScopes = {};\n    this._performStep = this._performStep.bind(this);\n\n    if (localStorage.getItem(LOCAL_STORAGE_KEY) === null) {\n      localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify({}));\n    }\n  },\n\n  tick: function() {\n    if (isMobileVR) return; // Optimization for now, don't bother with this on mobile VR until we have real tips\n\n    if (!this._userinput) {\n      this._userinput = this.el.systems.userinput;\n\n      if (!this._userinput) return;\n    }\n\n    if (!this._mediaCounter) {\n      this._mediaCounter =\n        document.querySelector(\"#media-counter\") &&\n        document.querySelector(\"#media-counter\").components[\"networked-counter\"];\n\n      if (!this._mediaCounter) return;\n    }\n\n    const tips = platformTips;\n\n    const prevTop = this.activeTips.top;\n    const prevBottom = this.activeTips.bottom;\n\n    this._performStep(tips.top, \"top\");\n    this._performStep(tips.bottom, \"bottom\");\n\n    if (prevTop !== this.activeTips.top || prevBottom !== this.activeTips.bottom) {\n      this.el.emit(\"tips_changed\", this.activeTips);\n    }\n  },\n\n  _performStep: function(tips, scope) {\n    if (finishedScopes[scope]) return;\n\n    let chosenTip = null;\n    let finishCount = 0;\n\n    for (let i = 0; i < tips.length; i++) {\n      const tip = tips[i];\n      if (isTipFinished(tip)) {\n        finishCount++;\n        continue;\n      }\n\n      switch (VALIDATORS[tip](this._userinput, this.el, this._mediaCounter, window.APP.store)) {\n        case FINISH:\n          markTipFinished(tip);\n          break;\n        case VALID:\n          chosenTip = `${tipPlatform()}.${tip}`;\n          break;\n      }\n\n      if (chosenTip) break;\n    }\n\n    this.activeTips[scope] = chosenTip;\n\n    if (finishCount === tips.length) {\n      // Optimization: Tips are completed for this scope, no need to re-walk.\n      finishedScopes[scope] = true;\n    }\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport styles from \"../assets/stylesheets/tip.scss\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { handleTipClose } from \"../systems/tips.js\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nexport default class Tip extends Component {\n  static propTypes = {\n    history: PropTypes.object,\n    tip: PropTypes.string,\n    tipRegion: PropTypes.string,\n    broadcastTarget: PropTypes.string,\n    pushHistoryState: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  render() {\n    const { tip, tipRegion, broadcastTarget, pushHistoryState } = this.props;\n    let tipBody;\n\n    if ([\".spawn_menu\", \"_button\"].find(x => tip.endsWith(x))) {\n      tipBody = (\n        <div className={styles.splitTip}>\n          <FormattedMessage id={`tips.${tip}-pre`} />\n          <div\n            className={classNames({\n              [styles.splitTipIcon]: true,\n              [styles[tip.split(\".\")[1] + \"-icon\"]]: true\n            })}\n          />\n          <FormattedMessage id={`tips.${tip}-post`} />\n        </div>\n      );\n    } else if (tip === \"discord\") {\n      tipBody = (\n        <div className={styles.tip}>\n          <span>{`Chat in this room is being bridged to ${broadcastTarget} on Discord.`}</span>\n        </div>\n      );\n    } else if (tip === \"embed\") {\n      tipBody = (\n        <div className={styles.tip}>\n          <FormattedMessage id=\"embed.presence-warning\" />\n        </div>\n      );\n    } else if (tip.endsWith(\".feedback\")) {\n      tipBody = (\n        <div className={styles.tip}>\n          <FormattedMessage id={`tips.${tip}`} />\n          &nbsp;\n          <button\n            className={styles.tipLink}\n            onClick={() => {\n              handleTipClose(tip, tipRegion);\n              pushHistoryState(\"modal\", \"feedback\");\n            }}\n          >\n            <FormattedMessage id={`tips.${tip}-link`} />\n          </button>\n        </div>\n      );\n    } else {\n      tipBody = (\n        <div className={styles.tip}>\n          <FormattedMessage id={`tips.${tip}`} />\n        </div>\n      );\n    }\n\n    return (\n      <div className={styles.tipRoot}>\n        <button\n          className={styles.tipCancel}\n          onClick={() => (this.props.onClose ? this.props.onClose(tip, tipRegion) : handleTipClose(tip, tipRegion))}\n        >\n          <i>\n            <FontAwesomeIcon icon={faTimes} />\n          </i>\n        </button>\n        {tipBody}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\n\nexport default class WebRTCScreenshareUnsupportedDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"Share Screen\" {...this.props}>\n        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\" }}>\n          <p>\n            Your browser doesn&apos;t seem to support screen sharing.\n            <br />\n            To share your screen in Hubs, you can use Firefox.\n          </p>\n          <a\n            className=\"info-dialog--action-button\"\n            target=\"_blank\"\n            rel=\"noreferrer noopener\"\n            href=\"https://www.mozilla.org/firefox\"\n          >\n            Download Firefox\n          </a>\n          <p style={{ fontSize: \"0.8em\" }}>\n            You can try&nbsp;\n            <a\n              href=\"https://www.webrtc-experiment.com/screen-sharing/#5591174797993739\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              testing WebRTC screen sharing\n            </a>&nbsp;in your browser.\n          </p>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\n\nexport default class WebAssemblyUnsupportedDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"WebAssembly Unsupported\" {...this.props}>\n        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\" }}>\n          <p>\n            Your browser doesn&apos;t seem to support WebAssembly.\n            <br />\n            Please update or switch to a newer browser.\n          </p>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class WebVRRecommendDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"Enter in VR\" {...this.props}>\n        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\" }}>\n          <p>To enter with Oculus or SteamVR, you can use Firefox.</p>\n          <WithHoverSound>\n            <a\n              className=\"info-dialog--action-button\"\n              href=\"https://www.mozilla.org/firefox\"\n              target=\"_blank\"\n              rel=\"noreferrer noopener\"\n            >\n              Download Firefox\n            </a>\n          </WithHoverSound>\n          <p style={{ fontSize: \"0.8em\" }}>\n            For a list of browsers with experimental VR support, visit{\" \"}\n            <WithHoverSound>\n              <a href=\"https://webvr.rocks\" target=\"_blank\" rel=\"noopener noreferrer\">\n                WebVR Rocks\n              </a>\n            </WithHoverSound>\n          </p>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\nimport styles from \"../assets/stylesheets/feedback-dialog.scss\";\n\nexport default class FeedbackDialog extends Component {\n  render() {\n    return (\n      <DialogContainer wide={true} title=\"\" {...this.props}>\n        <iframe\n          className={styles.formFrame}\n          src=\"https://docs.google.com/forms/d/e/1FAIpQLSe1C-7hCA1XMT8IL8XBnjlxMAU1JXrwAW8YkbmbBJ4B3pDSsw/viewform?embedded=true\"\n          frameBorder=\"0\"\n          marginHeight=\"0\"\n          marginWidth=\"0\"\n        >\n          Loading...\n        </iframe>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\nimport styles from \"../assets/stylesheets/leave-room-dialog.scss\";\nimport { FormattedMessage } from \"react-intl\";\nimport PropTypes from \"prop-types\";\n\nexport default class LeaveRoomDialog extends Component {\n  static propTypes = {\n    messageType: PropTypes.string,\n    destinationUrl: PropTypes.string\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Leave Room\" {...this.props}>\n        <div className={styles.leaveRoom}>\n          <div>\n            <FormattedMessage id={`leave-room-dialog.${this.props.messageType}.message`} />\n          </div>\n          <a href={this.props.destinationUrl} rel=\"noopener noreferrer\">\n            <FormattedMessage id={`leave-room-dialog.${this.props.messageType}.confirm`} />\n          </a>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport DialogContainer from \"./dialog-container.js\";\nimport styles from \"../assets/stylesheets/room-info-dialog.scss\";\nimport { scaledThumbnailUrlFor } from \"../utils/media-url-utils\";\n\nexport default class RoomInfoDialog extends Component {\n  static propTypes = {\n    hubName: PropTypes.string,\n    scene: PropTypes.object\n  };\n\n  render() {\n    const toAttributionDiv = (a, i) => {\n      if (a.url) {\n        const source = a.url.includes(\"sketchfab.com\")\n          ? \"on Sketchfab\"\n          : a.url.includes(\"poly.google.com\")\n            ? \"on Google Poly\"\n            : \"\";\n\n        return (\n          <div className={styles.attribution} key={`${a.url} ${i}`}>\n            <div className={styles.attributionName}>\n              <a href={a.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                {a.name}\n              </a>\n            </div>\n            <div className={styles.attributionAuthor}>\n              by {a.author} {source}\n            </div>\n          </div>\n        );\n      } else {\n        return (\n          <div className={styles.attribution} key={`${a.name} ${a.author} {i}`}>\n            <div className={styles.attributionName}>{a.name}</div>\n            <div className={styles.attributionAuthor}>by {a.author}</div>\n          </div>\n        );\n      }\n    };\n\n    let attributions = null;\n    let creator = null;\n\n    if (this.props.scene.attributions) {\n      creator = this.props.scene.attributions.creator;\n      attributions = (\n        <div>\n          {this.props.scene.attributions.content && this.props.scene.attributions.content.map(toAttributionDiv)}\n        </div>\n      );\n    }\n\n    const title = <div className={styles.title}>{this.props.hubName}</div>;\n\n    return (\n      <DialogContainer title={title} wide={true} {...this.props}>\n        <div className={styles.roomInfo}>\n          <div className={styles.sceneScreenshot}>\n            <a href={this.props.scene.url} target=\"_blank\" rel=\"noopener noreferrer\">\n              <img src={scaledThumbnailUrlFor(this.props.scene.screenshot_url, 400, 480)} />\n            </a>\n          </div>\n          <div className={styles.sceneDetails}>\n            <div className={styles.sceneMain}>\n              <div className={styles.sceneName}>\n                <a href={this.props.scene.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                  {this.props.scene.name}\n                </a>\n              </div>\n              <div className={styles.sceneCreator}>{creator}</div>\n            </div>\n            <div className={styles.sceneAttributions}>{attributions}</div>\n            <div className={styles.sceneButtons}> </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { FormattedMessage } from \"react-intl\";\nimport styles from \"../assets/stylesheets/oauth-dialog.scss\";\nimport classNames from \"classnames\";\n\nexport default class OAuthDialog extends Component {\n  static propTypes = {\n    oauthInfo: PropTypes.array\n  };\n  renderSignInDisclaimer(type) {\n    return (\n      <div>\n        <div>\n          You&apos;ll need to sign in to <span className={styles.oauthTypeName}>{type}</span> to access this room.\n        </div>\n        <br />\n        <div>We&apos;ll ask for access to your e-mail address so you can skip signing in next time.</div>\n        <p className={styles.privacyNotice}>\n          By proceeding, you agree to the{\" \"}\n          <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/mozilla/hubs/blob/master/TERMS.md\">\n            terms of use\n          </a>{\" \"}\n          and{\" \"}\n          <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\">\n            privacy notice\n          </a>.\n        </p>\n      </div>\n    );\n  }\n\n  renderTweetDisclaimer() {\n    return (\n      <div className={styles.twitterMessage}>\n        <FormattedMessage id=\"oauth-dialog.message.twitter\" />\n      </div>\n    );\n  }\n\n  render() {\n    const info = this.props.oauthInfo && this.props.oauthInfo[0];\n    const closable = info && info.type === \"twitter\"; // NOTE: for now, allow closing dialog if doing Twitter sign in (currently just for sharing)\n\n    return (\n      <DialogContainer title=\"\" closable={closable} {...this.props}>\n        <div>\n          {info && (info.type === \"twitter\" ? this.renderTweetDisclaimer() : this.renderSignInDisclaimer(info.type))}\n          <div className=\"invite-form\">\n            <div className={`invite-form__buttons ${styles.oauthButtons}`}>\n              {info ? (\n                <a\n                  href={info.url}\n                  key={info.type}\n                  className={classNames({\n                    [styles.oauthButton]: true,\n                    [styles.oauthTwitterButton]: info.type === \"twitter\",\n                    [styles.oauthDiscordButton]: info.type === \"discord\"\n                  })}\n                >\n                  <FormattedMessage id={`oauth-dialog.sign-in.${info.type}`} />\n                </a>\n              ) : (\n                <div className=\"loader-wrap loader-mid\">\n                  <div className=\"loader\">\n                    <div className=\"loader-center\" />\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport DialogContainer from \"./dialog-container.js\";\nimport styles from \"../assets/stylesheets/tweet-dialog.scss\";\nimport Editor, { createEditorStateWithText } from \"draft-js-plugins-editor\";\nimport { FormattedMessage } from \"react-intl\";\nimport { fetchReticulumAuthenticated } from \"../utils/phoenix-utils\";\nimport createEmojiPlugin from \"draft-js-emoji-plugin\";\nimport createHashtagPlugin from \"draft-js-hashtag-plugin\";\nimport createLinkifyPlugin from \"draft-js-linkify-plugin\";\nimport createCounterPlugin from \"draft-js-counter-plugin\";\nimport classNames from \"classnames\";\nimport { scaledThumbnailUrlFor } from \"../utils/media-url-utils\";\nimport { Modifier, EditorState } from \"draft-js\";\nimport \"draft-js-emoji-plugin/lib/plugin.css\";\nimport \"draft-js-hashtag-plugin/lib/plugin.css\";\nimport \"draft-js-linkify-plugin/lib/plugin.css\";\nimport \"draft-js-counter-plugin/lib/plugin.css\";\n\nconst emojiPlugin = createEmojiPlugin();\nconst hashtagPlugin = createHashtagPlugin();\nconst linkifyPlugin = createLinkifyPlugin();\nconst counterPlugin = createCounterPlugin();\n\n// Taken from draft-js-emoji\nconst addEmoji = (emoji, editorState) => {\n  const contentState = editorState.getCurrentContent();\n  const contentStateWithEntity = contentState.createEntity(\"emoji\", \"IMMUTABLE\", { emojiUnicode: emoji });\n  const entityKey = contentStateWithEntity.getLastCreatedEntityKey();\n  const currentSelectionState = editorState.getSelection();\n\n  let emojiAddedContent;\n  let emojiEndPos = 0;\n  let blockSize = 0;\n\n  // in case text is selected it is removed and then the emoji is added\n  const afterRemovalContentState = Modifier.removeRange(contentState, currentSelectionState, \"backward\");\n\n  // deciding on the position to insert emoji\n  const targetSelection = afterRemovalContentState.getSelectionAfter();\n\n  emojiAddedContent = Modifier.insertText(afterRemovalContentState, targetSelection, emoji, null, entityKey);\n\n  emojiEndPos = targetSelection.getAnchorOffset();\n  const blockKey = targetSelection.getAnchorKey();\n  blockSize = contentState.getBlockForKey(blockKey).getLength();\n\n  // If the emoji is inserted at the end, a space is appended right after for\n  // a smooth writing experience.\n  if (emojiEndPos === blockSize) {\n    emojiAddedContent = Modifier.insertText(emojiAddedContent, emojiAddedContent.getSelectionAfter(), \" \");\n  }\n\n  const newEditorState = EditorState.push(editorState, emojiAddedContent, \"insert-emoji\");\n  return EditorState.forceSelection(newEditorState, emojiAddedContent.getSelectionAfter());\n};\n\nexport default class TweetDialog extends Component {\n  static propTypes = {\n    history: PropTypes.object,\n    onClose: PropTypes.func\n  };\n\n  constructor(props) {\n    super();\n\n    this.state = {\n      editorState: createEditorStateWithText(props.history.location.state.detail.text || \"\"),\n      suggestions: []\n    };\n  }\n\n  componentDidMount() {\n    // Calling this immediately seems to break editor initialization\n    setTimeout(() => {\n      this.editorRef.focus();\n\n      // Other attempts at doing this resulted in no visible cursor or weird editor behavior:\n      this.setState({ editorState: addEmoji(\"\", this.state.editorState) });\n    });\n  }\n\n  async sendTweet() {\n    // For now assume url is a stored file media url\n    const media_stored_file_url = this.props.history.location.state.detail.url;\n    const body = this.state.editorState.getCurrentContent().getPlainText();\n\n    const payload = { media_stored_file_url, body };\n    this.setState({ posting: true });\n    await fetchReticulumAuthenticated(\"/api/v1/twitter/tweets\", \"POST\", payload);\n    this.setState({ posting: false, posted: true });\n  }\n\n  renderPostedDialog() {\n    return (\n      <DialogContainer wide={true} allowOverflow={true} closable={false} title=\"\" {...this.props}>\n        <div className={styles.posted}>\n          <div className={styles.message}>\n            <FormattedMessage id=\"tweet-dialog.posted\" />\n          </div>\n\n          <div className={styles.buttons}>\n            <button className={styles.tweetButton} onClick={() => this.props.onClose()}>\n              <FormattedMessage id=\"tweet-dialog.close\" />\n            </button>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n\n  renderTweetDialog() {\n    const { EmojiSuggestions, EmojiSelect } = emojiPlugin;\n    const { CharCounter } = counterPlugin;\n    const { url, contentSubtype } = this.props.history.location.state.detail;\n\n    return (\n      <DialogContainer\n        wide={true}\n        allowOverflow={true}\n        title=\"\"\n        additionalClass={styles.dialogBackground}\n        {...this.props}\n      >\n        <div className={styles.tweet}>\n          <div className={styles.editor} onClick={() => this.editorRef.focus()}>\n            <div className={styles.editorInner}>\n              <Editor\n                ref={r => (this.editorRef = r)}\n                editorState={this.state.editorState}\n                onChange={editorState => this.setState({ editorState })}\n                plugins={[emojiPlugin, hashtagPlugin, linkifyPlugin, counterPlugin]}\n              />\n            </div>\n\n            <div className={styles.emojiButton}>\n              <EmojiSelect />\n            </div>\n\n            <div className={styles.emojiSuggestions}>\n              <EmojiSuggestions />\n            </div>\n\n            {this.state.editorState.getCurrentContent().getPlainText().length > 200 && (\n              <div className={styles.counter}>\n                <CharCounter editorState={this.state.editorState} limit={280} /> / 280\n              </div>\n            )}\n\n            <div className={styles.media}>\n              {contentSubtype && contentSubtype.startsWith(\"video\") ? (\n                <video src={url} width={450} height={255} controls />\n              ) : (\n                <img src={scaledThumbnailUrlFor(url, 450, 255)} />\n              )}\n            </div>\n          </div>\n\n          {!this.state.posting ? (\n            <div className={styles.buttons}>\n              <button\n                className={styles.tweetButton}\n                onClick={() => this.sendTweet()}\n                disabled={this.state.editorState.getCurrentContent().getPlainText().length > 280}\n              >\n                <FormattedMessage id=\"tweet-dialog.tweet\" />\n              </button>\n            </div>\n          ) : (\n            <div className={classNames([\"loader-wrap\", \"loader-mid\", styles.tweetLoader])}>\n              <div className=\"loader\">\n                <div className=\"loader-center\" />\n              </div>\n            </div>\n          )}\n        </div>\n      </DialogContainer>\n    );\n  }\n\n  render() {\n    if (this.state.posted) {\n      return this.renderPostedDialog();\n    } else {\n      return this.renderTweetDialog();\n    }\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"../assets/stylesheets/message-entry.scss\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { faPaperPlane } from \"@fortawesome/free-solid-svg-icons/faPaperPlane\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nclass LobbyChatBox extends Component {\n  static propTypes = {\n    discordBridges: PropTypes.array,\n    occupantCount: PropTypes.number,\n    onSendMessage: PropTypes.func\n  };\n\n  state = {\n    pendingMessage: \"\"\n  };\n\n  sendMessage = e => {\n    e.preventDefault();\n    if (this.props.onSendMessage) {\n      this.props.onSendMessage(this.state.pendingMessage);\n    }\n    this.setState({ pendingMessage: \"\" });\n  };\n\n  render() {\n    const textRows = this.state.pendingMessage.split(\"\\n\").length;\n    const pendingMessageTextareaHeight = textRows * 28 + \"px\";\n    const pendingMessageFieldHeight = textRows * 28 + 20 + \"px\";\n    const discordSnippet = this.props.discordBridges.map(ch => \"#\" + ch).join(\", \");\n    const occupantSnippet = `${this.props.occupantCount - 1} other${this.props.occupantCount > 2 ? \"s\" : \"\"}`;\n    const messageEntryPlaceholder =\n      this.props.occupantCount <= 1\n        ? \"Nobody is here yet...\"\n        : this.props.discordBridges.length\n          ? `Send message to ${occupantSnippet} and ${discordSnippet}...`\n          : `Send message to ${occupantSnippet}...`;\n\n    return (\n      <form onSubmit={this.sendMessage}>\n        <div\n          className={classNames({\n            [styles.messageEntry]: true,\n            [styles.messageEntryDisabled]: this.props.occupantCount <= 1\n          })}\n          style={{ height: pendingMessageFieldHeight }}\n        >\n          <textarea\n            className={classNames([styles.messageEntryInput, \"chat-focus-target\"])}\n            value={this.state.pendingMessage}\n            rows={textRows}\n            style={{ height: pendingMessageTextareaHeight }}\n            onFocus={e => handleTextFieldFocus(e.target)}\n            onBlur={() => handleTextFieldBlur()}\n            onChange={e => this.setState({ pendingMessage: e.target.value })}\n            disabled={this.props.occupantCount <= 1 ? true : false}\n            onKeyDown={e => {\n              if (e.key === \"Enter\" && !e.shiftKey) {\n                this.sendMessage(e);\n              } else if (e.key === \"Escape\") {\n                e.target.blur();\n              }\n            }}\n            placeholder={messageEntryPlaceholder}\n          />\n          <WithHoverSound>\n            <button\n              className={classNames([styles.messageEntryButton, styles.messageEntrySubmit])}\n              disabled={this.props.occupantCount <= 1 ? true : false}\n              type=\"submit\"\n            >\n              <i>\n                <FontAwesomeIcon icon={faPaperPlane} />\n              </i>\n            </button>\n          </WithHoverSound>\n        </div>\n      </form>\n    );\n  }\n}\n\nexport default LobbyChatBox;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/chat-command-help.scss\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\nexport default class ChatCommandHelp extends Component {\n  static propTypes = {\n    matchingPrefix: PropTypes.string,\n    onTop: PropTypes.bool\n  };\n\n  render() {\n    const commands = [\n      \"leave\",\n      \"fly\",\n      \"grow\",\n      \"shrink\",\n      \"duck\",\n      \"debug\",\n      \"vrstats\",\n      \"scene <scene url>\",\n      \"rename <new name>\"\n    ];\n\n    if (qsTruthy(\"video_capture\")) {\n      commands.push(\"capture [stop]\");\n    }\n\n    return (\n      <div className={classNames({ [styles.commandHelp]: true, [styles.commandHelpOnTop]: this.props.onTop })}>\n        {commands.map(\n          c =>\n            (this.props.matchingPrefix === \"\" ||\n              c.split(\" \")[0].startsWith(this.props.matchingPrefix.split(\" \")[0])) && (\n              <div className={styles.entry} key={c}>\n                <div className={styles.command}>/{c}</div>\n                <div>\n                  <FormattedMessage id={`commands.${c.split(\" \")[0]}`} />\n                </div>\n              </div>\n            )\n        )}\n      </div>\n    );\n  }\n}\n","// https://stackoverflow.com/questions/6209161/extract-the-current-dom-and-print-it-as-a-string-with-styles-intact\n//\n// Mapping between tag names and css default values lookup tables. This allows to exclude default values in the result.\nconst defaultStylesByTagName = {};\n\n// Styles inherited from style sheets will not be rendered for elements with these tag names\nconst noStyleTags = {\n  BASE: true,\n  HEAD: true,\n  HTML: true,\n  META: true,\n  NOFRAME: true,\n  NOSCRIPT: true,\n  PARAM: true,\n  SCRIPT: true,\n  STYLE: true,\n  TITLE: true\n};\n\n// This list determines which css default values lookup tables are precomputed at load time\n// Lookup tables for other tag names will be automatically built at runtime if needed\nconst tagNames = [\n  \"A\",\n  \"ABBR\",\n  \"ADDRESS\",\n  \"AREA\",\n  \"ARTICLE\",\n  \"ASIDE\",\n  \"AUDIO\",\n  \"B\",\n  \"BASE\",\n  \"BDI\",\n  \"BDO\",\n  \"BLOCKQUOTE\",\n  \"BODY\",\n  \"BR\",\n  \"BUTTON\",\n  \"CANVAS\",\n  \"CAPTION\",\n  \"CENTER\",\n  \"CITE\",\n  \"CODE\",\n  \"COL\",\n  \"COLGROUP\",\n  \"COMMAND\",\n  \"DATALIST\",\n  \"DD\",\n  \"DEL\",\n  \"DETAILS\",\n  \"DFN\",\n  \"DIV\",\n  \"DL\",\n  \"DT\",\n  \"EM\",\n  \"EMBED\",\n  \"FIELDSET\",\n  \"FIGCAPTION\",\n  \"FIGURE\",\n  \"FONT\",\n  \"FOOTER\",\n  \"FORM\",\n  \"H1\",\n  \"H2\",\n  \"H3\",\n  \"H4\",\n  \"H5\",\n  \"H6\",\n  \"HEAD\",\n  \"HEADER\",\n  \"HGROUP\",\n  \"HR\",\n  \"HTML\",\n  \"I\",\n  \"IFRAME\",\n  \"IMG\",\n  \"INPUT\",\n  \"INS\",\n  \"KBD\",\n  \"KEYGEN\",\n  \"LABEL\",\n  \"LEGEND\",\n  \"LI\",\n  \"LINK\",\n  \"MAP\",\n  \"MARK\",\n  \"MATH\",\n  \"MENU\",\n  \"META\",\n  \"METER\",\n  \"NAV\",\n  \"NOBR\",\n  \"NOSCRIPT\",\n  \"OBJECT\",\n  \"OL\",\n  \"OPTION\",\n  \"OPTGROUP\",\n  \"OUTPUT\",\n  \"P\",\n  \"PARAM\",\n  \"PRE\",\n  \"PROGRESS\",\n  \"Q\",\n  \"RP\",\n  \"RT\",\n  \"RUBY\",\n  \"S\",\n  \"SAMP\",\n  \"SCRIPT\",\n  \"SECTION\",\n  \"SELECT\",\n  \"SMALL\",\n  \"SOURCE\",\n  \"SPAN\",\n  \"STRONG\",\n  \"STYLE\",\n  \"SUB\",\n  \"SUMMARY\",\n  \"SUP\",\n  \"SVG\",\n  \"TABLE\",\n  \"TBODY\",\n  \"TD\",\n  \"TEXTAREA\",\n  \"TFOOT\",\n  \"TH\",\n  \"THEAD\",\n  \"TIME\",\n  \"TITLE\",\n  \"TR\",\n  \"TRACK\",\n  \"U\",\n  \"UL\",\n  \"VAR\",\n  \"VIDEO\",\n  \"WBR\"\n];\n\nfunction computeDefaultStyleByTagName(tagName) {\n  const defaultStyle = {};\n  const element = document.body.appendChild(document.createElement(tagName));\n  const computedStyle = getComputedStyle(element);\n  for (let i = 0; i < computedStyle.length; i++) {\n    defaultStyle[computedStyle[i]] = computedStyle[computedStyle[i]];\n  }\n  document.body.removeChild(element);\n  return defaultStyle;\n}\n\nfunction getDefaultStyleByTagName(tagName) {\n  tagName = tagName.toUpperCase();\n  if (!defaultStylesByTagName[tagName]) {\n    defaultStylesByTagName[tagName] = computeDefaultStyleByTagName(tagName);\n  }\n  return defaultStylesByTagName[tagName];\n}\n\nexport function warmSerializeElement() {\n  for (let i = 0; i < tagNames.length; i++) {\n    if (!noStyleTags[tagNames[i]]) {\n      defaultStylesByTagName[tagNames[i]] = computeDefaultStyleByTagName(tagNames[i]);\n    }\n  }\n}\n\nexport default function serializeElement(el) {\n  if (Object.keys(defaultStylesByTagName).length === 0) {\n    // Precompute the lookup tables.\n    warmSerializeElement();\n  }\n\n  if (el.nodeType !== Node.ELEMENT_NODE) {\n    throw new TypeError();\n  }\n  const cssTexts = [];\n  const elements = el.querySelectorAll(\"*\");\n  for (let i = 0; i < elements.length; i++) {\n    const e = elements[i];\n    if (!noStyleTags[e.tagName]) {\n      const computedStyle = getComputedStyle(e);\n      const defaultStyle = getDefaultStyleByTagName(e.tagName);\n      cssTexts[i] = e.style.cssText;\n      for (let ii = 0; ii < computedStyle.length; ii++) {\n        const cssPropName = computedStyle[ii];\n\n        // Skip non-standard CSS for now, because it overwrites things like color\n        if (cssPropName.startsWith(\"-webkit\")) continue;\n\n        if (computedStyle[cssPropName] !== defaultStyle[cssPropName]) {\n          e.style[cssPropName] = computedStyle[cssPropName];\n        }\n      }\n    }\n  }\n  const result = el.outerHTML;\n  for (let i = 0; i < elements.length; i++) {\n    elements[i].style.cssText = cssTexts[i];\n  }\n  return result;\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\n\nimport rootStyles from \"../assets/stylesheets/ui-root.scss\";\nimport styles from \"../assets/stylesheets/presence-list.scss\";\nimport PhoneImage from \"../assets/images/presence_phone.png\";\nimport DesktopImage from \"../assets/images/presence_desktop.png\";\nimport DiscordImage from \"../assets/images/presence_discord.png\";\nimport CameraImage from \"../assets/images/presence_camera.png\";\nimport HMDImage from \"../assets/images/presence_vr.png\";\nimport maskEmail from \"../utils/mask-email\";\nimport StateLink from \"./state-link.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faUsers } from \"@fortawesome/free-solid-svg-icons/faUsers\";\nimport { faPencilAlt } from \"@fortawesome/free-solid-svg-icons/faPencilAlt\";\nimport { pushHistoryPath, withSlug } from \"../utils/history\";\n\nfunction getPresenceImage(ctx) {\n  if (ctx && ctx.mobile) {\n    return PhoneImage;\n  } else if (ctx && ctx.hmd) {\n    return HMDImage;\n  } else if (ctx && ctx.discord) {\n    return DiscordImage;\n  } else {\n    return DesktopImage;\n  }\n}\n\nexport function navigateToClientInfo(history, clientId) {\n  const currentParams = new URLSearchParams(history.location.search);\n\n  if (process.env.RETICULUM_SERVER && document.location.host !== process.env.RETICULUM_SERVER) {\n    currentParams.set(\"client_id\", clientId);\n    pushHistoryPath(history, history.location.pathname, currentParams.toString());\n  } else {\n    pushHistoryPath(history, withSlug(history.location, `/clients/${clientId}`), currentParams.toString());\n  }\n}\n\nexport default class PresenceList extends Component {\n  static propTypes = {\n    presences: PropTypes.object,\n    history: PropTypes.object,\n    sessionId: PropTypes.string,\n    signedIn: PropTypes.bool,\n    email: PropTypes.string,\n    onSignIn: PropTypes.func,\n    onSignOut: PropTypes.func\n  };\n\n  state = {\n    expanded: false\n  };\n\n  navigateToClientInfo = clientId => {\n    navigateToClientInfo(this.props.history, clientId);\n  };\n\n  domForPresence = ([sessionId, data]) => {\n    const meta = data.metas[data.metas.length - 1];\n    const context = meta.context;\n    const profile = meta.profile;\n    const recording = meta.streaming || meta.recording;\n    const image = recording ? CameraImage : getPresenceImage(context);\n    const isBot = context && context.discord;\n    const isOwner = meta.roles && meta.roles.owner;\n    const badge = isOwner && (\n      <span className={styles.moderatorBadge} title=\"Moderator\">\n        &#x2605;\n      </span>\n    );\n\n    return (\n      <WithHoverSound key={sessionId}>\n        <div className={styles.row}>\n          <div className={styles.icon}>\n            <img src={image} />\n          </div>\n          <div\n            className={classNames({\n              [styles.listItem]: true\n            })}\n          >\n            {sessionId === this.props.sessionId ? (\n              <StateLink className={styles.self} stateKey=\"overlay\" stateValue=\"profile\" history={this.props.history}>\n                {profile && profile.displayName}\n                {badge}\n                <i>\n                  <FontAwesomeIcon icon={faPencilAlt} />\n                </i>\n              </StateLink>\n            ) : (\n              <div>\n                {!isBot ? (\n                  <button className={styles.clientLink} onClick={() => this.navigateToClientInfo(sessionId)}>\n                    {profile && profile.displayName}\n                  </button>\n                ) : (\n                  <span>{profile && profile.displayName}</span>\n                )}\n                {badge}\n              </div>\n            )}\n          </div>\n          <div className={styles.presence}>\n            <FormattedMessage id={`presence.in_${meta.presence}`} />\n          </div>\n        </div>\n      </WithHoverSound>\n    );\n  };\n\n  componentDidMount() {\n    document.querySelector(\".a-canvas\").addEventListener(\"mouseup\", () => {\n      if (this.state.expanded) {\n        this.setState({ expanded: false });\n      }\n    });\n  }\n\n  renderExpandedList() {\n    return (\n      <div className={styles.presenceList}>\n        <div className={styles.attachPoint} />\n        <div className={styles.contents}>\n          <div className={styles.rows}>\n            {Object.entries(this.props.presences || {})\n              .filter(([k]) => k === this.props.sessionId)\n              .map(this.domForPresence)}\n            {Object.entries(this.props.presences || {})\n              .filter(([k]) => k !== this.props.sessionId)\n              .map(this.domForPresence)}\n          </div>\n          <div className={styles.signIn}>\n            {this.props.signedIn ? (\n              <div>\n                <span>\n                  <FormattedMessage id=\"sign-in.as\" /> {maskEmail(this.props.email)}\n                </span>{\" \"}\n                <a onClick={this.props.onSignOut}>\n                  <FormattedMessage id=\"sign-in.out\" />\n                </a>\n              </div>\n            ) : (\n              <a onClick={this.props.onSignIn}>\n                <FormattedMessage id=\"sign-in.in\" />\n              </a>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const occupantCount = this.props.presences ? Object.entries(this.props.presences).length : 0;\n    return (\n      <div>\n        <div\n          onClick={() => this.setState({ expanded: !this.state.expanded })}\n          className={classNames({\n            [rootStyles.presenceInfo]: true,\n            [rootStyles.presenceInfoSelected]: this.state.expanded\n          })}\n        >\n          <FontAwesomeIcon icon={faUsers} />\n          <span className={rootStyles.occupantCount}>{occupantCount}</span>\n        </div>\n        {this.state.expanded && this.renderExpandedList()}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\nimport Linkify from \"react-linkify\";\nimport { toArray as toEmojis } from \"react-emoji-render\";\nimport serializeElement from \"../utils/serialize-element\";\nimport { navigateToClientInfo } from \"./presence-list\";\n\nconst messageCanvas = document.createElement(\"canvas\");\nconst emojiRegex = /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|[\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|[\\ud83c[\\ude32-\\ude3a]|[\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/;\nconst urlRegex = /^https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_+.~#?&//=]*)$/;\nconst textureLoader = new THREE.TextureLoader();\n\n// Hacky word wrapping, needed because the SVG conversion doesn't properly deal\n// with wrapping in Firefox for some reason. (The CSS white-space is set to pre)\nconst wordWrap = body => {\n  const maxCharsPerLine = 40;\n  const words = body.split(\" \");\n  const outWords = [];\n  let c = 0;\n\n  for (let i = 0; i < words.length; i++) {\n    const word = words[i];\n\n    if (word.startsWith(\":\") && word.endsWith(\":\")) {\n      c++;\n    } else {\n      c += word.length;\n    }\n\n    outWords.push(word);\n\n    if (c >= maxCharsPerLine) {\n      c = 0;\n      outWords.push(\"\\n\");\n    }\n  }\n\n  return outWords.join(\" \");\n};\n\nconst messageBodyDom = (body, from, fromSessionId, includeFromLink, history) => {\n  // Support wrapping text in ` to get monospace, and multiline.\n  const multiLine = body.split(\"\\n\").length > 1;\n  const wrapStyle = multiLine ? styles.messageWrapMulti : styles.messageWrap;\n  const mono = body.startsWith(\"`\") && body.endsWith(\"`\");\n  const messageBodyClasses = {\n    [styles.messageBody]: true,\n    [styles.messageBodyMulti]: multiLine,\n    [styles.messageBodyMono]: mono\n  };\n  const includeClientLink = includeFromLink && fromSessionId && history && NAF.clientId !== fromSessionId;\n  const onFromClick = includeClientLink ? () => navigateToClientInfo(history, fromSessionId) : () => {};\n\n  if (!multiLine) {\n    body = wordWrap(body);\n  }\n\n  const cleanedBody = (mono ? body.substring(1, body.length - 1) : body).trim();\n\n  return (\n    <div className={wrapStyle}>\n      {from && (\n        <div\n          onClick={onFromClick}\n          className={classNames({ [styles.messageSource]: true, [styles.messageSourceLink]: includeClientLink })}\n        >\n          {from}:\n        </div>\n      )}\n      <div className={classNames(messageBodyClasses)}>\n        <Linkify properties={{ target: \"_blank\", rel: \"noopener referrer\" }}>{toEmojis(cleanedBody)}</Linkify>\n      </div>\n    </div>\n  );\n};\n\nfunction renderChatMessage(body, from, allowEmojiRender, lowResolution) {\n  const isOneLine = body.split(\"\\n\").length === 1;\n  const context = messageCanvas.getContext(\"2d\");\n  const emoji = toEmojis(body);\n  const isEmoji =\n    allowEmojiRender &&\n    emoji.length === 1 &&\n    emoji[0].props &&\n    emoji[0].props.children.match &&\n    emoji[0].props.children.match(emojiRegex);\n\n  const el = document.createElement(\"div\");\n  el.setAttribute(\"xmlns\", \"http://www.w3.org/1999/xhtml\");\n  el.setAttribute(\"class\", `${styles.presenceLog} ${styles.presenceLogSpawn}`);\n\n  // The element is added to the DOM in order to have layout compute the width & height,\n  // and then it is removed after being rendered.\n  document.body.appendChild(el);\n\n  const entryDom = (\n    <div\n      className={classNames({\n        [styles.presenceLogEntry]: !isEmoji,\n        [styles.presenceLogEntryOneLine]: !isEmoji && isOneLine,\n        [styles.presenceLogEmoji]: isEmoji\n      })}\n    >\n      {messageBodyDom(body, from)}\n    </div>\n  );\n\n  return new Promise(resolve => {\n    ReactDOM.render(entryDom, el, () => {\n      // Scale by 12x\n      let objectScale = \"8.33%\";\n      let scale = 12;\n\n      if (lowResolution) {\n        // In low res, scale by 4x\n        objectScale = \"25%\";\n        scale = 4;\n      }\n\n      messageCanvas.width = el.offsetWidth * (scale + 0.1);\n      messageCanvas.height = el.offsetHeight * (scale + 0.1);\n\n      const xhtml = encodeURIComponent(`\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${messageCanvas.width}\" height=\"${messageCanvas.height}\">\n            <foreignObject width=\"${objectScale}\" height=\"${objectScale}\" style=\"transform: scale(${scale});\">\n              ${serializeElement(el)}\n            </foreignObject>\n          </svg>\n    `);\n      const img = new Image();\n\n      img.onload = async () => {\n        context.drawImage(img, 0, 0);\n        const blob = await new Promise(resolve => messageCanvas.toBlob(resolve));\n        ReactDOM.unmountComponentAtNode(el);\n        el.remove();\n        resolve(blob);\n      };\n\n      img.src = \"data:image/svg+xml,\" + xhtml;\n    });\n  });\n}\n\nexport async function createInWorldLogMessage({ name, type, body }) {\n  if (type !== \"chat\") return;\n\n  const lowResolution = AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR();\n  const blob = await renderChatMessage(body, name, false, lowResolution);\n  const entity = document.createElement(\"a-entity\");\n  const meshEntity = document.createElement(\"a-entity\");\n\n  document.querySelector(\"a-scene\").appendChild(entity);\n\n  entity.appendChild(meshEntity);\n  entity.setAttribute(\"follow-in-fov\", {\n    target: \"#player-camera\",\n    offset: { x: 0, y: 0.0, z: -0.8 }\n  });\n\n  const blobUrl = URL.createObjectURL(blob);\n\n  meshEntity.setAttribute(\"animation__float\", {\n    property: \"position\",\n    dur: 10000,\n    from: { x: 0, y: 0, z: 0 },\n    to: { x: 0, y: 0.05, z: -0.05 },\n    easing: \"easeOutQuad\"\n  });\n\n  entity.setAttribute(\"animation__spawn\", {\n    property: \"scale\",\n    dur: 200,\n    from: { x: 0.1, y: 0.1, z: 0.1 },\n    to: { x: 1, y: 1, z: 1 },\n    easing: \"easeOutElastic\"\n  });\n\n  meshEntity.setAttribute(\"animation__opacity\", {\n    property: \"meshMaterial.opacity\",\n    isRawProperty: true,\n    delay: 3000,\n    dur: 8000,\n    from: 1.0,\n    to: 0.0,\n    easing: \"easeInQuad\"\n  });\n\n  meshEntity.addEventListener(\"animationcomplete__opacity\", () => {\n    entity.parentNode.removeChild(entity);\n  });\n\n  textureLoader.load(blobUrl, texture => {\n    const material = new THREE.MeshBasicMaterial();\n    material.transparent = true;\n    material.map = texture;\n    material.generateMipmaps = false;\n    material.needsUpdate = true;\n\n    const geometry = new THREE.PlaneBufferGeometry(1, 1, 1, 1, texture.flipY);\n    const mesh = new THREE.Mesh(geometry, material);\n    meshEntity.setObject3D(\"mesh\", mesh);\n    meshEntity.meshMaterial = material;\n    const scaleFactor = 4000.0 / (lowResolution ? 3.0 : 1.0);\n    meshEntity.object3DMap.mesh.scale.set(texture.image.width / scaleFactor, texture.image.height / scaleFactor, 1);\n  });\n}\n\nexport async function spawnChatMessage(body, from) {\n  if (body.length === 0) return;\n\n  if (body.match(urlRegex)) {\n    document.querySelector(\"a-scene\").emit(\"add_media\", body);\n    return;\n  }\n\n  const blob = await renderChatMessage(body, from, true, false);\n  document.querySelector(\"a-scene\").emit(\"add_media\", new File([blob], \"message.png\", { type: \"image/png\" }));\n}\n\nexport default function ChatMessage(props) {\n  return (\n    <div className={props.className}>\n      {props.maySpawn && (\n        <button\n          className={classNames(styles.iconButton, styles.spawnMessage)}\n          onClick={() => spawnChatMessage(props.body)}\n        />\n      )}\n      {messageBodyDom(props.body, props.name, props.sessionId, props.includeFromLink, props.history)}\n    </div>\n  );\n}\n\nChatMessage.propTypes = {\n  name: PropTypes.string,\n  maySpawn: PropTypes.bool,\n  body: PropTypes.string,\n  sessionId: PropTypes.string,\n  history: PropTypes.object,\n  className: PropTypes.string,\n  includeFromLink: PropTypes.bool\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"../assets/stylesheets/message-entry.scss\";\nimport ChatCommandHelp from \"./chat-command-help\";\nimport { faPaperPlane } from \"@fortawesome/free-solid-svg-icons/faPaperPlane\";\nimport { faCamera } from \"@fortawesome/free-solid-svg-icons/faCamera\";\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons/faPlus\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { spawnChatMessage } from \"./chat-message\";\nimport { pushHistoryState } from \"../utils/history\";\n\nconst isMobile = AFRAME.utils.device.isMobile();\n\nclass InWorldChatBox extends Component {\n  static propTypes = {\n    discordBridges: PropTypes.array,\n    onSendMessage: PropTypes.func,\n    onObjectCreated: PropTypes.func,\n    history: PropTypes.object,\n    enableSpawning: PropTypes.bool\n  };\n\n  state = {\n    pendingMessage: \"\"\n  };\n\n  sendMessage = e => {\n    e.preventDefault();\n    if (this.props.onSendMessage) {\n      this.props.onSendMessage(this.state.pendingMessage);\n    }\n    this.setState({ pendingMessage: \"\" });\n  };\n\n  render() {\n    const textRows = this.state.pendingMessage.split(\"\\n\").length;\n    const pendingMessageTextareaHeight = textRows * 28 + \"px\";\n    const pendingMessageFieldHeight = textRows * 28 + 20 + \"px\";\n    const discordSnippet = this.props.discordBridges.map(ch => \"#\" + ch).join(\", \");\n\n    return (\n      <form onSubmit={this.sendMessage}>\n        <div\n          className={classNames({ [styles.messageEntryInRoom]: true, [styles.messageEntryOnMobile]: isMobile })}\n          style={{ height: pendingMessageFieldHeight }}\n        >\n          {this.state.pendingMessage.startsWith(\"/\") && (\n            <ChatCommandHelp matchingPrefix={this.state.pendingMessage.substring(1)} />\n          )}\n          <input\n            id=\"message-entry-media-input\"\n            type=\"file\"\n            style={{ display: \"none\" }}\n            accept={isMobile ? \"image/*\" : \"*\"}\n            multiple\n            onChange={e => {\n              if (this.props.onObjectCreated) {\n                for (const file of e.target.files) {\n                  this.props.onObjectCreated(file);\n                }\n              }\n            }}\n          />\n          {this.props.enableSpawning && (\n            <label\n              htmlFor=\"message-entry-media-input\"\n              title={\"Upload\"}\n              className={classNames([\n                styles.messageEntryButton,\n                styles.messageEntryButtonInRoom,\n                styles.messageEntryUpload\n              ])}\n            >\n              <i>\n                <FontAwesomeIcon icon={isMobile ? faCamera : faPlus} />\n              </i>\n            </label>\n          )}\n          <textarea\n            style={{ height: pendingMessageTextareaHeight }}\n            className={classNames([\n              styles.messageEntryInput,\n              styles.messageEntryInputInRoom,\n              \"chat-focus-target\",\n              !this.props.enableSpawning && styles.messageEntryInputNoSpawn\n            ])}\n            value={this.state.pendingMessage}\n            rows={textRows}\n            onFocus={e => {\n              handleTextFieldFocus(e.target);\n            }}\n            onBlur={() => {\n              handleTextFieldBlur();\n            }}\n            onChange={e => {\n              e.stopPropagation();\n              this.setState({ pendingMessage: e.target.value });\n            }}\n            onKeyDown={e => {\n              if (e.key === \"Enter\" && !e.ctrlKey && !e.shiftKey) {\n                this.sendMessage(e);\n              } else if (e.key === \"Enter\" && e.ctrlKey) {\n                spawnChatMessage(e.target.value);\n                this.setState({ pendingMessage: \"\" });\n                e.target.blur();\n              } else if (e.key === \"Escape\") {\n                e.target.blur();\n              }\n            }}\n            placeholder={this.props.discordBridges.length ? `Send to room and ${discordSnippet}...` : \"Send to room...\"}\n          />\n          {this.props.enableSpawning && (\n            <button\n              className={classNames([styles.messageEntrySpawn])}\n              onClick={() => {\n                if (this.state.pendingMessage.length > 0) {\n                  spawnChatMessage(this.state.pendingMessage);\n                  this.setState({ pendingMessage: \"\" });\n                } else {\n                  pushHistoryState(this.props.history, \"modal\", \"create\");\n                }\n              }}\n            />\n          )}\n          <button\n            type=\"submit\"\n            className={classNames([\n              styles.messageEntryButton,\n              styles.messageEntryButtonInRoom,\n              styles.messageEntrySubmit\n            ])}\n          >\n            <i>\n              <FontAwesomeIcon icon={faPaperPlane} />\n            </i>\n          </button>\n        </div>\n      </form>\n    );\n  }\n}\n\nexport default InWorldChatBox;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport { fetchReticulumAuthenticated } from \"../utils/phoenix-utils\";\nimport { upload } from \"../utils/media-utils\";\nimport classNames from \"classnames\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport AvatarPreview from \"./avatar-preview\";\nimport styles from \"../assets/stylesheets/avatar-editor.scss\";\n\nconst AVATARS_API = \"/api/v1/avatars\";\n\nexport default class AvatarEditor extends Component {\n  static propTypes = {\n    avatarId: PropTypes.string,\n    onSignIn: PropTypes.func,\n    onSave: PropTypes.func,\n    onClose: PropTypes.func,\n    signedIn: PropTypes.bool,\n    hideDelete: PropTypes.bool,\n    debug: PropTypes.bool,\n    className: PropTypes.string\n  };\n\n  state = {\n    avatar: { name: \"My Avatar\", parent_avatar_listing_id: \"basebot\", files: {} },\n    previewGltfUrl: null\n  };\n\n  constructor(props) {\n    super(props);\n    // Blank avatar, used to create base avatar\n    // this.state = { avatar: { name: \"Base bot avatar\", files: {} } };\n\n    this.inputFiles = {};\n  }\n\n  componentDidMount = async () => {\n    if (this.props.avatarId) {\n      const avatar = await this.fetchAvatar(this.props.avatarId);\n      avatar.creatorAttribution = (avatar.attributions && avatar.attributions.creator) || \"\";\n      Object.assign(this.inputFiles, avatar.files);\n      this.setState({ avatar, previewGltfUrl: avatar.base_gltf_url });\n    } else {\n      const { base_gltf_url } = await this.fetchAvatar(\"basebot\");\n      this.setState({ previewGltfUrl: base_gltf_url });\n    }\n  };\n\n  fetchAvatar = avatarId => {\n    return fetchReticulumAuthenticated(`${AVATARS_API}/${avatarId}`).then(({ avatars }) => avatars[0]);\n  };\n\n  createOrUpdateAvatar = avatar => {\n    return fetchReticulumAuthenticated(\n      avatar.avatar_id ? `${AVATARS_API}/${avatar.avatar_id}` : AVATARS_API,\n      avatar.avatar_id ? \"PUT\" : \"POST\",\n      { avatar }\n    ).then(({ avatars }) => avatars[0]);\n  };\n\n  uploadAvatar = async e => {\n    e.preventDefault();\n\n    if (this.inputFiles.glb && this.inputFiles.glb instanceof File) {\n      const gltfLoader = new THREE.GLTFLoader();\n      const gltfUrl = URL.createObjectURL(this.inputFiles.glb);\n      const onProgress = console.log;\n      const parser = await new Promise((resolve, reject) =>\n        gltfLoader.createParser(gltfUrl, resolve, onProgress, reject)\n      );\n      URL.revokeObjectURL(gltfUrl);\n\n      const { content, body } = parser.extensions.KHR_binary_glTF;\n\n      // Inject hubs components on upload. Used to create base avatar\n      // const gltf = parser.json;\n      // Object.assign(gltf.scenes[0], {\n      //   extensions: {\n      //     MOZ_hubs_components: {\n      //       \"loop-animation\": {\n      //         clip: \"idle_eyes\"\n      //       }\n      //     }\n      //   }\n      // });\n      // Object.assign(gltf.nodes.find(n => n.name === \"Head\"), {\n      //   extensions: {\n      //     MOZ_hubs_components: {\n      //       \"scale-audio-feedback\": \"\"\n      //     }\n      //   }\n      // });\n      // content = JSON.stringify(gltf);\n\n      this.inputFiles.gltf = new File([content], \"file.gltf\", {\n        type: \"model/gltf\"\n      });\n      this.inputFiles.bin = new File([body], \"file.bin\", {\n        type: \"application/octet-stream\"\n      });\n    }\n\n    this.inputFiles.thumbnail = new File([await this.preview.getWrappedInstance().snapshot()], \"thumbnail.png\", {\n      type: \"image/png\"\n    });\n\n    const filesToUpload = [\"gltf\", \"bin\", \"base_map\", \"emissive_map\", \"normal_map\", \"orm_map\", \"thumbnail\"].filter(\n      k => this.inputFiles[k] === null || this.inputFiles[k] instanceof File\n    );\n\n    this.setState({ uploading: true });\n\n    const fileUploads = await Promise.all(filesToUpload.map(f => this.inputFiles[f] && upload(this.inputFiles[f])));\n    const avatar = {\n      ...this.state.avatar,\n      attributions: {\n        creator: this.state.avatar.creatorAttribution\n      },\n      files: fileUploads\n        .map((resp, i) => [filesToUpload[i], resp && [resp.file_id, resp.meta.access_token, resp.meta.promotion_token]])\n        .reduce((o, [k, v]) => ({ ...o, [k]: v }), {})\n    };\n\n    await this.createOrUpdateAvatar(avatar);\n\n    this.setState({ uploading: false });\n\n    if (this.props.onSave) this.props.onSave();\n  };\n\n  deleteAvatar = async e => {\n    e.preventDefault();\n    await fetchReticulumAuthenticated(`${AVATARS_API}/${this.state.avatar.avatar_id}`, \"DELETE\");\n    if (this.props.onSave) this.props.onSave();\n  };\n\n  fileField = (name, label, accept, disabled = false, title) => (\n    <div className=\"file-input-row\" key={name} title={title}>\n      <label htmlFor={`avatar-file_${name}`}>\n        <div className=\"img-box\" />\n        <span>{label}</span>\n      </label>\n      <input\n        id={`avatar-file_${name}`}\n        type=\"file\"\n        accept={accept}\n        disabled={disabled}\n        onChange={e => {\n          this.inputFiles[name] = e.target.files[0];\n          e.target.value = null;\n        }}\n      />\n      {this.state.avatar.files[name] && (\n        <a\n          onClick={() => {\n            this.inputFiles[name] = null;\n          }}\n        >\n          <i>\n            <FontAwesomeIcon icon={faTimes} />\n          </i>\n        </a>\n      )}\n    </div>\n  );\n\n  mapField = (name, label, accept, disabled = false, title) => (\n    <div className=\"file-input-row\" key={name} title={title}>\n      <label htmlFor={`avatar-file_${name}`}>\n        <div className=\"img-box\">{this.state.avatar.files[name] && <img src={this.state.avatar.files[name]} />}</div>\n        <span>{label}</span>\n      </label>\n      <input\n        id={`avatar-file_${name}`}\n        type=\"file\"\n        accept={accept}\n        disabled={disabled}\n        onChange={e => {\n          const file = e.target.files[0];\n          e.target.value = null;\n          this.inputFiles[name] = file;\n          URL.revokeObjectURL(this.state.avatar.files[name]);\n          this.setState({\n            avatar: {\n              ...this.state.avatar,\n              files: {\n                ...this.state.avatar.files,\n                [name]: URL.createObjectURL(file)\n              }\n            }\n          });\n        }}\n      />\n      {this.state.avatar.files[name] && (\n        <a\n          onClick={() => {\n            this.inputFiles[name] = null;\n            URL.revokeObjectURL(this.state.avatar.files[name]);\n            this.setState({\n              avatar: {\n                ...this.state.avatar,\n                files: {\n                  ...this.state.avatar.files,\n                  [name]: null\n                }\n              }\n            });\n          }}\n        >\n          <i>\n            <FontAwesomeIcon icon={faTimes} />\n          </i>\n        </a>\n      )}\n    </div>\n  );\n\n  textField = (name, placeholder, disabled, required) => (\n    <div>\n      <input\n        id={`avatar-${name}`}\n        type=\"text\"\n        disabled={disabled}\n        required={required}\n        placeholder={placeholder}\n        className=\"text-field\"\n        value={this.state.avatar[name] || \"\"}\n        onChange={e => this.setState({ avatar: { ...this.state.avatar, [name]: e.target.value } })}\n      />\n    </div>\n  );\n\n  textarea = (name, placeholder, disabled) => (\n    <div>\n      <textarea\n        id={`avatar-${name}`}\n        disabled={disabled}\n        placeholder={placeholder}\n        className=\"textarea\"\n        value={this.state.avatar[name] || \"\"}\n        onChange={e => this.setState({ avatar: { ...this.state.avatar, [name]: e.target.value } })}\n      />\n    </div>\n  );\n\n  checkbox = (name, children, disabled) => (\n    <div className=\"checkbox-container\">\n      <input\n        id={`avatar-${name}`}\n        type=\"checkbox\"\n        className=\"checkbox\"\n        disabled={disabled}\n        checked={!!this.state.avatar[name]}\n        onChange={e => this.setState({ avatar: { ...this.state.avatar, [name]: e.target.checked } })}\n      />\n      <label htmlFor={`#avatar-${name}`}>{children}</label>\n    </div>\n  );\n\n  render() {\n    const { debug } = this.props;\n    return (\n      <div className={classNames(styles.avatarEditor, this.props.className)}>\n        {this.props.onClose && (\n          <a className=\"close-button\" onClick={this.props.onClose}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </a>\n        )}\n        {this.props.signedIn ? (\n          <form onSubmit={this.uploadAvatar} className=\"center\">\n            <div className=\"split\">\n              <div className=\"form-body\">\n                {debug && this.textField(\"avatar_id\", \"Avatar ID\", true)}\n                {debug && this.textField(\"parent_avatar_id\", \"Parent Avatar ID\")}\n                {debug && this.textField(\"parent_avatar_listing_id\", \"Parent Avatar Listing ID\")}\n                {this.textField(\"name\", \"Name\", false, true)}\n                {debug && this.textarea(\"description\", \"Description\")}\n                {debug && this.fileField(\"glb\", \"Avatar GLB\", \"model/gltf+binary,.glb\")}\n\n                {this.mapField(\"base_map\", \"Base Map\", \"image/*\")}\n                {this.mapField(\"emissive_map\", \"Emissive Map\", \"image/*\")}\n                {this.mapField(\"normal_map\", \"Normal Map\", \"image/*\")}\n\n                {this.mapField(\"orm_map\", \"ORM Map\", \"image/*\", false, \"Occlussion (r), Roughness (g), Metallic (b)\")}\n\n                <hr />\n\n                {this.checkbox(\n                  \"allow_promotion\",\n                  <span>\n                    Allow{\" \"}\n                    <a\n                      href=\"https://github.com/mozilla/hubs/blob/master/PROMOTION.md\"\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      Promotion\n                    </a>\n                  </span>\n                )}\n                {this.checkbox(\n                  \"allow_remixing\",\n                  <span>\n                    Allow{\" \"}\n                    <a\n                      href=\"https://github.com/mozilla/hubs/blob/master/REMIXING.md\"\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      Remixing\n                    </a>{\" \"}\n                    <span className=\"license\">\n                      (under{\" \"}\n                      <a href=\"https://creativecommons.org/licenses/by/3.0/\" target=\"_blank\" rel=\"noopener noreferrer\">\n                        CC-BY 3.0\n                      </a>)\n                    </span>\n                  </span>\n                )}\n                {this.textField(\"creatorAttribution\", \"Attribution (optional)\", false, false)}\n\n                {/* {this.mapField(\"ao_map\", \"AO Map\", \"images/\\*\", true)} */}\n                {/* {this.mapField(\"metallic_map\", \"Metallic Map\", \"image/\\*\", true)} */}\n                {/* {this.mapField(\"roughness_map\", \"Roughness Map\", \"image/\\*\", true)} */}\n              </div>\n              <AvatarPreview\n                className=\"preview\"\n                avatarGltfUrl={this.state.previewGltfUrl}\n                {...this.inputFiles}\n                ref={p => (this.preview = p)}\n              />\n            </div>\n            <div className=\"info\">\n              <p>\n                <FormattedMessage id=\"avatar-editor.info\" />\n                <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/j-conrad/hubs-avatar-pipelines\">\n                  <FormattedMessage id=\"avatar-editor.info-link\" />\n                </a>\n              </p>\n            </div>\n            <div>\n              <input\n                disabled={this.state.uploading}\n                className=\"form-submit\"\n                type=\"submit\"\n                value={this.state.uploading ? \"Uploading...\" : \"Save\"}\n              />\n            </div>\n            {!this.props.hideDelete && (\n              <div className=\"delete-avatar\">\n                {this.state.confirmDelete ? (\n                  <span>\n                    are you sure? <a onClick={this.deleteAvatar}>yes</a> /{\" \"}\n                    <a onClick={() => this.setState({ confirmDelete: false })}>no</a>\n                  </span>\n                ) : (\n                  <a onClick={() => this.setState({ confirmDelete: true })}>delete avatar</a>\n                )}\n              </div>\n            )}\n          </form>\n        ) : (\n          <a onClick={this.props.onSignIn}>\n            <FormattedMessage id=\"sign-in.in\" />\n          </a>\n        )}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport MovingAverage from \"moving-average\";\n\nexport default class MicLevelWidget extends Component {\n  static propTypes = {\n    hasAudioTrack: PropTypes.bool,\n    muteOnEntry: PropTypes.bool,\n    scene: PropTypes.object\n  };\n\n  state = {\n    volume: 0\n  };\n\n  componentDidMount() {\n    this.startAnalyser();\n  }\n\n  componentWillUnmount() {\n    this.stopAnalyser();\n  }\n\n  stopAnalyser() {\n    if (this.micUpdateInterval != null) {\n      clearInterval(this.micUpdateInterval);\n    }\n  }\n\n  startAnalyser() {\n    if (this.micUpdateInterval) {\n      clearInterval(this.micUpdateInterval);\n    }\n    const micLevelMovingAverage = MovingAverage(100);\n    let max = 0;\n    this.micUpdateInterval = setInterval(() => {\n      const analyser = this.props.scene.systems[\"local-audio-analyser\"];\n      max = Math.max(analyser.volume, max);\n      // We use a moving average to smooth out the visual animation or else it would twitch too fast for\n      // the css renderer to keep up.\n      micLevelMovingAverage.push(Date.now(), analyser.volume);\n      const average = micLevelMovingAverage.movingAverage();\n      const volume = max === 0 ? 0 : average / max;\n      if (Math.abs(this.state.volume - volume) > 0.05) {\n        this.setState({ volume });\n      }\n    }, 50);\n  }\n\n  render() {\n    const maxLevelHeight = 111;\n    const micClip = {\n      clip: `rect(${maxLevelHeight - Math.floor(this.state.volume * maxLevelHeight)}px, 111px, 111px, 0px)`\n    };\n\n    return (\n      <div className=\"audio-setup-panel__levels__icon\">\n        <img\n          src=\"../assets/images/level_background.png\"\n          srcSet=\"../assets/images/level_background@2x.png 2x\"\n          className=\"audio-setup-panel__levels__icon-part\"\n        />\n        {!this.props.muteOnEntry && (\n          <img\n            src=\"../assets/images/level_fill.png\"\n            srcSet=\"../assets/images/level_fill@2x.png 2x\"\n            className=\"audio-setup-panel__levels__icon-part\"\n            style={micClip}\n          />\n        )}\n        {this.props.hasAudioTrack && !this.props.muteOnEntry ? (\n          <img\n            src=\"../assets/images/mic_level.png\"\n            srcSet=\"../assets/images/mic_level@2x.png 2x\"\n            className=\"audio-setup-panel__levels__icon-part\"\n          />\n        ) : (\n          <img\n            src=\"../assets/images/mic_denied.png\"\n            srcSet=\"../assets/images/mic_denied@2x.png 2x\"\n            className=\"audio-setup-panel__levels__icon-part\"\n          />\n        )}\n        {this.props.hasAudioTrack &&\n          !this.props.muteOnEntry && (\n            <div className=\"audio-setup-panel__levels__test_label\">\n              <FormattedMessage id=\"audio.talk_to_test\" />\n            </div>\n          )}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nimport webmTone from \"../assets/sfx/tone.webm\";\nimport mp3Tone from \"../assets/sfx/tone.mp3\";\nimport oggTone from \"../assets/sfx/tone.ogg\";\nimport wavTone from \"../assets/sfx/tone.wav\";\n\nexport default class OutputLevelWidget extends Component {\n  state = {\n    tonePlaying: false\n  };\n\n  constructor(props) {\n    super(props);\n    this.playTestTone = this.playTestTone.bind(this);\n    this.toneClip = document.createElement(\"audio\");\n    if (this.toneClip.canPlayType(\"audio/webm\")) {\n      this.toneClip.src = webmTone;\n    } else if (this.toneClip.canPlayType(\"audio/mpeg\")) {\n      this.toneClip.src = mp3Tone;\n    } else if (this.toneClip.canPlayType(\"audio/ogg\")) {\n      this.toneClip.src = oggTone;\n    } else {\n      this.toneClip.src = wavTone;\n    }\n  }\n\n  componentWillUnmount() {\n    this.toneClip.pause();\n    this.toneClip.currentTime = 0;\n    if (this.testToneTimeout != null) {\n      clearTimeout(this.testToneTimeout);\n    }\n  }\n\n  playTestTone() {\n    if (this.testToneTimeout != null) {\n      clearTimeout(this.testToneTimeout);\n    }\n    this.toneClip.currentTime = 0;\n    this.toneClip.play();\n    this.setState({ tonePlaying: true });\n    this.testToneTimeout = setTimeout(() => {\n      this.setState({ tonePlaying: false });\n    }, 1393);\n  }\n\n  render() {\n    const maxLevelHeight = 111;\n    const speakerClip = { clip: `rect(${this.state.tonePlaying ? 0 : maxLevelHeight}px, 111px, 111px, 0px)` };\n    return (\n      <WithHoverSound>\n        <div className=\"audio-setup-panel__levels__icon_clickable\" onClick={this.playTestTone}>\n          <img\n            src=\"../assets/images/level_action_background.png\"\n            srcSet=\"../assets/images/level_action_background@2x.png 2x\"\n            className=\"audio-setup-panel__levels__icon-part\"\n          />\n          <img\n            src=\"../assets/images/level_action_fill.png\"\n            srcSet=\"../assets/images/level_action_fill@2x.png 2x\"\n            className=\"audio-setup-panel__levels__icon-part\"\n            style={speakerClip}\n          />\n          <img\n            src=\"../assets/images/speaker_level.png\"\n            srcSet=\"../assets/images/speaker_level@2x.png 2x\"\n            className=\"audio-setup-panel__levels__icon-part\"\n          />\n          <div className=\"audio-setup-panel__levels__test_label\">\n            <FormattedMessage id=\"audio.click_to_test\" />\n          </div>\n        </div>\n      </WithHoverSound>\n    );\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\n\nimport { share } from \"../utils/share\";\nimport { getLandingPageForPhoto } from \"../utils/phoenix-utils\";\n\nexport default function PhotoMessage({ name, body: { src: url }, className, maySpawn, hubId }) {\n  const landingPageUrl = getLandingPageForPhoto(url);\n  const onShareClicked = share.bind(null, {\n    url: landingPageUrl,\n    title: `Taken in #hubs, join me at https://hub.link/${hubId}`\n  });\n  return (\n    <div className={className}>\n      {maySpawn && <button className={classNames(styles.iconButton, styles.share)} onClick={onShareClicked} />}\n      <div className={styles.mediaBody}>\n        <span>\n          <b>{name}</b>\n        </span>\n        <span>\n          {\"took a \"}\n          <b>\n            <a href={landingPageUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n              photo\n            </a>\n          </b>.\n        </span>\n      </div>\n      <a href={landingPageUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n        <img src={url} />\n      </a>\n    </div>\n  );\n}\nPhotoMessage.propTypes = {\n  name: PropTypes.string,\n  maySpawn: PropTypes.bool,\n  body: PropTypes.object,\n  className: PropTypes.string,\n  hubId: PropTypes.string\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\n\nimport { share } from \"../utils/share\";\n\nexport default function VideoMessage({ name, body: { src: url }, className, maySpawn, hubId }) {\n  const onShareClicked = share.bind(null, {\n    url: url,\n    title: `Taken in #hubs, join me at https://hub.link/${hubId}`\n  });\n  return (\n    <div className={className}>\n      {maySpawn && <button className={classNames(styles.iconButton, styles.share)} onClick={onShareClicked} />}\n      <div className={styles.mediaBody}>\n        <span>\n          <b>{name}</b>\n        </span>\n        <span>\n          {\"took a \"}\n          <b>\n            <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n              video\n            </a>\n          </b>.\n        </span>\n      </div>\n    </div>\n  );\n}\nVideoMessage.propTypes = {\n  name: PropTypes.string,\n  maySpawn: PropTypes.bool,\n  body: PropTypes.object,\n  className: PropTypes.string,\n  hubId: PropTypes.string\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\nimport { proxiedUrlFor } from \"../utils/media-url-utils\";\n\nfunction spawnImage(url) {\n  document.querySelector(\"a-scene\").emit(\"add_media\", url);\n}\n\nexport default function ImageMessage({ name, body: { src: url }, className, maySpawn }) {\n  return (\n    <div className={className}>\n      {maySpawn && (\n        <button className={classNames(styles.iconButton, styles.spawnMessage)} onClick={() => spawnImage(url)} />\n      )}\n      <div className={styles.mediaBody}>{name && <div className={styles.messageSource}>{name}:</div>}</div>\n      <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n        <img src={proxiedUrlFor(url)} />\n      </a>\n    </div>\n  );\n}\n\nImageMessage.propTypes = {\n  name: PropTypes.string,\n  maySpawn: PropTypes.bool,\n  body: PropTypes.object,\n  className: PropTypes.string\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport ChatMessage from \"./chat-message\";\nimport PhotoMessage from \"./photo-message\";\nimport VideoMessage from \"./video-message\";\nimport ImageMessage from \"./image-message\";\nimport { getPresenceContextForSession } from \"../utils/phoenix-utils\";\n\nexport default class PresenceLog extends Component {\n  static propTypes = {\n    entries: PropTypes.array,\n    inRoom: PropTypes.bool,\n    hubId: PropTypes.string,\n    history: PropTypes.object,\n    presences: PropTypes.object\n  };\n\n  constructor(props) {\n    super(props);\n  }\n\n  domForEntry = e => {\n    const entryClasses = {\n      [styles.presenceLogEntry]: true,\n      [styles.presenceLogEntryWithButton]: (e.type === \"chat\" || e.type === \"image\") && e.maySpawn,\n      [styles.presenceLogChat]: e.type === \"chat\",\n      [styles.expired]: !!e.expired\n    };\n\n    const presenceContext = e.sessionId ? getPresenceContextForSession(this.props.presences, e.sessionId) : {};\n    const isBot = !!presenceContext.discord;\n\n    switch (e.type) {\n      case \"join\":\n      case \"entered\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.name}</b>&nbsp;<FormattedMessage id={`presence.${e.type}_${e.presence}`} />\n          </div>\n        );\n      case \"leave\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.name}</b>&nbsp;<FormattedMessage id={`presence.${e.type}`} />\n          </div>\n        );\n      case \"display_name_changed\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.oldName}</b>&nbsp;<FormattedMessage id=\"presence.name_change\" />&nbsp;<b>{e.newName}</b>.\n          </div>\n        );\n      case \"scene_changed\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.name}</b>&nbsp;<FormattedMessage id=\"presence.scene_change\" />&nbsp;<b>{e.sceneName}</b>.\n          </div>\n        );\n      case \"hub_name_changed\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.name}</b>&nbsp;<FormattedMessage id=\"presence.hub_name_change\" />&nbsp;<b>{e.hubName}</b>.\n          </div>\n        );\n      case \"chat\":\n        return (\n          <ChatMessage\n            key={e.key}\n            name={e.name}\n            className={classNames(entryClasses)}\n            body={e.body}\n            maySpawn={e.maySpawn}\n            sessionId={e.sessionId}\n            includeFromLink={this.props.inRoom && !isBot}\n            history={this.props.history}\n          />\n        );\n      case \"image\":\n        return (\n          <ImageMessage\n            key={e.key}\n            name={e.name}\n            className={classNames(entryClasses, styles.media)}\n            body={e.body}\n            maySpawn={e.maySpawn}\n          />\n        );\n      case \"photo\":\n        return (\n          <PhotoMessage\n            key={e.key}\n            name={e.name}\n            className={classNames(entryClasses, styles.media)}\n            body={e.body}\n            maySpawn={e.maySpawn}\n            hubId={this.props.hubId}\n          />\n        );\n      case \"video\":\n        return (\n          <VideoMessage\n            key={e.key}\n            name={e.name}\n            className={classNames(entryClasses, styles.media)}\n            body={e.body}\n            maySpawn={e.maySpawn}\n            hubId={this.props.hubId}\n          />\n        );\n      case \"log\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            {e.body}\n          </div>\n        );\n    }\n  };\n\n  render() {\n    const presenceClasses = {\n      [styles.presenceLog]: true,\n      [styles.presenceLogInRoom]: this.props.inRoom\n    };\n\n    return <div className={classNames(presenceClasses)}>{this.props.entries.map(this.domForEntry)}</div>;\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport StateLink from \"./state-link.js\";\nimport { resetTips } from \"../systems/tips\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faImage } from \"@fortawesome/free-solid-svg-icons/faImage\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons/faStar\";\nimport { faDoorClosed } from \"@fortawesome/free-solid-svg-icons/faDoorClosed\";\nimport { faPencilAlt } from \"@fortawesome/free-solid-svg-icons/faPencilAlt\";\nimport { faInfoCircle } from \"@fortawesome/free-solid-svg-icons/faInfoCircle\";\nimport { faBars } from \"@fortawesome/free-solid-svg-icons/faBars\";\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons/faPlus\";\nimport { faMinus } from \"@fortawesome/free-solid-svg-icons/faMinus\";\nimport { faVideo } from \"@fortawesome/free-solid-svg-icons/faVideo\";\nimport { showFullScreenIfAvailable } from \"../utils/fullscreen\";\nimport LeaveRoomDialog from \"./leave-room-dialog.js\";\n\nimport styles from \"../assets/stylesheets/settings-menu.scss\";\nimport rootStyles from \"../assets/stylesheets/ui-root.scss\";\n\nexport default class SettingsMenu extends Component {\n  static propTypes = {\n    history: PropTypes.object,\n    isStreaming: PropTypes.bool,\n    toggleStreamerMode: PropTypes.func,\n    mediaSearchStore: PropTypes.object,\n    scene: PropTypes.object,\n    hubScene: PropTypes.object,\n    hubChannel: PropTypes.object,\n    performConditionalSignIn: PropTypes.func,\n    showNonHistoriedDialog: PropTypes.func,\n    pushHistoryState: PropTypes.func,\n    toggleFlyMode: PropTypes.func\n  };\n\n  state = {\n    expanded: false\n  };\n\n  componentDidMount() {\n    document.querySelector(\".a-canvas\").addEventListener(\"mouseup\", () => {\n      if (this.state.expanded) {\n        this.setState({ expanded: false });\n      }\n    });\n  }\n\n  renderExpandedMenu() {\n    const rowClasses = classNames([styles.row, styles.settingsRow]);\n    const rowHeader = classNames([styles.row, styles.settingsRow, styles.rowHeader]);\n    const showRoomSettings = !!this.props.hubChannel.canOrWillIfCreator(\"update_hub\");\n    // const showRoomSettings = false;\n    // const showCloseRoom = !!this.props.hubChannel.canOrWillIfCreator(\"close_hub\");\n    const showCloseRoom = false;\n    const showRoomInfo = !!this.props.hubScene;\n    // const showRoomInfo = false;\n    // const showRoomSection = showRoomSettings || showRoomInfo || showCloseRoom;\n    const showRoomSection = false;\n    const showStreamerMode = this.props.scene.is(\"entered\") && !!this.props.hubChannel.canOrWillIfCreator(\"kick_users\");\n\n    const playerRig = document.querySelector(\"#player-rig\");\n    const flyEnabled = playerRig.getAttribute(\"character-controller\", \"fly\").fly;\n\n    // Draw self first\n    return (\n      <div className={styles.settingsMenu}>\n        <div className={styles.attachPoint} />\n        <div className={styles.contents}>\n          <div className={styles.rows}>\n            <div className={rowHeader}>\n              <FormattedMessage id=\"settings.row-profile\" />\n            </div>\n            <div className={rowClasses}>\n              <div className={styles.icon}>\n                <img src=\"../assets/images/change_avatar.svg\" />\n              </div>\n              <div className={styles.listItem}>\n                <StateLink\n                  stateKey=\"overlay\"\n                  stateValue=\"profile\"\n                  history={this.props.history}\n                  onClick={() => this.setState({ expanded: false })}\n                >\n                  <FormattedMessage id=\"settings.change-avatar\" />\n                </StateLink>\n              </div>\n            </div>\n            <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faStar} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <div\n                    className={styles.listItemLink}\n                    onClick={() => {\n                      this.props.toggleFlyMode(!flyEnabled);\n                      this.setState({ expanded: false });\n                    }}\n                  >\n                    {flyEnabled ? \"Disable\" : \"Enable\"} Fly Mode\n                  </div>\n                </div>\n              </div>\n            {false ? <div className={rowClasses}>\n              <div className={styles.icon}>\n                <i>\n                  <FontAwesomeIcon icon={faStar} />\n                </i>\n              </div>\n              <div className={styles.listItem}>\n                <div\n                  className={styles.listItemLink}\n                  onClick={() => {\n                    this.props.performConditionalSignIn(\n                      () => this.props.hubChannel.signedIn,\n                      () => {\n                        showFullScreenIfAvailable();\n                        this.props.mediaSearchStore.sourceNavigateWithNoNav(\"favorites\");\n                      },\n                      \"favorite-rooms\"\n                    );\n                  }}\n                >\n                  <FormattedMessage id=\"settings.favorites\" />\n                </div>\n              </div>\n            </div> : <span />}\n            {showRoomSection && (\n              <div className={rowHeader}>\n                <FormattedMessage id=\"settings.row-room\" />\n              </div>\n            )}\n            {false && showRoomSettings && (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faImage} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <div\n                    className={styles.listItemLink}\n                    onClick={() => {\n                      this.props.performConditionalSignIn(\n                        () => this.props.hubChannel.can(\"update_hub\"),\n                        () => {\n                          showFullScreenIfAvailable();\n                          this.props.mediaSearchStore.sourceNavigateWithNoNav(\"scenes\");\n                          this.setState({ expanded: false });\n                        },\n                        \"change-scene\"\n                      );\n                    }}\n                  >\n                    <FormattedMessage id=\"settings.change-scene\" />\n                  </div>\n                </div>\n              </div>\n            )}\n            {showRoomSettings && (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faPencilAlt} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <a\n                    href=\"#\"\n                    onClick={e => {\n                      e.preventDefault();\n\n                      this.props.performConditionalSignIn(\n                        () => this.props.hubChannel.can(\"update_hub\"),\n                        () => {\n                          this.props.pushHistoryState(\"modal\", \"room_settings\");\n                          this.setState({ expanded: false });\n                        },\n                        \"room-settings\"\n                      );\n                    }}\n                  >\n                    <FormattedMessage id=\"settings.room-settings\" />\n                  </a>\n                </div>\n              </div>\n            )}\n            {showCloseRoom && (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faDoorClosed} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <a\n                    href=\"#\"\n                    onClick={e => {\n                      e.preventDefault();\n\n                      this.props.performConditionalSignIn(\n                        () => this.props.hubChannel.can(\"update_hub\"),\n                        () => {\n                          this.props.pushHistoryState(\"modal\", \"close_room\");\n                          this.setState({ expanded: false });\n                        },\n                        \"close-room\"\n                      );\n                    }}\n                  >\n                    <FormattedMessage id=\"settings.close-room\" />\n                  </a>\n                </div>\n              </div>\n            )}\n            {showRoomInfo && (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faInfoCircle} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <StateLink\n                    stateKey=\"modal\"\n                    stateValue=\"room_info\"\n                    history={this.props.history}\n                    onClick={() => this.setState({ expanded: false })}\n                  >\n                    <FormattedMessage id=\"settings.room-info\" />\n                  </StateLink>\n                </div>\n              </div>\n            )}\n            <div className={rowClasses}>\n              <div className={styles.icon}>\n                <i>\n                  <FontAwesomeIcon icon={faDoorClosed} />\n                </i>\n              </div>\n              <div className={styles.listItem}>\n                <a\n                  href=\"#\"\n                  onClick={e => {\n                    e.preventDefault();\n                    this.props.showNonHistoriedDialog(LeaveRoomDialog, {\n                      destinationUrl: \"/\",\n                      messageType: \"create-room\"\n                    });\n                    this.setState({ expanded: false });\n                  }}\n                >\n                  Leave Room\n                </a>\n              </div>\n            </div>\n            {showStreamerMode ? (\n              <div className={rowHeader}>\n                <FormattedMessage id=\"settings.row-tools\" />\n              </div>\n            ) : (\n              <div />\n            )}\n            {showStreamerMode ? (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faVideo} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <div\n                    className={styles.listItemLink}\n                    onClick={() => {\n                      this.props.toggleStreamerMode(true);\n                      this.setState({ expanded: false });\n                    }}\n                  >\n                    <FormattedMessage id=\"settings.enable-streamer-mode\" />\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <div />\n            )}\n            {false && <div className={classNames([styles.bottomLinksMain])}>\n              <a href=\"/whats-new\" target=\"_blank\" rel=\"noreferrer noopener\">\n                <FormattedMessage id=\"settings.whats-new\" />\n              </a>\n              <button\n                onClick={e => {\n                  e.preventDefault();\n                  resetTips();\n                  this.setState({ expanded: false });\n                }}\n              >\n                <FormattedMessage id=\"settings.tips\" />\n              </button>\n              <a href=\"https://github.com/mozilla/hubs/wiki/Hubs-Controls\" target=\"_blank\" rel=\"noreferrer noopener\">\n                <FormattedMessage id=\"settings.controls\" />\n              </a>\n            </div>}\n            {false && <div className={classNames([styles.bottomLinks])}>\n              <a href=\"https://github.com/mozilla/hubs/wiki/Hubs-Features\" target=\"_blank\" rel=\"noreferrer noopener\">\n                <FormattedMessage id=\"settings.features\" />\n              </a>\n              <a href=\"https://discord.gg/wHmY4nd\" target=\"_blank\" rel=\"noreferrer noopener\">\n                <FormattedMessage id=\"settings.community\" />\n              </a>\n              <button\n                onClick={e => {\n                  e.preventDefault();\n                  this.props.pushHistoryState(\"modal\", \"feedback\");\n                }}\n              >\n                <FormattedMessage id=\"settings.send-feedback\" />\n              </button>\n              <a className={styles.bottomLink} href=\"/?report\" target=\"_blank\" rel=\"noreferrer noopener\">\n                <FormattedMessage id=\"settings.report\" />\n              </a>\n              <a\n                className={styles.bottomLink}\n                href=\"https://github.com/mozilla/hubs/blob/master/TERMS.md\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n              >\n                <FormattedMessage id=\"settings.terms\" />\n              </a>\n              <a\n                className={styles.bottomLink}\n                href=\"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n              >\n                <FormattedMessage id=\"settings.privacy\" />\n              </a>\n            </div>}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        <FontAwesomeIcon\n          icon={faBars}\n          onClick={() => this.setState({ expanded: !this.state.expanded })}\n          className={classNames({\n            [rootStyles.cornerButton]: true,\n            [rootStyles.cornerButtonSelected]: this.state.expanded\n          })}\n        />\n        {this.state.expanded && this.renderExpandedMenu()}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n// import hubLogo from \"../assets/images/hub-preview-white.png\";\nimport styles from \"../assets/stylesheets/preload-overlay.scss\";\nimport { FormattedMessage } from \"react-intl\";\n\nconst isMobile = AFRAME.utils.device.isMobile();\n\nexport default class PreloadOverlay extends Component {\n  static propTypes = {\n    hubName: PropTypes.string,\n    hubScene: PropTypes.object,\n    baseUrl: PropTypes.string,\n    onLoadClicked: PropTypes.func\n  };\n\n  render() {\n    return (\n      <div className={styles.treatment}>\n        <div className={styles.screenshot}>\n          {this.props.hubScene && <img className={styles.screenshot} src={this.props.hubScene.screenshot_url} />}\n        </div>\n        <a href=\"/\" target=\"_blank\" rel=\"noopener noreferrer\" className={styles.logo}>\n          <img src={this.props.logo} />\n        </a>\n        <div className={styles.mainPanel}>\n          <div className={styles.hubName}>{this.props.hubName}</div>\n          {this.props.onLoadClicked &&\n            (!isMobile ? (\n              <button className={styles.loadButton} onClick={this.props.onLoadClicked}>\n                <FormattedMessage id=\"embed.load-button\" />\n              </button>\n            ) : (\n              <a href={this.props.baseUrl} target=\"_blank\" className={styles.loadButton} rel=\"noreferrer noopener\">\n                <FormattedMessage id=\"embed.load-button\" />\n              </a>\n            ))}\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\n\nconst { detect } = require(\"detect-browser\");\nimport styles from \"../assets/stylesheets/2d-hud.scss\";\nimport uiStyles from \"../assets/stylesheets/ui-root.scss\";\nimport spritesheet from \"../assets/images/spritesheets/css-spritesheet.css\";\nimport { FormattedMessage } from \"react-intl\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { micLevelForVolume } from \"../components/audio-feedback\";\n\nconst SPRITESHEET_ICONS = {\n  MIC: [\n    spritesheet.mic0,\n    spritesheet.mic1,\n    spritesheet.mic2,\n    spritesheet.mic3,\n    spritesheet.mic4,\n    spritesheet.mic5,\n    spritesheet.mic6,\n    spritesheet.mic7\n  ],\n  MIC_OFF: [\n    spritesheet.micOff0,\n    spritesheet.micOff1,\n    spritesheet.micOff2,\n    spritesheet.micOff3,\n    spritesheet.micOff4,\n    spritesheet.micOff5,\n    spritesheet.micOff6,\n    spritesheet.micOff7\n  ]\n};\nconst browser = detect();\nconst noop = () => {};\n\nclass TopHUD extends Component {\n  static propTypes = {\n    scene: PropTypes.object,\n    muted: PropTypes.bool,\n    flyingEnabled: PropTypes.bool,\n    isCursorHoldingPen: PropTypes.bool,\n    hasActiveCamera: PropTypes.bool,\n    frozen: PropTypes.bool,\n    watching: PropTypes.bool,\n    onWatchEnded: PropTypes.func,\n    videoShareMediaSource: PropTypes.string,\n    showVideoShareFailed: PropTypes.bool,\n    hideVideoShareFailedTip: PropTypes.func,\n    activeTip: PropTypes.string,\n    history: PropTypes.object,\n    onToggleMute: PropTypes.func,\n    onToggleFreeze: PropTypes.func,\n    onSpawnPen: PropTypes.func,\n    onSpawnCamera: PropTypes.func,\n    onShareVideo: PropTypes.func,\n    onEndShareVideo: PropTypes.func,\n    onShareVideoNotCapable: PropTypes.func,\n    mediaSearchStore: PropTypes.object,\n    isStreaming: PropTypes.bool,\n    showStreamingTip: PropTypes.bool,\n    hideStreamingTip: PropTypes.func\n  };\n\n  state = {\n    showVideoShareOptions: false,\n    lastActiveMediaSource: null,\n    micLevel: 0,\n    cameraDisabled: false,\n    penDisabled: false,\n    mediaDisabled: false\n  };\n\n  constructor(props) {\n    super(props);\n    this.state.cameraDisabled = !window.APP.hubChannel.can(\"spawn_camera\");\n    this.state.penDisabled = !window.APP.hubChannel.can(\"spawn_drawing\");\n    this.state.mediaDisabled = !window.APP.hubChannel.can(\"spawn_and_move_media\");\n  }\n\n  onPermissionsUpdated = () => {\n    this.setState({\n      cameraDisabled: !window.APP.hubChannel.can(\"spawn_camera\"),\n      penDisabled: !window.APP.hubChannel.can(\"spawn_drawing\"),\n      mediaDisabled: !window.APP.hubChannel.can(\"spawn_and_move_media\")\n    });\n  };\n\n  componentDidMount = () => {\n    let max = 0;\n    if (this.micUpdateInterval) {\n      clearInterval(this.micUpdateInterval);\n    }\n    this.micUpdateInterval = setInterval(() => {\n      const volume = this.props.scene.systems[\"local-audio-analyser\"].volume;\n      max = Math.max(volume, max);\n      const micLevel = micLevelForVolume(volume, max);\n      if (micLevel !== this.state.micLevel) {\n        this.setState({ micLevel });\n      }\n    }, 50);\n    window.APP.hubChannel.addEventListener(\"permissions_updated\", this.onPermissionsUpdated);\n  };\n\n  componentWillUnmount = () => {\n    if (this.micUpdateInterval) {\n      clearInterval(this.micUpdateInterval);\n    }\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.onPermissionsUpdated);\n  };\n\n  handleVideoShareClicked = source => {\n    if ((source === \"screen\" || source === \"window\") && browser.name !== \"firefox\") {\n      this.props.onShareVideoNotCapable();\n      return;\n    }\n\n    if (this.props.videoShareMediaSource) {\n      this.props.onEndShareVideo();\n    } else {\n      this.props.onShareVideo(source);\n      this.setState({ lastActiveMediaSource: source });\n    }\n  };\n\n  buildVideoSharingButtons = () => {\n    const isMobile = AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR();\n\n    const videoShareExtraOptionTypes = [];\n    const primaryVideoShareType =\n      this.props.videoShareMediaSource || this.state.lastActiveMediaSource || (isMobile ? \"camera\" : \"screen\");\n\n    if (this.state.showVideoShareOptions) {\n      videoShareExtraOptionTypes.push(primaryVideoShareType);\n\n      [\"screen\", \"window\", \"camera\"].forEach(t => {\n        if (videoShareExtraOptionTypes.indexOf(t) === -1) {\n          videoShareExtraOptionTypes.push(t);\n        }\n      });\n    }\n\n    const showExtrasOnHover = () => {\n      if (isMobile) return;\n\n      clearTimeout(this.hideVideoSharingButtonTimeout);\n\n      if (!this.props.videoShareMediaSource) {\n        this.setState({ showVideoShareOptions: true });\n      }\n    };\n\n    const hideExtrasOnOut = () => {\n      this.hideVideoSharingButtonTimeout = setTimeout(() => {\n        this.setState({ showVideoShareOptions: false });\n      }, 250);\n    };\n\n    const maybeHandlePrimaryShare = () => {\n      if (!this.state.showVideoShareOptions) {\n        this.handleVideoShareClicked(primaryVideoShareType);\n      }\n    };\n\n    const capitalize = str => str[0].toUpperCase() + str.slice(1);\n\n    return (\n      <div\n        className={cx(styles.iconButton, styles[`share_${primaryVideoShareType}`], {\n          [styles.active]: this.props.videoShareMediaSource === primaryVideoShareType,\n          [styles.disabled]: this.state.mediaDisabled,\n          [styles.videoShare]: true\n        })}\n        title={\n          this.props.videoShareMediaSource !== null\n            ? \"Stop sharing\"\n            : `Share ${capitalize(primaryVideoShareType)}${this.state.mediaDisabled ? \" Disabled\" : \"\"}`\n        }\n        onClick={this.state.mediaDisabled ? noop : maybeHandlePrimaryShare}\n        onMouseOver={this.state.mediaDisabled ? noop : showExtrasOnHover}\n      >\n        {videoShareExtraOptionTypes.length > 0 && (\n          <div className={cx(styles.videoShareExtraOptions)} onMouseOut={hideExtrasOnOut}>\n            {videoShareExtraOptionTypes.map(type => (\n              <div\n                key={type}\n                className={cx(styles.iconButton, styles[`share_${type}`], {\n                  [styles.active]: this.props.videoShareMediaSource === type,\n                  [styles.disabled]: this.state.mediaDisabled\n                })}\n                title={\n                  this.props.videoShareMediaSource === type\n                    ? \"Stop sharing\"\n                    : `Share ${capitalize(type)}${this.state.mediaDisabled ? \" Disabled\" : \"\"}`\n                }\n                onClick={this.state.mediaDisabled ? noop : () => this.handleVideoShareClicked(type)}\n                onMouseOver={this.state.mediaDisabled ? noop : showExtrasOnHover}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  render() {\n    const videoSharingButtons = this.buildVideoSharingButtons();\n    const isMobile = AFRAME.utils.device.isMobile();\n    const tipDivForType = (type, cancelFunc) => (\n      <div className={cx(styles.topTip)}>\n        {cancelFunc && (\n          <button className={styles.tipCancel} onClick={cancelFunc}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </button>\n        )}\n        {!this.props.frozen && <div className={cx([styles.attachPoint, styles[`attach_${type.split(\".\")[1]}`]])} />}\n        <FormattedMessage id={`tips.${type}`} />\n      </div>\n    );\n\n    let tip;\n\n    if (this.props.watching) {\n      tip = (\n        <div className={cx([styles.topTip, styles.topTipNoHud])}>\n          <button className={styles.tipCancel} onClick={() => this.props.onWatchEnded()}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </button>\n          <FormattedMessage id={`tips.${isMobile ? \"mobile\" : \"desktop\"}.watching`} />\n          {!isMobile && (\n            <button className={styles.tipCancelText} onClick={() => this.props.onWatchEnded()}>\n              <FormattedMessage id=\"tips.watching.back\" />\n            </button>\n          )}\n        </div>\n      );\n    } else if (this.props.showVideoShareFailed) {\n      tip = tipDivForType(`${isMobile ? \"mobile\" : \"desktop\"}.video_share_failed`, this.props.hideVideoShareFailedTip);\n    } else if (this.props.activeTip) {\n      tip = tipDivForType(this.props.activeTip);\n    }\n\n    const micLevel = this.state.micLevel;\n    const micIconClass = this.props.muted ? SPRITESHEET_ICONS.MIC_OFF[micLevel] : SPRITESHEET_ICONS.MIC[micLevel];\n    // Hide buttons when frozen.\n    return (\n      <div className={cx(styles.container, styles.top, styles.unselectable, uiStyles.uiInteractive)}>\n        {this.props.frozen || this.props.watching ? (\n          <div className={cx(uiStyles.uiInteractive, styles.panel)}>{tip}</div>\n        ) : (\n          <div className={cx(uiStyles.uiInteractive, styles.panel)}>\n            {tip}\n            {videoSharingButtons}\n            <div\n              className={cx(styles.iconButton, micIconClass)}\n              title={this.props.muted ? \"Unmute Mic\" : \"Mute Mic\"}\n              onClick={this.props.onToggleMute}\n            />\n            <button\n              className={cx(uiStyles.uiInteractive, styles.iconButton, styles.spawn, {\n                [styles.disabled]: this.state.mediaDisabled\n              })}\n              onClick={\n                this.state.mediaDisabled ? noop : () => this.props.mediaSearchStore.sourceNavigateToDefaultSource()\n              }\n            />\n            {false && <div\n              className={cx(styles.iconButton, styles.pen, {\n                [styles.active]: this.props.isCursorHoldingPen,\n                [styles.disabled]: this.state.penDisabled\n              })}\n              title={`Pen${this.state.penDisabled ? \" Disabled\" : \"\"}`}\n              onClick={this.state.penDisabled ? noop : this.props.onSpawnPen}\n            />}\n            <div\n              className={cx(styles.iconButton, styles.camera, {\n                [styles.active]: this.props.hasActiveCamera,\n                [styles.disabled]: this.state.cameraDisabled\n              })}\n              title={`Camera${this.state.cameraDisabled ? \" Disabled\" : \"\"}`}\n              onClick={this.state.cameraDisabled ? noop : this.props.onSpawnCamera}\n            />\n            <div\n              className={cx(styles.iconButton, styles.fly, { [styles.active]: this.props.flyingEnabled })}\n              title={this.props.flyingEnabled ? \"Disable Flying\" : \"Enable Flying\"}\n              onClick={()=>this.props.onToggleFlying(!this.props.flyingEnabled)}\n            />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default { TopHUD };\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/spectating-label.scss\";\nimport { FormattedMessage } from \"react-intl\";\n\nexport class SpectatingLabel extends Component {\n  static propTypes = {\n    name: PropTypes.string\n  };\n\n  render() {\n    return (\n      <div className={styles.label}>\n        <FormattedMessage id=\"lobby.watching\" />\n        <b>{this.props.name}</b>\n      </div>\n    );\n  }\n}\n","import { willRequireUserGesture, showFullScreenIfAvailable } from \"./fullscreen\";\nimport screenfull from \"screenfull\";\n\nlet _isIn2DInterstitial = false;\nlet _exitAction = null;\n\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\nconst afterUserGesturePrompt = f => {\n  const scene = document.querySelector(\"a-scene\");\n  scene.addEventListener(\"2d-interstitial-gesture-complete\", f, { once: true });\n  scene.emit(\"2d-interstitial-gesture-required\");\n};\n\nexport function handleExitTo2DInterstitial(isLower, exitAction) {\n  const scene = document.querySelector(\"a-scene\");\n  if (!scene.is(\"vr-mode\")) {\n    if (isMobileVR && willRequireUserGesture()) {\n      afterUserGesturePrompt(() => {\n        showFullScreenIfAvailable();\n      });\n    }\n\n    return;\n  }\n\n  _isIn2DInterstitial = true;\n  _exitAction = exitAction;\n\n  if (isMobileVR) {\n    // Immersive browser, exit VR.\n    scene.exitVR().then(() => {\n      afterUserGesturePrompt(() => {\n        showFullScreenIfAvailable();\n      });\n    });\n  } else {\n    // Non-immersive browser, show notice\n    const vrNotice = document.querySelector(\".vr-notice\");\n    vrNotice.object3D.visible = true;\n    vrNotice.setAttribute(\"follow-in-fov\", {\n      angle: isLower ? 39 : -15\n    });\n  }\n}\n\nexport function exit2DInterstitialAndEnterVR(force) {\n  if (!force && !_isIn2DInterstitial) {\n    return;\n  }\n\n  _isIn2DInterstitial = false;\n\n  document.querySelector(\".vr-notice\").object3D.visible = false;\n\n  const scene = document.querySelector(\"a-scene\");\n\n  if (isMobileVR) {\n    if (screenfull.isFullscreen) {\n      screenfull.exit();\n      afterUserGesturePrompt(() => scene.enterVR());\n    } else {\n      scene.enterVR();\n    }\n  } else {\n    if (!scene.is(\"vr-mode\")) {\n      scene.enterVR();\n    }\n  }\n}\n\nexport function isIn2DInterstitial() {\n  return _isIn2DInterstitial;\n}\n\nexport function forceExitFrom2DInterstitial() {\n  if (!_isIn2DInterstitial) return;\n\n  if (_exitAction) {\n    _exitAction();\n    _exitAction = null;\n  }\n\n  exit2DInterstitialAndEnterVR();\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport copy from \"copy-to-clipboard\";\nimport { airtableAssets, airtableAssetsInitialState } from '../airtable'\nimport { IntlProvider, FormattedMessage, addLocaleData } from \"react-intl\";\nimport en from \"react-intl/locale-data/en\";\nimport screenfull from \"screenfull\";\n\nimport { VR_DEVICE_AVAILABILITY } from \"../utils/vr-caps-detect\";\nimport { canShare } from \"../utils/share\";\nimport styles from \"../assets/stylesheets/ui-root.scss\";\nimport entryStyles from \"../assets/stylesheets/entry.scss\";\nimport inviteStyles from \"../assets/stylesheets/invite-dialog.scss\";\nimport { ReactAudioContext, WithHoverSound } from \"./wrap-with-audio\";\nimport {\n  pushHistoryState,\n  clearHistoryState,\n  popToBeginningOfHubHistory,\n  navigateToPriorPage,\n  sluglessPath\n} from \"../utils/history\";\nimport StateLink from \"./state-link.js\";\nimport StateRoute from \"./state-route.js\";\nimport { getPresenceProfileForSession, discordBridgesForPresences } from \"../utils/phoenix-utils\";\nimport { getClientInfoClientId } from \"./client-info-dialog\";\nimport { getCurrentStreamer } from \"../utils/component-utils\";\n\nimport { lang, messages } from \"../utils/i18n\";\nimport Loader from \"./loader\";\nimport AutoExitWarning from \"./auto-exit-warning\";\nimport { TwoDEntryButton, GenericEntryButton, DaydreamEntryButton } from \"./entry-buttons.js\";\nimport ProfileEntryPanel from \"./profile-entry-panel\";\nimport MediaBrowser from \"./media-browser\";\n\nimport CreateObjectDialog from \"./create-object-dialog.js\";\nimport ChangeSceneDialog from \"./change-scene-dialog.js\";\nimport AvatarUrlDialog from \"./avatar-url-dialog.js\";\nimport HelpDialog from \"./help-dialog.js\";\nimport InviteDialog from \"./invite-dialog.js\";\nimport InviteTeamDialog from \"./invite-team-dialog.js\";\nimport LinkDialog from \"./link-dialog.js\";\nimport SafariDialog from \"./safari-dialog.js\";\nimport SafariMicDialog from \"./safari-mic-dialog.js\";\nimport SignInDialog from \"./sign-in-dialog.js\";\nimport RoomSettingsDialog from \"./room-settings-dialog.js\";\nimport CloseRoomDialog from \"./close-room-dialog.js\";\nimport Tip from \"./tip.js\";\nimport WebRTCScreenshareUnsupportedDialog from \"./webrtc-screenshare-unsupported-dialog.js\";\nimport WebAssemblyUnsupportedDialog from \"./webassembly-unsupported-dialog.js\";\nimport WebVRRecommendDialog from \"./webvr-recommend-dialog.js\";\nimport FeedbackDialog from \"./feedback-dialog.js\";\nimport LeaveRoomDialog from \"./leave-room-dialog.js\";\nimport RoomInfoDialog from \"./room-info-dialog.js\";\nimport ClientInfoDialog from \"./client-info-dialog.js\";\nimport OAuthDialog from \"./oauth-dialog.js\";\nimport TweetDialog from \"./tweet-dialog.js\";\nimport LobbyChatBox from \"./lobby-chat-box.js\";\nimport InWorldChatBox from \"./in-world-chat-box.js\";\nimport AvatarEditor from \"./avatar-editor\";\nimport MicLevelWidget from \"./mic-level-widget.js\";\nimport OutputLevelWidget from \"./output-level-widget.js\";\nimport PresenceLog from \"./presence-log.js\";\nimport PresenceList from \"./presence-list.js\";\nimport SettingsMenu from \"./settings-menu.js\";\nimport PreloadOverlay from \"./preload-overlay.js\";\nimport TwoDHUD from \"./2d-hud\";\nimport { SpectatingLabel } from \"./spectating-label\";\nimport { showFullScreenIfAvailable, showFullScreenIfWasFullScreen } from \"../utils/fullscreen\";\nimport { exit2DInterstitialAndEnterVR, isIn2DInterstitial } from \"../utils/vr-interstitial\";\n\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons/faStar\";\nimport { faArrowLeft } from \"@fortawesome/free-solid-svg-icons/faArrowLeft\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport qsTruthy from \"../utils/qs_truthy\";\nconst avatarEditorDebug = qsTruthy(\"avatarEditorDebug\");\n\naddLocaleData([...en]);\n\n// This is a list of regexes that match the microphone labels of HMDs.\n//\n// If entering VR mode, and if any of these regexes match an audio device,\n// the user will be prevented from entering VR until one of those devices is\n// selected as the microphone.\n//\n// Note that this doesn't have to be exhaustive: if no devices match any regex\n// then we rely upon the user to select the proper mic.\nconst HMD_MIC_REGEXES = [/\\Wvive\\W/i, /\\Wrift\\W/i];\n\nconst IN_ROOM_MODAL_ROUTER_PATHS = [\"/media\"];\nconst IN_ROOM_MODAL_QUERY_VARS = [\"media_source\"];\n\nconst LOBBY_MODAL_ROUTER_PATHS = [\"/media/scenes\", \"/media/avatars\", \"/media/favorites\"];\nconst LOBBY_MODAL_QUERY_VARS = [\"media_source\"];\nconst LOBBY_MODAL_QUERY_VALUES = [\"scenes\", \"avatars\", \"favorites\"];\n\nasync function grantedMicLabels() {\n  const mediaDevices = await navigator.mediaDevices.enumerateDevices();\n  return mediaDevices.filter(d => d.label && d.kind === \"audioinput\").map(d => d.label);\n}\n\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\nconst isMobilePhoneOrVR = isMobile || isMobileVR;\n\nconst AUTO_EXIT_TIMER_SECONDS = 10;\n\nclass UIRoot extends Component {\n  willCompileAndUploadMaterials = false;\n\n  static propTypes = {\n    enterScene: PropTypes.func,\n    exitScene: PropTypes.func,\n    onSendMessage: PropTypes.func,\n    disableAutoExitOnConcurrentLoad: PropTypes.bool,\n    forcedVREntryType: PropTypes.string,\n    isBotMode: PropTypes.bool,\n    store: PropTypes.object,\n    mediaSearchStore: PropTypes.object,\n    scene: PropTypes.object,\n    authChannel: PropTypes.object,\n    hubChannel: PropTypes.object,\n    linkChannel: PropTypes.object,\n    hubEntryCode: PropTypes.number,\n    availableVREntryTypes: PropTypes.object,\n    environmentSceneLoaded: PropTypes.bool,\n    roomUnavailableReason: PropTypes.string,\n    platformUnsupportedReason: PropTypes.string,\n    hubId: PropTypes.string,\n    hubName: PropTypes.string,\n    hubMemberPermissions: PropTypes.object,\n    hubScene: PropTypes.object,\n    hubIsBound: PropTypes.bool,\n    isSupportAvailable: PropTypes.bool,\n    presenceLogEntries: PropTypes.array,\n    presences: PropTypes.object,\n    sessionId: PropTypes.string,\n    subscriptions: PropTypes.object,\n    initialIsSubscribed: PropTypes.bool,\n    initialIsFavorited: PropTypes.bool,\n    showSignInDialog: PropTypes.bool,\n    signInMessageId: PropTypes.string,\n    signInCompleteMessageId: PropTypes.string,\n    signInContinueTextId: PropTypes.string,\n    onContinueAfterSignIn: PropTypes.func,\n    showSafariDialog: PropTypes.bool,\n    showSafariMicDialog: PropTypes.bool,\n    showWebAssemblyDialog: PropTypes.bool,\n    showOAuthDialog: PropTypes.bool,\n    onCloseOAuthDialog: PropTypes.func,\n    oauthInfo: PropTypes.array,\n    isCursorHoldingPen: PropTypes.bool,\n    hasActiveCamera: PropTypes.bool,\n    onMediaSearchResultEntrySelected: PropTypes.func,\n    onAvatarSaved: PropTypes.func,\n    activeTips: PropTypes.object,\n    location: PropTypes.object,\n    history: PropTypes.object,\n    showInterstitialPrompt: PropTypes.bool,\n    onInterstitialPromptClicked: PropTypes.func,\n    performConditionalSignIn: PropTypes.func,\n    hide: PropTypes.bool,\n    showPreload: PropTypes.bool,\n    onPreloadLoadClicked: PropTypes.func,\n    embed: PropTypes.bool,\n    embedToken: PropTypes.string,\n    onLoaded: PropTypes.func\n  };\n\n  state = {\n    enterInVR: false,\n    muteOnEntry: false,\n    entered: false,\n    dialog: null,\n    showShareDialog: false,\n    broadcastTipDismissed: false,\n    linkCode: null,\n    linkCodeCancel: null,\n    miniInviteActivated: false,\n\n    didConnectToNetworkedScene: false,\n    noMoreLoadingUpdates: false,\n    hideLoader: false,\n    watching: false,\n    isStreaming: false,\n    showStreamingTip: false,\n\n    waitingOnAudio: false,\n    mediaStream: null,\n    audioTrack: null,\n    micDevices: [],\n\n    autoExitTimerStartedAt: null,\n    autoExitTimerInterval: null,\n    secondsRemainingBeforeAutoExit: Infinity,\n\n    muted: false,\n    flyingEnabled: false,\n    frozen: false,\n\n    exited: false,\n\n    signedIn: false,\n    videoShareMediaSource: null,\n    showVideoShareFailed: false\n  };\n\n  constructor(props) {\n    super(props);\n    if (props.showSafariMicDialog) {\n      this.state.dialog = <SafariMicDialog closable={false} />;\n    }\n    if (props.showSafariDialog) {\n      this.state.dialog = <SafariDialog closable={false} />;\n    }\n    if (props.showWebAssemblyDialog) {\n      this.state.dialog = <WebAssemblyUnsupportedDialog closable={false} />;\n    }\n\n    props.mediaSearchStore.setHistory(props.history);\n\n    // An exit handler that discards event arguments and can be cleaned up.\n    this.exitEventHandler = () => this.exit();\n\n    this.state.airtableAssets = airtableAssetsInitialState;\n  }\n\n  componentDidUpdate(prevProps) {\n    const { hubChannel, showSignInDialog } = this.props;\n    if (hubChannel) {\n      const { signedIn } = hubChannel;\n      if (signedIn !== this.state.signedIn) {\n        this.setState({ signedIn });\n      }\n    }\n    if (prevProps.showSignInDialog !== showSignInDialog) {\n      if (showSignInDialog) {\n        this.showContextualSignInDialog();\n      } else {\n        this.closeDialog();\n      }\n    }\n    if (!this.willCompileAndUploadMaterials && this.state.noMoreLoadingUpdates) {\n      this.willCompileAndUploadMaterials = true;\n      // We want to ensure that react and the browser have had the chance to render / update.\n      // See https://stackoverflow.com/a/34999925 , although our solution flipped setTimeout and requestAnimationFrame\n      window.requestAnimationFrame(() => {\n        window.setTimeout(() => {\n          if (!this.props.isBotMode) {\n            this.props.scene.renderer.compileAndUploadMaterials(this.props.scene.object3D, this.props.scene.camera);\n          }\n\n          if (!this.state.hideLoader) {\n            this.setState({ hideLoader: true });\n          }\n        }, 0);\n      });\n    }\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"concurrentload\", this.onConcurrentLoad);\n    document.querySelector(\".a-canvas\").addEventListener(\"mouseup\", () => {\n      if (this.state.showShareDialog) {\n        this.setState({ showShareDialog: false });\n      }\n    });\n\n    this.props.scene.addEventListener(\n      \"didConnectToNetworkedScene\",\n      () => {\n        this.setState({ didConnectToNetworkedScene: true });\n      },\n      { once: true }\n    );\n    this.props.scene.addEventListener(\"loaded\", this.onSceneLoaded);\n    this.props.scene.addEventListener(\"stateadded\", this.onAframeStateChanged);\n    this.props.scene.addEventListener(\"stateremoved\", this.onAframeStateChanged);\n    this.props.scene.addEventListener(\"share_video_enabled\", this.onShareVideoEnabled);\n    this.props.scene.addEventListener(\"share_video_disabled\", this.onShareVideoDisabled);\n    this.props.scene.addEventListener(\"share_video_failed\", this.onShareVideoFailed);\n    this.props.scene.addEventListener(\"exit\", this.exitEventHandler);\n    this.props.scene.addEventListener(\"action_exit_watch\", () => this.setState({ watching: false, hide: false }));\n\n    const scene = this.props.scene;\n\n    this.props.store.addEventListener(\"statechanged\", this.onStoreChanged);\n\n    const unsubscribe = this.props.history.listen((location, action) => {\n      const state = location.state;\n\n      // If we just hit back into the entry flow, just go back to the page before the room landing page.\n      if (action === \"POP\" && state && state.entry_step && this.state.entered) {\n        unsubscribe();\n        navigateToPriorPage(this.props.history);\n        return;\n      }\n    });\n\n    // If we refreshed the page with any state history (eg if we were in the entry flow\n    // or had a modal/overlay open) just reset everything to the beginning of the flow by\n    // erasing all history that was accumulated for this room (including across refreshes.)\n    //\n    // We don't do this for the media browser case, since we want to be able to share\n    // links to the browser pages\n    if (this.props.history.location.state && !sluglessPath(this.props.history.location).startsWith(\"/media\")) {\n      popToBeginningOfHubHistory(this.props.history);\n    }\n\n    this.setState({\n      audioContext: {\n        playSound: sound => {\n          scene.emit(sound);\n        },\n        onMouseLeave: () => {\n          //          scene.emit(\"play_sound-hud_mouse_leave\");\n        }\n      }\n    });\n\n    if (this.props.forcedVREntryType && this.props.forcedVREntryType.endsWith(\"_now\")) {\n      setTimeout(() => this.handleForceEntry(), 2000);\n    }\n\n    airtableAssets.find('recHqITRS7cBMwn9i', (err, record) => \n       this.setState({airtableAssets: record.fields})\n    )\n  }\n\n  componentWillUnmount() {\n    this.props.scene.removeEventListener(\"loaded\", this.onSceneLoaded);\n    this.props.scene.removeEventListener(\"exit\", this.exitEventHandler);\n    this.props.scene.removeEventListener(\"share_video_enabled\", this.onShareVideoEnabled);\n    this.props.scene.removeEventListener(\"share_video_disabled\", this.onShareVideoDisabled);\n    this.props.scene.removeEventListener(\"share_video_failed\", this.onShareVideoFailed);\n  }\n\n  showContextualSignInDialog = () => {\n    const {\n      signInMessageId,\n      authChannel,\n      signInCompleteMessageId,\n      signInContinueTextId,\n      onContinueAfterSignIn\n    } = this.props;\n\n    this.showNonHistoriedDialog(SignInDialog, {\n      message: messages[signInMessageId],\n      onSignIn: async email => {\n        const { authComplete } = await authChannel.startAuthentication(email, this.props.hubChannel);\n\n        this.showNonHistoriedDialog(SignInDialog, { authStarted: true, onClose: onContinueAfterSignIn });\n\n        await authComplete;\n\n        this.setState({ signedIn: true });\n        this.showNonHistoriedDialog(SignInDialog, {\n          authComplete: true,\n          message: messages[signInCompleteMessageId],\n          continueText: messages[signInContinueTextId],\n          onClose: onContinueAfterSignIn,\n          onContinue: onContinueAfterSignIn\n        });\n      },\n      onClose: onContinueAfterSignIn\n    });\n  };\n\n  updateSubscribedState = () => {\n    const isSubscribed = this.props.subscriptions && this.props.subscriptions.isSubscribed();\n    this.setState({ isSubscribed });\n  };\n\n  toggleFavorited = () => {\n    this.props.performConditionalSignIn(\n      () => this.props.hubChannel.signedIn,\n      () => {\n        const isFavorited = this.isFavorited();\n\n        this.props.hubChannel[isFavorited ? \"unfavorite\" : \"favorite\"]();\n        this.setState({ isFavorited: !isFavorited });\n      },\n      \"favorite-room\"\n    );\n  };\n\n  isFavorited = () => {\n    return this.state.isFavorited !== undefined ? this.state.isFavorited : this.props.initialIsFavorited;\n  };\n\n  onLoadingFinished = () => {\n    this.setState({ noMoreLoadingUpdates: true });\n\n    if (this.props.onLoaded) {\n      this.props.onLoaded();\n    }\n  };\n\n  onSceneLoaded = () => {\n    this.setState({ sceneLoaded: true });\n  };\n\n  // TODO: we need to come up with a cleaner way to handle the shared state between aframe and react than emmitting events and setting state on the scene\n  onAframeStateChanged = e => {\n    if (!(e.detail === \"muted\" || e.detail === \"frozen\")) return;\n    this.setState({\n      [e.detail]: this.props.scene.is(e.detail)\n    });\n  };\n\n  onShareVideoEnabled = e => {\n    this.setState({ videoShareMediaSource: e.detail.source });\n  };\n\n  onShareVideoDisabled = () => {\n    this.setState({ videoShareMediaSource: null });\n  };\n\n  onShareVideoFailed = () => {\n    this.setState({ showVideoShareFailed: true });\n  };\n\n  toggleMute = () => {\n    this.props.scene.emit(\"action_mute\");\n  };\n\n  toggleFreeze = () => {\n    this.props.scene.emit(\"action_freeze\");\n  };\n\n  shareVideo = mediaSource => {\n    this.props.scene.emit(`action_share_${mediaSource}`);\n  };\n\n  endShareVideo = () => {\n    this.props.scene.emit(\"action_end_video_sharing\");\n  };\n\n  spawnPen = () => {\n    this.props.scene.emit(\"penButtonPressed\");\n  };\n\n  onSubscribeChanged = async () => {\n    if (!this.props.subscriptions) return;\n\n    await this.props.subscriptions.toggle();\n    this.updateSubscribedState();\n  };\n\n  handleForceEntry = () => {\n    if (!this.props.forcedVREntryType) return;\n\n    if (this.props.forcedVREntryType.startsWith(\"daydream\")) {\n      this.enterDaydream();\n    } else if (this.props.forcedVREntryType.startsWith(\"vr\")) {\n      this.enterVR();\n    } else if (this.props.forcedVREntryType.startsWith(\"2d\")) {\n      this.enter2D();\n    }\n  };\n\n  onConcurrentLoad = () => {\n    if (this.props.disableAutoExitOnConcurrentLoad) return;\n\n    const autoExitTimerInterval = setInterval(() => {\n      let secondsRemainingBeforeAutoExit = Infinity;\n\n      if (this.state.autoExitTimerStartedAt) {\n        const secondsSinceStart = (new Date() - this.state.autoExitTimerStartedAt) / 1000;\n        secondsRemainingBeforeAutoExit = Math.max(0, Math.floor(AUTO_EXIT_TIMER_SECONDS - secondsSinceStart));\n      }\n\n      this.setState({ secondsRemainingBeforeAutoExit });\n      this.checkForAutoExit();\n    }, 500);\n\n    this.setState({ autoExitTimerStartedAt: new Date(), autoExitTimerInterval });\n  };\n\n  checkForAutoExit = () => {\n    if (this.state.secondsRemainingBeforeAutoExit !== 0) return;\n    this.endAutoExitTimer();\n    this.exit();\n  };\n\n  exit = reason => {\n    this.props.exitScene(reason);\n    this.setState({ exited: true });\n  };\n\n  isWaitingForAutoExit = () => {\n    return this.state.secondsRemainingBeforeAutoExit <= AUTO_EXIT_TIMER_SECONDS;\n  };\n\n  endAutoExitTimer = () => {\n    clearInterval(this.state.autoExitTimerInterval);\n    this.setState({\n      autoExitTimerStartedAt: null,\n      autoExitTimerInterval: null,\n      secondsRemainingBeforeAutoExit: Infinity\n    });\n  };\n\n  performDirectEntryFlow = async enterInVR => {\n    this.setState({ enterInVR, waitingOnAudio: true });\n\n    const hasGrantedMic = (await grantedMicLabels()).length > 0;\n\n    if (hasGrantedMic) {\n      await this.setMediaStreamToDefault();\n      this.beginOrSkipAudioSetup();\n    } else {\n      this.pushHistoryState(\"entry_step\", \"mic_grant\");\n    }\n\n    this.setState({ waitingOnAudio: false });\n  };\n\n  enter2D = async () => {\n    await this.performDirectEntryFlow(false);\n  };\n\n  enterVR = async () => {\n    if (this.props.forcedVREntryType || this.props.availableVREntryTypes.generic !== VR_DEVICE_AVAILABILITY.maybe) {\n      await this.performDirectEntryFlow(true);\n    } else {\n      this.pushHistoryState(\"modal\", \"webvr\");\n    }\n  };\n\n  enterDaydream = async () => {\n    await this.performDirectEntryFlow(true);\n  };\n\n  micDeviceChanged = async ev => {\n    const constraints = { audio: { deviceId: { exact: [ev.target.value] } } };\n    await this.fetchAudioTrack(constraints);\n    await this.setupNewMediaStream();\n  };\n\n  setMediaStreamToDefault = async () => {\n    let hasAudio = false;\n    const { lastUsedMicDeviceId } = this.props.store.state.settings;\n\n    // Try to fetch last used mic, if there was one.\n    if (lastUsedMicDeviceId) {\n      hasAudio = await this.fetchAudioTrack({ audio: { deviceId: { ideal: lastUsedMicDeviceId } } });\n    } else {\n      hasAudio = await this.fetchAudioTrack({ audio: true });\n    }\n\n    await this.setupNewMediaStream();\n\n    return { hasAudio };\n  };\n\n  fetchAudioTrack = async constraints => {\n    if (this.state.audioTrack) {\n      this.state.audioTrack.stop();\n    }\n\n    try {\n      const mediaStream = await navigator.mediaDevices.getUserMedia(constraints);\n      const audioTrack = mediaStream.getAudioTracks()[0];\n      this.setState({ audioTrack });\n\n      if (/Oculus/.test(navigator.userAgent)) {\n        // HACK Oculus Browser 6 seems to randomly end the microphone audio stream. This re-creates it.\n        // Note the ended event will only fire if some external event ends the stream, not if we call stop().\n        const recreateAudioStream = async () => {\n          console.warn(\n            \"Oculus Browser 6 bug hit: Audio stream track ended without calling stop. Recreating audio stream.\"\n          );\n\n          const mediaStream = await navigator.mediaDevices.getUserMedia(constraints);\n          const audioTrack = mediaStream.getAudioTracks()[0];\n          NAF.connection.adapter.setLocalMediaStream(mediaStream);\n          audioTrack.addEventListener(\"ended\", recreateAudioStream, { once: true });\n        };\n\n        audioTrack.addEventListener(\"ended\", recreateAudioStream, { once: true });\n      }\n\n      return true;\n    } catch (e) {\n      // Error fetching audio track, most likely a permission denial.\n      this.setState({ audioTrack: null });\n      return false;\n    }\n  };\n\n  setupNewMediaStream = async () => {\n    const mediaStream = new MediaStream();\n\n    await this.fetchMicDevices();\n\n    // we should definitely have an audioTrack at this point unless they denied mic access\n    if (this.state.audioTrack) {\n      mediaStream.addTrack(this.state.audioTrack);\n      const micDeviceId = this.micDeviceIdForMicLabel(this.micLabelForMediaStream(mediaStream));\n      if (micDeviceId) {\n        this.props.store.update({ settings: { lastUsedMicDeviceId: micDeviceId } });\n      }\n      const mediaStreamForMicAnalysis = new MediaStream();\n      mediaStreamForMicAnalysis.addTrack(this.state.audioTrack.clone());\n      this.props.scene.emit(\"local-media-stream-created\", { mediaStream: mediaStreamForMicAnalysis });\n    }\n\n    this.setState({ mediaStream });\n  };\n\n  onMicGrantButton = async () => {\n    if (this.props.location.state && this.props.location.state.entry_step === \"mic_grant\") {\n      const { hasAudio } = await this.setMediaStreamToDefault();\n\n      if (hasAudio) {\n        this.pushHistoryState(\"entry_step\", \"mic_granted\");\n      } else {\n        this.beginOrSkipAudioSetup();\n      }\n    } else {\n      this.beginOrSkipAudioSetup();\n    }\n  };\n\n  beginOrSkipAudioSetup = () => {\n    const skipAudioSetup = this.props.forcedVREntryType && this.props.forcedVREntryType.endsWith(\"_now\");\n\n    if (skipAudioSetup) {\n      this.onAudioReadyButton();\n    } else {\n      this.pushHistoryState(\"entry_step\", \"audio\");\n    }\n  };\n\n  fetchMicDevices = () => {\n    return new Promise(resolve => {\n      navigator.mediaDevices.enumerateDevices().then(mediaDevices => {\n        this.setState(\n          {\n            micDevices: mediaDevices\n              .filter(d => d.kind === \"audioinput\")\n              .map(d => ({ deviceId: d.deviceId, label: d.label }))\n          },\n          resolve\n        );\n      });\n    });\n  };\n\n  shouldShowHmdMicWarning = () => {\n    if (isMobile || AFRAME.utils.device.isMobileVR()) return false;\n    if (!this.state.enterInVR) return false;\n    if (!this.hasHmdMicrophone()) return false;\n\n    return !HMD_MIC_REGEXES.find(r => this.selectedMicLabel().match(r));\n  };\n\n  hasHmdMicrophone = () => {\n    return !!this.state.micDevices.find(d => HMD_MIC_REGEXES.find(r => d.label.match(r)));\n  };\n\n  micLabelForMediaStream = mediaStream => {\n    return (mediaStream && mediaStream.getAudioTracks().length > 0 && mediaStream.getAudioTracks()[0].label) || \"\";\n  };\n\n  selectedMicLabel = () => {\n    return this.micLabelForMediaStream(this.state.mediaStream);\n  };\n\n  micDeviceIdForMicLabel = label => {\n    return this.state.micDevices.filter(d => d.label === label).map(d => d.deviceId)[0];\n  };\n\n  selectedMicDeviceId = () => {\n    return this.micDeviceIdForMicLabel(this.selectedMicLabel());\n  };\n\n  shouldShowFullScreen = () => {\n    // Disable full screen on iOS, since Safari's fullscreen mode does not let you prevent native pinch-to-zoom gestures.\n    return (\n      (isMobile || AFRAME.utils.device.isMobileVR()) &&\n      !AFRAME.utils.device.isIOS() &&\n      !this.state.enterInVR &&\n      screenfull.enabled\n    );\n  };\n\n  onAudioReadyButton = () => {\n    if (!this.state.enterInVR) {\n      showFullScreenIfAvailable();\n    }\n\n    this.props.enterScene(this.state.mediaStream, this.state.enterInVR, this.state.muteOnEntry);\n\n    const mediaStream = this.state.mediaStream;\n\n    if (mediaStream) {\n      if (mediaStream.getAudioTracks().length > 0) {\n        console.log(`Using microphone: ${mediaStream.getAudioTracks()[0].label}`);\n      }\n\n      if (mediaStream.getVideoTracks().length > 0) {\n        console.log(\"Screen sharing enabled.\");\n      }\n    }\n\n    this.setState({ entered: true, showShareDialog: false });\n    clearHistoryState(this.props.history);\n  };\n\n  attemptLink = async () => {\n    this.pushHistoryState(\"overlay\", \"link\");\n    const { code, cancel, onFinished } = await this.props.linkChannel.generateCode();\n    this.setState({ linkCode: code, linkCodeCancel: cancel });\n    onFinished.then(() => {\n      this.setState({ log: false, linkCode: null, linkCodeCancel: null });\n      this.props.history.goBack();\n    });\n  };\n\n  showShareDialog = () => {\n    this.props.store.update({ activity: { hasOpenedShare: true } });\n    this.setState({ showShareDialog: true });\n  };\n\n  toggleShareDialog = async () => {\n    this.props.store.update({ activity: { hasOpenedShare: true } });\n    this.setState({ showShareDialog: !this.state.showShareDialog });\n  };\n\n  createObject = media => {\n    this.props.scene.emit(\"add_media\", media);\n  };\n\n  changeScene = url => {\n    this.props.hubChannel.updateScene(url);\n  };\n\n  setAvatarUrl = url => {\n    this.props.store.update({ profile: { ...this.props.store.state.profile, ...{ avatarId: url } } });\n  };\n\n  closeDialog = () => {\n    if (this.state.dialog) {\n      this.setState({ dialog: null });\n    } else {\n      this.props.history.goBack();\n    }\n\n    if (isIn2DInterstitial()) {\n      exit2DInterstitialAndEnterVR();\n    } else {\n      showFullScreenIfWasFullScreen();\n    }\n  };\n\n  showNonHistoriedDialog = (DialogClass, props = {}) => {\n    this.setState({\n      dialog: <DialogClass {...{ onClose: this.closeDialog, ...props }} />\n    });\n  };\n\n  toggleStreamerMode = enable => {\n    const playerRig = document.querySelector(\"#player-rig\");\n    playerRig.setAttribute(\"character-controller\", \"fly\", enable);\n\n    if (enable) {\n      this.props.hubChannel.beginStreaming();\n      this.setState({ isStreaming: true, showStreamingTip: true });\n    } else {\n      this.props.hubChannel.endStreaming();\n      this.setState({ isStreaming: false });\n    }\n  };\n\n  toggleFlyMode = enable => {\n    const playerRig = document.querySelector(\"#player-rig\");\n    playerRig.setAttribute(\"character-controller\", \"fly\", enable);  \n    this.setState({flyingEnabled: enable})\n  }\n  \n\n  renderDialog = (DialogClass, props = {}) => <DialogClass {...{ onClose: this.closeDialog, ...props }} />;\n\n  showSignInDialog = () => {\n    this.showNonHistoriedDialog(SignInDialog, {\n      message: messages[\"sign-in.prompt\"],\n      onSignIn: async email => {\n        const { authComplete } = await this.props.authChannel.startAuthentication(email, this.props.hubChannel);\n\n        this.showNonHistoriedDialog(SignInDialog, { authStarted: true });\n\n        await authComplete;\n\n        this.setState({ signedIn: true });\n        this.closeDialog();\n      }\n    });\n  };\n\n  signOut = async () => {\n    await this.props.authChannel.signOut(this.props.hubChannel);\n    this.setState({ signedIn: false });\n  };\n\n  showWebRTCScreenshareUnsupportedDialog = () => {\n    this.pushHistoryState(\"modal\", \"webrtc-screenshare\");\n  };\n\n  onMiniInviteClicked = () => {\n    const link = \"https://hub.link/\" + this.props.hubId;\n\n    this.setState({ miniInviteActivated: true });\n    setTimeout(() => {\n      this.setState({ miniInviteActivated: false });\n    }, 5000);\n\n    if (canShare()) {\n      navigator.share({ title: document.title, url: link });\n    } else {\n      copy(link);\n    }\n  };\n\n  sendMessage = msg => {\n    this.props.onSendMessage(msg);\n  };\n\n  occupantCount = () => {\n    return this.props.presences ? Object.entries(this.props.presences).length : 0;\n  };\n\n  onStoreChanged = () => {\n    const broadcastedRoomConfirmed = this.props.store.state.confirmedBroadcastedRooms.includes(this.props.hubId);\n    if (broadcastedRoomConfirmed !== this.state.broadcastTipDismissed) {\n      this.setState({ broadcastTipDismissed: broadcastedRoomConfirmed });\n    }\n  };\n\n  confirmBroadcastedRoom = () => {\n    this.props.store.update({ confirmedBroadcastedRooms: [this.props.hubId] });\n  };\n\n  discordBridges = () => {\n    if (!this.props.presences) {\n      return [];\n    } else {\n      return discordBridgesForPresences(this.props.presences);\n    }\n  };\n\n  hasEmbedPresence = () => {\n    if (!this.props.presences) {\n      return false;\n    } else {\n      for (const p of Object.values(this.props.presences)) {\n        for (const m of p.metas) {\n          if (m.context && m.context.embed) {\n            return true;\n          }\n        }\n      }\n    }\n\n    return false;\n  };\n\n  pushHistoryState = (k, v) => pushHistoryState(this.props.history, k, v);\n\n  renderInterstitialPrompt = () => {\n    return (\n      <IntlProvider locale={lang} messages={messages}>\n        <div className={styles.interstitial} onClick={() => this.props.onInterstitialPromptClicked()}>\n          <div>\n            <FormattedMessage id=\"interstitial.prompt\" />\n          </div>\n        </div>\n      </IntlProvider>\n    );\n  };\n\n  renderExitedPane = () => {\n    let subtitle = null;\n    if (this.props.roomUnavailableReason === \"closed\") {\n      // TODO i18n, due to links and markup\n      subtitle = (\n        <div>\n          Sorry, this room is no longer available.\n          <p />A room may be closed if we receive reports that it violates our{\" \"}\n          <WithHoverSound>\n            <a target=\"_blank\" rel=\"noreferrer noopener\" href=\"https://github.com/mozilla/hubs/blob/master/TERMS.md\">\n              Terms of Use\n            </a>\n          </WithHoverSound>\n          .<br />\n          If you have questions, contact us at{\" \"}\n          <WithHoverSound>\n            <a href=\"mailto:hubs@mozilla.com\">hubs@mozilla.com</a>\n          </WithHoverSound>\n          .<p />\n          If you&apos;d like to run your own server, hubs&apos;s source code is available on{\" \"}\n          <WithHoverSound>\n            <a href=\"https://github.com/mozilla/hubs\">GitHub</a>\n          </WithHoverSound>\n          .\n        </div>\n      );\n    } else if (this.props.platformUnsupportedReason === \"no_data_channels\") {\n      // TODO i18n, due to links and markup\n      subtitle = (\n        <div>\n          Your browser does not support{\" \"}\n          <WithHoverSound>\n            <a\n              href=\"https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/createDataChannel#Browser_compatibility\"\n              rel=\"noreferrer noopener\"\n            >\n              WebRTC Data Channels\n            </a>\n          </WithHoverSound>\n          , which is required to use Hubs.\n          <br />\n          If you&quot;d like to use Hubs with Oculus or SteamVR, you can{\" \"}\n          <WithHoverSound>\n            <a href=\"https://www.mozilla.org/firefox\" rel=\"noreferrer noopener\">\n              Download Firefox\n            </a>\n          </WithHoverSound>\n          .\n        </div>\n      );\n    } else {\n      const reason = this.props.roomUnavailableReason || this.props.platformUnsupportedReason;\n      const exitSubtitleId = `exit.subtitle.${reason || \"exited\"}`;\n      subtitle = (\n        <div>\n          <FormattedMessage id={exitSubtitleId} />\n          <p />\n          {![\"left\", \"disconnected\"].includes(this.props.roomUnavailableReason) && (\n            <div>\n              You can also{\" \"}\n              <WithHoverSound>\n                <a href=\"/\">create a new room</a>\n              </WithHoverSound>\n              .\n            </div>\n          )}\n        </div>\n      );\n    }\n\n    return (\n      <IntlProvider locale={lang} messages={messages}>\n        <div className=\"exited-panel\">\n          <img className=\"exited-panel__logo\" src=\"../assets/images/logo.svg\" />\n          <div className=\"exited-panel__subtitle\">{subtitle}</div>\n        </div>\n      </IntlProvider>\n    );\n  };\n\n  renderBotMode = () => {\n    return (\n      <div className=\"loading-panel\">\n        <img className=\"loading-panel__logo\" src=\"../assets/images/logo.svg\" />\n        <input type=\"file\" id=\"bot-audio-input\" accept=\"audio/*\" />\n        <input type=\"file\" id=\"bot-data-input\" accept=\"application/json\" />\n      </div>\n    );\n  };\n\n  renderEntryStartPanel = () => {\n    const { hasAcceptedProfile, hasChangedName } = this.props.store.state.activity;\n    const promptForNameAndAvatarBeforeEntry = this.props.hubIsBound ? !hasAcceptedProfile : !hasChangedName;\n\n    return (\n      <div className={entryStyles.entryPanel}>\n        <div className={entryStyles.name}>\n\n          <span>{this.props.hubName}</span>\n\n          {false && this.props.hubChannel.canOrWillIfCreator(\"update_hub\") ? (\n\n            <button\n              className={entryStyles.renameButton}\n              onClick={() =>\n                this.props.performConditionalSignIn(\n                  () => this.props.hubChannel.can(\"update_hub\"),\n                  () => this.pushHistoryState(\"modal\", \"room_settings\"),\n                  \"room-settings\"\n                )\n              }\n            >\n              {this.props.hubName}\n            </button>\n          ) : false ? (\n            <span>{this.props.hubName}</span>\n          ) : <span />}\n          <button onClick={() => this.setState({ watching: true })} className={entryStyles.collapseButton}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </button>\n\n          {false && <button\n            onClick={() => this.toggleFavorited()}\n            className={classNames({\n              [entryStyles.entryFavoriteButton]: true,\n              [entryStyles.favoriteButton]: true,\n              [entryStyles.favorited]: this.isFavorited()\n            })}\n          >\n            <i title=\"Favorite\">\n              <FontAwesomeIcon icon={faStar} />\n            </i>\n          </button>}\n        </div>\n\n        <div className={entryStyles.roomSubtitle}>\n          <FormattedMessage id=\"entry.lobby\" />\n        </div>\n\n        <div className={entryStyles.center}>\n\n          <LobbyChatBox\n            occupantCount={this.occupantCount()}\n            discordBridges={this.discordBridges()}\n            onSendMessage={this.sendMessage}\n          />\n        </div>\n\n        {!this.state.waitingOnAudio ? (\n          <div className={entryStyles.buttonContainer}>\n            {!isMobileVR && (\n              <a\n                onClick={e => {\n                  e.preventDefault();\n                  this.attemptLink();\n                }}\n                className={classNames([entryStyles.secondaryActionButton, entryStyles.wideButton])}\n              >\n                <FormattedMessage id=\"entry.device-medium\" />\n                <div className={entryStyles.buttonSubtitle}>\n                  <FormattedMessage id={isMobile ? \"entry.device-subtitle-mobile\" : \"entry.device-subtitle-desktop\"} />\n                </div>\n              </a>\n            )}\n            {promptForNameAndAvatarBeforeEntry || !this.props.forcedVREntryType ? (\n              <StateLink\n                stateKey=\"entry_step\"\n                stateValue={promptForNameAndAvatarBeforeEntry ? \"profile\" : \"device\"}\n                history={this.props.history}\n                className={classNames([entryStyles.actionButton, entryStyles.wideButton])}\n              >\n                <FormattedMessage id=\"entry.enter-room\" />\n              </StateLink>\n            ) : (\n              <a\n                onClick={e => {\n                  e.preventDefault();\n                  this.handleForceEntry();\n                }}\n                className={classNames([entryStyles.actionButton, entryStyles.wideButton])}\n              >\n                <FormattedMessage id=\"entry.enter-room\" />\n              </a>\n            )}\n          </div>\n        ) : (\n          <div>\n            <div className=\"loader-wrap loader-mid\">\n              <div className=\"loader\">\n                <div className=\"loader-center\" />\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  renderDevicePanel = () => {\n    return (\n      <div className={entryStyles.entryPanel}>\n        <div onClick={() => this.props.history.goBack()} className={entryStyles.back}>\n          <i>\n            <FontAwesomeIcon icon={faArrowLeft} />\n          </i>\n          <FormattedMessage id=\"entry.back\" />\n        </div>\n\n        <div className={entryStyles.title}>\n          <FormattedMessage id=\"entry.choose-device\" />\n        </div>\n\n        {!this.state.waitingOnAudio ? (\n          <div className={entryStyles.buttonContainer}>\n            {this.props.availableVREntryTypes.cardboard !== VR_DEVICE_AVAILABILITY.no && (\n              <div className={entryStyles.secondary} onClick={this.enterVR}>\n                <FormattedMessage id=\"entry.cardboard\" />\n              </div>\n            )}\n            {this.props.availableVREntryTypes.generic !== VR_DEVICE_AVAILABILITY.no && (\n              <GenericEntryButton secondary={true} onClick={this.enterVR} />\n            )}\n            {this.props.availableVREntryTypes.daydream === VR_DEVICE_AVAILABILITY.yes && (\n              <DaydreamEntryButton secondary={true} onClick={this.enterDaydream} subtitle={null} />\n            )}\n            {this.props.availableVREntryTypes.screen === VR_DEVICE_AVAILABILITY.yes && (\n              <TwoDEntryButton onClick={this.enter2D} />\n            )}\n          </div>\n        ) : (\n          <div className={entryStyles.audioLoader}>\n            <div className=\"loader-wrap loader-mid\">\n              <div className=\"loader\">\n                <div className=\"loader-center\" />\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  renderMicPanel = granted => {\n    return (\n      <div className=\"mic-grant-panel\">\n        <div onClick={() => this.props.history.goBack()} className={entryStyles.back}>\n          <i>\n            <FontAwesomeIcon icon={faArrowLeft} />\n          </i>\n          <FormattedMessage id=\"entry.back\" />\n        </div>\n\n        <div className=\"mic-grant-panel__grant-container\">\n          <div className=\"mic-grant-panel__title\">\n            <FormattedMessage id={granted ? \"audio.granted-title\" : \"audio.grant-title\"} />\n          </div>\n          <div className=\"mic-grant-panel__subtitle\">\n            <FormattedMessage id={granted ? \"audio.granted-subtitle\" : \"audio.grant-subtitle\"} />\n          </div>\n          <div className=\"mic-grant-panel__button-container\">\n            {granted ? (\n              <WithHoverSound>\n                <button className=\"mic-grant-panel__button\" onClick={this.onMicGrantButton}>\n                  <img src=\"../assets/images/mic_granted.png\" srcSet=\"../assets/images/mic_granted@2x.png 2x\" />\n                </button>\n              </WithHoverSound>\n            ) : (\n              <WithHoverSound>\n                <button className=\"mic-grant-panel__button\" onClick={this.onMicGrantButton}>\n                  <img src=\"../assets/images/mic_denied.png\" srcSet=\"../assets/images/mic_denied@2x.png 2x\" />\n                </button>\n              </WithHoverSound>\n            )}\n          </div>\n          <div className=\"mic-grant-panel__next-container\">\n            <WithHoverSound>\n              <button className={classNames(\"mic-grant-panel__next\")} onClick={this.onMicGrantButton}>\n                <FormattedMessage id=\"audio.granted-next\" />\n              </button>\n            </WithHoverSound>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderAudioSetupPanel = () => {\n    const subtitleId = isMobilePhoneOrVR ? \"audio.subtitle-mobile\" : \"audio.subtitle-desktop\";\n    return (\n      <div className=\"audio-setup-panel\">\n        <div onClick={() => this.props.history.goBack()} className={entryStyles.back}>\n          <i>\n            <FontAwesomeIcon icon={faArrowLeft} />\n          </i>\n          <FormattedMessage id=\"entry.back\" />\n        </div>\n\n        <div>\n          <div className=\"audio-setup-panel__title\">\n            <FormattedMessage id=\"audio.title\" />\n          </div>\n          <div className=\"audio-setup-panel__subtitle\">\n            {(isMobilePhoneOrVR || this.state.enterInVR) && <FormattedMessage id={subtitleId} />}\n          </div>\n          <div className=\"audio-setup-panel__levels\">\n            <MicLevelWidget\n              scene={this.props.scene}\n              hasAudioTrack={!!this.state.audioTrack}\n              muteOnEntry={this.state.muteOnEntry}\n            />\n            <OutputLevelWidget />\n          </div>\n          {this.state.audioTrack && this.state.micDevices.length > 1 ? (\n            <div className=\"audio-setup-panel__device-chooser\">\n              <WithHoverSound>\n                <select\n                  className=\"audio-setup-panel__device-chooser__dropdown\"\n                  value={this.selectedMicDeviceId()}\n                  onChange={this.micDeviceChanged}\n                >\n                  {this.state.micDevices.map(d => (\n                    <option key={d.deviceId} value={d.deviceId}>\n                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                      {d.label}\n                    </option>\n                  ))}\n                </select>\n              </WithHoverSound>\n              <img\n                className=\"audio-setup-panel__device-chooser__mic-icon\"\n                src=\"../assets/images/mic_small.png\"\n                srcSet=\"../assets/images/mic_small@2x.png 2x\"\n              />\n              <img\n                className=\"audio-setup-panel__device-chooser__dropdown-arrow\"\n                src=\"../assets/images/dropdown_arrow.png\"\n                srcSet=\"../assets/images/dropdown_arrow@2x.png 2x\"\n              />\n            </div>\n          ) : (\n            <div />\n          )}\n          {this.shouldShowHmdMicWarning() && (\n            <div className=\"audio-setup-panel__hmd-mic-warning\">\n              <img\n                src=\"../assets/images/warning_icon.png\"\n                srcSet=\"../assets/images/warning_icon@2x.png 2x\"\n                className=\"audio-setup-panel__hmd-mic-warning__icon\"\n              />\n              <span className=\"audio-setup-panel__hmd-mic-warning__label\">\n                <FormattedMessage id=\"audio.hmd-mic-warning\" />\n              </span>\n            </div>\n          )}\n        </div>\n        <div className=\"audio-setup-panel__mute-container\">\n          <input\n            id=\"mute-on-entry\"\n            type=\"checkbox\"\n            onChange={() => this.setState({ muteOnEntry: !this.state.muteOnEntry })}\n            checked={this.state.muteOnEntry}\n          />\n          <label htmlFor=\"mute-on-entry\">\n            <FormattedMessage id=\"entry.mute-on-entry\" />\n          </label>\n        </div>\n        <div className=\"audio-setup-panel__enter-button-container\">\n          <WithHoverSound>\n            <button className=\"audio-setup-panel__enter-button\" onClick={this.onAudioReadyButton}>\n              <FormattedMessage id=\"audio.enter-now\" />\n            </button>\n          </WithHoverSound>\n        </div>\n      </div>\n    );\n  };\n\n  isInModalOrOverlay = () => {\n    if (\n      this.state.entered &&\n      (IN_ROOM_MODAL_ROUTER_PATHS.find(x => sluglessPath(this.props.history.location).startsWith(x)) ||\n        IN_ROOM_MODAL_QUERY_VARS.find(x => new URLSearchParams(this.props.history.location.search).get(x)))\n    ) {\n      return true;\n    }\n\n    if (\n      !this.state.entered &&\n      (LOBBY_MODAL_ROUTER_PATHS.find(x => sluglessPath(this.props.history.location).startsWith(x)) ||\n        LOBBY_MODAL_QUERY_VARS.find(\n          (x, i) => new URLSearchParams(this.props.history.location.search).get(x) === LOBBY_MODAL_QUERY_VALUES[i]\n        ))\n    ) {\n      return true;\n    }\n\n    return !!(\n      (this.props.history &&\n        this.props.history.location.state &&\n        (this.props.history.location.state.modal || this.props.history.location.state.overlay)) ||\n      this.state.dialog\n    );\n  };\n\n  render() {\n    if (this.props.hide || this.state.hide) return <div />;\n\n    const isExited = this.state.exited || this.props.roomUnavailableReason || this.props.platformUnsupportedReason;\n    const preload = this.props.showPreload;\n\n    const isLoading =\n      !preload &&\n      (!this.state.hideLoader || !this.state.didConnectToNetworkedScene) &&\n      !(this.props.showSafariMicDialog || this.props.showSafariDialog || this.props.showWebAssemblyDialog);\n\n    const rootStyles = {\n      [styles.ui]: true,\n      \"ui-root\": true,\n      \"in-modal-or-overlay\": this.isInModalOrOverlay()\n    };\n    const hasPush = navigator.serviceWorker && \"PushManager\" in window;\n\n    if (this.props.showOAuthDialog && !this.props.showInterstitialPrompt)\n      return (\n        <IntlProvider locale={lang} messages={messages}>\n          <div className={classNames(rootStyles)}>\n            <OAuthDialog onClose={this.props.onCloseOAuthDialog} oauthInfo={this.props.oauthInfo} />\n          </div>\n        </IntlProvider>\n      );\n    if (isExited) return this.renderExitedPane();\n    if (isLoading) {\n      return (\n        <Loader loadingIcon={this.state.airtableAssets.Icon} scene={this.props.scene} finished={this.state.noMoreLoadingUpdates} onLoaded={this.onLoadingFinished} />\n      );\n    }\n    if (this.props.showInterstitialPrompt) return this.renderInterstitialPrompt();\n    if (this.props.isBotMode) return this.renderBotMode();\n\n    const embed = this.props.embed;\n    const entered = this.state.entered;\n    const watching = this.state.watching;\n    const enteredOrWatching = entered || watching;\n    const enteredOrWatchingOrPreload = entered || watching || preload;\n    const baseUrl = `${location.protocol}//${location.host}${location.pathname}`;\n    const inEntryFlow = !!(\n      this.props.history &&\n      this.props.history.location.state &&\n      this.props.history.location.state.entry_step\n    );\n\n    const entryDialog =\n      this.props.availableVREntryTypes &&\n      !preload &&\n      (this.isWaitingForAutoExit() ? (\n        <AutoExitWarning\n          secondsRemaining={this.state.secondsRemainingBeforeAutoExit}\n          onCancel={this.endAutoExitTimer}\n        />\n      ) : (\n        <div className={entryStyles.entryDialog}>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"device\" history={this.props.history}>\n            {this.renderDevicePanel()}\n          </StateRoute>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"mic_grant\" history={this.props.history}>\n            {this.renderMicPanel(false)}\n          </StateRoute>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"mic_granted\" history={this.props.history}>\n            {this.renderMicPanel(true)}\n          </StateRoute>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"audio\" history={this.props.history}>\n            {this.renderAudioSetupPanel()}\n          </StateRoute>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"\" history={this.props.history}>\n            {this.renderEntryStartPanel()}\n          </StateRoute>\n        </div>\n      ));\n\n    const dialogBoxContentsClassNames = classNames({\n      [styles.uiInteractive]: !this.isInModalOrOverlay(),\n      [styles.uiDialogBoxContents]: true,\n      [styles.backgrounded]: this.isInModalOrOverlay()\n    });\n\n    const showVREntryButton = entered && isMobileVR;\n\n    const presenceLogEntries = this.props.presenceLogEntries || [];\n\n    const mediaSource = this.props.mediaSearchStore.getUrlMediaSource(this.props.history.location);\n\n    // Allow scene picker pre-entry, otherwise wait until entry\n    const showMediaBrowser =\n      mediaSource && ([\"scenes\", \"avatars\", \"favorites\"].includes(mediaSource) || this.state.entered);\n    const hasTopTip = (this.props.activeTips && this.props.activeTips.top) || this.state.showVideoShareFailed;\n\n    const clientInfoClientId = getClientInfoClientId(this.props.history.location);\n    const showClientInfo = !!clientInfoClientId;\n\n    const discordBridges = this.discordBridges();\n    const discordSnippet = discordBridges.map(ch => \"#\" + ch).join(\", \");\n    const hasEmbedPresence = this.hasEmbedPresence();\n    const hasDiscordBridges = discordBridges.length > 0;\n    const showBroadcastTip =\n      (hasDiscordBridges || (hasEmbedPresence && !this.props.embed)) && !this.state.broadcastTipDismissed;\n\n    const showInviteTip =\n      !showVREntryButton &&\n      !hasTopTip &&\n      !entered &&\n      !embed &&\n      !preload &&\n      !watching &&\n      !hasTopTip &&\n      !inEntryFlow &&\n      !this.props.store.state.activity.hasOpenedShare &&\n      this.occupantCount() <= 1;\n\n    const showChooseSceneButton =\n    false && \n      !showVREntryButton &&\n      !entered &&\n      !embed &&\n      !preload &&\n      !watching &&\n      !showInviteTip &&\n      !this.state.showShareDialog &&\n      this.props.hubChannel &&\n      this.props.hubChannel.canOrWillIfCreator(\"update_hub\");\n\n    const displayNameOverride = this.props.hubIsBound\n      ? getPresenceProfileForSession(this.props.presences, this.props.sessionId).displayName\n      : null;\n\n    const streaming = this.state.isStreaming;\n    const streamingTip = streaming &&\n      this.state.showStreamingTip && (\n        <div className={classNames([styles.streamingTip])}>\n          <div className={classNames([styles.streamingTipAttachPoint])} />\n          <button\n            title=\"Dismiss\"\n            className={styles.streamingTipClose}\n            onClick={() => this.setState({ showStreamingTip: false })}\n          >\n            <FontAwesomeIcon icon={faTimes} />\n          </button>\n\n          <div className={styles.streamingTipMessage}>\n            <FormattedMessage id=\"tips.streaming\" />\n          </div>\n        </div>\n      );\n\n    const streamer = getCurrentStreamer();\n    const streamerName = streamer && streamer.displayName;\n\n    return (\n      <ReactAudioContext.Provider value={this.state.audioContext}>\n        <IntlProvider locale={lang} messages={messages}>\n          <div className={classNames(rootStyles)}>\n            {this.state.dialog}\n            {preload && (\n              <PreloadOverlay\n                hubName={this.props.hubName}\n                hubScene={this.props.hubScene}\n                baseUrl={baseUrl}\n                onLoadClicked={this.props.onPreloadLoadClicked}\n                logo={this.state.DarkLogo}\n              />\n            )}\n            <StateRoute\n              stateKey=\"overlay\"\n              stateValue=\"profile\"\n              history={this.props.history}\n              render={props => (\n                <ProfileEntryPanel\n                  {...props}\n                  displayNameOverride={displayNameOverride}\n                  finished={() => this.pushHistoryState()}\n                  onClose={() => this.pushHistoryState()}\n                  store={this.props.store}\n                  mediaSearchStore={this.props.mediaSearchStore}\n                  avatarId={props.location.state.detail && props.location.state.detail.avatarId}\n                  logo={this.state.airtableAssets.DarkLogo}\n                />\n              )}\n            />\n            <StateRoute\n              stateKey=\"overlay\"\n              stateValue=\"avatar-editor\"\n              history={this.props.history}\n              render={props => (\n                <AvatarEditor\n                  className={styles.avatarEditor}\n                  signedIn={this.state.signedIn}\n                  onSignIn={this.showSignInDialog}\n                  onSave={() => {\n                    if (props.location.state.detail && props.location.state.detail.returnToProfile) {\n                      this.props.history.goBack();\n                    } else {\n                      this.props.history.goBack();\n                      // We are returning to the media browser. Trigger an update so that the filter switches to\n                      // my-avatars, now that we've saved an avatar.\n                      this.props.mediaSearchStore.sourceNavigateWithNoNav(\"avatars\");\n                    }\n                    this.props.onAvatarSaved();\n                  }}\n                  onClose={() => this.props.history.goBack()}\n                  store={this.props.store}\n                  debug={avatarEditorDebug}\n                  avatarId={props.location.state.detail && props.location.state.detail.avatarId}\n                  hideDelete={props.location.state.detail && props.location.state.detail.hideDelete}\n                />\n              )}\n            />\n            {showMediaBrowser && (\n              <MediaBrowser\n                history={this.props.history}\n                mediaSearchStore={this.props.mediaSearchStore}\n                hubChannel={this.props.hubChannel}\n                onMediaSearchResultEntrySelected={entry => {\n                  if (entry.type === \"hub\") {\n                    this.showNonHistoriedDialog(LeaveRoomDialog, {\n                      destinationUrl: entry.url,\n                      messageType: \"join-room\"\n                    });\n                  } else {\n                    this.props.onMediaSearchResultEntrySelected(entry);\n                  }\n                }}\n                performConditionalSignIn={this.props.performConditionalSignIn}\n              />\n            )}\n            <StateRoute\n              stateKey=\"entry_step\"\n              stateValue=\"profile\"\n              history={this.props.history}\n              render={props => (\n                <ProfileEntryPanel\n                  {...props}\n                  displayNameOverride={displayNameOverride}\n                  finished={() => {\n                    if (this.props.forcedVREntryType) {\n                      this.pushHistoryState();\n                      this.handleForceEntry();\n                    } else {\n                      this.pushHistoryState(\"entry_step\", \"device\");\n                    }\n                  }}\n                  onClose={() => this.pushHistoryState()}\n                  store={this.props.store}\n                  mediaSearchStore={this.props.mediaSearchStore}\n                  avatarId={props.location.state.detail && props.location.state.detail.avatarId}\n                  logo={this.state.airtableAssets.DarkLogo}\n                />\n              )}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"room_settings\"\n              history={this.props.history}\n              render={() =>\n                this.renderDialog(RoomSettingsDialog, {\n                  initialSettings: { name: this.props.hubName, member_permissions: this.props.hubMemberPermissions },\n                  onChange: settings => this.props.hubChannel.updateHub(settings)\n                })\n              }\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"close_room\"\n              history={this.props.history}\n              render={() => this.renderDialog(CloseRoomDialog, { onConfirm: () => this.props.hubChannel.closeHub() })}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"help\"\n              history={this.props.history}\n              render={() => this.renderDialog(HelpDialog)}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"support\"\n              history={this.props.history}\n              render={() => this.renderDialog(InviteTeamDialog, { hubChannel: this.props.hubChannel })}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"create\"\n              history={this.props.history}\n              render={() => this.renderDialog(CreateObjectDialog, { onCreate: this.createObject })}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"change_scene\"\n              history={this.props.history}\n              render={() => this.renderDialog(ChangeSceneDialog, { onChange: this.changeScene })}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"avatar_url\"\n              history={this.props.history}\n              render={() => this.renderDialog(AvatarUrlDialog, { onChange: this.setAvatarUrl })}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"webvr\"\n              history={this.props.history}\n              render={() => this.renderDialog(WebVRRecommendDialog)}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"webrtc-screenshare\"\n              history={this.props.history}\n              render={() => this.renderDialog(WebRTCScreenshareUnsupportedDialog)}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"room_info\"\n              history={this.props.history}\n              render={() =>\n                this.renderDialog(RoomInfoDialog, { scene: this.props.hubScene, hubName: this.props.hubName })\n              }\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"feedback\"\n              history={this.props.history}\n              render={() =>\n                this.renderDialog(FeedbackDialog, {\n                  history: this.props.history,\n                  onClose: () => this.pushHistoryState(\"modal\", null)\n                })\n              }\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"tweet\"\n              history={this.props.history}\n              render={() => this.renderDialog(TweetDialog, { history: this.props.history, onClose: this.closeDialog })}\n            />\n            {showClientInfo && (\n              <ClientInfoDialog\n                clientId={clientInfoClientId}\n                onClose={this.closeDialog}\n                history={this.props.history}\n                presences={this.props.presences}\n                hubChannel={this.props.hubChannel}\n                showNonHistoriedDialog={this.showNonHistoriedDialog}\n                performConditionalSignIn={this.props.performConditionalSignIn}\n              />\n            )}\n            {(!enteredOrWatching || this.isWaitingForAutoExit()) && (\n              <div className={styles.uiDialog}>\n                <PresenceLog\n                  entries={presenceLogEntries}\n                  presences={this.props.presences}\n                  hubId={this.props.hubId}\n                  history={this.props.history}\n                />\n                <div className={dialogBoxContentsClassNames}>{entryDialog}</div>\n              </div>\n            )}\n            {enteredOrWatchingOrPreload && (\n              <PresenceLog\n                inRoom={true}\n                presences={this.props.presences}\n                entries={presenceLogEntries}\n                hubId={this.props.hubId}\n                history={this.props.history}\n              />\n            )}\n            {entered &&\n              this.props.activeTips &&\n              this.props.activeTips.bottom &&\n              (!presenceLogEntries || presenceLogEntries.length === 0) &&\n              !showBroadcastTip && (\n                <Tip tip={this.props.activeTips.bottom} tipRegion=\"bottom\" pushHistoryState={this.pushHistoryState} />\n              )}\n            {enteredOrWatchingOrPreload &&\n              showBroadcastTip && (\n                <Tip\n                  tip={hasDiscordBridges ? \"discord\" : \"embed\"}\n                  broadcastTarget={discordSnippet}\n                  onClose={() => this.confirmBroadcastedRoom()}\n                />\n              )}\n            {enteredOrWatchingOrPreload && (\n              <InWorldChatBox\n                discordBridges={discordBridges}\n                onSendMessage={this.sendMessage}\n                onObjectCreated={this.createObject}\n                enableSpawning={entered}\n                history={this.props.history}\n              />\n            )}\n            {this.state.frozen && (\n              <button className={styles.leaveButton} onClick={() => this.exit(\"left\")}>\n                <FormattedMessage id=\"entry.leave-room\" />\n              </button>\n            )}\n            {!this.state.frozen &&\n              !watching &&\n              !preload && (\n                <div\n                  className={classNames({\n                    [inviteStyles.inviteContainer]: true,\n                    [inviteStyles.inviteContainerBelowHud]: entered,\n                    [inviteStyles.inviteContainerInverted]: this.state.showShareDialog\n                  })}\n                >\n                  {false && !embed &&\n                    !showVREntryButton &&\n                    !hasTopTip &&\n                    !streaming && (\n                      <WithHoverSound>\n                        <button\n                          className={classNames({\n                            [inviteStyles.inviteButton]: true,\n                            [inviteStyles.hideSmallScreens]: this.occupantCount() > 1 && entered\n                          })}\n                          onClick={() => this.toggleShareDialog()}\n                        >\n                          <FormattedMessage id=\"entry.share-button\" />\n                        </button>\n                      </WithHoverSound>\n                    )}\n                  {showChooseSceneButton && (\n                    <button\n                      className={classNames([styles.chooseSceneButton])}\n                      onClick={() => {\n                        this.props.performConditionalSignIn(\n                          () => this.props.hubChannel.can(\"update_hub\"),\n                          () => {\n                            showFullScreenIfAvailable();\n                            this.props.mediaSearchStore.sourceNavigateWithNoNav(\"scenes\");\n                          },\n                          \"change-scene\"\n                        );\n                      }}\n                    >\n                      <FormattedMessage id=\"entry.change-scene\" />\n                    </button>\n                  )}\n\n                  {showInviteTip && (\n                    <div className={styles.inviteTip}>\n                      <div className={styles.inviteTipAttachPoint} />\n                      <FormattedMessage id={`entry.${isMobile ? \"mobile\" : \"desktop\"}.invite-tip`} />\n                    </div>\n                  )}\n                  {!embed &&\n                    !showVREntryButton &&\n                    this.occupantCount() > 1 &&\n                    !hasTopTip &&\n                    entered &&\n                    !streaming && (\n                      <WithHoverSound>\n                        <button onClick={this.onMiniInviteClicked} className={inviteStyles.inviteMiniButton}>\n                          <span>\n                            {this.state.miniInviteActivated\n                              ? navigator.share\n                                ? \"sharing...\"\n                                : \"copied!\"\n                              : \"hub.link/\" + this.props.hubId}\n                          </span>\n                        </button>\n                      </WithHoverSound>\n                    )}\n                  {showVREntryButton && (\n                    <WithHoverSound>\n                      <button className={inviteStyles.enterButton} onClick={() => exit2DInterstitialAndEnterVR(true)}>\n                        <FormattedMessage id=\"entry.enter-in-vr\" />\n                      </button>\n                    </WithHoverSound>\n                  )}\n                  {embed && (\n                    <a href={baseUrl} className={inviteStyles.enterButton} target=\"_blank\" rel=\"noopener noreferrer\">\n                      <FormattedMessage id=\"entry.open-in-window\" />\n                    </a>\n                  )}\n                  {this.state.showShareDialog && (\n                    <InviteDialog\n                      allowShare={!isMobileVR}\n                      entryCode={this.props.hubEntryCode}\n                      embedUrl={\n                        this.props.embedToken && !isMobilePhoneOrVR\n                          ? `${baseUrl}?embed_token=${this.props.embedToken}`\n                          : null\n                      }\n                      hasPush={hasPush}\n                      isSubscribed={\n                        this.state.isSubscribed === undefined ? this.props.initialIsSubscribed : this.state.isSubscribed\n                      }\n                      onSubscribeChanged={() => this.onSubscribeChanged()}\n                      hubId={this.props.hubId}\n                      onClose={() => this.setState({ showShareDialog: false })}\n                    />\n                  )}\n                </div>\n              )}\n            <StateRoute\n              stateKey=\"overlay\"\n              stateValue=\"invite\"\n              history={this.props.history}\n              render={() => (\n                <InviteDialog\n                  allowShare={!!navigator.share}\n                  entryCode={this.props.hubEntryCode}\n                  hubId={this.props.hubId}\n                  isModal={true}\n                  onClose={() => {\n                    this.props.history.goBack();\n                    exit2DInterstitialAndEnterVR();\n                  }}\n                />\n              )}\n            />\n            <StateRoute\n              stateKey=\"overlay\"\n              stateValue=\"link\"\n              history={this.props.history}\n              render={() => (\n                <LinkDialog\n                  linkCode={this.state.linkCode}\n                  onClose={() => {\n                    this.state.linkCodeCancel();\n                    this.setState({ linkCode: null, linkCodeCancel: null });\n                    this.props.history.goBack();\n                  }}\n                />\n              )}\n            />\n            {streaming && (\n              <button\n                title=\"Exit Camera Mode\"\n                onClick={() => this.toggleStreamerMode(false)}\n                className={classNames([styles.cornerButton, styles.cameraModeExitButton])}\n              >\n                <FontAwesomeIcon icon={faTimes} />\n              </button>\n            )}\n            {streamingTip}\n\n            <PresenceList\n              history={this.props.history}\n              presences={this.props.presences}\n              sessionId={this.props.sessionId}\n              signedIn={this.state.signedIn}\n              email={this.props.store.state.credentials.email}\n              onSignIn={this.showSignInDialog}\n              onSignOut={this.signOut}\n            />\n\n            {!streaming &&\n              !preload && (\n                <SettingsMenu\n                  history={this.props.history}\n                  mediaSearchStore={this.props.mediaSearchStore}\n                  isStreaming={streaming}\n                  toggleStreamerMode={this.toggleStreamerMode}\n                  hubChannel={this.props.hubChannel}\n                  hubScene={this.props.hubScene}\n                  scene={this.props.scene}\n                  performConditionalSignIn={this.props.performConditionalSignIn}\n                  showNonHistoriedDialog={this.showNonHistoriedDialog}\n                  pushHistoryState={this.pushHistoryState}\n                  toggleFlyMode={this.toggleFlyMode}\n                />\n              )}\n            {!entered && !streaming && !isMobile && streamerName && <SpectatingLabel name={streamerName} />}\n            {enteredOrWatching && (\n              <div className={styles.topHud}>\n                <TwoDHUD.TopHUD\n                  scene={this.props.scene}\n                  history={this.props.history}\n                  mediaSearchStore={this.props.mediaSearchStore}\n                  muted={this.state.muted}\n                  frozen={this.state.frozen}\n                  watching={this.state.watching}\n                  onWatchEnded={() => this.setState({ watching: false })}\n                  videoShareMediaSource={this.state.videoShareMediaSource}\n                  showVideoShareFailed={this.state.showVideoShareFailed}\n                  hideVideoShareFailedTip={() => this.setState({ showVideoShareFailed: false })}\n                  activeTip={this.props.activeTips && this.props.activeTips.top}\n                  isCursorHoldingPen={this.props.isCursorHoldingPen}\n                  hasActiveCamera={this.props.hasActiveCamera}\n                  onToggleMute={this.toggleMute}\n                  onToggleFlying={this.toggleFlyMode}\n                  flyingEnabled={this.state.flyingEnabled}\n                  onToggleFreeze={this.toggleFreeze}\n                  onSpawnPen={this.spawnPen}\n                  onSpawnCamera={() => this.props.scene.emit(\"action_toggle_camera\")}\n                  onShareVideo={this.shareVideo}\n                  onEndShareVideo={this.endShareVideo}\n                  onShareVideoNotCapable={() => this.showWebRTCScreenshareUnsupportedDialog()}\n                  isStreaming={streaming}\n                  showStreamingTip={this.state.showStreamingTip}\n                  hideStreamingTip={() => {\n                    this.setState({ showStreamingTip: false });\n                  }}\n                />\n                {false && !watching && !streaming ? (\n                  <div className={styles.nagCornerButton}>\n                    <button onClick={() => this.pushHistoryState(\"modal\", \"feedback\")}>\n                      <FormattedMessage id=\"feedback.prompt\" />\n                    </button>\n                  </div>\n                ) : (\n                  <div className={styles.nagCornerButton}>\n                    <button onClick={() => this.setState({ hide: true })}>\n                      <FormattedMessage id=\"hide-ui.prompt\" />\n                    </button>\n                  </div>\n                )}\n\n                {false && !streaming && (\n                  <button\n                    onClick={() => this.toggleFavorited()}\n                    className={classNames({\n                      [entryStyles.favorited]: this.isFavorited(),\n                      [styles.inRoomFavoriteButton]: true\n                    })}\n                  >\n                    <i title=\"Favorite\">\n                      <FontAwesomeIcon icon={faStar} />\n                    </i>\n                  </button>\n                )}\n              </div>\n            )}\n          </div>\n        </IntlProvider>\n      </ReactAudioContext.Provider>\n    );\n  }\n}\n\nexport default UIRoot;\n","import jwtDecode from \"jwt-decode\";\nimport { EventTarget } from \"event-target-shim\";\nimport { Presence } from \"phoenix\";\nimport { migrateChannelToSocket, discordBridgesForPresences } from \"./phoenix-utils\";\n\nconst MS_PER_DAY = 1000 * 60 * 60 * 24;\nconst MS_PER_MONTH = 1000 * 60 * 60 * 24 * 30;\n\nfunction isSameMonth(da, db) {\n  return da.getFullYear() == db.getFullYear() && da.getMonth() == db.getMonth();\n}\n\nfunction isSameDay(da, db) {\n  return isSameMonth(da, db) && da.getDate() == db.getDate();\n}\n\n// Permissions that will be assumed if the user becomes the creator.\nconst HUB_CREATOR_PERMISSIONS = [\"update_hub\", \"update_roles\", \"close_hub\", \"mute_users\", \"kick_users\"];\nconst VALID_PERMISSIONS =\n  HUB_CREATOR_PERMISSIONS + [\"tweet\", \"spawn_camera\", \"spawn_drawing\", \"spawn_and_move_media\", \"pin_objects\"];\n\nexport default class HubChannel extends EventTarget {\n  constructor(store, hubId) {\n    super();\n    this.store = store;\n    this.hubId = hubId;\n    this._signedIn = !!this.store.state.credentials.token;\n    this._permissions = {};\n    this._blockedSessionIds = new Set();\n  }\n\n  get signedIn() {\n    return this._signedIn;\n  }\n\n  // Returns true if this current session has the given permission.\n  can(permission) {\n    if (!VALID_PERMISSIONS.includes(permission)) throw new Error(`Invalid permission name: ${permission}`);\n    return this._permissions && this._permissions[permission];\n  }\n\n  // Returns true if the current session has the given permission, *or* will get the permission\n  // if they sign in and become the creator.\n  canOrWillIfCreator(permission) {\n    if (this._getCreatorAssignmentToken() && HUB_CREATOR_PERMISSIONS.includes(permission)) return true;\n    return this.can(permission);\n  }\n\n  // Migrates this hub channel to a new phoenix channel and presence\n  async migrateToSocket(socket, params) {\n    let presenceBindings;\n\n    // Unbind presence, and then set up bindings after reconnect\n    if (this.presence) {\n      presenceBindings = {\n        onJoin: this.presence.caller.onJoin,\n        onLeave: this.presence.caller.onLeave,\n        onSync: this.presence.caller.onSync\n      };\n\n      this.presence.onJoin(function() {});\n      this.presence.onLeave(function() {});\n      this.presence.onSync(function() {});\n    }\n\n    this.channel = await migrateChannelToSocket(this.channel, socket, params);\n    this.presence = new Presence(this.channel);\n\n    if (presenceBindings) {\n      this.presence.onJoin(presenceBindings.onJoin);\n      this.presence.onLeave(presenceBindings.onLeave);\n      this.presence.onSync(presenceBindings.onSync);\n    }\n  }\n\n  setPhoenixChannel = channel => {\n    this.channel = channel;\n    this.presence = new Presence(channel);\n  };\n\n  setPermissionsFromToken = token => {\n    // Note: token is not verified.\n    this._permissions = jwtDecode(token);\n    this.dispatchEvent(new CustomEvent(\"permissions_updated\"));\n\n    // Refresh the token 1 minute before it expires.\n    const nextRefresh = new Date(this._permissions.exp * 1000 - 60 * 1000) - new Date();\n    setTimeout(async () => {\n      const result = await this.fetchPermissions();\n      this.dispatchEvent(new CustomEvent(\"permissions-refreshed\", { detail: result }));\n    }, nextRefresh);\n  };\n\n  sendEntryEvent = async () => {\n    if (!this.channel) {\n      console.warn(\"No phoenix channel initialized before room entry.\");\n      return;\n    }\n\n    let entryDisplayType = \"Screen\";\n\n    if (navigator.getVRDisplays) {\n      const vrDisplay = (await navigator.getVRDisplays()).find(d => d.isPresenting);\n\n      if (vrDisplay) {\n        entryDisplayType = vrDisplay.displayName;\n      }\n    }\n\n    // This is fairly hacky, but gets the # of initial occupants\n    let initialOccupantCount = 0;\n\n    if (NAF.connection.adapter && NAF.connection.adapter.publisher) {\n      initialOccupantCount = NAF.connection.adapter.publisher.initialOccupants.length;\n    }\n\n    const entryTimingFlags = this.getEntryTimingFlags();\n\n    const entryEvent = {\n      ...entryTimingFlags,\n      initialOccupantCount,\n      entryDisplayType,\n      userAgent: navigator.userAgent\n    };\n\n    this.channel.push(\"events:entered\", entryEvent);\n  };\n\n  beginStreaming() {\n    this.channel.push(\"events:begin_streaming\", {});\n  }\n\n  endStreaming() {\n    this.channel.push(\"events:end_streaming\", {});\n  }\n\n  beginRecording() {\n    this.channel.push(\"events:begin_recording\", {});\n  }\n\n  endRecording() {\n    this.channel.push(\"events:end_recording\", {});\n  }\n\n  getEntryTimingFlags = () => {\n    const entryTimingFlags = { isNewDaily: true, isNewMonthly: true, isNewDayWindow: true, isNewMonthWindow: true };\n    const storedLastEnteredAt = this.store.state.activity.lastEnteredAt;\n\n    if (!storedLastEnteredAt) {\n      return entryTimingFlags;\n    }\n\n    const now = new Date();\n    const lastEntered = new Date(storedLastEnteredAt);\n    const msSinceLastEntered = now - lastEntered;\n\n    // note that new daily and new monthly is based on client local time\n    entryTimingFlags.isNewDaily = !isSameDay(now, lastEntered);\n    entryTimingFlags.isNewMonthly = !isSameMonth(now, lastEntered);\n    entryTimingFlags.isNewDayWindow = msSinceLastEntered > MS_PER_DAY;\n    entryTimingFlags.isNewMonthWindow = msSinceLastEntered > MS_PER_MONTH;\n\n    return entryTimingFlags;\n  };\n\n  sendObjectSpawnedEvent = objectType => {\n    if (!this.channel) {\n      console.warn(\"No phoenix channel initialized before object spawn.\");\n      return;\n    }\n\n    const spawnEvent = {\n      object_type: objectType\n    };\n\n    this.channel.push(\"events:object_spawned\", spawnEvent);\n  };\n\n  sendProfileUpdate = () => {\n    this.channel.push(\"events:profile_updated\", { profile: this.store.state.profile });\n  };\n\n  updateScene = url => {\n    if (!this._permissions.update_hub) return \"unauthorized\";\n    this.channel.push(\"update_scene\", { url });\n  };\n\n  updateHub = settings => {\n    if (!this._permissions.update_hub) return \"unauthorized\";\n    this.channel.push(\"update_hub\", settings);\n  };\n\n  closeHub = () => {\n    if (!this._permissions.close_hub) return \"unauthorized\";\n    this.channel.push(\"close_hub\", {});\n  };\n\n  subscribe = subscription => {\n    this.channel.push(\"subscribe\", { subscription });\n  };\n\n  // If true, will tell the server to not send us any NAF traffic\n  allowNAFTraffic = allow => {\n    this.channel.push(allow ? \"unblock_naf\" : \"block_naf\", {});\n  };\n\n  unsubscribe = subscription => {\n    return new Promise(resolve => this.channel.push(\"unsubscribe\", { subscription }).receive(\"ok\", resolve));\n  };\n\n  sendMessage = (body, type = \"chat\") => {\n    if (!body) return;\n    this.channel.push(\"message\", { body, type });\n  };\n\n  _getCreatorAssignmentToken = () => {\n    const creatorAssignmentTokenEntry =\n      this.store.state.creatorAssignmentTokens &&\n      this.store.state.creatorAssignmentTokens.find(t => t.hubId === this.hubId);\n\n    return creatorAssignmentTokenEntry && creatorAssignmentTokenEntry.creatorAssignmentToken;\n  };\n\n  signIn = token => {\n    return new Promise((resolve, reject) => {\n      const creator_assignment_token = this._getCreatorAssignmentToken();\n\n      this.channel\n        .push(\"sign_in\", { token, creator_assignment_token })\n        .receive(\"ok\", ({ perms_token }) => {\n          this.setPermissionsFromToken(perms_token);\n          this._signedIn = true;\n          resolve();\n        })\n        .receive(\"error\", err => {\n          if (err.reason === \"invalid_token\") {\n            console.warn(\"sign in failed\", err);\n            // Token expired or invalid TODO purge from storage if possible\n            resolve();\n          } else {\n            console.error(\"sign in failed\", err);\n            reject();\n          }\n        });\n    });\n  };\n\n  signOut = () => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"sign_out\")\n        .receive(\"ok\", async () => {\n          this._signedIn = false;\n          await this.fetchPermissions();\n          resolve();\n        })\n        .receive(\"error\", reject);\n    });\n  };\n\n  getHost = () => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"get_host\")\n        .receive(\"ok\", res => {\n          resolve(res.host);\n        })\n        .receive(\"error\", reject);\n    });\n  };\n\n  getTwitterOAuthURL = () => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"oauth\", { type: \"twitter\" })\n        .receive(\"ok\", res => {\n          resolve(res.oauth_url);\n        })\n        .receive(\"error\", reject);\n    });\n  };\n\n  discordBridges = () => {\n    if (!this.presence || !this.presence.state) return [];\n    return discordBridgesForPresences(this.presence.state);\n  };\n\n  pin = (id, gltfNode, fileId, fileAccessToken, promotionToken) => {\n    const payload = { id, gltf_node: gltfNode };\n    if (fileId && promotionToken) {\n      payload.file_id = fileId;\n      payload.file_access_token = fileAccessToken;\n      payload.promotion_token = promotionToken;\n    }\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"pin\", payload)\n        .receive(\"ok\", resolve)\n        .receive(\"error\", reject);\n    });\n  };\n\n  unpin = (id, fileId) => {\n    const payload = { id };\n    if (fileId) {\n      payload.file_id = fileId;\n    }\n    this.channel.push(\"unpin\", payload);\n  };\n\n  fetchPermissions = () => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"refresh_perms_token\")\n        .receive(\"ok\", res => {\n          this.setPermissionsFromToken(res.perms_token);\n          resolve({ permsToken: res.perms_token, permissions: this._permissions });\n        })\n        .receive(\"error\", reject);\n    });\n  };\n\n  mute = sessionId => this.channel.push(\"mute\", { session_id: sessionId });\n  addOwner = sessionId => this.channel.push(\"add_owner\", { session_id: sessionId });\n  removeOwner = sessionId => this.channel.push(\"remove_owner\", { session_id: sessionId });\n\n  hide = sessionId => {\n    NAF.connection.adapter.block(sessionId);\n    this._blockedSessionIds.add(sessionId);\n  };\n\n  unhide = sessionId => {\n    if (!this._blockedSessionIds.has(sessionId)) return;\n    NAF.connection.adapter.unblock(sessionId);\n    NAF.connection.entities.completeSync(sessionId);\n    this._blockedSessionIds.delete(sessionId);\n  };\n\n  isHidden = sessionId => this._blockedSessionIds.has(sessionId);\n\n  kick = async sessionId => {\n    const permsToken = await this.fetchPermissions();\n    NAF.connection.adapter.kick(sessionId, permsToken);\n    this.channel.push(\"kick\", { session_id: sessionId });\n  };\n\n  requestSupport = () => this.channel.push(\"events:request_support\", {});\n  favorite = () => this.channel.push(\"favorite\", {});\n  unfavorite = () => this.channel.push(\"unfavorite\", {});\n\n  disconnect = () => {\n    if (this.channel) {\n      this.channel.socket.disconnect();\n    }\n  };\n}\n","const PHYSICS_CONSTANTS = require(\"aframe-physics-system/src/constants\"),\n  SHAPE = PHYSICS_CONSTANTS.SHAPE,\n  FIT = PHYSICS_CONSTANTS.FIT;\n\nfunction exceedsDensityThreshold(count, subtree) {\n  const bounds = subtree.boundingData;\n  const triangleThreshold = 1000;\n  const minimumVolume = 0.1;\n  const minimumTriangles = 100;\n  const dx = bounds[3] - bounds[0];\n  const dy = bounds[4] - bounds[1];\n  const dz = bounds[5] - bounds[2];\n  const volume = dx * dy * dz;\n\n  if (volume < minimumVolume) {\n    return false;\n  }\n\n  if (count < minimumTriangles) {\n    return false;\n  }\n\n  return count / volume > triangleThreshold;\n}\n\nfunction isHighDensity(subtree) {\n  if (subtree.count) {\n    const result = exceedsDensityThreshold(subtree.count, subtree);\n    return result === true ? true : subtree.count;\n  } else {\n    const leftResult = isHighDensity(subtree.left);\n    if (leftResult === true) return true;\n    const rightResult = isHighDensity(subtree.right);\n    if (rightResult === true) return true;\n\n    const count = leftResult + rightResult;\n    const result = exceedsDensityThreshold(count, subtree);\n    return result === true ? true : count;\n  }\n}\n\nfunction isGeometryHighDensity(geo) {\n  const bvh = geo.boundsTree;\n  const roots = bvh._roots;\n  for (let i = 0; i < roots.length; ++i) {\n    return isHighDensity(roots[i]) === true;\n  }\n  return false;\n}\n\nexport const traverseMeshesAndAddShapes = (function() {\n  const shapePrefix = \"ammo-shape__\";\n  const shapes = [];\n  return function(el) {\n    const meshRoot = el.object3DMap.mesh;\n    while (shapes.length > 0) {\n      const { id, entity } = shapes.pop();\n      entity.removeAttribute(id);\n    }\n\n    console.group(\"traverseMeshesAndAddShapes\");\n\n    if (document.querySelector([\"[ammo-shape__trimesh]\", \"[ammo-shape__heightfield]\"])) {\n      console.log(\"heightfield or trimesh found on scene\");\n    } else {\n      console.log(\"collision not found in scene\");\n\n      let isHighDensity = false;\n      meshRoot.traverse(o => {\n        if (\n          o.isMesh &&\n          (!THREE.Sky || o.__proto__ != THREE.Sky.prototype) &&\n          !o.name.startsWith(\"Floor_Plan\") &&\n          !o.name.startsWith(\"Ground_Plane\") &&\n          o.geometry.boundsTree\n        ) {\n          if (isGeometryHighDensity(o.geometry)) {\n            isHighDensity = true;\n            return;\n          }\n        }\n      });\n\n      let navMesh = null;\n\n      if (isHighDensity) {\n        console.log(\"mesh contains high triangle density region\");\n        navMesh = document.querySelector(\"[nav-mesh]\");\n      }\n\n      if (navMesh) {\n        console.log(`mesh density exceeded, using floor plan only`);\n        navMesh.setAttribute(shapePrefix + \"floorPlan\", {\n          type: SHAPE.MESH,\n          margin: 0.01,\n          fit: FIT.ALL,\n          includeInvisible: true\n        });\n        shapes.push({ id: shapePrefix + \"floorPlan\", entity: navMesh });\n      } else if (!isHighDensity) {\n        el.setAttribute(shapePrefix + \"environment\", {\n          type: SHAPE.MESH,\n          margin: 0.01,\n          fit: FIT.ALL\n        });\n        shapes.push({ id: shapePrefix + \"environment\", entity: el });\n        console.log(\"adding mesh shape for all visible meshes\");\n      } else {\n        el.setAttribute(shapePrefix + \"defaultFloor\", {\n          type: SHAPE.BOX,\n          margin: 0.01,\n          halfExtents: { x: 4000, y: 0.5, z: 4000 },\n          offset: { x: 0, y: -0.5, z: 0 },\n          fit: FIT.MANUAL\n        });\n        shapes.push({ id: shapePrefix + \"defaultFloor\", entity: el });\n        console.log(\"adding default floor collision\");\n      }\n    }\n    console.groupEnd();\n  };\n})();\n","import { spawnChatMessage } from \"./react-components/chat-message\";\nimport { SOUND_QUACK, SOUND_SPECIAL_QUACK } from \"./systems/sound-effects-system\";\n\nconst DUCK_URL = \"https://asset-bundles-prod.reticulum.io/interactables/Ducky/DuckyMesh-438ff8e022.gltf\";\n\n// Handles user-entered messages\nexport default class MessageDispatch {\n  constructor(scene, entryManager, hubChannel, addToPresenceLog, remountUI, mediaSearchStore) {\n    this.scene = scene;\n    this.entryManager = entryManager;\n    this.hubChannel = hubChannel;\n    this.addToPresenceLog = addToPresenceLog;\n    this.remountUI = remountUI;\n    this.mediaSearchStore = mediaSearchStore;\n  }\n\n  log = body => {\n    this.addToPresenceLog({ type: \"log\", body });\n  };\n\n  dispatch = message => {\n    if (message.startsWith(\"/\")) {\n      const commandParts = message.substring(1).split(\" \");\n      this.dispatchCommand(commandParts[0], ...commandParts.slice(1));\n      document.activeElement.blur(); // Commands should blur\n    } else {\n      this.hubChannel.sendMessage(message);\n    }\n  };\n\n  dispatchCommand = (command, ...args) => {\n    const entered = this.scene.is(\"entered\");\n\n    if (!entered) {\n      this.addToPresenceLog({ type: \"log\", body: \"You must enter the room to use this command.\" });\n      return;\n    }\n\n    const playerRig = document.querySelector(\"#player-rig\");\n    const scales = [0.0625, 0.125, 0.25, 0.5, 1.0, 1.5, 3, 5, 7.5, 12.5];\n    const curScale = playerRig.object3D.scale;\n    let err;\n    let physicsSystem;\n    const captureSystem = this.scene.systems[\"capture-system\"];\n\n    switch (command) {\n      case \"fly\":\n        if (playerRig.getAttribute(\"character-controller\").fly !== true) {\n          playerRig.setAttribute(\"character-controller\", \"fly\", true);\n          this.addToPresenceLog({ type: \"log\", body: \"Fly mode enabled.\" });\n        } else {\n          playerRig.setAttribute(\"character-controller\", \"fly\", false);\n          this.addToPresenceLog({ type: \"log\", body: \"Fly mode disabled.\" });\n        }\n        break;\n      case \"grow\":\n        for (let i = 0; i < scales.length; i++) {\n          if (scales[i] > curScale.x) {\n            playerRig.object3D.scale.set(scales[i], scales[i], scales[i]);\n            playerRig.object3D.matrixNeedsUpdate = true;\n            break;\n          }\n        }\n\n        break;\n      case \"shrink\":\n        for (let i = scales.length - 1; i >= 0; i--) {\n          if (curScale.x > scales[i]) {\n            playerRig.object3D.scale.set(scales[i], scales[i], scales[i]);\n            break;\n          }\n        }\n\n        break;\n      case \"leave\":\n        this.entryManager.exitScene();\n        this.remountUI({ roomUnavailableReason: \"left\" });\n        break;\n      case \"duck\":\n        spawnChatMessage(DUCK_URL);\n        if (Math.random() < 0.01) {\n          this.scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SPECIAL_QUACK);\n        } else {\n          this.scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_QUACK);\n        }\n        break;\n      case \"debug\":\n        physicsSystem = document.querySelector(\"a-scene\").systems.physics;\n        physicsSystem.setDebug(!physicsSystem.debug);\n        break;\n      case \"vrstats\":\n        document.getElementById(\"stats\").components[\"stats-plus\"].toggleVRStats();\n        break;\n      case \"scene\":\n        if (args[0]) {\n          err = this.hubChannel.updateScene(args[0]);\n\n          if (err === \"unauthorized\") {\n            this.addToPresenceLog({ type: \"log\", body: \"You do not have permission to change the scene.\" });\n          }\n        } else if (this.hubChannel.canOrWillIfCreator(\"update_hub\")) {\n          this.mediaSearchStore.sourceNavigateWithNoNav(\"scenes\");\n        }\n\n        break;\n      case \"rename\":\n        err = this.hubChannel.rename(args.join(\" \"));\n        if (err === \"unauthorized\") {\n          this.addToPresenceLog({ type: \"log\", body: \"You do not have permission to rename this room.\" });\n        }\n        break;\n      case \"capture\":\n        if (!captureSystem.available()) {\n          this.log(\"Capture unavailable.\");\n          break;\n        }\n        if (args[0] === \"stop\") {\n          if (captureSystem.started()) {\n            captureSystem.stop();\n            this.log(\"Capture stopped.\");\n          } else {\n            this.log(\"Capture already stopped.\");\n          }\n        } else {\n          if (captureSystem.started()) {\n            this.log(\"Capture already running.\");\n          } else {\n            captureSystem.start();\n            this.log(\"Capture started.\");\n          }\n        }\n        break;\n    }\n  };\n}\n","import qsTruthy from \"./utils/qs_truthy\";\nimport nextTick from \"./utils/next-tick\";\nimport pinnedEntityToGltf from \"./utils/pinned-entity-to-gltf\";\n\nconst isBotMode = qsTruthy(\"bot\");\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isDebug = qsTruthy(\"debug\");\nconst qs = new URLSearchParams(location.search);\n\nimport { addMedia, getPromotionTokenForFile } from \"./utils/media-utils\";\nimport {\n  isIn2DInterstitial,\n  handleExitTo2DInterstitial,\n  exit2DInterstitialAndEnterVR,\n  forceExitFrom2DInterstitial\n} from \"./utils/vr-interstitial\";\nimport { ObjectContentOrigins } from \"./object-types\";\nimport { getAvatarSrc, getAvatarType } from \"./utils/avatar-utils\";\nimport { pushHistoryState } from \"./utils/history\";\nimport { SOUND_ENTER_SCENE } from \"./systems/sound-effects-system\";\n\nconst isIOS = AFRAME.utils.device.isIOS();\n\nexport default class SceneEntryManager {\n  constructor(hubChannel, authChannel, availableVREntryTypes, history) {\n    this.hubChannel = hubChannel;\n    this.authChannel = authChannel;\n    this.availableVREntryTypes = availableVREntryTypes;\n    this.store = window.APP.store;\n    this.mediaSearchStore = window.APP.mediaSearchStore;\n    this.scene = document.querySelector(\"a-scene\");\n    this.cursorController = document.querySelector(\"#cursor-controller\");\n    this.playerRig = document.querySelector(\"#player-rig\");\n    this._entered = false;\n    this.performConditionalSignIn = () => {};\n    this.history = history;\n  }\n\n  init = () => {\n    this.whenSceneLoaded(() => {\n      this.cursorController.components[\"cursor-controller\"].enabled = false;\n    });\n  };\n\n  hasEntered = () => {\n    return this._entered;\n  };\n\n  enterScene = async (mediaStream, enterInVR, muteOnEntry) => {\n    const playerCamera = document.querySelector(\"#player-camera\");\n    playerCamera.removeAttribute(\"scene-preview-camera\");\n\n    if (isDebug) {\n      NAF.connection.adapter.session.options.verbose = true;\n    }\n\n    if (enterInVR) {\n      // This specific scene state var is used to check if the user went through the\n      // entry flow and chose VR entry, and is used to preempt VR mode on refreshes.\n      this.scene.addState(\"vr-entered\");\n\n      // HACK - A-Frame calls getVRDisplays at module load, we want to do it here to\n      // force gamepads to become live.\n      navigator.getVRDisplays();\n\n      exit2DInterstitialAndEnterVR(true);\n    }\n\n    if (isMobile || qsTruthy(\"mobile\")) {\n      this.playerRig.setAttribute(\"virtual-gamepad-controls\", {});\n    }\n\n    this._setupPlayerRig();\n    this._setupBlocking();\n    this._setupKicking();\n    this._setupMedia(mediaStream);\n    this._setupCamera();\n\n    if (qsTruthy(\"offline\")) return;\n\n    this._spawnAvatar();\n\n    this.scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_ENTER_SCENE);\n\n    if (isBotMode) {\n      this._runBot(mediaStream);\n      return;\n    }\n\n    if (mediaStream) {\n      NAF.connection.adapter.setLocalMediaStream(mediaStream);\n    }\n\n    this.scene.classList.remove(\"hand-cursor\");\n    this.scene.classList.add(\"no-cursor\");\n\n    this.cursorController.components[\"cursor-controller\"].enabled = true;\n    this._entered = true;\n\n    // Delay sending entry event telemetry until VR display is presenting.\n    (async () => {\n      while (enterInVR && !(await navigator.getVRDisplays()).find(d => d.isPresenting)) {\n        await nextTick();\n      }\n\n      this.hubChannel.sendEntryEvent().then(() => {\n        this.store.update({ activity: { lastEnteredAt: new Date().toISOString() } });\n      });\n    })();\n\n    // Bump stored entry count after 30s\n    setTimeout(() => this.store.bumpEntryCount(), 30000);\n\n    this.scene.addState(\"entered\");\n\n    if (muteOnEntry) {\n      this.scene.emit(\"action_mute\");\n    }\n  };\n\n  whenSceneLoaded = callback => {\n    if (this.scene.hasLoaded) {\n      callback();\n    } else {\n      this.scene.addEventListener(\"loaded\", callback);\n    }\n  };\n\n  enterSceneWhenLoaded = (mediaStream, enterInVR) => {\n    this.whenSceneLoaded(() => this.enterScene(mediaStream, enterInVR));\n  };\n\n  exitScene = () => {\n    if (NAF.connection.adapter && NAF.connection.adapter.localMediaStream) {\n      NAF.connection.adapter.localMediaStream.getTracks().forEach(t => t.stop());\n    }\n    if (this.hubChannel) {\n      this.hubChannel.disconnect();\n    }\n    if (this.scene.renderer) {\n      this.scene.renderer.setAnimationLoop(null); // Stop animation loop, TODO A-Frame should do this\n    }\n    document.body.removeChild(this.scene);\n  };\n\n  _setupPlayerRig = () => {\n    this._setPlayerInfoFromProfile();\n    this.store.addEventListener(\"statechanged\", this._setPlayerInfoFromProfile);\n\n    const avatarScale = parseInt(qs.get(\"avatar_scale\"), 10);\n    if (avatarScale) {\n      this.playerRig.setAttribute(\"scale\", { x: avatarScale, y: avatarScale, z: avatarScale });\n    }\n  };\n\n  _setPlayerInfoFromProfile = async () => {\n    const avatarId = this.store.state.profile.avatarId;\n    const avatarSrc = await getAvatarSrc(avatarId);\n\n    this.playerRig.setAttribute(\"player-info\", { avatarSrc, avatarType: getAvatarType(avatarId) });\n  };\n\n  _setupKicking = () => {\n    // This event is only received by the kicker\n    document.body.addEventListener(\"kicked\", ({ detail }) => {\n      const { clientId: kickedClientId } = detail;\n      const { entities } = NAF.connection.entities;\n      for (const id in entities) {\n        const entity = entities[id];\n        if (NAF.utils.getCreator(entity) !== kickedClientId) continue;\n\n        if (entity.components.networked.data.persistent) {\n          NAF.utils.takeOwnership(entity);\n          this._unpinElement(entity);\n          entity.parentNode.removeChild(entity);\n        } else {\n          NAF.entities.removeEntity(id);\n        }\n      }\n    });\n  };\n\n  _setupBlocking = () => {\n    document.body.addEventListener(\"blocked\", ev => {\n      NAF.connection.entities.removeEntitiesOfClient(ev.detail.clientId);\n    });\n\n    document.body.addEventListener(\"unblocked\", ev => {\n      NAF.connection.entities.completeSync(ev.detail.clientId, true);\n    });\n  };\n\n  _pinElement = async el => {\n    const { networkId } = el.components.networked.data;\n\n    const { fileId, src } = el.components[\"media-loader\"].data;\n\n    let fileAccessToken, promotionToken;\n    if (fileId) {\n      fileAccessToken = new URL(src).searchParams.get(\"token\");\n      const storedPromotionToken = getPromotionTokenForFile(fileId);\n      if (storedPromotionToken) {\n        promotionToken = storedPromotionToken.promotionToken;\n      }\n    }\n\n    const gltfNode = pinnedEntityToGltf(el);\n    if (!gltfNode) return;\n    el.setAttribute(\"networked\", { persistent: true });\n    el.setAttribute(\"media-loader\", { fileIsOwned: true });\n\n    try {\n      await this.hubChannel.pin(networkId, gltfNode, fileId, fileAccessToken, promotionToken);\n      this.store.update({ activity: { hasPinned: true } });\n    } catch (e) {\n      if (e.reason === \"invalid_token\") {\n        await this.authChannel.signOut(this.hubChannel);\n        this._signInAndPinOrUnpinElement(el);\n      } else {\n        console.warn(\"Pin failed for unknown reason\", e);\n      }\n    }\n  };\n\n  _signInAndPinOrUnpinElement = (el, pin) => {\n    const action = pin ? () => this._pinElement(el) : async () => await this._unpinElement(el);\n\n    this.performConditionalSignIn(() => this.hubChannel.signedIn, action, pin ? \"pin\" : \"unpin\", () => {\n      // UI pins/un-pins the entity optimistically, so we undo that here.\n      // Note we have to disable the sign in flow here otherwise this will recurse.\n      this._disableSignInOnPinAction = true;\n      el.setAttribute(\"pinnable\", \"pinned\", !pin);\n      this._disableSignInOnPinAction = false;\n    });\n  };\n\n  _unpinElement = el => {\n    const components = el.components;\n    const networked = components.networked;\n\n    if (!networked || !networked.data || !NAF.utils.isMine(el)) return;\n\n    const networkId = components.networked.data.networkId;\n    el.setAttribute(\"networked\", { persistent: false });\n\n    const mediaLoader = components[\"media-loader\"];\n    const fileId = mediaLoader.data && mediaLoader.data.fileId;\n\n    this.hubChannel.unpin(networkId, fileId);\n  };\n\n  _setupMedia = mediaStream => {\n    const offset = { x: 0, y: 0, z: -1.5 };\n    const spawnMediaInfrontOfPlayer = (src, contentOrigin) => {\n      if (!this.hubChannel.can(\"spawn_and_move_media\")) return;\n      const { entity, orientation } = addMedia(\n        src,\n        \"#interactable-media\",\n        contentOrigin,\n        null,\n        !(src instanceof MediaStream),\n        true\n      );\n      orientation.then(or => {\n        entity.setAttribute(\"offset-relative-to\", {\n          target: \"#player-camera\",\n          offset,\n          orientation: or\n        });\n      });\n\n      return entity;\n    };\n\n    this.scene.addEventListener(\"add_media\", e => {\n      const contentOrigin = e.detail instanceof File ? ObjectContentOrigins.FILE : ObjectContentOrigins.URL;\n\n      spawnMediaInfrontOfPlayer(e.detail, contentOrigin);\n    });\n\n    this.scene.addEventListener(\"pinned\", e => {\n      if (this._disableSignInOnPinAction) return;\n      this._signInAndPinOrUnpinElement(e.detail.el, true);\n    });\n\n    this.scene.addEventListener(\"unpinned\", e => {\n      if (this._disableSignInOnPinAction) return;\n      this._signInAndPinOrUnpinElement(e.detail.el, false);\n    });\n\n    this.scene.addEventListener(\"object_spawned\", e => {\n      this.hubChannel.sendObjectSpawnedEvent(e.detail.objectType);\n    });\n\n    this.scene.addEventListener(\"action_spawn\", () => {\n      handleExitTo2DInterstitial(false, () => window.APP.mediaSearchStore.pushExitMediaBrowserHistory());\n      window.APP.mediaSearchStore.sourceNavigateToDefaultSource();\n    });\n\n    this.scene.addEventListener(\"action_invite\", () => {\n      handleExitTo2DInterstitial(false, () => this.history.goBack());\n      pushHistoryState(this.history, \"overlay\", \"invite\");\n    });\n\n    this.scene.addEventListener(\"action_kick_client\", ({ detail: { clientId } }) => {\n      this.performConditionalSignIn(\n        () => this.hubChannel.can(\"kick_users\"),\n        async () => await window.APP.hubChannel.kick(clientId),\n        \"kick-user\"\n      );\n    });\n\n    this.scene.addEventListener(\"action_mute_client\", ({ detail: { clientId } }) => {\n      this.performConditionalSignIn(\n        () => this.hubChannel.can(\"mute_users\"),\n        () => window.APP.hubChannel.mute(clientId),\n        \"mute-user\"\n      );\n    });\n\n    this.scene.addEventListener(\"action_vr_notice_closed\", () => forceExitFrom2DInterstitial());\n\n    document.addEventListener(\"paste\", e => {\n      if (\n        (e.target.matches(\"input, textarea\") || e.target.contentEditable === \"true\") &&\n        document.activeElement === e.target\n      )\n        return;\n\n      // Never paste into scene if dialog is open\n      const uiRoot = document.querySelector(\".ui-root\");\n      if (uiRoot && uiRoot.classList.contains(\"in-modal-or-overlay\")) return;\n\n      const url = e.clipboardData.getData(\"text\");\n      const files = e.clipboardData.files && e.clipboardData.files;\n      if (url) {\n        spawnMediaInfrontOfPlayer(url, ObjectContentOrigins.URL);\n      } else {\n        for (const file of files) {\n          spawnMediaInfrontOfPlayer(file, ObjectContentOrigins.CLIPBOARD);\n        }\n      }\n    });\n\n    document.addEventListener(\"dragover\", e => e.preventDefault());\n\n    document.addEventListener(\"drop\", e => {\n      e.preventDefault();\n      const url = e.dataTransfer.getData(\"url\");\n      const files = e.dataTransfer.files;\n      if (url) {\n        spawnMediaInfrontOfPlayer(url, ObjectContentOrigins.URL);\n      } else {\n        for (const file of files) {\n          spawnMediaInfrontOfPlayer(file, ObjectContentOrigins.FILE);\n        }\n      }\n    });\n\n    let currentVideoShareEntity;\n    let isHandlingVideoShare = false;\n\n    const shareVideoMediaStream = async constraints => {\n      if (isHandlingVideoShare) return;\n      isHandlingVideoShare = true;\n\n      let newStream;\n\n      try {\n        newStream = await navigator.mediaDevices.getUserMedia(constraints);\n      } catch (e) {\n        isHandlingVideoShare = false;\n        this.scene.emit(\"share_video_failed\");\n        return;\n      }\n\n      const videoTracks = newStream ? newStream.getVideoTracks() : [];\n\n      if (videoTracks.length > 0) {\n        newStream.getVideoTracks().forEach(track => mediaStream.addTrack(track));\n        NAF.connection.adapter.setLocalMediaStream(mediaStream);\n        currentVideoShareEntity = spawnMediaInfrontOfPlayer(mediaStream, undefined);\n\n        // Wire up custom removal event which will stop the stream.\n        currentVideoShareEntity.setAttribute(\"emit-scene-event-on-remove\", \"event:action_end_video_sharing\");\n      }\n\n      this.scene.emit(\"share_video_enabled\", { source: constraints.video.mediaSource });\n      this.scene.addState(\"sharing_video\");\n      isHandlingVideoShare = false;\n    };\n\n    this.scene.addEventListener(\"action_share_camera\", () => {\n      shareVideoMediaStream({\n        video: {\n          mediaSource: \"camera\",\n          width: isIOS ? { max: 1280 } : { max: 1280, ideal: 720 },\n          frameRate: 30\n        }\n      });\n    });\n\n    this.scene.addEventListener(\"action_share_window\", () => {\n      shareVideoMediaStream({\n        video: {\n          mediaSource: \"window\",\n          // Work around BMO 1449832 by calculating the width. This will break for multi monitors if you share anything\n          // other than your current monitor that has a different aspect ratio.\n          width: 720 * (screen.width / screen.height),\n          height: 720,\n          frameRate: 30\n        }\n      });\n    });\n\n    this.scene.addEventListener(\"action_share_screen\", () => {\n      shareVideoMediaStream({\n        video: {\n          mediaSource: \"screen\",\n          // Work around BMO 1449832 by calculating the width. This will break for multi monitors if you share anything\n          // other than your current monitor that has a different aspect ratio.\n          width: 720 * (screen.width / screen.height),\n          height: 720,\n          frameRate: 30\n        }\n      });\n    });\n\n    this.scene.addEventListener(\"action_end_video_sharing\", () => {\n      if (isHandlingVideoShare) return;\n      isHandlingVideoShare = true;\n\n      if (currentVideoShareEntity && currentVideoShareEntity.parentNode) {\n        NAF.utils.takeOwnership(currentVideoShareEntity);\n        currentVideoShareEntity.parentNode.removeChild(currentVideoShareEntity);\n      }\n\n      for (const track of mediaStream.getVideoTracks()) {\n        mediaStream.removeTrack(track);\n      }\n\n      NAF.connection.adapter.setLocalMediaStream(mediaStream);\n      currentVideoShareEntity = null;\n\n      this.scene.emit(\"share_video_disabled\");\n      this.scene.removeState(\"sharing_video\");\n      isHandlingVideoShare = false;\n    });\n\n    this.scene.addEventListener(\"action_selected_media_result_entry\", e => {\n      // TODO spawn in space when no rights\n      const entry = e.detail;\n      if ([\"avatar\", \"avatar_listing\"].includes(entry.type)) return;\n      if ((entry.type === \"scene_listing\" || entry.type === \"scene\") && this.hubChannel.can(\"update_hub\")) return;\n\n      // If user has HMD lifted up or gone through interstitial, delay spawning for now. eventually show a modal\n      const spawnDelay = isIn2DInterstitial() ? 3000 : 0;\n\n      setTimeout(() => {\n        spawnMediaInfrontOfPlayer(entry.url, ObjectContentOrigins.URL);\n      }, spawnDelay);\n\n      exit2DInterstitialAndEnterVR();\n    });\n\n    this.mediaSearchStore.addEventListener(\"media-exit\", () => {\n      exit2DInterstitialAndEnterVR();\n    });\n  };\n\n  _setupCamera = () => {\n    this.scene.addEventListener(\"action_toggle_camera\", () => {\n      if (!this.hubChannel.can(\"spawn_camera\")) return;\n      const myCamera = this.scene.systems[\"camera-tools\"].getMyCamera();\n\n      if (myCamera) {\n        myCamera.parentNode.removeChild(myCamera);\n        this.scene.removeState(\"camera\");\n      } else {\n        const entity = document.createElement(\"a-entity\");\n        entity.setAttribute(\"networked\", { template: \"#interactable-camera\" });\n        entity.setAttribute(\"offset-relative-to\", {\n          target: \"#player-camera\",\n          offset: { x: 0, y: 0, z: -1.5 }\n        });\n        this.scene.appendChild(entity);\n        this.scene.addState(\"camera\");\n      }\n\n      // Need to wait a frame so camera is registered with system.\n      setTimeout(() => this.scene.emit(\"camera_toggled\"));\n    });\n\n    this.scene.addEventListener(\"photo_taken\", e => this.hubChannel.sendMessage({ src: e.detail }, \"photo\"));\n    this.scene.addEventListener(\"video_taken\", e => this.hubChannel.sendMessage({ src: e.detail }, \"video\"));\n  };\n\n  _spawnAvatar = () => {\n    this.playerRig.setAttribute(\"networked\", \"template: #remote-avatar; attachTemplateToLocal: false;\");\n    this.playerRig.setAttribute(\"networked-avatar\", \"\");\n    this.playerRig.emit(\"entered\");\n  };\n\n  _runBot = async mediaStream => {\n    const audioEl = document.createElement(\"audio\");\n    let audioInput;\n    let dataInput;\n\n    // Wait for startup to render form\n    do {\n      audioInput = document.querySelector(\"#bot-audio-input\");\n      dataInput = document.querySelector(\"#bot-data-input\");\n      await nextTick();\n    } while (!audioInput || !dataInput);\n\n    const getAudio = () => {\n      audioEl.loop = true;\n      audioEl.muted = true;\n      audioEl.crossorigin = \"anonymous\";\n      audioEl.src = URL.createObjectURL(audioInput.files[0]);\n      document.body.appendChild(audioEl);\n    };\n\n    if (audioInput.files && audioInput.files.length > 0) {\n      getAudio();\n    } else {\n      audioInput.onchange = getAudio;\n    }\n\n    const camera = document.querySelector(\"#player-camera\");\n    const leftController = document.querySelector(\"#player-left-controller\");\n    const rightController = document.querySelector(\"#player-right-controller\");\n    const getRecording = () => {\n      fetch(URL.createObjectURL(dataInput.files[0]))\n        .then(resp => resp.json())\n        .then(recording => {\n          camera.setAttribute(\"replay\", \"\");\n          camera.components[\"replay\"].poses = recording.camera.poses;\n\n          leftController.setAttribute(\"replay\", \"\");\n          leftController.components[\"replay\"].poses = recording.left.poses;\n          leftController.removeAttribute(\"visibility-by-path\");\n          leftController.removeAttribute(\"track-pose\");\n          leftController.setAttribute(\"visible\", true);\n\n          rightController.setAttribute(\"replay\", \"\");\n          rightController.components[\"replay\"].poses = recording.right.poses;\n          rightController.removeAttribute(\"visibility-by-path\");\n          rightController.removeAttribute(\"track-pose\");\n          rightController.setAttribute(\"visible\", true);\n        });\n    };\n\n    if (dataInput.files && dataInput.files.length > 0) {\n      getRecording();\n    } else {\n      dataInput.onchange = getRecording;\n    }\n\n    await new Promise(resolve => audioEl.addEventListener(\"canplay\", resolve));\n    mediaStream.addTrack(\n      audioEl.captureStream\n        ? audioEl.captureStream().getAudioTracks()[0]\n        : audioEl.mozCaptureStream\n          ? audioEl.mozCaptureStream().getAudioTracks()[0]\n          : null\n    );\n    NAF.connection.adapter.setLocalMediaStream(mediaStream);\n    audioEl.play();\n  };\n}\n","export default function pinnedEntityToGltf(el) {\n  if (!NAF.utils.isMine(el)) return;\n\n  // Construct a GLTF node from this entity\n  const object3D = el.object3D;\n  const components = el.components;\n  const networkId = components.networked.data.networkId;\n\n  const gltfComponents = {};\n  // TODO: Move to MOZ_hubs_components and include version number. Requires migration of existing room objects.\n  // Please do this before making a breaking change to the data stored here.\n  const gltfNode = { name: networkId, extensions: { HUBS_components: gltfComponents } };\n\n  // Adapted from three.js GLTFExporter\n  const equalArray = (x, y) => x.length === y.length && x.every((v, i) => v === y[i]);\n  const rotation = object3D.quaternion.toArray();\n  const position = object3D.position.toArray();\n  const scale = object3D.scale.toArray();\n\n  if (!equalArray(rotation, [0, 0, 0, 1])) gltfNode.rotation = rotation;\n  if (!equalArray(position, [0, 0, 0])) gltfNode.translation = position;\n  if (!equalArray(scale, [1, 1, 1])) gltfNode.scale = scale;\n\n  if (components[\"media-loader\"]) {\n    const mediaSrc = components[\"media-loader\"].data.src;\n    const mediaContentSubtype = components[\"media-loader\"].data.contentSubtype;\n\n    if (mediaSrc.startsWith(\"hubs://\") && mediaSrc.endsWith(\"/video\")) {\n      // Do not persist hubs client video urls\n      return null;\n    }\n\n    gltfComponents.media = { src: mediaSrc, contentSubtype: mediaContentSubtype, id: networkId };\n\n    if (components[\"media-pager\"]) {\n      gltfComponents.media.pageIndex = components[\"media-pager\"].data.index;\n    }\n\n    if (components[\"media-video\"] && components[\"media-video\"].data.videoPaused) {\n      gltfComponents.media.paused = true;\n      gltfComponents.media.time = components[\"media-video\"].data.time;\n    }\n  }\n\n  gltfComponents.pinnable = { pinned: true };\n\n  return gltfNode;\n}\n","import nextTick from \"./utils/next-tick.js\";\nconst INIT_TIMEOUT_MS = 5000;\n\n// Manages web push subscriptions\n//\nfunction urlBase64ToUint8Array(base64String) {\n  const padding = \"=\".repeat((4 - (base64String.length % 4)) % 4);\n  const base64 = (base64String + padding).replace(/-/g, \"+\").replace(/_/g, \"/\");\n\n  const rawData = window.atob(base64);\n  const outputArray = new Uint8Array(rawData.length);\n\n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i);\n  }\n  return outputArray;\n}\n\nexport default class Subscriptions {\n  constructor(hubId) {\n    this.hubId = hubId;\n  }\n\n  setHubChannel = hubChannel => {\n    this.hubChannel = hubChannel;\n  };\n\n  setRegistration = registration => {\n    this.registration = registration;\n  };\n\n  setRegistrationFailed = () => {\n    this.registration = null;\n  };\n\n  setVapidPublicKey = vapidPublicKey => {\n    this.vapidPublicKey = vapidPublicKey;\n  };\n\n  setSubscribed = isSubscribed => {\n    this._isSubscribed = isSubscribed;\n  };\n\n  isSubscribed = () => {\n    return this._isSubscribed;\n  };\n\n  getCurrentEndpoint = async () => {\n    if (!navigator.serviceWorker) return null;\n    const startedAt = performance.now();\n\n    // registration becomes null if failed, non null if registered\n    while (this.registration === undefined && performance.now() - startedAt < INIT_TIMEOUT_MS) await nextTick();\n    if (performance.now() - startedAt >= INIT_TIMEOUT_MS) console.warn(\"Service worker registration timed out.\");\n    if (!this.registration || !this.registration.pushManager) return null;\n\n    while (this.vapidPublicKey === undefined) await nextTick();\n    if (this.vapidPublicKey === null) return null;\n\n    try {\n      const convertedVapidKey = urlBase64ToUint8Array(this.vapidPublicKey);\n\n      if (\n        (await this.registration.pushManager.permissionState({\n          userVisibleOnly: true,\n          applicationServerKey: convertedVapidKey\n        })) !== \"granted\"\n      )\n        return null;\n    } catch (e) {\n      return null; // Chrome can throw here complaining about userVisible if push is not right\n    }\n    const sub = await this.registration.pushManager.getSubscription();\n    if (!sub) return null;\n\n    return sub.endpoint;\n  };\n\n  toggle = async () => {\n    if (!this.registration) return;\n\n    if (this._isSubscribed) {\n      const pushSubscription = await this.registration.pushManager.getSubscription();\n      const res = await this.hubChannel.unsubscribe(pushSubscription);\n\n      if (res && res.has_remaining_subscriptions === false) {\n        pushSubscription.unsubscribe();\n      }\n    } else {\n      let pushSubscription = await this.registration.pushManager.getSubscription();\n\n      if (!pushSubscription) {\n        const convertedVapidKey = urlBase64ToUint8Array(this.vapidPublicKey);\n\n        pushSubscription = await this.registration.pushManager.subscribe({\n          userVisibleOnly: true,\n          applicationServerKey: convertedVapidKey\n        });\n      }\n\n      this.hubChannel.subscribe(pushSubscription);\n    }\n\n    this._isSubscribed = !this._isSubscribed;\n  };\n}\n","import { forEachMaterial } from \"../utils/material-utils\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\nconst invaderPos = new AFRAME.THREE.Vector3();\nconst bubblePos = new AFRAME.THREE.Vector3();\nconst isDebug = qsTruthy(\"debug\");\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\n/**\n * Updates invaders every tick, doing one per frame on mobile VR.\n * testing multiline things\n * @namespace avatar/personal-space-bubble\n * @system personal-space-bubble\n */\nAFRAME.registerSystem(\"personal-space-bubble\", {\n  schema: {\n    debug: { default: false },\n    enabled: { default: true }\n  },\n\n  init() {\n    this.invaders = [];\n    this.bubbles = [];\n    this.tickCount = 0;\n    this._updateInvaders = this._updateInvaders.bind(this);\n  },\n\n  registerBubble(bubble) {\n    this.bubbles.push(bubble);\n  },\n\n  unregisterBubble(bubble) {\n    const index = this.bubbles.indexOf(bubble);\n\n    if (index !== -1) {\n      this.bubbles.splice(index, 1);\n    }\n  },\n\n  registerInvader(invader) {\n    NAF.utils.getNetworkedEntity(invader.el).then(networkedEl => {\n      const owner = NAF.utils.getNetworkOwner(networkedEl);\n\n      if (owner !== NAF.clientId) {\n        this.invaders.push(invader);\n      }\n    });\n  },\n\n  unregisterInvader(invader) {\n    const index = this.invaders.indexOf(invader);\n\n    if (index !== -1) {\n      this.invaders.splice(index, 1);\n    }\n  },\n\n  update() {\n    for (let i = 0; i < this.bubbles.length; i++) {\n      this.bubbles[i].updateDebug();\n    }\n\n    for (let i = 0; i < this.invaders.length; i++) {\n      this.invaders[i].updateDebug();\n      if (!this.data.enabled) {\n        this.invaders[i].setInvading(false);\n      }\n    }\n\n    if (this.data.enabled) {\n      this.el.addState(\"spacebubble\");\n    } else {\n      this.el.removeState(\"spacebubble\");\n    }\n  },\n\n  tick() {\n    this._updateInvaders();\n    this.tickCount++;\n  },\n\n  _updateInvaders: (function() {\n    const tempInvasionFlags = [];\n\n    const setInvaderFlag = (i, invaders, bubble) => {\n      // Hide the invader if inside the bubble\n      const invader = invaders[i];\n      invaderPos.setFromMatrixPosition(invader.el.object3D.matrixWorld);\n\n      const distanceSquared = bubblePos.distanceToSquared(invaderPos);\n      const radiusSum = bubble.data.radius + invader.data.radius;\n\n      if (distanceSquared < radiusSum * radiusSum) {\n        tempInvasionFlags[i] = true;\n      }\n    };\n\n    const flushInvadingFlagsForIndex = (i, invaders) => {\n      if (invaders[i].invading !== tempInvasionFlags[i]) {\n        invaders[i].setInvading(tempInvasionFlags[i]);\n      }\n    };\n\n    return function() {\n      if (!this.data.enabled) return;\n      if (this.invaders.length === 0) return;\n\n      tempInvasionFlags.length = 0;\n\n      // precondition for this stuff -- the bubbles and invaders need updated world matrices.\n      // right now this is satisfied because we update the world matrices in the character controller\n      for (let i = 0; i < this.invaders.length; i++) {\n        this.invaders[i].el.object3D.updateMatrices(); // We read matrixWorld below, update matrices here\n        tempInvasionFlags[i] = false;\n      }\n\n      // Loop through all of the space bubbles (usually one)\n      for (let i = 0; i < this.bubbles.length; i++) {\n        const bubble = this.bubbles[i];\n\n        bubble.el.object3D.updateMatrices();\n        bubblePos.setFromMatrixPosition(bubble.el.object3D.matrixWorld);\n\n        if (!isMobileVR) {\n          for (let j = 0; j < this.invaders.length; j++) {\n            setInvaderFlag(j, this.invaders, bubble);\n          }\n        } else {\n          // Optimization: update one invader per frame on mobile VR\n          setInvaderFlag(this.tickCount % this.invaders.length, this.invaders, bubble);\n        }\n      }\n\n      if (!isMobileVR) {\n        for (let i = 0; i < this.invaders.length; i++) {\n          flushInvadingFlagsForIndex(i, this.invaders);\n        }\n      } else {\n        flushInvadingFlagsForIndex(this.tickCount % this.invaders.length, this.invaders);\n      }\n    };\n  })()\n});\n\nfunction createSphereGizmo(radius) {\n  const geometry = new THREE.SphereBufferGeometry(radius, 10, 10);\n  const wireframe = new THREE.WireframeGeometry(geometry);\n  const line = new THREE.LineSegments(wireframe);\n  line.material.opacity = 0.5;\n  line.material.transparent = true;\n  return line;\n}\n\n// TODO: we need to come up with a more generic way of doing this as this is very specific to our avatars.\n/**\n * Specifies a mesh associated with an invader.\n * @namespace avatar/personal-space-bubble\n * @component space-invader-mesh\n */\nAFRAME.registerComponent(\"space-invader-mesh\", {\n  schema: {\n    meshName: { type: \"string\" }\n  },\n  update() {\n    this.targetMesh = this.el.object3D.getObjectByName(this.data.meshName);\n  }\n});\n\nfunction findInvaderMesh(entity) {\n  while (entity && !(entity.components && entity.components[\"space-invader-mesh\"])) {\n    entity = entity.parentNode;\n  }\n  return entity && entity.components[\"space-invader-mesh\"].targetMesh;\n}\n\nconst DEBUG_OBJ = \"psb-debug\";\n\n/**\n * Represents an entity that can invade a personal space bubble\n * @namespace avatar/personal-space-bubble\n * @component personal-space-invader\n */\nAFRAME.registerComponent(\"personal-space-invader\", {\n  schema: {\n    radius: { type: \"number\", default: 0.1 },\n    useMaterial: { default: false },\n    debug: { default: false },\n    invadingOpacity: { default: 0.3 }\n  },\n\n  init() {\n    const system = this.el.sceneEl.systems[\"personal-space-bubble\"];\n    system.registerInvader(this);\n    if (this.data.useMaterial) {\n      const mesh = findInvaderMesh(this.el);\n      if (mesh) {\n        this.targetMesh = mesh;\n      }\n    }\n    this.invading = false;\n  },\n\n  update() {\n    this.radiusSquared = this.data.radius * this.data.radius;\n    this.updateDebug();\n  },\n\n  updateDebug() {\n    const system = this.el.sceneEl.systems[\"personal-space-bubble\"];\n    if (system.data.debug || this.data.debug) {\n      !this.el.object3DMap[DEBUG_OBJ] && this.el.setObject3D(DEBUG_OBJ, createSphereGizmo(this.data.radius));\n    } else if (this.el.object3DMap[DEBUG_OBJ]) {\n      this.el.removeObject3D(DEBUG_OBJ);\n    }\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"personal-space-bubble\"].unregisterInvader(this);\n  },\n\n  setInvading(invading) {\n    if (this.invading === invading) return;\n\n    if (this.targetMesh && this.targetMesh.material) {\n      forEachMaterial(this.targetMesh, material => {\n        material.opacity = invading ? this.data.invadingOpacity : 1;\n        material.transparent = invading;\n      });\n    } else {\n      this.el.object3D.visible = !invading;\n    }\n    this.invading = invading;\n  }\n});\n\n/**\n * Represents a personal space bubble on an entity.\n * @namespace avatar/personal-space-bubble\n * @component personal-space-bubble\n */\nAFRAME.registerComponent(\"personal-space-bubble\", {\n  schema: {\n    radius: { type: \"number\", default: 0.8 },\n    debug: { default: false }\n  },\n  init() {\n    this.system.registerBubble(this);\n  },\n\n  update() {\n    this.radiusSquared = this.data.radius * this.data.radius;\n    this.updateDebug();\n  },\n\n  updateDebug() {\n    if (!isDebug) return;\n\n    if (this.system.data.debug || this.data.debug) {\n      !this.el.object3DMap[DEBUG_OBJ] && this.el.setObject3D(DEBUG_OBJ, createSphereGizmo(this.data.radius));\n    } else if (this.el.object3DMap[DEBUG_OBJ]) {\n      this.el.removeObject3D(DEBUG_OBJ);\n    }\n  },\n\n  remove() {\n    this.system.unregisterBubble(this);\n  }\n});\n","import { paths } from \"../paths\";\n\n// TODO: Where do these values (500, 10, 2) come from?\nconst modeMod = {\n  [WheelEvent.DOM_DELTA_PIXEL]: 500,\n  [WheelEvent.DOM_DELTA_LINE]: 10,\n  [WheelEvent.DOM_DELTA_PAGE]: 2\n};\n\nconst isInModal = (() => {\n  let uiRoot = null;\n\n  return function() {\n    if (!uiRoot) {\n      uiRoot = document.querySelector(\".ui-root\");\n    }\n\n    return uiRoot && uiRoot.classList.contains(\"in-modal-or-overlay\");\n  };\n})();\n\nexport class MouseDevice {\n  constructor() {\n    this.events = [];\n    this.coords = [0, 0]; // normalized screenspace coordinates in [(-1, 1), (-1, 1)]\n    this.movementXY = [0, 0]; // deltas\n    this.buttonLeft = false;\n    this.buttonRight = false;\n    this.wheel = 0; // delta\n\n    const queueEvent = this.events.push.bind(this.events);\n    const canvas = document.querySelector(\"canvas\");\n    [\"mousedown\", \"wheel\"].map(x => canvas.addEventListener(x, queueEvent));\n    [\"mousemove\", \"mouseup\"].map(x => window.addEventListener(x, queueEvent));\n\n    document.addEventListener(\"wheel\", e => {\n      // Do not capture wheel events if they are being sent to an modal/overlay\n      if (!isInModal()) {\n        e.preventDefault();\n      }\n    });\n  }\n\n  process(event) {\n    if (event.type === \"wheel\") {\n      this.wheel += (event.deltaX + event.deltaY) / modeMod[event.deltaMode];\n      return true;\n    }\n\n    const left = event.button === 0;\n    const right = event.button === 2;\n    this.coords[0] = (event.clientX / window.innerWidth) * 2 - 1;\n    this.coords[1] = -(event.clientY / window.innerHeight) * 2 + 1;\n    this.movementXY[0] += event.movementX;\n    this.movementXY[1] += event.movementY;\n    if (event.type === \"mousedown\" && left) {\n      this.mouseDownLeftThisFrame = true;\n      this.buttonLeft = true;\n    } else if (event.type === \"mousedown\" && right) {\n      this.mouseDownRightThisFrame = true;\n      this.buttonRight = true;\n    } else if (event.type === \"mouseup\" && left) {\n      if (this.mouseDownLeftThisFrame) {\n        return false;\n      }\n      this.buttonLeft = false;\n    } else if (event.type === \"mouseup\" && right) {\n      if (this.mouseDownRightThisFrame) {\n        return false;\n      }\n      this.buttonRight = false;\n    }\n    return true;\n  }\n\n  write(frame) {\n    this.movementXY[0] = 0; // deltas\n    this.movementXY[1] = 0; // deltas\n    this.wheel = 0; // delta\n\n    this.didStopProcessingEarly = false;\n    this.mouseDownLeftThisFrame = false;\n    this.mouseDownRightThisFrame = false;\n\n    for (let i = 0; i < this.events.length; i++) {\n      const event = this.events[i];\n      if (!this.process(event)) {\n        this.didStopProcessingEarly = true;\n        this.events.splice(0, i);\n        break;\n      }\n    }\n\n    if (!this.didStopProcessingEarly) {\n      this.events.length = 0;\n    }\n\n    frame.setVector2(paths.device.mouse.coords, this.coords[0], this.coords[1]);\n    frame.setVector2(paths.device.mouse.movementXY, this.movementXY[0], this.movementXY[1]);\n    frame.setValueType(paths.device.mouse.buttonLeft, this.buttonLeft);\n    frame.setValueType(paths.device.mouse.buttonRight, this.buttonRight);\n    frame.setValueType(paths.device.mouse.wheel, this.wheel);\n  }\n}\n\nwindow.oncontextmenu = e => {\n  if (!isInModal()) {\n    e.preventDefault();\n  }\n};\n","// You might prefer to use this over a Set because iterating over a set allocates memory\nexport function ArrayBackedSet(initialItems) {\n  return {\n    items: initialItems || [],\n    has(item) {\n      return this.items.indexOf(item) !== -1;\n    },\n    add(item) {\n      if (!this.has(item)) {\n        this.items.push(item);\n      }\n    },\n    delete(item) {\n      const index = this.items.indexOf(item);\n      if (index !== -1) {\n        this.items[index] = this.items[this.items.length - 1];\n        this.items.pop();\n      }\n    },\n    clear() {\n      this.items.length = 0;\n    }\n  };\n}\n","import { paths } from \"../paths\";\nimport { ArrayBackedSet } from \"../array-backed-set\";\nexport class KeyboardDevice {\n  constructor() {\n    this.seenKeys = new ArrayBackedSet();\n    this.keys = {};\n    this.events = [];\n\n    [\"keydown\", \"keyup\"].map(x =>\n      document.addEventListener(x, e => {\n        if (!e.key) return;\n        this.events.push(e);\n\n        // Block browser hotkeys for chat command, media browser and freeze\n        if (\n          (e.type === \"keydown\" &&\n            e.key === \"/\" &&\n            ![\"TEXTAREA\", \"INPUT\"].includes(document.activeElement && document.activeElement.nodeName) &&\n            !(document.activeElement && document.activeElement.contentEditable === \"true\")) ||\n          (e.ctrlKey &&\n            (e.key === \"1\" ||\n              e.key === \"2\" ||\n              e.key === \"3\" ||\n              e.key === \"4\" ||\n              e.key === \"5\" ||\n              e.key === \"6\" ||\n              e.key === \"7\" ||\n              e.key === \"8\" ||\n              e.key === \"9\" ||\n              e.key === \"0\")) ||\n          e.key === \"Tab\"\n        ) {\n          e.preventDefault();\n          return false;\n        }\n      })\n    );\n    [\"blur\"].map(x => window.addEventListener(x, this.events.push.bind(this.events)));\n  }\n\n  write(frame) {\n    for (let i = 0; i < this.events.length; i++) {\n      const event = this.events[i];\n      if (event.type === \"blur\") {\n        this.keys = {};\n        this.seenKeys.clear();\n      } else {\n        const key = event.key.toLowerCase();\n        this.keys[key] = event.type === \"keydown\";\n        this.seenKeys.add(key);\n      }\n    }\n\n    this.events.length = 0;\n\n    for (let i = 0; i < this.seenKeys.items.length; i++) {\n      const key = this.seenKeys.items[i];\n      const path = paths.device.keyboard.key(key);\n      frame.setValueType(path, this.keys[key]);\n    }\n  }\n}\n","import { paths } from \"../paths\";\n\nexport class HudDevice {\n  constructor() {\n    this.events = [];\n    document.querySelector(\"a-scene\").addEventListener(\"penButtonPressed\", this.events.push.bind(this.events));\n  }\n\n  write(frame) {\n    frame.setValueType(paths.device.hud.penButton, this.events.length !== 0);\n    while (this.events.length) {\n      this.events.pop();\n    }\n  }\n}\n","import { paths } from \"../paths\";\n\nexport class XboxControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n    this.buttonMap = [\n      { name: \"a\", buttonId: 0 },\n      { name: \"b\", buttonId: 1 },\n      { name: \"x\", buttonId: 2 },\n      { name: \"y\", buttonId: 3 },\n      { name: \"leftBumper\", buttonId: 4 },\n      { name: \"rightBumper\", buttonId: 5 },\n      { name: \"leftTrigger\", buttonId: 6 },\n      { name: \"rightTrigger\", buttonId: 7 },\n      { name: \"back\", buttonId: 8 },\n      { name: \"start\", buttonId: 9 },\n      { name: \"leftJoystick\", buttonId: 10 },\n      { name: \"rightJoystick\", buttonId: 11 },\n      { name: \"dpadUp\", buttonId: 12 },\n      { name: \"dpadDown\", buttonId: 13 },\n      { name: \"dpadLeft\", buttonId: 14 },\n      { name: \"dpadRight\", buttonId: 15 }\n    ];\n    this.axisMap = [\n      { name: \"leftJoystickHorizontal\", axisId: 0 },\n      { name: \"leftJoystickVertical\", axisId: 1 },\n      { name: \"rightJoystickHorizontal\", axisId: 2 },\n      { name: \"rightJoystickVertical\", axisId: 3 }\n    ];\n  }\n\n  write(frame) {\n    this.gamepad = navigator.getGamepads()[this.gamepad.index];\n    if (this.gamepad.connected) {\n      const xboxPaths = paths.device.xbox;\n      this.buttonMap.forEach(b => {\n        const path = xboxPaths.button(b.name);\n        const button = this.gamepad.buttons[b.buttonId];\n        frame.setValueType(path.pressed, !!button.pressed);\n        frame.setValueType(path.touched, !!button.touched);\n        frame.setValueType(path.value, button.value);\n      });\n      frame.setValueType(xboxPaths.axesSum, 0);\n      this.axisMap.forEach(axis => {\n        frame.setValueType(xboxPaths.axis(axis.name), this.gamepad.axes[axis.axisId]);\n        frame.setValueType(xboxPaths.axesSum, frame.get(xboxPaths.axesSum) + Math.abs(this.gamepad.axes[axis.axisId]));\n      });\n\n      if (this.gamepad.hapticActuators && this.gamepad.hapticActuators[0]) {\n        frame.setValueType(paths.haptics.actuators[this.gamepad.hand], this.gamepad.hapticActuators[0]);\n      }\n    }\n  }\n}\n","const THREE = typeof window !== \"undefined\" && window.THREE;\nconst Vector3 = (THREE && THREE.Vector3) || function() {};\nconst Quaternion = (THREE && THREE.Quaternion) || function() {};\nconst forward = typeof window !== \"undefined\" && window.THREE && new THREE.Vector3(0, 0, -1);\nexport function Pose() {\n  return {\n    position: new Vector3(),\n    direction: new Vector3(),\n    orientation: new Quaternion(),\n    fromOriginAndDirection: function(origin, direction) {\n      this.position = origin;\n      this.direction = direction;\n      this.orientation = this.orientation.setFromUnitVectors(forward, direction);\n      return this;\n    },\n    fromCameraProjection: function(camera, normalizedX, normalizedY) {\n      this.position.setFromMatrixPosition(camera.matrixWorld);\n      this.direction\n        .set(normalizedX, normalizedY, 0.5)\n        .unproject(camera)\n        .sub(this.position)\n        .normalize();\n      this.fromOriginAndDirection(this.position, this.direction);\n      return this;\n    },\n    copy: function(pose) {\n      this.position.copy(pose.position);\n      this.direction.copy(pose.direction);\n      this.orientation.copy(pose.orientation);\n    }\n  };\n}\n","// Vector from eyes to elbow (divided by user height).\nconst EYES_TO_ELBOW = { x: 0.175, y: -0.3, z: -0.03 };\n// Vector from eyes to elbow (divided by user height).\nconst FOREARM = { x: 0, y: 0, z: -0.175 };\n\nexport const applyArmModel = (function() {\n  const controllerEuler = new THREE.Euler();\n  const deltaControllerPosition = new THREE.Vector3();\n  const controllerQuaternion = new THREE.Quaternion();\n  const controllerPosition = new THREE.Vector3();\n  return function applyArmModel(gamepadPose, hand, headObject3D, userHeight) {\n    headObject3D.updateMatrices();\n    controllerPosition.copy(headObject3D.position);\n    controllerPosition.y = controllerPosition.y - userHeight;\n    deltaControllerPosition.set(\n      EYES_TO_ELBOW.x * (hand === \"left\" ? -1 : hand === \"right\" ? 1 : 0),\n      EYES_TO_ELBOW.y,\n      EYES_TO_ELBOW.z\n    );\n    deltaControllerPosition.multiplyScalar(userHeight);\n    deltaControllerPosition.applyAxisAngle(headObject3D.up, headObject3D.rotation.y);\n    controllerPosition.add(deltaControllerPosition);\n    deltaControllerPosition.set(FOREARM.x, FOREARM.y, FOREARM.z);\n    deltaControllerPosition.multiplyScalar(userHeight);\n    controllerQuaternion.fromArray(gamepadPose.orientation);\n    controllerEuler.setFromQuaternion(controllerQuaternion);\n    controllerEuler.set(controllerEuler.x, controllerEuler.y, 0);\n    deltaControllerPosition.applyEuler(controllerEuler);\n    controllerPosition.add(deltaControllerPosition);\n    return controllerPosition;\n  };\n})();\n","export const copySittingToStandingTransform = function copySittingToStandingTransform(matrix) {\n  navigator.getVRDisplays &&\n    navigator.getVRDisplays().then(displays => {\n      if (displays[0] && displays[0].stageParameters && displays[0].stageParameters.sittingToStandingTransform) {\n        matrix.fromArray(displays[0].stageParameters.sittingToStandingTransform);\n      }\n    });\n};\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { applyArmModel } from \"../arm-model.js\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\n\nconst TOUCHPAD = paths.device.oculusgo.touchpad;\nconst TRIGGER = paths.device.oculusgo.trigger;\n\nexport class OculusGoControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.pose = new Pose();\n    this.q = new THREE.Quaternion();\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n    this.matrix = new THREE.Matrix4();\n    this.orientation = new THREE.Quaternion();\n\n    // TODO ideally we should just be getting pose from the gamepad\n    // TODO if controller is set to left hand, we still use right hand query here\n    // because otherwise things break.\n    this.rayObject = document.querySelector(\"#player-right-controller\").object3D;\n    this.headObject3D = document.querySelector(\"#player-camera\").object3D;\n    navigator.getGamepads();\n  }\n\n  write(frame) {\n    // Have to call navigator.getGamepads() in order for the gamepad object to update.\n    navigator.getGamepads();\n    if (this.gamepad.connected) {\n      frame.setValueType(TOUCHPAD.axisX, this.gamepad.axes[0]);\n      frame.setValueType(TOUCHPAD.axisY, this.gamepad.axes[1]);\n      frame.setValueType(TOUCHPAD.pressed, this.gamepad.buttons[0].pressed);\n      frame.setValueType(TOUCHPAD.touched, this.gamepad.buttons[0].touched);\n      frame.setValueType(TOUCHPAD.value, this.gamepad.buttons[0].value);\n      frame.setValueType(TRIGGER.pressed, this.gamepad.buttons[1].pressed);\n      frame.setValueType(TRIGGER.touched, this.gamepad.buttons[1].touched);\n      frame.setValueType(TRIGGER.value, this.gamepad.buttons[1].value);\n\n      this.rayObject.updateMatrices();\n      this.rayObject.getWorldQuaternion(this.q);\n      frame.setValueType(paths.actions.rayObjectRotation, this.q);\n      const rayMatrixWorld = this.rayObject.matrixWorld;\n      this.rayObjectRotation.setFromRotationMatrix(rayMatrixWorld);\n      this.pose.position.setFromMatrixPosition(rayMatrixWorld);\n      this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n      this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n      frame.setPose(paths.device.oculusgo.pose, this.pose);\n\n      if (this.gamepad.pose.orientation) {\n        // TODO if controller is set to left hand, we still draw right hand until\n        // bindings are overhauled to handle primary/secondary hands.\n        frame.setMatrix4(\n          paths.device.oculusgo.matrix,\n          this.matrix\n            .compose(\n              applyArmModel(this.gamepad.pose, this.gamepad.hand, this.headObject3D, 1.6),\n              this.orientation.fromArray(this.gamepad.pose.orientation),\n              ONES\n            )\n            .premultiply(this.sittingToStandingMatrix)\n        );\n      }\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { applyArmModel } from \"../arm-model.js\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\n\nconst TOUCHPAD = paths.device.gearVRController.button(\"touchpad\");\nconst TRIGGER = paths.device.gearVRController.button(\"trigger\");\nconst TOUCHPAD_X = paths.device.gearVRController.axis(\"touchpadX\");\nconst TOUCHPAD_Y = paths.device.gearVRController.axis(\"touchpadY\");\n\nexport class GearVRControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n    this.buttonMap = [{ name: \"touchpad\", buttonId: 0 }, { name: \"trigger\", buttonId: 1 }];\n    this.axisMap = [{ name: \"touchpadX\", axisId: 0 }, { name: \"touchpadY\", axisId: 1 }];\n\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.selector = `#player-${gamepad.hand}-controller`;\n    this.pose = new Pose();\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n\n    this.matrix = new THREE.Matrix4();\n    this.orientation = new THREE.Quaternion();\n  }\n\n  write(frame) {\n    // Chrome requires a call to getGamepads() for the gamepad state to update.\n    navigator.getGamepads();\n    if (this.gamepad.connected) {\n      const touchpad = this.gamepad.buttons[0];\n      frame.setValueType(TOUCHPAD.pressed, !!touchpad.pressed);\n      frame.setValueType(TOUCHPAD.touched, !!touchpad.touched);\n      frame.setValueType(TOUCHPAD.value, !!touchpad.value);\n\n      const trigger = this.gamepad.buttons[1];\n      frame.setValueType(TRIGGER.pressed, !!trigger.pressed);\n      frame.setValueType(TRIGGER.touched, !!trigger.touched);\n      frame.setValueType(TRIGGER.value, !!trigger.value);\n\n      frame.setValueType(TOUCHPAD_X, this.gamepad.axes[0]);\n      frame.setValueType(TOUCHPAD_Y, this.gamepad.axes[1]);\n\n      // TODO we should just be getting pose from the gamepad\n      if (!this.rayObject) {\n        this.rayObject = document.querySelector(this.selector).object3D;\n      }\n      this.rayObject.updateMatrixWorld();\n      this.rayObjectRotation.setFromRotationMatrix(this.rayObject.matrixWorld);\n      this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n      this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n      this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n      frame.setPose(paths.device.gearVRController.pose, this.pose);\n      this.headObject3D = this.headObject3D || document.querySelector(\"#player-camera\").object3D;\n      if (this.gamepad.pose.orientation) {\n        frame.setMatrix4(\n          paths.device.gearVRController.matrix,\n          this.matrix\n            .compose(\n              applyArmModel(this.gamepad.pose, this.gamepad.hand, this.headObject3D, 1.6),\n              this.orientation.fromArray(this.gamepad.pose.orientation),\n              ONES\n            )\n            .premultiply(this.sittingToStandingMatrix)\n        );\n      }\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\n\nexport const leftOculusTouchButtonMap = [\n  { name: \"thumbStick\", buttonId: 0 },\n  { name: \"trigger\", buttonId: 1 },\n  { name: \"grip\", buttonId: 2 },\n  { name: \"x\", buttonId: 3 },\n  { name: \"y\", buttonId: 4 }\n];\nexport const rightOculusTouchButtonMap = [\n  { name: \"thumbStick\", buttonId: 0 },\n  { name: \"trigger\", buttonId: 1 },\n  { name: \"grip\", buttonId: 2 },\n  { name: \"a\", buttonId: 3 },\n  { name: \"b\", buttonId: 4 }\n];\n\nconst LEFT_HAND_OFFSET = new THREE.Matrix4().makeTranslation(-0.025, -0.03, 0.1);\nconst RIGHT_HAND_OFFSET = new THREE.Matrix4().makeTranslation(0.025, -0.03, 0.1);\n\nexport class OculusTouchControllerDevice {\n  constructor(gamepad) {\n    this.rayObjectRotation = new THREE.Quaternion();\n\n    // wake the gamepad api up. otherwise it does not report touch controllers.\n    // in chrome it still won't unless you enter vr.\n    navigator.getVRDisplays();\n\n    const buttonMaps = {\n      left: leftOculusTouchButtonMap,\n      right: rightOculusTouchButtonMap\n    };\n\n    const devicePaths = {\n      left: paths.device.leftOculusTouch,\n      right: paths.device.rightOculusTouch\n    };\n\n    this.gamepad = gamepad;\n    this.pose = new Pose();\n    this.buttonMap = buttonMaps[gamepad.hand];\n    this.axisMap = [{ name: \"joyX\", axisId: 0 }, { name: \"joyY\", axisId: 1 }];\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n    this.matrix = new THREE.Matrix4();\n    this.path = devicePaths[gamepad.hand];\n    this.selector = `#player-${gamepad.hand}-controller`;\n\n    this.position = new THREE.Vector3();\n    this.orientation = new THREE.Quaternion();\n    this.handOffset = this.gamepad.hand === \"left\" ? LEFT_HAND_OFFSET : RIGHT_HAND_OFFSET;\n  }\n\n  write(frame) {\n    if (!this.gamepad) return;\n    this.gamepad = navigator.getGamepads()[this.gamepad.index];\n    if (!this.gamepad || !this.gamepad.connected) return;\n\n    this.buttonMap.forEach(b => {\n      const path = this.path.button(b.name);\n      const button = this.gamepad.buttons[b.buttonId];\n      frame.setValueType(path.pressed, !!button.pressed);\n      frame.setValueType(path.touched, !!button.touched);\n      frame.setValueType(path.value, button.value);\n    });\n    frame.setValueType(this.path.axesSum, 0);\n    this.axisMap.forEach(axis => {\n      frame.setValueType(this.path.axis(axis.name), this.gamepad.axes[axis.axisId]);\n      frame.setValueType(this.path.axesSum, frame.get(this.path.axesSum) + Math.abs(this.gamepad.axes[axis.axisId]));\n    });\n\n    this.rayObject = this.rayObject || document.querySelector(this.selector).object3D;\n    this.rayObject.updateMatrixWorld();\n    this.rayObjectRotation.setFromRotationMatrix(this.rayObject.matrixWorld);\n    this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n    this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n    this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n    frame.setPose(this.path.pose, this.pose);\n    if (this.gamepad.pose.position && this.gamepad.pose.orientation) {\n      frame.setMatrix4(\n        this.path.matrix,\n        this.matrix\n          .compose(\n            this.position.fromArray(this.gamepad.pose.position),\n            this.orientation.fromArray(this.gamepad.pose.orientation),\n            ONES\n          )\n          .premultiply(this.sittingToStandingMatrix)\n          .multiply(this.handOffset)\n      );\n    }\n    if (this.gamepad.hapticActuators && this.gamepad.hapticActuators[0]) {\n      frame.setValueType(paths.haptics.actuators[this.gamepad.hand], this.gamepad.hapticActuators[0]);\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { applyArmModel } from \"../arm-model\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\nconst HAND_OFFSET = new THREE.Matrix4().makeTranslation(0, 0, -0.04);\n\nconst TOUCHPAD = paths.device.daydream.button(\"touchpad\");\nconst TOUCHPAD_X = paths.device.daydream.axis(\"touchpadX\");\nconst TOUCHPAD_Y = paths.device.daydream.axis(\"touchpadY\");\nconst POSE = paths.device.daydream.pose;\nconst MATRIX = paths.device.daydream.matrix;\n\nexport class DaydreamControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.selector = `#player-${gamepad.hand || \"right\"}-controller`;\n    this.pose = new Pose();\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n    this.matrix = new THREE.Matrix4();\n    this.orientation = new THREE.Quaternion();\n  }\n\n  write(frame) {\n    this.gamepad = navigator.getGamepads()[0];\n    if (this.gamepad && this.gamepad.connected) {\n      const button = this.gamepad.buttons[0];\n      frame.setValueType(TOUCHPAD.pressed, !!button.pressed);\n      frame.setValueType(TOUCHPAD.touched, !!button.touched);\n      frame.setValueType(TOUCHPAD.value, !!button.value);\n\n      frame.setValueType(TOUCHPAD_X, this.gamepad.axes[0]);\n      frame.setValueType(TOUCHPAD_Y, this.gamepad.axes[1]);\n\n      // TODO ideally we should just be getting pose from the gamepad\n      if (!this.rayObject) {\n        this.rayObject = document.querySelector(this.selector).object3D;\n      }\n      this.rayObject.updateMatrixWorld();\n      this.rayObjectRotation.setFromRotationMatrix(this.rayObject.matrixWorld);\n      this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n      this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n      this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n      frame.setPose(POSE, this.pose);\n\n      this.headObject3D = this.headObject3D || document.querySelector(\"#player-camera\").object3D;\n\n      if (this.gamepad.pose.orientation) {\n        frame.setMatrix4(\n          MATRIX,\n          this.matrix\n            .compose(\n              applyArmModel(this.gamepad.pose, this.gamepad.hand, this.headObject3D, 1.6),\n              this.orientation.fromArray(this.gamepad.pose.orientation),\n              ONES\n            )\n            .premultiply(this.sittingToStandingMatrix)\n            .multiply(HAND_OFFSET)\n        );\n      }\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\nconst HAND_OFFSET = new THREE.Matrix4().compose(\n  new THREE.Vector3(0, 0, 0.13),\n  new THREE.Quaternion().setFromEuler(new THREE.Euler(-40 * THREE.Math.DEG2RAD, 0, 0)),\n  new THREE.Vector3(1, 1, 1)\n);\nconst RAY_ROTATION = new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(1, 0, 0), -Math.PI / 12);\n\nexport class ViveControllerDevice {\n  constructor(gamepad) {\n    // wake the gamepad api up. otherwise it does not report touch controllers.\n    // in chrome it still won't unless you enter vr.\n    navigator.getVRDisplays();\n    this.gamepad = gamepad;\n\n    if (this.gamepad.id === \"HTC Vive Focus Plus Controller\") {\n      this.buttonMap = [\n        { name: \"touchpad\", buttonId: 0 },\n        { name: \"trigger\", buttonId: 1 },\n        { name: \"grip\", buttonId: 2 }\n      ];\n    } else {\n      if (gamepad.axes.length === 2) {\n        this.isViveWand = true;\n      }\n      this.buttonMap = [\n        { name: \"touchpad\", buttonId: 0 },\n        { name: \"trigger\", buttonId: 1 },\n        { name: \"grip\", buttonId: 2 },\n        { name: \"top\", buttonId: 3 }\n      ];\n    }\n    this.axisMap = [\n      { name: \"touchX\", axisId: 0 },\n      { name: \"touchY\", axisId: 1 },\n      { name: \"joyX\", axisId: 2 },\n      { name: \"joyY\", axisId: 3 }\n    ];\n\n    this.pose = new Pose();\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.path = paths.device.vive[gamepad.hand || \"right\"];\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n\n    this.matrix = new THREE.Matrix4();\n    this.position = new THREE.Vector3();\n    this.orientation = new THREE.Quaternion();\n  }\n\n  write(frame) {\n    const gamepads = navigator.getGamepads();\n    if (gamepads.length < this.gamepad.index + 1) {\n      //workaround for: https://bugzilla.mozilla.org/show_bug.cgi?id=1568076\n      return;\n    }\n    this.gamepad = gamepads[this.gamepad.index];\n    if (!this.gamepad.connected) return;\n\n    this.buttonMap.forEach(b => {\n      const path = this.path.button(b.name);\n      const button = this.gamepad.buttons[b.buttonId];\n      frame.setValueType(path.pressed, !!button.pressed);\n      frame.setValueType(path.touched, !!button.touched);\n      frame.setValueType(path.value, button.value);\n    });\n    frame.setValueType(this.path.axesSum, 0);\n    this.axisMap.forEach(axis => {\n      frame.setValueType(this.path.axis(axis.name), this.gamepad.axes[axis.axisId]);\n      frame.setValueType(this.path.axesSum, frame.get(this.path.axesSum) + Math.abs(this.gamepad.axes[axis.axisId]));\n    });\n\n    if (!this.selector) {\n      if (this.gamepad.hand) {\n        this.path = paths.device.vive[this.gamepad.hand];\n        this.selector = `#player-${this.gamepad.hand}-controller`;\n        console.warn(\"gamepad hand eventually specified\");\n      } else {\n        return;\n      }\n    }\n    const el = document.querySelector(this.selector);\n    const rayObject = el.object3D;\n    rayObject.updateMatrixWorld();\n    this.rayObjectRotation.setFromRotationMatrix(rayObject.matrixWorld);\n    this.pose.position.setFromMatrixPosition(rayObject.matrixWorld);\n    this.pose.direction\n      .set(0, 0, -1)\n      .applyQuaternion(RAY_ROTATION)\n      .applyQuaternion(this.rayObjectRotation);\n    this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n    frame.setPose(this.path.pose, this.pose);\n\n    if (this.gamepad.pose.position && this.gamepad.pose.orientation) {\n      frame.setMatrix4(\n        this.path.matrix,\n        this.matrix\n          .compose(\n            this.position.fromArray(this.gamepad.pose.position),\n            this.orientation.fromArray(this.gamepad.pose.orientation),\n            ONES\n          )\n          .premultiply(this.sittingToStandingMatrix)\n          .multiply(HAND_OFFSET)\n      );\n    }\n\n    if (this.gamepad.hapticActuators && this.gamepad.hapticActuators[0]) {\n      frame.setValueType(paths.haptics.actuators[this.gamepad.hand], this.gamepad.hapticActuators[0]);\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\nconst ONES = new THREE.Vector3(1, 1, 1);\nconst HAND_OFFSET = new THREE.Matrix4().compose(\n  new THREE.Vector3(0, -0.017, 0.13),\n  new THREE.Quaternion().setFromEuler(new THREE.Euler(-40 * THREE.Math.DEG2RAD, 0, 0)),\n  new THREE.Vector3(1, 1, 1)\n);\n\nexport class WindowsMixedRealityControllerDevice {\n  constructor(gamepad) {\n    this.rayObject = null;\n    this.rayObjectRotation = new THREE.Quaternion();\n\n    // wake the gamepad api up. otherwise it does not report touch controllers.\n    // in chrome it still won't unless you enter vr.\n    navigator.getVRDisplays();\n\n    this.gamepad = gamepad;\n    this.pose = new Pose();\n\n    if (gamepad.hand) {\n      this.selector = `#player-${gamepad.hand}-controller`;\n    }\n\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n    this.matrix = new THREE.Matrix4();\n    this.position = new THREE.Vector3();\n    this.orientation = new THREE.Quaternion();\n  }\n  write(frame) {\n    this.gamepad = navigator.getGamepads()[this.gamepad.index];\n    if (!this.gamepad.connected) return;\n\n    const path = paths.device.wmr[this.gamepad.hand || \"right\"];\n\n    frame.setValueType(path.touchpad.pressed, this.gamepad.buttons[0].pressed);\n    frame.setValueType(path.touchpad.touched, this.gamepad.buttons[0].touched);\n    frame.setValueType(path.touchpad.value, this.gamepad.buttons[0].value);\n\n    frame.setValueType(path.trigger.pressed, this.gamepad.buttons[1].pressed);\n    frame.setValueType(path.trigger.touched, this.gamepad.buttons[1].touched);\n    frame.setValueType(path.trigger.value, this.gamepad.buttons[1].value);\n\n    frame.setValueType(path.grip.pressed, this.gamepad.buttons[2].pressed);\n    frame.setValueType(path.grip.touched, this.gamepad.buttons[2].touched);\n    frame.setValueType(path.grip.value, this.gamepad.buttons[2].value);\n\n    frame.setValueType(path.menu.pressed, this.gamepad.buttons[3].pressed);\n    frame.setValueType(path.menu.touched, this.gamepad.buttons[3].touched);\n    frame.setValueType(path.menu.value, this.gamepad.buttons[3].value);\n\n    frame.setValueType(path.touchpad.axisX, this.gamepad.axes[0]);\n    frame.setValueType(path.touchpad.axisY, this.gamepad.axes[1]);\n    frame.setValueType(path.joystick.axisX, this.gamepad.axes[2]);\n    frame.setValueType(path.joystick.axisY, this.gamepad.axes[3]);\n\n    if (!this.selector) {\n      if (!this.gamepad.hand) return;\n      this.selector = `#player-${this.gamepad.hand}-controller`;\n    }\n\n    this.rayObject = this.rayObject || document.querySelector(this.selector).object3D;\n    this.rayObject.updateMatrixWorld();\n    this.rayObjectRotation.setFromRotationMatrix(this.rayObject.matrixWorld);\n\n    this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n    this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n    this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n    frame.setPose(path.pose, this.pose);\n\n    if (this.gamepad.pose.position && this.gamepad.pose.orientation) {\n      frame.setMatrix4(\n        path.matrix,\n        this.matrix\n          .compose(\n            this.position.fromArray(this.gamepad.pose.position),\n            this.orientation.fromArray(this.gamepad.pose.orientation),\n            ONES\n          )\n          .premultiply(this.sittingToStandingMatrix)\n          .multiply(HAND_OFFSET)\n      );\n    }\n\n    if (this.gamepad.hapticActuators && this.gamepad.hapticActuators[0]) {\n      frame.setValueType(paths.haptics.actuators[this.gamepad.hand], this.gamepad.hapticActuators[0]);\n    }\n  }\n}\n","import { paths } from \"../paths\";\n\nconst TWOPI = Math.PI * 2;\n\nclass CircularBuffer {\n  constructor(length) {\n    this.items = new Array(length).fill(0);\n    this.writePtr = 0;\n  }\n\n  push(item) {\n    this.items[this.writePtr] = item;\n    this.writePtr = (this.writePtr + 1) % this.items.length;\n  }\n}\n\nconst abs = Math.abs;\n// Input: two numbers between [-Math.PI, Math.PI]\n// Output: difference between them, where -Math.PI === Math.PI\nconst difference = (curr, prev) => {\n  const a = curr - prev;\n  const b = curr + TWOPI - prev;\n  const c = curr - (prev + TWOPI);\n  if (abs(a) < abs(b)) {\n    if (abs(a) < abs(c)) {\n      return a;\n    }\n  }\n  if (abs(b) < abs(c)) {\n    return b;\n  }\n\n  return c;\n};\n\nconst average = a => {\n  let sum = 0;\n  for (let i = 0; i < a.length; i++) {\n    const n = a[i];\n    sum += n;\n  }\n  return sum / a.length;\n};\n\nexport class GyroDevice {\n  constructor() {\n    this.hmdEuler = new THREE.Euler();\n    this.hmdQuaternion = new THREE.Quaternion();\n    this.prevX = this.hmdEuler.x;\n    this.prevY = this.hmdEuler.y;\n    this.dXBuffer = new CircularBuffer(6);\n    this.dYBuffer = new CircularBuffer(6);\n    this.hasPolyfill = window.webvrpolyfill;\n    if (this.hasPolyfill) {\n      this.vrDisplay = window.webvrpolyfill.getPolyfillDisplays()[0];\n      this.frameData = new window.webvrpolyfill.constructor.VRFrameData();\n    }\n  }\n\n  write(frame) {\n    if (!this.hasPolyfill) {\n      return;\n    }\n    const hmdEuler = this.hmdEuler;\n    this.vrDisplay.getFrameData(this.frameData);\n    if (this.frameData.pose.orientation !== null) {\n      this.hmdQuaternion.fromArray(this.frameData.pose.orientation);\n      hmdEuler.setFromQuaternion(this.hmdQuaternion, \"YXZ\");\n    }\n\n    // Don't use gyro values when device is lying flat\n    if (hmdEuler.x < -Math.PI * 0.475) return;\n\n    const dX = THREE.Math.RAD2DEG * difference(hmdEuler.x, this.prevX);\n    const dY = THREE.Math.RAD2DEG * difference(hmdEuler.y, this.prevY);\n\n    this.dXBuffer.push(Math.abs(dX) < 0.001 ? 0 : dX);\n    this.dYBuffer.push(Math.abs(dY) < 0.001 ? 0 : dY);\n\n    this.averageDeltaX = average(this.dXBuffer.items);\n    this.averageDeltaY = average(this.dYBuffer.items);\n\n    this.prevX = hmdEuler.x;\n    this.prevY = hmdEuler.y;\n    frame.setValueType(paths.device.gyro.averageDeltaX, this.averageDeltaX);\n    frame.setValueType(paths.device.gyro.averageDeltaY, this.averageDeltaY);\n  }\n}\n","/* global AFRAME Ammo NAF */\nimport { paths } from \"./userinput/paths\";\nimport { SOUND_HOVER_OR_GRAB } from \"./sound-effects-system\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport { canMove } from \"../utils/permissions-utils\";\n\nfunction findHandCollisionTargetForHand(body) {\n  const driver = AFRAME.scenes[0].systems.physics.driver;\n  const numManifolds = driver.dispatcher.getNumManifolds();\n  const handPtr = Ammo.getPointer(body);\n  for (let i = 0; i < numManifolds; i++) {\n    const persistentManifold = driver.dispatcher.getManifoldByIndexInternal(i);\n    const body0ptr = Ammo.getPointer(persistentManifold.getBody0());\n    const body1ptr = Ammo.getPointer(persistentManifold.getBody1());\n    if (handPtr !== body0ptr && handPtr !== body1ptr) {\n      continue;\n    }\n    const numContacts = persistentManifold.getNumContacts();\n    for (let j = 0; j < numContacts; j++) {\n      const manifoldPoint = persistentManifold.getContactPoint(j);\n      if (manifoldPoint.getDistance() <= 10e-6) {\n        const object3D = driver.els.get(handPtr === body0ptr ? body1ptr : body0ptr).object3D;\n        if (object3D.el && object3D.el.components.tags && object3D.el.components.tags.data.isHandCollisionTarget) {\n          return object3D.el;\n        }\n        return null;\n      }\n    }\n  }\n  return null;\n}\n\nconst remoteHoverTargets = new Map();\nexport function findRemoteHoverTarget(object3D) {\n  if (!object3D) return null;\n  const target = remoteHoverTargets.get(object3D);\n  return target || findRemoteHoverTarget(object3D.parent);\n}\nAFRAME.registerComponent(\"is-remote-hover-target\", {\n  init: function() {\n    remoteHoverTargets.set(this.el.object3D, this.el);\n  },\n  remove: function() {\n    remoteHoverTargets.delete(this.el.object3D);\n  }\n});\n\nfunction isUI(el) {\n  return (\n    el && el.components.tags && (el.components.tags.data.singleActionButton || el.components.tags.data.holdableButton)\n  );\n}\n\nAFRAME.registerSystem(\"interaction\", {\n  updateCursorIntersection: function(intersection) {\n    this.rightRemoteHoverTarget = intersection && findRemoteHoverTarget(intersection.object);\n  },\n\n  isHeld(el) {\n    return this.state.leftHand.held === el || this.state.rightHand.held === el || this.state.rightRemote.held === el;\n  },\n\n  init: function() {\n    this.options = {\n      leftHand: {\n        entity: null,\n        grabPath: paths.actions.leftHand.grab,\n        dropPath: paths.actions.leftHand.drop,\n        hoverFn: findHandCollisionTargetForHand\n      },\n      rightHand: {\n        entity: null,\n        grabPath: paths.actions.rightHand.grab,\n        dropPath: paths.actions.rightHand.drop,\n        hoverFn: findHandCollisionTargetForHand\n      },\n      rightRemote: {\n        entity: null,\n        grabPath: paths.actions.cursor.grab,\n        dropPath: paths.actions.cursor.drop,\n        hoverFn: this.getRightRemoteHoverTarget\n      }\n    };\n    this.state = {\n      leftHand: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      rightHand: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      rightRemote: {\n        hovered: null,\n        held: null,\n        spawning: null\n      }\n    };\n    this.previousState = {\n      leftHand: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      rightHand: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      rightRemote: {\n        hovered: null,\n        held: null,\n        spawning: null\n      }\n    };\n\n    waitForDOMContentLoaded().then(() => {\n      this.cursorController = document.querySelector(\"#cursor-controller\");\n      this.options.leftHand.entity = document.querySelector(\"#player-left-controller\");\n      this.options.rightHand.entity = document.querySelector(\"#player-right-controller\");\n      this.options.rightRemote.entity = document.querySelector(\"#cursor\");\n    });\n  },\n\n  getRightRemoteHoverTarget() {\n    return this.rightRemoteHoverTarget;\n  },\n\n  tickInteractor(options, state) {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    if (state.held) {\n      const networked = state.held.components[\"networked\"];\n      const lostOwnership = networked && networked.data && networked.data.owner !== NAF.clientId;\n      if (userinput.get(options.dropPath) || lostOwnership) {\n        state.held = null;\n      }\n    } else {\n      state.hovered = options.hoverFn.call(this, options.entity.body);\n      if (state.hovered) {\n        const entity = state.hovered;\n        const isHoldable = entity.components.tags && entity.components.tags.data.isHoldable;\n        const isFrozen = this.el.is(\"frozen\");\n        const isPinned = entity.components.pinnable && entity.components.pinnable.data.pinned;\n        if (isHoldable && userinput.get(options.grabPath) && (isFrozen || !isPinned) && canMove(entity)) {\n          state.held = entity;\n        }\n      }\n    }\n  },\n\n  tick2(sfx) {\n    if (!this.el.is(\"entered\")) return;\n\n    Object.assign(this.previousState.rightHand, this.state.rightHand);\n    Object.assign(this.previousState.rightRemote, this.state.rightRemote);\n    Object.assign(this.previousState.leftHand, this.state.leftHand);\n\n    this.rightHandTeleporter =\n      this.rightHandTeleporter || document.querySelector(\"#player-right-controller\").components[\"teleporter\"];\n    this.gazeTeleporter = this.gazeTeleporter || document.querySelector(\"#gaze-teleport\").components[\"teleporter\"];\n\n    if (this.options.leftHand.entity.object3D.visible) {\n      this.tickInteractor(this.options.leftHand, this.state.leftHand);\n    }\n    if (this.options.rightHand.entity.object3D.visible && !this.state.rightRemote.held) {\n      this.tickInteractor(this.options.rightHand, this.state.rightHand);\n    }\n\n    if (!this.state.rightHand.held && !this.state.rightHand.hovered) {\n      this.tickInteractor(this.options.rightRemote, this.state.rightRemote);\n    }\n\n    const rightHandInteracting = this.state.rightHand.hovered || this.state.rightHand.held;\n    const rightHandTeleporting = this.rightHandTeleporter.isTeleporting || this.gazeTeleporter.isTeleporting;\n    const rightRemotePenIntersectingInVR =\n      this.el.sceneEl.is(\"vr-mode\") &&\n      this.state.rightRemote.held &&\n      this.state.rightRemote.held.components &&\n      this.state.rightRemote.held.components.tags &&\n      this.state.rightRemote.held.components.tags.data.isPen &&\n      this.state.rightRemote.held.children[0].components.pen.intersection;\n\n    const enableRightRemote = !rightHandInteracting && !rightHandTeleporting && !rightRemotePenIntersectingInVR;\n\n    this.cursorController.components[\"cursor-controller\"].enabled = enableRightRemote;\n\n    if (!enableRightRemote) {\n      this.state.rightRemote.hovered = null;\n    }\n\n    if (\n      this.state.leftHand.held !== this.previousState.leftHand.held ||\n      this.state.rightHand.held !== this.previousState.rightHand.held ||\n      this.state.rightRemote.held !== this.previousState.rightRemote.held ||\n      (isUI(this.state.rightRemote.hovered) &&\n        this.state.rightRemote.hovered !== this.previousState.rightRemote.hovered)\n    ) {\n      sfx.playSoundOneShot(SOUND_HOVER_OR_GRAB);\n    }\n\n    if (this.el.systems.userinput.get(paths.actions.logInteractionState)) {\n      console.log(\n        \"Interaction System State\\nleftHand held\",\n        this.state.leftHand.held,\n        \"\\nleftHand hovered\",\n        this.state.leftHand.hovered,\n        \"\\nrightHand held\",\n        this.state.rightHand.held,\n        \"\\nrightHand hovered\",\n        this.state.rightHand.hovered,\n        \"\\nrightRemote held\",\n        this.state.rightRemote.held,\n        \"\\nrightRemote hovered\",\n        this.state.rightRemote.hovered\n      );\n    }\n  }\n});\n","import { sets } from \"../sets\";\nimport { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { findRemoteHoverTarget } from \"../../interactions\";\nimport { canMove } from \"../../../utils/permissions-utils\";\n\nconst calculateCursorPose = function(camera, coords, origin, direction, cursorPose) {\n  origin.setFromMatrixPosition(camera.matrixWorld);\n  direction\n    .set(coords[0], coords[1], 0.5)\n    .unproject(camera)\n    .sub(origin)\n    .normalize();\n  cursorPose.fromOriginAndDirection(origin, direction);\n  return cursorPose;\n};\n\nexport class AppAwareMouseDevice {\n  constructor() {\n    this.prevButtonLeft = false;\n    this.clickedOnAnything = false;\n    this.cursorPose = new Pose();\n    this.prevCursorPose = new Pose();\n    this.origin = new THREE.Vector3();\n    this.prevOrigin = new THREE.Vector3();\n    this.direction = new THREE.Vector3();\n    this.prevDirection = new THREE.Vector3();\n  }\n\n  write(frame) {\n    this.prevCursorPose.copy(this.cursorPose);\n    this.prevOrigin.copy(this.origin);\n    this.prevDirection.copy(this.prevDirection);\n\n    if (!this.cursorController) {\n      this.cursorController = document.querySelector(\"[cursor-controller]\").components[\"cursor-controller\"];\n    }\n\n    if (!this.camera) {\n      this.camera = document.querySelector(\"#player-camera\").components.camera.camera;\n    }\n\n    const buttonLeft = frame.get(paths.device.mouse.buttonLeft);\n    const buttonRight = frame.get(paths.device.mouse.buttonRight);\n    if (buttonLeft && !this.prevButtonLeft) {\n      const rawIntersections = [];\n      this.cursorController.raycaster.intersectObjects(\n        AFRAME.scenes[0].systems[\"hubs-systems\"].cursorTargettingSystem.targets,\n        true,\n        rawIntersections\n      );\n      const intersection = rawIntersections.find(x => x.object.el);\n      const remoteHoverTarget = intersection && findRemoteHoverTarget(intersection.object);\n      const userinput = AFRAME.scenes[0].systems.userinput;\n      const isInteractable =\n        intersection &&\n        intersection.object.el.matches(\".pen, .pen *, .video, .video *, .interactable, .interactable *\");\n      const isPinned =\n        remoteHoverTarget && remoteHoverTarget.components.pinnable && remoteHoverTarget.components.pinnable.data.pinned;\n      const isFrozen = AFRAME.scenes[0].is(\"frozen\");\n      this.clickedOnAnything =\n        (isInteractable && (isFrozen || !isPinned) && canMove(remoteHoverTarget)) ||\n        userinput.activeSets.includes(sets.cursorHoldingPen) ||\n        userinput.activeSets.includes(sets.cursorHoldingInteractable) ||\n        userinput.activeSets.includes(sets.cursorHoldingCamera);\n    }\n    this.prevButtonLeft = buttonLeft;\n\n    if (!buttonLeft) {\n      this.clickedOnAnything = false;\n    }\n\n    if ((!this.clickedOnAnything && buttonLeft) || buttonRight) {\n      const movementXY = frame.get(paths.device.mouse.movementXY);\n      if (movementXY) {\n        frame.setVector2(paths.device.smartMouse.cameraDelta, movementXY[0], movementXY[1]);\n      }\n    }\n\n    const coords = frame.get(paths.device.mouse.coords);\n    frame.setPose(\n      paths.device.smartMouse.cursorPose,\n      calculateCursorPose(this.camera, coords, this.origin, this.direction, this.cursorPose)\n    );\n  }\n}\n","export function touchIsAssigned(touch, assignments) {\n  return (\n    assignments.find(assignment => {\n      return assignment.touch.identifier === touch.identifier;\n    }) !== undefined\n  );\n}\n\nexport function jobIsAssigned(job, assignments) {\n  return (\n    assignments.find(assignment => {\n      return assignment.job === job;\n    }) !== undefined\n  );\n}\n\nexport function assign(touch, job, assignments) {\n  if (touchIsAssigned(touch, assignments) || jobIsAssigned(job, assignments)) {\n    console.error(\"cannot reassign touches or jobs. unassign first\");\n    return undefined;\n  }\n  const assignment = { job, touch };\n  assignments.push(assignment);\n  return assignment;\n}\n\nexport function unassign(touch, job, assignments) {\n  function match(assignment) {\n    return assignment.touch.identifier === touch.identifier && assignment.job === job;\n  }\n  assignments.splice(assignments.findIndex(match), 1);\n}\n\nexport function findByJob(job, assignments) {\n  return assignments.find(assignment => {\n    return assignment.job === job;\n  });\n}\n\nexport function findByTouch(touch, assignments) {\n  return assignments.find(assignment => {\n    return assignment.touch.identifier === touch.identifier;\n  });\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { touchIsAssigned, jobIsAssigned, assign, unassign, findByJob, findByTouch } from \"./touchscreen/assignments\";\nimport { findRemoteHoverTarget } from \"../../interactions\";\nimport { canMove } from \"../../../utils/permissions-utils\";\n\nconst MOVE_CURSOR_JOB = \"MOVE CURSOR\";\nconst MOVE_CAMERA_JOB = \"MOVE CAMERA\";\nconst FIRST_PINCHER_JOB = \"FIRST PINCHER\";\nconst SECOND_PINCHER_JOB = \"SECOND PINCHER\";\n\nconst TAP_PATHS = [\n  paths.device.touchscreen.tap1,\n  paths.device.touchscreen.tap2,\n  paths.device.touchscreen.tap3,\n  paths.device.touchscreen.tap4,\n  paths.device.touchscreen.tap5\n];\n\nfunction distance(x1, y1, x2, y2) {\n  const dx = x1 - x2;\n  const dy = y1 - y2;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nconst getPlayerCamera = (() => {\n  let playerCamera;\n\n  return function() {\n    if (!playerCamera) {\n      playerCamera = document.querySelector(\"#player-camera\").components.camera.camera;\n    }\n\n    return playerCamera;\n  };\n})();\n\nfunction shouldMoveCursor(touch, raycaster) {\n  const isCursorGrabbing = !!AFRAME.scenes[0].systems.interaction.state.rightRemote.held;\n  if (isCursorGrabbing) {\n    return true;\n  }\n  const rawIntersections = [];\n  raycaster.setFromCamera(\n    {\n      x: (touch.clientX / window.innerWidth) * 2 - 1,\n      y: -(touch.clientY / window.innerHeight) * 2 + 1\n    },\n    getPlayerCamera()\n  );\n  raycaster.intersectObjects(\n    AFRAME.scenes[0].systems[\"hubs-systems\"].cursorTargettingSystem.targets,\n    true,\n    rawIntersections\n  );\n  const intersection = rawIntersections.find(x => x.object.el);\n  const remoteHoverTarget = intersection && findRemoteHoverTarget(intersection.object);\n  const isInteractable = intersection && intersection.object.el.matches(\".interactable, .interactable *\");\n  const isPinned =\n    remoteHoverTarget && remoteHoverTarget.components.pinnable && remoteHoverTarget.components.pinnable.data.pinned;\n  const isFrozen = AFRAME.scenes[0].is(\"frozen\");\n  return isInteractable && (isFrozen || !isPinned) && canMove(remoteHoverTarget);\n}\n\nexport class AppAwareTouchscreenDevice {\n  constructor() {\n    this.raycaster = new THREE.Raycaster(new THREE.Vector3(), new THREE.Vector3(), 0, 4);\n    this.assignments = [];\n    this.pinch = { initialDistance: 0, currentDistance: 0, delta: 0 };\n\n    // When touches appear, this timestamps and then watches for the high water mark of # of touches\n    this.pendingTap = { maxTouchCount: 0, startedAt: 0 };\n    this.tapIndexToWriteNextFrame = 0;\n\n    this.events = [];\n    [\"touchstart\", \"touchend\", \"touchmove\", \"touchcancel\"].map(x =>\n      document.querySelector(\"canvas\").addEventListener(x, this.events.push.bind(this.events))\n    );\n  }\n\n  end(touch) {\n    if (!touchIsAssigned(touch, this.assignments)) {\n      console.warn(\"touch does not have a job\", touch);\n    } else {\n      const assignment = findByTouch(touch, this.assignments);\n      switch (assignment.job) {\n        case MOVE_CURSOR_JOB:\n        case MOVE_CAMERA_JOB:\n          // If grab was being delayed, we should fire the initial grab and also delay the unassignment\n          // to ensure we write at least two frames with the grab down (since the action set will change)\n          // and otherwise we'd not see the falling xform.\n          if (assignment.framesUntilGrab >= 0) {\n            assignment.framesUntilUnassign = assignment.framesUntilGrab + 2;\n          } else {\n            unassign(assignment.touch, assignment.job, this.assignments);\n          }\n\n          break;\n        case FIRST_PINCHER_JOB:\n          unassign(assignment.touch, assignment.job, this.assignments);\n          this.pinch = { initialDistance: 0, currentDistance: 0, delta: 0 };\n\n          if (jobIsAssigned(SECOND_PINCHER_JOB, this.assignments)) {\n            const second = findByJob(SECOND_PINCHER_JOB, this.assignments);\n            unassign(second.touch, second.job, this.assignments);\n            if (jobIsAssigned(MOVE_CAMERA_JOB, this.assignments)) {\n              // reassign secondPincher to firstPincher\n              const first = assign(second.touch, FIRST_PINCHER_JOB, this.assignments);\n              first.clientX = second.clientX;\n              first.clientY = second.clientY;\n            } else {\n              // reassign secondPincher to moveCamera\n              const cameraMover = assign(second.touch, MOVE_CAMERA_JOB, this.assignments);\n              cameraMover.clientX = second.clientX;\n              cameraMover.clientY = second.clientY;\n              cameraMover.delta = [0, 0];\n            }\n          }\n          break;\n        case SECOND_PINCHER_JOB:\n          unassign(assignment.touch, assignment.job, this.assignments);\n          this.pinch = { initialDistance: 0, currentDistance: 0, delta: 0 };\n          if (jobIsAssigned(FIRST_PINCHER_JOB, this.assignments) && !jobIsAssigned(MOVE_CAMERA_JOB, this.assignments)) {\n            //reassign firstPincher to moveCamera\n            const first = findByJob(FIRST_PINCHER_JOB, this.assignments);\n            unassign(first.touch, first.job, this.assignments);\n            const cameraMover = assign(first.touch, MOVE_CAMERA_JOB, this.assignments);\n            cameraMover.clientX = first.clientX;\n            cameraMover.clientY = first.clientY;\n            cameraMover.delta = [0, 0];\n          }\n          break;\n      }\n    }\n\n    // Touches cleared, determine what to do with pending tap\n    if (this.assignments.length === 0) {\n      if (this.pendingTap.maxTouchCount > 0 && performance.now() - this.pendingTap.startedAt <= 125) {\n        this.tapIndexToWriteNextFrame = this.pendingTap.maxTouchCount;\n      }\n\n      this.pendingTap = { maxTouchCount: 0 };\n    }\n  }\n\n  move(touch) {\n    if (!touchIsAssigned(touch, this.assignments)) {\n      if (!touch.target.classList[0] || !touch.target.classList[0].startsWith(\"virtual-gamepad-controls\")) {\n        console.warn(\"touch does not have job\", touch);\n      }\n      return;\n    }\n\n    const assignment = findByTouch(touch, this.assignments);\n    switch (assignment.job) {\n      case MOVE_CURSOR_JOB:\n        assignment.cursorPose.fromCameraProjection(\n          getPlayerCamera(),\n          (touch.clientX / window.innerWidth) * 2 - 1,\n          -(touch.clientY / window.innerHeight) * 2 + 1\n        );\n        break;\n      case MOVE_CAMERA_JOB:\n        assignment.delta[0] += touch.clientX - assignment.clientX;\n        assignment.delta[1] += touch.clientY - assignment.clientY;\n        assignment.clientX = touch.clientX;\n        assignment.clientY = touch.clientY;\n        break;\n      case FIRST_PINCHER_JOB:\n      case SECOND_PINCHER_JOB:\n        assignment.clientX = touch.clientX;\n        assignment.clientY = touch.clientY;\n        if (jobIsAssigned(FIRST_PINCHER_JOB, this.assignments) && jobIsAssigned(SECOND_PINCHER_JOB, this.assignments)) {\n          const first = findByJob(FIRST_PINCHER_JOB, this.assignments);\n          const second = findByJob(SECOND_PINCHER_JOB, this.assignments);\n          const currentDistance = distance(first.clientX, first.clientY, second.clientX, second.clientY);\n          this.pinch.delta += currentDistance - this.pinch.currentDistance;\n          this.pinch.currentDistance = currentDistance;\n        }\n        break;\n    }\n  }\n\n  start(touch) {\n    if (touchIsAssigned(touch, this.assignments)) {\n      console.error(\"touch already has a job\");\n      return;\n    }\n\n    const isFirstTouch = this.assignments.length === 0;\n    const isSecondTouch = this.assignments.length === 1;\n    const isThirdTouch = this.assignments.length === 2;\n\n    const hasSecondPinch = !!findByJob(SECOND_PINCHER_JOB, this.assignments);\n\n    if (isFirstTouch || (isThirdTouch && hasSecondPinch)) {\n      let assignment;\n\n      // First touch or third touch and other two fingers were pinching\n      if (shouldMoveCursor(touch, this.raycaster)) {\n        assignment = assign(touch, MOVE_CURSOR_JOB, this.assignments);\n\n        // Grabbing objects is delayed by several frames:\n        // - We don't want the physics constraint to be applied too early, which results in crazy velocities\n        // - We don't want to mis-trigger grabs if the user is about to put down a second finger.\n        assignment.framesUntilGrab = 2;\n      } else {\n        assignment = assign(touch, MOVE_CAMERA_JOB, this.assignments);\n        assignment.delta = [0, 0];\n      }\n\n      assignment.clientX = touch.clientX;\n      assignment.clientY = touch.clientY;\n\n      // On touch down, we always move the cursor on the first frame, but the MOVE_CURSOR_JOB indicates\n      // the touch will then track the cursor (instead of the camera)\n      assignment.cursorPose = new Pose().fromCameraProjection(\n        getPlayerCamera(),\n        (touch.clientX / window.innerWidth) * 2 - 1,\n        -(touch.clientY / window.innerHeight) * 2 + 1\n      );\n    } else if (isSecondTouch || isThirdTouch) {\n      const cursorJob = findByJob(MOVE_CURSOR_JOB, this.assignments);\n\n      if (isSecondTouch && cursorJob && cursorJob.framesUntilGrab < 0) {\n        // The second touch is happening after grab activated, so assign this touch to first pinch.\n        const first = assign(touch, FIRST_PINCHER_JOB, this.assignments);\n        first.clientX = touch.clientX;\n        first.clientY = touch.clientY;\n      } else {\n        // Second or third touch, but third touch only if not pinching\n        if (isSecondTouch) {\n          // The second touch is happening before the grab activated, so re-assign the first\n          // to the first pinch, and effectively cancel the grab.\n          const previousAssignment = this.assignments[0];\n          unassign(previousAssignment.touch, previousAssignment.job, this.assignments);\n          const first = assign(previousAssignment.touch, FIRST_PINCHER_JOB, this.assignments);\n          first.clientX = previousAssignment.clientX;\n          first.clientY = previousAssignment.clientY;\n        }\n\n        const first = findByJob(FIRST_PINCHER_JOB, this.assignments);\n\n        if (!first) {\n          const first = assign(touch, FIRST_PINCHER_JOB, this.assignments);\n          first.clientX = touch.clientX;\n          first.clientY = touch.clientY;\n          return;\n        } else {\n          const second = assign(touch, SECOND_PINCHER_JOB, this.assignments);\n          second.clientX = touch.clientX;\n          second.clientY = touch.clientY;\n\n          const initialDistance = distance(first.clientX, first.clientY, second.clientX, second.clientY);\n\n          this.pinch = {\n            initialDistance,\n            currentDistance: initialDistance,\n            delta: 0\n          };\n        }\n      }\n    }\n\n    if (this.pendingTap.maxTouchCount === 0 && this.assignments.length > 0) {\n      this.pendingTap.startedAt = performance.now();\n    }\n\n    this.pendingTap.maxTouchCount = Math.max(this.pendingTap.maxTouchCount, this.assignments.length);\n  }\n\n  process(event) {\n    switch (event.type) {\n      case \"touchstart\":\n        for (const touch of event.changedTouches) {\n          this.start(touch);\n        }\n        break;\n      case \"touchmove\":\n        for (const touch of event.touches) {\n          this.move(touch);\n        }\n        break;\n      case \"touchend\":\n      case \"touchcancel\":\n        for (const touch of event.changedTouches) {\n          this.end(touch);\n        }\n        break;\n    }\n  }\n\n  write(frame) {\n    if (this.pinch) {\n      this.pinch.delta = 0;\n    }\n    const cameraMover =\n      jobIsAssigned(MOVE_CAMERA_JOB, this.assignments) && findByJob(MOVE_CAMERA_JOB, this.assignments);\n    if (cameraMover) {\n      cameraMover.delta[0] = 0;\n      cameraMover.delta[1] = 0;\n    }\n\n    this.events.forEach(event => {\n      this.process(event);\n    });\n    while (this.events.length) {\n      this.events.pop();\n    }\n\n    const path = paths.device.touchscreen;\n    const hasCursorJob = jobIsAssigned(MOVE_CURSOR_JOB, this.assignments);\n    const hasCameraJob = jobIsAssigned(MOVE_CAMERA_JOB, this.assignments);\n\n    if (hasCursorJob || hasCameraJob) {\n      frame.setValueType(path.isTouching, true);\n\n      const assignment = findByJob(MOVE_CURSOR_JOB, this.assignments) || findByJob(MOVE_CAMERA_JOB, this.assignments);\n      frame.setPose(path.cursorPose, assignment.cursorPose);\n    }\n\n    frame.setValueType(path.isTouchingGrabbable, false);\n\n    if (hasCursorJob) {\n      const assignment = findByJob(MOVE_CURSOR_JOB, this.assignments);\n      frame.setValueType(path.isTouchingGrabbable, assignment.framesUntilGrab <= 0);\n      assignment.framesUntilGrab--;\n\n      if (assignment.framesUntilUnassign >= 0) {\n        if (assignment.framesUntilUnassign === 0) {\n          unassign(assignment.touch, assignment.job, this.assignments);\n        }\n\n        assignment.framesUntilUnassign--;\n      }\n    }\n\n    if (hasCameraJob) {\n      const delta = findByJob(MOVE_CAMERA_JOB, this.assignments).delta;\n      frame.setVector2(path.touchCameraDelta, delta[0], delta[1]);\n    }\n\n    frame.setValueType(path.pinch.delta, this.pinch.delta);\n    frame.setValueType(path.pinch.initialDistance, this.pinch.initialDistance);\n    frame.setValueType(path.pinch.currentDistance, this.pinch.currentDistance);\n\n    if (this.tapIndexToWriteNextFrame && this.tapIndexToWriteNextFrame < TAP_PATHS.length) {\n      // write to tap-X path if we had an X-fingered tap\n      frame.setValueType(TAP_PATHS[this.tapIndexToWriteNextFrame - 1], true);\n    }\n\n    this.tapIndexToWriteNextFrame = 0;\n  }\n}\n","import { Pose } from \"../pose\";\nimport { angleTo4Direction } from \"../../../utils/dpad\";\n\nexport const xforms = {\n  noop: function() {},\n  copy: function(frame, src, dest) {\n    frame.setValueType(dest.value, frame.get(src.value));\n  },\n  scale: function(scalar) {\n    return function scale(frame, src, dest) {\n      if (frame.get(src.value) !== undefined) {\n        frame.setValueType(dest.value, frame.get(src.value) * scalar);\n      }\n    };\n  },\n  scaleExp: function(scalar, exp = 1) {\n    return function scale(frame, src, dest) {\n      if (frame.get(src.value) !== undefined) {\n        if (exp === 1) {\n          frame.setValueType(dest.value, frame.get(src.value) * scalar);\n        } else {\n          frame.setValueType(dest.value, Math.pow(frame.get(src.value), exp) * scalar);\n        }\n      }\n    };\n  },\n  deadzone: function(deadzoneSize) {\n    return function deadzone(frame, src, dest) {\n      frame.setValueType(dest.value, Math.abs(frame.get(src.value)) < deadzoneSize ? 0 : frame.get(src.value));\n    };\n  },\n  split_vec2: function(frame, src, dest) {\n    const value = frame.get(src.value);\n    if (value !== undefined) {\n      frame.setValueType(dest.x, value[0]);\n      frame.setValueType(dest.y, value[1]);\n    }\n  },\n  compose_vec2: function(frame, src, dest) {\n    const x = frame.get(src.x);\n    const y = frame.get(src.y);\n    if (x !== undefined && y !== undefined) {\n      frame.setVector2(dest.value, x, y);\n    }\n  },\n  negate: function(frame, src, dest) {\n    frame.setValueType(dest.value, -frame.get(src.value));\n  },\n  copyIfFalse: function(frame, src, dest) {\n    frame.setValueType(dest.value, frame.get(src.bool) ? undefined : frame.get(src.value));\n  },\n  copyIfTrue: function(frame, src, dest) {\n    frame.setValueType(dest.value, frame.get(src.bool) ? frame.get(src.value) : undefined);\n  },\n  zeroIfDefined: function(frame, src, dest) {\n    frame.setValueType(dest.value, frame.get(src.bool) !== undefined ? 0 : frame.get(src.value));\n  },\n  true: function(frame, src, dest) {\n    frame.setValueType(dest.value, true);\n  },\n  rising: function rising(frame, src, dest, prevState) {\n    frame.setValueType(dest.value, frame.get(src.value) && prevState === false);\n    return !!frame.get(src.value);\n  },\n  risingWithFrameDelay: function(n) {\n    return function risingWithFrameDelay(frame, src, dest, state = { values: new Array(n) }) {\n      frame.setValueType(dest.value, state.values.shift());\n      state.values.push(frame.get(src.value) && !state.prev);\n      state.prev = frame.get(src.value);\n      return state;\n    };\n  },\n  falling: function falling(frame, src, dest, prevState) {\n    frame.setValueType(dest.value, !frame.get(src.value) && prevState);\n    return !!frame.get(src.value);\n  },\n  vec2Zero: function(frame, _, dest) {\n    frame.setVector2(dest.value, 0, 0);\n  },\n  poseFromCameraProjection: function() {\n    let camera;\n    const pose = new Pose();\n    return function poseFromCameraProjection(frame, src, dest) {\n      if (!camera) {\n        camera = document.querySelector(\"#player-camera\").components.camera.camera;\n      }\n      const value = frame.get(src.value);\n      frame.setPose(dest.value, pose.fromCameraProjection(camera, value[0], value[1]));\n    };\n  },\n  vec2dpad: function(deadzoneRadius, invertX = false, invertY = false) {\n    const deadzoneRadiusSquared = deadzoneRadius * deadzoneRadius;\n\n    return function vec2dpad(frame, src, dest) {\n      if (!frame.get(src.value)) return;\n      const [x, y] = frame.get(src.value);\n      const inCenter = x * x + y * y < deadzoneRadiusSquared;\n      const direction = inCenter ? \"center\" : angleTo4Direction(Math.atan2(invertX ? -x : x, invertY ? -y : y));\n      if (!dest[direction]) return;\n      frame.setValueType(dest[direction], true);\n    };\n  },\n  always: function(constValue) {\n    return function always(frame, _, dest) {\n      frame.setValueType(dest.value, constValue);\n    };\n  },\n  wasd_to_vec2: function(frame, { w, a, s, d }, { vec2 }) {\n    let x = 0;\n    let y = 0;\n    if (frame.get(a)) x -= 1;\n    if (frame.get(d)) x += 1;\n    if (frame.get(w)) y += 1;\n    if (frame.get(s)) y -= 1;\n    frame.setVector2(vec2, x, y);\n  },\n  add_vec2: function(frame, src, dest) {\n    const first = frame.get(src.first);\n    const second = frame.get(src.second);\n    if (first && second) {\n      frame.setVector2(dest.value, first[0] + second[0], first[1] + second[1]);\n    } else if (second) {\n      frame.setVector2(dest.value, second[0], second[1]);\n    } else if (first) {\n      frame.setVector2(dest.value, first[0], first[1]);\n    }\n  },\n  max_vec2: function(frame, src, dest) {\n    const first = frame.get(src.first);\n    const second = frame.get(src.second);\n    if (first && second) {\n      const max =\n        first[0] * first[0] + first[1] * first[1] > second[0] * second[0] + second[1] * second[1] ? first : second;\n      frame.setVector2(dest.value, max[0], max[1]);\n    } else if (second) {\n      frame.setVector2(dest.value, second[0], second[1]);\n    } else if (first) {\n      frame.setVector2(dest.value, first[0], first[1]);\n    }\n  },\n  normalize_vec2: function(frame, src, dest) {\n    const vec2 = frame.get(src.value);\n    if (vec2) {\n      if (vec2[0] === 0 && vec2[0] === 0) {\n        frame.setVector2(dest.value, vec2[0], vec2[1]);\n      } else {\n        const l = Math.sqrt(vec2[0] * vec2[0] + vec2[1] * vec2[1]);\n        frame.setVector2(dest.value, vec2[0] / l, vec2[1] / l);\n      }\n    }\n  },\n  all: function(frame, src, dest) {\n    for (let i = 0, l = src.length; i < l; i++) {\n      const path = src[i];\n      if (!frame.get(path)) {\n        frame.setValueType(dest.value, false);\n        return;\n      }\n    }\n    frame.setValueType(dest.value, true);\n  },\n  any: function(frame, src, dest) {\n    for (let i = 0, l = src.length; i < l; i++) {\n      const path = src[i];\n      if (frame.get(path)) {\n        frame.setValueType(dest.value, true);\n        return;\n      }\n    }\n    frame.setValueType(dest.value, false);\n  },\n  touch_axis_scroll(scale = 1, snap_to) {\n    return function touch_axis_scroll(frame, src, dest, state = { value: 0, touching: false }) {\n      if (snap_to === undefined || Math.abs(frame.get(src.value) - state.value) >= snap_to) {\n        frame.setValueType(\n          dest.value,\n          state.touching && frame.get(src.touching) ? scale * (frame.get(src.value) - state.value) : 0\n        );\n      }\n\n      state.value = frame.get(src.value);\n      state.touching = frame.get(src.touching);\n\n      return state;\n    };\n  }\n};\n","export function angleTo4Direction(angle) {\n  angle = (angle * THREE.Math.RAD2DEG + 180 + 45) % 360;\n  if (angle > 0 && angle < 90) {\n    return \"north\";\n  } else if (angle >= 90 && angle < 180) {\n    return \"west\";\n  } else if (angle >= 180 && angle < 270) {\n    return \"south\";\n  } else {\n    return \"east\";\n  }\n}\n\nexport function angleTo8Direction(angle) {\n  angle = (angle * THREE.Math.RAD2DEG + 180 + 45) % 360;\n  let direction = \"\";\n  if ((angle >= 0 && angle < 120) || angle >= 330) {\n    direction += \"north\";\n  }\n  if (angle >= 150 && angle < 300) {\n    direction += \"south\";\n  }\n  if (angle >= 60 && angle < 210) {\n    direction += \"west\";\n  }\n  if ((angle >= 240 && angle < 360) || angle < 30) {\n    direction += \"east\";\n  }\n  return direction;\n}\n","export const addSetsToBindings = mapping => {\n  for (const setName in mapping) {\n    for (const binding of mapping[setName]) {\n      if (!binding.sets) {\n        binding.sets = [];\n      }\n      binding.sets.push(setName);\n    }\n  }\n  return mapping;\n};\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\n// import { Pose } from \"../pose\";\n\nconst wasd_vec2 = \"/var/mouse-and-keyboard/wasd_vec2\";\nconst keyboardCharacterAcceleration = \"/var/mouse-and-keyboard/keyboardCharacterAcceleration\";\nconst arrows_vec2 = \"/var/mouse-and-keyboard/arrows_vec2\";\nconst togglePenWithRMB = \"/vars/mouse-and-keyboard/drop_pen_with_RMB\";\nconst togglePenWithEsc = \"/vars/mouse-and-keyboard/drop_pen_with_esc\";\nconst togglePenWithP = \"/vars/mouse-and-keyboard/drop_pen_with_p\";\nconst togglePenWithHud = \"/vars/mouse-and-keyboard/drop_pen_with_hud\";\nconst togglePen = \"/vars/mouse-and-keyboard/togglePen\";\n\nconst k = name => {\n  return `/keyboard-mouse-user/keyboard-var/${name}`;\n};\n\nexport const keyboardMouseUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {},\n      dest: { value: paths.actions.cursor.hideLine },\n      xform: xforms.always(true)\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: { value: keyboardCharacterAcceleration },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.normalize_vec2\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: paths.actions.boost },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.camera.exitMirror },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Tab\") },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: paths.actions.thaw },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"p\") },\n      dest: { value: togglePenWithP },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.hud.penButton },\n      dest: { value: togglePenWithHud },\n      xform: xforms.rising\n    },\n    {\n      src: [togglePenWithHud, togglePenWithP],\n      dest: { value: togglePen },\n      xform: xforms.any\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising,\n      priority: 100\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"c\") },\n      dest: { value: paths.actions.toggleCamera },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"x\") },\n      dest: { value: paths.actions.takeSnapshot },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.smartMouse.cursorPose },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.smartMouse.cameraDelta },\n      dest: { x: \"/var/smartMouseCamDeltaX\", y: \"/var/smartMouseCamDeltaY\" },\n      xform: xforms.split_vec2\n    },\n    {\n      src: { value: \"/var/smartMouseCamDeltaX\" },\n      dest: { value: \"/var/smartMouseCamDeltaXScaled\" },\n      xform: xforms.scale(-0.2)\n    },\n    {\n      src: { value: \"/var/smartMouseCamDeltaY\" },\n      dest: { value: \"/var/smartMouseCamDeltaYScaled\" },\n      xform: xforms.scale(-0.1)\n    },\n    {\n      src: { x: \"/var/smartMouseCamDeltaXScaled\", y: \"/var/smartMouseCamDeltaYScaled\" },\n      dest: { value: paths.actions.cameraDelta },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: paths.actions.cameraDelta },\n      dest: { value: paths.actions.lobbyCameraDelta },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"/\")\n      },\n      dest: {\n        value: paths.actions.focusChatCommand\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.mediaExit },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/shift+1\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/shift+2\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/shift+3\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/shift+4\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/shift+5\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/shift+6\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/shift+7\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/shift+8\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"k\")\n      },\n      dest: {\n        value: paths.actions.logInteractionState\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.mouse.buttonRight\n      },\n      dest: {\n        value: paths.actions.startGazeTeleport\n      },\n      xform: xforms.rising,\n      priority: 100\n    },\n    {\n      src: {\n        value: paths.device.mouse.buttonRight\n      },\n      dest: {\n        value: paths.actions.stopGazeTeleport\n      },\n      xform: xforms.falling,\n      priority: 100\n    }\n\n    // Helpful bindings for debugging hands in 2D\n    // {\n    //   src: {},\n    //   dest: { value: paths.actions.rightHand.matrix },\n    //   xform: xforms.always(\n    //     new THREE.Matrix4().compose(\n    //       new THREE.Vector3(0.2, 1.3, -0.8),\n    //       new THREE.Quaternion(0, 0, 0, 0),\n    //       new THREE.Vector3(1, 1, 1)\n    //     )\n    //   )\n    // },\n    // {\n    //   src: {},\n    //   dest: { value: paths.actions.leftHand.matrix },\n    //   xform: xforms.always(\n    //     new THREE.Matrix4().compose(\n    //       new THREE.Vector3(-0.2, 1.4, -0.8),\n    //       new THREE.Quaternion(0, 0, 0, 0),\n    //       new THREE.Vector3(1, 1, 1)\n    //     )\n    //   )\n    // }\n  ],\n\n  [sets.cursorHoldingPen]: [\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"q\")\n      },\n      dest: { value: \"/var/shift+q\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+q\" },\n      dest: { value: paths.actions.cursor.penPrevColor },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"e\")\n      },\n      dest: { value: \"/var/shift+e\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+e\" },\n      dest: { value: paths.actions.cursor.penNextColor },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"q\")\n      },\n      dest: { value: \"/var/notshift+q\" },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: { value: \"/var/notshift+q\" },\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"e\")\n      },\n      dest: { value: \"/var/notshift+e\" },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: { value: \"/var/notshift+e\" },\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: k(\"wheelWithShift\")\n      },\n      dest: { value: \"/var/cursorScalePenTipWheel\" },\n      xform: xforms.copy,\n      priority: 200\n    },\n    {\n      src: { value: \"/var/cursorScalePenTipWheel\" },\n      dest: { value: paths.actions.cursor.scalePenTip },\n      xform: xforms.scale(0.03)\n    },\n    {\n      src: { value: paths.device.mouse.buttonRight },\n      dest: { value: togglePenWithRMB },\n      xform: xforms.falling,\n      priority: 200\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: togglePenWithEsc },\n      xform: xforms.rising\n    },\n    {\n      src: [togglePenWithRMB, togglePenWithEsc, togglePenWithP, togglePenWithHud],\n      dest: { value: togglePen },\n      xform: xforms.any\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"z\")\n      },\n      dest: { value: paths.actions.cursor.undoDrawing },\n      priority: 1001,\n      xform: xforms.rising\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.pen.remove },\n      xform: xforms.rising,\n      priority: 200\n    }\n  ],\n\n  [sets.cursorHoldingCamera]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.falling,\n      priority: 2\n    }\n  ],\n\n  [sets.cursorHoldingInteractable]: [\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.mouse.wheel\n      },\n      dest: {\n        value: k(\"wheelWithShift\")\n      },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.mouse.wheel\n      },\n      dest: {\n        value: k(\"wheelWithoutShift\")\n      },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: {\n        value: k(\"wheelWithoutShift\")\n      },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: k(\"wheelWithShift\")\n      },\n      dest: { value: paths.actions.cursor.scaleGrabbedGrabbable },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.falling,\n      priority: 2\n    }\n  ],\n  [sets.cursorHoldingUI]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: paths.actions.transformModifier },\n      xform: xforms.copy\n    }\n  ],\n  [sets.cursorHoveringOnInteractable]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n  [sets.cursorHoveringOnVideo]: [\n    {\n      src: { value: paths.device.mouse.wheel },\n      dest: { value: paths.actions.cursor.mediaVolumeMod },\n      xform: xforms.scale(-0.3)\n    }\n  ],\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ],\n\n  [sets.cursorHoveringOnUI]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst zero = \"/vars/touchscreen/zero\";\nconst forward = \"/vars/touchscreen/pinchDeltaForward\";\nconst touchCamDelta = \"vars/touchscreen/touchCameraDelta\";\nconst touchCamDeltaX = \"vars/touchscreen/touchCameraDelta/x\";\nconst touchCamDeltaY = \"vars/touchscreen/touchCameraDelta/y\";\nconst touchCamDeltaXScaled = \"vars/touchscreen/touchCameraDelta/x/scaled\";\nconst touchCamDeltaYScaled = \"vars/touchscreen/touchCameraDelta/y/scaled\";\nconst gyroCamDelta = \"vars/gyro/gyroCameraDelta\";\nconst gyroCamDeltaXScaled = \"vars/gyro/gyroCameraDelta/x/scaled\";\nconst gyroCamDeltaYScaled = \"vars/gyro/gyroCameraDelta/y/scaled\";\nconst togglePen = \"/vars/touchscreen/togglePen\";\n\nexport const touchscreenUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {},\n      dest: { value: paths.actions.cursor.hideLine },\n      xform: xforms.always(true)\n    },\n    {\n      src: { value: paths.device.touchscreen.pinch.delta },\n      dest: { value: forward },\n      xform: xforms.scale(0.25)\n    },\n    {\n      src: { value: paths.device.touchscreen.tap2 },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.copy\n    },\n    {\n      src: {},\n      dest: { value: zero },\n      xform: xforms.always(0)\n    },\n    {\n      src: { x: zero, y: forward },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: paths.device.touchscreen.cursorPose },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.touchscreen.touchCameraDelta },\n      dest: { x: touchCamDeltaX, y: touchCamDeltaY },\n      xform: xforms.split_vec2\n    },\n    {\n      src: { value: touchCamDeltaX },\n      dest: { value: touchCamDeltaXScaled },\n      xform: xforms.scale(0.18)\n    },\n    {\n      src: { value: touchCamDeltaY },\n      dest: { value: touchCamDeltaYScaled },\n      xform: xforms.scale(0.35)\n    },\n    {\n      src: { x: touchCamDeltaXScaled, y: touchCamDeltaYScaled },\n      dest: { value: touchCamDelta },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: paths.device.gyro.averageDeltaX },\n      dest: { value: gyroCamDeltaXScaled },\n      xform: xforms.scale(1.0)\n    },\n    {\n      src: { value: paths.device.gyro.averageDeltaY },\n      dest: { value: gyroCamDeltaYScaled },\n      xform: xforms.scale(1.0)\n    },\n    {\n      src: { x: gyroCamDeltaYScaled, y: gyroCamDeltaXScaled },\n      dest: { value: gyroCamDelta },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        first: touchCamDelta,\n        second: gyroCamDelta\n      },\n      dest: { value: paths.actions.cameraDelta },\n      xform: xforms.add_vec2\n    },\n    {\n      src: { value: touchCamDelta },\n      dest: { value: paths.actions.lobbyCameraDelta },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.hud.penButton },\n      dest: { value: togglePen },\n      xform: xforms.rising\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n  [sets.cursorHoldingInteractable]: [\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.falling,\n      priority: 1\n    }\n  ],\n\n  [sets.cursorHoveringOnPen]: [],\n  [sets.cursorHoldingPen]: [\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.startDrawing },\n      xform: xforms.risingWithFrameDelay(5),\n      priority: 2\n    },\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.stopDrawing },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.pen.remove },\n      xform: xforms.rising,\n      priority: 3\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nexport const keyboardDebuggingBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst name = \"/touch/var/\";\n\nconst leftButton = paths.device.leftOculusTouch.button;\nconst leftAxis = paths.device.leftOculusTouch.axis;\nconst leftPose = paths.device.leftOculusTouch.pose;\nconst rightButton = paths.device.rightOculusTouch.button;\nconst rightAxis = paths.device.rightOculusTouch.axis;\nconst rightPose = paths.device.rightOculusTouch.pose;\n\nconst leftJoyXDeadzoned = `${name}left/joy/x/deadzoned`;\nconst leftJoyYDeadzoned = `${name}left/joy/y/deadzoned`;\nconst scaledLeftJoyX = `${name}left/scaledJoyX`;\nconst scaledLeftJoyY = `${name}left/scaledJoyY`;\nconst cursorDrop2 = `${name}right/cursorDrop2`;\nconst cursorDrop1 = `${name}right/cursorDrop1`;\nconst rightHandDrop2 = `${name}right/rightHandDrop2`;\nconst rightGripRisingGrab = `${name}right/grip/RisingGrab`;\nconst rightTriggerRisingGrab = `${name}right/trigger/RisingGrab`;\nconst leftGripRisingGrab = `${name}left/grip/RisingGrab`;\nconst leftTriggerRisingGrab = `${name}left/trigger/RisingGrab`;\nconst rightDpadNorth = `${name}rightDpad/north`;\nconst rightDpadSouth = `${name}rightDpad/south`;\nconst rightDpadEast = `${name}rightDpad/east`;\nconst rightDpadWest = `${name}rightDpad/west`;\nconst rightDpadCenter = `${name}rightDpad/center`;\nconst rightJoy = `${name}right/joy`;\nconst rightJoyY1 = `${name}right/joyY1`;\nconst rightJoyY2 = `${name}right/joyY2`;\nconst rightJoyYDeadzoned = `${name}right/joy/y/deadzoned`;\nconst leftDpadNorth = `${name}leftDpad/north`;\nconst leftDpadSouth = `${name}leftDpad/south`;\nconst leftDpadEast = `${name}leftDpad/east`;\nconst leftDpadWest = `${name}leftDpad/west`;\nconst leftDpadCenter = `${name}leftDpad/center`;\nconst leftJoy = `${name}left/joy`;\nconst oculusTouchCharacterAcceleration = `${name}characterAcceleration`;\nconst keyboardCharacterAcceleration = \"/var/keyboard/characterAcceleration\";\nconst characterAcceleration = \"/var/oculus-touch/nonNormalizedCharacterAcceleration\";\nconst wasd_vec2 = \"/var/keyboard/wasd_vec2\";\nconst arrows_vec2 = \"/var/keyboard/arrows_vec2\";\nconst keyboardBoost = \"/var/keyboard-oculus/boost\";\nconst rightBoost = \"/var/right-oculus/boost\";\nconst leftBoost = \"/var/left-oculus/boost\";\nconst rightTouchSnapRight = `${name}/right/snap-right`;\nconst rightTouchSnapLeft = `${name}/right/snap-left`;\nconst keyboardSnapRight = `${name}/keyboard/snap-right`;\nconst keyboardSnapLeft = `${name}/keyboard/snap-left`;\n\nconst lowerButtons = `${name}buttons/lower`;\n\nconst ensureFrozenViaButtons = `${name}buttons/ensureFrozen`;\nconst ensureFrozenViaKeyboard = `${name}keyboard/ensureFrozen`;\n\nconst thawViaButtons = `${name}buttons/thaw`;\nconst thawViaKeyboard = `${name}keyboard/thaw`;\n\nconst v = s => {\n  return \"/oculus-touch-user-vars/\" + s;\n};\nconst leftGripPressed1 = v(\"leftGripPressed1\");\nconst leftGripPressed2 = v(\"leftGripPressed2\");\nconst rightGripPressed1 = v(\"rightGripPressed1\");\nconst rightGripPressed2 = v(\"rightGripPressed2\");\nconst leftTriggerPressed1 = v(\"leftTriggerPressed1\");\nconst leftTriggerPressed2 = v(\"leftTriggerPressed2\");\nconst rightTriggerPressed1 = v(\"rightTriggerPressed1\");\nconst rightTriggerPressed2 = v(\"rightTriggerPressed2\");\n\nexport const oculusTouchUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: paths.device.leftOculusTouch.matrix\n      },\n      dest: {\n        value: paths.actions.leftHand.matrix\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: paths.device.rightOculusTouch.matrix\n      },\n      dest: {\n        value: paths.actions.rightHand.matrix\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [ensureFrozenViaButtons, ensureFrozenViaKeyboard],\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.any\n    },\n    {\n      src: [thawViaButtons, thawViaKeyboard],\n      dest: { value: paths.actions.thaw },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: leftButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftGripPressed1\n      },\n      dest: {\n        value: paths.actions.leftHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [leftButton(\"x\").touched, leftButton(\"y\").touched, leftButton(\"thumbStick\").touched],\n      dest: {\n        value: paths.actions.leftHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: { value: leftButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftTriggerPressed1 },\n      dest: {\n        value: paths.actions.leftHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightGripPressed1\n      },\n      dest: {\n        value: paths.actions.rightHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [rightButton(\"a\").touched, rightButton(\"b\").touched, rightButton(\"thumbStick\").touched],\n      dest: {\n        value: paths.actions.rightHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: { value: rightButton(\"trigger\").pressed },\n      dest: {\n        value: rightTriggerPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightButton(\"trigger\").pressed },\n      dest: {\n        value: rightTriggerPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightTriggerPressed1 },\n      dest: {\n        value: paths.actions.rightHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: leftAxis(\"joyX\"),\n        y: leftAxis(\"joyY\")\n      },\n      dest: {\n        value: leftJoy\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: leftJoy\n      },\n      dest: {\n        north: leftDpadNorth,\n        south: leftDpadSouth,\n        east: leftDpadEast,\n        west: leftDpadWest,\n        center: leftDpadCenter\n      },\n      xform: xforms.vec2dpad(0.2, false, true)\n    },\n    {\n      src: {\n        value: rightAxis(\"joyY\")\n      },\n      dest: { value: rightJoyY1 },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightAxis(\"joyY\")\n      },\n      dest: { value: rightJoyY2 },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: rightAxis(\"joyX\"),\n        y: rightJoyY1\n      },\n      dest: {\n        value: rightJoy\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: rightJoy\n      },\n      dest: {\n        north: rightDpadNorth,\n        south: rightDpadSouth,\n        east: rightDpadEast,\n        west: rightDpadWest,\n        center: rightDpadCenter\n      },\n      xform: xforms.vec2dpad(0.2, false, true)\n    },\n    {\n      src: {\n        value: rightDpadEast\n      },\n      dest: {\n        value: rightTouchSnapRight\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: keyboardSnapRight },\n      xform: xforms.rising\n    },\n    {\n      src: [rightTouchSnapRight, keyboardSnapRight],\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.any\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Tab\") },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: ensureFrozenViaKeyboard },\n      xform: xforms.copy\n    },\n    {\n      src: [leftButton(\"x\").pressed, rightButton(\"a\").pressed],\n      dest: { value: lowerButtons },\n      xform: xforms.any\n    },\n    {\n      src: { value: lowerButtons },\n      dest: { value: ensureFrozenViaButtons },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lowerButtons },\n      dest: { value: thawViaButtons },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: thawViaKeyboard },\n      xform: xforms.falling\n    },\n    {\n      src: {\n        value: rightDpadWest\n      },\n      dest: {\n        value: rightTouchSnapLeft\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: keyboardSnapLeft },\n      xform: xforms.rising\n    },\n    {\n      src: [rightTouchSnapLeft, keyboardSnapLeft],\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: leftAxis(\"joyY\")\n      },\n      dest: {\n        value: leftJoyYDeadzoned\n      },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: {\n        value: leftJoyYDeadzoned\n      },\n      dest: {\n        value: scaledLeftJoyY\n      },\n      xform: xforms.scale(-1.5) // horizontal character speed modifier\n    },\n    {\n      src: {\n        value: leftAxis(\"joyX\")\n      },\n      dest: {\n        value: leftJoyXDeadzoned\n      },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: {\n        value: leftJoyXDeadzoned\n      },\n      dest: {\n        value: scaledLeftJoyX\n      },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: {\n        x: scaledLeftJoyX,\n        y: scaledLeftJoyY\n      },\n      dest: { value: oculusTouchCharacterAcceleration },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: {\n        first: oculusTouchCharacterAcceleration,\n        second: keyboardCharacterAcceleration\n      },\n      dest: {\n        value: characterAcceleration\n      },\n      xform: xforms.max_vec2\n    },\n    {\n      src: {\n        value: characterAcceleration,\n        override: \"/device/overrides/foo\"\n      },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: keyboardBoost },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftButton(\"y\").pressed\n      },\n      dest: {\n        value: leftBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightButton(\"b\").pressed\n      },\n      dest: {\n        value: rightBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [keyboardBoost, leftBoost, rightBoost],\n      dest: { value: paths.actions.boost },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"/\")\n      },\n      dest: {\n        value: paths.actions.focusChatCommand\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.mediaExit },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"p\") },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"c\") },\n      dest: { value: paths.actions.toggleCamera },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"x\") },\n      dest: { value: paths.actions.takeSnapshot },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/shift+1\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/shift+2\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/shift+3\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/shift+4\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/shift+5\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/shift+6\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/shift+7\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/shift+8\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"k\")\n      },\n      dest: {\n        value: paths.actions.logInteractionState\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rightPose },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightPose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftPose },\n      dest: { value: paths.actions.leftHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    }\n  ],\n\n  [sets.leftHandHoveringOnNothing]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.cursorHoveringOnUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.cursorHoveringOnVideo]: [\n    {\n      src: { value: rightAxis(\"joyY\") },\n      dest: { value: paths.actions.cursor.mediaVolumeMod },\n      xform: xforms.scale(-0.01)\n    }\n  ],\n\n  [sets.cursorHoveringOnNothing]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.leftHandHoveringOnInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: leftTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [leftGripRisingGrab],\n      dest: { value: paths.actions.leftHand.grab },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n\n  [sets.leftHandHoldingInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.falling\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaButtons },\n      priority: 1,\n      xform: xforms.always(false)\n    }\n  ],\n\n  [sets.leftHandHoveringOnPen]: [],\n  [sets.leftHandHoldingPen]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: leftDpadEast,\n        override: \"/device/overrides/foo\"\n      },\n      dest: {\n        value: paths.actions.leftHand.penNextColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: leftDpadWest,\n        override: \"/device/overrides/foo\"\n      },\n      dest: {\n        value: paths.actions.leftHand.penPrevColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: leftJoyYDeadzoned },\n      dest: { value: paths.actions.leftHand.scalePenTip },\n      xform: xforms.scaleExp(-0.005, 5),\n      priority: 1\n    },\n    {\n      src: { value: leftButton(\"y\").pressed },\n      dest: { value: paths.actions.leftHand.switchDrawMode },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: leftButton(\"x\").pressed },\n      dest: { value: paths.actions.leftHand.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.cursorHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rightGripRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rightTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [rightGripRisingGrab],\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n\n  [sets.cursorHoldingUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: cursorDrop2 },\n      xform: xforms.falling,\n      priority: 5\n    }\n  ],\n\n  [sets.cursorHoldingInteractable]: [\n    {\n      src: { value: rightAxis(\"joyY\") },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.scale(0.1)\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: cursorDrop1 },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: [cursorDrop1, cursorDrop2],\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.any,\n      priority: 2\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaButtons },\n      priority: 1,\n      xform: xforms.always(false)\n    }\n  ],\n\n  [sets.cursorHoveringOnPen]: [],\n\n  [sets.cursorHoldingPen]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: rightButton(\"b\").pressed },\n      dest: { value: paths.actions.cursor.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightHandHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rightGripRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rightTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [rightGripRisingGrab],\n      dest: { value: paths.actions.rightHand.grab },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n\n  [sets.rightHandHoldingInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: {\n        value: rightHandDrop2\n      },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: [rightHandDrop2],\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.any,\n      priority: 2\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaButtons },\n      priority: 1,\n      xform: xforms.always(false)\n    }\n  ],\n  [sets.rightHandHoveringOnPen]: [],\n  [sets.rightHandHoldingPen]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: rightDpadEast\n      },\n      dest: {\n        value: paths.actions.rightHand.penNextColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: rightDpadWest\n      },\n      dest: {\n        value: paths.actions.rightHand.penPrevColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: rightAxis(\"joyY\")\n      },\n      dest: {\n        value: rightJoyYDeadzoned\n      },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: rightJoyYDeadzoned },\n      dest: { value: paths.actions.rightHand.scalePenTip },\n      xform: xforms.scaleExp(-0.005, 5),\n      priority: 2\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: rightButton(\"b\").pressed },\n      dest: { value: paths.actions.rightHand.switchDrawMode },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: rightButton(\"a\").pressed },\n      dest: { value: paths.actions.rightHand.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.cursorHoveringOnCamera]: [],\n  [sets.rightHandHoveringOnCamera]: [],\n  [sets.leftHandHoveringOnCamera]: [],\n\n  [sets.rightHandHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.takeSnapshot },\n      xform: xforms.copy,\n      priority: 4\n    }\n  ],\n  [sets.leftHandHoldingCamera]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.takeSnapshot },\n      xform: xforms.copy,\n      priority: 4\n    }\n  ],\n  [sets.cursorHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.takeSnapshot },\n      xform: xforms.copy,\n      priority: 4\n    }\n  ],\n\n  [sets.rightHandHoveringOnNothing]: [],\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst v = name => {\n  return `/vive-user/vive-var/${name}`;\n};\n\nconst lButton = paths.device.vive.left.button;\nconst lAxis = paths.device.vive.left.axis;\nconst lPose = paths.device.vive.left.pose;\nconst lJoyScaled = v(\"left/joy/scaled\");\nconst lJoyXScaled = v(\"left/joyX/scaled\");\nconst lJoyYScaled = v(\"left/joyY/scaled\");\nconst lTouch = v(\"left/touch\");\nconst lTouchScaled = v(\"left/touch/scaled\");\nconst lTouchXScaled = v(\"left/touchX/scaled\");\nconst lTouchYScaled = v(\"left/touchY/scaled\");\nconst lDpadNorth = v(\"left/dpad/north\");\nconst lDpadSouth = v(\"left/dpad/south\");\nconst lDpadEast = v(\"left/dpad/east\");\nconst lDpadWest = v(\"left/dpad/west\");\nconst lDpadCenter = v(\"left/dpad/center\");\nconst lTriggerFallingStopDrawing = v(\"left/trigger/falling/stopDrawing\");\nconst lGripFallingStopDrawing = v(\"left/grip/falling/stopDrawing\");\nconst lTriggerRisingGrab = v(\"left/trigger/rising/grab\");\nconst lGripRisingGrab = v(\"left/grab/rising/grab\");\nconst lTouchpadRising2 = v(\"left/touchpad/rising2\");\nconst lTouchpadRising1 = v(\"left/touchpad/rising1\");\nconst touchCharacterAcceleration = v(\"left/touch/characterAcceleration\");\nconst lCharacterAcceleration = v(\"left/characterAcceleration\");\nconst characterAcceleration = v(\"nonNormalizedCharacterAcceleration\");\nconst leftBoost = v(\"left/boost\");\n\nconst rButton = paths.device.vive.right.button;\nconst rAxis = paths.device.vive.right.axis;\nconst rPose = paths.device.vive.right.pose;\nconst rTouch = v(\"right/touch\");\nconst rJoy = v(\"right/joy\");\nconst rDpadNorth1 = v(\"right/dpad/north\");\nconst rDpadSouth1 = v(\"right/dpad/south\");\nconst rDpadEast1 = v(\"right/dpad/east\");\nconst rDpadWest1 = v(\"right/dpad/west\");\nconst rDpadCenter1 = v(\"right/dpad/center\");\nconst rDpadNorth2 = v(\"right/dpad/north2\");\nconst rDpadSouth2 = v(\"right/dpad/south2\");\nconst rDpadEast2 = v(\"right/dpad/east2\");\nconst rDpadWest2 = v(\"right/dpad/west2\");\nconst rDpadCenter2 = v(\"right/dpad/center2\");\nconst rDpadCenterStrip = v(\"right/dpad/centerStrip\");\nconst rTouchpadRising = v(\"right/touchpad/rising\");\nconst rTouchpadFalling = v(\"right/touchpad/falling\");\nconst rightBoost = v(\"right/boost\");\nconst rTriggerRisingGrab = v(\"right/trigger/rising/grab\");\nconst rGripRisingGrab = v(\"right/grab/rising/grab\");\nconst cursorDrop1 = v(\"right/cursorDrop1\");\nconst cursorDrop2 = v(\"right/cursorDrop2\");\nconst rTriggerStopTeleport = v(\"right/trigger/stopTeleport\");\nconst rTouchpadStopTeleport = v(\"right/touchpad/stopTeleport\");\nconst rootForFrozenOverrideWhenHolding = \"rootForFrozenOverrideWhenHolding\";\n\nconst ensureFrozenViaDpad = v(\"dpad/ensureFrozen\");\nconst ensureFrozenViaKeyboard = v(\"keyboard/ensureFrozen\");\n\nconst thawViaDpad = v(\"dpad/thaw\");\nconst thawViaKeyboard = v(\"keyboard/thaw\");\n\nconst rSnapRight1 = v(\"right/snap-right\");\nconst rSnapLeft1 = v(\"right/snap-left\");\nconst rSnapRight2 = v(\"right/snap-right2\");\nconst rSnapLeft2 = v(\"right/snap-left2\");\n\nconst k = name => {\n  return `/vive-user/keyboard-var/${name}`;\n};\nconst keyboardSnapRight = k(\"snap-right\");\nconst keyboardSnapLeft = k(\"snap-left\");\nconst keyboardCharacterAcceleration = k(\"characterAcceleration\");\nconst wasd_vec2 = k(\"wasd_vec2\");\nconst arrows_vec2 = k(\"arrows_vec2\");\nconst keyboardBoost = k(\"boost\");\n\nconst leftGripPressed1 = v(\"leftGripPressed1\");\nconst leftGripPressed2 = v(\"leftGripPressed2\");\nconst rightGripPressed1 = v(\"rightGripPressed1\");\nconst rightGripPressed2 = v(\"rightGripPressed2\");\nconst leftTriggerPressed1 = v(\"leftTriggerPressed1\");\nconst leftTriggerPressed2 = v(\"leftTriggerPressed2\");\nconst leftTouchpadPressed1 = v(\"leftTouchpadPressed1\");\nconst leftTouchpadPressed2 = v(\"leftTouchpadPressed2\");\nconst rightTriggerPressed1 = v(\"rightTriggerPressed1\");\nconst rightTriggerPressed2 = v(\"rightTriggerPressed2\");\nconst leftTouchpadFallingStopTeleport = v(\"leftTouchpadFallingStopTeleport\");\nconst leftTriggerFallingStopTeleport = v(\"leftTriggerFallingStopTeleport\");\nconst leftGripFallingWhileHoldingPen = v(\"leftGripFallingWhileHoldingPen\");\n\nexport const viveUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: paths.device.vive.left.matrix\n      },\n      dest: {\n        value: paths.actions.leftHand.matrix\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: paths.device.vive.right.matrix\n      },\n      dest: {\n        value: paths.actions.rightHand.matrix\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [ensureFrozenViaDpad, ensureFrozenViaKeyboard],\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.any\n    },\n    {\n      src: [thawViaDpad, thawViaKeyboard],\n      dest: { value: paths.actions.thaw },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: lButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftGripPressed1\n      },\n      dest: {\n        value: paths.actions.leftHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: lButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [lButton(\"touchpad\").touched, lButton(\"top\").touched],\n      dest: {\n        value: paths.actions.leftHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: { value: leftTriggerPressed1 },\n      dest: {\n        value: paths.actions.leftHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightGripPressed1\n      },\n      dest: {\n        value: paths.actions.rightHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [rButton(\"touchpad\").touched, rButton(\"top\").touched],\n      dest: {\n        value: paths.actions.rightHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: rButton(\"trigger\").pressed\n      },\n      dest: { value: rightTriggerPressed1 },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"trigger\").pressed\n      },\n      dest: { value: rightTriggerPressed2 },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightTriggerPressed1 },\n      dest: {\n        value: paths.actions.rightHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: lAxis(\"touchX\"),\n        y: lAxis(\"touchY\")\n      },\n      dest: {\n        value: lTouch\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: lTouch\n      },\n      dest: {\n        north: lDpadNorth,\n        south: lDpadSouth,\n        east: lDpadEast,\n        west: lDpadWest,\n        center: lDpadCenter\n      },\n      xform: xforms.vec2dpad(0.35)\n    },\n    {\n      src: {\n        value: lButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: leftTouchpadPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: lButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: leftTouchpadPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: rAxis(\"touchX\"),\n        y: rAxis(\"touchY\")\n      },\n      dest: {\n        value: rTouch\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: rTouch\n      },\n      dest: {\n        north: rDpadNorth1,\n        south: rDpadSouth1,\n        east: rDpadEast1,\n        west: rDpadWest1,\n        center: rDpadCenter1\n      },\n      xform: xforms.vec2dpad(0.35, false, true)\n    },\n    {\n      src: {\n        x: rAxis(\"joyX\"),\n        y: rAxis(\"joyY\")\n      },\n      dest: {\n        value: rJoy\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: rJoy\n      },\n      dest: {\n        north: rDpadNorth2,\n        south: rDpadSouth2,\n        east: rDpadEast2,\n        west: rDpadWest2,\n        center: rDpadCenter2\n      },\n      xform: xforms.vec2dpad(0.35, false, true)\n    },\n    {\n      src: [rDpadNorth1, rDpadSouth1, rDpadCenter1],\n      dest: { value: rDpadCenterStrip },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: rButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: rTouchpadRising\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: rButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: rTouchpadFalling\n      },\n      xform: xforms.falling\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadEast1\n      },\n      dest: {\n        value: rSnapRight1\n      },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: {\n        value: rDpadEast2\n      },\n      dest: {\n        value: rSnapRight2\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: keyboardSnapRight },\n      xform: xforms.rising\n    },\n    {\n      src: [rSnapRight1, rSnapRight2, keyboardSnapRight],\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.any\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Tab\") },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: ensureFrozenViaKeyboard },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: thawViaKeyboard },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"p\") },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"c\") },\n      dest: { value: paths.actions.toggleCamera },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"x\") },\n      dest: { value: paths.actions.takeSnapshot },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rButton(\"touchpad\").pressed, bool: rDpadCenterStrip },\n      dest: { value: ensureFrozenViaDpad },\n      root: rootForFrozenOverrideWhenHolding,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: rTouchpadFalling },\n      dest: { value: thawViaDpad },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadWest1\n      },\n      dest: {\n        value: rSnapLeft1\n      },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: {\n        value: rDpadWest2\n      },\n      dest: {\n        value: rSnapLeft2\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: keyboardSnapLeft },\n      xform: xforms.rising\n    },\n    {\n      src: [rSnapLeft1, rSnapLeft2, keyboardSnapLeft],\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: lAxis(\"touchX\")\n      },\n      dest: {\n        value: lTouchXScaled\n      },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: {\n        value: lAxis(\"touchY\")\n      },\n      dest: { value: lTouchYScaled },\n      xform: xforms.scale(1.5) // vertical character speed modifier\n    },\n    {\n      src: {\n        x: lTouchXScaled,\n        y: lTouchYScaled\n      },\n      dest: { value: lTouchScaled },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        bool: leftTouchpadPressed2,\n        value: lTouchScaled\n      },\n      dest: { value: touchCharacterAcceleration },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        value: lAxis(\"joyX\")\n      },\n      dest: {\n        value: lJoyXScaled\n      },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: {\n        value: lAxis(\"joyY\")\n      },\n      dest: { value: lJoyYScaled },\n      xform: xforms.scale(1.5) // vertical character speed modifier\n    },\n    {\n      src: {\n        x: lJoyXScaled,\n        y: lJoyYScaled\n      },\n      dest: { value: lJoyScaled },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        first: lJoyScaled,\n        second: touchCharacterAcceleration\n      },\n      dest: { value: lCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"/\")\n      },\n      dest: {\n        value: paths.actions.focusChatCommand\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.mediaExit },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/shift+1\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/shift+2\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/shift+3\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/shift+4\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/shift+5\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/shift+6\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/shift+7\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/shift+8\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"k\")\n      },\n      dest: {\n        value: paths.actions.logInteractionState\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: {\n        first: lCharacterAcceleration,\n        second: keyboardCharacterAcceleration\n      },\n      dest: {\n        value: characterAcceleration\n      },\n      xform: xforms.max_vec2\n    },\n    {\n      src: { value: characterAcceleration },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.normalize_vec2\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: keyboardBoost },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: lButton(\"top\").pressed\n      },\n      dest: {\n        value: leftBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"top\").pressed\n      },\n      dest: {\n        value: rightBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [keyboardBoost, leftBoost, rightBoost],\n      dest: { value: paths.actions.boost },\n      xform: xforms.any\n    },\n    {\n      src: { value: rPose },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rPose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lPose },\n      dest: { value: paths.actions.leftHand.pose },\n      xform: xforms.copy\n    }\n  ],\n  [sets.rightHandTeleporting]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rTriggerStopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: rButton(\"touchpad\").pressed },\n      dest: { value: rTouchpadStopTeleport },\n      xform: xforms.falling\n    },\n    {\n      src: [rTriggerStopTeleport, rTouchpadStopTeleport],\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.any\n    }\n  ],\n  [sets.leftHandHoveringOnNothing]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftHandTeleporting]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: leftTriggerFallingStopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [leftTriggerFallingStopTeleport, leftTouchpadFallingStopTeleport, leftGripFallingWhileHoldingPen],\n      dest: { value: paths.actions.leftHand.stopTeleport },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.rightHandHoveringOnNothing]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.cursorHoveringOnNothing]: [],\n\n  [sets.cursorHoveringOnUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.cursorHoveringOnVideo]: [\n    {\n      src: {\n        value: rAxis(\"touchY\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.mediaVolumeMod },\n      xform: xforms.touch_axis_scroll(0.1)\n    },\n    {\n      src: {\n        value: rAxis(\"joyY\")\n      },\n      dest: { value: paths.actions.cursor.mediaVolumeMod },\n      xform: xforms.scale(0.02)\n    }\n  ],\n\n  [sets.leftHandHoveringOnInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: lGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: lTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: [lGripRisingGrab],\n      dest: { value: paths.actions.leftHand.grab },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.leftHandHoldingInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.falling,\n      priority: 1\n    }\n  ],\n\n  [sets.leftHandHoveringOnPen]: [],\n  [sets.leftHandHoldingPen]: [\n    {\n      src: { value: leftTouchpadPressed2 },\n      dest: { value: leftTouchpadFallingStopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: {\n        value: leftTouchpadPressed2\n      },\n      dest: {\n        value: lTouchpadRising1\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: {\n        bool: lTouchpadRising1,\n        value: lDpadCenter\n      },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startDrawing },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: lTriggerFallingStopDrawing },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: lGripFallingStopDrawing },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftGripFallingWhileHoldingPen },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [lTriggerFallingStopDrawing, lGripFallingStopDrawing],\n      dest: { value: paths.actions.leftHand.stopDrawing },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: leftTouchpadPressed2\n      },\n      dest: {\n        value: lTouchpadRising2\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: {\n        bool: lTouchpadRising2,\n        value: lDpadNorth\n      },\n      dest: {\n        value: paths.actions.leftHand.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        bool: lTouchpadRising2,\n        value: lDpadSouth\n      },\n      dest: {\n        value: paths.actions.leftHand.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        value: lAxis(\"touchX\"),\n        touching: lButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.leftHand.scalePenTip },\n      xform: xforms.touch_axis_scroll(0.05)\n    },\n    {\n      src: { value: rButton(\"top\").pressed },\n      dest: { value: paths.actions.leftHand.undoDrawing },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: lButton(\"top\").pressed },\n      dest: { value: paths.actions.leftHand.switchDrawMode },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.cursorHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: [rGripRisingGrab],\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.cursorHoldingUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: {\n        value: cursorDrop2\n      },\n      xform: xforms.falling,\n      priority: 4\n    }\n  ],\n\n  [sets.cursorHoldingInteractable]: [\n    {\n      src: {\n        value: rAxis(\"touchY\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.touch_axis_scroll(-1)\n    },\n    {\n      src: {\n        value: rAxis(\"joyY\")\n      },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.scale(-0.02)\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: cursorDrop1 },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [cursorDrop1, cursorDrop2],\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.any\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaDpad },\n      root: rootForFrozenOverrideWhenHolding,\n      xform: xforms.always(false)\n    }\n  ],\n\n  [sets.cursorHoveringOnPen]: [],\n\n  [sets.cursorHoldingPen]: [\n    {\n      src: [cursorDrop1],\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.noop,\n      priority: 1\n    },\n    {\n      src: [cursorDrop2],\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.noop,\n      priority: 1\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadCenter1\n      },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: rAxis(\"touchX\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.scalePenTip },\n      xform: xforms.touch_axis_scroll(0.1)\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadNorth1\n      },\n      dest: {\n        value: paths.actions.cursor.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadSouth1\n      },\n      dest: {\n        value: paths.actions.cursor.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: { value: rButton(\"top\").pressed },\n      dest: { value: paths.actions.cursor.undoDrawing },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.rightHandHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [rGripRisingGrab],\n      dest: { value: paths.actions.rightHand.grab },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.rightHandHoldingInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaDpad },\n      root: rootForFrozenOverrideWhenHolding,\n      xform: xforms.always(false)\n    }\n  ],\n  [sets.rightHandHoveringOnPen]: [],\n  [sets.rightHandHoldingPen]: [\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadCenter1\n      },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadNorth1\n      },\n      dest: {\n        value: paths.actions.rightHand.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadSouth1\n      },\n      dest: {\n        value: paths.actions.rightHand.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        value: rAxis(\"touchX\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.rightHand.scalePenTip },\n      xform: xforms.touch_axis_scroll(0.05)\n    },\n    {\n      src: { value: lButton(\"top\").pressed },\n      dest: { value: paths.actions.rightHand.undoDrawing },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: rButton(\"top\").pressed },\n      dest: { value: paths.actions.rightHand.switchDrawMode },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.cursorHoveringOnCamera]: [],\n  [sets.rightHandHoveringOnCamera]: [],\n  [sets.leftHandHoveringOnCamera]: [],\n\n  [sets.rightHandHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.takeSnapshot },\n      xform: xforms.copy,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.noop },\n      xform: xforms.falling,\n      priority: 3\n    }\n  ],\n  [sets.leftHandHoldingCamera]: [\n    {\n      src: { value: lButton(\"trigger\").pressed },\n      dest: { value: paths.actions.leftHand.takeSnapshot },\n      xform: xforms.copy\n    }\n  ],\n  [sets.cursorHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.takeSnapshot },\n      xform: xforms.copy,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.noop },\n      xform: xforms.falling,\n      priority: 3\n    }\n  ],\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ]\n});\n\nexport const viveWandUserBindings = addSetsToBindings({\n  [sets.leftHandHoldingPen]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n  [sets.rightHandHoldingPen]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst lGripPressed = paths.device.wmr.left.grip.pressed;\nconst rGripPressed = paths.device.wmr.right.grip.pressed;\nconst rTriggerPressed = paths.device.wmr.right.trigger.pressed;\n\nconst rJoyNorth = paths.device.wmr.v(\"right/joy/north\");\nconst rGripRising = paths.device.wmr.v(\"right/grip/rising\");\nconst rTriggerRising = paths.device.wmr.v(\"right/trigger/rising\");\nconst rGripFalling = paths.device.wmr.v(\"right/grip/falling\");\nconst rTriggerFalling = paths.device.wmr.v(\"right/trigger/falling\");\n\nfunction dpadVariables(hand) {\n  return {\n    padWest: paths.device.wmr.v(hand + \"/pad/west\"),\n    padEast: paths.device.wmr.v(hand + \"/pad/east\"),\n    padNorth: paths.device.wmr.v(hand + \"/pad/north\"),\n    padSouth: paths.device.wmr.v(hand + \"/pad/south\"),\n    padCenter: paths.device.wmr.v(hand + \"/pad/center\"),\n    padCenterStrip: paths.device.wmr.v(hand + \"/pad/centerStrip\")\n  };\n}\n\nfunction dpadBindings(hand) {\n  const { padWest, padEast, padNorth, padSouth, padCenter, padCenterStrip } = dpadVariables(hand);\n  const pad = paths.device.wmr.v(hand + \"/pad\");\n  return [\n    {\n      src: {\n        x: paths.device.wmr[hand].touchpad.axisX,\n        y: paths.device.wmr[hand].touchpad.axisY\n      },\n      dest: { value: pad },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: pad },\n      dest: {\n        west: padWest,\n        east: padEast,\n        north: padNorth,\n        south: padSouth,\n        center: padCenter\n      },\n      xform: xforms.vec2dpad(0.5, false, false)\n    },\n    {\n      src: [padNorth, padCenter, padSouth],\n      dest: { value: padCenterStrip },\n      xform: xforms.any\n    }\n  ];\n}\n\nconst neverFrozenBinding = {\n  src: {},\n  dest: { value: paths.actions.ensureFrozen },\n  xform: xforms.always(false)\n};\n\nfunction penBindings(hand, forCursor) {\n  const padY = paths.device.wmr[hand].touchpad.axisY;\n  const triggerPressed = paths.device.wmr[hand].trigger.pressed;\n  const padPressed = paths.device.wmr[hand].touchpad.pressed;\n  const padTouched = paths.device.wmr[hand].touchpad.touched;\n\n  const padRising = paths.device.wmr.v(hand + \"/pad/rising\");\n  const padCenterStripTouched = paths.device.wmr.v(hand + \"/pad/centerStrip/touched\");\n  const { padWest, padEast, padCenter, padCenterStrip } = dpadVariables(hand);\n\n  const actions = paths.actions[forCursor ? \"cursor\" : hand + \"Hand\"];\n\n  return [\n    neverFrozenBinding,\n    ...dpadBindings(hand),\n    {\n      src: { value: triggerPressed },\n      dest: { value: actions.startDrawing },\n      xform: xforms.rising\n    },\n    {\n      src: { value: triggerPressed },\n      dest: { value: actions.stopDrawing },\n      xform: xforms.falling\n    },\n    {\n      src: { value: padPressed },\n      dest: { value: padRising },\n      xform: xforms.rising\n    },\n    {\n      src: { bool: padRising, value: padWest },\n      dest: { value: actions.penPrevColor },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { bool: padRising, value: padEast },\n      dest: { value: actions.penNextColor },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: [padCenterStrip, padTouched],\n      dest: { value: padCenterStripTouched },\n      xform: xforms.all\n    },\n    {\n      src: { value: padY, touching: padCenterStripTouched },\n      dest: { value: actions.scalePenTip },\n      xform: xforms.touch_axis_scroll(-0.05)\n    },\n    {\n      src: [padRising, padCenter],\n      dest: { value: actions.undoDrawing },\n      xform: xforms.all\n    }\n  ];\n}\n\nfunction handPoseBindings(hand) {\n  const padTouched = paths.device.wmr[hand].touchpad.touched;\n  const triggerPressed = paths.device.wmr[hand].trigger.pressed;\n  const gripPressed = paths.device.wmr[hand].grip.pressed;\n  const actions = paths.actions[hand + \"Hand\"];\n  return [\n    {\n      src: { value: padTouched },\n      dest: { value: actions.thumb },\n      xform: xforms.copy\n    },\n    {\n      src: { value: triggerPressed },\n      dest: { value: actions.index },\n      xform: xforms.copy\n    },\n    {\n      src: { value: gripPressed },\n      dest: { value: actions.middleRingPinky },\n      xform: xforms.copy\n    }\n  ];\n}\n\nfunction freezeBindings() {\n  const leftPadPressed = paths.device.wmr.left.touchpad.pressed;\n  const rightPadPressed = paths.device.wmr.right.touchpad.pressed;\n  const leftPadFalling = paths.device.wmr.v(\"left/touchpad/falling\");\n  const rightPadFalling = paths.device.wmr.v(\"right/touchpad/falling\");\n  const keyboardSaceFalling = paths.device.wmr.k(\"space/falling\");\n  return [\n    {\n      src: [paths.device.keyboard.key(\" \"), leftPadPressed, rightPadPressed],\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.any\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: keyboardSaceFalling },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Tab\") },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: leftPadPressed },\n      dest: { value: leftPadFalling },\n      xform: xforms.falling\n    },\n    {\n      src: { value: rightPadPressed },\n      dest: { value: rightPadFalling },\n      xform: xforms.falling\n    },\n    {\n      src: [keyboardSaceFalling, leftPadFalling, rightPadFalling],\n      dest: { value: paths.actions.thaw },\n      xform: xforms.any\n    }\n  ];\n}\n\nfunction characterAccelerationBindings() {\n  const wasd_vec2 = paths.device.wmr.k(\"wasd_vec2\");\n  const arrows_vec2 = paths.device.wmr.k(\"arrows_vec2\");\n  const keyboardCharacterAcceleration = paths.device.wmr.k(\"characterAcceleration\");\n  const lJoyXDeadzoned = paths.device.wmr.v(\"left/joy/x/deadzoned\");\n  const lJoyYDeadzoned = paths.device.wmr.v(\"left/joy/y/deadzoned\");\n  const lJoyXScaled = paths.device.wmr.v(\"left/joy/x/scaled\");\n  const lJoyYScaled = paths.device.wmr.v(\"left/joy/y/scaled\");\n  const lCharacterAcceleration = paths.device.wmr.v(\"left/characterAcceleration\");\n  return [\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: { value: paths.device.wmr.left.joystick.axisX },\n      dest: { value: lJoyXDeadzoned },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: lJoyXDeadzoned },\n      dest: { value: lJoyXScaled },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: { value: paths.device.wmr.left.joystick.axisY },\n      dest: { value: lJoyYDeadzoned },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: lJoyYDeadzoned },\n      dest: { value: lJoyYScaled },\n      xform: xforms.scale(-1.5) // vertical character speed modifier\n    },\n    {\n      src: { x: lJoyXScaled, y: lJoyYScaled },\n      dest: { value: lCharacterAcceleration },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        first: lCharacterAcceleration,\n        second: keyboardCharacterAcceleration\n      },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: [\n        paths.device.wmr.left.trigger.pressed,\n        paths.device.wmr.right.trigger.pressed,\n        paths.device.keyboard.key(\"shift\")\n      ],\n      dest: { value: paths.actions.boost },\n      xform: xforms.any\n    }\n  ];\n}\n\nfunction cursorModDeltaBindings() {\n  const { padNorth, padSouth } = dpadVariables(\"right\");\n  const rPadNorthOrSouth = paths.device.wmr.v(\"right/pad/northOrSouth\");\n  const rPadNorthOrSouthPressed = paths.device.wmr.v(\"right/pad/northOrSouth/pressed\");\n  const rPadNorthOrSouthPressedY = paths.device.wmr.v(\"right/pad/northOrSouthpressed/y\");\n  return [\n    ...dpadBindings(\"right\"),\n    {\n      src: [padNorth, padSouth],\n      dest: { value: rPadNorthOrSouth },\n      xform: xforms.any\n    },\n    {\n      src: [rPadNorthOrSouth, paths.device.wmr.right.touchpad.pressed],\n      dest: { value: rPadNorthOrSouthPressed },\n      xform: xforms.all\n    },\n    {\n      src: {\n        bool: rPadNorthOrSouthPressed,\n        value: paths.device.wmr.right.touchpad.axisY\n      },\n      dest: { value: rPadNorthOrSouthPressedY },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: rPadNorthOrSouthPressedY },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.scale(0.1)\n    }\n  ];\n}\n\nfunction cursorMediaVolumeModBindings() {\n  const hand = \"right\";\n  const padY = paths.device.wmr[hand].touchpad.axisY;\n  const padTouched = paths.device.wmr[hand].touchpad.touched;\n\n  const padCenterStripTouched = paths.device.wmr.v(hand + \"/pad/centerStrip/touched\");\n  const { padCenterStrip } = dpadVariables(hand);\n\n  return [\n    ...dpadBindings(hand),\n    {\n      src: [padCenterStrip, padTouched],\n      dest: { value: padCenterStripTouched },\n      xform: xforms.all\n    },\n    {\n      src: { value: padY, touching: padCenterStripTouched },\n      dest: { value: paths.actions.cursor.mediaVolumeMod },\n      xform: xforms.touch_axis_scroll(-0.1)\n    }\n  ];\n}\n\nfunction holdingCameraBindings(hand, forCursor) {\n  const actions = paths.actions[forCursor ? \"cursor\" : hand + \"Hand\"];\n  return [\n    neverFrozenBinding,\n    {\n      src: { value: paths.device.wmr[hand].trigger.pressed },\n      dest: { value: actions.takeSnapshot },\n      xform: xforms.copy\n    }\n  ];\n}\n\nfunction teleportationAndRotationBindings() {\n  const rJoy = paths.device.wmr.v(\"right/joy\");\n  const rJoyWest = paths.device.wmr.v(\"right/joy/west\");\n  const rJoyEast = paths.device.wmr.v(\"right/joy/East\");\n  const rJoyWestRising = paths.device.wmr.v(\"right/joy/west/rising\");\n  const rJoyEastRising = paths.device.wmr.v(\"right/joy/east/rising\");\n  const keyboardQRising = paths.device.wmr.k(\"q/rising\");\n  const keyboardERising = paths.device.wmr.k(\"e/rising\");\n  return [\n    {\n      src: {\n        x: paths.device.wmr.right.joystick.axisX,\n        y: paths.device.wmr.right.joystick.axisY\n      },\n      dest: { value: rJoy },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: rJoy },\n      dest: {\n        north: rJoyNorth,\n        west: rJoyWest,\n        east: rJoyEast\n      },\n      xform: xforms.vec2dpad(0.2, false, false)\n    },\n    {\n      src: { value: rJoyNorth },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rJoyWest },\n      dest: { value: rJoyWestRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rJoyEast },\n      dest: { value: rJoyEastRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: keyboardQRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: keyboardERising },\n      xform: xforms.rising\n    },\n    {\n      src: [rJoyWestRising, keyboardQRising],\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.any\n    },\n    {\n      src: [rJoyEastRising, keyboardERising],\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.any\n    }\n  ];\n}\n\nexport const wmrUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: { value: paths.device.wmr.left.matrix },\n      dest: { value: paths.actions.leftHand.matrix },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.right.matrix },\n      dest: { value: paths.actions.rightHand.matrix },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.left.pose },\n      dest: { value: paths.actions.leftHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.right.pose },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.right.pose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    },\n    ...handPoseBindings(\"left\"),\n    ...handPoseBindings(\"right\"),\n    ...freezeBindings(),\n    ...teleportationAndRotationBindings(),\n    ...characterAccelerationBindings(),\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"/\")\n      },\n      dest: {\n        value: paths.actions.focusChatCommand\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.mediaExit },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/shift+1\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/shift+2\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/shift+3\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/shift+4\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/shift+5\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/shift+6\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/shift+7\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/shift+8\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftHandHoveringOnNothing]: [],\n  [sets.cursorHoveringOnNothing]: [],\n  [sets.rightHandHoveringOnNothing]: [],\n\n  [sets.rightHandTeleporting]: [\n    {\n      src: { value: rJoyNorth },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.falling\n    }\n  ],\n\n  [sets.cursorHoveringOnUI]: [\n    {\n      src: { value: rTriggerPressed },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.cursorHoveringOnVideo]: [...cursorMediaVolumeModBindings()],\n\n  [sets.leftHandHoveringOnInteractable]: [\n    {\n      src: { value: lGripPressed },\n      dest: { value: paths.actions.leftHand.grab },\n      xform: xforms.rising\n    }\n  ],\n  [sets.cursorHoveringOnInteractable]: [\n    {\n      src: { value: rGripPressed },\n      dest: { value: rGripRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rTriggerPressed },\n      dest: { value: rTriggerRising },\n      xform: xforms.rising\n    },\n    {\n      src: [rGripRising, rTriggerRising],\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.any\n    }\n  ],\n  [sets.rightHandHoveringOnInteractable]: [\n    {\n      src: { value: rGripPressed },\n      dest: { value: paths.actions.rightHand.grab },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftHandHoldingInteractable]: [\n    neverFrozenBinding,\n    {\n      src: { value: lGripPressed },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.falling\n    }\n  ],\n  [sets.cursorHoldingInteractable]: [\n    neverFrozenBinding,\n    ...cursorModDeltaBindings(),\n    {\n      src: { value: rGripPressed },\n      dest: { value: rGripFalling },\n      xform: xforms.falling\n    },\n    {\n      src: { value: rTriggerPressed },\n      dest: { value: rTriggerFalling },\n      xform: xforms.falling\n    },\n    {\n      src: [rGripFalling, rTriggerFalling],\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.any\n    }\n  ],\n  [sets.rightHandHoldingInteractable]: [\n    neverFrozenBinding,\n    {\n      src: { value: rGripPressed },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.falling\n    }\n  ],\n\n  [sets.leftHandHoveringOnPen]: [],\n  [sets.cursorHoveringOnPen]: [],\n  [sets.rightHandHoveringOnPen]: [],\n\n  [sets.leftHandHoldingPen]: penBindings(\"left\"),\n  [sets.cursorHoldingPen]: penBindings(\"right\", true),\n  [sets.rightHandHoldingPen]: penBindings(\"right\"),\n\n  [sets.leftHandHoveringOnCamera]: [],\n  [sets.cursorHoveringOnCamera]: [],\n  [sets.rightHandHoveringOnCamera]: [],\n\n  [sets.leftHandHoldingCamera]: holdingCameraBindings(\"left\"),\n  [sets.cursorHoldingCamera]: holdingCameraBindings(\"right\", true),\n  [sets.rightHandHoldingCamera]: holdingCameraBindings(\"right\"),\n\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst button = paths.device.xbox.button;\nconst axis = paths.device.xbox.axis;\nconst scaledRightJoystickVertical = paths.device.xbox.v(\"scaledRightJoystickVertical\");\nconst scaledLeftJoystickCursorDelta = paths.device.xbox.v(\"scaledLeftJoystickCursorDelta\");\nconst deadzonedRightJoystickHorizontal = paths.device.xbox.v(\"deadzonedRightJoystickHorizontal\");\nconst deadzonedRightJoystickVertical = paths.device.xbox.v(\"deadzonedRightJoystickVertical\");\nconst deadzonedLeftJoystickHorizontal = paths.device.xbox.v(\"deadzonedLeftJoystickHorizontal\");\nconst deadzonedLeftJoystickVertical = paths.device.xbox.v(\"deadzonedLeftJoystickVertical\");\nconst vec2Zero = paths.device.xbox.v(\"vec2Zero\");\nconst zero = paths.device.xbox.v(\"zero\");\n\nfunction characterAccelerationBindings(disableForwardOnTrigger) {\n  const scaledLeftJoystickHorizontal = paths.device.xbox.v(\"scaledLeftJoystickHorizontal\");\n  const scaledLeftJoystickVertical = paths.device.xbox.v(\"scaledLeftJoystickVertical\");\n  const scaledLeftJoystickForwardAcceleration = paths.device.xbox.v(\"scaledLeftJoystickForwardAcceleration\");\n  return [\n    {\n      src: { value: deadzonedLeftJoystickHorizontal },\n      dest: { value: scaledLeftJoystickHorizontal },\n      xform: xforms.scale(1.5) // horizontal move speed modifier\n    },\n    {\n      src: { value: deadzonedLeftJoystickVertical },\n      dest: { value: scaledLeftJoystickVertical },\n      xform: xforms.scale(-1.25) // vertical move speed modifier\n    },\n    {\n      src: {\n        bool: button(\"leftTrigger\").pressed,\n        value: scaledLeftJoystickVertical\n      },\n      dest: { value: scaledLeftJoystickForwardAcceleration },\n      xform: disableForwardOnTrigger ? xforms.copyIfFalse : xforms.copy\n    },\n    {\n      src: {\n        x: scaledLeftJoystickHorizontal,\n        y: scaledLeftJoystickForwardAcceleration\n      },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.compose_vec2\n    }\n  ];\n}\n\nexport const xboxControllerUserBindings = addSetsToBindings({\n  [sets.cursorHoldingPen]: [\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.startDrawing },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.stopDrawing },\n      xform: xforms.falling,\n      priority: 200\n    },\n    {\n      src: { value: button(\"b\").pressed },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"y\").pressed },\n      dest: { value: paths.actions.cursor.undoDrawing },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: button(\"a\").pressed },\n      dest: { value: paths.actions.cursor.penNextColor },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"x\").pressed },\n      dest: { value: paths.actions.cursor.penPrevColor },\n      xform: xforms.rising\n    }\n  ],\n  [sets.global]: [\n    {\n      src: {},\n      dest: { value: paths.actions.cursor.hideLine },\n      xform: xforms.always(true)\n    },\n    {\n      src: { value: axis(\"rightJoystickHorizontal\") },\n      dest: { value: deadzonedRightJoystickHorizontal },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: deadzonedRightJoystickHorizontal },\n      dest: { value: paths.actions.angularVelocity },\n      xform: xforms.scale(0.6) // horizontal look speed modifier\n    },\n    {\n      src: { value: axis(\"rightJoystickVertical\") },\n      dest: { value: deadzonedRightJoystickVertical },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: deadzonedRightJoystickVertical },\n      dest: { value: scaledRightJoystickVertical },\n      xform: xforms.scale(-1.25) // vertical look speed modifier\n    },\n    {\n      src: {},\n      dest: { value: zero },\n      xform: xforms.always(0)\n    },\n    {\n      src: {\n        x: zero,\n        y: scaledRightJoystickVertical\n      },\n      dest: { value: paths.actions.cameraDelta },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: paths.actions.cameraDelta },\n      dest: { value: paths.actions.lobbyCameraDelta },\n      xform: xforms.copy\n    },\n    {\n      src: { value: axis(\"leftJoystickHorizontal\") },\n      dest: { value: deadzonedLeftJoystickHorizontal },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: axis(\"leftJoystickVertical\") },\n      dest: { value: deadzonedLeftJoystickVertical },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: button(\"leftTrigger\").pressed },\n      dest: { value: paths.actions.boost },\n      xform: xforms.copy\n    },\n    {\n      src: { value: button(\"leftBumper\").pressed },\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"rightBumper\").pressed },\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.rising\n    },\n    {\n      src: {},\n      dest: { value: vec2Zero },\n      xform: xforms.vec2Zero\n    },\n    {\n      src: { value: vec2Zero },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.poseFromCameraProjection()\n    },\n    {\n      src: { value: button(\"y\").pressed },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising,\n      priority: 100\n    },\n    {\n      src: { value: button(\"dpadUp\").pressed },\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.copy\n    },\n    {\n      src: { value: button(\"dpadUp\").pressed },\n      dest: { value: paths.actions.thaw },\n      xform: xforms.falling\n    },\n    {\n      src: { value: button(\"start\").pressed },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"a\").pressed },\n      dest: { value: paths.actions.startGazeTeleport },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"a\").pressed },\n      dest: { value: paths.actions.stopGazeTeleport },\n      xform: xforms.falling\n    }\n  ],\n  [sets.cursorHoldingNothing]: [...characterAccelerationBindings()],\n  [sets.cursorHoldingInteractable]: [\n    ...characterAccelerationBindings(true),\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.falling,\n      priority: 100\n    },\n    {\n      src: { value: deadzonedLeftJoystickVertical },\n      dest: { value: scaledLeftJoystickCursorDelta },\n      xform: xforms.scale(0.25)\n    },\n    {\n      src: {\n        bool: button(\"leftTrigger\").pressed,\n        value: scaledLeftJoystickCursorDelta\n      },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.copyIfTrue\n    }\n  ],\n  [sets.cursorHoveringOnUI]: [\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising\n    }\n  ],\n  [sets.cursorHoveringOnInteractable]: [\n    ...characterAccelerationBindings(),\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising,\n      priority: 100\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\n// vars\nconst v = s => `/vars/daydream/${s}`;\nconst touchpad = v(\"touchpad/axis\");\nconst touchpadRising = v(\"touchpad/rising\");\nconst touchpadFalling = v(\"touchpad/falling\");\nconst touchpadPressed = v(\"touchpad/pressed\");\nconst dpadNorth = v(\"dpad/north\");\nconst dpadSouth = v(\"dpad/south\");\nconst dpadEast = v(\"dpad/east\");\nconst dpadWest = v(\"dpad/west\");\nconst dpadCenter = v(\"dpad/center\");\nconst brushSizeDelta = v(\"brushSizeDelta\");\nconst cursorModDelta = v(\"cursorModDelta\");\nconst dpadSouthDrop = v(\"dropSouth\");\nconst dpadCenterDrop = v(\"dropCenter\");\n\nconst grabBinding = [\n  {\n    src: { value: dpadCenter, bool: touchpadRising },\n    dest: { value: paths.actions.cursor.grab },\n    xform: xforms.copyIfTrue,\n    priority: 100\n  }\n];\n\nconst dropOnCenterOrSouth = [\n  {\n    src: { value: dpadCenter, bool: touchpadRising },\n    dest: { value: dpadCenterDrop },\n    xform: xforms.copyIfTrue,\n    priority: 100\n  },\n  {\n    src: { value: dpadSouth, bool: touchpadRising },\n    dest: { value: dpadSouthDrop },\n    xform: xforms.copyIfTrue,\n    priority: 100\n  },\n  {\n    src: [dpadCenterDrop, dpadSouthDrop],\n    dest: { value: paths.actions.cursor.drop },\n    xform: xforms.any\n  }\n];\n\nexport const daydreamUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: { value: paths.device.daydream.matrix },\n      dest: { value: paths.actions.rightHand.matrix },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: paths.device.daydream.axis(\"touchpadX\"),\n        y: paths.device.daydream.axis(\"touchpadY\")\n      },\n      dest: { value: touchpad },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: paths.device.daydream.button(\"touchpad\").pressed\n      },\n      dest: { value: touchpadRising },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.daydream.button(\"touchpad\").pressed\n      },\n      dest: { value: touchpadFalling },\n      xform: xforms.falling\n    },\n    {\n      src: {\n        value: paths.device.daydream.button(\"touchpad\").pressed\n      },\n      dest: { value: touchpadPressed },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: touchpad\n      },\n      dest: {\n        north: dpadNorth,\n        south: dpadSouth,\n        east: dpadEast,\n        west: dpadWest,\n        center: dpadCenter\n      },\n      xform: xforms.vec2dpad(0.5)\n    },\n    {\n      src: {\n        value: dpadEast,\n        bool: touchpadRising\n      },\n      dest: {\n        value: paths.actions.snapRotateRight\n      },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        value: dpadWest,\n        bool: touchpadRising\n      },\n      dest: {\n        value: paths.actions.snapRotateLeft\n      },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        value: dpadCenter,\n        bool: touchpadRising\n      },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: paths.device.daydream.pose },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.daydream.pose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    }\n  ],\n\n  [sets.cursorHoveringOnInteractable]: grabBinding,\n  [sets.cursorHoveringOnUI]: grabBinding,\n\n  [sets.cursorHoveringOnVideo]: [\n    {\n      src: {\n        value: paths.device.daydream.axis(\"touchpadY\"),\n        touching: paths.device.daydream.button(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.mediaVolumeMod },\n      xform: xforms.touch_axis_scroll(-0.1)\n    }\n  ],\n\n  [sets.cursorHoldingInteractable]: [\n    {\n      src: { value: touchpadFalling },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: paths.device.daydream.axis(\"touchpadY\"),\n        touching: paths.device.daydream.button(\"touchpad\").touched\n      },\n      dest: { value: cursorModDelta },\n      xform: xforms.touch_axis_scroll()\n    },\n    {\n      src: { value: cursorModDelta },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.copy\n    }\n  ],\n\n  [sets.rightHandTeleporting]: [\n    {\n      src: { value: touchpadFalling },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.copy\n    }\n  ],\n\n  [sets.cursorHoldingPen]: [\n    {\n      src: { value: dpadNorth, bool: touchpadRising },\n      dest: { value: paths.actions.cursor.startDrawing },\n      xform: xforms.copyIfTrue,\n      priority: 100\n    },\n    {\n      src: { value: touchpadFalling },\n      dest: { value: paths.actions.cursor.stopDrawing },\n      xform: xforms.copy,\n      priority: 100\n    },\n    {\n      src: {\n        value: paths.device.daydream.axis(\"touchpadX\"),\n        touching: paths.device.daydream.button(\"touchpad\").touched\n      },\n      dest: { value: brushSizeDelta },\n      xform: xforms.touch_axis_scroll(-0.1)\n    },\n    {\n      src: {\n        value: brushSizeDelta,\n        bool: touchpadPressed\n      },\n      dest: { value: paths.actions.cursor.scalePenTip },\n      xform: xforms.copyIfFalse,\n      priority: 100\n    },\n    {\n      src: { value: dpadEast, bool: touchpadRising },\n      dest: {\n        value: paths.actions.cursor.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 100\n    },\n    {\n      src: { value: dpadWest, bool: touchpadRising },\n      dest: {\n        value: paths.actions.cursor.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 100\n    },\n    {\n      src: {\n        value: cursorModDelta,\n        bool: touchpadPressed\n      },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.copyIfFalse,\n      priority: 100\n    },\n    ...dropOnCenterOrSouth\n  ],\n\n  [sets.cursorHoldingCamera]: [\n    // Don't drop on touchpad release\n    {\n      src: {\n        value: touchpadFalling\n      },\n      xform: xforms.noop,\n      priority: 100\n    },\n    {\n      src: {\n        value: dpadNorth,\n        bool: touchpadRising\n      },\n      dest: { value: paths.actions.cursor.takeSnapshot },\n      xform: xforms.copy,\n      priority: 100\n    },\n    ...dropOnCenterOrSouth\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nexport const cardboardUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: { value: paths.device.touchscreen.isTouching },\n      dest: {\n        value: paths.actions.startGazeTeleport\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.touchscreen.isTouching },\n      dest: {\n        value: paths.actions.stopGazeTeleport\n      },\n      xform: xforms.falling\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nexport default function generate3DOFTriggerBindings(device) {\n  const touchpad = device.v(\"touchpad\");\n  const touchpadButton = device.button(\"touchpad\");\n  const triggerButton = device.button(\"trigger\");\n  const touchpadX = device.axis(\"touchpadX\");\n  const touchpadXForPen = device.axis(\"touchpadXForPen\");\n  const touchpadY = device.axis(\"touchpadY\");\n  const touchpadYForPen = device.axis(\"touchpadYForPen\");\n  const touchpadRising = device.v(\"touchpad/rising\");\n  const touchpadFalling = device.v(\"touchpad/falling\");\n  const triggerRising = device.v(\"trigger/rising\");\n  const triggerFalling = device.v(\"trigger/falling\");\n  const dpadNorth = device.v(\"dpad/north\");\n  const dpadSouth = device.v(\"dpad/south\");\n  const dpadEast = device.v(\"dpad/east\");\n  const dpadWest = device.v(\"dpad/west\");\n  const dpadCenter = device.v(\"dpad/center\");\n  const dpadCenterStrip = device.v(\"dpad/centerStrip\");\n  const dpadBottomCenterStrip = device.v(\"dpad/bottomCenterStrip\");\n  const togglePen = \"/vars/oculus-go/togglePen\";\n\n  const grabBinding = {\n    src: {\n      value: triggerRising\n    },\n    dest: { value: paths.actions.cursor.grab },\n    xform: xforms.copy,\n    priority: 200\n  };\n  const dropBinding = {\n    src: {\n      value: triggerFalling\n    },\n    dest: { value: paths.actions.cursor.drop },\n    xform: xforms.copy,\n    priority: 200\n  };\n\n  return addSetsToBindings({\n    [sets.global]: [\n      {\n        src: { value: device.matrix },\n        dest: { value: paths.actions.rightHand.matrix },\n        xform: xforms.copy\n      },\n      {\n        src: {\n          value: triggerButton.pressed\n        },\n        dest: { value: triggerRising },\n        xform: xforms.rising\n      },\n      {\n        src: {\n          value: triggerButton.pressed\n        },\n        dest: { value: triggerFalling },\n        xform: xforms.falling\n      },\n      {\n        src: {\n          value: touchpadButton.pressed\n        },\n        dest: { value: touchpadRising },\n        xform: xforms.rising,\n        priority: 100\n      },\n      {\n        src: {\n          value: touchpadButton.pressed\n        },\n        dest: { value: touchpadFalling },\n        xform: xforms.falling,\n        priority: 100\n      },\n      {\n        src: {\n          x: touchpadX,\n          y: touchpadY\n        },\n        dest: { value: touchpad },\n        xform: xforms.compose_vec2\n      },\n      {\n        src: { value: touchpadX },\n        dest: { value: touchpadXForPen },\n        xform: xforms.copy\n      },\n      {\n        src: { value: touchpadY },\n        dest: { value: touchpadYForPen },\n        xform: xforms.copy\n      },\n      {\n        src: {\n          value: touchpad\n        },\n        dest: {\n          north: dpadNorth,\n          south: dpadSouth,\n          east: dpadEast,\n          west: dpadWest,\n          center: dpadCenter\n        },\n        xform: xforms.vec2dpad(0.3)\n      },\n      {\n        src: [dpadCenter, dpadSouth],\n        dest: { value: dpadBottomCenterStrip },\n        xform: xforms.any\n      },\n      {\n        src: [dpadNorth, dpadBottomCenterStrip],\n        dest: { value: dpadCenterStrip },\n        xform: xforms.any\n      },\n      {\n        src: {\n          value: dpadCenterStrip,\n          bool: touchpadButton.pressed\n        },\n        dest: {\n          value: paths.actions.ensureFrozen\n        },\n        priority: 100,\n        xform: xforms.copyIfTrue\n      },\n      {\n        src: { value: touchpadFalling },\n        dest: {\n          value: paths.actions.thaw\n        },\n        xform: xforms.copy\n      },\n      {\n        src: {\n          value: dpadEast,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.snapRotateRight\n        },\n        xform: xforms.copyIfTrue,\n        priority: 100\n      },\n      {\n        src: {\n          value: dpadWest,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.snapRotateLeft\n        },\n        xform: xforms.copyIfTrue,\n        priority: 100\n      },\n      {\n        src: {\n          value: triggerRising\n        },\n        dest: { value: paths.actions.rightHand.startTeleport },\n        xform: xforms.copy,\n        priority: 100\n      },\n      {\n        src: { value: device.pose },\n        dest: { value: paths.actions.cursor.pose },\n        xform: xforms.copy\n      },\n      {\n        src: { value: device.pose },\n        dest: { value: paths.actions.rightHand.pose },\n        xform: xforms.copy\n      },\n      {\n        src: { value: touchpadButton.touched },\n        dest: { value: paths.actions.rightHand.thumb },\n        xform: xforms.copy\n      },\n      {\n        src: { value: triggerButton.pressed },\n        dest: { value: paths.actions.rightHand.index },\n        xform: xforms.copy\n      },\n      {\n        src: { value: triggerButton.pressed },\n        dest: { value: paths.actions.rightHand.middleRingPinky },\n        xform: xforms.copy\n      }\n    ],\n\n    [sets.cursorHoveringOnInteractable]: [grabBinding],\n    [sets.cursorHoveringOnUI]: [grabBinding],\n    [sets.cursorHoldingUI]: [dropBinding],\n    [sets.cursorHoveringOnVideo]: [\n      {\n        src: {\n          value: touchpadY,\n          touching: touchpadButton.touched\n        },\n        dest: { value: paths.actions.cursor.mediaVolumeMod },\n        xform: xforms.touch_axis_scroll(-0.1)\n      }\n    ],\n\n    [sets.cursorHoldingInteractable]: [\n      {\n        src: {\n          value: triggerFalling\n        },\n        dest: { value: paths.actions.cursor.drop },\n        xform: xforms.copy,\n        priority: 200\n      },\n      {\n        src: {\n          value: touchpadY,\n          touching: touchpadButton.touched\n        },\n        dest: { value: paths.actions.cursor.modDelta },\n        xform: xforms.touch_axis_scroll()\n      },\n      {\n        src: { value: dpadCenterStrip },\n        priority: 200,\n        xform: xforms.noop\n      }\n    ],\n\n    [sets.rightHandTeleporting]: [\n      {\n        src: {\n          value: triggerFalling\n        },\n        dest: { value: paths.actions.rightHand.stopTeleport },\n        xform: xforms.copy,\n        priority: 100\n      }\n    ],\n\n    [sets.cursorHoldingPen]: [\n      {\n        src: {\n          value: triggerRising\n        },\n        dest: { value: paths.actions.cursor.startDrawing },\n        xform: xforms.copy,\n        priority: 300\n      },\n      {\n        src: {\n          value: triggerFalling\n        },\n        dest: { value: paths.actions.cursor.stopDrawing },\n        xform: xforms.copy,\n        priority: 300\n      },\n      {\n        src: {\n          value: touchpadXForPen,\n          touching: touchpadButton.touched\n        },\n        dest: { value: paths.actions.cursor.scalePenTip },\n        xform: xforms.touch_axis_scroll(0.1, 0.1),\n        priority: 200\n      },\n      {\n        src: {\n          value: touchpadYForPen,\n          touching: touchpadButton.touched\n        },\n        dest: { value: paths.actions.cursor.modDelta },\n        xform: xforms.touch_axis_scroll(1, 0.1),\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadBottomCenterStrip,\n          bool: touchpadFalling\n        },\n        dest: { value: togglePen },\n        xform: xforms.copyIfTrue,\n        priority: 300\n      },\n      {\n        src: { value: togglePen },\n        dest: { value: paths.actions.cursor.drop },\n        xform: xforms.rising,\n        priority: 200\n      },\n      {\n        src: { value: togglePen },\n        dest: { value: paths.actions.pen.remove },\n        xform: xforms.rising,\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadEast,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.cursor.penPrevColor\n        },\n        xform: xforms.copyIfTrue,\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadWest,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.cursor.penNextColor\n        },\n        xform: xforms.copyIfTrue,\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadNorth,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.cursor.undoDrawing\n        },\n        xform: xforms.copyIfTrue,\n        priority: 200\n      }\n    ],\n\n    [sets.cursorHoldingCamera]: [\n      {\n        src: {\n          value: triggerRising\n        },\n        dest: { value: paths.actions.cursor.takeSnapshot },\n        xform: xforms.copy,\n        priority: 300\n      }\n    ]\n  });\n}\n","import { sets } from \"./sets\";\n\nlet leftTeleporter, rightTeleporter;\n\nexport function resolveActionSets() {\n  leftTeleporter = leftTeleporter || document.querySelector(\"#player-left-controller\").components.teleporter;\n  rightTeleporter = rightTeleporter || document.querySelector(\"#player-right-controller\").components.teleporter;\n  const userinput = AFRAME.scenes[0].systems.userinput;\n  const { leftHand, rightHand, rightRemote } = AFRAME.scenes[0].systems.interaction.state;\n\n  userinput.toggleSet(sets.leftHandHoveringOnNothing, !leftHand.held && !leftHand.hovered);\n  userinput.toggleSet(\n    sets.leftHandHoveringOnPen,\n    !leftHand.held &&\n      leftHand.hovered &&\n      leftHand.hovered.components.tags &&\n      leftHand.hovered.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.leftHandHoveringOnCamera,\n    !leftHand.held && leftHand.hovered && leftHand.hovered.components[\"camera-tool\"]\n  );\n  userinput.toggleSet(\n    sets.leftHandHoveringOnInteractable,\n    !leftHand.held &&\n      (leftHand.hovered &&\n        ((leftHand.hovered.components.tags && leftHand.hovered.components.tags.data.offersRemoteConstraint) ||\n          leftHand.hovered.components[\"super-spawner\"]))\n  );\n  userinput.toggleSet(\n    sets.leftHandHoveringOnVideo,\n    !leftHand.held && leftHand.hovered && leftHand.hovered.components[\"media-video\"]\n  );\n  userinput.toggleSet(\n    sets.leftHandHoldingPen,\n    leftHand.held && leftHand.held.components.tags && leftHand.held.components.tags.data.isPen\n  );\n  userinput.toggleSet(sets.leftHandHoldingCamera, leftHand.held && leftHand.held.components[\"camera-tool\"]);\n  userinput.toggleSet(sets.leftHandHoldingInteractable, leftHand.held);\n\n  userinput.toggleSet(\n    sets.rightHandHoveringOnNothing,\n    !rightRemote.held && !rightRemote.hovered && !rightHand.held && !rightHand.hovered\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnPen,\n    !rightHand.held &&\n      rightHand.hovered &&\n      rightHand.hovered.components.tags &&\n      rightHand.hovered.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnCamera,\n    !rightHand.held && rightHand.hovered && rightHand.hovered.components[\"camera-tool\"]\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnInteractable,\n    !rightHand.held &&\n      (rightHand.hovered &&\n        ((rightHand.hovered.components.tags && rightHand.hovered.components.tags.data.offersRemoteConstraint) ||\n          rightHand.hovered.components[\"super-spawner\"]))\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnVideo,\n    !rightHand.held && rightHand.hovered && rightHand.hovered.components[\"media-video\"]\n  );\n  userinput.toggleSet(\n    sets.rightHandHoldingPen,\n    rightHand.held && rightHand.held.components.tags && rightHand.held.components.tags.data.isPen\n  );\n  userinput.toggleSet(sets.rightHandHoldingCamera, rightHand.held && rightHand.held.components[\"camera-tool\"]);\n  userinput.toggleSet(sets.rightHandHoldingInteractable, rightHand.held);\n\n  userinput.toggleSet(\n    sets.cursorHoveringOnNothing,\n    !rightHand.held && !rightHand.hovered && !rightRemote.held && !rightRemote.hovered\n  );\n  userinput.toggleSet(\n    sets.cursorHoveringOnPen,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      rightRemote.hovered.components.tags &&\n      rightRemote.hovered.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.cursorHoveringOnCamera,\n\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      rightRemote.hovered.components[\"camera-tool\"]\n  );\n  userinput.toggleSet(\n    sets.cursorHoveringOnInteractable,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      ((rightRemote.hovered.components.tags && rightRemote.hovered.components.tags.data.offersRemoteConstraint) ||\n        rightRemote.hovered.components[\"super-spawner\"])\n  );\n  userinput.toggleSet(\n    sets.cursorHoveringOnUI,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      (rightRemote.hovered.components.tags &&\n        (rightRemote.hovered.components.tags.data.singleActionButton ||\n          rightRemote.hovered.components.tags.data.holdableButton))\n  );\n  userinput.toggleSet(\n    sets.cursorHoveringOnVideo,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      rightRemote.hovered.components[\"media-video\"]\n  );\n\n  userinput.toggleSet(sets.cursorHoldingNothing, !rightHand.held && !rightRemote.held);\n  userinput.toggleSet(\n    sets.cursorHoldingPen,\n\n    !rightHand.held &&\n      !rightHand.hovered &&\n      rightRemote.held &&\n      rightRemote.held.components.tags &&\n      rightRemote.held.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.cursorHoldingCamera,\n    !rightHand.held && !rightHand.hovered && rightRemote.held && rightRemote.held.components[\"camera-tool\"]\n  );\n  userinput.toggleSet(\n    sets.cursorHoldingUI,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      rightRemote.held &&\n      rightRemote.held.components.tags &&\n      rightRemote.held.components.tags.data.holdableButton\n  );\n  userinput.toggleSet(sets.cursorHoldingInteractable, rightRemote.held);\n\n  userinput.toggleSet(sets.leftHandTeleporting, leftTeleporter.isTeleporting);\n  userinput.toggleSet(sets.rightHandTeleporting, rightTeleporter.isTeleporting);\n\n  userinput.toggleSet(\n    sets.inputFocused,\n    document.activeElement.nodeName === \"INPUT\" ||\n      document.activeElement.nodeName === \"TEXTAREA\" ||\n      document.activeElement.contentEditable === \"true\"\n  );\n}\n","import { paths } from \"../paths\";\n\nexport class GamepadDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n  }\n\n  write(frame) {\n    if (this.gamepad.connected) {\n      this.gamepad.buttons.forEach((button, i) => {\n        const buttonPath = paths.device.gamepad(this.gamepad.index).button(i);\n        frame.setValueType(buttonPath.pressed, !!button.pressed);\n        frame.setValueType(buttonPath.touched, !!button.touched);\n        frame.setValueType(buttonPath.value, button.value);\n      });\n      this.gamepad.axes.forEach((axis, i) => {\n        frame.setValueType(paths.device.gamepad(this.gamepad.index).axis(i), axis);\n      });\n    }\n  }\n}\n","export const gamepadBindings = {};\n","import { sets } from \"./sets\";\nimport { paths } from \"./paths\";\n\nimport { MouseDevice } from \"./devices/mouse\";\nimport { KeyboardDevice } from \"./devices/keyboard\";\nimport { HudDevice } from \"./devices/hud\";\nimport { XboxControllerDevice } from \"./devices/xbox-controller\";\nimport { OculusGoControllerDevice } from \"./devices/oculus-go-controller\";\nimport { GearVRControllerDevice } from \"./devices/gear-vr-controller\";\nimport { OculusTouchControllerDevice } from \"./devices/oculus-touch-controller\";\nimport { DaydreamControllerDevice } from \"./devices/daydream-controller\";\nimport { ViveControllerDevice } from \"./devices/vive-controller\";\nimport { WindowsMixedRealityControllerDevice } from \"./devices/windows-mixed-reality-controller\";\nimport { GyroDevice } from \"./devices/gyro\";\n\nimport { AppAwareMouseDevice } from \"./devices/app-aware-mouse\";\nimport { AppAwareTouchscreenDevice } from \"./devices/app-aware-touchscreen\";\n\nimport { keyboardMouseUserBindings } from \"./bindings/keyboard-mouse-user\";\nimport { touchscreenUserBindings } from \"./bindings/touchscreen-user\";\nimport { keyboardDebuggingBindings } from \"./bindings/keyboard-debugging\";\nimport { oculusTouchUserBindings } from \"./bindings/oculus-touch-user\";\nimport { viveUserBindings, viveWandUserBindings } from \"./bindings/vive-user\";\nimport { wmrUserBindings } from \"./bindings/windows-mixed-reality-user\";\nimport { xboxControllerUserBindings } from \"./bindings/xbox-controller-user\";\nimport { daydreamUserBindings } from \"./bindings/daydream-user\";\nimport { cardboardUserBindings } from \"./bindings/cardboard-user\";\n\nimport generate3DOFTriggerBindings from \"./bindings/oculus-go-user\";\nconst oculusGoUserBindings = generate3DOFTriggerBindings(paths.device.oculusgo);\nconst gearVRControllerUserBindings = generate3DOFTriggerBindings(paths.device.gearVRController);\n\nimport { resolveActionSets } from \"./resolve-action-sets\";\nimport { GamepadDevice } from \"./devices/gamepad\";\nimport { gamepadBindings } from \"./bindings/generic-gamepad\";\nimport { getAvailableVREntryTypes, VR_DEVICE_AVAILABILITY } from \"../../utils/vr-caps-detect\";\nimport { ArrayBackedSet } from \"./array-backed-set\";\n\nfunction arrayContentsDiffer(a, b) {\n  if (a.length !== b.length) return true;\n\n  for (let i = 0, il = a.length; i < il; i++) {\n    const elem = a[i];\n    let found = false;\n\n    for (let j = 0, jl = b.length; j < jl; j++) {\n      if (elem === b[j]) {\n        found = true;\n        break;\n      }\n    }\n\n    if (!found) return true;\n  }\n\n  return false;\n}\n\nconst satisfiesPath = (binding, path) => {\n  for (const key in binding.dest) {\n    if (binding.dest[key].indexOf(path) !== -1) {\n      return true;\n    }\n  }\n  return false;\n};\n\nconst satisfyPath = (bindings, path) => {\n  for (const binding of bindings) {\n    if (satisfiesPath(binding, path)) {\n      return true;\n    }\n  }\n  return false;\n};\n\nconst satisfiedBy = (binding, bindings) => {\n  for (const path of Object.values(binding.src)) {\n    if (path.startsWith(\"/device/\")) continue;\n    if (!satisfyPath(bindings, path)) return false;\n  }\n  return true;\n};\n\nfunction dependencySort(mappings) {\n  const unsorted = [];\n  for (const mapping of mappings) {\n    for (const setName in mapping) {\n      for (const binding of mapping[setName]) {\n        unsorted.push(binding);\n      }\n    }\n  }\n\n  const sorted = [];\n  while (unsorted.length > 0) {\n    const binding = unsorted.shift();\n    if (satisfiedBy(binding, sorted)) {\n      sorted.push(binding);\n    } else {\n      unsorted.push(binding);\n    }\n  }\n\n  return sorted;\n}\n\nfunction canMask(masker, masked) {\n  if (masker.priority === undefined) {\n    masker.priority = 0;\n  }\n  if (masked.priority === undefined) {\n    masked.priority = 0;\n  }\n  if (masked.priority >= masker.priority) return false;\n  for (const maskerKey in masker.src) {\n    const maskerPath = masker.src[maskerKey];\n    for (const maskedKey in masked.src) {\n      const maskedPath = masked.src[maskedKey];\n      if (maskedPath.indexOf(maskerPath) !== -1) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nfunction computeMasks(bindings) {\n  const masks = new Array(bindings.length);\n  for (let row = 0; row < bindings.length; row++) {\n    const masksRow = (masks[row] = []);\n    const bindingsRow = bindings[row];\n    for (let col = 0; col < bindings.length; col++) {\n      if (canMask(bindings[col], bindingsRow)) {\n        masksRow.push(col);\n      }\n    }\n  }\n  return masks;\n}\n\nfunction isActive(binding, sets) {\n  for (let i = 0; i < binding.sets.length; i++) {\n    if (sets.includes(binding.sets[i])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction computeExecutionStrategy(sortedBindings, masks, activeSets) {\n  const actives = new Array(sortedBindings.length);\n  for (let row = 0; row < sortedBindings.length; row++) {\n    actives[row] = isActive(sortedBindings[row], activeSets);\n  }\n\n  const masked = new Array(sortedBindings.length);\n  for (let row = 0; row < sortedBindings.length; row++) {\n    const maskedRow = (masked[row] = []);\n    const masksRow = masks[row];\n    for (let col = 0; col < sortedBindings.length; col++) {\n      if (actives[col] && masksRow.indexOf(col) !== -1) {\n        maskedRow.push(col);\n      }\n    }\n  }\n\n  return { actives, masked };\n}\n\nAFRAME.registerSystem(\"userinput\", {\n  get(path) {\n    if (!this.frame) return;\n    return this.frame.get(path);\n  },\n\n  toggleSet(set, value) {\n    this.pendingSetChanges.push(set);\n    this.pendingSetChanges.push(!!value);\n  },\n\n  init() {\n    this.frame = {\n      generation: 0,\n      values: {},\n      generations: {},\n      get: function(path) {\n        if (this.generations[path] !== this.generation) return undefined;\n        return this.values[path];\n      },\n      setValueType: function(path, value) {\n        this.values[path] = value;\n        this.generations[path] = this.generation;\n      },\n      setVector2: function(path, a, b) {\n        const value = this.values[path] || [];\n        value[0] = a;\n        value[1] = b;\n        this.values[path] = value;\n        this.generations[path] = this.generation;\n      },\n      setPose: function(path, pose) {\n        this.setValueType(path, pose);\n      },\n      setMatrix4: function(path, mat4) {\n        // Should we assume the incoming mat4 is safe to store instead of copying values?\n        const value = this.values[path] || new THREE.Matrix4();\n        value.copy(mat4);\n        this.values[path] = value;\n        this.generations[path] = this.generation;\n      }\n    };\n\n    this.prevActiveSets = [];\n    this.activeSets = [sets.global];\n    this.pendingSetChanges = [];\n    this.xformStates = new Map();\n    this.activeDevices = new ArrayBackedSet([new HudDevice()]);\n\n    const isMobile = AFRAME.utils.device.isMobile();\n    const isMobileVR = AFRAME.utils.device.isMobileVR();\n\n    if (!(isMobile || isMobileVR)) {\n      this.activeDevices.add(new MouseDevice());\n      this.activeDevices.add(new AppAwareMouseDevice());\n      this.activeDevices.add(new KeyboardDevice());\n    } else if (!isMobileVR) {\n      this.activeDevices.add(new AppAwareTouchscreenDevice());\n      this.activeDevices.add(new KeyboardDevice());\n      this.activeDevices.add(new GyroDevice());\n    }\n\n    this.isMobile = isMobile;\n    this.isMobileVR = isMobileVR;\n\n    this.registeredMappings = new Set([keyboardDebuggingBindings]);\n    this.registeredMappingsChanged = true;\n\n    const vrGamepadMappings = new Map();\n    vrGamepadMappings.set(WindowsMixedRealityControllerDevice, wmrUserBindings);\n    vrGamepadMappings.set(ViveControllerDevice, viveUserBindings);\n    vrGamepadMappings.set(OculusTouchControllerDevice, oculusTouchUserBindings);\n    vrGamepadMappings.set(OculusGoControllerDevice, oculusGoUserBindings);\n    vrGamepadMappings.set(GearVRControllerDevice, gearVRControllerUserBindings);\n    vrGamepadMappings.set(DaydreamControllerDevice, daydreamUserBindings);\n\n    const nonVRGamepadMappings = new Map();\n    nonVRGamepadMappings.set(XboxControllerDevice, xboxControllerUserBindings);\n    nonVRGamepadMappings.set(GamepadDevice, gamepadBindings);\n\n    const updateBindingsForVRMode = () => {\n      const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n      const isMobile = AFRAME.utils.device.isMobile();\n\n      if (inVRMode) {\n        console.log(\"Using VR bindings.\");\n        this.registeredMappings.delete(isMobile ? touchscreenUserBindings : keyboardMouseUserBindings);\n        // add mappings for all active VR input devices\n        for (let i = 0; i < this.activeDevices.items.length; i++) {\n          const activeDevice = this.activeDevices.items[i];\n          const mapping = vrGamepadMappings.get(activeDevice.constructor);\n          mapping && this.registeredMappings.add(mapping);\n          if (activeDevice instanceof ViveControllerDevice && activeDevice.isViveWand) {\n            this.registeredMappings.add(viveWandUserBindings);\n          }\n        }\n\n        // Handle cardboard by looking of VR device caps\n        if (isMobile) {\n          getAvailableVREntryTypes().then(availableVREntryTypes => {\n            if (availableVREntryTypes.cardboard === VR_DEVICE_AVAILABILITY.yes) {\n              this.registeredMappings.add(cardboardUserBindings);\n              this.registeredMappingsChanged = true;\n            }\n          });\n        }\n      } else {\n        console.log(\"Using Non-VR bindings.\");\n        // remove mappings for all active VR input devices\n        for (let i = 0; i < this.activeDevices.items.length; i++) {\n          const activeDevice = this.activeDevices.items[i];\n          this.registeredMappings.delete(vrGamepadMappings.get(activeDevice.constructor));\n        }\n        this.registeredMappings.add(isMobile ? touchscreenUserBindings : keyboardMouseUserBindings);\n      }\n\n      for (let i = 0; i < this.activeDevices.items.length; i++) {\n        const activeDevice = this.activeDevices.items[i];\n        const mapping = nonVRGamepadMappings.get(activeDevice.constructor);\n        mapping && this.registeredMappings.add(mapping);\n      }\n\n      this.registeredMappingsChanged = true;\n    };\n\n    const gamepadConnected = e => {\n      let gamepadDevice;\n      for (let i = 0; i < this.activeDevices.items.length; i++) {\n        const activeDevice = this.activeDevices.items[i];\n        if (activeDevice.gamepad && activeDevice.gamepad.index === e.gamepad.index) {\n          console.warn(\"connected already fired for gamepad\", e.gamepad);\n          return; // multiple connect events without a disconnect event\n        }\n      }\n      // HACK Firefox Nightly bug causes corrupt gamepad names for OpenVR, so do startsWith\n      if (e.gamepad.id.startsWith(\"OpenVR Gamepad\") || e.gamepad.id === \"HTC Vive Focus Plus Controller\") {\n        gamepadDevice = new ViveControllerDevice(e.gamepad);\n      } else if (e.gamepad.id.startsWith(\"Oculus Touch\")) {\n        gamepadDevice = new OculusTouchControllerDevice(e.gamepad);\n      } else if (e.gamepad.id.startsWith(\"Spatial Controller\")) {\n        gamepadDevice = new WindowsMixedRealityControllerDevice(e.gamepad);\n      } else if (e.gamepad.id === \"Oculus Go Controller\") {\n        gamepadDevice = new OculusGoControllerDevice(e.gamepad);\n      } else if (e.gamepad.id === \"Gear VR Controller\" || e.gamepad.id === \"HTC Vive Focus Controller\") {\n        gamepadDevice = new GearVRControllerDevice(e.gamepad);\n      } else if (e.gamepad.id === \"Daydream Controller\") {\n        gamepadDevice = new DaydreamControllerDevice(e.gamepad);\n      } else if (e.gamepad.mapping === \"standard\") {\n        // Our XboxController device and bindings should be generic enough for most gamepads.\n        gamepadDevice = new XboxControllerDevice(e.gamepad);\n      } else {\n        // This device doesn't actually have any bindings, but we need to fallback to something.\n        gamepadDevice = new GamepadDevice(e.gamepad);\n      }\n\n      this.activeDevices.add(gamepadDevice);\n\n      updateBindingsForVRMode();\n    };\n\n    const gamepadDisconnected = e => {\n      for (let i = 0; i < this.activeDevices.items.length; i++) {\n        const device = this.activeDevices.items[i];\n        if (device.gamepad && device.gamepad.index === e.gamepad.index) {\n          this.registeredMappings.delete(\n            vrGamepadMappings.get(device.constructor) || nonVRGamepadMappings.get(device.constructor)\n          );\n          this.activeDevices.delete(device);\n          return;\n        }\n      }\n\n      updateBindingsForVRMode();\n    };\n\n    window.addEventListener(\"gamepadconnected\", gamepadConnected, false);\n    window.addEventListener(\"gamepaddisconnected\", gamepadDisconnected, false);\n    for (const gamepad of navigator.getGamepads()) {\n      gamepad && gamepadConnected({ gamepad });\n    }\n\n    this.el.sceneEl.addEventListener(\"enter-vr\", updateBindingsForVRMode);\n    this.el.sceneEl.addEventListener(\"exit-vr\", updateBindingsForVRMode);\n\n    updateBindingsForVRMode();\n  },\n\n  maybeToggleXboxMapping() {\n    if (this.isMobile || this.isMobileVR) return;\n\n    const vrAxesSum =\n      (this.get(paths.device.vive.left.axesSum) || 0) +\n      (this.get(paths.device.vive.right.axesSum) || 0) +\n      (this.get(paths.device.leftOculusTouch.axesSum) || 0) +\n      (this.get(paths.device.rightOculusTouch.axesSum) || 0);\n    const mouseMovement = this.get(paths.device.mouse.movementXY);\n    const nonXboxActivity = (mouseMovement[0] || mouseMovement[1]) > 2 || vrAxesSum > 0.5;\n\n    const hasXboxMapping = this.registeredMappings.has(xboxControllerUserBindings);\n\n    if (nonXboxActivity && hasXboxMapping) {\n      this.registeredMappings.delete(xboxControllerUserBindings);\n      this.registeredMappingsChanged = true;\n    } else if (this.get(paths.device.xbox.axesSum) > 0.5 && !hasXboxMapping) {\n      this.registeredMappings.add(xboxControllerUserBindings);\n      this.registeredMappingsChanged = true;\n    }\n  },\n\n  tick2() {\n    this.frame.generation += 1;\n    const registeredMappingsChanged = this.registeredMappingsChanged;\n    if (registeredMappingsChanged) {\n      this.registeredMappingsChanged = false;\n      this.prevSortedBindings = this.sortedBindings;\n      this.sortedBindings = dependencySort(this.registeredMappings);\n      if (!this.prevSortedBindings) {\n        this.prevSortedBindings = this.sortedBindings;\n      }\n      this.masks = computeMasks(this.sortedBindings);\n    }\n\n    this.prevActiveSets.length = 0;\n    for (let i = 0; i < this.activeSets.length; i++) {\n      const item = this.activeSets[i];\n      this.prevActiveSets.push(item);\n    }\n    resolveActionSets();\n    for (let i = 0, l = this.pendingSetChanges.length; i < l; i += 2) {\n      const set = this.pendingSetChanges[i];\n      const value = this.pendingSetChanges[i + 1];\n\n      if (value) {\n        if (!this.activeSets.includes(set)) {\n          this.activeSets.push(set);\n        }\n      } else {\n        const idx = this.activeSets.indexOf(set);\n\n        if (idx > -1) {\n          this.activeSets.splice(idx, 1);\n        }\n      }\n    }\n    const activeSetsChanged = arrayContentsDiffer(this.prevActiveSets, this.activeSets);\n    this.pendingSetChanges.length = 0;\n    if (registeredMappingsChanged || activeSetsChanged || (!this.actives && !this.masked)) {\n      this.prevActives = this.actives;\n      this.prevMasked = this.masked;\n      const { actives, masked } = computeExecutionStrategy(this.sortedBindings, this.masks, this.activeSets);\n      this.actives = actives;\n      this.masked = masked;\n    }\n\n    for (let i = 0; i < this.activeDevices.items.length; i++) {\n      this.activeDevices.items[i].write(this.frame);\n    }\n\n    for (let i = 0; i < this.sortedBindings.length; i++) {\n      if (!this.actives[i] || this.masked[i].length > 0) continue;\n\n      const binding = this.sortedBindings[i];\n\n      let bindingExistedLastFrame = true;\n      if (!registeredMappingsChanged && activeSetsChanged && this.prevSortedBindings) {\n        const j = this.prevSortedBindings.indexOf(binding);\n        bindingExistedLastFrame = j > -1 && this.prevActives[j] && this.prevMasked[j].length === 0;\n      }\n      if (!bindingExistedLastFrame) {\n        this.xformStates.delete(binding);\n      }\n\n      const { src, dest, xform, debug } = binding;\n\n      let oldValue;\n\n      if (debug) {\n        oldValue = this.frame.get(dest.value);\n      }\n\n      const newState = xform(this.frame, src, dest, this.xformStates.get(binding));\n\n      if (debug) {\n        // Note for now this only works with bindings that have { value: } sources and dests\n        console.log(\n          `${JSON.stringify(src.value)} (${src.value && JSON.stringify(this.frame.get(src.value))}) to ${JSON.stringify(\n            dest\n          )}: ${oldValue} -> ${this.frame.get(dest.value)}`\n        );\n      }\n\n      if (newState !== undefined) {\n        this.xformStates.set(binding, newState);\n      }\n    }\n\n    this.prevSortedBindings = this.sortedBindings;\n\n    this.maybeToggleXboxMapping();\n  }\n});\n","import { paths } from \"./paths\";\nimport qsTruthy from \"../../utils/qs_truthy\";\n\nconst PATHS_TO_SHOW = [\"/actions/\", \"/device/\"];\n\nAFRAME.registerSystem(\"userinput-debug\", {\n  active: true,\n\n  tick() {\n    if (!this.active) return;\n\n    const userinput = AFRAME.scenes[0].systems.userinput;\n\n    if (this.userinputFrameStatus) {\n      const replacer = (k, v) => {\n        if (typeof v === \"number\") {\n          return `${v >= 0 ? \"+\" : \"\"}${v.toFixed(3)}`;\n        }\n        return v;\n      };\n      const pathsOutput = [];\n      const { frame } = userinput;\n      for (const key in frame.values) {\n        if (!frame.get(key)) continue;\n        if (!PATHS_TO_SHOW.some(x => key.startsWith(x))) continue;\n        let val = JSON.stringify(frame.get(key), replacer);\n        if (val) val = val.replace(/{\"(\\w{3,})\":/g, '{\\n  \"$1\":').replace(/,\"(\\w{3,})\":/g, ',\\n  \"$1\":');\n        pathsOutput.push(`${key} -> ${val}`);\n      }\n      this.userinputFrameStatus.textContent = pathsOutput.join(\"\\n\");\n    }\n\n    if (userinput.get(paths.actions.logDebugFrame)) {\n      if (qsTruthy(\"userinput_debug\") && !this.userinputFrameStatus) {\n        this.userinputFrameStatus = document.createElement(\"div\");\n        this.userinputFrameStatus.id = \"userinput-frame-status\";\n        this.userinputFrameStatus.style = `\n          position: absolute;\n          z-index: 2;\n          left: 0; bottom: 0;\n          background: white;\n          white-space: pre;\n          font-family: monospace;\n          font-size: 8pt;\n        `;\n        document.body.append(this.userinputFrameStatus);\n      }\n\n      console.log(userinput);\n      console.log(\"sorted\", userinput.sortedBindings);\n      console.log(\"actives\", userinput.actives);\n      console.log(\"masks\", userinput.masks);\n      console.log(\"masked\", userinput.masked);\n      console.log(\"devices\", userinput.activeDevices);\n      console.log(\"activeSets\", userinput.activeSets);\n      console.log(\"frame\", userinput.frame);\n      console.log(\"xformStates\", userinput.xformStates);\n      const { sortedBindings, actives, masked } = userinput;\n      for (const i in sortedBindings) {\n        const sb = [];\n        if (masked[i].length > 0) {\n          for (const j of masked[i]) {\n            sb.push(JSON.stringify(sortedBindings[j]));\n          }\n        }\n\n        if (this.logBindings) {\n          console.log(\n            \"binding: \",\n            i,\n            \"\\n\",\n            sortedBindings[i],\n            \"\\n\",\n            \"dest: \",\n            sortedBindings[i].dest && Object.values(sortedBindings[i].dest),\n            \"\\n\",\n            \"active: \",\n            actives[i],\n            \"\\n\",\n            \"maskedBy: \",\n            masked[i],\n            \"\\n\",\n            sb.join(\"\\n\"),\n            \"\\n\"\n          );\n        }\n      }\n    }\n  }\n});\n","import { paths } from \"./userinput/paths\";\nimport { SOURCES } from \"../storage/media-search-store\";\n\nconst MEDIA_SEARCH_PATHS = [\n  paths.actions.mediaSearch1,\n  paths.actions.mediaSearch2,\n  paths.actions.mediaSearch3,\n  paths.actions.mediaSearch4,\n  paths.actions.mediaSearch5,\n  paths.actions.mediaSearch6,\n  paths.actions.mediaSearch7,\n  paths.actions.mediaSearch8\n];\n\n// Every frame, looks for input paths that trigger UI-relevant events and handles them.\nAFRAME.registerSystem(\"ui-hotkeys\", {\n  init() {\n    this.mediaSearchStore = window.APP.mediaSearchStore;\n  },\n\n  tick: function() {\n    if (!this.userinput) {\n      this.userinput = this.el.systems.userinput;\n    }\n\n    if (this.userinput.get(paths.actions.focusChat)) {\n      this.focusChat();\n    }\n\n    if (this.userinput.get(paths.actions.focusChatCommand)) {\n      this.focusChat(\"/\");\n    }\n\n    if (this.userinput.get(paths.actions.mediaExit)) {\n      if (window.APP.history.location.state && window.APP.history.location.state.value !== \"avatar-editor\") {\n        this.mediaSearchStore.pushExitMediaBrowserHistory();\n      }\n\n      this.el.emit(\"action_exit_watch\");\n    }\n\n    for (let i = 0; i < MEDIA_SEARCH_PATHS.length; i++) {\n      if (this.userinput.get(MEDIA_SEARCH_PATHS[i]) && window.APP.hubChannel.can(\"spawn_and_move_media\")) {\n        this.mediaSearchStore.sourceNavigate(SOURCES[i]);\n      }\n    }\n\n    if (this.userinput.get(paths.actions.toggleCamera)) {\n      this.el.emit(\"action_toggle_camera\");\n    }\n  },\n\n  focusChat: function(prefix) {\n    const target = document.querySelector(\".chat-focus-target\");\n    if (!target) return;\n\n    target.focus();\n\n    if (prefix) {\n      target.value = prefix;\n    }\n  }\n});\n","import { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\nexport class CursorTargettingSystem {\n  constructor() {\n    this.targets = [];\n    this.setDirty = this.setDirty.bind(this);\n    this.dirty = true;\n\n    // TODO: Use the MutationRecords passed into the callback function to determine added/removed nodes!\n    this.observer = new MutationObserver(this.setDirty);\n\n    waitForDOMContentLoaded().then(() => {\n      const scene = document.querySelector(\"a-scene\");\n      this.rightRemote = document.querySelector(\"#cursor-controller\");\n      this.observer.observe(scene, { childList: true, attributes: true, subtree: true });\n      scene.addEventListener(\"object3dset\", this.setDirty);\n      scene.addEventListener(\"object3dremove\", this.setDirty);\n    });\n  }\n\n  setDirty() {\n    this.dirty = true;\n  }\n\n  tick(t) {\n    if (this.dirty) {\n      this.populateEntities(this.targets);\n      this.dirty = false;\n    }\n\n    this.rightRemote.components[\"cursor-controller\"].tick2(t);\n  }\n\n  populateEntities(targets) {\n    targets.length = 0;\n    // TODO: Do not querySelectorAll on the entire scene every time anything changes!\n    const els = AFRAME.scenes[0].querySelectorAll(\".collidable, .interactable, .ui\");\n    for (let i = 0; i < els.length; i++) {\n      if (els[i].object3D) {\n        targets.push(els[i].object3D);\n      }\n    }\n  }\n\n  remove() {\n    this.observer.disconnect();\n    AFRAME.scenes[0].removeEventListener(\"object3dset\", this.setDirty);\n    AFRAME.scenes[0].removeEventListener(\"object3dremove\", this.setDirty);\n  }\n}\n","/* global NAF AFRAME */\nconst ACTIVATION_STATE = require(\"aframe-physics-system/src/constants\").ACTIVATION_STATE;\n\nexport class ConstraintsSystem {\n  constructor() {\n    this.prevLeftHand = {\n      held: null,\n      hovered: null,\n      spawning: null\n    };\n    this.prevRightHand = {\n      held: null,\n      hovered: null,\n      spawning: null\n    };\n    this.prevRightRemote = {\n      held: null,\n      hovered: null,\n      spawning: null\n    };\n  }\n\n  tickInteractor(constraintTag, entityId, state, prevState) {\n    if (prevState.held === state.held) {\n      if (!state.spawning && prevState.spawning && state.held && state.held.components.tags.data[constraintTag]) {\n        state.held.setAttribute(\"ammo-body\", {\n          type: \"dynamic\",\n          activationState: ACTIVATION_STATE.DISABLE_DEACTIVATION\n        });\n        state.held.setAttribute(\"ammo-constraint__\" + entityId, { target: \"#\" + entityId });\n      }\n      return;\n    }\n    if (prevState.held && prevState.held.components.tags.data[constraintTag]) {\n      prevState.held.removeAttribute(\"ammo-constraint__\" + entityId);\n      let hasAnotherConstraint = false;\n      for (const componentName in prevState.held.components) {\n        if (componentName.startsWith(\"ammo-constraint\")) {\n          hasAnotherConstraint = true;\n        }\n      }\n      if (!hasAnotherConstraint) {\n        prevState.held.setAttribute(\"ammo-body\", { activationState: ACTIVATION_STATE.ACTIVE_TAG });\n      }\n    }\n    if (!state.spawning && state.held && state.held.components.tags.data[constraintTag]) {\n      if (!state.held.components[\"networked\"] || NAF.utils.isMine(state.held) || NAF.utils.takeOwnership(state.held)) {\n        state.held.setAttribute(\"ammo-body\", {\n          type: \"dynamic\",\n          activationState: ACTIVATION_STATE.DISABLE_DEACTIVATION\n        });\n        state.held.setAttribute(\"ammo-constraint__\" + entityId, { target: \"#\" + entityId });\n      } else {\n        console.log(\"Failed to obtain ownership while trying to create constraint on networked object.\");\n      }\n    }\n  }\n\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n\n    this.tickInteractor(\n      \"offersHandConstraint\",\n      interaction.options.leftHand.entity.id,\n      interaction.state.leftHand,\n      this.prevLeftHand\n    );\n    this.tickInteractor(\n      \"offersHandConstraint\",\n      interaction.options.rightHand.entity.id,\n      interaction.state.rightHand,\n      this.prevRightHand\n    );\n    this.tickInteractor(\n      \"offersRemoteConstraint\",\n      interaction.options.rightRemote.entity.id,\n      interaction.state.rightRemote,\n      this.prevRightRemote\n    );\n\n    Object.assign(this.prevLeftHand, interaction.state.leftHand);\n    Object.assign(this.prevRightHand, interaction.state.rightHand);\n    Object.assign(this.prevRightRemote, interaction.state.rightRemote);\n  }\n}\n","/* global THREE AFRAME */\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\nconst COLLISION_FILTER_MASK_HANDS = { collisionFilterMask: COLLISION_LAYERS.HANDS };\nexport const distanceBetweenStretchers = (() => {\n  const a = new THREE.Vector3();\n  const b = new THREE.Vector3();\n  return function distanceBetweenStretchers(obj1, obj2) {\n    obj1.getWorldPosition(a);\n    obj2.getWorldPosition(b);\n    return a.distanceTo(b);\n  };\n})();\n\nexport class TwoPointStretchingSystem {\n  constructor() {\n    this.initialScale = new THREE.Vector3();\n  }\n\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const { leftHand, rightHand, rightRemote } = interaction.state;\n\n    const stretching = leftHand.held && (leftHand.held === rightHand.held || leftHand.held === rightRemote.held);\n    let leftStretcher, rightStretcher;\n    if (stretching) {\n      leftStretcher = interaction.options.leftHand.entity.object3D;\n      rightStretcher =\n        leftHand.held === rightHand.held\n          ? interaction.options.rightHand.entity.object3D\n          : interaction.options.rightRemote.entity.object3D;\n      if (\n        leftStretcher !== this.previousLeftStretcher ||\n        rightStretcher !== this.previousRightStretcher ||\n        leftHand.held !== this.stretched\n      ) {\n        this.initialStretchDistance = distanceBetweenStretchers(leftStretcher, rightStretcher);\n        this.stretched = leftHand.held;\n        this.initialScale.copy(this.stretched.object3D.scale);\n        if (this.stretched.components[\"ammo-body\"]) {\n          this.stretched.setAttribute(\"ammo-body\", COLLISION_FILTER_MASK_HANDS);\n        }\n      }\n\n      this.stretched.object3D.scale\n        .copy(this.initialScale)\n        .multiplyScalar(distanceBetweenStretchers(leftStretcher, rightStretcher) / this.initialStretchDistance);\n      this.stretched.object3D.matrixNeedsUpdate = true;\n    }\n\n    this.previousLeftStretcher = leftStretcher;\n    this.previousRightStretcher = rightStretcher;\n  }\n}\n","export class SingleActionButtonSystem {\n  tick() {\n    this.didInteractThisFrame = false;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const hovered = interaction.state.rightRemote.hovered;\n    if (\n      hovered &&\n      userinput.get(interaction.options.rightRemote.grabPath) &&\n      hovered.components.tags &&\n      hovered.components.tags.data.singleActionButton\n    ) {\n      this.didInteractThisFrame = true;\n      hovered.object3D.dispatchEvent({\n        type: \"interact\",\n        object3D: interaction.options.rightRemote.entity.object3D\n      });\n    }\n  }\n}\n\nexport class HoldableButtonSystem {\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const held = interaction.state.rightRemote.held;\n\n    if (this.prevHeld && this.prevHeld !== held) {\n      this.prevHeld.object3D.dispatchEvent({\n        type: \"holdable-button-up\",\n        object3D: interaction.options.rightRemote.entity.object3D\n      });\n    }\n    if (held && this.prevHeld !== held) {\n      held.object3D.dispatchEvent({\n        type: \"holdable-button-down\",\n        object3D: interaction.options.rightRemote.entity.object3D\n      });\n    }\n\n    this.prevHeld = held;\n  }\n}\n\nconst hasButtonComponent = (function() {\n  const BUTTON_COMPONENT_NAMES = [\"icon-button\", \"text-button\", \"pin-networked-object-button\", \"mic-button\"];\n  return function hasButtonComponent(components) {\n    for (let i = 0; i < BUTTON_COMPONENT_NAMES.length; i++) {\n      if (components[BUTTON_COMPONENT_NAMES[i]]) {\n        return true;\n      }\n    }\n    return false;\n  };\n})();\n\nfunction getHoverableButton(hovered) {\n  if (!hovered) return null;\n  if (hasButtonComponent(hovered.components)) return hovered;\n  if (hovered.children) {\n    // TODO: not sure if looping thru children here is desireable, but we did this to accomodate the rounded-button mixins\n    for (let i = 0; i < hovered.children.length; i++) {\n      if (hasButtonComponent(hovered.children[i].components)) {\n        return hovered.children[i];\n      }\n    }\n  }\n  return null;\n}\n\nfunction dispatch(el, event) {\n  el.object3D.dispatchEvent(event);\n  if (el.children) {\n    for (let i = 0; i < el.children.length; i++) {\n      if (hasButtonComponent(el.children[i].components)) {\n        el.children[i].object3D.dispatchEvent(event);\n      }\n    }\n  }\n}\n\nconst HOVERED = { type: \"hovered\" };\nconst UNHOVERED = { type: \"unhovered\" };\nexport class HoverButtonSystem {\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const button = getHoverableButton(interaction.state.rightRemote.hovered);\n\n    if (this.prevButton && this.prevButton !== button) {\n      dispatch(this.prevButton, UNHOVERED);\n    }\n\n    if (button && this.prevButton !== button) {\n      dispatch(button, HOVERED);\n    }\n\n    this.prevButton = button;\n  }\n}\n","function getSpecificHoverMenu(el) {\n  return (\n    el.components[\"hover-menu\"] ||\n    el.components[\"hover-menu__video\"] ||\n    el.components[\"hover-menu__hubs-item\"] ||\n    el.components[\"hover-menu__link\"] ||\n    el.components[\"hover-menu__photo\"]\n  );\n}\n\nfunction findHoverMenu(hovered) {\n  if (!hovered) return null;\n  const hoverMenu = getSpecificHoverMenu(hovered);\n  if (hoverMenu) {\n    return hoverMenu;\n  }\n  if (!(hovered.components.tags && hovered.components.tags.data.isHoverMenuChild)) {\n    return null;\n  }\n  let el = hovered.parentNode;\n  while (!getSpecificHoverMenu(el)) {\n    el = el.parentNode;\n  }\n  return getSpecificHoverMenu(el);\n}\n\nexport class HoverMenuSystem {\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const hoverMenu = findHoverMenu(interaction.state.rightRemote.hovered);\n\n    if (this.prevHoverMenu && this.prevHoverMenu !== hoverMenu) {\n      this.prevHoverMenu.hovering = false;\n      this.prevHoverMenu.applyHoverState();\n    }\n\n    if (hoverMenu && this.prevHoverMenu !== hoverMenu) {\n      hoverMenu.hovering = true;\n      hoverMenu.applyHoverState();\n    }\n\n    this.prevHoverMenu = hoverMenu;\n  }\n}\n","import { addMedia } from \"../utils/media-utils\";\nimport { ObjectContentOrigins } from \"../object-types\";\n\n// WARNING: This system mutates interaction system state!\nexport class SuperSpawnerSystem {\n  maybeSpawn(state, entity, grabPath) {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const superSpawner = state.hovered && state.hovered.components[\"super-spawner\"];\n    if (\n      superSpawner &&\n      !superSpawner.cooldownTimeout &&\n      userinput.get(grabPath) &&\n      window.APP.hubChannel.can(\"spawn_and_move_media\")\n    ) {\n      this.performSpawn(state, entity, grabPath, userinput, superSpawner);\n    }\n  }\n\n  performSpawn(state, entity, grabPath, userinput, superSpawner) {\n    entity.object3D.updateMatrices();\n    entity.object3D.matrix.decompose(entity.object3D.position, entity.object3D.quaternion, entity.object3D.scale);\n    const data = superSpawner.data;\n    const spawnedEntity = addMedia(\n      data.src,\n      data.template,\n      ObjectContentOrigins.SPAWNER,\n      null,\n      data.resolve,\n      data.resize,\n      false\n    ).entity;\n    spawnedEntity.object3D.position.copy(\n      data.useCustomSpawnPosition ? data.spawnPosition : superSpawner.el.object3D.position\n    );\n    spawnedEntity.object3D.rotation.copy(\n      data.useCustomSpawnRotation ? data.spawnRotation : superSpawner.el.object3D.rotation\n    );\n    spawnedEntity.object3D.scale.copy(data.useCustomSpawnScale ? data.spawnScale : superSpawner.el.object3D.scale);\n    spawnedEntity.object3D.matrixNeedsUpdate = true;\n    state.held = spawnedEntity;\n\n    superSpawner.activateCooldown();\n    state.spawning = true;\n    // WARNING: previously used waitForEvent which is semantically different than\n    // entity.addEventListener(\"body-loaded\", ...) and adding a callback fn via\n    // addEventListener will not work unless the callback function wraps its code in setTimeout(()=>{...}, 0)\n    spawnedEntity.addEventListener(\n      \"body-loaded\",\n      () => {\n        setTimeout(() => {\n          state.spawning = false;\n          spawnedEntity.object3D.position.copy(\n            data.useCustomSpawnPosition ? data.spawnPosition : superSpawner.el.object3D.position\n          );\n          if (data.centerSpawnedObject) {\n            spawnedEntity.body.position.copy(entity.object3D.position);\n          }\n          spawnedEntity.object3D.matrixNeedsUpdate = true;\n        });\n      },\n      { once: true }\n    );\n  }\n\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    this.maybeSpawn(\n      interaction.state.leftHand,\n      interaction.options.leftHand.entity,\n      interaction.options.leftHand.grabPath\n    );\n    this.maybeSpawn(\n      interaction.state.rightHand,\n      interaction.options.rightHand.entity,\n      interaction.options.rightHand.grabPath\n    );\n    this.maybeSpawn(\n      interaction.state.rightRemote,\n      interaction.options.rightRemote.entity,\n      interaction.options.rightRemote.grabPath\n    );\n  }\n}\n","import { paths } from \"./userinput/paths\";\nimport { distanceBetweenStretchers } from \"./two-point-stretching-system\";\n\nfunction copyState(previous, current, isTeleporting) {\n  previous.held = current.held;\n  previous.hovered = current.hovered;\n  previous.isTeleporting = isTeleporting;\n}\n\n// TODO: These strengths should be written into bindings, since vibration strength varies across devices.\nconst STRENGTH = {\n  DROP: 0.1,\n  PICKUP: 0.2,\n  BUTTON_PRESSED: 0.2,\n  HOVER: 0.08,\n  STRETCH_BASE: 0.05,\n  STRETCH_DISTANCE: 0.2,\n  TELEPORTING: 0.08,\n  TELEPORTED: 0.2\n};\n\nfunction determineStrength(previous, current, isTeleporting) {\n  if (previous.held && !current.held) {\n    return STRENGTH.DROP;\n  } else if (!previous.held && current.held) {\n    return STRENGTH.PICKUP;\n  } else if (!previous.hovered && current.hovered) {\n    return STRENGTH.HOVER;\n  } else if (isTeleporting) {\n    return STRENGTH.TELEPORTING;\n  } else if (previous.isTeleporting && !isTeleporting) {\n    return STRENGTH.TELEPORTED;\n  } else {\n    return 0;\n  }\n}\n\nfunction determineStretchStrength(stretchSystem) {\n  if (!stretchSystem.stretcherLeft || !stretchSystem.stretcherRight) {\n    return 0;\n  }\n\n  return THREE.Math.clamp(\n    STRENGTH.STRETCH_BASE +\n      STRENGTH.STRETCH_DISTANCE *\n        Math.abs(\n          distanceBetweenStretchers(stretchSystem.stretcherLeft, stretchSystem.stretcherRight) -\n            stretchSystem.initialStretchDistance\n        ),\n    0,\n    0.5\n  );\n}\n\nexport class HapticFeedbackSystem {\n  constructor() {\n    this.state = {\n      rightHand: {\n        held: null,\n        hovered: null,\n        isTeleporting: false\n      },\n      rightRemote: {\n        held: null,\n        hovered: null,\n        isTeleporting: false\n      },\n      leftHand: {\n        held: null,\n        hovered: null,\n        isTeleporting: false\n      }\n    };\n  }\n\n  tick(twoPointStretchingSystem, didClickButton) {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const leftActuator = userinput.get(paths.haptics.actuators.left);\n    const rightActuator = userinput.get(paths.haptics.actuators.right);\n    if (!leftActuator && !rightActuator) {\n      return;\n    }\n\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const { leftHand, rightHand, rightRemote } = interaction.state;\n    this.leftTeleporter =\n      this.leftTeleporter || document.querySelector(\"#player-left-controller\").components.teleporter;\n    this.rightTeleporter =\n      this.rightTeleporter || document.querySelector(\"#player-right-controller\").components.teleporter;\n\n    const leftHandStrength = determineStrength(this.state.leftHand, leftHand, this.leftTeleporter.isTeleporting);\n    const rightHandStrength = determineStrength(this.state.rightHand, rightHand, this.rightTeleporter.isTeleporting);\n    const rightRemoteStrength = determineStrength(this.state.rightRemote, rightRemote, false);\n    const buttonPressedStrength = didClickButton ? STRENGTH.BUTTON_PRESSED : 0;\n    const stretchingStrength = determineStretchStrength(twoPointStretchingSystem);\n\n    const leftStrength = Math.max(leftHandStrength, stretchingStrength);\n    const rightStrength = Math.max(rightHandStrength, rightRemoteStrength, stretchingStrength, buttonPressedStrength);\n\n    if (leftStrength && leftActuator) {\n      leftActuator.pulse(leftStrength, 15);\n    }\n\n    if (rightStrength && rightActuator) {\n      rightActuator.pulse(rightStrength, 15);\n    }\n\n    copyState(this.state.rightHand, rightHand, this.rightTeleporter.isTeleporting);\n    copyState(this.state.leftHand, leftHand, this.leftTeleporter.isTeleporting);\n    copyState(this.state.rightRemote, rightRemote, false);\n  }\n}\n","import { BatchRawUniformGroup } from \"@mozillareality/three-batch-manager\";\n\nconst tempVec3 = new Array(3);\nconst tempVec4 = new Array(4);\n\nexport const INSTANCE_DATA_BYTE_LENGTH = 112;\nconst DEFAULT_COLOR = new THREE.Color(1, 1, 1);\nconst HIDE_MATRIX = new THREE.Matrix4().makeScale(0, 0, 0);\n\nexport function sizeofInstances(instanceCount) {\n  const hubsDataSize =\n    instanceCount * 4 * 4 + // sweepParams\n    4 *\n      (3 + // interactorOnePos\n      1 + // isFrozen\n      3 + // interactorTwoPos\n        1); // time\n  return instanceCount * INSTANCE_DATA_BYTE_LENGTH + hubsDataSize;\n}\n\nexport default class HubsBatchRawUniformGroup extends BatchRawUniformGroup {\n  constructor(maxInstances, meshToEl) {\n    const data = new ArrayBuffer(sizeofInstances(maxInstances));\n    super(maxInstances, \"InstanceData\", data);\n\n    let offset = this.offset;\n    this.hubs_sweepParams = new Float32Array(this.data, offset, 4 * maxInstances);\n    offset += this.hubs_sweepParams.byteLength;\n\n    this.hubs_interactorOnePos = new Float32Array(this.data, offset, 3);\n    offset += this.hubs_interactorOnePos.byteLength;\n\n    this.hubs_isFrozen = new Uint32Array(this.data, offset, 1);\n    offset += this.hubs_isFrozen.byteLength;\n\n    this.hubs_interactorTwoPos = new Float32Array(this.data, offset, 3);\n    offset += this.hubs_interactorTwoPos.byteLength;\n\n    this.hubs_time = new Float32Array(this.data, offset, 1);\n    offset += this.hubs_time.byteLength;\n\n    this.offset = offset;\n\n    this.meshToEl = meshToEl;\n  }\n\n  update(time) {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    let interactorOne, interactorTwo;\n\n    for (let instanceId = 0; instanceId < this.meshes.length; instanceId++) {\n      const mesh = this.meshes[instanceId];\n      if (!mesh) continue;\n\n      mesh.updateMatrices();\n\n      // TODO need to account for nested visibility deeper than 1 level\n      this.setInstanceTransform(instanceId, mesh.visible && mesh.parent.visible ? mesh.matrixWorld : HIDE_MATRIX);\n      this.setInstanceColor(instanceId, mesh.material.color || DEFAULT_COLOR, mesh.material.opacity || 1);\n\n      const el = this.meshToEl.get(mesh);\n      if (el) {\n        const obj = el.object3D;\n        const hoverableVisuals = el.components[\"hoverable-visuals\"];\n        const worldY = obj.matrixWorld.elements[13];\n        const scaledRadius = obj.scale.y * hoverableVisuals.boundingSphere.radius;\n\n        const isPinned = el.components.pinnable && el.components.pinnable.data.pinned;\n        const isSpawner = !!el.components[\"super-spawner\"];\n        const isFrozen = el.sceneEl.is(\"frozen\");\n        const hideDueToPinning = !isSpawner && isPinned && !isFrozen;\n\n        let highlightInteractorOne, highlightInteractorTwo;\n        if (interaction.state.leftHand.hovered === el || interaction.state.leftHand.held === el) {\n          interactorOne = interaction.options.leftHand.entity.object3D;\n          highlightInteractorOne = true;\n        }\n\n        if (interaction.state.rightRemote.hovered === el || interaction.state.rightRemote.held === el) {\n          interactorTwo = interaction.options.rightRemote.entity.object3D;\n          highlightInteractorTwo = true;\n        } else if (interaction.state.rightHand.hovered === el || interaction.state.rightHand.held === el) {\n          interactorTwo = interaction.options.rightHand.entity.object3D;\n          highlightInteractorTwo = true;\n        }\n\n        tempVec4[0] = worldY - scaledRadius;\n        tempVec4[1] = worldY + scaledRadius;\n        tempVec4[2] = !!highlightInteractorOne && !hideDueToPinning;\n        tempVec4[3] = !!highlightInteractorTwo && !hideDueToPinning;\n        this.hubs_sweepParams.set(tempVec4, instanceId * 4);\n      }\n    }\n\n    if (interactorOne) {\n      tempVec3[0] = interactorOne.matrixWorld.elements[12];\n      tempVec3[1] = interactorOne.matrixWorld.elements[13];\n      tempVec3[2] = interactorOne.matrixWorld.elements[14];\n      this.hubs_interactorOnePos.set(tempVec3);\n    }\n\n    if (interactorTwo) {\n      tempVec3[0] = interactorTwo.matrixWorld.elements[12];\n      tempVec3[1] = interactorTwo.matrixWorld.elements[13];\n      tempVec3[2] = interactorTwo.matrixWorld.elements[14];\n      this.hubs_interactorTwoPos.set(tempVec3);\n    }\n\n    this.hubs_time[0] = time;\n    this.hubs_isFrozen[0] = AFRAME.scenes[0].is(\"frozen\") ? 1 : 0;\n  }\n}\n","import { BatchManager } from \"@mozillareality/three-batch-manager\";\n\nimport HubsBatchRawUniformGroup from \"./render-manager/hubs-batch-raw-uniform-group\";\nimport { sizeofInstances } from \"./render-manager/hubs-batch-raw-uniform-group\";\nimport unlitBatchVert from \"./render-manager/unlit-batch.vert\";\nimport unlitBatchFrag from \"./render-manager/unlit-batch.frag\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\nconst MAX_INSTANCES = 500;\nconst UBO_BYTE_LENGTH = sizeofInstances(MAX_INSTANCES);\n\nexport class BatchManagerSystem {\n  constructor(scene, renderer) {\n    this.meshToEl = new WeakMap();\n    const gl = renderer.context;\n\n    if (qsTruthy(\"disableBatching\")) {\n      console.warn(\"Batching disabled by user via disableBatching. Disabling batching.\");\n      return;\n    }\n\n    if (!(window.WebGL2RenderingContext && gl instanceof WebGL2RenderingContext)) {\n      console.warn(\"Batching requires WebGL 2. Disabling batching.\");\n      return;\n    }\n\n    if (UBO_BYTE_LENGTH > gl.getParameter(gl.MAX_UNIFORM_BLOCK_SIZE)) {\n      console.warn(\"Insufficient MAX_UNIFORM_BLOCK_SIZE, Disabling batching\");\n      return;\n    }\n\n    this.batchingEnabled = true;\n\n    this.ubo = new HubsBatchRawUniformGroup(MAX_INSTANCES, this.meshToEl);\n    this.batchManager = new BatchManager(scene, renderer, {\n      maxInstances: MAX_INSTANCES,\n      ubo: this.ubo,\n      shaders: {\n        unlit: {\n          vertexShader: unlitBatchVert,\n          fragmentShader: unlitBatchFrag\n        }\n      }\n    });\n  }\n\n  addObject(rootObject) {\n    if (!this.batchingEnabled) return 0;\n\n    let batchedCount = 0;\n    rootObject.traverse(object => {\n      if (object.isMesh) {\n        if (this.batchManager.addMesh(object)) batchedCount++;\n      }\n    });\n    return batchedCount;\n  }\n\n  removeObject(rootObject) {\n    if (!this.batchingEnabled) return;\n\n    rootObject.traverse(object => {\n      if (object.isMesh) {\n        this.batchManager.removeMesh(object);\n      }\n    });\n  }\n\n  tick(time) {\n    if (!this.batchingEnabled) return;\n\n    this.batchManager.update(time);\n  }\n}\n","export class LobbyCameraSystem {\n  tick() {\n    const el = document.querySelector(\"[scene-preview-camera]\");\n    if (el) {\n      el.components[\"scene-preview-camera\"].tick2();\n    }\n  }\n}\n","import { CursorTargettingSystem } from \"./cursor-targetting-system\";\nimport { ConstraintsSystem } from \"./constraints-system\";\nimport { TwoPointStretchingSystem } from \"./two-point-stretching-system\";\nimport { SingleActionButtonSystem, HoldableButtonSystem, HoverButtonSystem } from \"./button-systems\";\nimport { HoverMenuSystem } from \"./hover-menu-system\";\nimport { SuperSpawnerSystem } from \"./super-spawner-system\";\nimport { HapticFeedbackSystem } from \"./haptic-feedback-system\";\nimport { SoundEffectsSystem } from \"./sound-effects-system\";\n\nimport { BatchManagerSystem } from \"./render-manager-system\";\nimport { LobbyCameraSystem } from \"./lobby-camera-system\";\n\nAFRAME.registerSystem(\"hubs-systems\", {\n  init() {\n    this.cursorTargettingSystem = new CursorTargettingSystem();\n    this.constraintsSystem = new ConstraintsSystem();\n    this.twoPointStretchingSystem = new TwoPointStretchingSystem();\n    this.singleActionButtonSystem = new SingleActionButtonSystem();\n    this.holdableButtonSystem = new HoldableButtonSystem();\n    this.hoverButtonSystem = new HoverButtonSystem();\n    this.hoverMenuSystem = new HoverMenuSystem();\n    this.superSpawnerSystem = new SuperSpawnerSystem();\n    this.hapticFeedbackSystem = new HapticFeedbackSystem();\n    this.soundEffectsSystem = new SoundEffectsSystem();\n    this.lobbyCameraSystem = new LobbyCameraSystem();\n    this.batchManagerSystem = new BatchManagerSystem(this.el.sceneEl.object3D, this.el.sceneEl.renderer);\n  },\n\n  tick(t) {\n    const systems = AFRAME.scenes[0].systems;\n    systems.userinput.tick2();\n    systems.interaction.tick2(this.soundEffectsSystem);\n    this.superSpawnerSystem.tick();\n    this.cursorTargettingSystem.tick(t);\n    this.constraintsSystem.tick();\n    this.twoPointStretchingSystem.tick();\n    this.singleActionButtonSystem.tick();\n    this.holdableButtonSystem.tick();\n    this.hoverButtonSystem.tick();\n    this.hoverMenuSystem.tick();\n    this.hapticFeedbackSystem.tick(this.twoPointStretchingSystem, this.singleActionButtonSystem.didInteractThisFrame);\n    this.soundEffectsSystem.tick();\n    this.lobbyCameraSystem.tick();\n    // batchManager is ticked in \"post-physics\" system\n  },\n\n  remove() {\n    this.cursorTargettingSystem.remove();\n  }\n});\n","import qsTruthy from \"../utils/qs_truthy\";\n\nAFRAME.registerSystem(\"capture-system\", {\n  init() {\n    this._gotAudioTrack = false;\n    this._recorderTimeout = null;\n  },\n\n  _initRecorder() {\n    if (!this.available()) return;\n\n    this._stream = new MediaStream();\n\n    const video = this.el.canvas.captureStream().getVideoTracks()[0];\n    this._stream.addTrack(video);\n\n    this._recorder = new MediaRecorder(this._stream, { mimeType: \"video/webm; codecs=vp8\" });\n\n    const chunks = [];\n\n    this._recorder.ondataavailable = e => {\n      chunks.push(e.data);\n    };\n    this._recorder.onstop = () => {\n      if (chunks.length === 0) return;\n      const mimeType = chunks[0].type;\n      const blob = new Blob(chunks, { type: mimeType });\n      chunks.length = 0;\n      this.el.emit(\"add_media\", new File([blob], \"capture\", { type: mimeType }));\n    };\n  },\n\n  available() {\n    return qsTruthy(\"video_capture\") && window.MediaRecorder && MediaRecorder.isTypeSupported(\"video/webm; codecs=vp8\");\n  },\n\n  started() {\n    return this._recorder && this._recorder.state !== \"inactive\";\n  },\n\n  _tryAddingAudioTrack() {\n    if (this._gotAudioTrack || !this.el.audioListener) return;\n\n    const listener = this.el.audioListener;\n    const destination = listener.context.createMediaStreamDestination();\n    listener.getInput().connect(destination);\n    const audio = destination.stream.getAudioTracks()[0];\n\n    this._stream.addTrack(audio);\n    this._gotAudioTrack = true;\n  },\n\n  start() {\n    if (!this._recorder) {\n      this._initRecorder();\n    }\n\n    // The scene doesn't get an audioListener until something in the scene is playing audio.\n    // So we have to get the audio track lazily.\n    this._tryAddingAudioTrack();\n\n    if (!this.started()) {\n      this._recorder.start();\n      this._recorderTimeout = setTimeout(() => {\n        if (this.started()) {\n          this._recorder.stop();\n        }\n      }, 15000);\n    }\n  },\n\n  stop() {\n    if (this.started()) {\n      clearTimeout(this._recorderTimeout);\n      this._recorder.stop();\n    }\n  }\n});\n","/* global AFRAME THREE */\n\n// See doc/spritesheet-generation.md for information about this spritesheet\nimport spritesheet from \"../assets/images/spritesheets/sprite-system-spritesheet.json\";\nimport { createImageTexture } from \"../utils/media-utils\";\nimport spritesheetPng from \"../assets/images/spritesheets/sprite-system-spritesheet.png\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport vert from \"./sprites/sprite.vert\";\nimport frag from \"./sprites/sprite.frag\";\n\nconst multiviewVertPrefix = [\n  // GLSL 3.0 conversion\n  \"#version 300 es\",\n  \"#define attribute in\",\n  \"#define varying out\",\n  \"#define texture2D texture\",\n  \"#extension GL_OVR_multiview : require\",\n  \"layout(num_views = 2) in;\",\n  \"uniform mat4 modelViewMatrix;\",\n  \"uniform mat4 modelViewMatrix2;\",\n  \"#define modelViewMatrix (gl_ViewID_OVR==0u?modelViewMatrix:modelViewMatrix2)\",\n  \"uniform mat4 projectionMatrix;\",\n  \"uniform mat4 projectionMatrix2;\",\n  \"#define projectionMatrix (gl_ViewID_OVR==0u?projectionMatrix:projectionMatrix2)\",\n  \"\"\n].join(\"\\n\");\nconst nonmultiviewVertPrefix = [\"uniform mat4 modelViewMatrix;\", \"uniform mat4 projectionMatrix;\", \"\"].join(\"\\n\");\n\nconst multiviewFragPrefix = [\n  \"#version 300 es\",\n  \"#define varying in\",\n  \"out highp vec4 pc_fragColor;\",\n  \"#define gl_FragColor pc_fragColor\",\n  \"#define texture2D texture\",\n  \"\"\n].join(\"\\n\");\n\nconst nonmultiviewFragPrefix = \"\";\n\nfunction isVisible(o) {\n  if (!o.visible) return false;\n  if (!o.parent) return true;\n  return isVisible(o.parent);\n}\n\nAFRAME.registerComponent(\"sprite\", {\n  schema: { name: { type: \"string\" } },\n  tick() {\n    // TODO when we run out of sprites we currently just stop rendering them. We need to do something better.\n    if (!(this.didRegisterWithSystem || this.didFailToRegister) && this.el.sceneEl.systems[\"post-physics\"]) {\n      const registered = this.el.sceneEl.systems[\"post-physics\"].spriteSystem.add(this);\n      this.didRegisterWithSystem = registered > 0;\n      this.didFailToRegister = registered < 0;\n    }\n  },\n\n  update() {\n    if (this.didRegisterWithSystem) {\n      this.el.sceneEl.systems[\"post-physics\"].spriteSystem.updateUVs(this);\n    }\n  },\n\n  remove() {\n    if (this.didRegisterWithSystem) {\n      this.el.sceneEl.systems[\"post-physics\"].spriteSystem.remove(this);\n    }\n  }\n});\n\nconst normalizedFrame = (function() {\n  const memo = new Map();\n  return function normalizedFrame(name, spritesheet, missingSprites) {\n    let ret = memo.get(name);\n    if (ret) {\n      return ret;\n    } else {\n      if (!spritesheet.frames[name]) {\n        if (missingSprites.indexOf(name) === -1) {\n          missingSprites.push(name);\n        }\n        ret = { x: 0, y: 0, w: 0, h: 0 };\n        memo.set(name, ret);\n        return ret;\n      }\n      const size = spritesheet.meta.size;\n      const frame = spritesheet.frames[name].frame;\n      ret = {\n        x: frame.x / size.w,\n        y: frame.y / size.h,\n        w: frame.w / size.w,\n        h: frame.h / size.h\n      };\n      memo.set(name, ret);\n      return ret;\n    }\n  };\n})();\n\nconst raycastOnSprite = (function() {\n  const vA = new THREE.Vector3();\n  const vB = new THREE.Vector3();\n  const vC = new THREE.Vector3();\n  const vD = new THREE.Vector3();\n  const point = new THREE.Vector3();\n  const intersectionInfo = { distance: 0, point, object: null };\n\n  return function raycast(raycaster, intersects) {\n    vA.set(-0.5, 0.5, 0).applyMatrix4(this.matrixWorld);\n    vB.set(0.5, 0.5, 0).applyMatrix4(this.matrixWorld);\n    vC.set(-0.5, -0.5, 0).applyMatrix4(this.matrixWorld);\n    let intersect = raycaster.ray.intersectTriangle(vA, vC, vB, false, point);\n    if (intersect === null) {\n      vD.set(0.5, -0.5, 0).applyMatrix4(this.matrixWorld);\n      intersect = raycaster.ray.intersectTriangle(vB, vC, vD, false, point);\n      if (intersect === null) {\n        return;\n      }\n    }\n\n    const distance = raycaster.ray.origin.distanceTo(point);\n    if (distance < raycaster.near || distance > raycaster.far) return;\n\n    intersectionInfo.distance = distance;\n    intersectionInfo.point = point;\n    intersectionInfo.object = this;\n    intersects.push(intersectionInfo);\n  };\n})();\n\nfunction getHoverableVisuals(el) {\n  if (!el || !el.components) return null;\n  if (el.components[\"hoverable-visuals\"]) {\n    return el.components[\"hoverable-visuals\"];\n  }\n  return getHoverableVisuals(el.parentEl);\n}\n\nfunction enableSweepingEffect(comp) {\n  const hoverableVisuals = getHoverableVisuals(comp.el);\n  if (!hoverableVisuals) {\n    return false;\n  }\n\n  const isPinned = hoverableVisuals.el.components.pinnable && hoverableVisuals.el.components.pinnable.data.pinned;\n  const isSpawner = !!hoverableVisuals.el.components[\"super-spawner\"];\n  const isFrozen = hoverableVisuals.el.sceneEl.is(\"frozen\");\n  const hideDueToPinning = !isSpawner && isPinned && !isFrozen;\n  return hoverableVisuals.data.enableSweepingEffect && !hideDueToPinning;\n}\n\nfunction createGeometry(maxSprites) {\n  const geometry = new THREE.BufferGeometry();\n  geometry.addAttribute(\"a_vertices\", new THREE.BufferAttribute(new Float32Array(maxSprites * 3 * 4), 3, false));\n  geometry.addAttribute(\n    \"a_hubs_EnableSweepingEffect\",\n    new THREE.BufferAttribute(new Float32Array(maxSprites * 4), 1, false)\n  );\n  geometry.addAttribute(\n    \"a_hubs_SweepParams\",\n    new THREE.BufferAttribute(new Float32Array(maxSprites * 4 * 2), 2, false)\n  );\n  geometry.addAttribute(\"a_uvs\", new THREE.BufferAttribute(new Float32Array(maxSprites * 2 * 4), 2, false));\n  const mvCols = new THREE.InterleavedBuffer(new Float32Array(maxSprites * 16 * 4), 16);\n  geometry.addAttribute(\"mvCol0\", new THREE.InterleavedBufferAttribute(mvCols, 4, 0, false));\n  geometry.addAttribute(\"mvCol1\", new THREE.InterleavedBufferAttribute(mvCols, 4, 4, false));\n  geometry.addAttribute(\"mvCol2\", new THREE.InterleavedBufferAttribute(mvCols, 4, 8, false));\n  geometry.addAttribute(\"mvCol3\", new THREE.InterleavedBufferAttribute(mvCols, 4, 12, false));\n  const indices = new Array(3 * 2 * maxSprites);\n  for (let i = 0; i < maxSprites; i++) {\n    indices[i * 3 * 2 + 0] = i * 4 + 0;\n    indices[i * 3 * 2 + 1] = i * 4 + 2;\n    indices[i * 3 * 2 + 2] = i * 4 + 1;\n    indices[i * 3 * 2 + 3] = i * 4 + 1;\n    indices[i * 3 * 2 + 4] = i * 4 + 2;\n    indices[i * 3 * 2 + 5] = i * 4 + 3;\n  }\n  geometry.setIndex(indices);\n  return geometry;\n}\n\nconst ZEROS = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\nexport class SpriteSystem {\n  raycast(raycaster, intersects) {\n    for (let i = 0; i < this.slots.length; i++) {\n      if (!this.slots[i]) continue;\n\n      const o = this.indexWithSprite.get(i).el.object3D;\n      if (isVisible(o)) {\n        raycastOnSprite.call(o, raycaster, intersects);\n      }\n    }\n    return intersects;\n  }\n  constructor(scene) {\n    this.missingSprites = [];\n    this.maxSprites = 512;\n    this.slots = new Array(this.maxSprites);\n    this.spriteWithIndex = new Map();\n    this.indexWithSprite = new Map();\n    this.stack = new Array(this.maxSprites);\n    for (let i = 0; i < this.maxSprites; i++) {\n      this.stack[i] = this.maxSprites - 1 - i;\n    }\n\n    const vertexShader = String.prototype.concat(\n      scene.renderer.vr.multiview ? multiviewVertPrefix : nonmultiviewVertPrefix,\n      vert\n    );\n    const fragmentShader = String.prototype.concat(\n      scene.renderer.vr.multiview ? multiviewFragPrefix : nonmultiviewFragPrefix,\n      frag\n    );\n    Promise.all([createImageTexture(spritesheetPng), waitForDOMContentLoaded()]).then(([spritesheetTexture]) => {\n      const material = new THREE.RawShaderMaterial({\n        uniforms: {\n          u_spritesheet: { value: spritesheetTexture },\n          hubs_Time: { value: 0 }\n        },\n        vertexShader,\n        fragmentShader,\n        side: THREE.DoubleSide,\n        transparent: true\n      });\n      this.mesh = new THREE.Mesh(createGeometry(this.maxSprites), material);\n      const el = document.createElement(\"a-entity\");\n      el.classList.add(\"ui\");\n      scene.appendChild(el);\n      el.setObject3D(\"mesh\", this.mesh);\n      this.mesh.frustumCulled = false;\n      this.mesh.renderOrder = window.APP.RENDER_ORDER.HUD_ICONS;\n      this.mesh.raycast = this.raycast.bind(this);\n    });\n  }\n\n  tick(t) {\n    if (!this.mesh) return;\n\n    this.mesh.material.uniforms.hubs_Time.value = t;\n    this.mesh.material.uniformsNeedUpdate = true;\n\n    const mvCols = this.mesh.geometry.attributes[\"mvCol0\"].data; // interleaved\n    const aEnableSweepingEffect = this.mesh.geometry.attributes[\"a_hubs_EnableSweepingEffect\"];\n    const aSweepParams = this.mesh.geometry.attributes[\"a_hubs_SweepParams\"];\n    for (let i = 0; i < this.slots.length; i++) {\n      if (!this.slots[i]) continue;\n\n      const sprite = this.indexWithSprite.get(i);\n      if (isVisible(sprite.el.object3D)) {\n        const enableSweepingEffectValue = enableSweepingEffect(sprite) ? 1 : 0;\n        aEnableSweepingEffect.array[i * 4 + 0] = enableSweepingEffectValue;\n        aEnableSweepingEffect.array[i * 4 + 1] = enableSweepingEffectValue;\n        aEnableSweepingEffect.array[i * 4 + 2] = enableSweepingEffectValue;\n        aEnableSweepingEffect.array[i * 4 + 3] = enableSweepingEffectValue;\n        aEnableSweepingEffect.needsUpdate = true;\n        if (enableSweepingEffectValue) {\n          const hoverableVisuals = getHoverableVisuals(sprite.el);\n          const s = hoverableVisuals.sweepParams[0];\n          const t = hoverableVisuals.sweepParams[1];\n          aSweepParams.setXY(4 * i + 0, s, t);\n          aSweepParams.setXY(4 * i + 1, s, t);\n          aSweepParams.setXY(4 * i + 2, s, t);\n          aSweepParams.setXY(4 * i + 3, s, t);\n          aSweepParams.needsUpdate = true;\n        }\n\n        sprite.el.object3D.updateMatrices();\n        const mat4 = sprite.el.object3D.matrixWorld;\n        mvCols.array.set(mat4.elements, i * 4 * 16 + 0);\n        mvCols.array.set(mat4.elements, i * 4 * 16 + 1 * 16);\n        mvCols.array.set(mat4.elements, i * 4 * 16 + 2 * 16);\n        mvCols.array.set(mat4.elements, i * 4 * 16 + 3 * 16);\n        mvCols.needsUpdate = true;\n      } else {\n        mvCols.array.set(ZEROS, i * 4 * 16 + 0);\n        mvCols.array.set(ZEROS, i * 4 * 16 + 1 * 16);\n        mvCols.array.set(ZEROS, i * 4 * 16 + 2 * 16);\n        mvCols.array.set(ZEROS, i * 4 * 16 + 3 * 16);\n        mvCols.needsUpdate = true;\n      }\n    }\n  }\n\n  updateUVs(sprite) {\n    const flipY = this.mesh.material.uniforms.u_spritesheet.value.flipY;\n    const i = this.spriteWithIndex.get(sprite);\n    const frame = normalizedFrame(sprite.data.name, spritesheet, this.missingSprites);\n    const aUvs = this.mesh.geometry.attributes[\"a_uvs\"];\n\n    aUvs.setXY(i * 4 + 0, frame.x, flipY ? 1 - frame.y : frame.y);\n    aUvs.setXY(i * 4 + 1, frame.x + frame.w, flipY ? 1 - frame.y : frame.y);\n    aUvs.setXY(i * 4 + 2, frame.x, flipY ? 1 - frame.y - frame.h : frame.y + frame.h);\n    aUvs.setXY(i * 4 + 3, frame.x + frame.w, flipY ? 1 - frame.y - frame.h : frame.y + frame.h);\n    aUvs.needsUpdate = true;\n  }\n\n  add(sprite) {\n    if (!this.mesh) {\n      return 0;\n    }\n    const i = this.stack.pop();\n    if (i === undefined) {\n      console.error(\"Too many sprites\");\n      return -1;\n    }\n    this.slots[i] = true;\n    this.spriteWithIndex.set(sprite, i);\n    this.indexWithSprite.set(i, sprite);\n\n    this.updateUVs(sprite);\n\n    const aVertices = this.mesh.geometry.attributes[\"a_vertices\"];\n    aVertices.setXYZ(i * 4 + 0, -0.5, 0.5, 0);\n    aVertices.setXYZ(i * 4 + 1, 0.5, 0.5, 0);\n    aVertices.setXYZ(i * 4 + 2, -0.5, -0.5, 0);\n    aVertices.setXYZ(i * 4 + 3, 0.5, -0.5, 0);\n    aVertices.needsUpdate = true;\n    return 1;\n  }\n\n  remove(sprite) {\n    const i = this.spriteWithIndex.get(sprite);\n    this.spriteWithIndex.delete(sprite);\n    this.indexWithSprite.delete(i);\n    this.slots[i] = false;\n    this.stack.push(i);\n\n    const mvCols = this.mesh.geometry.attributes[\"mvCol0\"].data; // interleaved\n    mvCols.array.set(ZEROS, i * 4 * 16 + 0);\n    mvCols.array.set(ZEROS, i * 4 * 16 + 1 * 16);\n    mvCols.array.set(ZEROS, i * 4 * 16 + 2 * 16);\n    mvCols.array.set(ZEROS, i * 4 * 16 + 3 * 16);\n    mvCols.needsUpdate = true;\n  }\n}\n","import { SpriteSystem } from \"./sprites\";\n\nconst i = window.setInterval(() => {\n  if (AFRAME.scenes[0] && AFRAME.scenes[0].systems && AFRAME.scenes[0].systems.physics) {\n    AFRAME.registerSystem(\"post-physics\", {\n      init() {\n        this.spriteSystem = new SpriteSystem(this.el);\n        this.hubsSystems = this.el.sceneEl.systems[\"hubs-systems\"];\n      },\n      tick(t, dt) {\n        this.spriteSystem.tick(t, dt);\n        this.hubsSystems.batchManagerSystem.tick(t);\n      }\n    });\n    window.clearInterval(i);\n  }\n}, 1000);\n","import { paths } from \"../systems/userinput/paths\";\n\nAFRAME.registerComponent(\"scalable-when-grabbed\", {\n  tick: function() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    if (interaction.state.rightRemote.held !== this.el) return;\n    const deltaScale = userinput.get(paths.actions.cursor.scaleGrabbedGrabbable);\n    if (!deltaScale) return;\n\n    this.el.object3D.scale.addScalar(deltaScale).clampScalar(0.1, 100);\n    this.el.object3D.matrixNeedsUpdate = true;\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\nimport { sets } from \"../systems/userinput/sets\";\nimport { getLastWorldPosition } from \"../utils/three-utils\";\n\nconst HIGHLIGHT = new THREE.Color(23 / 255, 64 / 255, 118 / 255);\nconst NO_HIGHLIGHT = new THREE.Color(190 / 255, 190 / 255, 190 / 255);\nconst TRANSFORM_COLOR_1 = new THREE.Color(150 / 255, 80 / 255, 150 / 255);\nconst TRANSFORM_COLOR_2 = new THREE.Color(23 / 255, 64 / 255, 118 / 255);\nAFRAME.registerComponent(\"cursor-controller\", {\n  schema: {\n    cursor: { type: \"selector\" },\n    camera: { type: \"selector\" },\n    far: { default: 25 },\n    near: { default: 0.01 },\n    defaultDistance: { default: 4 },\n    minDistance: { default: 0.18 }\n  },\n\n  init: function() {\n    this.enabled = true;\n\n    this.data.cursor.addEventListener(\n      \"loaded\",\n      () => {\n        this.data.cursor.object3DMap.mesh.renderOrder = window.APP.RENDER_ORDER.CURSOR;\n      },\n      { once: true }\n    );\n\n    this.raycaster = new THREE.Raycaster();\n    this.raycaster.firstHitOnly = true; // flag specific to three-mesh-bvh\n    this.distance = this.data.far;\n    this.color = new THREE.Color(0, 0, 0);\n\n    const lineGeometry = new THREE.BufferGeometry();\n    lineGeometry.addAttribute(\"position\", new THREE.BufferAttribute(new Float32Array(2 * 3), 3));\n\n    this.line = new THREE.Line(\n      lineGeometry,\n      new THREE.LineBasicMaterial({\n        color: \"white\",\n        opacity: 0.2,\n        transparent: true,\n        visible: false\n      })\n    );\n    this.el.setObject3D(\"line\", this.line);\n  },\n\n  update: function() {\n    this.raycaster.far = this.data.far;\n    this.raycaster.near = this.data.near;\n  },\n\n  tick2: (() => {\n    const rawIntersections = [];\n    const cameraPos = new THREE.Vector3();\n\n    return function(t) {\n      const userinput = AFRAME.scenes[0].systems.userinput;\n      const cursorPose = userinput.get(paths.actions.cursor.pose);\n      const hideLine = userinput.get(paths.actions.cursor.hideLine);\n\n      this.data.cursor.object3D.visible = this.enabled && !!cursorPose;\n      this.line.material.visible = !!(this.enabled && !hideLine);\n\n      if (!this.enabled || !cursorPose) {\n        return;\n      }\n\n      const interaction = AFRAME.scenes[0].systems.interaction;\n      let intersection;\n      const isGrabbing = !!interaction.state.rightRemote.held;\n      if (!isGrabbing) {\n        rawIntersections.length = 0;\n        this.raycaster.ray.origin = cursorPose.position;\n        this.raycaster.ray.direction = cursorPose.direction;\n        this.raycaster.intersectObjects(\n          AFRAME.scenes[0].systems[\"hubs-systems\"].cursorTargettingSystem.targets,\n          true,\n          rawIntersections\n        );\n        intersection = rawIntersections[0];\n        interaction.updateCursorIntersection(intersection);\n        this.distance = intersection ? intersection.distance : this.data.defaultDistance;\n      }\n\n      const { cursor, minDistance, far, camera } = this.data;\n\n      const cursorModDelta = userinput.get(paths.actions.cursor.modDelta) || 0;\n      if (isGrabbing && !userinput.activeSets.includes(sets.cursorHoldingUI)) {\n        this.distance = THREE.Math.clamp(this.distance - cursorModDelta, minDistance, far);\n      }\n      cursor.object3D.position.copy(cursorPose.position).addScaledVector(cursorPose.direction, this.distance);\n      // The cursor will always be oriented towards the player about its Y axis, so objects held by the cursor will rotate towards the player.\n      getLastWorldPosition(camera.object3D, cameraPos);\n      cameraPos.y = cursor.object3D.position.y;\n      cursor.object3D.lookAt(cameraPos);\n      cursor.object3D.scale.setScalar(Math.pow(this.distance, 0.315) * 0.75);\n      cursor.object3D.matrixNeedsUpdate = true;\n\n      if (AFRAME.scenes[0].systems[\"transform-selected-object\"].transforming) {\n        this.color.copy(TRANSFORM_COLOR_1).lerpHSL(TRANSFORM_COLOR_2, 0.5 + 0.5 * Math.sin(t / 1000.0));\n      } else if (intersection || isGrabbing) {\n        this.color.copy(HIGHLIGHT);\n      } else {\n        this.color.copy(NO_HIGHLIGHT);\n      }\n\n      if (!this.data.cursor.object3DMap.mesh.material.color.equals(this.color)) {\n        this.data.cursor.object3DMap.mesh.material.color.copy(this.color);\n        this.data.cursor.object3DMap.mesh.material.needsUpdate = true;\n      }\n\n      if (this.line.material.visible) {\n        const posePosition = cursorPose.position;\n        const cursorPosition = cursor.object3D.position;\n        const positionArray = this.line.geometry.attributes.position.array;\n\n        positionArray[0] = posePosition.x;\n        positionArray[1] = posePosition.y;\n        positionArray[2] = posePosition.z;\n        positionArray[3] = cursorPosition.x;\n        positionArray[4] = cursorPosition.y;\n        positionArray[5] = cursorPosition.z;\n\n        this.line.geometry.attributes.position.needsUpdate = true;\n        this.line.geometry.computeBoundingSphere();\n      }\n    };\n  })()\n});\n","import { paths } from \"../../systems/userinput/paths\";\nimport { getLastWorldPosition, getLastWorldQuaternion } from \"../../utils/three-utils\";\nimport {\n  SOUND_PEN_START_DRAW,\n  SOUND_PEN_STOP_DRAW,\n  SOUND_PEN_UNDO_DRAW,\n  SOUND_PEN_CHANGE_COLOR\n} from \"../../systems/sound-effects-system\";\nimport { waitForDOMContentLoaded } from \"../../utils/async-utils\";\nimport MobileStandardMaterial from \"../../materials/MobileStandardMaterial\";\n\nconst pathsMap = {\n  \"player-right-controller\": {\n    startDrawing: paths.actions.rightHand.startDrawing,\n    stopDrawing: paths.actions.rightHand.stopDrawing,\n    undoDrawing: paths.actions.rightHand.undoDrawing,\n    switchDrawMode: paths.actions.rightHand.switchDrawMode,\n    penNextColor: paths.actions.rightHand.penNextColor,\n    penPrevColor: paths.actions.rightHand.penPrevColor,\n    scalePenTip: paths.actions.rightHand.scalePenTip\n  },\n  \"player-left-controller\": {\n    startDrawing: paths.actions.leftHand.startDrawing,\n    stopDrawing: paths.actions.leftHand.stopDrawing,\n    undoDrawing: paths.actions.leftHand.undoDrawing,\n    switchDrawMode: paths.actions.leftHand.switchDrawMode,\n    penNextColor: paths.actions.leftHand.penNextColor,\n    penPrevColor: paths.actions.leftHand.penPrevColor,\n    scalePenTip: paths.actions.leftHand.scalePenTip\n  },\n  cursor: {\n    pose: paths.actions.cursor.pose,\n    startDrawing: paths.actions.cursor.startDrawing,\n    stopDrawing: paths.actions.cursor.stopDrawing,\n    undoDrawing: paths.actions.cursor.undoDrawing,\n    penNextColor: paths.actions.cursor.penNextColor,\n    penPrevColor: paths.actions.cursor.penPrevColor,\n    scalePenTip: paths.actions.cursor.scalePenTip\n  }\n};\n\nconst DRAW_MODE = {\n  DEFAULT_2D: 0,\n  PROJECTION: 1\n};\n\nconst MAX_DISTANCE_BETWEEN_SURFACES = 1;\n\n/**\n * Pen tool\n * A tool that allows drawing on networked-drawing components.\n * @namespace drawing\n * @component pen\n */\n\nfunction almostEquals(epsilon, u, v) {\n  return Math.abs(u.x - v.x) < epsilon && Math.abs(u.y - v.y) < epsilon && Math.abs(u.z - v.z) < epsilon;\n}\n\nAFRAME.registerComponent(\"pen\", {\n  schema: {\n    drawFrequency: { default: 5 }, //frequency of polling for drawing points\n    minDistanceBetweenPoints: { default: 0.01 }, //minimum distance to register new drawing point\n    camera: { type: \"selector\" },\n    drawingManager: { type: \"string\" },\n    color: { type: \"color\", default: \"#FF0033\" },\n    availableColors: {\n      default: [\n        \"#FF0033\",\n        \"#FFFF00\",\n        \"#0099FF\",\n        \"#00FF33\",\n        \"#9900FF\",\n        \"#FF6600\",\n        \"#8D5524\",\n        \"#C68642\",\n        \"#E0AC69\",\n        \"#F1C27D\",\n        \"#FFDBAC\",\n        \"#FFFFFF\",\n        \"#222222\",\n        \"#111111\",\n        \"#000000\"\n      ]\n    },\n    radius: { default: 0.01 }, //drawing geometry radius\n    minRadius: { default: 0.005 },\n    maxRadius: { default: 0.2 },\n    far: { default: 100 },\n    near: { default: 0.01 }\n  },\n\n  init() {\n    this.timeSinceLastDraw = 0;\n\n    this.lastPosition = new THREE.Vector3();\n    this.lastPosition.copy(this.el.object3D.position);\n\n    this.direction = new THREE.Vector3(1, 0, 0);\n\n    this.currentDrawing = null;\n\n    this.normal = new THREE.Vector3();\n\n    this.worldPosition = new THREE.Vector3();\n\n    this.colorIndex = 0;\n\n    this.grabbed = false;\n\n    this.raycaster = new THREE.Raycaster();\n    this.raycaster.firstHitOnly = true; // flag specific to three-mesh-bvh\n\n    this.originalPosition = this.el.object3D.position.clone();\n    this.intersection = null;\n    this.lastIntersectionDistance = 0;\n\n    const lineGeometry = new THREE.BufferGeometry();\n    lineGeometry.addAttribute(\"position\", new THREE.BufferAttribute(new Float32Array(2 * 3), 3));\n\n    this.line = new THREE.Line(\n      lineGeometry,\n      new THREE.LineBasicMaterial({\n        color: \"red\",\n        opacity: 0.2,\n        transparent: true,\n        visible: true\n      })\n    );\n\n    //prevents the line from being a raycast target for the cursor\n    this.line.raycast = function() {};\n\n    this.el.parentEl.setObject3D(\"penline\", this.line);\n\n    this.drawMode = DRAW_MODE.DEFAULT_2D;\n\n    this.targets = [];\n    this.setDirty = this.setDirty.bind(this);\n    this.dirty = true;\n\n    let material = new THREE.MeshStandardMaterial();\n    if (window.APP && window.APP.quality === \"low\") {\n      material = MobileStandardMaterial.fromStandardMaterial(material);\n    }\n    this.penTip = new THREE.Mesh(new THREE.SphereBufferGeometry(1, 16, 12), material);\n    this.penTip.scale.setScalar(this.data.radius / this.el.parentEl.object3D.scale.x);\n    this.penTip.matrixNeedsUpdate = true;\n\n    this.el.setObject3D(\"mesh\", this.penTip);\n\n    const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n    if (environmentMapComponent) {\n      environmentMapComponent.applyEnvironmentMap(this.el.parentEl.object3D);\n    }\n\n    // TODO: Use the MutationRecords passed into the callback function to determine added/removed nodes!\n    this.observer = new MutationObserver(this.setDirty);\n\n    waitForDOMContentLoaded().then(() => {\n      const scene = document.querySelector(\"a-scene\");\n      this.rightRemote = document.querySelector(\"#cursor-controller\");\n      this.observer.observe(scene, { childList: true, attributes: true, subtree: true });\n      scene.addEventListener(\"object3dset\", this.setDirty);\n      scene.addEventListener(\"object3dremove\", this.setDirty);\n    });\n  },\n\n  play() {\n    this.drawingManager = document.querySelector(this.data.drawingManager).components[\"drawing-manager\"];\n    this.drawingManager.createDrawing();\n  },\n\n  update(prevData) {\n    if (prevData.color != this.data.color) {\n      this.penTip.material.color.set(this.data.color);\n      this.line.material.color.set(this.data.color);\n    }\n    if (prevData.radius != this.data.radius) {\n      this.el.setAttribute(\"radius\", this.data.radius);\n    }\n\n    this.raycaster.far = this.data.far;\n    this.raycaster.near = this.data.near;\n  },\n\n  tick: (() => {\n    const rawIntersections = [];\n    const lineStartPosition = new THREE.Vector3();\n    const lineEndPosition = new THREE.Vector3();\n    const worldQuaternion = new THREE.Quaternion();\n    return function(t, dt) {\n      const userinput = AFRAME.scenes[0].systems.userinput;\n      const interaction = AFRAME.scenes[0].systems.interaction;\n\n      if (interaction.state.rightHand.held === this.el.parentNode) {\n        this.grabberId = \"player-right-controller\";\n      } else if (interaction.state.leftHand.held === this.el.parentNode) {\n        this.grabberId = \"player-left-controller\";\n      } else if (interaction.state.rightRemote.held === this.el.parentNode) {\n        this.grabberId = \"cursor\";\n        this.drawMode = DRAW_MODE.PROJECTION;\n      } else {\n        this.grabberId = null;\n      }\n\n      if (this.grabberId && pathsMap[this.grabberId]) {\n        const sfx = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem;\n        const paths = pathsMap[this.grabberId];\n        if (userinput.get(paths.startDrawing)) {\n          this._startDraw();\n          sfx.playSoundOneShot(SOUND_PEN_START_DRAW);\n        }\n        if (userinput.get(paths.stopDrawing)) {\n          this._endDraw();\n          sfx.playSoundOneShot(SOUND_PEN_STOP_DRAW);\n        }\n        const penScaleMod = userinput.get(paths.scalePenTip);\n        if (penScaleMod) {\n          this._changeRadius(penScaleMod);\n        }\n        if (userinput.get(paths.penNextColor)) {\n          this._changeColor(1);\n          sfx.playSoundOneShot(SOUND_PEN_CHANGE_COLOR);\n        }\n        if (userinput.get(paths.penPrevColor)) {\n          this._changeColor(-1);\n          sfx.playSoundOneShot(SOUND_PEN_CHANGE_COLOR);\n        }\n        if (userinput.get(paths.undoDrawing)) {\n          this._undoDraw();\n          sfx.playSoundOneShot(SOUND_PEN_UNDO_DRAW);\n        }\n        if (paths.switchDrawMode && userinput.get(paths.switchDrawMode)) {\n          this.drawMode = this.drawMode === DRAW_MODE.DEFAULT_2D ? DRAW_MODE.PROJECTION : DRAW_MODE.DEFAULT_2D;\n        }\n      }\n\n      rawIntersections.length = 0;\n\n      this.intersection = null;\n      let cursorPose;\n      if (this.drawMode === DRAW_MODE.PROJECTION) {\n        if (this.grabberId === \"cursor\") {\n          cursorPose = userinput.get(pathsMap.cursor.pose);\n          if (cursorPose) {\n            this.raycaster.ray.origin.copy(cursorPose.position);\n            this.raycaster.ray.direction.copy(cursorPose.direction);\n          }\n        } else if (this.grabberId !== null) {\n          getLastWorldPosition(this.el.parentEl.object3D, this.raycaster.ray.origin);\n          getLastWorldQuaternion(this.el.parentEl.object3D, worldQuaternion);\n          this.raycaster.ray.direction.set(0, -1, 0);\n          this.raycaster.ray.direction.applyQuaternion(worldQuaternion);\n        }\n\n        if (this.grabberId !== null) {\n          this.raycaster.intersectObjects(this.targets, true, rawIntersections);\n          this.intersection = rawIntersections[0];\n\n          if (this.intersection) {\n            if (cursorPose) {\n              lineStartPosition.copy(cursorPose.position);\n              this.el.parentEl.object3D.worldToLocal(lineStartPosition);\n            } else {\n              lineStartPosition.set(0, 0, 0);\n            }\n            lineEndPosition.copy(this.intersection.point);\n            this.el.parentEl.object3D.worldToLocal(lineEndPosition);\n\n            const positionArray = this.line.geometry.attributes.position.array;\n            positionArray[0] = lineStartPosition.x;\n            positionArray[1] = lineStartPosition.y;\n            positionArray[2] = lineStartPosition.z;\n            positionArray[3] = lineEndPosition.x;\n            positionArray[4] = lineEndPosition.y;\n            positionArray[5] = lineEndPosition.z;\n\n            this.line.geometry.attributes.position.needsUpdate = true;\n          }\n\n          if (this.intersection) {\n            this.el.object3D.position.copy(this.intersection.point);\n\n            this.el.parentEl.object3D.worldToLocal(this.el.object3D.position);\n\n            this.el.object3D.matrixNeedsUpdate = true;\n            this.worldPosition.copy(this.intersection.point);\n          } else {\n            this.el.object3D.position.copy(this.originalPosition);\n            this.el.object3D.matrixNeedsUpdate = true;\n            getLastWorldPosition(this.el.object3D, this.worldPosition);\n          }\n        }\n      } else {\n        this.el.object3D.position.copy(this.originalPosition);\n        this.el.object3D.matrixNeedsUpdate = true;\n        getLastWorldPosition(this.el.object3D, this.worldPosition);\n      }\n\n      this._setPenVisible(this.grabberId !== \"cursor\" || !this.intersection);\n      this._setLineVisible(\n        this.el.sceneEl.is(\"vr-mode\") && this.drawMode === DRAW_MODE.PROJECTION && this.intersection\n      );\n\n      //Prevent drawings from \"jumping\" large distances\n      if (\n        this.currentDrawing &&\n        (this.lastIntersectedObject !== (this.intersection ? this.intersection.object : null) &&\n          (!this.intersection ||\n            Math.abs(this.intersection.distance - this.lastIntersectionDistance) > MAX_DISTANCE_BETWEEN_SURFACES))\n      ) {\n        this.worldPosition.copy(this.lastPosition);\n        this._endDraw();\n      }\n      this.lastIntersectionDistance = this.intersection ? this.intersection.distance : 0;\n      this.lastIntersectedObject = this.intersection ? this.intersection.object : null;\n\n      if (!almostEquals(0.005, this.worldPosition, this.lastPosition)) {\n        this.direction.subVectors(this.worldPosition, this.lastPosition).normalize();\n        this.lastPosition.copy(this.worldPosition);\n      }\n\n      if (this.currentDrawing) {\n        const time = this.timeSinceLastDraw + dt;\n        if (\n          time >= this.data.drawFrequency &&\n          this.currentDrawing.getLastPoint().distanceTo(this.worldPosition) >= this.data.minDistanceBetweenPoints\n        ) {\n          this._getNormal(this.normal, this.worldPosition, this.direction);\n          this.currentDrawing.draw(this.worldPosition, this.direction, this.normal, this.data.color, this.data.radius);\n        }\n\n        this.timeSinceLastDraw = time % this.data.drawFrequency;\n      }\n\n      if (this.currentDrawing && !this.grabberId) {\n        this._endDraw();\n      }\n\n      if (this.dirty) {\n        this.populateEntities(this.targets);\n        this.dirty = false;\n      }\n\n      this.el.object3D.matrixNeedsUpdate = true;\n    };\n  })(),\n\n  _setPenVisible(visible) {\n    if (this.el.parentEl.object3DMap.mesh && this.el.parentEl.object3DMap.mesh.visible !== visible) {\n      this.el.parentEl.object3DMap.mesh.visible = visible;\n    }\n  },\n\n  _setLineVisible(visible) {\n    if (this.line.material.visible !== visible) {\n      this.line.material.visible = visible;\n    }\n  },\n\n  //helper function to get normal of direction of drawing cross direction to camera\n  _getNormal: (() => {\n    const directionToCamera = new THREE.Vector3();\n    return function(normal, position, direction) {\n      directionToCamera.subVectors(position, this.data.camera.object3D.position).normalize();\n      normal.crossVectors(direction, directionToCamera);\n    };\n  })(),\n\n  _startDraw() {\n    this.currentDrawing = this.drawingManager.getDrawing(this);\n    if (this.currentDrawing) {\n      this._getNormal(this.normal, this.worldPosition, this.direction);\n      this.currentDrawing.startDraw(this.worldPosition, this.direction, this.normal, this.data.color, this.data.radius);\n    }\n  },\n\n  _endDraw() {\n    if (this.currentDrawing) {\n      this.timeSinceLastDraw = 0;\n      this._getNormal(this.normal, this.worldPosition, this.direction);\n      this.currentDrawing.endDraw(this.worldPosition, this.direction, this.normal);\n      this.drawingManager.returnDrawing(this);\n      this.currentDrawing = null;\n    }\n  },\n\n  _undoDraw() {\n    const drawing = this.drawingManager.getDrawing(this);\n    if (drawing) {\n      drawing.undoDraw();\n      this.drawingManager.returnDrawing(this);\n    }\n  },\n\n  _changeColor(mod) {\n    this.colorIndex = (this.colorIndex + mod + this.data.availableColors.length) % this.data.availableColors.length;\n    this.data.color = this.data.availableColors[this.colorIndex];\n    this.penTip.material.color.set(this.data.color);\n    this.line.material.color.set(this.data.color);\n  },\n\n  _changeRadius(mod) {\n    this.data.radius = Math.max(this.data.minRadius, Math.min(this.data.radius + mod, this.data.maxRadius));\n    this.penTip.scale.setScalar(this.data.radius / this.el.parentEl.object3D.scale.x);\n    this.penTip.matrixNeedsUpdate = true;\n  },\n\n  setDirty() {\n    this.dirty = true;\n  },\n\n  populateEntities(targets) {\n    targets.length = 0;\n    // TODO: Do not querySelectorAll on the entire scene every time anything changes!\n    const els = AFRAME.scenes[0].querySelectorAll(\".collidable, .interactable, #environment-root\");\n    for (let i = 0; i < els.length; i++) {\n      if (!els[i].classList.contains(\"pen\") && els[i].object3D) {\n        targets.push(els[i].object3D);\n      }\n    }\n  },\n\n  remove() {\n    this.observer.disconnect();\n    AFRAME.scenes[0].removeEventListener(\"object3dset\", this.setDirty);\n    AFRAME.scenes[0].removeEventListener(\"object3dremove\", this.setDirty);\n    this.el.parentEl.removeObject3D(\"penline\");\n  }\n});\n","export default class SharedBufferGeometry {\n  constructor(material, primitiveMode, maxBufferSize) {\n    this.material = material;\n    this.primitiveMode = primitiveMode;\n\n    this.maxBufferSize = maxBufferSize;\n    this.geometries = [];\n    this.current = null;\n    this.drawing = new THREE.Object3D();\n    this.addBuffer();\n  }\n\n  restartPrimitive() {\n    if (this.idx.position >= this.current.attributes.position.count) {\n      console.error(\"maxBufferSize limit exceeded\");\n    } else if (this.idx.position !== 0) {\n      let prev = (this.idx.position - 1) * 3;\n      const position = this.current.attributes.position.array;\n      this.addVertex(position[prev++], position[prev++], position[prev++]);\n\n      this.idx.color++;\n      this.idx.normal++;\n    }\n  }\n\n  remove(prevIdx, idx) {\n    // Loop through all the attributes: position, color, normal,...\n    if (this.idx.position > idx.position) {\n      for (const key in this.idx) {\n        const componentSize = 3;\n        let pos = prevIdx[key] * componentSize;\n        const start = (idx[key] + 1) * componentSize;\n        const end = this.idx[key] * componentSize;\n        for (let i = start; i < end; i++) {\n          this.current.attributes[key].array[pos++] = this.current.attributes[key].array[i];\n        }\n        const diff = idx[key] - prevIdx[key] + 1;\n        this.idx[key] -= diff;\n      }\n    } else {\n      for (const key in this.idx) {\n        const diff = idx[key] - prevIdx[key];\n        this.idx[key] -= diff;\n      }\n    }\n\n    this.update();\n  }\n\n  undo(prevIdx) {\n    this.idx = prevIdx;\n    this.update();\n  }\n\n  addBuffer() {\n    const geometry = new THREE.BufferGeometry();\n\n    const vertices = new Float32Array(this.maxBufferSize * 3);\n    const normals = new Float32Array(this.maxBufferSize * 3);\n    const colors = new Float32Array(this.maxBufferSize * 3);\n\n    const mesh = new THREE.Mesh(geometry, this.material);\n\n    mesh.drawMode = this.primitiveMode;\n\n    mesh.frustumCulled = false;\n    mesh.vertices = vertices;\n\n    const object3D = new THREE.Object3D();\n    this.drawing.add(object3D);\n    object3D.add(mesh);\n\n    geometry.setDrawRange(0, 0);\n    geometry.addAttribute(\"position\", new THREE.BufferAttribute(vertices, 3).setDynamic(true));\n    geometry.addAttribute(\"normal\", new THREE.BufferAttribute(normals, 3).setDynamic(true));\n    geometry.addAttribute(\"color\", new THREE.BufferAttribute(colors, 3).setDynamic(true));\n\n    this.previous = null;\n    if (this.geometries.length > 0) {\n      this.previous = this.current;\n    }\n\n    this.idx = {\n      position: 0,\n      normal: 0,\n      color: 0\n    };\n\n    this.geometries.push(geometry);\n    this.current = geometry;\n  }\n\n  addColor(r, g, b) {\n    this.current.attributes.color.setXYZ(this.idx.color++, r, g, b);\n  }\n\n  addNormal(x, y, z) {\n    this.current.attributes.normal.setXYZ(this.idx.normal++, x, y, z);\n  }\n\n  addVertex(x, y, z) {\n    const buffer = this.current.attributes.position;\n    if (this.idx.position === buffer.count) {\n      console.error(\"maxBufferSize limit exceeded\");\n    }\n    buffer.setXYZ(this.idx.position++, x, y, z);\n  }\n\n  update() {\n    this.current.setDrawRange(0, this.idx.position);\n\n    this.current.attributes.color.needsUpdate = true;\n    this.current.attributes.normal.needsUpdate = true;\n    this.current.attributes.position.needsUpdate = true;\n  }\n}\n","import SharedBufferGeometry from \"./sharedbuffergeometry\";\n\nexport default class SharedBufferGeometryManager {\n  constructor() {\n    this.sharedBuffers = {};\n  }\n\n  addSharedBuffer(name, material, primitiveMode, maxBufferSize) {\n    this.sharedBuffers[name] = new SharedBufferGeometry(material, primitiveMode, maxBufferSize);\n  }\n\n  getSharedBuffer(name) {\n    return this.sharedBuffers[name];\n  }\n}\n","/* global THREE */\n/**\n * Networked Drawing\n * Creates procedurally generated 'lines' (or tubes) that are networked.\n * @namespace drawing\n * @component networked-drawing\n */\n\nimport SharedBufferGeometryManager from \"../../utils/sharedbuffergeometrymanager\";\nimport MobileStandardMaterial from \"../../materials/MobileStandardMaterial\";\n\nconst MSG_CONFIRM_CONNECT = 0;\nconst MSG_BUFFER_DATA = 1;\nconst MSG_BUFFER_DATA_FULL = 2;\n\nfunction copyData(fromArray, toArray, fromIndex, toIndex) {\n  let i = fromIndex - 1;\n  let j = -1;\n  while (i + 1 <= toIndex) {\n    toArray[++j] = fromArray[++i];\n  }\n}\n\nAFRAME.registerComponent(\"networked-drawing\", {\n  schema: {\n    segments: { default: 8 }, //the number of \"sides\" the procedural tube should have\n    defaultRadius: { default: 0.01 }, //the radius of the procedural tube\n    maxDrawTimeout: { default: 600000 }, //the maximum time a drawn line will live\n    maxLines: { default: 50 }, //how many lines can persist before lines older than minDrawTime are removed\n    maxPointsPerLine: { default: 250 } //the max number of points a single line can have\n  },\n\n  init() {\n    this._receiveData = this._receiveData.bind(this);\n\n    this.networkBuffer = [];\n\n    this.sendNetworkBufferQueue = [];\n\n    this.drawStarted = false;\n    this.lineStarted = false;\n    this.remoteLineStarted = false;\n\n    this.receivedBufferParts = 0;\n    this.bufferIndex = 0;\n    this.connectedToOwner = false;\n    this.networkBufferInitialized = false;\n\n    const options = {\n      vertexColors: THREE.VertexColors\n    };\n\n    this.color = new THREE.Color();\n    this.radius = this.data.defaultRadius;\n    this.segments = this.data.segments;\n\n    let material = new THREE.MeshStandardMaterial(options);\n    if (window.APP && window.APP.quality === \"low\") {\n      material = MobileStandardMaterial.fromStandardMaterial(material);\n    }\n\n    this.sharedBufferGeometryManager = new SharedBufferGeometryManager();\n    // NOTE: 20 is approximate for how many floats per point are added.\n    // maxLines + 1 because a line can be currently drawing while at maxLines.\n    // Multiply by 1/3 (0.333) because 3 floats per vertex (x, y, z).\n    const maxBufferSize = Math.round(this.data.maxPointsPerLine * 20 * (this.data.maxLines + 1) * 0.333);\n    this.sharedBufferGeometryManager.addSharedBuffer(0, material, THREE.TriangleStripDrawMode, maxBufferSize);\n\n    this.lastPoint = new THREE.Vector3();\n\n    this.lastSegments = [];\n    this.currentSegments = [];\n    for (let x = 0; x < this.segments; x++) {\n      this.lastSegments[x] = {\n        position: new THREE.Vector3(),\n        normal: new THREE.Vector3()\n      };\n      this.currentSegments[x] = {\n        position: new THREE.Vector3(),\n        normal: new THREE.Vector3()\n      };\n    }\n\n    this.sharedBuffer = this.sharedBufferGeometryManager.getSharedBuffer(0);\n    this.drawing = this.sharedBuffer.drawing;\n    const sceneEl = document.querySelector(\"a-scene\");\n    this.scene = sceneEl.object3D;\n    this.scene.add(this.drawing);\n\n    const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n    if (environmentMapComponent) {\n      environmentMapComponent.applyEnvironmentMap(this.drawing);\n    }\n\n    this.prevIdx = Object.assign({}, this.sharedBuffer.idx);\n    this.idx = Object.assign({}, this.sharedBuffer.idx);\n    this.vertexCount = 0; //number of vertices added for current line (used for line deletion).\n    this.networkBufferCount = 0; //number of items added to networkBuffer for current line (used for line deletion).\n    this.currentPointCount = 0; //number of points added for current line (used for maxPointsPerLine).\n    this.invalidPointRead = false; //flag flipped if we read a bad point anywhere during this line\n    this.lastReadPointCount = 0; //last read point count read off of the network, used for sanity checking\n    this.networkBufferHistory = []; //tracks vertexCount and networkBufferCount so that lines can be deleted.\n\n    NAF.connection.onConnect(() => {\n      NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n        this.networkedEl = networkedEl;\n        this.networkId = NAF.utils.getNetworkId(this.networkedEl);\n        this.drawingId = \"drawing-\" + this.networkId;\n        NAF.connection.subscribeToDataChannel(this.drawingId, this._receiveData);\n      });\n    });\n  },\n\n  remove() {\n    NAF.connection.unsubscribeToDataChannel(this.drawingId, this._receiveData);\n\n    this.scene.remove(this.drawing);\n  },\n\n  tick(t) {\n    const connected = NAF.connection.isConnected() && this.networkedEl;\n    const isMine = connected && NAF.utils.isMine(this.networkedEl);\n\n    if (!this.connectedToOwner && connected) {\n      const owner = NAF.utils.getNetworkOwner(this.networkedEl);\n      if (!isMine && NAF.connection.hasActiveDataChannel(owner)) {\n        NAF.connection.sendDataGuaranteed(owner, this.drawingId, {\n          type: MSG_CONFIRM_CONNECT,\n          clientId: NAF.clientId\n        });\n        this.connectedToOwner = true;\n      }\n    }\n\n    if (this.networkBuffer.length > 0 && connected) {\n      if (!isMine) {\n        this._drawFromNetwork();\n      } else if (this.bufferIndex < this.networkBuffer.length) {\n        this._broadcastDrawing();\n      }\n    }\n\n    //TODO: handle possibility that a clientId gets stuck in sendNetworkBufferQueue\n    //if that client disconnects before this executes and an activeDataChannel is opened.\n    if (isMine && this.sendNetworkBufferQueue.length > 0) {\n      const connected = [];\n      for (let i = 0; i < this.sendNetworkBufferQueue.length; i++) {\n        if (NAF.connection.hasActiveDataChannel(this.sendNetworkBufferQueue[i])) {\n          connected.push(this.sendNetworkBufferQueue[i]);\n        }\n      }\n      for (let j = 0; j < connected.length; j++) {\n        const pos = this.sendNetworkBufferQueue.indexOf(connected[j]);\n        this._sendNetworkBuffer(connected[j]);\n        this.sendNetworkBufferQueue.splice(pos, 1);\n      }\n    }\n\n    this._deleteExpiredLines(t);\n  },\n\n  _broadcastDrawing: (() => {\n    const copyArray = [];\n    return function() {\n      copyArray.length = 0;\n      copyData(this.networkBuffer, copyArray, this.bufferIndex, this.networkBuffer.length - 1);\n\n      //remove undo's from networkBuffer after they've been sent so that\n      //newly joining clients don't get them\n      let index = -1;\n      while ((index = this.networkBuffer.indexOf(\"-\")) != -1) {\n        this.networkBuffer.splice(index, 1);\n      }\n      this.bufferIndex = this.networkBuffer.length;\n      NAF.connection.broadcastDataGuaranteed(this.drawingId, { type: MSG_BUFFER_DATA, buffer: copyArray });\n    };\n  })(),\n\n  _drawFromNetwork: (() => {\n    const position = new THREE.Vector3();\n    const direction = new THREE.Vector3();\n    const normal = new THREE.Vector3();\n    return function() {\n      let head = this.networkBuffer[0];\n      if (head === \"-\") {\n        this._undoDraw();\n        this.networkBuffer.shift();\n        head = this.networkBuffer[0];\n      }\n      let didWork = false;\n      while (head != null && this.networkBuffer.length >= 11) {\n        const pointCount = this.networkBuffer[0];\n\n        // This is a sanity check against the sequence number to help uncover remaining bugs.\n        // If the point is out-of-order, report the error and stop drawing this line.\n        if (pointCount !== this.lastReadPointCount + 1) {\n          this.invalidPointRead = true;\n\n          console.error(\n            `Draw networking error: ID ${this.drawingId} expected point ${this.lastReadPointCount +\n              1} but received ${pointCount}`\n          );\n        }\n\n        this.lastReadPointCount = pointCount;\n        position.set(this.networkBuffer[1], this.networkBuffer[2], this.networkBuffer[3]);\n        direction.set(this.networkBuffer[4], this.networkBuffer[5], this.networkBuffer[6]);\n        this.radius = Math.round(direction.length() * 1000) / 1000; //radius is encoded as length of direction vector\n        direction.normalize();\n        normal.set(this.networkBuffer[7], this.networkBuffer[8], this.networkBuffer[9]);\n        this.color.setHex(Math.round(normal.length()) - 1); //color is encoded as length of normal vector\n        normal.normalize();\n\n        this.networkBuffer.splice(0, 10);\n\n        if (!this.remoteLineStarted) {\n          this.startDraw(position, direction, normal);\n          this.remoteLineStarted = true;\n        }\n\n        if (this.networkBuffer[0] === null) {\n          if (!this.invalidPointRead) {\n            this._endDraw(position, direction, normal);\n          }\n\n          this.remoteLineStarted = false;\n          this.networkBuffer.shift();\n          this.lastReadPointCount = 0;\n          this.invalidPointRead = false;\n        } else {\n          if (!this.invalidPointRead) {\n            this._draw(position, direction, normal);\n            didWork = true;\n          }\n        }\n      }\n      if (didWork) this._updateBuffer();\n    };\n  })(),\n\n  _deleteExpiredLines(time) {\n    const length = this.networkBufferHistory.length;\n    if (length > 0) {\n      const drawTime = this.networkBufferHistory[0].time;\n      if (length > this.data.maxLines || drawTime + this.data.maxDrawTimeout <= time) {\n        const datum = this.networkBufferHistory[0];\n        if (length > 1) {\n          datum.idxLength += 2 - (this.segments % 2); //account for extra verts added for degenerate triangles\n          this.networkBufferHistory[1].idxLength -= 2 - (this.segments % 2);\n        }\n        this.idx.position = datum.idxLength;\n        this.idx.uv = datum.idxLength;\n        this.idx.normal = datum.idxLength;\n        this.idx.color = datum.idxLength;\n        this.sharedBuffer.remove(this.prevIdx, this.idx);\n        this.networkBufferHistory.shift();\n        if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n          this.networkBuffer.splice(0, datum.networkBufferCount);\n          this.bufferIndex -= datum.networkBufferCount;\n        }\n      }\n    }\n  },\n\n  _sendNetworkBuffer: (() => {\n    const copyArray = [];\n    //This number needs to be approx. < ~6000 based on napkin math\n    //see: https://github.com/webrtc/adapter/blob/682e0f2439e139da6c0c406370eae820637b8sc1a/src/js/common_shim.js#L157\n    const chunkAmount = 3000;\n    return function(clientId) {\n      if (NAF.utils.isMine(this.networkedEl)) {\n        if (this.networkBuffer.length <= chunkAmount) {\n          NAF.connection.sendDataGuaranteed(clientId, this.drawingId, {\n            type: MSG_BUFFER_DATA_FULL,\n            parts: 1,\n            buffer: this.networkBuffer\n          });\n        } else {\n          let start = 0;\n          let end = 0;\n          while (end < this.networkBuffer.length) {\n            end = Math.min(end + chunkAmount, this.networkBuffer.length);\n            copyArray.length = 0;\n            copyData(this.networkBuffer, copyArray, start, end - 1);\n            start = end;\n            NAF.connection.sendDataGuaranteed(clientId, this.drawingId, {\n              type: MSG_BUFFER_DATA_FULL,\n              parts: Math.ceil(this.networkBuffer.length / chunkAmount),\n              buffer: copyArray\n            });\n          }\n        }\n      }\n    };\n  })(),\n\n  _receiveData(_, dataType, data) {\n    switch (data.type) {\n      case MSG_CONFIRM_CONNECT:\n        this.sendNetworkBufferQueue.push(data.clientId);\n        break;\n      case MSG_BUFFER_DATA:\n        if (this.networkBufferInitialized) {\n          this.networkBuffer.push.apply(this.networkBuffer, data.buffer);\n        }\n        break;\n      case MSG_BUFFER_DATA_FULL:\n        this.networkBuffer.push.apply(this.networkBuffer, data.buffer);\n        if (++this.receivedBufferParts >= data.parts) {\n          this.networkBufferInitialized = true;\n        }\n        break;\n    }\n  },\n\n  getLastPoint() {\n    return this.lastPoint;\n  },\n\n  startDraw(position, direction, normal, color, radius) {\n    if (!NAF.connection.isConnected()) {\n      return;\n    }\n\n    this.drawStarted = true;\n\n    if (color) {\n      this.color.set(color);\n    }\n    if (radius) this.radius = radius;\n\n    this.lastPoint.copy(position);\n    this._addToNetworkBuffer(position, direction, normal);\n  },\n\n  draw(position, direction, normal, color, radius) {\n    if (!NAF.connection.isConnected() || !this.drawStarted) {\n      return;\n    }\n\n    if (color && color != \"#\" + this.color.getHexString().toUpperCase()) {\n      this.color.set(color);\n    }\n    if (radius) this.radius = radius;\n\n    this._addToNetworkBuffer(position, direction, normal);\n    this._draw(position, direction, normal);\n\n    this._updateBuffer();\n  },\n\n  _draw: (() => {\n    const capNormal = new THREE.Vector3();\n    return function(position, direction, normal, radiusMultiplier = 1.0) {\n      if (!this.lineStarted) {\n        this._generateSegments(this.lastSegments, position, direction, normal, this.radius * radiusMultiplier);\n\n        if (this.networkBufferHistory.length === 0) {\n          //start with CW faceculling order\n          this._addDegenerateTriangle();\n        } else {\n          //only do the following if the sharedBuffer is not empty\n          this._restartPrimitive();\n          this._addDegenerateTriangle();\n          if (this.segments % 2 === 0) {\n            //flip faceculling order if even numbered segments\n            this._addDegenerateTriangle();\n          }\n        }\n\n        //get normal for tip of cap\n        capNormal.copy(direction).negate();\n        //get normals for rim of cap\n        for (let i = 0; i < this.segments; i++) {\n          this.lastSegments[i].normal.add(capNormal).multiplyScalar(0.5);\n        }\n\n        this._drawCap(this.lastPoint, this.lastSegments, capNormal);\n        if (this.segments % 2 !== 0) {\n          //flip faceculling order if odd numbered segments\n          this._addDegenerateTriangle();\n        }\n\n        this.lineStarted = true;\n      } else {\n        this._generateSegments(this.currentSegments, position, direction, normal, this.radius * radiusMultiplier);\n        this._drawCylinder();\n\n        if (this.currentPointCount > this.data.maxPointsPerLine) {\n          this._drawEndCap(position, direction);\n          this._endLine();\n        }\n      }\n      this.lastPoint.copy(position);\n    };\n  })(),\n\n  undoDraw() {\n    if (!NAF.connection.isConnected() || this.drawStarted) {\n      return;\n    }\n    this._undoDraw();\n    this._pushToNetworkBuffer(\"-\");\n  },\n\n  _undoDraw() {\n    const length = this.networkBufferHistory.length;\n    if (length > 0) {\n      const datum = this.networkBufferHistory.pop();\n      this.idx.position = 0;\n      this.idx.uv = 0;\n      this.idx.normal = 0;\n      this.idx.color = 0;\n      if (length > 1) {\n        datum.idxLength += 1 - (this.segments % 2); //account for extra verts added for degenerate triangles\n        this.idx.position = this.sharedBuffer.idx.position - datum.idxLength;\n        this.idx.uv = this.sharedBuffer.idx.uv - datum.idxLength;\n        this.idx.normal = this.sharedBuffer.idx.normal - datum.idxLength;\n        this.idx.color = this.sharedBuffer.idx.color - datum.idxLength;\n      }\n      this.sharedBuffer.remove(this.idx, this.sharedBuffer.idx);\n      if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n        this.networkBuffer.splice(this.networkBuffer.length - datum.networkBufferCount, datum.networkBufferCount);\n        this.bufferIndex -= datum.networkBufferCount;\n      }\n    }\n  },\n\n  endDraw(position, direction, normal) {\n    this._endDraw(position, direction, normal);\n    this._updateBuffer();\n  },\n\n  _endDraw(position, direction, normal) {\n    if (!this.lineStarted && this.drawStarted) {\n      this._drawPoint(position);\n    } else if (this.lineStarted && this.drawStarted) {\n      this._addToNetworkBuffer(position, direction, normal);\n      this._draw(position, direction, normal);\n      this._drawEndCap(position, direction);\n    }\n    this._endLine();\n  },\n\n  _drawEndCap: (() => {\n    const projectedDirection = new THREE.Vector3();\n    const projectedPoint = new THREE.Vector3();\n    return function(position, direction) {\n      if (this.lineStarted && this.drawStarted) {\n        projectedDirection.copy(direction).multiplyScalar(this.radius);\n        projectedPoint.copy(position).add(projectedDirection);\n        this._addDegenerateTriangle(); //flip faceculling order before drawing end-cap\n        this._drawCap(projectedPoint, this.lastSegments, direction);\n      }\n    };\n  })(),\n\n  _endLine() {\n    if (!this.drawStarted) return;\n\n    if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) this._pushToNetworkBuffer(null);\n\n    const datum = {\n      networkBufferCount: this.networkBufferCount,\n      idxLength: this.vertexCount - 1,\n      time: this.el.sceneEl.clock.elapsedTime * 1000\n    };\n    this.networkBufferHistory.push(datum);\n    this.vertexCount = 0;\n    this.networkBufferCount = 0;\n    this.currentPointCount = 0;\n    this.lineStarted = false;\n    this.drawStarted = false;\n  },\n\n  _addToNetworkBuffer: (() => {\n    const copyDirection = new THREE.Vector3();\n    const copyNormal = new THREE.Vector3();\n    return function(position, direction, normal) {\n      if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n        ++this.currentPointCount;\n        this._pushToNetworkBuffer(this.currentPointCount);\n        this._pushToNetworkBuffer(position.x);\n        this._pushToNetworkBuffer(position.y);\n        this._pushToNetworkBuffer(position.z);\n        copyDirection.copy(direction);\n        copyDirection.setLength(this.radius); //encode radius as length of direction vector\n        this._pushToNetworkBuffer(copyDirection.x);\n        this._pushToNetworkBuffer(copyDirection.y);\n        this._pushToNetworkBuffer(copyDirection.z);\n        copyNormal.copy(normal);\n        copyNormal.setLength(this.color.getHex() + 1); //encode color as length, add one in case color is black\n        this._pushToNetworkBuffer(copyNormal.x);\n        this._pushToNetworkBuffer(copyNormal.y);\n        this._pushToNetworkBuffer(copyNormal.z);\n      }\n    };\n  })(),\n\n  _pushToNetworkBuffer(val) {\n    //don't increment networkBufferCount if undo, because the undo character\n    //will be removed in tick() on the next frame\n    if (val !== \"-\") {\n      ++this.networkBufferCount;\n    }\n    this.networkBuffer.push(val);\n  },\n\n  //draw a cylinder from last to current segments\n  _drawCylinder() {\n    //average the normals with the normals from the lastSegment\n    //not a perfect normal calculation, but works well enough\n    for (let i = 0; i < this.segments; i++) {\n      this.currentSegments[i].normal.add(this.lastSegments[i].normal).multiplyScalar(0.5);\n    }\n\n    for (let i = 0; i != this.segments + 1; i++) {\n      this._addVertex(this.lastSegments[i % this.segments]);\n      this._addVertex(this.currentSegments[i % this.segments]);\n    }\n\n    for (let i = 0; i < this.segments; i++) {\n      this.lastSegments[i].position.copy(this.currentSegments[i].position);\n      this.lastSegments[i].normal.copy(this.currentSegments[i].normal);\n    }\n  },\n\n  //draw a standalone point in space\n  _drawPoint: (() => {\n    const up = new THREE.Vector3(0, 1, 0);\n    const down = new THREE.Vector3(0, -1, 0);\n    const left = new THREE.Vector3(1, 0, 0);\n    const projectedDirection = new THREE.Vector3();\n    const projectedPoint = new THREE.Vector3();\n    return function(position) {\n      projectedDirection.copy(up).multiplyScalar(this.radius * 0.75);\n      projectedPoint.copy(position).add(projectedDirection);\n      this.lastPoint.copy(projectedPoint);\n\n      projectedDirection.copy(up).multiplyScalar(this.radius * 0.5);\n      projectedPoint.copy(position).add(projectedDirection);\n      this._draw(projectedPoint, down, left, 0.75);\n\n      this._draw(position, down, left);\n\n      projectedDirection.copy(down).multiplyScalar(this.radius * 0.5);\n      projectedPoint.copy(position).add(projectedDirection);\n      this._draw(projectedPoint, down, left, 0.75);\n\n      projectedDirection.copy(down).multiplyScalar(this.radius * 0.75);\n      projectedPoint.copy(position).add(projectedDirection);\n\n      this._addDegenerateTriangle(); //discarded\n      this._drawCap(projectedPoint, this.lastSegments, down);\n    };\n  })(),\n\n  //draw a cap to start/end a line\n  _drawCap(point, segments, normal) {\n    let segmentIndex = 0;\n    for (let i = 0; i < this.segments * 2 - (this.segments % 2); i++) {\n      if ((i - 2) % 4 === 0) {\n        this._addVertex({ position: point, normal: normal });\n      } else {\n        this._addVertex(segments[segmentIndex % this.segments]);\n        if ((i + 1) % 5 !== 0) {\n          ++segmentIndex;\n        }\n      }\n    }\n  },\n\n  _restartPrimitive() {\n    this.sharedBuffer.restartPrimitive();\n    ++this.vertexCount;\n  },\n\n  _updateBuffer() {\n    this.sharedBuffer.update();\n  },\n\n  _addVertex(segment) {\n    const point = segment.position;\n    const normal = segment.normal;\n    this.sharedBuffer.addVertex(point.x, point.y, point.z);\n    this.sharedBuffer.addColor(this.color.r, this.color.g, this.color.b);\n\n    if (normal) {\n      this.sharedBuffer.addNormal(normal.x, normal.y, normal.z);\n    } else {\n      ++this.sharedBuffer.idx.normal;\n    }\n\n    ++this.sharedBuffer.idx.uv;\n    ++this.vertexCount;\n  },\n\n  _addDegenerateTriangle() {\n    this._addVertex(this.lastSegments[0]);\n  },\n\n  //calculate the segments for a given point\n  _generateSegments(segmentsList, point, forward, up, radius) {\n    const angleIncrement = (Math.PI * 2) / this.segments;\n    for (let i = 0; i < this.segments; i++) {\n      const segment = segmentsList[i].position;\n      this._rotatePointAroundAxis(segment, point, forward, up, angleIncrement * i, radius);\n      segmentsList[i].normal.subVectors(segment, point).normalize();\n    }\n  },\n\n  _rotatePointAroundAxis: (() => {\n    const calculatedDirection = new THREE.Vector3();\n    return function(out, point, axis, up, angle, radius) {\n      calculatedDirection.copy(up);\n      calculatedDirection.applyAxisAngle(axis, angle);\n      out.copy(point).add(calculatedDirection.normalize().multiplyScalar(radius));\n    };\n  })()\n});\n","function registerNetworkSchemas() {\n  const vectorRequiresUpdate = epsilon => {\n    return () => {\n      let prev = null;\n\n      return curr => {\n        if (prev === null) {\n          prev = new THREE.Vector3(curr.x, curr.y, curr.z);\n          return true;\n        } else if (!NAF.utils.almostEqualVec3(prev, curr, epsilon)) {\n          prev.copy(curr);\n          return true;\n        }\n\n        return false;\n      };\n    };\n  };\n\n  // Note: networked template ids are semantically important. We use the template suffix as a filter\n  // for allowing and authorizing messages in reticulum. See https://github.com/mozilla/reticulum/pull/195\n\n  NAF.schemas.add({\n    template: \"#remote-avatar\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      \"scale\",\n      \"player-info\",\n      \"networked-avatar\",\n      {\n        selector: \".camera\",\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \".camera\",\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        selector: \".left-controller\",\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \".left-controller\",\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        selector: \".left-controller\",\n        component: \"visible\"\n      },\n      {\n        selector: \".right-controller\",\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \".right-controller\",\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        selector: \".right-controller\",\n        component: \"visible\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-media\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      \"scale\",\n      // TODO: Optimize checking mediaOptions with requiresNetworkUpdate.\n      \"media-loader\",\n      {\n        component: \"media-video\",\n        property: \"time\"\n      },\n      {\n        component: \"media-video\",\n        property: \"videoPaused\"\n      },\n      {\n        component: \"media-pager\",\n        property: \"index\"\n      },\n      \"pinnable\"\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#static-media\",\n    components: [\n      // TODO: Optimize checking mediaOptions with requiresNetworkUpdate.\n      \"media-loader\",\n      {\n        component: \"media-video\",\n        property: \"time\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#static-controlled-media\",\n    components: [\n      // TODO: Optimize checking mediaOptions with requiresNetworkUpdate.\n      \"media-loader\",\n      {\n        component: \"media-video\",\n        property: \"time\"\n      },\n      {\n        component: \"media-video\",\n        property: \"videoPaused\"\n      },\n      {\n        component: \"media-pager\",\n        property: \"index\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-drawing\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      \"scale\",\n      \"networked-drawing\"\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-camera\",\n    components: [\n      \"position\",\n      \"rotation\",\n      {\n        component: \"camera-tool\",\n        property: \"isSnapping\"\n      },\n      {\n        component: \"camera-tool\",\n        property: \"isRecording\"\n      },\n      {\n        component: \"camera-tool\",\n        property: \"label\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-pen\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      \"scale\",\n      \"media-loader\",\n      {\n        selector: \"#pen\",\n        component: \"pen\",\n        property: \"radius\"\n      },\n      {\n        selector: \"#pen\",\n        component: \"pen\",\n        property: \"color\"\n      }\n    ]\n  });\n}\n\nexport default registerNetworkSchemas;\n","import \"@babel/polyfill\";\nimport \"./utils/debug-log\";\n\nconsole.log(`Hubs version: ${process.env.BUILD_VERSION || \"?\"}`);\n\nimport \"./assets/stylesheets/hub.scss\";\n\nimport \"aframe\";\nimport \"./utils/logging\";\nimport { patchWebGLRenderingContext } from \"./utils/webgl\";\npatchWebGLRenderingContext();\n\nimport \"three/examples/js/loaders/GLTFLoader\";\nimport \"networked-aframe/src/index\";\nimport \"naf-janus-adapter\";\nimport \"aframe-rounded\";\nimport \"webrtc-adapter\";\nimport \"aframe-slice9-component\";\nimport \"./utils/audio-context-fix\";\nimport \"./utils/threejs-positional-audio-updatematrixworld\";\nimport \"./utils/threejs-world-update\";\nimport patchThreeAllocations from \"./utils/threejs-allocation-patches\";\nimport { detectOS, detect } from \"detect-browser\";\nimport {\n  getReticulumFetchUrl,\n  getReticulumMeta,\n  invalidateReticulumMeta,\n  migrateChannelToSocket\n} from \"./utils/phoenix-utils\";\n\nimport nextTick from \"./utils/next-tick\";\nimport { addAnimationComponents } from \"./utils/animation\";\nimport Cookies from \"js-cookie\";\n\nimport \"./components/scene-components\";\nimport \"./components/mute-mic\";\nimport \"./components/toggle-flying\";\nimport \"./components/bone-mute-state-indicator\";\nimport \"./components/bone-visibility\";\nimport \"./components/in-world-hud\";\nimport \"./components/virtual-gamepad-controls\";\nimport \"./components/ik-controller\";\nimport \"./components/hand-controls2\";\nimport \"./components/character-controller\";\nimport \"./components/hoverable-visuals\";\nimport \"./components/hover-visuals\";\nimport \"./components/offset-relative-to\";\nimport \"./components/player-info\";\nimport \"./components/debug\";\nimport \"./components/hand-poses\";\nimport \"./components/hud-controller\";\nimport \"./components/freeze-controller\";\nimport \"./components/icon-button\";\nimport \"./components/text-button\";\nimport \"./components/block-button\";\nimport \"./components/mute-button\";\nimport \"./components/kick-button\";\nimport \"./components/close-vr-notice-button\";\nimport \"./components/leave-room-button\";\nimport \"./components/visible-if-permitted\";\nimport \"./components/visibility-on-content-type\";\nimport \"./components/hide-when-pinned-and-forbidden\";\nimport \"./components/visibility-while-frozen\";\nimport \"./components/stats-plus\";\nimport \"./components/networked-avatar\";\nimport \"./components/media-views\";\nimport \"./components/avatar-volume-controls\";\nimport \"./components/pinch-to-move\";\nimport \"./components/pitch-yaw-rotator\";\nimport \"./components/position-at-box-shape-border\";\nimport \"./components/pinnable\";\nimport \"./components/pin-networked-object-button\";\nimport \"./components/drop-object-button\";\nimport \"./components/remove-networked-object-button\";\nimport \"./components/camera-focus-button\";\nimport \"./components/unmute-video-button\";\nimport \"./components/destroy-at-extreme-distances\";\nimport \"./components/visible-to-owner\";\nimport \"./components/camera-tool\";\nimport \"./components/emit-state-change\";\nimport \"./components/action-to-event\";\nimport \"./components/action-to-remove\";\nimport \"./components/emit-scene-event-on-remove\";\nimport \"./components/follow-in-fov\";\nimport \"./components/matrix-auto-update\";\nimport \"./components/clone-media-button\";\nimport \"./components/open-media-button\";\nimport \"./components/tweet-media-button\";\nimport \"./components/transform-object-button\";\nimport \"./components/hover-menu\";\nimport \"./components/disable-frustum-culling\";\nimport \"./components/teleporter\";\nimport \"./components/set-active-camera\";\nimport \"./components/track-pose\";\nimport \"./components/replay\";\nimport \"./components/visibility-by-path\";\nimport \"./components/tags\";\nimport \"./components/hubs-text\";\nimport \"./components/billboard\";\nimport \"./components/periodic-full-syncs\";\nimport { sets as userinputSets } from \"./systems/userinput/sets\";\n\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\nimport { Router, Route } from \"react-router-dom\";\nimport { createBrowserHistory } from \"history\";\nimport { pushHistoryState } from \"./utils/history\";\nimport UIRoot from \"./react-components/ui-root\";\nimport AuthChannel from \"./utils/auth-channel\";\nimport HubChannel from \"./utils/hub-channel\";\nimport LinkChannel from \"./utils/link-channel\";\nimport { connectToReticulum } from \"./utils/phoenix-utils\";\nimport { disableiOSZoom } from \"./utils/disable-ios-zoom\";\nimport { proxiedUrlFor } from \"./utils/media-url-utils\";\nimport { traverseMeshesAndAddShapes } from \"./utils/physics-utils\";\nimport { handleExitTo2DInterstitial, exit2DInterstitialAndEnterVR } from \"./utils/vr-interstitial\";\nimport { getAvatarSrc } from \"./utils/avatar-utils.js\";\nimport MessageDispatch from \"./message-dispatch\";\nimport SceneEntryManager from \"./scene-entry-manager\";\nimport Subscriptions from \"./subscriptions\";\nimport { createInWorldLogMessage } from \"./react-components/chat-message\";\n\nimport \"./systems/nav\";\nimport \"./systems/frame-scheduler\";\nimport \"./systems/personal-space-bubble\";\nimport \"./systems/app-mode\";\nimport \"./systems/permissions\";\nimport \"./systems/exit-on-blur\";\nimport \"./systems/camera-tools\";\nimport \"./systems/userinput/userinput\";\nimport \"./systems/userinput/userinput-debug\";\nimport \"./systems/ui-hotkeys\";\nimport \"./systems/tips\";\nimport \"./systems/interactions\";\nimport \"./systems/hubs-systems\";\nimport \"./systems/capture-system\";\nimport { SOUND_CHAT_MESSAGE } from \"./systems/sound-effects-system\";\n\nimport \"./gltf-component-mappings\";\n\nimport { App } from \"./App\";\n\nwindow.APP = new App();\nwindow.APP.RENDER_ORDER = {\n  HUD_BACKGROUND: 1,\n  HUD_ICONS: 2,\n  CURSOR: 3\n};\nconst store = window.APP.store;\nconst mediaSearchStore = window.APP.mediaSearchStore;\nconst OAUTH_FLOW_PERMS_TOKEN_KEY = \"ret-oauth-flow-perms-token\";\nconst NOISY_OCCUPANT_COUNT = 12; // Above this # of occupants, we stop posting join/leaves/renames\n\nconst qs = new URLSearchParams(location.search);\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\nconst isEmbed = window.self !== window.top;\nif (isEmbed && !qs.get(\"embed_token\")) {\n  // Should be covered by X-Frame-Options, but just in case.\n  throw new Error(\"no embed token\");\n}\n\nTHREE.Object3D.DefaultMatrixAutoUpdate = false;\nwindow.APP.quality = qs.get(\"quality\") || (isMobile || isMobileVR) ? \"low\" : \"high\";\n\nconst Ammo = require(\"ammo.js/builds/ammo.wasm.js\");\nconst AmmoWasm = require(\"ammo.js/builds/ammo.wasm.wasm\");\nwindow.Ammo = Ammo.bind(undefined, {\n  locateFile(path) {\n    if (path.endsWith(\".wasm\")) {\n      return AmmoWasm;\n    }\n    return path;\n  }\n});\nrequire(\"aframe-physics-system\");\n\nimport \"./systems/post-physics\";\n\nimport \"./components/owned-object-limiter\";\nimport \"./components/set-unowned-body-kinematic\";\nimport \"./components/scalable-when-grabbed\";\nimport \"./components/networked-counter\";\nimport \"./components/event-repeater\";\nimport \"./components/set-yxz-order\";\n\nimport \"./components/cursor-controller\";\n\nimport \"./components/nav-mesh-helper\";\n\nimport \"./components/tools/pen\";\nimport \"./components/tools/networked-drawing\";\nimport \"./components/tools/drawing-manager\";\n\nimport registerNetworkSchemas from \"./network-schemas\";\nimport registerTelemetry from \"./telemetry\";\nimport { warmSerializeElement } from \"./utils/serialize-element\";\n\nimport { getAvailableVREntryTypes, VR_DEVICE_AVAILABILITY } from \"./utils/vr-caps-detect.js\";\nimport detectConcurrentLoad from \"./utils/concurrent-load-detector.js\";\n\nimport qsTruthy from \"./utils/qs_truthy\";\n\nconst PHOENIX_RELIABLE_NAF = \"phx-reliable\";\nNAF.options.firstSyncSource = PHOENIX_RELIABLE_NAF;\nNAF.options.syncSource = PHOENIX_RELIABLE_NAF;\n\nconst isBotMode = qsTruthy(\"bot\");\nconst isTelemetryDisabled = qsTruthy(\"disable_telemetry\");\nconst isDebug = qsTruthy(\"debug\");\nconst loadingEnvironmentURL = proxiedUrlFor(\n  \"https://uploads-prod.reticulum.io/files/61d77151-7a74-40a6-b427-0c5a350c4502.glb\"\n);\n\nif (!isBotMode && !isTelemetryDisabled) {\n  registerTelemetry(\"/hub\", \"Room Landing Page\");\n}\n\ndisableiOSZoom();\ndetectConcurrentLoad();\n\nstore.init();\n\nfunction getPlatformUnsupportedReason() {\n  if (typeof RTCDataChannelEvent === \"undefined\") return \"no_data_channels\";\n  return null;\n}\n\nfunction setupLobbyCamera() {\n  const camera = document.querySelector(\"#player-camera\");\n  const previewCamera = document.querySelector(\"#environment-scene\").object3D.getObjectByName(\"scene-preview-camera\");\n\n  if (previewCamera) {\n    camera.object3D.position.copy(previewCamera.position);\n    camera.object3D.rotation.copy(previewCamera.rotation);\n    camera.object3D.rotation.reorder(\"YXZ\");\n  } else {\n    const cameraPos = camera.object3D.position;\n    camera.object3D.position.set(cameraPos.x, 2.5, cameraPos.z);\n  }\n\n  camera.object3D.matrixNeedsUpdate = true;\n\n  camera.setAttribute(\"scene-preview-camera\", \"positionOnly: true; duration: 60\");\n  camera.components[\"pitch-yaw-rotator\"].set(camera.object3D.rotation.x, camera.object3D.rotation.y);\n}\n\nlet uiProps = {};\n\n// Hub ID and slug are the basename\nlet routerBaseName = document.location.pathname\n  .split(\"/\")\n  .slice(0, 2)\n  .join(\"/\");\n\nif (document.location.pathname.includes(\"hub.html\")) {\n  routerBaseName = \"\";\n}\n\nconst history = createBrowserHistory({ basename: routerBaseName });\nwindow.APP.history = history;\n\nconst qsVREntryType = qs.get(\"vr_entry_type\");\n\nfunction mountUI(props = {}) {\n  const scene = document.querySelector(\"a-scene\");\n  const disableAutoExitOnConcurrentLoad = qsTruthy(\"allow_multi\");\n  const isCursorHoldingPen = scene && scene.systems.userinput.activeSets.includes(userinputSets.cursorHoldingPen);\n  const hasActiveCamera = scene && !!scene.systems[\"camera-tools\"].getMyCamera();\n  const forcedVREntryType = qsVREntryType;\n\n  ReactDOM.render(\n    <Router history={history}>\n      <Route\n        render={routeProps => (\n          <UIRoot\n            {...{\n              scene,\n              isBotMode,\n              disableAutoExitOnConcurrentLoad,\n              forcedVREntryType,\n              store,\n              mediaSearchStore,\n              isCursorHoldingPen,\n              hasActiveCamera,\n              ...props,\n              ...routeProps\n            }}\n          />\n        )}\n      />\n    </Router>,\n    document.getElementById(\"ui-root\")\n  );\n}\n\nfunction remountUI(props) {\n  uiProps = { ...uiProps, ...props };\n  mountUI(uiProps);\n}\n\nasync function updateUIForHub(hub) {\n  remountUI({\n    hubId: hub.hub_id,\n    hubName: hub.name,\n    hubMemberPermissions: hub.member_permissions,\n    hubScene: hub.scene,\n    hubEntryCode: hub.entry_code\n  });\n}\n\nasync function updateEnvironmentForHub(hub) {\n  let sceneUrl = 'https://www.dropbox.com/s/ayl3t33p2ymnxux/Axon%20Park_Cliffside.glb'\n  let isLegacyBundle; // Deprecated\n\n  const environmentScene = document.querySelector(\"#environment-scene\");\n  const sceneEl = document.querySelector(\"a-scene\");\n\n  if (hub.scene) {\n    isLegacyBundle = false;\n    sceneUrl = hub.scene.model_url;\n  } else if (hub.scene === null) {\n    // delisted/removed scene\n    sceneUrl = loadingEnvironmentURL;\n  } else {\n    const defaultSpaceTopic = hub.topics[0];\n    const glbAsset = defaultSpaceTopic.assets.find(a => a.asset_type === \"glb\");\n    const bundleAsset = defaultSpaceTopic.assets.find(a => a.asset_type === \"gltf_bundle\");\n    sceneUrl = (glbAsset || bundleAsset).src;\n    const hasExtension = /\\.gltf/i.test(sceneUrl) || /\\.glb/i.test(sceneUrl);\n    isLegacyBundle = !(glbAsset || hasExtension);\n  }\n\n  if (isLegacyBundle) {\n    // Deprecated\n    const res = await fetch(sceneUrl);\n    const data = await res.json();\n    const baseURL = new URL(THREE.LoaderUtils.extractUrlBase(sceneUrl), window.location.href);\n    sceneUrl = new URL(data.assets[0].src, baseURL).href;\n  } else {\n    sceneUrl = proxiedUrlFor(sceneUrl);\n  }\n\n  console.log(`Scene URL: ${sceneUrl}`);\n\n  let environmentEl = null;\n\n  if (environmentScene.childNodes.length === 0) {\n    const environmentEl = document.createElement(\"a-entity\");\n    environmentEl.setAttribute(\"gltf-model-plus\", { src: sceneUrl, useCache: false, inflate: true });\n\n    environmentScene.appendChild(environmentEl);\n\n    environmentEl.addEventListener(\n      \"model-loaded\",\n      () => {\n        // Show the canvas once the model has loaded\n        document.querySelector(\".a-canvas\").classList.remove(\"a-hidden\");\n\n        //TODO: check if the environment was made with spoke to determine if a shape should be added\n        traverseMeshesAndAddShapes(environmentEl);\n      },\n      { once: true }\n    );\n  } else {\n    // Change environment\n    environmentEl = environmentScene.childNodes[0];\n\n    // Clear the three.js image cache and load the loading environment before switching to the new one.\n    THREE.Cache.clear();\n\n    environmentEl.addEventListener(\n      \"model-loaded\",\n      () => {\n        environmentEl.addEventListener(\n          \"model-loaded\",\n          () => {\n            traverseMeshesAndAddShapes(environmentEl);\n\n            // We've already entered, so move to new spawn point once new environment is loaded\n            if (sceneEl.is(\"entered\")) {\n              document.querySelector(\"#player-rig\").components[\"spawn-controller\"].moveToSpawnPoint();\n            }\n          },\n          { once: true }\n        );\n\n        environmentEl.setAttribute(\"gltf-model-plus\", { src: sceneUrl });\n      },\n      { once: true }\n    );\n\n    environmentEl.setAttribute(\"gltf-model-plus\", { src: loadingEnvironmentURL });\n  }\n}\n\nasync function handleHubChannelJoined(entryManager, hubChannel, messageDispatch, data) {\n  const scene = document.querySelector(\"a-scene\");\n  const isRejoin = NAF.connection.isConnected();\n\n  if (isRejoin) {\n    // Slight hack, to ensure correct presence state we need to re-send the entry event\n    // on re-join. Ideally this would be updated into the channel socket state but this\n    // would require significant changes to the hub channel events and socket management.\n    if (scene.is(\"entered\")) {\n      hubChannel.sendEntryEvent();\n    }\n\n    // Send complete sync on phoenix re-join.\n    NAF.connection.entities.completeSync(null, true);\n    return;\n  }\n\n  // Turn off NAF for embeds as an optimization, so the user's browser isn't getting slammed\n  // with NAF traffic on load.\n  if (isEmbed) {\n    hubChannel.allowNAFTraffic(false);\n  }\n\n  const hub = data.hubs[0];\n\n  let embedToken = hub.embed_token;\n\n  if (!embedToken) {\n    const embedTokenEntry = store.state.embedTokens && store.state.embedTokens.find(t => t.hubId === hub.hub_id);\n\n    if (embedTokenEntry) {\n      embedToken = embedTokenEntry.embedToken;\n    }\n  }\n\n  console.log(`Janus host: ${hub.host}`);\n\n  remountUI({\n    onSendMessage: messageDispatch.dispatch,\n    onLoaded: () => store.executeOnLoadActions(scene),\n    onMediaSearchResultEntrySelected: entry => scene.emit(\"action_selected_media_result_entry\", entry),\n    onMediaSearchCancelled: entry => scene.emit(\"action_media_search_cancelled\", entry),\n    onAvatarSaved: entry => scene.emit(\"action_avatar_saved\", entry),\n    embedToken: embedToken\n  });\n\n  scene.addEventListener(\"action_selected_media_result_entry\", e => {\n    const entry = e.detail;\n    if (entry.type !== \"scene_listing\" && entry.type !== \"scene\") return;\n    if (!hubChannel.can(\"update_hub\")) return;\n\n    hubChannel.updateScene(entry.url);\n  });\n\n  // Handle request for user gesture\n  scene.addEventListener(\"2d-interstitial-gesture-required\", () => {\n    remountUI({\n      showInterstitialPrompt: true,\n      onInterstitialPromptClicked: () => {\n        scene.emit(\"2d-interstitial-gesture-complete\");\n        remountUI({ showInterstitialPrompt: false, onInterstitialPromptClicked: null });\n      }\n    });\n  });\n\n  const objectsScene = document.querySelector(\"#objects-scene\");\n  const objectsUrl = getReticulumFetchUrl(`/${hub.hub_id}/objects.gltf`);\n  const objectsEl = document.createElement(\"a-entity\");\n  objectsEl.setAttribute(\"gltf-model-plus\", { src: objectsUrl, useCache: false, inflate: true });\n\n  if (!isBotMode) {\n    objectsScene.appendChild(objectsEl);\n  }\n\n  // Wait for scene objects to load before connecting, so there is no race condition on network state.\n  const connectToScene = async () => {\n    scene.setAttribute(\"networked-scene\", {\n      room: hub.hub_id,\n      serverURL: `wss://${hub.host}`,\n      debug: !!isDebug\n    });\n\n    while (!scene.components[\"networked-scene\"] || !scene.components[\"networked-scene\"].data) await nextTick();\n\n    scene.addEventListener(\"adapter-ready\", ({ detail: adapter }) => {\n      let newHostPollInterval = null;\n\n      // When reconnecting, update the server URL if necessary\n      adapter.setReconnectionListeners(\n        () => {\n          if (newHostPollInterval) return;\n\n          newHostPollInterval = setInterval(async () => {\n            const currentServerURL = NAF.connection.adapter.serverUrl;\n            const newHubHost = await hubChannel.getHost();\n            const newServerURL = `wss://${newHubHost}`;\n\n            if (currentServerURL !== newServerURL) {\n              console.log(\"Connecting to new Janus server \" + newServerURL);\n              scene.setAttribute(\"networked-scene\", { serverURL: newServerURL });\n              adapter.serverUrl = newServerURL;\n            }\n          }, 1000);\n        },\n        () => {\n          clearInterval(newHostPollInterval);\n          newHostPollInterval = null;\n        },\n        null\n      );\n\n      const sendViaPhoenix = reliable => (clientId, dataType, data) => {\n        const payload = { dataType, data };\n\n        if (clientId) {\n          payload.clientId = clientId;\n        }\n\n        const isOpen = hubChannel.channel.socket.connectionState() === \"open\";\n\n        if (isOpen || reliable) {\n          if (isOpen) {\n            hubChannel.channel.push(\"naf\", payload);\n          } else {\n            // Memory is re-used, so make a copy\n            hubChannel.channel.push(\"naf\", AFRAME.utils.clone(payload));\n          }\n        }\n      };\n\n      adapter.reliableTransport = sendViaPhoenix(true);\n      adapter.unreliableTransport = sendViaPhoenix(false);\n    });\n\n    const loadEnvironmentAndConnect = () => {\n      updateEnvironmentForHub(hub);\n\n      scene.components[\"networked-scene\"]\n        .connect()\n        .then(() => scene.emit(\"didConnectToNetworkedScene\"))\n        .catch(connectError => {\n          // hacky until we get return codes\n          const isFull = connectError.error && connectError.error.msg.match(/\\bfull\\b/i);\n          console.error(connectError);\n          remountUI({ roomUnavailableReason: isFull ? \"full\" : \"connect_error\" });\n          entryManager.exitScene();\n\n          return;\n        });\n    };\n\n    updateUIForHub(hub);\n\n    if (!isEmbed) {\n      loadEnvironmentAndConnect();\n    } else {\n      remountUI({\n        onPreloadLoadClicked: () => {\n          hubChannel.allowNAFTraffic(true);\n          remountUI({ showPreload: false });\n          loadEnvironmentAndConnect();\n        }\n      });\n    }\n  };\n\n  if (!isBotMode) {\n    objectsEl.addEventListener(\"model-loaded\", async el => {\n      if (el.target !== objectsEl) return;\n      connectToScene();\n    });\n  } else {\n    connectToScene();\n  }\n}\n\nasync function runBotMode(scene, entryManager) {\n  const noop = () => {};\n  scene.renderer = { setAnimationLoop: noop, render: noop };\n\n  while (!NAF.connection.isConnected()) await nextTick();\n  entryManager.enterSceneWhenLoaded(new MediaStream(), false);\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\n  const canvas = document.querySelector(\".a-canvas\");\n  canvas.classList.add(\"a-hidden\");\n\n  warmSerializeElement();\n\n  if (!window.WebAssembly) {\n    remountUI({ showWebAssemblyDialog: true });\n    return;\n  }\n\n  // If we are on iOS but we don't have the mediaDevices API, then we are likely in a Firefox or Chrome WebView,\n  // or a WebView preview used in apps like Twitter and Discord. So we show the dialog that tells users to open\n  // the room in the real Safari.\n  const detectedOS = detectOS(navigator.userAgent);\n  if (detectedOS === \"iOS\" && !navigator.mediaDevices) {\n    remountUI({ showSafariDialog: true });\n    return;\n  }\n\n  // HACK: On Safari for iOS & MacOS, if mic permission is not granted, subscriber webrtc negotiation fails.\n  // So we need to insist on microphone grants to continue.\n  const browser = detect();\n  if ([\"iOS\", \"Mac OS\"].includes(detectedOS) && [\"safari\", \"ios\"].includes(browser.name)) {\n    try {\n      await navigator.mediaDevices.getUserMedia({ audio: true });\n    } catch (e) {\n      remountUI({ showSafariMicDialog: true });\n      return;\n    }\n  }\n\n  const hubId = qs.get(\"hub_id\") || document.location.pathname.substring(1).split(\"/\")[0];\n  console.log(`Hub ID: ${hubId}`);\n\n  const subscriptions = new Subscriptions(hubId);\n\n  if (navigator.serviceWorker) {\n    try {\n      navigator.serviceWorker\n        .register(\"/hub.service.js\")\n        .then(() => {\n          navigator.serviceWorker.ready\n            .then(registration => subscriptions.setRegistration(registration))\n            .catch(() => subscriptions.setRegistrationFailed());\n        })\n        .catch(() => subscriptions.setRegistrationFailed());\n    } catch (e) {\n      subscriptions.setRegistrationFailed();\n    }\n  } else {\n    subscriptions.setRegistrationFailed();\n  }\n\n  const scene = document.querySelector(\"a-scene\");\n  scene.setAttribute(\"shadow\", { enabled: window.APP.quality !== \"low\" }); // Disable shadows on low quality\n\n  // Physics needs to be ready before spawning anything.\n  while (!scene.systems.physics.initialized) await nextTick();\n\n  const onSceneLoaded = () => {\n    const physicsSystem = scene.systems.physics;\n    physicsSystem.setDebug(isDebug || physicsSystem.data.debug);\n    patchThreeAllocations();\n  };\n\n  if (scene.hasLoaded) {\n    onSceneLoaded();\n  } else {\n    scene.addEventListener(\"loaded\", onSceneLoaded, { once: true });\n  }\n\n  // If the stored avatar doesn't have a valid src, reset to a legacy avatar.\n  const avatarSrc = await getAvatarSrc(store.state.profile.avatarId);\n  if (!avatarSrc) {\n    store.resetToRandomLegacyAvatar();\n  }\n\n  const authChannel = new AuthChannel(store);\n  const hubChannel = new HubChannel(store, hubId);\n  const availableVREntryTypes = await getAvailableVREntryTypes();\n  const entryManager = new SceneEntryManager(hubChannel, authChannel, availableVREntryTypes, history);\n  const performConditionalSignIn = async (predicate, action, messageId, onFailure) => {\n    if (predicate()) return action();\n\n    const signInContinueTextId = scene.is(\"vr-mode\") ? \"entry.return-to-vr\" : \"dialog.close\";\n\n    handleExitTo2DInterstitial(true, () => remountUI({ showSignInDialog: false }));\n\n    remountUI({\n      showSignInDialog: true,\n      signInMessageId: `sign-in.${messageId}`,\n      signInCompleteMessageId: `sign-in.${messageId}-complete`,\n      signInContinueTextId,\n      onContinueAfterSignIn: async () => {\n        remountUI({ showSignInDialog: false });\n        let actionError = null;\n        if (predicate()) {\n          try {\n            await action();\n          } catch (e) {\n            actionError = e;\n          }\n        } else {\n          actionError = new Error(\"Predicate failed post sign-in\");\n        }\n\n        if (actionError && onFailure) onFailure(actionError);\n        exit2DInterstitialAndEnterVR();\n      }\n    });\n  };\n\n  window.addEventListener(\"action_create_avatar\", () => {\n    performConditionalSignIn(\n      () => hubChannel.signedIn,\n      () => pushHistoryState(history, \"overlay\", \"avatar-editor\"),\n      \"create-avatar\"\n    );\n  });\n\n  scene.addEventListener(\"scene_media_selected\", e => {\n    const sceneInfo = e.detail;\n\n    performConditionalSignIn(\n      () => hubChannel.can(\"update_hub\"),\n      () => hubChannel.updateScene(sceneInfo),\n      \"change-scene\"\n    );\n  });\n\n  scene.addEventListener(\"action_media_tweet\", e => {\n    let isInModal = false;\n    let isInOAuth = false;\n\n    const exitOAuth = () => {\n      isInOAuth = false;\n      store.clearOnLoadActions();\n      remountUI({ showOAuthDialog: false, oauthInfo: null });\n    };\n\n    handleExitTo2DInterstitial(true, () => {\n      if (isInModal) history.goBack();\n      if (isInOAuth) exitOAuth();\n    });\n\n    performConditionalSignIn(\n      () => hubChannel.signedIn,\n      async () => {\n        // Strip el from stored payload because it won't serialize into the store.\n        const serializableDetail = {};\n        Object.assign(serializableDetail, e.detail);\n        delete serializableDetail.el;\n\n        if (hubChannel.can(\"tweet\")) {\n          isInModal = true;\n          pushHistoryState(history, \"modal\", \"tweet\", serializableDetail);\n        } else {\n          if (e.detail.el) {\n            // Pin the object if we have to go through OAuth, since the page will refresh and\n            // the object will otherwise be removed\n            e.detail.el.setAttribute(\"pinnable\", \"pinned\", true);\n          }\n\n          const url = await hubChannel.getTwitterOAuthURL();\n\n          isInOAuth = true;\n          store.enqueueOnLoadAction(\"emit_scene_event\", { event: \"action_media_tweet\", detail: serializableDetail });\n          remountUI({\n            showOAuthDialog: true,\n            oauthInfo: [{ type: \"twitter\", url: url }],\n            onCloseOAuthDialog: () => exitOAuth()\n          });\n        }\n      },\n      \"tweet\"\n    );\n  });\n\n  remountUI({ performConditionalSignIn, embed: isEmbed, showPreload: isEmbed });\n  entryManager.performConditionalSignIn = performConditionalSignIn;\n  entryManager.init();\n\n  const linkChannel = new LinkChannel(store);\n\n  window.APP.scene = scene;\n  window.APP.hubChannel = hubChannel;\n  window.dispatchEvent(new CustomEvent(\"hub_channel_ready\"));\n\n  const handleEarlyVRMode = () => {\n    // If VR headset is activated, refreshing page will fire vrdisplayactivate\n    // which puts A-Frame in VR mode, so exit VR mode whenever it is attempted\n    // to be entered and we haven't entered the room yet.\n    if (scene.is(\"vr-mode\") && !scene.is(\"vr-entered\")) {\n      console.log(\"Pre-emptively exiting VR mode.\");\n      scene.exitVR();\n      return true;\n    }\n\n    return false;\n  };\n\n  scene.addEventListener(\"enter-vr\", () => {\n    if (handleEarlyVRMode()) return true;\n\n    if (isMobileVR) {\n      // Optimization, stop drawing UI if not visible\n      remountUI({ hide: true });\n    }\n\n    document.body.classList.add(\"vr-mode\");\n\n    // Don't stretch canvas on cardboard, since that's drawing the actual VR view :)\n    if ((!isMobile && !isMobileVR) || availableVREntryTypes.cardboard !== VR_DEVICE_AVAILABILITY.yes) {\n      document.body.classList.add(\"vr-mode-stretch\");\n    }\n  });\n\n  handleEarlyVRMode();\n\n  // HACK A-Frame 0.9.0 seems to fail to wire up vrdisplaypresentchange early enough\n  // to catch presentation state changes and recognize that an HMD is presenting on startup.\n  window.addEventListener(\n    \"vrdisplaypresentchange\",\n    () => {\n      if (scene.is(\"vr-entered\")) return;\n      if (scene.is(\"vr-mode\")) return;\n\n      const device = AFRAME.utils.device.getVRDisplay();\n\n      if (device && device.isPresenting) {\n        if (!scene.is(\"vr-mode\")) {\n          console.warn(\"Hit A-Frame bug where VR display is presenting but A-Frame has not entered VR mode.\");\n          scene.enterVR();\n        }\n      }\n    },\n    { once: true }\n  );\n\n  scene.addEventListener(\"exit-vr\", () => {\n    document.body.classList.remove(\"vr-mode\");\n    document.body.classList.remove(\"vr-mode-stretch\");\n\n    remountUI({ hide: false });\n\n    // HACK: Oculus browser pauses videos when exiting VR mode, so we need to resume them after a timeout.\n    if (/OculusBrowser/i.test(window.navigator.userAgent)) {\n      document.querySelectorAll(\"[media-video]\").forEach(m => {\n        const videoComponent = m.components[\"media-video\"];\n\n        if (videoComponent) {\n          videoComponent._ignorePauseStateChanges = true;\n\n          setTimeout(() => {\n            const video = videoComponent.video;\n\n            if (video && video.paused && !videoComponent.data.videoPaused) {\n              video.play();\n            }\n\n            videoComponent._ignorePauseStateChanges = false;\n          }, 1000);\n        }\n      });\n    }\n  });\n\n  registerNetworkSchemas();\n\n  remountUI({\n    authChannel,\n    hubChannel,\n    linkChannel,\n    subscriptions,\n    enterScene: entryManager.enterScene,\n    exitScene: reason => {\n      entryManager.exitScene();\n\n      if (reason) {\n        remountUI({ roomUnavailableReason: reason });\n      }\n    },\n    initialIsSubscribed: subscriptions.isSubscribed(),\n    activeTips: scene.systems.tips.activeTips\n  });\n\n  scene.addEventListener(\"action_focus_chat\", () => {\n    const chatFocusTarget = document.querySelector(\".chat-focus-target\");\n    chatFocusTarget && chatFocusTarget.focus();\n  });\n\n  scene.addEventListener(\"tips_changed\", e => {\n    remountUI({ activeTips: e.detail });\n  });\n\n  scene.addEventListener(\"leave_room_requested\", () => {\n    scene.exitVR();\n    entryManager.exitScene(\"left\");\n    remountUI({ roomUnavailableReason: \"left\" });\n  });\n\n  scene.addEventListener(\"camera_toggled\", () => remountUI({}));\n\n  scene.addEventListener(\"camera_removed\", () => remountUI({}));\n\n  scene.addEventListener(\"hub_closed\", () => {\n    scene.exitVR();\n    entryManager.exitScene(\"closed\");\n    remountUI({ roomUnavailableReason: \"closed\" });\n  });\n\n  scene.addEventListener(\"action_camera_recording_started\", () => hubChannel.beginRecording());\n  scene.addEventListener(\"action_camera_recording_ended\", () => hubChannel.endRecording());\n\n  const platformUnsupportedReason = getPlatformUnsupportedReason();\n\n  if (platformUnsupportedReason) {\n    remountUI({ platformUnsupportedReason });\n    entryManager.exitScene();\n    return;\n  }\n\n  if (qs.get(\"required_version\") && process.env.BUILD_VERSION) {\n    const buildNumber = process.env.BUILD_VERSION.split(\" \", 1)[0]; // e.g. \"123 (abcd5678)\"\n\n    if (qs.get(\"required_version\") !== buildNumber) {\n      remountUI({ roomUnavailableReason: \"version_mismatch\" });\n      setTimeout(() => document.location.reload(), 5000);\n      entryManager.exitScene();\n      return;\n    }\n  }\n\n  getReticulumMeta().then(reticulumMeta => {\n    console.log(`Reticulum @ ${reticulumMeta.phx_host}: v${reticulumMeta.version} on ${reticulumMeta.pool}`);\n\n    if (\n      qs.get(\"required_ret_version\") &&\n      (qs.get(\"required_ret_version\") !== reticulumMeta.version || qs.get(\"required_ret_pool\") !== reticulumMeta.pool)\n    ) {\n      remountUI({ roomUnavailableReason: \"version_mismatch\" });\n      setTimeout(() => document.location.reload(), 5000);\n      entryManager.exitScene();\n      return;\n    }\n  });\n\n  if (isMobileVR) {\n    remountUI({ availableVREntryTypes, forcedVREntryType: \"vr\" });\n\n    if (/Oculus/.test(navigator.userAgent)) {\n      // HACK - The polyfill reports Cardboard as the primary VR display on startup out ahead of Oculus Go on Oculus Browser 5.5.0 beta. This display is cached by A-Frame,\n      // so we need to resolve that and get the real VRDisplay before entering as well.\n      const displays = await navigator.getVRDisplays();\n      const vrDisplay = displays.length && displays[0];\n      AFRAME.utils.device.getVRDisplay = () => vrDisplay;\n    }\n  } else {\n    const hasVREntryDevice =\n      availableVREntryTypes.cardboard !== VR_DEVICE_AVAILABILITY.no ||\n      availableVREntryTypes.generic !== VR_DEVICE_AVAILABILITY.no ||\n      availableVREntryTypes.daydream !== VR_DEVICE_AVAILABILITY.no;\n\n    remountUI({ availableVREntryTypes, forcedVREntryType: qsVREntryType || (!hasVREntryDevice ? \"2d\" : null) });\n  }\n\n  const environmentScene = document.querySelector(\"#environment-scene\");\n\n  const onFirstEnvironmentLoad = () => {\n    if (!scene.is(\"entered\")) {\n      setupLobbyCamera();\n    }\n\n    // Replace renderer with a noop renderer to reduce bot resource usage.\n    if (isBotMode) {\n      runBotMode(scene, entryManager);\n    }\n\n    environmentScene.removeEventListener(\"model-loaded\", onFirstEnvironmentLoad);\n  };\n\n  environmentScene.addEventListener(\"model-loaded\", onFirstEnvironmentLoad);\n\n  environmentScene.addEventListener(\"model-loaded\", () => {\n    // This will be run every time the environment is changed (including the first load.)\n    remountUI({ environmentSceneLoaded: true });\n    scene.emit(\"environment-scene-loaded\");\n\n    // Re-bind the teleporter controls collision meshes in case the scene changed.\n    document.querySelectorAll(\"a-entity[teleporter]\").forEach(x => x.components[\"teleporter\"].queryCollisionEntities());\n\n    for (const modelEl of environmentScene.children) {\n      addAnimationComponents(modelEl);\n    }\n  });\n\n  const socket = await connectToReticulum(isDebug);\n\n  socket.onClose(e => {\n    // We don't currently have an easy way to distinguish between being kicked (server closes socket)\n    // and a variety of other network issues that seem to produce the 1000 closure code, but the\n    // latter are probably more common. Either way, we just tell the user they got disconnected.\n    const NORMAL_CLOSURE = 1000;\n    if (e.code === NORMAL_CLOSURE) {\n      entryManager.exitScene();\n      remountUI({ roomUnavailableReason: \"disconnected\" });\n    }\n  });\n\n  let retDeployReconnectInterval;\n  const retReconnectMaxDelayMs = 15000;\n\n  // Reticulum global channel\n  let retPhxChannel = socket.channel(`ret`, { hub_id: hubId });\n  retPhxChannel\n    .join()\n    .receive(\"ok\", async data => subscriptions.setVapidPublicKey(data.vapid_public_key))\n    .receive(\"error\", res => {\n      subscriptions.setVapidPublicKey(null);\n      console.error(res);\n    });\n\n  const pushSubscriptionEndpoint = await subscriptions.getCurrentEndpoint();\n\n  const oauthFlowPermsToken = Cookies.get(OAUTH_FLOW_PERMS_TOKEN_KEY);\n\n  if (oauthFlowPermsToken) {\n    Cookies.remove(OAUTH_FLOW_PERMS_TOKEN_KEY);\n  }\n\n  const createHubChannelParams = permsToken => {\n    const params = {\n      profile: store.state.profile,\n      push_subscription_endpoint: pushSubscriptionEndpoint,\n      auth_token: null,\n      perms_token: null,\n      context: {\n        mobile: isMobile || isMobileVR,\n        hmd: availableVREntryTypes.isInHMD,\n        embed: isEmbed\n      }\n    };\n\n    if (permsToken) {\n      params.perms_token = permsToken;\n    }\n\n    const { token } = store.state.credentials;\n    if (token) {\n      console.log(`Logged into account ${store.credentialsAccountId}`);\n      params.auth_token = token;\n    }\n\n    return params;\n  };\n\n  const migrateToNewReticulumServer = async deployNotification => {\n    // On Reticulum deploys, reconnect after a random delay until pool + version match deployed version/pool\n    console.log(`Reticulum deploy detected v${deployNotification.ret_version} on ${deployNotification.ret_pool}`);\n    clearInterval(retDeployReconnectInterval);\n\n    setTimeout(() => {\n      const tryReconnect = async () => {\n        invalidateReticulumMeta();\n        const reticulumMeta = await getReticulumMeta();\n\n        if (\n          reticulumMeta.pool === deployNotification.ret_pool &&\n          reticulumMeta.version === deployNotification.ret_version\n        ) {\n          console.log(\"Reticulum reconnecting.\");\n          clearInterval(retDeployReconnectInterval);\n          const oldSocket = retPhxChannel.socket;\n          const socket = await connectToReticulum(isDebug, oldSocket.params());\n          retPhxChannel = await migrateChannelToSocket(retPhxChannel, socket);\n          await hubChannel.migrateToSocket(socket, createHubChannelParams());\n          authChannel.setSocket(socket);\n          linkChannel.setSocket(socket);\n\n          // Disconnect old socket after a delay to ensure this user is always registered in presence.\n          setTimeout(() => {\n            console.log(\"Reconnection complete. Disconnecting old reticulum socket.\");\n            oldSocket.teardown();\n          }, 10000);\n        }\n      };\n\n      retDeployReconnectInterval = setInterval(tryReconnect, 5000);\n      tryReconnect();\n    }, Math.floor(Math.random() * retReconnectMaxDelayMs));\n  };\n\n  retPhxChannel.on(\"notice\", async data => {\n    // On Reticulum deploys, reconnect after a random delay until pool + version match deployed version/pool\n    if (data.event === \"ret-deploy\") {\n      await migrateToNewReticulumServer(data);\n    }\n  });\n\n  const hubPhxChannel = socket.channel(`hub:${hubId}`, createHubChannelParams(oauthFlowPermsToken));\n\n  const presenceLogEntries = [];\n  const addToPresenceLog = entry => {\n    entry.key = Date.now().toString();\n\n    presenceLogEntries.push(entry);\n    remountUI({ presenceLogEntries });\n    if (entry.type === \"chat\") {\n      scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CHAT_MESSAGE);\n    }\n\n    // Fade out and then remove\n    setTimeout(() => {\n      entry.expired = true;\n      remountUI({ presenceLogEntries });\n\n      setTimeout(() => {\n        presenceLogEntries.splice(presenceLogEntries.indexOf(entry), 1);\n        remountUI({ presenceLogEntries });\n      }, 5000);\n    }, 20000);\n  };\n\n  const messageDispatch = new MessageDispatch(\n    scene,\n    entryManager,\n    hubChannel,\n    addToPresenceLog,\n    remountUI,\n    mediaSearchStore\n  );\n\n  let isInitialJoin = true;\n\n  hubChannel.setPhoenixChannel(hubPhxChannel);\n\n  hubPhxChannel\n    .join()\n    .receive(\"ok\", async data => {\n      socket.params().session_id = data.session_id;\n      socket.params().session_token = data.session_token;\n\n      const vrHudPresenceCount = document.querySelector(\"#hud-presence-count\");\n\n      if (isInitialJoin) {\n        store.addEventListener(\"profilechanged\", hubChannel.sendProfileUpdate.bind(hubChannel));\n        hubChannel.presence.onSync(() => {\n          const presence = hubChannel.presence;\n\n          remountUI({\n            sessionId: socket.params().session_id,\n            presences: presence.state\n          });\n\n          const occupantCount = Object.entries(presence.state).length;\n          vrHudPresenceCount.setAttribute(\"text\", \"value\", occupantCount.toString());\n\n          if (occupantCount > 1) {\n            scene.addState(\"copresent\");\n          } else {\n            scene.removeState(\"copresent\");\n          }\n\n          // HACK - Set a flag on the presence object indicating if the initial sync has completed,\n          // which is used to determine if we should fire join/leave messages into the presence log.\n          presence.__hadInitialSync = true;\n\n          presence.onJoin((sessionId, current, info) => {\n            // Ignore presence join/leaves if this Presence has not yet had its initial sync (o/w the user\n            // will see join messages for every user.)\n            if (!hubChannel.presence.__hadInitialSync) return;\n\n            const meta = info.metas[info.metas.length - 1];\n            const occupantCount = Object.entries(hubChannel.presence.state).length;\n\n            if (occupantCount <= NOISY_OCCUPANT_COUNT) {\n              if (current) {\n                // Change to existing presence\n                const isSelf = sessionId === socket.params().session_id;\n                const currentMeta = current.metas[0];\n\n                if (\n                  !isSelf &&\n                  currentMeta.presence !== meta.presence &&\n                  meta.presence === \"room\" &&\n                  meta.profile.displayName\n                ) {\n                  addToPresenceLog({\n                    type: \"entered\",\n                    presence: meta.presence,\n                    name: meta.profile.displayName\n                  });\n                }\n\n                if (\n                  currentMeta.profile &&\n                  meta.profile &&\n                  currentMeta.profile.displayName !== meta.profile.displayName\n                ) {\n                  addToPresenceLog({\n                    type: \"display_name_changed\",\n                    oldName: currentMeta.profile.displayName,\n                    newName: meta.profile.displayName\n                  });\n                }\n              } else if (info.metas.length === 1) {\n                // New presence\n                const meta = info.metas[0];\n\n                if (meta.presence && meta.profile.displayName) {\n                  addToPresenceLog({\n                    type: \"join\",\n                    presence: meta.presence,\n                    name: meta.profile.displayName\n                  });\n                }\n              }\n            }\n\n            scene.emit(\"presence_updated\", {\n              sessionId,\n              profile: meta.profile,\n              roles: meta.roles,\n              streaming: meta.streaming,\n              recording: meta.recording\n            });\n          });\n\n          presence.onLeave((sessionId, current, info) => {\n            // Ignore presence join/leaves if this Presence has not yet had its initial sync\n            if (!hubChannel.presence.__hadInitialSync) return;\n\n            if (current && current.metas.length > 0) return;\n            const occupantCount = Object.entries(hubChannel.presence.state).length;\n            if (occupantCount > NOISY_OCCUPANT_COUNT) return;\n\n            const meta = info.metas[0];\n\n            if (meta.profile.displayName) {\n              addToPresenceLog({\n                type: \"leave\",\n                name: meta.profile.displayName\n              });\n            }\n          });\n        });\n      }\n\n      isInitialJoin = false;\n\n      const permsToken = oauthFlowPermsToken || data.perms_token;\n      hubChannel.setPermissionsFromToken(permsToken);\n\n      scene.addEventListener(\"adapter-ready\", ({ detail: adapter }) => {\n        adapter.setClientId(socket.params().session_id);\n        adapter.setJoinToken(data.perms_token);\n        hubChannel.addEventListener(\"permissions-refreshed\", e => adapter.setJoinToken(e.detail.permsToken));\n      });\n      subscriptions.setHubChannel(hubChannel);\n\n      subscriptions.setSubscribed(data.subscriptions.web_push);\n\n      remountUI({\n        hubIsBound: data.hub_requires_oauth,\n        initialIsFavorited: data.subscriptions.favorites,\n        initialIsSubscribed: subscriptions.isSubscribed()\n      });\n\n      await handleHubChannelJoined(entryManager, hubChannel, messageDispatch, data);\n    })\n    .receive(\"error\", res => {\n      if (res.reason === \"closed\") {\n        entryManager.exitScene();\n        remountUI({ roomUnavailableReason: \"closed\" });\n      } else if (res.reason === \"oauth_required\") {\n        entryManager.exitScene();\n        remountUI({ oauthInfo: res.oauth_info, showOAuthDialog: true });\n      } else if (res.reason === \"join_denied\") {\n        entryManager.exitScene();\n        remountUI({ roomUnavailableReason: \"denied\" });\n      }\n\n      console.error(res);\n    });\n\n  hubPhxChannel.on(\"naf\", data => {\n    if (!NAF.connection.adapter) return;\n    NAF.connection.adapter.onData(data, PHOENIX_RELIABLE_NAF);\n  });\n\n  hubPhxChannel.on(\"message\", ({ session_id, type, body, from }) => {\n    const getAuthor = () => {\n      const userInfo = hubChannel.presence.state[session_id];\n      if (from) {\n        return from;\n      } else if (userInfo) {\n        return userInfo.metas[0].profile.displayName;\n      } else {\n        return \"Mystery user\";\n      }\n    };\n\n    const name = getAuthor();\n    const maySpawn = scene.is(\"entered\");\n\n    const incomingMessage = { name, type, body, maySpawn, sessionId: session_id };\n\n    if (scene.is(\"vr-mode\")) {\n      createInWorldLogMessage(incomingMessage);\n    }\n\n    addToPresenceLog(incomingMessage);\n  });\n\n  hubPhxChannel.on(\"hub_refresh\", ({ session_id, hubs, stale_fields }) => {\n    const hub = hubs[0];\n    const userInfo = hubChannel.presence.state[session_id];\n\n    updateUIForHub(hub);\n\n    if (stale_fields.includes(\"scene\")) {\n      updateEnvironmentForHub(hub);\n\n      addToPresenceLog({\n        type: \"scene_changed\",\n        name: userInfo.metas[0].profile.displayName,\n        sceneName: hub.scene ? hub.scene.name : \"a custom URL\"\n      });\n    }\n\n    if (stale_fields.includes(\"member_permissions\")) {\n      hubChannel.fetchPermissions();\n    }\n\n    if (stale_fields.includes(\"name\")) {\n      const titleParts = document.title.split(\" | \"); // Assumes title has | trailing site name\n      titleParts[0] = hub.name;\n      document.title = titleParts.join(\" | \");\n\n      // Re-write the slug in the browser history\n      const pathParts = history.location.pathname.split(\"/\");\n      const oldSlug = pathParts[1];\n      const { search, state } = history.location;\n      const pathname = history.location.pathname.replace(`/${oldSlug}`, `/${hub.slug}`);\n\n      history.replace({ pathname, search, state });\n\n      addToPresenceLog({\n        type: \"hub_name_changed\",\n        name: userInfo.metas[0].profile.displayName,\n        hubName: hub.name\n      });\n    }\n\n    if (hub.entry_mode === \"deny\") {\n      scene.emit(\"hub_closed\");\n    }\n  });\n\n  hubPhxChannel.on(\"permissions_updated\", () => hubChannel.fetchPermissions());\n\n  hubPhxChannel.on(\"mute\", ({ session_id }) => {\n    if (session_id === NAF.clientId && !scene.is(\"muted\")) {\n      scene.emit(\"action_mute\");\n    }\n  });\n\n  authChannel.setSocket(socket);\n  linkChannel.setSocket(socket);\n});\n","// Stores a key in localStorage and registeres a listener for the same key being set (by another tab).\n// When detected, fire a \"concurrentload\" event.\nexport default function detectConcurrentLoad(instanceKey = \"global\") {\n  const key = `___concurrent_load_detector_${instanceKey}`;\n  localStorage.setItem(key, JSON.stringify({ started_at: new Date() }));\n  const onStorageEvent = e => {\n    if (e.key !== key) return;\n    window.dispatchEvent(new CustomEvent(\"concurrentload\"));\n    window.removeEventListener(\"storage\", onStorageEvent);\n  };\n  window.addEventListener(\"storage\", onStorageEvent);\n}\n","export default function patchThreeAllocations() {\n  const renderer = AFRAME.scenes[0].renderer;\n  const gl = renderer.context;\n\n  // These functions in three.js uses the arguments object, which allocates.\n  renderer.state.texImage2D = function(a, b, c, d, e, f, g, h, i) {\n    try {\n      if (g === undefined) {\n        gl.texImage2D(a, b, c, d, e, f);\n      } else {\n        gl.texImage2D(a, b, c, d, e, f, g, h, i);\n      }\n    } catch (error) {\n      console.error(\"THREE.WebGLState:\", error);\n    }\n  };\n\n  renderer.state.compressedTexImage2D = function(a, b, c, d, e, f, g, h, i, j) {\n    try {\n      if (h === undefined) {\n        gl.compressedTexImage2D(a, b, c, d, e, f, g);\n      } else if (i === undefined) {\n        gl.compressedTexImage2D(a, b, c, d, e, f, g, h);\n      } else if (j === undefined) {\n        gl.compressedTexImage2D(a, b, c, d, e, f, g, h, i);\n      } else {\n        gl.compressedTexImage2D(a, b, c, d, e, f, g, h, i, j);\n      }\n    } catch (error) {\n      console.error(\"THREE.WebGLState:\", error);\n    }\n  };\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nexport default class DialogContainer extends Component {\n  static propTypes = {\n    title: PropTypes.node,\n    children: PropTypes.node.isRequired,\n    onClose: PropTypes.func,\n    closable: PropTypes.bool,\n    wide: PropTypes.bool,\n    className: PropTypes.string,\n    allowOverflow: PropTypes.bool,\n    additionalClass: PropTypes.string\n  };\n\n  static defaultProps = {\n    closable: true\n  };\n\n  constructor(props) {\n    super(props);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onContainerClicked = this.onContainerClicked.bind(this);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.onKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.onKeyDown);\n  }\n\n  onKeyDown(e) {\n    if (this.props.closable && e.key === \"Escape\") {\n      this.props.onClose();\n    }\n  }\n\n  onContainerClicked = e => {\n    if (this.props.closable && e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return (\n      <div className={classNames(\"dialog-overlay\", this.props.className)}>\n        <div className=\"dialog\" onClick={this.onContainerClicked}>\n          <div className={`dialog__box ${this.props.wide ? \"dialog__wide\" : \"\"} `}>\n            <div\n              className={classNames(\n                \"dialog__box__contents\",\n                this.props.allowOverflow ? \"dialog__box__contents-overflow\" : null,\n                this.props.additionalClass\n              )}\n            >\n              {this.props.closable &&\n                this.props.onClose && (\n                  <WithHoverSound>\n                    <button className=\"dialog__box__contents__close\" onClick={() => this.props.onClose()}>\n                      <i>\n                        <FontAwesomeIcon icon={faTimes} />\n                      </i>\n                    </button>\n                  </WithHoverSound>\n                )}\n              {this.props.title && <div className=\"dialog__box__contents__title\">{this.props.title}</div>}\n              <div className=\"dialog__box__contents__body\">{this.props.children}</div>\n              <div className=\"dialog__box__contents__button-container\" />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","module.exports = __webpack_public_path__ + \"assets/images/warning_icon-739d2a2ea906737505bcbc2cb51123a8.png\";","/* global fetch THREE */\nimport URL_TICK from \"../assets/sfx/tick.mp3\";\nimport URL_TELEPORT_LOOP from \"../assets/sfx/teleport-loop.mp3\";\nimport URL_QUICK_TURN from \"../assets/sfx/quickTurn.mp3\";\nimport URL_TAP_MELLOW from \"../assets/sfx/tap_mellow.mp3\";\nimport URL_PEN_SPAWN from \"../assets/sfx/PenSpawn.mp3\";\nimport URL_PEN_DRAW from \"../assets/sfx/PenDraw1.mp3\";\nimport URL_CAMERA_SNAPSHOT from \"../assets/sfx/PicSnapHey.mp3\";\nimport URL_WELCOME from \"../assets/sfx/welcome.mp3\";\nimport URL_QUACK from \"../assets/sfx/quack.mp3\";\nimport URL_SPECIAL_QUACK from \"../assets/sfx/specialquack.mp3\";\nimport URL_POP from \"../assets/sfx/pop.mp3\";\nimport URL_FREEZE from \"../assets/sfx/Eb_blip.mp3\";\nimport URL_TACK from \"../assets/sfx/tack.mp3\";\nimport URL_MEDIA_LOADED from \"../assets/sfx/A_bendUp.mp3\";\nimport URL_MEDIA_LOADING from \"../assets/sfx/suspense.mp3\";\n\nlet soundEnum = 0;\nexport const SOUND_HOVER_OR_GRAB = soundEnum++;\nexport const SOUND_THAW = soundEnum++;\nexport const SOUND_PEN_STOP_DRAW = soundEnum++;\nexport const SOUND_PEN_UNDO_DRAW = soundEnum++;\nexport const SOUND_PEN_CHANGE_COLOR = soundEnum++;\nexport const SOUND_TOGGLE_MIC = soundEnum++;\nexport const SOUND_TELEPORT_START = soundEnum++;\nexport const SOUND_TELEPORT_END = soundEnum++;\nexport const SOUND_SNAP_ROTATE = soundEnum++;\nexport const SOUND_SPAWN_PEN = soundEnum++;\nexport const SOUND_PEN_START_DRAW = soundEnum++;\nexport const SOUND_CAMERA_TOOL_TOOK_SNAPSHOT = soundEnum++;\nexport const SOUND_ENTER_SCENE = soundEnum++;\nexport const SOUND_QUACK = soundEnum++;\nexport const SOUND_SPECIAL_QUACK = soundEnum++;\nexport const SOUND_CHAT_MESSAGE = soundEnum++;\nexport const SOUND_FREEZE = soundEnum++;\nexport const SOUND_PIN = soundEnum++;\nexport const SOUND_MEDIA_LOADING = soundEnum++;\nexport const SOUND_MEDIA_LOADED = soundEnum++;\nexport const SOUND_CAMERA_TOOL_COUNTDOWN = soundEnum++;\n\n// Safari doesn't support the promise form of decodeAudioData, so we polyfill it.\nfunction decodeAudioData(audioContext, arrayBuffer) {\n  return new Promise((resolve, reject) => {\n    audioContext.decodeAudioData(arrayBuffer, resolve, reject);\n  });\n}\n\nexport class SoundEffectsSystem {\n  constructor() {\n    this.pendingEffects = [];\n    this.audioContext = THREE.AudioContext.getContext();\n    const soundsAndUrls = [\n      [SOUND_HOVER_OR_GRAB, URL_TICK],\n      [SOUND_THAW, URL_TICK],\n      [SOUND_PEN_STOP_DRAW, URL_TICK],\n      [SOUND_PEN_UNDO_DRAW, URL_TICK],\n      [SOUND_PEN_CHANGE_COLOR, URL_TICK],\n      [SOUND_TOGGLE_MIC, URL_TICK],\n      [SOUND_CAMERA_TOOL_COUNTDOWN, URL_TICK],\n      [SOUND_TELEPORT_START, URL_TELEPORT_LOOP],\n      [SOUND_TELEPORT_END, URL_QUICK_TURN],\n      [SOUND_SNAP_ROTATE, URL_TAP_MELLOW],\n      [SOUND_SPAWN_PEN, URL_PEN_SPAWN],\n      [SOUND_PEN_START_DRAW, URL_PEN_DRAW],\n      [SOUND_CAMERA_TOOL_TOOK_SNAPSHOT, URL_CAMERA_SNAPSHOT],\n      [SOUND_ENTER_SCENE, URL_WELCOME],\n      [SOUND_QUACK, URL_QUACK],\n      [SOUND_SPECIAL_QUACK, URL_SPECIAL_QUACK],\n      [SOUND_CHAT_MESSAGE, URL_POP],\n      [SOUND_FREEZE, URL_FREEZE],\n      [SOUND_PIN, URL_TACK],\n      [SOUND_MEDIA_LOADING, URL_MEDIA_LOADING],\n      [SOUND_MEDIA_LOADED, URL_MEDIA_LOADED]\n    ];\n    const loading = new Map();\n    const load = url => {\n      let audioBufferPromise = loading.get(url);\n      if (!audioBufferPromise) {\n        audioBufferPromise = fetch(url)\n          .then(r => r.arrayBuffer())\n          .then(arrayBuffer => decodeAudioData(this.audioContext, arrayBuffer));\n        loading.set(url, audioBufferPromise);\n      }\n      return audioBufferPromise;\n    };\n    this.sounds = new Map();\n    soundsAndUrls.map(([sound, url]) => {\n      load(url).then(audioBuffer => {\n        this.sounds.set(sound, audioBuffer);\n      });\n    });\n  }\n\n  enqueueSound(sound, loop) {\n    const audioBuffer = this.sounds.get(sound);\n    if (!audioBuffer) return null;\n    // The nodes are very inexpensive to create, according to\n    // https://developer.mozilla.org/en-US/docs/Web/API/AudioBufferSourceNode\n    const source = this.audioContext.createBufferSource();\n    source.buffer = audioBuffer;\n    source.connect(this.audioContext.destination);\n    source.loop = loop;\n    this.pendingEffects.push(source);\n    return source;\n  }\n\n  playSoundOneShot(sound) {\n    return this.enqueueSound(sound, false);\n  }\n\n  playSoundLooped(sound) {\n    return this.enqueueSound(sound, true);\n  }\n\n  playSoundLoopedWithGain(sound) {\n    const audioBuffer = this.sounds.get(sound);\n    if (!audioBuffer) return null;\n\n    const source = this.audioContext.createBufferSource();\n    const gain = this.audioContext.createGain();\n    source.buffer = audioBuffer;\n    source.connect(gain);\n    gain.connect(this.audioContext.destination);\n    source.loop = true;\n    this.pendingEffects.push(source);\n    return { gain, source };\n  }\n\n  stopSoundNode(node) {\n    const index = this.pendingEffects.indexOf(node);\n    if (index !== -1) {\n      this.pendingEffects.splice(index, 1);\n    } else {\n      node.stop();\n    }\n  }\n\n  tick() {\n    for (let i = 0; i < this.pendingEffects.length; i++) {\n      this.pendingEffects[i].start();\n    }\n    this.pendingEffects.length = 0;\n  }\n}\n","module.exports = __webpack_public_path__ + \"assets/images/warning_icon@2x-706e4a4db33f9456bac320e956b4120d.png\";","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport \"three/examples/js/controls/OrbitControls\";\n\nimport { createDefaultEnvironmentMap } from \"../components/environment-map\";\nimport { loadGLTF } from \"../components/gltf-model-plus\";\nimport { disposeNode } from \"../utils/three-utils\";\nimport { createImageBitmap, disposeImageBitmap } from \"../utils/image-bitmap-utils\";\nimport styles from \"../assets/stylesheets/avatar-preview.scss\";\n\nconst TEXTURE_PROPS = {\n  base_map: [\"map\"],\n  emissive_map: [\"emissiveMap\"],\n  normal_map: [\"normalMap\"],\n  orm_map: [\"aoMap\", \"roughnessMap\", \"metalnessMap\"]\n};\n\nconst ALL_MAPS = Object.keys(TEXTURE_PROPS);\n\n// This should match our aframe renderer=\"antialias: true; colorManagement: true; sortObjects: true;\n// physicallyCorrectLights: true; webgl2: true; multiview: false;\"\nfunction createRenderer(canvas, alpha = false, useDevicePixelRatio = true) {\n  const context = canvas.getContext(\"webgl2\", {\n    alpha,\n    depth: true,\n    antialias: true,\n    premultipliedAlpha: true,\n    preserveDrawingBuffer: false,\n    powerPreference: \"default\"\n  });\n\n  const renderer = new THREE.WebGLRenderer({ alpha, canvas, context });\n  renderer.gammaOutput = true;\n  renderer.gammaFactor = 2.2;\n  renderer.physicallyCorrectLights = true;\n  if (useDevicePixelRatio) {\n    renderer.setPixelRatio(window.devicePixelRatio);\n  }\n  return renderer;\n}\n\nconst createImageBitmapFromURL = url =>\n  fetch(url)\n    .then(r => r.blob())\n    .then(createImageBitmap);\n\nconst ORBIT_ANGLE = new THREE.Euler(-30 * THREE.Math.DEG2RAD, 30 * THREE.Math.DEG2RAD, 0);\nconst DEFAULT_MARGIN = 1;\n\nfunction fitBoxInFrustum(camera, box, center, margin = DEFAULT_MARGIN) {\n  const halfYExtents = Math.max(box.max.y - center.y, center.y - box.min.y);\n  const halfVertFOV = THREE.Math.degToRad(camera.fov / 2);\n  camera.position.set(0, 0, (halfYExtents / Math.tan(halfVertFOV) + box.max.z) * margin);\n  camera.position.applyEuler(ORBIT_ANGLE);\n  camera.position.add(center);\n  camera.lookAt(center);\n}\n\nclass AvatarPreview extends Component {\n  static propTypes = {\n    avatarGltfUrl: PropTypes.string,\n    className: PropTypes.string\n  };\n  constructor(props) {\n    super(props);\n    this.state = { loading: true, error: null };\n    this.avatar = null;\n    this.imageBitmaps = {};\n  }\n\n  componentDidMount = () => {\n    this.scene = new THREE.Scene();\n\n    this.camera = new THREE.PerspectiveCamera(55, this.canvas.clientWidth / this.canvas.clientHeight, 0.1, 1000);\n    this.controls = new THREE.OrbitControls(this.camera, this.canvas);\n    this.controls.enablePan = false;\n\n    const light = new THREE.DirectionalLight(0xf7f6ef, 1);\n    light.position.set(0, 10, 10);\n    this.scene.add(light);\n    this.scene.add(new THREE.HemisphereLight(0xb1e3ff, 0xb1e3ff, 2.5));\n\n    this.camera.position.set(-0.2, 0.5, 0.5);\n    this.camera.matrixAutoUpdate = true;\n\n    this.controls.target.set(0, 0.45, 0);\n    this.controls.update();\n\n    if (this.props.avatarGltfUrl) {\n      this.loadPreviewAvatar(this.props.avatarGltfUrl).then(this.setAvatar);\n    }\n\n    const clock = new THREE.Clock();\n\n    this.snapshotCanvas = document.createElement(\"canvas\");\n    this.snapshotCanvas.width = 720;\n    this.snapshotCanvas.height = 1280;\n    this.snapshotCamera = new THREE.PerspectiveCamera(55, 720 / 1280, 0.1, 1000);\n    this.snapshotCamera.matrixAutoUpdate = true;\n    this.snapshotRenderer = createRenderer(this.snapshotCanvas, true, false);\n    this.snapshotRenderer.setClearAlpha(0);\n\n    this.previewRenderer = createRenderer(this.canvas);\n    this.previewRenderer.setClearColor(0xeaeaea);\n    this.previewRenderer.setAnimationLoop(() => {\n      const dt = clock.getDelta();\n      this.mixer && this.mixer.update(dt);\n      this.previewRenderer.render(this.scene, this.camera);\n    });\n    window.addEventListener(\"resize\", this.resize);\n    this.resize();\n  };\n\n  resize = () => {\n    const width = this.canvas.parentElement.offsetWidth;\n    const height = this.canvas.parentElement.offsetHeight;\n    this.previewRenderer.setSize(width, height);\n    this.camera.aspect = width / height;\n    this.camera.updateProjectionMatrix();\n  };\n\n  setAvatar = avatar => {\n    if (!avatar) return;\n    this.avatar = avatar;\n    this.scene.add(avatar);\n    this.resetCamera();\n    this.setState({ error: null, loading: false });\n  };\n\n  resetCamera = (() => {\n    const box = new THREE.Box3();\n    const center = new THREE.Vector3();\n    return () => {\n      box.setFromObject(this.avatar);\n      box.getCenter(center);\n\n      // Shift the center vertically in order to frame the avatar nicely.\n      center.y = (box.max.y - box.min.y) * 0.6 + box.min.y;\n\n      fitBoxInFrustum(this.camera, box, center);\n      fitBoxInFrustum(this.snapshotCamera, box, center, 0.7);\n\n      this.controls.target.copy(center);\n      this.controls.update();\n    };\n  })();\n\n  componentWillUnmount = () => {\n    // Gotta be particularly careful about disposing things here since we will likely create many avatar\n    // previews during a session and Chrome will eventually discard the oldest webgl context if we leak\n    // contexts by holding on to them directly or indirectly.\n\n    this.scene && this.scene.traverse(disposeNode);\n    if (this.previewRenderer) {\n      this.previewRenderer.dispose();\n      this.previewRenderer.context = null;\n    }\n    if (this.snapshotRenderer) {\n      this.snapshotRenderer.dispose();\n      this.snapshotRenderer.context = null;\n    }\n    if (this.controls) {\n      this.controls.dispose();\n      this.controls.domElement = null;\n    }\n\n    Object.values(this.imageBitmaps).forEach(img => disposeImageBitmap(img));\n    window.removeEventListener(\"resize\", this.resize);\n  };\n\n  componentDidUpdate = async oldProps => {\n    if (oldProps.avatarGltfUrl !== this.props.avatarGltfUrl) {\n      if (this.avatar) {\n        this.scene.remove(this.avatar);\n        this.avatar = null;\n      }\n      if (this.props.avatarGltfUrl) {\n        this.setState({ error: null, loading: true });\n        await this.loadPreviewAvatar(this.props.avatarGltfUrl).then(this.setAvatar);\n      }\n    }\n    this.applyMaps(oldProps, this.props);\n  };\n\n  applyMaps(oldProps, newProps) {\n    return Promise.all(\n      ALL_MAPS.map(mapName => {\n        const applyMap = this.applyMapToPreview.bind(this, mapName);\n        if (oldProps[mapName] != newProps[mapName]) {\n          if (newProps[mapName] instanceof File) {\n            return createImageBitmap(newProps[mapName]).then(applyMap);\n          } else if (newProps[mapName]) {\n            return createImageBitmapFromURL(newProps[mapName]).then(applyMap);\n          } else {\n            return this.revertMap(mapName);\n          }\n        }\n      })\n    );\n  }\n\n  loadPreviewAvatar = async avatarGltfUrl => {\n    let gltf;\n    try {\n      gltf = await loadGLTF(avatarGltfUrl, \"model/gltf\");\n    } catch (e) {\n      this.setState({ loading: false, error: true });\n      return;\n    }\n\n    // On the backend we look for a material called Bot_PBS, here we are looking for a mesh called Avatar.\n    // When we \"officially\" support uploading custom GLTFs we need to decide what we are going to key things on\n    this.previewMesh =\n      gltf.scene.getObjectByName(\"AvatarMesh\") ||\n      gltf.scene.getObjectByName(\"Avatar\") ||\n      gltf.scene.getObjectByName(\"Bot_Skinned\") ||\n      gltf.scene;\n\n    const idleAnimation = gltf.animations && gltf.animations.find(({ name }) => name === \"idle_eyes\");\n    if (idleAnimation) {\n      this.mixer = new THREE.AnimationMixer(this.previewMesh);\n      const action = this.mixer.clipAction(idleAnimation);\n      action.enabled = true;\n      action.setLoop(THREE.LoopRepeat, Infinity).play();\n      this.idleAnimationAction = action;\n    }\n\n    const { material } = this.previewMesh;\n    if (material) {\n      // We delete onUpdate here to opt out of the auto texture cleanup after GPU upload.\n      const getImage = p => delete material[p].onUpdate && material[p].image;\n      this.originalMaps = {\n        base_map: TEXTURE_PROPS[\"base_map\"].map(getImage),\n        emissive_map: TEXTURE_PROPS[\"emissive_map\"].map(getImage),\n        normal_map: TEXTURE_PROPS[\"normal_map\"].map(getImage),\n        orm_map: TEXTURE_PROPS[\"orm_map\"].map(getImage)\n      };\n\n      await Promise.all([\n        this.applyMaps({}, this.props), // Apply initial maps\n        createDefaultEnvironmentMap().then(t => {\n          this.previewMesh.material.envMap = t;\n          this.previewMesh.material.needsUpdate = true;\n        })\n      ]);\n    } else {\n      this.originalMaps = {};\n    }\n\n    return gltf.scene;\n  };\n\n  applyMapToPreview = (name, image) => {\n    if (this.imageBitmaps[name]) {\n      disposeImageBitmap(this.imageBitmaps[name]);\n    }\n    this.imageBitmaps[name] = image;\n    TEXTURE_PROPS[name].forEach(prop => {\n      const texture = this.previewMesh.material[prop];\n      texture.image = image;\n      texture.needsUpdate = true;\n    });\n  };\n\n  revertMap = name => {\n    if (this.imageBitmaps[name]) {\n      disposeImageBitmap(this.imageBitmaps[name]);\n    }\n    delete this.imageBitmaps[name];\n    this.originalMaps[name].forEach((bm, i) => {\n      const texture = this.previewMesh.material[TEXTURE_PROPS[name][i]];\n      texture.image = bm;\n      texture.needsUpdate = true;\n    });\n  };\n\n  snapshot = () => {\n    return new Promise(resolve => {\n      if (this.idleAnimationAction) this.idleAnimationAction.stop();\n      this.snapshotRenderer.render(this.scene, this.snapshotCamera);\n      this.snapshotCanvas.toBlob(blob => {\n        if (this.idleAnimationAction) this.idleAnimationAction.play();\n        resolve(blob);\n      });\n    });\n  };\n\n  render() {\n    return (\n      <div className={classNames(styles.preview, this.props.className)}>\n        {this.state.loading &&\n          !this.state.error && (\n            <div className=\"loader\">\n              <div className=\"loader-center\" />\n            </div>\n          )}\n        {this.state.error &&\n          !this.state.loading && (\n            <div className=\"error\">\n              <img\n                src=\"../assets/images/warning_icon.png\"\n                srcSet=\"../assets/images/warning_icon@2x.png 2x\"\n                className=\"error-icon\"\n              />\n              <FormattedMessage id=\"avatar-preview.loading-failed\" />\n            </div>\n          )}\n        <canvas ref={c => (this.canvas = c)} />\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(AvatarPreview, { withRef: true });\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport styles from \"../assets/stylesheets/sign-in-dialog.scss\";\nimport DialogContainer from \"./dialog-container\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\n\nexport default class SignInDialog extends Component {\n  static propTypes = {\n    authStarted: PropTypes.bool,\n    authComplete: PropTypes.bool,\n    onSignIn: PropTypes.func,\n    onContinue: PropTypes.func,\n    message: PropTypes.string,\n    continueText: PropTypes.string\n  };\n\n  state = {\n    email: \"\"\n  };\n\n  onSubmit = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onSignIn(this.state.email);\n  };\n\n  render() {\n    let contents;\n    if (this.props.authStarted) {\n      contents = (\n        <p>\n          <FormattedMessage className=\"preformatted\" id=\"sign-in.auth-started\" />\n        </p>\n      );\n    } else if (this.props.authComplete) {\n      contents = (\n        <div className={styles.signInComplete}>\n          <p>{this.props.message}</p>\n          <button onClick={this.props.onContinue} className={styles.continueButton}>\n            {this.props.continueText}\n          </button>\n        </div>\n      );\n    } else {\n      contents = (\n        <form onSubmit={this.onSubmit} className={styles.signInForm}>\n          <span>{this.props.message}</span>\n          <input\n            name=\"email\"\n            type=\"email\"\n            required\n            placeholder=\"Your email address\"\n            value={this.state.email}\n            onFocus={e => handleTextFieldFocus(e.target)}\n            onBlur={() => handleTextFieldBlur()}\n            onChange={e => this.setState({ email: e.target.value })}\n            className={styles.emailField}\n          />\n          <p className={styles.terms}>\n            By proceeding, you agree to the{\" \"}\n            <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/mozilla/hubs/blob/master/TERMS.md\">\n              terms of use\n            </a>{\" \"}\n            and{\" \"}\n            <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\">\n              privacy notice\n            </a>.\n          </p>\n          <button type=\"submit\" className={styles.nextButton}>\n            next\n          </button>\n        </form>\n      );\n    }\n\n    return (\n      <DialogContainer title=\"Sign In\" {...this.props}>\n        {contents}\n      </DialogContainer>\n    );\n  }\n}\n","// removed by extract-text-webpack-plugin\nmodule.exports = {\"media-browser\":\"media-browser__media-browser__y0Hsu\",\"mediaBrowser\":\"media-browser__media-browser__y0Hsu\",\"facets\":\"media-browser__facets__1Yz65\",\"facet\":\"media-browser__facet__2uP6U\",\"body\":\"media-browser__body__j6Tv2\",\"pager\":\"media-browser__pager__RKx5O\",\"header-center\":\"media-browser__header-center__2D9CW\",\"headerCenter\":\"media-browser__header-center__2D9CW\",\"search\":\"media-browser__search__3gQ84\",\"engine-attribution\":\"media-browser__engine-attribution__2P2aD\",\"engineAttribution\":\"media-browser__engine-attribution__2P2aD\",\"engine-attribution-contents\":\"media-browser__engine-attribution-contents__gCdfr\",\"engineAttributionContents\":\"media-browser__engine-attribution-contents__gCdfr\",\"favorites-header\":\"media-browser__favorites-header__1XzZx\",\"favoritesHeader\":\"media-browser__favorites-header__1XzZx\",\"box\":\"media-browser__box__1KHYi\",\"header\":\"media-browser__header__zqZ09\",\"no-search\":\"media-browser__no-search__3N90H\",\"noSearch\":\"media-browser__no-search__3N90H\",\"nav\":\"media-browser__nav__9J5If\",\"nav-right-pad\":\"media-browser__nav-right-pad__1qH0B\",\"navRightPad\":\"media-browser__nav-right-pad__1qH0B\",\"nav-source\":\"media-browser__nav-source__o6NI6\",\"navSource\":\"media-browser__nav-source__o6NI6\",\"nav-source-selected\":\"media-browser__nav-source-selected__2osjH\",\"navSourceSelected\":\"media-browser__nav-source-selected__2osjH\",\"nav-scroll-arrow\":\"media-browser__nav-scroll-arrow__2Nikk\",\"navScrollArrow\":\"media-browser__nav-scroll-arrow__2Nikk\",\"tiles\":\"media-browser__tiles__1BYEY\",\"tile\":\"media-browser__tile__2lzHU\",\"info\":\"media-browser__info__2c8Zs\",\"name\":\"media-browser__name__RFiE4\",\"attribution\":\"media-browser__attribution__3glgj\",\"creator\":\"media-browser__creator__3LDPh\",\"publisher\":\"media-browser__publisher__mTzsX\",\"last-joined\":\"media-browser__last-joined__2DVWf\",\"lastJoined\":\"media-browser__last-joined__2DVWf\",\"tile-link\":\"media-browser__tile-link__IXyUO\",\"tileLink\":\"media-browser__tile-link__IXyUO\",\"tile-content\":\"media-browser__tile-content__1QYSP\",\"tileContent\":\"media-browser__tile-content__1QYSP\",\"avatar-tile\":\"media-browser__avatar-tile__qNo2r\",\"avatarTile\":\"media-browser__avatar-tile__qNo2r\",\"edit-avatar\":\"media-browser__edit-avatar__2HBfV\",\"editAvatar\":\"media-browser__edit-avatar__2HBfV\",\"create-tile\":\"media-browser__create-tile__RL9vr\",\"createTile\":\"media-browser__create-tile__RL9vr\",\"tiles-variable\":\"media-browser__tiles-variable__1ZNxg\",\"tilesVariable\":\"media-browser__tiles-variable__1ZNxg\",\"page-number\":\"media-browser__page-number__OTpSH\",\"pageNumber\":\"media-browser__page-number__OTpSH\",\"pager-button-disabled\":\"media-browser__pager-button-disabled__ytlSN\",\"pagerButtonDisabled\":\"media-browser__pager-button-disabled__ytlSN\",\"header-left\":\"media-browser__header-left__1ObQh\",\"headerLeft\":\"media-browser__header-left__1ObQh\",\"header-right\":\"media-browser__header-right__3k3JZ\",\"headerRight\":\"media-browser__header-right__3k3JZ\",\"create-button\":\"media-browser__create-button__30hMV\",\"createButton\":\"media-browser__create-button__30hMV\",\"create-link\":\"media-browser__create-link__28Bpj\",\"createLink\":\"media-browser__create-link__28Bpj\",\"empty-string\":\"media-browser__empty-string__3r0tc\",\"emptyString\":\"media-browser__empty-string__3r0tc\",\"media-browser-inline\":\"media-browser__media-browser-inline__3AgWD\",\"mediaBrowserInline\":\"media-browser__media-browser-inline__3AgWD\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"email-field\":\"sign-in-dialog__email-field__g3xRW\",\"emailField\":\"sign-in-dialog__email-field__g3xRW\",\"next-button\":\"sign-in-dialog__next-button__2pGtq\",\"nextButton\":\"sign-in-dialog__next-button__2pGtq\",\"continue-button\":\"sign-in-dialog__continue-button__kFN6Z\",\"continueButton\":\"sign-in-dialog__continue-button__kFN6Z\",\"sign-in-form\":\"sign-in-dialog__sign-in-form__3Muog\",\"signInForm\":\"sign-in-dialog__sign-in-form__3Muog\",\"sign-in-complete\":\"sign-in-dialog__sign-in-complete__3JMkv\",\"signInComplete\":\"sign-in-dialog__sign-in-complete__3JMkv\",\"terms\":\"sign-in-dialog__terms__3TT6i\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"ui\":\"hub__ui__3UYRO\",\"ui-dialog\":\"hub__ui-dialog__vlyfc\",\"uiDialog\":\"hub__ui-dialog__vlyfc\",\"ui-interactive\":\"hub__ui-interactive__3bdyc\",\"uiInteractive\":\"hub__ui-interactive__3bdyc\",\"presence-info\":\"hub__presence-info__dqWyo\",\"presenceInfo\":\"hub__presence-info__dqWyo\",\"corner-button\":\"hub__corner-button__2KphD\",\"cornerButton\":\"hub__corner-button__2KphD\",\"profile-entry\":\"hub__profile-entry__1RY0R\",\"profileEntry\":\"hub__profile-entry__1RY0R\",\"form-submit\":\"hub__form-submit__12yem\",\"formSubmit\":\"hub__form-submit__12yem\",\"nag-corner-button\":\"hub__nag-corner-button__lNoyE\",\"nagCornerButton\":\"hub__nag-corner-button__lNoyE\",\"choose-scene-button\":\"hub__choose-scene-button__5Y0Q_\",\"chooseSceneButton\":\"hub__choose-scene-button__5Y0Q_\",\"choose-avatar\":\"hub__choose-avatar__22JJm\",\"chooseAvatar\":\"hub__choose-avatar__22JJm\",\"entry-button-secondary\":\"hub__entry-button-secondary__2ui-g\",\"entryButtonSecondary\":\"hub__entry-button-secondary__2ui-g\",\"entry-panel\":\"hub__entry-panel__cCmIv\",\"entryPanel\":\"hub__entry-panel__cCmIv\",\"button-container\":\"hub__button-container__38FOc\",\"buttonContainer\":\"hub__button-container__38FOc\",\"secondary-action-button\":\"hub__secondary-action-button__2KoCD\",\"secondaryActionButton\":\"hub__secondary-action-button__2KoCD\",\"leave-button\":\"hub__leave-button__1YK4o\",\"leaveButton\":\"hub__leave-button__1YK4o\",\"interstitial\":\"hub__interstitial__3WXbJ\",\"entry-button\":\"hub__entry-button__1e9jM\",\"entryButton\":\"hub__entry-button__1e9jM\",\"action-button\":\"hub__action-button__3zqlu\",\"actionButton\":\"hub__action-button__3zqlu\",\"collapse-button\":\"hub__collapse-button__3N-6b\",\"collapseButton\":\"hub__collapse-button__3N-6b\",\"favorite-button\":\"hub__favorite-button__1Qgbp\",\"favoriteButton\":\"hub__favorite-button__1Qgbp\",\"back\":\"hub__back__3AZh2\",\"form-field-text\":\"hub__form-field-text__tR1Lt\",\"formFieldText\":\"hub__form-field-text__tR1Lt\",\"lobby-label\":\"hub__lobby-label__2ktmo\",\"lobbyLabel\":\"hub__lobby-label__2ktmo\",\"label\":\"hub__label__1kjp1\",\"title\":\"hub__title__ezGEu\",\"name\":\"hub__name__2umw1\",\"rename-button\":\"hub__rename-button__h-4K7\",\"renameButton\":\"hub__rename-button__h-4K7\",\"center\":\"hub__center__1Mvfu\",\"wide-button\":\"hub__wide-button__1yqDc\",\"wideButton\":\"hub__wide-button__1yqDc\",\"screen-sharing\":\"hub__screen-sharing__2VF91\",\"screenSharing\":\"hub__screen-sharing__2VF91\",\"checkbox\":\"hub__checkbox__32dyv\",\"invite-tip\":\"hub__invite-tip__9enoe\",\"inviteTip\":\"hub__invite-tip__9enoe\",\"loading-text\":\"hub__loading-text__1WDud\",\"loadingText\":\"hub__loading-text__1WDud\",\"streaming-tip\":\"hub__streaming-tip__1LnId\",\"streamingTip\":\"hub__streaming-tip__1LnId\",\"streaming-tip-attach-point\":\"hub__streaming-tip-attach-point__1oCgh\",\"streamingTipAttachPoint\":\"hub__streaming-tip-attach-point__1oCgh\",\"streaming-tip-close\":\"hub__streaming-tip-close__E6fwS\",\"streamingTipClose\":\"hub__streaming-tip-close__E6fwS\",\"streaming-tip-message\":\"hub__streaming-tip-message__XcScW\",\"streamingTipMessage\":\"hub__streaming-tip-message__XcScW\",\"ui-dialog-box-contents\":\"hub__ui-dialog-box-contents__PZ5qP\",\"uiDialogBoxContents\":\"hub__ui-dialog-box-contents__PZ5qP\",\"backgrounded\":\"hub__backgrounded__30IfD\",\"in-room-favorite-button\":\"hub__in-room-favorite-button__2T-zs\",\"inRoomFavoriteButton\":\"hub__in-room-favorite-button__2T-zs\",\"occupant-count\":\"hub__occupant-count__3eAEj\",\"occupantCount\":\"hub__occupant-count__3eAEj\",\"presence-info-selected\":\"hub__presence-info-selected__FRBSA\",\"presenceInfoSelected\":\"hub__presence-info-selected__FRBSA\",\"camera-mode-exit-button\":\"hub__camera-mode-exit-button__BqKKt\",\"cameraModeExitButton\":\"hub__camera-mode-exit-button__BqKKt\",\"corner-button-selected\":\"hub__corner-button-selected__Cqa93\",\"cornerButtonSelected\":\"hub__corner-button-selected__Cqa93\",\"invite-tip-attach-point\":\"hub__invite-tip-attach-point__2y_bz\",\"inviteTipAttachPoint\":\"hub__invite-tip-attach-point__2y_bz\",\"avatar-editor\":\"hub__avatar-editor__2b8-H\",\"avatarEditor\":\"hub__avatar-editor__2b8-H\",\"logo\":\"hub__logo__3kJSj\",\"form\":\"hub__form__3kQXh\",\"box\":\"hub__box__2SMbn\",\"links\":\"hub__links__1C6Ce\",\"darkened\":\"hub__darkened__1gqMQ\",\"display-name\":\"hub__display-name__36hFZ\",\"displayName\":\"hub__display-name__36hFZ\",\"preview\":\"hub__preview__2UUoU\",\"edit-avatar\":\"hub__edit-avatar__22A53\",\"editAvatar\":\"hub__edit-avatar__22A53\",\"close\":\"hub__close__gWtCN\",\"entry-dialog\":\"hub__entry-dialog__2Ljux\",\"entryDialog\":\"hub__entry-dialog__2Ljux\",\"favorited\":\"hub__favorited__3c3lB\",\"icon\":\"hub__icon__1pzf7\",\"bolded\":\"hub__bolded__2MYLZ\",\"subtitle\":\"hub__subtitle__3kYcd\",\"room-subtitle\":\"hub__room-subtitle__GhUCG\",\"roomSubtitle\":\"hub__room-subtitle__GhUCG\",\"lobby\":\"hub__lobby__2VW6G\",\"profile-icon\":\"hub__profile-icon__fwSfD\",\"profileIcon\":\"hub__profile-icon__fwSfD\",\"button-subtitle\":\"hub__button-subtitle__3kkpo\",\"buttonSubtitle\":\"hub__button-subtitle__3kkpo\",\"audio-loader\":\"hub__audio-loader__F5ovU\",\"audioLoader\":\"hub__audio-loader__F5ovU\",\"webvr-link-container\":\"hub__webvr-link-container__1Vq5m\",\"webvrLinkContainer\":\"hub__webvr-link-container__1Vq5m\",\"webvr-link\":\"hub__webvr-link__xW04U\",\"webvrLink\":\"hub__webvr-link__xW04U\",\"secondary\":\"hub__secondary__22yt_\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"touchZone\":\"virtual-gamepad-controls__touchZone__1KF_C\",\"left\":\"virtual-gamepad-controls__left__1-URB\",\"right\":\"virtual-gamepad-controls__right__1cgnU\",\"mockJoystickContainer\":\"virtual-gamepad-controls__mockJoystickContainer__1aH3e\",\"mockJoystick\":\"virtual-gamepad-controls__mockJoystick__2CuCG\",\"inner\":\"virtual-gamepad-controls__inner__1Bn3C\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"ui\":\"ui-root__ui__33CMU\",\"ui-dialog\":\"ui-root__ui-dialog__2TY9Y\",\"uiDialog\":\"ui-root__ui-dialog__2TY9Y\",\"ui-interactive\":\"ui-root__ui-interactive__2mtC4\",\"uiInteractive\":\"ui-root__ui-interactive__2mtC4\",\"presence-info\":\"ui-root__presence-info__3cieq\",\"presenceInfo\":\"ui-root__presence-info__3cieq\",\"corner-button\":\"ui-root__corner-button__2rfQ5\",\"cornerButton\":\"ui-root__corner-button__2rfQ5\",\"nag-corner-button\":\"ui-root__nag-corner-button__3TFW5\",\"nagCornerButton\":\"ui-root__nag-corner-button__3TFW5\",\"choose-scene-button\":\"ui-root__choose-scene-button__3VNdD\",\"chooseSceneButton\":\"ui-root__choose-scene-button__3VNdD\",\"leave-button\":\"ui-root__leave-button__29u2_\",\"leaveButton\":\"ui-root__leave-button__29u2_\",\"interstitial\":\"ui-root__interstitial__1cotl\",\"invite-tip\":\"ui-root__invite-tip__20NJ6\",\"inviteTip\":\"ui-root__invite-tip__20NJ6\",\"streaming-tip\":\"ui-root__streaming-tip__17WYl\",\"streamingTip\":\"ui-root__streaming-tip__17WYl\",\"streaming-tip-attach-point\":\"ui-root__streaming-tip-attach-point__3XSH-\",\"streamingTipAttachPoint\":\"ui-root__streaming-tip-attach-point__3XSH-\",\"streaming-tip-close\":\"ui-root__streaming-tip-close__1OHPc\",\"streamingTipClose\":\"ui-root__streaming-tip-close__1OHPc\",\"streaming-tip-message\":\"ui-root__streaming-tip-message__2XOUD\",\"streamingTipMessage\":\"ui-root__streaming-tip-message__2XOUD\",\"ui-dialog-box-contents\":\"ui-root__ui-dialog-box-contents__3XWtl\",\"uiDialogBoxContents\":\"ui-root__ui-dialog-box-contents__3XWtl\",\"backgrounded\":\"ui-root__backgrounded__34j0m\",\"in-room-favorite-button\":\"ui-root__in-room-favorite-button__2I0Kj\",\"inRoomFavoriteButton\":\"ui-root__in-room-favorite-button__2I0Kj\",\"occupant-count\":\"ui-root__occupant-count__34rGX\",\"occupantCount\":\"ui-root__occupant-count__34rGX\",\"presence-info-selected\":\"ui-root__presence-info-selected__1Jhbw\",\"presenceInfoSelected\":\"ui-root__presence-info-selected__1Jhbw\",\"camera-mode-exit-button\":\"ui-root__camera-mode-exit-button__2mpbz\",\"cameraModeExitButton\":\"ui-root__camera-mode-exit-button__2mpbz\",\"corner-button-selected\":\"ui-root__corner-button-selected__qRY5R\",\"cornerButtonSelected\":\"ui-root__corner-button-selected__qRY5R\",\"invite-tip-attach-point\":\"ui-root__invite-tip-attach-point__3rQJ6\",\"inviteTipAttachPoint\":\"ui-root__invite-tip-attach-point__3rQJ6\",\"avatar-editor\":\"ui-root__avatar-editor__2mO8z\",\"avatarEditor\":\"ui-root__avatar-editor__2mO8z\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"entry-button-secondary\":\"entry__entry-button-secondary__1Fr_E\",\"entryButtonSecondary\":\"entry__entry-button-secondary__1Fr_E\",\"entry-panel\":\"entry__entry-panel__34CD9\",\"entryPanel\":\"entry__entry-panel__34CD9\",\"button-container\":\"entry__button-container__3Blog\",\"buttonContainer\":\"entry__button-container__3Blog\",\"secondary-action-button\":\"entry__secondary-action-button__3FCMj\",\"secondaryActionButton\":\"entry__secondary-action-button__3FCMj\",\"entry-button\":\"entry__entry-button__G7PQF\",\"entryButton\":\"entry__entry-button__G7PQF\",\"action-button\":\"entry__action-button__3Vnab\",\"actionButton\":\"entry__action-button__3Vnab\",\"collapse-button\":\"entry__collapse-button__3_PLp\",\"collapseButton\":\"entry__collapse-button__3_PLp\",\"favorite-button\":\"entry__favorite-button__2CVuk\",\"favoriteButton\":\"entry__favorite-button__2CVuk\",\"back\":\"entry__back__J4Sgl\",\"lobby-label\":\"entry__lobby-label__2Nj9w\",\"lobbyLabel\":\"entry__lobby-label__2Nj9w\",\"label\":\"entry__label__fUhpb\",\"title\":\"entry__title__1GITj\",\"name\":\"entry__name__sYOeV\",\"rename-button\":\"entry__rename-button__KFW9R\",\"renameButton\":\"entry__rename-button__KFW9R\",\"center\":\"entry__center__1105W\",\"wide-button\":\"entry__wide-button__2tfMM\",\"wideButton\":\"entry__wide-button__2tfMM\",\"screen-sharing\":\"entry__screen-sharing__NBXQu\",\"screenSharing\":\"entry__screen-sharing__NBXQu\",\"checkbox\":\"entry__checkbox__3SoPk\",\"entry-dialog\":\"entry__entry-dialog__30kMs\",\"entryDialog\":\"entry__entry-dialog__30kMs\",\"favorited\":\"entry__favorited__2IHpj\",\"icon\":\"entry__icon__3JiUl\",\"bolded\":\"entry__bolded__13B4f\",\"subtitle\":\"entry__subtitle__1BC2y\",\"room-subtitle\":\"entry__room-subtitle__7MSMo\",\"roomSubtitle\":\"entry__room-subtitle__7MSMo\",\"lobby\":\"entry__lobby__3AxfL\",\"profile-icon\":\"entry__profile-icon__3BAWG\",\"profileIcon\":\"entry__profile-icon__3BAWG\",\"button-subtitle\":\"entry__button-subtitle__3zrEo\",\"buttonSubtitle\":\"entry__button-subtitle__3zrEo\",\"audio-loader\":\"entry__audio-loader__1YCJd\",\"audioLoader\":\"entry__audio-loader__1YCJd\",\"webvr-link-container\":\"entry__webvr-link-container__3scWP\",\"webvrLinkContainer\":\"entry__webvr-link-container__3scWP\",\"webvr-link\":\"entry__webvr-link__3eWuZ\",\"webvrLink\":\"entry__webvr-link__3eWuZ\",\"secondary\":\"entry__secondary__3uhYE\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"invite-container\":\"invite-dialog__invite-container__1c0Jw\",\"inviteContainer\":\"invite-dialog__invite-container__1c0Jw\",\"dialog\":\"invite-dialog__dialog__1XbxO\",\"link-button\":\"invite-dialog__link-button__S_o-t\",\"linkButton\":\"invite-dialog__link-button__S_o-t\",\"enter-vr-button\":\"invite-dialog__enter-vr-button__3y1BF\",\"enterVrButton\":\"invite-dialog__enter-vr-button__3y1BF\",\"invite-button\":\"invite-dialog__invite-button__3cjFw\",\"inviteButton\":\"invite-dialog__invite-button__3cjFw\",\"enter-button\":\"invite-dialog__enter-button__2Z5EY\",\"enterButton\":\"invite-dialog__enter-button__2Z5EY\",\"invite-mini-button\":\"invite-dialog__invite-mini-button__2zWJj\",\"inviteMiniButton\":\"invite-dialog__invite-mini-button__2zWJj\",\"domain\":\"invite-dialog__domain__2Q8Wr\",\"embed-text\":\"invite-dialog__embed-text__3-Boo\",\"embedText\":\"invite-dialog__embed-text__3-Boo\",\"invite-container-inverted\":\"invite-dialog__invite-container-inverted__1E3hR\",\"inviteContainerInverted\":\"invite-dialog__invite-container-inverted__1E3hR\",\"subscribe\":\"invite-dialog__subscribe__qlJL4\",\"embed-tip-wrap\":\"invite-dialog__embed-tip-wrap__2CQRc\",\"embedTipWrap\":\"invite-dialog__embed-tip-wrap__2CQRc\",\"embed-tip\":\"invite-dialog__embed-tip__12p0o\",\"embedTip\":\"invite-dialog__embed-tip__12p0o\",\"modal\":\"invite-dialog__modal__1hbVP\",\"hide-small-screens\":\"invite-dialog__hide-small-screens__3UCeH\",\"hideSmallScreens\":\"invite-dialog__hide-small-screens__3UCeH\",\"invite-container-below-hud\":\"invite-dialog__invite-container-below-hud__30RHX\",\"inviteContainerBelowHud\":\"invite-dialog__invite-container-below-hud__30RHX\",\"attach-point\":\"invite-dialog__attach-point__otyII\",\"attachPoint\":\"invite-dialog__attach-point__otyII\",\"code\":\"invite-dialog__code__13AIx\",\"keep-open\":\"invite-dialog__keep-open__229sO\",\"keepOpen\":\"invite-dialog__keep-open__229sO\",\"digit\":\"invite-dialog__digit__2w64P\",\"digit_2\":\"invite-dialog__digit_2__pQCJ3\",\"digit2\":\"invite-dialog__digit_2__pQCJ3\",\"digit_3\":\"invite-dialog__digit_3__1bWtt\",\"digit3\":\"invite-dialog__digit_3__1bWtt\",\"code-loading-panel\":\"invite-dialog__code-loading-panel__1gghm\",\"codeLoadingPanel\":\"invite-dialog__code-loading-panel__1gghm\",\"hub-link-link\":\"invite-dialog__hub-link-link__2guVF\",\"hubLinkLink\":\"invite-dialog__hub-link-link__2guVF\",\"buttons\":\"invite-dialog__buttons__1yN_j\",\"embed\":\"invite-dialog__embed__2zy_A\",\"close\":\"invite-dialog__close__3PAxl\",\"embed-tip-attach-point\":\"invite-dialog__embed-tip-attach-point__2UAZp\",\"embedTipAttachPoint\":\"invite-dialog__embed-tip-attach-point__2UAZp\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"cancel-button\":\"promote-client-dialog__cancel-button__3YZLa\",\"cancelButton\":\"promote-client-dialog__cancel-button__3YZLa\",\"confirm-button\":\"promote-client-dialog__confirm-button__3LXvQ\",\"confirmButton\":\"promote-client-dialog__confirm-button__3LXvQ\",\"message\":\"promote-client-dialog__message__1LA_N\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"client-action-buttons\":\"client-info-dialog__client-action-buttons__3u-6v\",\"clientActionButtons\":\"client-info-dialog__client-action-buttons__3u-6v\",\"cancel\":\"client-info-dialog__cancel__2BguV\",\"client-info-dialog\":\"client-info-dialog__client-info-dialog__2e1dc\",\"clientInfoDialog\":\"client-info-dialog__client-info-dialog__2e1dc\",\"title\":\"client-info-dialog__title__3FGPe\",\"community-identifier\":\"client-info-dialog__community-identifier__g3lbP\",\"communityIdentifier\":\"client-info-dialog__community-identifier__g3lbP\",\"client-info\":\"client-info-dialog__client-info__1MUSa\",\"clientInfo\":\"client-info-dialog__client-info__1MUSa\",\"client-profile-image\":\"client-info-dialog__client-profile-image__zt1EA\",\"clientProfileImage\":\"client-info-dialog__client-profile-image__zt1EA\",\"client-details\":\"client-info-dialog__client-details__1F5zy\",\"clientDetails\":\"client-info-dialog__client-details__1F5zy\",\"client-main\":\"client-info-dialog__client-main__2BC1s\",\"clientMain\":\"client-info-dialog__client-main__2BC1s\",\"button-icon\":\"client-info-dialog__button-icon__1vKfx\",\"buttonIcon\":\"client-info-dialog__button-icon__1vKfx\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"loading-text\":\"loader__loading-text__QVcF3\",\"loadingText\":\"loader__loading-text__QVcF3\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"profile-entry\":\"profile__profile-entry__1pJKZ\",\"profileEntry\":\"profile__profile-entry__1pJKZ\",\"form-submit\":\"profile__form-submit__2y7xb\",\"formSubmit\":\"profile__form-submit__2y7xb\",\"choose-avatar\":\"profile__choose-avatar__2EV0F\",\"chooseAvatar\":\"profile__choose-avatar__2EV0F\",\"form-field-text\":\"profile__form-field-text__1bzeV\",\"formFieldText\":\"profile__form-field-text__1bzeV\",\"title\":\"profile__title__Vcynv\",\"logo\":\"profile__logo__1JZAd\",\"form\":\"profile__form__1-hBO\",\"box\":\"profile__box__oJXQD\",\"links\":\"profile__links__2hukW\",\"darkened\":\"profile__darkened__1rVba\",\"display-name\":\"profile__display-name__auABh\",\"displayName\":\"profile__display-name__auABh\",\"preview\":\"profile__preview__3QjLq\",\"edit-avatar\":\"profile__edit-avatar__3386A\",\"editAvatar\":\"profile__edit-avatar__3386A\",\"close\":\"profile__close__2Uitz\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"preview\":\"avatar-preview__preview__2I8qx\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"action-button\":\"create-object-dialog__action-button__3OIJQ\",\"actionButton\":\"create-object-dialog__action-button__3OIJQ\",\"buttons\":\"create-object-dialog__buttons__1zA-b\",\"small-button\":\"create-object-dialog__small-button__7UxXQ\",\"smallButton\":\"create-object-dialog__small-button__7UxXQ\",\"input-border\":\"create-object-dialog__input-border__1N9AV\",\"inputBorder\":\"create-object-dialog__input-border__1N9AV\",\"left-side-of-input\":\"create-object-dialog__left-side-of-input__zyV06\",\"leftSideOfInput\":\"create-object-dialog__left-side-of-input__zyV06\",\"add-media-form\":\"create-object-dialog__add-media-form__10Wh-\",\"addMediaForm\":\"create-object-dialog__add-media-form__10Wh-\",\"cancel-icon\":\"create-object-dialog__cancel-icon__yD-8A\",\"cancelIcon\":\"create-object-dialog__cancel-icon__yD-8A\",\"upload-icon\":\"create-object-dialog__upload-icon__19g9k\",\"uploadIcon\":\"create-object-dialog__upload-icon__19g9k\",\"hide-file-input\":\"create-object-dialog__hide-file-input__2myDe\",\"hideFileInput\":\"create-object-dialog__hide-file-input__2myDe\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"action-button\":\"change-scene-dialog__action-button__1xtdK\",\"actionButton\":\"change-scene-dialog__action-button__1xtdK\",\"buttons\":\"change-scene-dialog__buttons__2QE34\",\"spoke-launch\":\"change-scene-dialog__spoke-launch__YObDn\",\"spokeLaunch\":\"change-scene-dialog__spoke-launch__YObDn\",\"input-border\":\"change-scene-dialog__input-border__30jd6\",\"inputBorder\":\"change-scene-dialog__input-border__30jd6\",\"left-side-of-input\":\"change-scene-dialog__left-side-of-input__14WKu\",\"leftSideOfInput\":\"change-scene-dialog__left-side-of-input__14WKu\",\"change-scene-button\":\"change-scene-dialog__change-scene-button__ckfZW\",\"changeSceneButton\":\"change-scene-dialog__change-scene-button__ckfZW\",\"spoke-create\":\"change-scene-dialog__spoke-create__2krL-\",\"spokeCreate\":\"change-scene-dialog__spoke-create__2krL-\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"avatar-url-dialog\":\"avatar-url-dialog__avatar-url-dialog__17OoD\",\"avatarUrlDialog\":\"avatar-url-dialog__avatar-url-dialog__17OoD\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"close-button\":\"link-dialog__close-button__2THTw\",\"closeButton\":\"link-dialog__close-button__2THTw\",\"domain\":\"link-dialog__domain__1WbPJ\",\"dialog\":\"link-dialog__dialog__1zbyG\",\"header\":\"link-dialog__header__1A06x\",\"contents\":\"link-dialog__contents__3ODVz\",\"code\":\"link-dialog__code__259RI\",\"imageHeader\":\"link-dialog__imageHeader__eaJe6\",\"keep-open\":\"link-dialog__keep-open__DYcUI\",\"keepOpen\":\"link-dialog__keep-open__DYcUI\",\"digit\":\"link-dialog__digit___zoC4\",\"code-loading-panel\":\"link-dialog__code-loading-panel__WKkNk\",\"codeLoadingPanel\":\"link-dialog__code-loading-panel__WKkNk\",\"close\":\"link-dialog__close__2TTmg\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"name-field\":\"room-settings-dialog__name-field___yGhb\",\"nameField\":\"room-settings-dialog__name-field___yGhb\",\"next-button\":\"room-settings-dialog__next-button__2F9Jd\",\"nextButton\":\"room-settings-dialog__next-button__2F9Jd\",\"continue-button\":\"room-settings-dialog__continue-button__2Ltsg\",\"continueButton\":\"room-settings-dialog__continue-button__2Ltsg\",\"room-settings-form\":\"room-settings-dialog__room-settings-form__yNism\",\"roomSettingsForm\":\"room-settings-dialog__room-settings-form__yNism\",\"permission\":\"room-settings-dialog__permission__3W-cW\",\"subtitle\":\"room-settings-dialog__subtitle__2ddy2\",\"permissions\":\"room-settings-dialog__permissions__1sHPN\",\"permissions-group\":\"room-settings-dialog__permissions-group__1oRYA\",\"permissionsGroup\":\"room-settings-dialog__permissions-group__1oRYA\",\"permission-disabled\":\"room-settings-dialog__permission-disabled__3NH-j\",\"permissionDisabled\":\"room-settings-dialog__permission-disabled__3NH-j\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"cancel-button\":\"close-room-dialog__cancel-button__MmtAo\",\"cancelButton\":\"close-room-dialog__cancel-button__MmtAo\",\"confirm-button\":\"close-room-dialog__confirm-button__Bs9y3\",\"confirmButton\":\"close-room-dialog__confirm-button__Bs9y3\",\"message\":\"close-room-dialog__message__1Rvh3\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"tip-root\":\"tip__tip-root__1s7D1\",\"tipRoot\":\"tip__tip-root__1s7D1\",\"tip-link\":\"tip__tip-link__3m4Iq\",\"tipLink\":\"tip__tip-link__3m4Iq\",\"tip-cancel\":\"tip__tip-cancel__1xPNP\",\"tipCancel\":\"tip__tip-cancel__1xPNP\",\"tip\":\"tip__tip__32KOl\",\"split-tip\":\"tip__split-tip__1xSCE\",\"splitTip\":\"tip__split-tip__1xSCE\",\"split-tip-icon\":\"tip__split-tip-icon__1ZXw0\",\"splitTipIcon\":\"tip__split-tip-icon__1ZXw0\",\"spawn_menu-icon\":\"tip__spawn_menu-icon__2en_9\",\"spawnMenuIcon\":\"tip__spawn_menu-icon__2en_9\",\"object_rotate_button-icon\":\"tip__object_rotate_button-icon__2tgeV\",\"objectRotateButtonIcon\":\"tip__object_rotate_button-icon__2tgeV\",\"object_scale_button-icon\":\"tip__object_scale_button-icon__pxKrw\",\"objectScaleButtonIcon\":\"tip__object_scale_button-icon__pxKrw\",\"object_recenter_button-icon\":\"tip__object_recenter_button-icon__38tNR\",\"objectRecenterButtonIcon\":\"tip__object_recenter_button-icon__38tNR\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"form-frame\":\"feedback-dialog__form-frame__1gfk_\",\"formFrame\":\"feedback-dialog__form-frame__1gfk_\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"leave-room\":\"leave-room-dialog__leave-room__31Jf7\",\"leaveRoom\":\"leave-room-dialog__leave-room__31Jf7\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"title\":\"room-info-dialog__title__3-3CO\",\"room-info\":\"room-info-dialog__room-info__3XkbS\",\"roomInfo\":\"room-info-dialog__room-info__3XkbS\",\"scene-screenshot\":\"room-info-dialog__scene-screenshot__3PWz-\",\"sceneScreenshot\":\"room-info-dialog__scene-screenshot__3PWz-\",\"scene-details\":\"room-info-dialog__scene-details__2pYml\",\"sceneDetails\":\"room-info-dialog__scene-details__2pYml\",\"scene-main\":\"room-info-dialog__scene-main__2mhXj\",\"sceneMain\":\"room-info-dialog__scene-main__2mhXj\",\"scene-name\":\"room-info-dialog__scene-name__1bqGh\",\"sceneName\":\"room-info-dialog__scene-name__1bqGh\",\"scene-creator\":\"room-info-dialog__scene-creator__3_za4\",\"sceneCreator\":\"room-info-dialog__scene-creator__3_za4\",\"scene-attributions\":\"room-info-dialog__scene-attributions__QpYVd\",\"sceneAttributions\":\"room-info-dialog__scene-attributions__QpYVd\",\"attribution\":\"room-info-dialog__attribution__I9_V-\",\"attribution-name\":\"room-info-dialog__attribution-name__3JTpI\",\"attributionName\":\"room-info-dialog__attribution-name__3JTpI\",\"attribution-author\":\"room-info-dialog__attribution-author__BouZB\",\"attributionAuthor\":\"room-info-dialog__attribution-author__BouZB\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"oauth-discord-button\":\"oauth-dialog__oauth-discord-button__A_Zra\",\"oauthDiscordButton\":\"oauth-dialog__oauth-discord-button__A_Zra\",\"oauth-twitter-button\":\"oauth-dialog__oauth-twitter-button__Vh4oX\",\"oauthTwitterButton\":\"oauth-dialog__oauth-twitter-button__Vh4oX\",\"oauth-button\":\"oauth-dialog__oauth-button__25RiO\",\"oauthButton\":\"oauth-dialog__oauth-button__25RiO\",\"oauth-type-name\":\"oauth-dialog__oauth-type-name__jPyhW\",\"oauthTypeName\":\"oauth-dialog__oauth-type-name__jPyhW\",\"oauth-icon\":\"oauth-dialog__oauth-icon__v1G6W\",\"oauthIcon\":\"oauth-dialog__oauth-icon__v1G6W\",\"privacy-notice\":\"oauth-dialog__privacy-notice__2R9ZT\",\"privacyNotice\":\"oauth-dialog__privacy-notice__2R9ZT\",\"oauth-buttons\":\"oauth-dialog__oauth-buttons__1U1Ni\",\"oauthButtons\":\"oauth-dialog__oauth-buttons__1U1Ni\",\"twitter-message\":\"oauth-dialog__twitter-message__cWCES\",\"twitterMessage\":\"oauth-dialog__twitter-message__cWCES\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"buttons\":\"tweet-dialog__buttons__1gYv2\",\"tweet-button\":\"tweet-dialog__tweet-button__3XvNj\",\"tweetButton\":\"tweet-dialog__tweet-button__3XvNj\",\"tweet\":\"tweet-dialog__tweet__25N6e\",\"editor\":\"tweet-dialog__editor__3xJV-\",\"editor-inner\":\"tweet-dialog__editor-inner__1Zhzc\",\"editorInner\":\"tweet-dialog__editor-inner__1Zhzc\",\"emoji-button\":\"tweet-dialog__emoji-button__2L9tR\",\"emojiButton\":\"tweet-dialog__emoji-button__2L9tR\",\"counter\":\"tweet-dialog__counter__2OZyX\",\"highlight\":\"tweet-dialog__highlight__1EXxs\",\"media\":\"tweet-dialog__media__IeN9e\",\"posted\":\"tweet-dialog__posted__2t8RC\",\"tweet-loader\":\"tweet-dialog__tweet-loader__3Q8YL\",\"tweetLoader\":\"tweet-dialog__tweet-loader__3Q8YL\",\"dialog-background\":\"tweet-dialog__dialog-background__2vvyQ\",\"dialogBackground\":\"tweet-dialog__dialog-background__2vvyQ\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"message-entry-in-room\":\"message-entry__message-entry-in-room__1aN5s\",\"messageEntryInRoom\":\"message-entry__message-entry-in-room__1aN5s\",\"message-entry-spawn\":\"message-entry__message-entry-spawn__1_AF5\",\"messageEntrySpawn\":\"message-entry__message-entry-spawn__1_AF5\",\"message-entry-input\":\"message-entry__message-entry-input__2AtQE\",\"messageEntryInput\":\"message-entry__message-entry-input__2AtQE\",\"message-entry\":\"message-entry__message-entry__x7lQX\",\"messageEntry\":\"message-entry__message-entry__x7lQX\",\"message-entry-disabled\":\"message-entry__message-entry-disabled__25LSI\",\"messageEntryDisabled\":\"message-entry__message-entry-disabled__25LSI\",\"message-entry-button\":\"message-entry__message-entry-button__3xJhH\",\"messageEntryButton\":\"message-entry__message-entry-button__3xJhH\",\"message-entry-button-in-room\":\"message-entry__message-entry-button-in-room__2yMTR\",\"messageEntryButtonInRoom\":\"message-entry__message-entry-button-in-room__2yMTR\",\"message-entry-upload\":\"message-entry__message-entry-upload__3F0sX\",\"messageEntryUpload\":\"message-entry__message-entry-upload__3F0sX\",\"message-entry-input-in-room\":\"message-entry__message-entry-input-in-room__30ReF\",\"messageEntryInputInRoom\":\"message-entry__message-entry-input-in-room__30ReF\",\"message-entry-input-no-spawn\":\"message-entry__message-entry-input-no-spawn__1wF7R\",\"messageEntryInputNoSpawn\":\"message-entry__message-entry-input-no-spawn__1wF7R\",\"message-entry-on-mobile\":\"message-entry__message-entry-on-mobile__2pSYF\",\"messageEntryOnMobile\":\"message-entry__message-entry-on-mobile__2pSYF\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"command-help\":\"chat-command-help__command-help__q0Wb8\",\"commandHelp\":\"chat-command-help__command-help__q0Wb8\",\"entry\":\"chat-command-help__entry__1E1un\",\"command\":\"chat-command-help__command__2GMyn\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"presence-log\":\"presence-log__presence-log__10oFj\",\"presenceLog\":\"presence-log__presence-log__10oFj\",\"presence-log-entry\":\"presence-log__presence-log-entry__dt0t4\",\"presenceLogEntry\":\"presence-log__presence-log-entry__dt0t4\",\"message-body\":\"presence-log__message-body__2L9jA\",\"messageBody\":\"presence-log__message-body__2L9jA\",\"message-body-multi\":\"presence-log__message-body-multi__2e-Sx\",\"messageBodyMulti\":\"presence-log__message-body-multi__2e-Sx\",\"message-body-mono\":\"presence-log__message-body-mono__3zuQE\",\"messageBodyMono\":\"presence-log__message-body-mono__3zuQE\",\"message-wrap\":\"presence-log__message-wrap__2aWCa\",\"messageWrap\":\"presence-log__message-wrap__2aWCa\",\"message-wrap-multi\":\"presence-log__message-wrap-multi__1eA6v\",\"messageWrapMulti\":\"presence-log__message-wrap-multi__1eA6v\",\"message-source\":\"presence-log__message-source__3CI4d\",\"messageSource\":\"presence-log__message-source__3CI4d\",\"message-source-link\":\"presence-log__message-source-link__1evTZ\",\"messageSourceLink\":\"presence-log__message-source-link__1evTZ\",\"icon-button\":\"presence-log__icon-button__2Shbm\",\"iconButton\":\"presence-log__icon-button__2Shbm\",\"spawn-message\":\"presence-log__spawn-message__14Ne8\",\"spawnMessage\":\"presence-log__spawn-message__14Ne8\",\"share\":\"presence-log__share__37U7E\",\"media\":\"presence-log__media__2qG_d\",\"mediaBody\":\"presence-log__mediaBody__1rByA\",\"expired\":\"presence-log__expired__2wMJc\",\"presence-log-entry-with-button\":\"presence-log__presence-log-entry-with-button__1PxTw\",\"presenceLogEntryWithButton\":\"presence-log__presence-log-entry-with-button__1PxTw\",\"presence-log-in-room\":\"presence-log__presence-log-in-room__17h3n\",\"presenceLogInRoom\":\"presence-log__presence-log-in-room__17h3n\",\"presence-log-spawn\":\"presence-log__presence-log-spawn__3jlmT\",\"presenceLogSpawn\":\"presence-log__presence-log-spawn__3jlmT\",\"presence-log-entry-one-line\":\"presence-log__presence-log-entry-one-line__bRXfp\",\"presenceLogEntryOneLine\":\"presence-log__presence-log-entry-one-line__bRXfp\",\"presence-log-emoji\":\"presence-log__presence-log-emoji__1_3Yn\",\"presenceLogEmoji\":\"presence-log__presence-log-emoji__1_3Yn\",\"emoji\":\"presence-log__emoji__10b18\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"client-link\":\"presence-list__client-link__3tkyz\",\"clientLink\":\"presence-list__client-link__3tkyz\",\"presence-list\":\"presence-list__presence-list__1KERe\",\"presenceList\":\"presence-list__presence-list__1KERe\",\"attach-point\":\"presence-list__attach-point__kIdfx\",\"attachPoint\":\"presence-list__attach-point__kIdfx\",\"contents\":\"presence-list__contents__1B7bz\",\"rows\":\"presence-list__rows__1B6KS\",\"row\":\"presence-list__row__1D2j2\",\"row-header\":\"presence-list__row-header__3kl1w\",\"rowHeader\":\"presence-list__row-header__3kl1w\",\"list-item\":\"presence-list__list-item__2YARP\",\"listItem\":\"presence-list__list-item__2YARP\",\"list-item-link\":\"presence-list__list-item-link__2DLC2\",\"listItemLink\":\"presence-list__list-item-link__2DLC2\",\"presence\":\"presence-list__presence__15DJe\",\"sign-in\":\"presence-list__sign-in__28eVu\",\"signIn\":\"presence-list__sign-in__28eVu\",\"icon\":\"presence-list__icon__1t8iB\",\"self\":\"presence-list__self__1g-bw\",\"moderator-badge\":\"presence-list__moderator-badge__2njku\",\"moderatorBadge\":\"presence-list__moderator-badge__2njku\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"avatar-editor\":\"avatar-editor__avatar-editor__xtJ6P\",\"avatarEditor\":\"avatar-editor__avatar-editor__xtJ6P\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"bottom-links-main\":\"settings-menu__bottom-links-main__Vtlje\",\"bottomLinksMain\":\"settings-menu__bottom-links-main__Vtlje\",\"bottom-links\":\"settings-menu__bottom-links__b1tDE\",\"bottomLinks\":\"settings-menu__bottom-links__b1tDE\",\"settings-menu\":\"settings-menu__settings-menu__3x1Pv\",\"settingsMenu\":\"settings-menu__settings-menu__3x1Pv\",\"attach-point\":\"settings-menu__attach-point__2gV3g\",\"attachPoint\":\"settings-menu__attach-point__2gV3g\",\"contents\":\"settings-menu__contents__3GQlW\",\"rows\":\"settings-menu__rows__2OtlS\",\"row\":\"settings-menu__row__3w7fz\",\"row-header\":\"settings-menu__row-header__2oCqk\",\"rowHeader\":\"settings-menu__row-header__2oCqk\",\"list-item\":\"settings-menu__list-item__1__z6\",\"listItem\":\"settings-menu__list-item__1__z6\",\"list-item-link\":\"settings-menu__list-item-link__2ovr3\",\"listItemLink\":\"settings-menu__list-item-link__2ovr3\",\"settings-row\":\"settings-menu__settings-row__1sDDk\",\"settingsRow\":\"settings-menu__settings-row__1sDDk\",\"icon\":\"settings-menu__icon__3KMMz\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"load-button\":\"preload-overlay__load-button__ba1d4\",\"loadButton\":\"preload-overlay__load-button__ba1d4\",\"treatment\":\"preload-overlay__treatment__1L4r0\",\"screenshot\":\"preload-overlay__screenshot__3TZYm\",\"hub-name\":\"preload-overlay__hub-name__2txaT\",\"hubName\":\"preload-overlay__hub-name__2txaT\",\"main-panel\":\"preload-overlay__main-panel__2EX4k\",\"mainPanel\":\"preload-overlay__main-panel__2EX4k\",\"logo\":\"preload-overlay__logo__1IJJc\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"panel\":\"_2d-hud__panel__2oM_T\",\"tip-cancel-text\":\"_2d-hud__tip-cancel-text__12KQ2\",\"tipCancelText\":\"_2d-hud__tip-cancel-text__12KQ2\",\"top-tip\":\"_2d-hud__top-tip__E5uti\",\"topTip\":\"_2d-hud__top-tip__E5uti\",\"container\":\"_2d-hud__container__66GRt\",\"top\":\"_2d-hud__top__3PiNe\",\"column\":\"_2d-hud__column__1y7XY\",\"bottom\":\"_2d-hud__bottom__2jUcT\",\"hide\":\"_2d-hud__hide__3HJO8\",\"attach-point\":\"_2d-hud__attach-point__17FSc\",\"attachPoint\":\"_2d-hud__attach-point__17FSc\",\"attach_video_share_mode\":\"_2d-hud__attach_video_share_mode__21PhM\",\"attachVideoShareMode\":\"_2d-hud__attach_video_share_mode__21PhM\",\"attach_video_share_failed\":\"_2d-hud__attach_video_share_failed__2tfqf\",\"attachVideoShareFailed\":\"_2d-hud__attach_video_share_failed__2tfqf\",\"attach_pen_mode\":\"_2d-hud__attach_pen_mode__cI1AW\",\"attachPenMode\":\"_2d-hud__attach_pen_mode__cI1AW\",\"attach_mute_mode\":\"_2d-hud__attach_mute_mode__153iB\",\"attachMuteMode\":\"_2d-hud__attach_mute_mode__153iB\",\"attach_freeze_mode\":\"_2d-hud__attach_freeze_mode__3UIHP\",\"attachFreezeMode\":\"_2d-hud__attach_freeze_mode__3UIHP\",\"top-tip-no-hud\":\"_2d-hud__top-tip-no-hud__16RXh\",\"topTipNoHud\":\"_2d-hud__top-tip-no-hud__16RXh\",\"tip-cancel\":\"_2d-hud__tip-cancel__JaFV-\",\"tipCancel\":\"_2d-hud__tip-cancel__JaFV-\",\"video-share-extra-options\":\"_2d-hud__video-share-extra-options__31VMr\",\"videoShareExtraOptions\":\"_2d-hud__video-share-extra-options__31VMr\",\"iconButton\":\"_2d-hud__iconButton__3faJz\",\"up\":\"_2d-hud__up__1lyhr\",\"small\":\"_2d-hud__small__2rqgF\",\"large\":\"_2d-hud__large__2bHqH\",\"disabled\":\"_2d-hud__disabled__3ylbZ\",\"video-share\":\"_2d-hud__video-share__38X7W\",\"videoShare\":\"_2d-hud__video-share__38X7W\",\"fly\":\"_2d-hud__fly__kDxPK\",\"active\":\"_2d-hud__active__1TMB8\",\"mute\":\"_2d-hud__mute__25kHI\",\"pen\":\"_2d-hud__pen__3uTC7\",\"camera\":\"_2d-hud__camera__84ksg\",\"freeze\":\"_2d-hud__freeze__26rlJ\",\"spawn\":\"_2d-hud__spawn__1FoBz\",\"mobile-media-picker\":\"_2d-hud__mobile-media-picker__3ZXHc\",\"mobileMediaPicker\":\"_2d-hud__mobile-media-picker__3ZXHc\",\"share_camera\":\"_2d-hud__share_camera__v67Il\",\"shareCamera\":\"_2d-hud__share_camera__v67Il\",\"share_screen\":\"_2d-hud__share_screen__1HQ8E\",\"shareScreen\":\"_2d-hud__share_screen__1HQ8E\",\"share_window\":\"_2d-hud__share_window__stsD3\",\"shareWindow\":\"_2d-hud__share_window__stsD3\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"mic-0\":\"css-spritesheet__mic-0__2XVsh\",\"mic0\":\"css-spritesheet__mic-0__2XVsh\",\"mic-1\":\"css-spritesheet__mic-1__1tNtE\",\"mic1\":\"css-spritesheet__mic-1__1tNtE\",\"mic-2\":\"css-spritesheet__mic-2__2a7bH\",\"mic2\":\"css-spritesheet__mic-2__2a7bH\",\"mic-3\":\"css-spritesheet__mic-3__2A0Xs\",\"mic3\":\"css-spritesheet__mic-3__2A0Xs\",\"mic-4\":\"css-spritesheet__mic-4__ig2RD\",\"mic4\":\"css-spritesheet__mic-4__ig2RD\",\"mic-5\":\"css-spritesheet__mic-5__10MFm\",\"mic5\":\"css-spritesheet__mic-5__10MFm\",\"mic-6\":\"css-spritesheet__mic-6__3-bU1\",\"mic6\":\"css-spritesheet__mic-6__3-bU1\",\"mic-7\":\"css-spritesheet__mic-7__3j-4R\",\"mic7\":\"css-spritesheet__mic-7__3j-4R\",\"mic-off-0\":\"css-spritesheet__mic-off-0__1ZJb1\",\"micOff0\":\"css-spritesheet__mic-off-0__1ZJb1\",\"mic-off-1\":\"css-spritesheet__mic-off-1__PLn60\",\"micOff1\":\"css-spritesheet__mic-off-1__PLn60\",\"mic-off-2\":\"css-spritesheet__mic-off-2__ArmUv\",\"micOff2\":\"css-spritesheet__mic-off-2__ArmUv\",\"mic-off-3\":\"css-spritesheet__mic-off-3__33n8o\",\"micOff3\":\"css-spritesheet__mic-off-3__33n8o\",\"mic-off-4\":\"css-spritesheet__mic-off-4__5L_ui\",\"micOff4\":\"css-spritesheet__mic-off-4__5L_ui\",\"mic-off-5\":\"css-spritesheet__mic-off-5__3DqkV\",\"micOff5\":\"css-spritesheet__mic-off-5__3DqkV\",\"mic-off-6\":\"css-spritesheet__mic-off-6__2a7HR\",\"micOff6\":\"css-spritesheet__mic-off-6__2a7HR\",\"mic-off-7\":\"css-spritesheet__mic-off-7__Y2kJU\",\"micOff7\":\"css-spritesheet__mic-off-7__Y2kJU\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"label\":\"spectating-label__label__3JS5A\"};","const qs = new URLSearchParams(location.search);\n\nexport default function qsTruthy(param) {\n  const val = qs.get(param);\n  // if the param exists but is not set (e.g. \"?foo&bar\"), its value is the empty string.\n  return val === \"\" || /1|on|true|yes/i.test(val);\n}\n","export function findAncestorWithComponent(entity, componentName) {\n  while (entity && !(entity.components && entity.components[componentName])) {\n    entity = entity.parentNode;\n  }\n  return entity;\n}\n","// Computes an AABB that surrounds the object in question and all of its children.\n// Note that if the children have rotations, this probably won't return the tightest\n// possible AABB -- we could return a tighter one if we examined all of the vertices\n// of the geometry for ourselves, but we don't care enough for what we're using this\n// for to do so much work.\nconst computeObjectAABB = (function() {\n  const bounds = new THREE.Box3();\n  return function(root, target) {\n    target.makeEmpty();\n    root.traverse(node => {\n      const geometry = node.geometry;\n      if (geometry != null) {\n        if (geometry.boundingBox == null) {\n          geometry.computeBoundingBox();\n        }\n        target.union(bounds.copy(geometry.boundingBox).applyMatrix4(node.matrixWorld));\n      }\n    });\n    return target;\n  };\n})();\n\nconst rotation = new THREE.Euler();\nexport function getBox(entity, boxRoot) {\n  const box = new THREE.Box3();\n\n  rotation.copy(entity.object3D.rotation);\n  entity.object3D.rotation.set(0, 0, 0);\n\n  entity.object3D.updateMatrices(true, true);\n  boxRoot.updateMatrices(true, true);\n  boxRoot.updateMatrixWorld(true);\n\n  computeObjectAABB(boxRoot, box);\n\n  if (!box.isEmpty()) {\n    entity.object3D.worldToLocal(box.min);\n    entity.object3D.worldToLocal(box.max);\n    entity.object3D.rotation.copy(rotation);\n    entity.object3D.matrixNeedsUpdate = true;\n  }\n\n  boxRoot.matrixWorldNeedsUpdate = true;\n  boxRoot.updateMatrices();\n\n  return box;\n}\n\nexport function getScaleCoefficient(length, box) {\n  if (box.isEmpty()) return 1.0;\n\n  const { max, min } = box;\n  const dX = Math.abs(max.x - min.x);\n  const dY = Math.abs(max.y - min.y);\n  const dZ = Math.abs(max.z - min.z);\n  const lengthOfLongestComponent = Math.max(dX, dY, dZ);\n  return length / lengthOfLongestComponent;\n}\n","function loadAsync(loader, url, onProgress) {\n  return new Promise((resolve, reject) => loader.load(url, resolve, onProgress, reject));\n}\n\nexport default class HubsTextureLoader {\n  static crossOrigin = \"anonymous\";\n\n  constructor(manager = THREE.DefaultLoadingManager) {\n    this.manager = manager;\n  }\n\n  load(url, onLoad, onProgress, onError) {\n    const texture = new THREE.Texture();\n\n    this.loadTextureAsync(texture, url, onProgress)\n      .then(onLoad)\n      .catch(onError);\n\n    return texture;\n  }\n\n  async loadTextureAsync(texture, src, onProgress) {\n    let imageLoader;\n\n    if (window.createImageBitmap !== undefined) {\n      imageLoader = new THREE.ImageBitmapLoader(this.manager);\n      texture.flipY = false;\n    } else {\n      imageLoader = new THREE.ImageLoader(this.manager);\n    }\n\n    imageLoader.setCrossOrigin(this.crossOrigin);\n    imageLoader.setPath(this.path);\n\n    const cacheKey = this.manager.resolveURL(src);\n\n    texture.image = await loadAsync(imageLoader, src, onProgress);\n\n    // Image was just added to cache before this function gets called, disable caching by immediatly removing it\n    THREE.Cache.remove(cacheKey);\n\n    texture.needsUpdate = true;\n\n    texture.onUpdate = function() {\n      // Delete texture data once it has been uploaded to the GPU\n      texture.image.close && texture.image.close();\n      delete texture.image;\n    };\n\n    return texture;\n  }\n\n  setCrossOrigin(value) {\n    this.crossOrigin = value;\n    return this;\n  }\n\n  setPath(value) {\n    this.path = value;\n    return this;\n  }\n}\n","import { objectTypeForOriginAndContentType } from \"../object-types\";\nimport { getReticulumFetchUrl } from \"./phoenix-utils\";\nimport mediaHighlightFrag from \"./media-highlight-frag.glsl\";\nimport { mapMaterials } from \"./material-utils\";\nimport HubsTextureLoader from \"../loaders/HubsTextureLoader\";\nimport { validMaterials } from \"../components/hoverable-visuals\";\n\nconst mediaAPIEndpoint = getReticulumFetchUrl(\"/api/v1/media\");\n\n// Map<String, Promise<Object>\nconst resolveUrlCache = new Map();\nexport const resolveUrl = async (url, index) => {\n  const cacheKey = `${url}|${index}`;\n  if (resolveUrlCache.has(cacheKey)) return resolveUrlCache.get(cacheKey);\n\n  const resultPromise = fetch(mediaAPIEndpoint, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ media: { url, index } })\n  }).then(async response => {\n    if (!response.ok) {\n      const message = `Error resolving url \"${url}\":`;\n      try {\n        const body = await response.text();\n        throw new Error(message + \" \" + body);\n      } catch (e) {\n        throw new Error(message + \" \" + response.statusText);\n      }\n    }\n    return response.json();\n  });\n\n  resolveUrlCache.set(cacheKey, resultPromise);\n  return resultPromise;\n};\n\nexport const upload = (file, desiredContentType) => {\n  const formData = new FormData();\n  formData.append(\"media\", file);\n  formData.append(\"promotion_mode\", \"with_token\");\n\n  if (desiredContentType) {\n    formData.append(\"desired_content_type\", desiredContentType);\n  }\n\n  return fetch(mediaAPIEndpoint, {\n    method: \"POST\",\n    body: formData\n  }).then(r => r.json());\n};\n\n// https://stackoverflow.com/questions/7584794/accessing-jpeg-exif-rotation-data-in-javascript-on-the-client-side/32490603#32490603\nfunction getOrientation(file, callback) {\n  const reader = new FileReader();\n  reader.onload = function(e) {\n    const view = new DataView(e.target.result);\n    if (view.getUint16(0, false) != 0xffd8) {\n      return callback(-2);\n    }\n    const length = view.byteLength;\n    let offset = 2;\n    while (offset < length) {\n      if (view.getUint16(offset + 2, false) <= 8) return callback(-1);\n      const marker = view.getUint16(offset, false);\n      offset += 2;\n      if (marker == 0xffe1) {\n        if (view.getUint32((offset += 2), false) != 0x45786966) {\n          return callback(-1);\n        }\n\n        const little = view.getUint16((offset += 6), false) == 0x4949;\n        offset += view.getUint32(offset + 4, little);\n        const tags = view.getUint16(offset, little);\n        offset += 2;\n        for (let i = 0; i < tags; i++) {\n          if (view.getUint16(offset + i * 12, little) == 0x0112) {\n            return callback(view.getUint16(offset + i * 12 + 8, little));\n          }\n        }\n      } else if ((marker & 0xff00) != 0xff00) {\n        break;\n      } else {\n        offset += view.getUint16(offset, false);\n      }\n    }\n    return callback(-1);\n  };\n  reader.readAsArrayBuffer(file);\n}\n\nlet interactableId = 0;\nexport const addMedia = (\n  src,\n  template,\n  contentOrigin,\n  contentSubtype = null,\n  resolve = false,\n  resize = false,\n  animate = true\n) => {\n  const scene = AFRAME.scenes[0];\n\n  const entity = document.createElement(\"a-entity\");\n  entity.id = \"interactable-media-\" + interactableId++;\n  entity.setAttribute(\"networked\", { template: template });\n  const needsToBeUploaded = src instanceof File;\n  entity.setAttribute(\"media-loader\", {\n    resize,\n    resolve,\n    animate,\n    src: typeof src === \"string\" ? src : \"\",\n    contentSubtype,\n    fileIsOwned: !needsToBeUploaded\n  });\n\n  entity.object3D.matrixNeedsUpdate = true;\n\n  scene.appendChild(entity);\n\n  const fireLoadingTimeout = setTimeout(() => {\n    scene.emit(\"media-loading\", { src: src });\n  }, 100);\n\n  [\"model-loaded\", \"video-loaded\", \"image-loaded\"].forEach(eventName => {\n    entity.addEventListener(\n      eventName,\n      async () => {\n        clearTimeout(fireLoadingTimeout);\n        scene.emit(\"media-loaded\", { src: src });\n      },\n      { once: true }\n    );\n  });\n\n  const orientation = new Promise(function(resolve) {\n    if (needsToBeUploaded) {\n      getOrientation(src, x => {\n        resolve(x);\n      });\n    } else {\n      resolve(1);\n    }\n  });\n  if (needsToBeUploaded) {\n    // Video camera videos are converted to mp4 for compatibility\n    const desiredContentType = contentSubtype === \"video-camera\" ? \"video/mp4\" : null;\n\n    upload(src, desiredContentType)\n      .then(response => {\n        const srcUrl = new URL(response.raw);\n        srcUrl.searchParams.set(\"token\", response.meta.access_token);\n        entity.setAttribute(\"media-loader\", { resolve: false, src: srcUrl.href, fileId: response.file_id });\n        window.APP.store.update({\n          uploadPromotionTokens: [{ fileId: response.file_id, promotionToken: response.meta.promotion_token }]\n        });\n      })\n      .catch(e => {\n        console.error(\"Media upload failed\", e);\n        entity.setAttribute(\"media-loader\", { src: \"error\" });\n      });\n  } else if (src instanceof MediaStream) {\n    entity.setAttribute(\"media-loader\", { src: `hubs://clients/${NAF.clientId}/video` });\n  }\n\n  if (contentOrigin) {\n    entity.addEventListener(\"media_resolved\", ({ detail }) => {\n      const objectType = objectTypeForOriginAndContentType(contentOrigin, detail.contentType, detail.src);\n      scene.emit(\"object_spawned\", { objectType });\n    });\n  }\n\n  return { entity, orientation };\n};\n\nexport function injectCustomShaderChunks(obj) {\n  const vertexRegex = /\\bskinning_vertex\\b/;\n  const fragRegex = /\\bgl_FragColor\\b/;\n\n  const shaderUniforms = [];\n  const batchManagerSystem = AFRAME.scenes[0].systems[\"hubs-systems\"].batchManagerSystem;\n\n  obj.traverse(object => {\n    if (!object.material) return;\n\n    object.material = mapMaterials(object, material => {\n      if (!validMaterials.includes(material.type)) {\n        return material;\n      }\n\n      // HACK, this routine inadvertently leaves the A-Frame shaders wired to the old, dark\n      // material, so maps cannot be updated at runtime. This breaks UI elements who have\n      // hover/toggle state, so for now just skip these while we figure out a more correct\n      // solution.\n      if (\n        object.el.classList.contains(\"ui\") ||\n        object.el.classList.contains(\"hud\") ||\n        object.el.getAttribute(\"text-button\")\n      )\n        return material;\n\n      // Used when the object is batched\n      batchManagerSystem.meshToEl.set(object, obj.el);\n\n      const newMaterial = material.clone();\n      // This will not run if the object is never rendered unbatched, since its unbatched shader will never be compiled\n      newMaterial.onBeforeCompile = shader => {\n        if (!vertexRegex.test(shader.vertexShader)) return;\n\n        shader.uniforms.hubs_IsFrozen = { value: false };\n        shader.uniforms.hubs_EnableSweepingEffect = { value: false };\n        shader.uniforms.hubs_SweepParams = { value: [0, 0] };\n        shader.uniforms.hubs_InteractorOnePos = { value: [0, 0, 0] };\n        shader.uniforms.hubs_InteractorTwoPos = { value: [0, 0, 0] };\n        shader.uniforms.hubs_HighlightInteractorOne = { value: false };\n        shader.uniforms.hubs_HighlightInteractorTwo = { value: false };\n        shader.uniforms.hubs_Time = { value: 0 };\n\n        const vchunk = `\n        if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\n          vec4 wt = modelMatrix * vec4(transformed, 1);\n\n          // Used in the fragment shader below.\n          hubs_WorldPosition = wt.xyz;\n        }\n      `;\n\n        const vlines = shader.vertexShader.split(\"\\n\");\n        const vindex = vlines.findIndex(line => vertexRegex.test(line));\n        vlines.splice(vindex + 1, 0, vchunk);\n        vlines.unshift(\"varying vec3 hubs_WorldPosition;\");\n        vlines.unshift(\"uniform bool hubs_IsFrozen;\");\n        vlines.unshift(\"uniform bool hubs_HighlightInteractorOne;\");\n        vlines.unshift(\"uniform bool hubs_HighlightInteractorTwo;\");\n        shader.vertexShader = vlines.join(\"\\n\");\n\n        const flines = shader.fragmentShader.split(\"\\n\");\n        const findex = flines.findIndex(line => fragRegex.test(line));\n        flines.splice(findex + 1, 0, mediaHighlightFrag);\n        flines.unshift(\"varying vec3 hubs_WorldPosition;\");\n        flines.unshift(\"uniform bool hubs_IsFrozen;\");\n        flines.unshift(\"uniform bool hubs_EnableSweepingEffect;\");\n        flines.unshift(\"uniform vec2 hubs_SweepParams;\");\n        flines.unshift(\"uniform bool hubs_HighlightInteractorOne;\");\n        flines.unshift(\"uniform vec3 hubs_InteractorOnePos;\");\n        flines.unshift(\"uniform bool hubs_HighlightInteractorTwo;\");\n        flines.unshift(\"uniform vec3 hubs_InteractorTwoPos;\");\n        flines.unshift(\"uniform float hubs_Time;\");\n        shader.fragmentShader = flines.join(\"\\n\");\n\n        shaderUniforms.push(shader.uniforms);\n      };\n      newMaterial.needsUpdate = true;\n      return newMaterial;\n    });\n  });\n\n  return shaderUniforms;\n}\n\nexport function getPromotionTokenForFile(fileId) {\n  return window.APP.store.state.uploadPromotionTokens.find(upload => upload.fileId === fileId);\n}\n\nconst mediaPos = new THREE.Vector3();\n\nexport function addAndArrangeMedia(el, media, contentSubtype, snapCount, mirrorOrientation = false) {\n  const { entity, orientation } = addMedia(media, \"#interactable-media\", undefined, contentSubtype, false);\n\n  const pos = el.object3D.position;\n\n  entity.object3D.position.set(pos.x, pos.y, pos.z);\n  entity.object3D.rotation.copy(el.object3D.rotation);\n\n  if (mirrorOrientation) {\n    entity.object3D.rotateY(Math.PI);\n  }\n\n  // Generate photos in a circle around camera, starting from the bottom.\n  // Prevent z-fighting but place behind viewfinder\n  const idx = (snapCount % 6) + 3;\n\n  mediaPos.set(\n    Math.cos(Math.PI * 2 * (idx / 6.0)) * 0.75,\n    Math.sin(Math.PI * 2 * (idx / 6.0)) * 0.75,\n    -0.05 + idx * 0.001\n  );\n\n  el.object3D.localToWorld(mediaPos);\n  entity.object3D.visible = false;\n\n  const handler = () => {\n    entity.object3D.visible = true;\n    entity.setAttribute(\"animation__photo_pos\", {\n      property: \"position\",\n      dur: 800,\n      from: { x: pos.x, y: pos.y, z: pos.z },\n      to: { x: mediaPos.x, y: mediaPos.y, z: mediaPos.z },\n      easing: \"easeOutElastic\"\n    });\n  };\n\n  let eventType = null;\n\n  if (contentSubtype.startsWith(\"photo\")) {\n    entity.addEventListener(\"image-loaded\", handler, { once: true });\n    eventType = \"photo\";\n  } else if (contentSubtype.startsWith(\"video\")) {\n    entity.addEventListener(\"video-loaded\", handler, { once: true });\n    eventType = \"video\";\n  } else {\n    console.error(\"invalid type \" + contentSubtype);\n    return;\n  }\n\n  entity.object3D.matrixNeedsUpdate = true;\n\n  entity.addEventListener(\n    \"media_resolved\",\n    () => {\n      el.emit(`${eventType}_taken`, entity.components[\"media-loader\"].data.src);\n    },\n    { once: true }\n  );\n\n  return { entity, orientation };\n}\n\nexport const textureLoader = new HubsTextureLoader().setCrossOrigin(\"anonymous\");\n\nexport async function createImageTexture(url) {\n  const texture = new THREE.Texture();\n\n  try {\n    await textureLoader.loadTextureAsync(texture, url);\n  } catch (e) {\n    throw new Error(`'${url}' could not be fetched (Error code: ${e.status}; Response: ${e.statusText})`);\n  }\n\n  texture.encoding = THREE.sRGBEncoding;\n  texture.anisotropy = 4;\n\n  return texture;\n}\n","import {airtableMessages} from '../airtable'\nimport {airtableAssets} from '../airtable'\nimport translations from '../assets/translations.data.json';\n\n// let fields;\n\n// airtableAssets.find('recHqITRS7cBMwn9i', (err, record) => \n//    fields = record.fields\n// )\n\nasync () => {\n\tawait console.log(airtableMessages)\n}\n\nlet assets;\n\nairtableAssets.find('recHqITRS7cBMwn9i', (err, record) => \n   assets = record.fields\n   )\n\nlet modifiedTranslations = translations;\n\nconst name = assets ?  assets.get('Name') : \"Room\"\n\nmodifiedTranslations.en.motto = airtableMessages && airtableMessages.get('Motto') || 'Learn together, from anywhere.\\nThe future of learning is virtual.\\nEqualizing access to premier quality education.';\nmodifiedTranslations.en[\"sign-in.rename-room\"] = `You'll need to sign in to rename ${name}.`;\nmodifiedTranslations.en[\"sign-in.close-room\"] = `You'll need to sign in to close ${name}.`;\nmodifiedTranslations.en[\"rename-room.message\"] = `Enter the new name for ${name}.`;\nmodifiedTranslations.en[\"rename-room.rename\"] = `Rename ${name}`;\nmodifiedTranslations.en[\"close-room.message\"] =\n  \"Closing this room will remove yourself and others from ${name}, shutting it down permanently.\\n\\nAre you sure? This action cannot be undone.\";\nmodifiedTranslations.en[\"close-room.confirm\"] = `Yes, Close ${name}`;\nmodifiedTranslations.en[\"entry.leave-room\"] = `Leave ${name}`;\nmodifiedTranslations.en[\"entry.in-lobby-notice\"] = `You are viewing ${name} from the lobby.`;\nmodifiedTranslations.en[\"exit.subtitle.kicked\"] = `You have been kicked from ${name}.`;\nmodifiedTranslations.en[\"exit.subtitle.left\"] = `You have left ${name}.`;\nmodifiedTranslations.en[\"exit.subtitle.disconnected\"] = `You have disconnected from ${name}. Refresh the page to try to reconnect.`;\nmodifiedTranslations.en[\"presence.entered_room\"] = `entered ${name}.`;\nmodifiedTranslations.en[\"presence.entered_lobby\"] = `entered ${name}'s lobby.`;\nmodifiedTranslations.en[\"presence.join_lobby\"] = `joined the ${name} lobby.`;\nmodifiedTranslations.en[\"presence.join_room\"] = `joined ${name}.`;\nmodifiedTranslations.en[\"presence.in_lobby\"] = `${name} Lobby`;\nmodifiedTranslations.en[\"presence.in_room\"] = `In ${name}`;\nmodifiedTranslations.en[\"home.create_a_room\"] = `Initialize ${name}`;\nmodifiedTranslations.en[\"home.room_create_button\"] = `Initialize ${name}`;\nmodifiedTranslations.en[\"home.have_code\"] = `Have an ${name} code?`;\nmodifiedTranslations.en[\"commands.leave\"] = `Disconnect from ${name}.`;\nmodifiedTranslations.en[\"settings.rename-room\"] = `Set ${name} Name...`;\nmodifiedTranslations.en[\"settings.close-room\"] = `Close ${name}...`;\nmodifiedTranslations.en[\"settings.room-info\"] = `${name} Info`;\nmodifiedTranslations.en[\"settings.create-room\"] = `New ${name}...`;\nmodifiedTranslations.en[\"settings.row-room\"] = `${name}`;\nmodifiedTranslations.en[\"tips.mobile.object_pin\"] = `Pin an object to save it to ${name}.`;\nmodifiedTranslations.en[\"tips.mobile.object_pin\"] = `Pin an object to save it to ${name}.`;\nmodifiedTranslations.en[\"tips.mobile.invite\"] = `Use the Invite button to share ${name}.`;\nmodifiedTranslations.en[\"tips.desktop.object_pin\"] = `Pin an object to save it to ${name}.`;\n\nexport default modifiedTranslations;","import localeData from \"../axonpark/messages.js\";\n// import localeData from \"../assets/translations.data.json\";\nconst navigatorLang = ((navigator.languages && navigator.languages[0]) || navigator.language || navigator.userLanguage)\n  .toLowerCase()\n  .split(/[_-]+/)[0];\nexport const lang = (localeData[navigatorLang] && navigatorLang) || \"en\";\nexport const messages = localeData[lang] || localeData.en;\n","// A-Frame blows away any npm debug log filters so this allow the user to set the log filter\n// via the query string.\nimport debug from \"debug\";\nimport qsTruthy from \"./qs_truthy\";\n\nconst qs = new URLSearchParams(location.search);\nconst isDebug = qsTruthy(\"debug\");\nconst logFilter = qs.get(\"log_filter\") || (isDebug && \"naf-janus-adapter:*\");\n\nif (logFilter) {\n  debug.enable(logFilter);\n}\n","// This computation is expensive, so we run on at most one avatar per frame, including quiet avatars.\n// However if we detect an avatar is seen speaking (its volume is above DISABLE_AT_VOLUME_THRESHOLD)\n// then we continue analysis for at least DISABLE_GRACE_PERIOD_MS and disable doing it every frame if\n// the avatar is quiet during that entire duration (eg they are muted)\nconst DISABLE_AT_VOLUME_THRESHOLD = 0.00001;\nconst DISABLE_GRACE_PERIOD_MS = 10000;\nconst MIN_VOLUME_THRESHOLD = 0.01;\n\nconst calculateVolume = (analyser, levels) => {\n  // take care with compatibility, e.g. safari doesn't support getFloatTimeDomainData\n  analyser.getByteTimeDomainData(levels);\n  let sum = 0;\n  for (let i = 0; i < levels.length; i++) {\n    const amplitude = (levels[i] - 128) / 128;\n    sum += amplitude * amplitude;\n  }\n  const currVolume = Math.sqrt(sum / levels.length);\n  return currVolume < MIN_VOLUME_THRESHOLD ? 0 : currVolume;\n};\n\nconst tempScaleFromPosition = new THREE.Vector3();\nconst tempScaleToPosition = new THREE.Vector3();\n\nexport function getAudioFeedbackScale(fromObject, toObject, minScale, maxScale, volume) {\n  tempScaleToPosition.setFromMatrixPosition(toObject.matrixWorld);\n  tempScaleFromPosition.setFromMatrixPosition(fromObject.matrixWorld);\n  const distance = tempScaleFromPosition.distanceTo(tempScaleToPosition) / 10;\n  return Math.min(maxScale, minScale + (maxScale - minScale) * volume * 8 * distance);\n}\n\n/**\n * Emits audioFrequencyChange events based on a networked audio source\n * @namespace avatar\n * @component networked-audio-analyser\n */\nAFRAME.registerComponent(\"networked-audio-analyser\", {\n  async init() {\n    this.volume = 0;\n    this.prevVolume = 0;\n    this._updateAnalysis = this._updateAnalysis.bind(this);\n    this._runScheduledWork = this._runScheduledWork.bind(this);\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._updateAnalysis, \"audio-analyser\");\n    this.el.addEventListener(\"sound-source-set\", event => {\n      const ctx = THREE.AudioContext.getContext();\n      this.analyser = ctx.createAnalyser();\n      this.analyser.fftSize = 32;\n      this.levels = new Uint8Array(this.analyser.frequencyBinCount);\n      event.detail.soundSource.connect(this.analyser);\n    });\n  },\n\n  remove: function() {\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._runScheduledWork, \"audio-analyser\");\n  },\n\n  tick: function(t) {\n    if (!this.avatarIsQuiet) {\n      this._updateAnalysis(t);\n    }\n  },\n\n  _runScheduledWork: function() {\n    if (this.avatarIsQuiet) {\n      this._updateAnalysis();\n    }\n  },\n\n  // Updates the analysis/volume. If t is passed, that implies this is called via tick\n  // and so as a performance optimization will check to see if it's been at least DISABLE_GRACE_PERIOD_MS\n  // since the last volume was seen above DISABLE_AT_VOLUME_THRESHOLD, and if so, will disable\n  // tick updates until the volume exceeds the level again.\n  _updateAnalysis: function(t) {\n    if (!this.analyser) return;\n\n    const currentVolume = calculateVolume(this.analyser, this.levels);\n    const s = 0.3;\n    this.volume = s * currentVolume + (1 - s) * this.prevVolume;\n    this.prevVolume = this.volume;\n\n    if (this.volume < DISABLE_AT_VOLUME_THRESHOLD) {\n      if (t && this.lastSeenVolume && this.lastSeenVolume < t - DISABLE_GRACE_PERIOD_MS) {\n        this.avatarIsQuiet = true;\n      }\n    } else {\n      if (t) {\n        this.lastSeenVolume = t;\n      }\n\n      this.avatarIsQuiet = false;\n    }\n  }\n});\n\nfunction connectAnalyser(mediaStream) {\n  const ctx = THREE.AudioContext.getContext();\n  const source = ctx.createMediaStreamSource(mediaStream);\n  const analyser = ctx.createAnalyser();\n  analyser.fftSize = 32;\n  const levels = new Uint8Array(analyser.frequencyBinCount);\n  source.connect(analyser);\n  return { analyser, levels };\n}\n\n/**\n * Calculates volume of the local audio stream.\n */\nAFRAME.registerSystem(\"local-audio-analyser\", {\n  init() {\n    this.volume = 0;\n\n    this.el.addEventListener(\"local-media-stream-created\", e => {\n      const mediaStream = e.detail.mediaStream;\n      if (this.stream) {\n        console.warn(\"media stream changed\", this.stream, mediaStream);\n        // TODO: cleanup?\n      }\n      this.stream = mediaStream;\n      const { analyser, levels } = connectAnalyser(mediaStream);\n      this.analyser = analyser;\n      this.levels = levels;\n    });\n  },\n\n  tick: function() {\n    if (!this.analyser) return;\n    this.volume = calculateVolume(this.analyser, this.levels);\n  }\n});\n\n/**\n * Sets an entity's scale base on audioFrequencyChange events.\n * @namespace avatar\n * @component scale-audio-feedback\n */\nAFRAME.registerComponent(\"scale-audio-feedback\", {\n  schema: {\n    minScale: { default: 1 },\n    maxScale: { default: 2 }\n  },\n\n  init() {\n    this._playerCamera = document.getElementById(\"player-camera\").object3D;\n  },\n\n  tick() {\n    // TODO: come up with a cleaner way to handle this.\n    // bone's are \"hidden\" by scaling them with bone-visibility, without this we would overwrite that.\n    if (!this.el.object3D.visible) return;\n\n    const { minScale, maxScale } = this.data;\n\n    const audioAnalyser = this.el.components[\"networked-audio-analyser\"];\n\n    if (!audioAnalyser) return;\n\n    const { object3D } = this.el;\n\n    const scale = getAudioFeedbackScale(this.el.object3D, this._playerCamera, minScale, maxScale, audioAnalyser.volume);\n\n    object3D.scale.setScalar(scale);\n    object3D.matrixNeedsUpdate = true;\n  }\n});\n\nconst SPRITE_NAMES = {\n  MIC: [\"mic-0.png\", \"mic-1.png\", \"mic-2.png\", \"mic-3.png\", \"mic-4.png\", \"mic-5.png\", \"mic-6.png\", \"mic-7.png\"],\n  MIC_HOVER: [\n    \"mic-0_hover.png\",\n    \"mic-1_hover.png\",\n    \"mic-2_hover.png\",\n    \"mic-3_hover.png\",\n    \"mic-4_hover.png\",\n    \"mic-5_hover.png\",\n    \"mic-6_hover.png\",\n    \"mic-7_hover.png\"\n  ],\n  MIC_OFF: [\n    \"mic-off-0.png\",\n    \"mic-off-1.png\",\n    \"mic-off-2.png\",\n    \"mic-off-3.png\",\n    \"mic-off-4.png\",\n    \"mic-off-5.png\",\n    \"mic-off-6.png\",\n    \"mic-off-7.png\"\n  ],\n  MIC_OFF_HOVER: [\n    \"mic-off-0_hover.png\",\n    \"mic-off-1_hover.png\",\n    \"mic-off-2_hover.png\",\n    \"mic-off-3_hover.png\",\n    \"mic-off-4_hover.png\",\n    \"mic-off-5_hover.png\",\n    \"mic-off-6_hover.png\",\n    \"mic-off-7_hover.png\"\n  ]\n};\n\nexport function micLevelForVolume(volume, max) {\n  return max === 0\n    ? 0\n    : volume < max * 0.02\n      ? 0\n      : volume < max * 0.03\n        ? 1\n        : volume < max * 0.06\n          ? 2\n          : volume < max * 0.08\n            ? 3\n            : volume < max * 0.16\n              ? 4\n              : volume < max * 0.32\n                ? 5\n                : volume < max * 0.5\n                  ? 6\n                  : 7;\n}\n\nAFRAME.registerComponent(\"mic-button\", {\n  schema: {\n    active: { type: \"boolean\" },\n    tooltip: { type: \"selector\" },\n    tooltipText: { type: \"string\" },\n    activeTooltipText: { type: \"string\" }\n  },\n\n  init() {\n    this.loudest = 0;\n    this.prevSpriteName = \"\";\n    this.decayingVolume = 0;\n    this.el.object3D.matrixNeedsUpdate = true;\n    this.hovering = false;\n    this.onHover = () => {\n      this.hovering = true;\n      this.data.tooltip.setAttribute(\"visible\", true);\n    };\n    this.onHoverOut = () => {\n      this.hovering = false;\n      this.data.tooltip.setAttribute(\"visible\", false);\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"hovered\", this.onHover);\n    this.el.object3D.addEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"hovered\", this.onHover);\n    this.el.object3D.removeEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  update() {\n    if (this.data.tooltip) {\n      this.textEl = this.data.tooltip.querySelector(\"[text]\");\n    }\n  },\n\n  tick() {\n    const audioAnalyser = this.el.sceneEl.systems[\"local-audio-analyser\"];\n    let volume;\n    if (audioAnalyser.volume > this.decayingVolume) {\n      this.decayingVolume = audioAnalyser.volume;\n      volume = audioAnalyser.volume;\n      this.loudest = Math.max(this.loudest, volume);\n    } else {\n      const s = 0.8;\n      volume = this.decayingVolume * s > 0.001 ? this.decayingVolume * s : 0;\n      this.decayingVolume = volume;\n    }\n\n    const active = this.data.active;\n    const hovering = this.hovering;\n    const spriteNames =\n      SPRITE_NAMES[!active ? (hovering ? \"MIC_HOVER\" : \"MIC\") : hovering ? \"MIC_OFF_HOVER\" : \"MIC_OFF\"];\n    const level = micLevelForVolume(volume, this.loudest);\n    const spriteName = spriteNames[level];\n    if (spriteName !== this.prevSpriteName) {\n      this.prevSpriteName = spriteName;\n      this.el.setAttribute(\"sprite\", \"name\", spriteName);\n    }\n\n    if (this.data.tooltip && hovering) {\n      this.textEl = this.textEl || this.data.tooltip.querySelector(\"[text]\");\n      this.textEl.setAttribute(\"text\", \"value\", active ? this.data.activeTooltipText : this.data.tooltipText);\n    }\n  }\n});\n","import uuid from \"uuid/v4\";\n\nexport default class AuthChannel {\n  constructor(store) {\n    this.store = store;\n    this.socket = null;\n    this._signedIn = !!this.store.state.credentials.token;\n  }\n\n  setSocket = socket => {\n    this.socket = socket;\n  };\n\n  get email() {\n    return this.store.state.credentials.email;\n  }\n\n  get signedIn() {\n    return this._signedIn;\n  }\n\n  signOut = async hubChannel => {\n    if (hubChannel) {\n      await hubChannel.signOut();\n    }\n    this.store.update({ credentials: { token: null, email: null } });\n    this.store.resetToRandomLegacyAvatar();\n    this._signedIn = false;\n  };\n\n  verifyAuthentication(authTopic, authToken, authPayload) {\n    const channel = this.socket.channel(authTopic);\n    return new Promise((resolve, reject) =>\n      channel\n        .join()\n        .receive(\"ok\", () => {\n          channel.on(\"auth_credentials\", async ({ credentials: token, payload: payload }) => {\n            await this.handleAuthCredentials(payload.email, token);\n            resolve();\n          });\n\n          channel.push(\"auth_verified\", { token: authToken, payload: authPayload });\n        })\n        .receive(\"error\", reject)\n    );\n  }\n\n  async startAuthentication(email, hubChannel) {\n    const channel = this.socket.channel(`auth:${uuid()}`);\n    await new Promise((resolve, reject) =>\n      channel\n        .join()\n        .receive(\"ok\", resolve)\n        .receive(\"error\", reject)\n    );\n\n    const authComplete = new Promise(resolve =>\n      channel.on(\"auth_credentials\", async ({ credentials: token }) => {\n        await this.handleAuthCredentials(email, token, hubChannel);\n        resolve();\n      })\n    );\n\n    channel.push(\"auth_request\", { email, origin: \"hubs\" });\n\n    // Returning an object with the authComplete promise since we want the caller to wait for the above await but not\n    // for authComplete.\n    return { authComplete };\n  }\n\n  async handleAuthCredentials(email, token, hubChannel) {\n    this.store.update({ credentials: { email, token } });\n\n    if (hubChannel) {\n      await hubChannel.signIn(token);\n    }\n\n    this._signedIn = true;\n  }\n}\n","export function addAnimationComponents(modelEl) {\n  if (!modelEl.components[\"animation-mixer\"]) {\n    return;\n  }\n\n  if (!modelEl.querySelector(\"[loop-animation]\")) {\n    modelEl.setAttribute(\"loop-animation\", \"\");\n  }\n}\n","const tempVector3 = new THREE.Vector3();\nconst tempQuaternion = new THREE.Quaternion();\n\nexport function getLastWorldPosition(src, target) {\n  src.updateMatrices();\n  target.setFromMatrixPosition(src.matrixWorld);\n  return target;\n}\n\nexport function getLastWorldQuaternion(src, target) {\n  src.updateMatrices();\n  src.matrixWorld.decompose(tempVector3, target, tempVector3);\n  return target;\n}\n\nexport function getLastWorldScale(src, target) {\n  src.updateMatrices();\n  src.matrixWorld.decompose(tempVector3, tempQuaternion, target);\n  return target;\n}\n\nexport function disposeMaterial(mtrl) {\n  if (mtrl.map) mtrl.map.dispose();\n  if (mtrl.lightMap) mtrl.lightMap.dispose();\n  if (mtrl.bumpMap) mtrl.bumpMap.dispose();\n  if (mtrl.normalMap) mtrl.normalMap.dispose();\n  if (mtrl.specularMap) mtrl.specularMap.dispose();\n  if (mtrl.envMap) mtrl.envMap.dispose();\n  mtrl.dispose();\n}\n\nexport function disposeNode(node) {\n  if (!(node instanceof THREE.Mesh)) return;\n\n  if (node.geometry) {\n    node.geometry.dispose();\n  }\n\n  if (node.material) {\n    let materialArray;\n    if (node.material instanceof THREE.MeshFaceMaterial || node.material instanceof THREE.MultiMaterial) {\n      materialArray = node.material.materials;\n    } else if (node.material instanceof Array) {\n      materialArray = node.material;\n    }\n    if (materialArray) {\n      materialArray.forEach(disposeMaterial);\n    } else {\n      disposeMaterial(node.material);\n    }\n  }\n}\n\nexport function setMatrixWorld(object3D, m) {\n  object3D.matrixWorld.copy(m);\n  object3D.matrix = object3D.matrix.getInverse(object3D.parent.matrixWorld).multiply(object3D.matrixWorld);\n  object3D.matrix.decompose(object3D.position, object3D.quaternion, object3D.scale);\n}\n","export function forEachMaterial(object3D, fn) {\n  if (!object3D.material) return;\n\n  if (Array.isArray(object3D.material)) {\n    object3D.material.forEach(fn);\n  } else {\n    fn(object3D.material);\n  }\n}\n\nexport function mapMaterials(object3D, fn) {\n  if (!object3D.material) return;\n\n  if (Array.isArray(object3D.material)) {\n    return object3D.material.map(fn);\n  } else {\n    return fn(object3D.material);\n  }\n}\n","export default function maskEmail(email) {\n  if (!email) return \"\";\n  const emailParts = email.split(\"@\");\n  const emailIdentity = emailParts[0];\n  const emailDomain = emailParts[1];\n  const truncatedIdentity = emailIdentity.substring(0, Math.min(emailIdentity.length, 3));\n  return `${truncatedIdentity}...@${emailDomain}`;\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport dayjs from \"dayjs-ext\";\nimport relativeTime from \"dayjs-ext/plugin/relativeTime\";\nimport { FormattedMessage } from \"react-intl\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faAngleLeft } from \"@fortawesome/free-solid-svg-icons/faAngleLeft\";\nimport { faAngleRight } from \"@fortawesome/free-solid-svg-icons/faAngleRight\";\nimport { faExternalLinkAlt } from \"@fortawesome/free-solid-svg-icons/faExternalLinkAlt\";\nimport { faPencilAlt } from \"@fortawesome/free-solid-svg-icons/faPencilAlt\";\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons/faPlus\";\n\nimport styles from \"../assets/stylesheets/media-browser.scss\";\nimport { scaledThumbnailUrlFor } from \"../utils/media-url-utils\";\nimport StateLink from \"./state-link\";\n\ndayjs.extend(relativeTime);\n\nconst PUBLISHER_FOR_ENTRY_TYPE = {\n  sketchfab_model: \"Sketchfab\",\n  poly_model: \"Google Poly\",\n  twitch_stream: \"Twitch\"\n};\n\nclass MediaTiles extends Component {\n  static propTypes = {\n    result: PropTypes.object,\n    history: PropTypes.object,\n    urlSource: PropTypes.string,\n    handleEntryClicked: PropTypes.func,\n    handlePager: PropTypes.func\n  };\n\n  render() {\n    const { urlSource, result } = this.props;\n    const entries = (result && result.entries) || [];\n    const [createTileWidth, createTileHeight] = this.getTileDimensions(false, urlSource === \"avatars\");\n    const searchParams = new URLSearchParams((this.props.history ? this.props.history.location : location).search);\n    const hasMeta = !!(result && result.meta);\n    const apiSource = (hasMeta && result.meta.source) || null;\n    const isVariableWidth = result && [\"bing_images\", \"tenor\"].includes(apiSource);\n    const hasNext = !!(hasMeta && result.meta.next_cursor) || false;\n    const hasPrevious = searchParams.get(\"cursor\");\n\n    return (\n      <div className={styles.body}>\n        <div className={classNames({ [styles.tiles]: true, [styles.tilesVariable]: isVariableWidth })}>\n          {(urlSource === \"avatars\" || urlSource === \"scenes\") && (\n            <div\n              style={{ width: `${createTileWidth}px`, height: `${createTileHeight}px` }}\n              className={classNames(styles.tile, styles.createTile)}\n            >\n              {urlSource === \"scenes\" ? (\n                <a href=\"/spoke/new\" rel=\"noopener noreferrer\" target=\"_blank\" className={styles.tileLink}>\n                  <div className={styles.tileContent}>\n                    <FontAwesomeIcon icon={faPlus} />\n                    <FormattedMessage id=\"media-browser.create-scene\" />\n                  </div>\n                </a>\n              ) : (\n                <a\n                  onClick={e => {\n                    e.preventDefault();\n                    window.dispatchEvent(new CustomEvent(\"action_create_avatar\"));\n                  }}\n                  className={styles.tileLink}\n                >\n                  <div className={styles.tileContent}>\n                    <FontAwesomeIcon icon={faPlus} />\n                    <FormattedMessage id=\"media-browser.create-avatar\" />\n                  </div>\n                </a>\n              )}\n            </div>\n          )}\n\n          {entries.map(this.entryToTile)}\n        </div>\n\n        {result &&\n          (hasNext || hasPrevious) &&\n          this.props.handlePager && (\n            <div className={styles.pager}>\n              <a\n                className={classNames({ [styles.previousPage]: true, [styles.pagerButtonDisabled]: !hasPrevious })}\n                onClick={() => this.props.handlePager(-1)}\n              >\n                <FontAwesomeIcon icon={faAngleLeft} />\n              </a>\n              <div className={styles.pageNumber}>{result.meta.page}</div>\n              <a\n                className={classNames({ [styles.nextPage]: true, [styles.pagerButtonDisabled]: !hasNext })}\n                onClick={() => this.props.handlePager(1)}\n              >\n                <FontAwesomeIcon icon={faAngleRight} />\n              </a>\n            </div>\n          )}\n      </div>\n    );\n  }\n\n  getTileDimensions = (isImage, isAvatar, imageAspect) => {\n    // Doing breakpointing here, so we can have proper image placeholder based upon dynamic aspect ratio\n    const clientWidth = window.innerWidth;\n    let imageHeight = clientWidth < 1079 ? (clientWidth < 768 ? (clientWidth < 400 ? 85 : 100) : 150) : 200;\n    if (isAvatar) imageHeight = Math.floor(imageHeight * 1.5);\n\n    // Aspect ratio can vary per image if its an image result. Avatars are a taller portrait aspect, o/w assume 720p\n    let imageWidth;\n    if (isImage) {\n      imageWidth = Math.floor(Math.max(imageAspect * imageHeight, imageHeight * 0.85));\n    } else if (isAvatar) {\n      imageWidth = Math.floor((9 / 16) * imageHeight);\n    } else {\n      imageWidth = Math.floor(Math.max((16 / 9) * imageHeight, imageHeight * 0.85));\n    }\n\n    return [imageWidth, imageHeight];\n  };\n\n  entryToTile = (entry, idx) => {\n    const imageSrc = entry.images.preview.url;\n    const creator = entry.attributions && entry.attributions.creator;\n    const isImage = entry.type.endsWith(\"_image\");\n    const isAvatar = [\"avatar\", \"avatar_listing\"].includes(entry.type);\n    const isHub = [\"hub\"].includes(entry.type);\n    const imageAspect = entry.images.preview.width / entry.images.preview.height;\n\n    const [imageWidth, imageHeight] = this.getTileDimensions(isImage, isAvatar, imageAspect);\n\n    const publisherName =\n      (entry.attributions && entry.attributions.publisher && entry.attributions.publisher.name) ||\n      PUBLISHER_FOR_ENTRY_TYPE[entry.type];\n\n    return (\n      <div style={{ width: `${imageWidth}px` }} className={styles.tile} key={`${entry.id}_${idx}`}>\n        <a\n          href={entry.url}\n          rel=\"noreferrer noopener\"\n          onClick={e => this.props.handleEntryClicked && this.props.handleEntryClicked(e, entry)}\n          className={styles.tileLink}\n          style={{ width: `${imageWidth}px`, height: `${imageHeight}px` }}\n        >\n          <img\n            className={classNames(styles.tileContent, styles.avatarTile)}\n            src={scaledThumbnailUrlFor(imageSrc, imageWidth, imageHeight)}\n          />\n        </a>\n        {entry.type === \"avatar\" && (\n          <StateLink\n            className={styles.editAvatar}\n            stateKey=\"overlay\"\n            stateValue=\"avatar-editor\"\n            stateDetail={{ avatarId: entry.id }}\n            history={this.props.history}\n          >\n            <FontAwesomeIcon icon={faPencilAlt} />\n          </StateLink>\n        )}\n        {!entry.type.endsWith(\"_image\") && (\n          <div className={styles.info}>\n            <a\n              href={entry.url}\n              rel=\"noreferrer noopener\"\n              className={styles.name}\n              onClick={e => this.props.handleEntryClicked && this.props.handleEntryClicked(e, entry)}\n            >\n              {entry.name || \"\\u00A0\"}\n            </a>\n            {!isAvatar &&\n              !isHub && (\n                <div className={styles.attribution}>\n                  <div className={styles.creator}>\n                    {creator && creator.name === undefined && <span>{creator}</span>}\n                    {creator && creator.name && !creator.url && <span>{creator.name}</span>}\n                    {creator &&\n                      creator.name &&\n                      creator.url && (\n                        <a href={creator.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                          {creator.name}\n                        </a>\n                      )}\n                  </div>\n                  {publisherName && (\n                    <div className={styles.publisher}>\n                      <i>\n                        <FontAwesomeIcon icon={faExternalLinkAlt} />\n                      </i>\n                      &nbsp;<a href={entry.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                        {publisherName}\n                      </a>\n                    </div>\n                  )}\n                </div>\n              )}\n            {isHub && (\n              <div className={styles.attribution}>\n                <div className={styles.lastJoined}>\n                  <FormattedMessage id=\"media-browser.hub.joined-prefix\" />\n                  {dayjs(entry.last_activated_at).fromNow()}\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  };\n}\nexport default MediaTiles;\n","const THREE = AFRAME.THREE;\n\nfunction checkFloatTextureSupport() {\n  const renderer = new THREE.WebGLRenderer();\n\n  const scene = new THREE.Scene();\n  const size = 2;\n  const data = new Float32Array(size * size * 4);\n  const dataTexture = new THREE.DataTexture(data, size, size, THREE.RGBAFormat, THREE.FloatType);\n  const box = new THREE.Mesh(new THREE.PlaneBufferGeometry(1, 1), new THREE.MeshBasicMaterial({ map: dataTexture }));\n  box.material.map.needsUpdate = true;\n  scene.add(box);\n\n  renderer.render(scene, new THREE.Camera());\n  const result = renderer.context.getError() === 0;\n  renderer.dispose();\n  return result;\n}\n\nexport function patchWebGLRenderingContext() {\n  if (/Android.+Firefox/.test(navigator.userAgent)) {\n    // It appears that Galaxy S6 devices falsely report that they support\n    // OES_texture_float in Firefox. This workaround disables float textures\n    // for those devices.\n    // See https://github.com/mozilla/hubs/issues/32 and\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1338656\n    const originalGetExtension = WebGLRenderingContext.prototype.getExtension;\n    const supportsFloatTextures = checkFloatTextureSupport();\n    WebGLRenderingContext.prototype.getExtension = function patchedGetExtension(name) {\n      if (name === \"OES_texture_float\" && !supportsFloatTextures) {\n        return null;\n      }\n      return originalGetExtension.call(this, name);\n    };\n  }\n}\n","module.exports = __webpack_public_path__ + \"assets/LoadingObject_Atom-7dcc3b81897e68b740c1cf12b6cf4c3f.glb\";","module.exports = __webpack_public_path__ + \"assets/sfx/teleport-loop-84e2caa4f62e5c6d6ce339b0c715c06d.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/quickTurn-cda89edb1a7a32e4442cac70cd2694be.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/tap_mellow-673398d6e97818ec4b675708d460bd0f.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/PenSpawn-aac1f534773040f0fafa41e9db76017b.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/PenDraw1-ddbdc17a6beefecbca2685c8c9d0d2d5.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/PicSnapHey-0228ddd197e5a6d88f7bcd2ceb340f8e.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/welcome-0083300978d5dd05eaa376f65761da47.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/quack-1f18502834f8f1db43990b769c2ab193.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/specialquack-6d1a192a6092e8dfed5d3de063755ee2.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/pop-5784f3bcfaf98637147737448d6df8df.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/Eb_blip-8d7302990e83d6798400a6027dce3936.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/tack-0d55b064794faaa1733fcf6bc89cad0c.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/A_bendUp-de32e556413bb2a527fb514984738c70.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/suspense-f27c64840e5ede36ec694c22a030615c.mp3\";","module.exports = __webpack_public_path__ + \"assets/waternormals-4418dde3f6abc21dc32506acf5f5b093.jpg\";","import { avatars } from \"../assets/avatars/avatars.js\";\n\nconst names = [\n  \"Baers-Pochard\",\n  \"Baikal-Teal\",\n  \"Barrows-Goldeneye\",\n  \"Blue-Billed\",\n  \"Blue-Duck\",\n  \"Blue-Winged\",\n  \"Brown-Teal\",\n  \"Bufflehead\",\n  \"Canvasback\",\n  \"Cape-Shoveler\",\n  \"Chestnut-Teal\",\n  \"Chiloe-Wigeon\",\n  \"Cinnamon-Teal\",\n  \"Comb-Duck\",\n  \"Common-Eider\",\n  \"Common-Goldeneye\",\n  \"Common-Merganser\",\n  \"Common-Pochard\",\n  \"Common-Scoter\",\n  \"Common-Shelduck\",\n  \"Cotton-Pygmy\",\n  \"Crested-Duck\",\n  \"Crested-Shelduck\",\n  \"Eatons-Pintail\",\n  \"Falcated\",\n  \"Ferruginous\",\n  \"Freckled-Duck\",\n  \"Gadwall\",\n  \"Garganey\",\n  \"Greater-Scaup\",\n  \"Green-Pygmy\",\n  \"Grey-Teal\",\n  \"Hardhead\",\n  \"Harlequin\",\n  \"Hartlaubs\",\n  \"Hooded-Merganser\",\n  \"Hottentot-Teal\",\n  \"Kelp-Goose\",\n  \"King-Eider\",\n  \"Lake-Duck\",\n  \"Laysan-Duck\",\n  \"Lesser-Scaup\",\n  \"Long-Tailed\",\n  \"Maccoa-Duck\",\n  \"Mallard\",\n  \"Mandarin\",\n  \"Marbled-Teal\",\n  \"Mellers-Duck\",\n  \"Merganser\",\n  \"Northern-Pintail\",\n  \"Orinoco-Goose\",\n  \"Paradise-Shelduck\",\n  \"Plumed-Whistler\",\n  \"Puna-Teal\",\n  \"Pygmy-Goose\",\n  \"Radjah-Shelduck\",\n  \"Red-Billed\",\n  \"Red-Crested\",\n  \"Red-Shoveler\",\n  \"Ring-Necked\",\n  \"Ringed-Teal\",\n  \"Rosy-Billed\",\n  \"Ruddy-Shelduck\",\n  \"Salvadoris-Teal\",\n  \"Scaly-Sided\",\n  \"Shelduck\",\n  \"Shoveler\",\n  \"Silver-Teal\",\n  \"Smew\",\n  \"Spectacled-Eider\",\n  \"Spot-Billed\",\n  \"Spotted-Whistler\",\n  \"Steamerduck\",\n  \"Stellers-Eider\",\n  \"Sunda-Teal\",\n  \"Surf-Scoter\",\n  \"Tufted-Duck\",\n  \"Velvet-Scoter\",\n  \"Wandering-Whistler\",\n  \"Whistling-duck\",\n  \"White-Backed\",\n  \"White-Cheeked\",\n  \"White-Winged\",\n  \"Wigeon\",\n  \"Wood-Duck\",\n  \"Yellow-Billed\"\n];\n\nfunction selectRandom(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nexport function generateRandomName() {\n  return `${selectRandom(names)}-${Math.floor(10000 + Math.random() * 10000)}`;\n}\n\nexport const avatarIds = avatars.map(av => av.id);\n\nexport function generateDefaultProfile() {\n  return {\n    avatarId: selectRandom(avatarIds)\n  };\n}\n","import { Validator } from \"jsonschema\";\nimport merge from \"deepmerge\";\nimport Cookies from \"js-cookie\";\nimport jwtDecode from \"jwt-decode\";\n\nconst LOCAL_STORE_KEY = \"___hubs_store\";\nconst STORE_STATE_CACHE_KEY = Symbol();\nconst OAUTH_FLOW_CREDENTIALS_KEY = \"ret-oauth-flow-account-credentials\";\nconst validator = new Validator();\nimport { EventTarget } from \"event-target-shim\";\nimport { generateDefaultProfile, generateRandomName } from \"../utils/identity.js\";\n\n// Durable (via local-storage) schema-enforced state that is meant to be consumed via forward data flow.\n// (Think flux but with way less incidental complexity, at least for now :))\nexport const SCHEMA = {\n  id: \"/HubsStore\",\n\n  definitions: {\n    profile: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        displayName: { type: \"string\", pattern: \"^[A-Za-z0-9-]{3,32}$\" },\n        avatarId: { type: \"string\" },\n        personalAvatarId: { type: \"string\" }\n      }\n    },\n\n    credentials: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        token: { type: [\"null\", \"string\"] },\n        email: { type: [\"null\", \"string\"] }\n      }\n    },\n\n    activity: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        hasFoundFreeze: { type: \"boolean\" },\n        hasChangedName: { type: \"boolean\" },\n        hasAcceptedProfile: { type: \"boolean\" },\n        lastEnteredAt: { type: \"string\" },\n        hasPinned: { type: \"boolean\" },\n        hasRotated: { type: \"boolean\" },\n        hasRecentered: { type: \"boolean\" },\n        hasScaled: { type: \"boolean\" },\n        hasHoveredInWorldHud: { type: \"boolean\" },\n        hasOpenedShare: { type: \"boolean\" },\n        entryCount: { type: \"number\" }\n      }\n    },\n\n    settings: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        lastUsedMicDeviceId: { type: \"string\" }\n      }\n    },\n\n    // Legacy\n    confirmedDiscordRooms: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n\n    confirmedBroadcastedRooms: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n\n    uploadPromotionTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          fileId: { type: \"string\" },\n          promotionToken: { type: \"string\" }\n        }\n      }\n    },\n\n    creatorAssignmentTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          creatorAssignmentToken: { type: \"string\" }\n        }\n      }\n    },\n\n    embedTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          embedToken: { type: \"string\" }\n        }\n      }\n    },\n\n    onLoadActions: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          action: { type: \"string\" },\n          args: { type: \"object\" }\n        }\n      }\n    }\n  },\n\n  type: \"object\",\n\n  properties: {\n    profile: { $ref: \"#/definitions/profile\" },\n    credentials: { $ref: \"#/definitions/credentials\" },\n    activity: { $ref: \"#/definitions/activity\" },\n    settings: { $ref: \"#/definitions/settings\" },\n    confirmedDiscordRooms: { $ref: \"#/definitions/confirmedDiscordRooms\" }, // Legacy\n    confirmedBroadcastedRooms: { $ref: \"#/definitions/confirmedBroadcastedRooms\" },\n    uploadPromotionTokens: { $ref: \"#/definitions/uploadPromotionTokens\" },\n    creatorAssignmentTokens: { $ref: \"#/definitions/creatorAssignmentTokens\" },\n    embedTokens: { $ref: \"#/definitions/embedTokens\" },\n    onLoadActions: { $ref: \"#/definitions/onLoadActions\" }\n  },\n\n  additionalProperties: false\n};\n\nexport default class Store extends EventTarget {\n  constructor() {\n    super();\n\n    if (localStorage.getItem(LOCAL_STORE_KEY) === null) {\n      localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify({}));\n    }\n\n    // When storage is updated in another window\n    window.addEventListener(\"storage\", e => {\n      if (e.key !== LOCAL_STORE_KEY) return;\n      delete this[STORE_STATE_CACHE_KEY];\n      this.dispatchEvent(new CustomEvent(\"statechanged\"));\n    });\n\n    this.update({\n      activity: {},\n      settings: {},\n      credentials: {},\n      profile: {},\n      confirmedDiscordRooms: [],\n      confirmedBroadcastedRooms: [],\n      uploadPromotionTokens: [],\n      creatorAssignmentTokens: [],\n      embedTokens: [],\n      onLoadActions: []\n    });\n\n    const oauthFlowCredentials = Cookies.getJSON(OAUTH_FLOW_CREDENTIALS_KEY);\n    if (oauthFlowCredentials) {\n      this.update({ credentials: oauthFlowCredentials });\n      this.resetToRandomLegacyAvatar();\n      Cookies.remove(OAUTH_FLOW_CREDENTIALS_KEY);\n    }\n  }\n\n  // Initializes store with any default bits\n  init = () => {\n    this.update({\n      profile: { ...generateDefaultProfile(), ...(this.state.profile || {}) }\n    });\n\n    // Regenerate name to encourage users to change it.\n    if (!this.state.activity.hasChangedName) {\n      this.update({ profile: { displayName: generateRandomName() } });\n    }\n  };\n\n  resetToRandomLegacyAvatar = () => {\n    this.update({\n      profile: { ...(this.state.profile || {}), ...generateDefaultProfile() }\n    });\n  };\n\n  get state() {\n    if (!this.hasOwnProperty(STORE_STATE_CACHE_KEY)) {\n      this[STORE_STATE_CACHE_KEY] = JSON.parse(localStorage.getItem(LOCAL_STORE_KEY));\n    }\n\n    return this[STORE_STATE_CACHE_KEY];\n  }\n\n  get credentialsAccountId() {\n    if (this.state.credentials.token) {\n      return jwtDecode(this.state.credentials.token).sub;\n    } else {\n      return null;\n    }\n  }\n\n  resetConfirmedBroadcastedRooms() {\n    this.clearStoredArray(\"confirmedBroadcastedRooms\");\n  }\n\n  resetTipActivityFlags() {\n    this.update({\n      activity: { hasRotated: false, hasPinned: false, hasRecentered: false, hasScaled: false, entryCount: 0 }\n    });\n  }\n\n  bumpEntryCount() {\n    const currentEntryCount = this.state.activity.entryCount || 0;\n    this.update({ activity: { entryCount: currentEntryCount + 1 } });\n  }\n\n  // Sets a one-time action to perform the next time the page loads\n  enqueueOnLoadAction(action, args) {\n    this.update({ onLoadActions: [{ action, args }] });\n  }\n\n  executeOnLoadActions(sceneEl) {\n    for (let i = 0; i < this.state.onLoadActions.length; i++) {\n      const { action, args } = this.state.onLoadActions[i];\n\n      if (action === \"emit_scene_event\") {\n        sceneEl.emit(args.event, args.detail);\n      }\n    }\n\n    this.clearOnLoadActions();\n  }\n\n  clearOnLoadActions() {\n    this.clearStoredArray(\"onLoadActions\");\n  }\n\n  clearStoredArray(key) {\n    const overwriteMerge = (destinationArray, sourceArray) => sourceArray;\n    const update = {};\n    update[key] = [];\n\n    this.update(update, { arrayMerge: overwriteMerge });\n  }\n\n  update(newState, mergeOpts) {\n    const finalState = merge(this.state, newState, mergeOpts);\n    const { valid } = validator.validate(finalState, SCHEMA);\n\n    if (!valid) {\n      // Intentionally not including details about the state or validation result here, since we don't want to leak\n      // sensitive data in the error message.\n      throw new Error(`Write to store failed schema validation.`);\n    }\n\n    localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify(finalState));\n    delete this[STORE_STATE_CACHE_KEY];\n\n    if (newState.profile !== undefined) {\n      this.dispatchEvent(new CustomEvent(\"profilechanged\"));\n    }\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    return finalState;\n  }\n}\n","// NOTE: We do not use an IV since we generate a new keypair each time we use these routines.\n\nasync function deriveKey(privateKey, publicKey) {\n  return crypto.subtle.deriveKey(\n    { name: \"ECDH\", public: publicKey },\n    privateKey,\n    { name: \"AES-CBC\", length: 256 },\n    true,\n    [\"encrypt\", \"decrypt\"]\n  );\n}\n\nasync function publicKeyToString(key) {\n  return JSON.stringify(await crypto.subtle.exportKey(\"jwk\", key));\n}\n\nasync function stringToPublicKey(s) {\n  return await crypto.subtle.importKey(\"jwk\", JSON.parse(s), { name: \"ECDH\", namedCurve: \"P-256\" }, true, []);\n}\n\nfunction stringToArrayBuffer(s) {\n  const buf = new Uint8Array(s.length);\n\n  for (let i = 0; i < s.length; i++) {\n    buf[i] = s.charCodeAt(i);\n  }\n\n  return buf;\n}\n\nfunction arrayBufferToString(b) {\n  const buf = new Uint8Array(b);\n  let s = \"\";\n\n  for (let i = 0; i < buf.byteLength; i++) {\n    s += String.fromCharCode(buf[i]);\n  }\n\n  return s;\n}\n\n// This allows a single object to be passed encrypted from a receiver in a req -> response flow\n\n// Requestor generates a public key and private key, and should send the public key to receiver.\nexport async function generateKeys() {\n  const keyPair = await crypto.subtle.generateKey({ name: \"ECDH\", namedCurve: \"P-256\" }, true, [\"deriveKey\"]);\n  const publicKeyString = await publicKeyToString(keyPair.publicKey);\n  return { publicKeyString, privateKey: keyPair.privateKey };\n}\n\n// Receiver takes the public key from requestor and passes obj to get a response public key and the encrypted data to return.\nexport async function generatePublicKeyAndEncryptedObject(incomingPublicKeyString, obj) {\n  const iv = new Uint8Array(16);\n  const incomingPublicKey = await stringToPublicKey(incomingPublicKeyString);\n  const keyPair = await crypto.subtle.generateKey({ name: \"ECDH\", namedCurve: \"P-256\" }, true, [\"deriveKey\"]);\n  const publicKeyString = await publicKeyToString(keyPair.publicKey);\n  const secret = await deriveKey(keyPair.privateKey, incomingPublicKey);\n\n  const encryptedData = btoa(\n    arrayBufferToString(\n      await crypto.subtle.encrypt({ name: \"AES-CBC\", iv }, secret, stringToArrayBuffer(JSON.stringify(obj)))\n    )\n  );\n\n  return { publicKeyString, encryptedData };\n}\n\n// Requestor then takes the receiver's public key, the private key (returned from generateKeys()), and the data from the receiver.\nexport async function decryptObject(publicKeyString, privateKey, base64value) {\n  const iv = new Uint8Array(16);\n  const publicKey = await stringToPublicKey(publicKeyString);\n  const secret = await deriveKey(privateKey, publicKey);\n  const ciphertext = stringToArrayBuffer(atob(base64value));\n  const data = await crypto.subtle.decrypt({ name: \"AES-CBC\", iv }, secret, ciphertext);\n  return JSON.parse(arrayBufferToString(data));\n}\n","import { generatePublicKeyAndEncryptedObject, generateKeys, decryptObject } from \"./crypto\";\n\nconst LINK_ACTION_TIMEOUT = 10000;\n\nexport default class LinkChannel {\n  constructor(store) {\n    this.store = store;\n  }\n\n  setSocket = socket => {\n    this.socket = socket;\n  };\n\n  // Returns a promise that, when resolved, will forward an object with three keys:\n  //\n  // code: The code that was made available to use for link.\n  //\n  // cancel: A function that the caller can call to cancel the use of the code.\n  //\n  // onFinished: A promise that, when resolved, indicates the code is no longer usable,\n  // because it was either successfully used by the remote device or it has expired\n  // (\"used\" or \"expired\" is passed to the callback).\n  generateCode = () => {\n    return new Promise(resolve => {\n      const onFinished = new Promise(finished => {\n        const step = () => {\n          const getLetter = () => \"ABCDEFGHI\"[Math.floor(Math.random() * 9)];\n          const code = `${getLetter()}${getLetter()}${getLetter()}${getLetter()}`;\n\n          // Only respond to one link_request in this channel.\n          let readyToSend = false;\n          let leftChannel = false;\n\n          const channel = this.socket.channel(`link:${code}`, { timeout: LINK_ACTION_TIMEOUT });\n\n          const leave = () => {\n            if (!leftChannel) channel.leave();\n            leftChannel = true;\n          };\n\n          const cancel = () => leave();\n\n          channel.on(\"link_expired\", () => finished(\"expired\"));\n\n          channel.on(\"presence_state\", state => {\n            if (readyToSend) return;\n\n            if (Object.keys(state).length > 0) {\n              // Code is in use by someone else, try a new one\n              step();\n            } else {\n              readyToSend = true;\n              resolve({ code, cancel, onFinished });\n            }\n          });\n\n          channel.on(\"link_request\", incoming => {\n            if (readyToSend) {\n              const data = { path: location.pathname };\n\n              // Copy profile data to link'ed device if it's been set.\n              if (this.store.state.activity.hasChangedName) {\n                data.profile = { ...this.store.state.profile };\n              }\n              data.credentials = { ...this.store.state.credentials };\n\n              generatePublicKeyAndEncryptedObject(incoming.public_key, data).then(\n                ({ publicKeyString, encryptedData }) => {\n                  const payload = {\n                    target_session_id: incoming.reply_to_session_id,\n                    public_key: publicKeyString,\n                    data: encryptedData\n                  };\n\n                  if (!leftChannel) {\n                    channel.push(\"link_response\", payload);\n                  }\n\n                  leave();\n\n                  finished(\"used\");\n                  readyToSend = false;\n                }\n              );\n            }\n          });\n\n          channel.join().receive(\"error\", r => console.error(r));\n        };\n\n        step();\n      });\n    });\n  };\n\n  // Attempts to receive a link payload from a remote device using the given code.\n  //\n  // Promise rejects if the code is invalid or there is a problem with the channel.\n  // Promise resolves and passes payload of link source on successful link.\n  attemptLink = code => {\n    return new Promise((resolve, reject) => {\n      const channel = this.socket.channel(`link:${code}`, { timeout: LINK_ACTION_TIMEOUT });\n      let finished = false;\n\n      generateKeys().then(({ publicKeyString, privateKey }) => {\n        channel.on(\"presence_state\", state => {\n          const numOccupants = Object.keys(state).length;\n\n          if (numOccupants === 1) {\n            // Great, only sender is in topic, request link\n            channel.push(\"link_request\", {\n              reply_to_session_id: this.socket.params().session_id,\n              public_key: publicKeyString\n            });\n\n            setTimeout(() => {\n              if (finished) return;\n              channel.leave();\n              reject(new Error(\"no_response\"));\n            }, LINK_ACTION_TIMEOUT);\n          } else if (numOccupants === 0) {\n            // Nobody in this channel, probably a bad code.\n            channel.leave();\n            reject(new Error(\"failed\"));\n          } else {\n            console.warn(\"link code channel already has 2 or more occupants, something fishy is going on.\");\n            channel.leave();\n            reject(new Error(\"in_use\"));\n          }\n        });\n\n        channel.on(\"link_response\", payload => {\n          finished = true;\n          channel.leave();\n\n          decryptObject(payload.public_key, privateKey, payload.data).then(resolve);\n        });\n\n        channel\n          .join()\n          .receive(\"ok\", data => (this.socket.params().session_id = data.session_id))\n          .receive(\"error\", r => console.error(r));\n      });\n    });\n  };\n}\n","import screenfull from \"screenfull\";\nimport { showFullScreenIfWasFullScreen } from \"./fullscreen\";\nconst { detect } = require(\"detect-browser\");\n\nconst browser = detect();\nlet isExitingFullscreenDueToFocus = false;\n\n// Utility function that handles a bunch of incidental stuff related to text fields:\n//\n// - On non-mobile platforms, selects the value on focus\n// - If full screen, exits/enters full screen because of firefox full screen issues\nexport function handleTextFieldFocus(target) {\n  if (!window.AFRAME) return;\n  const isMobile = AFRAME.utils.device.isMobile();\n\n  if (screenfull.isFullscreen && !AFRAME.utils.device.isMobileVR() && browser.name === \"firefox\") {\n    // This will prevent focus, but its the only way to avoid getting into a\n    // weird \"firefox reports full screen but actually not\". You end up having to tap\n    // twice to ultimately get the focus.\n    //\n    // We need to keep track of a bit here so that we don't re-full screen when\n    // the text box is blurred by the browser.\n\n    isExitingFullscreenDueToFocus = true;\n    screenfull.exit().then(() => {\n      target.focus();\n    });\n  }\n\n  if (!isMobile) target.select();\n}\n\nexport function handleTextFieldBlur() {\n  // This is the incidental blur event when exiting fullscreen mode on mobile\n  if (isExitingFullscreenDueToFocus) {\n    isExitingFullscreenDueToFocus = false;\n    return;\n  }\n\n  showFullScreenIfWasFullScreen();\n}\n","module.exports = __webpack_public_path__ + \"assets/images/mic_denied-5ce12e4dc9b5eb42ce69b753c46c2174.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_denied@2x-127a94ff73b93a0b4ac89682ce836b91.png\";","// Enumeration of spawned object content origins. URL means the content is\n// fetched from a URL, FILE means it was an uploaded/dropped file, and\n// CLIPBOARD means it was raw data pasted in from the clipboard, SPAWNER means\n// it was copied over from a spawner.\nexport const ObjectContentOrigins = {\n  URL: 1,\n  FILE: 2,\n  CLIPBOARD: 3,\n  SPAWNER: 4\n};\n\n// Enumeration of spawnable object types, used for telemetry, which encapsulates\n// both the origin of the content for the object and also the type of content\n// contained in the object.\nexport const ObjectTypes = {\n  URL_IMAGE: 0,\n  URL_VIDEO: 1,\n  URL_MODEL: 2,\n  URL_PDF: 3,\n  URL_AUDIO: 4,\n  //URL_TEXT: 5,\n  //URL_TELEPORTER: 6,\n  FILE_IMAGE: 8,\n  FILE_VIDEO: 9,\n  FILE_MODEL: 10,\n  FILE_PDF: 11,\n  FILE_AUDIO: 12,\n  //FILE_TEXT: 13,\n  CLIPBOARD_IMAGE: 16,\n  CLIPBOARD_VIDEO: 17,\n  CLIPBOARD_MODEL: 18,\n  CLIPBOARD_PDF: 19,\n  CLIPBOARD_AUDIO: 20,\n  //CLIPBOARD_TEXT: 21,\n  SPAWNER_IMAGE: 24,\n  SPAWNER_VIDEO: 25,\n  SPAWNER_MODEL: 26,\n  SPAWNER_PDF: 27,\n  SPAWNER_AUDIO: 28,\n  //SPAWNER_TEXT: 29,\n  CAMERA: 30,\n  UNKNOWN: 31\n};\n\n// Given an origin and three object type values for URL, FILE, and CLIPBOARD\n// origins respectively, return the appropriate one\nfunction objectTypeForOrigin(contentOrigin, urlType, fileType, clipboardType, spawnerType) {\n  if (contentOrigin === ObjectContentOrigins.URL) {\n    return urlType;\n  } else if (contentOrigin === ObjectContentOrigins.FILE) {\n    return fileType;\n  } else if (contentOrigin === ObjectContentOrigins.CLIPBOARD) {\n    return clipboardType;\n  } else {\n    return spawnerType;\n  }\n}\n\n// Lookup table of mime-type prefixes to the set of object types that we should use\n// for objects spawned matching their underlying Content-Type.\nconst objectTypeMimePrefixLookupMap = {\n  \"image/\": [ObjectTypes.URL_IMAGE, ObjectTypes.FILE_IMAGE, ObjectTypes.CLIPBOARD_IMAGE, ObjectTypes.SPAWNER_IMAGE],\n  \"model/\": [ObjectTypes.URL_MODEL, ObjectTypes.FILE_MODEL, ObjectTypes.CLIPBOARD_MODEL, ObjectTypes.SPAWNER_MODEL],\n  \"application/x-zip-compressed\": [\n    ObjectTypes.URL_MODEL,\n    ObjectTypes.FILE_MODEL,\n    ObjectTypes.CLIPBOARD_MODEL,\n    ObjectTypes.SPAWNER_MODEL\n  ],\n  \"video/\": [ObjectTypes.URL_VIDEO, ObjectTypes.FILE_VIDEO, ObjectTypes.CLIPBOARD_VIDEO, ObjectTypes.SPAWNER_VIDEO],\n  \"application/vnd.apple.mpegurl\": [\n    ObjectTypes.URL_VIDEO,\n    ObjectTypes.FILE_VIDEO,\n    ObjectTypes.CLIPBOARD_VIDEO,\n    ObjectTypes.SPAWNER_VIDEO\n  ],\n  \"application/x-mpegurl\": [\n    ObjectTypes.URL_VIDEO,\n    ObjectTypes.FILE_VIDEO,\n    ObjectTypes.CLIPBOARD_VIDEO,\n    ObjectTypes.SPAWNER_VIDEO\n  ],\n  \"audio/\": [ObjectTypes.URL_AUDIO, ObjectTypes.FILE_AUDIO, ObjectTypes.CLIPBOARD_AUDIO, ObjectTypes.SPAWNER_AUDIO],\n  \"application/pdf\": [ObjectTypes.URL_PDF, ObjectTypes.FILE_PDF, ObjectTypes.CLIPBOARD_PDF, ObjectTypes.SPAWNER_PDF]\n};\n\nconst srcSuffixLookupMap = {\n  \".m3u8\": [ObjectTypes.URL_VIDEO, ObjectTypes.FILE_VIDEO, ObjectTypes.CLIPBOARD_VIDEO, ObjectTypes.SPAWNER_VIDEO]\n};\n\n// Given an content origin and the resolved mime type of a piece of content, return\n// the ObjectType, if any, for that content.\nexport function objectTypeForOriginAndContentType(contentOrigin, contentType, src) {\n  for (const prefix in objectTypeMimePrefixLookupMap) {\n    if (contentType.toLowerCase().startsWith(prefix)) {\n      const types = objectTypeMimePrefixLookupMap[prefix];\n      return objectTypeForOrigin(contentOrigin, ...types);\n    }\n  }\n\n  if (src) {\n    for (const suffix in srcSuffixLookupMap) {\n      if (src.toLowerCase().endsWith(suffix)) {\n        const types = srcSuffixLookupMap[suffix];\n        return objectTypeForOrigin(contentOrigin, ...types);\n      }\n    }\n  }\n\n  return ObjectTypes.UNKNOWN;\n}\n","export const avatars = [\n  {\n    id: \"botdefault\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotDefault_Avatar-9f71f8ff22.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botdefault-thumb-42C4C7D3C01D085EAFDAC8BACE591CE6.png\"\n  },\n  {\n    id: \"botbobo\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotBobo_Avatar-f9740a010b.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botbobo-thumb-261278FD5831E9CD89610D15948F23E4.png\"\n  },\n  {\n    id: \"botdom\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotDom_Avatar-0c48bf15a5.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botdom-thumb-1160EB5E81D24F12CE643C520CE1E99E.png\"\n  },\n  {\n    id: \"botgreg\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotGreg_Avatar-98d39797bb.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botgreg-thumb-F2A37F14F9C342EE44DDE9B24DD9B9FC.png\"\n  },\n  {\n    id: \"botguest\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotGuest_Avatar-78cd857332.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botguest-thumb-F7A471250E2C10C2709325C3B02A8BBB.png\"\n  },\n  {\n    id: \"botjim\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotJim_Avatar-d28005a687.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botjim-thumb-A2D195C1A51A082BCED58BD172481B39.png\"\n  },\n  {\n    id: \"botkev\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotKev_Avatar-a95787bb51.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botkev-thumb-90746A7349E3F964C913EA612EE9A53F.png\"\n  },\n  {\n    id: \"botpinky\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotPinky_Avatar-b0b93f8675.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botpinky-thumb-C2E69D4479077766B988DC3EE4F30BE5.png\"\n  },\n  {\n    id: \"botrobert\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotRobert_Avatar-e9554880f3.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botrobert-thumb-9C33F2C752326E2CF4321EAA7BDB4E47.png\"\n  },\n  {\n    id: \"botwoody\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotWoody_Avatar-0140485a23.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botwoody-thumb-F1F1FA7E21301B5AC1D8872B4ED0CC56.png\"\n  }\n];\n","import Raven from \"raven-js\";\n\nconst ga = window.ga;\n\nexport default function registerTelemetry(trackedPage, trackedTitle) {\n  const sentryDsn = process.env.SENTRY_DSN;\n  const gaTrackingId = process.env.GA_TRACKING_ID;\n\n  if (sentryDsn) {\n    console.log(\"Tracking: Sentry DSN: \" + sentryDsn);\n    Raven.config(sentryDsn).install();\n  }\n\n  if (ga && gaTrackingId) {\n    console.log(\"Tracking: Google Analytics ID: \" + gaTrackingId);\n\n    ga(\"create\", gaTrackingId, \"auto\");\n\n    if (trackedPage) {\n      ga(\"set\", \"page\", trackedPage);\n    }\n\n    if (trackedTitle) {\n      ga(\"set\", \"title\", trackedTitle);\n    }\n\n    ga(\"send\", \"pageview\");\n  }\n}\n","import qsTruthy from \"./qs_truthy\";\n\nconst showLog = qsTruthy(\"debug_log\");\n\nif (showLog) {\n  const template = document.createElement(\"template\");\n  template.innerHTML = `\n    <style>\n      #debug-log {\n        position: absolute;\n        top: 13em;\n        background: white;\n        opacity: 0.7;\n        z-index: 1000;\n      }\n      #debug-log, #debug-log-input {\n        font-family: monospace;\n        font-size: 11px;\n        width: 100%;\n      }\n\n      #debug-log-controls {\n        display: flex;\n        padding: 0.2em;\n      }\n\n      #debug-log-eval {\n        display: flex;\n        flex: 1;\n      }\n\n      #debug-log-log {\n        overflow: auto;\n        height: 30vh;\n      }\n      #debug-log-log.minimized {\n        height: auto;\n      }\n      #debug-log-log.minimized .entry {\n        display: none;\n      }\n      #debug-log-log.minimized .entry:last-child {\n        display: block;\n      }\n      #debug-log-log .entry {\n        border: 1px solid grey;\n        margin: 0.2em;\n        padding: 0.2em;\n      }\n      #debug-log-log .entry.error { background-color: pink; }\n      #debug-log-log .entry.warn { background-color: orange; }\n    </style>\n    <div id=\"debug-log\">\n        <div id=\"debug-log-controls\">\n          <form id=\"debug-log-eval\">\n            <input id=\"debug-log-input\" placeholder=\"&gt;&gt;\" autocorrect=\"off\" autocapitalize=\"none\" />\n            <button>&gt;</button>\n          </form>\n          <button id=\"debug-log-minimize\">_</button>\n        </div>\n        <div id=\"debug-log-log\"></div>\n    </div>\n  `;\n\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    document.body.appendChild(template.content);\n  });\n\n  const debugLog = template.content.querySelector(\"#debug-log-log\");\n  debugLog.addEventListener(\"wheel\", e => e.stopPropagation());\n\n  const debugLogInput = template.content.querySelector(\"#debug-log-input\");\n  const debugLogEval = template.content.querySelector(\"#debug-log-eval\");\n  debugLogEval.onsubmit = e => {\n    e.preventDefault();\n    console.log(eval(`(${debugLogInput.value})`));\n  };\n\n  let minimized = false;\n  const debugLogMinimize = template.content.querySelector(\"#debug-log-minimize\");\n  debugLogMinimize.onclick = () => {\n    minimized = !minimized;\n    debugLog.className = minimized ? \"minimized\" : \"\";\n    debugLog.scrollTop = debugLog.scrollHeight - debugLog.clientHeight;\n  };\n\n  const origConsoleLog = console.log;\n  const origConsoleError = console.error;\n  const origConsoleWarn = console.warn;\n\n  const log = function(className, objs) {\n    let entry;\n    if (debugLog.childNodes.length > 1000) {\n      entry = debugLog.firstChild;\n    } else {\n      entry = document.createElement(\"div\");\n      entry.classList.add(\"entry\");\n    }\n    entry.classList.remove(\"warn\", \"error\");\n    entry.classList.add(className);\n\n    const arr = Array.from(objs);\n    const firstObj = arr[0];\n    let content;\n    if (typeof firstObj === \"string\" && firstObj.includes(\"%c\")) {\n      content = firstObj.replace(/%c/g, \"\");\n    } else if (firstObj instanceof Error) {\n      content = `${firstObj.message}\\n${firstObj.stack}`;\n    } else {\n      content = arr\n        .map(obj => {\n          if (typeof obj === \"string\") return obj;\n          return JSON.stringify(obj);\n        })\n        .join(\" \");\n    }\n\n    const time = new Date().toISOString().substring(11, 23);\n    entry.textContent = `[${time}] ${content}`;\n\n    const shouldScroll = debugLog.scrollTop === debugLog.scrollHeight - debugLog.clientHeight;\n    debugLog.append(entry);\n    if (shouldScroll) debugLog.scrollTop = debugLog.scrollHeight - debugLog.clientHeight;\n  };\n\n  console.warn = function() {\n    origConsoleWarn.apply(null, arguments);\n    log(\"warn\", arguments);\n  };\n\n  console.error = function() {\n    origConsoleError.apply(null, arguments);\n    log(\"error\", arguments);\n  };\n\n  console.log = function() {\n    origConsoleLog.apply(null, arguments);\n    log(\"log\", arguments);\n  };\n\n  window.onunhandledrejection = e => log(\"error\", [e.reason.message, e.reason.code, e.reason.name]);\n  window.onerror = e => log(\"error\", [e]);\n}\n","const zeroPos = new THREE.Vector3(0, 0, 0);\nconst zeroQuat = new THREE.Quaternion();\nconst oneScale = new THREE.Vector3(1, 1, 1);\nconst identity = new THREE.Matrix4();\nidentity.identity();\n\n// Patch animation system\nconst bindingSetters = THREE.PropertyBinding.prototype.SetterByBindingTypeAndVersioning;\nconst Versioning = THREE.PropertyBinding.prototype.Versioning;\n\n// For all binding types, monkey patch the setters that require world matrix\n// updates to also flip matrixNeedsUpdate\nfor (let i = 0; i < bindingSetters.length; i++) {\n  const setter = bindingSetters[i][Versioning.MatrixWorldNeedsUpdate];\n  if (!setter) continue;\n\n  bindingSetters[i][Versioning.MatrixWorldNeedsUpdate] = function() {\n    const v = setter.apply(this, arguments);\n    this.targetObject.matrixNeedsUpdate = true;\n    return v;\n  };\n}\n\nTHREE.Object3D.prototype.getWorldPosition = function(target) {\n  if (target === undefined) {\n    console.warn(\"THREE.Object3D: .getWorldPosition() target is now required\");\n    target = new THREE.Vector3();\n  }\n\n  // New function, defined below (used instead of updateMatrixWorld)\n  this.updateMatrices();\n\n  return target.setFromMatrixPosition(this.matrixWorld);\n};\n\nTHREE.Object3D.prototype.getWorldQuaternion = (function() {\n  const position = new THREE.Vector3();\n  const scale = new THREE.Vector3();\n\n  return function getWorldQuaternion(target) {\n    if (target === undefined) {\n      console.warn(\"THREE.Object3D: .getWorldQuaternion() target is now required\");\n      target = new THREE.Quaternion();\n    }\n\n    // New function, defined below (used instead of updateMatrixWorld)\n    this.updateMatrices();\n    this.matrixWorld.decompose(position, target, scale);\n\n    return target;\n  };\n})();\n\nTHREE.Object3D.getWorldScale = (function() {\n  const position = new THREE.Vector3();\n  const quaternion = new THREE.Quaternion();\n\n  return function getWorldScale(target) {\n    if (target === undefined) {\n      console.warn(\"THREE.Object3D: .getWorldScale() target is now required\");\n      target = new THREE.Vector3();\n    }\n\n    // New function, defined below (used instead of updateMatrixWorld)\n    this.updateMatrices();\n    this.matrixWorld.decompose(position, quaternion, target);\n\n    return target;\n  };\n})();\n\nconst handleMatrixModification = o => {\n  if (!o.matrixIsModified) {\n    o.matrixIsModified = true;\n\n    if (o.cachedMatrixWorld) {\n      o.cachedMatrixWorld.copy(o.matrixWorld);\n      o.matrixWorld = o.cachedMatrixWorld;\n    }\n  }\n};\n\nconst updateMatrix = THREE.Object3D.prototype.updateMatrix;\nTHREE.Object3D.prototype.updateMatrix = function() {\n  updateMatrix.apply(this, arguments);\n  handleMatrixModification(this);\n};\n\nconst applyMatrix = THREE.Object3D.prototype.applyMatrix;\nTHREE.Object3D.prototype.applyMatrix = function() {\n  applyMatrix.apply(this, arguments);\n  handleMatrixModification(this);\n};\n\n// By the end of this function this.matrix reflects the updated local matrix\n// and this.matrixWorld reflects the updated world matrix, taking into account\n// parent matrices.\n//\n// forceLocalUpdate - Forces the local matrix to be updated regardless of if it has not\n// been marked dirty.\n//\n// forceWorldUpdate - Forces the world matrix to be updated regardless of if the local matrix\n// has been updated since the last update.\n//\n// skipParents - unless true, all parent matricies are updated before updating this object's\n// local and world matrix.\n//\nTHREE.Object3D.prototype.updateMatrices = function(forceLocalUpdate, forceWorldUpdate, skipParents) {\n  if (!this.hasHadFirstMatrixUpdate) {\n    if (\n      !this.position.equals(zeroPos) ||\n      !this.quaternion.equals(zeroQuat) ||\n      !this.scale.equals(oneScale) ||\n      !this.matrix.equals(identity)\n    ) {\n      // Only update the matrix the first time if its non-identity, this way\n      // this.matrixIsModified will remain false until the default\n      // identity matrix is updated.\n      this.updateMatrix();\n    }\n\n    this.hasHadFirstMatrixUpdate = true;\n    this.matrixWorldNeedsUpdate = true;\n    this.cachedMatrixWorld = this.matrixWorld;\n  } else if (this.matrixNeedsUpdate || this.matrixAutoUpdate || forceLocalUpdate) {\n    this.updateMatrix();\n    if (this.matrixNeedsUpdate) this.matrixNeedsUpdate = false;\n  }\n\n  if (!skipParents && this.parent) {\n    this.parent.updateMatrices(false, forceWorldUpdate, false);\n    this.matrixWorldNeedsUpdate = this.matrixWorldNeedsUpdate || this.parent.childrenNeedMatrixWorldUpdate;\n  }\n\n  if (this.matrixWorldNeedsUpdate || forceWorldUpdate) {\n    if (this.parent === null) {\n      this.matrixWorld.copy(this.matrix);\n    } else {\n      // If the matrix is unmodified, it is the identity matrix,\n      // and hence we can use the parent's world matrix directly.\n      //\n      // Note this assumes all callers will either not pass skipParents=true\n      // *or* will update the parent themselves beforehand as is done in\n      // updateMatrixWorld.\n      if (!this.matrixIsModified) {\n        this.matrixWorld = this.parent.matrixWorld;\n      } else {\n        // Once matrixIsModified === true, this.matrixWorld has been updated to be a local\n        // copy, not a reference to this.parent.matrixWorld (see updateMatrix/applyMatrix)\n        this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix);\n      }\n    }\n\n    this.childrenNeedMatrixWorldUpdate = true;\n    this.matrixWorldNeedsUpdate = false;\n  }\n};\n\n// Computes this object's matrices and then the recursively computes the matrices of all the children.\n//\n// forceWorldUpdate - If true and the object is visible, will force the world matrix to be updated for\n// this node and all of its children.\n//\n// includeInvisible - If true, does not ignore non-visible objects.\nTHREE.Object3D.prototype.updateMatrixWorld = function(forceWorldUpdate, includeInvisible) {\n  if (!this.visible && !includeInvisible) return;\n\n  // Do not recurse upwards, since this is recursing downwards\n  this.updateMatrices(false, forceWorldUpdate, true);\n\n  const children = this.children;\n  const forceChildrenWorldUpdate = this.childrenNeedMatrixWorldUpdate || forceWorldUpdate;\n\n  for (let i = 0, l = children.length; i < l; i++) {\n    children[i].updateMatrixWorld(forceChildrenWorldUpdate, includeInvisible);\n  }\n\n  if (this.childrenNeedMatrixWorldUpdate) this.childrenNeedMatrixWorldUpdate = false;\n};\n\n// Updates this function to use updateMatrices() to avoid extra matrix computations\nTHREE.Object3D.prototype.lookAt = (function() {\n  // This method does not support objects having non-uniformly-scaled parent(s)\n\n  const q1 = new THREE.Quaternion();\n  const m1 = new THREE.Matrix4();\n  const target = new THREE.Vector3();\n  const position = new THREE.Vector3();\n\n  return function lookAt(x, y, z) {\n    if (x.isVector3) {\n      target.copy(x);\n    } else {\n      target.set(x, y, z);\n    }\n\n    const parent = this.parent;\n\n    this.updateMatrices(); // hubs change\n\n    position.setFromMatrixPosition(this.matrixWorld);\n\n    if (this.isCamera || this.isLight) {\n      m1.lookAt(position, target, this.up);\n    } else {\n      m1.lookAt(target, position, this.up);\n    }\n\n    this.quaternion.setFromRotationMatrix(m1);\n\n    if (parent) {\n      m1.extractRotation(parent.matrixWorld);\n      q1.setFromRotationMatrix(m1);\n      this.quaternion.premultiply(q1.inverse());\n    }\n  };\n})();\n","/* eslint-disable */\n\n// Modified version of A-Frame's animation component to set matrixNeedsUpdate = true in the\n// scenario where the transform changes on an object during an animation.\n//\n// Changes are identified w comment // hubs\n//\n// Bugfix added 3/1/19 - If an animation component is removed before its delay setting, then\n// it erroneously restarts.\n\nvar anime = require(\"animejs\").default;\nvar components = AFRAME.components; // hubs\nvar registerComponent = AFRAME.registerComponent; // hubs\n//var THREE = require('../lib/three'); // hubs\nvar utils = AFRAME.utils; // hubs\n\ndelete AFRAME.components.animation; // hubs\n\nvar colorHelperFrom = new THREE.Color();\nvar colorHelperTo = new THREE.Color();\n\nvar getComponentProperty = utils.entity.getComponentProperty;\nvar setComponentProperty = utils.entity.setComponentProperty;\nvar splitCache = {};\n\nvar TYPE_COLOR = \"color\";\nvar PROP_POSITION = \"position\";\nvar PROP_ROTATION = \"rotation\";\nvar PROP_SCALE = \"scale\";\nvar STRING_COMPONENTS = \"components\";\nvar STRING_OBJECT3D = \"object3D\";\n\n/**\n * Animation component for A-Frame using anime.js.\n *\n * The component manually controls the tick by setting `autoplay: false` on anime.js and\n * manually * calling `animation.tick()` in the tick handler. To pause or resume, we toggle a\n * boolean * flag * `isAnimationPlaying`.\n *\n * anime.js animation config for tweenining Javascript objects and values works as:\n *\n *  config = {\n *    targets: {foo: 0.0, bar: '#000'},\n *    foo: 1.0,\n *    bar: '#FFF'\n *  }\n *\n * The above will tween each property in `targets`. The `to` values are set in the root of\n * the config.\n *\n * @member {object} animation - anime.js instance.\n * @member {boolean} animationIsPlaying - Control if animation is playing.\n */\nmodule.exports.Component = registerComponent(\"animation\", {\n  schema: {\n    autoplay: { default: true },\n    delay: { default: 0 },\n    dir: { default: \"\" },\n    dur: { default: 1000 },\n    easing: { default: \"easeInQuad\" },\n    elasticity: { default: 400 },\n    enabled: { default: true },\n    from: { default: \"\" },\n    loop: {\n      default: 0,\n      parse: function(value) {\n        // Boolean or integer.\n        if (value === true || value === \"true\") {\n          return true;\n        }\n        if (value === false || value === \"false\") {\n          return false;\n        }\n        return parseInt(value, 10);\n      }\n    },\n    property: { default: \"\" },\n    startEvents: { type: \"array\" },\n    pauseEvents: { type: \"array\" },\n    resumeEvents: { type: \"array\" },\n    round: { default: false },\n    to: { default: \"\" },\n    type: { default: \"\" },\n    isRawProperty: { default: false }\n  },\n\n  multiple: true,\n\n  init: function() {\n    var self = this;\n\n    this.eventDetail = { name: this.attrName };\n    this.time = 0;\n\n    this.animation = null;\n    this.animationIsPlaying = false;\n    this.onStartEvent = this.onStartEvent.bind(this);\n    this.beginAnimation = this.beginAnimation.bind(this);\n    this.pauseAnimation = this.pauseAnimation.bind(this);\n    this.resumeAnimation = this.resumeAnimation.bind(this);\n\n    this.fromColor = {};\n    this.toColor = {};\n    this.targets = {};\n    this.targetsArray = [];\n\n    this.updateConfigForDefault = this.updateConfigForDefault.bind(this);\n    this.updateConfigForRawColor = this.updateConfigForRawColor.bind(this);\n\n    this.config = {\n      complete: function() {\n        self.animationIsPlaying = false;\n        self.el.emit(\"animationcomplete\", self.eventDetail, false);\n        if (self.id) {\n          self.el.emit(\"animationcomplete__\" + self.id, self.eventDetail, false);\n        }\n      }\n    };\n  },\n\n  update: function(oldData) {\n    var config = this.config;\n    var data = this.data;\n\n    this.animationIsPlaying = false;\n\n    if (!this.data.enabled) {\n      return;\n    }\n\n    if (!data.property) {\n      return;\n    }\n\n    // Base config.\n    config.autoplay = false;\n    config.direction = data.dir;\n    config.duration = data.dur;\n    config.easing = data.easing;\n    config.elasticity = data.elasticity;\n    config.loop = data.loop;\n    config.round = data.round;\n\n    // Start new animation.\n    this.createAndStartAnimation();\n  },\n\n  tick: function(t, dt) {\n    if (!this.animationIsPlaying) {\n      return;\n    }\n    this.time += dt;\n    this.animation.tick(this.time);\n  },\n\n  remove: function() {\n    this.pauseAnimation();\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n  },\n\n  pause: function() {\n    this.paused = true;\n    this.pausedWasPlaying = this.animationIsPlaying;\n    this.pauseAnimation();\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n  },\n\n  /**\n   * `play` handler only for resuming scene.\n   */\n  play: function() {\n    if (!this.paused) {\n      return;\n    }\n    this.paused = false;\n    this.addEventListeners();\n    if (this.pausedWasPlaying) {\n      this.resumeAnimation();\n      this.pausedWasPlaying = false;\n    }\n  },\n\n  /**\n   * Start animation from scratch.\n   */\n  createAndStartAnimation: function() {\n    var data = this.data;\n\n    this.updateConfig();\n    this.animationIsPlaying = false;\n    this.animation = anime(this.config);\n\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n    this.addEventListeners();\n\n    // Wait for start events for animation.\n    if (!data.autoplay || (data.startEvents && data.startEvents.length)) {\n      return;\n    }\n\n    // Delay animation.\n    if (data.delay) {\n      // hubs\n      this.delayTimeout = setTimeout(this.beginAnimation, data.delay);\n      return;\n    }\n\n    // Play animation.\n    this.beginAnimation();\n  },\n\n  /**\n   * This is before animation start (including from startEvents).\n   * Set to initial state (config.from, time = 0, seekTime = 0).\n   */\n  beginAnimation: function() {\n    this.updateConfig();\n    this.time = 0;\n    this.animationIsPlaying = true;\n    this.stopRelatedAnimations();\n    this.el.emit(\"animationbegin\", this.eventDetail, false);\n  },\n\n  pauseAnimation: function() {\n    this.animationIsPlaying = false;\n  },\n\n  resumeAnimation: function() {\n    this.animationIsPlaying = true;\n  },\n\n  /**\n   * startEvents callback.\n   */\n  onStartEvent: function() {\n    if (!this.data.enabled) {\n      return;\n    }\n\n    this.updateConfig();\n    if (this.animation) {\n      this.animation.pause();\n    }\n    this.animation = anime(this.config);\n\n    // Include the delay before each start event.\n    if (this.data.delay) {\n      setTimeout(this.beginAnimation, this.data.delay);\n      return;\n    }\n    this.beginAnimation();\n  },\n\n  /**\n   * rawProperty: true and type: color;\n   */\n  updateConfigForRawColor: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var from;\n    var key;\n    var to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForRawColor)) {\n      return;\n    }\n\n    from = data.from === \"\" ? getRawProperty(el, data.property) : data.from;\n    to = data.to;\n\n    // Use r/g/b vector for color type.\n    this.setColorConfig(from, to);\n    from = this.fromColor;\n    to = this.toColor;\n\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) {\n      config[key] = to[key];\n    }\n\n    config.update = (function() {\n      var lastValue = {};\n      return function(anim) {\n        var value;\n        value = anim.animatables[0].target;\n        // For animation timeline.\n        if (value.r === lastValue.r && value.g === lastValue.g && value.b === lastValue.b) {\n          return;\n        }\n\n        setRawProperty(el, data.property, value, data.type);\n      };\n    })();\n  },\n\n  /**\n   * Stuff property into generic `property` key.\n   */\n  updateConfigForDefault: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var from;\n    var isBoolean;\n    var isNumber;\n    var to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForDefault)) {\n      return;\n    }\n\n    if (data.from === \"\") {\n      // Infer from.\n      from = isRawProperty(data) ? getRawProperty(el, data.property) : getComponentProperty(el, data.property);\n    } else {\n      // Explicit from.\n      from = data.from;\n    }\n\n    to = data.to;\n\n    isNumber = !isNaN(from || to);\n    if (isNumber) {\n      from = parseFloat(from);\n      to = parseFloat(to);\n    } else {\n      from = from ? from.toString() : from;\n      to = to ? to.toString() : to;\n    }\n\n    // Convert booleans to integer to allow boolean flipping.\n    isBoolean = data.to === \"true\" || data.to === \"false\" || data.to === true || data.to === false;\n    if (isBoolean) {\n      from = data.from === \"true\" || data.from === true ? 1 : 0;\n      to = data.to === \"true\" || data.to === true ? 1 : 0;\n    }\n\n    this.targets.aframeProperty = from;\n    config.targets = this.targets;\n    config.aframeProperty = to;\n    config.update = (function() {\n      var lastValue;\n\n      return function(anim) {\n        var value;\n        value = anim.animatables[0].target.aframeProperty;\n\n        // Need to do a last value check for animation timeline since all the tweening\n        // begins simultaenously even if the value has not changed. Also better for perf\n        // anyways.\n        if (value === lastValue) {\n          return;\n        }\n        lastValue = value;\n\n        if (isBoolean) {\n          value = value >= 1;\n        }\n\n        if (isRawProperty(data)) {\n          setRawProperty(el, data.property, value, data.type);\n        } else {\n          setComponentProperty(el, data.property, value);\n        }\n      };\n    })();\n  },\n\n  /**\n   * Extend x/y/z/w onto the config.\n   * Update vector by modifying object3D.\n   */\n  updateConfigForVector: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var key;\n    var from;\n    var to;\n\n    // Parse coordinates.\n    from =\n      data.from !== \"\"\n        ? utils.coordinates.parse(data.from) // If data.from defined, use that.\n        : getComponentProperty(el, data.property); // If data.from not defined, get on the fly.\n    to = utils.coordinates.parse(data.to);\n\n    if (data.property === PROP_ROTATION) {\n      toRadians(from);\n      toRadians(to);\n    }\n\n    // Set to and from.\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) {\n      config[key] = to[key];\n    }\n\n    // If animating object3D transformation, run more optimized updater.\n    if (data.property === PROP_POSITION || data.property === PROP_ROTATION || data.property === PROP_SCALE) {\n      config.update = (function() {\n        var lastValue = {};\n        return function(anim) {\n          var value = anim.animatables[0].target;\n\n          if (data.property === PROP_SCALE) {\n            value.x = Math.max(0.0001, value.x);\n            value.y = Math.max(0.0001, value.y);\n            value.z = Math.max(0.0001, value.z);\n          }\n\n          // For animation timeline.\n          if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n            return;\n          }\n\n          lastValue.x = value.x;\n          lastValue.y = value.y;\n          lastValue.z = value.z;\n\n          el.object3D[data.property].set(value.x, value.y, value.z);\n          el.object3D.matrixNeedsUpdate = true; // hubs\n        };\n      })();\n      return;\n    }\n\n    // Animating some vector.\n    config.update = (function() {\n      var lastValue = {};\n      return function(anim) {\n        var value = anim.animations[0].target;\n\n        // Animate rotation through radians.\n        // For animation timeline.\n        if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n          return;\n        }\n        lastValue.x = value.x;\n        lastValue.y = value.y;\n        lastValue.z = value.z;\n        setComponentProperty(el, data.property, value);\n      };\n    })();\n  },\n\n  /**\n   * Update the config before each run.\n   */\n  updateConfig: function() {\n    var propType;\n\n    // Route config type.\n    propType = getPropertyType(this.el, this.data.property);\n    if (isRawProperty(this.data) && this.data.type === TYPE_COLOR) {\n      this.updateConfigForRawColor();\n    } else if (propType === \"vec2\" || propType === \"vec3\" || propType === \"vec4\") {\n      this.updateConfigForVector();\n    } else {\n      this.updateConfigForDefault();\n    }\n  },\n\n  /**\n   * Wait for component to initialize.\n   */\n  waitComponentInitRawProperty: function(cb) {\n    var componentName;\n    var data = this.data;\n    var el = this.el;\n    var self = this;\n\n    if (data.from !== \"\") {\n      return false;\n    }\n\n    if (!data.property.startsWith(STRING_COMPONENTS)) {\n      return false;\n    }\n\n    componentName = splitDot(data.property)[1];\n    if (el.components[componentName]) {\n      return false;\n    }\n\n    el.addEventListener(\"componentinitialized\", function wait(evt) {\n      if (evt.detail.name !== componentName) {\n        return;\n      }\n      cb();\n      // Since the config was created async, create the animation now since we missed it\n      // earlier.\n      self.animation = anime(self.config);\n      el.removeEventListener(\"componentinitialized\", wait);\n    });\n    return true;\n  },\n\n  /**\n   * Make sure two animations on the same property don't fight each other.\n   * e.g., animation__mouseenter=\"property: material.opacity\"\n   *       animation__mouseleave=\"property: material.opacity\"\n   */\n  stopRelatedAnimations: function() {\n    var component;\n    var componentName;\n    for (componentName in this.el.components) {\n      component = this.el.components[componentName];\n      if (componentName === this.attrName) {\n        continue;\n      }\n      if (component.name !== \"animation\") {\n        continue;\n      }\n      if (!component.animationIsPlaying) {\n        continue;\n      }\n      if (component.data.property !== this.data.property) {\n        continue;\n      }\n      component.animationIsPlaying = false;\n    }\n  },\n\n  addEventListeners: function() {\n    var data = this.data;\n    var el = this.el;\n    addEventListeners(el, data.startEvents, this.onStartEvent);\n    addEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    addEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  removeEventListeners: function() {\n    var data = this.data;\n    var el = this.el;\n    removeEventListeners(el, data.startEvents, this.onStartEvent);\n    removeEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    removeEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  // hubs\n  cancelDelayedStart: function() {\n    if (this.delayTimeout) {\n      clearTimeout(this.delayTimeout);\n      this.delayTimeout = null;\n    }\n  },\n\n  setColorConfig: function(from, to) {\n    colorHelperFrom.set(from);\n    colorHelperTo.set(to);\n    from = this.fromColor;\n    to = this.toColor;\n    from.r = colorHelperFrom.r;\n    from.g = colorHelperFrom.g;\n    from.b = colorHelperFrom.b;\n    to.r = colorHelperTo.r;\n    to.g = colorHelperTo.g;\n    to.b = colorHelperTo.b;\n  }\n});\n\n/**\n * Given property name, check schema to see what type we are animating.\n * We just care whether the property is a vector.\n */\nfunction getPropertyType(el, property) {\n  var component;\n  var componentName;\n  var split;\n  var propertyName;\n\n  split = property.split(\".\");\n  componentName = split[0];\n  propertyName = split[1];\n  component = el.components[componentName] || components[componentName];\n\n  // Primitives.\n  if (!component) {\n    return null;\n  }\n\n  // Dynamic schema. We only care about vectors anyways.\n  if (propertyName && !component.schema[propertyName]) {\n    return null;\n  }\n\n  // Multi-prop.\n  if (propertyName) {\n    return component.schema[propertyName].type;\n  }\n\n  // Single-prop.\n  return component.schema.type;\n}\n\n/**\n * Convert object to radians.\n */\nfunction toRadians(obj) {\n  obj.x = THREE.Math.degToRad(obj.x);\n  obj.y = THREE.Math.degToRad(obj.y);\n  obj.z = THREE.Math.degToRad(obj.z);\n}\n\nfunction addEventListeners(el, eventNames, handler) {\n  var i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.addEventListener(eventNames[i], handler);\n  }\n}\n\nfunction removeEventListeners(el, eventNames, handler) {\n  var i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.removeEventListener(eventNames[i], handler);\n  }\n}\n\nfunction getRawProperty(el, path) {\n  var i;\n  var split;\n  var value;\n  split = splitDot(path);\n  value = el;\n  for (i = 0; i < split.length; i++) {\n    value = value[split[i]];\n  }\n  return value;\n}\n\nfunction setRawProperty(el, path, value, type) {\n  var i;\n  var split;\n  var propertyName;\n  var targetValue;\n\n  if (path.startsWith(\"object3D.rotation\")) {\n    value = THREE.Math.degToRad(value);\n  }\n\n  // Walk.\n  split = splitDot(path);\n  targetValue = el;\n  for (i = 0; i < split.length - 1; i++) {\n    targetValue = targetValue[split[i]];\n  }\n  propertyName = split[split.length - 1];\n\n  // Raw color.\n  if (type === TYPE_COLOR) {\n    if (\"r\" in targetValue[propertyName]) {\n      targetValue[propertyName].r = value.r;\n      targetValue[propertyName].g = value.g;\n      targetValue[propertyName].b = value.b;\n    } else {\n      targetValue[propertyName].x = value.r;\n      targetValue[propertyName].y = value.g;\n      targetValue[propertyName].z = value.b;\n    }\n    return;\n  }\n\n  targetValue[propertyName] = value;\n}\n\nfunction splitDot(path) {\n  if (path in splitCache) {\n    return splitCache[path];\n  }\n  splitCache[path] = path.split(\".\");\n  return splitCache[path];\n}\n\nfunction isRawProperty(data) {\n  return data.isRawProperty || data.property.startsWith(STRING_COMPONENTS) || data.property.startsWith(STRING_OBJECT3D);\n}\n","AFRAME.registerComponent(\"ambient-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.AmbientLight();\n    this.el.setObject3D(\"ambient-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n    this.rendererSystem = this.el.sceneEl.systems.renderer;\n  },\n\n  update(prevData) {\n    if (this.data.color !== prevData.color) {\n      this.light.color.set(this.data.color);\n      this.rendererSystem.applyColorCorrection(this.light.color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      this.light.intensity = this.data.intensity;\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"ambient-light\");\n  }\n});\n","/**\n * Instantiates and updates a THREE.AnimationMixer on an entity.\n * @component animation-mixer\n */\nAFRAME.registerComponent(\"animation-mixer\", {\n  initMixer(animations) {\n    this.mixer = new THREE.AnimationMixer(this.el.object3D);\n    this.el.object3D.animations = animations;\n    this.animations = animations;\n  },\n\n  tick: function(t, dt) {\n    if (this.mixer) {\n      this.mixer.update(dt / 1000);\n    }\n  }\n});\n","/**\n * Sets the CSS class on an entity.\n * @component css-class\n */\nAFRAME.registerComponent(\"css-class\", {\n  schema: {\n    type: \"string\"\n  },\n  multiple: true,\n  init() {\n    this.el.classList.add(this.data);\n  },\n  update(oldData) {\n    if (this.data !== oldData) {\n      this.el.classList.remove(oldData);\n      this.el.classList.add(this.data);\n    }\n  },\n  remove() {\n    this.el.classList.remove(this.data);\n  }\n});\n","/* global CANNON */\n/**\n * Floats a duck based on its scale.\n * @component duck\n */\nAFRAME.registerComponent(\"duck\", {\n  schema: {\n    initialForce: { default: 0 },\n    maxForce: { default: 6.5 },\n    maxScale: { default: 5 }\n  },\n\n  init: function() {\n    this.physicsSystem = this.el.sceneEl.systems.physics;\n    this.hasBody = false;\n    this.position = new CANNON.Vec3();\n    this.force = new CANNON.Vec3(0, this.data.initialForce, 0);\n    this.initialScale = this.el.object3D.scale.x;\n    this.maxScale = this.data.maxScale * this.initialScale;\n  },\n\n  play: function() {\n    this.physicsSystem.addComponent(this);\n  },\n\n  pause: function() {\n    this.physicsSystem.removeComponent(this);\n  },\n\n  beforeStep: function() {\n    if (this.el.body && NAF.utils.isMine(this.el)) {\n      const currentScale = this.el.object3D.scale.x;\n      const ratio = Math.min(1, (currentScale - this.initialScale) / (this.maxScale - this.initialScale));\n      const force = ratio * this.data.maxForce;\n      if (force > 0) {\n        const angle = Math.random() * Math.PI * 2;\n        const x = Math.cos(angle);\n        const z = Math.sin(angle);\n        this.force.set(x, force, z);\n        this.position.set(x * 0.01, 0, z * 0.01);\n        this.el.object3D.matrixNeedsUpdate = true;\n        this.el.body.applyForce(this.force, this.position);\n      }\n    }\n  }\n});\n","/* global CANNON */\nAFRAME.registerComponent(\"heightfield\", {\n  init() {\n    this.el.addEventListener(\"componentinitialized\", e => {\n      if (e.detail.name === \"static-body\") {\n        this.generateAndAddHeightfield(this.el.components[\"static-body\"]);\n      }\n    });\n    this.el.setAttribute(\"static-body\", { shape: \"none\", mass: 0 });\n  },\n  generateAndAddHeightfield(body) {\n    const { offset, distance, data } = this.data;\n\n    const orientation = new CANNON.Quaternion();\n    orientation.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), -Math.PI / 2);\n\n    const rotation = new CANNON.Quaternion();\n    rotation.setFromAxisAngle(new CANNON.Vec3(0, 1, 0), -Math.PI / 2);\n    rotation.mult(orientation, orientation);\n\n    const cannonOffset = new CANNON.Vec3(offset.x, offset.y, offset.z);\n\n    const shape = new CANNON.Heightfield(data, { elementSize: distance });\n\n    body.addShape(shape, cannonOffset, orientation);\n  }\n});\n","AFRAME.registerComponent(\"hemisphere-light\", {\n  schema: {\n    skyColor: { type: \"color\" },\n    groundColor: { type: \"color\" },\n    intensity: { default: 1.0 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.HemisphereLight();\n    this.light.position.set(0, 0, 0);\n    this.light.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"hemisphere-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n  },\n\n  update(prevData) {\n    if (this.data.skyColor !== prevData.skyColor) {\n      this.light.color.set(this.data.skyColor);\n    }\n\n    if (this.data.groundColor !== prevData.groundColor) {\n      this.light.groundColor.set(this.data.groundColor);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      this.light.intensity = this.data.intensity;\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"hemisphere-light\");\n  }\n});\n","/**\n * Hides entities based on the scene's quality mode\n * @namespace environment\n * @component hide-when-quality\n */\nAFRAME.registerComponent(\"hide-when-quality\", {\n  schema: { type: \"string\", default: \"low\" },\n\n  init() {\n    this.onQualityChanged = this.onQualityChanged.bind(this);\n    this.el.sceneEl.addEventListener(\"quality-changed\", this.onQualityChanged);\n  },\n\n  onQualityChanged(event) {\n    this.updateComponentState(event.detail);\n  },\n\n  update(oldData) {\n    if (this.data !== oldData) {\n      this.updateComponentState(window.APP.quality);\n    }\n  },\n\n  updateComponentState(quality) {\n    this.el.setAttribute(\"visible\", quality !== this.data);\n  }\n});\n","AFRAME.registerComponent(\"point-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    range: { default: 0 },\n    decay: { default: 2 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.PointLight();\n    this.light.shadow.camera.matrixAutoUpdate = true;\n    this.el.setObject3D(\"point-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n    this.rendererSystem = this.el.sceneEl.systems.renderer;\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      const color = new THREE.Color(this.data.color);\n      this.rendererSystem.applyColorCorrection(color);\n      light.color.copy(color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.range !== prevData.range) {\n      light.distance = this.data.range;\n    }\n\n    if (this.data.decay !== prevData.decay) {\n      light.decay = this.data.decay;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"point-light\");\n  }\n});\n","AFRAME.registerComponent(\"spot-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    range: { default: 0 },\n    decay: { default: 2 },\n    innerConeAngle: { default: 0 },\n    outerConeAngle: { default: Math.PI / 4.0 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.SpotLight();\n    this.light.position.set(0, 0, 0);\n    this.light.target.position.set(0, 0, 1);\n    this.light.add(this.light.target);\n    this.light.matrixNeedsUpdate = true;\n    this.light.target.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"spot-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      light.color.set(this.data.color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.range !== prevData.range) {\n      light.distance = this.data.range;\n    }\n\n    if (this.data.decay !== prevData.decay) {\n      light.decay = this.data.decay;\n    }\n\n    if (this.data.innerConeAngle !== prevData.innerConeAngle || this.data.outerConeAngle !== prevData.outerConeAngle) {\n      light.angle = this.data.outerConeAngle;\n      light.penumbra = 1.0 - this.data.innerConeAngle / this.data.outerConeAngle;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"spot-light\");\n  }\n});\n","/* global AFRAME */\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nAFRAME.registerComponent(\"floaty-object\", {\n  schema: {\n    // Make the object locked/kinematic upon load\n    autoLockOnLoad: { default: false },\n\n    // Make the object kinematic immediately upon release\n    autoLockOnRelease: { default: false },\n\n    // On release, modify the gravity based upon gravitySpeedLimit. If less than this, let the object float\n    // otherwise apply releaseGravity.\n    modifyGravityOnRelease: { default: false },\n\n    // Gravity to apply if object is thrown at a speed greated than speed limit.\n    releaseGravity: { default: -2 },\n\n    // If true, the degree to which angular rotation is allowed when floating is reduced (useful for 2d media)\n    reduceAngularFloat: { default: false },\n\n    // Velocity speed limit under which gravity will not be added if modifyGravityOnRelease is true\n    gravitySpeedLimit: { default: 1.85 } // Set to 0 to never apply gravity\n  },\n\n  init() {\n    this.onGrab = this.onGrab.bind(this);\n    this.onRelease = this.onRelease.bind(this);\n  },\n\n  tick() {\n    if (!this.ammoBody) {\n      this.ammoBody = this.el.components[\"ammo-body\"];\n    }\n\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const isHeld = interaction.isHeld(this.el);\n    if (isHeld && !this.wasHeld) {\n      this.onGrab();\n    }\n    if (this.wasHeld && !isHeld) {\n      this.onRelease();\n    }\n\n    if (!isHeld && this._makeStaticWhenAtRest) {\n      const isMine = this.el.components.networked && NAF.utils.isMine(this.el);\n      const linearThreshold = this.ammoBody.data.linearSleepingThreshold;\n      const angularThreshold = this.ammoBody.data.angularSleepingThreshold;\n      const isAtRest =\n        this.ammoBody.body.getLinearVelocity().length2() < linearThreshold * linearThreshold &&\n        this.ammoBody.body.getAngularVelocity().length2() < angularThreshold * angularThreshold;\n\n      if (isAtRest && isMine) {\n        this.el.setAttribute(\"ammo-body\", { type: \"static\" });\n      }\n\n      if (isAtRest || !isMine) {\n        this._makeStaticWhenAtRest = false;\n      }\n    }\n\n    this.wasHeld = isHeld;\n  },\n\n  play() {\n    // We do this in play instead of in init because otherwise NAF.utils.isMine fails\n    if (this.hasBeenHereBefore) return;\n    this.hasBeenHereBefore = true;\n    if (this.el.body) {\n      this._onBodyLoaded();\n    } else {\n      this._onBodyLoaded = this._onBodyLoaded.bind(this);\n      this.el.addEventListener(\"body-loaded\", this._onBodyLoaded, { once: true });\n    }\n  },\n\n  setLocked(locked) {\n    if (this.el.components.networked && !NAF.utils.isMine(this.el)) return;\n\n    this.locked = locked;\n    this.el.setAttribute(\"ammo-body\", { type: locked ? \"kinematic\" : \"dynamic\" });\n  },\n\n  _onBodyLoaded() {\n    if (this.data.autoLockOnLoad) {\n      this.setLocked(true);\n    }\n  },\n\n  onRelease() {\n    if (this.data.modifyGravityOnRelease) {\n      if (\n        this.data.gravitySpeedLimit === 0 ||\n        this.ammoBody.getVelocity().length2() < this.data.gravitySpeedLimit * this.data.gravitySpeedLimit\n      ) {\n        this.el.setAttribute(\"ammo-body\", {\n          gravity: { x: 0, y: 0, z: 0 },\n          angularDamping: this.data.reduceAngularFloat ? 0.98 : 0.5,\n          linearDamping: 0.95,\n          linearSleepingThreshold: 0.1,\n          angularSleepingThreshold: 0.1,\n          collisionFilterMask: COLLISION_LAYERS.HANDS\n        });\n\n        this._makeStaticWhenAtRest = true;\n      } else {\n        this.el.setAttribute(\"ammo-body\", {\n          gravity: { x: 0, y: this.data.releaseGravity, z: 0 },\n          angularDamping: 0.01,\n          linearDamping: 0.01,\n          linearSleepingThreshold: 1.6,\n          angularSleepingThreshold: 2.5,\n          collisionFilterMask: COLLISION_LAYERS.DEFAULT_INTERACTABLE\n        });\n      }\n    } else {\n      this.el.setAttribute(\"ammo-body\", { collisionFilterMask: COLLISION_LAYERS.DEFAULT_INTERACTABLE });\n    }\n\n    if (this.data.autoLockOnRelease) {\n      this.setLocked(true);\n    }\n  },\n\n  onGrab() {\n    this.el.setAttribute(\"ammo-body\", {\n      collisionFilterMask: COLLISION_LAYERS.HANDS\n    });\n    this.setLocked(false);\n  },\n\n  remove() {\n    this.el.removeEventListener(\"body-loaded\", this._onBodyLoaded);\n    if (this.stuckTo) {\n      const stuckTo = this.stuckTo;\n      delete this.stuckTo;\n      stuckTo._unstickObject();\n    }\n  }\n});\n","const sizeVec = new THREE.Vector3();\nconst boundingBoxWorldPositionVec = new THREE.Vector3();\nconst colliderWorldPositionVec = new THREE.Vector3();\n\nAFRAME.registerComponent(\"trigger-volume\", {\n  schema: {\n    colliders: { type: \"selectorAll\" },\n    size: { type: \"vec3\", default: { x: 1, y: 1, z: 1 } },\n    target: { type: \"selector\" },\n    enterComponent: { type: \"string\" },\n    enterProperty: { type: \"string\" },\n    enterValue: {\n      default: \"\",\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    },\n    leaveComponent: { type: \"string\" },\n    leaveProperty: { type: \"string\" },\n    leaveValue: {\n      default: \"\",\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n  init() {\n    this.boundingBox = new THREE.Box3();\n    this.collidingLastFrame = {};\n  },\n  update() {\n    this.el.object3D.getWorldPosition(boundingBoxWorldPositionVec);\n    sizeVec.copy(this.data.size);\n    this.boundingBox.setFromCenterAndSize(boundingBoxWorldPositionVec, sizeVec);\n  },\n  tick() {\n    const colliders = this.data.colliders;\n\n    for (let i = 0; i < colliders.length; i++) {\n      const collider = colliders[i];\n      const object3D = collider.object3D;\n\n      object3D.getWorldPosition(colliderWorldPositionVec);\n      const isColliding = this.boundingBox.containsPoint(colliderWorldPositionVec);\n      const collidingLastFrame = this.collidingLastFrame[object3D.id];\n\n      if (isColliding && !collidingLastFrame) {\n        this.data.target.setAttribute(this.data.enterComponent, this.data.enterProperty, this.data.enterValue);\n      } else if (!isColliding && collidingLastFrame) {\n        this.data.target.setAttribute(this.data.leaveComponent, this.data.leaveProperty, this.data.leaveValue);\n      }\n\n      this.collidingLastFrame[object3D.id] = isColliding;\n    }\n  }\n});\n","// HACK: Setting videoPaused on media-video doesn't work if you are the owner.\n// This component gets around that by calling .togglePlaying() to play/pause the video based on a property change.\nAFRAME.registerComponent(\"video-pause-state\", {\n  schema: {\n    paused: { default: false }\n  },\n\n  init() {\n    this.onPauseStateChange = this.onPauseStateChange.bind(this);\n    this.videoComponent = this.el.components[\"media-video\"];\n\n    if (this.videoComponent) {\n      this.onVideoLoaded();\n    } else {\n      this.onVideoLoaded = this.onVideoLoaded.bind(this);\n      this.el.addEventListener(\"video-loaded\", this.onVideoLoaded);\n    }\n  },\n\n  onVideoLoaded() {\n    this.videoComponent = this.el.components[\"media-video\"];\n    this.video = this.videoComponent.video;\n    this.video.addEventListener(\"pause\", this.onPauseStateChange);\n  },\n\n  onPauseStateChange() {\n    this.el.setAttribute(\"paused\", this.video.paused);\n  },\n\n  update() {\n    if (this.video && this.data.paused !== this.video.paused) {\n      this.videoComponent.togglePlaying();\n    }\n  },\n\n  remove() {\n    this.video.removeEventListener(\"pause\", this.onPauseStateChange);\n    this.el.removeEventListener(\"video-loaded\", this.onVideoLoaded);\n  }\n});\n","/**\n * Logs all events dispatched on an entity\n * @namespace debug\n * @component log-events\n */\nAFRAME.registerComponent(\"log-events\", {\n  init: function() {\n    const el = this.el;\n    const log = this.log.bind(this);\n    const origDispatch = this.el.dispatchEvent;\n    this.el.dispatchEvent = function() {\n      log(Array.from(arguments));\n      return origDispatch.apply(el, arguments);\n    };\n  },\n  log: function([e]) {\n    if ([\"componentchanged\"].includes(e.type)) return;\n    let firstObject = true;\n    const replacer = (k, x) => {\n      if (!x) return x;\n      if (typeof x === \"object\" && x.length === undefined) {\n        if (firstObject) {\n          firstObject = false;\n          return x;\n        }\n        return \"[object]\";\n      }\n      return x;\n    };\n    console.info(`log-events: ${this.el.id} ${e.type} ${JSON.stringify(e.detail, replacer)}`);\n  }\n});\n\n/**\n * Logs all life cycle phases on an entity.\n * @namespace debug\n * @component lifecycle-checker\n */\nAFRAME.registerComponent(\"lifecycle-checker\", {\n  schema: {\n    name: { type: \"string\" },\n    tick: { default: false }\n  },\n  init: function() {\n    this.log(\"init\");\n  },\n  update: function() {\n    this.log(\"update\");\n  },\n  tick: function() {\n    if (this.data.tick) {\n      this.log(\"tick\");\n    }\n  },\n  remove: function() {\n    this.log(\"remove\");\n  },\n  pause: function() {\n    this.log(\"pause\");\n  },\n  play: function() {\n    this.log(\"play\");\n  },\n\n  log: function(method) {\n    console.info(`lifecycle-checker:${this.data.name} ${method}`);\n  }\n});\n","export const createImageBitmap =\n  window.createImageBitmap ||\n  async function(data) {\n    return new Promise(resolve => {\n      // https://dev.to/nektro/createimagebitmap-polyfill-for-safari-and-edge-228\n      // https://gist.github.com/MonsieurV/fb640c29084c171b4444184858a91bc7\n\n      let srcUrl;\n      if (data instanceof Blob) {\n        srcUrl = URL.createObjectURL(data);\n      } else {\n        const canvas = document.createElement(\"canvas\");\n        const ctx = canvas.getContext(\"2d\");\n        canvas.width = data.width;\n        canvas.height = data.height;\n        ctx.putImageData(data, 0, 0);\n        srcUrl = canvas.toDataURL();\n      }\n      const img = document.createElement(\"img\");\n\n      img.addEventListener(\"load\", () => resolve(img));\n\n      img.src = srcUrl;\n    });\n  };\n\nexport function disposeImageBitmap(imageBitmap) {\n  if (imageBitmap instanceof HTMLImageElement && imageBitmap.src.startsWith(\"blob:\")) {\n    URL.revokeObjectURL(imageBitmap.src);\n  } else {\n    imageBitmap.close && imageBitmap.close();\n  }\n}\n","const { Pathfinding } = require(\"three-pathfinding\");\n\nAFRAME.registerSystem(\"nav\", {\n  init: function() {\n    this.pathfinder = new Pathfinding();\n  },\n\n  loadMesh: function(mesh, zone) {\n    this.el.object3D.updateMatrixWorld();\n\n    if (this.mesh && this.mesh.geometry && this.mesh.geometry.dispose) {\n      this.mesh.geometry.dispose();\n    }\n\n    this.mesh = mesh;\n    const geometry = new THREE.Geometry().fromBufferGeometry(mesh.geometry);\n    geometry.applyMatrix(mesh.matrixWorld);\n    this.pathfinder.setZoneData(zone, Pathfinding.createZone(geometry));\n    this.el.sceneEl.emit(\"nav-mesh-loaded\");\n  }\n});\n","/**\n * Listens to events from an event source and re-emits them on this entity\n * @component event-repeater\n */\nAFRAME.registerComponent(\"event-repeater\", {\n  schema: {\n    eventSource: { type: \"selector\" },\n    events: { type: \"array\" }\n  },\n\n  play: function() {\n    this.data.eventListeners = [];\n    const events = this.data.events;\n    for (let i = 0; i < events.length; i++) {\n      const event = events[i];\n      this.data.eventListeners[event] = this._handleEvent.bind(this, event);\n      this.data.eventSource.addEventListener(event, this.data.eventListeners[event]);\n    }\n  },\n\n  pause: function() {\n    const events = this.data.events;\n    for (let i = 0; i < events.length; i++) {\n      const event = events[i];\n      this.data.eventSource.removeEventListener(event, this.data.eventListeners[event]);\n    }\n    this.data.eventListeners = [];\n  },\n\n  _handleEvent: function(event, e) {\n    this.el.emit(event, e.detail);\n  }\n});\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport const ReactAudioContext = React.createContext({});\n\nexport const hudHoverSound = \"play_sound-hud_hover_start\";\n\nexport const WithHoverSound = ({ sound, children }) => {\n  return (\n    <ReactAudioContext.Consumer>\n      {context => {\n        return React.cloneElement(children, {\n          onMouseEnter: e => {\n            if (context && context.playSound) {\n              context.playSound(sound || hudHoverSound);\n            }\n            children.props.onMouseEnter && children.props.onMouseEnter(e);\n          }\n        });\n      }}\n    </ReactAudioContext.Consumer>\n  );\n};\n\nWithHoverSound.propTypes = {\n  children: PropTypes.object,\n  sound: PropTypes.string\n};\n","export default function nextTick() {\n  return new Promise(resolve => {\n    setTimeout(resolve, 0);\n  });\n}\n","export function showHoverEffect(el) {\n  const isFrozen = el.sceneEl.is(\"frozen\");\n  const isPinned = el.components.pinnable && el.components.pinnable.data.pinned;\n  const isSpawner = !!el.components[\"super-spawner\"];\n  const canMove =\n    window.APP.hubChannel.can(\"spawn_and_move_media\") && (!isPinned || window.APP.hubChannel.can(\"pin_objects\"));\n  return (isSpawner || !isPinned || isFrozen) && canMove;\n}\n\nexport function canMove(entity) {\n  const isPinned = entity.components.pinnable && entity.components.pinnable.data.pinned;\n  const networkedTemplate = entity && entity.components.networked && entity.components.networked.data.template;\n  const isCamera = networkedTemplate === \"#interactable-camera\";\n  const isPen = networkedTemplate === \"#interactable-pen\";\n  return (\n    window.APP.hubChannel.can(\"spawn_and_move_media\") &&\n    (!isPinned || window.APP.hubChannel.can(\"pin_objects\")) &&\n    (!isCamera || window.APP.hubChannel.can(\"spawn_camera\")) &&\n    (!isPen || window.APP.hubChannel.can(\"spawn_drawing\"))\n  );\n}\n"],"sourceRoot":""}