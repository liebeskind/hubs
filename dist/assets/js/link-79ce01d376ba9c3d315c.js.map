{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/utils/phoenix-utils.js","webpack:///./src/assets/images/generic_vr_headset.svg","webpack:///./src/utils/disable-ios-zoom.js","webpack:///./src/airtable.js","webpack:///./src/react-components/link-root.js","webpack:///./src/link.js","webpack:///./src/assets/stylesheets/link.scss","webpack:///./src/axonpark/messages.js","webpack:///./src/utils/i18n.js","webpack:///./src/assets/images/hub-preview-light-no-shadow.png","webpack:///./src/utils/identity.js","webpack:///./src/storage/store.js","webpack:///./src/utils/crypto.js","webpack:///./src/utils/link-channel.js","webpack:///./src/assets/avatars/avatars.js","webpack:///./src/telemetry.js","webpack:///./src/react-components/wrap-with-audio.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","8","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","document","createElement","getReticulumFetchUrl","path","absolute","reticulumMeta","invalidatedReticulumMetaThisSession","invalidateReticulumMeta","_invalidateReticulumMeta","this","arguments","getReticulumMeta","_getReticulumMeta","querySelector","version","getAttribute","pool","phx_host","fetch","then","_ref2","_asyncToGenerator","res","json","_x6","phxHostOverride","URLSearchParams","location","search","connectToReticulum","_connectToReticulum","debug","params","qs","getNewSocketUrl","_ref3","socketProtocol","protocol","socketHost","socketPort","process","RETICULUM_SOCKET_SERVER","URL","port","socketUrl","console","log","socketSettings","logger","kind","msg","socket","Socket","connect","onError","endPointPath","endPoint","pathname","newEndPoint","getLandingPageForPhoto","photoUrl","parsedUrl","replace","fetchReticulumAuthenticated","url","method","payload","token","APP","store","state","credentials","retUrl","headers","content-type","authorization","body","JSON","stringify","_ref","text","parse","e","_x","createAndRedirectToNewHub","_x2","_x3","_x4","_x5","_createAndRedirectToNewHub","sceneId","sceneUrl","createUrl","assets","Name","SceneUrl","record","airtableAssets","find","fields","hub","default_environment_gltf_bundle_url","Store","error","update","email","creatorAssignmentToken","creator_assignment_token","creatorAssignmentTokens","hubId","hub_id","embedToken","embed_token","embedTokens","host","getPresenceEntryForSession","presences","sessionId","presence","entries","k","metas","getPresenceContextForSession","context","getPresenceProfileForSession","profile","migrateChannelToSocket","oldChannel","channel","topic","bindings","item","on","event","callback","pushBuffer","timeout","oldJoinPush","joinPush","join","recHooks","receive","status","Promise","resolve","discordBridgesForPresences","channels","values","discordBridges","Array","map","b","__webpack_exports__","disableiOSZoom","detect_browser__WEBPACK_IMPORTED_MODULE_0__","detectOS","navigator","userAgent","lastTouchAtMs","addEventListener","ev","scale","preventDefault","now","Date","getTime","isDoubleTouch","Airtable","configure","endpointUrl","apiKey","base","airtableAssetsInitialState","DarkLogo","Icon","airtableMessages","select","view","firstPage","err","records","MAX_DIGITS","MAX_LETTERS","addLocaleData","en","hasTouchEvents","documentElement","LinkRoot","Component","[object Object]","args","_this","super","_defineProperty","entered","isAlphaMode","failedAtLeastOnce","handleKeyDown","attachTouchEvents","ref","buttonRefs","ontouchstart","removeChar","toggleMode","addToEntry","removeEventListener","keyCode","stopPropagation","ch","maxAllowedChars","newChars","setState","attemptLookup","substring","code","props","linkChannel","attemptLink","response","hasChangedName","activity","href","catch","Error","message","attemptEntry","render","react_default","a","index_es","locale","lang","messages","className","styles","link","linkContents","logo","src","hub_preview_light_no_shadow_default","classNames","codeLoadingPanel","enteredContents","header","id","charInput","type","pattern","onChange","target","match","toUpperCase","enteredFooter","wrap_with_audio","onClick","keypad","disabled","keypadButton","toString","keypadToggleMode","keypadZeroButton","keypadBackspace","footer","linkHeadsetFooterLink","style","visibility","HeadsetIcon","headsetIcon","intl","PropTypes","registerTelemetry","init","LinkChannel","setSocket","ReactDOM","link_root","getElementById","keypad-button","char-input","loading-text","loadingText","link-contents","entered-footer","entered-contents","code-loading-panel","entry-footer-image","entryFooterImage","footer-image","footerImage","keypad-backspace","keypad-toggle-mode","char","headset-icon","link-headset-footer-link","auth.verified-title","auth.verified","auth.spoke-verified","sign-in.prompt","sign-in.auth-started","sign-in.pin","sign-in.pin-complete","sign-in.unpin","sign-in.unpin-complete","sign-in.change-scene","sign-in.change-scene-complete","sign-in.rename-room","sign-in.rename-room-complete","sign-in.close-room","sign-in.close-room-complete","sign-in.mute-user","sign-in.mute-user-complete","sign-in.kick-user","sign-in.kick-user-complete","sign-in.create-avatar","sign-in.create-avatar-complete","sign-in.favorite-room","sign-in.favorite-rooms","sign-in.favorite-room-complete","sign-in.favorite-rooms-complete","sign-in.as","sign-in.in","sign-in.out","rename-room.message","rename-room.rename","close-room.message","close-room.confirm","close-room.cancel","entry.room","entry.enter-room-title","entry.enter-room","entry.leave-room","entry.change-scene","entry.in-lobby-notice","entry.screen-prefix","entry.desktop-screen","entry.mobile-screen","entry.mobile-safari","entry.generic-prefix","entry.generic-medium","entry.generic-subtitle-desktop","entry.gearvr-prefix","entry.gearvr-medium","entry.choose-device","entry.device-medium","entry.device-subtitle-desktop","entry.device-subtitle-mobile","entry.device-subtitle-vr","entry.cardboard","entry.daydream-prefix","entry.daydream-medium","entry.daydream-via-chrome","entry.invite-others","entry.share-button","entry.desktop.invite-tip","entry.mobile.invite-tip","entry.invite-team-nag","entry.enable-screen-sharing","entry.return-to-vr","entry.enter-in-vr","entry.open-in-window","entry.lobby","entry.back","entry.notify_me","entry.mute-on-entry","profile.save","profile.display_name.validation_warning","profile.header","profile.terms_of_use","profile.privacy_notice","profile.choose_avatar","profile.tabs.legacy","profile.tabs.skinnable","profile.tabs.url","profile.info","profile.info-link","avatar-editor.info","avatar-editor.info-link","avatar-preview.loading-failed","media-browser.search-placeholder.scenes","media-browser.search-placeholder.avatars","media-browser.search-placeholder.videos","media-browser.search-placeholder.images","media-browser.search-placeholder.youtube","media-browser.search-placeholder.gifs","media-browser.search-placeholder.twitch","media-browser.search-placeholder.sketchfab","media-browser.search-placeholder.poly","media-browser.search-placeholder.base","media-browser.favorites-header","media-browser.add_custom_object","media-browser.add_custom_scene","media-browser.add_custom_avatar","media-browser.privacy_policy","media-browser.spoke","media-browser.report_issue","media-browser.powered_by.images","media-browser.powered_by.videos","media-browser.powered_by.youtube","media-browser.powered_by.gifs","media-browser.powered_by.sketchfab","media-browser.powered_by.poly","media-browser.powered_by.twitch","media-browser.powered_by.scenes","media-browser.powered_by.avatars","media-browser.empty.images","media-browser.empty.videos","media-browser.empty.youtube","media-browser.empty.gifs","media-browser.empty.sketchfab","media-browser.empty.poly","media-browser.empty.twitch","media-browser.empty.favorites","media-browser.nav_title.youtube","media-browser.nav_title.videos","media-browser.nav_title.images","media-browser.nav_title.gifs","media-browser.nav_title.scenes","media-browser.nav_title.avatars","media-browser.nav_title.sketchfab","media-browser.nav_title.poly","media-browser.nav_title.twitch","media-browser.create-avatar","media-browser.create-scene","media-browser.hub.joined-prefix","audio.title","audio.talk_to_test","audio.click_to_test","audio.subtitle-desktop","audio.subtitle-mobile","audio.enter-now","audio.hmd-mic-warning","audio.grant-title","audio.grant-subtitle","audio.granted-title","audio.granted-subtitle","audio.granted-next","exit.subtitle.exited","exit.subtitle.closed","exit.subtitle.denied","exit.subtitle.kicked","exit.subtitle.left","exit.subtitle.full","exit.subtitle.connect_error","exit.subtitle.version_mismatch","autoexit.title","autoexit.title_units","autoexit.subtitle","autoexit.cancel","presence.entered_room","presence.entered_lobby","presence.join_lobby","presence.join_room","presence.leave","presence.name_change","presence.scene_change","presence.hub_name_change","presence.in_lobby","presence.in_room","home.create_a_room","home.desktop.add_pwa","home.mobile.add_pwa","home.take_a_tour","home.room_create_options","home.room_create_button","home.create_name.validation_warning","home.join_us","home.have_code","home.add_to_discord_1","home.add_to_discord_2","home.add_to_discord_3","home.create_with_spoke","home.report_issue","home.source_link","home.whats_new_link","home.spoke_link","home.about_link","home.community_link","home.privacy_notice","home.terms_of_use","home.get_updates","home.hero_title","home.hero_blurb","home.made_with_love","home.environment_author_by","dialog.close","mailing_list.privacy_label","mailing_list.privacy_link","link.link_page_header_entry","link.link_page_header_headset","link.linking_a_headset","link.try_again","help.report_issue","scene.logo_tagline","scene.create_button","scene.tweet_button","scene.unavailable","link.in_your_browser","link.enter_code","link.do_not_close","link.connect_headset","link.cancel","invite.enter_via","invite.enter_via_modal","invite.tweet","invite.and_enter_code","invite.or_visit","invite.or_visit_modal","invite.embed","invite.embed-tip","spoke.primary_tagline","spoke.secondary_tagline","spoke.thank_you","spoke.download_win","spoke.download_macos","spoke.download_linux","spoke.download_unsupported","spoke.browse_all_versions","spoke.beginner_tutorial_button","spoke.advanced_tutorial_button","spoke.play_button","commands.fly","commands.grow","commands.shrink","commands.scene","commands.rename","commands.help","commands.leave","commands.duck","commands.capture","commands.debug","commands.vrstats","settings.change-avatar","settings.change-scene","settings.favorites","settings.rename-room","settings.close-room","settings.room-info","settings.create-room","settings.create-scene","settings.send-feedback","settings.whats-new","settings.features","settings.controls","settings.community","settings.tips","settings.report","settings.terms","settings.privacy","settings.help","settings.row-profile","settings.row-room","tips.mobile.video_share_mode","tips.mobile.pen_mode","tips.mobile.mute_mode","tips.mobile.freeze_mode","tips.mobile.look","tips.mobile.locomotion","tips.mobile.spawn_menu-pre","tips.mobile.spawn_menu-post","tips.mobile.freeze_gesture","tips.mobile.object_grab","tips.mobile.object_rotate_button-pre","tips.mobile.object_rotate_button-post","tips.mobile.object_scale_button-pre","tips.mobile.object_scale_button-post","tips.mobile.object_recenter_button-pre","tips.mobile.object_recenter_button-post","tips.mobile.object_pin","tips.mobile.invite","tips.desktop.video_share_mode","tips.desktop.pen_mode","tips.desktop.mirror_mode","tips.desktop.mute_mode","tips.desktop.look","tips.desktop.locomotion","tips.desktop.turning","tips.desktop.spawn_menu-pre","tips.desktop.spawn_menu-post","tips.desktop.freeze_gesture","tips.desktop.menu_hover","tips.desktop.object_grab","tips.desktop.object_pin","tips.desktop.object_zoom","tips.desktop.object_rotate_button-pre","tips.desktop.object_rotate_button-post","tips.desktop.object_scale_button-pre","tips.desktop.object_scale_button-post","tips.desktop.object_recenter_button-pre","tips.desktop.object_recenter_button-post","tips.desktop.object_scale","tips.desktop.pen_color","tips.desktop.pen_size","tips.desktop.invite","tips.desktop.watching","tips.watching.back","tips.mobile.watching","tips.watching-exit","loader.entering_lobby","loader.loading","loader.object","loader.objects","change-scene-dialog.change-scene","change-scene-dialog.create-in-spoke","change-scene-dialog.new-spoke-project","avatar-url-dialog.apply","interstitial.prompt","feedback.prompt","hide-ui.prompt","discord.primary_tagline","discord.secondary_tagline","discord.contact_us","discord.community_link","discord.splash_tag","client-info.kick-button","client-info.hide-button","client-info.unhide-button","client-info.mute-button","client-info.cancel","avatar-landing.select","avatar-landing.selected","leave-room-dialog.join-room.message","leave-room-dialog.join-room.confirm","leave-room-dialog.create-room.message","leave-room-dialog.create-room.confirm","embed.load-button","embed.presence-warning","i18n_messages","navigatorLang","languages","language","userLanguage","toLowerCase","split","localeData","names","selectRandom","arr","Math","floor","random","avatarIds","avatars","av","generateDefaultProfile","avatarId","LOCAL_STORE_KEY","STORE_STATE_CACHE_KEY","OAUTH_FLOW_CREDENTIALS_KEY","validator","Validator","SCHEMA","definitions","additionalProperties","properties","displayName","personalAvatarId","hasFoundFreeze","hasAcceptedProfile","lastEnteredAt","hasPinned","hasRotated","hasRecentered","hasScaled","hasHoveredInWorldHud","hasOpenedShare","entryCount","settings","lastUsedMicDeviceId","confirmedDiscordRooms","items","confirmedBroadcastedRooms","uploadPromotionTokens","fileId","promotionToken","onLoadActions","action","$ref","EventTarget","constructor","_objectSpread","localStorage","getItem","setItem","dispatchEvent","CustomEvent","oauthFlowCredentials","Cookies","getJSON","resetToRandomLegacyAvatar","remove","credentialsAccountId","jwtDecode","sub","resetConfirmedBroadcastedRooms","clearStoredArray","resetTipActivityFlags","bumpEntryCount","currentEntryCount","enqueueOnLoadAction","executeOnLoadActions","sceneEl","emit","detail","clearOnLoadActions","arrayMerge","destinationArray","sourceArray","newState","mergeOpts","finalState","merge","valid","validate","undefined","deriveKey","privateKey","publicKey","crypto","subtle","public","publicKeyToString","exportKey","stringToPublicKey","importKey","namedCurve","stringToArrayBuffer","buf","Uint8Array","charCodeAt","arrayBufferToString","byteLength","String","fromCharCode","keyPair","generateKey","publicKeyString","incomingPublicKeyString","obj","iv","incomingPublicKey","secret","encryptedData","btoa","encrypt","base64value","ciphertext","atob","decrypt","LINK_ACTION_TIMEOUT","onFinished","finished","step","getLetter","readyToSend","leftChannel","leave","cancel","keys","incoming","_generatePublicKeyAndEncryptedObject","generatePublicKeyAndEncryptedObject","public_key","target_session_id","reply_to_session_id","reject","_generateKeys","generateKeys","numOccupants","session_id","setTimeout","warn","_x7","_x8","_x9","_decryptObject","decryptObject","model","thumbnail","raven_js__WEBPACK_IMPORTED_MODULE_0__","raven_js__WEBPACK_IMPORTED_MODULE_0___default","ga","trackedPage","trackedTitle","sentryDsn","SENTRY_DSN","gaTrackingId","GA_TRACKING_ID","Raven","config","install","ReactAudioContext","WithHoverSound","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","React","createContext","sound","children","Consumer","cloneElement","onMouseEnter","playSound","propTypes","string"],"mappings":"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","file":"assets/js/link-79ce01d376ba9c3d315c.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t8: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([2150,1,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import { Socket } from \"phoenix\";\nimport { generateHubName } from \"../utils/name-generation\";\nimport { airtableAssets, airtableAssetsInitialState } from '../airtable'\n\nimport Store from \"../storage/store\";\n\nconst resolverLink = document.createElement(\"a\");\nexport function getReticulumFetchUrl(path, absolute = false) {\n  if (process.env.RETICULUM_SERVER) {\n    return `https://${process.env.RETICULUM_SERVER}${path}`;\n  } else if (absolute) {\n    resolverLink.href = path;\n    return resolverLink.href;\n  } else {\n    return path;\n  }\n}\n\nlet reticulumMeta = null;\nlet invalidatedReticulumMetaThisSession = false;\n\nexport async function invalidateReticulumMeta() {\n  invalidatedReticulumMetaThisSession = true;\n  reticulumMeta = null;\n}\n\nexport async function getReticulumMeta() {\n  if (!reticulumMeta) {\n    // Initially look up version based upon page, avoiding round-trip, otherwise fetch.\n    if (!invalidatedReticulumMetaThisSession && document.querySelector(\"meta[name='ret:version']\")) {\n      reticulumMeta = {\n        version: document.querySelector(\"meta[name='ret:version']\").getAttribute(\"value\"),\n        pool: document.querySelector(\"meta[name='ret:pool']\").getAttribute(\"value\"),\n        phx_host: document.querySelector(\"meta[name='ret:phx_host']\").getAttribute(\"value\")\n      };\n    } else {\n      await fetch(getReticulumFetchUrl(\"/api/v1/meta\")).then(async res => {\n        reticulumMeta = await res.json();\n      });\n    }\n  }\n\n  const qs = new URLSearchParams(location.search);\n  const phxHostOverride = qs.get(\"phx_host\");\n\n  if (phxHostOverride) {\n    reticulumMeta.phx_host = phxHostOverride;\n  }\n\n  return reticulumMeta;\n}\n\nexport async function connectToReticulum(debug = false, params = null) {\n  const qs = new URLSearchParams(location.search);\n\n  const getNewSocketUrl = async () => {\n    const socketProtocol = qs.get(\"phx_protocol\") || (document.location.protocol === \"https:\" ? \"wss:\" : \"ws:\");\n    let socketHost = qs.get(\"phx_host\");\n    let socketPort = qs.get(\"phx_port\");\n\n    const reticulumMeta = await getReticulumMeta();\n    socketHost = socketHost || process.env.RETICULUM_SOCKET_SERVER || reticulumMeta.phx_host;\n    socketPort =\n      socketPort ||\n      (process.env.RETICULUM_SERVER ? new URL(`${socketProtocol}//${process.env.RETICULUM_SERVER}`).port : \"443\");\n    return `${socketProtocol}//${socketHost}${socketPort ? `:${socketPort}` : \"\"}`;\n  };\n\n  const socketUrl = await getNewSocketUrl();\n  console.log(`Phoenix Socket URL: ${socketUrl}`);\n\n  const socketSettings = {};\n\n  if (debug) {\n    socketSettings.logger = (kind, msg, data) => {\n      console.log(`${kind}: ${msg}`, data);\n    };\n  }\n\n  if (params) {\n    socketSettings.params = params;\n  }\n\n  const socket = new Socket(`${socketUrl}/socket`, socketSettings);\n  socket.connect();\n  socket.onError(async () => {\n    // On error, underlying reticulum node may have died, so rebalance by\n    // fetching a new healthy node to connect to.\n    invalidateReticulumMeta();\n\n    const endPointPath = new URL(socket.endPoint).pathname;\n    const newSocketUrl = await getNewSocketUrl();\n    const newEndPoint = `${newSocketUrl}${endPointPath}`;\n    console.log(`Socket error, changed endpoint to ${newEndPoint}`);\n    socket.endPoint = newEndPoint;\n  });\n\n  return socket;\n}\n\nexport function getLandingPageForPhoto(photoUrl) {\n  const parsedUrl = new URL(photoUrl);\n  return getReticulumFetchUrl(parsedUrl.pathname.replace(\".png\", \".html\") + parsedUrl.search, true);\n}\n\nexport function fetchReticulumAuthenticated(url, method = \"GET\", payload) {\n  const { token } = window.APP.store.state.credentials;\n  const retUrl = getReticulumFetchUrl(url);\n  const params = {\n    headers: { \"content-type\": \"application/json\" },\n    method\n  };\n  if (token) {\n    params.headers.authorization = `bearer ${token}`;\n  }\n  if (payload) {\n    params.body = JSON.stringify(payload);\n  }\n  return fetch(retUrl, params).then(async r => {\n    const result = await r.text();\n    try {\n      return JSON.parse(result);\n    } catch (e) {\n      // Some reticulum responses, particularly DELETE requests, don't return json.\n      return result;\n    }\n  });\n}\n\nexport async function createAndRedirectToNewHub(name, sceneId, sceneUrl, replace) {\n  const createUrl = getReticulumFetchUrl(\"/api/v1/hubs\");\n\n  let assets = {Name: \"Test\", SceneUrl: null};\n\n  const record = await airtableAssets.find('recHqITRS7cBMwn9i')\n\n  if (record) assets = record.fields;\n  \n  // const payload = { hub: { name: name || generateHubName() } };\n  const payload = { hub: { name: assets.Name } };\n  \n\n  // if (sceneId) {\n  //   payload.hub.scene_id = sceneId;\n  // } else {\n    // payload.hub.default_environment_gltf_bundle_url = sceneUrl;\n    \n    // payload.hub.default_environment_gltf_bundle_url = 'https://www.dropbox.com/s/ayl3t33p2ymnxux/Axon%20Park_Cliffside.glb';\n    // payload.hub.default_environment_gltf_bundle_url = 'https://s3-us-west-1.amazonaws.com/axonpark/Axon_Park_Cliffside.glb';\n    payload.hub.default_environment_gltf_bundle_url = assets.SceneUrl;\n    // payload.hub.default_environment_gltf_bundle_url = '/assets/Axon_Park_Cliffside.glb';\n  // }\n\n  const headers = { \"content-type\": \"application/json\" };\n  const store = new Store();\n  if (store.state && store.state.credentials.token) {\n    headers.authorization = `bearer ${store.state.credentials.token}`;\n  }\n\n  let res = await fetch(createUrl, {\n    body: JSON.stringify(payload),\n    headers,\n    method: \"POST\"\n  }).then(r => r.json());\n\n  if (res.error === \"invalid_token\") {\n    // Clear the invalid token from store.\n    store.update({ credentials: { token: null, email: null } });\n\n    // Create hub anonymously\n    delete headers.authorization;\n    res = await fetch(createUrl, {\n      body: JSON.stringify(payload),\n      headers,\n      method: \"POST\"\n    }).then(r => r.json());\n  }\n\n  const hub = res;\n  let url = hub.url;\n\n  const creatorAssignmentToken = hub.creator_assignment_token;\n  if (creatorAssignmentToken) {\n    store.update({ creatorAssignmentTokens: [{ hubId: hub.hub_id, creatorAssignmentToken: creatorAssignmentToken }] });\n\n    // Don't need to store the embed token if there's no creator assignment token, since that means\n    // we are the owner and will get the embed token on page load.\n    const embedToken = hub.embed_token;\n\n    if (embedToken) {\n      store.update({ embedTokens: [{ hubId: hub.hub_id, embedToken: embedToken }] });\n    }\n  }\n\n  if (process.env.RETICULUM_SERVER && document.location.host !== process.env.RETICULUM_SERVER) {\n    url = `/hub.html?hub_id=${hub.hub_id}`;\n  }\n\n  if (replace) {\n    document.location.replace(url);\n  } else {\n    document.location = url;\n  }\n}\n\nexport function getPresenceEntryForSession(presences, sessionId) {\n  const entry = Object.entries(presences || {}).find(([k]) => k === sessionId) || [];\n  const presence = entry[1];\n  return (presence && presence.metas && presence.metas[0]) || {};\n}\n\nexport function getPresenceContextForSession(presences, sessionId) {\n  return (getPresenceEntryForSession(presences, sessionId) || {}).context || {};\n}\n\nexport function getPresenceProfileForSession(presences, sessionId) {\n  return (getPresenceEntryForSession(presences, sessionId) || {}).profile || {};\n}\n\n// Takes the given channel, and creates a new channel with the same bindings\n// with the given socket, joins it, and leaves the old channel after joining.\n//\n// NOTE: This function relies upon phoenix channel object internals, so this\n// function will need to be reviewed if/when we ever update phoenix.js\nexport function migrateChannelToSocket(oldChannel, socket, params) {\n  const channel = socket.channel(oldChannel.topic, params || oldChannel.params);\n\n  for (let i = 0, l = oldChannel.bindings.length; i < l; i++) {\n    const item = oldChannel.bindings[i];\n    channel.on(item.event, item.callback);\n  }\n\n  for (let i = 0, l = oldChannel.pushBuffer.length; i < l; i++) {\n    const item = oldChannel.pushBuffer[i];\n    channel.push(item.event, item.payload, item.timeout);\n  }\n\n  const oldJoinPush = oldChannel.joinPush;\n  const joinPush = channel.join();\n\n  for (let i = 0, l = oldJoinPush.recHooks.length; i < l; i++) {\n    const item = oldJoinPush.recHooks[i];\n    joinPush.receive(item.status, item.callback);\n  }\n\n  return new Promise(resolve => {\n    joinPush.receive(\"ok\", () => {\n      // Clear all event handlers first so no duplicate messages come in.\n      oldChannel.bindings = [];\n      resolve(channel);\n    });\n  });\n}\n\nexport function discordBridgesForPresences(presences) {\n  const channels = [];\n  for (const p of Object.values(presences)) {\n    for (const m of p.metas) {\n      if (m.profile && m.profile.discordBridges) {\n        Array.prototype.push.apply(channels, m.profile.discordBridges.map(b => b.channel.name));\n      }\n    }\n  }\n  return channels;\n}\n","module.exports = __webpack_public_path__ + \"assets/images/generic_vr_headset-6cb5c6205420ac7e9c3ca3e0c0a6db2c.svg\";","import { detectOS } from \"detect-browser\";\n\nexport function disableiOSZoom() {\n  if (detectOS(navigator.userAgent) !== \"iOS\") return;\n\n  let lastTouchAtMs = 0;\n\n  document.addEventListener(\"touchmove\", ev => {\n    if (ev.scale === 1) return;\n\n    ev.preventDefault();\n  });\n\n  document.addEventListener(\"touchend\", ev => {\n    const now = new Date().getTime();\n    const isDoubleTouch = now - lastTouchAtMs <= 300;\n    lastTouchAtMs = now;\n\n    if (isDoubleTouch) {\n      ev.preventDefault();\n    }\n  });\n}\n","import Airtable from 'airtable';\nAirtable.configure({\n    endpointUrl: 'https://api.airtable.com',\n    apiKey: 'keyOHSVeLr3ryLrL5'\n});\n\nconst base = Airtable.base('appIR0AlHDFG5WR8z');\n\nexport const airtableAssetsInitialState = { DarkLogo: null, Name: null, Icon: null }\nexport const airtableAssets = base('Assets');\n\nexport const airtableMessages = base('Messages').select({\n    view: 'Grid view'\n}).firstPage(async (err, records) => {\n    if (err) { console.error(err); return; }\n    const record = records[0];\n    // console.log(record.get('Motto'))\n    return record;\n\n    // records.forEach(function(record) {\n    //     console.log('Retrieved', record.get('Motto'));\n    // });\n});;\n// .find('recHqITRS7cBMwn9i', (err, record) => record.fields);\n// export const airtableAssets = () => base('Assets')\n\n// export default base;","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { IntlProvider, FormattedMessage, addLocaleData } from \"react-intl\";\nimport en from \"react-intl/locale-data/en\";\n\nimport { lang, messages } from \"../utils/i18n\";\nimport classNames from \"classnames\";\nimport styles from \"../assets/stylesheets/link.scss\";\nimport { disableiOSZoom } from \"../utils/disable-ios-zoom\";\nimport HeadsetIcon from \"../assets/images/generic_vr_headset.svg\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nconst MAX_DIGITS = 6;\nconst MAX_LETTERS = 4;\n\naddLocaleData([...en]);\ndisableiOSZoom();\nconst hasTouchEvents = \"ontouchstart\" in document.documentElement;\n\nclass LinkRoot extends Component {\n  static propTypes = {\n    intl: PropTypes.object,\n    store: PropTypes.object,\n    linkChannel: PropTypes.object\n  };\n\n  state = {\n    entered: \"\",\n    isAlphaMode: false,\n    failedAtLeastOnce: false\n  };\n\n  buttonRefs = {};\n\n  componentDidMount = () => {\n    document.addEventListener(\"keydown\", this.handleKeyDown);\n    this.attachTouchEvents();\n  };\n\n  attachTouchEvents = () => {\n    // https://github.com/facebook/react/issues/9809#issuecomment-413978405\n    if (hasTouchEvents) {\n      for (const [name, ref] of Object.entries(this.buttonRefs)) {\n        if (!ref) continue;\n        if (name === \"remove\") {\n          ref.ontouchstart = () => this.removeChar();\n        } else if (name === \"toggle\") {\n          ref.ontouchstart = () => this.toggleMode();\n        } else {\n          ref.ontouchstart = () => this.addToEntry(name);\n        }\n      }\n    }\n  };\n\n  componentDidUpdate = () => {\n    this.attachTouchEvents();\n  };\n\n  componentWillUnmount = () => {\n    document.removeEventListener(\"keydown\", this.handleKeyDown);\n  };\n\n  handleKeyDown = e => {\n    // Number keys 0-9\n    if ((e.keyCode < 48 || e.keyCode > 57) && !this.state.isAlphaMode) {\n      return;\n    }\n\n    // Alpha keys A-I\n    if ((e.keyCode < 65 || e.keyCode > 73) && this.state.isAlphaMode) {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (this.state.isAlphaMode) {\n      this.addToEntry(\"IHGFEDCBA\"[73 - e.keyCode]);\n    } else {\n      this.addToEntry(e.keyCode - 48);\n    }\n  };\n\n  maxAllowedChars = () => {\n    return this.state.isAlphaMode ? MAX_LETTERS : MAX_DIGITS;\n  };\n\n  addToEntry = ch => {\n    if (this.state.entered.length >= this.maxAllowedChars()) return;\n    const newChars = `${this.state.entered}${ch}`;\n\n    this.setState({ entered: newChars }, () => {\n      if (this.state.entered.length === this.maxAllowedChars()) {\n        this.attemptLookup(this.state.entered);\n      }\n    });\n  };\n\n  removeChar = () => {\n    const entered = this.state.entered;\n    if (entered.length === 0) return;\n    this.setState({ entered: entered.substring(0, entered.length - 1) });\n  };\n\n  attemptLink = async code => {\n    this.props.linkChannel\n      .attemptLink(code)\n      .then(response => {\n        // If there is a profile from the linked device, copy it over if we don't have one yet.\n        if (response.profile) {\n          const { hasChangedName } = this.props.store.state.activity;\n\n          if (!hasChangedName) {\n            this.props.store.update({ activity: { hasChangedName: true }, profile: response.profile });\n          }\n        }\n        this.props.store.update({ credentials: response.credentials });\n\n        if (response.path) {\n          window.location.href = response.path;\n        }\n      })\n      .catch(e => {\n        this.setState({ failedAtLeastOnce: true, entered: \"\" });\n\n        if (!(e instanceof Error && (e.message === \"in_use\" || e.message === \"failed\"))) {\n          throw e;\n        }\n      });\n  };\n\n  attemptEntry = async code => {\n    const url = \"/link/\" + code;\n    const res = await fetch(url);\n\n    if (res.status >= 400) {\n      this.setState({ failedAtLeastOnce: true, entered: \"\" });\n    } else {\n      document.location = url;\n    }\n  };\n\n  attemptLookup = async code => {\n    if (this.state.isAlphaMode) {\n      // Headset link code\n      this.attemptLink(code);\n    } else {\n      // Room entry code\n      this.attemptEntry(code);\n    }\n  };\n\n  toggleMode = () => {\n    this.setState({ isAlphaMode: !this.state.isAlphaMode, entered: \"\", failedAtLeastOnce: false });\n  };\n\n  render() {\n    // Note we use type \"tel\" for the input due to https://bugzilla.mozilla.org/show_bug.cgi?id=1005603\n\n    return (\n      <IntlProvider locale={lang} messages={messages}>\n        <div className={styles.link}>\n          <div className={styles.linkContents}>\n            <a className={styles.logo} href=\"/\">\n              <img src=\"../assets/images/hub-preview-light-no-shadow.png\" />\n            </a>\n            {this.state.entered.length === this.maxAllowedChars() && (\n              <div className={classNames(\"loading-panel\", styles.codeLoadingPanel)}>\n                <div className=\"loader-wrap\">\n                  <div className=\"loader\">\n                    <div className=\"loader-center\" />\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <div className={styles.enteredContents}>\n              <div className={styles.header}>\n                <FormattedMessage\n                  id={\n                    this.state.failedAtLeastOnce\n                      ? \"link.try_again\"\n                      : \"link.link_page_header_\" + (!this.state.isAlphaMode ? \"entry\" : \"headset\")\n                  }\n                />\n              </div>\n\n              <div className={styles.entered}>\n                <input\n                  className={styles.charInput}\n                  type={this.state.isAlphaMode ? \"text\" : \"tel\"}\n                  pattern=\"[0-9A-I]*\"\n                  value={this.state.entered}\n                  onChange={ev => {\n                    if (!this.state.isAlphaMode && ev.target.value.match(/[a-z]/i)) {\n                      this.setState({ isAlphaMode: true });\n                    }\n\n                    this.setState({ entered: ev.target.value.toUpperCase() }, () => {\n                      if (this.state.entered.length === this.maxAllowedChars()) {\n                        this.attemptLookup(this.state.entered);\n                      }\n                    });\n                  }}\n                />\n              </div>\n\n              <div className={styles.enteredFooter}>\n                {!this.state.isAlphaMode && (\n                  <span>\n                    <WithHoverSound>\n                      <a href=\"#\" onClick={() => this.toggleMode()}>\n                        <FormattedMessage id=\"link.linking_a_headset\" />\n                      </a>\n                    </WithHoverSound>\n                  </span>\n                )}\n              </div>\n            </div>\n\n            <div className={styles.keypad}>\n              {(this.state.isAlphaMode\n                ? [\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\"]\n                : [1, 2, 3, 4, 5, 6, 7, 8, 9]\n              ).map((d, i) => (\n                <WithHoverSound key={`char_${i}`}>\n                  <button\n                    disabled={this.state.entered.length === this.maxAllowedChars()}\n                    className={styles.keypadButton}\n                    key={`char_${i}`}\n                    onClick={() => {\n                      if (!hasTouchEvents) this.addToEntry(d);\n                    }}\n                    ref={r => (this.buttonRefs[d.toString()] = r)}\n                  >\n                    {d}\n                  </button>\n                </WithHoverSound>\n              ))}\n              <WithHoverSound>\n                <button\n                  className={classNames(styles.keypadButton, styles.keypadToggleMode)}\n                  ref={r => (this.buttonRefs[\"toggle\"] = r)}\n                  onClick={() => {\n                    if (!hasTouchEvents) this.toggleMode();\n                  }}\n                >\n                  {this.state.isAlphaMode ? \"123\" : \"ABC\"}\n                </button>\n              </WithHoverSound>\n              {!this.state.isAlphaMode && (\n                <WithHoverSound>\n                  <button\n                    disabled={this.state.entered.length === this.maxAllowedChars()}\n                    className={classNames(styles.keypadButton, styles.keypadZeroButton)}\n                    ref={r => (this.buttonRefs[\"0\"] = r)}\n                    onClick={() => {\n                      if (!hasTouchEvents) this.addToEntry(0);\n                    }}\n                  >\n                    0\n                  </button>\n                </WithHoverSound>\n              )}\n              <WithHoverSound>\n                <button\n                  disabled={this.state.entered.length === 0 || this.state.entered.length === this.maxAllowedChars()}\n                  className={classNames(styles.keypadButton, styles.keypadBackspace)}\n                  ref={r => (this.buttonRefs[\"remove\"] = r)}\n                  onClick={() => {\n                    if (!hasTouchEvents) this.removeChar();\n                  }}\n                >\n                  ⌫\n                </button>\n              </WithHoverSound>\n            </div>\n\n            <div className={styles.footer}>\n              {!this.state.isAlphaMode && (\n                <div\n                  className={styles.linkHeadsetFooterLink}\n                  style={{ visibility: this.state.isAlphaMode ? \"hidden\" : \"visible\" }}\n                >\n                  <WithHoverSound>\n                    <img onClick={() => this.toggleMode()} src={HeadsetIcon} className={styles.headsetIcon} />\n                  </WithHoverSound>\n                  <span>\n                    <WithHoverSound>\n                      <a href=\"#\" onClick={() => this.toggleMode()}>\n                        <FormattedMessage id=\"link.linking_a_headset\" />\n                      </a>\n                    </WithHoverSound>\n                  </span>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </IntlProvider>\n    );\n  }\n}\n\nexport default LinkRoot;\n","import \"./assets/stylesheets/link.scss\";\nimport \"aframe\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport registerTelemetry from \"./telemetry\";\nimport LinkRoot from \"./react-components/link-root\";\nimport LinkChannel from \"./utils/link-channel\";\nimport { connectToReticulum } from \"./utils/phoenix-utils\";\nimport Store from \"./storage/store\";\n\nregisterTelemetry(\"/link\", \"Hubs Device Link\");\n\nconst store = new Store();\nstore.init();\n\nconst linkChannel = new LinkChannel(store);\n\n(async () => {\n  const socket = await connectToReticulum();\n  linkChannel.setSocket(socket);\n})();\n\nReactDOM.render(<LinkRoot store={store} linkChannel={linkChannel} />, document.getElementById(\"link-root\"));\n","// removed by extract-text-webpack-plugin\nmodule.exports = {\"keypad-button\":\"link__keypad-button__2ElvK\",\"keypadButton\":\"link__keypad-button__2ElvK\",\"entered\":\"link__entered__1NNNd\",\"char-input\":\"link__char-input__3Uver\",\"charInput\":\"link__char-input__3Uver\",\"loading-text\":\"link__loading-text__2VpEE\",\"loadingText\":\"link__loading-text__2VpEE\",\"logo\":\"link__logo__dzO36\",\"link\":\"link__link__3kJ6B\",\"link-contents\":\"link__link-contents__3L1rY\",\"linkContents\":\"link__link-contents__3L1rY\",\"entered-footer\":\"link__entered-footer__2Oi0C\",\"enteredFooter\":\"link__entered-footer__2Oi0C\",\"entered-contents\":\"link__entered-contents__2ZmCP\",\"enteredContents\":\"link__entered-contents__2ZmCP\",\"code-loading-panel\":\"link__code-loading-panel__21IQD\",\"codeLoadingPanel\":\"link__code-loading-panel__21IQD\",\"entry-footer-image\":\"link__entry-footer-image__1XOeK\",\"entryFooterImage\":\"link__entry-footer-image__1XOeK\",\"footer-image\":\"link__footer-image__AsDh-\",\"footerImage\":\"link__footer-image__AsDh-\",\"header\":\"link__header__ID1fV\",\"footer\":\"link__footer__DERRP\",\"keypad\":\"link__keypad__1FVTF\",\"keypad-backspace\":\"link__keypad-backspace__M4x5m\",\"keypadBackspace\":\"link__keypad-backspace__M4x5m\",\"keypad-toggle-mode\":\"link__keypad-toggle-mode__2sIRG\",\"keypadToggleMode\":\"link__keypad-toggle-mode__2sIRG\",\"char\":\"link__char__20D9j\",\"headset-icon\":\"link__headset-icon__22_kp\",\"headsetIcon\":\"link__headset-icon__22_kp\",\"link-headset-footer-link\":\"link__link-headset-footer-link__pGQB8\",\"linkHeadsetFooterLink\":\"link__link-headset-footer-link__pGQB8\"};","import {airtableMessages} from '../airtable'\n\n// let fields;\n\n// airtableAssets.find('recHqITRS7cBMwn9i', (err, record) => \n//    fields = record.fields\n// )\n\nasync () => {\n\tawait console.log(airtableMessages)\n}\n\nlet motto = airtableMessages && airtableMessages.get('Motto') || 'Learn together, from anywhere.\\nThe future of learning is virtual.\\nEqualizing access to premier quality education.'\n\n\nexport default {\n  \"en\": {\n    \"auth.verified-title\": \"E-Mail Verified!\",\n    \"auth.verified\": \"Your email has been verified!\\nYou can now close this browser tab and return to Hubs.\",\n    \"auth.spoke-verified\": \"You email has been verified!\\nYou can now close this browser tab and return to Spoke.\",\n    \"sign-in.prompt\": \"Sign in to pin objects in rooms.\",\n    \"sign-in.auth-started\":\n      \"Email sent!\\n\\nTo continue, go click on the link in the email using your phone, tablet, or PC.\",\n    \"sign-in.pin\": \"You'll need to sign in to pin objects.\",\n    \"sign-in.pin-complete\": \"You are now signed in.\",\n    \"sign-in.unpin\": \"You'll need to sign in to un-pin objects.\",\n    \"sign-in.unpin-complete\": \"You are now signed in.\",\n    \"sign-in.change-scene\": \"You'll need to sign in to change the scene.\",\n    \"sign-in.change-scene-complete\": \"You are now signed in.\",\n    \"sign-in.rename-room\": \"You'll need to sign in to rename axon park.\",\n    \"sign-in.rename-room-complete\": \"You are now signed in.\",\n    \"sign-in.close-room\": \"You'll need to sign in to close axon park.\",\n    \"sign-in.close-room-complete\": \"You are now signed in.\",\n    \"sign-in.mute-user\": \"You'll need to sign in to mute other users.\",\n    \"sign-in.mute-user-complete\": \"You are now signed in.\",\n    \"sign-in.kick-user\": \"You'll need to sign in to kick other users.\",\n    \"sign-in.kick-user-complete\": \"You are now signed in.\",\n    \"sign-in.create-avatar\": \"You'll need to sign in to create avatars.\",\n    \"sign-in.create-avatar-complete\": \"You are now signed in.\",\n    \"sign-in.favorite-room\": \"You'll need to sign in to add this room to your favorites.\",\n    \"sign-in.favorite-rooms\": \"You'll need to sign in to add favorite rooms.\",\n    \"sign-in.favorite-room-complete\": \"You are now signed in.\",\n    \"sign-in.favorite-rooms-complete\": \"You are now signed in.\",\n    \"sign-in.as\": \"Signed in as\",\n    \"sign-in.in\": \"Sign In\",\n    \"sign-in.out\": \"Sign Out\",\n    \"rename-room.message\": \"Enter the new name for axon park.\",\n    \"rename-room.rename\": \"Rename Axon Park\",\n    \"close-room.message\":\n      \"Closing this room will remove yourself and others from axon park, shutting it down permanently.\\n\\nAre you sure? This action cannot be undone.\",\n    \"close-room.confirm\": \"Yes, Close Axon Park\",\n    \"close-room.cancel\": \"Cancel\",\n    \"entry.room\": \"Immersive Education\",\n    \"entry.enter-room-title\": \"Lobby\",\n    \"entry.enter-room\": \"enter or send to device\",\n    \"entry.leave-room\": \"Leave Axon Park\",\n    \"entry.change-scene\": \"Choose a Scene\",\n    \"entry.in-lobby-notice\": \"You are viewing Axon Park from the lobby.\",\n    \"entry.screen-prefix\": \"Enter on \",\n    \"entry.desktop-screen\": \"Screen\",\n    \"entry.mobile-screen\": \"Phone\",\n    \"entry.mobile-safari\": \"Safari\",\n    \"entry.generic-prefix\": \" \",\n    \"entry.generic-medium\": \"Connected VR Headset\",\n    \"entry.generic-subtitle-desktop\": \"Oculus or SteamVR\",\n    \"entry.gearvr-prefix\": \"Enter on \",\n    \"entry.gearvr-medium\": \"Gear VR\",\n    \"entry.choose-device\": \"Choose Device\",\n    \"entry.device-medium\": \"Send to Device\",\n    \"entry.device-subtitle-desktop\": \"Standalone VR or Phone\",\n    \"entry.device-subtitle-mobile\": \"Standalone VR or PC\",\n    \"entry.device-subtitle-vr\": \"Phone or PC\",\n    \"entry.cardboard\": \"Enter on Google Cardboard\",\n    \"entry.daydream-prefix\": \"Enter on \",\n    \"entry.daydream-medium\": \"Daydream\",\n    \"entry.daydream-via-chrome\": \"Using Google Chrome\",\n    \"entry.invite-others\": \"invite others\",\n    \"entry.share-button\": \"share\",\n    \"entry.desktop.invite-tip\": \"Nobody is here yet. Share this room to get together.\",\n    \"entry.mobile.invite-tip\": \"Share to get together.\",\n    \"entry.invite-team-nag\": \"Invite a hubs team member\",\n    \"entry.enable-screen-sharing\": \"Share my desktop\",\n    \"entry.return-to-vr\": \"Return to VR\",\n    \"entry.enter-in-vr\": \"Enter in VR\",\n    \"entry.open-in-window\": \"Open in Tab\",\n    \"entry.lobby\": \"Lobby\",\n    \"entry.back\": \"Back\",\n    \"entry.notify_me\": \"Notify me when others arrive\",\n    \"entry.mute-on-entry\": \"Mute my microphone\",\n    \"profile.save\": \"Accept\",\n    \"profile.display_name.validation_warning\": \"Alphanumerics and hyphens. At least 3 characters, no more than 32\",\n    \"profile.header\": \"Name & Avatar\",\n    \"profile.terms_of_use\": \"Terms of Use\",\n    \"profile.privacy_notice\": \"Privacy Notice\",\n    \"profile.choose_avatar\": \"Browse Avatars\",\n    \"profile.tabs.legacy\": \"Default\",\n    \"profile.tabs.skinnable\": \"Custom Skin\",\n    \"profile.tabs.url\": \"Custom Model\",\n    \"profile.info\": \"Resources for creating custom avatar models can be found\",\n    \"profile.info-link\": \"here\",\n    \"avatar-editor.info\": \"Resources for creating custom avatar skins can be found\",\n    \"avatar-editor.info-link\": \"here\",\n    \"avatar-preview.loading-failed\": \"Loading failed\\nPlease choose another avatar\",\n    \"media-browser.search-placeholder.scenes\": \"Search Scenes...\",\n    \"media-browser.search-placeholder.avatars\": \"Search Avatars...\",\n    \"media-browser.search-placeholder.videos\": \"Search the web...\",\n    \"media-browser.search-placeholder.images\": \"Search the web...\",\n    \"media-browser.search-placeholder.youtube\": \"Search for videos...\",\n    \"media-browser.search-placeholder.gifs\": \"Search for GIFs...\",\n    \"media-browser.search-placeholder.twitch\": \"Search for streams...\",\n    \"media-browser.search-placeholder.sketchfab\": \"Search for models...\",\n    \"media-browser.search-placeholder.poly\": \"Search for models...\",\n    \"media-browser.search-placeholder.base\": \"Search...\",\n    \"media-browser.favorites-header\": \"Favorite Rooms\",\n    \"media-browser.add_custom_object\": \"Custom URL or File\",\n    \"media-browser.add_custom_scene\": \"Custom Scene\",\n    \"media-browser.add_custom_avatar\": \"Avatar GLB URL\",\n    \"media-browser.privacy_policy\": \"Privacy Policy\",\n    \"media-browser.spoke\": \"Spoke\",\n    \"media-browser.report_issue\": \"Report Issue\",\n    \"media-browser.powered_by.images\": \"Search by Bing | \",\n    \"media-browser.powered_by.videos\": \"Search by Bing | \",\n    \"media-browser.powered_by.youtube\": \"Search by Google | \",\n    \"media-browser.powered_by.gifs\": \"Search by Tenor | \",\n    \"media-browser.powered_by.sketchfab\": \"Search by Sketchfab | \",\n    \"media-browser.powered_by.poly\": \"Search by Google | \",\n    \"media-browser.powered_by.twitch\": \"Search by Twitch | \",\n    \"media-browser.powered_by.scenes\": \"Made with \",\n    \"media-browser.powered_by.avatars\": \" \",\n    \"media-browser.empty.images\": \"No results. Try entering a new search above.\",\n    \"media-browser.empty.videos\": \"No results. Try entering a new search above.\",\n    \"media-browser.empty.youtube\": \"No results. Try entering a new search above.\",\n    \"media-browser.empty.gifs\": \"No result. Try entering a new search above.\",\n    \"media-browser.empty.sketchfab\": \"No results. Try entering a new search above.\",\n    \"media-browser.empty.poly\": \"No results. Try entering a new search above.\",\n    \"media-browser.empty.twitch\": \"No results. Try entering a new search above.\",\n    \"media-browser.empty.favorites\": \"You don't have any favorites. Click a ⭐ to add to your favorites.\",\n    \"media-browser.nav_title.youtube\": \"YouTube\",\n    \"media-browser.nav_title.videos\": \"Videos\",\n    \"media-browser.nav_title.images\": \"Images\",\n    \"media-browser.nav_title.gifs\": \"GIFs\",\n    \"media-browser.nav_title.scenes\": \"Scenes\",\n    \"media-browser.nav_title.avatars\": \"Avatars\",\n    \"media-browser.nav_title.sketchfab\": \"Sketchfab\",\n    \"media-browser.nav_title.poly\": \"Google Poly\",\n    \"media-browser.nav_title.twitch\": \"Twitch\",\n    \"media-browser.create-avatar\": \"Create Avatar\",\n    \"media-browser.create-scene\": \"Create Scene with Spoke\",\n    \"media-browser.hub.joined-prefix\": \"Joined \",\n    \"media-browser.hub.joined-prefix\": \"Visited \",\n    \"audio.title\": \"Audio Setup\",\n    \"audio.talk_to_test\": \"talk\",\n    \"audio.click_to_test\": \"click\",\n    \"audio.subtitle-desktop\": \"Confirm HMD speaker output\",\n    \"audio.subtitle-mobile\": \"Earphones are recommended\",\n    \"audio.enter-now\": \"Enter Now\",\n    \"audio.hmd-mic-warning\": \"Your HMD mic is not chosen\",\n    \"audio.grant-title\": \"Grant mic permissions\",\n    \"audio.grant-subtitle\": \"Mic access needed to be heard by others\",\n    \"audio.granted-title\": \"Mic permissions granted\",\n    \"audio.granted-subtitle\": \"You can still mute yourself in-game\",\n    \"audio.granted-next\": \"Next\",\n    \"exit.subtitle.exited\": \"Your session has ended. Refresh your browser to start a new one.\",\n    \"exit.subtitle.closed\": \"This room is no longer available.\",\n    \"exit.subtitle.denied\": \"You are not permitted to join this room. Please request permission from the room creator.\",\n    \"exit.subtitle.kicked\": \"You have been kicked from axon park.\",\n    \"exit.subtitle.left\": \"You have left axon park.\",\n    \"exit.subtitle.full\": \"This room is full, please try again later.\",\n    \"exit.subtitle.connect_error\": \"Unable to connect to this room, please try again later.\",\n    \"exit.subtitle.version_mismatch\":\n      \"The version you deployed is not available yet. Your browser will refresh in 5 seconds.\",\n    \"autoexit.title\": \"Auto-ending session in \",\n    \"autoexit.title_units\": \" seconds\",\n    \"autoexit.subtitle\": \"You have started another session.\",\n    \"autoexit.cancel\": \"CANCEL\",\n    \"presence.entered_room\": \"entered axon park.\",\n    \"presence.entered_lobby\": \"entered axon park's lobby.\",\n    \"presence.join_lobby\": \"joined the axon park lobby.\",\n    \"presence.join_room\": \"joined axon park.\",\n    \"presence.leave\": \"left.\",\n    \"presence.name_change\": \"is now known as\",\n    \"presence.scene_change\": \"changed the scene to\",\n    \"presence.hub_name_change\": \"changed the name of the room to\",\n    \"presence.in_lobby\": \"Axon Park Lobby\",\n    \"presence.in_room\": \"In Axon Park\",\n    \"home.create_a_room\": \"Initialize Axon Park\",\n    \"home.desktop.add_pwa\": \"Install Desktop App\",\n    \"home.mobile.add_pwa\": \"Add to Home Screen\",\n    \"home.take_a_tour\": \"Take a Tour\",\n    \"home.room_create_options\": \"options\",\n    \"home.room_create_button\": \"Initialize Axon Park\",\n    \"home.create_name.validation_warning\": \"Invalid name, limited to 4 to 64 characters and limited symbols.\",\n    \"home.join_us\": \"Join the Conversation\",\n    \"home.have_code\": \"Have an axon park code?\",\n    \"home.add_to_discord_1\": \"Add the\",\n    \"home.add_to_discord_2\": \"Hubs Bot\",\n    \"home.add_to_discord_3\": \"to Discord\",\n    \"home.create_with_spoke\": \"Create a Scene\",\n    \"home.report_issue\": \"Report Issues\",\n    \"home.source_link\": \"Source\",\n    \"home.whats_new_link\": \"What's New\",\n    \"home.spoke_link\": \"Spoke\",\n    \"home.about_link\": \"About\",\n    \"home.community_link\": \"Community\",\n    \"home.privacy_notice\": \"Privacy Notice\",\n    \"home.terms_of_use\": \"Terms of Use\",\n    \"home.get_updates\": \"Get Updates\",\n    \"home.hero_title\": \"A new way to get together\",\n    \"home.hero_blurb\": motto,\n    \"home.made_with_love\": \"made with 🦆 by \",\n    \"home.environment_author_by\": \" by \",\n    \"dialog.close\": \"close\",\n    \"mailing_list.privacy_label\": \"I'm okay with Mozilla handling my info as explained in\",\n    \"mailing_list.privacy_link\": \"this Privacy Notice\",\n    \"link.link_page_header_entry\": \"Enter your code:\",\n    \"link.link_page_header_headset\": \"Enter Send to Device code:\",\n    \"link.linking_a_headset\": \"Have a letter code?\",\n    \"link.try_again\": \"We couldn't find that code.\\nPlease try again.\",\n    \"help.report_issue\": \"Report an Issue\",\n    \"scene.logo_tagline\": \"A new way to get together\",\n    \"scene.create_button\": \"Create a room with this scene\",\n    \"scene.tweet_button\": \"Share on Twitter\",\n    \"scene.unavailable\": \"This scene is no longer available.\",\n    \"link.in_your_browser\": \"In your device's web browser, go to:\",\n    \"link.enter_code\": \"Then, enter this one-time letter code:\",\n    \"link.do_not_close\":\n      \"Your account and avatar will be transferred to the device.\\nKeep this page open to use this code.\",\n    \"link.connect_headset\": \"Send to Device\",\n    \"link.cancel\": \"cancel\",\n    \"invite.enter_via\": \"Enter via \",\n    \"invite.enter_via_modal\": \"Others may enter via \",\n    \"invite.tweet\": \"tweet\",\n    \"invite.and_enter_code\": \" with code:\",\n    \"invite.or_visit\": \"or share permalink\",\n    \"invite.or_visit_modal\": \"or by visiting permalink\",\n    \"invite.embed\": \"or embed on a page\",\n    \"invite.embed-tip\":\n      \"Please be mindful of where you embed a Hubs room.\\nAnyone who can access the page can enter and create/remove objects.\",\n    \"spoke.primary_tagline\": \"make your space\",\n    \"spoke.secondary_tagline\": \"Create 3D social scenes for \",\n    \"spoke.thank_you\": \"Thank you for downloading Spoke!\",\n    \"spoke.download_win\": \"Download for Windows\",\n    \"spoke.download_macos\": \"Download for Mac\",\n    \"spoke.download_linux\": \"Download for Linux\",\n    \"spoke.download_unsupported\": \"View Releases\",\n    \"spoke.browse_all_versions\": \"Browse All Versions\",\n    \"spoke.beginner_tutorial_button\": \"Learn Spoke in 5 Minutes\",\n    \"spoke.advanced_tutorial_button\": \"Advanced Spoke in 10 minutes\",\n    \"spoke.play_button\": \"Learn Spoke in 5 Minutes\",\n    \"commands.fly\": \"Toggle fly mode.\",\n    \"commands.grow\": \"Increase your avatar's size.\",\n    \"commands.shrink\": \"Decrease your avatar's size.\",\n    \"commands.scene\": \"Change the scene.\",\n    \"commands.rename\": \"Rename the room.\",\n    \"commands.help\": \"Show help.\",\n    \"commands.leave\": \"Disconnect from axon park.\",\n    \"commands.duck\": \"The duck tested well. Quack.\",\n    \"commands.capture\": \"Capture a 15 second video.\",\n    \"commands.debug\": \"Toggle physics debug rendering.\",\n    \"commands.vrstats\": \"Toggle stats in VR.\",\n    \"settings.change-avatar\": \"Set Name & Avatar\",\n    \"settings.change-scene\": \"Choose a Scene\",\n\n    \"settings.favorites\": \"Favorite Rooms\",\n    \"settings.rename-room\": \"Set Axon Park Name...\",\n    \"settings.close-room\": \"Close Axon Park...\",\n    \"settings.room-info\": \"Axon Park Info\",\n    \"settings.create-room\": \"New Axon Park...\",\n\n    \"settings.create-scene\": \"Get Spoke\",\n    \"settings.send-feedback\": \"Send Feedback\",\n    \"settings.whats-new\": \"What's New\",\n    \"settings.features\": \"Help\",\n    \"settings.controls\": \"Controls\",\n    \"settings.community\": \"Join Discord\",\n    \"settings.tips\": \"Show Tips\",\n    \"settings.report\": \"Report Issue\",\n    \"settings.terms\": \"Terms of Use\",\n    \"settings.privacy\": \"Privacy Notice\",\n    \"settings.help\": \"Help\",\n\n    \"settings.row-profile\": \"You\",\n    \"settings.row-room\": \"Axon Park\",\n\n    \"tips.mobile.video_share_mode\": \"Tap to stop sharing video.\",\n    \"tips.mobile.pen_mode\": \"Tap icon again to end drawing.\",\n    \"tips.mobile.mute_mode\": \"You are muted. Tap to unmute.\",\n    \"tips.mobile.freeze_mode\": \"Two-finger tap to hide menus.\",\n    \"tips.mobile.look\": \"Welcome! 👋 Tap and drag to look around.\",\n    \"tips.mobile.locomotion\": \"Great! To move, pinch with two fingers.\",\n    \"tips.mobile.spawn_menu-pre\": \"Use the \",\n    \"tips.mobile.spawn_menu-post\": \"at the top to create objects.\",\n    \"tips.mobile.freeze_gesture\": \"Two-finger tap to show menus.\",\n    \"tips.mobile.object_grab\": \"Drag an object to move or throw it.\",\n    \"tips.mobile.object_rotate_button-pre\": \"Tap and drag \",\n    \"tips.mobile.object_rotate_button-post\": \" to rotate.\",\n    \"tips.mobile.object_scale_button-pre\": \"Tap and drag \",\n    \"tips.mobile.object_scale_button-post\": \" to scale.\",\n    \"tips.mobile.object_recenter_button-pre\": \"Tap \",\n    \"tips.mobile.object_recenter_button-post\": \" to have the object face you.\",\n\n    \"tips.mobile.object_pin\": \"Pin an object to save it to axon park.\",\n    \"tips.mobile.object_pin\": \"Pin an object to save it to axon park.\",\n    \"tips.mobile.invite\": \"Use the Invite button to share axon park.\",\n\n    \"tips.desktop.video_share_mode\": \"You're streaming. Select again to stop sharing video.\",\n    \"tips.desktop.pen_mode\": \"Press ESC or right click to drop pen. Ctrl-Z to undo.\",\n    \"tips.desktop.mirror_mode\": \"Press ESC to end camera mirroring.\",\n    \"tips.desktop.mute_mode\": \"You are muted. Click or press M to un-mute.\",\n    \"tips.desktop.look\": \"Welcome to Hubs! 👋 Click and drag to look around.\",\n    \"tips.desktop.locomotion\": \"Great! Now, use the W A S D keys to move. Hold shift to boost.\",\n    \"tips.desktop.turning\": \"Perfect. Use the Q and E keys to rotate.\",\n    \"tips.desktop.spawn_menu-pre\": \"To create objects, click the \",\n    \"tips.desktop.spawn_menu-post\": \"button at the top of the screen, or press Ctrl 1 through 7.\",\n    \"tips.desktop.freeze_gesture\": \"Press and hold spacebar to show object menus.\",\n    \"tips.desktop.menu_hover\": \"Now, point the cursor at an object to show the menu.\",\n    \"tips.desktop.object_grab\": \"Click and drag an object to move it. Or, flick to throw it!\",\n    \"tips.desktop.object_pin\": \"Pin an object to save it to axon park.\",\n    \"tips.desktop.object_zoom\": \"Scroll to move this object towards and away from you.\",\n    \"tips.desktop.object_rotate_button-pre\": \"Click and drag \",\n    \"tips.desktop.object_rotate_button-post\": \" to rotate the object.\",\n    \"tips.desktop.object_scale_button-pre\": \"Click and drag \",\n    \"tips.desktop.object_scale_button-post\": \" to scale the object.\",\n    \"tips.desktop.object_recenter_button-pre\": \"Click \",\n    \"tips.desktop.object_recenter_button-post\": \" to rotate the object to face you. Helpful if you drop it!\",\n    \"tips.desktop.object_scale\": \"Hold shift and scroll to scale it bigger and smaller.\",\n    \"tips.desktop.pen_color\": \"Use Shift-Q and Shift-E to change the pen color.\",\n    \"tips.desktop.pen_size\": \"Hold Shift and scroll to change the pen size.\",\n    \"tips.desktop.invite\": \"Nobody else is here. Use the Share button at the top to share this room.\",\n    \"tips.desktop.watching\": \"You're in the lobby. Others cannot see or hear you.\",\n    \"tips.watching.back\": \"Enter Room\",\n    \"tips.mobile.watching\": \"You're in the lobby.\",\n    \"tips.watching-exit\": \"Back\",\n    \"loader.entering_lobby\": \"Entering lobby...\",\n    \"loader.loading\": \"Loading \",\n    \"loader.object\": \"object\",\n    \"loader.objects\": \"objects\",\n    \"change-scene-dialog.change-scene\": \"Change Scene\",\n    \"change-scene-dialog.create-in-spoke\": \"Or, create a new scene using Spoke.\",\n    \"change-scene-dialog.new-spoke-project\": \"Launch Spoke\",\n    \"avatar-url-dialog.apply\": \"Apply\",\n    \"interstitial.prompt\": \"Continue\",\n    \"feedback.prompt\": \"Feedback\",\n    \"hide-ui.prompt\": \"Hide All\",\n    \"discord.primary_tagline\":\n      \"Share a virtual room with your community.\\nWatch videos, play with 3D objects, or just hang out.\",\n    \"discord.secondary_tagline\": \"No downloads or sign up. Full VR support too.\",\n    \"discord.contact_us\": \"Invite Bot to Server\",\n    \"discord.community_link\": \"Hubs Discord\",\n    \"discord.splash_tag\": \"Designed for serious businessing.\",\n    \"client-info.kick-button\": \"Kick\",\n    \"client-info.hide-button\": \"Hide\",\n    \"client-info.unhide-button\": \"Un-hide \",\n    \"client-info.mute-button\": \"Mute\",\n    \"client-info.cancel\": \"Cancel\",\n    \"avatar-landing.select\": \"Select\",\n    \"avatar-landing.selected\": \"This is your current avatar\",\n    \"leave-room-dialog.join-room.message\": \"Joining a new room will leave this one. Are you sure?\",\n    \"leave-room-dialog.join-room.confirm\": \"Join Room\",\n    \"leave-room-dialog.create-room.message\": \"Creating a new room will leave this one. Are you sure?\",\n    \"leave-room-dialog.create-room.confirm\": \"Leave Room\",\n    \"embed.load-button\": \"Load Room\",\n    \"embed.presence-warning\": \"This room is embedded, so may be visible to visitors on other websites.\"\n  }\n}\n","import localeData from \"../axonpark/messages.js\";\n// import localeData from \"../assets/translations.data.json\";\nconst navigatorLang = ((navigator.languages && navigator.languages[0]) || navigator.language || navigator.userLanguage)\n  .toLowerCase()\n  .split(/[_-]+/)[0];\nexport const lang = (localeData[navigatorLang] && navigatorLang) || \"en\";\nexport const messages = localeData[lang] || localeData.en;\n","module.exports = __webpack_public_path__ + \"assets/images/hub-preview-light-no-shadow-5ebb166e8580d819b445892173ec0286.png\";","import { avatars } from \"../assets/avatars/avatars.js\";\n\nconst names = [\n  \"Baers-Pochard\",\n  \"Baikal-Teal\",\n  \"Barrows-Goldeneye\",\n  \"Blue-Billed\",\n  \"Blue-Duck\",\n  \"Blue-Winged\",\n  \"Brown-Teal\",\n  \"Bufflehead\",\n  \"Canvasback\",\n  \"Cape-Shoveler\",\n  \"Chestnut-Teal\",\n  \"Chiloe-Wigeon\",\n  \"Cinnamon-Teal\",\n  \"Comb-Duck\",\n  \"Common-Eider\",\n  \"Common-Goldeneye\",\n  \"Common-Merganser\",\n  \"Common-Pochard\",\n  \"Common-Scoter\",\n  \"Common-Shelduck\",\n  \"Cotton-Pygmy\",\n  \"Crested-Duck\",\n  \"Crested-Shelduck\",\n  \"Eatons-Pintail\",\n  \"Falcated\",\n  \"Ferruginous\",\n  \"Freckled-Duck\",\n  \"Gadwall\",\n  \"Garganey\",\n  \"Greater-Scaup\",\n  \"Green-Pygmy\",\n  \"Grey-Teal\",\n  \"Hardhead\",\n  \"Harlequin\",\n  \"Hartlaubs\",\n  \"Hooded-Merganser\",\n  \"Hottentot-Teal\",\n  \"Kelp-Goose\",\n  \"King-Eider\",\n  \"Lake-Duck\",\n  \"Laysan-Duck\",\n  \"Lesser-Scaup\",\n  \"Long-Tailed\",\n  \"Maccoa-Duck\",\n  \"Mallard\",\n  \"Mandarin\",\n  \"Marbled-Teal\",\n  \"Mellers-Duck\",\n  \"Merganser\",\n  \"Northern-Pintail\",\n  \"Orinoco-Goose\",\n  \"Paradise-Shelduck\",\n  \"Plumed-Whistler\",\n  \"Puna-Teal\",\n  \"Pygmy-Goose\",\n  \"Radjah-Shelduck\",\n  \"Red-Billed\",\n  \"Red-Crested\",\n  \"Red-Shoveler\",\n  \"Ring-Necked\",\n  \"Ringed-Teal\",\n  \"Rosy-Billed\",\n  \"Ruddy-Shelduck\",\n  \"Salvadoris-Teal\",\n  \"Scaly-Sided\",\n  \"Shelduck\",\n  \"Shoveler\",\n  \"Silver-Teal\",\n  \"Smew\",\n  \"Spectacled-Eider\",\n  \"Spot-Billed\",\n  \"Spotted-Whistler\",\n  \"Steamerduck\",\n  \"Stellers-Eider\",\n  \"Sunda-Teal\",\n  \"Surf-Scoter\",\n  \"Tufted-Duck\",\n  \"Velvet-Scoter\",\n  \"Wandering-Whistler\",\n  \"Whistling-duck\",\n  \"White-Backed\",\n  \"White-Cheeked\",\n  \"White-Winged\",\n  \"Wigeon\",\n  \"Wood-Duck\",\n  \"Yellow-Billed\"\n];\n\nfunction selectRandom(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nexport function generateRandomName() {\n  return `${selectRandom(names)}-${Math.floor(10000 + Math.random() * 10000)}`;\n}\n\nexport const avatarIds = avatars.map(av => av.id);\n\nexport function generateDefaultProfile() {\n  return {\n    avatarId: selectRandom(avatarIds)\n  };\n}\n","import { Validator } from \"jsonschema\";\nimport merge from \"deepmerge\";\nimport Cookies from \"js-cookie\";\nimport jwtDecode from \"jwt-decode\";\n\nconst LOCAL_STORE_KEY = \"___hubs_store\";\nconst STORE_STATE_CACHE_KEY = Symbol();\nconst OAUTH_FLOW_CREDENTIALS_KEY = \"ret-oauth-flow-account-credentials\";\nconst validator = new Validator();\nimport { EventTarget } from \"event-target-shim\";\nimport { generateDefaultProfile, generateRandomName } from \"../utils/identity.js\";\n\n// Durable (via local-storage) schema-enforced state that is meant to be consumed via forward data flow.\n// (Think flux but with way less incidental complexity, at least for now :))\nexport const SCHEMA = {\n  id: \"/HubsStore\",\n\n  definitions: {\n    profile: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        displayName: { type: \"string\", pattern: \"^[A-Za-z0-9-]{3,32}$\" },\n        avatarId: { type: \"string\" },\n        personalAvatarId: { type: \"string\" }\n      }\n    },\n\n    credentials: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        token: { type: [\"null\", \"string\"] },\n        email: { type: [\"null\", \"string\"] }\n      }\n    },\n\n    activity: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        hasFoundFreeze: { type: \"boolean\" },\n        hasChangedName: { type: \"boolean\" },\n        hasAcceptedProfile: { type: \"boolean\" },\n        lastEnteredAt: { type: \"string\" },\n        hasPinned: { type: \"boolean\" },\n        hasRotated: { type: \"boolean\" },\n        hasRecentered: { type: \"boolean\" },\n        hasScaled: { type: \"boolean\" },\n        hasHoveredInWorldHud: { type: \"boolean\" },\n        hasOpenedShare: { type: \"boolean\" },\n        entryCount: { type: \"number\" }\n      }\n    },\n\n    settings: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        lastUsedMicDeviceId: { type: \"string\" }\n      }\n    },\n\n    // Legacy\n    confirmedDiscordRooms: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n\n    confirmedBroadcastedRooms: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n\n    uploadPromotionTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          fileId: { type: \"string\" },\n          promotionToken: { type: \"string\" }\n        }\n      }\n    },\n\n    creatorAssignmentTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          creatorAssignmentToken: { type: \"string\" }\n        }\n      }\n    },\n\n    embedTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          embedToken: { type: \"string\" }\n        }\n      }\n    },\n\n    onLoadActions: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          action: { type: \"string\" },\n          args: { type: \"object\" }\n        }\n      }\n    }\n  },\n\n  type: \"object\",\n\n  properties: {\n    profile: { $ref: \"#/definitions/profile\" },\n    credentials: { $ref: \"#/definitions/credentials\" },\n    activity: { $ref: \"#/definitions/activity\" },\n    settings: { $ref: \"#/definitions/settings\" },\n    confirmedDiscordRooms: { $ref: \"#/definitions/confirmedDiscordRooms\" }, // Legacy\n    confirmedBroadcastedRooms: { $ref: \"#/definitions/confirmedBroadcastedRooms\" },\n    uploadPromotionTokens: { $ref: \"#/definitions/uploadPromotionTokens\" },\n    creatorAssignmentTokens: { $ref: \"#/definitions/creatorAssignmentTokens\" },\n    embedTokens: { $ref: \"#/definitions/embedTokens\" },\n    onLoadActions: { $ref: \"#/definitions/onLoadActions\" }\n  },\n\n  additionalProperties: false\n};\n\nexport default class Store extends EventTarget {\n  constructor() {\n    super();\n\n    if (localStorage.getItem(LOCAL_STORE_KEY) === null) {\n      localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify({}));\n    }\n\n    // When storage is updated in another window\n    window.addEventListener(\"storage\", e => {\n      if (e.key !== LOCAL_STORE_KEY) return;\n      delete this[STORE_STATE_CACHE_KEY];\n      this.dispatchEvent(new CustomEvent(\"statechanged\"));\n    });\n\n    this.update({\n      activity: {},\n      settings: {},\n      credentials: {},\n      profile: {},\n      confirmedDiscordRooms: [],\n      confirmedBroadcastedRooms: [],\n      uploadPromotionTokens: [],\n      creatorAssignmentTokens: [],\n      embedTokens: [],\n      onLoadActions: []\n    });\n\n    const oauthFlowCredentials = Cookies.getJSON(OAUTH_FLOW_CREDENTIALS_KEY);\n    if (oauthFlowCredentials) {\n      this.update({ credentials: oauthFlowCredentials });\n      this.resetToRandomLegacyAvatar();\n      Cookies.remove(OAUTH_FLOW_CREDENTIALS_KEY);\n    }\n  }\n\n  // Initializes store with any default bits\n  init = () => {\n    this.update({\n      profile: { ...generateDefaultProfile(), ...(this.state.profile || {}) }\n    });\n\n    // Regenerate name to encourage users to change it.\n    if (!this.state.activity.hasChangedName) {\n      this.update({ profile: { displayName: generateRandomName() } });\n    }\n  };\n\n  resetToRandomLegacyAvatar = () => {\n    this.update({\n      profile: { ...(this.state.profile || {}), ...generateDefaultProfile() }\n    });\n  };\n\n  get state() {\n    if (!this.hasOwnProperty(STORE_STATE_CACHE_KEY)) {\n      this[STORE_STATE_CACHE_KEY] = JSON.parse(localStorage.getItem(LOCAL_STORE_KEY));\n    }\n\n    return this[STORE_STATE_CACHE_KEY];\n  }\n\n  get credentialsAccountId() {\n    if (this.state.credentials.token) {\n      return jwtDecode(this.state.credentials.token).sub;\n    } else {\n      return null;\n    }\n  }\n\n  resetConfirmedBroadcastedRooms() {\n    this.clearStoredArray(\"confirmedBroadcastedRooms\");\n  }\n\n  resetTipActivityFlags() {\n    this.update({\n      activity: { hasRotated: false, hasPinned: false, hasRecentered: false, hasScaled: false, entryCount: 0 }\n    });\n  }\n\n  bumpEntryCount() {\n    const currentEntryCount = this.state.activity.entryCount || 0;\n    this.update({ activity: { entryCount: currentEntryCount + 1 } });\n  }\n\n  // Sets a one-time action to perform the next time the page loads\n  enqueueOnLoadAction(action, args) {\n    this.update({ onLoadActions: [{ action, args }] });\n  }\n\n  executeOnLoadActions(sceneEl) {\n    for (let i = 0; i < this.state.onLoadActions.length; i++) {\n      const { action, args } = this.state.onLoadActions[i];\n\n      if (action === \"emit_scene_event\") {\n        sceneEl.emit(args.event, args.detail);\n      }\n    }\n\n    this.clearOnLoadActions();\n  }\n\n  clearOnLoadActions() {\n    this.clearStoredArray(\"onLoadActions\");\n  }\n\n  clearStoredArray(key) {\n    const overwriteMerge = (destinationArray, sourceArray) => sourceArray;\n    const update = {};\n    update[key] = [];\n\n    this.update(update, { arrayMerge: overwriteMerge });\n  }\n\n  update(newState, mergeOpts) {\n    const finalState = merge(this.state, newState, mergeOpts);\n    const { valid } = validator.validate(finalState, SCHEMA);\n\n    if (!valid) {\n      // Intentionally not including details about the state or validation result here, since we don't want to leak\n      // sensitive data in the error message.\n      throw new Error(`Write to store failed schema validation.`);\n    }\n\n    localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify(finalState));\n    delete this[STORE_STATE_CACHE_KEY];\n\n    if (newState.profile !== undefined) {\n      this.dispatchEvent(new CustomEvent(\"profilechanged\"));\n    }\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    return finalState;\n  }\n}\n","// NOTE: We do not use an IV since we generate a new keypair each time we use these routines.\n\nasync function deriveKey(privateKey, publicKey) {\n  return crypto.subtle.deriveKey(\n    { name: \"ECDH\", public: publicKey },\n    privateKey,\n    { name: \"AES-CBC\", length: 256 },\n    true,\n    [\"encrypt\", \"decrypt\"]\n  );\n}\n\nasync function publicKeyToString(key) {\n  return JSON.stringify(await crypto.subtle.exportKey(\"jwk\", key));\n}\n\nasync function stringToPublicKey(s) {\n  return await crypto.subtle.importKey(\"jwk\", JSON.parse(s), { name: \"ECDH\", namedCurve: \"P-256\" }, true, []);\n}\n\nfunction stringToArrayBuffer(s) {\n  const buf = new Uint8Array(s.length);\n\n  for (let i = 0; i < s.length; i++) {\n    buf[i] = s.charCodeAt(i);\n  }\n\n  return buf;\n}\n\nfunction arrayBufferToString(b) {\n  const buf = new Uint8Array(b);\n  let s = \"\";\n\n  for (let i = 0; i < buf.byteLength; i++) {\n    s += String.fromCharCode(buf[i]);\n  }\n\n  return s;\n}\n\n// This allows a single object to be passed encrypted from a receiver in a req -> response flow\n\n// Requestor generates a public key and private key, and should send the public key to receiver.\nexport async function generateKeys() {\n  const keyPair = await crypto.subtle.generateKey({ name: \"ECDH\", namedCurve: \"P-256\" }, true, [\"deriveKey\"]);\n  const publicKeyString = await publicKeyToString(keyPair.publicKey);\n  return { publicKeyString, privateKey: keyPair.privateKey };\n}\n\n// Receiver takes the public key from requestor and passes obj to get a response public key and the encrypted data to return.\nexport async function generatePublicKeyAndEncryptedObject(incomingPublicKeyString, obj) {\n  const iv = new Uint8Array(16);\n  const incomingPublicKey = await stringToPublicKey(incomingPublicKeyString);\n  const keyPair = await crypto.subtle.generateKey({ name: \"ECDH\", namedCurve: \"P-256\" }, true, [\"deriveKey\"]);\n  const publicKeyString = await publicKeyToString(keyPair.publicKey);\n  const secret = await deriveKey(keyPair.privateKey, incomingPublicKey);\n\n  const encryptedData = btoa(\n    arrayBufferToString(\n      await crypto.subtle.encrypt({ name: \"AES-CBC\", iv }, secret, stringToArrayBuffer(JSON.stringify(obj)))\n    )\n  );\n\n  return { publicKeyString, encryptedData };\n}\n\n// Requestor then takes the receiver's public key, the private key (returned from generateKeys()), and the data from the receiver.\nexport async function decryptObject(publicKeyString, privateKey, base64value) {\n  const iv = new Uint8Array(16);\n  const publicKey = await stringToPublicKey(publicKeyString);\n  const secret = await deriveKey(privateKey, publicKey);\n  const ciphertext = stringToArrayBuffer(atob(base64value));\n  const data = await crypto.subtle.decrypt({ name: \"AES-CBC\", iv }, secret, ciphertext);\n  return JSON.parse(arrayBufferToString(data));\n}\n","import { generatePublicKeyAndEncryptedObject, generateKeys, decryptObject } from \"./crypto\";\n\nconst LINK_ACTION_TIMEOUT = 10000;\n\nexport default class LinkChannel {\n  constructor(store) {\n    this.store = store;\n  }\n\n  setSocket = socket => {\n    this.socket = socket;\n  };\n\n  // Returns a promise that, when resolved, will forward an object with three keys:\n  //\n  // code: The code that was made available to use for link.\n  //\n  // cancel: A function that the caller can call to cancel the use of the code.\n  //\n  // onFinished: A promise that, when resolved, indicates the code is no longer usable,\n  // because it was either successfully used by the remote device or it has expired\n  // (\"used\" or \"expired\" is passed to the callback).\n  generateCode = () => {\n    return new Promise(resolve => {\n      const onFinished = new Promise(finished => {\n        const step = () => {\n          const getLetter = () => \"ABCDEFGHI\"[Math.floor(Math.random() * 9)];\n          const code = `${getLetter()}${getLetter()}${getLetter()}${getLetter()}`;\n\n          // Only respond to one link_request in this channel.\n          let readyToSend = false;\n          let leftChannel = false;\n\n          const channel = this.socket.channel(`link:${code}`, { timeout: LINK_ACTION_TIMEOUT });\n\n          const leave = () => {\n            if (!leftChannel) channel.leave();\n            leftChannel = true;\n          };\n\n          const cancel = () => leave();\n\n          channel.on(\"link_expired\", () => finished(\"expired\"));\n\n          channel.on(\"presence_state\", state => {\n            if (readyToSend) return;\n\n            if (Object.keys(state).length > 0) {\n              // Code is in use by someone else, try a new one\n              step();\n            } else {\n              readyToSend = true;\n              resolve({ code, cancel, onFinished });\n            }\n          });\n\n          channel.on(\"link_request\", incoming => {\n            if (readyToSend) {\n              const data = { path: location.pathname };\n\n              // Copy profile data to link'ed device if it's been set.\n              if (this.store.state.activity.hasChangedName) {\n                data.profile = { ...this.store.state.profile };\n              }\n              data.credentials = { ...this.store.state.credentials };\n\n              generatePublicKeyAndEncryptedObject(incoming.public_key, data).then(\n                ({ publicKeyString, encryptedData }) => {\n                  const payload = {\n                    target_session_id: incoming.reply_to_session_id,\n                    public_key: publicKeyString,\n                    data: encryptedData\n                  };\n\n                  if (!leftChannel) {\n                    channel.push(\"link_response\", payload);\n                  }\n\n                  leave();\n\n                  finished(\"used\");\n                  readyToSend = false;\n                }\n              );\n            }\n          });\n\n          channel.join().receive(\"error\", r => console.error(r));\n        };\n\n        step();\n      });\n    });\n  };\n\n  // Attempts to receive a link payload from a remote device using the given code.\n  //\n  // Promise rejects if the code is invalid or there is a problem with the channel.\n  // Promise resolves and passes payload of link source on successful link.\n  attemptLink = code => {\n    return new Promise((resolve, reject) => {\n      const channel = this.socket.channel(`link:${code}`, { timeout: LINK_ACTION_TIMEOUT });\n      let finished = false;\n\n      generateKeys().then(({ publicKeyString, privateKey }) => {\n        channel.on(\"presence_state\", state => {\n          const numOccupants = Object.keys(state).length;\n\n          if (numOccupants === 1) {\n            // Great, only sender is in topic, request link\n            channel.push(\"link_request\", {\n              reply_to_session_id: this.socket.params().session_id,\n              public_key: publicKeyString\n            });\n\n            setTimeout(() => {\n              if (finished) return;\n              channel.leave();\n              reject(new Error(\"no_response\"));\n            }, LINK_ACTION_TIMEOUT);\n          } else if (numOccupants === 0) {\n            // Nobody in this channel, probably a bad code.\n            channel.leave();\n            reject(new Error(\"failed\"));\n          } else {\n            console.warn(\"link code channel already has 2 or more occupants, something fishy is going on.\");\n            channel.leave();\n            reject(new Error(\"in_use\"));\n          }\n        });\n\n        channel.on(\"link_response\", payload => {\n          finished = true;\n          channel.leave();\n\n          decryptObject(payload.public_key, privateKey, payload.data).then(resolve);\n        });\n\n        channel\n          .join()\n          .receive(\"ok\", data => (this.socket.params().session_id = data.session_id))\n          .receive(\"error\", r => console.error(r));\n      });\n    });\n  };\n}\n","export const avatars = [\n  {\n    id: \"botdefault\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotDefault_Avatar-9f71f8ff22.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botdefault-thumb-42C4C7D3C01D085EAFDAC8BACE591CE6.png\"\n  },\n  {\n    id: \"botbobo\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotBobo_Avatar-f9740a010b.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botbobo-thumb-261278FD5831E9CD89610D15948F23E4.png\"\n  },\n  {\n    id: \"botdom\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotDom_Avatar-0c48bf15a5.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botdom-thumb-1160EB5E81D24F12CE643C520CE1E99E.png\"\n  },\n  {\n    id: \"botgreg\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotGreg_Avatar-98d39797bb.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botgreg-thumb-F2A37F14F9C342EE44DDE9B24DD9B9FC.png\"\n  },\n  {\n    id: \"botguest\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotGuest_Avatar-78cd857332.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botguest-thumb-F7A471250E2C10C2709325C3B02A8BBB.png\"\n  },\n  {\n    id: \"botjim\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotJim_Avatar-d28005a687.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botjim-thumb-A2D195C1A51A082BCED58BD172481B39.png\"\n  },\n  {\n    id: \"botkev\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotKev_Avatar-a95787bb51.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botkev-thumb-90746A7349E3F964C913EA612EE9A53F.png\"\n  },\n  {\n    id: \"botpinky\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotPinky_Avatar-b0b93f8675.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botpinky-thumb-C2E69D4479077766B988DC3EE4F30BE5.png\"\n  },\n  {\n    id: \"botrobert\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotRobert_Avatar-e9554880f3.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botrobert-thumb-9C33F2C752326E2CF4321EAA7BDB4E47.png\"\n  },\n  {\n    id: \"botwoody\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotWoody_Avatar-0140485a23.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botwoody-thumb-F1F1FA7E21301B5AC1D8872B4ED0CC56.png\"\n  }\n];\n","import Raven from \"raven-js\";\n\nconst ga = window.ga;\n\nexport default function registerTelemetry(trackedPage, trackedTitle) {\n  const sentryDsn = process.env.SENTRY_DSN;\n  const gaTrackingId = process.env.GA_TRACKING_ID;\n\n  if (sentryDsn) {\n    console.log(\"Tracking: Sentry DSN: \" + sentryDsn);\n    Raven.config(sentryDsn).install();\n  }\n\n  if (ga && gaTrackingId) {\n    console.log(\"Tracking: Google Analytics ID: \" + gaTrackingId);\n\n    ga(\"create\", gaTrackingId, \"auto\");\n\n    if (trackedPage) {\n      ga(\"set\", \"page\", trackedPage);\n    }\n\n    if (trackedTitle) {\n      ga(\"set\", \"title\", trackedTitle);\n    }\n\n    ga(\"send\", \"pageview\");\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport const ReactAudioContext = React.createContext({});\n\nexport const hudHoverSound = \"play_sound-hud_hover_start\";\n\nexport const WithHoverSound = ({ sound, children }) => {\n  return (\n    <ReactAudioContext.Consumer>\n      {context => {\n        return React.cloneElement(children, {\n          onMouseEnter: e => {\n            if (context && context.playSound) {\n              context.playSound(sound || hudHoverSound);\n            }\n            children.props.onMouseEnter && children.props.onMouseEnter(e);\n          }\n        });\n      }}\n    </ReactAudioContext.Consumer>\n  );\n};\n\nWithHoverSound.propTypes = {\n  children: PropTypes.object,\n  sound: PropTypes.string\n};\n"],"sourceRoot":""}