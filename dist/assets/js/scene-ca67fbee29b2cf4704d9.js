!function(e){function t(t){for(var n,s,r=t[0],c=t[1],l=t[2],u=0,h=[];u<r.length;u++)s=r[u],i[s]&&h.push(i[s][0]),i[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(d&&d(t);h.length;)h.shift()();return a.push.apply(a,l||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],n=!0,r=1;r<o.length;r++){var c=o[r];0!==i[c]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=o[0]))}return e}var n={},i={9:0},a=[];function s(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=n,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(o,n,function(t){return e[t]}.bind(null,n));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var r=window.webpackJsonp=window.webpackJsonp||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var d=c;a.push([2149,1,0]),o()}({10:function(e,t,o){"use strict";var n=o(127);var i=o(21),a=o(54);function s(e,t,o,n,i,a,s){try{var r=e[a](s),c=r.value}catch(e){return void o(e)}r.done?t(c):Promise.resolve(c).then(n,i)}function r(e){return function(){var t=this,o=arguments;return new Promise(function(n,i){var a=e.apply(t,o);function r(e){s(a,n,i,r,c,"next",e)}function c(e){s(a,n,i,r,c,"throw",e)}r(void 0)})}}o.d(t,"h",function(){return c}),o.d(t,"j",function(){return u}),o.d(t,"i",function(){return m}),o.d(t,"a",function(){return f}),o.d(t,"e",function(){return b}),o.d(t,"d",function(){return v}),o.d(t,"b",function(){return y}),o.d(t,"f",function(){return _}),o.d(t,"g",function(){return S}),o.d(t,"k",function(){return A}),o.d(t,"c",function(){return R});document.createElement("a");function c(e,t=!1){return`https://dev.reticulum.io${e}`}let l=null,d=!1;function u(){return h.apply(this,arguments)}function h(){return(h=r(function*(){d=!0,l=null})).apply(this,arguments)}function m(){return p.apply(this,arguments)}function p(){return(p=r(function*(){l||(!d&&document.querySelector("meta[name='ret:version']")?l={version:document.querySelector("meta[name='ret:version']").getAttribute("value"),pool:document.querySelector("meta[name='ret:pool']").getAttribute("value"),phx_host:document.querySelector("meta[name='ret:phx_host']").getAttribute("value")}:yield fetch(c("/api/v1/meta")).then(function(){var e=r(function*(e){l=yield e.json()});return function(t){return e.apply(this,arguments)}}()));const e=new URLSearchParams(location.search).get("phx_host");return e&&(l.phx_host=e),l})).apply(this,arguments)}function f(){return g.apply(this,arguments)}function g(){return(g=r(function*(e=!1,t=null){const o=new URLSearchParams(location.search),i=function(){var e=r(function*(){const e=o.get("phx_protocol")||("https:"===document.location.protocol?"wss:":"ws:");let t=o.get("phx_host"),n=o.get("phx_port");const i=yield m();return`${e}//${t=t||{NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}.RETICULUM_SOCKET_SERVER||i.phx_host}${(n=n||new URL(`${e}//dev.reticulum.io`).port)?`:${n}`:""}`});return function(){return e.apply(this,arguments)}}(),a=yield i();console.log(`Phoenix Socket URL: ${a}`);const s={};e&&(s.logger=(e,t,o)=>{console.log(`${e}: ${t}`,o)}),t&&(s.params=t);const c=new n.b(`${a}/socket`,s);return c.connect(),c.onError(r(function*(){u();const e=new URL(c.endPoint).pathname,t=`${yield i()}${e}`;console.log(`Socket error, changed endpoint to ${t}`),c.endPoint=t})),c})).apply(this,arguments)}function b(e){const t=new URL(e);return c(t.pathname.replace(".png",".html")+t.search,!0)}function v(e,t="GET",o){const{token:n}=window.APP.store.state.credentials,i=c(e),a={headers:{"content-type":"application/json"},method:t};return n&&(a.headers.authorization=`bearer ${n}`),o&&(a.body=JSON.stringify(o)),fetch(i,a).then(function(){var e=r(function*(e){const t=yield e.text();try{return JSON.parse(t)}catch(e){return t}});return function(t){return e.apply(this,arguments)}}())}function y(e,t,o,n){return E.apply(this,arguments)}function E(){return(E=r(function*(e,t,o,n){const s=c("/api/v1/hubs");let r={Name:"Test",SceneUrl:null};const l=yield i.a.find("recHqITRS7cBMwn9i");l&&(r=l.fields);const d={hub:{name:r.Name}};d.hub.default_environment_gltf_bundle_url=r.SceneUrl;const u={"content-type":"application/json"},h=new a.b;h.state&&h.state.credentials.token&&(u.authorization=`bearer ${h.state.credentials.token}`);let m=yield fetch(s,{body:JSON.stringify(d),headers:u,method:"POST"}).then(e=>e.json());"invalid_token"===m.error&&(h.update({credentials:{token:null,email:null}}),delete u.authorization,m=yield fetch(s,{body:JSON.stringify(d),headers:u,method:"POST"}).then(e=>e.json()));const p=m;let f=p.url;const g=p.creator_assignment_token;if(g){h.update({creatorAssignmentTokens:[{hubId:p.hub_id,creatorAssignmentToken:g}]});const e=p.embed_token;e&&h.update({embedTokens:[{hubId:p.hub_id,embedToken:e}]})}"dev.reticulum.io"!==document.location.host&&(f=`/hub.html?hub_id=${p.hub_id}`),n?document.location.replace(f):document.location=f})).apply(this,arguments)}function w(e,t){const o=(Object.entries(e||{}).find(([e])=>e===t)||[])[1];return o&&o.metas&&o.metas[0]||{}}function _(e,t){return(w(e,t)||{}).context||{}}function S(e,t){return(w(e,t)||{}).profile||{}}function A(e,t,o){const n=t.channel(e.topic,o||e.params);for(let t=0,o=e.bindings.length;t<o;t++){const o=e.bindings[t];n.on(o.event,o.callback)}for(let t=0,o=e.pushBuffer.length;t<o;t++){const o=e.pushBuffer[t];n.push(o.event,o.payload,o.timeout)}const i=e.joinPush,a=n.join();for(let e=0,t=i.recHooks.length;e<t;e++){const t=i.recHooks[e];a.receive(t.status,t.callback)}return new Promise(t=>{a.receive("ok",()=>{e.bindings=[],t(n)})})}function R(e){const t=[];for(const o of Object.values(e))for(const e of o.metas)e.profile&&e.profile.discordBridges&&Array.prototype.push.apply(t,e.profile.discordBridges.map(e=>e.channel.name));return t}},1049:function(e,t,o){"use strict";o(837),o(838),o(839),o(840),o(841);const n=new THREE.Box3,i=new THREE.Box3,a=new THREE.Matrix4,s=new THREE.Box3,r=1,c=-500,l=500,d=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];AFRAME.registerComponent("directional-light",{schema:{color:{type:"color"},intensity:{default:1},castShadow:{default:!0},shadowMapResolution:{default:[512,512]},shadowBias:{default:0},shadowRadius:{default:1}},init(){const e=this.el;this.light=new THREE.DirectionalLight,this.light.position.set(0,0,0),this.light.target.position.set(0,0,1),this.light.add(this.light.target),this.el.setObject3D("directional-light",this.light),this.el.sceneEl.systems.light.registerLight(e),this.rendererSystem=this.el.sceneEl.systems.renderer},update(e){const t=this.light;if(this.data.color!==e.color){const e=new THREE.Color(this.data.color);this.rendererSystem.applyColorCorrection(e),t.color.copy(e)}this.data.intensity!==e.intensity&&(t.intensity=this.data.intensity),this.data.castShadow!==e.castShadow&&(t.castShadow=this.data.castShadow),this.data.shadowBias!==e.shadowBias&&(t.shadow.bias=this.data.shadowBias),this.data.shadowRadius!==e.shadowRadius&&(t.shadow.radius=this.data.shadowRadius);const[o,n]=this.data.shadowMapResolution,[i,a]=e.shadowMapResolution?e.shadowMapResolution:[512,512];o===i&&n===a||(t.shadow.mapSize.set(o,n),t.shadow.map&&(t.shadow.map.dispose(),t.shadow.map=null)),this.light.shadow.camera.matrixNeedsUpdate=!0},tick(){window.APP&&"low"===window.APP.quality||function(e,t){i.makeEmpty(),n.makeEmpty(),t.traverse(e=>{const t=e.geometry;t&&e.castShadow&&(t.boundingBox||t.computeBoundingBox(),s.copy(t.boundingBox),s.applyMatrix4(e.matrixWorld),n.union(s))});const o=n.min,u=n.max;d[0].set(o.x,o.y,o.z),d[1].set(o.x,o.y,u.z),d[2].set(o.x,u.y,o.z),d[3].set(o.x,u.y,u.z),d[4].set(u.x,o.y,o.z),d[5].set(u.x,o.y,u.z),d[6].set(u.x,u.y,o.z),d[7].set(u.x,u.y,u.z),a.getInverse(e.shadow.camera.matrixWorld);for(let e=0;e<d.length;e++)d[e].applyMatrix4(a),i.expandByPoint(d[e]);const h=e.shadow.camera;h.left=i.min.x-r,h.right=i.max.x+r,h.bottom=i.min.y-r,h.top=i.max.y+r,h.near=i.min.z+c,h.far=i.max.z+l,h.updateProjectionMatrix()}(this.light,this.el.sceneEl.object3D)},remove:function(){this.el.removeObject3D("directional-light")}});o(842),o(164),o(844),o(845),o(846);const u={reflection:3};AFRAME.registerComponent("layers",{schema:{reflection:{type:"boolean",default:!1},inWorldHud:{type:"boolean",default:!1},exclusive:{type:"boolean",default:!1}},init(){this.update=this.update.bind(this),this.el.addEventListener("model-loaded",this.update)},update(e){const t=this.el.object3D;this.data.exclusive&&t.traverse(e=>e.layers.mask=0);for(const[o,n]of Object.entries(u)){const i=e[o],a=this.data[o];i!==a&&(a?t.traverse(e=>e.layers.enable(n)):t.traverse(e=>e.layers.disable(n)))}},remove(){this.el.removeEventListener("model-loaded",this.update)}});var h=o(273);AFRAME.registerComponent("loop-animation",{schema:{paused:{type:"boolean",default:!1},clip:{type:"string"}},init(){this.mixerEl=Object(h.a)(this.el,"animation-mixer"),this.mixerEl?this.updateClip():console.warn("loop-animation component could not find an animation-mixer in its ancestors.")},update(e){e.clip===this.data.clip&&e.paused===this.data.paused||!this.mixerEl||(e.clip!==this.data.clip&&this.updateClip(),this.currentAction&&(this.currentAction.paused=this.data.paused))},updateClip(){const{mixer:e,animations:t}=this.mixerEl.components["animation-mixer"],o=this.data.clip;if(0===t.length)return;let n;if(!(n=o?t.find(({name:e})=>e===o):t[0]))return;const i=e.clipAction(n,this.el.object3D);i.enabled=!0,i.setLoop(THREE.LoopRepeat,1/0).play(),this.currentAction=i},destroy(){this.currentAction&&(this.currentAction.enabled=!1,this.currentAction.stop())}});var m=o(286),p=o(38),f=o(16),g=o(375),b=o(27),v=(o(461),o(517)),y=o.n(v),E=o(24),w=o(300);function _(e,t,o,n,i,a,s){try{var r=e[a](s),c=r.value}catch(e){return void o(e)}r.done?t(c):Promise.resolve(c).then(n,i)}function S(e){return function(){var t=this,o=arguments;return new Promise(function(n,i){var a=e.apply(t,o);function s(e){_(a,n,i,s,r,"next",e)}function r(e){_(a,n,i,s,r,"throw",e)}s(void 0)})}}const A=o(224).SHAPE;let R;(new THREE.GLTFLoader).load(y.a,e=>{R=e});const x=new THREE.Box3,P=Object(b.a)("forceBatching"),C=Object(b.a)("enableBatching");AFRAME.registerComponent("media-loader",{schema:{fileId:{type:"string"},fileIsOwned:{type:"boolean"},src:{type:"string"},resize:{default:!1},resolve:{default:!1},contentType:{default:null},contentSubtype:{default:null},animate:{default:!0},mediaOptions:{default:{},parse:e=>"object"==typeof e?e:JSON.parse(e),stringify:JSON.stringify}},init(){this.onError=this.onError.bind(this),this.showLoader=this.showLoader.bind(this),this.clearLoadingTimeout=this.clearLoadingTimeout.bind(this),this.onMediaLoaded=this.onMediaLoaded.bind(this),NAF.utils.getNetworkedEntity(this.el).then(e=>{this.networkedEl=e})},updateScale:function(){const e=new THREE.Vector3;return function(t){const o=this.el.getObject3D("mesh"),n=Object(m.a)(this.el,o),i=t?Object(m.b)(.5,n):1;o.scale.multiplyScalar(i);const{min:a,max:s}=n;e.addVectors(a,s).multiplyScalar(.5*i),o.position.sub(e),o.matrixNeedsUpdate=!0}}(),removeShape(e){this.el.getAttribute("ammo-shape__"+e)&&this.el.removeAttribute("ammo-shape__"+e)},tick(e,t){this.loaderMixer&&this.loaderMixer.update(t/1e3)},remove(){this.loadingSoundNode&&(this.el.sceneEl.systems["hubs-systems"].soundEffectsSystem.stopSoundNode(this.loadingSoundNode),this.loadingSoundNode=null)},onError(){this.el.removeAttribute("gltf-model-plus"),this.el.removeAttribute("media-pager"),this.el.removeAttribute("media-video"),this.el.setAttribute("media-image",{src:"error"}),this.clearLoadingTimeout()},showLoader(){if(this.el.object3DMap.mesh)return void this.clearLoadingTimeout();const e=!!R,t=e?R.scene.clone():new THREE.Mesh(new THREE.BoxGeometry,new THREE.MeshBasicMaterial);this.el.setObject3D("mesh",t),this.updateScale(!0),e&&(this.loaderMixer=new THREE.AnimationMixer(t),this.loadingClip=this.loaderMixer.clipAction(R.animations[0]),this.loadingScaleClip=this.loaderMixer.clipAction(new THREE.AnimationClip(null,1e3,[new THREE.VectorKeyframeTrack(".scale",[0,.2],[0,0,0,t.scale.x,t.scale.y,t.scale.z])])),setTimeout(()=>{this.loaderMixer&&this.el.setAttribute("ammo-shape__loader",{type:A.BOX})},200),this.loadingClip.play(),this.loadingScaleClip.play()),!this.el.sceneEl.is("entered")||this.networkedEl&&!NAF.utils.isMine(this.networkedEl)||(this.loadingSoundNode=this.el.sceneEl.systems["hubs-systems"].soundEffectsSystem.playSoundLooped(E.g)),delete this.showLoaderTimeout},clearLoadingTimeout(){clearTimeout(this.showLoaderTimeout),this.loadingSoundNode&&(this.el.sceneEl.systems["hubs-systems"].soundEffectsSystem.stopSoundNode(this.loadingSoundNode),this.loadingSoundNode=null),this.loaderMixer&&(this.loadingClip.stop(),this.loadingScaleClip.stop(),delete this.loaderMixer,delete this.loadingScaleClip,delete this.loadingClip),delete this.showLoaderTimeout,this.removeShape("loader")},updateHoverableVisuals(){const e=this.el.components["hoverable-visuals"];e&&(this.injectedCustomShaderChunks||(this.injectedCustomShaderChunks=!0,e.uniforms=Object(p.d)(this.el.object3D)),x.setFromObject(this.el.object3DMap.mesh),x.getBoundingSphere(e.boundingSphere))},onMediaLoaded(e=null){const t=this.el;this.clearLoadingTimeout(),this.el.sceneEl.is("entered")&&this.el.sceneEl.systems["hubs-systems"].soundEffectsSystem.playSoundOneShot(E.f);const o=()=>{e&&t.setAttribute("ammo-shape",{type:e,minHalfExtent:.04}),this.updateHoverableVisuals();const o=t.components["media-pager"];o&&o.repositionToolbar()};if(this.data.animate){const e=this.el.getObject3D("mesh"),t={x:.001,y:.001,z:.001};t.x=e.scale.x<t.x?.001*e.scale.x:t.x,t.y=e.scale.y<t.y?.001*e.scale.x:t.y,t.z=e.scale.z<t.z?.001*e.scale.x:t.z,this.addMeshScaleAnimation(e,t,o)}else o()},addMeshScaleAnimation(e,t,o){const n=function(){const t={};return function(o){const n=o.animatables[0].target;n.x=Math.max(Number.MIN_VALUE,n.x),n.y=Math.max(Number.MIN_VALUE,n.y),n.z=Math.max(Number.MIN_VALUE,n.z),n.x===t.x&&n.y===t.y&&n.z===t.z||(t.x=n.x,t.y=n.y,t.z=n.z,e.scale.set(n.x,n.y,n.z),e.matrixNeedsUpdate=!0)}}(),i={duration:400,easing:"easeOutElastic",elasticity:400,loop:0,round:!1,x:e.scale.x,y:e.scale.y,z:e.scale.z,targets:[t],update:e=>n(e),complete:e=>{n(e),o()}};return e.scale.copy(t),e.matrixNeedsUpdate=!0,Object(w.default)(i)},update(e){var t=this;return S(function*(){try{const{src:o,contentSubtype:n}=t.data;if(o===e.src||t.showLoaderTimeout||(t.showLoaderTimeout=setTimeout(t.showLoader,100)),!o)return;let i,a=o,s=o,r=t.data.contentType;if(t.data.resolve){const e=yield Object(p.e)(o);(a=e.origin).startsWith("//")&&(a=location.protocol+a),r=e.meta&&e.meta.expected_content_type||r,i=e.meta&&e.meta.thumbnail&&Object(f.g)(e.meta.thumbnail)}if(s=Object(f.g)(a,null),r=r||Object(f.b)(a)||(yield(e=>fetch(e,{method:"HEAD"}).then(e=>e.headers.get("content-type")))(s)),o!==e.src&&t.el.emit("media_resolved",{src:o,raw:s,contentType:r}),r.startsWith("video/")||r.startsWith("audio/")||AFRAME.utils.material.isHLS(a,r)){const e=new URL(o),n=parseInt(e.searchParams.get("t")),i=parseInt(new URLSearchParams(e.hash.substring(1)).get("t"))||n||0;t.el.removeAttribute("gltf-model-plus"),t.el.removeAttribute("media-image"),t.el.setAttribute("floaty-object",{reduceAngularFloat:!0,releaseGravity:-1}),t.el.addEventListener("video-loaded",e=>{t.onMediaLoaded("flat"===e.detail.projection?A.BOX:null)},{once:!0}),t.el.setAttribute("media-video",Object.assign({},t.data.mediaOptions,{src:s,time:i,contentType:r})),t.el.components["position-at-box-shape-border__freeze"]&&t.el.setAttribute("position-at-box-shape-border__freeze",{dirs:["forward","back"]})}else if(r.startsWith("image/"))t.el.removeAttribute("gltf-model-plus"),t.el.removeAttribute("media-video"),t.el.removeAttribute("media-pager"),t.el.addEventListener("image-loaded",e=>{t.onMediaLoaded("flat"===e.detail.projection?A.BOX:null),"camera-photo"===n&&t.el.setAttribute("hover-menu__photo",{template:"#photo-hover-menu",dirs:["forward","back"]})},{once:!0}),t.el.setAttribute("floaty-object",{reduceAngularFloat:!0,releaseGravity:-1}),t.el.setAttribute("media-image",Object.assign({},t.data.mediaOptions,{src:s,contentType:r,batch:C})),t.el.components["position-at-box-shape-border__freeze"]&&t.el.setAttribute("position-at-box-shape-border__freeze",{dirs:["forward","back"]});else if(r.startsWith("application/pdf"))t.el.removeAttribute("gltf-model-plus"),t.el.removeAttribute("media-video"),t.el.setAttribute("media-pager",Object.assign({},t.data.mediaOptions,{src:a})),t.el.setAttribute("floaty-object",{reduceAngularFloat:!0,releaseGravity:-1}),t.el.addEventListener("image-loaded",t.clearLoadingTimeout,{once:!0}),t.el.addEventListener("preview-loaded",()=>t.onMediaLoaded(A.BOX),{once:!0}),t.el.components["position-at-box-shape-border__freeze"]&&t.el.setAttribute("position-at-box-shape-border__freeze",{dirs:["forward","back"]});else if(r.includes("application/octet-stream")||r.includes("x-zip-compressed")||r.startsWith("model/gltf"))t.el.removeAttribute("media-image"),t.el.removeAttribute("media-video"),t.el.removeAttribute("media-pager"),t.el.addEventListener("model-loaded",()=>{t.updateScale(t.data.resize),t.onMediaLoaded(A.HULL),Object(g.a)(t.el)},{once:!0}),t.el.addEventListener("model-error",t.onError,{once:!0}),t.el.setAttribute("gltf-model-plus",Object.assign({},t.data.mediaOptions,{src:s,contentType:r,inflate:!0,batch:P,modelToWorldScale:t.data.resize?1e-4:1}));else{if(!r.startsWith("text/html"))throw new Error(`Unsupported content type: ${r}`);t.el.removeAttribute("gltf-model-plus"),t.el.removeAttribute("media-video"),t.el.removeAttribute("media-pager"),t.el.addEventListener("image-loaded",()=>{const e=t.el.sceneEl.systems.permissions.can("update_hub");Object(f.c)(o)?t.el.setAttribute("hover-menu__hubs-item",{template:"#avatar-link-hover-menu",dirs:["forward","back"]}):Object(f.e)(o)||Object(f.f)(o)&&e?t.el.setAttribute("hover-menu__hubs-item",{template:"#hubs-destination-hover-menu",dirs:["forward","back"]}):t.el.setAttribute("hover-menu__link",{template:"#link-hover-menu",dirs:["forward","back"]}),t.onMediaLoaded(A.BOX)},{once:!0}),t.el.setAttribute("floaty-object",{reduceAngularFloat:!0,releaseGravity:-1}),t.el.setAttribute("media-image",Object.assign({},t.data.mediaOptions,{src:i,contentType:Object(f.b)(i)||"image/png",batch:C})),t.el.components["position-at-box-shape-border__freeze"]&&t.el.setAttribute("position-at-box-shape-border__freeze",{dirs:["forward","back"]})}}catch(e){console.error("Error adding media",e),t.onError()}})()}}),AFRAME.registerComponent("media-pager",{schema:{src:{type:"string"},index:{default:0}},init(){var e=this;this.toolbar=null,this.imageSrc=null,this.onNext=this.onNext.bind(this),this.onPrev=this.onPrev.bind(this),NAF.utils.getNetworkedEntity(this.el).then(e=>{this.networkedEl=e}),this.el.addEventListener("image-loaded",function(){var t=S(function*(t){e.imageSrc=t.detail.src,yield e._ensureUI(),e.update()});return function(e){return t.apply(this,arguments)}}())},_ensureUI(){var e=this;return S(function*(){if(e.hasSetupUI||!e.imageSrc)return;e.hasSetupUI=!0,e.maxIndex=yield(e=>fetch(e).then(e=>parseInt(e.headers.get("x-max-content-index"))))(e.imageSrc);const t=document.getElementById("paging-toolbar");e.el.querySelector(".interactable-ui").appendChild(document.importNode(t.content,!0)),e.toolbar=e.el.querySelector(".paging-toolbar"),setTimeout(()=>{e.nextButton=e.el.querySelector(".next-button [text-button]"),e.prevButton=e.el.querySelector(".prev-button [text-button]"),e.pageLabel=e.el.querySelector(".page-label"),e.nextButton.object3D.addEventListener("interact",e.onNext),e.prevButton.object3D.addEventListener("interact",e.onPrev),e.update(),e.el.emit("preview-loaded")},0)})()},update(){var e=this;return S(function*(){if(!e.data.src)return;const t=Object(f.g)(e.data.src,e.data.index);e.el.setAttribute("media-image",{src:t,contentType:Object(f.b)(t)||"image/png"}),yield e._ensureUI(),e.pageLabel&&(e.pageLabel.setAttribute("text","value",`${e.data.index+1}/${e.maxIndex+1}`),e.repositionToolbar())})()},remove(){this.toolbar&&this.toolbar.parentNode.removeChild(this.toolbar)},onNext(){(NAF.utils.isMine(this.networkedEl)||NAF.utils.takeOwnership(this.networkedEl))&&(this.el.setAttribute("media-pager","index",Math.min(this.data.index+1,this.maxIndex)),this.el.emit("pager-page-changed"))},onPrev(){(NAF.utils.isMine(this.networkedEl)||NAF.utils.takeOwnership(this.networkedEl))&&(this.el.setAttribute("media-pager","index",Math.max(this.data.index-1,0)),this.el.emit("pager-page-changed"))},repositionToolbar(){this.el.getAttribute("ammo-shape")&&(this.toolbar.object3D.position.y=-.7,this.toolbar.object3D.matrixNeedsUpdate=!0)}});o(847);AFRAME.registerComponent("quack",{schema:{quackPercentage:{default:1},specialQuackPercentage:{default:.01}},init:function(){this._handleGrabStart=this._handleGrabStart.bind(this)},play:function(){this.el.object3D.addEventListener("interact",this._handleGrabStart)},pause:function(){this.el.object3D.removeEventListener("interact",this._handleGrabStart)},_handleGrabStart:function(){const e=Math.random();e<this.data.specialQuackPercentage?this.el.sceneEl.systems["hubs-systems"].soundEffectsSystem.playSoundOneShot(E.p):e<this.data.quackPercentage&&this.el.sceneEl.systems["hubs-systems"].soundEffectsSystem.playSoundOneShot(E.m)}});var T=o(40),M=o(211);function D(e,t,o){return(1-o)*e+o*t}const k=new THREE.Quaternion;AFRAME.registerComponent("scene-preview-camera",{schema:{duration:{default:90,type:"number"},positionOnly:{default:!1,type:"boolean"}},init:function(){this.startPoint=this.el.object3D.position.clone(),this.startRotation=this.el.object3D.quaternion.clone(),this.targetPoint=this.el.object3D.position.clone(),this.targetPoint.y=Math.max(this.targetPoint.y-1.5,1),this.targetPoint.add(new THREE.Vector3(2,0,-2));const e=new THREE.Euler(-.15,0,.15);this.targetRotation=new THREE.Quaternion,this.targetRotation.setFromEuler(e),this.targetRotation.premultiply(this.startRotation),this.startTime=performance.now(),this.backwards=!1,this.ranOnePass=!1},tick2:function(){const e=function(){const e=Object(M.b)();return e?e.el.querySelector(".camera").object3D:null}();if(e)Object(T.d)(this.el.object3D,e.matrixWorld),this.el.object3D.translateZ(-.1),this.el.object3D.matrixNeedsUpdate=!0;else{let e=(performance.now()-this.startTime)/(1e3*this.data.duration);e=Math.min(1,Math.max(0,e)),this.ranOnePass?e=e<.5?2*e*e:(4-2*e)*e-1:e*=2-e;const t=this.backwards?this.targetPoint:this.startPoint,o=this.backwards?this.startPoint:this.targetPoint,n=this.backwards?this.targetRotation:this.startRotation,i=this.backwards?this.startRotation:this.targetRotation;THREE.Quaternion.slerp(n,i,k,e),this.el.object3D.position.set(D(t.x,o.x,e),D(t.y,o.y,e),D(t.z,o.z,e)),this.data.positionOnly||this.el.object3D.rotation.setFromQuaternion(k),this.el.object3D.matrixNeedsUpdate=!0,e>=.9999&&(this.ranOnePass=!0,this.backwards=!this.backwards,this.startTime=performance.now())}}});o(1126),o(1127);const L=Object(b.a)("bot");THREE.Sky=function(){const e=THREE.Sky.SkyShader,t=new THREE.ShaderMaterial({fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:THREE.UniformsUtils.clone(e.uniforms),side:THREE.BackSide});THREE.Mesh.call(this,new THREE.BoxBufferGeometry(1,1,1),t)},THREE.Sky.prototype=Object.create(THREE.Mesh.prototype),THREE.Sky.prototype.constructor=THREE.Sky,THREE.Sky.SkyShader={uniforms:{luminance:{value:1},turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new THREE.Vector3}},vertexShader:["uniform vec3 sunPosition;","uniform float rayleigh;","uniform float turbidity;","uniform float mieCoefficient;","varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","const vec3 up = vec3( 0.0, 1.0, 0.0 );","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );","const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );","const float v = 4.0;","const vec3 K = vec3( 0.686, 0.678, 0.666 );","const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );","const float cutoffAngle = 1.6110731556870734;","const float steepness = 1.5;","const float EE = 1000.0;","float sunIntensity( float zenithAngleCos ) {","\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );","\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );","}","vec3 totalMie( float T ) {","\tfloat c = ( 0.2 * T ) * 10E-18;","\treturn 0.434 * c * MieConst;","}","void main() {","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvWorldPosition = worldPosition.xyz;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","\tvSunDirection = normalize( sunPosition );","\tvSunE = sunIntensity( dot( vSunDirection, up ) );","\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );","\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );","\tvBetaR = totalRayleigh * rayleighCoefficient;","\tvBetaM = totalMie( turbidity ) * mieCoefficient;","}"].join("\n"),fragmentShader:["varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","uniform float luminance;","uniform float mieDirectionalG;","const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const vec3 up = vec3( 0.0, 1.0, 0.0 );","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float THREE_OVER_SIXTEENPI = 0.05968310365946075;","const float ONE_OVER_FOURPI = 0.07957747154594767;","float rayleighPhase( float cosTheta ) {","\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );","}","float hgPhase( float cosTheta, float g ) {","\tfloat g2 = pow( g, 2.0 );","\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );","\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );","}","const float A = 0.15;","const float B = 0.50;","const float C = 0.10;","const float D = 0.20;","const float E = 0.02;","const float F = 0.30;","const float whiteScale = 1.0748724675633854;","vec3 Uncharted2Tonemap( vec3 x ) {","\treturn ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;","}","void main() {","\tfloat zenithAngle = acos( max( 0.0, dot( up, normalize( vWorldPosition - cameraPos ) ) ) );","\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );","\tfloat sR = rayleighZenithLength * inverse;","\tfloat sM = mieZenithLength * inverse;","\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );","\tfloat cosTheta = dot( normalize( vWorldPosition - cameraPos ), vSunDirection );","\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );","\tvec3 betaRTheta = vBetaR * rPhase;","\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );","\tvec3 betaMTheta = vBetaM * mPhase;","\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );","\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );","\tvec3 direction = normalize( vWorldPosition - cameraPos );","\tfloat theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]","\tfloat phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]","\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );","\tvec3 L0 = vec3( 0.1 ) * Fex;","\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );","\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;","\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );","\tvec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );","\tvec3 color = curr * whiteScale;","\tvec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );","\tgl_FragColor = vec4( retColor, 1.0 );","}"].join("\n")},AFRAME.registerComponent("skybox",{schema:{turbidity:{type:"number",default:10},rayleigh:{type:"number",default:2},luminance:{type:"number",default:1},mieCoefficient:{type:"number",default:.005},mieDirectionalG:{type:"number",default:.8},inclination:{type:"number",default:0},azimuth:{type:"number",default:.15},distance:{type:"number",default:8e3}},init(){this.sky=new THREE.Sky,this.el.setObject3D("mesh",this.sky),this.skyScene=new THREE.Scene,this.cubeCamera=new THREE.CubeCamera(1,1e5,512),this.skyScene.add(this.cubeCamera),this.updateEnvironmentMap=this.updateEnvironmentMap.bind(this),requestAnimationFrame(()=>setTimeout(this.updateEnvironmentMap))},update(e){const t=this.sky.material.uniforms;if(this.data.turbidity!==e.turbidity&&(t.turbidity.value=this.data.turbidity),this.data.rayleigh!==e.rayleigh&&(t.rayleigh.value=this.data.rayleigh),this.data.luminance!==e.luminance&&(t.luminance.value=this.data.luminance),this.data.mieCoefficient!==e.mieCoefficient&&(t.mieCoefficient.value=this.data.mieCoefficient),this.data.mieDirectionalG!==e.mieDirectionalG&&(t.mieDirectionalG.value=this.data.mieDirectionalG),this.data.inclination!==e.inclination||this.data.azimuth!==e.azimuth||this.data.distance!==e.distance){const e=Math.PI*(this.data.inclination-.5),o=2*Math.PI*(this.data.azimuth-.5),n=this.data.distance,i=n*Math.cos(o),a=n*Math.sin(o)*Math.sin(e),s=n*Math.sin(o)*Math.cos(e);t.sunPosition.value.set(i,a,s).normalize(),1===this.el.object3D.scale.x&&this.sky.scale.set(n,n,n),this.el.object3D.matrixNeedsUpdate=!0}this.updateEnvironmentMap()},updateEnvironmentMap(){const e=this.el.sceneEl.components["environment-map"];if(e&&!L){const t=this.el.sceneEl.renderer;this.skyScene.add(this.sky),this.cubeCamera.update(t,this.skyScene),this.el.setObject3D("mesh",this.sky);const o=t.vr.enabled;t.vr.enabled=!1;const n=new THREE.PMREMGenerator(this.cubeCamera.renderTarget.texture);n.update(t);const i=new THREE.PMREMCubeUVPacker(n.cubeLods);i.update(t),t.vr.enabled=o,e.updateEnvironmentMap(i.CubeUVRenderTarget.texture),n.dispose(),i.dispose()}},remove(){this.el.removeObject3D("mesh")}}),AFRAME.registerComponent("spawn-controller",{schema:{target:{type:"selector"},camera:{type:"selector",default:"#player-camera"},playerHeight:{default:1.6},loadedEvent:{type:"string"}},init(){this.moveToSpawnPoint=this.moveToSpawnPoint.bind(this),this.data.target.addEventListener(this.data.loadedEvent,this.moveToSpawnPoint)},moveToSpawnPoint(){const e=document.querySelectorAll("[spawn-point]");if(0===e.length)return;const t=this.data.camera,o=e[Math.round((e.length-1)*Math.random())];Object(T.b)(o.object3D,this.el.object3D.position),this.el.object3D.rotation.copy(o.object3D.rotation),this.el.sceneEl.is("vr-mode")?this.el.object3D.rotation.y-=this.data.camera.object3D.rotation.y:(t.object3D.position.set(0,this.data.playerHeight,0),t.object3D.rotation.set(0,0,0),t.object3D.matrixNeedsUpdate=!0),this.el.object3D.rotation.y+=Math.PI,this.el.object3D.matrixNeedsUpdate=!0,t.components["pitch-yaw-rotator"]&&t.components["pitch-yaw-rotator"].set(t.object3D.rotation.x,t.object3D.rotation.y)}}),AFRAME.registerComponent("spawn-point",{init(){this.el.object3D.visible=!1}});o(848),o(849);var O=o(169),j=o(63),N=o(2);function F(e,t,o,n,i,a,s){try{var r=e[a](s),c=r.value}catch(e){return void o(e)}r.done?t(c):Promise.resolve(c).then(n,i)}const H=o(195).COLLISION_LAYERS;AFRAME.registerComponent("super-spawner",{schema:{src:{default:""},resolve:{default:!1},resize:{default:!1},template:{default:""},useCustomSpawnPosition:{default:!1},spawnPosition:{type:"vec3"},useCustomSpawnRotation:{default:!1},spawnRotation:{type:"vec4"},useCustomSpawnScale:{default:!1},spawnScale:{type:"vec3"},spawnCooldown:{default:1},centerSpawnedObject:{default:!1},spawnEvent:{type:"string"},animateFromCursor:{type:"boolean"}},init(){this.cooldownTimeout=null,this.handPosition=new THREE.Vector3,this.onSpawnEvent=this.onSpawnEvent.bind(this),this.sceneEl=document.querySelector("a-scene"),this.tempSpawnHandPosition=new THREE.Vector3},play(){this.data.spawnEvent&&this.el.sceneEl.addEventListener(this.data.spawnEvent,this.onSpawnEvent)},pause(){this.data.spawnEvent&&this.el.sceneEl.removeEventListener(this.data.spawnEvent,this.onSpawnEvent),this.cooldownTimeout&&(clearTimeout(this.cooldownTimeout),this.cooldownTimeout=null,this.el.setAttribute("visible",!0),this.el.classList.add("interactable"))},onSpawnEvent(){var e,t=this;return(e=function*(){if(t.cooldownTimeout||!t.el.sceneEl.is("entered"))return;const e=Object(p.a)(t.data.src,t.data.template,j.a.SPAWNER,null,t.data.resolve,!1).entity,o=document.querySelector("#cursor");o.object3D.getWorldPosition(e.object3D.position),o.object3D.getWorldQuaternion(e.object3D.quaternion),e.object3D.matrixNeedsUpdate=!0,t.data.useCustomSpawnScale&&e.object3D.scale.copy(t.data.spawnScale);const n=AFRAME.scenes[0].systems.userinput,i=AFRAME.scenes[0].systems.interaction,a=t.data.animateFromCursor&&n.get(N.a.actions.rightHand.matrix);a||(i.state.rightRemote.held=e,i.state.rightRemote.spawning=!0),t.activateCooldown(),yield Object(O.b)("body-loaded",e),o.object3D.getWorldPosition(e.object3D.position),o.object3D.getWorldQuaternion(e.object3D.quaternion),e.object3D.matrixNeedsUpdate=!0,a?(document.querySelector("#player-right-controller").object3D.getWorldPosition(t.handPosition),e.setAttribute("animation__spawn-at-cursor",{property:"position",delay:500,dur:1500,from:{x:e.object3D.position.x,y:e.object3D.position.y,z:e.object3D.position.z},to:{x:t.handPosition.x,y:t.handPosition.y,z:t.handPosition.z},easing:"easeInOutBack"})):i.state.rightRemote.spawning=!1,e.components["ammo-body"].syncToPhysics()},function(){var t=this,o=arguments;return new Promise(function(n,i){var a=e.apply(t,o);function s(e){F(a,n,i,s,r,"next",e)}function r(e){F(a,n,i,s,r,"throw",e)}s(void 0)})})()},activateCooldown(){if(this.data.spawnCooldown>0){const[e,t,o]=[this.el.object3D.scale.x,this.el.object3D.scale.y,this.el.object3D.scale.z];this.el.setAttribute("visible",!1),this.el.object3D.scale.set(.001,.001,.001),this.el.object3D.matrixNeedsUpdate=!0,this.el.classList.remove("interactable"),this.el.setAttribute("ammo-body",{collisionFilterMask:H.NONE}),this.cooldownTimeout=setTimeout(()=>{this.el.setAttribute("visible",!0),this.el.classList.add("interactable"),this.el.setAttribute("ammo-body",{collisionFilterMask:H.DEFAULT_SPAWNER}),this.el.removeAttribute("animation__spawner-cooldown"),this.el.setAttribute("animation__spawner-cooldown",{property:"scale",delay:50,dur:350,from:{x:.001,y:.001,z:.001},to:{x:e,y:t,z:o},easing:"easeOutElastic"}),this.cooldownTimeout=null},1e3*this.data.spawnCooldown)}}});o(1128);var I=o(532),U=o.n(I);function B(e,t,o,n,i,a,s){try{var r=e[a](s),c=r.value}catch(e){return void o(e)}r.done?t(c):Promise.resolve(c).then(n,i)}function V(e,t){THREE.Mesh.call(this,e);const o=void 0!==(t=t||{}).time?t.time:0,n=void 0!==t.waterNormals?t.waterNormals:null,i=void 0!==t.sunDirection?t.sunDirection:new THREE.Vector3(.70707,.70707,0),a=new THREE.Color(void 0!==t.sunColor?t.sunColor:16777215),s=new THREE.Color(void 0!==t.waterColor?t.waterColor:8355711),r=void 0!==t.eye?t.eye:new THREE.Vector3(0,0,0),c=void 0!==t.distortionScale?t.distortionScale:20,l=void 0!==t.side?t.side:THREE.FrontSide,d=void 0!==t.fog&&t.fog,u={uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.lights,{normalSampler:{value:null},time:{value:0},size:{value:1},distortionScale:{value:20},sunColor:{value:new THREE.Color(8355711)},sunDirection:{value:new THREE.Vector3(.70707,.70707,0)},eye:{value:new THREE.Vector3},waterColor:{value:new THREE.Color(5592405)}}]),vertexShader:"\n      uniform float time;\n      varying vec4 worldPosition;\n\n      void main() {\n      \tworldPosition = modelMatrix * vec4( position, 1.0 );\n      \tvec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );\n      \tgl_Position = projectionMatrix * mvPosition;\n\n      }\n    ",fragmentShader:`\n      uniform float time;\n      uniform float size;\n      uniform float distortionScale;\n      uniform sampler2D normalSampler;\n      uniform vec3 sunColor;\n      uniform vec3 sunDirection;\n      uniform vec3 eye;\n      uniform vec3 waterColor;\n\n      varying vec4 worldPosition;\n\n      vec4 getNoise( vec2 uv ) {\n      \tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\n      \tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\n      \tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\n      \tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\n      \tvec4 noise = texture2D( normalSampler, uv0 ) +\n      \t\ttexture2D( normalSampler, uv1 ) +\n      \t\ttexture2D( normalSampler, uv2 ) +\n      \t\ttexture2D( normalSampler, uv3 );\n      \treturn noise * 0.5 - 1.0;\n      }\n\n      void sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {\n      \tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\n      \tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );\n      \tspecularColor += pow( direction, shiny ) * sunColor * spec;\n      \tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\n      }\n\n      ${THREE.ShaderChunk.common}\n      ${THREE.ShaderChunk.packing}\n      ${THREE.ShaderChunk.bsdfs}\n      ${THREE.ShaderChunk.lights_pars_begin}\n\n      void main() {\n      \tvec4 noise = getNoise( worldPosition.xz * size );\n      \tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\n\n      \tvec3 diffuseLight = vec3(0.0);\n      \tvec3 specularLight = vec3(0.0);\n\n      \tvec3 worldToEye = eye-worldPosition.xyz;\n      \tvec3 eyeDirection = normalize( worldToEye );\n      \tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\n\n      \tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\n      \tfloat rf0 = 0.3;\n      \tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\n      \tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\n      \tvec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ), ( 0.5 + specularLight ), reflectance);\n      \tvec3 outgoingLight = albedo;\n      \tgl_FragColor = vec4( outgoingLight, 1 );\n      }\n    `},h=new THREE.ShaderMaterial({fragmentShader:u.fragmentShader,vertexShader:u.vertexShader,uniforms:THREE.UniformsUtils.clone(u.uniforms),transparent:!1,lights:!0,side:l,fog:d});h.uniforms.time.value=o,h.uniforms.normalSampler.value=n,h.uniforms.sunColor.value=a,h.uniforms.waterColor.value=s,h.uniforms.sunDirection.value=i,h.uniforms.distortionScale.value=c,h.uniforms.eye.value=r,this.material=h}function $(){var e;return e=function*(e){const t=yield new Promise((t,o)=>(new THREE.TextureLoader).load(e,t,void 0,o));return t.wrapS=t.wrapT=THREE.RepeatWrapping,t.needsUpdate=!0,t},($=function(){var t=this,o=arguments;return new Promise(function(n,i){var a=e.apply(t,o);function s(e){B(a,n,i,s,r,"next",e)}function r(e){B(a,n,i,s,r,"throw",e)}s(void 0)})}).apply(this,arguments)}V.prototype=Object.create(THREE.Mesh.prototype),V.prototype.constructor=THREE.Water,AFRAME.registerComponent("water",{schema:{waterColor:{type:"color",default:"#001e0f"},distortionScale:{type:"number",default:3.7},sunColor:{type:"color",default:"#ffffff"},inclination:{type:"number",default:0},azimuth:{type:"number",default:0},distance:{type:"number",default:1},speed:{type:"number",default:.1},forceMobile:{type:"boolean",default:!1}},init(){const e=this.el.getObject3D("mesh"),t=e.geometry;e.visible=!1,function(e){return $.apply(this,arguments)}(U.a).then(e=>{const o={textureWidth:512,textureHeight:512,waterNormals:e,sunDirection:this.data.sunDirection,sunColor:new THREE.Color(this.data.sunColor),waterColor:new THREE.Color(this.data.waterColor),distortionScale:this.data.distortionScale,fog:!1};AFRAME.utils.device.isMobile()||AFRAME.utils.device.isMobileVR()||this.data.forceMobile?this.water=new V(t,o):(this.water=new THREE.Water(t,o),this.water.mirrorCamera.layers.set(u.reflection)),this.el.setObject3D("water",this.water)})},update(e){if(this.data.forceMobile!==e.forceMobile)return this.el.removeObject3D("water"),void this.init();if(!this.water)return;const t=this.water.material.uniforms;if(this.data.waterColor!==e.waterColor&&t.waterColor.value.setStyle(this.data.waterColor),this.data.distortionScale!==e.distortionScale&&(t.distortionScale.value=this.data.distortionScale),this.data.sunColor!==e.sunColor&&t.sunColor.value.setStyle(this.data.sunColor),this.data.inclination!==e.inclination||this.data.azimuth!==e.azimuth||this.data.distance!==e.distance){const e=Math.PI*(this.data.inclination-.5),o=2*Math.PI*(this.data.azimuth-.5),n=this.data.distance,i=n*Math.cos(o),a=n*Math.sin(o)*Math.sin(e),s=n*Math.sin(o)*Math.cos(e);t.sunDirection.value.set(i,a,s)}},tick(e){this.water&&(this.water.material.uniforms.time.value=e/1e3*this.data.speed)},remove(){this.el.removeObject3D("water"),this.el.getObject3D("mesh").visible=!0}});o(201),o(850),o(851)},1050:function(e,t,o){"use strict";o(164);function n(e,t,o){const n=o[e];if(!n)throw new Error(`Component "${e}" is not public.`);const i=n.publicProperties[t];if(!i)throw new Error(`Component "${e}"'s property "${t}" is not public.`);return{mappedComponent:n.mappedComponent,mappedProperty:i.mappedProperty,getMappedValue:i.getMappedValue}}var i=o(16);const a=o(224),s=a.TYPE,r=a.SHAPE,c=a.FIT,l=o(195).COLLISION_LAYERS;function d(e,t,o){0===o.range&&(o.decay=0),e.setAttribute(t,o)}function u(e,t,o,n){let a=!0;if(n.networked){const s="video"===t,r=(a=o.controls||Object(i.d)(o.src)||Object(i.d)(o.href))||s?"#static-controlled-media":"#static-media";e.setAttribute("networked",{template:r,owner:"scene",persistent:!0,networkId:n.networked.id})}const s={};"video"!==t&&"image"!==t||(s.projection=o.projection),"video"===t&&(s.videoPaused=!o.autoPlay,s.volume=o.volume,s.loop=o.loop,s.audioType=o.audioType,s.hidePlaybackControls=!a,"pannernode"===o.audioType&&(s.distanceModel=o.distanceModel,s.rolloffFactor=o.rolloffFactor,s.refDistance=o.refDistance,s.maxDistance=o.maxDistance,s.coneInnerAngle=o.coneInnerAngle,s.coneOuterAngle=o.coneOuterAngle,s.coneOuterGain=o.coneOuterGain),e.setAttribute("video-pause-state",{paused:s.videoPaused}));const r="link"===t?o.href:o.src;e.setAttribute("media-loader",{src:r,resize:!0,resolve:!0,fileIsOwned:!0,animate:!1,mediaOptions:s})}AFRAME.GLTFModelPlus.registerComponent("duck","duck"),AFRAME.GLTFModelPlus.registerComponent("quack","quack"),AFRAME.GLTFModelPlus.registerComponent("sound","sound"),AFRAME.GLTFModelPlus.registerComponent("css-class","css-class"),AFRAME.GLTFModelPlus.registerComponent("interactable","css-class",(e,t)=>{e.setAttribute(t,"interactable")}),AFRAME.GLTFModelPlus.registerComponent("super-spawner","super-spawner",(e,t,o)=>{e.setAttribute("is-remote-hover-target",""),e.setAttribute("tags",{isHandCollisionTarget:!0}),e.setAttribute("hoverable-visuals",{cursorController:"#cursor-controller"}),e.setAttribute(t,o)}),AFRAME.GLTFModelPlus.registerComponent("gltf-model-plus","gltf-model-plus"),AFRAME.GLTFModelPlus.registerComponent("media-loader","media-loader"),AFRAME.GLTFModelPlus.registerComponent("body","ammo-body",e=>{e.setAttribute("ammo-body",{mass:0,type:s.STATIC,collisionFilterGroup:l.INTERACTABLES,collisionFilterMask:l.DEFAULT_SPAWNER})}),AFRAME.GLTFModelPlus.registerComponent("ammo-shape","ammo-shape"),AFRAME.GLTFModelPlus.registerComponent("hide-when-quality","hide-when-quality"),AFRAME.GLTFModelPlus.registerComponent("light","light",(e,t,o)=>{0===o.distance&&(o.decay=0),e.setAttribute(t,o),o.castShadow&&setTimeout(()=>{e.components.light.light.shadow.camera.matrixNeedsUpdate=!0},0)}),AFRAME.GLTFModelPlus.registerComponent("ambient-light","ambient-light"),AFRAME.GLTFModelPlus.registerComponent("directional-light","directional-light"),AFRAME.GLTFModelPlus.registerComponent("hemisphere-light","hemisphere-light"),AFRAME.GLTFModelPlus.registerComponent("point-light","point-light",d),AFRAME.GLTFModelPlus.registerComponent("spot-light","spot-light",d),AFRAME.GLTFModelPlus.registerComponent("skybox","skybox"),AFRAME.GLTFModelPlus.registerComponent("layers","layers"),AFRAME.GLTFModelPlus.registerComponent("shadow","shadow"),AFRAME.GLTFModelPlus.registerComponent("water","water"),AFRAME.GLTFModelPlus.registerComponent("scale-audio-feedback","scale-audio-feedback"),AFRAME.GLTFModelPlus.registerComponent("animation-mixer","animation-mixer"),AFRAME.GLTFModelPlus.registerComponent("loop-animation","loop-animation"),AFRAME.GLTFModelPlus.registerComponent("box-collider","ammo-shape",(()=>{const e=new THREE.Euler;return(t,o,n)=>{const{scale:i,rotation:a}=n;e.set(a.x,a.y,a.z);const s=(new THREE.Quaternion).setFromEuler(e);t.setAttribute(o,{type:r.BOX,fit:c.MANUAL,offset:n.position,halfExtents:{x:i.x/2,y:i.y/2,z:i.z/2},orientation:s})}})()),AFRAME.GLTFModelPlus.registerComponent("visible","visible",(e,t,o)=>{"object"==typeof o?e.setAttribute(t,o.visible):e.setAttribute(t,o)}),AFRAME.GLTFModelPlus.registerComponent("spawn-point","spawn-point"),AFRAME.GLTFModelPlus.registerComponent("sticky-zone","sticky-zone"),AFRAME.GLTFModelPlus.registerComponent("nav-mesh","nav-mesh",(e,t,o)=>{const n=AFRAME.scenes[0].systems.nav,i=o.zone||"character";let a=!1;e.object3D.traverse(e=>{e.isMesh&&!a&&(a=!0,n.loadMesh(e,i))}),e.setAttribute("nav-mesh")}),AFRAME.GLTFModelPlus.registerComponent("pinnable","pinnable"),AFRAME.GLTFModelPlus.registerComponent("media","media",(e,t,o)=>{o.id&&e.setAttribute("networked",{template:"#interactable-media",owner:"scene",persistent:!0,networkId:o.id}),e.setAttribute("media-loader",{src:o.src,resize:!0,resolve:!0,fileIsOwned:!0,animate:!1,contentSubtype:o.contentSubtype}),o.pageIndex&&e.setAttribute("media-pager",{index:o.pageIndex}),void 0!==o.paused&&e.setAttribute("media-video",{videoPaused:o.paused}),o.time&&e.setAttribute("media-video",{time:o.time})}),AFRAME.GLTFModelPlus.registerComponent("image","image",u),AFRAME.GLTFModelPlus.registerComponent("video","video",u,(e,t,o)=>"paused"===t?{name:"video-pause-state",property:t,value:o}:null),AFRAME.GLTFModelPlus.registerComponent("link","link",u),AFRAME.GLTFModelPlus.registerComponent("hoverable","is-remote-hover-target",e=>{e.setAttribute("is-remote-hover-target",""),e.setAttribute("tags",{isHandCollisionTarget:!0})}),AFRAME.GLTFModelPlus.registerComponent("spawner","spawner",(e,t,o)=>{e.setAttribute("media-loader",{src:o.src,resolve:!0,fileIsOwned:!0,animate:!1}),e.setAttribute("css-class","interactable"),e.setAttribute("super-spawner",{src:o.src,resolve:!0,template:"#interactable-media"}),e.setAttribute("hoverable-visuals",{cursorController:"#cursor-controller"}),e.setAttribute("ammo-body",{mass:0,type:s.STATIC,collisionFilterGroup:l.INTERACTABLES,collisionFilterMask:l.DEFAULT_SPAWNER}),e.setAttribute("is-remote-hover-target",""),e.setAttribute("tags",{isHandCollisionTarget:!0})});const h={video:{mappedComponent:"video-pause-state",publicProperties:{paused:{mappedProperty:"paused",getMappedValue:e=>!!e}}},"loop-animation":{mappedComponent:"loop-animation",publicProperties:{paused:{mappedProperty:"paused",getMappedValue:e=>!!e}}}};AFRAME.GLTFModelPlus.registerComponent("trigger-volume","trigger-volume",(e,t,o,i,a)=>{const{size:s,target:r,enterComponent:c,enterProperty:l,enterValue:d,leaveComponent:u,leaveProperty:m,leaveValue:p}=o;let f,g,b;try{if(f=n(c,l,h),g=n(u,m,h),!(b=a[r]))throw new Error(`Couldn't find target entity with index: ${r}.`)}catch(e){return void console.warn(`Error inflating gltf component "trigger-volume": ${e.message}`)}e.setAttribute("trigger-volume",{colliders:"#player-camera",size:s,target:b,enterComponent:f.mappedComponent,enterProperty:f.mappedProperty,enterValue:f.getMappedValue(d),leaveComponent:g.mappedComponent,leaveProperty:g.mappedProperty,leaveValue:g.getMappedValue(p)})}),AFRAME.GLTFModelPlus.registerComponent("heightfield","heightfield",(e,t,o)=>{e.setAttribute("ammo-shape__heightfield",{type:r.HEIGHTFIELD,margin:.01,fit:c.MANUAL,heightfieldDistance:o.distance,offset:o.offset,heightfieldData:o.data})}),AFRAME.GLTFModelPlus.registerComponent("trimesh","trimesh",e=>{e.setAttribute("ammo-shape__trimesh",{type:r.MESH,margin:.01,fit:c.ALL,includeInvisible:!0})})},11:function(e,t,o){"use strict";function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function i(e,t,o,i,a,s,r){let c={};const l=(e.location.state&&e.location.state.__historyLength||0)+(t?0:1);(o||s||r)&&(delete(c=e.location.state?function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},i=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),i.forEach(function(t){n(e,t,o[t])})}return e}({},e.location.state):{}).__duplicate,o&&(c[o]=i,c.key=o,c.value=i,c.detail=a));const d=void 0!==s?s:"/"===e.location.pathname?"":e.location.pathname,u=void 0!==r?r:e.location.search,h=e.location.state&&e.location.state.__duplicate,m=t||h?e.replace:e.push;c.__historyLength=l,m({pathname:d,search:u,state:c})}function a(e,t,o,n){i(e,!1,t,o,n)}function s(e,t,o,n){i(e,!0,t,o,n)}function r(e,t,o){i(e,!1,null,null,null,t,o)}function c(e){i(e,!1)}function l(e,t){if(!e.location.state||void 0===e.location.state.__historyLength)return;const o=e.location.state.__historyLength;return 0!==o?new Promise(n=>{const i=e.listen(()=>{i(),e.push({pathname:e.location.pathname,search:e.location.search,state:{__historyLength:0,__duplicate:!0}}),t&&e.go(-2),n()});e.go(-o)}):void 0}function d(e){l(e,!0)}function u(e){return`/${e.pathname.split("/").slice(2).join("/")}`}function h(e,t){return`/${e.pathname.split("/")[1]}${t}`}o.d(t,"e",function(){return a}),o.d(t,"f",function(){return s}),o.d(t,"d",function(){return r}),o.d(t,"a",function(){return c}),o.d(t,"c",function(){return l}),o.d(t,"b",function(){return d}),o.d(t,"g",function(){return u}),o.d(t,"h",function(){return h})},1290:function(e,t,o){e.exports=o.p+"assets/images/twitter-b2e343d39bc8d3294292e506c7173f71.svg"},1291:function(e,t,o){e.exports=o.p+"assets/images/spoke_logo_black-31d4b5f1f5ef27bb389bc31a4c97b57f.png"},140:function(e,t,o){"use strict";function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,"a",function(){return s});const i="\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n  #include <uv_vertex>\n  #include <uv2_vertex>\n  #include <color_vertex>\n  #include <skinbase_vertex>\n\n  #include <begin_vertex>\n  #include <morphtarget_vertex>\n  #include <skinning_vertex>\n  #include <project_vertex>\n  #include <logdepthbuf_vertex>\n\n  #include <worldpos_vertex>\n  #include <clipping_planes_vertex>\n  #include <fog_vertex>\n}\n",a="\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <aomap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n  #include <clipping_planes_fragment>\n\n  vec4 diffuseColor = vec4(diffuse, opacity);\n  ReflectedLight reflectedLight = ReflectedLight(vec3(0.0), vec3(0.0), vec3(0.0), vec3(0.0));\n  vec3 totalEmissiveRadiance = emissive;\n\n  #include <logdepthbuf_fragment>\n  #include <map_fragment>\n  #include <color_fragment>\n  #include <alphatest_fragment>\n  #include <emissivemap_fragment>\n\n  reflectedLight.indirectDiffuse += vec3(1.0);\n\n  #include <aomap_fragment>\n\n  reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n  vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n  gl_FragColor = vec4(outgoingLight, diffuseColor.a);\n\n  #include <premultiplied_alpha_fragment>\n  #include <tonemapping_fragment>\n  #include <encodings_fragment>\n  #include <fog_fragment>\n}\n";class s extends THREE.ShaderMaterial{constructor(...e){super(...e),n(this,"type","MobileStandardMaterial"),n(this,"isMobileStandardMaterial",!0)}static fromStandardMaterial(e){const t={vertexShader:i,fragmentShader:a,uniforms:{uvTransform:{value:new THREE.Matrix3},diffuse:{value:e.color},opacity:{value:e.opacity},map:{value:e.map},aoMapIntensity:{value:e.aoMapIntensity},aoMap:{value:e.aoMap},emissive:{value:e.emissive},emissiveMap:{value:e.emissiveMap}},fog:!0,lights:!1,opacity:e.opacity,transparent:e.transparent,alphaTest:e.alphaTest,skinning:e.skinning,morphTargets:e.morphTargets,vertexColors:e.vertexColors},o=new s(t);return o.color=e.color,o.map=e.map,o.aoMap=e.aoMap,o.aoMapIntensity=e.aoMapIntensity,o.emissive=e.emissive,o.emissiveMap=e.emissiveMap,o}clone(){return s.fromStandardMaterial(this)}}},141:function(e,t,o){"use strict";o.d(t,"a",function(){return l}),o.d(t,"b",function(){return p});var n=o(82),i=o(10),a=o(11);function s(e,t,o,n,i,a,s){try{var r=e[a](s),c=r.value}catch(e){return void o(e)}r.done?t(c):Promise.resolve(c).then(n,i)}function r(e){return function(){var t=this,o=arguments;return new Promise(function(n,i){var a=e.apply(t,o);function r(e){s(a,n,i,r,c,"next",e)}function c(e){s(a,n,i,r,c,"throw",e)}r(void 0)})}}function c(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const l=["poly","sketchfab","videos","scenes","gifs","images","twitch"],d={entries:[],meta:{}},u={scenes:"scene_listings",images:"bing_images",videos:"bing_videos",youtube:"youtube_videos",gifs:"tenor",sketchfab:"sketchfab",poly:"poly",twitch:"twitch",favorites:"favorites"},h={gifs:"trending",sketchfab:"featured",scenes:"featured",favorites:"my-favorites"},m=["q","filter","cursor"];class p extends n.a{constructor(){var e;super(),e=this,c(this,"_update",function(){var t=r(function*(t){e.result=null,e.dispatchEvent(new CustomEvent("statechanged"));const o=e.getUrlMediaSource(t);if(!o)return;e.previousSource&&e.previousSource===o||(e.dispatchEvent(new CustomEvent("sourcechanged")),e.previousSource=o);const n=new URLSearchParams(t.search);e.requestIndex++;const a=e.requestIndex,s=new URLSearchParams,r=new URLSearchParams(t.search),c=r.get("filter")&&r.get("filter").startsWith("my-");for(const e of m)n.get(e)&&s.set(e,n.get(e));let l;if(s.get("locale",navigator.languages[0]),"avatars"===o||"scenes"===o){const e="avatars"===o?"avatar":"scene";l=c?`${e}s`:`${e}_listings`}else l=u[o];s.set("source",l);let h=!0;"avatars"!==l&&"scenes"!==l&&"favorites"!==l||c&&(window.APP.store.credentialsAccountId?s.set("user",window.APP.store.credentialsAccountId):h=!1);const p=`/api/v1/media/search?${s.toString()}`,f=Object(i.h)(p);if(e.lastSavedUrl===f)return;e.isFetching=!0,e.dispatchEvent(new CustomEvent("statechanged"));const g=h?yield Object(i.d)(p):d;e.requestIndex==a&&(e.result=g,e.nextCursor=e.result&&e.result.meta&&e.result.meta.next_cursor,e.lastFetchedUrl=f,e.isFetching=!1,e.dispatchEvent(new CustomEvent("statechanged")))});return function(e){return t.apply(this,arguments)}}()),c(this,"_legacyAvatarToSearchEntry",e=>({id:e.id,type:"avatar_listing",url:e.url,images:{preview:{url:e.thumbnail,width:720,height:1280}},gltfs:{avatar:e.model}})),c(this,"pageNavigate",e=>{if(-1===e)this.history.goBack();else{const e=this.history.location,t=new URLSearchParams(e.search);t.set("cursor",this.nextCursor),Object(a.d)(this.history,e.pathname,t.toString())}}),c(this,"filterQueryNavigate",(e,t)=>{const o=this.history.location,n=new URLSearchParams(o.search);t?n.set("q",t):n.delete("q"),e?n.set("filter",e):n.delete("filter"),e?n.set("cursor",e):n.delete("cursor"),Object(a.d)(this.history,o.pathname,n.toString())}),c(this,"getSearchClearedSearchParams",(e,t,o)=>{const n=new URLSearchParams(e.search);return n.delete("q"),n.delete("filter"),n.delete("cursor"),o||n.delete("media_nav"),t||n.delete("media_source"),n}),c(this,"_stashLastSearchParams",e=>{const t=new URLSearchParams(e.search);this._stashedParams={},this._stashedSource=null;const o=this.getUrlMediaSource(e);if("favorites"!==o){this._stashedSource=o;for(const e of m){const o=t.get(e);o&&(this._stashedParams[e]=o)}}}),c(this,"clearStashedQuery",()=>{this._stashedParams&&delete this._stashedParams.q}),c(this,"sourceNavigate",e=>{this._sourceNavigate(e,!1,!0)}),c(this,"sourceNavigateToDefaultSource",()=>{this._sourceNavigate(this._stashedSource?this._stashedSource:l[0],!1,!0)}),c(this,"sourceNavigateWithNoNav",e=>{this._sourceNavigate(e,!0,!1)}),c(this,"_sourceNavigate",function(){var t=r(function*(t,o,n){const i=new URLSearchParams(e.history.location.search).get("q"),s=e.getSearchClearedSearchParams(e.history.location);if(i)s.set("q",i);else if(n&&e._stashedParams)for(const o of m){const n=e._stashedParams[o],i="q"===o||e._stashedSource===t;n&&i&&s.set(o,n)}else if("avatars"===t){const t=yield e._hasAccountWithAvatars();s.set("filter",t?"my-avatars":"featured")}else h[t]&&s.set("filter",h[t]);e._stashedParams=null,e._stashedSource=null,o&&s.set("media_nav","false"),"dev.reticulum.io"!==document.location.host?(s.set("media_source",t),Object(a.d)(e.history,e.history.location.pathname,s.toString())):Object(a.d)(e.history,Object(a.h)(e.history.location,`/media/${t}`),s.toString())});return function(e,o,n){return t.apply(this,arguments)}}()),c(this,"_hasAccountWithAvatars",r(function*(){const{credentialsAccountId:e}=window.APP.store;if(!e)return!1;const t=new URLSearchParams;t.set("source","avatars"),t.set("user",e);const o=yield Object(i.d)(`/api/v1/media/search?${t.toString()}`);return!(!o||!o.entries)&&o.entries.length>0})),c(this,"getUrlMediaSource",e=>{const{search:t}=e,o=new URLSearchParams(t),n=Object(a.g)(e);return n.startsWith("/media")||o.get("media_source")?o.get("media_source")||n.substring(7):null}),c(this,"pushExitMediaBrowserHistory",(e,t=!0)=>{e||(e=this.history),t&&this._stashLastSearchParams(e.location);const{pathname:o}=e.location,n=Object(a.g)(e.location).startsWith("/media");Object(a.d)(e,n?Object(a.h)(e.location,"/"):o,this.getSearchClearedSearchParams(e.location).toString()),this.dispatchEvent(new CustomEvent("media-exit"))}),this.requestIndex=0}setHistory(e){this.history=e,this._update(this.history.location),this.history.listen(e=>{this._update(e)})}}},147:function(e,t,o){e.exports=o.p+"assets/sfx/tick-b0fcbf1d9b6f92a24bec12f9bae1e42a.mp3"},16:function(e,t,o){"use strict";o.d(t,"h",function(){return s}),o.d(t,"g",function(){return r}),o.d(t,"a",function(){return c}),o.d(t,"b",function(){return d}),o.d(t,"f",function(){return p}),o.d(t,"e",function(){return f}),o.d(t,"d",function(){return g}),o.d(t,"c",function(){return b});const n="hubs.local,dev.reticulum.io".split(",");({NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}).CORS_PROXY_SERVER&&n.push({NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}.CORS_PROXY_SERVER);const i={gltf:"model/gltf",glb:"model/gltf-binary",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",pdf:"application/pdf",mp4:"video/mp4",mp3:"audio/mpeg"};const a=e=>(function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode("0x"+t)))})(e).replace(/=+$/g,"").replace(/\+/g,"-").replace(/\//g,"_"),s=(e,t,o)=>{const n=new URL(e).hostname;if(new URL("https://dev.reticulum.io").hostname===n)return e;return`https://farspark-dev.reticulum.io/thumbnail/${a(e)}?w=${t}&h=${o}`},r=(e,t=null)=>{if(!e.startsWith("http:")&&!e.startsWith("https:"))return e;const o=null!==t;if(!o)try{const t=new URL(e);if(n.find(e=>t.hostname.endsWith(e)))return e}catch(e){}if(o||!{NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}.CORS_PROXY_SERVER){return`https://farspark-dev.reticulum.io/0/${o?"extract":"raw"}/0/0/0/${t||0}/${a(e)}`}return`https://${{NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}.CORS_PROXY_SERVER}/${e}`},c=e=>t=>{if("string"!=typeof t||""===t)return"";if(/^(https?:)?\/\//i.test(t))return t;if(/^data:.*,.*$/i.test(t))return t;if(/^blob:.*$/i.test(t))return t;if({NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}.CORS_PROXY_SERVER){const o=`https://${{NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}.CORS_PROXY_SERVER}/`;if(e.startsWith(o)){const n=decodeURIComponent(e.substring(o.length)).split("/"),i=new URL(t).pathname;return o+(n.slice(0,n.length-1).join("/")+"/"+i)}}return t},l=/data:([a-zA-Z0-9]+\/[a-zA-Z0-9-.+]+).*,.*/,d=e=>{if(e.startsWith("hubs://")&&e.endsWith("/video"))return"video/vnd.hubs-webrtc";if(e.startsWith("data:")){const t=l.match(e);t.length>0&&t[1]}const t=new URL(e,window.location).pathname.split(".").pop();return i[t]},u=/https?:\/\/(hubs.local(:\d+)?|(smoke-)?hubs.mozilla.com)\/scenes\/(\w+)\/?\S*/,h=/https?:\/\/(hubs.local(:\d+)?|(smoke-)?hubs.mozilla.com)\/avatars\/(\w+)\/?\S*/,m=/https?:\/\/(hubs.local(:\d+)?|(smoke-)?hubs.mozilla.com)\/(\w+)\/?\S*/,p=u.test.bind(u),f=e=>!p(e)&&m.test(e),g=e=>p(e)||f(e),b=h.test.bind(h)},164:function(e,t,o){"use strict";o.d(t,"a",function(){return A});var n=o(94),i=o(41),a=o(301),s=o.n(a),r=o(140),c=o(38),l=o(16),d=o(167),u=o(189),h=o(40);function m(e,t,o,n,i,a,s){try{var r=e[a](s),c=r.value}catch(e){return void o(e)}r.done?t(c):Promise.resolve(c).then(n,i)}function p(e){return function(){var t=this,o=arguments;return new Promise(function(n,i){var a=e.apply(t,o);function s(e){m(a,n,i,s,r,"next",e)}function r(e){m(a,n,i,s,r,"throw",e)}s(void 0)})}}THREE.Mesh.prototype.raycast=u.b;const f=new class{constructor(){var e,t,o;e=this,t="cache",o=new Map,t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o}set(e,t){return this.cache.set(e,{gltf:t,count:0}),this.retain(e)}has(e){return this.cache.has(e)}get(e){return this.cache.get(e)}retain(e){const t=this.cache.get(e);return t.count++,t}release(e){const t=this.cache.get(e);t?(t.count--,t.count<=0&&(t.gltf.scene.traverse(h.a),this.cache.delete(e))):console.error(`Releasing uncached gltf ${e}`)}},g=new Map,b=Object(d.a)(new s.a);function v(e,t,o){if(!AFRAME.components[t])throw new Error(`Inflator failed. "${t}" component does not exist.`);if(AFRAME.components[t].multiple&&Array.isArray(o))for(let n=0;n<o.length;n++)e.setAttribute(t+"__"+n,o[n]);else e.setAttribute(t,o)}function y(e){const t=new Map,o=e.clone();return function e(t,o,n){n(t,o);for(let i=0;i<t.children.length;i++)e(t.children[i],o.children[i],n)}(e,o,function(e,o){t.set(e,o),e.isMesh&&e.geometry.boundsTree&&(o.geometry.boundsTree=e.geometry.boundsTree)}),e.traverse(function(e){if(!e.isSkinnedMesh)return;const o=e.skeleton.bones,n=t.get(e);n.skeleton=e.skeleton.clone(),n.skeleton.bones=o.map(function(e){if(!t.has(e))throw new Error("Required bones are not descendants of the given object.");return t.get(e)}),n.bind(n.skeleton,e.bindMatrix)}),o}function E(e){return{animations:e.animations,scene:y(e.scene)}}function w(e){const t=e.userData.gltfExtensions&&(e.userData.gltfExtensions.MOZ_hubs_components||e.userData.gltfExtensions.HUBS_components),o=e.userData.components;return t||o}AFRAME.GLTFModelPlus={components:{},registerComponent(e,t,o){o=o||v,AFRAME.GLTFModelPlus.components[e]={inflator:o,componentName:t}}};const _=function(e,t,o,n,i=1){"Chest"===t.name?t.name="Spine":"Root Scene"===t.name?t.name="AvatarRoot":"Bot_Skinned"===t.name&&(t.name="AvatarMesh");const a=[],s=t.children.slice(0);for(const t of s){const n=_(e,t,o);n&&a.push(n)}const r=w(t);if(!(!!r||t.name in o)&&!a.length&&!n)return null;const c=document.createElement("a-entity");c.append.apply(c,a);const l=(t.name||t.uuid).replace(/[^\w-]/g,"");c.classList.add(l),"YXZ"!==t.rotation.order&&t.rotation.setFromQuaternion(t.quaternion,"YXZ"),c.object3D.position.copy(t.position),c.object3D.rotation.copy(t.rotation),c.object3D.scale.copy(t.scale).multiplyScalar(i),c.object3D.matrixNeedsUpdate=!0,t.matrixAutoUpdate=!1,t.matrix.identity(),t.matrix.decompose(t.position,t.rotation,t.scale),c.setObject3D(t.type.toLowerCase(),t),r&&"nav-mesh"in r&&c.setObject3D("mesh",t),c.object3D.name=t.name,t.animations&&(t.parent.animations=t.animations);const d=t.userData.gltfIndex;return void 0!==d&&(e[d]=c),c};function S(e,t,o){const n=e.querySelectorAll("."+t);for(const e of n){const t=o.cloneNode(!0);for(const o of t.attributes){const{name:t,value:n}=o;e.setAttribute(t,n)}for(;t.children.length>0;)e.appendChild(t.children[0])}}function A(e,t,o,n,i){return R.apply(this,arguments)}function R(){return(R=p(function*(e,t,o,n,a){let s,d=e;(t.includes("model/gltf+zip")||t.includes("application/x-zip-compressed"))&&(s=yield b(d),d=s["scene.gtlf"]);const u=new THREE.LoadingManager;u.setURLModifier(Object(l.a)(d));const h=new THREE.GLTFLoader(u),m=yield new Promise((e,t)=>h.createParser(d,e,n,t));m.textureLoader=c.g,a&&(m.json=a(m.json));let p=0;m.json.extensions&&m.json.extensions.MOZ_hubs_components&&m.json.extensions.MOZ_hubs_components.hasOwnProperty("version")&&(p=m.json.extensions.MOZ_hubs_components.version),function(e,t){if(e<2){const e=t.nodes.find(e=>{let t=null;return e.extensions&&e.extensions.MOZ_hubs_components?t=e.extensions.MOZ_hubs_components:e.extensions&&e.extensions.HUBS_components&&(t=e.extensions.HUBS_components),t&&t.heightfield&&t["nav-mesh"]});e&&(e.extensions.MOZ_hubs_components?delete e.extensions.MOZ_hubs_components.heightfield:e.extensions.HUBS_components&&delete e.extensions.HUBS_components.heightfield)}}(p,m.json);const f=m.json.materials;if(f)for(let e=0;e<f.length;e++){const t=f[e];if(t.extensions&&t.extensions.MOZ_alt_materials&&void 0!==t.extensions.MOZ_alt_materials[o]){const n=t.extensions.MOZ_alt_materials[o];f[e]=f[n]}}const g=m.json.nodes;if(g)for(let e=0;e<g.length;e++){const t=g[e];t.extras||(t.extras={}),t.extras.gltfIndex=e}const v=yield new Promise(m.parse.bind(m));return v.scene.traverse(e=>{e.matrixAutoUpdate=THREE.Object3D.DefaultMatrixAutoUpdate,e.material=Object(i.b)(e,e=>e.isMeshStandardMaterial&&"KHR_materials_unlit"===o?r.a.fromStandardMaterial(e):e)}),s&&Object.keys(s).forEach(URL.revokeObjectURL),v})).apply(this,arguments)}AFRAME.registerComponent("gltf-model-plus",{schema:{src:{type:"string"},contentType:{type:"string"},useCache:{default:!0},inflate:{default:!1},batch:{default:!1},modelToWorldScale:{type:"number",default:1}},init(){this.preferredTechnique=window.APP&&"low"===window.APP.quality?"KHR_materials_unlit":"pbrMetallicRoughness",this.jsonPreprocessor=null,this.loadTemplates()},update(){this.applySrc(this.data.src,this.data.contentType)},remove(){this.data.batch&&this.model&&this.el.sceneEl.systems["hubs-systems"].batchManagerSystem.removeObject(this.el.object3DMap.mesh),this.data.src&&f.release(this.data.src)},loadTemplates(){this.templates={},this.el.querySelectorAll(":scope > template").forEach(e=>{const t=document.importNode(e.firstElementChild||e.content.firstElementChild,!0);this.templates[e.getAttribute("data-name")]=t})},loadModel(e,t,o,n){var i=this;return p(function*(){if(n){if(f.has(e))return f.retain(e),E(f.get(e).gltf);if(g.has(e)){const t=yield g.get(e);return f.retain(e),E(t)}{const n=A(e,t,o,null,i.jsonPreprocessor);g.set(e,n);const a=yield n;return g.delete(e),f.set(e,a),E(a)}}return A(e,t,o,null,i.jsonPreprocessor)})()},applySrc(e,t){var o=this;return p(function*(){try{if(e&&"#"===e.charAt(0)){const t=document.getElementById(e.substring(1));e=t.getAttribute("src")}if(e===o.lastSrc)return;if(o.lastSrc&&f.release(o.lastSrc),o.lastSrc=e,!e)return void(o.inflatedEl&&(console.warn("gltf-model-plus set to an empty source, unloading inflated model."),o.disposeLastInflatedEl()));o.el.emit("model-loading");const i=yield o.loadModel(e,t,o.preferredTechnique,o.data.useCache);if(e!=o.lastSrc)return;o.disposeLastInflatedEl(),o.model=i.scene||i.scenes[0],o.model.animations=i.animations,o.data.batch&&o.el.sceneEl.systems["hubs-systems"].batchManagerSystem.addObject(o.model),i.animations.length>0?(o.el.setAttribute("animation-mixer",{}),o.el.components["animation-mixer"].initMixer(i.animations)):o.model.traverse(e=>{const t=e.isMesh&&e.geometry.isBufferGeometry,o=t&&e.geometry.boundsTree;if(t&&!o&&e.geometry.attributes.position){const t=e.geometry,o=t.index?t.index.count/3:t.attributes.position.count/3;o>1e3&&o<1e6&&(t.boundsTree=new u.a(e.geometry,{strategy:0,maxDepth:30}))}});const a={};let s=o.model;if(o.data.inflate&&(o.inflatedEl=_(a,o.model,o.templates,!0,o.data.modelToWorldScale))){if(o.el.appendChild(o.inflatedEl),s=o.inflatedEl.object3D,yield Object(n.a)(),e!=o.lastSrc)return;!function(e,t){e.object3D.traverse(e=>{const o=w(e),n=e.el;if(o&&n)for(const e in o)if(o.hasOwnProperty(e)&&AFRAME.GLTFModelPlus.components.hasOwnProperty(e)){const{componentName:i,inflator:a}=AFRAME.GLTFModelPlus.components[e];a(n,i,o[e],o,t)}})}(o.inflatedEl,a);for(const e in o.templates)S(o.el,e,o.templates[e])}const r=[];s.traverse(e=>{const t=e.el;t&&r.push(()=>e.el=t)});const c=o.el.sceneEl.components["environment-map"];c&&c.applyEnvironmentMap(s),o.el.setObject3D("mesh",s),r.forEach(e=>e()),o.el.emit("model-loaded",{format:"gltf",model:o.model})}catch(t){f.release(e),console.error("Failed to load glTF model",t,o),o.el.emit("model-error",{format:"gltf",src:e})}})()},disposeLastInflatedEl(){this.inflatedEl&&(this.inflatedEl.parentNode.removeChild(this.inflatedEl),this.inflatedEl.object3D.traverse(e=>{e.material&&e.material.dispose&&e.material.dispose(),e.geometry&&(e.geometry.dispose&&e.geometry.dispose(),e.geometry.boundsTree=null)}),delete this.inflatedEl,this.el.removeAttribute("animation-mixer"))}})},167:function(e,t,o){"use strict";function n(e){let t=0;const o={};return e.onmessage=t=>{const{id:n,result:i,err:a}=t.data,s=o[n];null==s?console.error(`Unknown message with ID ${n} received from ${e}.`):(delete o[n],null!=a?s.reject(new Error(a)):s.resolve(i))},function(n,i){const a=t++,s=new Promise((e,t)=>{o[a]={resolve:e,reject:t}});return e.postMessage({id:a,payload:n},i),s}}o.d(t,"a",function(){return n})},169:function(e,t,o){"use strict";o.d(t,"a",function(){return n}),o.d(t,"b",function(){return i});const n=function(){return"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?Promise.resolve(null):new Promise(e=>{window.addEventListener("DOMContentLoaded",e)})},i=function(e,t){return new Promise(o=>{t.addEventListener(e,o,{once:!0})})}},187:function(e,t,o){"use strict";o.d(t,"a",function(){return r});var n=o(41),i=o(98);const a=[],s=[],r=["MeshStandardMaterial","MeshBasicMaterial","MobileStandardMaterial"];AFRAME.registerComponent("hoverable-visuals",{schema:{enableSweepingEffect:{type:"boolean",default:!0}},init(){this.uniforms=null,this.boundingSphere=new THREE.Sphere,this.sweepParams=[0,0]},remove(){this.uniforms=null,this.boundingBox=null;const e=AFRAME.scenes[0].systems["hubs-systems"].batchManagerSystem;this.el.object3D.traverse(t=>{t.material&&Object(n.a)(t,o=>{!r.includes(o.type)||t.el.classList.contains("ui")||t.el.classList.contains("hud")||t.el.getAttribute("text-button")||e.meshToEl.delete(t)})})},tick(e){if(!this.uniforms||!this.uniforms.length)return;const t=this.el.sceneEl.is("frozen"),o=Object(i.b)(this.el);let n,r;const c=AFRAME.scenes[0].systems.interaction;if(c.state.leftHand.hovered!==this.el&&c.state.leftHand.held!==this.el||(n=c.options.leftHand.entity.object3D),c.state.rightRemote.hovered!==this.el&&c.state.rightRemote.held!==this.el||(r=c.options.rightRemote.entity.object3D),c.state.rightHand.hovered!==this.el&&c.state.rightHand.held!==this.el||(r=c.options.rightHand.entity.object3D),n&&n.matrixWorld.toArray(a),r&&r.matrixWorld.toArray(s),n||r||t){const e=this.el.object3D.matrixWorld.elements[13],t=this.el.object3D.scale.y*this.boundingSphere.radius;this.sweepParams[0]=e-t,this.sweepParams[1]=e+t}for(let i=0,c=this.uniforms.length;i<c;i++){const c=this.uniforms[i];c.hubs_EnableSweepingEffect.value=this.data.enableSweepingEffect&&o,c.hubs_IsFrozen.value=t,c.hubs_SweepParams.value=this.sweepParams,c.hubs_HighlightInteractorOne.value=!!n&&o,c.hubs_InteractorOnePos.value[0]=a[12],c.hubs_InteractorOnePos.value[1]=a[13],c.hubs_InteractorOnePos.value[2]=a[14],c.hubs_HighlightInteractorTwo.value=!!r&&o,c.hubs_InteractorTwoPos.value[0]=s[12],c.hubs_InteractorTwoPos.value[1]=s[13],c.hubs_InteractorTwoPos.value[2]=s[14],(n||r||t)&&(c.hubs_Time.value=e)}}})},195:function(e,t){e.exports={COLLISION_LAYERS:{ALL:-1,NONE:0,INTERACTABLES:1,ENVIRONMENT:2,AVATAR:4,HANDS:8,DEFAULT_INTERACTABLE:15,UNOWNED_INTERACTABLE:9,DEFAULT_SPAWNER:9}}},2:function(e,t,o){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),n.forEach(function(t){i(e,t,o[t])})}return e}function i(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,"a",function(){return a});const a={noop:"/noop",actions:{}};a.actions.log="/actions/log",a.actions.toggleScreenShare="/actions/toggleScreenShare",a.actions.snapRotateLeft="/actions/snapRotateLeft",a.actions.snapRotateRight="/actions/snapRotateRight",a.actions.angularVelocity="/actions/angularVelocity",a.actions.logDebugFrame="/actions/logDebugFrame",a.actions.logInteractionState="/actions/logInteractionState",a.actions.cameraDelta="/actions/cameraDelta",a.actions.lobbyCameraDelta="/actions/lobbyCameraDelta",a.actions.characterAcceleration="/actions/characterAcceleration",a.actions.boost="/actions/boost",a.actions.startGazeTeleport="/actions/startTeleport",a.actions.stopGazeTeleport="/actions/stopTeleport",a.actions.spawnPen="/actions/spawnPen",a.actions.ensureFrozen="/actions/ensureFrozen",a.actions.toggleFreeze="/actions/toggleFreeze",a.actions.thaw="/actions/thaw",a.actions.muteMic="/actions/muteMic",a.actions.toggleFlying="/actions/toggleFlying",a.actions.focusChat="/actions/focusChat",a.actions.focusChatCommand="/actions/focusChatCommand",a.actions.toggleCamera="/actions/toggleCamera",a.actions.takeSnapshot="/actions/takeSnapshot",a.actions.mediaExit="/actions/mediaExit",a.actions.mediaSearch1="/actions/mediaSearch1",a.actions.mediaSearch2="/actions/mediaSearch2",a.actions.mediaSearch3="/actions/mediaSearch3",a.actions.mediaSearch4="/actions/mediaSearch4",a.actions.mediaSearch5="/actions/mediaSearch5",a.actions.mediaSearch6="/actions/mediaSearch6",a.actions.mediaSearch7="/actions/mediaSearch7",a.actions.mediaSearch8="/actions/mediaSearch8",a.actions.transformModifier="/actions/transformModifier",a.actions.rayObjectRotation="/actions/rayObjectRotation",a.actions.cursor={},a.actions.cursor.pose="/actions/cursorPose",a.actions.cursor.hideLine="/actions/cursorHideLine",a.actions.cursor.grab="/actions/cursorGrab",a.actions.cursor.drop="/actions/cursorDrop",a.actions.cursor.modDelta="/actions/cursorModDelta",a.actions.cursor.startDrawing="/actions/cursorStartDrawing",a.actions.cursor.stopDrawing="/actions/cursorStopDrawing",a.actions.cursor.undoDrawing="/actions/cursorUndoDrawing",a.actions.cursor.penNextColor="/actions/cursorPenNextColor",a.actions.cursor.penPrevColor="/actions/cursorPenPrevColor",a.actions.cursor.scalePenTip="/actions/cursorScalePenTip",a.actions.cursor.scaleGrabbedGrabbable="/actions/cursorScaleGrabbedGrabbable",a.actions.cursor.mediaVolumeMod="/actions/cursor/mediaVolumeMod",a.actions.cursor.takeSnapshot="/actions/cursorTakeSnapshot",a.actions.pen={},a.actions.pen.remove="/actions/pen/remove",a.actions.rightHand={},a.actions.rightHand.matrix="/actions/rightHand/matrix",a.actions.rightHand.pose="/actions/rightHandPose",a.actions.rightHand.grab="/actions/rightHandGrab",a.actions.rightHand.drop="/actions/rightHandDrop",a.actions.rightHand.modDelta="/actions/rightHandModDelta",a.actions.rightHand.startDrawing="/actions/rightHandStartDrawing",a.actions.rightHand.stopDrawing="/actions/rightHandStopDrawing",a.actions.rightHand.undoDrawing="/actions/rightHandUndoDrawing",a.actions.rightHand.switchDrawMode="/actions/rightHandSwitchDrawMode",a.actions.rightHand.penNextColor="/actions/rightHandPenNextColor",a.actions.rightHand.penPrevColor="/actions/rightHandPenPrevColor",a.actions.rightHand.scalePenTip="/actions/rightHandScalePenTip",a.actions.rightHand.startTeleport="/actions/rightHand/startTeleport",a.actions.rightHand.stopTeleport="/actions/rightHand/stopTeleport",a.actions.rightHand.takeSnapshot="/actions/rightHandTakeSnapshot",a.actions.rightHand.thumb="/actions/rightHand/thumbDown",a.actions.rightHand.index="/actions/rightHand/indexDown",a.actions.rightHand.middleRingPinky="/actions/rightHand/middleRingPinkyDown",a.actions.leftHand={},a.actions.leftHand.matrix="/actions/leftHand/matrix",a.actions.leftHand.pose="/actions/leftHandPose",a.actions.leftHand.grab="/actions/leftHandGrab",a.actions.leftHand.drop="/actions/leftHandDrop",a.actions.leftHand.modDelta="/actions/leftHandModDelta",a.actions.leftHand.startDrawing="/actions/leftHandStartDrawing",a.actions.leftHand.stopDrawing="/actions/leftHandStopDrawing",a.actions.leftHand.undoDrawing="/actions/leftHandUndoDrawing",a.actions.leftHand.switchDrawMode="/actions/leftHandSwitchDrawMode",a.actions.leftHand.penNextColor="/actions/leftHandPenNextColor",a.actions.leftHand.penPrevColor="/actions/leftHandPenPrevColor",a.actions.leftHand.scalePenTip="/actions/leftHandScalePenTip",a.actions.leftHand.startTeleport="/actions/leftHand/startTeleport",a.actions.leftHand.stopTeleport="/actions/leftHand/stopTeleport",a.actions.leftHand.takeSnapshot="/actions/leftHandTakeSnapshot",a.actions.leftHand.thumb="/actions/leftHand/thumbDown",a.actions.leftHand.index="/actions/leftHand/indexDown",a.actions.leftHand.middleRingPinky="/actions/leftHand/middleRingPinkyDown",a.actions.camera={},a.actions.camera.exitMirror="/actions/cameraExitMirror",a.haptics={},a.haptics.actuators={},a.haptics.actuators.left="/haptics/actuators/left",a.haptics.actuators.right="/haptics/actuators/right",a.device={},a.device.mouse={},a.device.mouse.coords="/device/mouse/coords",a.device.mouse.movementXY="/device/mouse/movementXY",a.device.mouse.buttonLeft="/device/mouse/buttonLeft",a.device.mouse.buttonRight="/device/mouse/buttonRight",a.device.mouse.wheel="/device/mouse/wheel",a.device.smartMouse={},a.device.smartMouse.cursorPose="/device/smartMouse/cursorPose",a.device.smartMouse.cameraDelta="/device/smartMouse/cameraDelta",a.device.touchscreen={},a.device.touchscreen.cursorPose="/device/touchscreen/cursorPose",a.device.touchscreen.touchCameraDelta="/device/touchscreen/touchCameraDelta",a.device.touchscreen.gyroCameraDelta="/device/touchscreen/gyroCameraDelta",a.device.touchscreen.cameraDelta="/device/touchscreen/cameraDelta",a.device.touchscreen.pinch={},a.device.touchscreen.pinch.delta="/device/touchscreen/pinch/delta",a.device.touchscreen.pinch.initialDistance="/device/touchscreen/pinch/initialDistance",a.device.touchscreen.pinch.currentDistance="/device/touchscreen/pinch/currentDistance",a.device.touchscreen.isTouching="/device/touchscreen/isTouching",a.device.touchscreen.isTouchingGrabbable="/device/touchscreen/isTouchingGrabbable",a.device.touchscreen.tap1="/device/touchscreen/tap1",a.device.touchscreen.tap2="/device/touchscreen/tap2",a.device.touchscreen.tap3="/device/touchscreen/tap3",a.device.touchscreen.tap4="/device/touchscreen/tap4",a.device.touchscreen.tap5="/device/touchscreen/tap5",a.device.gyro={},a.device.gyro.averageDeltaX="/device/gyro/averageDeltaX",a.device.gyro.averageDeltaY="/device/gyro/averageDeltaY",a.device.hud={},a.device.hud.penButton="/device/hud/penButton",a.device.keyboard={map:new Map,key:function(e){let t=this.map.get(e);return t||(t=`/device/keyboard/${e.toLowerCase()}`,this.map.set(e,t),t)}},a.device.gamepad=e=>({button:t=>({pressed:`/device/gamepad/${e}/button/${t}/pressed`,touched:`/device/gamepad/${e}/button/${t}/touched`,value:`/device/gamepad/${e}/button/${t}/value`}),axis:t=>`/device/gamepad/${e}/axis/${t}`});const s="/device/xbox/";a.device.xbox={v:e=>`/vars/xbox/${e}`,button:e=>({pressed:`${s}button/${e}/pressed`,touched:`${s}button/${e}/touched`,value:`${s}button/${e}/value`}),axis:e=>`${s}axis/${e}`,axesSum:`${s}axis/sum`},a.device.oculusgo={button:e=>({pressed:`/device/oculusgo/button/${e}/pressed`,touched:`/device/oculusgo/button/${e}/touched`,value:`/device/oculusgo/button/${e}/value`}),axis:e=>`/device/oculusgo/axis/${e}`,trigger:{pressed:"/device/oculusgo/button/trigger/pressed",touched:"/device/oculusgo/button/trigger/touched",value:"/device/oculusgo/button/trigger/value"},touchpad:{pressed:"/device/oculusgo/button/touchpad/pressed",touched:"/device/oculusgo/button/touchpad/touched",value:"/device/oculusgo/button/touchpad/value",axisX:"/device/oculusgo/axis/touchpadX",axisY:"/device/oculusgo/axis/touchpadY"},pose:"/device/oculusgo/pose",matrix:"/device/oculusgo/matrix",v:e=>`/vars/oculusgo/${e}`};const r="/device/gearVRController/";a.device.gearVRController={button:e=>({pressed:`${r}button/${e}/pressed`,touched:`${r}button/${e}/touched`,value:`${r}button/${e}/value`}),axis:e=>`${r}axis/${e}`,pose:`${r}pose`,matrix:`${r}matrix`,v:e=>`/vars/gearVRController/${e}`};const c="/device/daydream/";a.device.daydream={button:e=>({pressed:`${c}button/${e}/pressed`,touched:`${c}button/${e}/touched`,value:`${c}button/${e}/value`}),axis:e=>`${c}axis/${e}`,pose:`${c}pose`,matrix:`${c}matrix`};const l="/device/rightOculusTouch/";a.device.rightOculusTouch={button:e=>({pressed:`${l}button/${e}/pressed`,touched:`${l}button/${e}/touched`,value:`${l}button/${e}/value`}),axis:e=>`${l}axis/${e}`,axesSum:`${l}axis/sum`,pose:`${l}pose`,matrix:`${l}matrix`};const d="/device/leftOculusTouch/";function u(e,t,o){return{pressed:`${e}${t}/button/${o}/pressed`,touched:`${e}${t}/button/${o}/touched`,value:`${e}${t}/button/${o}/value`}}function h(e,t,o){return{axisX:`${e}${t}/axis/${o}X`,axisY:`${e}${t}/axis/${o}Y`}}function m(e){const t="/device/wmr/";return{touchpad:n({},u(t,e,"touchpad"),h(t,e,"touchpad")),trigger:u(t,e,"trigger"),grip:u(t,e,"grip"),menu:u(t,e,"menu"),joystick:h(t,e,"joystick"),pose:`${t}${e}/pose`,matrix:`${t}${e}/matrix`}}a.device.leftOculusTouch={button:e=>({pressed:`${d}button/${e}/pressed`,touched:`${d}button/${e}/touched`,value:`${d}button/${e}/value`}),axis:e=>`${d}axis/${e}`,axesSum:`${d}axis/sum`,pose:`${d}pose`,matrix:`${d}matrix`},a.device.vive={},a.device.vive.left={button:e=>({pressed:`/device/vive/left/button/${e}/pressed`,touched:`/device/vive/left/button/${e}/touched`,value:`/device/vive/left/button/${e}/value`}),axis:e=>`/device/vive/left/axis/${e}`,axesSum:"/device/vive/left/axis/sum",pose:"/device/vive/left/pose",matrix:"/device/vive/left/matrix"},a.device.vive.right={button:e=>({pressed:`/device/vive/right/button/${e}/pressed`,touched:`/device/vive/right/button/${e}/touched`,value:`/device/vive/right/button/${e}/value`}),axis:e=>`/device/vive/right/axis/${e}`,axesSum:"/device/vive/right/axis/sum",pose:"/device/vive/right/pose",matrix:"/device/vive/right/matrix"},a.device.wmr={},a.device.wmr.v=e=>`/vars/wmr/${e}`,a.device.wmr.k=e=>`/vars/wmr/keyboard/${e}`,a.device.wmr.left=m("left"),a.device.wmr.right=m("right")},200:function(e,t){},201:function(e,t,o){"use strict";o.d(t,"a",function(){return b});var n=o(41),i=o(203),a=o.n(i),s=o(204),r=o.n(s),c=o(205),l=o.n(c),d=o(206),u=o.n(d),h=o(207),m=o.n(h),p=o(208),f=o.n(p);function g(e,t,o,n,i,a,s){try{var r=e[a](s),c=r.value}catch(e){return void o(e)}r.done?t(c):Promise.resolve(c).then(n,i)}function b(){return v.apply(this,arguments)}function v(){var e;return e=function*(){const e=[a.a,r.a,l.a,u.a,m.a,f.a],t=yield new Promise((t,o)=>(new THREE.CubeTextureLoader).load(e,t,void 0,o));return t.format=THREE.RGBFormat,t},(v=function(){var t=this,o=arguments;return new Promise(function(n,i){var a=e.apply(t,o);function s(e){g(a,n,i,s,r,"next",e)}function r(e){g(a,n,i,s,r,"throw",e)}s(void 0)})}).apply(this,arguments)}AFRAME.registerComponent("environment-map",{init(){this.environmentMap=null,this.updateEnvironmentMap=this.updateEnvironmentMap.bind(this)},updateEnvironmentMap(e){this.environmentMap=e,this.applyEnvironmentMap(this.el.object3D)},applyEnvironmentMap(e){e.traverse(e=>{Object(n.a)(e,e=>{e.isMeshStandardMaterial&&(e.envMap=this.environmentMap,e.needsUpdate=!0)})})}})},202:function(e,t){e.exports="if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\n  float ratio = 0.0;\n\n  if (hubs_EnableSweepingEffect) {\n    float size = hubs_SweepParams.t - hubs_SweepParams.s;\n    float line = mod(hubs_Time / 500.0 * size, size * 3.0) + hubs_SweepParams.s - size / 3.0;\n\n    if (hubs_WorldPosition.y < line) {\n      // Highlight with a sweeping gradient.\n      ratio = max(0.0, 1.0 - (line - hubs_WorldPosition.y) / (size * 1.5));\n    }\n  }\n\n  // Highlight with a gradient falling off with distance.\n  float pulse = 9.0 + 3.0 * (sin(hubs_Time / 1000.0) + 1.0);\n\n  if (hubs_HighlightInteractorOne) {\n    float dist1 = distance(hubs_WorldPosition, hubs_InteractorOnePos);\n    ratio += -min(1.0, pow(dist1 * pulse, 3.0)) + 1.0;\n  } \n\n  if (hubs_HighlightInteractorTwo) {\n    float dist2 = distance(hubs_WorldPosition, hubs_InteractorTwoPos);\n    ratio += -min(1.0, pow(dist2 * pulse, 3.0)) + 1.0;\n  }\n\n  ratio = min(1.0, ratio);\n\n  // Gamma corrected highlight color\n  vec3 highlightColor = vec3(0.184, 0.499, 0.933);\n\n  gl_FragColor.rgb = (gl_FragColor.rgb * (1.0 - ratio)) + (highlightColor * ratio);\n}\n"},203:function(e,t,o){e.exports=o.p+"assets/images/cubemap/posx-d235fb97df77b607be04b84125f40e7c.jpg"},204:function(e,t,o){e.exports=o.p+"assets/images/cubemap/negx-35034574e114423babdea92b6a2eb97a.jpg"},205:function(e,t,o){e.exports=o.p+"assets/images/cubemap/posy-d0c4e1e7979d75923d4d8b49c191bc6e.jpg"},206:function(e,t,o){e.exports=o.p+"assets/images/cubemap/negy-35808d21d1d17ac1b84d3184e365093b.jpg"},207:function(e,t,o){e.exports=o.p+"assets/images/cubemap/posz-de29aa8396196e4b040cd5305e351dbe.jpg"},208:function(e,t,o){e.exports=o.p+"assets/images/cubemap/negz-d73d18a8b7994524dc39a6ea3fcf43fc.jpg"},209:function(e,t,o){"use strict";o.d(t,"a",function(){return i});var n=o(139);function i(){if("iOS"!==Object(n.detectOS)(navigator.userAgent))return;let e=0;document.addEventListener("touchmove",e=>{1!==e.scale&&e.preventDefault()}),document.addEventListener("touchend",t=>{const o=(new Date).getTime(),n=o-e<=300;e=o,n&&t.preventDefault()})}},21:function(e,t,o){"use strict";o.d(t,"b",function(){return r}),o.d(t,"a",function(){return c}),o.d(t,"c",function(){return l});var n=o(74),i=o.n(n);function a(e,t,o,n,i,a,s){try{var r=e[a](s),c=r.value}catch(e){return void o(e)}r.done?t(c):Promise.resolve(c).then(n,i)}i.a.configure({endpointUrl:"https://api.airtable.com",apiKey:"keyOHSVeLr3ryLrL5"});const s=i.a.base("appIR0AlHDFG5WR8z"),r={DarkLogo:null,Name:null,Icon:null},c=s("Assets"),l=s("Messages").select({view:"Grid view"}).firstPage(function(){var e,t=(e=function*(e,t){if(!e)return t[0];console.error(e)},function(){var t=this,o=arguments;return new Promise(function(n,i){var s=e.apply(t,o);function r(e){a(s,n,i,r,c,"next",e)}function c(e){a(s,n,i,r,c,"throw",e)}r(void 0)})});return function(e,o){return t.apply(this,arguments)}}())},210:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var n=o(54),i=o(141);class a{constructor(){this.scene=null,this.quality="low",this.store=new n.b,this.mediaSearchStore=new i.b}setQuality(e){return this.quality!==e&&(this.quality=e,this.scene&&this.scene.dispatchEvent(new CustomEvent("quality-changed",{detail:e})),!0)}}},211:function(e,t,o){"use strict";function n(e,t){window.APP.componentRegistry=window.APP.componentRegistry||{},window.APP.componentRegistry[t]=window.APP.componentRegistry[t]||[],window.APP.componentRegistry[t].push(e)}function i(e,t){window.APP.componentRegistry&&window.APP.componentRegistry[t]&&window.APP.componentRegistry[t].splice(window.APP.componentRegistry[t].indexOf(e),1)}function a(){if(!(window.APP&&window.APP.componentRegistry&&window.APP.hubChannel&&window.APP.hubChannel.presence))return null;const e=window.APP.componentRegistry["player-info"]||[],t=window.APP.hubChannel.presence.state;for(let o=0;o<e.length;o++){const n=e[o],i=t[n.playerSessionId];if(i&&i.metas[0]&&i.metas[0].streaming)return n}return null}o.d(t,"c",function(){return n}),o.d(t,"a",function(){return i}),o.d(t,"b",function(){return a})},2149:function(e,t,o){"use strict";o.r(t);o(2489),o(460),o(341),o(836);var n=o(516),i=(o(461),o(1049),o(852),o(870),o(10)),a=o(32),s=o.n(a),r=o(0),c=o.n(r),l=o(1290),d=o.n(l),u=o(1),h=o.n(u),m=o(3),p=o.n(m),f=o(4),g=o(150),b=o.n(g),v=o(2491),y=o.n(v),E=o(585),w=o.n(E),_=o(1291),S=o.n(_),A=o(9),R=o(22);function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function P(e,t){if(null==e)return{};var o,n,i=function(e,t){if(null==e)return{};var o,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(i[o]=e[o]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}function C(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const T="^.{1,64}$";class M extends r.Component{constructor(...e){super(...e),C(this,"state",{customRoomName:"",customSceneUrl:""})}render(){const e=this.props,{onCustomScene:t,onClose:o}=e,n=P(e,["onCustomScene","onClose"]);return c.a.createElement(R.a,x({title:"Initialize Axon Park",onClose:o},n),c.a.createElement("div",null,this.props.includeScenePrompt?c.a.createElement("div",null,"Choose a name and GLTF URL for your room's scene:"):c.a.createElement("div",null,"Choose a name for your room:"),c.a.createElement("form",{onSubmit:()=>{t(this.state.customRoomName,this.state.customSceneUrl),o()}},c.a.createElement("div",{className:"custom-scene-form"},c.a.createElement("input",{type:"text",placeholder:"Room name",className:"custom-scene-form__link_field",value:this.state.customRoomName,pattern:T,title:"Names must be at most 64 characters.",onChange:e=>this.setState({customRoomName:e.target.value}),required:!0}),this.props.includeScenePrompt&&c.a.createElement("input",{type:"url",placeholder:"URL to Scene GLTF or GLB (Optional)",className:"custom-scene-form__link_field",value:this.state.customSceneUrl,onChange:e=>this.setState({customSceneUrl:e.target.value})}),c.a.createElement("div",{className:"custom-scene-form__buttons"},c.a.createElement(A.b,null,c.a.createElement("button",{className:"custom-scene-form__action-button"},c.a.createElement("span",null,"Initialize Axon Park"))))))))}}C(M,"propTypes",{includeScenePrompt:h.a.bool,onCustomScene:h.a.func,onClose:h.a.func});var D=o(15),k=o(1292),L=o(33);function O(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}Object(f.c)([...b.a]);class j extends r.Component{constructor(e){super(e),O(this,"state",{showScreenshot:!1,showCustomRoomDialog:!1}),O(this,"createRoom",()=>{Object(i.b)(this.state.customRoomName,this.props.sceneId)}),setTimeout(()=>{this.props.sceneLoaded||this.setState({showScreenshot:!0})},5e3)}componentDidMount(){this.props.scene.addEventListener("loaded",this.onSceneLoaded)}componentWillUnmount(){this.props.scene.removeEventListener("loaded",this.onSceneLoaded)}render(){if(this.props.unavailable)return c.a.createElement(f.b,{locale:L.a,messages:L.b},c.a.createElement("div",{className:y.a.ui},c.a.createElement("div",{className:y.a.unavailable},c.a.createElement("div",null,c.a.createElement(f.a,{id:"scene.unavailable"})))));const e=[location.protocol,"//",location.host,location.pathname].join(""),t=`${this.props.sceneName} in #hubs`,o=`https://twitter.com/share?url=${encodeURIComponent(e)}&text=${encodeURIComponent(t)}`;let n;const i=e=>{if(e.url){const t=e.url.includes("sketchfab.com")?"on Sketchfab":e.url.includes("poly.google.com")?"on Google Poly":"";return c.a.createElement("span",{key:e.url},c.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.name," by ",e.author," ",t),"")}return c.a.createElement("span",{key:`${e.name} ${e.author}`},e.name," by ",e.author,"")};return this.props.sceneAttributions&&(n=this.props.sceneAttributions.extras?c.a.createElement("span",null,this.props.sceneAttributions.extras):c.a.createElement("span",null,c.a.createElement("span",null,this.props.sceneAttributions.creator?`by ${this.props.sceneAttributions.creator}`:""),"",c.a.createElement("br",null),this.props.sceneAttributions.content&&this.props.sceneAttributions.content.map(i))),c.a.createElement(f.b,{locale:L.a,messages:L.b},c.a.createElement("div",{className:y.a.ui},c.a.createElement("div",{className:p()({[y.a.screenshot]:!0,[y.a.screenshotHidden]:this.props.sceneLoaded})},this.state.showScreenshot&&c.a.createElement("img",{src:this.props.sceneScreenshotURL})),c.a.createElement("div",{className:y.a.whiteOverlay}),c.a.createElement("div",{className:y.a.grid},c.a.createElement("div",{className:y.a.mainPanel},c.a.createElement(A.b,null,c.a.createElement("a",{href:"/",className:y.a.logo},c.a.createElement("img",{src:w.a}))),c.a.createElement("div",{className:y.a.logoTagline},c.a.createElement(f.a,{id:"scene.logo_tagline"})),c.a.createElement("div",{className:y.a.createButtons},c.a.createElement(A.b,null,c.a.createElement("button",{className:y.a.createButton,onClick:this.createRoom},c.a.createElement(f.a,{id:"scene.create_button"}))),c.a.createElement(A.b,null,c.a.createElement("button",{className:y.a.optionsButton,onClick:()=>this.setState({showCustomRoomDialog:!0})},c.a.createElement(D.a,{icon:k.faEllipsisH})))),c.a.createElement(A.b,null,c.a.createElement("a",{href:o,rel:"noopener noreferrer",target:"_blank",className:y.a.tweetButton},c.a.createElement("img",{src:d.a}),c.a.createElement("div",null,c.a.createElement(f.a,{id:"scene.tweet_button"})))))),c.a.createElement("div",{className:y.a.info},c.a.createElement("div",{className:y.a.name},this.props.sceneName),c.a.createElement("div",{className:y.a.attribution},n)),c.a.createElement("div",{className:y.a.spoke},c.a.createElement("div",{className:y.a.madeWith},"made with"),c.a.createElement("a",{href:"/spoke"},c.a.createElement("img",{src:S.a}))),this.state.showCustomRoomDialog&&c.a.createElement(M,{includeScenePrompt:!1,onClose:()=>this.setState({showCustomRoomDialog:!1}),onCustomScene:e=>{this.setState({showCustomRoomDialog:!1,customRoomName:e},()=>this.createRoom())}})))}}O(j,"propTypes",{scene:h.a.object,sceneLoaded:h.a.bool,sceneId:h.a.string,sceneName:h.a.string,sceneDescription:h.a.string,sceneAttributions:h.a.object,sceneScreenshotURL:h.a.string,unavailable:h.a.bool});var N=j,F=o(209),H=(o(1050),o(210)),I=(o(1173),o(875),o(78));function U(e,t,o,n,i,a,s){try{var r=e[a](s),c=r.value}catch(e){return void o(e)}r.done?t(c):Promise.resolve(c).then(n,i)}function B(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),n.forEach(function(t){V(e,t,o[t])})}return e}function V(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}console.log(`Hubs version: ${{NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}.BUILD_VERSION||"?"}`),Object(n.a)(),window.APP=new H.a;const $=new URLSearchParams(location.search),W=AFRAME.utils.device.isMobile()||AFRAME.utils.device.isMobileVR();function z(e,t={}){s.a.render(c.a.createElement(N,B({scene:e},t)),document.getElementById("ui-root"))}window.APP.quality=$.get("quality")||W?"low":"high",Object(F.a)();const G=function(){var e,t=(e=function*(){const e=document.querySelector("a-scene");window.APP.scene=e;const t=$.get("scene_id")||document.location.pathname.substring(1).split("/")[1];console.log(`Scene ID: ${t}`),e.setAttribute("shadow",{enabled:"low"!==window.APP.quality});let o={sceneId:t};z(e);const n=t=>{o=B({},o,t),z(e,o)},a=document.querySelector("#scene-root"),s=document.createElement("a-entity"),r=document.createElement("a-entity"),c=document.getElementById("camera");s.addEventListener("scene-loaded",()=>{n({sceneLoaded:!0});const e=r.object3D.getObjectByName("scene-preview-camera");e&&(c.object3D.position.copy(e.position),c.object3D.rotation.copy(e.rotation),c.object3D.matrixNeedsUpdate=!0),c.setAttribute("scene-preview-camera","")});const l=(yield fetch(Object(i.h)(`/api/v1/scenes/${t}`)).then(e=>e.json())).scenes[0];if(!l)return void n({unavailable:!0});l.allow_promotion?Object(I.a)(`/scene/${t}`,`Hubs Scene: ${l.title}`):Object(I.a)("/scene","Hubs Non-Promotable Scene Page");const d=l.model_url;console.log(`Scene Model URL: ${d}`),r.setAttribute("gltf-model-plus",{src:d,useCache:!1,inflate:!0}),r.addEventListener("model-loaded",()=>s.emit("scene-loaded")),s.appendChild(r),a.appendChild(s),n({sceneName:l.name,sceneDescription:l.description,sceneAttributions:l.attributions,sceneScreenshotURL:l.screenshot_url})},function(){var t=this,o=arguments;return new Promise(function(n,i){var a=e.apply(t,o);function s(e){U(a,n,i,s,r,"next",e)}function r(e){U(a,n,i,s,r,"throw",e)}s(void 0)})});return function(){return t.apply(this,arguments)}}();document.addEventListener("DOMContentLoaded",G)},22:function(e,t,o){"use strict";o.d(t,"a",function(){return m});var n=o(0),i=o.n(n),a=o(1),s=o.n(a),r=o(3),c=o.n(r),l=o(9),d=o(68),u=o(15);function h(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class m extends n.Component{constructor(e){super(e),h(this,"onContainerClicked",e=>{this.props.closable&&e.currentTarget===e.target&&this.props.onClose()}),this.onKeyDown=this.onKeyDown.bind(this),this.onContainerClicked=this.onContainerClicked.bind(this)}componentDidMount(){window.addEventListener("keydown",this.onKeyDown)}componentWillUnmount(){window.removeEventListener("keydown",this.onKeyDown)}onKeyDown(e){this.props.closable&&"Escape"===e.key&&this.props.onClose()}render(){return i.a.createElement("div",{className:c()("dialog-overlay",this.props.className)},i.a.createElement("div",{className:"dialog",onClick:this.onContainerClicked},i.a.createElement("div",{className:`dialog__box ${this.props.wide?"dialog__wide":""} `},i.a.createElement("div",{className:c()("dialog__box__contents",this.props.allowOverflow?"dialog__box__contents-overflow":null,this.props.additionalClass)},this.props.closable&&this.props.onClose&&i.a.createElement(l.b,null,i.a.createElement("button",{className:"dialog__box__contents__close",onClick:()=>this.props.onClose()},i.a.createElement("i",null,i.a.createElement(u.a,{icon:d.faTimes})))),this.props.title&&i.a.createElement("div",{className:"dialog__box__contents__title"},this.props.title),i.a.createElement("div",{className:"dialog__box__contents__body"},this.props.children),i.a.createElement("div",{className:"dialog__box__contents__button-container"})))))}}h(m,"propTypes",{title:s.a.node,children:s.a.node.isRequired,onClose:s.a.func,closable:s.a.bool,wide:s.a.bool,className:s.a.string,allowOverflow:s.a.bool,additionalClass:s.a.string}),h(m,"defaultProps",{closable:!0})},237:function(e,t){},238:function(e,t){},24:function(e,t,o){"use strict";o.d(t,"e",function(){return O}),o.d(t,"s",function(){return j}),o.d(t,"j",function(){return N}),o.d(t,"k",function(){return F}),o.d(t,"h",function(){return H}),o.d(t,"t",function(){return I}),o.d(t,"r",function(){return U}),o.d(t,"q",function(){return B}),o.d(t,"n",function(){return V}),o.d(t,"o",function(){return $}),o.d(t,"i",function(){return W}),o.d(t,"a",function(){return z}),o.d(t,"c",function(){return G}),o.d(t,"m",function(){return q}),o.d(t,"p",function(){return Y}),o.d(t,"b",function(){return X}),o.d(t,"d",function(){return Q}),o.d(t,"l",function(){return J}),o.d(t,"g",function(){return K}),o.d(t,"f",function(){return Z}),o.d(t,"u",function(){return ee});var n=o(147),i=o.n(n),a=o(518),s=o.n(a),r=o(519),c=o.n(r),l=o(520),d=o.n(l),u=o(521),h=o.n(u),m=o(522),p=o.n(m),f=o(523),g=o.n(f),b=o(524),v=o.n(b),y=o(525),E=o.n(y),w=o(526),_=o.n(w),S=o(527),A=o.n(S),R=o(528),x=o.n(R),P=o(529),C=o.n(P),T=o(530),M=o.n(T),D=o(531),k=o.n(D);let L=0;const O=L++,j=L++,N=L++,F=L++,H=L++,I=L++,U=L++,B=L++,V=L++,$=L++,W=L++,z=L++,G=L++,q=L++,Y=L++,X=L++,Q=L++,J=L++,K=L++,Z=L++;class ee{constructor(){this.pendingEffects=[],this.audioContext=THREE.AudioContext.getContext();const e=[[O,i.a],[j,i.a],[N,i.a],[F,i.a],[H,i.a],[I,i.a],[U,s.a],[B,c.a],[V,d.a],[$,h.a],[W,p.a],[z,g.a],[G,v.a],[q,E.a],[Y,_.a],[X,A.a],[Q,x.a],[J,C.a],[K,k.a],[Z,M.a]],t=new Map,o=e=>{let o=t.get(e);return o||(o=fetch(e).then(e=>e.arrayBuffer()).then(e=>(function(e,t){return new Promise((o,n)=>{e.decodeAudioData(t,o,n)})})(this.audioContext,e)),t.set(e,o)),o};this.sounds=new Map,e.map(([e,t])=>{o(t).then(t=>{this.sounds.set(e,t)})})}enqueueSound(e,t){const o=this.sounds.get(e);if(!o)return null;const n=this.audioContext.createBufferSource();return n.buffer=o,n.connect(this.audioContext.destination),n.loop=t,this.pendingEffects.push(n),n}playSoundOneShot(e){return this.enqueueSound(e,!1)}playSoundLooped(e){return this.enqueueSound(e,!0)}playSoundLoopedWithGain(e){const t=this.sounds.get(e);if(!t)return null;const o=this.audioContext.createBufferSource(),n=this.audioContext.createGain();return o.buffer=t,o.connect(n),n.connect(this.audioContext.destination),o.loop=!0,this.pendingEffects.push(o),{gain:n,source:o}}stopSoundNode(e){const t=this.pendingEffects.indexOf(e);-1!==t?this.pendingEffects.splice(t,1):e.stop()}tick(){for(let e=0;e<this.pendingEffects.length;e++)this.pendingEffects[e].start();this.pendingEffects.length=0}}},2489:function(e,t){e.exports={"loading-text":"scene__loading-text__2zWvK",loadingText:"scene__loading-text__2zWvK"}},2491:function(e,t){e.exports={tweetButton:"scene-ui__tweetButton__NAR59",createButton:"scene-ui__createButton__1DQtQ",optionsButton:"scene-ui__optionsButton__lzUHO",ui:"scene-ui__ui__3JHPz",logoTagline:"scene-ui__logoTagline___LR3I",whiteOverlay:"scene-ui__whiteOverlay__1Pz3I",grid:"scene-ui__grid__34j9h",mainPanel:"scene-ui__mainPanel__IuYxi",logo:"scene-ui__logo__26JnS",info:"scene-ui__info__3Nznh",name:"scene-ui__name__2-7V_",attribution:"scene-ui__attribution__3nlIi",screenshot:"scene-ui__screenshot__279rF",screenshotHidden:"scene-ui__screenshotHidden__3nHWx",spoke:"scene-ui__spoke___KrWT",madeWith:"scene-ui__madeWith__A5stW",createButtons:"scene-ui__createButtons__1COLQ",unavailable:"scene-ui__unavailable__21hgO"}},27:function(e,t,o){"use strict";o.d(t,"a",function(){return i});const n=new URLSearchParams(location.search);function i(e){const t=n.get(e);return""===t||/1|on|true|yes/i.test(t)}},273:function(e,t,o){"use strict";function n(e,t){for(;e&&(!e.components||!e.components[t]);)e=e.parentNode;return e}o.d(t,"a",function(){return n})},286:function(e,t,o){"use strict";o.d(t,"a",function(){return a}),o.d(t,"b",function(){return s});const n=function(){const e=new THREE.Box3;return function(t,o){return o.makeEmpty(),t.traverse(t=>{const n=t.geometry;null!=n&&(null==n.boundingBox&&n.computeBoundingBox(),o.union(e.copy(n.boundingBox).applyMatrix4(t.matrixWorld)))}),o}}(),i=new THREE.Euler;function a(e,t){const o=new THREE.Box3;return i.copy(e.object3D.rotation),e.object3D.rotation.set(0,0,0),e.object3D.updateMatrices(!0,!0),t.updateMatrices(!0,!0),t.updateMatrixWorld(!0),n(t,o),o.isEmpty()||(e.object3D.worldToLocal(o.min),e.object3D.worldToLocal(o.max),e.object3D.rotation.copy(i),e.object3D.matrixNeedsUpdate=!0),t.matrixWorldNeedsUpdate=!0,t.updateMatrices(),o}function s(e,t){if(t.isEmpty())return 1;const{max:o,min:n}=t,i=Math.abs(o.x-n.x),a=Math.abs(o.y-n.y),s=Math.abs(o.z-n.z);return e/Math.max(i,a,s)}},33:function(e,t,o){"use strict";var n=o(21);var i={en:{"auth.verified-title":"E-Mail Verified!","auth.verified":"Your email has been verified!\nYou can now close this browser tab and return to Hubs.","auth.spoke-verified":"You email has been verified!\nYou can now close this browser tab and return to Spoke.","sign-in.prompt":"Sign in to pin objects in rooms.","sign-in.auth-started":"Email sent!\n\nTo continue, go click on the link in the email using your phone, tablet, or PC.","sign-in.pin":"You'll need to sign in to pin objects.","sign-in.pin-complete":"You are now signed in.","sign-in.unpin":"You'll need to sign in to un-pin objects.","sign-in.unpin-complete":"You are now signed in.","sign-in.change-scene":"You'll need to sign in to change the scene.","sign-in.change-scene-complete":"You are now signed in.","sign-in.rename-room":"You'll need to sign in to rename axon park.","sign-in.rename-room-complete":"You are now signed in.","sign-in.close-room":"You'll need to sign in to close axon park.","sign-in.close-room-complete":"You are now signed in.","sign-in.mute-user":"You'll need to sign in to mute other users.","sign-in.mute-user-complete":"You are now signed in.","sign-in.kick-user":"You'll need to sign in to kick other users.","sign-in.kick-user-complete":"You are now signed in.","sign-in.create-avatar":"You'll need to sign in to create avatars.","sign-in.create-avatar-complete":"You are now signed in.","sign-in.favorite-room":"You'll need to sign in to add this room to your favorites.","sign-in.favorite-rooms":"You'll need to sign in to add favorite rooms.","sign-in.favorite-room-complete":"You are now signed in.","sign-in.favorite-rooms-complete":"You are now signed in.","sign-in.as":"Signed in as","sign-in.in":"Sign In","sign-in.out":"Sign Out","rename-room.message":"Enter the new name for axon park.","rename-room.rename":"Rename Axon Park","close-room.message":"Closing this room will remove yourself and others from axon park, shutting it down permanently.\n\nAre you sure? This action cannot be undone.","close-room.confirm":"Yes, Close Axon Park","close-room.cancel":"Cancel","entry.room":"Immersive Education","entry.enter-room-title":"Lobby","entry.enter-room":"enter or send to device","entry.leave-room":"Leave Axon Park","entry.change-scene":"Choose a Scene","entry.in-lobby-notice":"You are viewing Axon Park from the lobby.","entry.screen-prefix":"Enter on ","entry.desktop-screen":"Screen","entry.mobile-screen":"Phone","entry.mobile-safari":"Safari","entry.generic-prefix":" ","entry.generic-medium":"Connected VR Headset","entry.generic-subtitle-desktop":"Oculus or SteamVR","entry.gearvr-prefix":"Enter on ","entry.gearvr-medium":"Gear VR","entry.choose-device":"Choose Device","entry.device-medium":"Send to Device","entry.device-subtitle-desktop":"Standalone VR or Phone","entry.device-subtitle-mobile":"Standalone VR or PC","entry.device-subtitle-vr":"Phone or PC","entry.cardboard":"Enter on Google Cardboard","entry.daydream-prefix":"Enter on ","entry.daydream-medium":"Daydream","entry.daydream-via-chrome":"Using Google Chrome","entry.invite-others":"invite others","entry.share-button":"share","entry.desktop.invite-tip":"Nobody is here yet. Share this room to get together.","entry.mobile.invite-tip":"Share to get together.","entry.invite-team-nag":"Invite a hubs team member","entry.enable-screen-sharing":"Share my desktop","entry.return-to-vr":"Return to VR","entry.enter-in-vr":"Enter in VR","entry.open-in-window":"Open in Tab","entry.lobby":"Lobby","entry.back":"Back","entry.notify_me":"Notify me when others arrive","entry.mute-on-entry":"Mute my microphone","profile.save":"Accept","profile.display_name.validation_warning":"Alphanumerics and hyphens. At least 3 characters, no more than 32","profile.header":"Name & Avatar","profile.terms_of_use":"Terms of Use","profile.privacy_notice":"Privacy Notice","profile.choose_avatar":"Browse Avatars","profile.tabs.legacy":"Default","profile.tabs.skinnable":"Custom Skin","profile.tabs.url":"Custom Model","profile.info":"Resources for creating custom avatar models can be found","profile.info-link":"here","avatar-editor.info":"Resources for creating custom avatar skins can be found","avatar-editor.info-link":"here","avatar-preview.loading-failed":"Loading failed\nPlease choose another avatar","media-browser.search-placeholder.scenes":"Search Scenes...","media-browser.search-placeholder.avatars":"Search Avatars...","media-browser.search-placeholder.videos":"Search the web...","media-browser.search-placeholder.images":"Search the web...","media-browser.search-placeholder.youtube":"Search for videos...","media-browser.search-placeholder.gifs":"Search for GIFs...","media-browser.search-placeholder.twitch":"Search for streams...","media-browser.search-placeholder.sketchfab":"Search for models...","media-browser.search-placeholder.poly":"Search for models...","media-browser.search-placeholder.base":"Search...","media-browser.favorites-header":"Favorite Rooms","media-browser.add_custom_object":"Custom URL or File","media-browser.add_custom_scene":"Custom Scene","media-browser.add_custom_avatar":"Avatar GLB URL","media-browser.privacy_policy":"Privacy Policy","media-browser.spoke":"Spoke","media-browser.report_issue":"Report Issue","media-browser.powered_by.images":"Search by Bing | ","media-browser.powered_by.videos":"Search by Bing | ","media-browser.powered_by.youtube":"Search by Google | ","media-browser.powered_by.gifs":"Search by Tenor | ","media-browser.powered_by.sketchfab":"Search by Sketchfab | ","media-browser.powered_by.poly":"Search by Google | ","media-browser.powered_by.twitch":"Search by Twitch | ","media-browser.powered_by.scenes":"Made with ","media-browser.powered_by.avatars":" ","media-browser.empty.images":"No results. Try entering a new search above.","media-browser.empty.videos":"No results. Try entering a new search above.","media-browser.empty.youtube":"No results. Try entering a new search above.","media-browser.empty.gifs":"No result. Try entering a new search above.","media-browser.empty.sketchfab":"No results. Try entering a new search above.","media-browser.empty.poly":"No results. Try entering a new search above.","media-browser.empty.twitch":"No results. Try entering a new search above.","media-browser.empty.favorites":"You don't have any favorites. Click a  to add to your favorites.","media-browser.nav_title.youtube":"YouTube","media-browser.nav_title.videos":"Videos","media-browser.nav_title.images":"Images","media-browser.nav_title.gifs":"GIFs","media-browser.nav_title.scenes":"Scenes","media-browser.nav_title.avatars":"Avatars","media-browser.nav_title.sketchfab":"Sketchfab","media-browser.nav_title.poly":"Google Poly","media-browser.nav_title.twitch":"Twitch","media-browser.create-avatar":"Create Avatar","media-browser.create-scene":"Create Scene with Spoke","media-browser.hub.joined-prefix":"Joined ","media-browser.hub.joined-prefix":"Visited ","audio.title":"Audio Setup","audio.talk_to_test":"talk","audio.click_to_test":"click","audio.subtitle-desktop":"Confirm HMD speaker output","audio.subtitle-mobile":"Earphones are recommended","audio.enter-now":"Enter Now","audio.hmd-mic-warning":"Your HMD mic is not chosen","audio.grant-title":"Grant mic permissions","audio.grant-subtitle":"Mic access needed to be heard by others","audio.granted-title":"Mic permissions granted","audio.granted-subtitle":"You can still mute yourself in-game","audio.granted-next":"Next","exit.subtitle.exited":"Your session has ended. Refresh your browser to start a new one.","exit.subtitle.closed":"This room is no longer available.","exit.subtitle.denied":"You are not permitted to join this room. Please request permission from the room creator.","exit.subtitle.kicked":"You have been kicked from axon park.","exit.subtitle.left":"You have left axon park.","exit.subtitle.full":"This room is full, please try again later.","exit.subtitle.connect_error":"Unable to connect to this room, please try again later.","exit.subtitle.version_mismatch":"The version you deployed is not available yet. Your browser will refresh in 5 seconds.","autoexit.title":"Auto-ending session in ","autoexit.title_units":" seconds","autoexit.subtitle":"You have started another session.","autoexit.cancel":"CANCEL","presence.entered_room":"entered axon park.","presence.entered_lobby":"entered axon park's lobby.","presence.join_lobby":"joined the axon park lobby.","presence.join_room":"joined axon park.","presence.leave":"left.","presence.name_change":"is now known as","presence.scene_change":"changed the scene to","presence.hub_name_change":"changed the name of the room to","presence.in_lobby":"Axon Park Lobby","presence.in_room":"In Axon Park","home.create_a_room":"Initialize Axon Park","home.desktop.add_pwa":"Install Desktop App","home.mobile.add_pwa":"Add to Home Screen","home.take_a_tour":"Take a Tour","home.room_create_options":"options","home.room_create_button":"Initialize Axon Park","home.create_name.validation_warning":"Invalid name, limited to 4 to 64 characters and limited symbols.","home.join_us":"Join the Conversation","home.have_code":"Have an axon park code?","home.add_to_discord_1":"Add the","home.add_to_discord_2":"Hubs Bot","home.add_to_discord_3":"to Discord","home.create_with_spoke":"Create a Scene","home.report_issue":"Report Issues","home.source_link":"Source","home.whats_new_link":"What's New","home.spoke_link":"Spoke","home.about_link":"About","home.community_link":"Community","home.privacy_notice":"Privacy Notice","home.terms_of_use":"Terms of Use","home.get_updates":"Get Updates","home.hero_title":"A new way to get together","home.hero_blurb":n.c&&n.c.get("Motto")||"Learn together, from anywhere.\nThe future of learning is virtual.\nEqualizing access to premier quality education.","home.made_with_love":"made with  by ","home.environment_author_by":" by ","dialog.close":"close","mailing_list.privacy_label":"I'm okay with Mozilla handling my info as explained in","mailing_list.privacy_link":"this Privacy Notice","link.link_page_header_entry":"Enter your code:","link.link_page_header_headset":"Enter Send to Device code:","link.linking_a_headset":"Have a letter code?","link.try_again":"We couldn't find that code.\nPlease try again.","help.report_issue":"Report an Issue","scene.logo_tagline":"A new way to get together","scene.create_button":"Create a room with this scene","scene.tweet_button":"Share on Twitter","scene.unavailable":"This scene is no longer available.","link.in_your_browser":"In your device's web browser, go to:","link.enter_code":"Then, enter this one-time letter code:","link.do_not_close":"Your account and avatar will be transferred to the device.\nKeep this page open to use this code.","link.connect_headset":"Send to Device","link.cancel":"cancel","invite.enter_via":"Enter via ","invite.enter_via_modal":"Others may enter via ","invite.tweet":"tweet","invite.and_enter_code":" with code:","invite.or_visit":"or share permalink","invite.or_visit_modal":"or by visiting permalink","invite.embed":"or embed on a page","invite.embed-tip":"Please be mindful of where you embed a Hubs room.\nAnyone who can access the page can enter and create/remove objects.","spoke.primary_tagline":"make your space","spoke.secondary_tagline":"Create 3D social scenes for ","spoke.thank_you":"Thank you for downloading Spoke!","spoke.download_win":"Download for Windows","spoke.download_macos":"Download for Mac","spoke.download_linux":"Download for Linux","spoke.download_unsupported":"View Releases","spoke.browse_all_versions":"Browse All Versions","spoke.beginner_tutorial_button":"Learn Spoke in 5 Minutes","spoke.advanced_tutorial_button":"Advanced Spoke in 10 minutes","spoke.play_button":"Learn Spoke in 5 Minutes","commands.fly":"Toggle fly mode.","commands.grow":"Increase your avatar's size.","commands.shrink":"Decrease your avatar's size.","commands.scene":"Change the scene.","commands.rename":"Rename the room.","commands.help":"Show help.","commands.leave":"Disconnect from axon park.","commands.duck":"The duck tested well. Quack.","commands.capture":"Capture a 15 second video.","commands.debug":"Toggle physics debug rendering.","commands.vrstats":"Toggle stats in VR.","settings.change-avatar":"Set Name & Avatar","settings.change-scene":"Choose a Scene","settings.favorites":"Favorite Rooms","settings.rename-room":"Set Axon Park Name...","settings.close-room":"Close Axon Park...","settings.room-info":"Axon Park Info","settings.create-room":"New Axon Park...","settings.create-scene":"Get Spoke","settings.send-feedback":"Send Feedback","settings.whats-new":"What's New","settings.features":"Help","settings.controls":"Controls","settings.community":"Join Discord","settings.tips":"Show Tips","settings.report":"Report Issue","settings.terms":"Terms of Use","settings.privacy":"Privacy Notice","settings.help":"Help","settings.row-profile":"You","settings.row-room":"Axon Park","tips.mobile.video_share_mode":"Tap to stop sharing video.","tips.mobile.pen_mode":"Tap icon again to end drawing.","tips.mobile.mute_mode":"You are muted. Tap to unmute.","tips.mobile.freeze_mode":"Two-finger tap to hide menus.","tips.mobile.look":"Welcome!  Tap and drag to look around.","tips.mobile.locomotion":"Great! To move, pinch with two fingers.","tips.mobile.spawn_menu-pre":"Use the ","tips.mobile.spawn_menu-post":"at the top to create objects.","tips.mobile.freeze_gesture":"Two-finger tap to show menus.","tips.mobile.object_grab":"Drag an object to move or throw it.","tips.mobile.object_rotate_button-pre":"Tap and drag ","tips.mobile.object_rotate_button-post":" to rotate.","tips.mobile.object_scale_button-pre":"Tap and drag ","tips.mobile.object_scale_button-post":" to scale.","tips.mobile.object_recenter_button-pre":"Tap ","tips.mobile.object_recenter_button-post":" to have the object face you.","tips.mobile.object_pin":"Pin an object to save it to axon park.","tips.mobile.object_pin":"Pin an object to save it to axon park.","tips.mobile.invite":"Use the Invite button to share axon park.","tips.desktop.video_share_mode":"You're streaming. Select again to stop sharing video.","tips.desktop.pen_mode":"Press ESC or right click to drop pen. Ctrl-Z to undo.","tips.desktop.mirror_mode":"Press ESC to end camera mirroring.","tips.desktop.mute_mode":"You are muted. Click or press M to un-mute.","tips.desktop.look":"Welcome to Hubs!  Click and drag to look around.","tips.desktop.locomotion":"Great! Now, use the W A S D keys to move. Hold shift to boost.","tips.desktop.turning":"Perfect. Use the Q and E keys to rotate.","tips.desktop.spawn_menu-pre":"To create objects, click the ","tips.desktop.spawn_menu-post":"button at the top of the screen, or press Ctrl 1 through 7.","tips.desktop.freeze_gesture":"Press and hold spacebar to show object menus.","tips.desktop.menu_hover":"Now, point the cursor at an object to show the menu.","tips.desktop.object_grab":"Click and drag an object to move it. Or, flick to throw it!","tips.desktop.object_pin":"Pin an object to save it to axon park.","tips.desktop.object_zoom":"Scroll to move this object towards and away from you.","tips.desktop.object_rotate_button-pre":"Click and drag ","tips.desktop.object_rotate_button-post":" to rotate the object.","tips.desktop.object_scale_button-pre":"Click and drag ","tips.desktop.object_scale_button-post":" to scale the object.","tips.desktop.object_recenter_button-pre":"Click ","tips.desktop.object_recenter_button-post":" to rotate the object to face you. Helpful if you drop it!","tips.desktop.object_scale":"Hold shift and scroll to scale it bigger and smaller.","tips.desktop.pen_color":"Use Shift-Q and Shift-E to change the pen color.","tips.desktop.pen_size":"Hold Shift and scroll to change the pen size.","tips.desktop.invite":"Nobody else is here. Use the Share button at the top to share this room.","tips.desktop.watching":"You're in the lobby. Others cannot see or hear you.","tips.watching.back":"Enter Room","tips.mobile.watching":"You're in the lobby.","tips.watching-exit":"Back","loader.entering_lobby":"Entering lobby...","loader.loading":"Loading ","loader.object":"object","loader.objects":"objects","change-scene-dialog.change-scene":"Change Scene","change-scene-dialog.create-in-spoke":"Or, create a new scene using Spoke.","change-scene-dialog.new-spoke-project":"Launch Spoke","avatar-url-dialog.apply":"Apply","interstitial.prompt":"Continue","feedback.prompt":"Feedback","hide-ui.prompt":"Hide All","discord.primary_tagline":"Share a virtual room with your community.\nWatch videos, play with 3D objects, or just hang out.","discord.secondary_tagline":"No downloads or sign up. Full VR support too.","discord.contact_us":"Invite Bot to Server","discord.community_link":"Hubs Discord","discord.splash_tag":"Designed for serious businessing.","client-info.kick-button":"Kick","client-info.hide-button":"Hide","client-info.unhide-button":"Un-hide ","client-info.mute-button":"Mute","client-info.cancel":"Cancel","avatar-landing.select":"Select","avatar-landing.selected":"This is your current avatar","leave-room-dialog.join-room.message":"Joining a new room will leave this one. Are you sure?","leave-room-dialog.join-room.confirm":"Join Room","leave-room-dialog.create-room.message":"Creating a new room will leave this one. Are you sure?","leave-room-dialog.create-room.confirm":"Leave Room","embed.load-button":"Load Room","embed.presence-warning":"This room is embedded, so may be visible to visitors on other websites."}};o.d(t,"a",function(){return s}),o.d(t,"b",function(){return r});const a=(navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage).toLowerCase().split(/[_-]+/)[0],s=i[a]&&a||"en",r=i[s]||i.en},341:function(e,t,o){"use strict";var n=o(227),i=o.n(n),a=o(27);const s=new URLSearchParams(location.search),r=Object(a.a)("debug"),c=s.get("log_filter")||r&&"naf-janus-adapter:*";c&&i.a.enable(c)},375:function(e,t,o){"use strict";function n(e){e.components["animation-mixer"]&&(e.querySelector("[loop-animation]")||e.setAttribute("loop-animation",""))}o.d(t,"a",function(){return n})},38:function(e,t,o){"use strict";var n,i,a,s=o(63),r=o(10),c=o(202),l=o.n(c),d=o(41);function u(e,t,o,n,i,a,s){try{var r=e[a](s),c=r.value}catch(e){return void o(e)}r.done?t(c):Promise.resolve(c).then(n,i)}class h{constructor(e=THREE.DefaultLoadingManager){this.manager=e}load(e,t,o,n){const i=new THREE.Texture;return this.loadTextureAsync(i,e,o).then(t).catch(n),i}loadTextureAsync(e,t,o){var n,i=this;return(n=function*(){let n;void 0!==window.createImageBitmap?(n=new THREE.ImageBitmapLoader(i.manager),e.flipY=!1):n=new THREE.ImageLoader(i.manager),n.setCrossOrigin(i.crossOrigin),n.setPath(i.path);const a=i.manager.resolveURL(t);return e.image=yield function(e,t,o){return new Promise((n,i)=>e.load(t,n,o,i))}(n,t,o),THREE.Cache.remove(a),e.needsUpdate=!0,e.onUpdate=function(){e.image.close&&e.image.close(),delete e.image},e},function(){var e=this,t=arguments;return new Promise(function(o,i){var a=n.apply(e,t);function s(e){u(a,o,i,s,r,"next",e)}function r(e){u(a,o,i,s,r,"throw",e)}s(void 0)})})()}setCrossOrigin(e){return this.crossOrigin=e,this}setPath(e){return this.path=e,this}}a="anonymous",(i="crossOrigin")in(n=h)?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a;var m=o(187);function p(e,t,o,n,i,a,s){try{var r=e[a](s),c=r.value}catch(e){return void o(e)}r.done?t(c):Promise.resolve(c).then(n,i)}function f(e){return function(){var t=this,o=arguments;return new Promise(function(n,i){var a=e.apply(t,o);function s(e){p(a,n,i,s,r,"next",e)}function r(e){p(a,n,i,s,r,"throw",e)}s(void 0)})}}o.d(t,"e",function(){return v}),o.d(t,"h",function(){return y}),o.d(t,"a",function(){return w}),o.d(t,"d",function(){return _}),o.d(t,"c",function(){return S}),o.d(t,"f",function(){return R}),o.d(t,"g",function(){return x}),o.d(t,"b",function(){return P});const g=Object(r.h)("/api/v1/media"),b=new Map,v=function(){var e=f(function*(e,t){const o=`${e}|${t}`;if(b.has(o))return b.get(o);const n=fetch(g,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({media:{url:e,index:t}})}).then(function(){var t=f(function*(t){if(!t.ok){const o=`Error resolving url "${e}":`;try{const e=yield t.text();throw new Error(o+" "+e)}catch(e){throw new Error(o+" "+t.statusText)}}return t.json()});return function(e){return t.apply(this,arguments)}}());return b.set(o,n),n});return function(t,o){return e.apply(this,arguments)}}(),y=e=>{const t=new FormData;return t.append("media",e),t.append("promotion_mode","with_token"),fetch(g,{method:"POST",body:t}).then(e=>e.json())};let E=0;const w=(e,t,o,n=null,i=!1,a=!1,r=!0)=>{const c=AFRAME.scenes[0],l=document.createElement("a-entity");l.id="interactable-media-"+E++,l.setAttribute("networked",{template:t});const d=e instanceof File;l.setAttribute("media-loader",{resize:a,resolve:i,animate:r,src:"string"==typeof e?e:"",contentSubtype:n,fileIsOwned:!d}),l.object3D.matrixNeedsUpdate=!0,c.appendChild(l);const u=setTimeout(()=>{c.emit("media-loading",{src:e})},100);["model-loaded","video-loaded","image-loaded"].forEach(t=>{l.addEventListener(t,f(function*(){clearTimeout(u),c.emit("media-loaded",{src:e})}),{once:!0})});const h=new Promise(function(t){d?function(e,t){const o=new FileReader;o.onload=function(e){const o=new DataView(e.target.result);if(65496!=o.getUint16(0,!1))return t(-2);const n=o.byteLength;let i=2;for(;i<n;){if(o.getUint16(i+2,!1)<=8)return t(-1);const e=o.getUint16(i,!1);if(i+=2,65505==e){if(1165519206!=o.getUint32(i+=2,!1))return t(-1);const e=18761==o.getUint16(i+=6,!1);i+=o.getUint32(i+4,e);const n=o.getUint16(i,e);i+=2;for(let a=0;a<n;a++)if(274==o.getUint16(i+12*a,e))return t(o.getUint16(i+12*a+8,e))}else{if(65280!=(65280&e))break;i+=o.getUint16(i,!1)}}return t(-1)},o.readAsArrayBuffer(e)}(e,e=>{t(e)}):t(1)});return d?y(e).then(e=>{const t=new URL(e.raw);t.searchParams.set("token",e.meta.access_token),l.setAttribute("media-loader",{resolve:!1,src:t.href,fileId:e.file_id}),window.APP.store.update({uploadPromotionTokens:[{fileId:e.file_id,promotionToken:e.meta.promotion_token}]})}).catch(e=>{console.error("Media upload failed",e),l.setAttribute("media-loader",{src:"error"})}):e instanceof MediaStream&&l.setAttribute("media-loader",{src:`hubs://clients/${NAF.clientId}/video`}),o&&l.addEventListener("media_resolved",({detail:e})=>{const t=Object(s.c)(o,e.contentType,e.src);c.emit("object_spawned",{objectType:t})}),{entity:l,orientation:h}};function _(e){const t=/\bskinning_vertex\b/,o=/\bgl_FragColor\b/,n=[],i=AFRAME.scenes[0].systems["hubs-systems"].batchManagerSystem;return e.traverse(a=>{a.material&&(a.material=Object(d.b)(a,s=>{if(!m.a.includes(s.type))return s;if(a.el.classList.contains("ui")||a.el.classList.contains("hud")||a.el.getAttribute("text-button"))return s;i.meshToEl.set(a,e.el);const r=s.clone();return r.onBeforeCompile=e=>{if(!t.test(e.vertexShader))return;e.uniforms.hubs_IsFrozen={value:!1},e.uniforms.hubs_EnableSweepingEffect={value:!1},e.uniforms.hubs_SweepParams={value:[0,0]},e.uniforms.hubs_InteractorOnePos={value:[0,0,0]},e.uniforms.hubs_InteractorTwoPos={value:[0,0,0]},e.uniforms.hubs_HighlightInteractorOne={value:!1},e.uniforms.hubs_HighlightInteractorTwo={value:!1},e.uniforms.hubs_Time={value:0};const i=e.vertexShader.split("\n"),a=i.findIndex(e=>t.test(e));i.splice(a+1,0,"\n        if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\n          vec4 wt = modelMatrix * vec4(transformed, 1);\n\n          // Used in the fragment shader below.\n          hubs_WorldPosition = wt.xyz;\n        }\n      "),i.unshift("varying vec3 hubs_WorldPosition;"),i.unshift("uniform bool hubs_IsFrozen;"),i.unshift("uniform bool hubs_HighlightInteractorOne;"),i.unshift("uniform bool hubs_HighlightInteractorTwo;"),e.vertexShader=i.join("\n");const s=e.fragmentShader.split("\n"),r=s.findIndex(e=>o.test(e));s.splice(r+1,0,l.a),s.unshift("varying vec3 hubs_WorldPosition;"),s.unshift("uniform bool hubs_IsFrozen;"),s.unshift("uniform bool hubs_EnableSweepingEffect;"),s.unshift("uniform vec2 hubs_SweepParams;"),s.unshift("uniform bool hubs_HighlightInteractorOne;"),s.unshift("uniform vec3 hubs_InteractorOnePos;"),s.unshift("uniform bool hubs_HighlightInteractorTwo;"),s.unshift("uniform vec3 hubs_InteractorTwoPos;"),s.unshift("uniform float hubs_Time;"),e.fragmentShader=s.join("\n"),n.push(e.uniforms)},r.needsUpdate=!0,r}))}),n}function S(e){return window.APP.store.state.uploadPromotionTokens.find(t=>t.fileId===e)}const A=new THREE.Vector3;function R(e,t,o,n,i=!1){const{entity:a,orientation:s}=w(t,"#interactable-media",void 0,o,!1),r=e.object3D.position;a.object3D.position.set(r.x,r.y,r.z),a.object3D.rotation.copy(e.object3D.rotation),i&&a.object3D.rotateY(Math.PI);const c=n%6+3;return A.set(.75*Math.cos(2*Math.PI*(c/6)),.75*Math.sin(2*Math.PI*(c/6)),.001*c-.05),e.object3D.localToWorld(A),a.object3D.visible=!1,a.addEventListener("image-loaded",()=>{a.object3D.visible=!0,a.setAttribute("animation__photo_pos",{property:"position",dur:800,from:{x:r.x,y:r.y,z:r.z},to:{x:A.x,y:A.y,z:A.z},easing:"easeOutElastic"})},{once:!0}),a.object3D.matrixNeedsUpdate=!0,a.addEventListener("media_resolved",()=>{e.emit("photo_taken",a.components["media-loader"].data.src)},{once:!0}),{entity:a,orientation:s}}const x=(new h).setCrossOrigin("anonymous");function P(e){return C.apply(this,arguments)}function C(){return(C=f(function*(e){const t=new THREE.Texture;try{yield x.loadTextureAsync(t,e)}catch(t){throw new Error(`'${e}' could not be fetched (Error code: ${t.status}; Response: ${t.statusText})`)}return t.encoding=THREE.sRGBEncoding,t.anisotropy=4,t})).apply(this,arguments)}},40:function(e,t,o){"use strict";o.d(t,"b",function(){return i}),o.d(t,"c",function(){return a}),o.d(t,"a",function(){return r}),o.d(t,"d",function(){return c});const n=new THREE.Vector3;new THREE.Quaternion;function i(e,t){return e.updateMatrices(),t.setFromMatrixPosition(e.matrixWorld),t}function a(e,t){return e.updateMatrices(),e.matrixWorld.decompose(n,t,n),t}function s(e){e.map&&e.map.dispose(),e.lightMap&&e.lightMap.dispose(),e.bumpMap&&e.bumpMap.dispose(),e.normalMap&&e.normalMap.dispose(),e.specularMap&&e.specularMap.dispose(),e.envMap&&e.envMap.dispose(),e.dispose()}function r(e){if(e instanceof THREE.Mesh&&(e.geometry&&e.geometry.dispose(),e.material)){let t;e.material instanceof THREE.MeshFaceMaterial||e.material instanceof THREE.MultiMaterial?t=e.material.materials:e.material instanceof Array&&(t=e.material),t?t.forEach(s):s(e.material)}}function c(e,t){e.matrixWorld.copy(t),e.matrix=e.matrix.getInverse(e.parent.matrixWorld).multiply(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale)}},41:function(e,t,o){"use strict";function n(e,t){e.material&&(Array.isArray(e.material)?e.material.forEach(t):t(e.material))}function i(e,t){if(e.material)return Array.isArray(e.material)?e.material.map(t):t(e.material)}o.d(t,"a",function(){return n}),o.d(t,"b",function(){return i})},516:function(e,t,o){"use strict";o.d(t,"a",function(){return i});const n=AFRAME.THREE;function i(){if(/Android.+Firefox/.test(navigator.userAgent)){const e=WebGLRenderingContext.prototype.getExtension,t=function(){const e=new n.WebGLRenderer,t=new n.Scene,o=new Float32Array(16),i=new n.DataTexture(o,2,2,n.RGBAFormat,n.FloatType),a=new n.Mesh(new n.PlaneBufferGeometry(1,1),new n.MeshBasicMaterial({map:i}));a.material.map.needsUpdate=!0,t.add(a),e.render(t,new n.Camera);const s=0===e.context.getError();return e.dispose(),s}();WebGLRenderingContext.prototype.getExtension=function(o){return"OES_texture_float"!==o||t?e.call(this,o):null}}}},517:function(e,t,o){e.exports=o.p+"assets/LoadingObject_Atom-7dcc3b81897e68b740c1cf12b6cf4c3f.glb"},518:function(e,t,o){e.exports=o.p+"assets/sfx/teleport-loop-84e2caa4f62e5c6d6ce339b0c715c06d.mp3"},519:function(e,t,o){e.exports=o.p+"assets/sfx/quickTurn-cda89edb1a7a32e4442cac70cd2694be.mp3"},520:function(e,t,o){e.exports=o.p+"assets/sfx/tap_mellow-673398d6e97818ec4b675708d460bd0f.mp3"},521:function(e,t,o){e.exports=o.p+"assets/sfx/PenSpawn-aac1f534773040f0fafa41e9db76017b.mp3"},522:function(e,t,o){e.exports=o.p+"assets/sfx/PenDraw1-ddbdc17a6beefecbca2685c8c9d0d2d5.mp3"},523:function(e,t,o){e.exports=o.p+"assets/sfx/PicSnapHey-0228ddd197e5a6d88f7bcd2ceb340f8e.mp3"},524:function(e,t,o){e.exports=o.p+"assets/sfx/welcome-0083300978d5dd05eaa376f65761da47.mp3"},525:function(e,t,o){e.exports=o.p+"assets/sfx/quack-1f18502834f8f1db43990b769c2ab193.mp3"},526:function(e,t,o){e.exports=o.p+"assets/sfx/specialquack-6d1a192a6092e8dfed5d3de063755ee2.mp3"},527:function(e,t,o){e.exports=o.p+"assets/sfx/pop-5784f3bcfaf98637147737448d6df8df.mp3"},528:function(e,t,o){e.exports=o.p+"assets/sfx/Eb_blip-8d7302990e83d6798400a6027dce3936.mp3"},529:function(e,t,o){e.exports=o.p+"assets/sfx/tack-0d55b064794faaa1733fcf6bc89cad0c.mp3"},530:function(e,t,o){e.exports=o.p+"assets/sfx/A_bendUp-de32e556413bb2a527fb514984738c70.mp3"},531:function(e,t,o){e.exports=o.p+"assets/sfx/suspense-f27c64840e5ede36ec694c22a030615c.mp3"},532:function(e,t,o){e.exports=o.p+"assets/waternormals-4418dde3f6abc21dc32506acf5f5b093.jpg"},54:function(e,t,o){"use strict";var n=o(168),i=o(114),a=o(86),s=o.n(a),r=o(142),c=o.n(r),l=o(82),d=o(72);const u=["Baers-Pochard","Baikal-Teal","Barrows-Goldeneye","Blue-Billed","Blue-Duck","Blue-Winged","Brown-Teal","Bufflehead","Canvasback","Cape-Shoveler","Chestnut-Teal","Chiloe-Wigeon","Cinnamon-Teal","Comb-Duck","Common-Eider","Common-Goldeneye","Common-Merganser","Common-Pochard","Common-Scoter","Common-Shelduck","Cotton-Pygmy","Crested-Duck","Crested-Shelduck","Eatons-Pintail","Falcated","Ferruginous","Freckled-Duck","Gadwall","Garganey","Greater-Scaup","Green-Pygmy","Grey-Teal","Hardhead","Harlequin","Hartlaubs","Hooded-Merganser","Hottentot-Teal","Kelp-Goose","King-Eider","Lake-Duck","Laysan-Duck","Lesser-Scaup","Long-Tailed","Maccoa-Duck","Mallard","Mandarin","Marbled-Teal","Mellers-Duck","Merganser","Northern-Pintail","Orinoco-Goose","Paradise-Shelduck","Plumed-Whistler","Puna-Teal","Pygmy-Goose","Radjah-Shelduck","Red-Billed","Red-Crested","Red-Shoveler","Ring-Necked","Ringed-Teal","Rosy-Billed","Ruddy-Shelduck","Salvadoris-Teal","Scaly-Sided","Shelduck","Shoveler","Silver-Teal","Smew","Spectacled-Eider","Spot-Billed","Spotted-Whistler","Steamerduck","Stellers-Eider","Sunda-Teal","Surf-Scoter","Tufted-Duck","Velvet-Scoter","Wandering-Whistler","Whistling-duck","White-Backed","White-Cheeked","White-Winged","Wigeon","Wood-Duck","Yellow-Billed"];function h(e){return e[Math.floor(Math.random()*e.length)]}const m=d.a.map(e=>e.id);function p(){return{avatarId:h(m)}}function f(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),n.forEach(function(t){g(e,t,o[t])})}return e}function g(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,"a",function(){return w}),o.d(t,"b",function(){return _});const b="___hubs_store",v=Symbol(),y="ret-oauth-flow-account-credentials",E=new n.Validator,w={id:"/HubsStore",definitions:{profile:{type:"object",additionalProperties:!1,properties:{displayName:{type:"string",pattern:"^[A-Za-z0-9-]{3,32}$"},avatarId:{type:"string"},personalAvatarId:{type:"string"}}},credentials:{type:"object",additionalProperties:!1,properties:{token:{type:["null","string"]},email:{type:["null","string"]}}},activity:{type:"object",additionalProperties:!1,properties:{hasFoundFreeze:{type:"boolean"},hasChangedName:{type:"boolean"},hasAcceptedProfile:{type:"boolean"},lastEnteredAt:{type:"string"},hasPinned:{type:"boolean"},hasRotated:{type:"boolean"},hasRecentered:{type:"boolean"},hasScaled:{type:"boolean"},hasHoveredInWorldHud:{type:"boolean"},hasOpenedShare:{type:"boolean"},entryCount:{type:"number"}}},settings:{type:"object",additionalProperties:!1,properties:{lastUsedMicDeviceId:{type:"string"}}},confirmedDiscordRooms:{type:"array",items:{type:"string"}},confirmedBroadcastedRooms:{type:"array",items:{type:"string"}},uploadPromotionTokens:{type:"array",items:{type:"object",additionalProperties:!1,properties:{fileId:{type:"string"},promotionToken:{type:"string"}}}},creatorAssignmentTokens:{type:"array",items:{type:"object",additionalProperties:!1,properties:{hubId:{type:"string"},creatorAssignmentToken:{type:"string"}}}},embedTokens:{type:"array",items:{type:"object",additionalProperties:!1,properties:{hubId:{type:"string"},embedToken:{type:"string"}}}},onLoadActions:{type:"array",items:{type:"object",additionalProperties:!1,properties:{action:{type:"string"},args:{type:"object"}}}}},type:"object",properties:{profile:{$ref:"#/definitions/profile"},credentials:{$ref:"#/definitions/credentials"},activity:{$ref:"#/definitions/activity"},settings:{$ref:"#/definitions/settings"},confirmedDiscordRooms:{$ref:"#/definitions/confirmedDiscordRooms"},confirmedBroadcastedRooms:{$ref:"#/definitions/confirmedBroadcastedRooms"},uploadPromotionTokens:{$ref:"#/definitions/uploadPromotionTokens"},creatorAssignmentTokens:{$ref:"#/definitions/creatorAssignmentTokens"},embedTokens:{$ref:"#/definitions/embedTokens"},onLoadActions:{$ref:"#/definitions/onLoadActions"}},additionalProperties:!1};class _ extends l.a{constructor(){super(),g(this,"init",()=>{this.update({profile:f({},p(),this.state.profile||{})}),this.state.activity.hasChangedName||this.update({profile:{displayName:`${h(u)}-${Math.floor(1e4+1e4*Math.random())}`}})}),g(this,"resetToRandomLegacyAvatar",()=>{this.update({profile:f({},this.state.profile||{},p())})}),null===localStorage.getItem(b)&&localStorage.setItem(b,JSON.stringify({})),window.addEventListener("storage",e=>{e.key===b&&(delete this[v],this.dispatchEvent(new CustomEvent("statechanged")))}),this.update({activity:{},settings:{},credentials:{},profile:{},confirmedDiscordRooms:[],confirmedBroadcastedRooms:[],uploadPromotionTokens:[],creatorAssignmentTokens:[],embedTokens:[],onLoadActions:[]});const e=s.a.getJSON(y);e&&(this.update({credentials:e}),this.resetToRandomLegacyAvatar(),s.a.remove(y))}get state(){return this.hasOwnProperty(v)||(this[v]=JSON.parse(localStorage.getItem(b))),this[v]}get credentialsAccountId(){return this.state.credentials.token?c()(this.state.credentials.token).sub:null}resetConfirmedBroadcastedRooms(){this.clearStoredArray("confirmedBroadcastedRooms")}resetTipActivityFlags(){this.update({activity:{hasRotated:!1,hasPinned:!1,hasRecentered:!1,hasScaled:!1,entryCount:0}})}bumpEntryCount(){const e=this.state.activity.entryCount||0;this.update({activity:{entryCount:e+1}})}enqueueOnLoadAction(e,t){this.update({onLoadActions:[{action:e,args:t}]})}executeOnLoadActions(e){for(let t=0;t<this.state.onLoadActions.length;t++){const{action:o,args:n}=this.state.onLoadActions[t];"emit_scene_event"===o&&e.emit(n.event,n.detail)}this.clearOnLoadActions()}clearOnLoadActions(){this.clearStoredArray("onLoadActions")}clearStoredArray(e){const t={};t[e]=[],this.update(t,{arrayMerge:(e,t)=>t})}update(e,t){const o=Object(i.default)(this.state,e,t),{valid:n}=E.validate(o,w);if(!n)throw new Error("Write to store failed schema validation.");return localStorage.setItem(b,JSON.stringify(o)),delete this[v],void 0!==e.profile&&this.dispatchEvent(new CustomEvent("profilechanged")),this.dispatchEvent(new CustomEvent("statechanged")),o}}},585:function(e,t,o){e.exports=o.p+"assets/images/hub-preview-white-ccefba3b70ae589a0ca5ae3230c39299.png"},63:function(e,t,o){"use strict";o.d(t,"a",function(){return n}),o.d(t,"b",function(){return i}),o.d(t,"c",function(){return c});const n={URL:1,FILE:2,CLIPBOARD:3,SPAWNER:4},i={URL_IMAGE:0,URL_VIDEO:1,URL_MODEL:2,URL_PDF:3,URL_AUDIO:4,FILE_IMAGE:8,FILE_VIDEO:9,FILE_MODEL:10,FILE_PDF:11,FILE_AUDIO:12,CLIPBOARD_IMAGE:16,CLIPBOARD_VIDEO:17,CLIPBOARD_MODEL:18,CLIPBOARD_PDF:19,CLIPBOARD_AUDIO:20,SPAWNER_IMAGE:24,SPAWNER_VIDEO:25,SPAWNER_MODEL:26,SPAWNER_PDF:27,SPAWNER_AUDIO:28,CAMERA:30,UNKNOWN:31};function a(e,t,o,i,a){return e===n.URL?t:e===n.FILE?o:e===n.CLIPBOARD?i:a}const s={"image/":[i.URL_IMAGE,i.FILE_IMAGE,i.CLIPBOARD_IMAGE,i.SPAWNER_IMAGE],"model/":[i.URL_MODEL,i.FILE_MODEL,i.CLIPBOARD_MODEL,i.SPAWNER_MODEL],"application/x-zip-compressed":[i.URL_MODEL,i.FILE_MODEL,i.CLIPBOARD_MODEL,i.SPAWNER_MODEL],"video/":[i.URL_VIDEO,i.FILE_VIDEO,i.CLIPBOARD_VIDEO,i.SPAWNER_VIDEO],"application/vnd.apple.mpegurl":[i.URL_VIDEO,i.FILE_VIDEO,i.CLIPBOARD_VIDEO,i.SPAWNER_VIDEO],"application/x-mpegurl":[i.URL_VIDEO,i.FILE_VIDEO,i.CLIPBOARD_VIDEO,i.SPAWNER_VIDEO],"audio/":[i.URL_AUDIO,i.FILE_AUDIO,i.CLIPBOARD_AUDIO,i.SPAWNER_AUDIO],"application/pdf":[i.URL_PDF,i.FILE_PDF,i.CLIPBOARD_PDF,i.SPAWNER_PDF]},r={".m3u8":[i.URL_VIDEO,i.FILE_VIDEO,i.CLIPBOARD_VIDEO,i.SPAWNER_VIDEO]};function c(e,t,o){for(const o in s)if(t.toLowerCase().startsWith(o)){return a(e,...s[o])}if(o)for(const t in r)if(o.toLowerCase().endsWith(t)){return a(e,...r[t])}return i.UNKNOWN}},72:function(e,t,o){"use strict";o.d(t,"a",function(){return n});const n=[{id:"botdefault",model:"https://asset-bundles-prod.reticulum.io/bots/BotDefault_Avatar-9f71f8ff22.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botdefault-thumb-42C4C7D3C01D085EAFDAC8BACE591CE6.png"},{id:"botbobo",model:"https://asset-bundles-prod.reticulum.io/bots/BotBobo_Avatar-f9740a010b.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botbobo-thumb-261278FD5831E9CD89610D15948F23E4.png"},{id:"botdom",model:"https://asset-bundles-prod.reticulum.io/bots/BotDom_Avatar-0c48bf15a5.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botdom-thumb-1160EB5E81D24F12CE643C520CE1E99E.png"},{id:"botgreg",model:"https://asset-bundles-prod.reticulum.io/bots/BotGreg_Avatar-98d39797bb.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botgreg-thumb-F2A37F14F9C342EE44DDE9B24DD9B9FC.png"},{id:"botguest",model:"https://asset-bundles-prod.reticulum.io/bots/BotGuest_Avatar-78cd857332.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botguest-thumb-F7A471250E2C10C2709325C3B02A8BBB.png"},{id:"botjim",model:"https://asset-bundles-prod.reticulum.io/bots/BotJim_Avatar-d28005a687.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botjim-thumb-A2D195C1A51A082BCED58BD172481B39.png"},{id:"botkev",model:"https://asset-bundles-prod.reticulum.io/bots/BotKev_Avatar-a95787bb51.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botkev-thumb-90746A7349E3F964C913EA612EE9A53F.png"},{id:"botpinky",model:"https://asset-bundles-prod.reticulum.io/bots/BotPinky_Avatar-b0b93f8675.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botpinky-thumb-C2E69D4479077766B988DC3EE4F30BE5.png"},{id:"botrobert",model:"https://asset-bundles-prod.reticulum.io/bots/BotRobert_Avatar-e9554880f3.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botrobert-thumb-9C33F2C752326E2CF4321EAA7BDB4E47.png"},{id:"botwoody",model:"https://asset-bundles-prod.reticulum.io/bots/BotWoody_Avatar-0140485a23.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botwoody-thumb-F1F1FA7E21301B5AC1D8872B4ED0CC56.png"}]},78:function(e,t,o){"use strict";o.d(t,"a",function(){return s});var n=o(115),i=o.n(n);const a=window.ga;function s(e,t){const o={NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}.SENTRY_DSN,n={NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}.GA_TRACKING_ID;o&&(console.log("Tracking: Sentry DSN: "+o),i.a.config(o).install()),a&&n&&(console.log("Tracking: Google Analytics ID: "+n),a("create",n,"auto"),e&&a("set","page",e),t&&a("set","title",t),a("send","pageview"))}},836:function(e,t){const o=new THREE.Vector3(0,0,0),n=new THREE.Quaternion,i=new THREE.Vector3(1,1,1),a=new THREE.Matrix4;a.identity();const s=THREE.PropertyBinding.prototype.SetterByBindingTypeAndVersioning,r=THREE.PropertyBinding.prototype.Versioning;for(let e=0;e<s.length;e++){const t=s[e][r.MatrixWorldNeedsUpdate];t&&(s[e][r.MatrixWorldNeedsUpdate]=function(){const e=t.apply(this,arguments);return this.targetObject.matrixNeedsUpdate=!0,e})}THREE.Object3D.prototype.getWorldPosition=function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new THREE.Vector3),this.updateMatrices(),e.setFromMatrixPosition(this.matrixWorld)},THREE.Object3D.prototype.getWorldQuaternion=function(){const e=new THREE.Vector3,t=new THREE.Vector3;return function(o){return void 0===o&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),o=new THREE.Quaternion),this.updateMatrices(),this.matrixWorld.decompose(e,o,t),o}}(),THREE.Object3D.getWorldScale=function(){const e=new THREE.Vector3,t=new THREE.Quaternion;return function(o){return void 0===o&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),o=new THREE.Vector3),this.updateMatrices(),this.matrixWorld.decompose(e,t,o),o}}();const c=e=>{e.matrixIsModified||(e.matrixIsModified=!0,e.cachedMatrixWorld&&(e.cachedMatrixWorld.copy(e.matrixWorld),e.matrixWorld=e.cachedMatrixWorld))},l=THREE.Object3D.prototype.updateMatrix;THREE.Object3D.prototype.updateMatrix=function(){l.apply(this,arguments),c(this)};const d=THREE.Object3D.prototype.applyMatrix;THREE.Object3D.prototype.applyMatrix=function(){d.apply(this,arguments),c(this)},THREE.Object3D.prototype.updateMatrices=function(e,t,s){this.hasHadFirstMatrixUpdate?(this.matrixNeedsUpdate||this.matrixAutoUpdate||e)&&(this.updateMatrix(),this.matrixNeedsUpdate&&(this.matrixNeedsUpdate=!1)):(this.position.equals(o)&&this.quaternion.equals(n)&&this.scale.equals(i)&&this.matrix.equals(a)||this.updateMatrix(),this.hasHadFirstMatrixUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.cachedMatrixWorld=this.matrixWorld),!s&&this.parent&&(this.parent.updateMatrices(!1,t,!1),this.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate||this.parent.childrenNeedMatrixWorldUpdate),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixIsModified?this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix):this.matrixWorld=this.parent.matrixWorld,this.childrenNeedMatrixWorldUpdate=!0,this.matrixWorldNeedsUpdate=!1)},THREE.Object3D.prototype.updateMatrixWorld=function(e,t){if(!this.visible&&!t)return;this.updateMatrices(!1,e,!0);const o=this.children,n=this.childrenNeedMatrixWorldUpdate||e;for(let e=0,i=o.length;e<i;e++)o[e].updateMatrixWorld(n,t);this.childrenNeedMatrixWorldUpdate&&(this.childrenNeedMatrixWorldUpdate=!1)},THREE.Object3D.prototype.lookAt=function(){const e=new THREE.Quaternion,t=new THREE.Matrix4,o=new THREE.Vector3,n=new THREE.Vector3;return function(i,a,s){i.isVector3?o.copy(i):o.set(i,a,s);const r=this.parent;this.updateMatrices(),n.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?t.lookAt(n,o,this.up):t.lookAt(o,n,this.up),this.quaternion.setFromRotationMatrix(t),r&&(t.extractRotation(r.matrixWorld),e.setFromRotationMatrix(t),this.quaternion.premultiply(e.inverse()))}}()},837:function(e,t,o){var n=o(300).default,i=AFRAME.components,a=AFRAME.registerComponent,s=AFRAME.utils;delete AFRAME.components.animation;var r=new THREE.Color,c=new THREE.Color,l=s.entity.getComponentProperty,d=s.entity.setComponentProperty,u={},h="color",m="components",p="object3D";function f(e){e.x=THREE.Math.degToRad(e.x),e.y=THREE.Math.degToRad(e.y),e.z=THREE.Math.degToRad(e.z)}function g(e,t,o){var n;for(n=0;n<t.length;n++)e.addEventListener(t[n],o)}function b(e,t,o){var n;for(n=0;n<t.length;n++)e.removeEventListener(t[n],o)}function v(e,t){var o,n,i;for(n=E(t),i=e,o=0;o<n.length;o++)i=i[n[o]];return i}function y(e,t,o,n){var i,a,s,r;for(t.startsWith("object3D.rotation")&&(o=THREE.Math.degToRad(o)),a=E(t),r=e,i=0;i<a.length-1;i++)r=r[a[i]];s=a[a.length-1],n!==h?r[s]=o:"r"in r[s]?(r[s].r=o.r,r[s].g=o.g,r[s].b=o.b):(r[s].x=o.r,r[s].y=o.g,r[s].z=o.b)}function E(e){return e in u?u[e]:(u[e]=e.split("."),u[e])}function w(e){return e.isRawProperty||e.property.startsWith(m)||e.property.startsWith(p)}e.exports.Component=a("animation",{schema:{autoplay:{default:!0},delay:{default:0},dir:{default:""},dur:{default:1e3},easing:{default:"easeInQuad"},elasticity:{default:400},enabled:{default:!0},from:{default:""},loop:{default:0,parse:function(e){return!0===e||"true"===e||!1!==e&&"false"!==e&&parseInt(e,10)}},property:{default:""},startEvents:{type:"array"},pauseEvents:{type:"array"},resumeEvents:{type:"array"},round:{default:!1},to:{default:""},type:{default:""},isRawProperty:{default:!1}},multiple:!0,init:function(){var e=this;this.eventDetail={name:this.attrName},this.time=0,this.animation=null,this.animationIsPlaying=!1,this.onStartEvent=this.onStartEvent.bind(this),this.beginAnimation=this.beginAnimation.bind(this),this.pauseAnimation=this.pauseAnimation.bind(this),this.resumeAnimation=this.resumeAnimation.bind(this),this.fromColor={},this.toColor={},this.targets={},this.targetsArray=[],this.updateConfigForDefault=this.updateConfigForDefault.bind(this),this.updateConfigForRawColor=this.updateConfigForRawColor.bind(this),this.config={complete:function(){e.animationIsPlaying=!1,e.el.emit("animationcomplete",e.eventDetail,!1),e.id&&e.el.emit("animationcomplete__"+e.id,e.eventDetail,!1)}}},update:function(e){var t=this.config,o=this.data;this.animationIsPlaying=!1,this.data.enabled&&o.property&&(t.autoplay=!1,t.direction=o.dir,t.duration=o.dur,t.easing=o.easing,t.elasticity=o.elasticity,t.loop=o.loop,t.round=o.round,this.createAndStartAnimation())},tick:function(e,t){this.animationIsPlaying&&(this.time+=t,this.animation.tick(this.time))},remove:function(){this.pauseAnimation(),this.removeEventListeners(),this.cancelDelayedStart()},pause:function(){this.paused=!0,this.pausedWasPlaying=this.animationIsPlaying,this.pauseAnimation(),this.removeEventListeners(),this.cancelDelayedStart()},play:function(){this.paused&&(this.paused=!1,this.addEventListeners(),this.pausedWasPlaying&&(this.resumeAnimation(),this.pausedWasPlaying=!1))},createAndStartAnimation:function(){var e=this.data;this.updateConfig(),this.animationIsPlaying=!1,this.animation=n(this.config),this.removeEventListeners(),this.cancelDelayedStart(),this.addEventListeners(),!e.autoplay||e.startEvents&&e.startEvents.length||(e.delay?this.delayTimeout=setTimeout(this.beginAnimation,e.delay):this.beginAnimation())},beginAnimation:function(){this.updateConfig(),this.time=0,this.animationIsPlaying=!0,this.stopRelatedAnimations(),this.el.emit("animationbegin",this.eventDetail,!1)},pauseAnimation:function(){this.animationIsPlaying=!1},resumeAnimation:function(){this.animationIsPlaying=!0},onStartEvent:function(){this.data.enabled&&(this.updateConfig(),this.animation&&this.animation.pause(),this.animation=n(this.config),this.data.delay?setTimeout(this.beginAnimation,this.data.delay):this.beginAnimation())},updateConfigForRawColor:function(){var e,t,o,n=this.config,i=this.data,a=this.el;if(!this.waitComponentInitRawProperty(this.updateConfigForRawColor)){for(t in e=""===i.from?v(a,i.property):i.from,o=i.to,this.setColorConfig(e,o),e=this.fromColor,o=this.toColor,this.targetsArray.length=0,this.targetsArray.push(e),n.targets=this.targetsArray,o)n[t]=o[t];var s;n.update=(s={},function(e){var t;(t=e.animatables[0].target).r===s.r&&t.g===s.g&&t.b===s.b||y(a,i.property,t,i.type)})}},updateConfigForDefault:function(){var e,t,o,n,i=this.config,a=this.data,s=this.el;this.waitComponentInitRawProperty(this.updateConfigForDefault)||(e=""===a.from?w(a)?v(s,a.property):l(s,a.property):a.from,o=a.to,!isNaN(e||o)?(e=parseFloat(e),o=parseFloat(o)):(e=e?e.toString():e,o=o?o.toString():o),(t="true"===a.to||"false"===a.to||!0===a.to||!1===a.to)&&(e="true"===a.from||!0===a.from?1:0,o="true"===a.to||!0===a.to?1:0),this.targets.aframeProperty=e,i.targets=this.targets,i.aframeProperty=o,i.update=function(e){var o;(o=e.animatables[0].target.aframeProperty)!==n&&(n=o,t&&(o=o>=1),w(a)?y(s,a.property,o,a.type):d(s,a.property,o))})},updateConfigForVector:function(){var e,t,o,n,i=this.config,a=this.data,r=this.el;for(e in t=""!==a.from?s.coordinates.parse(a.from):l(r,a.property),o=s.coordinates.parse(a.to),"rotation"===a.property&&(f(t),f(o)),this.targetsArray.length=0,this.targetsArray.push(t),i.targets=this.targetsArray,o)i[e]=o[e];"position"!==a.property&&"rotation"!==a.property&&"scale"!==a.property?i.update=function(){var e={};return function(t){var o=t.animations[0].target;o.x===e.x&&o.y===e.y&&o.z===e.z||(e.x=o.x,e.y=o.y,e.z=o.z,d(r,a.property,o))}}():i.update=(n={},function(e){var t=e.animatables[0].target;"scale"===a.property&&(t.x=Math.max(1e-4,t.x),t.y=Math.max(1e-4,t.y),t.z=Math.max(1e-4,t.z)),t.x===n.x&&t.y===n.y&&t.z===n.z||(n.x=t.x,n.y=t.y,n.z=t.z,r.object3D[a.property].set(t.x,t.y,t.z),r.object3D.matrixNeedsUpdate=!0)})},updateConfig:function(){var e;e=function(e,t){var o,n,a,s;if(a=t.split("."),n=a[0],s=a[1],!(o=e.components[n]||i[n]))return null;if(s&&!o.schema[s])return null;if(s)return o.schema[s].type;return o.schema.type}(this.el,this.data.property),w(this.data)&&this.data.type===h?this.updateConfigForRawColor():"vec2"===e||"vec3"===e||"vec4"===e?this.updateConfigForVector():this.updateConfigForDefault()},waitComponentInitRawProperty:function(e){var t,o=this.data,i=this.el,a=this;return""===o.from&&(!!o.property.startsWith(m)&&(t=E(o.property)[1],!i.components[t]&&(i.addEventListener("componentinitialized",function o(s){s.detail.name===t&&(e(),a.animation=n(a.config),i.removeEventListener("componentinitialized",o))}),!0)))},stopRelatedAnimations:function(){var e,t;for(t in this.el.components)e=this.el.components[t],t!==this.attrName&&"animation"===e.name&&e.animationIsPlaying&&e.data.property===this.data.property&&(e.animationIsPlaying=!1)},addEventListeners:function(){var e=this.data,t=this.el;g(t,e.startEvents,this.onStartEvent),g(t,e.pauseEvents,this.pauseAnimation),g(t,e.resumeEvents,this.resumeAnimation)},removeEventListeners:function(){var e=this.data,t=this.el;b(t,e.startEvents,this.onStartEvent),b(t,e.pauseEvents,this.pauseAnimation),b(t,e.resumeEvents,this.resumeAnimation)},cancelDelayedStart:function(){this.delayTimeout&&(clearTimeout(this.delayTimeout),this.delayTimeout=null)},setColorConfig:function(e,t){r.set(e),c.set(t),e=this.fromColor,t=this.toColor,e.r=r.r,e.g=r.g,e.b=r.b,t.r=c.r,t.g=c.g,t.b=c.b}})},838:function(e,t){AFRAME.registerComponent("ambient-light",{schema:{color:{type:"color"},intensity:{default:1}},init(){const e=this.el;this.light=new THREE.AmbientLight,this.el.setObject3D("ambient-light",this.light),this.el.sceneEl.systems.light.registerLight(e),this.rendererSystem=this.el.sceneEl.systems.renderer},update(e){this.data.color!==e.color&&(this.light.color.set(this.data.color),this.rendererSystem.applyColorCorrection(this.light.color)),this.data.intensity!==e.intensity&&(this.light.intensity=this.data.intensity)},remove:function(){this.el.removeObject3D("ambient-light")}})},839:function(e,t){AFRAME.registerComponent("animation-mixer",{initMixer(e){this.mixer=new THREE.AnimationMixer(this.el.object3D),this.el.object3D.animations=e,this.animations=e},tick:function(e,t){this.mixer&&this.mixer.update(t/1e3)}})},840:function(e,t){function o(e,t,o,n,i,a,s){try{var r=e[a](s),c=r.value}catch(e){return void o(e)}r.done?t(c):Promise.resolve(c).then(n,i)}AFRAME.registerComponent("networked-audio-analyser",{init(){var e,t=this;return(e=function*(){t.volume=0,t.prevVolume=0,t.smoothing=.3,t.threshold=.01,t._updateAnalysis=t._updateAnalysis.bind(t),t._runScheduledWork=t._runScheduledWork.bind(t),t.el.sceneEl.systems["frame-scheduler"].schedule(t._updateAnalysis,"audio-analyser"),t.el.addEventListener("sound-source-set",e=>{const o=THREE.AudioContext.getContext();t.analyser=o.createAnalyser(),t.analyser.fftSize=32,t.levels=new Uint8Array(t.analyser.frequencyBinCount),e.detail.soundSource.connect(t.analyser)})},function(){var t=this,n=arguments;return new Promise(function(i,a){var s=e.apply(t,n);function r(e){o(s,i,a,r,c,"next",e)}function c(e){o(s,i,a,r,c,"throw",e)}r(void 0)})})()},remove:function(){this.el.sceneEl.systems["frame-scheduler"].unschedule(this._runScheduledWork,"audio-analyser")},tick:function(e){this.avatarIsQuiet||this._updateAnalysis(e)},_runScheduledWork:function(){this.avatarIsQuiet&&this._updateAnalysis()},_updateAnalysis:function(e){if(!this.analyser)return;this.analyser.getByteTimeDomainData(this.levels);let t=0;for(let e=0;e<this.levels.length;e++){const o=(this.levels[e]-128)/128;t+=o*o}let o=Math.sqrt(t/this.levels.length);o<this.threshold&&(o=0),this.volume=this.smoothing*o+(1-this.smoothing)*this.prevVolume,this.prevVolume=this.volume,this.volume<1e-5?e&&this.lastSeenVolume&&this.lastSeenVolume<e-1e4&&(this.avatarIsQuiet=!0):(e&&(this.lastSeenVolume=e),this.avatarIsQuiet=!1)}}),AFRAME.registerComponent("scale-audio-feedback",{schema:{minScale:{default:1},maxScale:{default:2}},init(){this._playerCamera=document.getElementById("player-camera").object3D,this._playerCameraWorldPosition=new THREE.Vector3,this._worldPosition=new THREE.Vector3},tick(){if(!this.el.object3D.visible)return;const{minScale:e,maxScale:t}=this.data,o=this.el.components["networked-audio-analyser"];if(!o)return;const{object3D:n}=this.el;this._playerCameraWorldPosition.setFromMatrixPosition(this._playerCamera.matrixWorld),this._worldPosition.setFromMatrixPosition(n.matrixWorld);const i=this._worldPosition.distanceTo(this._playerCameraWorldPosition)/10,a=Math.min(t,e+(t-e)*o.volume*8*i);n.scale.setScalar(a),n.matrixNeedsUpdate=!0}})},841:function(e,t){AFRAME.registerComponent("css-class",{schema:{type:"string"},multiple:!0,init(){this.el.classList.add(this.data)},update(e){this.data!==e&&(this.el.classList.remove(e),this.el.classList.add(this.data))},remove(){this.el.classList.remove(this.data)}})},842:function(e,t){AFRAME.registerComponent("duck",{schema:{initialForce:{default:0},maxForce:{default:6.5},maxScale:{default:5}},init:function(){this.physicsSystem=this.el.sceneEl.systems.physics,this.hasBody=!1,this.position=new CANNON.Vec3,this.force=new CANNON.Vec3(0,this.data.initialForce,0),this.initialScale=this.el.object3D.scale.x,this.maxScale=this.data.maxScale*this.initialScale},play:function(){this.physicsSystem.addComponent(this)},pause:function(){this.physicsSystem.removeComponent(this)},beforeStep:function(){if(this.el.body&&NAF.utils.isMine(this.el)){const e=this.el.object3D.scale.x,t=Math.min(1,(e-this.initialScale)/(this.maxScale-this.initialScale))*this.data.maxForce;if(t>0){const e=Math.random()*Math.PI*2,o=Math.cos(e),n=Math.sin(e);this.force.set(o,t,n),this.position.set(.01*o,0,.01*n),this.el.object3D.matrixNeedsUpdate=!0,this.el.body.applyForce(this.force,this.position)}}}})},844:function(e,t){AFRAME.registerComponent("heightfield",{init(){this.el.addEventListener("componentinitialized",e=>{"static-body"===e.detail.name&&this.generateAndAddHeightfield(this.el.components["static-body"])}),this.el.setAttribute("static-body",{shape:"none",mass:0})},generateAndAddHeightfield(e){const{offset:t,distance:o,data:n}=this.data,i=new CANNON.Quaternion;i.setFromAxisAngle(new CANNON.Vec3(1,0,0),-Math.PI/2);const a=new CANNON.Quaternion;a.setFromAxisAngle(new CANNON.Vec3(0,1,0),-Math.PI/2),a.mult(i,i);const s=new CANNON.Vec3(t.x,t.y,t.z),r=new CANNON.Heightfield(n,{elementSize:o});e.addShape(r,s,i)}})},845:function(e,t){AFRAME.registerComponent("hemisphere-light",{schema:{skyColor:{type:"color"},groundColor:{type:"color"},intensity:{default:1}},init(){const e=this.el;this.light=new THREE.HemisphereLight,this.light.position.set(0,0,0),this.light.matrixNeedsUpdate=!0,this.el.setObject3D("hemisphere-light",this.light),this.el.sceneEl.systems.light.registerLight(e)},update(e){this.data.skyColor!==e.skyColor&&this.light.color.set(this.data.skyColor),this.data.groundColor!==e.groundColor&&this.light.groundColor.set(this.data.groundColor),this.data.intensity!==e.intensity&&(this.light.intensity=this.data.intensity)},remove:function(){this.el.removeObject3D("hemisphere-light")}})},846:function(e,t){AFRAME.registerComponent("hide-when-quality",{schema:{type:"string",default:"low"},init(){this.onQualityChanged=this.onQualityChanged.bind(this),this.el.sceneEl.addEventListener("quality-changed",this.onQualityChanged)},onQualityChanged(e){this.updateComponentState(e.detail)},update(e){this.data!==e&&this.updateComponentState(window.APP.quality)},updateComponentState(e){this.el.setAttribute("visible",e!==this.data)}})},847:function(e,t){AFRAME.registerComponent("point-light",{schema:{color:{type:"color"},intensity:{default:1},range:{default:0},decay:{default:2},castShadow:{default:!0},shadowMapResolution:{default:[512,512]},shadowBias:{default:0},shadowRadius:{default:1}},init(){const e=this.el;this.light=new THREE.PointLight,this.light.shadow.camera.matrixAutoUpdate=!0,this.el.setObject3D("point-light",this.light),this.el.sceneEl.systems.light.registerLight(e),this.rendererSystem=this.el.sceneEl.systems.renderer},update(e){const t=this.light;if(this.data.color!==e.color){const e=new THREE.Color(this.data.color);this.rendererSystem.applyColorCorrection(e),t.color.copy(e)}this.data.intensity!==e.intensity&&(t.intensity=this.data.intensity),this.data.range!==e.range&&(t.distance=this.data.range),this.data.decay!==e.decay&&(t.decay=this.data.decay),this.data.castShadow!==e.castShadow&&(t.castShadow=this.data.castShadow),this.data.shadowBias!==e.shadowBias&&(t.shadow.bias=this.data.shadowBias),this.data.shadowRadius!==e.shadowRadius&&(t.shadow.radius=this.data.shadowRadius);const[o,n]=this.data.shadowMapResolution,[i,a]=e.shadowMapResolution?e.shadowMapResolution:[512,512];o===i&&n===a||(t.shadow.mapSize.set(o,n),t.shadow.map&&(t.shadow.map.dispose(),t.shadow.map=null))},remove:function(){this.el.removeObject3D("point-light")}})},848:function(e,t){AFRAME.registerComponent("spot-light",{schema:{color:{type:"color"},intensity:{default:1},range:{default:0},decay:{default:2},innerConeAngle:{default:0},outerConeAngle:{default:Math.PI/4},castShadow:{default:!0},shadowMapResolution:{default:[512,512]},shadowBias:{default:0},shadowRadius:{default:1}},init(){const e=this.el;this.light=new THREE.SpotLight,this.light.position.set(0,0,0),this.light.target.position.set(0,0,1),this.light.add(this.light.target),this.light.matrixNeedsUpdate=!0,this.light.target.matrixNeedsUpdate=!0,this.el.setObject3D("spot-light",this.light),this.el.sceneEl.systems.light.registerLight(e)},update(e){const t=this.light;this.data.color!==e.color&&t.color.set(this.data.color),this.data.intensity!==e.intensity&&(t.intensity=this.data.intensity),this.data.range!==e.range&&(t.distance=this.data.range),this.data.decay!==e.decay&&(t.decay=this.data.decay),this.data.innerConeAngle===e.innerConeAngle&&this.data.outerConeAngle===e.outerConeAngle||(t.angle=this.data.outerConeAngle,t.penumbra=1-this.data.innerConeAngle/this.data.outerConeAngle),this.data.castShadow!==e.castShadow&&(t.castShadow=this.data.castShadow),this.data.shadowBias!==e.shadowBias&&(t.shadow.bias=this.data.shadowBias),this.data.shadowRadius!==e.shadowRadius&&(t.shadow.radius=this.data.shadowRadius);const[o,n]=this.data.shadowMapResolution,[i,a]=e.shadowMapResolution?e.shadowMapResolution:[512,512];o===i&&n===a||(t.shadow.mapSize.set(o,n),t.shadow.map&&(t.shadow.map.dispose(),t.shadow.map=null))},remove:function(){this.el.removeObject3D("spot-light")}})},849:function(e,t,o){const n=o(195).COLLISION_LAYERS;AFRAME.registerComponent("floaty-object",{schema:{autoLockOnLoad:{default:!1},autoLockOnRelease:{default:!1},modifyGravityOnRelease:{default:!1},releaseGravity:{default:-2},reduceAngularFloat:{default:!1},gravitySpeedLimit:{default:1.85}},init(){this.onGrab=this.onGrab.bind(this),this.onRelease=this.onRelease.bind(this)},tick(){this.ammoBody||(this.ammoBody=this.el.components["ammo-body"]);const e=AFRAME.scenes[0].systems.interaction.isHeld(this.el);if(e&&!this.wasHeld&&this.onGrab(),this.wasHeld&&!e&&this.onRelease(),!e&&this._makeStaticWhenAtRest){const e=this.el.components.networked&&NAF.utils.isMine(this.el),t=this.ammoBody.data.linearSleepingThreshold,o=this.ammoBody.data.angularSleepingThreshold,n=this.ammoBody.body.getLinearVelocity().length2()<t*t&&this.ammoBody.body.getAngularVelocity().length2()<o*o;n&&e&&this.el.setAttribute("ammo-body",{type:"static"}),!n&&e||(this._makeStaticWhenAtRest=!1)}this.wasHeld=e},play(){this.hasBeenHereBefore||(this.hasBeenHereBefore=!0,this.el.body?this._onBodyLoaded():(this._onBodyLoaded=this._onBodyLoaded.bind(this),this.el.addEventListener("body-loaded",this._onBodyLoaded,{once:!0})))},setLocked(e){this.el.components.networked&&!NAF.utils.isMine(this.el)||(this.locked=e,this.el.setAttribute("ammo-body",{type:e?"kinematic":"dynamic"}))},_onBodyLoaded(){this.data.autoLockOnLoad&&this.setLocked(!0)},onRelease(){this.data.modifyGravityOnRelease?0===this.data.gravitySpeedLimit||this.ammoBody.getVelocity().length2()<this.data.gravitySpeedLimit*this.data.gravitySpeedLimit?(this.el.setAttribute("ammo-body",{gravity:{x:0,y:0,z:0},angularDamping:this.data.reduceAngularFloat?.98:.5,linearDamping:.95,linearSleepingThreshold:.1,angularSleepingThreshold:.1,collisionFilterMask:n.HANDS}),this._makeStaticWhenAtRest=!0):this.el.setAttribute("ammo-body",{gravity:{x:0,y:this.data.releaseGravity,z:0},angularDamping:.01,linearDamping:.01,linearSleepingThreshold:1.6,angularSleepingThreshold:2.5,collisionFilterMask:n.DEFAULT_INTERACTABLE}):this.el.setAttribute("ammo-body",{collisionFilterMask:n.DEFAULT_INTERACTABLE}),this.data.autoLockOnRelease&&this.setLocked(!0)},onGrab(){this.el.setAttribute("ammo-body",{collisionFilterMask:n.HANDS}),this.setLocked(!1)},remove(){if(this.el.removeEventListener("body-loaded",this._onBodyLoaded),this.stuckTo){const e=this.stuckTo;delete this.stuckTo,e._unstickObject()}}})},850:function(e,t){const o=new THREE.Vector3,n=new THREE.Vector3,i=new THREE.Vector3;AFRAME.registerComponent("trigger-volume",{schema:{colliders:{type:"selectorAll"},size:{type:"vec3",default:{x:1,y:1,z:1}},target:{type:"selector"},enterComponent:{type:"string"},enterProperty:{type:"string"},enterValue:{default:"",parse:e=>"object"==typeof e?e:JSON.parse(e),stringify:JSON.stringify},leaveComponent:{type:"string"},leaveProperty:{type:"string"},leaveValue:{default:"",parse:e=>"object"==typeof e?e:JSON.parse(e),stringify:JSON.stringify}},init(){this.boundingBox=new THREE.Box3,this.collidingLastFrame={}},update(){this.el.object3D.getWorldPosition(n),o.copy(this.data.size),this.boundingBox.setFromCenterAndSize(n,o)},tick(){const e=this.data.colliders;for(let t=0;t<e.length;t++){const o=e[t].object3D;o.getWorldPosition(i);const n=this.boundingBox.containsPoint(i),a=this.collidingLastFrame[o.id];n&&!a?this.data.target.setAttribute(this.data.enterComponent,this.data.enterProperty,this.data.enterValue):!n&&a&&this.data.target.setAttribute(this.data.leaveComponent,this.data.leaveProperty,this.data.leaveValue),this.collidingLastFrame[o.id]=n}}})},851:function(e,t){AFRAME.registerComponent("video-pause-state",{schema:{paused:{default:!1}},init(){this.onPauseStateChange=this.onPauseStateChange.bind(this),this.videoComponent=this.el.components["media-video"],this.videoComponent?this.onVideoLoaded():(this.onVideoLoaded=this.onVideoLoaded.bind(this),this.el.addEventListener("video-loaded",this.onVideoLoaded))},onVideoLoaded(){this.videoComponent=this.el.components["media-video"],this.video=this.videoComponent.video,this.video.addEventListener("pause",this.onPauseStateChange)},onPauseStateChange(){this.el.setAttribute("paused",this.video.paused)},update(){this.video&&this.data.paused!==this.video.paused&&this.videoComponent.togglePlaying()},remove(){this.video.removeEventListener("pause",this.onPauseStateChange),this.el.removeEventListener("video-loaded",this.onVideoLoaded)}})},852:function(e,t){AFRAME.registerComponent("log-events",{init:function(){const e=this.el,t=this.log.bind(this),o=this.el.dispatchEvent;this.el.dispatchEvent=function(){return t(Array.from(arguments)),o.apply(e,arguments)}},log:function([e]){if(["componentchanged"].includes(e.type))return;let t=!0;console.info(`log-events: ${this.el.id} ${e.type} ${JSON.stringify(e.detail,(e,o)=>o&&"object"==typeof o&&void 0===o.length?t?(t=!1,o):"[object]":o)}`)}}),AFRAME.registerComponent("lifecycle-checker",{schema:{name:{type:"string"},tick:{default:!1}},init:function(){this.log("init")},update:function(){this.log("update")},tick:function(){this.data.tick&&this.log("tick")},remove:function(){this.log("remove")},pause:function(){this.log("pause")},play:function(){this.log("play")},log:function(e){console.info(`lifecycle-checker:${this.data.name} ${e}`)}})},870:function(e,t,o){const{Pathfinding:n}=o(1172);AFRAME.registerSystem("nav",{init:function(){this.pathfinder=new n},loadMesh:function(e,t){this.el.object3D.updateMatrixWorld(),this.mesh&&this.mesh.geometry&&this.mesh.geometry.dispose&&this.mesh.geometry.dispose(),this.mesh=e;const o=(new THREE.Geometry).fromBufferGeometry(e.geometry);o.applyMatrix(e.matrixWorld),this.pathfinder.setZoneData(t,n.createZone(o)),this.el.sceneEl.emit("nav-mesh-loaded")}})},875:function(e,t){AFRAME.registerComponent("event-repeater",{schema:{eventSource:{type:"selector"},events:{type:"array"}},play:function(){this.data.eventListeners=[];const e=this.data.events;for(let t=0;t<e.length;t++){const o=e[t];this.data.eventListeners[o]=this._handleEvent.bind(this,o),this.data.eventSource.addEventListener(o,this.data.eventListeners[o])}},pause:function(){const e=this.data.events;for(let t=0;t<e.length;t++){const o=e[t];this.data.eventSource.removeEventListener(o,this.data.eventListeners[o])}this.data.eventListeners=[]},_handleEvent:function(e,t){this.el.emit(e,t.detail)}})},9:function(e,t,o){"use strict";o.d(t,"a",function(){return r}),o.d(t,"b",function(){return c});var n=o(0),i=o.n(n),a=o(1),s=o.n(a);const r=i.a.createContext({}),c=({sound:e,children:t})=>i.a.createElement(r.Consumer,null,o=>i.a.cloneElement(t,{onMouseEnter:n=>{o&&o.playSound&&o.playSound(e||"play_sound-hud_hover_start"),t.props.onMouseEnter&&t.props.onMouseEnter(n)}}));c.propTypes={children:s.a.object,sound:s.a.string}},94:function(e,t,o){"use strict";function n(){return new Promise(e=>{setTimeout(e,0)})}o.d(t,"a",function(){return n})},98:function(e,t,o){"use strict";function n(e){const t=e.sceneEl.is("frozen"),o=e.components.pinnable&&e.components.pinnable.data.pinned,n=!!e.components["super-spawner"],i=window.APP.hubChannel.can("spawn_and_move_media")&&(!o||window.APP.hubChannel.can("pin_objects"));return(n||!o||t)&&i}function i(e){const t=e.components.pinnable&&e.components.pinnable.data.pinned,o=e&&e.components.networked&&e.components.networked.data.template,n="#interactable-camera"===o,i="#interactable-pen"===o;return window.APP.hubChannel.can("spawn_and_move_media")&&(!t||window.APP.hubChannel.can("pin_objects"))&&(!n||window.APP.hubChannel.can("spawn_camera"))&&(!i||window.APP.hubChannel.can("spawn_drawing"))}o.d(t,"b",function(){return n}),o.d(t,"a",function(){return i})}});
//# sourceMappingURL=scene-ca67fbee29b2cf4704d9.js.map