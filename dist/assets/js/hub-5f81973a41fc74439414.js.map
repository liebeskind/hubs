{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/utils/phoenix-utils.js","webpack:///./src/utils/resizeShadowCameraFrustum.js","webpack:///./src/components/directional-light.js","webpack:///./src/components/layers.js","webpack:///./src/components/loop-animation.js","webpack:///./src/components/media-loader.js","webpack:///./src/components/quack.js","webpack:///./src/components/scene-preview-camera.js","webpack:///./src/components/skybox.js","webpack:///./src/components/spawn-controller.js","webpack:///./src/components/super-spawner.js","webpack:///./src/components/water.js","webpack:///./src/utils/component-mappings.js","webpack:///./src/gltf-component-mappings.js","webpack:///./src/assets/images/logo.svg","webpack:///./src/assets/images/giphy_logo.png","webpack:///./src/utils/history.js","webpack:///./src/utils/fullscreen.js","webpack:///./src/assets/images/media-error.gif","webpack:///./src/assets/camera_tool.glb","webpack:///./src/assets/images/mic_granted.png","webpack:///./src/assets/images/mic_granted@2x.png","webpack:///./src/assets/images/mic_small.png","webpack:///./src/assets/images/mic_small@2x.png","webpack:///./src/assets/images/dropdown_arrow.png","webpack:///./src/assets/images/dropdown_arrow@2x.png","webpack:///./src/assets/images/mobile_screen_entry.svg","webpack:///./src/assets/images/desktop_screen_entry.svg","webpack:///./src/assets/images/generic_vr_entry.svg","webpack:///./src/assets/images/gearvr_entry.svg","webpack:///./src/assets/images/daydream_entry.svg","webpack:///./src/assets/images/link_dialog_header.svg","webpack:///./src/assets/images/presence_phone.png","webpack:///./src/assets/images/presence_desktop.png","webpack:///./src/assets/images/presence_discord.png","webpack:///./src/assets/images/presence_camera.png","webpack:///./src/assets/images/presence_vr.png","webpack:///./src/assets/images/level_background.png","webpack:///./src/assets/images/level_background@2x.png","webpack:///./src/assets/images/level_fill.png","webpack:///./src/assets/images/level_fill@2x.png","webpack:///./src/assets/images/mic_level.png","webpack:///./src/assets/images/mic_level@2x.png","webpack:///./src/assets/images/level_action_background.png","webpack:///./src/assets/images/level_action_background@2x.png","webpack:///./src/utils/avatar-utils.js","webpack:///./src/assets/images/level_action_fill.png","webpack:///./src/assets/images/level_action_fill@2x.png","webpack:///./src/assets/images/speaker_level.png","webpack:///./src/assets/images/speaker_level@2x.png","webpack:///./src/assets/sfx/tone.webm","webpack:///./src/assets/sfx/tone.mp3","webpack:///./src/assets/sfx/tone.ogg","webpack:///./src/assets/sfx/tone.wav","webpack:///./src/assets/images/change_avatar.svg","webpack:///./src/systems/render-manager/unlit-batch.vert","webpack:///./src/systems/render-manager/unlit-batch.frag","webpack:///./src/assets/images/spritesheets/sprite-system-spritesheet.png","webpack:///./src/systems/sprites/sprite.vert","webpack:///./src/systems/sprites/sprite.frag","webpack:///./src/materials/MobileStandardMaterial.js","webpack:///./src/storage/media-search-store.js","webpack:///./src/assets/sfx/tick.mp3","webpack:///./src/react-components/state-link.js","webpack:///./src/utils/media-url-utils.js","webpack:///./src/components/gltf-model-plus.js","webpack:///./src/utils/promisify-worker.js","webpack:///./src/utils/async-utils.js","webpack:///./src/utils/audio-context-fix.js","webpack:///./src/utils/threejs-positional-audio-updatematrixworld.js","webpack:///./src/components/bone-mute-state-indicator.js","webpack:///./src/components/bone-visibility.js","webpack:///./src/components/hover-visuals.js","webpack:///./src/components/offset-relative-to.js","webpack:///./src/components/hud-controller.js","webpack:///./src/components/icon-button.js","webpack:///./src/components/text-button.js","webpack:///./src/components/block-button.js","webpack:///./src/components/mute-button.js","webpack:///./src/components/kick-button.js","webpack:///./src/components/close-vr-notice-button.js","webpack:///./src/components/leave-room-button.js","webpack:///./src/components/visible-if-permitted.js","webpack:///./src/components/networked-avatar.js","webpack:///./src/components/pinnable.js","webpack:///./src/components/drop-object-button.js","webpack:///./src/components/remove-networked-object-button.js","webpack:///./src/components/camera-focus-button.js","webpack:///./src/components/mirror-camera-button.js","webpack:///./src/components/visible-to-owner.js","webpack:///./src/components/emit-state-change.js","webpack:///./src/components/action-to-event.js","webpack:///./src/components/action-to-remove.js","webpack:///./src/components/emit-scene-event-on-remove.js","webpack:///./src/components/follow-in-fov.js","webpack:///./src/components/matrix-auto-update.js","webpack:///./src/components/tweet-media-button.js","webpack:///./src/components/hover-menu.js","webpack:///./src/components/disable-frustum-culling.js","webpack:///./src/components/set-active-camera.js","webpack:///./src/components/track-pose.js","webpack:///./src/components/replay.js","webpack:///./src/components/visibility-by-path.js","webpack:///./src/components/tags.js","webpack:///./src/components/billboard.js","webpack:///./src/components/hoverable-visuals.js","webpack:///./src/systems/frame-scheduler.js","webpack:///./src/systems/app-mode.js","webpack:///./src/systems/permissions.js","webpack:///./src/systems/exit-on-blur.js","webpack:///./src/systems/camera-tools.js","webpack:///./src/constants.js","webpack:///./src/components/owned-object-limiter.js","webpack:///./src/components/set-unowned-body-kinematic.js","webpack:///./src/components/networked-counter.js","webpack:///./src/components/set-yxz-order.js","webpack:///./src/components/nav-mesh-helper.js","webpack:///./src/components/tools/drawing-manager.js","webpack:///./src/systems/userinput/paths.js","webpack:///./src/components/environment-map.js","webpack:///./src/utils/media-highlight-frag.glsl","webpack:///./src/assets/images/cubemap/posx.jpg","webpack:///./src/assets/images/cubemap/negx.jpg","webpack:///./src/assets/images/cubemap/posy.jpg","webpack:///./src/assets/images/cubemap/negy.jpg","webpack:///./src/assets/images/cubemap/posz.jpg","webpack:///./src/assets/images/cubemap/negz.jpg","webpack:///./src/utils/disable-ios-zoom.js","webpack:///./src/App.js","webpack:///./src/airtable.js","webpack:///./src/utils/component-utils.js","webpack:///./src/components/mute-mic.js","webpack:///./src/components/toggle-flying.js","webpack:///./src/components/in-world-hud.js","webpack:///./src/components/virtual-gamepad-controls.js","webpack:///./src/components/ik-controller.js","webpack:///./src/components/hand-controls2.js","webpack:///./src/components/character-controller.js","webpack:///./src/components/player-info.js","webpack:///./src/components/hand-poses.js","webpack:///./src/components/freeze-controller.js","webpack:///./src/components/visibility-while-frozen.js","webpack:///./src/components/stats-plus.js","webpack:///./src/components/media-views.js","webpack:///./src/components/avatar-volume-controls.js","webpack:///./src/components/pinch-to-move.js","webpack:///./src/components/pitch-yaw-rotator.js","webpack:///./src/components/position-at-box-shape-border.js","webpack:///./src/components/pin-networked-object-button.js","webpack:///./src/components/unmute-video-button.js","webpack:///./src/components/destroy-at-extreme-distances.js","webpack:///./src/components/camera-tool.js","webpack:///./src/components/clone-media-button.js","webpack:///./src/components/open-media-button.js","webpack:///./src/components/transform-object-button.js","webpack:///./src/components/teleporter.js","webpack:///./src/components/hubs-text.js","webpack:///./src/systems/userinput/sets.js","webpack:///./src/utils/vr-caps-detect.js","webpack:///./src/utils/share.js","webpack:///./src/react-components/state-route.js","webpack:///./src/react-components/client-info-dialog.js","webpack:///./src/react-components/loader.js","webpack:///./src/react-components/auto-exit-warning.js","webpack:///./src/react-components/entry-buttons.js","webpack:///./src/react-components/profile-entry-panel.js","webpack:///./src/react-components/media-browser.js","webpack:///./src/react-components/create-object-dialog.js","webpack:///./src/react-components/change-scene-dialog.js","webpack:///./src/react-components/avatar-url-dialog.js","webpack:///./src/react-components/help-dialog.js","webpack:///./src/react-components/invite-dialog.js","webpack:///./src/react-components/invite-team-dialog.js","webpack:///./src/react-components/link-dialog.js","webpack:///./src/react-components/safari-dialog.js","webpack:///./src/react-components/safari-mic-dialog.js","webpack:///./src/react-components/rename-room-dialog.js","webpack:///./src/react-components/close-room-dialog.js","webpack:///./src/systems/tips.js","webpack:///./src/react-components/tip.js","webpack:///./src/react-components/webrtc-screenshare-unsupported-dialog.js","webpack:///./src/react-components/webassembly-unsupported-dialog.js","webpack:///./src/react-components/webvr-recommend-dialog.js","webpack:///./src/react-components/feedback-dialog.js","webpack:///./src/react-components/leave-room-dialog.js","webpack:///./src/react-components/room-info-dialog.js","webpack:///./src/react-components/oauth-dialog.js","webpack:///./src/react-components/tweet-dialog.js","webpack:///./src/react-components/lobby-chat-box.js","webpack:///./src/react-components/chat-command-help.js","webpack:///./src/utils/serialize-element.js","webpack:///./src/react-components/presence-list.js","webpack:///./src/react-components/chat-message.js","webpack:///./src/react-components/in-world-chat-box.js","webpack:///./src/react-components/avatar-editor.js","webpack:///./src/react-components/mic-level-widget.js","webpack:///./src/react-components/output-level-widget.js","webpack:///./src/react-components/photo-message.js","webpack:///./src/react-components/image-message.js","webpack:///./src/react-components/presence-log.js","webpack:///./src/react-components/settings-menu.js","webpack:///./src/react-components/preload-overlay.js","webpack:///./src/react-components/2d-hud.js","webpack:///./src/react-components/spectating-label.js","webpack:///./src/utils/vr-interstitial.js","webpack:///./src/react-components/ui-root.js","webpack:///./src/utils/hub-channel.js","webpack:///./src/utils/physics-utils.js","webpack:///./src/message-dispatch.js","webpack:///./src/scene-entry-manager.js","webpack:///./src/utils/pinned-entity-to-gltf.js","webpack:///./src/subscriptions.js","webpack:///./src/systems/personal-space-bubble.js","webpack:///./src/systems/userinput/devices/mouse.js","webpack:///./src/systems/userinput/array-backed-set.js","webpack:///./src/systems/userinput/devices/keyboard.js","webpack:///./src/systems/userinput/devices/hud.js","webpack:///./src/systems/userinput/devices/xbox-controller.js","webpack:///./src/systems/userinput/pose.js","webpack:///./src/systems/userinput/arm-model.js","webpack:///./src/systems/userinput/devices/copy-sitting-to-standing-transform.js","webpack:///./src/systems/userinput/devices/oculus-go-controller.js","webpack:///./src/systems/userinput/devices/gear-vr-controller.js","webpack:///./src/systems/userinput/devices/oculus-touch-controller.js","webpack:///./src/systems/userinput/devices/daydream-controller.js","webpack:///./src/systems/userinput/devices/vive-controller.js","webpack:///./src/systems/userinput/devices/windows-mixed-reality-controller.js","webpack:///./src/systems/userinput/devices/gyro.js","webpack:///./src/systems/interactions.js","webpack:///./src/systems/userinput/devices/app-aware-mouse.js","webpack:///./src/systems/userinput/devices/touchscreen/assignments.js","webpack:///./src/systems/userinput/devices/app-aware-touchscreen.js","webpack:///./src/systems/userinput/bindings/xforms.js","webpack:///./src/utils/dpad.js","webpack:///./src/systems/userinput/bindings/utils.js","webpack:///./src/systems/userinput/bindings/keyboard-mouse-user.js","webpack:///./src/systems/userinput/bindings/touchscreen-user.js","webpack:///./src/systems/userinput/bindings/keyboard-debugging.js","webpack:///./src/systems/userinput/bindings/oculus-touch-user.js","webpack:///./src/systems/userinput/bindings/vive-user.js","webpack:///./src/systems/userinput/bindings/windows-mixed-reality-user.js","webpack:///./src/systems/userinput/bindings/xbox-controller-user.js","webpack:///./src/systems/userinput/bindings/daydream-user.js","webpack:///./src/systems/userinput/bindings/cardboard-user.js","webpack:///./src/systems/userinput/bindings/oculus-go-user.js","webpack:///./src/systems/userinput/resolve-action-sets.js","webpack:///./src/systems/userinput/devices/gamepad.js","webpack:///./src/systems/userinput/bindings/generic-gamepad.js","webpack:///./src/systems/userinput/userinput.js","webpack:///./src/systems/camera-mirror.js","webpack:///./src/systems/userinput/userinput-debug.js","webpack:///./src/systems/ui-hotkeys.js","webpack:///./src/systems/cursor-targetting-system.js","webpack:///./src/systems/constraints-system.js","webpack:///./src/systems/two-point-stretching-system.js","webpack:///./src/systems/button-systems.js","webpack:///./src/systems/hover-menu-system.js","webpack:///./src/systems/super-spawner-system.js","webpack:///./src/systems/haptic-feedback-system.js","webpack:///./src/systems/render-manager/hubs-batch-raw-uniform-group.js","webpack:///./src/systems/render-manager-system.js","webpack:///./src/systems/lobby-camera-system.js","webpack:///./src/systems/hubs-systems.js","webpack:///./src/systems/capture-system.js","webpack:///./src/systems/sprites.js","webpack:///./src/systems/post-physics.js","webpack:///./src/components/scalable-when-grabbed.js","webpack:///./src/components/cursor-controller.js","webpack:///./src/components/tools/pen.js","webpack:///./src/utils/sharedbuffergeometry.js","webpack:///./src/utils/sharedbuffergeometrymanager.js","webpack:///./src/components/tools/networked-drawing.js","webpack:///./src/network-schemas.js","webpack:///./src/hub.js","webpack:///./src/utils/concurrent-load-detector.js","webpack:///./src/utils/threejs-allocation-patches.js","webpack:///./src/react-components/dialog-container.js","webpack:///./src/assets/images/warning_icon.png","webpack:///./src/assets/images/warning_icon@2x.png","webpack:///./src/react-components/avatar-preview.js","webpack:///./src/react-components/sign-in-dialog.js","webpack:///./src/assets/stylesheets/media-browser.scss","webpack:///./src/assets/stylesheets/sign-in-dialog.scss","webpack:///./src/assets/stylesheets/hub.scss","webpack:///./src/components/virtual-gamepad-controls.css","webpack:///./src/assets/stylesheets/ui-root.scss","webpack:///./src/assets/stylesheets/entry.scss","webpack:///./src/assets/stylesheets/invite-dialog.scss","webpack:///./src/assets/stylesheets/client-info-dialog.scss","webpack:///./src/assets/stylesheets/loader.scss","webpack:///./src/assets/stylesheets/profile.scss","webpack:///./src/assets/stylesheets/avatar-preview.scss","webpack:///./src/assets/stylesheets/create-object-dialog.scss","webpack:///./src/assets/stylesheets/change-scene-dialog.scss","webpack:///./src/systems/sound-effects-system.js","webpack:///./src/assets/stylesheets/avatar-url-dialog.scss","webpack:///./src/assets/stylesheets/link-dialog.scss","webpack:///./src/assets/stylesheets/rename-room-dialog.scss","webpack:///./src/assets/stylesheets/close-room-dialog.scss","webpack:///./src/assets/stylesheets/tip.scss","webpack:///./src/assets/stylesheets/feedback-dialog.scss","webpack:///./src/assets/stylesheets/leave-room-dialog.scss","webpack:///./src/assets/stylesheets/room-info-dialog.scss","webpack:///./src/assets/stylesheets/oauth-dialog.scss","webpack:///./src/assets/stylesheets/tweet-dialog.scss","webpack:///./src/assets/stylesheets/message-entry.scss","webpack:///./src/assets/stylesheets/chat-command-help.scss","webpack:///./src/assets/stylesheets/presence-log.scss","webpack:///./src/assets/stylesheets/presence-list.scss","webpack:///./src/assets/stylesheets/avatar-editor.scss","webpack:///./src/assets/stylesheets/settings-menu.scss","webpack:///./src/assets/stylesheets/preload-overlay.scss","webpack:///./src/assets/stylesheets/2d-hud.scss","webpack:///./src/assets/stylesheets/spectating-label.scss","webpack:///./src/utils/qs_truthy.js","webpack:///./src/utils/scene-graph.js","webpack:///./src/utils/auto-box-collider.js","webpack:///./src/axonpark/messages.js","webpack:///./src/utils/i18n.js","webpack:///./src/utils/logging.js","webpack:///./src/utils/auth-channel.js","webpack:///./src/utils/animation.js","webpack:///./src/loaders/HubsTextureLoader.js","webpack:///./src/utils/media-utils.js","webpack:///./src/utils/three-utils.js","webpack:///./src/utils/material-utils.js","webpack:///./src/utils/mask-email.js","webpack:///./src/react-components/media-tiles.js","webpack:///./src/utils/webgl.js","webpack:///./src/assets/LoadingObject_Atom.glb","webpack:///./src/assets/sfx/teleport-loop.mp3","webpack:///./src/assets/sfx/quickTurn.mp3","webpack:///./src/assets/sfx/tap_mellow.mp3","webpack:///./src/assets/sfx/PenSpawn.mp3","webpack:///./src/assets/sfx/PenDraw1.mp3","webpack:///./src/assets/sfx/PicSnapHey.mp3","webpack:///./src/assets/sfx/welcome.mp3","webpack:///./src/assets/sfx/quack.mp3","webpack:///./src/assets/sfx/specialquack.mp3","webpack:///./src/assets/sfx/pop.mp3","webpack:///./src/assets/sfx/Eb_blip.mp3","webpack:///./src/assets/sfx/tack.mp3","webpack:///./src/assets/sfx/A_bendUp.mp3","webpack:///./src/assets/sfx/suspense.mp3","webpack:///./src/assets/waternormals.jpg","webpack:///./src/utils/identity.js","webpack:///./src/storage/store.js","webpack:///./src/utils/crypto.js","webpack:///./src/utils/link-channel.js","webpack:///./src/utils/focus-utils.js","webpack:///./src/assets/images/mic_denied.png","webpack:///./src/assets/images/mic_denied@2x.png","webpack:///./src/object-types.js","webpack:///./src/assets/avatars/avatars.js","webpack:///./src/telemetry.js","webpack:///./src/utils/debug-log.js","webpack:///./src/utils/threejs-world-update.js","webpack:///./src/components/animation.js","webpack:///./src/components/ambient-light.js","webpack:///./src/components/animation-mixer.js","webpack:///./src/components/audio-feedback.js","webpack:///./src/components/css-class.js","webpack:///./src/components/duck.js","webpack:///./src/components/heightfield.js","webpack:///./src/components/hemisphere-light.js","webpack:///./src/components/hide-when-quality.js","webpack:///./src/components/point-light.js","webpack:///./src/components/spot-light.js","webpack:///./src/components/floaty-object.js","webpack:///./src/components/trigger-volume.js","webpack:///./src/components/video-pause-state.js","webpack:///./src/components/debug.js","webpack:///./src/systems/nav.js","webpack:///./src/utils/image-bitmap-utils.js","webpack:///./src/components/event-repeater.js","webpack:///./src/react-components/wrap-with-audio.js","webpack:///./src/utils/next-tick.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","6","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","document","createElement","getReticulumFetchUrl","path","absolute","reticulumMeta","invalidatedReticulumMetaThisSession","invalidateReticulumMeta","_invalidateReticulumMeta","this","arguments","getReticulumMeta","_getReticulumMeta","querySelector","version","getAttribute","pool","phx_host","fetch","then","_ref2","_asyncToGenerator","res","json","_x6","phxHostOverride","URLSearchParams","location","search","connectToReticulum","_connectToReticulum","debug","params","qs","getNewSocketUrl","_ref3","socketProtocol","protocol","socketHost","socketPort","process","RETICULUM_SOCKET_SERVER","URL","port","socketUrl","console","log","socketSettings","logger","kind","msg","socket","Socket","connect","onError","endPointPath","endPoint","pathname","newEndPoint","getLandingPageForPhoto","photoUrl","parsedUrl","replace","fetchReticulumAuthenticated","url","method","payload","token","APP","store","state","credentials","retUrl","headers","content-type","authorization","body","JSON","stringify","_ref","text","parse","e","_x","createAndRedirectToNewHub","_x2","_x3","_x4","_x5","_createAndRedirectToNewHub","sceneId","sceneUrl","createUrl","assets","Name","SceneUrl","record","airtableAssets","find","fields","hub","default_environment_gltf_bundle_url","Store","error","update","email","creatorAssignmentToken","creator_assignment_token","creatorAssignmentTokens","hubId","hub_id","embedToken","embed_token","embedTokens","host","getPresenceEntryForSession","presences","sessionId","presence","entries","k","metas","getPresenceContextForSession","context","getPresenceProfileForSession","profile","migrateChannelToSocket","oldChannel","channel","topic","bindings","item","on","event","callback","pushBuffer","timeout","oldJoinPush","joinPush","join","recHooks","receive","status","Promise","resolve","discordBridgesForPresences","channels","values","discordBridges","Array","map","b","boundingBox","THREE","Box3","frustumBox","inverseLightMatrixWorld","Matrix4","tempBox","FRUSTUM_PADDING","NEAR_CLIPPING_PLANE","FAR_CLIPPING_PLANE","verts","Vector3","AFRAME","registerComponent","schema","color","type","intensity","default","castShadow","shadowMapResolution","shadowBias","shadowRadius","init","el","light","DirectionalLight","position","set","target","add","setObject3D","sceneEl","systems","registerLight","rendererSystem","renderer","prevData","Color","applyColorCorrection","copy","shadow","bias","radius","width","height","prevWidth","prevHeight","mapSize","dispose","camera","matrixNeedsUpdate","tick","quality","scene","makeEmpty","traverse","node","geometry","computeBoundingBox","applyMatrix4","matrixWorld","union","min","max","x","y","z","getInverse","expandByPoint","left","right","bottom","top","near","far","updateProjectionMatrix","resizeShadowCameraFrustum","object3D","remove","removeObject3D","Layers","reflection","inWorldHud","exclusive","addEventListener","oldData","obj","layers","mask","layer","oldValue","newValue","enable","disable","removeEventListener","paused","clip","mixerEl","findAncestorWithComponent","updateClip","warn","currentAction","mixer","animations","components","clipName","action","clipAction","enabled","setLoop","LoopRepeat","Infinity","play","destroy","stop","SHAPE","require","loadingObject","GLTFLoader","load","loadingObjectSrc","gltf","forceBatching","qsTruthy","fileId","fileIsOwned","src","resize","contentType","contentSubtype","animate","mediaOptions","v","showLoader","clearLoadingTimeout","onMediaLoaded","NAF","utils","getNetworkedEntity","networkedEl","updateScale","center","mesh","getObject3D","box","getBox","scaleCoefficient","getScaleCoefficient","scale","multiplyScalar","addVectors","sub","removeShape","id","removeAttribute","dt","loaderMixer","loadingSoundNode","soundEffectsSystem","stopSoundNode","setAttribute","object3DMap","useFancyLoader","clone","Mesh","BoxGeometry","MeshBasicMaterial","AnimationMixer","loadingClip","loadingScaleClip","AnimationClip","VectorKeyframeTrack","setTimeout","BOX","is","isMine","playSoundLooped","SOUND_MEDIA_LOADING","showLoaderTimeout","clearTimeout","updateHoverableVisuals","hoverableVisuals","injectedCustomShaderChunks","uniforms","injectCustomShaderChunks","setFromObject","getBoundingSphere","boundingSphere","physicsShape","playSoundOneShot","SOUND_MEDIA_LOADED","finish","minHalfExtent","pager","repositionToolbar","addMeshScaleAnimation","initialScale","onComplete","step","lastValue","anim","animatables","Math","Number","MIN_VALUE","config","duration","easing","elasticity","loop","round","targets","complete","anime","_this","thumbnail","canonicalUrl","accessibleUrl","resolveUrl","origin","startsWith","meta","expected_content_type","proxiedUrlFor","guessContentType","fetchContentType","emit","raw","material","isHLS","qsTime","parseInt","searchParams","startTime","hash","substring","reduceAngularFloat","releaseGravity","detail","projection","once","assign","time","dirs","template","includes","HULL","addAnimationComponents","inflate","batch","modelToWorldScale","Error","mayChangeScene","permissions","can","isHubsAvatarUrl","isHubsRoomUrl","isHubsSceneUrl","index","_this2","toolbar","imageSrc","onNext","onPrev","_ensureUI","_this3","hasSetupUI","maxIndex","fetchMaxContentIndex","getElementById","appendChild","importNode","content","nextButton","prevButton","pageLabel","_this4","pageSrc","parentNode","removeChild","takeOwnership","quackPercentage","specialQuackPercentage","_handleGrabStart","pause","rand","random","SOUND_SPECIAL_QUACK","SOUND_QUACK","lerp","start","end","newRot","Quaternion","positionOnly","startPoint","startRotation","quaternion","targetPoint","targetRotDelta","Euler","targetRotation","setFromEuler","premultiply","performance","now","backwards","ranOnePass","tick2","streamerCamera","streamer","getCurrentStreamer","getStreamerCamera","setMatrixWorld","translateZ","from","to","fromRot","toRot","slerp","rotation","setFromQuaternion","isBotMode","Sky","shader","SkyShader","ShaderMaterial","fragmentShader","vertexShader","UniformsUtils","side","BackSide","BoxBufferGeometry","constructor","luminance","turbidity","rayleigh","mieCoefficient","mieDirectionalG","sunPosition","inclination","azimuth","distance","sky","skyScene","Scene","cubeCamera","CubeCamera","updateEnvironmentMap","requestAnimationFrame","theta","PI","phi","cos","sin","normalize","environmentMapComponent","vrEnabled","vr","pmremGenerator","PMREMGenerator","renderTarget","texture","pmremCubeUVPacker","PMREMCubeUVPacker","cubeLods","CubeUVRenderTarget","playerHeight","loadedEvent","moveToSpawnPoint","spawnPoints","querySelectorAll","spawnPoint","getLastWorldPosition","visible","COLLISION_LAYERS","useCustomSpawnPosition","spawnPosition","useCustomSpawnRotation","spawnRotation","useCustomSpawnScale","spawnScale","spawnCooldown","centerSpawnedObject","spawnEvent","animateFromCursor","cooldownTimeout","handPosition","onSpawnEvent","tempSpawnHandPosition","classList","entity","addMedia","ObjectContentOrigins","SPAWNER","cursor","getWorldPosition","getWorldQuaternion","userinput","scenes","interaction","willAnimateFromCursor","paths","actions","rightHand","matrix","rightRemote","held","spawning","activateCooldown","waitForEvent","delay","dur","syncToPhysics","sx","sy","sz","collisionFilterMask","NONE","DEFAULT_SPAWNER","MobileWater","options","undefined","normalSampler","waterNormals","sunDirection","sunColor","waterColor","eye","distortionScale","FrontSide","fog","mirrorShader","merge","UniformsLib","size","ShaderChunk","transparent","lights","reject","TextureLoader","wrapS","wrapT","RepeatWrapping","needsUpdate","Water","speed","forceMobile","waterMesh","waterGeometry","loadWaterNormals","waterNormalMap","waterConfig","textureWidth","textureHeight","device","isMobile","isMobileVR","water","mirrorCamera","setStyle","getSanitizedComponentMapping","inputComponent","inputProperty","publicComponents","publicComponent","publicProperty","publicProperties","mappedComponent","mappedProperty","getMappedValue","PHYSICS_CONSTANTS","TYPE","FIT","decayMigration","componentName","componentData","range","decay","mediaInflator","isControlled","networked","hasVolume","templateName","controls","isHubsDestinationUrl","href","owner","persistent","networkId","videoPaused","autoPlay","volume","audioType","hidePlaybackControls","distanceModel","rolloffFactor","refDistance","maxDistance","coneInnerAngle","coneOuterAngle","coneOuterGain","GLTFModelPlus","isHandCollisionTarget","cursorController","mass","STATIC","collisionFilterGroup","INTERACTABLES","euler","orientation","fit","MANUAL","offset","halfExtents","_componentName","nav","zone","found","isMesh","loadMesh","pageIndex","video","loop-animation","indexToEntityMap","enterComponent","enterProperty","enterValue","leaveComponent","leaveProperty","leaveValue","enterComponentMapping","leaveComponentMapping","targetEntity","message","colliders","HEIGHTFIELD","margin","heightfieldDistance","heightfieldData","MESH","ALL","includeInvisible","pushOrUpdateHistory","history","newPathname","newSearch","newLength","__historyLength","_objectSpread","__duplicate","isDuplicate","pushHistoryState","replaceHistoryState","pushHistoryPath","clearHistoryState","popToBeginningOfHubHistory","navigateToPriorPage","len","unsubscribe","listen","go","sluglessPath","split","withSlug","__webpack_exports__","willRequireUserGesture","showFullScreenIfAvailable","showFullScreenIfWasFullScreen","screenfull__WEBPACK_IMPORTED_MODULE_0__","screenfull__WEBPACK_IMPORTED_MODULE_0___default","hasEnteredFullScreenThisSession","shouldShowFullScreen","isIOS","screenfull","isFullscreen","request","AVATAR_TYPES","LEGACY","SKINNABLE","legacyAvatarIds","avatars","a","getAvatarType","avatarId","indexOf","resp","fetchAvatar","_fetchAvatar","avatar_id","gltf_url","avatar","model","fetchSkinnableAvatar","getAvatarSrc","fetchAvatarGltfUrl","getAvatarThumbnailUrl","_getAvatarThumbnailUrl","files","VERTEX_SHADER","FRAGMENT_SHADER","MobileStandardMaterial","[object Object]","args","super","_defineProperty","parameters","uvTransform","Matrix3","diffuse","opacity","aoMapIntensity","aoMap","emissive","emissiveMap","alphaTest","skinning","morphTargets","vertexColors","mobileMaterial","fromStandardMaterial","SOURCES","EMPTY_RESULT","URL_SOURCE_TO_TO_API_SOURCE","images","videos","youtube","gifs","sketchfab","poly","twitch","favorites","MEDIA_SOURCE_DEFAULT_FILTERS","SEARCH_CONTEXT_PARAMS","MediaSearchStore","EventTarget","dispatchEvent","CustomEvent","urlSource","getUrlMediaSource","previousSource","urlParams","requestIndex","currentRequestIndex","locationSearchParams","isMy","param","source","navigator","languages","singular","credentialsAccountId","toString","lastSavedUrl","isFetching","nextCursor","next_cursor","lastFetchedUrl","legacyAvatar","preview","gltfs","delta","goBack","filter","query","delete","keepSource","keepNav","_stashedParams","_stashedSource","q","_sourceNavigate","hideNav","useLastStashedParams","currentQuery","getSearchClearedSearchParams","useValue","hasAccountWithAvatars","_hasAccountWithAvatars","stashLastSearchParams","_stashLastSearchParams","hasMediaPath","setHistory","_update","StateLink","React","Component","handleClick","props","onClick","defaultPrevented","button","metaKey","altKey","ctrlKey","shiftKey","isModifiedEvent","preventDefault","stateKey","stateValue","stateDetail","render","innerRef","className","children","react__WEBPACK_IMPORTED_MODULE_0___default","ref","PropTypes","bool","string","func","scaledThumbnailUrlFor","getCustomGLTFParserURLResolver","nonCorsProxyDomains","CORS_PROXY_SERVER","commonKnownContentTypes","glb","png","jpg","jpeg","pdf","mp4","mp3","farsparkEncodeUrl","str","btoa","encodeURIComponent","_","p1","String","fromCharCode","b64EncodeUnicode","urlHostname","hostname","hasIndex","domain","endsWith","gltfUrl","test","corsProxyPrefix","originalUrlParts","decodeURIComponent","dataUrlRegex","matches","match","extension","pop","hubsSceneRegex","hubsAvatarRegex","hubsRoomRegex","raycast","acceleratedRaycast","gltfCache","Map","cache","count","retain","has","cacheItem","release","disposeNode","inflightGltfs","extractZipFile","promisifyWorker","SketchfabZipWorker","defaultInflator","multiple","isArray","cloneSkinnedMesh","cloneLookup","parallelTraverse","sourceNode","clonedNode","boundsTree","sourceMesh","isSkinnedMesh","sourceBones","skeleton","bones","clonedMesh","sourceBone","bindMatrix","cloneGltf","getHubsComponents","hubsComponents","userData","gltfExtensions","MOZ_hubs_components","HUBS_components","legacyComponents","componentKey","inflator","inflateEntities","templates","isRoot","childEntities","child","entityComponents","append","uuid","order","matrixAutoUpdate","identity","decompose","toLowerCase","parent","gltfIndex","attachTemplate","root","templateRoot","targetEls","cloneNode","attributes","loadGLTF","_loadGLTF","preferredTechnique","onProgress","jsonPreprocessor","fileMap","loadingManager","LoadingManager","setURLModifier","gltfLoader","parser","createParser","textureLoader","extensions","oldHeightfieldNode","nodes","heightfield","runMigration","materials","MOZ_alt_materials","altMaterialIndex","extras","Object3D","DefaultMatrixAutoUpdate","mapMaterials","isMeshStandardMaterial","keys","forEach","revokeObjectURL","useCache","loadTemplates","applySrc","batchManagerSystem","removeObject","templateEl","firstElementChild","loadModel","technique","promise","charAt","assetEl","lastSrc","inflatedEl","disposeLastInflatedEl","addObject","initMixer","hasBufferGeometry","isBufferGeometry","hasBoundsTree","geo","triCount","MeshBVH","strategy","maxDepth","object3DToSet","nextTick","inflatedEntity","prop","inflateComponents","rewires","applyEnvironmentMap","f","format","worker","nextItemId","outstanding","onmessage","err","handlers","transfer","postMessage","waitForDOMContentLoaded","readyState","eventName","eventObj","ctx","AudioContext","getContext","resume","PositionalAudio","updateMatrixWorld","force","setInitial","_lastPosition","_lastOrientation","_lastListenerPosition","panner","listener","applyQuaternion","abs","EPSILON","positionX","positionY","positionZ","setPosition","setOrientation","unmutedBoneName","mutedBoneName","onPos","offPos","onStateToggled","unmutedBone","getObjectByName","mutedBone","modelLoaded","updateMuteState","muted","lastVisible","updateMatrices","hand","handleLeftVisuals","handleRightVisuals","hideVisualEffectOnElement","hadLeftVisualLastFrame","hadRightVisualLastFrame","isFrozen","isPinned","pinnable","pinned","interactingElement","leftHand","hovered","hideVisual","elements","uniform","hubs_HighlightInteractorOne","hubs_InteractorOnePos","hubs_HighlightInteractorTwo","hubs_InteractorTwoPos","selfDestruct","updateOffset","QUARTER_CIRCLE","offsetVector","localToWorld","worldToLocal","rotateOnAxis","TWOPI","head","lookCutoff","animRange","yawCutoff","onChildHovered","removeHoverEvents","isYLocked","lockedHeadPositionY","lookDir","lookEuler","hoverableChildren","hud","pitch","RAD2DEG","yawDif","deltaAngle","forceHudVisible","activity","hasHoveredInWorldHud","clamp","hudLocked","hudOutOfView","DEG2RAD","image","hoverImage","activeImage","activeHoverImage","active","tooltip","tooltipText","activeTooltipText","onHover","hovering","updateButtonState","onHoverOut","sprite","textHoverColor","textColor","backgroundHoverColor","backgroundColor","textEl","noop","dependencies","block","clientId","hubChannel","hide","mute","kick","updateVisibility","canOrWillIfCreator","left_hand_pose","right_hand_pose","_fireEventsAndAnimate","pinStateChanged","currentScale","isHeld","wasHeld","targetEl","modifyGravityOnRelease","gravity","angularDamping","linearDamping","linearSleepingThreshold","angularSleepingThreshold","DEFAULT_INTERACTABLE","activate","track","selector","cameraSystem","myCamera","getMyCamera","focus","isVisible","shouldBeVisible","labelSelector","_updateUI","_isMirrored","labelEl","unmirror","mirror","getMirroredCameraEl","isMirrored","onStateChange","newOwner","transform","oneof","stateadded","stateremoved","requireOwnership","angle","targetPos","snappedRot","snappedQ","snappedXForm","snappedXFormWorld","tempVector","_applyMaskedTargetRotation","started","compose","multiplyMatrices","_updateMatrixAutoUpdate","dim","onFrozenStateChange","getHoverMenu","applyHoverState","menuPromise","menu","setScalar","frustumCulled","currentActiveCamera","activeCameraEl","setActiveCamera","canvas","matrixIsModified","playhead","poseIndex","overflow","poses","timestamp","isHoldable","offersHandConstraint","offersRemoteConstraint","singleActionButton","holdableButton","isPen","isHoverMenuChild","didUpdateOnce","_updateBillboard","_updateIsInView","schedule","unschedule","isInView","frustum","Frustum","frustumMatrix","boxTemp","expandBox","playerCamera","screenCamera","projectionMatrix","matrixWorldInverse","setFromMatrix","intersectsBox","isInViewOfCamera","setFromMatrixPosition","lookAt","validMaterials","_utils_material_utils__WEBPACK_IMPORTED_MODULE_0__","interactorOneTransform","interactorTwoTransform","enableSweepingEffect","Sphere","sweepParams","forEachMaterial","contains","meshToEl","isSpawner","hideDueToPinning","interactorOne","interactorTwo","toArray","worldY","scaledRadius","hubs_EnableSweepingEffect","hubs_IsFrozen","hubs_SweepParams","hubs_Time","registerSystem","registry","queues","frameIndex","queue","idx","invert","updateComponentState","inVRMode","class","permissionName","fetchPermissions","onBlur","onFocus","onTimeout","onEnterVR","isOculusBrowser","userAgent","enteredVR","lastTimeoutCheck","exitTimeout","cameraEls","register","_onOwnershipChange","deregister","avatarUpdated","onAvatarUpdated","ENVIRONMENT","AVATAR","HANDS","UNOWNED_INTERACTABLE","counter","_syncCounterRegistration","timestamps","setBodyKinematic","didThisOnce","locked","clear","_destroyOldest","oldestEl","minTs","MAX_VALUE","ts","_destroy","teleporters","queryCollisionEntities","_onComponentInitialized","drawingToPen","drawingEl","drawing","createDrawing","getDrawing","pen","returnDrawing","toggleScreenShare","snapRotateLeft","snapRotateRight","angularVelocity","logDebugFrame","logInteractionState","cameraDelta","lobbyCameraDelta","characterAcceleration","boost","startGazeTeleport","stopGazeTeleport","spawnPen","ensureFrozen","toggleFreeze","thaw","muteMic","toggleFlying","focusChat","focusChatCommand","toggleCamera","takeSnapshot","mediaExit","mediaSearch1","mediaSearch2","mediaSearch3","mediaSearch4","mediaSearch5","mediaSearch6","mediaSearch7","mediaSearch8","transformModifier","rayObjectRotation","pose","hideLine","grab","drop","modDelta","startDrawing","stopDrawing","undoDrawing","penNextColor","penPrevColor","scalePenTip","scaleGrabbedGrabbable","mediaVolumeMod","switchDrawMode","startTeleport","stopTeleport","thumb","middleRingPinky","exitMirror","haptics","actuators","mouse","coords","movementXY","buttonLeft","buttonRight","wheel","smartMouse","cursorPose","touchscreen","touchCameraDelta","gyroCameraDelta","pinch","initialDistance","currentDistance","isTouching","isTouchingGrabbable","tap1","tap2","tap3","tap4","tap5","gyro","averageDeltaX","averageDeltaY","penButton","keyboard","gamepad","gamepadIndex","buttonIndex","pressed","touched","axis","axisIndex","xbox","buttonName","axisName","axesSum","oculusgo","trigger","touchpad","axisX","axisY","gearVRController","daydream","rightOculusTouch","leftOculusTouch","axes","wmrController","wmr","grip","joystick","vive","createDefaultEnvironmentMap","_createDefaultEnvironmentMap","urls","cubeMapPosX","cubeMapNegX","cubeMapPosY","cubeMapNegY","cubeMapPosZ","cubeMapNegZ","CubeTextureLoader","RGBFormat","environmentMap","envMap","disableiOSZoom","detect_browser__WEBPACK_IMPORTED_MODULE_0__","detectOS","lastTouchAtMs","ev","Date","getTime","isDoubleTouch","App","_storage_store__WEBPACK_IMPORTED_MODULE_0__","_storage_media_search_store__WEBPACK_IMPORTED_MODULE_1__","mediaSearchStore","setQuality","Airtable","configure","endpointUrl","apiKey","base","airtableAssetsInitialState","DarkLogo","Icon","airtableMessages","select","view","firstPage","records","registerComponentInstance","component","componentRegistry","deregisterComponentInstance","playerInfos","playerInfo","playerSessionId","streaming","bindAllEvents","events","unbindAllEvents","eventSrc","toggleEvents","muteEvents","unmuteEvents","onToggle","onMute","onUnmute","connection","adapter","SOUND_TOGGLE_MIC","enableMicrophone","removeState","addState","mic","spawn","cameraBtn","inviteBtn","background","flyBtn","updateButtonStates","evt","onMicClick","onSpawnClick","onPenClick","SOUND_SPAWN_PEN","onCameraClick","onFlyClick","playerRig","fly","onInviteClick","onEnterVr","onExitVr","onFirstInteraction","onMoveJoystickChanged","onMoveJoystickEnd","onLookJoystickChanged","onLookJoystickEnd","mockJoystickContainer","styles","leftMock","mockJoystick","leftMockSmall","inner","rightMock","rightMockSmall","leftTouchZone","touchZone","leftStick","nipplejs","fadeTime","rightTouchZone","rightStick","inVr","moving","rotating","moveEvent","rotateYEvent","rotateXEvent","off","radian","style","display","leftController","rightController","LEGACY_HAND_ROTATIONS","makeRotationFromEuler","HAND_ROTATIONS","leftEye","rightEye","neck","chest","hips","rotationSpeed","alwaysUpdate","_runScheduledWork","flipY","makeRotationY","cameraForward","headTransform","hipsPosition","invHipsToHeadVector","middleEyeMatrix","middleEyePosition","invMiddleEyeToHead","cameraYRotation","cameraYQuaternion","invHipsQuaternion","headQuaternion","rootToChest","invRootToChest","ikRoot","findIKRoot","hasConvergedHips","lastCameraTransform","cameraMirrorSystem","divideScalar","makeTranslation","negate","updateMatrix","hasNewCameraTransform","equals","forceIkUpdate","setFromRotationMatrix","epsilon","u","w","inverse","handRotations","avatarType","updateHand","handRotation","handObject3D","controllerObject3D","isLeft","handMatrix","spaceInvader","handHiddenByPersonalSpace","invading","multiply","cameraWorld","pos","containsPoint","POSES","poseForFingers","subpath","previous","current","groundAcc","pivot","snapRotationDegrees","navGroup","navNode","velocity","accelerationInput","pendingSnapRotationMatrix","_withinWarningLimit","_warningCount","setAccelerationInput","setAngularVelocity","leftRotationMatrix","rightRotationMatrix","reset","SOUND_SNAP_ROTATE","teleportTo","rig","deltaFromHeadToTargetForHead","targetForHead","targetForRig","targetWorldPosition","pathfinder","getGroup","_setNavNode","clampStep","move","trans","transInv","pivotPos","rotationAxis","yawMatrix","rotationMatrix","rotationInvMatrix","pivotRotationMatrix","pivotRotationInvMatrix","startPos","startScale","deltaSeconds","userinputAngularVelocity","rotationDelta","acc","makeRotationAxis","updateVelocity","lengthSq","setPositionOnNavMesh","_warnWithWarningLimit","getClosestNode","zones","dvx","dvz","ensureAvatarNodes","some","originalRoot","scale-audio-feedback","avatarSrc","displayName","communityIdentifier","isModerator","isRecording","applyProperties","updateDisplayName","applyDisplayName","handleModelError","isLocalPlayerInfo","networkedEntity","getCreator","playerPresence","updateDisplayNameFromPresenceMeta","presenceMeta","recording","roles","moderator","nametagEl","communityIdentifierEl","recordingBadgeEl","modBadgeEl","modelEl","resetToRandomLegacyAvatar","open","thumbDown","indexDown","mrpDown","thumbUp","point","fist","NETWORK_POSES","animatePose","suffix","networkField","getNetworkedAvatar","networkedAvatar","parentEl","prev","curr","fadeOut","fadeIn","setHandPose","toggleEvent","hasFoundFreeze","frozen","SOUND_FREEZE","SOUND_THAW","withinDistance","requireHoverOnNonMobile","camWorldPos","objWorldPos","cam","hoverableSearch","hoverable","shouldNotBeVisible","isWithinDistance","distanceToSquared","isTransforming","transforming","toggle","onExpand","onCollapse","stats","threeStats","aframeStats","plugins","rStats","css","fps","caption","below","batchdraws","batchinstances","batchatlassize","groups","createStats","statsEl","statsHeaderEl","statsTitleEl","innerHTML","collapseEl","insertBefore","firstChild","fpsEl","lastFpsUpdate","lastFps","frameCount","inVR","vrStatsEnabled","initVRStats","lastUpdate","vrPanel","whiteSpace","baseline","depthTest","toggleVRStats","physics","addComponent","removeComponent","beforeStep","afterStep","frame","batchingEnabled","batchManager","batches","instanceCount","atlas","arrayDepth","toFixed","info","calls","triangles","show","ONCE_TRUE","TYPE_IMG_PNG","parseGIF","GIFWorker","VOLUME_LABELS","GIFTexture","Texture","frames","delays","disposals","_ctx","generateMipmaps","isVideoTexture","minFilter","NearestFilter","frameStartTime","clearRect","drawImage","arrayBuffer","rawImageData","delayTimes","loadCnt","img","Image","onload","encoding","sRGBEncoding","LinearFilter","catch","videoEl","autoplay","preload","crossOrigin","createVideoTexture","createVideoEl","VideoTexture","streamClientId","stream","getMediaStream","srcObject","MediaStream","getVideoTracks","HLS","isSupported","baseUrl","hls","xhrSetup","xhr","buildAbsoluteURL","loadSource","attachMedia","Events","ERROR","fatal","ErrorTypes","NETWORK_ERROR","startLoad","MEDIA_ERROR","recoverMediaError","canPlayType","onerror","hasResolved","resolveOnce","poll","videoHeight","videoWidth","scaleToAspectRatio","ratio","disposeTexture","HTMLVideoElement","textureCache","errorImage","errorImageSrc","errorTexture","timeFmt","floor","h","magFilter","tickRate","syncTolerance","onPauseStateChange","tryUpdateVideoPlaybackState","updateSrc","seekForward","seekBack","volumeUp","volumeDown","snap","changeVolumeBy","togglePlaying","videoMutedAt","localSnapCount","isSnapping","onSnapImageLoaded","hoverMenu","playbackControls","playPauseButton","volumeUpButton","volumeDownButton","seekForwardButton","seekBackButton","snapButton","timeLabel","volumeLabel","updateVolumeLabel","updateHoverMenuBasedOnLiveState","updatePlaybackState","getNetworkOwner","audioListener","AudioListener","cameraEl","videoIsLive","currentTime","SOUND_CAMERA_TOOL_TOOK_SNAPSHOT","blob","toBlob","file","File","spawnMediaAround","audio","gain","_playbackStateChangeTimeout","cleanUp","audioSource","createMediaElementSource","setDistanceModel","setRolloffFactor","setRefDistance","setMaxDistance","Audio","setNodeSource","updateLiveState","levels","currentLevel","details","live","LEVEL_SWITCHED","SphereBufferGeometry","PlaneBufferGeometry","DoubleSide","volumeMod","disconnect","_hasRetainedTexture","createGIFTexture","createImageTexture","RGBAFormat","sound","pinchDelta","degToRad","radToDeg","minPitch","maxPitch","yaw","onRotateX","pendingXRotation","look","deltaPitch","deltaYaw","lookX","lookY","HALF_PI","THREE_HALF_PI","forward","back","zero","dir","halfExtent","_updateBox","_setupTarget","opening","wasVisible","scaleChanged","previousScaleX","previousScaleY","previousScaleZ","isAnimating","targetPosition","pointOnBoxFace","pointOnBoxFaceToCamera","boxCenter","tempParentWorldScale","boxFaceNormal","forceNewExtents","targetSquareDistance","targetDir","targetHalfExtentStr","targetHalfExtent","targetCameraDot","halfExtentStr","subVectors","cameraAngleDotBoxNormal","dot","squareDistance","setFromMatrixScale","sqrt","targetScale","finalScale","tipSelector","hideWhenPinnedSelector","_updateUIOnStateChange","tipEl","onHovered","onUnhovered","wasPinned","SOUND_PIN","_discordBridges","canPin","getPromotionTokenForFile","hideEl","mediaVideo","xMin","xMax","yMin","yMax","zMin","zMax","_checkForDestroy","cameraModelPromise","cameraModelSrc","pathsMap","player-right-controller","player-left-controller","snapCanvas","pixels","imageData","createImageData","bitmap","createImageBitmap","enableCameraViewport","previewFPS","imageWidth","imageHeight","WebGLRenderTarget","depth","stencil","PerspectiveCamera","updateRenderTargetNextTick","aspect","screen","selfieScreen","takeSnapshotNextTick","unmirrorCameraAtEl","trackTarget","mirrorCameraAtEl","playerHead","heldLeftHand","heldRightHand","heldRightRemote","grabberId","grabPath","grabberPaths","tock","tempHeadScale","headEl","playerHud","hudEl","playerHudWasVisible","spriteSystem","tmpVRFlag","tmpOnAfterRender","onAfterRender","setRenderTarget","snapPixels","Uint8Array","readRenderTargetPixels","pixelsToPNG","objectType","ObjectTypes","CAMERA","label","AMMO_BODY_ATTRIBUTES","TRANSFORM_MODE","AXIS","PUPPET","CURSOR","ALIGN","SCALE","STEP_LENGTH","CAMERA_WORLD_QUATERNION","CAMERA_WORLD_POSITION","TARGET_WORLD_QUATERNION","v2","q2","onGrabStart","transformSystem","startTransform","onGrabEnd","stopTransform","dxStore","dxApplied","dyAll","dyStore","dyApplied","puppet","initialControllerOrientation","initialControllerOrientation_inverse","initialObjectOrientation","currentControllerOrientation","controllerOrientationDelta","planarInfo","plane","wireframe","normal","intersections","previousPointOnPlane","currentPointOnPlane","deltaOnPlane","finalProjectedVec","startPlaneCasting","raycaster","sign","sign2","dxAll","hasScaled","hasRotated","hasRecentered","puppetingTick","cursorAxisOrScaleTick","cameraToPlaneDistance","intersection","projectOnPlane","modify","setFromAxisAngle","scaleFactor","newScale","FORWARD","TWO_PI","RayCurve","numPoints","BufferGeometry","vertices","Float32Array","uvs","addAttribute","BufferAttribute","setDynamic","drawMode","TriangleStripDrawMode","direction","parabolicCurve","p0","v0","out","setDirection","UP","cross","setWidth","setPoint","posA","posB","checkLineIntersection","meshes","referenceNormal","landingMaxAngle","hitPoint","intersects","intersectObjects","collisionNormal","angleNormals","angleTo","isValidNormalsAngle","face","LANDING_NORMAL","vecHelper","confirm","collisionEntities","hitCylinderColor","hitCylinderRadius","outerRadius","hitCylinderHeight","isTeleporting","rayCurve","teleportEntity","parabola","hit","Raycaster","rigWorldPosition","newRigWorldPosition","teleportOriginWorldPosition","teleportEventDetail","oldPosition","newPosition","prevHitHeight","hitEntity","createHitEntity","stopPlayingTeleportSound","teleportingSound","sfx","timeTeleporting","playSoundLoopedWithGain","SOUND_TELEPORT_START","characterController","SOUND_TELEPORT_END","collidedIndex","timeSegment","percentToDraw","segmentT","hitEntityOpacity","easeOutIn","dRadii","outerScale","easeIn","outerTorus","torus","cylinder","primitive","radiusTubular","segmentsRadial","segmentsTubular","segmentsHeight","openEnded","MAX_ANISOTROPY","computeWidth","wrapPixels","wrapCount","widthFactor","FONTS","roboto","font","ch","chars","yoffset","sum","digitsum","digits","xadvance","computeFontWidthFactor","ImageLoader","anisotropy","loadTexture","align","oneOf","anchor","letterSpacing","lineHeight","tabSize","xOffset","zOffset","shaderData","getShaderData","shaderObject","shaders","Shader","createTextGeometry","attrName","updateFont","currentFont","updateGeometry","updateLayout","parseSide","all","pages","layout","geometryComponent","textScale","descender","TypeError","ascender","geometryUpdateBase","geometryUpdateData","newLineRegex","tabRegex","isFinite","common","sets","detect","browser","VR_DEVICE_AVAILABILITY","yes","no","maybe","GENERIC_ENTRY_TYPE_DEVICE_BLACKLIST","getAvailableVREntryTypes","_getAvailableVREntryTypes","ua","isSamsungBrowser","isWebVRCapableBrowser","hasNativeWebVRImplementation","isDaydreamCapableBrowser","isIDevice","isFirefoxBrowser","isUIWebView","mediaDevices","safari","isCardboardCapableBrowser","displays","getVRDisplays","generic","cardboard","gearvr","isMaybeGearVRCompatibleDevice","isMaybeDaydreamCompatibleDevice","capabilities","canPresent","canShare","share","opts","title","tweetLink","StateRoute","_this$props","routeProps","_objectWithoutProperties","react_default","es_Route","_extends","ClientInfoDialog","client_info_dialog_defineProperty","avatarThumbnailUrl","performConditionalSignIn","onClose","client_info_dialog_asyncToGenerator","unhide","getPresenceProfile","componentDidMount","setState","mayKick","mayMute","isHidden","dialog_container","client_info_dialog_extends","clientInfoDialog","wide","roomInfo","clientProfileImage","clientActionButtons","index_es","cancel","Loader","loader_defineProperty","loadingNum","loadedNum","doneWithInitialLoad","loadingTimeout","tryFinishLoading","environmentSceneLoaded","onLoaded","onObjectLoading","onObjectLoaded","componentWillUnmount","nomore","loaderStyles","loadingText","progress","usual","locale","lang","messages","loadingIcon","finished","AutoExitWarning","secondsRemaining","wrap_with_audio","onCancel","propTypes","number","EntryButton","cx","entryButton","entryButtonSecondary","secondary","iconSrc","icon","contents","prefixMessageId","bolded","mediumMessageId","subtitle","isInHMD","TwoDEntryButton","entryButtonProps","MobileScreenEntryImg","DesktopScreenEntryImg","GenericEntryButton","GenericVREntryImg","DaydreamEntryButton","DaydreamEntryImg","ProfileEntryPanel","profile_entry_panel_defineProperty","getStateFromProfile","hasChangedName","hasChangedNowOrPreviously","hasAcceptedProfile","stopPropagation","entry","profile_entry_panel_asyncToGenerator","storeUpdated","nameInput","setAvatarFromMediaResult","refetchAvatar","componentDidUpdate","_prevProps","prevState","formatMessage","intl","profileEntry","close","react_fontawesome_index_es","faTimes","onSubmit","saveStateAndFinish","form","classNames","darkened","htmlFor","displayNameOverride","formFieldText","handleTextFieldFocus","handleTextFieldBlur","onChange","required","spellCheck","pattern","SCHEMA","definitions","properties","inp","avatar_preview","avatarGltfUrl","account_id","state_link","hideDelete","returnToProfile","editAvatar","faPencilAlt","chooseAvatar","sourceNavigateWithNoNav","formSubmit","links","rel","logo","injectIntl","PRIVACY_POLICY_LINKS","DEFAULT_FACETS","MediaBrowser","media_browser_defineProperty","facets","showNav","selectNextResult","clearStashedQueryOnClose","newState","getStoreAndHistoryState","selectEntry","inputRef","getUrlSource","suggestions","forceNow","_sendQueryTimeout","filterQueryNavigate","lucky_query","handleQueryUpdated","onMediaSearchResultEntrySelected","sourceNavigate","facet","pushExitMediaBrowserHistory","isSceneApiType","isAvatarApiType","dialog","clearStashedQuery","pageNavigate","browserDiv","scrollTop","sourceChanged","showCustomOption","hideSearch","showEmptyStringOnNoResult","handleCustomClicked","showCustomMediaDialog","mediaBrowser","header","noSearch","headerLeft","headerCenter","favoritesHeader","faStar","faSearch","autoFocus","placeholder","onKeyDown","handleEntryClicked","trim","blur","engineAttribution","engineAttributionContents","headerRight","createButton","faLink","faCloudUploadAlt","createLink","handleSourceClicked","navSource","navSourceSelected","navRightPad","navScrollArrow","faAngleRight","handleFacetClicked","media_tiles","handlePager","emptyString","attributionHostnames","giphy.com","giphyLogo","media.giphy.com","DEFAULT_OBJECT_URL","instructions","references","mobileInstructions","desktopInstructions","lastUrl","fileInputId","CreateObjectDialog","create_object_dialog_defineProperty","fileName","attributionImage","validity","valid","fileInput","onCreate","other","create_object_dialog_objectWithoutProperties","cancelButton","smallButton","cancelIcon","uploadButton","uploadIcon","faPaperclip","filenameLabel","leftSideOfInput","urlInput","onUrlChange","create_object_dialog_extends","onCreateClicked","addMediaForm","hideFileInput","onFileChange","inputBorder","buttons","actionButton","ChangeSceneDialog","change_scene_dialog_defineProperty","onChangeClicked","changeSceneForm","spokeCreate","spokeLaunch","AvatarUrlDialog","avatar_url_dialog_defineProperty","avatarUrlDialog","HelpDialog","help_dialog_extends","textAlign","InviteDialog","invite_dialog_defineProperty","copyButtonActive","shareButtonActive","link","entryCode","embedUrl","entryCodeString","num","pad","shortLinkText","shortLink","embedText","modal","isModal","attachPoint","hubLinkLink","code","digit","readOnly","linkButton","copyClicked","allowShare","shareClicked","embed","showEmbedTip","embedTipWrap","embedTip","embedTipAttachPoint","hasPush","subscribe","onSubscribeChanged","checked","isSubscribed","enterVrButton","InviteTeamDialog","invite_team_dialog_defineProperty","inviteButtonText","requestSupport","invite_team_dialog_extends","inviteClicked","LinkDialog","linkCode","codeLoadingPanel","imageHeader","LinkDialogHeader","keepOpen","closeButton","SafariDialog","safari_dialog_defineProperty","copyLinkButtonText","onCopyClicked","copyLinkClicked","safari_dialog_extends","SafariMicDialog","safari_mic_dialog_extends","reload","RenameRoomDialog","rename_room_dialog_defineProperty","onRename","rename_room_dialog_extends","renameRoomForm","autoComplete","nameField","CloseRoomDialog","close_room_dialog_extends","confirmButton","onConfirm","LOCAL_CLOSE_TIPS","KEEP_ACTIVE_AFTER_GLOBAL_CLOSE","localStorageCache","finishedScopes","tipPlatform","platformTips","desktop","mobile","standalone","isTipFinished","tip","localStorage","getItem","markTipFinished","storeData","setItem","handleTipClose","fullTip","scope","tips","VALIDATORS","activeSets","cursorHoldingPen","locomotion","accel","turning","spawn_menu","mediaCounter","freeze_gesture","cursorHoldingInteractable","cursorHoveringOnInteractable","menu_hover","invite","cursorHoldingCamera","object_grab","object_rotate_button","object_scale_button","object_recenter_button","object_pin","hasPinned","object_zoom","object_scale","pen_color","pen_size","pen_mode","freeze_mode","video_share_mode","mirror_mode","mute_mode","feedback","entryCount","activeTips","_finishedScopes","_performStep","_userinput","_mediaCounter","prevTop","prevBottom","chosenTip","finishCount","Tip","tipRegion","broadcastTarget","tipBody","splitTip","splitTipIcon","tipLink","tipRoot","tipCancel","WebRTCScreenshareUnsupportedDialog","webrtc_screenshare_unsupported_dialog_extends","flexDirection","alignItems","fontSize","WebAssemblyUnsupportedDialog","webassembly_unsupported_dialog_extends","WebVRRecommendDialog","webvr_recommend_dialog_extends","FeedbackDialog","feedback_dialog_extends","formFrame","frameBorder","marginHeight","marginWidth","LeaveRoomDialog","leave_room_dialog_extends","leaveRoom","messageType","destinationUrl","RoomInfoDialog","toAttributionDiv","attribution","attributionName","attributionAuthor","author","attributions","creator","hubName","room_info_dialog_extends","sceneScreenshot","screenshot_url","sceneDetails","sceneMain","sceneName","sceneCreator","sceneAttributions","sceneButtons","OAuthDialog","renderSignInDisclaimer","oauthTypeName","privacyNotice","renderTweetDisclaimer","twitterMessage","oauthInfo","closable","oauth_dialog_extends","oauthButtons","oauthButton","oauthTwitterButton","oauthDiscordButton","array","emojiPlugin","createEmojiPlugin","hashtagPlugin","createHashtagPlugin","linkifyPlugin","createLinkifyPlugin","counterPlugin","createCounterPlugin","addEmoji","emoji","editorState","contentState","getCurrentContent","entityKey","createEntity","emojiUnicode","getLastCreatedEntityKey","currentSelectionState","getSelection","emojiAddedContent","emojiEndPos","blockSize","afterRemovalContentState","Modifier","removeRange","targetSelection","getSelectionAfter","insertText","getAnchorOffset","blockKey","getAnchorKey","getBlockForKey","getLength","newEditorState","EditorState","forceSelection","TweetDialog","createEditorStateWithText","editorRef","sendTweet","media_stored_file_url","getPlainText","posting","posted","renderPostedDialog","tweet_dialog_extends","allowOverflow","tweetButton","renderTweetDialog","EmojiSuggestions","EmojiSelect","CharCounter","additionalClass","dialogBackground","tweet","editor","editorInner","draft_js_plugins_editor_lib_default","emojiButton","emojiSuggestions","limit","media","tweetLoader","disabled","LobbyChatBox","lobby_chat_box_defineProperty","pendingMessage","onSendMessage","textRows","pendingMessageTextareaHeight","pendingMessageFieldHeight","discordSnippet","occupantSnippet","occupantCount","messageEntryPlaceholder","sendMessage","messageEntry","messageEntryDisabled","messageEntryInput","rows","messageEntryButton","messageEntrySubmit","faPaperPlane","ChatCommandHelp","commands","commandHelp","commandHelpOnTop","onTop","matchingPrefix","command","defaultStylesByTagName","noStyleTags","BASE","HEAD","HTML","META","NOFRAME","NOSCRIPT","PARAM","SCRIPT","STYLE","TITLE","tagNames","computeDefaultStyleByTagName","tagName","defaultStyle","element","computedStyle","getComputedStyle","warmSerializeElement","navigateToClientInfo","currentParams","PresenceList","presence_list_defineProperty","expanded","CameraImage","PhoneImage","hmd","HMDImage","discord","DiscordImage","DesktopImage","getPresenceImage","isBot","badge","moderatorBadge","row","listItem","self","clientLink","renderExpandedList","presenceList","domForPresence","signIn","signedIn","maskEmail","onSignOut","onSignIn","rootStyles","presenceInfo","presenceInfoSelected","faUsers","messageCanvas","emojiRegex","urlRegex","messageBodyDom","fromSessionId","includeFromLink","multiLine","wrapStyle","messageWrapMulti","messageWrap","mono","messageBodyClasses","messageBody","messageBodyMulti","messageBodyMono","includeClientLink","onFromClick","words","outWords","word","wordWrap","cleanedBody","messageSource","messageSourceLink","Linkify_default","toEmojis","renderChatMessage","allowEmojiRender","lowResolution","isOneLine","isEmoji","presenceLog","presenceLogSpawn","entryDom","presenceLogEntry","presenceLogEntryOneLine","presenceLogEmoji","ReactDOM","objectScale","offsetWidth","offsetHeight","xhtml","nodeType","Node","ELEMENT_NODE","cssTexts","toUpperCase","cssText","ii","cssPropName","outerHTML","serializeElement","chat_message_asyncToGenerator","unmountComponentAtNode","meshEntity","blobUrl","createObjectURL","isRawProperty","meshMaterial","spawnChatMessage","_spawnChatMessage","ChatMessage","maySpawn","iconButton","spawnMessage","InWorldChatBox","in_world_chat_box_defineProperty","messageEntryInRoom","messageEntryOnMobile","chat_command_help_ChatCommandHelp","accept","onObjectCreated","enableSpawning","messageEntryButtonInRoom","messageEntryUpload","faCamera","faPlus","messageEntryInputInRoom","messageEntryInputNoSpawn","messageEntrySpawn","AVATARS_API","AvatarEditor","avatar_editor_defineProperty","parent_avatar_listing_id","previewGltfUrl","avatar_editor_asyncToGenerator","creatorAttribution","inputFiles","base_gltf_url","KHR_binary_glTF","bin","getWrappedInstance","snapshot","filesToUpload","uploading","fileUploads","upload","avatar_editor_objectSpread","file_id","access_token","promotion_token","reduce","createOrUpdateAvatar","onSave","avatarEditor","textField","textarea","fileField","mapField","checkbox","avatar_editor_extends","uploadAvatar","confirmDelete","deleteAvatar","webkitAudioContext","MicLevelWidget","mic_level_widget_defineProperty","micLevel","mediaStream","hasAudioTrack","startAnalyzer","prevProps","stopAnalyzer","micUpdateInterval","clearInterval","micLevelAudioContext","micSource","createMediaStreamSource","analyser","createAnalyser","fftSize","frequencyBinCount","micLevelMovingAverage","MovingAverage","setInterval","getByteTimeDomainData","level","average","movingAverage","micClip","level_background_default","srcSet","level_background_2x_default","muteOnEntry","level_fill_default","level_fill_2x_default","mic_level_default","mic_level_2x_default","mic_denied_default","mic_denied_2x_default","OutputLevelWidget","output_level_widget_defineProperty","tonePlaying","playTestTone","toneClip","webmTone","mp3Tone","oggTone","wavTone","testToneTimeout","speakerClip","level_action_background_default","level_action_background_2x_default","level_action_fill_default","level_action_fill_2x_default","speaker_level_default","speaker_level_2x_default","PhotoMessage","landingPageUrl","onShareClicked","mediaBody","ImageMessage","spawnImage","PresenceLog","presence_log_defineProperty","entryClasses","presenceLogEntryWithButton","presenceLogChat","expired","oldName","newName","inRoom","presenceClasses","presenceLogInRoom","domForEntry","SettingsMenu","settings_menu_defineProperty","renderExpandedMenu","rowClasses","settingsRow","rowHeader","showStreamerMode","flyEnabled","settingsMenu","change_avatar_default","listItemLink","toggleFlyMode","faDoorClosed","showNonHistoriedDialog","faVideo","toggleStreamerMode","faBars","cornerButton","cornerButtonSelected","isStreaming","hubScene","PreloadOverlay","treatment","screenshot","mainPanel","onLoadClicked","loadButton","TopHUD","_2d_hud_defineProperty","showVideoShareOptions","lastActiveMediaSource","videoShareMediaSource","onEndShareVideo","onShareVideo","onShareVideoNotCapable","videoShareExtraOptionTypes","primaryVideoShareType","showExtrasOnHover","hideVideoSharingButtonTimeout","videoShare","handleVideoShareClicked","onMouseOver","videoShareExtraOptions","onMouseOut","videoSharingButtons","buildVideoSharingButtons","tipDivForType","cancelFunc","topTip","watching","topTipNoHud","onWatchEnded","tipCancelText","showVideoShareFailed","hideVideoShareFailedTip","activeTip","container","unselectable","uiStyles","uiInteractive","panel","onToggleMute","sourceNavigateToDefaultSource","isCursorHoldingPen","onSpawnPen","hasActiveCamera","onSpawnCamera","flyingEnabled","onToggleFlying","onToggleFreeze","showStreamingTip","hideStreamingTip","react_components_2d_hud","SpectatingLabel","_isIn2DInterstitial","_exitAction","afterUserGesturePrompt","handleExitTo2DInterstitial","isLower","exitAction","exitVR","vrNotice","exit2DInterstitialAndEnterVR","exit","enterVR","isIn2DInterstitial","avatarEditorDebug","addLocaleData","en","HMD_MIC_REGEXES","IN_ROOM_MODAL_ROUTER_PATHS","IN_ROOM_MODAL_QUERY_VARS","LOBBY_MODAL_ROUTER_PATHS","LOBBY_MODAL_QUERY_VARS","LOBBY_MODAL_QUERY_VALUES","enumerateDevices","isMobilePhoneOrVR","AUTO_EXIT_TIMER_SECONDS","UIRoot","ui_root_defineProperty","enterInVR","entered","showShareDialog","broadcastTipDismissed","linkCodeCancel","miniInviteActivated","didConnectToNetworkedScene","noMoreLoadingUpdates","hideLoader","waitingOnAudio","audioTrack","micDevices","autoExitTimerStartedAt","autoExitTimerInterval","secondsRemainingBeforeAutoExit","exited","signInMessageId","authChannel","signInCompleteMessageId","signInContinueTextId","onContinueAfterSignIn","SignInDialog","ui_root_asyncToGenerator","authComplete","startAuthentication","authStarted","continueText","onContinue","subscriptions","isFavorited","initialIsFavorited","sceneLoaded","mediaSource","updateSubscribedState","forcedVREntryType","enterDaydream","enter2D","disableAutoExitOnConcurrentLoad","secondsSinceStart","checkForAutoExit","endAutoExitTimer","reason","exitScene","grantedMicLabels","setMediaStreamToDefault","beginOrSkipAudioSetup","performDirectEntryFlow","availableVREntryTypes","_ref7","constraints","deviceId","exact","fetchAudioTrack","setupNewMediaStream","hasAudio","lastUsedMicDeviceId","settings","ideal","_ref9","getUserMedia","getAudioTracks","recreateAudioStream","_ref10","setLocalMediaStream","fetchMicDevices","addTrack","micDeviceId","micDeviceIdForMicLabel","micLabelForMediaStream","entry_step","onAudioReadyButton","hasHmdMicrophone","selectedMicLabel","enterScene","onFinished","linkChannel","generateCode","hasOpenedShare","updateScene","ui_root_objectSpread","DialogClass","closeDialog","beginStreaming","endStreaming","_ref15","signOut","broadcastedRoomConfirmed","confirmedBroadcastedRooms","interstitial","onInterstitialPromptClicked","roomUnavailableReason","platformUnsupportedReason","exitSubtitleId","logo_default","promptForNameAndAvatarBeforeEntry","hubIsBound","entryStyles","entryPanel","collapseButton","roomSubtitle","lobby_chat_box","buttonContainer","attemptLink","secondaryActionButton","wideButton","buttonSubtitle","handleForceEntry","faArrowLeft","audioLoader","granted","onMicGrantButton","mic_granted_default","mic_granted_2x_default","subtitleId","mic_level_widget_MicLevelWidget","output_level_widget_OutputLevelWidget","selectedMicDeviceId","micDeviceChanged","mic_small_default","mic_small_2x_default","dropdown_arrow_default","dropdown_arrow_2x_default","shouldShowHmdMicWarning","warning_icon_default","warning_icon_2x_default","overlay","showSafariMicDialog","safari_mic_dialog_SafariMicDialog","showSafariDialog","safari_dialog_SafariDialog","showWebAssemblyDialog","webassembly_unsupported_dialog_WebAssemblyUnsupportedDialog","exitEventHandler","showSignInDialog","showContextualSignInDialog","willCompileAndUploadMaterials","compileAndUploadMaterials","onConcurrentLoad","onSceneLoaded","onAframeStateChanged","onShareVideoEnabled","onShareVideoDisabled","onShareVideoFailed","onStoreChanged","audioContext","playSound","onMouseLeave","isExited","showPreload","isLoading","ui","ui-root","in-modal-or-overlay","isInModalOrOverlay","serviceWorker","showOAuthDialog","showInterstitialPrompt","oauth_dialog_OAuthDialog","onCloseOAuthDialog","renderExitedPane","react_components_loader","onLoadingFinished","renderInterstitialPrompt","renderBotMode","enteredOrWatching","enteredOrWatchingOrPreload","inEntryFlow","entryDialog","isWaitingForAutoExit","auto_exit_warning","state_route","renderDevicePanel","renderMicPanel","renderAudioSetupPanel","renderEntryStartPanel","dialogBoxContentsClassNames","uiDialogBoxContents","backgrounded","showVREntryButton","presenceLogEntries","showMediaBrowser","hasTopTip","clientInfoClientId","getClientInfoClientId","showClientInfo","hasEmbedPresence","hasDiscordBridges","showBroadcastTip","showInviteTip","streamingTip","streamingTipAttachPoint","streamingTipClose","streamingTipMessage","streamerName","Provider","preload_overlay_PreloadOverlay","onPreloadLoadClicked","profile_entry_panel","ui_root_extends","avatar_editor_AvatarEditor","onAvatarSaved","react_components_media_browser","renderDialog","rename","closeHub","createObject","changeScene","setAvatarUrl","client_info_dialog_ClientInfoDialog","uiDialog","presence_log_PresenceLog","tip_Tip","confirmBroadcastedRoom","in_world_chat_box","leaveButton","inviteStyles","inviteContainer","inviteContainerBelowHud","inviteContainerInverted","inviteTip","inviteTipAttachPoint","onMiniInviteClicked","inviteMiniButton","enterButton","invite_dialog_InviteDialog","hubEntryCode","initialIsSubscribed","link_dialog_LinkDialog","cameraModeExitButton","presence_list_PresenceList","settings_menu_SettingsMenu","spectating_label_SpectatingLabel","topHud","toggleMute","shareVideo","endShareVideo","showWebRTCScreenshareUnsupportedDialog","nagCornerButton","isSupportAvailable","MS_PER_DAY","MS_PER_MONTH","isSameMonth","da","db","getFullYear","getMonth","HUB_CREATOR_PERMISSIONS","HubChannel","hub_channel_defineProperty","Presence","_permissions","jwtDecode","nextRefresh","exp","hub_channel_asyncToGenerator","entryDisplayType","vrDisplay","isPresenting","initialOccupantCount","publisher","initialOccupants","entryEvent","hub_channel_objectSpread","getEntryTimingFlags","entryTimingFlags","isNewDaily","isNewMonthly","isNewDayWindow","isNewMonthWindow","storedLastEnteredAt","lastEnteredAt","lastEntered","msSinceLastEntered","getDate","isSameDay","object_type","update_hub","close_hub","subscription","allow","creatorAssignmentTokenEntry","_getCreatorAssignmentToken","perms_token","setPermissionsFromToken","_signedIn","oauth_url","gltfNode","fileAccessToken","promotionToken","gltf_node","file_access_token","permsToken","session_id","_blockedSessionIds","unblock","entities","completeSync","Set","permission","migrateToSocket","presenceBindings","onJoin","caller","onLeave","onSync","exceedsDensityThreshold","subtree","bounds","boundingData","isHighDensity","leftResult","rightResult","isGeometryHighDensity","roots","_roots","traverseMeshesAndAddShapes","shapes","meshRoot","group","__proto__","navMesh","shapePrefix","groupEnd","DUCK_URL","MessageDispatch","entryManager","addToPresenceLog","remountUI","message_dispatch_defineProperty","commandParts","dispatchCommand","activeElement","scales","curScale","physicsSystem","captureSystem","setDebug","available","isDebug","SceneEntryManager","scene_entry_manager_defineProperty","whenSceneLoaded","_entered","scene_entry_manager_asyncToGenerator","session","verbose","_setupPlayerRig","_setupBlocking","_setupKicking","_setupMedia","_setupCamera","_spawnAvatar","SOUND_ENTER_SCENE","_runBot","sendEntryEvent","toISOString","bumpEntryCount","hasLoaded","localMediaStream","getTracks","setAnimationLoop","_setPlayerInfoFromProfile","avatarScale","kickedClientId","_unpinElement","removeEntity","removeEntitiesOfClient","_ref4","storedPromotionToken","gltfComponents","equalArray","every","translation","mediaSrc","mediaContentSubtype","pinnedEntityToGltf","pin","_signInAndPinOrUnpinElement","_pinElement","_disableSignInOnPinAction","mediaLoader","unpin","spawnMediaInfrontOfPlayer","contentOrigin","or","currentVideoShareEntity","FILE","sendObjectSpawnedEvent","contentEditable","uiRoot","clipboardData","getData","CLIPBOARD","dataTransfer","isHandlingVideoShare","shareVideoMediaStream","newStream","frameRate","removeTrack","spawnDelay","_ref8","audioEl","audioInput","dataInput","getAudio","crossorigin","onchange","getRecording","captureStream","mozCaptureStream","INIT_TIMEOUT_MS","urlBase64ToUint8Array","base64String","base64","repeat","rawData","atob","outputArray","charCodeAt","Subscriptions","subscriptions_defineProperty","registration","vapidPublicKey","_isSubscribed","subscriptions_asyncToGenerator","startedAt","pushManager","convertedVapidKey","permissionState","userVisibleOnly","applicationServerKey","getSubscription","endpoint","pushSubscription","has_remaining_subscriptions","invaderPos","bubblePos","createSphereGizmo","WireframeGeometry","line","LineSegments","invaders","bubbles","tickCount","_updateInvaders","registerBubble","bubble","unregisterBubble","registerInvader","invader","unregisterInvader","updateDebug","setInvading","tempInvasionFlags","setInvaderFlag","distanceSquared","radiusSum","flushInvadingFlagsForIndex","meshName","targetMesh","useMaterial","invadingOpacity","findInvaderMesh","radiusSquared","system","modeMod","WheelEvent","DOM_DELTA_PIXEL","DOM_DELTA_LINE","DOM_DELTA_PAGE","isInModal","MouseDevice","queueEvent","deltaX","deltaY","deltaMode","clientX","innerWidth","clientY","innerHeight","movementX","movementY","mouseDownLeftThisFrame","mouseDownRightThisFrame","write","didStopProcessingEarly","setVector2","setValueType","ArrayBackedSet","initialItems","items","oncontextmenu","KeyboardDevice","seenKeys","nodeName","HudDevice","XboxControllerDevice","buttonMap","buttonId","axisMap","axisId","getGamepads","connected","xboxPaths","hapticActuators","Pose","fromOriginAndDirection","setFromUnitVectors","fromCameraProjection","normalizedX","normalizedY","unproject","EYES_TO_ELBOW","FOREARM","applyArmModel","controllerEuler","deltaControllerPosition","controllerQuaternion","controllerPosition","gamepadPose","headObject3D","userHeight","applyAxisAngle","up","fromArray","applyEuler","copySittingToStandingTransform","stageParameters","sittingToStandingTransform","ONES","TOUCHPAD","TRIGGER","OculusGoControllerDevice","sittingToStandingMatrix","rayObject","rayMatrixWorld","setPose","setMatrix4","TOUCHPAD_X","TOUCHPAD_Y","GearVRControllerDevice","leftOculusTouchButtonMap","rightOculusTouchButtonMap","LEFT_HAND_OFFSET","RIGHT_HAND_OFFSET","OculusTouchControllerDevice","buttonMaps","devicePaths","handOffset","HAND_OFFSET","POSE","MATRIX","DaydreamControllerDevice","RAY_ROTATION","ViveControllerDevice","WindowsMixedRealityControllerDevice","CircularBuffer","fill","writePtr","difference","GyroDevice","hmdEuler","hmdQuaternion","prevX","prevY","dXBuffer","dYBuffer","hasPolyfill","webvrpolyfill","getPolyfillDisplays","frameData","VRFrameData","getFrameData","dX","dY","findHandCollisionTargetForHand","driver","numManifolds","dispatcher","getNumManifolds","handPtr","Ammo","getPointer","persistentManifold","getManifoldByIndexInternal","body0ptr","getBody0","body1ptr","getBody1","numContacts","getNumContacts","getContactPoint","getDistance","els","tags","remoteHoverTargets","findRemoteHoverTarget","updateCursorIntersection","rightRemoteHoverTarget","dropPath","hoverFn","getRightRemoteHoverTarget","previousState","tickInteractor","lostOwnership","rightHandTeleporter","gazeTeleporter","rightHandInteracting","rightHandTeleporting","rightRemotePenIntersectingInVR","enableRightRemote","SOUND_HOVER_OR_GRAB","calculateCursorPose","AppAwareMouseDevice","prevButtonLeft","clickedOnAnything","prevCursorPose","prevOrigin","prevDirection","rawIntersections","cursorTargettingSystem","remoteHoverTarget","touchIsAssigned","touch","assignments","assignment","identifier","jobIsAssigned","job","unassign","findIndex","findByJob","findByTouch","MOVE_CURSOR_JOB","MOVE_CAMERA_JOB","FIRST_PINCHER_JOB","SECOND_PINCHER_JOB","TAP_PATHS","x1","y1","x2","y2","dx","dy","getPlayerCamera","AppAwareTouchscreenDevice","pendingTap","maxTouchCount","tapIndexToWriteNextFrame","framesUntilGrab","framesUntilUnassign","second","first","cameraMover","isFirstTouch","isSecondTouch","isThirdTouch","hasSecondPinch","setFromCamera","shouldMoveCursor","cursorJob","previousAssignment","changedTouches","touches","hasCursorJob","hasCameraJob","xforms","dest","scalar","scaleExp","pow","deadzone","deadzoneSize","split_vec2","compose_vec2","copyIfFalse","copyIfTrue","zeroIfDefined","true","rising","risingWithFrameDelay","falling","vec2Zero","poseFromCameraProjection","vec2dpad","deadzoneRadius","invertX","invertY","deadzoneRadiusSquared","atan2","always","constValue","wasd_to_vec2","vec2","add_vec2","max_vec2","normalize_vec2","any","touch_axis_scroll","snap_to","touching","addSetsToBindings","mapping","setName","binding","togglePenWithP","togglePenWithHud","keyboardMouseUserBindings","global","xform","priority","cursorHoldingUI","cursorHoveringOnVideo","inputFocused","cursorHoveringOnUI","touchCamDelta","touchscreenUserBindings","cursorHoveringOnPen","keyboardDebuggingBindings","leftButton","leftAxis","leftPose","rightButton","rightAxis","rightPose","rightGripRisingGrab","lowerButtons","leftGripPressed1","leftGripPressed2","rightGripPressed1","rightGripPressed2","leftTriggerPressed1","leftTriggerPressed2","rightTriggerPressed1","rightTriggerPressed2","oculusTouchUserBindings","north","south","east","west","override","leftHandHoveringOnNothing","cursorHoveringOnNothing","leftHandHoveringOnInteractable","leftHandHoldingInteractable","leftHandHoveringOnPen","leftHandHoldingPen","rightHandHoveringOnInteractable","rightHandHoldingInteractable","rightHandHoveringOnPen","rightHandHoldingPen","cursorHoveringOnCamera","rightHandHoveringOnCamera","leftHandHoveringOnCamera","rightHandHoldingCamera","leftHandHoldingCamera","rightHandHoveringOnNothing","lButton","lAxis","lPose","lJoy","lJoyScaled","lJoyXScaled","lJoyYScaled","lDpadNorth","lDpadSouth","lDpadEast","lDpadWest","lDpadCenter","lTriggerFallingStopDrawing","lGripFallingStopDrawing","lTriggerRisingGrab","lGripRisingGrab","lTouchpadRising2","lTouchpadRising1","lCharacterAcceleration","leftBoost","rButton","rAxis","rPose","rJoy","rDpadNorth","rDpadSouth","rDpadEast","rDpadWest","rDpadCenter","rDpadCenterStrip","rTouchpadRising","rTouchpadFalling","rightBoost","rTriggerRisingGrab","rGripRisingGrab","cursorDrop1","cursorDrop2","rHandDrop1","rHandDrop2","rTriggerStopTeleport","rTouchpadStopTeleport","ensureFrozenViaDpad","ensureFrozenViaKeyboard","thawViaDpad","thawViaKeyboard","rSnapRight","rSnapLeft","keyboardSnapRight","keyboardSnapLeft","keyboardCharacterAcceleration","wasd_vec2","arrows_vec2","keyboardBoost","leftTouchpadPressed1","leftTouchpadPressed2","leftTouchpadFallingStopTeleport","leftTriggerFallingStopTeleport","leftGripFallingWhileHoldingPen","viveUserBindings","leftHandTeleporting","lGripPressed","rGripPressed","rTriggerPressed","rJoyNorth","rGripRising","rTriggerRising","rGripFalling","rTriggerFalling","dpadVariables","padWest","padEast","padNorth","padSouth","padCenter","padCenterStrip","dpadBindings","neverFrozenBinding","penBindings","forCursor","padY","triggerPressed","padPressed","padTouched","padRising","padCenterStripTouched","handPoseBindings","gripPressed","holdingCameraBindings","wmrUserBindings","leftPadPressed","rightPadPressed","leftPadFalling","rightPadFalling","keyboardSaceFalling","freezeBindings","rJoyWest","rJoyEast","rJoyWestRising","rJoyEastRising","keyboardQRising","keyboardERising","teleportationAndRotationBindings","lJoyXDeadzoned","lJoyYDeadzoned","characterAccelerationBindings","cursorMediaVolumeModBindings","rPadNorthOrSouth","rPadNorthOrSouthPressed","rPadNorthOrSouthPressedY","cursorModDeltaBindings","scaledRightJoystickVertical","scaledLeftJoystickCursorDelta","deadzonedRightJoystickHorizontal","deadzonedRightJoystickVertical","deadzonedLeftJoystickHorizontal","deadzonedLeftJoystickVertical","disableForwardOnTrigger","scaledLeftJoystickHorizontal","scaledLeftJoystickVertical","scaledLeftJoystickForwardAcceleration","xboxControllerUserBindings","cursorHoldingNothing","touchpadRising","touchpadFalling","touchpadPressed","dpadNorth","dpadSouth","dpadEast","dpadWest","dpadCenter","brushSizeDelta","cursorModDelta","dpadSouthDrop","dpadCenterDrop","grabBinding","dropOnCenterOrSouth","daydreamUserBindings","cardboardUserBindings","generate3DOFTriggerBindings","touchpadButton","triggerButton","touchpadX","touchpadXForPen","touchpadY","touchpadYForPen","triggerRising","triggerFalling","dpadCenterStrip","dpadBottomCenterStrip","togglePen","dropBinding","leftTeleporter","rightTeleporter","GamepadDevice","buttonPath","gamepadBindings","oculusGoUserBindings","gearVRControllerUserBindings","satisfiesPath","satisfyPath","satisfiedBy","canMask","masker","masked","maskerKey","maskerPath","maskedKey","isActive","toggleSet","pendingSetChanges","generation","generations","mat4","prevActiveSets","xformStates","activeDevices","registeredMappings","registeredMappingsChanged","vrGamepadMappings","nonVRGamepadMappings","updateBindingsForVRMode","activeDevice","gamepadConnected","gamepadDevice","maybeToggleXboxMapping","vrAxesSum","mouseMovement","nonXboxActivity","hasXboxMapping","prevSortedBindings","sortedBindings","mappings","unsorted","sorted","dependencySort","masks","masksRow","bindingsRow","col","computeMasks","teleporter","leftHandHoveringOnVideo","rightHandHoveringOnVideo","resolveActionSets","activeSetsChanged","il","elem","jl","arrayContentsDiffer","actives","prevActives","prevMasked","maskedRow","computeExecutionStrategy","bindingExistedLastFrame","_onWindowResize","mirrorEl","directRenderFunc","_patchRenderFunc","oldEl","setSize","wasVREnabled","PATHS_TO_SHOW","userinputFrameStatus","replacer","pathsOutput","val","textContent","sb","logBindings","MEDIA_SEARCH_PATHS","prefix","CursorTargettingSystem","setDirty","dirty","observer","MutationObserver","observe","childList","populateEntities","ACTIVATION_STATE","ConstraintsSystem","prevLeftHand","prevRightHand","prevRightRemote","constraintTag","entityId","hasAnotherConstraint","activationState","ACTIVE_TAG","DISABLE_DEACTIVATION","COLLISION_FILTER_MASK_HANDS","distanceBetweenStretchers","obj1","obj2","distanceTo","TwoPointStretchingSystem","leftStretcher","rightStretcher","previousLeftStretcher","previousRightStretcher","stretched","initialStretchDistance","SingleActionButtonSystem","didInteractThisFrame","HoldableButtonSystem","prevHeld","hasButtonComponent","BUTTON_COMPONENT_NAMES","dispatch","HOVERED","UNHOVERED","HoverButtonSystem","getHoverableButton","getSpecificHoverMenu","HoverMenuSystem","findHoverMenu","prevHoverMenu","SuperSpawnerSystem","maybeSpawn","superSpawner","performSpawn","spawnedEntity","copyState","STRENGTH","DROP","PICKUP","BUTTON_PRESSED","HOVER","STRETCH_BASE","STRETCH_DISTANCE","TELEPORTING","TELEPORTED","determineStrength","HapticFeedbackSystem","twoPointStretchingSystem","didClickButton","leftActuator","rightActuator","leftHandStrength","rightHandStrength","rightRemoteStrength","buttonPressedStrength","stretchingStrength","stretchSystem","stretcherLeft","stretcherRight","leftStrength","rightStrength","pulse","tempVec3","tempVec4","INSTANCE_DATA_BYTE_LENGTH","DEFAULT_COLOR","HIDE_MATRIX","makeScale","sizeofInstances","HubsBatchRawUniformGroup","BatchRawUniformGroup","maxInstances","ArrayBuffer","hubs_sweepParams","byteLength","hubs_interactorOnePos","hubs_isFrozen","Uint32Array","hubs_interactorTwoPos","hubs_time","instanceId","setInstanceTransform","setInstanceColor","highlightInteractorOne","highlightInteractorTwo","MAX_INSTANCES","UBO_BYTE_LENGTH","BatchManagerSystem","WeakMap","gl","WebGL2RenderingContext","getParameter","MAX_UNIFORM_BLOCK_SIZE","ubo","BatchManager","unlit","unlitBatchVert","unlitBatchFrag","rootObject","batchedCount","addMesh","removeMesh","LobbyCameraSystem","constraintsSystem","singleActionButtonSystem","holdableButtonSystem","hoverButtonSystem","hoverMenuSystem","superSpawnerSystem","hapticFeedbackSystem","SoundEffectsSystem","lobbyCameraSystem","_gotAudioTrack","_recorderTimeout","_initRecorder","_stream","_recorder","MediaRecorder","mimeType","chunks","ondataavailable","onstop","Blob","isTypeSupported","_tryAddingAudioTrack","destination","createMediaStreamDestination","getInput","multiviewVertPrefix","nonmultiviewVertPrefix","multiviewFragPrefix","nonmultiviewFragPrefix","didRegisterWithSystem","didFailToRegister","registered","updateUVs","normalizedFrame","memo","spritesheet","missingSprites","ret","raycastOnSprite","vA","vB","vC","vD","intersectionInfo","intersect","ray","intersectTriangle","getHoverableVisuals","comp","ZEROS","SpriteSystem","slots","indexWithSprite","maxSprites","spriteWithIndex","stack","concat","multiview","vert","frag","spritesheetPng","spritesheetTexture","RawShaderMaterial","u_spritesheet","mvCols","InterleavedBuffer","InterleavedBufferAttribute","indices","setIndex","createGeometry","renderOrder","RENDER_ORDER","HUD_ICONS","uniformsNeedUpdate","aEnableSweepingEffect","aSweepParams","enableSweepingEffectValue","setXY","aUvs","aVertices","setXYZ","hubsSystems","deltaScale","addScalar","clampScalar","HIGHLIGHT","NO_HIGHLIGHT","TRANSFORM_COLOR_1","TRANSFORM_COLOR_2","defaultDistance","minDistance","firstHitOnly","lineGeometry","Line","LineBasicMaterial","cameraPos","isGrabbing","addScaledVector","lerpHSL","posePosition","cursorPosition","positionArray","computeBoundingSphere","DRAW_MODE","drawFrequency","minDistanceBetweenPoints","drawingManager","availableColors","minRadius","maxRadius","timeSinceLastDraw","lastPosition","currentDrawing","worldPosition","colorIndex","grabbed","originalPosition","lastIntersectionDistance","MeshStandardMaterial","penTip","lineStartPosition","lineEndPosition","worldQuaternion","_startDraw","SOUND_PEN_START_DRAW","_endDraw","SOUND_PEN_STOP_DRAW","penScaleMod","_changeRadius","_changeColor","SOUND_PEN_CHANGE_COLOR","_undoDraw","SOUND_PEN_UNDO_DRAW","getLastWorldQuaternion","_setPenVisible","_setLineVisible","lastIntersectedObject","getLastPoint","_getNormal","draw","directionToCamera","crossVectors","startDraw","endDraw","undoDraw","mod","SharedBufferGeometry","primitiveMode","maxBufferSize","geometries","addBuffer","restartPrimitive","addVertex","prevIdx","componentSize","diff","undo","normals","colors","setDrawRange","addColor","g","addNormal","buffer","SharedBufferGeometryManager","sharedBuffers","addSharedBuffer","getSharedBuffer","copyData","fromIndex","toIndex","segments","defaultRadius","maxDrawTimeout","maxLines","maxPointsPerLine","_receiveData","networkBuffer","sendNetworkBufferQueue","drawStarted","lineStarted","remoteLineStarted","receivedBufferParts","bufferIndex","connectedToOwner","networkBufferInitialized","VertexColors","sharedBufferGeometryManager","lastPoint","lastSegments","currentSegments","sharedBuffer","vertexCount","networkBufferCount","currentPointCount","invalidPointRead","lastReadPointCount","networkBufferHistory","onConnect","getNetworkId","drawingId","subscribeToDataChannel","unsubscribeToDataChannel","isConnected","hasActiveDataChannel","sendDataGuaranteed","_broadcastDrawing","_drawFromNetwork","_sendNetworkBuffer","_deleteExpiredLines","copyArray","broadcastDataGuaranteed","didWork","pointCount","setHex","_draw","_updateBuffer","drawTime","datum","idxLength","uv","parts","ceil","dataType","_addToNetworkBuffer","getHexString","capNormal","radiusMultiplier","_generateSegments","_drawCylinder","_drawEndCap","_endLine","_addDegenerateTriangle","_restartPrimitive","_drawCap","_pushToNetworkBuffer","_drawPoint","projectedDirection","projectedPoint","clock","elapsedTime","copyDirection","copyNormal","setLength","getHex","_addVertex","down","segmentIndex","segment","segmentsList","angleIncrement","_rotatePointAroundAxis","calculatedDirection","registerNetworkSchemas","vectorRequiresUpdate","almostEqualVec3","schemas","requiresNetworkUpdate","BUILD_VERSION","patchWebGLRenderingContext","HUD_BACKGROUND","isEmbed","embedsEnabled","AmmoWasm","locateFile","firstSyncSource","isTelemetryDisabled","loadingEnvironmentURL","registerTelemetry","instanceKey","started_at","onStorageEvent","detectConcurrentLoad","uiProps","routerBaseName","createBrowserHistory","basename","qsVREntryType","userinputSets","Router","Route","react_components_ui_root","hub_objectSpread","hub_isBotMode","hub_store","hub_mediaSearchStore","mountUI","updateUIForHub","entry_code","updateEnvironmentForHub","isLegacyBundle","environmentScene","model_url","defaultSpaceTopic","topics","glbAsset","asset_type","bundleAsset","hasExtension","baseURL","LoaderUtils","extractUrlBase","environmentEl","childNodes","Cache","messageDispatch","allowNAFTraffic","hubs","embedTokenEntry","executeOnLoadActions","onMediaSearchCancelled","objectsScene","objectsUrl","objectsEl","connectToScene","hub_asyncToGenerator","room","serverURL","newHostPollInterval","setReconnectionListeners","currentServerURL","serverUrl","newServerURL","getHost","sendViaPhoenix","reliable","isOpen","connectionState","reliableTransport","unreliableTransport","loadEnvironmentAndConnect","connectError","isFull","_ref12","_x17","enterSceneWhenLoaded","WebAssembly","detectedOS","ready","setRegistration","setRegistrationFailed","initialized","texImage2D","compressedTexImage2D","patchThreeAllocations","AuthChannel","predicate","messageId","onFailure","actionError","_x9","_x10","_x11","_x12","sceneInfo","isInOAuth","exitOAuth","clearOnLoadActions","getTwitterOAuthURL","enqueueOnLoadAction","LinkChannel","handleEarlyVRMode","getVRDisplay","chatFocusTarget","RTCDataChannelEvent","buildNumber","hasVREntryDevice","onFirstEnvironmentLoad","previewCamera","reorder","setupLobbyCamera","runBotMode","retDeployReconnectInterval","retPhxChannel","_ref5","setVapidPublicKey","vapid_public_key","_x13","pushSubscriptionEndpoint","getCurrentEndpoint","oauthFlowPermsToken","Cookies","createHubChannelParams","push_subscription_endpoint","auth_token","migrateToNewReticulumServer","_ref6","deployNotification","ret_version","ret_pool","tryReconnect","oldSocket","setSocket","teardown","_x14","_x15","hubPhxChannel","SOUND_CHAT_MESSAGE","isInitialJoin","setPhoenixChannel","session_token","vrHudPresenceCount","sendProfileUpdate","__hadInitialSync","isSelf","currentMeta","setClientId","setJoinToken","setHubChannel","setSubscribed","web_push","hub_requires_oauth","handleHubChannelJoined","_x16","oauth_info","onData","incomingMessage","userInfo","getAuthor","_createInWorldLogMessage","createInWorldLogMessage","stale_fields","titleParts","oldSlug","slug","entry_mode","DialogContainer","currentTarget","onContainerClicked","_wrap_with_audio__WEBPACK_IMPORTED_MODULE_3__","_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_5__","isRequired","TEXTURE_PROPS","base_map","emissive_map","normal_map","orm_map","ALL_MAPS","createRenderer","alpha","useDevicePixelRatio","antialias","premultipliedAlpha","preserveDrawingBuffer","powerPreference","WebGLRenderer","gammaOutput","gammaFactor","physicallyCorrectLights","setPixelRatio","devicePixelRatio","createImageBitmapFromURL","ORBIT_ANGLE","DEFAULT_MARGIN","fitBoxInFrustum","halfYExtents","halfVertFOV","fov","tan","AvatarPreview","clientWidth","clientHeight","OrbitControls","enablePan","HemisphereLight","loadPreviewAvatar","setAvatar","Clock","snapshotCanvas","snapshotCamera","snapshotRenderer","setClearAlpha","previewRenderer","setClearColor","getDelta","parentElement","resetCamera","loading","getCenter","domElement","imageBitmaps","disposeImageBitmap","oldProps","applyMaps","previewMesh","idleAnimation","idleAnimationAction","getImage","onUpdate","originalMaps","bm","newProps","mapName","applyMap","applyMapToPreview","revertMap","react__WEBPACK_IMPORTED_MODULE_2___default","_assets_images_warning_icon_png__WEBPACK_IMPORTED_MODULE_0___default","_assets_images_warning_icon_2x_png__WEBPACK_IMPORTED_MODULE_1___default","react_intl__WEBPACK_IMPORTED_MODULE_4__","withRef","react_intl__WEBPACK_IMPORTED_MODULE_2__","signInComplete","continueButton","signInForm","emailField","terms","_dialog_container__WEBPACK_IMPORTED_MODULE_4__","media-browser","header-center","engine-attribution","engine-attribution-contents","favorites-header","no-search","nav-right-pad","nav-source","nav-source-selected","nav-scroll-arrow","tiles","tile","last-joined","lastJoined","tile-link","tileLink","tile-content","tileContent","avatar-tile","avatarTile","edit-avatar","create-tile","createTile","tiles-variable","tilesVariable","page-number","pageNumber","pager-button-disabled","pagerButtonDisabled","header-left","header-right","create-button","create-link","empty-string","media-browser-inline","mediaBrowserInline","email-field","next-button","continue-button","sign-in-form","sign-in-complete","ui-dialog","ui-interactive","presence-info","corner-button","profile-entry","form-submit","nag-corner-button","choose-scene-button","chooseSceneButton","choose-avatar","entry-button-secondary","entry-panel","button-container","secondary-action-button","leave-button","entry-button","action-button","collapse-button","favorite-button","favoriteButton","form-field-text","lobby-label","lobbyLabel","rename-button","renameButton","wide-button","screen-sharing","screenSharing","invite-tip","loading-text","streaming-tip","streaming-tip-attach-point","streaming-tip-close","streaming-tip-message","ui-dialog-box-contents","in-room-favorite-button","inRoomFavoriteButton","occupant-count","presence-info-selected","camera-mode-exit-button","corner-button-selected","invite-tip-attach-point","avatar-editor","display-name","entry-dialog","favorited","room-subtitle","lobby","profile-icon","profileIcon","button-subtitle","audio-loader","webvr-link-container","webvrLinkContainer","webvr-link","webvrLink","invite-container","link-button","enter-vr-button","invite-button","inviteButton","enter-button","invite-mini-button","embed-text","invite-container-inverted","embed-tip-wrap","embed-tip","hide-small-screens","hideSmallScreens","invite-container-below-hud","attach-point","keep-open","digit_2","digit2","digit_3","digit3","code-loading-panel","hub-link-link","embed-tip-attach-point","client-action-buttons","client-info-dialog","community-identifier","client-info","clientInfo","client-profile-image","client-details","clientDetails","client-main","clientMain","small-button","input-border","left-side-of-input","add-media-form","cancel-icon","upload-icon","hide-file-input","spoke-launch","change-scene-button","changeSceneButton","spoke-create","_assets_sfx_tick_mp3__WEBPACK_IMPORTED_MODULE_0__","_assets_sfx_tick_mp3__WEBPACK_IMPORTED_MODULE_0___default","_assets_sfx_teleport_loop_mp3__WEBPACK_IMPORTED_MODULE_1__","_assets_sfx_teleport_loop_mp3__WEBPACK_IMPORTED_MODULE_1___default","_assets_sfx_quickTurn_mp3__WEBPACK_IMPORTED_MODULE_2__","_assets_sfx_quickTurn_mp3__WEBPACK_IMPORTED_MODULE_2___default","_assets_sfx_tap_mellow_mp3__WEBPACK_IMPORTED_MODULE_3__","_assets_sfx_tap_mellow_mp3__WEBPACK_IMPORTED_MODULE_3___default","_assets_sfx_PenSpawn_mp3__WEBPACK_IMPORTED_MODULE_4__","_assets_sfx_PenSpawn_mp3__WEBPACK_IMPORTED_MODULE_4___default","_assets_sfx_PenDraw1_mp3__WEBPACK_IMPORTED_MODULE_5__","_assets_sfx_PenDraw1_mp3__WEBPACK_IMPORTED_MODULE_5___default","_assets_sfx_PicSnapHey_mp3__WEBPACK_IMPORTED_MODULE_6__","_assets_sfx_PicSnapHey_mp3__WEBPACK_IMPORTED_MODULE_6___default","_assets_sfx_welcome_mp3__WEBPACK_IMPORTED_MODULE_7__","_assets_sfx_welcome_mp3__WEBPACK_IMPORTED_MODULE_7___default","_assets_sfx_quack_mp3__WEBPACK_IMPORTED_MODULE_8__","_assets_sfx_quack_mp3__WEBPACK_IMPORTED_MODULE_8___default","_assets_sfx_specialquack_mp3__WEBPACK_IMPORTED_MODULE_9__","_assets_sfx_specialquack_mp3__WEBPACK_IMPORTED_MODULE_9___default","_assets_sfx_pop_mp3__WEBPACK_IMPORTED_MODULE_10__","_assets_sfx_pop_mp3__WEBPACK_IMPORTED_MODULE_10___default","_assets_sfx_Eb_blip_mp3__WEBPACK_IMPORTED_MODULE_11__","_assets_sfx_Eb_blip_mp3__WEBPACK_IMPORTED_MODULE_11___default","_assets_sfx_tack_mp3__WEBPACK_IMPORTED_MODULE_12__","_assets_sfx_tack_mp3__WEBPACK_IMPORTED_MODULE_12___default","_assets_sfx_A_bendUp_mp3__WEBPACK_IMPORTED_MODULE_13__","_assets_sfx_A_bendUp_mp3__WEBPACK_IMPORTED_MODULE_13___default","_assets_sfx_suspense_mp3__WEBPACK_IMPORTED_MODULE_14__","_assets_sfx_suspense_mp3__WEBPACK_IMPORTED_MODULE_14___default","soundEnum","pendingEffects","soundsAndUrls","URL_TICK","URL_TELEPORT_LOOP","URL_QUICK_TURN","URL_TAP_MELLOW","URL_PEN_SPAWN","URL_PEN_DRAW","URL_CAMERA_SNAPSHOT","URL_WELCOME","URL_QUACK","URL_SPECIAL_QUACK","URL_POP","URL_FREEZE","URL_TACK","URL_MEDIA_LOADING","URL_MEDIA_LOADED","audioBufferPromise","decodeAudioData","sounds","audioBuffer","enqueueSound","createBufferSource","createGain","avatar-url-dialog","close-button","name-field","rename-room-form","cancel-button","confirm-button","tip-root","tip-link","tip-cancel","split-tip","split-tip-icon","spawn_menu-icon","spawnMenuIcon","object_rotate_button-icon","objectRotateButtonIcon","object_scale_button-icon","objectScaleButtonIcon","object_recenter_button-icon","objectRecenterButtonIcon","form-frame","leave-room","room-info","scene-screenshot","scene-details","scene-main","scene-name","scene-creator","scene-attributions","attribution-name","attribution-author","oauth-discord-button","oauth-twitter-button","oauth-button","oauth-type-name","oauth-icon","oauthIcon","privacy-notice","oauth-buttons","twitter-message","tweet-button","editor-inner","emoji-button","highlight","tweet-loader","dialog-background","message-entry-in-room","message-entry-spawn","message-entry-input","message-entry","message-entry-disabled","message-entry-button","message-entry-button-in-room","message-entry-upload","message-entry-input-in-room","message-entry-input-no-spawn","message-entry-on-mobile","command-help","presence-log","presence-log-entry","message-body","message-body-multi","message-body-mono","message-wrap","message-wrap-multi","message-source","message-source-link","icon-button","spawn-message","presence-log-entry-with-button","presence-log-in-room","presence-log-spawn","presence-log-entry-one-line","presence-log-emoji","client-link","presence-list","row-header","list-item","list-item-link","sign-in","moderator-badge","bottom-links-main","bottomLinksMain","bottom-links","bottomLinks","settings-menu","settings-row","load-button","hub-name","main-panel","tip-cancel-text","top-tip","column","attach_video_share_mode","attachVideoShareMode","attach_video_share_failed","attachVideoShareFailed","attach_pen_mode","attachPenMode","attach_mute_mode","attachMuteMode","attach_freeze_mode","attachFreezeMode","top-tip-no-hud","video-share-extra-options","small","large","video-share","freeze","mobile-media-picker","mobileMediaPicker","share_camera","shareCamera","share_screen","shareScreen","share_window","shareWindow","computeObjectAABB","boxRoot","isEmpty","matrixWorldNeedsUpdate","dZ","auth.verified-title","auth.verified","auth.spoke-verified","sign-in.prompt","sign-in.auth-started","sign-in.pin","sign-in.pin-complete","sign-in.unpin","sign-in.unpin-complete","sign-in.change-scene","sign-in.change-scene-complete","sign-in.rename-room","sign-in.rename-room-complete","sign-in.close-room","sign-in.close-room-complete","sign-in.mute-user","sign-in.mute-user-complete","sign-in.kick-user","sign-in.kick-user-complete","sign-in.create-avatar","sign-in.create-avatar-complete","sign-in.favorite-room","sign-in.favorite-rooms","sign-in.favorite-room-complete","sign-in.favorite-rooms-complete","sign-in.as","sign-in.in","sign-in.out","rename-room.message","rename-room.rename","close-room.message","close-room.confirm","close-room.cancel","entry.room","entry.enter-room-title","entry.enter-room","entry.leave-room","entry.change-scene","entry.in-lobby-notice","entry.screen-prefix","entry.desktop-screen","entry.mobile-screen","entry.mobile-safari","entry.generic-prefix","entry.generic-medium","entry.generic-subtitle-desktop","entry.gearvr-prefix","entry.gearvr-medium","entry.choose-device","entry.device-medium","entry.device-subtitle-desktop","entry.device-subtitle-mobile","entry.device-subtitle-vr","entry.cardboard","entry.daydream-prefix","entry.daydream-medium","entry.daydream-via-chrome","entry.invite-others","entry.share-button","entry.desktop.invite-tip","entry.mobile.invite-tip","entry.invite-team-nag","entry.enable-screen-sharing","entry.return-to-vr","entry.enter-in-vr","entry.open-in-window","entry.lobby","entry.back","entry.notify_me","entry.mute-on-entry","profile.save","profile.display_name.validation_warning","profile.header","profile.terms_of_use","profile.privacy_notice","profile.choose_avatar","profile.tabs.legacy","profile.tabs.skinnable","profile.tabs.url","profile.info","profile.info-link","avatar-editor.info","avatar-editor.info-link","avatar-preview.loading-failed","media-browser.search-placeholder.scenes","media-browser.search-placeholder.avatars","media-browser.search-placeholder.videos","media-browser.search-placeholder.images","media-browser.search-placeholder.youtube","media-browser.search-placeholder.gifs","media-browser.search-placeholder.twitch","media-browser.search-placeholder.sketchfab","media-browser.search-placeholder.poly","media-browser.search-placeholder.base","media-browser.favorites-header","media-browser.add_custom_object","media-browser.add_custom_scene","media-browser.add_custom_avatar","media-browser.privacy_policy","media-browser.spoke","media-browser.report_issue","media-browser.powered_by.images","media-browser.powered_by.videos","media-browser.powered_by.youtube","media-browser.powered_by.gifs","media-browser.powered_by.sketchfab","media-browser.powered_by.poly","media-browser.powered_by.twitch","media-browser.powered_by.scenes","media-browser.powered_by.avatars","media-browser.empty.images","media-browser.empty.videos","media-browser.empty.youtube","media-browser.empty.gifs","media-browser.empty.sketchfab","media-browser.empty.poly","media-browser.empty.twitch","media-browser.empty.favorites","media-browser.nav_title.youtube","media-browser.nav_title.videos","media-browser.nav_title.images","media-browser.nav_title.gifs","media-browser.nav_title.scenes","media-browser.nav_title.avatars","media-browser.nav_title.sketchfab","media-browser.nav_title.poly","media-browser.nav_title.twitch","media-browser.create-avatar","media-browser.create-scene","media-browser.hub.joined-prefix","audio.title","audio.talk_to_test","audio.click_to_test","audio.subtitle-desktop","audio.subtitle-mobile","audio.enter-now","audio.hmd-mic-warning","audio.grant-title","audio.grant-subtitle","audio.granted-title","audio.granted-subtitle","audio.granted-next","exit.subtitle.exited","exit.subtitle.closed","exit.subtitle.denied","exit.subtitle.kicked","exit.subtitle.left","exit.subtitle.full","exit.subtitle.connect_error","exit.subtitle.version_mismatch","autoexit.title","autoexit.title_units","autoexit.subtitle","autoexit.cancel","presence.entered_room","presence.entered_lobby","presence.join_lobby","presence.join_room","presence.leave","presence.name_change","presence.scene_change","presence.hub_name_change","presence.in_lobby","presence.in_room","home.create_a_room","home.desktop.add_pwa","home.mobile.add_pwa","home.take_a_tour","home.room_create_options","home.room_create_button","home.create_name.validation_warning","home.join_us","home.have_code","home.add_to_discord_1","home.add_to_discord_2","home.add_to_discord_3","home.create_with_spoke","home.report_issue","home.source_link","home.whats_new_link","home.spoke_link","home.about_link","home.community_link","home.privacy_notice","home.terms_of_use","home.get_updates","home.hero_title","home.hero_blurb","home.made_with_love","home.environment_author_by","dialog.close","mailing_list.privacy_label","mailing_list.privacy_link","link.link_page_header_entry","link.link_page_header_headset","link.linking_a_headset","link.try_again","help.report_issue","scene.logo_tagline","scene.create_button","scene.tweet_button","scene.unavailable","link.in_your_browser","link.enter_code","link.do_not_close","link.connect_headset","link.cancel","invite.enter_via","invite.enter_via_modal","invite.tweet","invite.and_enter_code","invite.or_visit","invite.or_visit_modal","invite.embed","invite.embed-tip","spoke.primary_tagline","spoke.secondary_tagline","spoke.thank_you","spoke.download_win","spoke.download_macos","spoke.download_linux","spoke.download_unsupported","spoke.browse_all_versions","spoke.beginner_tutorial_button","spoke.advanced_tutorial_button","spoke.play_button","commands.fly","commands.grow","commands.shrink","commands.scene","commands.rename","commands.help","commands.leave","commands.duck","commands.capture","commands.debug","commands.vrstats","settings.change-avatar","settings.change-scene","settings.favorites","settings.rename-room","settings.close-room","settings.room-info","settings.create-room","settings.create-scene","settings.send-feedback","settings.whats-new","settings.features","settings.controls","settings.community","settings.tips","settings.report","settings.terms","settings.privacy","settings.help","settings.row-profile","settings.row-room","tips.mobile.video_share_mode","tips.mobile.pen_mode","tips.mobile.mute_mode","tips.mobile.freeze_mode","tips.mobile.look","tips.mobile.locomotion","tips.mobile.spawn_menu-pre","tips.mobile.spawn_menu-post","tips.mobile.freeze_gesture","tips.mobile.object_grab","tips.mobile.object_rotate_button-pre","tips.mobile.object_rotate_button-post","tips.mobile.object_scale_button-pre","tips.mobile.object_scale_button-post","tips.mobile.object_recenter_button-pre","tips.mobile.object_recenter_button-post","tips.mobile.object_pin","tips.mobile.invite","tips.desktop.video_share_mode","tips.desktop.pen_mode","tips.desktop.mirror_mode","tips.desktop.mute_mode","tips.desktop.look","tips.desktop.locomotion","tips.desktop.turning","tips.desktop.spawn_menu-pre","tips.desktop.spawn_menu-post","tips.desktop.freeze_gesture","tips.desktop.menu_hover","tips.desktop.object_grab","tips.desktop.object_pin","tips.desktop.object_zoom","tips.desktop.object_rotate_button-pre","tips.desktop.object_rotate_button-post","tips.desktop.object_scale_button-pre","tips.desktop.object_scale_button-post","tips.desktop.object_recenter_button-pre","tips.desktop.object_recenter_button-post","tips.desktop.object_scale","tips.desktop.pen_color","tips.desktop.pen_size","tips.desktop.invite","tips.desktop.watching","tips.watching.back","tips.mobile.watching","tips.watching-exit","loader.entering_lobby","loader.loading","loader.object","loader.objects","change-scene-dialog.change-scene","change-scene-dialog.create-in-spoke","change-scene-dialog.new-spoke-project","avatar-url-dialog.apply","interstitial.prompt","feedback.prompt","hide-ui.prompt","discord.primary_tagline","discord.secondary_tagline","discord.contact_us","discord.community_link","discord.splash_tag","client-info.kick-button","client-info.hide-button","client-info.unhide-button","client-info.mute-button","client-info.cancel","avatar-landing.select","avatar-landing.selected","leave-room-dialog.join-room.message","leave-room-dialog.join-room.confirm","leave-room-dialog.create-room.message","leave-room-dialog.create-room.confirm","embed.load-button","embed.presence-warning","i18n_messages","navigatorLang","language","userLanguage","localeData","debug__WEBPACK_IMPORTED_MODULE_0__","debug__WEBPACK_IMPORTED_MODULE_0___default","_qs_truthy__WEBPACK_IMPORTED_MODULE_1__","logFilter","verifyAuthentication","authTopic","authToken","authPayload","handleAuthCredentials","PNGFileSignature","JPEGFileSignature","signaturesEqual","referenceFileSignature","signatureLength","bufferView","loadAsync","loader","getChunkType","byteOffset","arr","HubsTextureLoader","manager","DefaultLoadingManager","onLoad","loadTextureAsync","fileLoader","FileLoader","setResponseType","bytes","Response","dataView","DataView","colorType","getUint8","chunkHeaderSize","curChunkOffset","curChunkType","getUint32","imageLoader","ImageBitmapLoader","setCrossOrigin","setPath","cacheKey","resolveURL","mediaAPIEndpoint","resolveUrlCache","media_utils_asyncToGenerator","response","Content-Type","ok","statusText","resolved","formData","FormData","interactableId","needsToBeUploaded","fireLoadingTimeout","reader","FileReader","getUint16","marker","little","readAsArrayBuffer","getOrientation","srcUrl","uploadPromotionTokens","objectTypeForOriginAndContentType","vertexRegex","fragRegex","shaderUniforms","newMaterial","onBeforeCompile","vlines","vindex","unshift","flines","findex","mediaHighlightFrag","mediaPos","snapCount","mirrorOrientation","rotateY","_createImageTexture","tempVector3","disposeMaterial","mtrl","lightMap","bumpMap","normalMap","specularMap","materialArray","MeshFaceMaterial","MultiMaterial","fn","emailParts","emailIdentity","emailDomain","dayjs","extend","relativeTime","PUBLISHER_FOR_ENTRY_TYPE","sketchfab_model","poly_model","twitch_stream","MediaTiles","isImage","isAvatar","imageAspect","isHub","getTileDimensions","publisherName","_state_link__WEBPACK_IMPORTED_MODULE_14__","_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_6__","faExternalLinkAlt","react_intl__WEBPACK_IMPORTED_MODULE_5__","last_activated_at","fromNow","createTileWidth","createTileHeight","hasMeta","apiSource","isVariableWidth","hasNext","hasPrevious","entryToTile","previousPage","faAngleLeft","page","nextPage","originalGetExtension","WebGLRenderingContext","getExtension","supportsFloatTextures","dataTexture","DataTexture","FloatType","Camera","getError","checkFloatTextureSupport","names","selectRandom","avatarIds","av","generateDefaultProfile","LOCAL_STORE_KEY","STORE_STATE_CACHE_KEY","OAUTH_FLOW_CREDENTIALS_KEY","validator","Validator","additionalProperties","personalAvatarId","confirmedDiscordRooms","onLoadActions","$ref","oauthFlowCredentials","getJSON","resetConfirmedBroadcastedRooms","clearStoredArray","resetTipActivityFlags","currentEntryCount","arrayMerge","destinationArray","sourceArray","mergeOpts","finalState","validate","deriveKey","privateKey","publicKey","crypto","subtle","public","publicKeyToString","exportKey","stringToPublicKey","importKey","namedCurve","stringToArrayBuffer","buf","arrayBufferToString","keyPair","generateKey","publicKeyString","incomingPublicKeyString","iv","incomingPublicKey","secret","encryptedData","encrypt","base64value","ciphertext","decrypt","LINK_ACTION_TIMEOUT","getLetter","readyToSend","leftChannel","leave","incoming","_generatePublicKeyAndEncryptedObject","generatePublicKeyAndEncryptedObject","public_key","target_session_id","reply_to_session_id","_generateKeys","generateKeys","numOccupants","_x7","_x8","_decryptObject","decryptObject","_fullscreen__WEBPACK_IMPORTED_MODULE_1__","isExitingFullscreenDueToFocus","URL_IMAGE","URL_VIDEO","URL_MODEL","URL_PDF","URL_AUDIO","FILE_IMAGE","FILE_VIDEO","FILE_MODEL","FILE_PDF","FILE_AUDIO","CLIPBOARD_IMAGE","CLIPBOARD_VIDEO","CLIPBOARD_MODEL","CLIPBOARD_PDF","CLIPBOARD_AUDIO","SPAWNER_IMAGE","SPAWNER_VIDEO","SPAWNER_MODEL","SPAWNER_PDF","SPAWNER_AUDIO","UNKNOWN","objectTypeForOrigin","urlType","fileType","clipboardType","spawnerType","objectTypeMimePrefixLookupMap","image/","model/","application/x-zip-compressed","video/","application/vnd.apple.mpegurl","application/x-mpegurl","audio/","application/pdf","srcSuffixLookupMap",".m3u8","raven_js__WEBPACK_IMPORTED_MODULE_0__","raven_js__WEBPACK_IMPORTED_MODULE_0___default","ga","trackedPage","trackedTitle","sentryDsn","SENTRY_DSN","gaTrackingId","GA_TRACKING_ID","Raven","install","_qs_truthy__WEBPACK_IMPORTED_MODULE_0__","showLog","debugLog","debugLogInput","debugLogEval","onsubmit","eval","minimized","debugLogMinimize","onclick","scrollHeight","origConsoleLog","origConsoleError","origConsoleWarn","objs","firstObj","shouldScroll","onunhandledrejection","zeroPos","zeroQuat","oneScale","bindingSetters","PropertyBinding","SetterByBindingTypeAndVersioning","Versioning","setter","MatrixWorldNeedsUpdate","targetObject","getWorldScale","handleMatrixModification","cachedMatrixWorld","applyMatrix","forceLocalUpdate","forceWorldUpdate","skipParents","hasHadFirstMatrixUpdate","childrenNeedMatrixWorldUpdate","forceChildrenWorldUpdate","q1","m1","isVector3","isCamera","isLight","extractRotation","animation","colorHelperFrom","colorHelperTo","getComponentProperty","setComponentProperty","splitCache","TYPE_COLOR","STRING_COMPONENTS","STRING_OBJECT3D","toRadians","addEventListeners","eventNames","handler","removeEventListeners","getRawProperty","splitDot","setRawProperty","propertyName","targetValue","startEvents","pauseEvents","resumeEvents","eventDetail","animationIsPlaying","onStartEvent","beginAnimation","pauseAnimation","resumeAnimation","fromColor","toColor","targetsArray","updateConfigForDefault","updateConfigForRawColor","createAndStartAnimation","cancelDelayedStart","pausedWasPlaying","updateConfig","delayTimeout","stopRelatedAnimations","waitComponentInitRawProperty","setColorConfig","isBoolean","isNaN","parseFloat","aframeProperty","updateConfigForVector","coordinates","propType","getPropertyType","cb","wait","AmbientLight","prevVolume","smoothing","threshold","_updateAnalysis","soundSource","avatarIsQuiet","amplitude","currVolume","lastSeenVolume","minScale","maxScale","_playerCamera","_playerCameraWorldPosition","_worldPosition","audioAnalyser","initialForce","maxForce","hasBody","CANNON","Vec3","applyForce","generateAndAddHeightfield","shape","mult","cannonOffset","Heightfield","elementSize","addShape","skyColor","groundColor","onQualityChanged","PointLight","innerConeAngle","outerConeAngle","SpotLight","penumbra","autoLockOnLoad","autoLockOnRelease","gravitySpeedLimit","onGrab","onRelease","ammoBody","_makeStaticWhenAtRest","linearThreshold","angularThreshold","isAtRest","getLinearVelocity","length2","getAngularVelocity","hasBeenHereBefore","_onBodyLoaded","setLocked","getVelocity","stuckTo","_unstickObject","sizeVec","boundingBoxWorldPositionVec","colliderWorldPositionVec","collidingLastFrame","setFromCenterAndSize","isColliding","videoComponent","onVideoLoaded","origDispatch","firstObject","Pathfinding","Geometry","fromBufferGeometry","setZoneData","createZone","putImageData","toDataURL","imageBitmap","HTMLImageElement","eventSource","eventListeners","_handleEvent","ReactAudioContext","WithHoverSound","react__WEBPACK_IMPORTED_MODULE_0__","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","createContext","Consumer","cloneElement","onMouseEnter"],"mappings":"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CA,OACA,QACA,UACA,oBACA,qBAOF,OAJI59E,YAAS,kBACX49E,EAASpyF,KAAK,kBAId4xE,GAAAzgD,EAAA9tB,cAAA,OAAKu1B,UAAWm/C,KAAW,CAAExlD,CAAC4vB,KAAOkwC,cAAc,EAAM9/D,CAAC4vB,KAAOmwC,kBAAmBzuF,KAAKg0B,MAAM06D,SAC5FH,EAAS1lF,IACRjL,IACiC,KAA9BoC,KAAKg0B,MAAM26D,gBACV/wF,EAAEuuB,MAAM,KAAK,GAAGvV,WAAW5W,KAAKg0B,MAAM26D,eAAexiE,MAAM,KAAK,MAChE4hD,GAAAzgD,EAAA9tB,cAAA,OAAKu1B,UAAWupB,KAAO00B,MAAOn0E,IAAKjB,GACjCmwE,GAAAzgD,EAAA9tB,cAAA,OAAKu1B,UAAWupB,KAAOswC,SAAvB,IAAkChxF,GAClCmwE,GAAAzgD,EAAA9tB,cAAA,WACEuuE,GAAAzgD,EAAA9tB,cAAC8vE,GAAA,EAAD,CAAkB78D,eAAgB7U,EAAEuuB,MAAM,KAAK,2HAhC5CmiE,eACA,CACjBK,eAAgBx5D,KAAUE,OAC1Bq5D,MAAOv5D,KAAUC,uFCPrB,MAAMy5D,GAAyB,GAGzBC,GAAc,CAClBC,MAAM,EACNC,MAAM,EACNC,MAAM,EACNC,MAAM,EACNC,SAAS,EACTC,UAAU,EACVC,OAAO,EACPC,QAAQ,EACRC,OAAO,EACPC,OAAO,GAKHC,GAAW,CACf,IACA,OACA,UACA,OACA,UACA,QACA,QACA,IACA,OACA,MACA,MACA,aACA,OACA,KACA,SACA,SACA,UACA,SACA,OACA,OACA,MACA,WACA,UACA,WACA,KACA,MACA,UACA,MACA,MACA,KACA,KACA,KACA,QACA,WACA,aACA,SACA,OACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,SACA,SACA,KACA,OACA,IACA,SACA,MACA,QACA,MACA,MACA,SACA,QACA,SACA,KACA,OACA,MACA,OACA,OACA,OACA,OACA,QACA,MACA,OACA,WACA,SACA,KACA,SACA,WACA,SACA,IACA,QACA,MACA,WACA,IACA,KACA,KACA,OA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","file":"assets/js/hub-5f81973a41fc74439414.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t6: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([2145,1,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import { Socket } from \"phoenix\";\nimport { generateHubName } from \"../utils/name-generation\";\nimport { airtableAssets, airtableAssetsInitialState } from '../airtable'\n\nimport Store from \"../storage/store\";\n\nconst resolverLink = document.createElement(\"a\");\nexport function getReticulumFetchUrl(path, absolute = false) {\n  if (process.env.RETICULUM_SERVER) {\n    return `https://${process.env.RETICULUM_SERVER}${path}`;\n  } else if (absolute) {\n    resolverLink.href = path;\n    return resolverLink.href;\n  } else {\n    return path;\n  }\n}\n\nlet reticulumMeta = null;\nlet invalidatedReticulumMetaThisSession = false;\n\nexport async function invalidateReticulumMeta() {\n  invalidatedReticulumMetaThisSession = true;\n  reticulumMeta = null;\n}\n\nexport async function getReticulumMeta() {\n  if (!reticulumMeta) {\n    // Initially look up version based upon page, avoiding round-trip, otherwise fetch.\n    if (!invalidatedReticulumMetaThisSession && document.querySelector(\"meta[name='ret:version']\")) {\n      reticulumMeta = {\n        version: document.querySelector(\"meta[name='ret:version']\").getAttribute(\"value\"),\n        pool: document.querySelector(\"meta[name='ret:pool']\").getAttribute(\"value\"),\n        phx_host: document.querySelector(\"meta[name='ret:phx_host']\").getAttribute(\"value\")\n      };\n    } else {\n      await fetch(getReticulumFetchUrl(\"/api/v1/meta\")).then(async res => {\n        reticulumMeta = await res.json();\n      });\n    }\n  }\n\n  const qs = new URLSearchParams(location.search);\n  const phxHostOverride = qs.get(\"phx_host\");\n\n  if (phxHostOverride) {\n    reticulumMeta.phx_host = phxHostOverride;\n  }\n\n  return reticulumMeta;\n}\n\nexport async function connectToReticulum(debug = false, params = null) {\n  const qs = new URLSearchParams(location.search);\n\n  const getNewSocketUrl = async () => {\n    const socketProtocol = qs.get(\"phx_protocol\") || (document.location.protocol === \"https:\" ? \"wss:\" : \"ws:\");\n    let socketHost = qs.get(\"phx_host\");\n    let socketPort = qs.get(\"phx_port\");\n\n    const reticulumMeta = await getReticulumMeta();\n    socketHost = socketHost || process.env.RETICULUM_SOCKET_SERVER || reticulumMeta.phx_host;\n    socketPort =\n      socketPort ||\n      (process.env.RETICULUM_SERVER ? new URL(`${socketProtocol}//${process.env.RETICULUM_SERVER}`).port : \"443\");\n    return `${socketProtocol}//${socketHost}${socketPort ? `:${socketPort}` : \"\"}`;\n  };\n\n  const socketUrl = await getNewSocketUrl();\n  console.log(`Phoenix Socket URL: ${socketUrl}`);\n\n  const socketSettings = {};\n\n  if (debug) {\n    socketSettings.logger = (kind, msg, data) => {\n      console.log(`${kind}: ${msg}`, data);\n    };\n  }\n\n  if (params) {\n    socketSettings.params = params;\n  }\n\n  const socket = new Socket(`${socketUrl}/socket`, socketSettings);\n  socket.connect();\n  socket.onError(async () => {\n    // On error, underlying reticulum node may have died, so rebalance by\n    // fetching a new healthy node to connect to.\n    invalidateReticulumMeta();\n\n    const endPointPath = new URL(socket.endPoint).pathname;\n    const newSocketUrl = await getNewSocketUrl();\n    const newEndPoint = `${newSocketUrl}${endPointPath}`;\n    console.log(`Socket error, changed endpoint to ${newEndPoint}`);\n    socket.endPoint = newEndPoint;\n  });\n\n  return socket;\n}\n\nexport function getLandingPageForPhoto(photoUrl) {\n  const parsedUrl = new URL(photoUrl);\n  return getReticulumFetchUrl(parsedUrl.pathname.replace(\".png\", \".html\") + parsedUrl.search, true);\n}\n\nexport function fetchReticulumAuthenticated(url, method = \"GET\", payload) {\n  const { token } = window.APP.store.state.credentials;\n  const retUrl = getReticulumFetchUrl(url);\n  const params = {\n    headers: { \"content-type\": \"application/json\" },\n    method\n  };\n  if (token) {\n    params.headers.authorization = `bearer ${token}`;\n  }\n  if (payload) {\n    params.body = JSON.stringify(payload);\n  }\n  return fetch(retUrl, params).then(async r => {\n    const result = await r.text();\n    try {\n      return JSON.parse(result);\n    } catch (e) {\n      // Some reticulum responses, particularly DELETE requests, don't return json.\n      return result;\n    }\n  });\n}\n\nexport async function createAndRedirectToNewHub(name, sceneId, sceneUrl, replace) {\n  const createUrl = getReticulumFetchUrl(\"/api/v1/hubs\");\n\n  let assets = {Name: \"Test\", SceneUrl: null};\n\n  const record = await airtableAssets.find('recHqITRS7cBMwn9i')\n\n  if (record) assets = record.fields;\n  \n  // const payload = { hub: { name: name || generateHubName() } };\n  const payload = { hub: { name: assets.Name } };\n  \n\n  // if (sceneId) {\n  //   payload.hub.scene_id = sceneId;\n  // } else {\n    // payload.hub.default_environment_gltf_bundle_url = sceneUrl;\n    \n    // payload.hub.default_environment_gltf_bundle_url = 'https://www.dropbox.com/s/ayl3t33p2ymnxux/Axon%20Park_Cliffside.glb';\n    // payload.hub.default_environment_gltf_bundle_url = 'https://s3-us-west-1.amazonaws.com/axonpark/Axon_Park_Cliffside.glb';\n    payload.hub.default_environment_gltf_bundle_url = assets.SceneUrl;\n    // payload.hub.default_environment_gltf_bundle_url = '/assets/Axon_Park_Cliffside.glb';\n  // }\n\n  const headers = { \"content-type\": \"application/json\" };\n  const store = new Store();\n  if (store.state && store.state.credentials.token) {\n    headers.authorization = `bearer ${store.state.credentials.token}`;\n  }\n\n  let res = await fetch(createUrl, {\n    body: JSON.stringify(payload),\n    headers,\n    method: \"POST\"\n  }).then(r => r.json());\n\n  if (res.error === \"invalid_token\") {\n    // Clear the invalid token from store.\n    store.update({ credentials: { token: null, email: null } });\n\n    // Create hub anonymously\n    delete headers.authorization;\n    res = await fetch(createUrl, {\n      body: JSON.stringify(payload),\n      headers,\n      method: \"POST\"\n    }).then(r => r.json());\n  }\n\n  const hub = res;\n  let url = hub.url;\n\n  const creatorAssignmentToken = hub.creator_assignment_token;\n  if (creatorAssignmentToken) {\n    store.update({ creatorAssignmentTokens: [{ hubId: hub.hub_id, creatorAssignmentToken: creatorAssignmentToken }] });\n\n    // Don't need to store the embed token if there's no creator assignment token, since that means\n    // we are the owner and will get the embed token on page load.\n    const embedToken = hub.embed_token;\n\n    if (embedToken) {\n      store.update({ embedTokens: [{ hubId: hub.hub_id, embedToken: embedToken }] });\n    }\n  }\n\n  if (process.env.RETICULUM_SERVER && document.location.host !== process.env.RETICULUM_SERVER) {\n    url = `/hub.html?hub_id=${hub.hub_id}`;\n  }\n\n  if (replace) {\n    document.location.replace(url);\n  } else {\n    document.location = url;\n  }\n}\n\nexport function getPresenceEntryForSession(presences, sessionId) {\n  const entry = Object.entries(presences || {}).find(([k]) => k === sessionId) || [];\n  const presence = entry[1];\n  return (presence && presence.metas && presence.metas[0]) || {};\n}\n\nexport function getPresenceContextForSession(presences, sessionId) {\n  return (getPresenceEntryForSession(presences, sessionId) || {}).context || {};\n}\n\nexport function getPresenceProfileForSession(presences, sessionId) {\n  return (getPresenceEntryForSession(presences, sessionId) || {}).profile || {};\n}\n\n// Takes the given channel, and creates a new channel with the same bindings\n// with the given socket, joins it, and leaves the old channel after joining.\n//\n// NOTE: This function relies upon phoenix channel object internals, so this\n// function will need to be reviewed if/when we ever update phoenix.js\nexport function migrateChannelToSocket(oldChannel, socket, params) {\n  const channel = socket.channel(oldChannel.topic, params || oldChannel.params);\n\n  for (let i = 0, l = oldChannel.bindings.length; i < l; i++) {\n    const item = oldChannel.bindings[i];\n    channel.on(item.event, item.callback);\n  }\n\n  for (let i = 0, l = oldChannel.pushBuffer.length; i < l; i++) {\n    const item = oldChannel.pushBuffer[i];\n    channel.push(item.event, item.payload, item.timeout);\n  }\n\n  const oldJoinPush = oldChannel.joinPush;\n  const joinPush = channel.join();\n\n  for (let i = 0, l = oldJoinPush.recHooks.length; i < l; i++) {\n    const item = oldJoinPush.recHooks[i];\n    joinPush.receive(item.status, item.callback);\n  }\n\n  return new Promise(resolve => {\n    joinPush.receive(\"ok\", () => {\n      // Clear all event handlers first so no duplicate messages come in.\n      oldChannel.bindings = [];\n      resolve(channel);\n    });\n  });\n}\n\nexport function discordBridgesForPresences(presences) {\n  const channels = [];\n  for (const p of Object.values(presences)) {\n    for (const m of p.metas) {\n      if (m.profile && m.profile.discordBridges) {\n        Array.prototype.push.apply(channels, m.profile.discordBridges.map(b => b.channel.name));\n      }\n    }\n  }\n  return channels;\n}\n","const boundingBox = new THREE.Box3();\nconst frustumBox = new THREE.Box3();\nconst inverseLightMatrixWorld = new THREE.Matrix4();\nconst tempBox = new THREE.Box3();\nconst FRUSTUM_PADDING = 1;\nconst NEAR_CLIPPING_PLANE = -500;\nconst FAR_CLIPPING_PLANE = 500;\nconst verts = [\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3()\n];\n\nexport default function resizeShadowCameraFrustum(light, scene) {\n  // Reset bounding box\n  frustumBox.makeEmpty();\n  boundingBox.makeEmpty();\n\n  // Grow the extents of boundingBox for every geometry in the scene that has castShadow set to true.\n  scene.traverse(node => {\n    const geometry = node.geometry;\n\n    if (geometry && node.castShadow) {\n      if (!geometry.boundingBox) {\n        geometry.computeBoundingBox();\n      }\n\n      tempBox.copy(geometry.boundingBox);\n\n      // Apply matrix transforming bounding box from model space to world space\n      tempBox.applyMatrix4(node.matrixWorld);\n\n      boundingBox.union(tempBox);\n    }\n  });\n\n  // Transform the resulting bounding box from world space to light space.\n  // Construct a new bounding box in light space that contains the corners of the bounding box in world space.\n  const min = boundingBox.min;\n  const max = boundingBox.max;\n\n  verts[0].set(min.x, min.y, min.z);\n  verts[1].set(min.x, min.y, max.z);\n  verts[2].set(min.x, max.y, min.z);\n  verts[3].set(min.x, max.y, max.z);\n  verts[4].set(max.x, min.y, min.z);\n  verts[5].set(max.x, min.y, max.z);\n  verts[6].set(max.x, max.y, min.z);\n  verts[7].set(max.x, max.y, max.z);\n\n  inverseLightMatrixWorld.getInverse(light.shadow.camera.matrixWorld);\n\n  for (let i = 0; i < verts.length; i++) {\n    verts[i].applyMatrix4(inverseLightMatrixWorld);\n    frustumBox.expandByPoint(verts[i]);\n  }\n\n  // Update the camera frustum to fit the resulting bounding box.\n  // Everything in the frustum that has castShadow set to true will cast a shadow.\n  // Everything in the frustum that has receiveShadow set to true will receive a shadow.\n  // FRUSTUM_PADDING is added to avoid clipping the edges of shadows.\n  // TODO: Determine why shadows flicker when light is moved fast. The light's matrixWorld is probably being updated a frame behind.\n  const camera = light.shadow.camera;\n  camera.left = frustumBox.min.x - FRUSTUM_PADDING;\n  camera.right = frustumBox.max.x + FRUSTUM_PADDING;\n  camera.bottom = frustumBox.min.y - FRUSTUM_PADDING;\n  camera.top = frustumBox.max.y + FRUSTUM_PADDING;\n  camera.near = frustumBox.min.z + NEAR_CLIPPING_PLANE;\n  camera.far = frustumBox.max.z + FAR_CLIPPING_PLANE;\n  camera.updateProjectionMatrix();\n}\n","import resizeShadowCameraFrustum from \"../utils/resizeShadowCameraFrustum\";\n\nAFRAME.registerComponent(\"directional-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.DirectionalLight();\n    this.light.position.set(0, 0, 0);\n    this.light.target.position.set(0, 0, 1);\n    this.light.add(this.light.target);\n    this.el.setObject3D(\"directional-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n    this.rendererSystem = this.el.sceneEl.systems.renderer;\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      const color = new THREE.Color(this.data.color);\n      this.rendererSystem.applyColorCorrection(color);\n      light.color.copy(color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n\n    this.light.shadow.camera.matrixNeedsUpdate = true;\n  },\n\n  tick() {\n    if (window.APP && window.APP.quality === \"low\") {\n      return;\n    }\n\n    resizeShadowCameraFrustum(this.light, this.el.sceneEl.object3D);\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"directional-light\");\n  }\n});\n","export const Layers = {\n  // Layers 0 - 2 reserverd by ThreeJS and AFrame.\n  reflection: 3\n};\n\n/**\n * Sets layer flags on the underlying Object3D\n * @namespace environment\n * @component layers\n */\nAFRAME.registerComponent(\"layers\", {\n  schema: {\n    reflection: { type: \"boolean\", default: false },\n    inWorldHud: { type: \"boolean\", default: false },\n    exclusive: { type: \"boolean\", default: false } // if true, only these layers will be set\n  },\n  init() {\n    this.update = this.update.bind(this);\n    this.el.addEventListener(\"model-loaded\", this.update);\n  },\n  update(oldData) {\n    const obj = this.el.object3D;\n\n    if (this.data.exclusive) {\n      obj.traverse(o => (o.layers.mask = 0));\n    }\n\n    for (const [name, layer] of Object.entries(Layers)) {\n      const oldValue = oldData[name];\n      const newValue = this.data[name];\n\n      if (oldValue !== newValue) {\n        if (newValue) {\n          obj.traverse(o => o.layers.enable(layer));\n        } else {\n          obj.traverse(o => o.layers.disable(layer));\n        }\n      }\n    }\n  },\n  remove() {\n    this.el.removeEventListener(\"model-loaded\", this.update);\n  }\n});\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\n\n/**\n * Loops the given clip using this entity's animation mixer\n * @component loop-animation\n */\nAFRAME.registerComponent(\"loop-animation\", {\n  schema: {\n    paused: { type: \"boolean\", default: false },\n    clip: { type: \"string\" }\n  },\n\n  init() {\n    this.mixerEl = findAncestorWithComponent(this.el, \"animation-mixer\");\n\n    if (!this.mixerEl) {\n      console.warn(\"loop-animation component could not find an animation-mixer in its ancestors.\");\n      return;\n    }\n\n    this.updateClip();\n  },\n\n  update(oldData) {\n    if ((oldData.clip !== this.data.clip || oldData.paused !== this.data.paused) && this.mixerEl) {\n      if (oldData.clip !== this.data.clip) {\n        this.updateClip();\n      }\n\n      if (this.currentAction) {\n        this.currentAction.paused = this.data.paused;\n      }\n    }\n  },\n\n  updateClip() {\n    const { mixer, animations } = this.mixerEl.components[\"animation-mixer\"];\n    const clipName = this.data.clip;\n\n    if (animations.length === 0) {\n      return;\n    }\n\n    let clip;\n\n    if (!clipName) {\n      clip = animations[0];\n    } else {\n      clip = animations.find(({ name }) => name === clipName);\n    }\n\n    if (!clip) {\n      return;\n    }\n\n    const action = mixer.clipAction(clip, this.el.object3D);\n    action.enabled = true;\n    action.setLoop(THREE.LoopRepeat, Infinity).play();\n    this.currentAction = action;\n  },\n\n  destroy() {\n    if (this.currentAction) {\n      this.currentAction.enabled = false;\n      this.currentAction.stop();\n    }\n  }\n});\n","import { getBox, getScaleCoefficient } from \"../utils/auto-box-collider\";\nimport { resolveUrl, injectCustomShaderChunks } from \"../utils/media-utils\";\nimport {\n  guessContentType,\n  proxiedUrlFor,\n  isHubsRoomUrl,\n  isHubsSceneUrl,\n  isHubsAvatarUrl\n} from \"../utils/media-url-utils\";\nimport { addAnimationComponents } from \"../utils/animation\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\nimport \"three/examples/js/loaders/GLTFLoader\";\nimport loadingObjectSrc from \"../assets/LoadingObject_Atom.glb\";\nimport { SOUND_MEDIA_LOADING, SOUND_MEDIA_LOADED } from \"../systems/sound-effects-system\";\n\nimport anime from \"animejs\";\n\nconst SHAPE = require(\"aframe-physics-system/src/constants\").SHAPE;\n\nconst gltfLoader = new THREE.GLTFLoader();\nlet loadingObject;\ngltfLoader.load(loadingObjectSrc, gltf => {\n  loadingObject = gltf;\n});\n\nconst fetchContentType = url => {\n  return fetch(url, { method: \"HEAD\" }).then(r => r.headers.get(\"content-type\"));\n};\n\nconst fetchMaxContentIndex = url => {\n  return fetch(url).then(r => parseInt(r.headers.get(\"x-max-content-index\")));\n};\n\nconst boundingBox = new THREE.Box3();\n\nconst forceBatching = qsTruthy(\"forceBatching\");\n\nAFRAME.registerComponent(\"media-loader\", {\n  schema: {\n    fileId: { type: \"string\" },\n    fileIsOwned: { type: \"boolean\" },\n    src: { type: \"string\" },\n    resize: { default: false },\n    resolve: { default: false },\n    contentType: { default: null },\n    contentSubtype: { default: null },\n    animate: { default: true },\n    mediaOptions: {\n      default: {},\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n\n  init() {\n    this.onError = this.onError.bind(this);\n    this.showLoader = this.showLoader.bind(this);\n    this.clearLoadingTimeout = this.clearLoadingTimeout.bind(this);\n    this.onMediaLoaded = this.onMediaLoaded.bind(this);\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.networkedEl = networkedEl;\n    });\n  },\n\n  updateScale: (function() {\n    const center = new THREE.Vector3();\n    return function(resize) {\n      const mesh = this.el.getObject3D(\"mesh\");\n      const box = getBox(this.el, mesh);\n      const scaleCoefficient = resize ? getScaleCoefficient(0.5, box) : 1;\n      mesh.scale.multiplyScalar(scaleCoefficient);\n      const { min, max } = box;\n      center.addVectors(min, max).multiplyScalar(0.5 * scaleCoefficient);\n      mesh.position.sub(center);\n      mesh.matrixNeedsUpdate = true;\n    };\n  })(),\n\n  removeShape(id) {\n    if (this.el.getAttribute(\"ammo-shape__\" + id)) {\n      this.el.removeAttribute(\"ammo-shape__\" + id);\n    }\n  },\n\n  tick(t, dt) {\n    if (this.loaderMixer) {\n      this.loaderMixer.update(dt / 1000);\n    }\n  },\n\n  remove() {\n    if (this.loadingSoundNode) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.stopSoundNode(this.loadingSoundNode);\n      this.loadingSoundNode = null;\n    }\n  },\n\n  onError() {\n    this.el.removeAttribute(\"gltf-model-plus\");\n    this.el.removeAttribute(\"media-pager\");\n    this.el.removeAttribute(\"media-video\");\n    this.el.setAttribute(\"media-image\", { src: \"error\" });\n    this.clearLoadingTimeout();\n  },\n\n  showLoader() {\n    if (this.el.object3DMap.mesh) {\n      this.clearLoadingTimeout();\n      return;\n    }\n    const useFancyLoader = !!loadingObject;\n    const mesh = useFancyLoader\n      ? loadingObject.scene.clone()\n      : new THREE.Mesh(new THREE.BoxGeometry(), new THREE.MeshBasicMaterial());\n    this.el.setObject3D(\"mesh\", mesh);\n    this.updateScale(true);\n    if (useFancyLoader) {\n      this.loaderMixer = new THREE.AnimationMixer(mesh);\n\n      this.loadingClip = this.loaderMixer.clipAction(loadingObject.animations[0]);\n      this.loadingScaleClip = this.loaderMixer.clipAction(\n        new THREE.AnimationClip(null, 1000, [\n          new THREE.VectorKeyframeTrack(\".scale\", [0, 0.2], [0, 0, 0, mesh.scale.x, mesh.scale.y, mesh.scale.z])\n        ])\n      );\n      setTimeout(() => {\n        if (!this.loaderMixer) return; // Animation/loader was stopped early\n        this.el.setAttribute(\"ammo-shape__loader\", { type: SHAPE.BOX });\n      }, 200);\n\n      this.loadingClip.play();\n      this.loadingScaleClip.play();\n    }\n    if (this.el.sceneEl.is(\"entered\") && (!this.networkedEl || NAF.utils.isMine(this.networkedEl))) {\n      this.loadingSoundNode = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundLooped(\n        SOUND_MEDIA_LOADING\n      );\n    }\n    delete this.showLoaderTimeout;\n  },\n\n  clearLoadingTimeout() {\n    clearTimeout(this.showLoaderTimeout);\n    if (this.loadingSoundNode) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.stopSoundNode(this.loadingSoundNode);\n      this.loadingSoundNode = null;\n    }\n    if (this.loaderMixer) {\n      this.loadingClip.stop();\n      this.loadingScaleClip.stop();\n      delete this.loaderMixer;\n      delete this.loadingScaleClip;\n      delete this.loadingClip;\n    }\n    delete this.showLoaderTimeout;\n    this.removeShape(\"loader\");\n  },\n\n  updateHoverableVisuals() {\n    const hoverableVisuals = this.el.components[\"hoverable-visuals\"];\n\n    if (hoverableVisuals) {\n      if (!this.injectedCustomShaderChunks) {\n        this.injectedCustomShaderChunks = true;\n        hoverableVisuals.uniforms = injectCustomShaderChunks(this.el.object3D);\n      }\n\n      boundingBox.setFromObject(this.el.object3DMap.mesh);\n      boundingBox.getBoundingSphere(hoverableVisuals.boundingSphere);\n    }\n  },\n\n  onMediaLoaded(physicsShape = null) {\n    const el = this.el;\n    this.clearLoadingTimeout();\n\n    if (this.el.sceneEl.is(\"entered\")) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_MEDIA_LOADED);\n    }\n\n    const finish = () => {\n      if (physicsShape) {\n        el.setAttribute(\"ammo-shape\", {\n          type: physicsShape,\n          minHalfExtent: 0.04\n        });\n      }\n\n      this.updateHoverableVisuals();\n\n      const pager = el.components[\"media-pager\"];\n\n      if (pager) {\n        pager.repositionToolbar();\n      }\n    };\n\n    if (this.data.animate) {\n      const mesh = this.el.getObject3D(\"mesh\");\n      const scale = { x: 0.001, y: 0.001, z: 0.001 };\n      scale.x = mesh.scale.x < scale.x ? mesh.scale.x * 0.001 : scale.x;\n      scale.y = mesh.scale.y < scale.y ? mesh.scale.x * 0.001 : scale.y;\n      scale.z = mesh.scale.z < scale.z ? mesh.scale.x * 0.001 : scale.z;\n      this.addMeshScaleAnimation(mesh, scale, finish);\n    } else {\n      finish();\n    }\n  },\n\n  addMeshScaleAnimation(mesh, initialScale, onComplete) {\n    const step = (function() {\n      const lastValue = {};\n      return function(anim) {\n        const value = anim.animatables[0].target;\n\n        value.x = Math.max(Number.MIN_VALUE, value.x);\n        value.y = Math.max(Number.MIN_VALUE, value.y);\n        value.z = Math.max(Number.MIN_VALUE, value.z);\n\n        // For animation timeline.\n        if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n          return;\n        }\n\n        lastValue.x = value.x;\n        lastValue.y = value.y;\n        lastValue.z = value.z;\n\n        mesh.scale.set(value.x, value.y, value.z);\n        mesh.matrixNeedsUpdate = true;\n      };\n    })();\n\n    const config = {\n      duration: 400,\n      easing: \"easeOutElastic\",\n      elasticity: 400,\n      loop: 0,\n      round: false,\n      x: mesh.scale.x,\n      y: mesh.scale.y,\n      z: mesh.scale.z,\n      targets: [initialScale],\n      update: anim => step(anim),\n      complete: anim => {\n        step(anim);\n        onComplete();\n      }\n    };\n\n    mesh.scale.copy(initialScale);\n    mesh.matrixNeedsUpdate = true;\n\n    return anime(config);\n  },\n\n  async update(oldData) {\n    try {\n      const { src, contentSubtype } = this.data;\n\n      if (src !== oldData.src && !this.showLoaderTimeout) {\n        this.showLoaderTimeout = setTimeout(this.showLoader, 100);\n      }\n\n      if (!src) return;\n\n      let canonicalUrl = src;\n      let accessibleUrl = src;\n      let contentType = this.data.contentType;\n      let thumbnail;\n\n      if (this.data.resolve) {\n        const result = await resolveUrl(src);\n        canonicalUrl = result.origin;\n        // handle protocol relative urls\n        if (canonicalUrl.startsWith(\"//\")) {\n          canonicalUrl = location.protocol + canonicalUrl;\n        }\n        contentType = (result.meta && result.meta.expected_content_type) || contentType;\n        thumbnail = result.meta && result.meta.thumbnail && proxiedUrlFor(result.meta.thumbnail);\n      }\n\n      // todo: we don't need to proxy for many things if the canonical URL has permissive CORS headers\n      accessibleUrl = proxiedUrlFor(canonicalUrl, null);\n\n      // if the component creator didn't know the content type, we didn't get it from reticulum, and\n      // we don't think we can infer it from the extension, we need to make a HEAD request to find it out\n      contentType = contentType || guessContentType(canonicalUrl) || (await fetchContentType(accessibleUrl));\n\n      // We don't want to emit media_resolved for index updates.\n      if (src !== oldData.src) {\n        this.el.emit(\"media_resolved\", { src, raw: accessibleUrl, contentType });\n      }\n\n      if (\n        contentType.startsWith(\"video/\") ||\n        contentType.startsWith(\"audio/\") ||\n        AFRAME.utils.material.isHLS(canonicalUrl, contentType)\n      ) {\n        const parsedUrl = new URL(src);\n        const qsTime = parseInt(parsedUrl.searchParams.get(\"t\"));\n        const hashTime = parseInt(new URLSearchParams(parsedUrl.hash.substring(1)).get(\"t\"));\n        const startTime = hashTime || qsTime || 0;\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-image\");\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.addEventListener(\n          \"video-loaded\",\n          e => {\n            this.onMediaLoaded(e.detail.projection === \"flat\" ? SHAPE.BOX : null);\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\n          \"media-video\",\n          Object.assign({}, this.data.mediaOptions, { src: accessibleUrl, time: startTime, contentType })\n        );\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else if (contentType.startsWith(\"image/\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"image-loaded\",\n          e => {\n            this.onMediaLoaded(e.detail.projection === \"flat\" ? SHAPE.BOX : null);\n\n            if (contentSubtype === \"camera-photo\") {\n              this.el.setAttribute(\"hover-menu__photo\", {\n                template: \"#photo-hover-menu\",\n                dirs: [\"forward\", \"back\"]\n              });\n            }\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.setAttribute(\n          \"media-image\",\n          Object.assign({}, this.data.mediaOptions, { src: accessibleUrl, contentType })\n        );\n\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else if (contentType.startsWith(\"application/pdf\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        // two small differences:\n        // 1. we pass the canonical URL to the pager so it can easily make subresource URLs\n        // 2. we don't remove the media-image component -- media-pager uses that internally\n        this.el.setAttribute(\"media-pager\", Object.assign({}, this.data.mediaOptions, { src: canonicalUrl }));\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.addEventListener(\"image-loaded\", this.clearLoadingTimeout, { once: true });\n        this.el.addEventListener(\"preview-loaded\", () => this.onMediaLoaded(SHAPE.BOX), { once: true });\n\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else if (\n        contentType.includes(\"application/octet-stream\") ||\n        contentType.includes(\"x-zip-compressed\") ||\n        contentType.startsWith(\"model/gltf\")\n      ) {\n        this.el.removeAttribute(\"media-image\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"model-loaded\",\n          () => {\n            this.updateScale(this.data.resize);\n            this.onMediaLoaded(SHAPE.HULL);\n            addAnimationComponents(this.el);\n          },\n          { once: true }\n        );\n        this.el.addEventListener(\"model-error\", this.onError, { once: true });\n        this.el.setAttribute(\n          \"gltf-model-plus\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: accessibleUrl,\n            contentType: contentType,\n            inflate: true,\n            batch: forceBatching,\n            modelToWorldScale: this.data.resize ? 0.0001 : 1.0\n          })\n        );\n      } else if (contentType.startsWith(\"text/html\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"image-loaded\",\n          () => {\n            const mayChangeScene = this.el.sceneEl.systems.permissions.can(\"update_hub\");\n\n            if (isHubsAvatarUrl(src)) {\n              this.el.setAttribute(\"hover-menu__hubs-item\", {\n                template: \"#avatar-link-hover-menu\",\n                dirs: [\"forward\", \"back\"]\n              });\n            } else if (isHubsRoomUrl(src) || (isHubsSceneUrl(src) && mayChangeScene)) {\n              this.el.setAttribute(\"hover-menu__hubs-item\", {\n                template: \"#hubs-destination-hover-menu\",\n                dirs: [\"forward\", \"back\"]\n              });\n            } else {\n              this.el.setAttribute(\"hover-menu__link\", { template: \"#link-hover-menu\", dirs: [\"forward\", \"back\"] });\n            }\n            this.onMediaLoaded(SHAPE.BOX);\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.setAttribute(\n          \"media-image\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: thumbnail,\n            contentType: guessContentType(thumbnail) || \"image/png\"\n          })\n        );\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else {\n        throw new Error(`Unsupported content type: ${contentType}`);\n      }\n    } catch (e) {\n      console.error(\"Error adding media\", e);\n      this.onError();\n    }\n  }\n});\n\nAFRAME.registerComponent(\"media-pager\", {\n  schema: {\n    src: { type: \"string\" },\n    index: { default: 0 }\n  },\n\n  init() {\n    this.toolbar = null;\n    this.imageSrc = null;\n    this.onNext = this.onNext.bind(this);\n    this.onPrev = this.onPrev.bind(this);\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.networkedEl = networkedEl;\n    });\n\n    this.el.addEventListener(\"image-loaded\", async e => {\n      this.imageSrc = e.detail.src;\n      await this._ensureUI();\n      this.update();\n    });\n  },\n\n  async _ensureUI() {\n    if (this.hasSetupUI || !this.imageSrc) return;\n    this.hasSetupUI = true;\n\n    // unfortunately, since we loaded the page image in an img tag inside media-image, we have to make a second\n    // request for the same page to read out the max-content-index header\n    this.maxIndex = await fetchMaxContentIndex(this.imageSrc);\n    const template = document.getElementById(\"paging-toolbar\");\n    this.el.querySelector(\".interactable-ui\").appendChild(document.importNode(template.content, true));\n    this.toolbar = this.el.querySelector(\".paging-toolbar\");\n    // we have to wait a tick for the attach callbacks to get fired for the elements in a template\n    setTimeout(() => {\n      this.nextButton = this.el.querySelector(\".next-button [text-button]\");\n      this.prevButton = this.el.querySelector(\".prev-button [text-button]\");\n      this.pageLabel = this.el.querySelector(\".page-label\");\n\n      this.nextButton.object3D.addEventListener(\"interact\", this.onNext);\n      this.prevButton.object3D.addEventListener(\"interact\", this.onPrev);\n\n      this.update();\n      this.el.emit(\"preview-loaded\");\n    }, 0);\n  },\n\n  async update() {\n    if (!this.data.src) return;\n\n    const pageSrc = proxiedUrlFor(this.data.src, this.data.index);\n    this.el.setAttribute(\"media-image\", { src: pageSrc, contentType: guessContentType(pageSrc) || \"image/png\" });\n\n    await this._ensureUI();\n\n    if (this.pageLabel) {\n      this.pageLabel.setAttribute(\"text\", \"value\", `${this.data.index + 1}/${this.maxIndex + 1}`);\n      this.repositionToolbar();\n    }\n  },\n\n  remove() {\n    if (this.toolbar) {\n      this.toolbar.parentNode.removeChild(this.toolbar);\n    }\n  },\n\n  onNext() {\n    if (!NAF.utils.isMine(this.networkedEl) && !NAF.utils.takeOwnership(this.networkedEl)) return;\n    this.el.setAttribute(\"media-pager\", \"index\", Math.min(this.data.index + 1, this.maxIndex));\n    this.el.emit(\"pager-page-changed\");\n  },\n\n  onPrev() {\n    if (!NAF.utils.isMine(this.networkedEl) && !NAF.utils.takeOwnership(this.networkedEl)) return;\n    this.el.setAttribute(\"media-pager\", \"index\", Math.max(this.data.index - 1, 0));\n    this.el.emit(\"pager-page-changed\");\n  },\n\n  repositionToolbar() {\n    const ammoShape = this.el.getAttribute(\"ammo-shape\");\n    if (!ammoShape) return;\n\n    this.toolbar.object3D.position.y = -0.7;\n    this.toolbar.object3D.matrixNeedsUpdate = true;\n  }\n});\n","import { SOUND_QUACK, SOUND_SPECIAL_QUACK } from \"../systems/sound-effects-system\";\n\nAFRAME.registerComponent(\"quack\", {\n  schema: {\n    quackPercentage: { default: 1 },\n    specialQuackPercentage: { default: 0.01 }\n  },\n\n  init: function() {\n    this._handleGrabStart = this._handleGrabStart.bind(this);\n  },\n\n  play: function() {\n    this.el.object3D.addEventListener(\"interact\", this._handleGrabStart);\n  },\n\n  pause: function() {\n    this.el.object3D.removeEventListener(\"interact\", this._handleGrabStart);\n  },\n\n  _handleGrabStart: function() {\n    const rand = Math.random();\n    if (rand < this.data.specialQuackPercentage) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SPECIAL_QUACK);\n    } else if (rand < this.data.quackPercentage) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_QUACK);\n    }\n  }\n});\n","import { setMatrixWorld } from \"../utils/three-utils\";\nimport { getCurrentStreamer } from \"../utils/component-utils\";\n\nfunction getStreamerCamera() {\n  const streamer = getCurrentStreamer();\n  if (streamer) {\n    return streamer.el.querySelector(\".camera\").object3D;\n  }\n  return null;\n}\n\nfunction lerp(start, end, t) {\n  return (1 - t) * start + t * end;\n}\n\nconst newRot = new THREE.Quaternion();\n\n/**\n * Nicely pans the camera for previewing a scene. There's some weirdness with this right now\n * since it ends up panning in a direction dependent upon the start camera orientation,\n * but it's good enough for now.\n */\nAFRAME.registerComponent(\"scene-preview-camera\", {\n  schema: {\n    duration: { default: 90, type: \"number\" },\n    positionOnly: { default: false, type: \"boolean\" }\n  },\n\n  init: function() {\n    this.startPoint = this.el.object3D.position.clone();\n    this.startRotation = this.el.object3D.quaternion.clone();\n\n    this.targetPoint = this.el.object3D.position.clone();\n    this.targetPoint.y = Math.max(this.targetPoint.y - 1.5, 1);\n    this.targetPoint.add(new THREE.Vector3(2, 0, -2));\n\n    const targetRotDelta = new THREE.Euler(-0.15, 0.0, 0.15);\n    this.targetRotation = new THREE.Quaternion();\n    this.targetRotation.setFromEuler(targetRotDelta);\n    this.targetRotation.premultiply(this.startRotation);\n\n    this.startTime = performance.now();\n    this.backwards = false;\n    this.ranOnePass = false;\n  },\n\n  tick2: function() {\n    const streamerCamera = getStreamerCamera();\n    if (streamerCamera) {\n      setMatrixWorld(this.el.object3D, streamerCamera.matrixWorld);\n      // Move camera forward just a bit so that we don't see the avatar's eye cylinders.\n      this.el.object3D.translateZ(-0.1);\n      this.el.object3D.matrixNeedsUpdate = true;\n    } else {\n      let t = (performance.now() - this.startTime) / (1000.0 * this.data.duration);\n      t = Math.min(1.0, Math.max(0.0, t));\n\n      if (!this.ranOnePass) {\n        t = t * (2 - t);\n      } else {\n        t = t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n      }\n\n      const from = this.backwards ? this.targetPoint : this.startPoint;\n      const to = this.backwards ? this.startPoint : this.targetPoint;\n      const fromRot = this.backwards ? this.targetRotation : this.startRotation;\n      const toRot = this.backwards ? this.startRotation : this.targetRotation;\n\n      THREE.Quaternion.slerp(fromRot, toRot, newRot, t);\n\n      this.el.object3D.position.set(lerp(from.x, to.x, t), lerp(from.y, to.y, t), lerp(from.z, to.z, t));\n\n      if (!this.data.positionOnly) {\n        this.el.object3D.rotation.setFromQuaternion(newRot);\n      }\n\n      this.el.object3D.matrixNeedsUpdate = true;\n\n      if (t >= 0.9999) {\n        this.ranOnePass = true;\n        this.backwards = !this.backwards;\n        this.startTime = performance.now();\n      }\n    }\n  }\n});\n","import \"three/examples/js/pmrem/PMREMGenerator\";\nimport \"three/examples/js/pmrem/PMREMCubeUVPacker\";\nimport qsTruthy from \"../utils/qs_truthy\";\nconst isBotMode = qsTruthy(\"bot\");\n\n/**\n * @author zz85 / https://github.com/zz85\n *\n * Based on \"A Practical Analytic Model for Daylight\"\n * aka The Preetham Model, the de facto standard analytic skydome model\n * http://www.cs.utah.edu/~shirley/papers/sunsky/sunsky.pdf\n *\n * First implemented by Simon Wallner\n * http://www.simonwallner.at/projects/atmospheric-scattering\n *\n * Improved by Martin Upitis\n * http://blenderartists.org/forum/showthread.php?245954-preethams-sky-impementation-HDR\n *\n * Three.js integration by zz85 http://twitter.com/blurspline\n */\n\nTHREE.Sky = function() {\n  const shader = THREE.Sky.SkyShader;\n\n  const material = new THREE.ShaderMaterial({\n    fragmentShader: shader.fragmentShader,\n    vertexShader: shader.vertexShader,\n    uniforms: THREE.UniformsUtils.clone(shader.uniforms),\n    side: THREE.BackSide\n  });\n\n  THREE.Mesh.call(this, new THREE.BoxBufferGeometry(1, 1, 1), material);\n};\n\nTHREE.Sky.prototype = Object.create(THREE.Mesh.prototype);\nTHREE.Sky.prototype.constructor = THREE.Sky;\n\nTHREE.Sky.SkyShader = {\n  uniforms: {\n    luminance: { value: 1 },\n    turbidity: { value: 2 },\n    rayleigh: { value: 1 },\n    mieCoefficient: { value: 0.005 },\n    mieDirectionalG: { value: 0.8 },\n    sunPosition: { value: new THREE.Vector3() }\n  },\n\n  vertexShader: [\n    \"uniform vec3 sunPosition;\",\n    \"uniform float rayleigh;\",\n    \"uniform float turbidity;\",\n    \"uniform float mieCoefficient;\",\n\n    \"varying vec3 vWorldPosition;\",\n    \"varying vec3 vSunDirection;\",\n    \"varying float vSunfade;\",\n    \"varying vec3 vBetaR;\",\n    \"varying vec3 vBetaM;\",\n    \"varying float vSunE;\",\n\n    \"const vec3 up = vec3( 0.0, 1.0, 0.0 );\",\n\n    // constants for atmospheric scattering\n    \"const float e = 2.71828182845904523536028747135266249775724709369995957;\",\n    \"const float pi = 3.141592653589793238462643383279502884197169;\",\n\n    // wavelength of used primaries, according to preetham\n    \"const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\",\n    // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n    // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\n    \"const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\",\n\n    // mie stuff\n    // K coefficient for the primaries\n    \"const float v = 4.0;\",\n    \"const vec3 K = vec3( 0.686, 0.678, 0.666 );\",\n    // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\n    \"const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\",\n\n    // earth shadow hack\n    // cutoffAngle = pi / 1.95;\n    \"const float cutoffAngle = 1.6110731556870734;\",\n    \"const float steepness = 1.5;\",\n    \"const float EE = 1000.0;\",\n\n    \"float sunIntensity( float zenithAngleCos ) {\",\n    \"\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\",\n    \"\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\",\n    \"}\",\n\n    \"vec3 totalMie( float T ) {\",\n    \"\tfloat c = ( 0.2 * T ) * 10E-18;\",\n    \"\treturn 0.434 * c * MieConst;\",\n    \"}\",\n\n    \"void main() {\",\n\n    \"\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\",\n    \"\tvWorldPosition = worldPosition.xyz;\",\n\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n    \"\tvSunDirection = normalize( sunPosition );\",\n\n    \"\tvSunE = sunIntensity( dot( vSunDirection, up ) );\",\n\n    \"\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\",\n\n    \"\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\",\n\n    // extinction (absorbtion + out scattering)\n    // rayleigh coefficients\n    \"\tvBetaR = totalRayleigh * rayleighCoefficient;\",\n\n    // mie coefficients\n    \"\tvBetaM = totalMie( turbidity ) * mieCoefficient;\",\n\n    \"}\"\n  ].join(\"\\n\"),\n\n  fragmentShader: [\n    \"varying vec3 vWorldPosition;\",\n    \"varying vec3 vSunDirection;\",\n    \"varying float vSunfade;\",\n    \"varying vec3 vBetaR;\",\n    \"varying vec3 vBetaM;\",\n    \"varying float vSunE;\",\n\n    \"uniform float luminance;\",\n    \"uniform float mieDirectionalG;\",\n\n    \"const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\",\n\n    // constants for atmospheric scattering\n    \"const float pi = 3.141592653589793238462643383279502884197169;\",\n\n    \"const float n = 1.0003;\", // refractive index of air\n    \"const float N = 2.545E25;\", // number of molecules per unit volume for air at\n    // 288.15K and 1013mb (sea level -45 celsius)\n\n    // optical length at zenith for molecules\n    \"const float rayleighZenithLength = 8.4E3;\",\n    \"const float mieZenithLength = 1.25E3;\",\n    \"const vec3 up = vec3( 0.0, 1.0, 0.0 );\",\n    // 66 arc seconds -> degrees, and the cosine of that\n    \"const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\",\n\n    // 3.0 / ( 16.0 * pi )\n    \"const float THREE_OVER_SIXTEENPI = 0.05968310365946075;\",\n    // 1.0 / ( 4.0 * pi )\n    \"const float ONE_OVER_FOURPI = 0.07957747154594767;\",\n\n    \"float rayleighPhase( float cosTheta ) {\",\n    \"\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\",\n    \"}\",\n\n    \"float hgPhase( float cosTheta, float g ) {\",\n    \"\tfloat g2 = pow( g, 2.0 );\",\n    \"\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\",\n    \"\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\",\n    \"}\",\n\n    // Filmic ToneMapping http://filmicgames.com/archives/75\n    \"const float A = 0.15;\",\n    \"const float B = 0.50;\",\n    \"const float C = 0.10;\",\n    \"const float D = 0.20;\",\n    \"const float E = 0.02;\",\n    \"const float F = 0.30;\",\n\n    \"const float whiteScale = 1.0748724675633854;\", // 1.0 / Uncharted2Tonemap(1000.0)\n\n    \"vec3 Uncharted2Tonemap( vec3 x ) {\",\n    \"\treturn ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;\",\n    \"}\",\n\n    \"void main() {\",\n    // optical length\n    // cutoff angle at 90 to avoid singularity in next formula.\n    \"\tfloat zenithAngle = acos( max( 0.0, dot( up, normalize( vWorldPosition - cameraPos ) ) ) );\",\n    \"\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\",\n    \"\tfloat sR = rayleighZenithLength * inverse;\",\n    \"\tfloat sM = mieZenithLength * inverse;\",\n\n    // combined extinction factor\n    \"\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\",\n\n    // in scattering\n    \"\tfloat cosTheta = dot( normalize( vWorldPosition - cameraPos ), vSunDirection );\",\n\n    \"\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\",\n    \"\tvec3 betaRTheta = vBetaR * rPhase;\",\n\n    \"\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );\",\n    \"\tvec3 betaMTheta = vBetaM * mPhase;\",\n\n    \"\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\",\n    \"\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\",\n\n    // nightsky\n    \"\tvec3 direction = normalize( vWorldPosition - cameraPos );\",\n    \"\tfloat theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]\",\n    \"\tfloat phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]\",\n    \"\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\",\n    \"\tvec3 L0 = vec3( 0.1 ) * Fex;\",\n\n    // composition + solar disc\n    \"\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\",\n    \"\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;\",\n\n    \"\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\",\n\n    \"\tvec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );\",\n    \"\tvec3 color = curr * whiteScale;\",\n\n    \"\tvec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\",\n\n    \"\tgl_FragColor = vec4( retColor, 1.0 );\",\n\n    \"}\"\n  ].join(\"\\n\")\n};\n\nAFRAME.registerComponent(\"skybox\", {\n  schema: {\n    turbidity: { type: \"number\", default: 10 },\n    rayleigh: { type: \"number\", default: 2 },\n    luminance: { type: \"number\", default: 1 },\n    mieCoefficient: { type: \"number\", default: 0.005 },\n    mieDirectionalG: { type: \"number\", default: 0.8 },\n    inclination: { type: \"number\", default: 0 },\n    azimuth: { type: \"number\", default: 0.15 },\n    distance: { type: \"number\", default: 8000 }\n  },\n\n  init() {\n    this.sky = new THREE.Sky();\n    this.el.setObject3D(\"mesh\", this.sky);\n    this.skyScene = new THREE.Scene();\n    this.cubeCamera = new THREE.CubeCamera(1, 100000, 512);\n    this.skyScene.add(this.cubeCamera);\n\n    this.updateEnvironmentMap = this.updateEnvironmentMap.bind(this);\n    // HACK: Render environment map on next frame to avoid bug where the render target texture is black.\n    // This is likely due to the custom elements attached callback being synchronous on Chrome but not Firefox.\n    // Added timeout due to additional case where texture is black in Firefox.\n    requestAnimationFrame(() => setTimeout(this.updateEnvironmentMap));\n  },\n\n  update(oldData) {\n    const uniforms = this.sky.material.uniforms;\n\n    if (this.data.turbidity !== oldData.turbidity) {\n      uniforms.turbidity.value = this.data.turbidity;\n    }\n\n    if (this.data.rayleigh !== oldData.rayleigh) {\n      uniforms.rayleigh.value = this.data.rayleigh;\n    }\n\n    if (this.data.luminance !== oldData.luminance) {\n      uniforms.luminance.value = this.data.luminance;\n    }\n\n    if (this.data.mieCoefficient !== oldData.mieCoefficient) {\n      uniforms.mieCoefficient.value = this.data.mieCoefficient;\n    }\n\n    if (this.data.mieDirectionalG !== oldData.mieDirectionalG) {\n      uniforms.mieDirectionalG.value = this.data.mieDirectionalG;\n    }\n\n    if (\n      this.data.inclination !== oldData.inclination ||\n      this.data.azimuth !== oldData.azimuth ||\n      this.data.distance !== oldData.distance\n    ) {\n      const theta = Math.PI * (this.data.inclination - 0.5);\n      const phi = 2 * Math.PI * (this.data.azimuth - 0.5);\n\n      const distance = this.data.distance;\n\n      const x = distance * Math.cos(phi);\n      const y = distance * Math.sin(phi) * Math.sin(theta);\n      const z = distance * Math.sin(phi) * Math.cos(theta);\n\n      uniforms.sunPosition.value.set(x, y, z).normalize();\n\n      // HACK Remove this if condition and always set the scale based on distance when the existing environments\n      // have their sky scales set to 1.\n      if (this.el.object3D.scale.x === 1) {\n        this.sky.scale.set(distance, distance, distance);\n      }\n\n      this.el.object3D.matrixNeedsUpdate = true;\n    }\n\n    this.updateEnvironmentMap();\n  },\n\n  updateEnvironmentMap() {\n    const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n\n    if (environmentMapComponent && !isBotMode) {\n      const renderer = this.el.sceneEl.renderer;\n      this.skyScene.add(this.sky);\n      this.cubeCamera.update(renderer, this.skyScene);\n      this.el.setObject3D(\"mesh\", this.sky);\n      const vrEnabled = renderer.vr.enabled;\n      renderer.vr.enabled = false;\n      const pmremGenerator = new THREE.PMREMGenerator(this.cubeCamera.renderTarget.texture);\n      pmremGenerator.update(renderer);\n      const pmremCubeUVPacker = new THREE.PMREMCubeUVPacker(pmremGenerator.cubeLods);\n      pmremCubeUVPacker.update(renderer);\n      renderer.vr.enabled = vrEnabled;\n      environmentMapComponent.updateEnvironmentMap(pmremCubeUVPacker.CubeUVRenderTarget.texture);\n      pmremGenerator.dispose();\n      pmremCubeUVPacker.dispose();\n    }\n  },\n\n  remove() {\n    this.el.removeObject3D(\"mesh\");\n  }\n});\n","import { getLastWorldPosition } from \"../utils/three-utils\";\n\n/**\n * Used on a player-rig to move the player to a random spawn point on entry.\n * @namespace avatar\n * @component spawn-controller\n */\nAFRAME.registerComponent(\"spawn-controller\", {\n  schema: {\n    target: { type: \"selector\" },\n    camera: { type: \"selector\", default: \"#player-camera\" },\n    playerHeight: { default: 1.6 },\n    loadedEvent: { type: \"string\" }\n  },\n  init() {\n    this.moveToSpawnPoint = this.moveToSpawnPoint.bind(this);\n    this.data.target.addEventListener(this.data.loadedEvent, this.moveToSpawnPoint);\n  },\n  moveToSpawnPoint() {\n    const spawnPoints = document.querySelectorAll(\"[spawn-point]\");\n\n    if (spawnPoints.length === 0) {\n      // Keep default position\n      return;\n    }\n\n    const camera = this.data.camera;\n    const spawnPointIndex = Math.round((spawnPoints.length - 1) * Math.random());\n    const spawnPoint = spawnPoints[spawnPointIndex];\n\n    getLastWorldPosition(spawnPoint.object3D, this.el.object3D.position);\n    this.el.object3D.rotation.copy(spawnPoint.object3D.rotation);\n\n    if (this.el.sceneEl.is(\"vr-mode\")) {\n      // Rotate the player rig such that the vr-camera faces forward.\n      this.el.object3D.rotation.y -= this.data.camera.object3D.rotation.y;\n    } else {\n      // Reset the camera transform in 2D mode.\n      camera.object3D.position.set(0, this.data.playerHeight, 0);\n      camera.object3D.rotation.set(0, 0, 0);\n      camera.object3D.matrixNeedsUpdate = true;\n    }\n\n    // Camera faces -Z direction. Flip rotation on Y axis to face the correct direction.\n    this.el.object3D.rotation.y += Math.PI;\n    this.el.object3D.matrixNeedsUpdate = true;\n\n    // Reset pitch-yaw-rotator after any scene-preview-camera rotation.\n    if (camera.components[\"pitch-yaw-rotator\"]) {\n      camera.components[\"pitch-yaw-rotator\"].set(camera.object3D.rotation.x, camera.object3D.rotation.y);\n    }\n  }\n});\n\n/**\n * Marks an entity as a potential spawn point.\n * @namespace environment\n * @component spawn-point\n */\nAFRAME.registerComponent(\"spawn-point\", {\n  init() {\n    this.el.object3D.visible = false;\n  }\n});\n","/* global require AFRAME THREE setTimeout clearTimeout */\nimport { addMedia } from \"../utils/media-utils\";\nimport { waitForEvent } from \"../utils/async-utils\";\nimport { ObjectContentOrigins } from \"../object-types\";\nimport { paths } from \"../systems/userinput/paths\";\n\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\n/**\n * Spawns networked objects when grabbed or when a specified event is fired.\n * @namespace network\n * @component super-spawner\n */\nAFRAME.registerComponent(\"super-spawner\", {\n  schema: {\n    /**\n     * Source of the media asset the spawner will spawn when grabbed. This can be a gltf, video, or image, or a url that the reticiulm media API can resolve to a gltf, video, or image.\n     */\n    src: { default: \"\" },\n\n    /**\n     * Whether to use the Reticulum media resolution API to interpret the src URL (e.g. find a video URL for Youtube videos.)\n     */\n    resolve: { default: false },\n\n    /**\n     * Whether to resize the media on load.\n     */\n    resize: { default: false },\n\n    /**\n     * The template to use for this object\n     */\n    template: { default: \"\" },\n\n    /**\n     * Spawn the object at a custom position, rather than at the center of the spanwer.\n     */\n    useCustomSpawnPosition: { default: false },\n    spawnPosition: { type: \"vec3\" },\n\n    /**\n     * Spawn the object with a custom orientation, rather than copying that of the spawner.\n     */\n    useCustomSpawnRotation: { default: false },\n    spawnRotation: { type: \"vec4\" },\n\n    /**\n     * Spawn the object with a custom scale, rather than copying that of the spawner.\n     */\n    useCustomSpawnScale: { default: false },\n    spawnScale: { type: \"vec3\" },\n\n    /**\n     * The spawner will become invisible and ungrabbable for this ammount of time after being grabbed. This can prevent rapidly spawning objects.\n     */\n    spawnCooldown: { default: 1 },\n\n    /**\n     * Center the spawned object on the hand that grabbed it after it finishes loading. By default the object will be grabbed relative to where the spawner was grabbed\n     */\n    centerSpawnedObject: { default: false },\n\n    /**\n     * Optional event to listen for to spawn an object on the preferred superHand\n     */\n    spawnEvent: { type: \"string\" },\n\n    /**\n     * If true, will spawn the object at the cursor and animate it into the hand.\n     */\n    animateFromCursor: { type: \"boolean\" }\n  },\n\n  init() {\n    this.cooldownTimeout = null;\n    this.handPosition = new THREE.Vector3();\n\n    this.onSpawnEvent = this.onSpawnEvent.bind(this);\n\n    this.sceneEl = document.querySelector(\"a-scene\");\n\n    this.tempSpawnHandPosition = new THREE.Vector3();\n  },\n\n  play() {\n    if (this.data.spawnEvent) {\n      this.el.sceneEl.addEventListener(this.data.spawnEvent, this.onSpawnEvent);\n    }\n  },\n\n  pause() {\n    if (this.data.spawnEvent) {\n      this.el.sceneEl.removeEventListener(this.data.spawnEvent, this.onSpawnEvent);\n    }\n    if (this.cooldownTimeout) {\n      clearTimeout(this.cooldownTimeout);\n      this.cooldownTimeout = null;\n      this.el.setAttribute(\"visible\", true);\n      this.el.classList.add(\"interactable\");\n    }\n  },\n\n  async onSpawnEvent() {\n    if (this.cooldownTimeout || !this.el.sceneEl.is(\"entered\")) {\n      return;\n    }\n\n    const entity = addMedia(\n      this.data.src,\n      this.data.template,\n      ObjectContentOrigins.SPAWNER,\n      null,\n      this.data.resolve,\n      false\n    ).entity;\n\n    const cursor = document.querySelector(\"#cursor\");\n    cursor.object3D.getWorldPosition(entity.object3D.position);\n    cursor.object3D.getWorldQuaternion(entity.object3D.quaternion);\n    entity.object3D.matrixNeedsUpdate = true;\n\n    if (this.data.useCustomSpawnScale) {\n      entity.object3D.scale.copy(this.data.spawnScale);\n    }\n\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const willAnimateFromCursor = this.data.animateFromCursor && userinput.get(paths.actions.rightHand.matrix);\n    if (!willAnimateFromCursor) {\n      interaction.state.rightRemote.held = entity;\n      interaction.state.rightRemote.spawning = true;\n    }\n    this.activateCooldown();\n    await waitForEvent(\"body-loaded\", entity);\n\n    cursor.object3D.getWorldPosition(entity.object3D.position);\n    cursor.object3D.getWorldQuaternion(entity.object3D.quaternion);\n    entity.object3D.matrixNeedsUpdate = true;\n\n    if (willAnimateFromCursor) {\n      document.querySelector(\"#player-right-controller\").object3D.getWorldPosition(this.handPosition);\n      entity.setAttribute(\"animation__spawn-at-cursor\", {\n        property: \"position\",\n        delay: 500,\n        dur: 1500,\n        from: { x: entity.object3D.position.x, y: entity.object3D.position.y, z: entity.object3D.position.z },\n        to: { x: this.handPosition.x, y: this.handPosition.y, z: this.handPosition.z },\n        easing: \"easeInOutBack\"\n      });\n    } else {\n      interaction.state.rightRemote.spawning = false;\n    }\n    entity.components[\"ammo-body\"].syncToPhysics();\n  },\n\n  activateCooldown() {\n    if (this.data.spawnCooldown > 0) {\n      const [sx, sy, sz] = [this.el.object3D.scale.x, this.el.object3D.scale.y, this.el.object3D.scale.z];\n\n      this.el.setAttribute(\"visible\", false);\n      this.el.object3D.scale.set(0.001, 0.001, 0.001);\n      this.el.object3D.matrixNeedsUpdate = true;\n      this.el.classList.remove(\"interactable\");\n      this.el.setAttribute(\"ammo-body\", { collisionFilterMask: COLLISION_LAYERS.NONE });\n      this.cooldownTimeout = setTimeout(() => {\n        this.el.setAttribute(\"visible\", true);\n        this.el.classList.add(\"interactable\");\n        this.el.setAttribute(\"ammo-body\", { collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER });\n        this.el.removeAttribute(\"animation__spawner-cooldown\");\n        this.el.setAttribute(\"animation__spawner-cooldown\", {\n          property: \"scale\",\n          delay: 50,\n          dur: 350,\n          from: { x: 0.001, y: 0.001, z: 0.001 },\n          to: { x: sx, y: sy, z: sz },\n          easing: \"easeOutElastic\"\n        });\n\n        this.cooldownTimeout = null;\n      }, this.data.spawnCooldown * 1000);\n    }\n  }\n});\n","import { Layers } from \"./layers\";\nimport \"../vendor/Water\";\nimport waterNormalMap from \"../assets/waternormals.jpg\";\n\n/**\n * @author jbouny / https://github.com/jbouny\n *\n * Work based on :\n * @author Slayvin / http://slayvin.net : Flat mirror for three.js\n * @author Stemkoski / http://www.adelphi.edu/~stemkoski : An implementation of water shader based on the flat mirror\n * @author Jonas Wagner / http://29a.ch/ && http://29a.ch/slides/2012/webglwater/ : Water shader explanations in WebGL\n */\n\nfunction MobileWater(geometry, options) {\n  THREE.Mesh.call(this, geometry);\n\n  const scope = this;\n\n  options = options || {};\n\n  const time = options.time !== undefined ? options.time : 0.0;\n  const normalSampler = options.waterNormals !== undefined ? options.waterNormals : null;\n  const sunDirection =\n    options.sunDirection !== undefined ? options.sunDirection : new THREE.Vector3(0.70707, 0.70707, 0.0);\n  const sunColor = new THREE.Color(options.sunColor !== undefined ? options.sunColor : 0xffffff);\n  const waterColor = new THREE.Color(options.waterColor !== undefined ? options.waterColor : 0x7f7f7f);\n  const eye = options.eye !== undefined ? options.eye : new THREE.Vector3(0, 0, 0);\n  const distortionScale = options.distortionScale !== undefined ? options.distortionScale : 20.0;\n  const side = options.side !== undefined ? options.side : THREE.FrontSide;\n  const fog = options.fog !== undefined ? options.fog : false;\n\n  const mirrorShader = {\n    uniforms: THREE.UniformsUtils.merge([\n      THREE.UniformsLib[\"lights\"],\n      {\n        normalSampler: { value: null },\n        time: { value: 0.0 },\n        size: { value: 1.0 },\n        distortionScale: { value: 20.0 },\n        sunColor: { value: new THREE.Color(0x7f7f7f) },\n        sunDirection: { value: new THREE.Vector3(0.70707, 0.70707, 0) },\n        eye: { value: new THREE.Vector3() },\n        waterColor: { value: new THREE.Color(0x555555) }\n      }\n    ]),\n\n    vertexShader: `\n      uniform float time;\n      varying vec4 worldPosition;\n\n      void main() {\n      \tworldPosition = modelMatrix * vec4( position, 1.0 );\n      \tvec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );\n      \tgl_Position = projectionMatrix * mvPosition;\n\n      }\n    `,\n\n    fragmentShader: `\n      uniform float time;\n      uniform float size;\n      uniform float distortionScale;\n      uniform sampler2D normalSampler;\n      uniform vec3 sunColor;\n      uniform vec3 sunDirection;\n      uniform vec3 eye;\n      uniform vec3 waterColor;\n\n      varying vec4 worldPosition;\n\n      vec4 getNoise( vec2 uv ) {\n      \tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\n      \tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\n      \tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\n      \tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\n      \tvec4 noise = texture2D( normalSampler, uv0 ) +\n      \t\ttexture2D( normalSampler, uv1 ) +\n      \t\ttexture2D( normalSampler, uv2 ) +\n      \t\ttexture2D( normalSampler, uv3 );\n      \treturn noise * 0.5 - 1.0;\n      }\n\n      void sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {\n      \tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\n      \tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );\n      \tspecularColor += pow( direction, shiny ) * sunColor * spec;\n      \tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\n      }\n\n      ${THREE.ShaderChunk[\"common\"]}\n      ${THREE.ShaderChunk[\"packing\"]}\n      ${THREE.ShaderChunk[\"bsdfs\"]}\n      ${THREE.ShaderChunk[\"lights_pars_begin\"]}\n\n      void main() {\n      \tvec4 noise = getNoise( worldPosition.xz * size );\n      \tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\n\n      \tvec3 diffuseLight = vec3(0.0);\n      \tvec3 specularLight = vec3(0.0);\n\n      \tvec3 worldToEye = eye-worldPosition.xyz;\n      \tvec3 eyeDirection = normalize( worldToEye );\n      \tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\n\n      \tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\n      \tfloat rf0 = 0.3;\n      \tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\n      \tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\n      \tvec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ), ( 0.5 + specularLight ), reflectance);\n      \tvec3 outgoingLight = albedo;\n      \tgl_FragColor = vec4( outgoingLight, 1 );\n      }\n    `\n  };\n\n  const material = new THREE.ShaderMaterial({\n    fragmentShader: mirrorShader.fragmentShader,\n    vertexShader: mirrorShader.vertexShader,\n    uniforms: THREE.UniformsUtils.clone(mirrorShader.uniforms),\n    transparent: false,\n    lights: true,\n    side: side,\n    fog: fog\n  });\n\n  material.uniforms.time.value = time;\n  material.uniforms.normalSampler.value = normalSampler;\n  material.uniforms.sunColor.value = sunColor;\n  material.uniforms.waterColor.value = waterColor;\n  material.uniforms.sunDirection.value = sunDirection;\n  material.uniforms.distortionScale.value = distortionScale;\n\n  material.uniforms.eye.value = eye;\n\n  scope.material = material;\n}\n\nMobileWater.prototype = Object.create(THREE.Mesh.prototype);\nMobileWater.prototype.constructor = THREE.Water;\n\nasync function loadWaterNormals(url) {\n  const texture = await new Promise((resolve, reject) =>\n    new THREE.TextureLoader().load(url, resolve, undefined, reject)\n  );\n  texture.wrapS = texture.wrapT = THREE.RepeatWrapping;\n  texture.needsUpdate = true;\n  return texture;\n}\n\nAFRAME.registerComponent(\"water\", {\n  schema: {\n    waterColor: { type: \"color\", default: \"#001e0f\" },\n    distortionScale: { type: \"number\", default: 3.7 },\n    sunColor: { type: \"color\", default: \"#ffffff\" },\n    inclination: { type: \"number\", default: 0 },\n    azimuth: { type: \"number\", default: 0 },\n    distance: { type: \"number\", default: 1 },\n    speed: { type: \"number\", default: 0.1 },\n    forceMobile: { type: \"boolean\", default: false }\n  },\n  init() {\n    const waterMesh = this.el.getObject3D(\"mesh\");\n    const waterGeometry = waterMesh.geometry;\n\n    // Render THREE.Water shader instead of THREE.Mesh\n    waterMesh.visible = false;\n\n    loadWaterNormals(waterNormalMap).then(waterNormals => {\n      const waterConfig = {\n        textureWidth: 512,\n        textureHeight: 512,\n        waterNormals: waterNormals,\n        sunDirection: this.data.sunDirection,\n        sunColor: new THREE.Color(this.data.sunColor),\n        waterColor: new THREE.Color(this.data.waterColor),\n        distortionScale: this.data.distortionScale,\n        fog: false\n      };\n\n      if (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR() || this.data.forceMobile) {\n        this.water = new MobileWater(waterGeometry, waterConfig);\n      } else {\n        this.water = new THREE.Water(waterGeometry, waterConfig);\n        this.water.mirrorCamera.layers.set(Layers.reflection);\n      }\n\n      this.el.setObject3D(\"water\", this.water);\n    });\n  },\n\n  update(oldData) {\n    if (this.data.forceMobile !== oldData.forceMobile) {\n      this.el.removeObject3D(\"water\");\n      this.init();\n      return;\n    }\n\n    if (!this.water) {\n      return;\n    }\n\n    const uniforms = this.water.material.uniforms;\n\n    if (this.data.waterColor !== oldData.waterColor) {\n      uniforms.waterColor.value.setStyle(this.data.waterColor);\n    }\n\n    if (this.data.distortionScale !== oldData.distortionScale) {\n      uniforms.distortionScale.value = this.data.distortionScale;\n    }\n\n    if (this.data.sunColor !== oldData.sunColor) {\n      uniforms.sunColor.value.setStyle(this.data.sunColor);\n    }\n\n    if (\n      this.data.inclination !== oldData.inclination ||\n      this.data.azimuth !== oldData.azimuth ||\n      this.data.distance !== oldData.distance\n    ) {\n      const theta = Math.PI * (this.data.inclination - 0.5);\n      const phi = 2 * Math.PI * (this.data.azimuth - 0.5);\n\n      const distance = this.data.distance;\n\n      const x = distance * Math.cos(phi);\n      const y = distance * Math.sin(phi) * Math.sin(theta);\n      const z = distance * Math.sin(phi) * Math.cos(theta);\n\n      uniforms.sunDirection.value.set(x, y, z);\n    }\n  },\n\n  tick(time) {\n    if (this.water) {\n      this.water.material.uniforms.time.value = (time / 1000) * this.data.speed;\n    }\n  },\n\n  remove() {\n    this.el.removeObject3D(\"water\");\n    const waterMesh = this.el.getObject3D(\"mesh\");\n    waterMesh.visible = true;\n  }\n});\n","export function getSanitizedComponentMapping(inputComponent, inputProperty, publicComponents) {\n  const publicComponent = publicComponents[inputComponent];\n\n  if (!publicComponent) {\n    throw new Error(`Component \"${inputComponent}\" is not public.`);\n  }\n\n  const publicProperty = publicComponent.publicProperties[inputProperty];\n\n  if (!publicProperty) {\n    throw new Error(`Component \"${inputComponent}\"'s property \"${inputProperty}\" is not public.`);\n  }\n\n  return {\n    mappedComponent: publicComponent.mappedComponent,\n    mappedProperty: publicProperty.mappedProperty,\n    getMappedValue: publicProperty.getMappedValue\n  };\n}\n","import \"./components/gltf-model-plus\";\nimport { getSanitizedComponentMapping } from \"./utils/component-mappings\";\nimport { isHubsDestinationUrl } from \"./utils/media-url-utils\";\nconst PHYSICS_CONSTANTS = require(\"aframe-physics-system/src/constants\"),\n  TYPE = PHYSICS_CONSTANTS.TYPE,\n  SHAPE = PHYSICS_CONSTANTS.SHAPE,\n  FIT = PHYSICS_CONSTANTS.FIT;\nconst COLLISION_LAYERS = require(\"./constants\").COLLISION_LAYERS;\n\nAFRAME.GLTFModelPlus.registerComponent(\"duck\", \"duck\");\nAFRAME.GLTFModelPlus.registerComponent(\"quack\", \"quack\");\nAFRAME.GLTFModelPlus.registerComponent(\"sound\", \"sound\");\nAFRAME.GLTFModelPlus.registerComponent(\"css-class\", \"css-class\");\nAFRAME.GLTFModelPlus.registerComponent(\"interactable\", \"css-class\", (el, componentName) => {\n  el.setAttribute(componentName, \"interactable\");\n});\nAFRAME.GLTFModelPlus.registerComponent(\"super-spawner\", \"super-spawner\", (el, componentName, componentData) => {\n  //TODO: Do not automatically add these components\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n  el.setAttribute(\"hoverable-visuals\", {\n    cursorController: \"#cursor-controller\"\n  });\n  el.setAttribute(componentName, componentData);\n});\nAFRAME.GLTFModelPlus.registerComponent(\"gltf-model-plus\", \"gltf-model-plus\");\nAFRAME.GLTFModelPlus.registerComponent(\"media-loader\", \"media-loader\");\nAFRAME.GLTFModelPlus.registerComponent(\"body\", \"ammo-body\", el => {\n  //This is only required for migration of old environments with super-spawners\n  //will no longer be needed when spawners are added via Spoke instead.\n  el.setAttribute(\"ammo-body\", {\n    mass: 0,\n    type: TYPE.STATIC,\n    collisionFilterGroup: COLLISION_LAYERS.INTERACTABLES,\n    collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER\n  });\n});\nAFRAME.GLTFModelPlus.registerComponent(\"ammo-shape\", \"ammo-shape\");\nAFRAME.GLTFModelPlus.registerComponent(\"hide-when-quality\", \"hide-when-quality\");\nAFRAME.GLTFModelPlus.registerComponent(\"light\", \"light\", (el, componentName, componentData) => {\n  if (componentData.distance === 0) {\n    componentData.decay = 0;\n  }\n  el.setAttribute(componentName, componentData);\n  if (componentData.castShadow) {\n    // HACK: component.light isn't set until one frame after setArrtibute\n    setTimeout(() => {\n      el.components.light.light.shadow.camera.matrixNeedsUpdate = true;\n    }, 0);\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"ambient-light\", \"ambient-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"directional-light\", \"directional-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"hemisphere-light\", \"hemisphere-light\");\nfunction decayMigration(el, componentName, componentData) {\n  if (componentData.range === 0) {\n    componentData.decay = 0;\n  }\n  el.setAttribute(componentName, componentData);\n}\nAFRAME.GLTFModelPlus.registerComponent(\"point-light\", \"point-light\", decayMigration);\nAFRAME.GLTFModelPlus.registerComponent(\"spot-light\", \"spot-light\", decayMigration);\n\nAFRAME.GLTFModelPlus.registerComponent(\"skybox\", \"skybox\");\nAFRAME.GLTFModelPlus.registerComponent(\"layers\", \"layers\");\nAFRAME.GLTFModelPlus.registerComponent(\"shadow\", \"shadow\");\nAFRAME.GLTFModelPlus.registerComponent(\"water\", \"water\");\nAFRAME.GLTFModelPlus.registerComponent(\"scale-audio-feedback\", \"scale-audio-feedback\");\nAFRAME.GLTFModelPlus.registerComponent(\"animation-mixer\", \"animation-mixer\");\nAFRAME.GLTFModelPlus.registerComponent(\"loop-animation\", \"loop-animation\");\nAFRAME.GLTFModelPlus.registerComponent(\n  \"box-collider\",\n  \"ammo-shape\",\n  (() => {\n    const euler = new THREE.Euler();\n    return (el, componentName, componentData) => {\n      const { scale, rotation } = componentData;\n      euler.set(rotation.x, rotation.y, rotation.z);\n      const orientation = new THREE.Quaternion().setFromEuler(euler);\n      el.setAttribute(componentName, {\n        type: SHAPE.BOX,\n        fit: FIT.MANUAL,\n        offset: componentData.position,\n        halfExtents: { x: scale.x / 2, y: scale.y / 2, z: scale.z / 2 },\n        orientation\n      });\n    };\n  })()\n);\nAFRAME.GLTFModelPlus.registerComponent(\"visible\", \"visible\", (el, componentName, componentData) => {\n  if (typeof componentData === \"object\") {\n    el.setAttribute(componentName, componentData.visible);\n  } else {\n    el.setAttribute(componentName, componentData);\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"spawn-point\", \"spawn-point\");\nAFRAME.GLTFModelPlus.registerComponent(\"sticky-zone\", \"sticky-zone\");\nAFRAME.GLTFModelPlus.registerComponent(\"nav-mesh\", \"nav-mesh\", (el, _componentName, componentData) => {\n  const nav = AFRAME.scenes[0].systems.nav;\n  const zone = componentData.zone || \"character\";\n  let found = false;\n  el.object3D.traverse(node => {\n    if (node.isMesh && !found) {\n      found = true;\n      nav.loadMesh(node, zone);\n    }\n  });\n  // There isn't actually an a-frame nav-mesh component, but we want to tag this el as a nav-mesh since\n  // nav-mesh-helper will query for it later.\n  el.setAttribute(\"nav-mesh\");\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"pinnable\", \"pinnable\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"media\", \"media\", (el, componentName, componentData) => {\n  if (componentData.id) {\n    el.setAttribute(\"networked\", {\n      template: \"#interactable-media\",\n      owner: \"scene\",\n      persistent: true,\n      networkId: componentData.id\n    });\n  }\n\n  el.setAttribute(\"media-loader\", {\n    src: componentData.src,\n    resize: true,\n    resolve: true,\n    fileIsOwned: true,\n    animate: false,\n    contentSubtype: componentData.contentSubtype\n  });\n\n  if (componentData.pageIndex) {\n    el.setAttribute(\"media-pager\", { index: componentData.pageIndex });\n  }\n\n  if (componentData.paused !== undefined) {\n    el.setAttribute(\"media-video\", { videoPaused: componentData.paused });\n  }\n\n  if (componentData.time) {\n    el.setAttribute(\"media-video\", { time: componentData.time });\n  }\n});\n\nfunction mediaInflator(el, componentName, componentData, components) {\n  let isControlled = true;\n\n  if (components.networked) {\n    // TODO: When non-hubs links can be traversed, make all link components controlled so you can open them.\n    isControlled =\n      componentData.controls || isHubsDestinationUrl(componentData.src) || isHubsDestinationUrl(componentData.href);\n\n    const hasVolume = componentName === \"video\";\n    const templateName = isControlled || hasVolume ? \"#static-controlled-media\" : \"#static-media\";\n\n    el.setAttribute(\"networked\", {\n      template: templateName,\n      owner: \"scene\",\n      persistent: true,\n      networkId: components.networked.id\n    });\n  }\n\n  const mediaOptions = {};\n\n  if (componentName === \"video\" || componentName === \"image\") {\n    mediaOptions.projection = componentData.projection;\n  }\n\n  if (componentName === \"video\") {\n    mediaOptions.videoPaused = !componentData.autoPlay;\n    mediaOptions.volume = componentData.volume;\n    mediaOptions.loop = componentData.loop;\n    mediaOptions.audioType = componentData.audioType;\n    mediaOptions.hidePlaybackControls = !isControlled;\n\n    if (componentData.audioType === \"pannernode\") {\n      mediaOptions.distanceModel = componentData.distanceModel;\n      mediaOptions.rolloffFactor = componentData.rolloffFactor;\n      mediaOptions.refDistance = componentData.refDistance;\n      mediaOptions.maxDistance = componentData.maxDistance;\n      mediaOptions.coneInnerAngle = componentData.coneInnerAngle;\n      mediaOptions.coneOuterAngle = componentData.coneOuterAngle;\n      mediaOptions.coneOuterGain = componentData.coneOuterGain;\n    }\n\n    el.setAttribute(\"video-pause-state\", { paused: mediaOptions.videoPaused });\n  }\n\n  const src = componentName === \"link\" ? componentData.href : componentData.src;\n\n  el.setAttribute(\"media-loader\", {\n    src,\n    resize: true,\n    resolve: true,\n    fileIsOwned: true,\n    animate: false,\n    mediaOptions\n  });\n}\n\nAFRAME.GLTFModelPlus.registerComponent(\"image\", \"image\", mediaInflator);\nAFRAME.GLTFModelPlus.registerComponent(\"video\", \"video\", mediaInflator, (name, property, value) => {\n  if (property === \"paused\") {\n    return { name: \"video-pause-state\", property, value };\n  } else {\n    return null;\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"link\", \"link\", mediaInflator);\n\nAFRAME.GLTFModelPlus.registerComponent(\"hoverable\", \"is-remote-hover-target\", el => {\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"spawner\", \"spawner\", (el, componentName, componentData) => {\n  el.setAttribute(\"media-loader\", {\n    src: componentData.src,\n    resolve: true,\n    fileIsOwned: true,\n    animate: false\n  });\n  el.setAttribute(\"css-class\", \"interactable\");\n  el.setAttribute(\"super-spawner\", {\n    src: componentData.src,\n    resolve: true,\n    template: \"#interactable-media\"\n  });\n  el.setAttribute(\"hoverable-visuals\", {\n    cursorController: \"#cursor-controller\"\n  });\n  el.setAttribute(\"ammo-body\", {\n    mass: 0,\n    type: TYPE.STATIC,\n    collisionFilterGroup: COLLISION_LAYERS.INTERACTABLES,\n    collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER\n  });\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n});\n\nconst publicComponents = {\n  video: {\n    mappedComponent: \"video-pause-state\",\n    publicProperties: {\n      paused: {\n        mappedProperty: \"paused\",\n        getMappedValue(value) {\n          return !!value;\n        }\n      }\n    }\n  },\n  \"loop-animation\": {\n    mappedComponent: \"loop-animation\",\n    publicProperties: {\n      paused: {\n        mappedProperty: \"paused\",\n        getMappedValue(value) {\n          return !!value;\n        }\n      }\n    }\n  }\n};\n\nAFRAME.GLTFModelPlus.registerComponent(\n  \"trigger-volume\",\n  \"trigger-volume\",\n  (el, componentName, componentData, components, indexToEntityMap) => {\n    const {\n      size,\n      target,\n      enterComponent,\n      enterProperty,\n      enterValue,\n      leaveComponent,\n      leaveProperty,\n      leaveValue\n    } = componentData;\n\n    let enterComponentMapping, leaveComponentMapping, targetEntity;\n\n    try {\n      enterComponentMapping = getSanitizedComponentMapping(enterComponent, enterProperty, publicComponents);\n      leaveComponentMapping = getSanitizedComponentMapping(leaveComponent, leaveProperty, publicComponents);\n\n      targetEntity = indexToEntityMap[target];\n\n      if (!targetEntity) {\n        throw new Error(`Couldn't find target entity with index: ${target}.`);\n      }\n    } catch (e) {\n      console.warn(`Error inflating gltf component \"trigger-volume\": ${e.message}`);\n      return;\n    }\n\n    // Filter out scope and colliders properties.\n    el.setAttribute(\"trigger-volume\", {\n      colliders: \"#player-camera\",\n      size,\n      target: targetEntity,\n      enterComponent: enterComponentMapping.mappedComponent,\n      enterProperty: enterComponentMapping.mappedProperty,\n      enterValue: enterComponentMapping.getMappedValue(enterValue),\n      leaveComponent: leaveComponentMapping.mappedComponent,\n      leaveProperty: leaveComponentMapping.mappedProperty,\n      leaveValue: leaveComponentMapping.getMappedValue(leaveValue)\n    });\n  }\n);\n\nAFRAME.GLTFModelPlus.registerComponent(\"heightfield\", \"heightfield\", (el, componentName, componentData) => {\n  el.setAttribute(\"ammo-shape__heightfield\", {\n    type: SHAPE.HEIGHTFIELD,\n    margin: 0.01,\n    fit: FIT.MANUAL,\n    heightfieldDistance: componentData.distance,\n    offset: componentData.offset,\n    heightfieldData: componentData.data\n  });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"trimesh\", \"trimesh\", el => {\n  el.setAttribute(\"ammo-shape__trimesh\", {\n    type: SHAPE.MESH,\n    margin: 0.01,\n    fit: FIT.ALL,\n    includeInvisible: true\n  });\n});\n","module.exports = __webpack_public_path__ + \"assets/images/logo-8f1dfd234d060073524bc29912a24f75.svg\";","module.exports = __webpack_public_path__ + \"assets/images/giphy_logo-1dcbee43e18919c0bd0c999be8602628.png\";","// Utilities for manipulating state history. This provides a number of functions which\n// need to be used to manipulate history state so we can deal with edge cases around\n// entry back button and refreshes once entered.\n//\n// These functions also transparently deal with the room slug, so incoming calls can ignore\n// dealing with it, and provides APIs for getting the non-slug part of the path.\n//\n// The slug cannot be part of the basename for history, because the slug changes intra-session\n// if the room is renamed.\n\n// This pushes/replaces a new k, v pair into the history, while maintaining all the other\n// keys, or clears state if k if null.\n//\n// Also maintains a length key that can be used to find the length of the history chain\n// (across refreshes) for the current room.\nfunction pushOrUpdateHistory(history, replace, k, v, detail, newPathname, newSearch) {\n  let state = {};\n  const newLength = ((history.location.state && history.location.state.__historyLength) || 0) + (replace ? 0 : 1);\n\n  if (k || newPathname || newSearch) {\n    state = history.location.state ? { ...history.location.state } : {};\n    delete state.__duplicate;\n\n    if (k) {\n      state[k] = v;\n      state.key = k;\n      state.value = v;\n      state.detail = detail;\n    }\n  }\n\n  const pathname =\n    newPathname !== undefined ? newPathname : history.location.pathname === \"/\" ? \"\" : history.location.pathname;\n\n  const search = newSearch !== undefined ? newSearch : history.location.search;\n\n  // If popToBeginningOfHubHistory was previously used, there is a duplicate entry\n  // at the top of the history stack (which was needed to wipe out forward history)\n  // so we use this opportunity to replace it.\n  const isDuplicate = history.location.state && history.location.state.__duplicate;\n  const method = replace || isDuplicate ? history.replace : history.push;\n  state.__historyLength = newLength;\n\n  method({ pathname, search, state });\n}\n\nexport function pushHistoryState(history, k, v, detail) {\n  pushOrUpdateHistory(history, false, k, v, detail);\n}\n\nexport function replaceHistoryState(history, k, v, detail) {\n  pushOrUpdateHistory(history, true, k, v, detail);\n}\n\nexport function pushHistoryPath(history, path, search) {\n  pushOrUpdateHistory(history, false, null, null, null, path, search);\n}\n\nexport function clearHistoryState(history) {\n  pushOrUpdateHistory(history, false);\n}\n\n// This will pop the browser history to the first entry that was for this hubs room,\n// and then push a duplicate entry onto the history stack in order to wipe out forward\n// history.\nexport function popToBeginningOfHubHistory(history, navigateToPriorPage) {\n  if (!history.location.state || history.location.state.__historyLength === undefined) return;\n\n  const len = history.location.state.__historyLength;\n  if (len === 0) return;\n\n  return new Promise(resolve => {\n    // After the go() completes, we push a duplicate history entry onto the stack\n    // in order to wipe out forward history. We also optionally go back -2 if we wanted\n    // to go back to the prior page.\n    const unsubscribe = history.listen(() => {\n      unsubscribe();\n      history.push({\n        pathname: history.location.pathname,\n        search: history.location.search,\n        state: { __historyLength: 0, __duplicate: true }\n      });\n      if (navigateToPriorPage) history.go(-2); // Go back to history entry before beginning.\n      resolve();\n    });\n\n    history.go(-len);\n  });\n}\n\n// This will pop the browser history to the entry before the first entry for this hubs room.\nexport function navigateToPriorPage(history) {\n  popToBeginningOfHubHistory(history, true);\n}\n\n// Returns the part of the pathname that does not include the slug\nexport function sluglessPath(location) {\n  const parts = location.pathname.split(\"/\");\n  return `/${parts.slice(2).join(\"/\")}`;\n}\n\n// Returns a new path that includes the current slug as a prefix to the\n// provided path.\nexport function withSlug(location, path) {\n  const parts = location.pathname.split(\"/\");\n  return `/${parts[1]}${path}`;\n}\n","import screenfull from \"screenfull\";\n\nlet hasEnteredFullScreenThisSession = false;\n\nfunction shouldShowFullScreen() {\n  // Disable full screen on iOS, since Safari's fullscreen mode does not let you prevent native pinch-to-zoom gestures.\n  return (\n    (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR()) &&\n    !AFRAME.utils.device.isIOS() &&\n    screenfull.enabled\n  );\n}\n\nexport function willRequireUserGesture() {\n  return !screenfull.isFullscreen && shouldShowFullScreen();\n}\n\nexport function showFullScreenIfAvailable() {\n  if (shouldShowFullScreen()) {\n    screenfull.request();\n    hasEnteredFullScreenThisSession = true;\n  }\n}\n\nexport function showFullScreenIfWasFullScreen() {\n  if (hasEnteredFullScreenThisSession && !screenfull.isFullscreen) {\n    screenfull.request();\n  }\n}\n","module.exports = \"data:image/gif;base64,R0lGODlhEAAQAIQaAAAAAAEBAQABBQEBAgEBBQMDAwAykwBk+wFk+/85Af47AwCIHgCJHgGJHgCKHgOJIPc63vc64Pc64YeHhwDySLu7wru8wru8w7y8wwD6/v///////////////////////yH+EUNyZWF0ZWQgd2l0aCBHSU1QACH5BAEKAB8ALAAAAAAQABAAAAVl4AeMZDl9KAqkLDqd6YrN9HzC4jdbTUPDMBnGQWEAKphBYKTSYR6LRQE5y+VmlUAAc+lWrMIa4nBYxXQJcabMkkUUtLGhJZNA4BiC4HyVSCJpKRhgOktmgoRVLDSELY5mTHQlKyEAOw==\"","module.exports = __webpack_public_path__ + \"assets/camera_tool-a25d0894a6b635779bd4ed41f2de0411.glb\";","module.exports = __webpack_public_path__ + \"assets/images/mic_granted-5d41c8098b2c1a084f07dd3a2473983f.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_granted@2x-f84d9eb002832eeeb768529e6cb1e93e.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_small-b81b3397cc985eb8d3d67a4f007158cc.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_small@2x-d04ff548fa26495f69249f0c34f44b72.png\";","module.exports = __webpack_public_path__ + \"assets/images/dropdown_arrow-601450f494125f8caccec2271aebd4cb.png\";","module.exports = __webpack_public_path__ + \"assets/images/dropdown_arrow@2x-1023ab0bd743b3525d99986de89f0c3b.png\";","module.exports = __webpack_public_path__ + \"assets/images/mobile_screen_entry-b29fcd32c8f70bb828c1abceb62f93e2.svg\";","module.exports = __webpack_public_path__ + \"assets/images/desktop_screen_entry-e5ff9b5e64caa694e9b4183e532fcb17.svg\";","module.exports = __webpack_public_path__ + \"assets/images/generic_vr_entry-c648c26ce1388450df7edbd92ec00f5e.svg\";","module.exports = __webpack_public_path__ + \"assets/images/gearvr_entry-dcea59d35d7fae4c8b9c4985c1743851.svg\";","module.exports = __webpack_public_path__ + \"assets/images/daydream_entry-6e2716960046992dbd6b0e87bf8c2c3a.svg\";","module.exports = __webpack_public_path__ + \"assets/images/link_dialog_header-b15568ca2056d8be7a58c359e6a9ca51.svg\";","module.exports = __webpack_public_path__ + \"assets/images/presence_phone-fd7ea0e8be441172a758704055604e5f.png\";","module.exports = __webpack_public_path__ + \"assets/images/presence_desktop-be24a9f21df60cd831ad66b67282d6f2.png\";","module.exports = __webpack_public_path__ + \"assets/images/presence_discord-e05ead6e6ebc08df9291738d0aa6986d.png\";","module.exports = __webpack_public_path__ + \"assets/images/presence_camera-aaa719190a30677416c33e3dda33d7ef.png\";","module.exports = __webpack_public_path__ + \"assets/images/presence_vr-563f3bd1c0f37473a3303f4a6049288c.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_background-9744d0690bba7838e4a75949d9645c09.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_background@2x-bf55b6a808963d89ff7ce04c516c232c.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_fill-35626a008836cbdc34ec624e16f5b723.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_fill@2x-b3e3675f8281c84660fb5b47eb66126e.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_level-d197b930a4350dc80adb2446babb05e1.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_level@2x-9d49309c2f0e55e5c54193237658768b.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_action_background-5aeb2dca8113545a2bc3e56dc702001b.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_action_background@2x-3a7ab65c95a1b4037d701c8fa16c3cd6.png\";","import { fetchReticulumAuthenticated } from \"./phoenix-utils\";\nimport { proxiedUrlFor } from \"./media-url-utils\";\nimport { avatars } from \"../assets/avatars/avatars\";\n\nexport const AVATAR_TYPES = {\n  LEGACY: \"legacy\",\n  SKINNABLE: \"skinnable\",\n  URL: \"url\"\n};\n\nconst legacyAvatarIds = avatars.map(a => a.id);\nexport function getAvatarType(avatarId) {\n  if (!avatarId || legacyAvatarIds.indexOf(avatarId) !== -1) return AVATAR_TYPES.LEGACY;\n  if (avatarId.startsWith(\"http\")) return AVATAR_TYPES.URL;\n  return AVATAR_TYPES.SKINNABLE;\n}\n\nasync function fetchSkinnableAvatar(avatarId) {\n  const resp = await fetchReticulumAuthenticated(`/api/v1/avatars/${avatarId}`);\n  return resp && resp.avatars && resp.avatars[0];\n}\n\nexport async function fetchAvatar(avatarId) {\n  switch (getAvatarType(avatarId)) {\n    case AVATAR_TYPES.LEGACY:\n      return {\n        avatar_id: avatarId,\n        gltf_url: avatars.find(avatar => avatar.id === avatarId).model\n      };\n    case AVATAR_TYPES.SKINNABLE:\n      return fetchSkinnableAvatar(avatarId);\n    case AVATAR_TYPES.URL:\n      return {\n        avatar_id: avatarId,\n        gltf_url: proxiedUrlFor(avatarId)\n      };\n  }\n}\n\nasync function fetchAvatarGltfUrl(avatarId) {\n  return fetchAvatar(avatarId).then(avatar => avatar && avatar.gltf_url);\n}\n\nexport function getAvatarSrc(avatarId) {\n  switch (getAvatarType(avatarId)) {\n    case AVATAR_TYPES.LEGACY:\n      return `#${avatarId}`;\n    case AVATAR_TYPES.SKINNABLE:\n      return fetchAvatarGltfUrl(avatarId);\n    case AVATAR_TYPES.URL:\n      return proxiedUrlFor(avatarId);\n    default:\n      return avatarId;\n  }\n}\n\nexport async function getAvatarThumbnailUrl(avatarId) {\n  switch (getAvatarType(avatarId)) {\n    case AVATAR_TYPES.LEGACY:\n      return avatars.find(avatar => avatar.id === avatarId).thumbnail;\n    case AVATAR_TYPES.SKINNABLE:\n      return fetchAvatar(avatarId).then(avatar => avatar.files.thumbnail);\n    default:\n      return \"https://asset-bundles-prod.reticulum.io/bots/avatar_unavailable.png\";\n  }\n}\n","module.exports = __webpack_public_path__ + \"assets/images/level_action_fill-4e639ed717b8a9a7da4426665ec2dcf4.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_action_fill@2x-eb547f6337c0ea74b35da9812ee3e04b.png\";","module.exports = __webpack_public_path__ + \"assets/images/speaker_level-9567a1a6f33d4d0e59e57903b08369c9.png\";","module.exports = __webpack_public_path__ + \"assets/images/speaker_level@2x-b5e6a12f613576cf5c1a1b96e8c9d8d0.png\";","module.exports = __webpack_public_path__ + \"assets/sfx/tone-624e72d19fe0cea1b85ca174cb6be256.webm\";","module.exports = __webpack_public_path__ + \"assets/sfx/tone-3fa0defb5172b2533fedcc1929605799.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/tone-78ae5a60f0e336f384919eee9f5a2e18.ogg\";","module.exports = __webpack_public_path__ + \"assets/sfx/tone-4604a4c98f36f3e0c6980295bc5c7ffe.wav\";","module.exports = __webpack_public_path__ + \"assets/images/change_avatar-a426739806600c28e20a614cbade29f2.svg\";","module.exports = \"#version 300 es\\nprecision highp float;\\nprecision highp int;\\n\\n// Keep these separate so three only sets them once\\nuniform mat4 viewMatrix;\\nuniform mat4 projectionMatrix;\\n\\nlayout(std140) uniform InstanceData {\\n  mat4 transforms[MAX_INSTANCES];\\n  vec4 colors[MAX_INSTANCES];\\n  vec4 uvTransforms[MAX_INSTANCES];\\n  vec4 mapSettings[MAX_INSTANCES];\\n\\n  vec4 hubs_SweepParams[MAX_INSTANCES];\\n\\n  vec3 hubs_InteractorOnePos;\\n  bool hubs_IsFrozen;\\n\\n  vec3 hubs_InteractorTwoPos;\\n  float hubs_Time;\\n\\n} instanceData;\\n\\nout vec3 hubs_WorldPosition;\\n\\nin vec3 position;\\nin vec2 uv;\\n\\n#ifdef PSEUDO_INSTANCING\\nin float instance;\\nflat out uint vInstance;\\n#endif\\n\\n#ifdef VERTEX_COLORS\\nin vec3 color;\\n#endif\\n\\nout vec2 vUv;\\nout vec4 vColor;\\n\\nflat out vec4 vUVTransform;\\nflat out vec4 vMapSettings;\\n\\nvoid main() {\\n  #ifdef PSEUDO_INSTANCING\\n  uint instanceIndex = uint(instance);\\n  #elif\\n  uint instanceIndex = gl_InstanceID;\\n  #endif\\n\\n  vColor = instanceData.colors[instanceIndex];\\n\\n  #ifdef VERTEX_COLORS\\n  vColor *= vec4(color, 1.0);\\n  #endif\\n\\n  vUv = uv;\\n  vUVTransform = instanceData.uvTransforms[instanceIndex];\\n  vMapSettings = instanceData.mapSettings[instanceIndex];\\n\\n  gl_Position = projectionMatrix * viewMatrix * instanceData.transforms[instanceIndex] * vec4(position, 1.0);\\n\\n  hubs_WorldPosition = (instanceData.transforms[instanceIndex] * vec4(position, 1.0)).xyz;\\n  vInstance = instanceIndex;\\n}\\n\"","module.exports = \"#version 300 es\\nprecision highp float;\\nprecision highp int;\\nprecision highp sampler2DArray;\\n\\n\\nlayout(std140) uniform InstanceData {\\n  mat4 transforms[MAX_INSTANCES];\\n  vec4 colors[MAX_INSTANCES];\\n  vec4 uvTransforms[MAX_INSTANCES];\\n  vec4 mapSettings[MAX_INSTANCES];\\n\\n  vec4 hubs_SweepParams[MAX_INSTANCES];\\n\\n  vec3 hubs_InteractorOnePos;\\n  bool hubs_IsFrozen;\\n\\n  vec3 hubs_InteractorTwoPos;\\n  float hubs_Time;\\n\\n} instanceData;\\nin vec3 hubs_WorldPosition;\\n#ifdef PSEUDO_INSTANCING\\nflat in uint vInstance;\\n#endif\\n\\n\\nuniform sampler2DArray map;\\n\\nin vec2 vUv;\\nin vec4 vColor;\\nflat in vec4 vUVTransform;\\nflat in vec4 vMapSettings;\\n\\nout vec4 outColor;\\n\\nfloat applyWrapping(float value, int mode) {\\n  if (mode == 0) {\\n    // CLAMP_TO_EDGE - default\\n    return clamp(value, 0.0, 1.0);\\n  } else if (mode == 1) {\\n    // REPEAT\\n    return fract(value);\\n  } else {\\n    // MIRRORED_REPEAT\\n    float n = mod(value, 2.0);\\n    return mix(n, 2.0 - n, step(1.0, n));\\n  }\\n}\\n\\nvoid main() {\\n  vec2 uv = vUv;\\n\\n  int wrapS = int(vMapSettings.y);\\n  int wrapT = int(vMapSettings.z);\\n  uv.s = applyWrapping(uv.s, wrapS);\\n  uv.t = applyWrapping(uv.t, wrapT);\\n\\n  vec2 uvMin = vUVTransform.xy;\\n  vec2 uvScale = vUVTransform.zw;\\n  uv = uvMin + uv * uvScale;\\n\\n  int mapIdx = int(vMapSettings.x);\\n  outColor = texture(map, vec3(uv, mapIdx)) * vColor;\\n\\n  bool hubs_HighlightInteractorOne = instanceData.hubs_SweepParams[vInstance].z > 0.0;\\n  bool hubs_HighlightInteractorTwo = instanceData.hubs_SweepParams[vInstance].w > 0.0;\\n  bool hubs_IsFrozen = instanceData.hubs_IsFrozen;\\n\\n  if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\\n\\n      bool hubs_EnableSweepingEffect = true;\\n      vec2 hubs_SweepParams = instanceData.hubs_SweepParams[vInstance].xy;\\n      float hubs_Time = instanceData.hubs_Time;\\n\\n      float ratio = 0.0;\\n\\n      if (hubs_EnableSweepingEffect) {\\n          float size = hubs_SweepParams.t - hubs_SweepParams.s;\\n          float line = mod(hubs_Time / 500.0 * size, size * 3.0) + hubs_SweepParams.s - size / 3.0;\\n\\n          if (hubs_WorldPosition.y < line) {\\n              // Highlight with a sweeping gradient.\\n              ratio = max(0.0, 1.0 - (line - hubs_WorldPosition.y) / (size * 1.5));\\n          }\\n      }\\n\\n      // Highlight with a gradient falling off with distance.\\n      float pulse = 9.0 + 3.0 * (sin(hubs_Time / 1000.0) + 1.0);\\n\\n      if (hubs_HighlightInteractorOne) {\\n          float dist1 = distance(hubs_WorldPosition, instanceData.hubs_InteractorOnePos);\\n          ratio += -min(1.0, pow(dist1 * pulse, 3.0)) + 1.0;\\n      }\\n\\n      if (hubs_HighlightInteractorTwo) {\\n          float dist2 = distance(hubs_WorldPosition, instanceData.hubs_InteractorTwoPos);\\n          ratio += -min(1.0, pow(dist2 * pulse, 3.0)) + 1.0;\\n      }\\n\\n      ratio = min(1.0, ratio);\\n\\n      // Gamma corrected highlight color\\n      vec3 highlightColor = vec3(0.184, 0.499, 0.933);\\n\\n      outColor = vec4((outColor.rgb * (1.0 - ratio)) + (highlightColor * ratio), outColor.a);\\n  }\\n\\n}\\n\"","module.exports = __webpack_public_path__ + \"assets/images/spritesheets/sprite-system-spritesheet-15932e1728cf2d2a32b7c28d090e5d2f.png\";","module.exports = \"attribute vec4 mvCol0;\\nattribute vec4 mvCol1;\\nattribute vec4 mvCol2;\\nattribute vec4 mvCol3;\\nattribute vec3 a_vertices;\\nattribute vec2 a_uvs;\\nvarying vec2 v_uvs;\\nattribute float a_hubs_EnableSweepingEffect;\\nvarying float v_hubs_EnableSweepingEffect;\\nattribute vec2 a_hubs_SweepParams;\\nvarying vec2 v_hubs_SweepParams;\\nvarying vec3 hubs_WorldPosition;\\n\\nvoid main() {\\n  mat4 mv = mat4(mvCol0, mvCol1, mvCol2, mvCol3);\\n  gl_Position = projectionMatrix * modelViewMatrix * mv * vec4(a_vertices, 1.0);\\n  v_uvs = a_uvs;\\n  v_hubs_EnableSweepingEffect = a_hubs_EnableSweepingEffect;\\n  v_hubs_SweepParams = a_hubs_SweepParams;\\n\\n  vec4 wt = vec4(a_vertices, 1.0);\\n  hubs_WorldPosition = (mv * wt).xyz;\\n}\\n\"","module.exports = \"precision mediump float;\\n\\nuniform sampler2D u_spritesheet;\\n\\nvarying vec2 v_uvs;\\n\\nvarying float v_hubs_EnableSweepingEffect;\\nvarying vec2 v_hubs_SweepParams;\\nvarying vec3 hubs_WorldPosition;\\nuniform bool hubs_HighlightInteractorOne;\\nuniform vec3 hubs_InteractorOnePos;\\nuniform bool hubs_HighlightInteractorTwo;\\nuniform vec3 hubs_InteractorTwoPos;\\nuniform float hubs_Time;\\n\\n#define GAMMA_FACTOR 2.2\\n\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n  return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\\n}\\n\\nvec4 linearToOutputTexel( vec4 value ) {\\n  return LinearToGamma( value, float( GAMMA_FACTOR ) );\\n}\\n\\nvoid main() {\\n    vec4 texColor = texture2D(u_spritesheet, v_uvs);\\n\\n    float ratio = 0.0;\\n    if (v_hubs_EnableSweepingEffect > 0.9 ) {\\n        float size = v_hubs_SweepParams.t - v_hubs_SweepParams.s * 1.0;\\n        float line = mod(hubs_Time / 500.0 * size, size * 3.0) + v_hubs_SweepParams.s - size / 3.0;\\n        if (hubs_WorldPosition.y < line) {\\n            ratio = max(0.0, 1.0 - (line - hubs_WorldPosition.y) / (size * 1.5));\\n        }\\n\\n    }\\n    ratio = min(1.0, ratio);\\n\\n    vec4 highlightColor = linearToOutputTexel(vec4(0.184, 0.499, 0.933, 1.0));\\n    gl_FragColor = vec4((texColor.rgb * (1.0 - ratio)) + (highlightColor.rgb * ratio), texColor.a);\\n}\\n\"","const VERTEX_SHADER = `\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n  #include <uv_vertex>\n  #include <uv2_vertex>\n  #include <color_vertex>\n  #include <skinbase_vertex>\n\n  #include <begin_vertex>\n  #include <morphtarget_vertex>\n  #include <skinning_vertex>\n  #include <project_vertex>\n  #include <logdepthbuf_vertex>\n\n  #include <worldpos_vertex>\n  #include <clipping_planes_vertex>\n  #include <fog_vertex>\n}\n`;\n\nconst FRAGMENT_SHADER = `\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <aomap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n  #include <clipping_planes_fragment>\n\n  vec4 diffuseColor = vec4(diffuse, opacity);\n  ReflectedLight reflectedLight = ReflectedLight(vec3(0.0), vec3(0.0), vec3(0.0), vec3(0.0));\n  vec3 totalEmissiveRadiance = emissive;\n\n  #include <logdepthbuf_fragment>\n  #include <map_fragment>\n  #include <color_fragment>\n  #include <alphatest_fragment>\n  #include <emissivemap_fragment>\n\n  reflectedLight.indirectDiffuse += vec3(1.0);\n\n  #include <aomap_fragment>\n\n  reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n  vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n  gl_FragColor = vec4(outgoingLight, diffuseColor.a);\n\n  #include <premultiplied_alpha_fragment>\n  #include <tonemapping_fragment>\n  #include <encodings_fragment>\n  #include <fog_fragment>\n}\n`;\n\nexport default class MobileStandardMaterial extends THREE.ShaderMaterial {\n  type = \"MobileStandardMaterial\";\n  isMobileStandardMaterial = true;\n  static fromStandardMaterial(material) {\n    const parameters = {\n      vertexShader: VERTEX_SHADER,\n      fragmentShader: FRAGMENT_SHADER,\n      uniforms: {\n        uvTransform: { value: new THREE.Matrix3() },\n        diffuse: { value: material.color },\n        opacity: { value: material.opacity },\n        map: { value: material.map },\n        aoMapIntensity: { value: material.aoMapIntensity },\n        aoMap: { value: material.aoMap },\n        emissive: { value: material.emissive },\n        emissiveMap: { value: material.emissiveMap }\n      },\n      fog: true,\n      lights: false,\n      opacity: material.opacity,\n      transparent: material.transparent,\n      alphaTest: material.alphaTest,\n      skinning: material.skinning,\n      morphTargets: material.morphTargets,\n      vertexColors: material.vertexColors\n    };\n\n    const mobileMaterial = new MobileStandardMaterial(parameters);\n\n    mobileMaterial.color = material.color;\n    mobileMaterial.map = material.map;\n    mobileMaterial.aoMap = material.aoMap;\n    mobileMaterial.aoMapIntensity = material.aoMapIntensity;\n    mobileMaterial.emissive = material.emissive;\n    mobileMaterial.emissiveMap = material.emissiveMap;\n\n    return mobileMaterial;\n  }\n  clone() {\n    return MobileStandardMaterial.fromStandardMaterial(this);\n  }\n}\n","import { EventTarget } from \"event-target-shim\";\nimport { getReticulumFetchUrl, fetchReticulumAuthenticated } from \"../utils/phoenix-utils\";\nimport { pushHistoryPath, sluglessPath, withSlug } from \"../utils/history\";\n\nexport const SOURCES = [\"poly\", \"sketchfab\", \"videos\", \"scenes\", \"gifs\", \"images\", \"twitch\"];\n\nconst EMPTY_RESULT = { entries: [], meta: {} };\n\nconst URL_SOURCE_TO_TO_API_SOURCE = {\n  scenes: \"scene_listings\",\n  images: \"bing_images\",\n  videos: \"bing_videos\",\n  youtube: \"youtube_videos\",\n  gifs: \"tenor\",\n  sketchfab: \"sketchfab\",\n  poly: \"poly\",\n  twitch: \"twitch\",\n  favorites: \"favorites\"\n};\n\nexport const MEDIA_SOURCE_DEFAULT_FILTERS = {\n  gifs: \"trending\",\n  sketchfab: \"featured\",\n  scenes: \"featured\",\n  favorites: \"my-favorites\"\n};\n\nconst SEARCH_CONTEXT_PARAMS = [\"q\", \"filter\", \"cursor\"];\n\n// This class is responsible for fetching and storing media search results and provides a\n// convenience API for performing history updates relevant to search navigation.\nexport default class MediaSearchStore extends EventTarget {\n  constructor() {\n    super();\n\n    this.requestIndex = 0;\n  }\n\n  setHistory(history) {\n    this.history = history;\n\n    this._update(this.history.location);\n\n    this.history.listen(location => {\n      this._update(location);\n    });\n  }\n\n  _update = async location => {\n    this.result = null;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    const urlSource = this.getUrlMediaSource(location);\n    if (!urlSource) return;\n\n    if (!this.previousSource || this.previousSource !== urlSource) {\n      this.dispatchEvent(new CustomEvent(\"sourcechanged\"));\n      this.previousSource = urlSource;\n    }\n\n    const urlParams = new URLSearchParams(location.search);\n\n    this.requestIndex++;\n    const currentRequestIndex = this.requestIndex;\n    const searchParams = new URLSearchParams();\n    const locationSearchParams = new URLSearchParams(location.search);\n    const isMy = locationSearchParams.get(\"filter\") && locationSearchParams.get(\"filter\").startsWith(\"my-\");\n\n    for (const param of SEARCH_CONTEXT_PARAMS) {\n      if (!urlParams.get(param)) continue;\n      searchParams.set(param, urlParams.get(param));\n    }\n\n    searchParams.get(\"locale\", navigator.languages[0]);\n\n    let source;\n    if (urlSource === \"avatars\" || urlSource === \"scenes\") {\n      // Avatars + scenes are special since we request them from a different source based on the facet.\n      const singular = urlSource === \"avatars\" ? \"avatar\" : \"scene\";\n      source = isMy ? `${singular}s` : `${singular}_listings`;\n    } else {\n      source = URL_SOURCE_TO_TO_API_SOURCE[urlSource];\n    }\n    searchParams.set(\"source\", source);\n\n    let fetch = true;\n\n    if (source === \"avatars\" || source === \"scenes\" || source === \"favorites\") {\n      if (isMy) {\n        if (window.APP.store.credentialsAccountId) {\n          searchParams.set(\"user\", window.APP.store.credentialsAccountId);\n        } else {\n          fetch = false; // Don't fetch my-* if not signed in\n        }\n      }\n    }\n\n    const path = `/api/v1/media/search?${searchParams.toString()}`;\n    const url = getReticulumFetchUrl(path);\n    if (this.lastSavedUrl === url) return;\n\n    this.isFetching = true;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n    const result = fetch ? await fetchReticulumAuthenticated(path) : EMPTY_RESULT;\n\n    if (this.requestIndex != currentRequestIndex) return;\n\n    this.result = result;\n    this.nextCursor = this.result && this.result.meta && this.result.meta.next_cursor;\n    this.lastFetchedUrl = url;\n    this.isFetching = false;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n  };\n\n  _legacyAvatarToSearchEntry = legacyAvatar => {\n    return {\n      id: legacyAvatar.id,\n      type: \"avatar_listing\",\n      url: legacyAvatar.url,\n      images: { preview: { url: legacyAvatar.thumbnail, width: 720, height: 1280 } },\n      gltfs: { avatar: legacyAvatar.model }\n    };\n  };\n\n  pageNavigate = delta => {\n    if (delta === -1) {\n      this.history.goBack();\n    } else {\n      const location = this.history.location;\n      const searchParams = new URLSearchParams(location.search);\n      searchParams.set(\"cursor\", this.nextCursor);\n      pushHistoryPath(this.history, location.pathname, searchParams.toString());\n    }\n  };\n\n  filterQueryNavigate = (filter, query) => {\n    const location = this.history.location;\n    const searchParams = new URLSearchParams(location.search);\n\n    if (query) {\n      searchParams.set(\"q\", query);\n    } else {\n      searchParams.delete(\"q\");\n    }\n\n    if (filter) {\n      searchParams.set(\"filter\", filter);\n    } else {\n      searchParams.delete(\"filter\");\n    }\n\n    if (filter) {\n      searchParams.set(\"cursor\", filter);\n    } else {\n      searchParams.delete(\"cursor\");\n    }\n\n    pushHistoryPath(this.history, location.pathname, searchParams.toString());\n  };\n\n  getSearchClearedSearchParams = (location, keepSource, keepNav) => {\n    const searchParams = new URLSearchParams(location.search);\n\n    // Strip browsing query params\n    searchParams.delete(\"q\");\n    searchParams.delete(\"filter\");\n    searchParams.delete(\"cursor\");\n\n    if (!keepNav) {\n      searchParams.delete(\"media_nav\");\n    }\n\n    if (!keepSource) {\n      searchParams.delete(\"media_source\");\n    }\n\n    return searchParams;\n  };\n\n  _stashLastSearchParams = location => {\n    const searchParams = new URLSearchParams(location.search);\n\n    this._stashedParams = {};\n    this._stashedSource = null;\n\n    const source = this.getUrlMediaSource(location);\n\n    // HACK for now do not stash favorite search, since that ends up being a source\n    // we do not reveal in the media browser UX. Revisit the rules here when we have a\n    // proper favorites browser. Then, we should have two separate stashes.\n    if (source === \"favorites\") return;\n    this._stashedSource = source;\n\n    for (const param of SEARCH_CONTEXT_PARAMS) {\n      const value = searchParams.get(param);\n\n      if (value) {\n        this._stashedParams[param] = value;\n      }\n    }\n  };\n\n  clearStashedQuery = () => {\n    if (!this._stashedParams) return;\n    delete this._stashedParams.q;\n  };\n\n  sourceNavigate = source => {\n    this._sourceNavigate(source, false, true);\n  };\n\n  sourceNavigateToDefaultSource = () => {\n    this._sourceNavigate(this._stashedSource ? this._stashedSource : SOURCES[0], false, true);\n  };\n\n  sourceNavigateWithNoNav = source => {\n    this._sourceNavigate(source, true, false);\n  };\n\n  _sourceNavigate = async (source, hideNav, useLastStashedParams) => {\n    const currentQuery = new URLSearchParams(this.history.location.search).get(\"q\");\n    const searchParams = this.getSearchClearedSearchParams(this.history.location);\n\n    if (currentQuery) {\n      searchParams.set(\"q\", currentQuery);\n    } else {\n      if (useLastStashedParams && this._stashedParams) {\n        for (const param of SEARCH_CONTEXT_PARAMS) {\n          const value = this._stashedParams[param];\n\n          // Only q param is compatible across sources, so keep it if is stashed.\n          const useValue = param === \"q\" || this._stashedSource === source;\n\n          if (value && useValue) {\n            searchParams.set(param, value);\n          }\n        }\n      } else {\n        if (source === \"avatars\") {\n          const hasAccountWithAvatars = await this._hasAccountWithAvatars();\n          searchParams.set(\"filter\", hasAccountWithAvatars ? \"my-avatars\" : \"featured\");\n        } else if (MEDIA_SOURCE_DEFAULT_FILTERS[source]) {\n          searchParams.set(\"filter\", MEDIA_SOURCE_DEFAULT_FILTERS[source]);\n        }\n      }\n    }\n\n    this._stashedParams = null;\n    this._stashedSource = null;\n\n    if (hideNav) {\n      searchParams.set(\"media_nav\", \"false\");\n    }\n\n    if (process.env.RETICULUM_SERVER && document.location.host !== process.env.RETICULUM_SERVER) {\n      searchParams.set(\"media_source\", source);\n      pushHistoryPath(this.history, this.history.location.pathname, searchParams.toString());\n    } else {\n      pushHistoryPath(this.history, withSlug(this.history.location, `/media/${source}`), searchParams.toString());\n    }\n  };\n\n  _hasAccountWithAvatars = async () => {\n    const { credentialsAccountId } = window.APP.store;\n    if (!credentialsAccountId) return false;\n\n    const searchParams = new URLSearchParams();\n    const source = \"avatars\";\n    searchParams.set(\"source\", source);\n    searchParams.set(\"user\", credentialsAccountId);\n    const result = await fetchReticulumAuthenticated(`/api/v1/media/search?${searchParams.toString()}`);\n    return !!(result && result.entries) && result.entries.length > 0;\n  };\n\n  getUrlMediaSource = location => {\n    const { search } = location;\n    const urlParams = new URLSearchParams(search);\n    const pathname = sluglessPath(location);\n\n    if (!pathname.startsWith(\"/media\") && !urlParams.get(\"media_source\")) return null;\n    return urlParams.get(\"media_source\") || pathname.substring(7);\n  };\n\n  pushExitMediaBrowserHistory = (history, stashLastSearchParams = true) => {\n    if (!history) history = this.history;\n\n    if (stashLastSearchParams) this._stashLastSearchParams(history.location);\n\n    const { pathname } = history.location;\n    const hasMediaPath = sluglessPath(history.location).startsWith(\"/media\");\n    pushHistoryPath(\n      history,\n      hasMediaPath ? withSlug(history.location, \"/\") : pathname,\n      this.getSearchClearedSearchParams(history.location).toString()\n    );\n    this.dispatchEvent(new CustomEvent(\"media-exit\"));\n  };\n}\n","module.exports = __webpack_public_path__ + \"assets/sfx/tick-b0fcbf1d9b6f92a24bec12f9bae1e42a.mp3\";","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { pushHistoryState, replaceHistoryState } from \"../utils/history\";\n\nfunction isModifiedEvent(event) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\n\n/**\n * A history-aware link that pushes/replaces the state, but not the path, in the browser history.\n */\nclass StateLink extends React.Component {\n  static propTypes = {\n    history: PropTypes.object,\n    innerRef: PropTypes.object,\n    replace: PropTypes.bool,\n    stateKey: PropTypes.string,\n    stateValue: PropTypes.string,\n    stateDetail: PropTypes.object,\n    target: PropTypes.string,\n    onClick: PropTypes.func,\n    children: PropTypes.node,\n    className: PropTypes.string\n  };\n\n  async handleClick(event, history) {\n    if (this.props.onClick) this.props.onClick(event);\n\n    if (\n      !event.defaultPrevented && // onClick prevented default\n      event.button === 0 && // ignore everything but left clicks\n      (!this.props.target || this.props.target === \"_self\") && // let browser handle \"target=_blank\" etc.\n      !isModifiedEvent(event) // ignore clicks with modifier keys\n    ) {\n      event.preventDefault();\n      const method = this.props.replace ? replaceHistoryState : pushHistoryState;\n      method(history, this.props.stateKey, this.props.stateValue, this.props.stateDetail);\n    }\n  }\n\n  render() {\n    const { innerRef, target, className, children } = this.props;\n    return (\n      <a\n        target={target}\n        className={className}\n        onClick={event => this.handleClick(event, this.props.history)}\n        href=\"#\"\n        ref={innerRef}\n      >\n        {children}\n      </a>\n    );\n  }\n}\n\nexport default StateLink;\n","const nonCorsProxyDomains = (process.env.NON_CORS_PROXY_DOMAINS || \"\").split(\",\");\nif (process.env.CORS_PROXY_SERVER) {\n  nonCorsProxyDomains.push(process.env.CORS_PROXY_SERVER);\n}\n\nconst commonKnownContentTypes = {\n  gltf: \"model/gltf\",\n  glb: \"model/gltf-binary\",\n  png: \"image/png\",\n  jpg: \"image/jpeg\",\n  jpeg: \"image/jpeg\",\n  pdf: \"application/pdf\",\n  mp4: \"video/mp4\",\n  mp3: \"audio/mpeg\"\n};\n\n// thanks to https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding\nfunction b64EncodeUnicode(str) {\n  // first we use encodeURIComponent to get percent-encoded UTF-8, then we convert the percent-encodings\n  // into raw bytes which can be fed into btoa.\n  const CHAR_RE = /%([0-9A-F]{2})/g;\n  return btoa(encodeURIComponent(str).replace(CHAR_RE, (_, p1) => String.fromCharCode(\"0x\" + p1)));\n}\n\nconst farsparkEncodeUrl = url => {\n  // farspark doesn't know how to read '=' base64 padding characters\n  // translate base64 + to - and / to _ for URL safety\n  return b64EncodeUnicode(url)\n    .replace(/=+$/g, \"\")\n    .replace(/\\+/g, \"-\")\n    .replace(/\\//g, \"_\");\n};\n\nexport const scaledThumbnailUrlFor = (url, width, height) => {\n  const urlHostname = new URL(url).hostname;\n\n  if (process.env.RETICULUM_SERVER) {\n    const retHostname = new URL(`https://${process.env.RETICULUM_SERVER}`).hostname;\n    if (retHostname === urlHostname) return url;\n  }\n\n  return `https://${process.env.FARSPARK_SERVER}/thumbnail/${farsparkEncodeUrl(url)}?w=${width}&h=${height}`;\n};\n\nexport const proxiedUrlFor = (url, index = null) => {\n  if (!(url.startsWith(\"http:\") || url.startsWith(\"https:\"))) return url;\n\n  const hasIndex = index !== null;\n\n  if (!hasIndex) {\n    // Skip known domains that do not require CORS proxying.\n    try {\n      const parsedUrl = new URL(url);\n      if (nonCorsProxyDomains.find(domain => parsedUrl.hostname.endsWith(domain))) return url;\n    } catch (e) {\n      // Ignore\n    }\n  }\n\n  if (hasIndex || !process.env.CORS_PROXY_SERVER) {\n    const method = hasIndex ? \"extract\" : \"raw\";\n    return `https://${process.env.FARSPARK_SERVER}/0/${method}/0/0/0/${index || 0}/${farsparkEncodeUrl(url)}`;\n  } else {\n    return `https://${process.env.CORS_PROXY_SERVER}/${url}`;\n  }\n};\n\nexport const getCustomGLTFParserURLResolver = gltfUrl => url => {\n  if (typeof url !== \"string\" || url === \"\") return \"\";\n  if (/^(https?:)?\\/\\//i.test(url)) return url;\n  if (/^data:.*,.*$/i.test(url)) return url;\n  if (/^blob:.*$/i.test(url)) return url;\n\n  if (process.env.CORS_PROXY_SERVER) {\n    // For absolute paths with a CORS proxied gltf URL, re-write the url properly to be proxied\n    const corsProxyPrefix = `https://${process.env.CORS_PROXY_SERVER}/`;\n\n    if (gltfUrl.startsWith(corsProxyPrefix)) {\n      const originalUrl = decodeURIComponent(gltfUrl.substring(corsProxyPrefix.length));\n      const originalUrlParts = originalUrl.split(\"/\");\n\n      // Drop the .gltf filename\n      const path = new URL(url).pathname;\n      const assetUrl = originalUrlParts.slice(0, originalUrlParts.length - 1).join(\"/\") + \"/\" + path;\n      return corsProxyPrefix + assetUrl;\n    }\n  }\n\n  return url;\n};\n\nconst dataUrlRegex = /data:([a-zA-Z0-9]+\\/[a-zA-Z0-9-.+]+).*,.*/;\n\nexport const guessContentType = url => {\n  if (url.startsWith(\"hubs://\") && url.endsWith(\"/video\")) return \"video/vnd.hubs-webrtc\";\n  if (url.startsWith(\"data:\")) {\n    const matches = dataUrlRegex.match(url);\n    if (matches.length > 0) {\n      matches[1];\n    }\n  }\n  const extension = new URL(url, window.location).pathname.split(\".\").pop();\n  return commonKnownContentTypes[extension];\n};\nconst hubsSceneRegex = /https?:\\/\\/(hubs.local(:\\d+)?|(smoke-)?hubs.mozilla.com)\\/scenes\\/(\\w+)\\/?\\S*/;\nconst hubsAvatarRegex = /https?:\\/\\/(hubs.local(:\\d+)?|(smoke-)?hubs.mozilla.com)\\/avatars\\/(\\w+)\\/?\\S*/;\nconst hubsRoomRegex = /https?:\\/\\/(hubs.local(:\\d+)?|(smoke-)?hubs.mozilla.com)\\/(\\w+)\\/?\\S*/;\nexport const isHubsSceneUrl = hubsSceneRegex.test.bind(hubsSceneRegex);\nexport const isHubsRoomUrl = url => !isHubsSceneUrl(url) && hubsRoomRegex.test(url);\nexport const isHubsDestinationUrl = url => isHubsSceneUrl(url) || isHubsRoomUrl(url);\nexport const isHubsAvatarUrl = hubsAvatarRegex.test.bind(hubsAvatarRegex);\n","import nextTick from \"../utils/next-tick\";\nimport { mapMaterials } from \"../utils/material-utils\";\nimport SketchfabZipWorker from \"../workers/sketchfab-zip.worker.js\";\nimport MobileStandardMaterial from \"../materials/MobileStandardMaterial\";\nimport { textureLoader } from \"../utils/media-utils\";\nimport { getCustomGLTFParserURLResolver } from \"../utils/media-url-utils\";\nimport { promisifyWorker } from \"../utils/promisify-worker.js\";\nimport { MeshBVH, acceleratedRaycast } from \"three-mesh-bvh\";\nimport { disposeNode } from \"../utils/three-utils\";\n\nTHREE.Mesh.prototype.raycast = acceleratedRaycast;\n\nclass GLTFCache {\n  cache = new Map();\n\n  set(src, gltf) {\n    this.cache.set(src, {\n      gltf,\n      count: 0\n    });\n    return this.retain(src);\n  }\n\n  has(src) {\n    return this.cache.has(src);\n  }\n\n  get(src) {\n    return this.cache.get(src);\n  }\n\n  retain(src) {\n    const cacheItem = this.cache.get(src);\n    cacheItem.count++;\n    return cacheItem;\n  }\n\n  release(src) {\n    const cacheItem = this.cache.get(src);\n\n    if (!cacheItem) {\n      console.error(`Releasing uncached gltf ${src}`);\n      return;\n    }\n\n    cacheItem.count--;\n    if (cacheItem.count <= 0) {\n      cacheItem.gltf.scene.traverse(disposeNode);\n      this.cache.delete(src);\n    }\n  }\n}\nconst gltfCache = new GLTFCache();\nconst inflightGltfs = new Map();\n\nconst extractZipFile = promisifyWorker(new SketchfabZipWorker());\n\nfunction defaultInflator(el, componentName, componentData) {\n  if (!AFRAME.components[componentName]) {\n    throw new Error(`Inflator failed. \"${componentName}\" component does not exist.`);\n  }\n  if (AFRAME.components[componentName].multiple && Array.isArray(componentData)) {\n    for (let i = 0; i < componentData.length; i++) {\n      el.setAttribute(componentName + \"__\" + i, componentData[i]);\n    }\n  } else {\n    el.setAttribute(componentName, componentData);\n  }\n}\n\nAFRAME.GLTFModelPlus = {\n  // eslint-disable-next-line no-unused-vars\n  components: {},\n  registerComponent(componentKey, componentName, inflator) {\n    inflator = inflator || defaultInflator;\n    AFRAME.GLTFModelPlus.components[componentKey] = { inflator, componentName };\n  }\n};\n\nfunction parallelTraverse(a, b, callback) {\n  callback(a, b);\n\n  for (let i = 0; i < a.children.length; i++) {\n    parallelTraverse(a.children[i], b.children[i], callback);\n  }\n}\n\nfunction generateMeshBVH(object3D) {\n  object3D.traverse(obj => {\n    // note that we might already have a bounds tree if this was a clone of an object with one\n    const hasBufferGeometry = obj.isMesh && obj.geometry.isBufferGeometry;\n    const hasBoundsTree = hasBufferGeometry && obj.geometry.boundsTree;\n    if (hasBufferGeometry && !hasBoundsTree && obj.geometry.attributes.position) {\n      const geo = obj.geometry;\n      const triCount = geo.index ? geo.index.count / 3 : geo.attributes.position.count / 3;\n      // only bother using memory and time making a BVH if there are a reasonable number of tris,\n      // and if there are too many it's too painful and large to tolerate doing it (at least until\n      // we put this in a web worker)\n      if (triCount > 1000 && triCount < 1000000) {\n        // note that bounds tree construction creates an index as a side effect if one doesn't already exist\n        geo.boundsTree = new MeshBVH(obj.geometry, { strategy: 0, maxDepth: 30 });\n      }\n    }\n  });\n}\n\n// Modified version of Don McCurdy's AnimationUtils.clone\n// https://github.com/mrdoob/three.js/pull/14494\nfunction cloneSkinnedMesh(source) {\n  const cloneLookup = new Map();\n\n  const clone = source.clone();\n\n  parallelTraverse(source, clone, function(sourceNode, clonedNode) {\n    cloneLookup.set(sourceNode, clonedNode);\n    if (sourceNode.isMesh && sourceNode.geometry.boundsTree) {\n      clonedNode.geometry.boundsTree = sourceNode.geometry.boundsTree;\n    }\n  });\n\n  source.traverse(function(sourceMesh) {\n    if (!sourceMesh.isSkinnedMesh) return;\n\n    const sourceBones = sourceMesh.skeleton.bones;\n    const clonedMesh = cloneLookup.get(sourceMesh);\n\n    clonedMesh.skeleton = sourceMesh.skeleton.clone();\n\n    clonedMesh.skeleton.bones = sourceBones.map(function(sourceBone) {\n      if (!cloneLookup.has(sourceBone)) {\n        throw new Error(\"Required bones are not descendants of the given object.\");\n      }\n\n      return cloneLookup.get(sourceBone);\n    });\n\n    clonedMesh.bind(clonedMesh.skeleton, sourceMesh.bindMatrix);\n  });\n\n  return clone;\n}\n\nfunction cloneGltf(gltf) {\n  return {\n    animations: gltf.animations,\n    scene: cloneSkinnedMesh(gltf.scene)\n  };\n}\n\nfunction getHubsComponents(node) {\n  const hubsComponents =\n    node.userData.gltfExtensions &&\n    (node.userData.gltfExtensions.MOZ_hubs_components || node.userData.gltfExtensions.HUBS_components);\n\n  // We can remove support for legacy components when our environment, avatar and interactable models are\n  // updated to match Spoke output.\n  const legacyComponents = node.userData.components;\n\n  return hubsComponents || legacyComponents;\n}\n\n/// Walks the tree of three.js objects starting at the given node, using the GLTF data\n/// and template data to construct A-Frame entities and components when necessary.\n/// (It's unnecessary to construct entities for subtrees that have no component data\n/// or templates associated with any of their nodes.)\n///\n/// Returns the A-Frame entity associated with the given node, if one was constructed.\nconst inflateEntities = function(indexToEntityMap, node, templates, isRoot, modelToWorldScale = 1) {\n  // TODO: Remove this once we update the legacy avatars to the new node names\n  if (node.name === \"Chest\") {\n    node.name = \"Spine\";\n  } else if (node.name === \"Root Scene\") {\n    node.name = \"AvatarRoot\";\n  } else if (node.name === \"Bot_Skinned\") {\n    node.name = \"AvatarMesh\";\n  }\n\n  // inflate subtrees first so that we can determine whether or not this node needs to be inflated\n  const childEntities = [];\n  const children = node.children.slice(0); // setObject3D mutates the node's parent, so we have to copy\n  for (const child of children) {\n    const el = inflateEntities(indexToEntityMap, child, templates);\n    if (el) {\n      childEntities.push(el);\n    }\n  }\n\n  const entityComponents = getHubsComponents(node);\n\n  const nodeHasBehavior = !!entityComponents || node.name in templates;\n  if (!nodeHasBehavior && !childEntities.length && !isRoot) {\n    return null; // we don't need an entity for this node\n  }\n\n  const el = document.createElement(\"a-entity\");\n  el.append.apply(el, childEntities);\n\n  // Remove invalid CSS class name characters.\n  const className = (node.name || node.uuid).replace(/[^\\w-]/g, \"\");\n  el.classList.add(className);\n\n  // AFRAME rotation component expects rotations in YXZ, convert it\n  if (node.rotation.order !== \"YXZ\") {\n    node.rotation.setFromQuaternion(node.quaternion, \"YXZ\");\n  }\n\n  // Copy over the object's transform to the THREE.Group and reset the actual transform of the Object3D\n  // all updates to the object should be done through the THREE.Group wrapper\n  el.object3D.position.copy(node.position);\n  el.object3D.rotation.copy(node.rotation);\n  el.object3D.scale.copy(node.scale).multiplyScalar(modelToWorldScale);\n  el.object3D.matrixNeedsUpdate = true;\n\n  node.matrixAutoUpdate = false;\n  node.matrix.identity();\n  node.matrix.decompose(node.position, node.rotation, node.scale);\n\n  el.setObject3D(node.type.toLowerCase(), node);\n  if (entityComponents && \"nav-mesh\" in entityComponents) {\n    el.setObject3D(\"mesh\", node);\n  }\n\n  // Set the name of the `THREE.Group` to match the name of the node,\n  // so that `THREE.PropertyBinding` will find (and later animate)\n  // the group. See `PropertyBinding.findNode`:\n  // https://github.com/mrdoob/three.js/blob/dev/src/animation/PropertyBinding.js#L211\n  el.object3D.name = node.name;\n  if (node.animations) {\n    // Pass animations up to the group object so that when we can pass the group as\n    // the optional root in `THREE.AnimationMixer.clipAction` and use the hierarchy\n    // preserved under the group (but not the node). Otherwise `clipArray` will be\n    // `null` in `THREE.AnimationClip.findByName`.\n    node.parent.animations = node.animations;\n  }\n\n  const gltfIndex = node.userData.gltfIndex;\n  if (gltfIndex !== undefined) {\n    indexToEntityMap[gltfIndex] = el;\n  }\n\n  return el;\n};\n\nfunction inflateComponents(inflatedEntity, indexToEntityMap) {\n  inflatedEntity.object3D.traverse(object3D => {\n    const entityComponents = getHubsComponents(object3D);\n    const el = object3D.el;\n\n    if (entityComponents && el) {\n      for (const prop in entityComponents) {\n        if (entityComponents.hasOwnProperty(prop) && AFRAME.GLTFModelPlus.components.hasOwnProperty(prop)) {\n          const { componentName, inflator } = AFRAME.GLTFModelPlus.components[prop];\n          inflator(el, componentName, entityComponents[prop], entityComponents, indexToEntityMap);\n        }\n      }\n    }\n  });\n}\n\nfunction attachTemplate(root, name, templateRoot) {\n  const targetEls = root.querySelectorAll(\".\" + name);\n  for (const el of targetEls) {\n    const root = templateRoot.cloneNode(true);\n    // Merge root element attributes with the target element\n    for (const { name, value } of root.attributes) {\n      el.setAttribute(name, value);\n    }\n\n    // Append all child elements\n    while (root.children.length > 0) {\n      el.appendChild(root.children[0]);\n    }\n  }\n}\n\nfunction runMigration(version, json) {\n  if (version < 2) {\n    //old heightfields will be on the same node as the nav-mesh, delete those\n    const oldHeightfieldNode = json.nodes.find(node => {\n      let components = null;\n      if (node.extensions && node.extensions.MOZ_hubs_components) {\n        components = node.extensions.MOZ_hubs_components;\n      } else if (node.extensions && node.extensions.HUBS_components) {\n        components = node.extensions.HUBS_components;\n      }\n      return components && components.heightfield && components[\"nav-mesh\"];\n    });\n    if (oldHeightfieldNode) {\n      if (oldHeightfieldNode.extensions.MOZ_hubs_components) {\n        delete oldHeightfieldNode.extensions.MOZ_hubs_components.heightfield;\n      } else if (oldHeightfieldNode.extensions.HUBS_components) {\n        delete oldHeightfieldNode.extensions.HUBS_components.heightfield;\n      }\n    }\n  }\n}\n\nexport async function loadGLTF(src, contentType, preferredTechnique, onProgress, jsonPreprocessor) {\n  let gltfUrl = src;\n  let fileMap;\n\n  if (contentType.includes(\"model/gltf+zip\") || contentType.includes(\"application/x-zip-compressed\")) {\n    fileMap = await extractZipFile(gltfUrl);\n    gltfUrl = fileMap[\"scene.gtlf\"];\n  }\n\n  const loadingManager = new THREE.LoadingManager();\n  loadingManager.setURLModifier(getCustomGLTFParserURLResolver(gltfUrl));\n  const gltfLoader = new THREE.GLTFLoader(loadingManager);\n\n  const parser = await new Promise((resolve, reject) => gltfLoader.createParser(gltfUrl, resolve, onProgress, reject));\n\n  parser.textureLoader = textureLoader;\n\n  if (jsonPreprocessor) {\n    parser.json = jsonPreprocessor(parser.json);\n  }\n\n  let version = 0;\n  if (\n    parser.json.extensions &&\n    parser.json.extensions.MOZ_hubs_components &&\n    parser.json.extensions.MOZ_hubs_components.hasOwnProperty(\"version\")\n  ) {\n    version = parser.json.extensions.MOZ_hubs_components.version;\n  }\n  runMigration(version, parser.json);\n\n  const materials = parser.json.materials;\n  if (materials) {\n    for (let i = 0; i < materials.length; i++) {\n      const material = materials[i];\n\n      if (\n        material.extensions &&\n        material.extensions.MOZ_alt_materials &&\n        material.extensions.MOZ_alt_materials[preferredTechnique] !== undefined\n      ) {\n        const altMaterialIndex = material.extensions.MOZ_alt_materials[preferredTechnique];\n        materials[i] = materials[altMaterialIndex];\n      }\n    }\n  }\n\n  const nodes = parser.json.nodes;\n\n  if (nodes) {\n    for (let i = 0; i < nodes.length; i++) {\n      const node = nodes[i];\n\n      if (!node.extras) {\n        node.extras = {};\n      }\n\n      node.extras.gltfIndex = i;\n    }\n  }\n\n  const gltf = await new Promise(parser.parse.bind(parser));\n\n  gltf.scene.traverse(object => {\n    // GLTFLoader sets matrixAutoUpdate on animated objects, we want to keep the defaults\n    object.matrixAutoUpdate = THREE.Object3D.DefaultMatrixAutoUpdate;\n\n    object.material = mapMaterials(object, material => {\n      if (material.isMeshStandardMaterial && preferredTechnique === \"KHR_materials_unlit\") {\n        return MobileStandardMaterial.fromStandardMaterial(material);\n      }\n\n      return material;\n    });\n  });\n\n  if (fileMap) {\n    // The GLTF is now cached as a THREE object, we can get rid of the original blobs\n    Object.keys(fileMap).forEach(URL.revokeObjectURL);\n  }\n\n  return gltf;\n}\n\n/**\n * Loads a GLTF model, optionally recursively \"inflates\" the child nodes of a model into a-entities and sets\n * whitelisted components on them if defined in the node's extras.\n * @namespace gltf\n * @component gltf-model-plus\n */\nAFRAME.registerComponent(\"gltf-model-plus\", {\n  schema: {\n    src: { type: \"string\" },\n    contentType: { type: \"string\" },\n    useCache: { default: true },\n    inflate: { default: false },\n    batch: { default: false },\n    modelToWorldScale: { type: \"number\", default: 1 }\n  },\n\n  init() {\n    this.preferredTechnique =\n      window.APP && window.APP.quality === \"low\" ? \"KHR_materials_unlit\" : \"pbrMetallicRoughness\";\n\n    // This can be set externally if a consumer wants to do some node preprocssing.\n    this.jsonPreprocessor = null;\n\n    this.loadTemplates();\n  },\n\n  update() {\n    this.applySrc(this.data.src, this.data.contentType);\n  },\n\n  remove() {\n    if (this.data.batch && this.model) {\n      this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.removeObject(this.el.object3DMap.mesh);\n    }\n    if (this.data.src) {\n      gltfCache.release(this.data.src);\n    }\n  },\n\n  loadTemplates() {\n    this.templates = {};\n    this.el.querySelectorAll(\":scope > template\").forEach(templateEl => {\n      const root = document.importNode(templateEl.firstElementChild || templateEl.content.firstElementChild, true);\n      this.templates[templateEl.getAttribute(\"data-name\")] = root;\n    });\n  },\n\n  async loadModel(src, contentType, technique, useCache) {\n    if (useCache) {\n      if (gltfCache.has(src)) {\n        gltfCache.retain(src);\n        return cloneGltf(gltfCache.get(src).gltf);\n      } else {\n        if (inflightGltfs.has(src)) {\n          const gltf = await inflightGltfs.get(src);\n          gltfCache.retain(src);\n          return cloneGltf(gltf);\n        } else {\n          const promise = loadGLTF(src, contentType, technique, null, this.jsonPreprocessor);\n          inflightGltfs.set(src, promise);\n          const gltf = await promise;\n          inflightGltfs.delete(src);\n          gltfCache.set(src, gltf);\n          return cloneGltf(gltf);\n        }\n      }\n    } else {\n      return loadGLTF(src, contentType, technique, null, this.jsonPreprocessor);\n    }\n  },\n\n  async applySrc(src, contentType) {\n    try {\n      // If the src attribute is a selector, get the url from the asset item.\n      if (src && src.charAt(0) === \"#\") {\n        const assetEl = document.getElementById(src.substring(1));\n        src = assetEl.getAttribute(\"src\");\n      }\n\n      if (src === this.lastSrc) return;\n\n      if (this.lastSrc) {\n        gltfCache.release(this.lastSrc);\n      }\n\n      this.lastSrc = src;\n\n      if (!src) {\n        if (this.inflatedEl) {\n          console.warn(\"gltf-model-plus set to an empty source, unloading inflated model.\");\n          this.disposeLastInflatedEl();\n        }\n        return;\n      }\n\n      this.el.emit(\"model-loading\");\n      const gltf = await this.loadModel(src, contentType, this.preferredTechnique, this.data.useCache);\n\n      // If we started loading something else already\n      // TODO: there should be a way to cancel loading instead\n      if (src != this.lastSrc) return;\n\n      // If we had inflated something already before, clean that up\n      this.disposeLastInflatedEl();\n\n      this.model = gltf.scene || gltf.scenes[0];\n      this.model.animations = gltf.animations;\n\n      if (this.data.batch) {\n        this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.addObject(this.model);\n      }\n\n      if (gltf.animations.length > 0) {\n        this.el.setAttribute(\"animation-mixer\", {});\n        this.el.components[\"animation-mixer\"].initMixer(gltf.animations);\n      } else {\n        generateMeshBVH(this.model);\n      }\n\n      const indexToEntityMap = {};\n\n      let object3DToSet = this.model;\n      if (\n        this.data.inflate &&\n        (this.inflatedEl = inflateEntities(\n          indexToEntityMap,\n          this.model,\n          this.templates,\n          true,\n          this.data.modelToWorldScale\n        ))\n      ) {\n        this.el.appendChild(this.inflatedEl);\n\n        object3DToSet = this.inflatedEl.object3D;\n        // TODO: Still don't fully understand the lifecycle here and how it differs between browsers, we should dig in more\n        // Wait one tick for the appended custom elements to be connected before attaching templates\n        await nextTick();\n        if (src != this.lastSrc) return; // TODO: there must be a nicer pattern for this\n\n        inflateComponents(this.inflatedEl, indexToEntityMap);\n\n        for (const name in this.templates) {\n          attachTemplate(this.el, name, this.templates[name]);\n        }\n      }\n\n      // The call to setObject3D below recursively clobbers any `el` backreferences to entities\n      // in the entire inflated entity graph to point to `object3DToSet`.\n      //\n      // We don't want those overwritten, since lots of code assumes `object3d.el` points to the relevant\n      // A-Frame entity for that three.js object, so we back them up and re-wire them here. If we didn't do\n      // this, all the `el` properties on these object3ds would point to the `object3DToSet` which is either\n      // the model or the root GLTF inflated entity.\n      const rewires = [];\n\n      object3DToSet.traverse(o => {\n        const el = o.el;\n        if (el) rewires.push(() => (o.el = el));\n      });\n\n      const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n\n      if (environmentMapComponent) {\n        environmentMapComponent.applyEnvironmentMap(object3DToSet);\n      }\n\n      this.el.setObject3D(\"mesh\", object3DToSet);\n\n      rewires.forEach(f => f());\n\n      this.el.emit(\"model-loaded\", { format: \"gltf\", model: this.model });\n    } catch (e) {\n      gltfCache.release(src);\n      console.error(\"Failed to load glTF model\", e, this);\n      this.el.emit(\"model-error\", { format: \"gltf\", src });\n    }\n  },\n\n  disposeLastInflatedEl() {\n    if (this.inflatedEl) {\n      this.inflatedEl.parentNode.removeChild(this.inflatedEl);\n\n      this.inflatedEl.object3D.traverse(x => {\n        if (x.material && x.material.dispose) {\n          x.material.dispose();\n        }\n\n        if (x.geometry) {\n          if (x.geometry.dispose) {\n            x.geometry.dispose();\n          }\n\n          x.geometry.boundsTree = null;\n        }\n      });\n\n      delete this.inflatedEl;\n\n      this.el.removeAttribute(\"animation-mixer\");\n    }\n  }\n});\n","// Wrapper for a worker which accepts work items and responds with results.\n//\n// The worker must receive messages with data of the shape { id, payload }, and then respond\n// with messages containing matching IDs of the shape { id, result, err }.\n//\n// Returns a function that accepts a work item, sends it to the worker, and returns a promise that\n// will resolve with the result or reject with the error.\n//\nexport function promisifyWorker(worker) {\n  let nextItemId = 0;\n  const outstanding = {}; // item ID: { resolve, reject }\n\n  worker.onmessage = msg => {\n    const { id, result, err } = msg.data;\n    const handlers = outstanding[id];\n    if (handlers == null) {\n      console.error(`Unknown message with ID ${id} received from ${worker}.`);\n    } else {\n      delete outstanding[id];\n      if (err != null) {\n        handlers.reject(new Error(err));\n      } else {\n        handlers.resolve(result);\n      }\n    }\n  };\n\n  return function(data, transfer) {\n    const id = nextItemId++;\n    const promise = new Promise((resolve, reject) => {\n      outstanding[id] = { resolve, reject };\n    });\n    worker.postMessage({ id, payload: data }, transfer);\n    return promise;\n  };\n}\n","export const waitForDOMContentLoaded = function() {\n  if (document.readyState === \"complete\" || document.readyState === \"loaded\" || document.readyState === \"interactive\") {\n    return Promise.resolve(null);\n  } else {\n    return new Promise(resolve => {\n      window.addEventListener(\"DOMContentLoaded\", resolve);\n    });\n  }\n};\n\nexport const waitForEvent = function(eventName, eventObj) {\n  return new Promise(resolve => {\n    eventObj.addEventListener(eventName, resolve, { once: true });\n  });\n};\n","/**\n * Chrome and Safari will start Audio contexts in a \"suspended\" state.\n * A user interaction (touch/mouse event) is needed in order to resume the AudioContext.\n */\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const ctx = THREE.AudioContext.getContext();\n\n  function resume() {\n    ctx.resume();\n\n    setTimeout(function() {\n      if (ctx.state === \"running\") {\n        document.body.removeEventListener(\"touchend\", resume, false);\n        document.body.removeEventListener(\"mouseup\", resume, false);\n      }\n    }, 0);\n  }\n\n  document.body.addEventListener(\"touchend\", resume, false);\n  document.body.addEventListener(\"mouseup\", resume, false);\n});\n","// Monkeypatch to address performance issue with updating panner nodes\n// TODO this needs to be merged into 3.js\n\nTHREE.PositionalAudio.prototype.updateMatrixWorld = (function() {\n  const position = new THREE.Vector3();\n  const quaternion = new THREE.Quaternion();\n\n  const scale = new THREE.Vector3();\n  const orientation = new THREE.Vector3();\n\n  return function updateMatrixWorld(force) {\n    THREE.Object3D.prototype.updateMatrixWorld.call(this, force);\n\n    let setInitial = false;\n\n    if (!this._lastPosition) {\n      setInitial = true;\n      this._lastPosition = new THREE.Vector3();\n      this._lastOrientation = new THREE.Vector3();\n      this._lastListenerPosition = new THREE.Vector3();\n    }\n\n    const panner = this.panner;\n    const listener = panner.context.listener;\n    this.matrixWorld.decompose(position, quaternion, scale);\n    orientation.set(0, 0, 1).applyQuaternion(quaternion);\n\n    // Need to update the position on this node if either the listener moves or this node moves,\n    // because otherwise there are audio artifacts in Chrome.\n    if (\n      setInitial ||\n      Math.abs(position.x - this._lastPosition.x) > Number.EPSILON ||\n      Math.abs(position.y - this._lastPosition.y) > Number.EPSILON ||\n      Math.abs(position.z - this._lastPosition.z) > Number.EPSILON ||\n      Math.abs(orientation.x - this._lastOrientation.x) > Number.EPSILON ||\n      Math.abs(orientation.y - this._lastOrientation.y) > Number.EPSILON ||\n      Math.abs(orientation.z - this._lastOrientation.z) > Number.EPSILON ||\n      (listener.positionX && Math.abs(listener.positionX.value - this._lastListenerPosition.x) > Number.EPSILON) ||\n      (listener.positionY && Math.abs(listener.positionY.value - this._lastListenerPosition.y) > Number.EPSILON) ||\n      (listener.positionZ && Math.abs(listener.positionZ.value - this._lastListenerPosition.z) > Number.EPSILON)\n    ) {\n      panner.setPosition(position.x, position.y, position.z);\n      panner.setOrientation(orientation.x, orientation.y, orientation.z);\n\n      this._lastPosition.x = position.x;\n      this._lastPosition.y = position.y;\n      this._lastPosition.z = position.z;\n\n      this._lastOrientation.x = orientation.x;\n      this._lastOrientation.y = orientation.y;\n      this._lastOrientation.z = orientation.z;\n\n      if (listener.positionX && listener.positionY && listener.positionZ) {\n        this._lastListenerPosition.x = listener.positionX.value;\n        this._lastListenerPosition.y = listener.positionY.value;\n        this._lastListenerPosition.z = listener.positionZ.value;\n      }\n    }\n  };\n})();\n","/**\n * Toggles the position of 2 bones into \"on\" and \"off\" positions to indicate mute state.\n * @namespace avatar\n * @component bone-mute-state-indicator\n */\nAFRAME.registerComponent(\"bone-mute-state-indicator\", {\n  schema: {\n    unmutedBoneName: { default: \"Watch_Joint_MicON\" },\n    mutedBoneName: { default: \"Watch_Joint_Muted\" },\n    onPos: { default: 0.81 },\n    offPos: { default: 0.5 }\n  },\n\n  init() {\n    this.onStateToggled = this.onStateToggled.bind(this);\n    this.el.addEventListener(\"model-loaded\", () => {\n      this.unmutedBone = this.el.object3D.getObjectByName(this.data.unmutedBoneName);\n      this.mutedBone = this.el.object3D.getObjectByName(this.data.mutedBoneName);\n      this.modelLoaded = true;\n\n      this.updateMuteState();\n    });\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateToggled);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateToggled);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateToggled);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateToggled);\n  },\n\n  onStateToggled(e) {\n    if (!e.detail.state === \"muted\") return;\n    this.updateMuteState();\n  },\n\n  updateMuteState() {\n    if (!this.modelLoaded) return;\n    const muted = this.el.sceneEl.is(\"muted\");\n    this.mutedBone.position.y = muted ? this.data.onPos : this.data.offPos;\n    this.unmutedBone.position.y = !muted ? this.data.onPos : this.data.offPos;\n    this.mutedBone.matrixNeedsUpdate = true;\n    this.unmutedBone.matrixNeedsUpdate = true;\n  }\n});\n","/**\n * Scales an object to near-zero if the object is invisible. Useful for bones representing avatar body parts.\n * @namespace avatar\n * @component bone-visibility\n */\nAFRAME.registerComponent(\"bone-visibility\", {\n  tick() {\n    const { visible } = this.el.object3D;\n\n    if (this.lastVisible !== visible) {\n      if (visible) {\n        this.el.object3D.scale.set(1, 1, 1);\n      } else {\n        // Three.js doesn't like updating matrices with 0 scale, so we set it to a near zero number.\n        this.el.object3D.scale.set(0.00000001, 0.00000001, 0.00000001);\n      }\n\n      this.lastVisible = visible;\n      this.el.object3D.updateMatrices(true, true);\n      this.el.object3D.updateMatrixWorld(true, true);\n    }\n  }\n});\n","/**\n * Applies effects to a hoverer based on hover state.\n * @namespace interactables\n * @component hover-visuals\n */\nAFRAME.registerComponent(\"hover-visuals\", {\n  schema: {\n    hand: { type: \"string\" }\n  },\n  init() {\n    // uniforms are set from the component responsible for loading the mesh.\n    this.handleLeftVisuals = this.handleLeftVisuals.bind(this);\n    this.handleRightVisuals = this.handleRightVisuals.bind(this);\n    this.hideVisualEffectOnElement = this.hideVisualEffectOnElement.bind(this);\n    this.hadLeftVisualLastFrame = false;\n    this.hadRightVisualLastFrame = false;\n    this.uniforms = null;\n  },\n  remove() {\n    this.uniforms = null;\n  },\n  tick() {\n    if (!this.uniforms || !this.uniforms.length) return;\n\n    // Push down loops to assist JIT:\n    if (this.data.hand === \"left\") {\n      this.handleLeftVisuals();\n    } else {\n      this.handleRightVisuals();\n    }\n  },\n\n  hideVisualEffectOnElement(el) {\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n    const isPinned = el.components.pinnable && el.components.pinnable.data.pinned;\n    const isSpawner = !!el.components[\"super-spawner\"];\n\n    return !isSpawner && isPinned && !isFrozen;\n  },\n\n  handleLeftVisuals: function() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const interactingElement = interaction.state.leftHand.held || interaction.state.leftHand.hovered;\n    const hideVisual = !interactingElement || this.hideVisualEffectOnElement(interactingElement);\n\n    // Last frame, we didn't have a visual so no need to update uniforms.\n    if (hideVisual && !this.hadLeftVisualLastFrame) return;\n    this.hadLeftVisualLastFrame = !hideVisual;\n\n    const elements = this.el.object3D.matrixWorld.elements;\n\n    for (let i = 0, l = this.uniforms.length; i < l; i++) {\n      const uniform = this.uniforms[i];\n      uniform.hubs_HighlightInteractorOne.value = !hideVisual;\n      uniform.hubs_InteractorOnePos.value[0] = elements[12];\n      uniform.hubs_InteractorOnePos.value[1] = elements[13];\n      uniform.hubs_InteractorOnePos.value[2] = elements[14];\n    }\n  },\n\n  handleRightVisuals: function() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n\n    const interactingElement = interaction.state.rightHand.held || interaction.state.rightHand.hovered;\n    const hideVisual = !interactingElement || this.hideVisualEffectOnElement(interactingElement);\n\n    // Last frame, we didn't have a visual so no need to update uniforms.\n    if (hideVisual && !this.hadRightVisualLastFrame) return;\n    this.hadRightVisualLastFrame = !hideVisual;\n\n    const elements = this.el.object3D.matrixWorld.elements;\n\n    for (let i = 0, l = this.uniforms.length; i < l; i++) {\n      const uniform = this.uniforms[i];\n      uniform.hubs_HighlightInteractorTwo.value = !hideVisual;\n      uniform.hubs_InteractorTwoPos.value[0] = elements[12];\n      uniform.hubs_InteractorTwoPos.value[1] = elements[13];\n      uniform.hubs_InteractorTwoPos.value[2] = elements[14];\n    }\n  }\n});\n","/**\n * Positions an entity relative to a given target when the given event is fired.\n * @component offset-relative-to\n */\nAFRAME.registerComponent(\"offset-relative-to\", {\n  schema: {\n    target: {\n      type: \"selector\"\n    },\n    offset: {\n      type: \"vec3\"\n    },\n    on: {\n      type: \"string\"\n    },\n    orientation: {\n      default: 1 // see doc/image_orientations.gif\n    },\n    selfDestruct: {\n      default: false\n    }\n  },\n  init() {\n    this.updateOffset = this.updateOffset.bind(this);\n    if (this.data.on) {\n      this.el.sceneEl.addEventListener(this.data.on, this.updateOffset);\n    } else {\n      this.updateOffset();\n    }\n  },\n\n  updateOffset: (function() {\n    const y = new THREE.Vector3(0, 1, 0);\n    const z = new THREE.Vector3(0, 0, -1);\n    const QUARTER_CIRCLE = Math.PI / 2;\n    const offsetVector = new THREE.Vector3();\n    return function() {\n      const obj = this.el.object3D;\n      const target = this.data.target.object3D;\n      offsetVector.copy(this.data.offset);\n      target.localToWorld(offsetVector);\n      if (obj.parent) {\n        obj.parent.worldToLocal(offsetVector);\n      }\n      obj.position.copy(offsetVector);\n      target.getWorldQuaternion(obj.quaternion);\n\n      // See doc/image_orientations.gif\n      switch (this.data.orientation) {\n        case 8:\n          obj.rotateOnAxis(z, 3 * QUARTER_CIRCLE);\n          break;\n        case 7:\n          obj.rotateOnAxis(z, 3 * QUARTER_CIRCLE);\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 6:\n          obj.rotateOnAxis(z, QUARTER_CIRCLE);\n          break;\n        case 5:\n          obj.rotateOnAxis(z, QUARTER_CIRCLE);\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 4:\n          obj.rotateOnAxis(z, 2 * QUARTER_CIRCLE);\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 3:\n          obj.rotateOnAxis(z, 2 * QUARTER_CIRCLE);\n          break;\n        case 2:\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 1:\n        default:\n          break;\n      }\n\n      obj.matrixNeedsUpdate = true;\n\n      if (this.data.selfDestruct) {\n        if (this.data.on) {\n          this.el.sceneEl.removeEventListener(this.data.on, this.updateOffset);\n        }\n        this.el.removeAttribute(\"offset-relative-to\");\n      }\n    };\n  })()\n});\n","const TWOPI = Math.PI * 2;\nfunction deltaAngle(a, b) {\n  const p = Math.abs(b - a) % TWOPI;\n  return p > Math.PI ? TWOPI - p : p;\n}\n\n/**\n * Positions the HUD and toggles app mode based on where the user is looking\n * @namespace ui\n * @component hud-controller\n */\nAFRAME.registerComponent(\"hud-controller\", {\n  schema: {\n    head: { type: \"selector\" },\n    offset: { default: 0.7 }, // distance from hud above head,\n    lookCutoff: { default: 20 }, // angle at which the hud should be \"on\",\n    animRange: { default: 30 }, // degrees over which to animate the hud into view\n    yawCutoff: { default: 50 } // yaw degrees at wich the hud should reoirent even if the user is looking up\n  },\n  init() {\n    this.onChildHovered = this.onChildHovered.bind(this);\n    this.removeHoverEvents = this.removeHoverEvents.bind(this);\n    this.isYLocked = false;\n    this.lockedHeadPositionY = 0;\n    this.lookDir = new THREE.Vector3();\n    this.lookEuler = new THREE.Euler();\n    this.store = window.APP.store;\n    this.hoverableChildren = this.el.querySelectorAll(\"[is-remote-hover-target]\");\n  },\n\n  tick() {\n    const hud = this.el.object3D;\n    const head = this.data.head.object3D;\n\n    const { offset, lookCutoff, animRange, yawCutoff } = this.data;\n\n    const pitch = head.rotation.x * THREE.Math.RAD2DEG;\n    const yawDif = deltaAngle(head.rotation.y, hud.rotation.y) * THREE.Math.RAD2DEG;\n\n    // HUD is always visible until first hover, to increase discoverability.\n    const forceHudVisible = !this.store.state.activity.hasHoveredInWorldHud;\n\n    // animate the hud into place over animRange degrees as the user aproaches the lookCutoff angle\n    let t = 1 - THREE.Math.clamp(lookCutoff - pitch, 0, animRange) / animRange;\n\n    // HUD is locked down while showing tooltip or if forced.\n    if (forceHudVisible) {\n      t = 1;\n    }\n\n    // Once the HUD is in place it should stay in place until you look sufficiently far down\n    if (t === 1) {\n      this.lockedHeadPositionY = head.position.y;\n      this.hudLocked = true;\n    } else if (this.hudLocked && pitch < lookCutoff - animRange / 2) {\n      this.hudLocked = false;\n    }\n\n    if (this.hudLocked) {\n      t = 1;\n    }\n\n    // Reorient the hud only if the user is looking away from the hud, for right now this arbitrarily means the hud is 1/2 way animated away\n    // TODO: come up with better huristics for this that maybe account for the user turning away from the hud \"too far\", also animate the position so that it doesnt just snap.\n    const hudOutOfView = yawDif >= yawCutoff || pitch < lookCutoff - animRange / 2;\n\n    if (hudOutOfView) {\n      this.lookDir.set(0, 0, -1);\n      this.lookDir.applyQuaternion(head.quaternion);\n      this.lookDir.add(head.position);\n      hud.position.x = this.lookDir.x;\n      hud.position.z = this.lookDir.z;\n      hud.rotation.copy(head.rotation);\n      hud.rotation.x = 0;\n      hud.rotation.z = 0;\n    }\n\n    hud.visible = !hudOutOfView || forceHudVisible;\n    hud.position.y = (this.isYLocked ? this.lockedHeadPositionY : head.position.y) + offset + (1 - t) * offset;\n    hud.rotation.x = (1 - t) * THREE.Math.DEG2RAD * 90;\n    hud.matrixNeedsUpdate = true;\n  },\n\n  play() {\n    for (let i = 0; i < this.hoverableChildren.length; i++) {\n      this.hoverableChildren[i].object3D.addEventListener(\"hovered\", this.onChildHovered);\n    }\n  },\n\n  pause() {\n    this.removeHoverEvents();\n  },\n\n  removeHoverEvents() {\n    for (let i = 0; i < this.hoverableChildren.length; i++) {\n      this.hoverableChildren[i].object3D.removeEventListener(\"hovered\", this.onChildHovered);\n    }\n  },\n\n  onChildHovered() {\n    if (!this.store.state.activity.hasHoveredInWorldHud) {\n      this.store.update({ activity: { hasHoveredInWorldHud: true } });\n      this.removeHoverEvents();\n    }\n  }\n});\n","/**\n * A button with an image, tooltip, hover states.\n * @namespace ui\n * @component icon-button\n */\nAFRAME.registerComponent(\"icon-button\", {\n  schema: {\n    image: { type: \"string\" },\n    hoverImage: { type: \"string\" },\n    activeImage: { type: \"string\" },\n    activeHoverImage: { type: \"string\" },\n    active: { type: \"boolean\" },\n    tooltip: { type: \"selector\" },\n    tooltipText: { type: \"string\" },\n    activeTooltipText: { type: \"string\" }\n  },\n\n  init() {\n    this.el.object3D.matrixNeedsUpdate = true;\n    this.onHover = () => {\n      this.hovering = true;\n      this.updateButtonState();\n    };\n    this.onHoverOut = () => {\n      this.hovering = false;\n      this.updateButtonState();\n    };\n  },\n\n  play() {\n    this.updateButtonState();\n    this.el.object3D.addEventListener(\"hovered\", this.onHover);\n    this.el.object3D.addEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"hovered\", this.onHover);\n    this.el.object3D.removeEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  update() {\n    this.updateButtonState();\n  },\n\n  updateButtonState() {\n    const hovering = this.hovering;\n    const active = this.data.active;\n\n    const image = active ? (hovering ? \"activeHoverImage\" : \"activeImage\") : hovering ? \"hoverImage\" : \"image\";\n\n    if (this.el.components.sprite) {\n      if (this.data[image]) {\n        this.el.setAttribute(\"sprite\", \"name\", this.data[image]);\n      } else {\n        console.warn(`No ${image} image on me.`, this);\n      }\n    } else {\n      console.error(\"No sprite.\");\n    }\n\n    if (this.data.tooltip && hovering) {\n      this.data.tooltip.setAttribute(\"visible\", this.hovering);\n      this.data.tooltip\n        .querySelector(\"[text]\")\n        .setAttribute(\"text\", \"value\", this.data.active ? this.data.activeTooltipText : this.data.tooltipText);\n    }\n  }\n});\n","/**\n * A button with text\n * @namespace ui\n * @component text-button\n */\nAFRAME.registerComponent(\"text-button\", {\n  schema: {\n    textHoverColor: { type: \"string\" },\n    textColor: { type: \"string\" },\n    backgroundHoverColor: { type: \"string\" },\n    backgroundColor: { type: \"string\" }\n  },\n\n  init() {\n    // TODO: This is a bit of a hack to deal with position \"component\" not setting matrixNeedsUpdate. Come up with a better solution.\n    this.el.object3D.matrixNeedsUpdate = true;\n    this.onHover = () => {\n      this.hovering = true;\n      this.updateButtonState();\n    };\n    this.onHoverOut = () => {\n      this.hovering = false;\n      this.updateButtonState();\n    };\n    this.textEl = this.el.querySelector(\"[text]\");\n  },\n\n  play() {\n    this.updateButtonState();\n    this.el.object3D.addEventListener(\"hovered\", this.onHover);\n    this.el.object3D.addEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"hovered\", this.onHover);\n    this.el.object3D.removeEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  update() {\n    this.updateButtonState();\n  },\n\n  updateButtonState() {\n    const hovering = this.hovering;\n    this.el.setAttribute(\"slice9\", \"color\", hovering ? this.data.backgroundHoverColor : this.data.backgroundColor);\n\n    if (this.textEl) {\n      this.textEl.setAttribute(\"text\", \"color\", hovering ? this.data.textHoverColor : this.data.textColor);\n    }\n  }\n});\n\nconst noop = function() {};\n// TODO: this should ideally be fixed upstream somehow but its pretty tricky since text is just a geometry not a different type of Object3D, and Object3D is what handles raycast checks.\nAFRAME.registerComponent(\"text-raycast-hack\", {\n  dependencies: [\"text\"],\n  init() {\n    this.el.getObject3D(\"text\").raycast = noop;\n  }\n});\n","/**\n * Registers a click handler and invokes the block method on the NAF adapter for the owner associated with its entity.\n * @namespace network\n * @component block-button\n */\nAFRAME.registerComponent(\"block-button\", {\n  init() {\n    this.onClick = () => {\n      this.block(this.owner);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.owner = networkedEl.components.networked.data.owner;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  block(clientId) {\n    window.APP.hubChannel.hide(clientId);\n  }\n});\n","AFRAME.registerComponent(\"mute-button\", {\n  init() {\n    this.onClick = () => {\n      this.mute(this.owner);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.owner = networkedEl.components.networked.data.owner;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  async mute(clientId) {\n    this.el.sceneEl.emit(\"action_mute_client\", { clientId });\n  }\n});\n","AFRAME.registerComponent(\"kick-button\", {\n  init() {\n    this.onClick = () => {\n      this.kick(this.owner);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.owner = networkedEl.components.networked.data.owner;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  async kick(clientId) {\n    this.el.sceneEl.emit(\"action_kick_client\", { clientId });\n  }\n});\n","AFRAME.registerComponent(\"close-vr-notice-button\", {\n  init() {\n    this.onClick = () => {\n      this.el.sceneEl.emit(\"action_vr_notice_closed\");\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"leave-room-button\", {\n  init() {\n    this.onClick = () => {\n      this.el.sceneEl.emit(\"leave_room_requested\");\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"visible-if-permitted\", {\n  schema: {\n    type: \"string\"\n  },\n  init() {\n    this.updateVisibility = this.updateVisibility.bind(this);\n    this.updateVisibility();\n    window.APP.hubChannel.addEventListener(\"permissions_updated\", this.updateVisibility);\n  },\n  updateVisibility() {\n    this.el.object3D.visible = this.el.sceneEl.systems.permissions.canOrWillIfCreator(this.data);\n  },\n  remove() {\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.updateVisibility);\n  }\n});\n","/**\n * Stores networked avatar state.\n * @namespace avatar\n * @component networked-avatar\n */\nAFRAME.registerComponent(\"networked-avatar\", {\n  schema: {\n    left_hand_pose: { default: 0 },\n    right_hand_pose: { default: 0 }\n  }\n});\n","AFRAME.registerComponent(\"pinnable\", {\n  schema: {\n    pinned: { default: false }\n  },\n\n  init() {\n    this._fireEventsAndAnimate = this._fireEventsAndAnimate.bind(this);\n\n    // Fire pinned events when page changes so we can persist the page.\n    this.el.addEventListener(\"pager-page-changed\", this._fireEventsAndAnimate);\n\n    // Fire pinned events when video state changes so we can persist the page.\n    this.el.addEventListener(\"owned-video-state-changed\", this._fireEventsAndAnimate);\n  },\n\n  update(oldData) {\n    this._fireEventsAndAnimate(oldData);\n  },\n\n  _fireEventsAndAnimate(oldData, force) {\n    // We need to guard against _fireEventsAndAnimate being called during entity initialization,\n    // when the networked component isn't initialized yet.\n    if (this.el.components.networked && this.el.components.networked.data && !NAF.utils.isMine(this.el)) return;\n\n    // Avoid firing events during initialization by checking if the pin state has changed before doing so.\n    const pinStateChanged = !!oldData.pinned !== this.data.pinned;\n\n    if (this.data.pinned) {\n      if (pinStateChanged || force) {\n        this.el.emit(\"pinned\", { el: this.el });\n      }\n\n      this.el.removeAttribute(\"animation__pin-start\");\n      this.el.removeAttribute(\"animation__pin-end\");\n      const currentScale = this.el.object3D.scale;\n\n      this.el.setAttribute(\"animation__pin-start\", {\n        property: \"scale\",\n        dur: 200,\n        from: { x: currentScale.x, y: currentScale.y, z: currentScale.z },\n        to: { x: currentScale.x * 1.1, y: currentScale.y * 1.1, z: currentScale.z * 1.1 },\n        easing: \"easeOutElastic\"\n      });\n\n      this.el.setAttribute(\"animation__pin-end\", {\n        property: \"scale\",\n        delay: 200,\n        dur: 200,\n        from: { x: currentScale.x * 1.1, y: currentScale.y * 1.1, z: currentScale.z * 1.1 },\n        to: { x: currentScale.x, y: currentScale.y, z: currentScale.z },\n        easing: \"easeOutElastic\"\n      });\n\n      if (this.el.components[\"ammo-body\"]) {\n        this.el.setAttribute(\"ammo-body\", { type: \"static\" });\n      }\n    } else {\n      if (pinStateChanged || force) {\n        this.el.emit(\"unpinned\", { el: this.el });\n      }\n    }\n  },\n\n  isHeld(el) {\n    const { leftHand, rightHand, rightRemote } = el.sceneEl.systems.interaction.state;\n    return leftHand.held === el || rightHand.held === el || rightRemote.held === el;\n  },\n\n  tick() {\n    const held = this.isHeld(this.el);\n\n    if (!held && this.wasHeld) {\n      this._fireEventsAndAnimate(this.data, true);\n    }\n\n    this.wasHeld = held;\n  }\n});\n","const COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nAFRAME.registerComponent(\"drop-object-button\", {\n  init() {\n    this.onClick = () => {\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) return;\n\n      this.targetEl.setAttribute(\"floaty-object\", { modifyGravityOnRelease: false });\n      this.targetEl.setAttribute(\"ammo-body\", {\n        type: \"dynamic\",\n        gravity: { x: 0, y: -9.8, z: 0 },\n        angularDamping: 0.01,\n        linearDamping: 0.01,\n        linearSleepingThreshold: 1.6,\n        angularSleepingThreshold: 2.5,\n        collisionFilterMask: COLLISION_LAYERS.DEFAULT_INTERACTABLE\n      });\n      this.targetEl.components[\"ammo-body\"].body.activate();\n\n      // Remove drop button after using it\n      this.el.parentNode.removeChild(this.el);\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"remove-networked-object-button\", {\n  init() {\n    this.onClick = () => {\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) return;\n\n      this.targetEl.setAttribute(\"animation__remove\", {\n        property: \"scale\",\n        dur: 200,\n        to: { x: 0.01, y: 0.01, z: 0.01 },\n        easing: \"easeInQuad\"\n      });\n\n      this.el.parentNode.removeAttribute(\"visibility-while-frozen\");\n      this.el.parentNode.setAttribute(\"visible\", false);\n\n      this.targetEl.addEventListener(\"animationcomplete\", () => {\n        NAF.utils.takeOwnership(this.targetEl);\n        this.targetEl.parentNode.removeChild(this.targetEl);\n      });\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"camera-focus-button\", {\n  schema: {\n    track: { default: false },\n    selector: { default: null }\n  },\n\n  init() {\n    this.cameraSystem = this.el.sceneEl.systems[\"camera-tools\"];\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      if (this.data.selector) {\n        this.targetEl = networkedEl.querySelector(this.data.selector);\n      } else {\n        this.targetEl = networkedEl;\n      }\n    });\n\n    this.onClick = () => {\n      const myCamera = this.cameraSystem.getMyCamera();\n      if (!myCamera) return;\n\n      myCamera.components[\"camera-tool\"].focus(this.targetEl, this.data.track);\n    };\n  },\n\n  tick() {\n    const isVisible = this.el.object3D.visible;\n    const shouldBeVisible = !!(this.cameraSystem && this.cameraSystem.getMyCamera());\n\n    if (isVisible !== shouldBeVisible) {\n      this.el.setAttribute(\"visible\", shouldBeVisible);\n    }\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"mirror-camera-button\", {\n  schema: {\n    // Selector for label to change when mirroring/un-mirroring\n    labelSelector: { type: \"string\" }\n  },\n\n  init() {\n    this._updateUI = this._updateUI.bind(this);\n    this._isMirrored = this._isMirrored.bind(this);\n    this.labelEl = this.el.parentNode.querySelector(this.data.labelSelector);\n\n    this.onClick = () => {\n      if (!this._isMirrored()) {\n        this.targetEl.components[\"camera-tool\"].mirror();\n      } else {\n        this.targetEl.components[\"camera-tool\"].unmirror();\n      }\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n      this.targetEl.addEventListener(\"mirrored\", this._updateUI);\n      this.targetEl.addEventListener(\"unmirrored\", this._updateUI);\n      this._updateUI();\n    });\n\n    if (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR()) {\n      this.el.object3D.visible = false;\n    }\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  _isMirrored() {\n    return this.targetEl === this.el.sceneEl.systems[\"camera-mirror\"].getMirroredCameraEl();\n  },\n\n  _updateUI() {\n    const isMirrored = this._isMirrored();\n    this.labelEl.setAttribute(\"text\", \"value\", isMirrored ? \"unmirror\" : \"mirror\");\n    this.el.setAttribute(\"text-button\", \"backgroundColor\", isMirrored ? \"#fff\" : \"#ff0520\");\n    this.el.setAttribute(\"text-button\", \"backgroundHoverColor\", isMirrored ? \"#aaa\" : \"#cc0515\");\n  }\n});\n","/**\n * Toggles the visibility of this entity based on networked ownership\n * @namespace ui\n * @component visible-to-owner\n */\nAFRAME.registerComponent(\"visible-to-owner\", {\n  init() {\n    this.onStateChange = e => {\n      this.el.setAttribute(\"visible\", e.detail.newOwner === NAF.clientId);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(el => {\n      el.addEventListener(\"ownership-changed\", this.onStateChange);\n      this.el.setAttribute(\"visible\", NAF.utils.isMine(el));\n    });\n  }\n});\n","AFRAME.registerComponent(\"emit-state-change\", {\n  multiple: true,\n  schema: {\n    state: { type: \"string\" },\n    transform: { type: \"string\", oneof: [\"rising\", \"falling\"] },\n    event: { type: \"string\" }\n  },\n\n  init() {\n    this.stateadded = this.stateadded.bind(this);\n    this.stateremoved = this.stateremoved.bind(this);\n  },\n\n  stateadded(e) {\n    if (e.detail === this.data.state) {\n      this.el.emit(this.data.event);\n    }\n  },\n  stateremoved(e) {\n    if (e.detail === this.data.state) {\n      this.el.emit(this.data.event);\n    }\n  },\n\n  update() {\n    this.el.removeEventListener(\"stateadded\", this.stateadded);\n    this.el.removeEventListener(\"stateremoved\", this.stateremoved);\n\n    if (this.data.transform === \"rising\") {\n      this.el.addEventListener(\"stateadded\", this.stateadded);\n    }\n    if (this.data.transform === \"falling\") {\n      this.el.addEventListener(\"stateremoved\", this.stateremoved);\n    }\n  }\n});\n","AFRAME.registerComponent(\"action-to-event\", {\n  multiple: true,\n\n  schema: {\n    path: { type: \"string\" },\n    event: { type: \"string\" }\n  },\n\n  tick() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    if (userinput.get(this.data.path)) {\n      this.el.emit(this.data.event);\n    }\n  }\n});\n","AFRAME.registerComponent(\"action-to-remove\", {\n  multiple: true,\n\n  schema: {\n    path: { type: \"string\" },\n    requireOwnership: { type: \"boolean\", default: true }\n  },\n\n  init() {\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.networkedEl = networkedEl;\n    });\n  },\n\n  tick() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    if (!userinput.get(this.data.path)) return;\n    if (this.data.requireOwnership && this.networkedEl && !NAF.utils.isMine(this.networkedEl)) return;\n\n    this.el.parentNode.removeChild(this.el);\n  }\n});\n","AFRAME.registerComponent(\"emit-scene-event-on-remove\", {\n  schema: {\n    event: { default: null }\n  },\n\n  remove() {\n    if (this.data.event) {\n      this.el.sceneEl.emit(this.data.event, { el: this.el });\n    }\n  }\n});\n","AFRAME.registerComponent(\"follow-in-fov\", {\n  schema: {\n    target: { type: \"selector\" },\n    offset: { type: \"vec3\" },\n    speed: { type: \"number\", default: 0.003 },\n    angle: { type: \"number\", default: 45 }\n  },\n\n  init() {\n    this.targetPos = new THREE.Vector3();\n    this.offset = new THREE.Vector3();\n    this.offset.copy(this.data.offset);\n\n    this.snappedRot = new THREE.Euler();\n    this.snappedQ = new THREE.Quaternion();\n    this.snappedXForm = new THREE.Matrix4();\n    this.snappedXFormWorld = new THREE.Matrix4();\n    this.tempVector = new THREE.Vector3();\n  },\n\n  tick(t, dt) {\n    if (!this.el.object3D.visible) return;\n\n    const obj = this.el.object3D;\n    const target = this.data.target.object3D;\n\n    // Compute position + rotation by projecting offset along a downward ray in target space,\n    // and mask out Z rotation.\n    this._applyMaskedTargetRotation(\n      -this.data.angle * THREE.Math.DEG2RAD,\n      target.rotation.y,\n      0,\n      this.snappedXFormWorld\n    );\n\n    this.targetPos.copy(this.offset);\n    this.targetPos.applyMatrix4(this.snappedXFormWorld);\n\n    if (obj.parent) {\n      obj.parent.worldToLocal(this.targetPos);\n    }\n\n    if (!this.started) {\n      obj.position.copy(this.targetPos);\n      this.started = true;\n    } else {\n      const t = this.data.speed * dt;\n\n      obj.position.set(\n        obj.position.x + (this.targetPos.x - obj.position.x) * t,\n        obj.position.y + (this.targetPos.y - obj.position.y) * t,\n        obj.position.z + (this.targetPos.z - obj.position.z) * t\n      );\n    }\n\n    this.snappedXFormWorld.decompose(this.tempVector, obj.quaternion, this.tempVector);\n    obj.matrixNeedsUpdate = true;\n  },\n\n  _applyMaskedTargetRotation(x, y, z, to) {\n    const target = this.data.target.object3D;\n    this.snappedRot.set(x, y, z, target.rotation.order);\n    this.snappedQ.setFromEuler(this.snappedRot);\n\n    this.snappedXForm.compose(\n      target.position,\n      this.snappedQ,\n      target.scale\n    );\n\n    to.multiplyMatrices(target.parent.matrixWorld, this.snappedXForm);\n  }\n});\n","AFRAME.registerComponent(\"matrix-auto-update\", {\n  schema: {\n    target: { type: \"string\" }\n  },\n\n  init: function() {\n    this._updateMatrixAutoUpdate = this._updateMatrixAutoUpdate.bind(this);\n    this._updateMatrixAutoUpdate();\n  },\n\n  play: function() {\n    this.el.sceneEl.addEventListener(\"object3dset\", this._updateMatrixAutoUpdate);\n  },\n\n  pause: function() {\n    this.el.sceneEl.removeEventListener(\"object3dset\", this._updateMatrixAutoUpdate);\n  },\n\n  _updateMatrixAutoUpdate: function() {\n    if (this.data.target) {\n      this.el.getObject3D(this.data.target).matrixAutoUpdate = true;\n    } else {\n      this.el.object3D.matrixAutoUpdate = true;\n    }\n  }\n});\n","AFRAME.registerComponent(\"tweet-media-button\", {\n  init() {\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n    });\n\n    this.onClick = () => {\n      const hasDiscordBridges = window.APP.hubChannel && window.APP.hubChannel.discordBridges().length > 0;\n\n      const text = !hasDiscordBridges\n        ? `Taken in hubs.mozilla.com - join me now at hub.link/${window.APP.hubChannel.hubId}! `\n        : `Taken in hubs.mozilla.com `;\n\n      this.el.sceneEl.emit(\"action_media_tweet\", { url: this.targetEl.components[\"media-loader\"].data.src, text });\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"hover-menu\", {\n  multiple: true,\n  schema: {\n    template: { type: \"selector\" },\n    dirs: { type: \"array\" },\n    dim: { default: true }\n  },\n\n  async init() {\n    this.onFrozenStateChange = this.onFrozenStateChange.bind(this);\n    this.hovering = false;\n    await this.getHoverMenu();\n    this.applyHoverState();\n  },\n\n  getHoverMenu() {\n    if (this.menuPromise) return this.menuPromise;\n    return (this.menuPromise = new Promise(resolve => {\n      const menu = this.el.appendChild(document.importNode(this.data.template.content, true).children[0]);\n      // we have to wait a tick for the attach callbacks to get fired for the elements in a template\n      setTimeout(() => {\n        this.menu = menu;\n        this.el.setAttribute(\"position-at-box-shape-border\", {\n          target: \".hover-container\",\n          dirs: this.data.dirs,\n          animate: false,\n          scale: false\n        });\n        resolve(this.menu);\n      });\n    }));\n  },\n\n  onFrozenStateChange(e) {\n    if (!e.detail === \"frozen\") return;\n    this.applyHoverState();\n  },\n\n  applyHoverState() {\n    if (!this.menu) return;\n    this.menu.object3D.visible = !this.el.sceneEl.is(\"frozen\") && this.hovering;\n    if (this.data.dim && this.el.object3DMap.mesh && this.el.object3DMap.mesh.material) {\n      this.el.object3DMap.mesh.material.color.setScalar(this.menu.object3D.visible ? 0.5 : 1);\n    }\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onFrozenStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onFrozenStateChange);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onFrozenStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onFrozenStateChange);\n  }\n});\n","AFRAME.registerComponent(\"disable-frustum-culling\", {\n  init() {\n    this.el.object3D.traverse(o => (o.frustumCulled = false));\n  }\n});\n","AFRAME.registerComponent(\"set-active-camera\", {\n  init() {\n    // This is a hack needed to set the active camera because sometimes A-Frame will create the default camera and set it to the active camera on startup because the query selector to find an existing camera in the scene fails.\n\n    const cameraSystem = this.el.sceneEl.systems.camera;\n    const currentActiveCamera = cameraSystem.activeCameraEl;\n\n    if (currentActiveCamera !== this.el) {\n      cameraSystem.setActiveCamera(this.el);\n\n      // Also A-Frame fails to delete the default camera :P\n      currentActiveCamera.parentNode.removeChild(currentActiveCamera);\n\n      // Look controls leaves behind this CSS class.\n      this.el.sceneEl.canvas.classList.remove(\"a-grab-cursor\");\n    }\n  }\n});\n","AFRAME.registerComponent(\"track-pose\", {\n  schema: {\n    path: { type: \"string\" }\n  },\n\n  tick() {\n    const matrix = AFRAME.scenes[0].systems.userinput.get(this.data.path);\n    if (matrix) {\n      const o = this.el.object3D;\n      o.matrix.copy(matrix);\n      o.matrix.decompose(o.position, o.quaternion, o.scale);\n      o.matrixIsModified = true;\n    }\n  }\n});\n","AFRAME.registerComponent(\"replay\", {\n  init: function() {\n    this.playhead = 0;\n    this.poseIndex = 0;\n  },\n\n  tick: function(t, dt) {\n    let overflow = false;\n    while (!overflow && this.playhead >= this.poses[this.poseIndex].timestamp) {\n      this.el.setAttribute(\"position\", this.poses[this.poseIndex].position);\n      this.el.setAttribute(\"rotation\", this.poses[this.poseIndex].rotation);\n      this.el.object3D.matrixNeedsUpdate = true;\n      this.poseIndex += 1;\n      overflow = this.poseIndex === this.poses.length;\n    }\n\n    this.playhead += dt;\n\n    if (overflow) {\n      this.playhead = 0;\n      this.poseIndex = 0;\n    }\n  }\n});\n","AFRAME.registerComponent(\"visibility-by-path\", {\n  schema: {\n    path: { type: \"string\" }\n  },\n  tick() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const shouldBeVisible = !!userinput.get(this.data.path);\n    if (this.el.object3D.visible !== shouldBeVisible) {\n      this.el.setAttribute(\"visible\", shouldBeVisible);\n    }\n  }\n});\n","AFRAME.registerComponent(\"tags\", {\n  schema: {\n    isHandCollisionTarget: { default: false },\n    isHoldable: { default: false },\n    offersHandConstraint: { default: false },\n    offersRemoteConstraint: { default: false },\n    singleActionButton: { default: false },\n    holdableButton: { default: false },\n    isPen: { default: false },\n    isHoverMenuChild: { default: false }\n  },\n  update() {\n    if (this.didUpdateOnce) {\n      console.warn(\"Do not edit tags with .setAttribute\");\n    }\n    this.didUpdateOnce = true;\n  }\n});\n","const isMobileVR = AFRAME.utils.device.isMobileVR();\n\n// Billboard component that only updates visible objects and only those in the camera view on mobile VR.\nAFRAME.registerComponent(\"billboard\", {\n  init: function() {\n    this.target = new THREE.Vector3();\n    this._updateBillboard = this._updateBillboard.bind(this);\n    this._updateIsInView = this._updateIsInView.bind(this);\n\n    if (isMobileVR) {\n      this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._updateIsInView, \"billboards\");\n    }\n  },\n  remove() {\n    if (isMobileVR) {\n      this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._updateIsInView, \"billboards\");\n    }\n  },\n\n  tick() {\n    if (this.isInView || !isMobileVR) {\n      this._updateBillboard();\n    }\n  },\n\n  _updateIsInView: (function() {\n    const frustum = new THREE.Frustum();\n    const frustumMatrix = new THREE.Matrix4();\n    const box = new THREE.Box3();\n    const boxTemp = new THREE.Box3();\n\n    const expandBox = o => {\n      if (o.geometry) {\n        o.updateMatrices();\n        o.geometry.computeBoundingBox();\n        boxTemp.copy(o.geometry.boundingBox).applyMatrix4(o.matrixWorld);\n        box.expandByPoint(boxTemp.min);\n        box.expandByPoint(boxTemp.max);\n      }\n    };\n\n    const isInViewOfCamera = (obj, screenCamera) => {\n      frustumMatrix.multiplyMatrices(screenCamera.projectionMatrix, screenCamera.matrixWorldInverse);\n      frustum.setFromMatrix(frustumMatrix);\n      box.makeEmpty();\n      obj.traverse(expandBox);\n\n      // NOTE: not using box.setFromObject here because text nodes do not have Z values in their geometry buffer,\n      // and that routine ultimately assumes they do.\n      return frustum.intersectsBox(box);\n    };\n\n    return function() {\n      if (!this.el.object3D.visible) {\n        this.isInView = false;\n        return;\n      }\n\n      if (!this.playerCamera) {\n        this.playerCamera = document.querySelector(\"#player-camera\").getObject3D(\"camera\");\n      }\n\n      if (!this.playerCamera) return;\n\n      this.isInView = isInViewOfCamera(this.el.object3D, this.playerCamera);\n    };\n  })(),\n\n  _updateBillboard: function() {\n    if (!this.el.object3D.visible) return;\n\n    const camera = this.el.sceneEl.camera;\n    const object3D = this.el.object3D;\n\n    if (camera) {\n      // Set the camera world position as the target.\n      this.target.setFromMatrixPosition(camera.matrixWorld);\n      object3D.lookAt(this.target);\n      object3D.matrixNeedsUpdate = true;\n    }\n  }\n});\n","import { forEachMaterial } from \"../utils/material-utils\";\n\nconst interactorOneTransform = [];\nconst interactorTwoTransform = [];\n\nexport const validMaterials = [\"MeshStandardMaterial\", \"MeshBasicMaterial\", \"MobileStandardMaterial\"];\n/**\n * Applies effects to a hoverable based on hover state.\n * @namespace interactables\n * @component hoverable-visuals\n */\nAFRAME.registerComponent(\"hoverable-visuals\", {\n  schema: {\n    enableSweepingEffect: { type: \"boolean\", default: true }\n  },\n  init() {\n    // uniforms and boundingSphere are set from the component responsible for loading the mesh.\n    this.uniforms = null;\n    this.boundingSphere = new THREE.Sphere();\n\n    this.sweepParams = [0, 0];\n  },\n  remove() {\n    this.uniforms = null;\n    this.boundingBox = null;\n\n    // Used when the object is batched\n    const batchManagerSystem = AFRAME.scenes[0].systems[\"hubs-systems\"].batchManagerSystem;\n    this.el.object3D.traverse(object => {\n      if (!object.material) return;\n      forEachMaterial(object, material => {\n        if (\n          !validMaterials.includes(material.type) ||\n          object.el.classList.contains(\"ui\") ||\n          object.el.classList.contains(\"hud\") ||\n          object.el.getAttribute(\"text-button\")\n        )\n          return;\n\n        batchManagerSystem.meshToEl.delete(object);\n      });\n    });\n  },\n  tick(time) {\n    if (!this.uniforms || !this.uniforms.length) return;\n\n    const isPinned = this.el.components.pinnable && this.el.components.pinnable.data.pinned;\n    const isSpawner = !!this.el.components[\"super-spawner\"];\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n    const hideDueToPinning = !isSpawner && isPinned && !isFrozen;\n\n    let interactorOne, interactorTwo;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    if (interaction.state.leftHand.hovered === this.el || interaction.state.leftHand.held === this.el) {\n      interactorOne = interaction.options.leftHand.entity.object3D;\n    }\n    if (interaction.state.rightRemote.hovered === this.el || interaction.state.rightRemote.held === this.el) {\n      interactorTwo = interaction.options.rightRemote.entity.object3D;\n    }\n    if (interaction.state.rightHand.hovered === this.el || interaction.state.rightHand.held === this.el) {\n      interactorTwo = interaction.options.rightHand.entity.object3D;\n    }\n\n    if (interactorOne) {\n      interactorOne.matrixWorld.toArray(interactorOneTransform);\n    }\n    if (interactorTwo) {\n      interactorTwo.matrixWorld.toArray(interactorTwoTransform);\n    }\n\n    if (interactorOne || interactorTwo || isFrozen) {\n      const worldY = this.el.object3D.matrixWorld.elements[13];\n      const scaledRadius = this.el.object3D.scale.y * this.boundingSphere.radius;\n      this.sweepParams[0] = worldY - scaledRadius;\n      this.sweepParams[1] = worldY + scaledRadius;\n    }\n\n    for (let i = 0, l = this.uniforms.length; i < l; i++) {\n      const uniform = this.uniforms[i];\n      uniform.hubs_EnableSweepingEffect.value = this.data.enableSweepingEffect && !hideDueToPinning;\n      uniform.hubs_IsFrozen.value = isFrozen;\n      uniform.hubs_SweepParams.value = this.sweepParams;\n\n      uniform.hubs_HighlightInteractorOne.value = !!interactorOne && !hideDueToPinning;\n      uniform.hubs_InteractorOnePos.value[0] = interactorOneTransform[12];\n      uniform.hubs_InteractorOnePos.value[1] = interactorOneTransform[13];\n      uniform.hubs_InteractorOnePos.value[2] = interactorOneTransform[14];\n\n      uniform.hubs_HighlightInteractorTwo.value = !!interactorTwo && !hideDueToPinning;\n      uniform.hubs_InteractorTwoPos.value[0] = interactorTwoTransform[12];\n      uniform.hubs_InteractorTwoPos.value[1] = interactorTwoTransform[13];\n      uniform.hubs_InteractorTwoPos.value[2] = interactorTwoTransform[14];\n\n      if (interactorOne || interactorTwo || isFrozen) {\n        uniform.hubs_Time.value = time;\n      }\n    }\n  }\n});\n","// Given a function and a queue name, schedules things so a single function\n// from a given queue will be called per frame.\nAFRAME.registerSystem(\"frame-scheduler\", {\n  init() {\n    // Registry a map from queue name to list of registered functions.\n    this.registry = new Map();\n    this.queues = [];\n    this.frameIndex = 0;\n  },\n\n  schedule(func, queue) {\n    if (!this.registry.has(queue)) {\n      this.queues.push(queue);\n      this.registry.set(queue, []);\n    }\n\n    this.registry.get(queue).push(func);\n  },\n\n  unschedule(func) {\n    for (let i = 0; i < this.queues.length; i++) {\n      const queue = this.queues[i];\n      const entries = this.registry.get(queue);\n      const idx = entries.indexOf(func);\n\n      if (idx >= 0) {\n        entries.splice(idx, 1);\n      }\n    }\n  },\n\n  tick: function() {\n    for (let i = 0; i < this.queues.length; i++) {\n      const queue = this.queues[i];\n      const entries = this.registry.get(queue);\n      if (entries.length === 0) continue;\n\n      entries[this.frameIndex % entries.length]();\n    }\n\n    this.frameIndex++;\n  }\n});\n","/* global AFRAME */\n\n/**\n * Toggle visibility of an entity based on if the user is in vr mode or not\n * @namespace vr-mode\n * @component vr-mode-toggle-visibility\n */\nAFRAME.registerComponent(\"vr-mode-toggle-visibility\", {\n  schema: {\n    invert: { type: \"boolean\", default: false }\n  },\n\n  init() {\n    this.updateComponentState = this.updateComponentState.bind(this);\n  },\n\n  play() {\n    this.updateComponentState();\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  updateComponentState() {\n    const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n    this.el.setAttribute(\"visible\", inVRMode !== this.data.invert);\n  }\n});\n\n/**\n * Toggle the isPlaying state of a component based on app mode\n * @namespace vr-mode\n * @component vr-mode-toggle-playing\n */\nAFRAME.registerComponent(\"vr-mode-toggle-playing\", {\n  multiple: true,\n  schema: {\n    invert: { type: \"boolean\", default: false }\n  },\n\n  init() {\n    this.updateComponentState = this.updateComponentState.bind(this);\n  },\n\n  play() {\n    this.updateComponentState();\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  updateComponentState() {\n    const componentName = this.id;\n    const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n    this.el.components[componentName][inVRMode !== this.data.invert ? \"play\" : \"pause\"]();\n  }\n});\n\n/**\n * Toggle a CSS class based upon app mode.\n * @namespace vr-mode\n * @component vr-mode-toggle-class\n */\nAFRAME.registerComponent(\"vr-mode-toggle-class\", {\n  multiple: true,\n  schema: {\n    invert: { type: \"boolean\", default: false },\n    class: { type: \"string\", default: false }\n  },\n\n  init() {\n    this.updateComponentState = this.updateComponentState.bind(this);\n  },\n\n  play() {\n    this.updateComponentState();\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  updateComponentState() {\n    const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n\n    if (inVRMode) {\n      this.el.classList.add(this.data.class);\n    } else {\n      this.el.classList.remove(this.data.class);\n    }\n  }\n});\n","AFRAME.registerSystem(\"permissions\", {\n  can(permissionName) {\n    return !!window.APP.hubChannel.can(permissionName);\n  },\n  canOrWillIfCreator(permissionName) {\n    return !!window.APP.hubChannel.canOrWillIfCreator(permissionName);\n  },\n  fetchPermissions() {\n    return window.APP.hubChannel.fetchPermissions();\n  }\n});\n","/**\n * Emits an \"exit\" event when a user has stopped using the app for a certain period of time\n * @system exit-on-blur\n */\nAFRAME.registerSystem(\"exit-on-blur\", {\n  init() {\n    this.onBlur = this.onBlur.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onTimeout = this.onTimeout.bind(this);\n    this.onEnterVR = this.onEnterVR.bind(this);\n\n    this.isOculusBrowser = navigator.userAgent.match(/Oculus/);\n    this.enteredVR = false;\n\n    window.addEventListener(\"blur\", this.onBlur);\n    window.addEventListener(\"focus\", this.onFocus);\n    this.el.addEventListener(\"enter-vr\", this.onEnterVR);\n\n    this.lastTimeoutCheck = 0;\n    this.exitTimeout = null;\n  },\n\n  tick(t) {\n    // This is a hack to detect when an Oculus Go user has taken off the headset and the headset has\n    // entered standby mode. Currently Oculus Browser is not emitting a blur, vrdisplaydeactivate,\n    // vrdisplayblur, visibilitychange, or vrdisplaypresentchange event, so we wait 15 seconds after\n    // the last requestAnimationFrame callback to determine if the headset has gone into standby mode.\n    // We also check that you have entered VR so that this timeout does not occur in the setup UI.\n    if (\n      this.isOculusBrowser &&\n      this.enteredVR &&\n      (this.lastTimeoutCheck === 0 || t - this.lastTimeoutCheck >= 1000.0) // Don't do this clear every frame, slow.\n    ) {\n      this.lastTimeoutCheck = t;\n      clearTimeout(this.exitTimeout);\n      this.exitTimeout = setTimeout(this.onTimeout, 15 * 1000);\n    }\n  },\n\n  onEnterVR() {\n    this.enteredVR = true;\n  },\n\n  onBlur() {\n    if (this.el.isMobile) {\n      clearTimeout(this.exitTimeout);\n      this.exitTimeout = setTimeout(this.onTimeout, 30 * 1000);\n    }\n  },\n\n  onFocus() {\n    if (this.el.isMobile) {\n      clearTimeout(this.exitTimeout);\n    }\n  },\n\n  onTimeout() {\n    this.el.dispatchEvent(new CustomEvent(\"exit\"));\n  },\n\n  remove() {\n    clearTimeout(this.exitTimeout);\n    window.removeEventListener(\"blur\", this.onBlur);\n  }\n});\n","// Used for tracking and managing camera tools in the scene\nAFRAME.registerSystem(\"camera-tools\", {\n  init() {\n    this.cameraEls = [];\n  },\n\n  register(el) {\n    this.cameraEls.push(el);\n    el.addEventListener(\"ownership-changed\", this._onOwnershipChange);\n    delete this.myCamera;\n  },\n\n  deregister(el) {\n    this.cameraEls = this.cameraEls.filter(c => c !== el);\n    el.removeEventListener(\"ownership-changed\", this._onOwnershipChange);\n    delete this.myCamera;\n  },\n\n  avatarUpdated() {\n    this.cameraEls.forEach(el => delete el.components[\"camera-tool\"].onAvatarUpdated());\n  },\n\n  getMyCamera() {\n    if (this.myCamera !== undefined) return this.myCamera;\n    this.myCamera = this.cameraEls.find(NAF.utils.isMine) || null;\n    return this.myCamera;\n  },\n\n  _onOwnershipChange() {\n    this.myCamera = null;\n  }\n});\n","module.exports = {\n  COLLISION_LAYERS: {\n    ALL: -1,\n    NONE: 0,\n    INTERACTABLES: 1,\n    ENVIRONMENT: 2,\n    AVATAR: 4,\n    HANDS: 8,\n    DEFAULT_INTERACTABLE: 1 | 2 | 4 | 8,\n    UNOWNED_INTERACTABLE: 1 | 8,\n    DEFAULT_SPAWNER: 1 | 8\n  }\n};\n","/* global AFRAME NAF performance */\nAFRAME.registerComponent(\"owned-object-limiter\", {\n  schema: {\n    counter: { type: \"selector\" }\n  },\n\n  init() {\n    this.counter = this.data.counter.components[\"networked-counter\"];\n  },\n\n  tick() {\n    this._syncCounterRegistration();\n    const isHeld = this.el.sceneEl.systems.interaction.isHeld(this.el);\n    if (!isHeld && this.wasHeld && this.counter.timestamps.has(this.el)) {\n      this.counter.timestamps.set(this.el, performance.now());\n    }\n    this.wasHeld = isHeld;\n  },\n\n  remove() {\n    this.counter.deregister(this.el);\n  },\n\n  _syncCounterRegistration() {\n    if (!this.el.components[\"networked\"]) return;\n\n    const isPinned = this.el.components[\"pinnable\"] && this.el.components[\"pinnable\"].data.pinned;\n\n    if (NAF.utils.isMine(this.el) && !isPinned) {\n      this.counter.register(this.el);\n    } else {\n      this.counter.deregister(this.el);\n    }\n  }\n});\n","/* global NAF */\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nAFRAME.registerComponent(\"set-unowned-body-kinematic\", {\n  init() {\n    this.setBodyKinematic = this.setBodyKinematic.bind(this);\n  },\n  play() {\n    this.el.addEventListener(\"ownership-lost\", this.setBodyKinematic);\n\n    if (!this.didThisOnce) {\n      // Do this in play instead of init so that the ammo-body and networked components are done\n      this.didThisOnce = true;\n\n      if (!NAF.utils.isMine(this.el)) {\n        this.setBodyKinematic();\n      }\n    }\n  },\n  pause() {\n    this.el.removeEventListener(\"ownership-lost\", this.setBodyKinematic);\n  },\n  setBodyKinematic() {\n    this.el.setAttribute(\"ammo-body\", {\n      type: \"kinematic\",\n      collisionFilterMask: COLLISION_LAYERS.UNOWNED_INTERACTABLE\n    });\n    if (this.el.components[\"floaty-object\"]) {\n      this.el.components[\"floaty-object\"].locked = true;\n    }\n  }\n});\n","/* global AFRAME performance */\n/**\n * Limits networked interactables to a maximum number at any given time\n * @namespace network\n * @component networked-counter\n */\nAFRAME.registerComponent(\"networked-counter\", {\n  schema: {\n    max: { default: 3 }\n  },\n\n  init() {\n    this.timestamps = new Map();\n    this.el.object3D.visible = false;\n  },\n\n  remove() {\n    this.timestamps.clear();\n  },\n\n  count() {\n    return this.timestamps.size;\n  },\n\n  register(el) {\n    if (this.data.max <= 0 || this.timestamps.has(el)) return;\n\n    this.timestamps.set(el, performance.now());\n    if (this.timestamps.size > this.data.max) {\n      this._destroyOldest();\n    }\n  },\n\n  deregister(el) {\n    if (!this.timestamps.has(el)) return;\n    this.timestamps.delete(el);\n  },\n\n  _destroyOldest() {\n    const interaction = this.el.sceneEl.systems.interaction;\n    let oldestEl = null,\n      minTs = Number.MAX_VALUE;\n    this.timestamps.forEach((ts, el) => {\n      if (ts < minTs && !interaction.isHeld(el) && NAF.utils.isMine(el)) {\n        oldestEl = el;\n        minTs = ts;\n      }\n    });\n    this._destroy(oldestEl);\n  },\n\n  _destroy(el) {\n    // Pause the entity so that it won't just re-register itself immediately in owned-object-limiter.\n    el.pause();\n    // networked-interactable's remove will also call deregister, but it will happen async so we do it here as well.\n    this.deregister(el);\n    el.parentNode.removeChild(el);\n  }\n});\n","AFRAME.registerComponent(\"set-yxz-order\", {\n  init: function() {\n    this.el.object3D.rotation.order = \"YXZ\";\n  }\n});\n","/**\n * Initializes teleporters when the environment bundle has loaded.\n * @namespace environment\n * @component nav-mesh-helper\n */\nAFRAME.registerComponent(\"nav-mesh-helper\", {\n  init: function() {\n    this.el.addEventListener(\"model-loaded\", () => {\n      const teleporters = document.querySelectorAll(\"[teleporter]\");\n      for (let i = 0; i < teleporters.length; i++) {\n        teleporters[i].components[\"teleporter\"].queryCollisionEntities();\n      }\n    });\n  }\n});\n","/**\n * Drawing Manager\n * Manages what networked-drawings are available to pen components\n * @namespace drawing\n * @component drawing-manager\n */\nAFRAME.registerComponent(\"drawing-manager\", {\n  init() {\n    this._onComponentInitialized = this._onComponentInitialized.bind(this);\n\n    this.el.object3D.visible = false;\n    this.drawingToPen = new Map();\n  },\n\n  remove() {\n    if (this.drawingEl) {\n      this.drawingEl.removeEventListener(\"componentinitialized\", this._onComponentInitialized);\n    }\n  },\n\n  _onComponentInitialized(e) {\n    if (e.detail.name == \"networked-drawing\") {\n      this.drawing = this.drawingEl.components[\"networked-drawing\"];\n    }\n  },\n\n  createDrawing() {\n    if (!this.drawingEl) {\n      this.drawingEl = document.createElement(\"a-entity\");\n      this.drawingEl.setAttribute(\"networked\", \"template: #interactable-drawing\");\n      this.el.sceneEl.appendChild(this.drawingEl);\n\n      this.drawingEl.addEventListener(\"componentinitialized\", this._onComponentInitialized);\n    }\n  },\n\n  getDrawing(pen) {\n    //TODO: future handling of multiple drawings\n    if (this.drawing && (!this.drawingToPen.has(this.drawing) || this.drawingToPen.get(this.drawing) === pen)) {\n      this.drawingToPen.set(this.drawing, pen);\n      return this.drawing;\n    }\n\n    return null;\n  },\n\n  returnDrawing(pen) {\n    if (this.drawingToPen.has(this.drawing) && this.drawingToPen.get(this.drawing) === pen) {\n      this.drawingToPen.delete(this.drawing);\n    }\n  }\n});\n","export const paths = {};\npaths.noop = \"/noop\";\npaths.actions = {};\npaths.actions.log = \"/actions/log\";\npaths.actions.toggleScreenShare = \"/actions/toggleScreenShare\";\npaths.actions.snapRotateLeft = \"/actions/snapRotateLeft\";\npaths.actions.snapRotateRight = \"/actions/snapRotateRight\";\npaths.actions.angularVelocity = \"/actions/angularVelocity\";\npaths.actions.logDebugFrame = \"/actions/logDebugFrame\";\npaths.actions.logInteractionState = \"/actions/logInteractionState\";\npaths.actions.cameraDelta = \"/actions/cameraDelta\";\npaths.actions.lobbyCameraDelta = \"/actions/lobbyCameraDelta\";\npaths.actions.characterAcceleration = \"/actions/characterAcceleration\";\npaths.actions.boost = \"/actions/boost\";\npaths.actions.startGazeTeleport = \"/actions/startTeleport\";\npaths.actions.stopGazeTeleport = \"/actions/stopTeleport\";\npaths.actions.spawnPen = \"/actions/spawnPen\";\npaths.actions.ensureFrozen = \"/actions/ensureFrozen\";\npaths.actions.toggleFreeze = \"/actions/toggleFreeze\";\npaths.actions.thaw = \"/actions/thaw\";\npaths.actions.muteMic = \"/actions/muteMic\";\npaths.actions.toggleFlying = \"/actions/toggleFlying\";\npaths.actions.focusChat = \"/actions/focusChat\";\npaths.actions.focusChatCommand = \"/actions/focusChatCommand\";\npaths.actions.toggleCamera = \"/actions/toggleCamera\";\npaths.actions.takeSnapshot = \"/actions/takeSnapshot\";\npaths.actions.mediaExit = \"/actions/mediaExit\";\npaths.actions.mediaSearch1 = \"/actions/mediaSearch1\";\npaths.actions.mediaSearch2 = \"/actions/mediaSearch2\";\npaths.actions.mediaSearch3 = \"/actions/mediaSearch3\";\npaths.actions.mediaSearch4 = \"/actions/mediaSearch4\";\npaths.actions.mediaSearch5 = \"/actions/mediaSearch5\";\npaths.actions.mediaSearch6 = \"/actions/mediaSearch6\";\npaths.actions.mediaSearch7 = \"/actions/mediaSearch7\";\npaths.actions.mediaSearch8 = \"/actions/mediaSearch8\";\npaths.actions.transformModifier = \"/actions/transformModifier\";\npaths.actions.rayObjectRotation = \"/actions/rayObjectRotation\";\npaths.actions.cursor = {};\npaths.actions.cursor.pose = \"/actions/cursorPose\";\npaths.actions.cursor.hideLine = \"/actions/cursorHideLine\";\npaths.actions.cursor.grab = \"/actions/cursorGrab\";\npaths.actions.cursor.drop = \"/actions/cursorDrop\";\npaths.actions.cursor.modDelta = \"/actions/cursorModDelta\";\npaths.actions.cursor.startDrawing = \"/actions/cursorStartDrawing\";\npaths.actions.cursor.stopDrawing = \"/actions/cursorStopDrawing\";\npaths.actions.cursor.undoDrawing = \"/actions/cursorUndoDrawing\";\npaths.actions.cursor.penNextColor = \"/actions/cursorPenNextColor\";\npaths.actions.cursor.penPrevColor = \"/actions/cursorPenPrevColor\";\npaths.actions.cursor.scalePenTip = \"/actions/cursorScalePenTip\";\npaths.actions.cursor.scaleGrabbedGrabbable = \"/actions/cursorScaleGrabbedGrabbable\";\npaths.actions.cursor.mediaVolumeMod = \"/actions/cursor/mediaVolumeMod\";\npaths.actions.cursor.takeSnapshot = \"/actions/cursorTakeSnapshot\";\npaths.actions.pen = {};\npaths.actions.pen.remove = \"/actions/pen/remove\";\npaths.actions.rightHand = {};\npaths.actions.rightHand.matrix = \"/actions/rightHand/matrix\";\npaths.actions.rightHand.pose = \"/actions/rightHandPose\";\npaths.actions.rightHand.grab = \"/actions/rightHandGrab\";\npaths.actions.rightHand.drop = \"/actions/rightHandDrop\";\npaths.actions.rightHand.modDelta = \"/actions/rightHandModDelta\";\npaths.actions.rightHand.startDrawing = \"/actions/rightHandStartDrawing\";\npaths.actions.rightHand.stopDrawing = \"/actions/rightHandStopDrawing\";\npaths.actions.rightHand.undoDrawing = \"/actions/rightHandUndoDrawing\";\npaths.actions.rightHand.switchDrawMode = \"/actions/rightHandSwitchDrawMode\";\npaths.actions.rightHand.penNextColor = \"/actions/rightHandPenNextColor\";\npaths.actions.rightHand.penPrevColor = \"/actions/rightHandPenPrevColor\";\npaths.actions.rightHand.scalePenTip = \"/actions/rightHandScalePenTip\";\npaths.actions.rightHand.startTeleport = \"/actions/rightHand/startTeleport\";\npaths.actions.rightHand.stopTeleport = \"/actions/rightHand/stopTeleport\";\npaths.actions.rightHand.takeSnapshot = \"/actions/rightHandTakeSnapshot\";\npaths.actions.rightHand.thumb = \"/actions/rightHand/thumbDown\";\npaths.actions.rightHand.index = \"/actions/rightHand/indexDown\";\npaths.actions.rightHand.middleRingPinky = \"/actions/rightHand/middleRingPinkyDown\";\npaths.actions.leftHand = {};\npaths.actions.leftHand.matrix = \"/actions/leftHand/matrix\";\npaths.actions.leftHand.pose = \"/actions/leftHandPose\";\npaths.actions.leftHand.grab = \"/actions/leftHandGrab\";\npaths.actions.leftHand.drop = \"/actions/leftHandDrop\";\npaths.actions.leftHand.modDelta = \"/actions/leftHandModDelta\";\npaths.actions.leftHand.startDrawing = \"/actions/leftHandStartDrawing\";\npaths.actions.leftHand.stopDrawing = \"/actions/leftHandStopDrawing\";\npaths.actions.leftHand.undoDrawing = \"/actions/leftHandUndoDrawing\";\npaths.actions.leftHand.switchDrawMode = \"/actions/leftHandSwitchDrawMode\";\npaths.actions.leftHand.penNextColor = \"/actions/leftHandPenNextColor\";\npaths.actions.leftHand.penPrevColor = \"/actions/leftHandPenPrevColor\";\npaths.actions.leftHand.scalePenTip = \"/actions/leftHandScalePenTip\";\npaths.actions.leftHand.startTeleport = \"/actions/leftHand/startTeleport\";\npaths.actions.leftHand.stopTeleport = \"/actions/leftHand/stopTeleport\";\npaths.actions.leftHand.takeSnapshot = \"/actions/leftHandTakeSnapshot\";\npaths.actions.leftHand.thumb = \"/actions/leftHand/thumbDown\";\npaths.actions.leftHand.index = \"/actions/leftHand/indexDown\";\npaths.actions.leftHand.middleRingPinky = \"/actions/leftHand/middleRingPinkyDown\";\npaths.actions.camera = {};\npaths.actions.camera.exitMirror = \"/actions/cameraExitMirror\";\npaths.haptics = {};\npaths.haptics.actuators = {};\npaths.haptics.actuators.left = \"/haptics/actuators/left\";\npaths.haptics.actuators.right = \"/haptics/actuators/right\";\n\npaths.device = {};\npaths.device.mouse = {};\npaths.device.mouse.coords = \"/device/mouse/coords\";\npaths.device.mouse.movementXY = \"/device/mouse/movementXY\";\npaths.device.mouse.buttonLeft = \"/device/mouse/buttonLeft\";\npaths.device.mouse.buttonRight = \"/device/mouse/buttonRight\";\npaths.device.mouse.wheel = \"/device/mouse/wheel\";\npaths.device.smartMouse = {};\npaths.device.smartMouse.cursorPose = \"/device/smartMouse/cursorPose\";\npaths.device.smartMouse.cameraDelta = \"/device/smartMouse/cameraDelta\";\npaths.device.touchscreen = {};\npaths.device.touchscreen.cursorPose = \"/device/touchscreen/cursorPose\";\npaths.device.touchscreen.touchCameraDelta = \"/device/touchscreen/touchCameraDelta\";\npaths.device.touchscreen.gyroCameraDelta = \"/device/touchscreen/gyroCameraDelta\";\npaths.device.touchscreen.cameraDelta = \"/device/touchscreen/cameraDelta\";\npaths.device.touchscreen.pinch = {};\npaths.device.touchscreen.pinch.delta = \"/device/touchscreen/pinch/delta\";\npaths.device.touchscreen.pinch.initialDistance = \"/device/touchscreen/pinch/initialDistance\";\npaths.device.touchscreen.pinch.currentDistance = \"/device/touchscreen/pinch/currentDistance\";\npaths.device.touchscreen.isTouching = \"/device/touchscreen/isTouching\";\npaths.device.touchscreen.isTouchingGrabbable = \"/device/touchscreen/isTouchingGrabbable\";\npaths.device.touchscreen.tap1 = \"/device/touchscreen/tap1\";\npaths.device.touchscreen.tap2 = \"/device/touchscreen/tap2\";\npaths.device.touchscreen.tap3 = \"/device/touchscreen/tap3\";\npaths.device.touchscreen.tap4 = \"/device/touchscreen/tap4\";\npaths.device.touchscreen.tap5 = \"/device/touchscreen/tap5\";\npaths.device.gyro = {};\npaths.device.gyro.averageDeltaX = \"/device/gyro/averageDeltaX\";\npaths.device.gyro.averageDeltaY = \"/device/gyro/averageDeltaY\";\npaths.device.hud = {};\npaths.device.hud.penButton = \"/device/hud/penButton\";\n\npaths.device.keyboard = {\n  map: new Map(),\n  key: function(k) {\n    let path = this.map.get(k);\n    if (path) {\n      return path;\n    }\n    path = `/device/keyboard/${k.toLowerCase()}`;\n    this.map.set(k, path);\n    return path;\n  }\n};\n\npaths.device.gamepad = gamepadIndex => ({\n  button: buttonIndex => ({\n    pressed: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/pressed`,\n    touched: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/touched`,\n    value: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/value`\n  }),\n  axis: axisIndex => `/device/gamepad/${gamepadIndex}/axis/${axisIndex}`\n});\n\nconst xbox = \"/device/xbox/\";\npaths.device.xbox = {\n  v: name => `/vars/xbox/${name}`,\n  button: buttonName => ({\n    pressed: `${xbox}button/${buttonName}/pressed`,\n    touched: `${xbox}button/${buttonName}/touched`,\n    value: `${xbox}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${xbox}axis/${axisName}`;\n  },\n  axesSum: `${xbox}axis/sum`\n};\n\npaths.device.oculusgo = {\n  // TODO remove these in favor of the direct accessors\n  button: buttonName => ({\n    pressed: `/device/oculusgo/button/${buttonName}/pressed`,\n    touched: `/device/oculusgo/button/${buttonName}/touched`,\n    value: `/device/oculusgo/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/oculusgo/axis/${axisName}`;\n  },\n  //\n  trigger: {\n    pressed: \"/device/oculusgo/button/trigger/pressed\",\n    touched: \"/device/oculusgo/button/trigger/touched\",\n    value: \"/device/oculusgo/button/trigger/value\"\n  },\n  touchpad: {\n    pressed: \"/device/oculusgo/button/touchpad/pressed\",\n    touched: \"/device/oculusgo/button/touchpad/touched\",\n    value: \"/device/oculusgo/button/touchpad/value\",\n    axisX: \"/device/oculusgo/axis/touchpadX\",\n    axisY: \"/device/oculusgo/axis/touchpadY\"\n  },\n  pose: \"/device/oculusgo/pose\",\n  matrix: \"/device/oculusgo/matrix\",\n  v: name => {\n    return `/vars/oculusgo/${name}`;\n  }\n};\n\nconst gearVRController = \"/device/gearVRController/\";\npaths.device.gearVRController = {\n  button: buttonName => ({\n    pressed: `${gearVRController}button/${buttonName}/pressed`,\n    touched: `${gearVRController}button/${buttonName}/touched`,\n    value: `${gearVRController}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${gearVRController}axis/${axisName}`;\n  },\n  pose: `${gearVRController}pose`,\n  matrix: `${gearVRController}matrix`,\n  v: name => {\n    return `/vars/gearVRController/${name}`;\n  }\n};\n\nconst daydream = \"/device/daydream/\";\npaths.device.daydream = {\n  button: buttonName => ({\n    pressed: `${daydream}button/${buttonName}/pressed`,\n    touched: `${daydream}button/${buttonName}/touched`,\n    value: `${daydream}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${daydream}axis/${axisName}`;\n  },\n  pose: `${daydream}pose`,\n  matrix: `${daydream}matrix`\n};\n\nconst rightOculusTouch = \"/device/rightOculusTouch/\";\npaths.device.rightOculusTouch = {\n  button: buttonName => ({\n    pressed: `${rightOculusTouch}button/${buttonName}/pressed`,\n    touched: `${rightOculusTouch}button/${buttonName}/touched`,\n    value: `${rightOculusTouch}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${rightOculusTouch}axis/${axisName}`;\n  },\n  axesSum: `${rightOculusTouch}axis/sum`,\n  pose: `${rightOculusTouch}pose`,\n  matrix: `${rightOculusTouch}matrix`\n};\n\nconst leftOculusTouch = \"/device/leftOculusTouch/\";\npaths.device.leftOculusTouch = {\n  button: buttonName => ({\n    pressed: `${leftOculusTouch}button/${buttonName}/pressed`,\n    touched: `${leftOculusTouch}button/${buttonName}/touched`,\n    value: `${leftOculusTouch}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${leftOculusTouch}axis/${axisName}`;\n  },\n  axesSum: `${leftOculusTouch}axis/sum`,\n  pose: `${leftOculusTouch}pose`,\n  matrix: `${leftOculusTouch}matrix`\n};\n\npaths.device.vive = {};\npaths.device.vive.left = {\n  button: buttonName => ({\n    pressed: `/device/vive/left/button/${buttonName}/pressed`,\n    touched: `/device/vive/left/button/${buttonName}/touched`,\n    value: `/device/vive/left/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/vive/left/axis/${axisName}`;\n  },\n  axesSum: \"/device/vive/left/axis/sum\",\n  pose: `/device/vive/left/pose`,\n  matrix: `/device/vive/left/matrix`\n};\npaths.device.vive.right = {\n  button: buttonName => ({\n    pressed: `/device/vive/right/button/${buttonName}/pressed`,\n    touched: `/device/vive/right/button/${buttonName}/touched`,\n    value: `/device/vive/right/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/vive/right/axis/${axisName}`;\n  },\n  axesSum: \"/device/vive/right/axis/sum\",\n  pose: `/device/vive/right/pose`,\n  matrix: `/device/vive/right/matrix`\n};\n\nfunction button(device, side, name) {\n  return {\n    pressed: `${device}${side}/button/${name}/pressed`,\n    touched: `${device}${side}/button/${name}/touched`,\n    value: `${device}${side}/button/${name}/value`\n  };\n}\n\nfunction axes(device, side, name) {\n  return {\n    axisX: `${device}${side}/axis/${name}X`,\n    axisY: `${device}${side}/axis/${name}Y`\n  };\n}\n\nfunction wmrController(side) {\n  const wmr = \"/device/wmr/\";\n  return {\n    touchpad: {\n      ...button(wmr, side, \"touchpad\"),\n      ...axes(wmr, side, \"touchpad\")\n    },\n    trigger: button(wmr, side, \"trigger\"),\n    grip: button(wmr, side, \"grip\"),\n    menu: button(wmr, side, \"menu\"),\n    joystick: axes(wmr, side, \"joystick\"),\n    pose: `${wmr}${side}/pose`,\n    matrix: `${wmr}${side}/matrix`\n  };\n}\npaths.device.wmr = {};\npaths.device.wmr.v = name => `/vars/wmr/${name}`;\npaths.device.wmr.k = name => `/vars/wmr/keyboard/${name}`;\npaths.device.wmr.left = wmrController(\"left\");\npaths.device.wmr.right = wmrController(\"right\");\n","import { forEachMaterial } from \"../utils/material-utils\";\nimport cubeMapPosX from \"../assets/images/cubemap/posx.jpg\";\nimport cubeMapNegX from \"../assets/images/cubemap/negx.jpg\";\nimport cubeMapPosY from \"../assets/images/cubemap/posy.jpg\";\nimport cubeMapNegY from \"../assets/images/cubemap/negy.jpg\";\nimport cubeMapPosZ from \"../assets/images/cubemap/posz.jpg\";\nimport cubeMapNegZ from \"../assets/images/cubemap/negz.jpg\";\n\nexport async function createDefaultEnvironmentMap() {\n  const urls = [cubeMapPosX, cubeMapNegX, cubeMapPosY, cubeMapNegY, cubeMapPosZ, cubeMapNegZ];\n  const texture = await new Promise((resolve, reject) =>\n    new THREE.CubeTextureLoader().load(urls, resolve, undefined, reject)\n  );\n  texture.format = THREE.RGBFormat;\n  return texture;\n}\n\nAFRAME.registerComponent(\"environment-map\", {\n  init() {\n    this.environmentMap = null;\n\n    this.updateEnvironmentMap = this.updateEnvironmentMap.bind(this);\n  },\n\n  updateEnvironmentMap(environmentMap) {\n    this.environmentMap = environmentMap;\n    this.applyEnvironmentMap(this.el.object3D);\n  },\n\n  applyEnvironmentMap(object3D) {\n    object3D.traverse(object => {\n      forEachMaterial(object, material => {\n        if (material.isMeshStandardMaterial) {\n          material.envMap = this.environmentMap;\n          material.needsUpdate = true;\n        }\n      });\n    });\n  }\n});\n","module.exports = \"if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\\n  float ratio = 0.0;\\n\\n  if (hubs_EnableSweepingEffect) {\\n    float size = hubs_SweepParams.t - hubs_SweepParams.s;\\n    float line = mod(hubs_Time / 500.0 * size, size * 3.0) + hubs_SweepParams.s - size / 3.0;\\n\\n    if (hubs_WorldPosition.y < line) {\\n      // Highlight with a sweeping gradient.\\n      ratio = max(0.0, 1.0 - (line - hubs_WorldPosition.y) / (size * 1.5));\\n    }\\n  }\\n\\n  // Highlight with a gradient falling off with distance.\\n  float pulse = 9.0 + 3.0 * (sin(hubs_Time / 1000.0) + 1.0);\\n\\n  if (hubs_HighlightInteractorOne) {\\n    float dist1 = distance(hubs_WorldPosition, hubs_InteractorOnePos);\\n    ratio += -min(1.0, pow(dist1 * pulse, 3.0)) + 1.0;\\n  } \\n\\n  if (hubs_HighlightInteractorTwo) {\\n    float dist2 = distance(hubs_WorldPosition, hubs_InteractorTwoPos);\\n    ratio += -min(1.0, pow(dist2 * pulse, 3.0)) + 1.0;\\n  }\\n\\n  ratio = min(1.0, ratio);\\n\\n  // Gamma corrected highlight color\\n  vec3 highlightColor = vec3(0.184, 0.499, 0.933);\\n\\n  gl_FragColor.rgb = (gl_FragColor.rgb * (1.0 - ratio)) + (highlightColor * ratio);\\n}\\n\"","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posx-d235fb97df77b607be04b84125f40e7c.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negx-35034574e114423babdea92b6a2eb97a.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posy-d0c4e1e7979d75923d4d8b49c191bc6e.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negy-35808d21d1d17ac1b84d3184e365093b.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posz-de29aa8396196e4b040cd5305e351dbe.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negz-d73d18a8b7994524dc39a6ea3fcf43fc.jpg\";","import { detectOS } from \"detect-browser\";\n\nexport function disableiOSZoom() {\n  if (detectOS(navigator.userAgent) !== \"iOS\") return;\n\n  let lastTouchAtMs = 0;\n\n  document.addEventListener(\"touchmove\", ev => {\n    if (ev.scale === 1) return;\n\n    ev.preventDefault();\n  });\n\n  document.addEventListener(\"touchend\", ev => {\n    const now = new Date().getTime();\n    const isDoubleTouch = now - lastTouchAtMs <= 300;\n    lastTouchAtMs = now;\n\n    if (isDoubleTouch) {\n      ev.preventDefault();\n    }\n  });\n}\n","import Store from \"./storage/store\";\nimport MediaSearchStore from \"./storage/media-search-store\";\n\nexport class App {\n  constructor() {\n    this.scene = null;\n    this.quality = \"low\";\n    this.store = new Store();\n    this.mediaSearchStore = new MediaSearchStore();\n  }\n\n  setQuality(quality) {\n    if (this.quality === quality) {\n      return false;\n    }\n\n    this.quality = quality;\n\n    if (this.scene) {\n      this.scene.dispatchEvent(new CustomEvent(\"quality-changed\", { detail: quality }));\n    }\n\n    return true;\n  }\n}\n","import Airtable from 'airtable';\nAirtable.configure({\n    endpointUrl: 'https://api.airtable.com',\n    apiKey: 'keyOHSVeLr3ryLrL5'\n});\n\nconst base = Airtable.base('appIR0AlHDFG5WR8z');\n\nexport const airtableAssetsInitialState = { DarkLogo: null, Name: null, Icon: null }\nexport const airtableAssets = base('Assets');\n\nexport const airtableMessages = base('Messages').select({\n    view: 'Grid view'\n}).firstPage(async (err, records) => {\n    if (err) { console.error(err); return; }\n    const record = records[0];\n    // console.log(record.get('Motto'))\n    return record;\n\n    // records.forEach(function(record) {\n    //     console.log('Retrieved', record.get('Motto'));\n    // });\n});;\n// .find('recHqITRS7cBMwn9i', (err, record) => record.fields);\n// export const airtableAssets = () => base('Assets')\n\n// export default base;","// Provides a global registry of running components\nexport function registerComponentInstance(component, name) {\n  window.APP.componentRegistry = window.APP.componentRegistry || {};\n  window.APP.componentRegistry[name] = window.APP.componentRegistry[name] || [];\n  window.APP.componentRegistry[name].push(component);\n}\n\nexport function deregisterComponentInstance(component, name) {\n  if (!window.APP.componentRegistry || !window.APP.componentRegistry[name]) return;\n  window.APP.componentRegistry[name].splice(window.APP.componentRegistry[name].indexOf(component), 1);\n}\n\nexport function getCurrentStreamer() {\n  if (!window.APP || !window.APP.componentRegistry || !window.APP.hubChannel) return null;\n  const playerInfos = window.APP.componentRegistry[\"player-info\"] || [];\n  const presences = window.APP.hubChannel.presence.state;\n\n  for (let i = 0; i < playerInfos.length; i++) {\n    const playerInfo = playerInfos[i];\n    const presence = presences[playerInfo.playerSessionId];\n\n    if (presence && presence.metas[0] && presence.metas[0].streaming) {\n      return playerInfo;\n    }\n  }\n\n  return null;\n}\n","import { SOUND_TOGGLE_MIC } from \"../systems/sound-effects-system\";\n\nconst bindAllEvents = function(elements, events, f) {\n  if (!elements || !elements.length) return;\n  for (const el of elements) {\n    events.length &&\n      events.forEach(e => {\n        el.addEventListener(e, f);\n      });\n  }\n};\nconst unbindAllEvents = function(elements, events, f) {\n  if (!elements || !elements.length) return;\n  for (const el of elements) {\n    events.length &&\n      events.forEach(e => {\n        el.removeEventListener(e, f);\n      });\n  }\n};\n\n/**\n * Toggles the microphone on the current network connection based on the given events.\n * @namespace network\n * @component mute-mic\n */\nAFRAME.registerComponent(\"mute-mic\", {\n  schema: {\n    eventSrc: { type: \"selectorAll\" },\n    toggleEvents: { type: \"array\" },\n    muteEvents: { type: \"array\" },\n    unmuteEvents: { type: \"array\" }\n  },\n  init: function() {\n    this.onToggle = this.onToggle.bind(this);\n    this.onMute = this.onMute.bind(this);\n    this.onUnmute = this.onUnmute.bind(this);\n  },\n\n  play: function() {\n    const { eventSrc, toggleEvents, muteEvents, unmuteEvents } = this.data;\n    bindAllEvents(eventSrc, toggleEvents, this.onToggle);\n    bindAllEvents(eventSrc, muteEvents, this.onMute);\n    bindAllEvents(eventSrc, unmuteEvents, this.onUnmute);\n  },\n\n  pause: function() {\n    const { eventSrc, toggleEvents, muteEvents, unmuteEvents } = this.data;\n    unbindAllEvents(eventSrc, toggleEvents, this.onToggle);\n    unbindAllEvents(eventSrc, muteEvents, this.onMute);\n    unbindAllEvents(eventSrc, unmuteEvents, this.onUnmute);\n  },\n\n  onToggle: function() {\n    if (!NAF.connection.adapter) return;\n    if (!this.el.sceneEl.is(\"entered\")) return;\n\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_TOGGLE_MIC);\n    if (this.el.is(\"muted\")) {\n      NAF.connection.adapter.enableMicrophone(true);\n      this.el.removeState(\"muted\");\n    } else {\n      NAF.connection.adapter.enableMicrophone(false);\n      this.el.addState(\"muted\");\n    }\n  },\n\n  onMute: function() {\n    if (!NAF.connection.adapter) return;\n    if (!this.el.is(\"muted\")) {\n      NAF.connection.adapter.enableMicrophone(false);\n      this.el.addState(\"muted\");\n    }\n  },\n\n  onUnmute: function() {\n    if (this.el.is(\"muted\")) {\n      NAF.connection.adapter.enableMicrophone(true);\n      this.el.removeState(\"muted\");\n    }\n  }\n});\n","import { SOUND_TOGGLE_FLYING } from \"../systems/sound-effects-system\";\n\nconst bindAllEvents = function(elements, events, f) {\n  if (!elements || !elements.length) return;\n  for (const el of elements) {\n    events.length &&\n      events.forEach(e => {\n        el.addEventListener(e, f);\n      });\n  }\n};\nconst unbindAllEvents = function(elements, events, f) {\n  if (!elements || !elements.length) return;\n  for (const el of elements) {\n    events.length &&\n      events.forEach(e => {\n        el.removeEventListener(e, f);\n      });\n  }\n};\n\n/**\n * Toggles flying.\n * @namespace network\n * @component toggle-flying\n */\nAFRAME.registerComponent(\"toggle-flying\", {\n  schema: {\n    eventSrc: { type: \"selectorAll\" },\n    toggleEvents: { type: \"array\" },\n    // flyingEvents: { type: \"array\" },\n  },\n  init: function() {\n    this.onToggle = this.onToggle.bind(this);\n    // this.onFlying = this.onFlying.bind(this);\n  },\n\n  play: function() {\n    const { eventSrc, toggleEvents } = this.data;\n    bindAllEvents(eventSrc, toggleEvents, this.onToggle);\n   // bindAllEvents(eventSrc, flyingEvents, this.onFlying);\n    \n  },\n\n  pause: function() {\n    const { eventSrc, toggleEvents } = this.data;\n    unbindAllEvents(eventSrc, toggleEvents, this.onToggle);\n    // unbindAllEvents(eventSrc, flyingEvents, this.onFlying);\n  },\n\n  onToggle: function() {\n    if (!this.el.sceneEl.is(\"entered\")) return;\n\n    // this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_TOGGLE_MIC);\n    if (this.el.is(\"flying\")) {\n      this.el.removeState(\"flying\");\n    } else {\n      this.el.addState(\"flying\");\n    }\n  },\n\n  // onFlying: function() {\n  //   if (!this.el.is(\"flying\")) {  \n  //     this.el.addState(\"flying\");\n  //   } else {\n  //     this.el.removeState(\"flying\");\n  //   }\n  // },\n});\n","import { SOUND_SPAWN_PEN } from \"../systems/sound-effects-system\";\n/**\n * HUD panel for muting, freezing, and other controls that don't necessarily have hardware buttons.\n * @namespace ui\n * @component in-world-hud\n */\nAFRAME.registerComponent(\"in-world-hud\", {\n  init() {\n    this.mic = this.el.querySelector(\".mic\");\n    this.spawn = this.el.querySelector(\".spawn\");\n    this.pen = this.el.querySelector(\".penhud\");\n    this.cameraBtn = this.el.querySelector(\".camera-btn\");\n    this.inviteBtn = this.el.querySelector(\".invite-btn\");\n    this.background = this.el.querySelector(\".bg\");\n    this.flyBtn = this.el.querySelector(\".fly-btn\");\n\n    this.updateButtonStates = () => {\n      this.mic.setAttribute(\"icon-button\", \"active\", this.el.sceneEl.is(\"muted\"));\n      this.pen.setAttribute(\"icon-button\", \"active\", this.el.sceneEl.is(\"pen\"));\n      this.cameraBtn.setAttribute(\"icon-button\", \"active\", this.el.sceneEl.is(\"camera\"));\n      this.flyBtn.setAttribute(\"icon-button\", \"active\", this.el.sceneEl.is(\"flying\"));\n    };\n    this.updateButtonStates();\n\n    this.onStateChange = evt => {\n      if (!(evt.detail === \"muted\" || evt.detail === \"frozen\" || evt.detail === \"pen\" || evt.detail === \"camera\" || evt.detail === \"flying\"))\n        return;\n      this.updateButtonStates();\n    };\n\n    this.onMicClick = () => {\n      this.el.emit(\"action_mute\");\n    };\n\n    this.onSpawnClick = () => {\n      this.el.emit(\"action_spawn\");\n    };\n\n    this.onPenClick = () => {\n      this.el.emit(\"spawn_pen\");\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SPAWN_PEN);\n    };\n\n    this.onCameraClick = () => {\n      this.el.emit(\"action_toggle_camera\");\n    };\n\n    this.onFlyClick = () => {\n      this.el.emit(\"action_fly\");\n      const playerRig = document.querySelector(\"#player-rig\");\n      const enabled = playerRig.getAttribute(\"character-controller\", \"fly\").fly; \n      playerRig.setAttribute(\"character-controller\", \"fly\", !enabled);  \n    };\n\n    this.onInviteClick = () => {\n      this.el.emit(\"action_invite\");\n    };\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateChange);\n\n    this.mic.object3D.addEventListener(\"interact\", this.onMicClick);\n    this.spawn.object3D.addEventListener(\"interact\", this.onSpawnClick);\n    this.pen.object3D.addEventListener(\"interact\", this.onPenClick);\n    this.cameraBtn.object3D.addEventListener(\"interact\", this.onCameraClick);\n    this.flyBtn.object3D.addEventListener(\"interact\", this.onFlyClick);\n    this.inviteBtn.object3D.addEventListener(\"interact\", this.onInviteClick);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateChange);\n\n    this.mic.object3D.removeEventListener(\"interact\", this.onMicClick);\n    this.spawn.object3D.removeEventListener(\"interact\", this.onSpawnClick);\n    this.pen.object3D.removeEventListener(\"interact\", this.onPenClick);\n    this.cameraBtn.object3D.removeEventListener(\"interact\", this.onCameraClick);\n    this.flyBtn.object3D.removeEventListener(\"interact\", this.onFlyClick);\n    this.inviteBtn.object3D.removeEventListener(\"interact\", this.onInviteClick);\n  }\n});\n","import nipplejs from \"nipplejs\";\nimport styles from \"./virtual-gamepad-controls.css\";\n\n/**\n * Instantiates 2D virtual gamepads and emits associated events.\n * @namespace user-input\n * @component virtual-gamepad-controls\n */\nAFRAME.registerComponent(\"virtual-gamepad-controls\", {\n  schema: {},\n\n  init() {\n    this.onEnterVr = this.onEnterVr.bind(this);\n    this.onExitVr = this.onExitVr.bind(this);\n    this.onFirstInteraction = this.onFirstInteraction.bind(this);\n    this.onMoveJoystickChanged = this.onMoveJoystickChanged.bind(this);\n    this.onMoveJoystickEnd = this.onMoveJoystickEnd.bind(this);\n    this.onLookJoystickChanged = this.onLookJoystickChanged.bind(this);\n    this.onLookJoystickEnd = this.onLookJoystickEnd.bind(this);\n\n    this.mockJoystickContainer = document.createElement(\"div\");\n    this.mockJoystickContainer.classList.add(styles.mockJoystickContainer);\n    const leftMock = document.createElement(\"div\");\n    leftMock.classList.add(styles.mockJoystick);\n    const leftMockSmall = document.createElement(\"div\");\n    leftMockSmall.classList.add(styles.mockJoystick, styles.inner);\n    leftMock.appendChild(leftMockSmall);\n    this.mockJoystickContainer.appendChild(leftMock);\n    const rightMock = document.createElement(\"div\");\n    rightMock.classList.add(styles.mockJoystick);\n    const rightMockSmall = document.createElement(\"div\");\n    rightMockSmall.classList.add(styles.mockJoystick, styles.inner);\n    rightMock.appendChild(rightMockSmall);\n    this.mockJoystickContainer.appendChild(rightMock);\n    document.body.appendChild(this.mockJoystickContainer);\n\n    // Setup gamepad elements\n    const leftTouchZone = document.createElement(\"div\");\n    leftTouchZone.classList.add(styles.touchZone, styles.left);\n    document.body.appendChild(leftTouchZone);\n\n    this.leftTouchZone = leftTouchZone;\n\n    this.leftStick = nipplejs.create({\n      zone: this.leftTouchZone,\n      color: \"white\",\n      fadeTime: 0\n    });\n\n    this.leftStick.on(\"start\", this.onFirstInteraction);\n    this.leftStick.on(\"move\", this.onMoveJoystickChanged);\n    this.leftStick.on(\"end\", this.onMoveJoystickEnd);\n\n    const rightTouchZone = document.createElement(\"div\");\n    rightTouchZone.classList.add(styles.touchZone, styles.right);\n    document.body.appendChild(rightTouchZone);\n\n    this.rightTouchZone = rightTouchZone;\n\n    this.rightStick = nipplejs.create({\n      zone: this.rightTouchZone,\n      color: \"white\",\n      fadeTime: 0\n    });\n\n    this.rightStick.on(\"start\", this.onFirstInteraction);\n    this.rightStick.on(\"move\", this.onLookJoystickChanged);\n    this.rightStick.on(\"end\", this.onLookJoystickEnd);\n\n    this.inVr = false;\n    this.moving = false;\n    this.rotating = false;\n\n    this.moveEvent = {\n      axis: [0, 0]\n    };\n    this.rotateYEvent = {\n      value: 0\n    };\n    this.rotateXEvent = {\n      value: 0\n    };\n\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.onEnterVr);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.onExitVr);\n  },\n\n  onFirstInteraction() {\n    this.leftStick.off(\"start\", this.onFirstInteraction);\n    this.rightStick.off(\"start\", this.onFirstInteraction);\n    document.body.removeChild(this.mockJoystickContainer);\n  },\n\n  onMoveJoystickChanged(event, joystick) {\n    const angle = joystick.angle.radian;\n    const force = joystick.force < 1 ? joystick.force : 1;\n    const moveStrength = 1.85;\n    const x = Math.cos(angle) * force * moveStrength;\n    const z = Math.sin(angle) * force * moveStrength;\n    this.moving = true;\n    this.moveEvent.axis[0] = x;\n    this.moveEvent.axis[1] = z;\n  },\n\n  onMoveJoystickEnd() {\n    this.moving = false;\n    this.moveEvent.axis[0] = 0;\n    this.moveEvent.axis[1] = 0;\n    this.el.sceneEl.emit(\"move\", this.moveEvent);\n  },\n\n  onLookJoystickChanged(event, joystick) {\n    // Set pitch and yaw angles on right stick move\n    const angle = joystick.angle.radian;\n    const force = joystick.force < 1 ? joystick.force : 1;\n    const turnStrength = 0.5;\n    this.rotating = true;\n    this.rotateYEvent.value = Math.cos(angle) * force * turnStrength;\n    this.rotateXEvent.value = Math.sin(angle) * force * turnStrength;\n  },\n\n  onLookJoystickEnd() {\n    this.rotating = false;\n    this.rotateYEvent.value = 0;\n    this.rotateXEvent.value = 0;\n    this.el.sceneEl.emit(\"rotateY\", this.rotateYEvent);\n    this.el.sceneEl.emit(\"rotateX\", this.rotateXEvent);\n  },\n\n  tick() {\n    if (!this.inVr) {\n      if (this.moving) {\n        this.el.sceneEl.emit(\"move\", this.moveEvent);\n      }\n\n      if (this.rotating) {\n        this.el.sceneEl.emit(\"rotateY\", this.rotateYEvent);\n        this.el.sceneEl.emit(\"rotateX\", this.rotateXEvent);\n      }\n    }\n  },\n\n  onEnterVr() {\n    // Hide the joystick controls\n    this.inVr = true;\n    this.leftTouchZone.style.display = \"none\";\n    this.rightTouchZone.style.display = \"none\";\n  },\n\n  onExitVr() {\n    // Show the joystick controls\n    this.inVr = false;\n    this.leftTouchZone.style.display = \"block\";\n    this.rightTouchZone.style.display = \"block\";\n  },\n\n  remove() {\n    this.el.sceneEl.removeEventListener(\"entervr\", this.onEnterVr);\n    this.el.sceneEl.removeEventListener(\"exitvr\", this.onExitVr);\n    document.body.removeChild(this.mockJoystickContainer);\n    document.body.removeChild(this.leftTouchZone);\n    document.body.removeChild(this.rightTouchZone);\n  }\n});\n","const { Vector3, Quaternion, Matrix4, Euler } = THREE;\n\nimport { AVATAR_TYPES } from \"../utils/avatar-utils\";\n\nfunction quaternionAlmostEquals(epsilon, u, v) {\n  // Note: q and -q represent same rotation\n  return (\n    (Math.abs(u.x - v.x) < epsilon &&\n      Math.abs(u.y - v.y) < epsilon &&\n      Math.abs(u.z - v.z) < epsilon &&\n      Math.abs(u.w - v.w) < epsilon) ||\n    (Math.abs(-u.x - v.x) < epsilon &&\n      Math.abs(-u.y - v.y) < epsilon &&\n      Math.abs(-u.z - v.z) < epsilon &&\n      Math.abs(-u.w - v.w) < epsilon)\n  );\n}\n\n/**\n * Provides access to the end effectors for IK.\n * @namespace avatar\n * @component ik-root\n */\nAFRAME.registerComponent(\"ik-root\", {\n  schema: {\n    camera: { type: \"string\", default: \".camera\" },\n    leftController: { type: \"string\", default: \".left-controller\" },\n    rightController: { type: \"string\", default: \".right-controller\" }\n  },\n  update(oldData) {\n    if (this.data.camera !== oldData.camera) {\n      this.camera = this.el.querySelector(this.data.camera);\n    }\n\n    if (this.data.leftController !== oldData.leftController) {\n      this.leftController = this.el.querySelector(this.data.leftController);\n    }\n\n    if (this.data.rightController !== oldData.rightController) {\n      this.rightController = this.el.querySelector(this.data.rightController);\n    }\n  }\n});\n\nfunction findIKRoot(entity) {\n  while (entity && !(entity.components && entity.components[\"ik-root\"])) {\n    entity = entity.parentNode;\n  }\n  return entity && entity.components[\"ik-root\"];\n}\n\nconst LEGACY_HAND_ROTATIONS = {\n  left: new Matrix4().makeRotationFromEuler(new Euler(-Math.PI / 2, Math.PI / 2, 0)),\n  right: new Matrix4().makeRotationFromEuler(new Euler(Math.PI / 2, Math.PI / 2, 0))\n};\n\nconst HAND_ROTATIONS = {\n  left: new Matrix4().makeRotationFromEuler(new Euler(-Math.PI / 2, Math.PI / 2, 0)),\n  right: new Matrix4().makeRotationFromEuler(new Euler(-Math.PI / 2, -Math.PI / 2, 0))\n};\n\n/**\n * Performs IK on a hip-rooted skeleton to align the hip, head and hands with camera and controller inputs.\n * @namespace avatar\n * @component ik-controller\n */\nAFRAME.registerComponent(\"ik-controller\", {\n  schema: {\n    leftEye: { type: \"string\", default: \"LeftEye\" },\n    rightEye: { type: \"string\", default: \"RightEye\" },\n    head: { type: \"string\", default: \"Head\" },\n    neck: { type: \"string\", default: \"Neck\" },\n    leftHand: { type: \"string\", default: \"LeftHand\" },\n    rightHand: { type: \"string\", default: \"RightHand\" },\n    chest: { type: \"string\", default: \"Spine\" },\n    hips: { type: \"string\", default: \"Hips\" },\n    rotationSpeed: { default: 5 },\n    alwaysUpdate: { type: \"boolean\", default: false }\n  },\n\n  init() {\n    this._runScheduledWork = this._runScheduledWork.bind(this);\n    this._updateIsInView = this._updateIsInView.bind(this);\n\n    this.flipY = new Matrix4().makeRotationY(Math.PI);\n\n    this.cameraForward = new Matrix4();\n    this.headTransform = new Matrix4();\n    this.hipsPosition = new Vector3();\n\n    this.invHipsToHeadVector = new Vector3();\n\n    this.middleEyeMatrix = new Matrix4();\n    this.middleEyePosition = new Vector3();\n    this.invMiddleEyeToHead = new Matrix4();\n\n    this.cameraYRotation = new Euler();\n    this.cameraYQuaternion = new Quaternion();\n\n    this.invHipsQuaternion = new Quaternion();\n    this.headQuaternion = new Quaternion();\n\n    this.rootToChest = new Matrix4();\n    this.invRootToChest = new Matrix4();\n\n    this.ikRoot = findIKRoot(this.el);\n\n    this.isInView = true;\n    this.hasConvergedHips = false;\n    this.lastCameraTransform = new THREE.Matrix4();\n    this.cameraMirrorSystem = this.el.sceneEl.systems[\"camera-mirror\"];\n    this.playerCamera = document.querySelector(\"#player-camera\").getObject3D(\"camera\");\n\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._runScheduledWork, \"ik\");\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._runScheduledWork, \"ik\");\n  },\n\n  update(oldData) {\n    if (this.data.leftEye !== oldData.leftEye) {\n      this.leftEye = this.el.object3D.getObjectByName(this.data.leftEye);\n    }\n\n    if (this.data.rightEye !== oldData.rightEye) {\n      this.rightEye = this.el.object3D.getObjectByName(this.data.rightEye);\n    }\n\n    if (this.data.head !== oldData.head) {\n      this.head = this.el.object3D.getObjectByName(this.data.head);\n    }\n\n    if (this.data.neck !== oldData.neck) {\n      this.neck = this.el.object3D.getObjectByName(this.data.neck);\n    }\n\n    if (this.data.leftHand !== oldData.leftHand) {\n      this.leftHand = this.el.object3D.getObjectByName(this.data.leftHand);\n    }\n\n    if (this.data.rightHand !== oldData.rightHand) {\n      this.rightHand = this.el.object3D.getObjectByName(this.data.rightHand);\n    }\n\n    if (this.data.chest !== oldData.chest) {\n      this.chest = this.el.object3D.getObjectByName(this.data.chest);\n    }\n\n    if (this.data.hips !== oldData.hips) {\n      this.hips = this.el.object3D.getObjectByName(this.data.hips);\n    }\n\n    // Set middleEye's position to be right in the middle of the left and right eyes.\n    this.middleEyePosition.addVectors(this.leftEye.position, this.rightEye.position);\n    this.middleEyePosition.divideScalar(2);\n    this.middleEyeMatrix.makeTranslation(this.middleEyePosition.x, this.middleEyePosition.y, this.middleEyePosition.z);\n    this.invMiddleEyeToHead = this.middleEyeMatrix.getInverse(this.middleEyeMatrix);\n\n    this.invHipsToHeadVector\n      .addVectors(this.chest.position, this.neck.position)\n      .add(this.head.position)\n      .negate();\n  },\n\n  tick(time, dt) {\n    if (!this.ikRoot) {\n      return;\n    }\n\n    const root = this.ikRoot.el.object3D;\n    const { camera, leftController, rightController } = this.ikRoot;\n\n    camera.object3D.updateMatrix();\n\n    const hasNewCameraTransform = !this.lastCameraTransform.equals(camera.object3D.matrix);\n\n    // Optimization: if the camera hasn't moved and the hips converged to the target orientation on a previous frame,\n    // then the avatar does not need any IK this frame.\n    //\n    // Update in-view avatars every frame, and update out-of-view avatars via frame scheduler.\n    if (\n      this.data.alwaysUpdate ||\n      this.forceIkUpdate ||\n      (this.isInView && (hasNewCameraTransform || !this.hasConvergedHips))\n    ) {\n      if (hasNewCameraTransform) {\n        this.lastCameraTransform.copy(camera.object3D.matrix);\n      }\n\n      const {\n        hips,\n        head,\n        neck,\n        chest,\n        cameraForward,\n        headTransform,\n        invMiddleEyeToHead,\n        invHipsToHeadVector,\n        flipY,\n        cameraYRotation,\n        cameraYQuaternion,\n        invHipsQuaternion,\n        rootToChest,\n        invRootToChest\n      } = this;\n\n      // Camera faces the -Z direction. Flip it along the Y axis so that it is +Z.\n      cameraForward.multiplyMatrices(camera.object3D.matrix, flipY);\n\n      // Compute the head position such that the hmd position would be in line with the middleEye\n      headTransform.multiplyMatrices(cameraForward, invMiddleEyeToHead);\n\n      // Then position the hips such that the head is aligned with headTransform\n      // (which positions middleEye in line with the hmd)\n      hips.position.setFromMatrixPosition(headTransform).add(invHipsToHeadVector);\n\n      // Animate the hip rotation to follow the Y rotation of the camera with some damping.\n      cameraYRotation.setFromRotationMatrix(cameraForward, \"YXZ\");\n      cameraYRotation.x = 0;\n      cameraYRotation.z = 0;\n      cameraYQuaternion.setFromEuler(cameraYRotation);\n      Quaternion.slerp(hips.quaternion, cameraYQuaternion, hips.quaternion, (this.data.rotationSpeed * dt) / 1000);\n\n      this.hasConvergedHips = quaternionAlmostEquals(0.0001, cameraYQuaternion, hips.quaternion);\n\n      // Take the head orientation computed from the hmd, remove the Y rotation already applied to it by the hips,\n      // and apply it to the head\n      invHipsQuaternion.copy(hips.quaternion).inverse();\n      head.quaternion.setFromRotationMatrix(headTransform).premultiply(invHipsQuaternion);\n\n      hips.updateMatrix();\n      rootToChest.multiplyMatrices(hips.matrix, chest.matrix);\n      invRootToChest.getInverse(rootToChest);\n\n      root.matrixNeedsUpdate = true;\n      neck.matrixNeedsUpdate = true;\n      head.matrixNeedsUpdate = true;\n      chest.matrixNeedsUpdate = true;\n    }\n\n    const { leftHand, rightHand } = this;\n\n    const handRotations =\n      this.ikRoot.el.components[\"player-info\"].data.avatarType === AVATAR_TYPES.LEGACY\n        ? LEGACY_HAND_ROTATIONS\n        : HAND_ROTATIONS;\n    if (leftHand) this.updateHand(handRotations.left, leftHand, leftController.object3D, true, this.isInView);\n    if (rightHand) this.updateHand(handRotations.right, rightHand, rightController.object3D, false, this.isInView);\n    this.forceIkUpdate = false;\n  },\n\n  updateHand(handRotation, handObject3D, controllerObject3D, isLeft, isInView) {\n    const handMatrix = handObject3D.matrix;\n\n    // TODO: This coupling with personal-space-invader is not ideal.\n    // There should be some intermediate thing managing multiple opinions about object visibility\n    const spaceInvader = handObject3D.el.components[\"personal-space-invader\"];\n    const handHiddenByPersonalSpace = spaceInvader && spaceInvader.invading;\n\n    handObject3D.visible = !handHiddenByPersonalSpace && controllerObject3D.visible;\n\n    // Optimization: skip IK update if not in view and not forced by frame scheduler\n    if (controllerObject3D.visible && (isInView || this.forceIkUpdate || this.data.alwaysUpdate)) {\n      handMatrix.multiplyMatrices(this.invRootToChest, controllerObject3D.matrix);\n\n      handMatrix.multiply(handRotation);\n\n      handObject3D.position.setFromMatrixPosition(handMatrix);\n      handObject3D.rotation.setFromRotationMatrix(handMatrix);\n      handObject3D.matrixNeedsUpdate = true;\n    }\n  },\n\n  _runScheduledWork() {\n    // Every scheduled run, we force an IK update on the next frame (so at most one avatar with forced IK per frame)\n    // and also update the this.isInView bit on the avatar which is used to determine if an IK update should be run\n    // every frame.\n    this.forceIkUpdate = true;\n\n    this._updateIsInView();\n  },\n\n  _updateIsInView: (function() {\n    const frustum = new THREE.Frustum();\n    const frustumMatrix = new THREE.Matrix4();\n    const cameraWorld = new THREE.Vector3();\n    const isInViewOfCamera = (screenCamera, pos) => {\n      frustumMatrix.multiplyMatrices(screenCamera.projectionMatrix, screenCamera.matrixWorldInverse);\n      frustum.setFromMatrix(frustumMatrix);\n      return frustum.containsPoint(pos);\n    };\n\n    return function() {\n      // Take into account the mirror camera if it is enabled.\n      const mirrorCamera = this.cameraMirrorSystem.mirrorCamera;\n\n      const camera = this.ikRoot.camera.object3D;\n      camera.getWorldPosition(cameraWorld);\n\n      this.isInView =\n        isInViewOfCamera(this.playerCamera, cameraWorld) ||\n        (mirrorCamera && isInViewOfCamera(mirrorCamera, cameraWorld));\n    };\n  })()\n});\n","import { paths } from \"../systems/userinput/paths\";\n\nconst POSES = {\n  open: \"open\",\n  point: \"point\",\n  fist: \"fist\",\n  hold: \"hold\",\n  thumbUp: \"thumbUp\",\n  thumbDown: \"thumbDown\",\n  indexDown: \"indexDown\",\n  pinch: \"pinch\",\n  mrpDown: \"mrpDown\"\n};\n\n/**\n * Emits events indicating that avatar hands should be posed differently.\n * @namespace user-input\n * @component hand-controls2\n */\nAFRAME.registerComponent(\"hand-controls2\", {\n  schema: { default: \"left\" },\n\n  init() {\n    this.pose = POSES.open;\n  },\n\n  poseForFingers(thumb, index, middleRingPinky) {\n    if (!thumb && !index && !middleRingPinky) {\n      return POSES.open;\n    } else if (thumb && index && middleRingPinky) {\n      return POSES.fist;\n    } else if (!thumb && index && middleRingPinky) {\n      return POSES.thumbUp;\n    } else if (!thumb && !index && middleRingPinky) {\n      return POSES.mrpDown;\n    } else if (!thumb && index && !middleRingPinky) {\n      return POSES.indexDown;\n    } else if (thumb && !index && !middleRingPinky) {\n      return POSES.thumbDown;\n    } else if (thumb && index && !middleRingPinky) {\n      return POSES.pinch;\n    } else if (thumb && !index && middleRingPinky) {\n      return POSES.point;\n    }\n\n    console.warn(`Did not find matching pose for thumb ${thumb}, index ${index}, middleRingPinky ${middleRingPinky}`);\n    return POSES.open;\n  },\n\n  tick() {\n    const hand = this.data;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const subpath = hand === \"left\" ? paths.actions.leftHand : paths.actions.rightHand;\n    const thumb = userinput.get(subpath.thumb);\n    const index = userinput.get(subpath.index);\n    const middleRingPinky = userinput.get(subpath.middleRingPinky);\n    const pose = this.poseForFingers(thumb, index, middleRingPinky);\n    if (pose !== this.pose) {\n      this.el.emit(\"hand-pose\", { previous: this.pose, current: pose });\n      this.pose = pose;\n    }\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\nimport { SOUND_SNAP_ROTATE } from \"../systems/sound-effects-system\";\nconst CLAMP_VELOCITY = 0.01;\nconst MAX_DELTA = 0.2;\nconst EPS = 10e-6;\nconst MAX_WARNINGS = 10;\n\nconst NAV_ZONE = \"character\";\n\n/**\n * Avatar movement controller that listens to move, rotate and teleportation events and moves the avatar accordingly.\n * The controller accounts for playspace offset and orientation and depends on the nav mesh system for translation.\n * @namespace avatar\n * @component character-controller\n */\nAFRAME.registerComponent(\"character-controller\", {\n  schema: {\n    groundAcc: { default: 5.5 },\n    easing: { default: 10 },\n    pivot: { type: \"selector\" },\n    snapRotationDegrees: { default: THREE.Math.DEG2RAD * 45 },\n    rotationSpeed: { default: -3 },\n    fly: { default: false }\n  },\n\n  init: function() {\n    this.navGroup = null;\n    this.navNode = null;\n    this.velocity = new THREE.Vector3(0, 0, 0);\n    this.accelerationInput = new THREE.Vector3(0, 0, 0);\n    this.pendingSnapRotationMatrix = new THREE.Matrix4();\n    this.angularVelocity = 0; // Scalar value because we only allow rotation around Y\n    this._withinWarningLimit = true;\n    this._warningCount = 0;\n    this.setAccelerationInput = this.setAccelerationInput.bind(this);\n    this.snapRotateLeft = this.snapRotateLeft.bind(this);\n    this.snapRotateRight = this.snapRotateRight.bind(this);\n    this.setAngularVelocity = this.setAngularVelocity.bind(this);\n    this.el.sceneEl.addEventListener(\"nav-mesh-loaded\", () => {\n      this.navGroup = null;\n      this.navNode = null;\n    });\n  },\n\n  update: function() {\n    this.leftRotationMatrix = new THREE.Matrix4().makeRotationY(this.data.snapRotationDegrees);\n    this.rightRotationMatrix = new THREE.Matrix4().makeRotationY(-this.data.snapRotationDegrees);\n  },\n\n  play: function() {\n    const eventSrc = this.el.sceneEl;\n    eventSrc.addEventListener(\"move\", this.setAccelerationInput);\n    eventSrc.addEventListener(\"rotateY\", this.setAngularVelocity);\n  },\n\n  pause: function() {\n    const eventSrc = this.el.sceneEl;\n    eventSrc.removeEventListener(\"move\", this.setAccelerationInput);\n    eventSrc.removeEventListener(\"rotateY\", this.setAngularVelocity);\n    this.reset();\n  },\n\n  reset() {\n    this.accelerationInput.set(0, 0, 0);\n    this.velocity.set(0, 0, 0);\n    this.angularVelocity = 0;\n    this.pendingSnapRotationMatrix.identity();\n  },\n\n  setAccelerationInput: function(event) {\n    const axes = event.detail.axis;\n    this.accelerationInput.set(axes[0], 0, axes[1]);\n  },\n\n  setAngularVelocity: function(event) {\n    this.angularVelocity = event.detail.value;\n  },\n\n  snapRotateLeft: function() {\n    this.pendingSnapRotationMatrix.copy(this.leftRotationMatrix);\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SNAP_ROTATE);\n  },\n\n  snapRotateRight: function() {\n    this.pendingSnapRotationMatrix.copy(this.rightRotationMatrix);\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SNAP_ROTATE);\n  },\n\n  // We assume the rig is at the root, and its local position === its world position.\n  teleportTo: (function() {\n    const rig = new THREE.Vector3();\n    const head = new THREE.Vector3();\n    const deltaFromHeadToTargetForHead = new THREE.Vector3();\n    const targetForHead = new THREE.Vector3();\n    const targetForRig = new THREE.Vector3();\n    return function teleportTo(targetWorldPosition) {\n      const o = this.el.object3D;\n      o.getWorldPosition(rig);\n      this.data.pivot.object3D.getWorldPosition(head);\n      targetForHead.copy(targetWorldPosition);\n      targetForHead.y += this.data.pivot.object3D.position.y;\n      deltaFromHeadToTargetForHead.copy(targetForHead).sub(head);\n      targetForRig.copy(rig).add(deltaFromHeadToTargetForHead);\n\n      const pathfinder = this.el.sceneEl.systems.nav.pathfinder;\n      this.navGroup = pathfinder.getGroup(NAV_ZONE, targetForRig, true, true);\n      this.navNode = null;\n      this._setNavNode(targetForRig);\n      pathfinder.clampStep(rig, targetForRig, this.navNode, NAV_ZONE, this.navGroup, o.position);\n      o.matrixNeedsUpdate = true;\n    };\n  })(),\n\n  tick: (function() {\n    const move = new THREE.Matrix4();\n    const trans = new THREE.Matrix4();\n    const transInv = new THREE.Matrix4();\n    const pivotPos = new THREE.Vector3();\n    const rotationAxis = new THREE.Vector3(0, 1, 0);\n    const yawMatrix = new THREE.Matrix4();\n    const rotationMatrix = new THREE.Matrix4();\n    const rotationInvMatrix = new THREE.Matrix4();\n    const pivotRotationMatrix = new THREE.Matrix4();\n    const pivotRotationInvMatrix = new THREE.Matrix4();\n    const startPos = new THREE.Vector3();\n    const startScale = new THREE.Vector3();\n\n    return function(t, dt) {\n      if (!this.el.sceneEl.is(\"entered\")) return;\n      const deltaSeconds = dt / 1000;\n      const root = this.el.object3D;\n      const pivot = this.data.pivot.object3D;\n      const distance = this.data.groundAcc * deltaSeconds;\n\n      const userinput = AFRAME.scenes[0].systems.userinput;\n      const userinputAngularVelocity = userinput.get(paths.actions.angularVelocity);\n      if (userinputAngularVelocity !== null && userinputAngularVelocity !== undefined) {\n        this.angularVelocity = userinputAngularVelocity;\n      }\n      const rotationDelta = this.data.rotationSpeed * this.angularVelocity * deltaSeconds;\n\n      pivot.updateMatrices();\n      root.updateMatrices();\n\n      startScale.copy(root.scale);\n      startPos.copy(root.position);\n\n      if (userinput.get(paths.actions.snapRotateLeft)) {\n        this.snapRotateLeft();\n      }\n      if (userinput.get(paths.actions.snapRotateRight)) {\n        this.snapRotateRight();\n      }\n      const acc = userinput.get(paths.actions.characterAcceleration);\n      if (acc) {\n        this.accelerationInput.set(\n          this.accelerationInput.x + acc[0],\n          this.accelerationInput.y + 0,\n          this.accelerationInput.z + acc[1]\n        );\n      }\n\n      pivotPos.copy(pivot.position);\n      pivotPos.applyMatrix4(root.matrix);\n      trans.setPosition(pivotPos);\n      transInv.makeTranslation(-pivotPos.x, -pivotPos.y, -pivotPos.z);\n      rotationMatrix.makeRotationAxis(rotationAxis, root.rotation.y);\n      rotationInvMatrix.makeRotationAxis(rotationAxis, -root.rotation.y);\n      pivotRotationMatrix.makeRotationAxis(rotationAxis, pivot.rotation.y);\n      pivotRotationInvMatrix.makeRotationAxis(rotationAxis, -pivot.rotation.y);\n      this.updateVelocity(deltaSeconds, pivot);\n      this.accelerationInput.set(0, 0, 0);\n\n      const boost = userinput.get(paths.actions.boost) ? 2 : 1;\n      move.makeTranslation(\n        this.velocity.x * distance * boost,\n        this.velocity.y * distance * boost,\n        this.velocity.z * distance * boost\n      );\n      yawMatrix.makeRotationAxis(rotationAxis, rotationDelta);\n\n      // Translate to middle of playspace (player rig)\n      root.matrix.premultiply(transInv);\n      // Zero playspace (player rig) rotation\n      root.matrix.premultiply(rotationInvMatrix);\n      // Zero pivot (camera/head) rotation\n      root.matrix.premultiply(pivotRotationInvMatrix);\n      // Apply joystick translation\n      root.matrix.premultiply(move);\n      // Apply joystick yaw rotation\n      root.matrix.premultiply(yawMatrix);\n      // Apply snap rotation if necessary\n      root.matrix.premultiply(this.pendingSnapRotationMatrix);\n      // Reapply pivot (camera/head) rotation\n      root.matrix.premultiply(pivotRotationMatrix);\n      // Reapply playspace (player rig) rotation\n      root.matrix.premultiply(rotationMatrix);\n      // Reapply playspace (player rig) translation\n      root.matrix.premultiply(trans);\n      // update pos/rot/scale\n      root.matrix.decompose(root.position, root.quaternion, root.scale);\n\n      // TODO: the above matrix trnsfomraitons introduce some floating point errors in scale, this reverts them to\n      // avoid spamming network with fake scale updates\n      root.scale.copy(startScale);\n\n      this.pendingSnapRotationMatrix.identity(); // Revert to identity\n\n      if (this.velocity.lengthSq() > EPS && !this.data.fly) {\n        this.setPositionOnNavMesh(startPos, root.position, root);\n      }\n\n      root.matrixNeedsUpdate = true;\n    };\n  })(),\n\n  _warnWithWarningLimit: function(msg) {\n    if (!this._withinWarningLimit) return;\n    this._warningCount++;\n    if (this._warningCount > MAX_WARNINGS) {\n      this._withinWarningLimit = false;\n      msg = \"Warning count exceeded. Will not log further warnings\";\n    }\n    console.warn(\"character-controller\", msg);\n  },\n\n  _setNavNode: function(pos) {\n    if (this.navNode !== null) return;\n    const { pathfinder } = this.el.sceneEl.systems.nav;\n    this.navNode =\n      pathfinder.getClosestNode(pos, NAV_ZONE, this.navGroup, true) ||\n      pathfinder.getClosestNode(pos, NAV_ZONE, this.navGroup);\n  },\n\n  setPositionOnNavMesh: function(start, end, object3D) {\n    const { pathfinder } = this.el.sceneEl.systems.nav;\n    if (!(NAV_ZONE in pathfinder.zones)) return;\n    if (this.navGroup === null) {\n      this.navGroup = pathfinder.getGroup(NAV_ZONE, end, true, true);\n    }\n    this._setNavNode(end);\n    this.navNode = pathfinder.clampStep(start, end, this.navNode, NAV_ZONE, this.navGroup, object3D.position);\n    object3D.matrixNeedsUpdate = true;\n  },\n\n  updateVelocity: function(dt, pivot) {\n    const data = this.data;\n    const velocity = this.velocity;\n\n    // If FPS too low, reset velocity.\n    if (dt > MAX_DELTA) {\n      velocity.x = 0;\n      velocity.y = 0;\n      velocity.z = 0;\n      return;\n    }\n\n    // Decay velocity.\n    if (velocity.x !== 0) {\n      velocity.x -= velocity.x * data.easing * dt;\n    }\n    if (velocity.y !== 0) {\n      velocity.y -= velocity.y * data.easing * dt;\n    }\n    if (velocity.z !== 0) {\n      velocity.z -= velocity.z * data.easing * dt;\n    }\n\n    const dvx = data.groundAcc * dt * this.accelerationInput.x;\n    const dvz = data.groundAcc * dt * -this.accelerationInput.z;\n    velocity.x += dvx;\n\n    if (this.data.fly) {\n      velocity.y += dvz * -Math.sin(pivot.rotation.x);\n      velocity.z += dvz * Math.cos(pivot.rotation.x);\n    } else {\n      velocity.z += dvz;\n    }\n\n    const decay = 0.7;\n    this.accelerationInput.x = this.accelerationInput.x * decay;\n    this.accelerationInput.z = this.accelerationInput.z * decay;\n\n    if (Math.abs(velocity.x) < CLAMP_VELOCITY) {\n      velocity.x = 0;\n    }\n    if (Math.abs(velocity.y) < CLAMP_VELOCITY) {\n      velocity.y = 0;\n    }\n    if (Math.abs(velocity.z) < CLAMP_VELOCITY) {\n      velocity.z = 0;\n    }\n  }\n});\n","import { injectCustomShaderChunks } from \"../utils/media-utils\";\nimport { AVATAR_TYPES } from \"../utils/avatar-utils\";\nimport { registerComponentInstance } from \"../utils/component-utils\";\nimport { deregisterComponentInstance } from \"../utils/component-utils\";\n\nfunction ensureAvatarNodes(json) {\n  const { nodes } = json;\n  if (!nodes.some(node => node.name === \"Head\")) {\n    // If the avatar model doesn't have a Head node. The user has probably chosen a custom GLB.\n    // So, we need to construct a suitable hierarchy for avatar functionality to work.\n    // We re-parent the original root node to the Head node and set the scene root to a new AvatarRoot.\n\n    // Note: We assume that the first node in the primary scene is the one we care about.\n    const originalRoot = json.scenes[json.scene].nodes[0];\n    nodes.push({ name: \"LeftEye\", extensions: { MOZ_hubs_components: {} } });\n    nodes.push({ name: \"RightEye\", extensions: { MOZ_hubs_components: {} } });\n    nodes.push({\n      name: \"Head\",\n      children: [originalRoot, nodes.length - 1, nodes.length - 2],\n      extensions: { MOZ_hubs_components: { \"scale-audio-feedback\": \"\" } }\n    });\n    nodes.push({ name: \"Neck\", children: [nodes.length - 1] });\n    nodes.push({ name: \"Spine\", children: [nodes.length - 1] });\n    nodes.push({ name: \"Hips\", children: [nodes.length - 1] });\n    nodes.push({ name: \"AvatarRoot\", children: [nodes.length - 1] });\n    json.scenes[json.scene].nodes[0] = nodes.length - 1;\n  }\n  return json;\n}\n\n/**\n * Sets player info state, including avatar choice and display name.\n * @namespace avatar\n * @component player-info\n */\nAFRAME.registerComponent(\"player-info\", {\n  schema: {\n    avatarSrc: { type: \"string\" },\n    avatarType: { type: \"string\", default: AVATAR_TYPES.LEGACY }\n  },\n  init() {\n    this.displayName = null;\n    this.communityIdentifier = null;\n    this.isModerator = false;\n    this.isRecording = false;\n    this.applyProperties = this.applyProperties.bind(this);\n    this.updateDisplayName = this.updateDisplayName.bind(this);\n    this.applyDisplayName = this.applyDisplayName.bind(this);\n    this.handleModelError = this.handleModelError.bind(this);\n\n    this.isLocalPlayerInfo = this.el.id === \"player-rig\";\n    this.playerSessionId = null;\n\n    if (!this.isLocalPlayerInfo) {\n      NAF.utils.getNetworkedEntity(this.el).then(networkedEntity => {\n        this.playerSessionId = NAF.utils.getCreator(networkedEntity);\n        const playerPresence = window.APP.hubChannel.presence.state[this.playerSessionId];\n        if (playerPresence) {\n          this.updateDisplayNameFromPresenceMeta(playerPresence.metas[0]);\n        }\n      });\n    }\n    registerComponentInstance(this, \"player-info\");\n  },\n  remove() {\n    deregisterComponentInstance(this, \"player-info\");\n  },\n  play() {\n    this.el.addEventListener(\"model-loaded\", this.applyProperties);\n    this.el.sceneEl.addEventListener(\"presence_updated\", this.updateDisplayName);\n    if (this.isLocalPlayerInfo) {\n      this.el.querySelector(\".model\").addEventListener(\"model-error\", this.handleModelError);\n    }\n  },\n  pause() {\n    this.el.removeEventListener(\"model-loaded\", this.applyProperties);\n    this.el.sceneEl.removeEventListener(\"presence_updated\", this.updateDisplayName);\n    if (this.isLocalPlayerInfo) {\n      this.el.querySelector(\".model\").removeEventListener(\"model-error\", this.handleModelError);\n    }\n  },\n  update() {\n    this.applyProperties();\n  },\n  updateDisplayName(e) {\n    if (!this.playerSessionId && this.isLocalPlayerInfo) {\n      this.playerSessionId = NAF.clientId;\n    }\n    if (!this.playerSessionId) return;\n    if (this.playerSessionId !== e.detail.sessionId) return;\n\n    this.updateDisplayNameFromPresenceMeta(e.detail);\n  },\n  updateDisplayNameFromPresenceMeta(presenceMeta) {\n    this.displayName = presenceMeta.profile.displayName;\n    this.communityIdentifier = presenceMeta.profile.communityIdentifier;\n    this.isRecording = !!(presenceMeta.streaming || presenceMeta.recording);\n    this.isModerator = !!(presenceMeta.roles && presenceMeta.roles.moderator);\n    this.applyDisplayName();\n  },\n  applyDisplayName() {\n    const nametagEl = this.el.querySelector(\".nametag\");\n    if (this.displayName && nametagEl) {\n      nametagEl.setAttribute(\"text\", { value: this.displayName });\n    }\n    const communityIdentifierEl = this.el.querySelector(\".communityIdentifier\");\n    if (communityIdentifierEl) {\n      if (this.communityIdentifier) {\n        communityIdentifierEl.setAttribute(\"text\", { value: this.communityIdentifier });\n      }\n    }\n    const recordingBadgeEl = this.el.querySelector(\".recordingBadge\");\n    if (recordingBadgeEl) {\n      recordingBadgeEl.object3D.visible = this.isRecording;\n    }\n\n    const modBadgeEl = this.el.querySelector(\".modBadge\");\n    if (modBadgeEl) {\n      modBadgeEl.object3D.visible = !this.isRecording && this.isModerator;\n    }\n  },\n  applyProperties() {\n    this.applyDisplayName();\n\n    const modelEl = this.el.querySelector(\".model\");\n    if (this.data.avatarSrc && modelEl) {\n      modelEl.components[\"gltf-model-plus\"].jsonPreprocessor = ensureAvatarNodes;\n      modelEl.setAttribute(\"gltf-model-plus\", \"src\", this.data.avatarSrc);\n      this.el.sceneEl.systems[\"camera-tools\"].avatarUpdated();\n    }\n\n    const uniforms = injectCustomShaderChunks(this.el.object3D);\n    this.el.querySelectorAll(\"[hover-visuals]\").forEach(el => {\n      el.components[\"hover-visuals\"].uniforms = uniforms;\n    });\n  },\n  handleModelError() {\n    window.APP.store.resetToRandomLegacyAvatar();\n  }\n});\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\n\nconst POSES = {\n  open: \"allOpen\",\n  thumbDown: \"thumbDown\",\n  indexDown: \"indexDown\",\n  mrpDown: \"mrpDown\",\n  thumbUp: \"thumbsUp\",\n  point: \"point\",\n  fist: \"allGrip\",\n  pinch: \"pinch\"\n};\n\nconst NETWORK_POSES = [\"allOpen\", \"thumbDown\", \"indexDown\", \"mrpDown\", \"thumbsUp\", \"point\", \"allGrip\", \"pinch\"];\n\n/**\n * Animates between poses based on networked pose state using an animation mixer.\n * @namespace avatar\n * @component hand-pose\n */\nAFRAME.registerComponent(\"hand-pose\", {\n  multiple: true,\n\n  init() {\n    this.pose = 0;\n    this.animatePose = this.animatePose.bind(this);\n    const mixerEl = findAncestorWithComponent(this.el, \"animation-mixer\");\n    const suffix = this.id == \"left\" ? \"_L\" : \"_R\";\n    this.mixer = mixerEl && mixerEl.components[\"animation-mixer\"].mixer;\n    if (!this.mixer || !this.mixer.clipAction(POSES.open + suffix)) {\n      console.warn(\"Avatar does not an 'allOpen' animation, disabling hand animations\");\n      this.el.removeAttribute(\"hand-pose\");\n      return;\n    }\n    this.from = this.to = this.mixer.clipAction(POSES.open + suffix);\n    this.from.play();\n    this.networkField = `${this.id}_hand_pose`;\n\n    const getNetworkedAvatar = el => {\n      if (!el) {\n        window.setTimeout(() => {\n          getNetworkedAvatar(this.el);\n        }, 1000);\n        return;\n      }\n      const networkedAvatar = el.components && el.components[\"networked-avatar\"];\n      if (networkedAvatar) {\n        return networkedAvatar;\n      }\n      return getNetworkedAvatar(el.parentEl);\n    };\n    this.networkedAvatar = getNetworkedAvatar(this.el);\n  },\n\n  tick() {\n    if (\n      !this.networkedAvatar ||\n      !this.networkedAvatar.data ||\n      this.networkedAvatar.data[this.networkField] === this.pose\n    ) {\n      return;\n    }\n\n    this.animatePose(NETWORK_POSES[this.pose], NETWORK_POSES[this.networkedAvatar.data[this.networkField]]);\n    this.pose = this.networkedAvatar.data[this.networkField];\n  },\n\n  animatePose(prev, curr) {\n    this.from.stop();\n    this.to.stop();\n\n    const duration = 0.065;\n    const suffix = this.id == \"left\" ? \"_L\" : \"_R\";\n    this.from = this.mixer.clipAction(prev + suffix);\n    this.to = this.mixer.clipAction(curr + suffix);\n\n    this.from.fadeOut(duration);\n    this.to.fadeIn(duration);\n    this.to.play();\n    this.from.play();\n\n    this.mixer.update(0.001);\n  }\n});\n\n/**\n * Sets the networked hand pose state based on hand-pose events.\n * @namespace avatar\n * @component hand-pose-controller\n */\nAFRAME.registerComponent(\"hand-pose-controller\", {\n  multiple: true,\n  schema: {\n    eventSrc: { type: \"selector\" },\n    networkedAvatar: { type: \"selector\" }\n  },\n  init: function() {\n    this.setHandPose = this.setHandPose.bind(this);\n  },\n\n  play: function() {\n    this.data.eventSrc.addEventListener(\"hand-pose\", this.setHandPose);\n  },\n\n  pause: function() {\n    this.data.eventSrc.removeEventListener(\"hand-pose\", this.setHandPose);\n  },\n\n  setHandPose: function(evt) {\n    this.data.networkedAvatar.setAttribute(\n      \"networked-avatar\",\n      `${this.id}_hand_pose`,\n      NETWORK_POSES.indexOf(POSES[evt.detail.current])\n    );\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\nimport { SOUND_FREEZE, SOUND_THAW } from \"../systems/sound-effects-system\";\n\n/**\n * Toggles freezing of network traffic on the given event.\n * @namespace network\n * @component freeze-controller\n */\nAFRAME.registerComponent(\"freeze-controller\", {\n  schema: {\n    toggleEvent: { type: \"string\" }\n  },\n\n  init: function() {\n    this.onToggle = this.onToggle.bind(this);\n  },\n\n  play: function() {\n    this.el.addEventListener(this.data.toggleEvent, this.onToggle);\n  },\n\n  pause: function() {\n    this.el.removeEventListener(this.data.toggleEvent, this.onToggle);\n  },\n\n  tick: function() {\n    const scene = this.el.sceneEl;\n    if (!scene.is(\"entered\")) return;\n\n    const userinput = scene.systems.userinput;\n    const ensureFrozen = userinput.get(paths.actions.ensureFrozen);\n    const thaw = userinput.get(paths.actions.thaw);\n    const toggleFreeze = userinput.get(paths.actions.toggleFreeze);\n\n    const toggleFreezeDueToInput =\n      (this.el.is(\"frozen\") && thaw) || (!this.el.is(\"frozen\") && ensureFrozen) || toggleFreeze;\n\n    if (toggleFreezeDueToInput) {\n      this.onToggle();\n    }\n  },\n\n  onToggle: function() {\n    window.APP.store.update({ activity: { hasFoundFreeze: true } });\n    if (!NAF.connection.adapter) return;\n    NAF.connection.adapter.toggleFreeze();\n    if (NAF.connection.adapter.frozen) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_FREEZE);\n      this.el.addState(\"frozen\");\n    } else {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_THAW);\n      this.el.removeState(\"frozen\");\n    }\n  }\n});\n","import { getLastWorldPosition } from \"../utils/three-utils\";\n\nconst isMobile = AFRAME.utils.device.isMobile();\n\n/**\n * Toggles the visibility of this entity when the scene is frozen.\n * @namespace ui\n * @component visibility-while-frozen\n */\nAFRAME.registerComponent(\"visibility-while-frozen\", {\n  schema: {\n    withinDistance: { type: \"number\" },\n    visible: { type: \"boolean\", default: true },\n    requireHoverOnNonMobile: { type: \"boolean\", default: true }\n  },\n\n  init() {\n    this.updateVisibility = this.updateVisibility.bind(this);\n    this.camWorldPos = new THREE.Vector3();\n    this.objWorldPos = new THREE.Vector3();\n    this.cam = this.el.sceneEl.camera.el.object3D;\n\n    let hoverableSearch = this.el;\n\n    while (hoverableSearch !== document) {\n      if (hoverableSearch.getAttribute(\"is-remote-hover-target\") !== null) {\n        this.hoverable = hoverableSearch;\n        break;\n      }\n\n      hoverableSearch = hoverableSearch.parentNode;\n    }\n    if (!this.hoverable && this.data.requireHoverOnNonMobile) {\n      console.error(\"Didn't find a remote hover target.\");\n    }\n\n    this.onStateChange = evt => {\n      if (!evt.detail === \"frozen\") return;\n      this.updateVisibility();\n    };\n    this.updateVisibility();\n  },\n\n  tick() {\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n    const isVisible = this.el.object3D.visible;\n    const shouldNotBeVisible = isFrozen === !this.data.visible;\n    if (!isVisible && shouldNotBeVisible) return;\n\n    this.updateVisibility();\n  },\n\n  updateVisibility() {\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n\n    let isWithinDistance = true;\n    const isVisible = this.el.object3D.visible;\n\n    if (this.data.withinDistance) {\n      if (!isVisible) {\n        // Edge case, if the object is not visible force a matrix update\n        // since the main matrix update loop will not do it.\n        this.el.object3D.updateMatrices(true, true);\n      }\n\n      getLastWorldPosition(this.cam, this.camWorldPos);\n      this.objWorldPos.copy(this.el.object3D.position);\n      this.el.object3D.localToWorld(this.objWorldPos);\n\n      isWithinDistance =\n        this.camWorldPos.distanceToSquared(this.objWorldPos) < this.data.withinDistance * this.data.withinDistance;\n    }\n\n    const isTransforming = AFRAME.scenes[0].systems[\"transform-selected-object\"].transforming;\n\n    let shouldBeVisible =\n      ((isFrozen && this.data.visible) || (!isFrozen && !this.data.visible)) && isWithinDistance && !isTransforming;\n\n    if (this.data.requireHoverOnNonMobile && !isMobile) {\n      shouldBeVisible =\n        shouldBeVisible &&\n        ((this.hoverable && AFRAME.scenes[0].systems.interaction.state.rightRemote.hovered === this.hoverable) ||\n          isVisible);\n    }\n\n    if (isVisible !== shouldBeVisible) {\n      this.el.setAttribute(\"visible\", shouldBeVisible);\n    }\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateChange);\n\n    if (this.hoverable) {\n      this.hoverable.object3D.addEventListener(\"hovered\", this.updateVisibility);\n      this.hoverable.object3D.addEventListener(\"unhovered\", this.updateVisibility);\n    }\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateChange);\n\n    if (this.hoverable) {\n      this.hoverable.object3D.addEventListener(\"hovered\", this.updateVisibility);\n      this.hoverable.object3D.addEventListener(\"unhovered\", this.updateVisibility);\n    }\n  }\n});\n\n/**\n * Toggles the interactivity of a UI entity while the scene is frozen.\n * @namespace ui\n * @component ui-class-while-frozen\n */\nAFRAME.registerComponent(\"ui-class-while-frozen\", {\n  init() {\n    this.onStateChange = evt => {\n      if (!evt.detail === \"frozen\") return;\n      this.el.classList.toggle(\"ui\", this.el.sceneEl.is(\"frozen\"));\n    };\n    this.el.classList.toggle(\"ui\", this.el.sceneEl.is(\"frozen\"));\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateChange);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateChange);\n  }\n});\n","import \"./stats-plus.css\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\n// Adapted from https://github.com/aframevr/aframe/blob/master/src/components/scene/stats.js\n\nfunction createStats(scene) {\n  const threeStats = new window.threeStats(scene.renderer);\n  const aframeStats = new window.aframeStats(scene);\n  const plugins = scene.isMobile ? [] : [threeStats, aframeStats];\n  return new window.rStats({\n    css: [], // Our stylesheet is injected from AFrame.\n    values: {\n      fps: { caption: \"fps\", below: 30 },\n      batchdraws: { caption: \"Draws\" },\n      batchinstances: { caption: \"Instances\" },\n      batchatlassize: { caption: \"Atlas Size\" }\n    },\n    groups: [\n      { caption: \"Framerate\", values: [\"fps\", \"raf\", \"physics\"] },\n      { caption: \"Batching\", values: [\"batchdraws\", \"batchinstances\", \"batchatlassize\"] }\n    ],\n    plugins: plugins\n  });\n}\n\nconst HIDDEN_CLASS = \"a-hidden\";\n\nAFRAME.registerComponent(\"stats-plus\", {\n  // Whether or not the stats panel is expanded.\n  // Shows FPS counter when collapsed.\n  schema: { default: false },\n  init() {\n    this.onExpand = this.onExpand.bind(this);\n    this.onCollapse = this.onCollapse.bind(this);\n    this.onEnterVr = this.onEnterVr.bind(this);\n    this.onExitVr = this.onExitVr.bind(this);\n\n    const scene = this.el.sceneEl;\n    this.stats = createStats(scene);\n    this.statsEl = document.querySelector(\".rs-base\");\n\n    // Add header to stats panel so we can collapse it\n    const statsHeaderEl = document.createElement(\"div\");\n    statsHeaderEl.classList.add(\"rs-header\");\n\n    const statsTitleEl = document.createElement(\"h1\");\n    statsTitleEl.innerHTML = \"Stats\";\n    statsHeaderEl.appendChild(statsTitleEl);\n\n    const collapseEl = document.createElement(\"div\");\n    collapseEl.classList.add(\"rs-collapse-btn\");\n    collapseEl.innerHTML = \"X\";\n    collapseEl.addEventListener(\"click\", this.onCollapse);\n    statsHeaderEl.appendChild(collapseEl);\n\n    this.statsEl.insertBefore(statsHeaderEl, this.statsEl.firstChild);\n\n    // Add fps counter to the page\n    this.fpsEl = document.createElement(\"div\");\n    this.fpsEl.addEventListener(\"click\", this.onExpand);\n    this.fpsEl.classList.add(\"rs-fps-counter\");\n    document.body.appendChild(this.fpsEl);\n    this.lastFpsUpdate = performance.now();\n    this.lastFps = 0;\n    this.frameCount = 0;\n    this.inVR = scene.is(\"vr-mode\");\n\n    if (scene.isMobile) {\n      this.statsEl.classList.add(\"rs-mobile\");\n      this.fpsEl.classList.add(\"rs-mobile\");\n    }\n\n    scene.addEventListener(\"enter-vr\", this.onEnterVr);\n    scene.addEventListener(\"exit-vr\", this.onExitVr);\n\n    this.vrStatsEnabled = qsTruthy(\"vrstats\");\n    if (this.vrStatsEnabled) {\n      this.initVRStats();\n    }\n    this.lastUpdate = 0;\n  },\n  initVRStats() {\n    this.vrPanel = document.createElement(\"a-entity\");\n    this.vrPanel.setAttribute(\"text\", { width: 0.5, whiteSpace: \"pre\", value: \"_\", baseline: \"bottom\" });\n    this.vrPanel.addEventListener(\n      \"loaded\",\n      () =>\n        this.vrPanel.object3D.traverse(x => {\n          if (x.material) x.material.depthTest = false;\n        }),\n      { once: true }\n    );\n    this.el.append(this.vrPanel);\n    const background = document.createElement(\"a-plane\");\n    background.setAttribute(\"color\", \"#333333\");\n    background.setAttribute(\"material\", \"shader\", \"flat\");\n    background.setAttribute(\"material\", \"depthTest\", false);\n    background.setAttribute(\"width\", 0.1);\n    background.setAttribute(\"height\", 0.12);\n    background.setAttribute(\"position\", \"-0.2 0.055 0\");\n    this.el.append(background);\n  },\n  toggleVRStats() {\n    if (this.vrStatsEnabled) {\n      this.el.object3D.visible = false;\n      this.vrStatsEnabled = false;\n    } else {\n      if (!this.vrPanel) {\n        this.initVRStats();\n      }\n      this.el.object3D.visible = true;\n      this.vrStatsEnabled = true;\n    }\n  },\n  play() {\n    this.el.sceneEl.systems.physics.addComponent(this);\n  },\n  pause() {\n    this.el.sceneEl.systems.physics.removeComponent(this);\n  },\n  beforeStep() {\n    this.stats(\"physics\").start();\n  },\n  afterStep() {\n    this.stats(\"physics\").end();\n  },\n  update(oldData) {\n    if (oldData !== this.data) {\n      if (this.data) {\n        this.statsEl.classList.remove(HIDDEN_CLASS);\n        this.fpsEl.classList.add(HIDDEN_CLASS);\n      } else {\n        this.statsEl.classList.add(HIDDEN_CLASS);\n        this.fpsEl.classList.remove(HIDDEN_CLASS);\n      }\n    }\n  },\n  tick(time) {\n    const stats = this.stats;\n    if (this.data || this.vrStatsEnabled) {\n      // Update rStats\n      stats(\"rAF\").tick();\n      stats(\"FPS\").frame();\n\n      const batchManagerSystem = this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem;\n      if (batchManagerSystem.batchingEnabled) {\n        const batchManager = batchManagerSystem.batchManager;\n        stats(\"batchdraws\").set(batchManager.batches.length);\n        stats(\"batchinstances\").set(batchManager.instanceCount);\n        stats(\"batchatlassize\").set(batchManager.atlas.arrayDepth);\n      }\n\n      stats().update();\n    } else if (!this.inVR) {\n      // Update the fps counter\n      const now = performance.now();\n      this.frameCount++;\n\n      // Update the fps counter text once a second\n      if (now >= this.lastFpsUpdate + 1000) {\n        const fps = Math.round(this.frameCount / ((now - this.lastFpsUpdate) / 1000));\n        if (fps !== this.lastFps) {\n          this.fpsEl.innerHTML = Math.round(fps) + \" FPS\";\n          this.lastFps = fps;\n        }\n        this.lastFpsUpdate = now;\n        this.frameCount = 0;\n      }\n    }\n    if (this.vrStatsEnabled && time - this.lastUpdate > 100) {\n      this.vrPanel.setAttribute(\n        \"text\",\n        \"value\",\n        [\n          `f ${stats(\"fps\")\n            .value()\n            .toFixed(0)}`,\n          `r ${stats(\"raf\")\n            .value()\n            .toFixed(0)}`,\n          `p ${stats(\"physics\")\n            .value()\n            .toFixed(0)}`,\n          `c ${this.el.sceneEl.renderer.info.render.calls}`,\n          `t ${(this.el.sceneEl.renderer.info.render.triangles / 1000).toFixed(0)}k`\n        ].join(\"\\n\")\n      );\n      this.lastUpdate = time;\n    }\n  },\n  onEnterVr() {\n    this.inVR = true;\n    // Hide all stats elements when entering VR on mobile\n    if (this.el.sceneEl.isMobile) {\n      this.statsEl.classList.add(HIDDEN_CLASS);\n      this.fpsEl.classList.add(HIDDEN_CLASS);\n    }\n  },\n  onExitVr() {\n    this.inVR = false;\n    // Revert to previous state whe exiting VR on mobile\n    if (this.el.sceneEl.isMobile) {\n      if (this.data) {\n        this.statsEl.classList.remove(HIDDEN_CLASS);\n      } else {\n        this.fpsEl.classList.remove(HIDDEN_CLASS);\n      }\n    }\n  },\n  onExpand() {\n    this.el.setAttribute(this.name, true);\n  },\n  onCollapse() {\n    this.el.setAttribute(this.name, false);\n  },\n  remove() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.hide);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.show);\n\n    if (this.statsEl) {\n      this.statsEl.parentNode.removeChild(this.statsEl);\n      this.fpsEl.parentNode.removeChild(this.fpsEl);\n    }\n  }\n});\n","/* global performance THREE AFRAME NAF MediaStream process setTimeout */\nimport GIFWorker from \"../workers/gifparsing.worker.js\";\nimport errorImageSrc from \"!!url-loader!../assets/images/media-error.gif\";\nimport { paths } from \"../systems/userinput/paths\";\nimport HLS from \"hls.js/dist/hls.light.js\";\nimport { spawnMediaAround, createImageTexture } from \"../utils/media-utils\";\nimport { proxiedUrlFor } from \"../utils/media-url-utils\";\nimport { buildAbsoluteURL } from \"url-toolkit\";\nimport { SOUND_CAMERA_TOOL_TOOK_SNAPSHOT } from \"../systems/sound-effects-system\";\nimport { promisifyWorker } from \"../utils/promisify-worker.js\";\n\nconst ONCE_TRUE = { once: true };\nconst TYPE_IMG_PNG = { type: \"image/png\" };\nconst parseGIF = promisifyWorker(new GIFWorker());\n\nexport const VOLUME_LABELS = [];\nfor (let i = 0; i <= 20; i++) {\n  let s = \"|\";\n  for (let j = 0; j <= 20; j++) {\n    s += i >= j ? \"|\" : \" \";\n  }\n  s += \"|\";\n  VOLUME_LABELS[i] = s;\n}\n\nclass GIFTexture extends THREE.Texture {\n  constructor(frames, delays, disposals) {\n    super(document.createElement(\"canvas\"));\n    this.image.width = frames[0].width;\n    this.image.height = frames[0].height;\n\n    this._ctx = this.image.getContext(\"2d\");\n\n    this.generateMipmaps = false;\n    this.isVideoTexture = true;\n    this.minFilter = THREE.NearestFilter;\n\n    this.frames = frames;\n    this.delays = delays;\n    this.disposals = disposals;\n\n    this.frame = 0;\n    this.frameStartTime = Date.now();\n  }\n\n  update() {\n    if (!this.frames || !this.delays || !this.disposals) return;\n    const now = Date.now();\n    if (now - this.frameStartTime > this.delays[this.frame]) {\n      if (this.disposals[this.frame] === 2) {\n        this._ctx.clearRect(0, 0, this.image.width, this.image.width);\n      }\n      this.frame = (this.frame + 1) % this.frames.length;\n      this.frameStartTime = now;\n      this._ctx.drawImage(this.frames[this.frame], 0, 0, this.image.width, this.image.height);\n      this.needsUpdate = true;\n    }\n  }\n}\n\nasync function createGIFTexture(url) {\n  return new Promise((resolve, reject) => {\n    fetch(url, { mode: \"cors\" })\n      .then(r => r.arrayBuffer())\n      .then(rawImageData => parseGIF(rawImageData, [rawImageData]))\n      .then(result => {\n        const { frames, delayTimes, disposals } = result;\n        let loadCnt = 0;\n        for (let i = 0; i < frames.length; i++) {\n          const img = new Image();\n          img.onload = e => {\n            loadCnt++;\n            frames[i] = e.target;\n            if (loadCnt === frames.length) {\n              const texture = new GIFTexture(frames, delayTimes, disposals);\n              texture.image.src = url;\n              texture.encoding = THREE.sRGBEncoding;\n              texture.minFilter = THREE.LinearFilter;\n              resolve(texture);\n            }\n          };\n          img.src = frames[i];\n        }\n      })\n      .catch(reject);\n  });\n}\n\nconst isIOS = AFRAME.utils.device.isIOS();\n\n/**\n * Create video element to be used as a texture.\n *\n * @param {string} src - Url to a video file.\n * @returns {Element} Video element.\n */\nasync function createVideoEl() {\n  const videoEl = document.createElement(\"video\");\n  videoEl.setAttribute(\"playsinline\", \"\");\n  videoEl.setAttribute(\"webkit-playsinline\", \"\");\n  // iOS Safari requires the autoplay attribute, or it won't play the video at all.\n  videoEl.autoplay = true;\n  // iOS Safari will not play videos without user interaction. We mute the video so that it can autoplay and then\n  // allow the user to unmute it with an interaction in the unmute-video-button component.\n  videoEl.muted = isIOS;\n  videoEl.preload = \"auto\";\n  videoEl.crossOrigin = \"anonymous\";\n\n  return videoEl;\n}\n\nfunction createVideoTexture(url, contentType) {\n  return new Promise(async (resolve, reject) => {\n    const videoEl = await createVideoEl();\n\n    const texture = new THREE.VideoTexture(videoEl);\n    texture.minFilter = THREE.LinearFilter;\n    texture.encoding = THREE.sRGBEncoding;\n\n    if (url.startsWith(\"hubs://\")) {\n      const streamClientId = url.substring(7).split(\"/\")[1]; // /clients/<client id>/video is only URL for now\n      const stream = await NAF.connection.adapter.getMediaStream(streamClientId, \"video\");\n      videoEl.srcObject = new MediaStream(stream.getVideoTracks());\n      // If hls.js is supported we always use it as it gives us better events\n    } else if (AFRAME.utils.material.isHLS(url, contentType)) {\n      if (HLS.isSupported()) {\n        const corsProxyPrefix = `https://${process.env.CORS_PROXY_SERVER}/`;\n        const baseUrl = url.startsWith(corsProxyPrefix) ? url.substring(corsProxyPrefix.length) : url;\n        const hls = new HLS({\n          xhrSetup: (xhr, u) => {\n            if (u.startsWith(corsProxyPrefix)) {\n              u = u.substring(corsProxyPrefix.length);\n            }\n\n            // HACK HLS.js resolves relative urls internally, but our CORS proxying screws it up. Resolve relative to the original unproxied url.\n            // TODO extend HLS.js to allow overriding of its internal resolving instead\n            if (!u.startsWith(\"http\")) {\n              u = buildAbsoluteURL(baseUrl, u.startsWith(\"/\") ? u : `/${u}`);\n            }\n\n            xhr.open(\"GET\", proxiedUrlFor(u));\n          }\n        });\n        texture.hls = hls;\n        hls.loadSource(url);\n        hls.attachMedia(videoEl);\n        hls.on(HLS.Events.ERROR, function(event, data) {\n          if (data.fatal) {\n            switch (data.type) {\n              case HLS.ErrorTypes.NETWORK_ERROR:\n                // try to recover network error\n                hls.startLoad();\n                break;\n              case HLS.ErrorTypes.MEDIA_ERROR:\n                hls.recoverMediaError();\n                break;\n              default:\n                reject(event);\n                return;\n            }\n          }\n        });\n        // If not, see if native support will work\n      } else if (videoEl.canPlayType(contentType)) {\n        videoEl.src = url;\n        videoEl.onerror = reject;\n      } else {\n        reject(\"HLS unsupported\");\n      }\n    } else {\n      videoEl.src = url;\n      videoEl.onerror = reject;\n    }\n\n    let hasResolved = false;\n\n    const resolveOnce = () => {\n      if (hasResolved) return;\n      hasResolved = true;\n      resolve(texture);\n    };\n\n    videoEl.addEventListener(\"canplay\", resolveOnce, { once: true });\n\n    // HACK: Sometimes iOS fails to fire the canplay event, so we poll for the video dimensions to appear instead.\n    if (isIOS) {\n      const poll = () => {\n        if ((texture.image.videoHeight || texture.image.height) && (texture.image.videoWidth || texture.image.width)) {\n          resolveOnce();\n        } else {\n          setTimeout(poll, 500);\n        }\n      };\n\n      poll();\n    }\n  });\n}\n\nfunction scaleToAspectRatio(el, ratio) {\n  const width = Math.min(1.0, 1.0 / ratio);\n  const height = Math.min(1.0, ratio);\n  el.object3DMap.mesh.scale.set(width, height, 1);\n  el.object3DMap.mesh.matrixNeedsUpdate = true;\n}\n\nfunction disposeTexture(texture) {\n  if (texture.image instanceof HTMLVideoElement) {\n    const video = texture.image;\n    video.pause();\n    video.src = \"\";\n    video.load();\n  }\n\n  if (texture.hls) {\n    texture.hls.destroy();\n  }\n\n  texture.dispose();\n}\n\nclass TextureCache {\n  cache = new Map();\n\n  set(src, texture) {\n    const image = texture.image;\n    this.cache.set(src, {\n      texture,\n      ratio: (image.videoHeight || image.height) / (image.videoWidth || image.width),\n      count: 0\n    });\n    return this.retain(src);\n  }\n\n  has(src) {\n    return this.cache.has(src);\n  }\n\n  get(src) {\n    return this.cache.get(src);\n  }\n\n  retain(src) {\n    const cacheItem = this.cache.get(src);\n    cacheItem.count++;\n    // console.log(\"retain\", src, cacheItem.count);\n    return cacheItem;\n  }\n\n  release(src) {\n    const cacheItem = this.cache.get(src);\n\n    if (!cacheItem) {\n      console.error(`Releasing uncached texture src ${src}`);\n      return;\n    }\n\n    cacheItem.count--;\n    // console.log(\"release\", src, cacheItem.count);\n    if (cacheItem.count <= 0) {\n      // Unload the video element to prevent it from continuing to play in the background\n      disposeTexture(cacheItem.texture);\n      this.cache.delete(src);\n    }\n  }\n}\n\nconst textureCache = new TextureCache();\n\nconst errorImage = new Image();\nerrorImage.src = errorImageSrc;\nconst errorTexture = new THREE.Texture(errorImage);\nerrorTexture.magFilter = THREE.NearestFilter;\nerrorImage.onload = () => {\n  errorTexture.needsUpdate = true;\n};\n\nfunction timeFmt(t) {\n  let s = Math.floor(t),\n    h = Math.floor(s / 3600);\n  s -= h * 3600;\n  let m = Math.floor(s / 60);\n  s -= m * 60;\n  if (h < 10) h = `0${h}`;\n  if (m < 10) m = `0${m}`;\n  if (s < 10) s = `0${s}`;\n  return h === \"00\" ? `${m}:${s}` : `${h}:${m}:${s}`;\n}\n\nAFRAME.registerComponent(\"media-video\", {\n  schema: {\n    src: { type: \"string\" },\n    contentType: { type: \"string\" },\n    volume: { type: \"number\", default: 0.5 },\n    loop: { type: \"boolean\", default: true },\n    audioType: { type: \"string\", default: \"pannernode\" },\n    hidePlaybackControls: { type: \"boolean\", default: false },\n    distanceModel: { type: \"string\", default: \"inverse\" },\n    rolloffFactor: { type: \"number\", default: 1 },\n    refDistance: { type: \"number\", default: 1 },\n    maxDistance: { type: \"number\", default: 10000 },\n    coneInnerAngle: { type: \"number\", default: 360 },\n    coneOuterAngle: { type: \"number\", default: 0 },\n    coneOuterGain: { type: \"number\", default: 0 },\n    videoPaused: { type: \"boolean\" },\n    projection: { type: \"string\", default: \"flat\" },\n    time: { type: \"number\" },\n    tickRate: { default: 1000 }, // ms interval to send time interval updates\n    syncTolerance: { default: 2 }\n  },\n\n  init() {\n    this.onPauseStateChange = this.onPauseStateChange.bind(this);\n    this.tryUpdateVideoPlaybackState = this.tryUpdateVideoPlaybackState.bind(this);\n    this.updateSrc = this.updateSrc.bind(this);\n\n    this.seekForward = this.seekForward.bind(this);\n    this.seekBack = this.seekBack.bind(this);\n    this.volumeUp = this.volumeUp.bind(this);\n    this.volumeDown = this.volumeDown.bind(this);\n    this.snap = this.snap.bind(this);\n    this.changeVolumeBy = this.changeVolumeBy.bind(this);\n    this.togglePlaying = this.togglePlaying.bind(this);\n\n    this.lastUpdate = 0;\n    this.videoMutedAt = 0;\n    this.localSnapCount = 0;\n    this.isSnapping = false;\n    this.onSnapImageLoaded = () => (this.isSnapping = false);\n\n    this.el.setAttribute(\"hover-menu__video\", { template: \"#video-hover-menu\", dirs: [\"forward\", \"back\"] });\n    this.el.components[\"hover-menu__video\"].getHoverMenu().then(menu => {\n      // If we got removed while waiting, do nothing.\n      if (!this.el.parentNode) return;\n\n      this.hoverMenu = menu;\n\n      this.playbackControls = this.el.querySelector(\".video-playback\");\n      this.playPauseButton = this.el.querySelector(\".video-playpause-button\");\n      this.volumeUpButton = this.el.querySelector(\".video-volume-up-button\");\n      this.volumeDownButton = this.el.querySelector(\".video-volume-down-button\");\n      this.seekForwardButton = this.el.querySelector(\".video-seek-forward-button\");\n      this.seekBackButton = this.el.querySelector(\".video-seek-back-button\");\n      this.snapButton = this.el.querySelector(\".video-snap-button\");\n      this.timeLabel = this.el.querySelector(\".video-time-label\");\n      this.volumeLabel = this.el.querySelector(\".video-volume-label\");\n\n      this.playPauseButton.object3D.addEventListener(\"interact\", this.togglePlaying);\n      this.seekForwardButton.object3D.addEventListener(\"interact\", this.seekForward);\n      this.seekBackButton.object3D.addEventListener(\"interact\", this.seekBack);\n      this.volumeUpButton.object3D.addEventListener(\"interact\", this.volumeUp);\n      this.volumeDownButton.object3D.addEventListener(\"interact\", this.volumeDown);\n      this.snapButton.object3D.addEventListener(\"interact\", this.snap);\n\n      this.updateVolumeLabel();\n      this.updateHoverMenuBasedOnLiveState();\n      this.updatePlaybackState();\n    });\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.networkedEl = networkedEl;\n      this.updatePlaybackState();\n\n      // For scene-owned videos, take ownership after a random delay if nobody\n      // else has so there is a timekeeper. Do not due this on iOS because iOS has an\n      // annoying \"auto-pause\" feature that forces one non-autoplaying video to play\n      // at once, which will pause the videos for everyone in the room if owned.\n      if (!isIOS && NAF.utils.getNetworkOwner(this.networkedEl) === \"scene\") {\n        setTimeout(() => {\n          if (NAF.utils.getNetworkOwner(this.networkedEl) === \"scene\") {\n            NAF.utils.takeOwnership(this.networkedEl);\n          }\n        }, 2000 + Math.floor(Math.random() * 2000));\n      }\n    });\n\n    // from a-sound\n    const sceneEl = this.el.sceneEl;\n    sceneEl.audioListener = sceneEl.audioListener || new THREE.AudioListener();\n    if (sceneEl.camera) {\n      sceneEl.camera.add(sceneEl.audioListener);\n    }\n    sceneEl.addEventListener(\"camera-set-active\", function(evt) {\n      evt.detail.cameraEl.getObject3D(\"camera\").add(sceneEl.audioListener);\n    });\n  },\n\n  seekForward() {\n    if ((!this.videoIsLive && NAF.utils.isMine(this.networkedEl)) || NAF.utils.takeOwnership(this.networkedEl)) {\n      this.video.currentTime += 30;\n      this.el.setAttribute(\"media-video\", \"time\", this.video.currentTime);\n    }\n  },\n\n  seekBack() {\n    if ((!this.videoIsLive && NAF.utils.isMine(this.networkedEl)) || NAF.utils.takeOwnership(this.networkedEl)) {\n      this.video.currentTime -= 10;\n      this.el.setAttribute(\"media-video\", \"time\", this.video.currentTime);\n    }\n  },\n\n  changeVolumeBy(v) {\n    this.el.setAttribute(\"media-video\", \"volume\", THREE.Math.clamp(this.data.volume + v, 0, 1));\n    this.updateVolumeLabel();\n  },\n\n  volumeUp() {\n    this.changeVolumeBy(0.1);\n  },\n\n  volumeDown() {\n    this.changeVolumeBy(-0.1);\n  },\n\n  async snap() {\n    if (this.isSnapping) return;\n    this.isSnapping = true;\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_TOOK_SNAPSHOT);\n\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = this.video.videoWidth;\n    canvas.height = this.video.videoHeight;\n    canvas.getContext(\"2d\").drawImage(this.video, 0, 0, canvas.width, canvas.height);\n    const blob = await new Promise(resolve => canvas.toBlob(resolve));\n    const file = new File([blob], \"snap.png\", TYPE_IMG_PNG);\n\n    this.localSnapCount++;\n    const { entity } = spawnMediaAround(this.el, file, \"video-snapshot\", this.localSnapCount);\n    entity.addEventListener(\"image-loaded\", this.onSnapImageLoaded, ONCE_TRUE);\n  },\n\n  togglePlaying() {\n    // See onPauseStateChanged for note about iOS\n    if (isIOS && this.video.paused && NAF.utils.isMine(this.networkedEl)) {\n      this.video.play();\n      return;\n    }\n\n    if (this.networkedEl && (NAF.utils.isMine(this.networkedEl) || NAF.utils.takeOwnership(this.networkedEl))) {\n      this.tryUpdateVideoPlaybackState(!this.data.videoPaused);\n    }\n  },\n\n  onPauseStateChange() {\n    // iOS Safari will auto-pause other videos if one is manually started (not autoplayed.) So, to keep things\n    // easy to reason about, we *never* broadcast pauses from iOS.\n    //\n    // if an iOS safari user pauses and plays a video they'll pause all the other videos,\n    // which isn't great, but this check will at least ensure they don't pause those videos\n    // for all other users in the room! Of course, if they go and hit play on those videos auto-paused,\n    // they will become the timekeeper, and will seek everyone to where the video was auto-paused.\n    //\n    // This specific case will diverge the network schema and the video player state, so that\n    // this.data.videoPaused is false (so others will keep playing it) but our local player will\n    // have stopped. So we deal with this special case as well when we press the play button.\n    if (isIOS && this.video.paused && NAF.utils.isMine(this.networkedEl)) {\n      return;\n    }\n\n    this.el.setAttribute(\"media-video\", \"videoPaused\", this.video.paused);\n\n    if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n      this.el.emit(\"owned-video-state-changed\");\n    }\n  },\n\n  updatePlaybackState(force) {\n    if (this.hoverMenu) {\n      this.playbackControls.object3D.visible = !this.data.hidePlaybackControls && !!this.video;\n      this.timeLabel.object3D.visible = !this.data.hidePlaybackControls;\n\n      this.playPauseButton.object3D.visible = !!this.video;\n      this.snapButton.object3D.visible = !!this.video;\n      this.seekForwardButton.object3D.visible = !!this.video && !this.videoIsLive;\n      this.seekBackButton.object3D.visible = !!this.video && !this.videoIsLive;\n    }\n\n    // Only update playback position for videos you don't own\n    if (force || (this.networkedEl && !NAF.utils.isMine(this.networkedEl) && this.video)) {\n      if (Math.abs(this.data.time - this.video.currentTime) > this.data.syncTolerance) {\n        this.tryUpdateVideoPlaybackState(this.data.videoPaused, this.data.time);\n      } else {\n        this.tryUpdateVideoPlaybackState(this.data.videoPaused);\n      }\n    }\n\n    // Volume is local, always update it\n    if (this.audio) {\n      this.audio.gain.gain.value = this.data.volume;\n    }\n  },\n\n  tryUpdateVideoPlaybackState(pause, currentTime) {\n    if (this._playbackStateChangeTimeout) {\n      clearTimeout(this._playbackStateChangeTimeout);\n      delete this._playbackStateChangeTimeout;\n    }\n\n    if (!this.videoIsLive && currentTime !== undefined) {\n      this.video.currentTime = currentTime;\n    }\n\n    if (this.hoverMenu) {\n      this.playPauseButton.setAttribute(\"icon-button\", \"active\", pause);\n    }\n\n    if (pause) {\n      this.video.pause();\n    } else {\n      // Need to deal with the fact play() may fail if user has not interacted with browser yet.\n      this.video.play().catch(() => {\n        this._playbackStateChangeTimeout = setTimeout(() => this.tryUpdateVideoPlaybackState(pause, currentTime), 1000);\n      });\n    }\n  },\n\n  async update(oldData) {\n    const src = this.data.src;\n    this.updatePlaybackState();\n\n    if (!src || src === oldData.src) return;\n    return this.updateSrc(oldData);\n  },\n\n  async updateSrc(oldData) {\n    const { src } = this.data;\n\n    this.cleanUp();\n    if (this.mesh && this.mesh.material) {\n      this.mesh.material.map = null;\n      this.mesh.material.needsUpdate = true;\n    }\n\n    let texture;\n    try {\n      texture = await createVideoTexture(src, this.data.contentType);\n\n      // No way to cancel promises, so if src has changed while we were creating the texture just throw it away.\n      if (this.data.src !== src) {\n        disposeTexture(texture);\n        return;\n      }\n\n      if (!src.startsWith(\"hubs://\")) {\n        // TODO FF error here if binding mediastream: The captured HTMLMediaElement is playing a MediaStream. Applying volume or mute status is not currently supported -- not an issue since we have no audio atm in shared video.\n        texture.audioSource = this.el.sceneEl.audioListener.context.createMediaElementSource(texture.image);\n\n        if (this.data.audioType === \"pannernode\") {\n          this.audio = new THREE.PositionalAudio(this.el.sceneEl.audioListener);\n          this.audio.setDistanceModel(this.data.distanceModel);\n          this.audio.setRolloffFactor(this.data.rolloffFactor);\n          this.audio.setRefDistance(this.data.refDistance);\n          this.audio.setMaxDistance(this.data.maxDistance);\n          this.audio.panner.coneInnerAngle = this.data.coneInnerAngle;\n          this.audio.panner.coneOuterAngle = this.data.coneOuterAngle;\n          this.audio.panner.coneOuterGain = this.data.coneOuterGain;\n        } else {\n          this.audio = new THREE.Audio(this.el.sceneEl.audioListener);\n        }\n\n        this.audio.setNodeSource(texture.audioSource);\n        this.el.setObject3D(\"sound\", this.audio);\n      }\n\n      this.video = texture.image;\n      this.video.loop = this.data.loop;\n      this.video.addEventListener(\"pause\", this.onPauseStateChange);\n      this.video.addEventListener(\"play\", this.onPauseStateChange);\n\n      if (texture.hls) {\n        const updateLiveState = () => {\n          this.videoIsLive = texture.hls.levels[texture.hls.currentLevel].details.live;\n          this.updateHoverMenuBasedOnLiveState();\n        };\n        texture.hls.on(HLS.Events.LEVEL_SWITCHED, updateLiveState);\n        if (texture.hls.currentLevel >= 0) {\n          updateLiveState();\n        }\n      } else {\n        this.videoIsLive = this.video.duration === Infinity;\n        this.updateHoverMenuBasedOnLiveState();\n      }\n\n      if (isIOS) {\n        const template = document.getElementById(\"video-unmute\");\n        this.el.appendChild(document.importNode(template.content, true));\n        this.el.setAttribute(\"position-at-box-shape-border__unmute-ui\", {\n          target: \".unmute-ui\",\n          dirs: [\"forward\", \"back\"]\n        });\n      }\n    } catch (e) {\n      console.error(\"Error loading video\", this.data.src, e);\n      texture = errorTexture;\n    }\n\n    const projection = this.data.projection;\n\n    if (!this.mesh || projection !== oldData.projection) {\n      const material = new THREE.MeshBasicMaterial();\n\n      let geometry;\n\n      if (projection === \"360-equirectangular\") {\n        geometry = new THREE.SphereBufferGeometry(1, 64, 32);\n        // invert the geometry on the x-axis so that all of the faces point inward\n        geometry.scale(-1, 1, 1);\n      } else {\n        geometry = new THREE.PlaneBufferGeometry();\n        material.side = THREE.DoubleSide;\n      }\n\n      this.mesh = new THREE.Mesh(geometry, material);\n      this.el.setObject3D(\"mesh\", this.mesh);\n    }\n\n    this.mesh.material.map = texture;\n    this.mesh.material.needsUpdate = true;\n\n    if (projection === \"flat\") {\n      scaleToAspectRatio(this.el, texture.image.videoHeight / texture.image.videoWidth);\n    }\n\n    this.updatePlaybackState(true);\n\n    if (this.video.muted) {\n      this.videoMutedAt = performance.now();\n    }\n\n    this.el.emit(\"video-loaded\", { projection: projection });\n  },\n\n  updateHoverMenuBasedOnLiveState() {\n    if (!this.hoverMenu) return;\n\n    this.seekForwardButton.object3D.visible = !this.videoIsLive;\n    this.seekBackButton.object3D.visible = !this.videoIsLive;\n\n    if (this.videoIsLive) {\n      this.timeLabel.setAttribute(\"text\", \"value\", \"LIVE\");\n    }\n  },\n\n  updateVolumeLabel() {\n    this.volumeLabel.setAttribute(\n      \"text\",\n      \"value\",\n      this.data.volume === 0 ? \"MUTE\" : VOLUME_LABELS[Math.floor(this.data.volume / 0.05)]\n    );\n  },\n\n  tick() {\n    if (!this.video) return;\n\n    const userinput = this.el.sceneEl.systems.userinput;\n    const interaction = this.el.sceneEl.systems.interaction;\n    const volumeMod = userinput.get(paths.actions.cursor.mediaVolumeMod);\n    if (interaction.state.rightRemote.hovered === this.el && volumeMod) {\n      this.changeVolumeBy(volumeMod);\n    }\n\n    const isHeld = interaction.isHeld(this.el);\n\n    if (this.wasHeld && !isHeld) {\n      this.localSnapCount = 0;\n    }\n\n    this.wasHeld = isHeld;\n\n    if (this.hoverMenu && this.hoverMenu.object3D.visible && !this.videoIsLive) {\n      this.timeLabel.setAttribute(\n        \"text\",\n        \"value\",\n        `${timeFmt(this.video.currentTime)} / ${timeFmt(this.video.duration)}`\n      );\n    }\n\n    // If a non-live video is currently playing and we own it, send out time updates\n    if (!this.data.videoPaused && !this.videoIsLive && this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n      const now = performance.now();\n      if (now - this.lastUpdate > this.data.tickRate) {\n        this.el.setAttribute(\"media-video\", \"time\", this.video.currentTime);\n        this.lastUpdate = now;\n      }\n    }\n  },\n\n  cleanUp() {\n    if (this.mesh && this.mesh.material) {\n      disposeTexture(this.mesh.material.map);\n    }\n  },\n\n  remove() {\n    this.cleanUp();\n\n    if (this.audio) {\n      this.el.removeObject3D(\"sound\");\n      this.audio.disconnect();\n      delete this.audio;\n    }\n\n    if (this.video) {\n      this.video.removeEventListener(\"pause\", this.onPauseStateChange);\n      this.video.removeEventListener(\"play\", this.onPauseStateChange);\n    }\n    if (this.hoverMenu) {\n      this.playPauseButton.object3D.removeEventListener(\"interact\", this.togglePlaying);\n      this.volumeUpButton.object3D.removeEventListener(\"interact\", this.volumeUp);\n      this.volumeDownButton.object3D.removeEventListener(\"interact\", this.volumeDown);\n      this.seekForwardButton.object3D.removeEventListener(\"interact\", this.seekForward);\n      this.seekBackButton.object3D.removeEventListener(\"interact\", this.seekBack);\n    }\n  }\n});\n\nAFRAME.registerComponent(\"media-image\", {\n  schema: {\n    src: { type: \"string\" },\n    projection: { type: \"string\", default: \"flat\" },\n    contentType: { type: \"string\" },\n    batch: { default: true }\n  },\n\n  remove() {\n    if (this.data.batch && this.mesh) {\n      this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.removeObject(this.mesh);\n    }\n    if (this._hasRetainedTexture) {\n      textureCache.release(this.data.src);\n      this._hasRetainedTexture = false;\n    }\n  },\n\n  async update(oldData) {\n    let texture;\n    let ratio = 1;\n\n    try {\n      const { src, contentType } = this.data;\n      if (!src) return;\n\n      this.el.emit(\"image-loading\");\n\n      if (this.mesh && this.mesh.map && src !== oldData.src) {\n        this.mesh.material.map = null;\n        this.mesh.material.needsUpdate = true;\n        if (this.mesh.map !== errorTexture) {\n          textureCache.release(oldData.src);\n        }\n      }\n\n      if (textureCache.has(src)) {\n        const cacheItem = textureCache.retain(src);\n        texture = cacheItem.texture;\n        ratio = cacheItem.ratio;\n      } else {\n        if (src === \"error\") {\n          texture = errorTexture;\n        } else if (contentType.includes(\"image/gif\")) {\n          texture = await createGIFTexture(src);\n        } else if (contentType.startsWith(\"image/\")) {\n          texture = await createImageTexture(src);\n        } else {\n          throw new Error(`Unknown image content type: ${contentType}`);\n        }\n\n        const cacheItem = textureCache.set(src, texture);\n        ratio = cacheItem.ratio;\n\n        // No way to cancel promises, so if src has changed while we were creating the texture just throw it away.\n        if (this.data.src !== src) {\n          textureCache.release(src);\n          return;\n        }\n      }\n\n      this._hasRetainedTexture = true;\n    } catch (e) {\n      console.error(\"Error loading image\", this.data.src, e);\n      texture = errorTexture;\n      this._hasRetainedTexture = false;\n    }\n\n    const projection = this.data.projection;\n\n    if (!this.mesh || projection !== oldData.projection) {\n      const material = new THREE.MeshBasicMaterial();\n\n      let geometry;\n\n      if (projection === \"360-equirectangular\") {\n        geometry = new THREE.SphereBufferGeometry(1, 64, 32);\n        // invert the geometry on the x-axis so that all of the faces point inward\n        geometry.scale(-1, 1, 1);\n      } else {\n        geometry = new THREE.PlaneBufferGeometry(1, 1, 1, 1, texture.flipY);\n        material.side = THREE.DoubleSide;\n      }\n\n      this.mesh = new THREE.Mesh(geometry, material);\n      this.el.setObject3D(\"mesh\", this.mesh);\n    }\n\n    this.mesh.material.map = texture;\n    this.mesh.material.transparent = texture.format === THREE.RGBAFormat;\n    this.mesh.material.needsUpdate = true;\n\n    if (projection === \"flat\") {\n      scaleToAspectRatio(this.el, ratio);\n    }\n\n    if (this.data.batch) {\n      this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.addObject(this.mesh);\n    }\n\n    this.el.emit(\"image-loaded\", { src: this.data.src, projection: projection });\n  }\n});\n","import { VOLUME_LABELS } from \"./media-views\";\n\nAFRAME.registerComponent(\"avatar-volume-controls\", {\n  schema: {\n    volume: { type: \"number\", default: 1.0 }\n  },\n\n  init() {\n    this.volumeUp = this.volumeUp.bind(this);\n    this.volumeDown = this.volumeDown.bind(this);\n    this.changeVolumeBy = this.changeVolumeBy.bind(this);\n    this.volumeUpButton = this.el.querySelector(\".avatar-volume-up-button\");\n    this.volumeDownButton = this.el.querySelector(\".avatar-volume-down-button\");\n    this.volumeLabel = this.el.querySelector(\".avatar-volume-label\");\n    this.volumeUpButton.object3D.addEventListener(\"interact\", this.volumeUp);\n    this.volumeDownButton.object3D.addEventListener(\"interact\", this.volumeDown);\n\n    this.updateVolumeLabel();\n  },\n\n  changeVolumeBy(v) {\n    this.el.setAttribute(\"avatar-volume-controls\", \"volume\", THREE.Math.clamp(this.data.volume + v, 0, 1));\n    this.updateVolumeLabel();\n  },\n\n  volumeUp() {\n    this.changeVolumeBy(0.1);\n  },\n\n  volumeDown() {\n    this.changeVolumeBy(-0.1);\n  },\n\n  update() {\n    if (this.audio) {\n      this.audio.gain.gain.value = this.data.volume;\n    }\n  },\n\n  updateVolumeLabel() {\n    this.volumeLabel.setAttribute(\n      \"text\",\n      \"value\",\n      this.data.volume === 0 ? \"Muted\" : VOLUME_LABELS[Math.floor(this.data.volume / 0.05)]\n    );\n  },\n\n  tick() {\n    if (this.audio) return;\n\n    // Walk up to Spine and then search down.\n    const source = this.el.parentNode.parentNode.querySelector(\"[networked-audio-source]\");\n    if (!source) return;\n\n    this.audio = source.components[\"networked-audio-source\"].sound;\n    this.update();\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\n\nAFRAME.registerComponent(\"pinch-to-move\", {\n  schema: {\n    speed: { default: 0.25 }\n  },\n  init() {\n    this.axis = [0, 0];\n  },\n  tick() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const pinch = userinput.get(paths.device.touchscreen.pinchDelta);\n    if (pinch) {\n      this.axis[1] = pinch * this.data.speed;\n      this.el.emit(\"move\", { axis: this.axis });\n    }\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\n\nconst degToRad = THREE.Math.degToRad;\nconst radToDeg = THREE.Math.radToDeg;\n\nAFRAME.registerComponent(\"pitch-yaw-rotator\", {\n  schema: {\n    minPitch: { default: -90 },\n    maxPitch: { default: 90 }\n  },\n\n  init() {\n    this.pitch = 0;\n    this.yaw = 0;\n    this.onRotateX = this.onRotateX.bind(this);\n    this.el.sceneEl.addEventListener(\"rotateX\", this.onRotateX);\n    this.el.sceneEl.addEventListener(\"enter-vr\", () => this.pause());\n    this.el.sceneEl.addEventListener(\"exit-vr\", () => this.play());\n    this.pendingXRotation = 0;\n  },\n\n  onRotateX(e) {\n    this.pendingXRotation += e.detail.value;\n  },\n\n  look(deltaPitch, deltaYaw) {\n    const { minPitch, maxPitch } = this.data;\n    this.pitch += deltaPitch;\n    this.pitch = THREE.Math.clamp(this.pitch, minPitch, maxPitch);\n    this.yaw += deltaYaw;\n  },\n\n  set(pitch, yaw) {\n    const { minPitch, maxPitch } = this.data;\n    this.pitch = THREE.Math.clamp(radToDeg(pitch), minPitch, maxPitch);\n    this.yaw = radToDeg(yaw);\n  },\n\n  tick() {\n    const scene = AFRAME.scenes[0];\n    const userinput = scene.systems.userinput;\n    const cameraDelta = userinput.get(scene.is(\"entered\") ? paths.actions.cameraDelta : paths.actions.lobbyCameraDelta);\n    let lookX = this.pendingXRotation;\n    let lookY = 0;\n    if (cameraDelta) {\n      lookY += cameraDelta[0];\n      lookX += cameraDelta[1];\n    }\n    if (lookX !== 0 || lookY !== 0) {\n      this.look(lookX, lookY);\n      this.el.object3D.rotation.set(degToRad(this.pitch), degToRad(this.yaw), 0);\n      this.el.object3D.rotation.order = \"YXZ\";\n    }\n    this.pendingXRotation = 0;\n  }\n});\n","import { getBox } from \"../utils/auto-box-collider.js\";\nimport { getLastWorldPosition } from \"../utils/three-utils\";\n\nconst PI = Math.PI;\nconst HALF_PI = PI / 2;\nconst THREE_HALF_PI = 3 * HALF_PI;\nconst right = new THREE.Vector3(1, 0, 0);\nconst forward = new THREE.Vector3(0, 0, 1);\nconst left = new THREE.Vector3(-1, 0, 0);\nconst back = new THREE.Vector3(0, 0, -1);\nconst zero = new THREE.Vector3(0, 0, 0);\nconst dirs = {\n  left: {\n    dir: left,\n    rotation: THREE_HALF_PI,\n    halfExtent: \"x\"\n  },\n  right: {\n    dir: right,\n    rotation: HALF_PI,\n    halfExtent: \"x\"\n  },\n  forward: {\n    dir: forward,\n    rotation: 0,\n    halfExtent: \"z\"\n  },\n  back: {\n    dir: back,\n    rotation: PI,\n    halfExtent: \"z\"\n  }\n};\n\nAFRAME.registerComponent(\"position-at-box-shape-border\", {\n  multiple: true,\n  schema: {\n    target: { type: \"string\" },\n    dirs: { default: [\"left\", \"right\", \"forward\", \"back\"] },\n    animate: { default: true },\n    scale: { default: true }\n  },\n\n  init() {\n    this.cam = this.el.sceneEl.camera.el.object3D;\n    this._updateBox = this._updateBox.bind(this);\n    this._setupTarget = this._setupTarget.bind(this);\n    this.halfExtents = new THREE.Vector3();\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._updateBox, \"media-components\");\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._updateBox, \"media-components\");\n  },\n\n  update() {\n    this.dirs = this.data.dirs.map(d => dirs[d]);\n  },\n\n  _setupTarget() {\n    this.targetEl = this.el.querySelector(this.data.target);\n    if (!this.targetEl) {\n      console.warn(`Race condition on position-at-box-shape-border on selector ${this.data.target}`);\n      return;\n    }\n\n    this.target = this.targetEl.object3D;\n\n    this.targetEl.addEventListener(\"animationcomplete\", () => {\n      this.targetEl.removeAttribute(\"animation__show\");\n    });\n\n    this.target.scale.setScalar(0.01); // To avoid \"pop\" of gigantic button first time\n    this.target.matrixNeedsUpdate = true;\n  },\n\n  tick() {\n    if (!this.target) {\n      this._setupTarget();\n      return;\n    }\n\n    if (!this.el.getObject3D(\"mesh\")) {\n      return;\n    }\n\n    const isVisible = this.targetEl.object3D.visible;\n    const opening = isVisible && !this.wasVisible;\n    const scaleChanged =\n      this.el.object3D.scale.x !== this.previousScaleX ||\n      this.el.object3D.scale.y !== this.previousScaleY ||\n      this.el.object3D.scale.z !== this.previousScaleZ;\n    const isAnimating = this.targetEl.getAttribute(\"animation__show\");\n\n    // If the target is being shown or the scale changed while the opening animation is being run,\n    // we need to start or re-start the animation.\n    if (opening || (scaleChanged && isAnimating)) {\n      this._updateBox(this.data.animate, true);\n    }\n\n    this.wasVisible = isVisible;\n    this.previousScaleX = this.el.object3D.scale.x;\n    this.previousScaleY = this.el.object3D.scale.y;\n    this.previousScaleZ = this.el.object3D.scale.z;\n  },\n\n  _updateBox: (function() {\n    const camWorldPos = new THREE.Vector3();\n    const targetPosition = new THREE.Vector3();\n    const pointOnBoxFace = new THREE.Vector3();\n    const pointOnBoxFaceToCamera = new THREE.Vector3();\n    const boxCenter = new THREE.Vector3();\n    const tempParentWorldScale = new THREE.Vector3();\n    const boxFaceNormal = new THREE.Vector3();\n    const min = new THREE.Vector3(0.001, 0.001, 0.001);\n\n    return function(animate, forceNewExtents) {\n      if (forceNewExtents || this.mesh !== this.el.getObject3D(\"mesh\")) {\n        this.mesh = this.el.getObject3D(\"mesh\");\n\n        const box = getBox(this.el, this.mesh);\n        this.halfExtents = box.min\n          .clone()\n          .negate()\n          .add(box.max)\n          .multiplyScalar(0.65);\n\n        this.halfExtents.max(min);\n      }\n\n      if (!this.target) return;\n\n      getLastWorldPosition(this.cam, camWorldPos);\n\n      let targetSquareDistance = Infinity;\n      let targetDir = this.dirs[0].dir;\n      let targetHalfExtentStr = this.dirs[0].halfExtent;\n      let targetHalfExtent = this.halfExtents[targetHalfExtentStr];\n      let targetRotation = this.dirs[0].rotation;\n      let targetCameraDot = -1.1;\n\n      this.el.object3D.updateMatrices();\n\n      for (let i = 0; i < this.dirs.length; i++) {\n        const dir = this.dirs[i].dir;\n        const halfExtentStr = this.dirs[i].halfExtent;\n        const halfExtent = this.halfExtents[halfExtentStr];\n        pointOnBoxFace.copy(dir).multiplyScalar(halfExtent);\n        boxCenter.copy(zero);\n\n        this.el.object3D.localToWorld(pointOnBoxFace);\n        this.el.object3D.localToWorld(boxCenter);\n\n        pointOnBoxFaceToCamera.subVectors(camWorldPos, pointOnBoxFace);\n        pointOnBoxFaceToCamera.normalize();\n\n        boxFaceNormal.subVectors(pointOnBoxFace, boxCenter);\n        boxFaceNormal.normalize();\n\n        // Compute dot between camera + box normal to ensure menus are going to be\n        // somewhat perpendicular to camera frustum\n        const cameraAngleDotBoxNormal = boxFaceNormal.dot(pointOnBoxFaceToCamera);\n\n        const squareDistance = pointOnBoxFace.distanceToSquared(camWorldPos);\n        if (cameraAngleDotBoxNormal > targetCameraDot) {\n          targetSquareDistance = squareDistance;\n          targetDir = dir;\n          targetHalfExtent = halfExtent;\n          targetRotation = this.dirs[i].rotation;\n          targetHalfExtentStr = halfExtentStr;\n          targetCameraDot = cameraAngleDotBoxNormal;\n        }\n      }\n\n      this.target.position.copy(targetPosition.copy(targetDir).multiplyScalar(targetHalfExtent));\n      this.target.rotation.set(0, targetRotation, 0);\n\n      tempParentWorldScale.setFromMatrixScale(this.target.parent.matrixWorld);\n\n      const distance = Math.sqrt(targetSquareDistance);\n      const scale = Math.max(this.halfExtents.x, this.halfExtents.z) * distance;\n      const targetScale = Math.min(2.0, Math.max(0.5, scale * tempParentWorldScale.x));\n      const finalScale = this.data.scale ? targetScale / tempParentWorldScale.x : 1;\n\n      if (animate) {\n        this.targetEl.removeAttribute(\"animation__show\");\n\n        this.targetEl.setAttribute(\"animation__show\", {\n          property: \"scale\",\n          dur: 300,\n          from: { x: finalScale * 0.8, y: finalScale * 0.8, z: finalScale * 0.8 },\n          to: { x: finalScale, y: finalScale, z: finalScale },\n          easing: \"easeOutElastic\"\n        });\n      } else if (!this.targetEl.getAttribute(\"animation__show\")) {\n        this.target.scale.setScalar(finalScale);\n      }\n\n      this.target.matrixNeedsUpdate = true;\n    };\n  })()\n});\n","import { getPromotionTokenForFile } from \"../utils/media-utils\";\nimport { SOUND_PIN } from \"../systems/sound-effects-system\";\n\nAFRAME.registerComponent(\"pin-networked-object-button\", {\n  schema: {\n    // Selector for label informing users about Discord bridging of pins.\n    tipSelector: { type: \"string\" },\n\n    // Selector for label to change when pinned/unpinned, must be sibling of this components element\n    labelSelector: { type: \"string\" },\n\n    // Selector for items to hide iff pinned\n    hideWhenPinnedSelector: { type: \"string\" }\n  },\n\n  init() {\n    this._updateUI = this._updateUI.bind(this);\n    this._updateUIOnStateChange = this._updateUIOnStateChange.bind(this);\n    this.el.sceneEl.addEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    this.tipEl = this.el.parentNode.querySelector(this.data.tipSelector);\n    this.labelEl = this.el.parentNode.querySelector(this.data.labelSelector);\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n\n      this._updateUI();\n      this.targetEl.addEventListener(\"pinned\", this._updateUI);\n      this.targetEl.addEventListener(\"unpinned\", this._updateUI);\n    });\n\n    this.onHovered = () => {\n      this.hovering = true;\n      this._updateUI();\n    };\n\n    this.onUnhovered = () => {\n      this.hovering = false;\n      this._updateUI();\n    };\n\n    this.onClick = () => {\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) return;\n\n      const wasPinned = this.targetEl.components.pinnable && this.targetEl.components.pinnable.data.pinned;\n      this.targetEl.setAttribute(\"pinnable\", \"pinned\", !wasPinned);\n      if (!wasPinned) {\n        this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_PIN);\n      }\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n    this.el.object3D.addEventListener(\"hovered\", this.onHovered);\n    this.el.object3D.addEventListener(\"unhovered\", this.onUnhovered);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n    this.el.object3D.removeEventListener(\"hovered\", this.onHovered);\n    this.el.object3D.removeEventListener(\"unhovered\", this.onUnhovered);\n  },\n\n  remove() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    if (this.targetEl) {\n      this.targetEl.removeEventListener(\"pinned\", this._updateUI);\n      this.targetEl.removeEventListener(\"unpinned\", this._updateUI);\n    }\n  },\n\n  _discordBridges() {\n    return window.APP.hubChannel.discordBridges();\n  },\n\n  _updateUIOnStateChange(e) {\n    if (e.detail !== \"frozen\") return;\n    this._updateUI();\n  },\n\n  _updateUI() {\n    const { fileIsOwned, fileId } = this.targetEl.components[\"media-loader\"].data;\n    const canPin = !!(fileIsOwned || (fileId && getPromotionTokenForFile(fileId)));\n    this.el.setAttribute(\"visible\", canPin);\n    this.labelEl.setAttribute(\"visible\", canPin);\n\n    const isPinned = this.targetEl.getAttribute(\"pinnable\") && this.targetEl.getAttribute(\"pinnable\").pinned;\n    const discordBridges = this._discordBridges();\n    this.tipEl.setAttribute(\"visible\", !!(canPin && !isPinned && this.hovering && discordBridges.length > 0));\n\n    if (!canPin) return;\n    this.labelEl.setAttribute(\"text\", \"value\", isPinned ? \"un-pin\" : \"pin\");\n    this.el.setAttribute(\"text-button\", \"backgroundColor\", isPinned ? \"#fff\" : \"#ff3550\");\n    this.el.setAttribute(\"text-button\", \"backgroundHoverColor\", isPinned ? \"#bbb\" : \"#fc3545\");\n\n    this.el.parentNode.querySelectorAll(this.data.hideWhenPinnedSelector).forEach(hideEl => {\n      hideEl.setAttribute(\"visible\", !isPinned);\n    });\n  }\n});\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\n\nAFRAME.registerComponent(\"unmute-video-button\", {\n  init() {\n    this.onClick = () => {\n      const videoEl = findAncestorWithComponent(this.el, \"media-video\");\n      const mediaVideo = videoEl.components[\"media-video\"];\n      if (!mediaVideo || !mediaVideo.video || !mediaVideo.videoMutedAt) return;\n\n      // iOS initially plays the sound and *then* mutes it, and sometimes a second video playing\n      // can break all sound in the app. (Likely a Safari bug.) Adding a delay before the unmute\n      // occurs seems to help with reducing this.\n      if (performance.now() - mediaVideo.videoMutedAt < 3000) {\n        return;\n      }\n\n      if (mediaVideo.video.muted) {\n        mediaVideo.video.muted = false;\n        this.el.setAttribute(\"visible\", false);\n      }\n    };\n  },\n\n  play() {\n    // Safari won't accept grab-start or even mousedown as user-initiated gestures,\n    // so we have to use a global touchstart event here.\n    document.addEventListener(\"touchstart\", this.onClick);\n  },\n\n  pause() {\n    document.removeEventListener(\"touchstart\", this.onClick);\n  }\n});\n","import { getLastWorldPosition } from \"../utils/three-utils\";\n\nAFRAME.registerComponent(\"destroy-at-extreme-distances\", {\n  schema: {\n    xMin: { default: -1000 },\n    xMax: { default: 1000 },\n    yMin: { default: -1000 },\n    yMax: { default: 1000 },\n    zMin: { default: -1000 },\n    zMax: { default: 1000 }\n  },\n\n  init() {\n    this._checkForDestroy = this._checkForDestroy.bind(this);\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._checkForDestroy, \"media-components\");\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._checkForDestroy, \"media-components\");\n  },\n\n  _checkForDestroy: (function() {\n    const pos = new THREE.Vector3();\n    return function() {\n      const { xMin, xMax, yMin, yMax, zMin, zMax } = this.data;\n      getLastWorldPosition(this.el.object3D, pos);\n\n      if (pos.x < xMin || pos.x > xMax || pos.y < yMin || pos.y > yMax || pos.z < zMin || pos.z > zMax) {\n        if (!this.el.components.networked || NAF.utils.isMine(this.el)) {\n          this.el.parentNode.removeChild(this.el);\n        }\n      }\n    };\n  })()\n});\n","import { spawnMediaAround } from \"../utils/media-utils\";\nimport { createImageBitmap } from \"../utils/image-bitmap-utils\";\nimport { ObjectTypes } from \"../object-types\";\nimport { paths } from \"../systems/userinput/paths\";\nimport { SOUND_CAMERA_TOOL_TOOK_SNAPSHOT } from \"../systems/sound-effects-system\";\n\nimport cameraModelSrc from \"../assets/camera_tool.glb\";\n\nconst cameraModelPromise = new Promise(resolve => new THREE.GLTFLoader().load(cameraModelSrc, resolve));\n\nconst pathsMap = {\n  \"player-right-controller\": {\n    takeSnapshot: paths.actions.rightHand.takeSnapshot\n  },\n  \"player-left-controller\": {\n    takeSnapshot: paths.actions.leftHand.takeSnapshot\n  },\n  cursor: {\n    takeSnapshot: paths.actions.cursor.takeSnapshot\n  }\n};\n\nconst snapCanvas = document.createElement(\"canvas\");\nasync function pixelsToPNG(pixels, width, height) {\n  snapCanvas.width = width;\n  snapCanvas.height = height;\n  const context = snapCanvas.getContext(\"2d\");\n\n  const imageData = context.createImageData(width, height);\n  imageData.data.set(pixels);\n  const bitmap = await createImageBitmap(imageData);\n  context.scale(1, -1);\n  context.drawImage(bitmap, 0, -height);\n  const blob = await new Promise(resolve => snapCanvas.toBlob(resolve));\n  return new File([blob], \"snap.png\", { type: \"image/png\" });\n}\n\n// Don't show camera viewports on mobile VR to same framerate.\nconst enableCameraViewport = !AFRAME.utils.device.isMobileVR();\n\nAFRAME.registerComponent(\"camera-tool\", {\n  schema: {\n    previewFPS: { default: 6 },\n    imageWidth: { default: 1024 },\n    imageHeight: { default: 1024 / (16 / 9) }\n  },\n\n  init() {\n    this.lastUpdate = performance.now();\n    this.localSnapCount = 0; // Counter that is used to arrange photos\n\n    this.renderTarget = new THREE.WebGLRenderTarget(this.data.imageWidth, this.data.imageHeight, {\n      format: THREE.RGBAFormat,\n      minFilter: THREE.LinearFilter,\n      magFilter: THREE.NearestFilter,\n      encoding: THREE.sRGBEncoding,\n      depth: false,\n      stencil: false\n    });\n\n    this.camera = new THREE.PerspectiveCamera(50, this.renderTarget.width / this.renderTarget.height, 0.1, 30000);\n    this.camera.rotation.set(0, Math.PI, 0);\n    this.camera.position.set(0, 0, 0.05);\n    this.camera.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"camera\", this.camera);\n\n    const material = new THREE.MeshBasicMaterial({\n      map: this.renderTarget.texture\n    });\n\n    // Bit of a hack here to only update the renderTarget when the screens are in view and at a reduced FPS\n    material.map.isVideoTexture = true;\n    material.map.update = () => {\n      if (enableCameraViewport && performance.now() - this.lastUpdate >= 1000 / this.data.previewFPS) {\n        this.updateRenderTargetNextTick = true;\n      }\n    };\n\n    cameraModelPromise.then(model => {\n      const mesh = model.scene.clone();\n      mesh.scale.set(2, 2, 2);\n      mesh.matrixNeedsUpdate = true;\n      this.el.setObject3D(\"mesh\", mesh);\n\n      const width = 0.28;\n      const geometry = new THREE.PlaneBufferGeometry(width, width / this.camera.aspect);\n\n      const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n      if (environmentMapComponent) {\n        environmentMapComponent.applyEnvironmentMap(this.el.object3D);\n      }\n\n      if (enableCameraViewport) {\n        const screen = new THREE.Mesh(geometry, material);\n        screen.rotation.set(0, Math.PI, 0);\n        screen.position.set(0, 0, -0.042);\n        screen.matrixNeedsUpdate = true;\n        this.el.setObject3D(\"screen\", screen);\n\n        const selfieScreen = new THREE.Mesh(geometry, material);\n        selfieScreen.position.set(0, 0.4, 0);\n        selfieScreen.scale.set(-2, 2, 2);\n        selfieScreen.matrixNeedsUpdate = true;\n        this.el.setObject3D(\"selfieScreen\", selfieScreen);\n\n        this.updateRenderTargetNextTick = true;\n      }\n\n      this.cameraSystem = this.el.sceneEl.systems[\"camera-tools\"];\n      this.cameraSystem.register(this.el);\n    });\n\n    this.el.setAttribute(\"hover-menu__camera\", { template: \"#camera-hover-menu\", dirs: [\"forward\", \"back\"] });\n    this.el.components[\"hover-menu__camera\"].getHoverMenu().then(() => {\n      this.snapButton = this.el.querySelector(\".snap-button\");\n      this.snapButton.object3D.addEventListener(\"interact\", () => {\n        this.takeSnapshotNextTick = true;\n      });\n    });\n  },\n\n  remove() {\n    this.cameraSystem.deregister(this.el);\n    this.el.sceneEl.systems[\"camera-mirror\"].unmirrorCameraAtEl(this.el);\n    this.el.sceneEl.emit(\"camera_removed\");\n  },\n\n  focus(el, track) {\n    if (track) {\n      this.trackTarget = el;\n    } else {\n      this.trackTarget = null;\n    }\n\n    this.lookAt(el);\n  },\n\n  lookAt: (function() {\n    const targetPos = new THREE.Vector3();\n    return function(el) {\n      targetPos.setFromMatrixPosition(el.object3D.matrixWorld);\n      this.el.object3D.lookAt(targetPos);\n      this.el.object3D.matrixNeedsUpdate = true;\n    };\n  })(),\n\n  mirror() {\n    this.el.sceneEl.systems[\"camera-mirror\"].mirrorCameraAtEl(this.el);\n  },\n\n  unmirror() {\n    this.el.sceneEl.systems[\"camera-mirror\"].unmirrorCameraAtEl(this.el);\n  },\n\n  onAvatarUpdated() {\n    delete this.playerHead;\n  },\n\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const heldLeftHand = interaction.state.leftHand.held === this.el;\n    const heldRightHand = interaction.state.rightHand.held === this.el;\n    const heldRightRemote = interaction.state.rightRemote.held === this.el;\n    if (\n      (heldLeftHand && userinput.get(interaction.options.leftHand.grabPath)) ||\n      (heldRightHand && userinput.get(interaction.options.rightHand.grabPath)) ||\n      (heldRightRemote && userinput.get(interaction.options.rightRemote.grabPath))\n    ) {\n      this.localSnapCount = 0;\n    }\n\n    let grabberId;\n    if (heldRightHand) {\n      grabberId = \"player-right-controller\";\n    } else if (heldLeftHand) {\n      grabberId = \"player-left-controller\";\n    } else if (heldRightRemote) {\n      grabberId = \"cursor\";\n    }\n    if (grabberId) {\n      const grabberPaths = pathsMap[grabberId];\n      if (userinput.get(grabberPaths.takeSnapshot)) {\n        this.takeSnapshotNextTick = true;\n      }\n    }\n\n    if (userinput.get(paths.actions.takeSnapshot)) {\n      this.takeSnapshotNextTick = true;\n    }\n  },\n\n  tock: (function() {\n    const tempHeadScale = new THREE.Vector3();\n\n    return function tock() {\n      const sceneEl = this.el.sceneEl;\n      const renderer = this.renderer || sceneEl.renderer;\n      const now = performance.now();\n\n      // Perform lookAt in tock so it will re-orient after grabs, etc.\n      if (this.trackTarget) {\n        if (this.trackTarget.parentNode) {\n          this.lookAt(this.trackTarget);\n        } else {\n          this.trackTarget = null; // Target removed\n        }\n      }\n\n      if (!this.playerHead) {\n        const headEl = document.getElementById(\"player-head\");\n        this.playerHead = headEl && headEl.object3D;\n      }\n\n      if (!this.playerHud) {\n        const hudEl = document.getElementById(\"player-hud\");\n        this.playerHud = hudEl && hudEl.object3D;\n      }\n\n      if (this.takeSnapshotNextTick || this.updateRenderTargetNextTick) {\n        if (this.playerHead) {\n          tempHeadScale.copy(this.playerHead.scale);\n          this.playerHead.scale.set(1, 1, 1);\n          this.playerHead.updateMatrices(true, true);\n          this.playerHead.updateMatrixWorld(true, true);\n        }\n\n        let playerHudWasVisible = false;\n\n        if (this.playerHud) {\n          playerHudWasVisible = this.playerHud.visible;\n          this.playerHud.visible = false;\n          if (this.el.sceneEl.systems[\"post-physics\"]) {\n            this.el.sceneEl.systems[\"post-physics\"].spriteSystem.mesh.visible = false;\n          }\n        }\n\n        const tmpVRFlag = renderer.vr.enabled;\n        const tmpOnAfterRender = sceneEl.object3D.onAfterRender;\n        delete sceneEl.object3D.onAfterRender;\n        renderer.vr.enabled = false;\n\n        renderer.setRenderTarget(this.renderTarget);\n        renderer.render(sceneEl.object3D, this.camera);\n        renderer.setRenderTarget(null);\n\n        renderer.vr.enabled = tmpVRFlag;\n        sceneEl.object3D.onAfterRender = tmpOnAfterRender;\n        if (this.playerHead) {\n          this.playerHead.scale.copy(tempHeadScale);\n          this.playerHead.updateMatrices(true, true);\n          this.playerHead.updateMatrixWorld(true, true);\n        }\n        if (this.playerHud) {\n          this.playerHud.visible = playerHudWasVisible;\n          if (this.el.sceneEl.systems[\"post-physics\"]) {\n            this.el.sceneEl.systems[\"post-physics\"].spriteSystem.mesh.visible = true;\n          }\n        }\n        this.lastUpdate = now;\n        this.updateRenderTargetNextTick = false;\n      }\n\n      if (this.takeSnapshotNextTick) {\n        const width = this.renderTarget.width;\n        const height = this.renderTarget.height;\n        if (!this.snapPixels) {\n          this.snapPixels = new Uint8Array(width * height * 4);\n        }\n        renderer.readRenderTargetPixels(this.renderTarget, 0, 0, width, height, this.snapPixels);\n        pixelsToPNG(this.snapPixels, width, height).then(file => {\n          const { orientation } = spawnMediaAround(this.el, file, \"camera-photo\", this.localSnapCount, true);\n\n          orientation.then(() => {\n            this.el.sceneEl.emit(\"object_spawned\", { objectType: ObjectTypes.CAMERA });\n          });\n        });\n        sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_TOOK_SNAPSHOT);\n        this.takeSnapshotNextTick = false;\n        this.localSnapCount++;\n      }\n    };\n  })()\n});\n","import { addMedia } from \"../utils/media-utils\";\nimport { ObjectContentOrigins } from \"../object-types\";\nimport { guessContentType } from \"../utils/media-url-utils\";\n\nAFRAME.registerComponent(\"clone-media-button\", {\n  init() {\n    this.updateSrc = () => {\n      const src = (this.src = this.targetEl.components[\"media-loader\"].data.src);\n      const visible = src && guessContentType(src) !== \"video/vnd.hubs-webrtc\";\n      this.el.object3D.visible = !!visible;\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n      this.targetEl.addEventListener(\"media_resolved\", this.updateSrc, { once: true });\n      this.updateSrc();\n    });\n\n    this.onClick = () => {\n      const src = this.src;\n      const { contentSubtype, resize } = this.targetEl.components[\"media-loader\"].data;\n      const { entity } = addMedia(src, \"#interactable-media\", ObjectContentOrigins.URL, contentSubtype, true, resize);\n\n      entity.object3D.matrixNeedsUpdate = true;\n\n      entity.setAttribute(\"offset-relative-to\", {\n        target: \"#player-camera\",\n        offset: { x: 0, y: 0, z: -1.5 }\n      });\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","import { isHubsSceneUrl, isHubsRoomUrl, isHubsAvatarUrl } from \"../utils/media-url-utils\";\nimport { guessContentType } from \"../utils/media-url-utils\";\n\nAFRAME.registerComponent(\"open-media-button\", {\n  init() {\n    this.label = this.el.querySelector(\"[text]\");\n\n    this.updateSrc = () => {\n      const src = (this.src = this.targetEl.components[\"media-loader\"].data.src);\n      const visible = src && guessContentType(src) !== \"video/vnd.hubs-webrtc\";\n      const mayChangeScene = this.el.sceneEl.systems.permissions.canOrWillIfCreator(\"update_hub\");\n\n      this.el.object3D.visible = !!visible;\n\n      if (visible) {\n        let label = \"open link\";\n        if (isHubsAvatarUrl(src)) {\n          label = \"use avatar\";\n        } else if (isHubsSceneUrl(src) && mayChangeScene) {\n          label = \"use scene\";\n        } else if (isHubsRoomUrl(src)) {\n          label = \"visit room\";\n        }\n        this.label.setAttribute(\"text\", \"value\", label);\n      }\n    };\n\n    this.onClick = () => {\n      const mayChangeScene = this.el.sceneEl.systems.permissions.canOrWillIfCreator(\"update_hub\");\n\n      if (isHubsAvatarUrl(this.src)) {\n        const avatarId = new URL(this.src).pathname.split(\"/\").pop();\n        window.APP.store.update({ profile: { avatarId } });\n      } else if (isHubsSceneUrl(this.src) && mayChangeScene) {\n        this.el.sceneEl.emit(\"scene_media_selected\", this.src);\n      } else if (isHubsRoomUrl(this.src)) {\n        location.href = this.src;\n      } else {\n        window.open(this.src);\n      }\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n      this.targetEl.addEventListener(\"media_resolved\", this.updateSrc, { once: true });\n      this.updateSrc();\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\nconst AMMO_BODY_ATTRIBUTES = { type: \"kinematic\", collisionFilterMask: COLLISION_LAYERS.HANDS };\n\nconst TRANSFORM_MODE = {\n  AXIS: \"axis\",\n  PUPPET: \"puppet\",\n  CURSOR: \"cursor\",\n  ALIGN: \"align\",\n  SCALE: \"scale\"\n};\n\nconst SCALE_SENSITIVITY = 100;\nconst MIN_SCALE = 0.1;\nconst MAX_SCALE = 100;\n\nconst STEP_LENGTH = Math.PI / 10;\nconst CAMERA_WORLD_QUATERNION = new THREE.Quaternion();\nconst CAMERA_WORLD_POSITION = new THREE.Vector3();\nconst TARGET_WORLD_QUATERNION = new THREE.Quaternion();\nconst v = new THREE.Vector3();\nconst v2 = new THREE.Vector3();\nconst q = new THREE.Quaternion();\nconst q2 = new THREE.Quaternion();\n\nAFRAME.registerComponent(\"transform-button\", {\n  schema: {\n    mode: {\n      type: \"string\",\n      oneof: Object.values(TRANSFORM_MODE),\n      default: TRANSFORM_MODE.CURSOR\n    },\n    axis: { type: \"vec3\", default: null }\n  },\n  init() {\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n    });\n    const rightHand = document.querySelector(\"#player-right-controller\");\n    this.onGrabStart = e => {\n      if (!this.targetEl) {\n        return;\n      }\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) {\n        return;\n      }\n      if (this.targetEl.body) {\n        this.targetEl.setAttribute(\"ammo-body\", AMMO_BODY_ATTRIBUTES);\n      }\n      this.transformSystem = this.transformSystem || AFRAME.scenes[0].systems[\"transform-selected-object\"];\n      this.transformSystem.startTransform(\n        this.targetEl.object3D,\n        e.object3D.el.id === \"cursor\" ? rightHand.object3D : e.object3D,\n        this.data\n      );\n    };\n    this.onGrabEnd = () => {\n      this.transformSystem = this.transformSystem || AFRAME.scenes[0].systems[\"transform-selected-object\"];\n      this.transformSystem.stopTransform();\n    };\n  },\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onGrabStart);\n    this.el.object3D.addEventListener(\"holdable-button-down\", this.onGrabStart);\n    this.el.object3D.addEventListener(\"holdable-button-up\", this.onGrabEnd);\n  },\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onGrabStart);\n    this.el.object3D.removeEventListener(\"holdable-button-down\", this.onGrabStart);\n    this.el.object3D.removeEventListener(\"holdable-button-up\", this.onGrabEnd);\n  }\n});\n\nAFRAME.registerSystem(\"transform-selected-object\", {\n  init() {\n    this.target = null;\n    this.mode = null;\n    this.transforming = false;\n    this.axis = new THREE.Vector3();\n    this.store = window.APP.store;\n\n    this.dxStore = 0;\n    this.dxApplied = 0;\n    this.dyAll = 0;\n    this.dyStore = 0;\n    this.dyApplied = 0;\n\n    this.puppet = {\n      initialControllerOrientation: new THREE.Quaternion(),\n      initialControllerOrientation_inverse: new THREE.Quaternion(),\n      initialObjectOrientation: new THREE.Quaternion(),\n      currentControllerOrientation: new THREE.Quaternion(),\n      controllerOrientationDelta: new THREE.Quaternion()\n    };\n\n    this.planarInfo = {\n      plane: new THREE.Mesh(\n        new THREE.PlaneBufferGeometry(100000, 100000, 2, 2),\n        new THREE.MeshBasicMaterial({\n          visible: false,\n          wireframe: true,\n          side: THREE.DoubleSide,\n          transparent: true,\n          opacity: 0.3\n        })\n      ),\n      normal: new THREE.Vector3(),\n      intersections: [],\n      previousPointOnPlane: new THREE.Vector3(),\n      currentPointOnPlane: new THREE.Vector3(),\n      deltaOnPlane: new THREE.Vector3(),\n      finalProjectedVec: new THREE.Vector3()\n    };\n    this.el.object3D.add(this.planarInfo.plane);\n  },\n\n  stopTransform() {\n    this.transforming = false;\n  },\n\n  startPlaneCasting() {\n    const { plane, intersections, previousPointOnPlane } = this.planarInfo;\n\n    this.el.camera.getWorldQuaternion(CAMERA_WORLD_QUATERNION);\n    plane.quaternion.copy(CAMERA_WORLD_QUATERNION);\n    this.target.getWorldPosition(plane.position);\n    plane.matrixNeedsUpdate = true;\n    plane.updateMatrixWorld(true);\n\n    intersections.length = 0;\n    this.raycaster =\n      this.raycaster || document.querySelector(\"#cursor-controller\").components[\"cursor-controller\"].raycaster;\n    const far = this.raycaster.far;\n    this.raycaster.far = 1000;\n    plane.raycast(this.raycaster, intersections);\n    this.raycaster.far = far;\n    this.transforming = !!intersections[0];\n    if (!this.transforming) {\n      return;\n    }\n\n    previousPointOnPlane.copy(intersections[0].point);\n\n    this.target.getWorldQuaternion(TARGET_WORLD_QUATERNION);\n\n    v.set(0, 0, -1).applyQuaternion(CAMERA_WORLD_QUATERNION);\n    v2.set(0, 0, -1).applyQuaternion(TARGET_WORLD_QUATERNION);\n    this.sign = v.dot(v2) > 0 ? 1 : -1;\n\n    v.set(0, 1, 0); //.applyQuaternion(this.CAMERA_WORLD_QUATERNION);\n    v2.set(0, 1, 0).applyQuaternion(TARGET_WORLD_QUATERNION);\n    this.sign2 = v.dot(v2) > 0 ? 1 : -1;\n\n    this.dyAll = 0;\n    this.dyStore = 0;\n    this.dyApplied = 0;\n    this.dxAll = 0;\n    this.dxStore = 0;\n    this.dxApplied = 0;\n  },\n\n  startTransform(target, hand, data) {\n    this.target = target;\n    this.hand = hand;\n    this.mode = data.mode;\n    this.transforming = true;\n\n    if (this.mode === TRANSFORM_MODE.ALIGN) {\n      this.store.update({ activity: { hasRecentered: true } });\n      return;\n    } else if (this.mode === TRANSFORM_MODE.SCALE) {\n      this.store.update({ activity: { hasScaled: true } });\n    } else {\n      this.store.update({ activity: { hasRotated: true } });\n    }\n\n    if (this.mode === TRANSFORM_MODE.PUPPET) {\n      this.target.getWorldQuaternion(this.puppet.initialObjectOrientation);\n      this.hand.getWorldQuaternion(this.puppet.initialControllerOrientation);\n      this.puppet.initialControllerOrientation_inverse.copy(this.puppet.initialControllerOrientation).inverse();\n      return;\n    }\n\n    if (this.mode === TRANSFORM_MODE.AXIS) {\n      this.axis.copy(data.axis);\n    }\n\n    this.startPlaneCasting();\n  },\n\n  puppetingTick() {\n    // Find controller delta as a quaternion, then apply it to the object, snapping in fixed increments if desired:\n    // Snap to fixed angle increments by converting to an Euler,\n    // restricting the angles using Math.floor, and converting back to a quaternion.\n    const {\n      currentControllerOrientation,\n      controllerOrientationDelta,\n      initialControllerOrientation_inverse,\n      initialObjectOrientation\n    } = this.puppet;\n    this.hand.getWorldQuaternion(currentControllerOrientation);\n    controllerOrientationDelta.copy(initialControllerOrientation_inverse).premultiply(currentControllerOrientation);\n    this.target.quaternion.copy(initialObjectOrientation).premultiply(controllerOrientationDelta);\n    this.target.matrixNeedsUpdate = true;\n  },\n\n  cursorAxisOrScaleTick() {\n    const {\n      plane,\n      normal,\n      intersections,\n      previousPointOnPlane,\n      currentPointOnPlane,\n      deltaOnPlane,\n      finalProjectedVec\n    } = this.planarInfo;\n\n    this.target.getWorldPosition(plane.position);\n    this.el.camera.getWorldQuaternion(plane.quaternion);\n    plane.matrixNeedsUpdate = true;\n    const cameraToPlaneDistance = v.sub(plane.position).length();\n\n    intersections.length = 0;\n    const far = this.raycaster.far;\n    this.raycaster.far = 1000;\n    plane.raycast(this.raycaster, intersections);\n    this.raycaster.far = far;\n    const intersection = intersections[0]; // point\n    if (!intersection) return;\n\n    normal.set(0, 0, -1).applyQuaternion(plane.quaternion);\n\n    currentPointOnPlane.copy(intersection.point);\n    deltaOnPlane.copy(currentPointOnPlane).sub(previousPointOnPlane);\n    const SENSITIVITY = 10;\n    finalProjectedVec\n      .copy(deltaOnPlane)\n      .projectOnPlane(normal)\n      .applyQuaternion(q.copy(plane.quaternion).inverse())\n      .multiplyScalar(SENSITIVITY / cameraToPlaneDistance);\n    if (this.mode === TRANSFORM_MODE.CURSOR || this.mode === TRANSFORM_MODE.SCALE) {\n      const modify = AFRAME.scenes[0].systems.userinput.get(paths.actions.transformModifier);\n\n      this.dyAll = this.dyStore + finalProjectedVec.y;\n      this.dyApplied = modify ? this.dyAll : Math.round(this.dyAll / STEP_LENGTH) * STEP_LENGTH;\n      this.dyStore = this.dyAll - this.dyApplied;\n\n      this.dxAll = this.dxStore + finalProjectedVec.x;\n      this.dxApplied = modify ? this.dxAll : Math.round(this.dxAll / STEP_LENGTH) * STEP_LENGTH;\n      this.dxStore = this.dxAll - this.dxApplied;\n\n      if (this.mode === TRANSFORM_MODE.CURSOR) {\n        this.target.getWorldQuaternion(TARGET_WORLD_QUATERNION);\n        v.set(1, 0, 0).applyQuaternion(modify ? CAMERA_WORLD_QUATERNION : TARGET_WORLD_QUATERNION);\n        q.setFromAxisAngle(v, modify ? -this.dyApplied : this.sign2 * this.sign * -this.dyApplied);\n\n        if (modify) {\n          v.set(0, 1, 0).applyQuaternion(CAMERA_WORLD_QUATERNION);\n        } else {\n          v.set(0, 1, 0);\n        }\n        q2.setFromAxisAngle(v, this.dxApplied);\n\n        this.target.quaternion.premultiply(q).premultiply(q2);\n      } else {\n        const scaleFactor =\n          THREE.Math.clamp(finalProjectedVec.y + finalProjectedVec.x, -0.0005, 0.0005) * SCALE_SENSITIVITY;\n\n        const newScale = this.target.scale.x * (1.0 + scaleFactor);\n\n        if (newScale > MIN_SCALE && newScale < MAX_SCALE) {\n          this.target.scale.multiplyScalar(1.0 + scaleFactor);\n        }\n      }\n\n      this.target.matrixNeedsUpdate = true;\n    } else if (this.mode === TRANSFORM_MODE.AXIS) {\n      this.dxAll = this.dxStore + finalProjectedVec.x;\n      this.dxApplied = Math.round(this.dxAll / STEP_LENGTH) * STEP_LENGTH;\n      this.dxStore = this.dxAll - this.dxApplied;\n\n      this.target.quaternion.multiply(q.setFromAxisAngle(this.axis, -this.sign * this.dxApplied));\n      this.target.matrixNeedsUpdate = true;\n    }\n\n    previousPointOnPlane.copy(currentPointOnPlane);\n  },\n\n  tick() {\n    if (!this.transforming) {\n      return;\n    }\n\n    if (this.mode === TRANSFORM_MODE.ALIGN) {\n      this.el.camera.getWorldPosition(CAMERA_WORLD_POSITION);\n      this.target.lookAt(CAMERA_WORLD_POSITION);\n      this.transforming = false;\n      return;\n    }\n\n    if (this.mode === TRANSFORM_MODE.PUPPET) {\n      this.puppetingTick();\n      return;\n    }\n    this.cursorAxisOrScaleTick();\n  }\n});\n\nAFRAME.registerComponent(\"transform-button-selector\", {\n  tick() {\n    const hand = AFRAME.scenes[0].systems.userinput.get(paths.actions.rightHand.pose);\n    if (!hand) {\n      if (this.el.components[\"transform-button\"].data.mode !== TRANSFORM_MODE.CURSOR) {\n        this.el.setAttribute(\"transform-button\", \"mode\", TRANSFORM_MODE.CURSOR);\n      }\n    } else {\n      if (this.el.components[\"transform-button\"].data.mode !== TRANSFORM_MODE.PUPPET) {\n        this.el.setAttribute(\"transform-button\", \"mode\", TRANSFORM_MODE.PUPPET);\n      }\n    }\n  }\n});\n\nconst FORWARD = new THREE.Vector3(0, 0, 1);\nconst TWO_PI = 2 * Math.PI;\nAFRAME.registerComponent(\"visible-if-transforming\", {\n  init() {},\n  tick(t) {\n    const shouldBeVisible = AFRAME.scenes[0].systems[\"transform-selected-object\"].transforming;\n    const visibleNeedsUpdate = this.el.getAttribute(\"visible\") !== shouldBeVisible;\n    if (visibleNeedsUpdate) {\n      this.el.setAttribute(\"visible\", AFRAME.scenes[0].systems[\"transform-selected-object\"].transforming);\n    }\n\n    if (shouldBeVisible) {\n      this.el.object3D.quaternion.setFromAxisAngle(FORWARD, TWO_PI * Math.sin(t / 1000.0));\n      this.el.object3D.matrixNeedsUpdate = true;\n    }\n  }\n});\n","const CYLINDER_TEXTURE =\n  \"data:image/png;base64,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\";\n\nimport { SOUND_TELEPORT_START, SOUND_TELEPORT_END } from \"../systems/sound-effects-system\";\n\nfunction easeIn(t) {\n  return t * t;\n}\n\nfunction easeOutIn(t) {\n  if (t < 0.5) return 0.5 * ((t = t * 2 - 1) * t * t + 1);\n  return 0.5 * (t = t * 2 - 1) * t * t + 0.5;\n}\n\nconst RayCurve = function(numPoints, width) {\n  this.geometry = new THREE.BufferGeometry();\n  this.vertices = new Float32Array(numPoints * 3 * 2);\n  this.uvs = new Float32Array(numPoints * 2 * 2);\n  this.width = width;\n\n  this.geometry.addAttribute(\"position\", new THREE.BufferAttribute(this.vertices, 3).setDynamic(true));\n\n  this.material = new THREE.MeshBasicMaterial({\n    side: THREE.DoubleSide,\n    transparent: true\n  });\n\n  this.mesh = new THREE.Mesh(this.geometry, this.material);\n  this.mesh.drawMode = THREE.TriangleStripDrawMode;\n\n  this.mesh.frustumCulled = false;\n  this.mesh.vertices = this.vertices;\n\n  this.direction = new THREE.Vector3();\n  this.numPoints = numPoints;\n};\n\nRayCurve.prototype = {\n  setDirection: function(direction) {\n    const UP = new THREE.Vector3(0, 1, 0);\n    this.direction\n      .copy(direction)\n      .cross(UP)\n      .normalize()\n      .multiplyScalar(this.width / 2);\n  },\n\n  setWidth: function(width) {\n    this.width = width;\n  },\n\n  setPoint: (function() {\n    const posA = new THREE.Vector3();\n    const posB = new THREE.Vector3();\n\n    return function(i, point) {\n      posA.copy(point).add(this.direction);\n      posB.copy(point).sub(this.direction);\n\n      let idx = 2 * 3 * i;\n      this.vertices[idx++] = posA.x;\n      this.vertices[idx++] = posA.y;\n      this.vertices[idx++] = posA.z;\n\n      this.vertices[idx++] = posB.x;\n      this.vertices[idx++] = posB.y;\n      this.vertices[idx++] = posB.z;\n\n      this.geometry.attributes.position.needsUpdate = true;\n    };\n  })()\n};\n\nfunction parabolicCurve(p0, v0, t, out) {\n  out.x = p0.x + v0.x * t;\n  out.y = p0.y + v0.y * t - 4.9 * t * t;\n  out.z = p0.z + v0.z * t;\n  return out;\n}\n\nfunction isValidNormalsAngle(collisionNormal, referenceNormal, landingMaxAngle) {\n  const angleNormals = referenceNormal.angleTo(collisionNormal);\n  return THREE.Math.RAD2DEG * angleNormals <= landingMaxAngle;\n}\n\nconst checkLineIntersection = (function() {\n  const direction = new THREE.Vector3();\n  return function checkLineIntersection(start, end, meshes, raycaster, referenceNormal, landingMaxAngle, hitPoint) {\n    direction.copy(end).sub(start);\n    const distance = direction.length();\n    raycaster.far = distance;\n    raycaster.set(start, direction.normalize());\n    const intersects = raycaster.intersectObjects(meshes, true);\n    if (intersects.length > 0 && isValidNormalsAngle(intersects[0].face.normal, referenceNormal, landingMaxAngle)) {\n      hitPoint.copy(intersects[0].point);\n      return true;\n    }\n    return false;\n  };\n})();\n\nfunction getMeshes(collisionEntities) {\n  return collisionEntities\n    .map(function(entity) {\n      return entity.getObject3D(\"mesh\");\n    })\n    .filter(function(n) {\n      return n;\n    });\n}\n\nconst MISS_OPACITY = 0.1;\nconst HIT_OPACITY = 0.3;\nconst MISS_COLOR = 0xff0000;\nconst HIT_COLOR = 0x00ff00;\nconst FORWARD = new THREE.Vector3(0, 0, -1);\nconst LANDING_NORMAL = new THREE.Vector3(0, 1, 0);\nconst MAX_LANDING_ANGLE = 45;\nconst DRAW_TIME_MS = 400;\nconst q = new THREE.Quaternion();\nconst vecHelper = new THREE.Vector3();\n\nAFRAME.registerComponent(\"teleporter\", {\n  schema: {\n    start: { type: \"string\" },\n    confirm: { type: \"string\" },\n    speed: { default: 12 },\n    collisionEntities: { default: \"\" },\n    hitCylinderColor: { type: \"color\", default: \"#99ff99\" },\n    hitCylinderRadius: { default: 0.25, min: 0 },\n    outerRadius: { default: 0.6, min: 0 },\n    hitCylinderHeight: { default: 0.3, min: 0 }\n  },\n\n  init() {\n    this.isTeleporting = false;\n    this.rayCurve = new RayCurve(20, 0.025);\n    this.rayCurve.mesh.visible = false;\n    this.teleportEntity = document.createElement(\"a-entity\");\n    this.teleportEntity.setObject3D(\"mesh\", this.rayCurve.mesh);\n    this.el.sceneEl.appendChild(this.teleportEntity);\n\n    this.p0 = new THREE.Vector3();\n    this.v0 = new THREE.Vector3();\n    this.parabola = Array.from(new Array(this.rayCurve.numPoints), () => new THREE.Vector3());\n    this.hit = false;\n    this.hitPoint = new THREE.Vector3();\n    this.meshes = [];\n    this.raycaster = new THREE.Raycaster();\n    this.rigWorldPosition = new THREE.Vector3();\n    this.newRigWorldPosition = new THREE.Vector3();\n    this.teleportOriginWorldPosition = new THREE.Vector3();\n\n    this.teleportEventDetail = {\n      oldPosition: this.rigWorldPosition,\n      newPosition: this.newRigWorldPosition,\n      hitPoint: this.hitPoint\n    };\n    this.prevHitHeight = 0;\n    this.direction = new THREE.Vector3();\n    this.hitEntity = this.createHitEntity();\n    this.hitEntity.object3D.visible = false;\n    this.el.sceneEl.appendChild(this.hitEntity);\n    this.queryCollisionEntities();\n  },\n\n  queryCollisionEntities: function() {\n    this.collisionEntities = [].slice.call(this.el.sceneEl.querySelectorAll(this.data.collisionEntities));\n    this.meshes = getMeshes(this.collisionEntities);\n  },\n\n  remove() {\n    this.stopPlayingTeleportSound();\n  },\n\n  stopPlayingTeleportSound() {\n    if (this.teleportingSound) {\n      const sfx = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem;\n      sfx.stopSoundNode(this.teleportingSound.source);\n      this.teleportingSound = null;\n    }\n  },\n\n  tick(t, dt) {\n    if (!this.el.sceneEl.is(\"entered\")) return;\n    const sfx = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const { start, confirm, speed } = this.data;\n    const object3D = this.el.object3D;\n\n    if (!this.isTeleporting && userinput.get(start)) {\n      this.isTeleporting = true;\n      this.timeTeleporting = 0;\n      this.hit = false;\n      this.rayCurve.mesh.visible = true;\n      this.rayCurve.mesh.updateMatrixWorld();\n      this.rayCurve.mesh.material.opacity = MISS_OPACITY;\n      this.rayCurve.mesh.material.color.set(MISS_COLOR);\n      this.rayCurve.mesh.material.needsUpdate = true;\n      this.teleportingSound = sfx.playSoundLoopedWithGain(SOUND_TELEPORT_START);\n      if (this.teleportingSound) {\n        this.teleportingSound.gain.gain.value = 0.005;\n      }\n    }\n\n    if (!this.isTeleporting) {\n      return;\n    }\n    if (this.teleportingSound) {\n      this.teleportingSound.gain.gain.value = Math.min(0.025, this.teleportingSound.gain.gain.value + 0.00002 * dt);\n    }\n\n    if (userinput.get(confirm)) {\n      this.hitEntity.setAttribute(\"visible\", false);\n      this.isTeleporting = false;\n      this.rayCurve.mesh.visible = false;\n\n      if (this.teleportingSound) {\n        this.stopPlayingTeleportSound();\n      }\n\n      if (!this.hit || this.timeTeleporting < DRAW_TIME_MS) {\n        return;\n      }\n\n      this.characterController =\n        this.characterController || document.querySelector(\"#player-rig\").components[\"character-controller\"];\n      this.characterController.teleportTo(this.hitPoint);\n\n      sfx.playSoundOneShot(SOUND_TELEPORT_END);\n      return;\n    }\n\n    this.timeTeleporting += dt;\n    object3D.updateMatrixWorld();\n    object3D.matrixWorld.decompose(this.p0, q, vecHelper);\n    this.direction\n      .copy(FORWARD)\n      .applyQuaternion(q)\n      .normalize();\n    this.rayCurve.setDirection(this.direction);\n    this.v0.copy(this.direction).multiplyScalar(speed);\n\n    let collidedIndex = this.rayCurve.numPoints - 1;\n\n    this.hit = false;\n    this.parabola[0].copy(this.p0);\n    const timeSegment = 1 / (this.rayCurve.numPoints - 1);\n    for (let i = 1; i < this.rayCurve.numPoints; i++) {\n      const t = i * timeSegment;\n      parabolicCurve(this.p0, this.v0, t, vecHelper);\n      this.parabola[i].copy(vecHelper);\n\n      if (\n        checkLineIntersection(\n          this.parabola[i - 1],\n          this.parabola[i],\n          this.meshes,\n          this.raycaster,\n          LANDING_NORMAL,\n          MAX_LANDING_ANGLE,\n          this.hitPoint\n        )\n      ) {\n        this.hit = true;\n        collidedIndex = i;\n        break;\n      }\n    }\n\n    const percentToDraw = this.timeTeleporting > DRAW_TIME_MS ? 1 : this.timeTeleporting / DRAW_TIME_MS;\n    const percentRaycasted = collidedIndex / (this.rayCurve.numPoints - 1);\n    const segmentT = (percentToDraw * percentRaycasted) / (this.rayCurve.numPoints - 1);\n\n    for (let i = 0; i < this.rayCurve.numPoints; i++) {\n      const t = i * segmentT;\n      parabolicCurve(this.p0, this.v0, t, vecHelper);\n      this.rayCurve.setPoint(i, vecHelper);\n    }\n\n    const color = this.hit ? HIT_COLOR : MISS_COLOR;\n    const opacity = this.hit && this.timeTeleporting >= DRAW_TIME_MS ? HIT_OPACITY : MISS_OPACITY;\n    this.rayCurve.material.color.set(color);\n    this.rayCurve.material.opacity = opacity;\n\n    this.hitEntity.setAttribute(\"visible\", this.hit);\n    if (this.hit) {\n      this.hitEntity.setAttribute(\"position\", this.hitPoint);\n      this.hitEntity.object3D.traverse(o => {\n        o.matrixNeedsUpdate = true;\n      });\n      const hitEntityOpacity = HIT_OPACITY * easeOutIn(percentToDraw);\n      const dRadii = this.data.outerRadius - this.data.hitCylinderRadius;\n      const outerScale = (this.data.outerRadius - easeIn(percentToDraw) * dRadii) / this.data.outerRadius;\n      this.outerTorus.object3D.scale.set(outerScale, outerScale, 1);\n      this.torus.setAttribute(\"material\", \"opacity\", hitEntityOpacity);\n      this.cylinder.setAttribute(\"material\", \"opacity\", hitEntityOpacity);\n    }\n  },\n\n  createHitEntity() {\n    const data = this.data;\n\n    // Parent.\n    const hitEntity = document.createElement(\"a-entity\");\n    hitEntity.className = \"hitEntity\";\n\n    // Torus.\n    this.torus = document.createElement(\"a-entity\");\n    this.torus.setAttribute(\"geometry\", {\n      primitive: \"torus\",\n      radius: data.hitCylinderRadius,\n      radiusTubular: 0.01,\n      segmentsRadial: 16,\n      segmentsTubular: 18\n    });\n    this.torus.setAttribute(\"rotation\", { x: 90, y: 0, z: 0 });\n    this.torus.setAttribute(\"material\", {\n      shader: \"flat\",\n      color: data.hitCylinderColor,\n      side: \"double\",\n      depthTest: false\n    });\n    hitEntity.appendChild(this.torus);\n\n    // Cylinder.\n    this.cylinder = document.createElement(\"a-entity\");\n    this.cylinder.setAttribute(\"position\", { x: 0, y: data.hitCylinderHeight / 2, z: 0 });\n    if (window.createImageBitmap !== undefined) {\n      this.cylinder.setAttribute(\"rotation\", { x: 0, y: 0, z: 180 });\n    }\n    this.cylinder.setAttribute(\"geometry\", {\n      primitive: \"cylinder\",\n      segmentsHeight: 1,\n      radius: data.hitCylinderRadius,\n      height: data.hitCylinderHeight,\n      openEnded: true\n    });\n    this.cylinder.setAttribute(\"material\", {\n      shader: \"flat\",\n      color: data.hitCylinderColor,\n      side: \"double\",\n      src: CYLINDER_TEXTURE,\n      transparent: true,\n      depthTest: false\n    });\n    hitEntity.appendChild(this.cylinder);\n\n    // create another torus for animating when the hit destination is ready to go\n    this.outerTorus = document.createElement(\"a-entity\");\n    this.outerTorus.setAttribute(\"geometry\", {\n      primitive: \"torus\",\n      radius: data.outerRadius,\n      radiusTubular: 0.01,\n      segmentsRadial: 16,\n      segmentsTubular: 18\n    });\n    this.outerTorus.setAttribute(\"rotation\", { x: 90, y: 0, z: 0 });\n    this.outerTorus.setAttribute(\"material\", {\n      shader: \"flat\",\n      color: data.hitCylinderColor,\n      side: \"double\",\n      opacity: HIT_OPACITY,\n      depthTest: false\n    });\n    this.outerTorus.setAttribute(\"id\", \"outerTorus\");\n    hitEntity.appendChild(this.outerTorus);\n\n    return hitEntity;\n  }\n});\n","import createTextGeometry from \"three-bmfont-text\";\n\n// 1 to match other A-Frame default widths.\nconst DEFAULT_WIDTH = 1;\n\n// @bryik set anisotropy to 16. Improves look of large amounts of text when viewed from angle.\nconst MAX_ANISOTROPY = 16;\n\n/**\n * Due to using negative scale, we return the opposite side specified.\n * https://github.com/mrdoob/three.js/pull/12787/\n */\nfunction parseSide(side) {\n  switch (side) {\n    case \"back\": {\n      return THREE.FrontSide;\n    }\n    case \"double\": {\n      return THREE.DoubleSide;\n    }\n    default: {\n      return THREE.BackSide;\n    }\n  }\n}\n\n/**\n * Determine wrap pixel count. Either specified or by experimental fudge factor.\n * Note that experimental factor will never be correct for variable width fonts.\n */\nfunction computeWidth(wrapPixels, wrapCount, widthFactor) {\n  return wrapPixels || (0.5 + wrapCount) * widthFactor;\n}\n\n/**\n * Compute default font width factor to use.\n */\nfunction computeFontWidthFactor(font) {\n  let sum = 0;\n  let digitsum = 0;\n  let digits = 0;\n  for (const ch of font.chars) {\n    sum += ch.xadvance;\n    if (ch.id >= 48 && ch.id <= 57) {\n      digits++;\n      digitsum += ch.xadvance;\n    }\n  }\n  return digits ? digitsum / digits : sum / font.chars.length;\n}\n\nfunction loadFont(src) {\n  return fetch(src)\n    .then(resp => resp.json())\n    .then(font => {\n      // Fix negative Y offsets for Roboto MSDF font from tool. Experimentally determined.\n      if (src.indexOf(\"/Roboto-msdf.json\") >= 0) {\n        for (const ch of font.chars) {\n          ch.yoffset += 30;\n        }\n      }\n      font.widthFactor = computeFontWidthFactor(font);\n      return font;\n    });\n}\n\nfunction loadTexture(src) {\n  return new Promise((resolve, reject) => {\n    new THREE.ImageLoader().load(\n      src,\n      image => {\n        const texture = new THREE.Texture();\n        texture.image = image;\n        texture.needsUpdate = true;\n        texture.anisotropy = MAX_ANISOTROPY;\n        resolve(texture);\n      },\n      undefined,\n      err => {\n        console.error(\"Error loading font image\", src, err);\n        reject(null);\n      }\n    );\n  });\n}\n\nconst FONTS = {\n  roboto: {\n    json: loadFont(\"https://cdn.aframe.io/fonts/Roboto-msdf.json\"),\n    texture: loadTexture(\"https://cdn.aframe.io/fonts/Roboto-msdf.png\")\n  }\n};\n\nAFRAME.registerComponent(\"text\", {\n  multiple: true,\n  schema: {\n    align: { type: \"string\", default: \"left\", oneOf: [\"left\", \"right\", \"center\"] },\n    alphaTest: { default: 0.5 },\n    // `anchor` defaults to center to match geometries.\n    anchor: { default: \"center\", oneOf: [\"left\", \"right\", \"center\", \"align\"] },\n    baseline: { default: \"center\", oneOf: [\"top\", \"center\", \"bottom\"] },\n    color: { type: \"color\", default: \"#FFF\" },\n    font: { type: \"string\", default: \"roboto\" },\n    // `height` has no default, will be populated at layout.\n    height: { type: \"number\" },\n    letterSpacing: { type: \"number\", default: 0 },\n    // `lineHeight` defaults to font's `lineHeight` value.\n    lineHeight: { type: \"number\" },\n    // `negate` must be true for fonts generated with older versions of msdfgen (white background).\n    negate: { type: \"boolean\", default: true },\n    opacity: { type: \"number\", default: 1.0 },\n    side: { default: \"front\", oneOf: [\"front\", \"back\", \"double\"] },\n    tabSize: { default: 4 },\n    transparent: { default: true },\n    value: { type: \"string\" },\n    whiteSpace: { default: \"normal\", oneOf: [\"normal\", \"pre\", \"nowrap\"] },\n    // `width` defaults to geometry width if present, else `DEFAULT_WIDTH`.\n    width: { type: \"number\" },\n    // `wrapCount` units are about one default font character. Wrap roughly at this number.\n    wrapCount: { type: \"number\", default: 40 },\n    // `wrapPixels` will wrap using bmfont pixel units (e.g., dejavu's is 32 pixels).\n    wrapPixels: { type: \"number\" },\n    // `xOffset` to add padding.\n    xOffset: { type: \"number\", default: 0 },\n    // `zOffset` will provide a small z offset to avoid z-fighting.\n    zOffset: { type: \"number\", default: 0.001 }\n  },\n\n  init: function() {\n    const shaderData = this.getShaderData(this.data);\n    this.shaderObject = new AFRAME.shaders[\"msdf\"].Shader();\n    this.shaderObject.el = this.el;\n    this.shaderObject.init(shaderData);\n    this.shaderObject.update(shaderData);\n    this.shaderObject.material.transparent = shaderData.transparent; // Apparently, was not set on `init` nor `update`.\n    this.shaderObject.material.side = shaderData.side;\n    this.geometry = createTextGeometry();\n    this.mesh = new THREE.Mesh(this.geometry, this.shaderObject.material);\n    this.el.setObject3D(this.attrName, this.mesh);\n  },\n\n  update: function(oldData) {\n    const data = this.data;\n    const shaderData = this.getShaderData(this.data);\n    this.shaderObject.update(shaderData);\n    this.shaderObject.material.transparent = shaderData.transparent; // Apparently, was not set on `init` nor `update`.\n    this.shaderObject.material.side = shaderData.side;\n\n    // New font. `updateFont` will later change data and layout.\n    if (oldData.font !== data.font) {\n      this.updateFont().catch(err => console.error(err));\n    }\n\n    // Not a new font, but we need to accomodate other changes with the existing font.\n    if (this.currentFont != null) {\n      this.updateGeometry(this.geometry, this.currentFont);\n      this.updateLayout(this.currentFont);\n    }\n  },\n\n  /**\n   * Clean up geometry, material, texture, mesh, objects.\n   */\n  remove: function() {\n    this.geometry.dispose();\n    this.geometry = null;\n    this.el.removeObject3D(this.attrName);\n    this.shaderObject.material.dispose();\n    this.shaderObject.material = null;\n    delete this.shaderObject;\n  },\n\n  getShaderData: (function() {\n    const shaderData = {};\n    return function(data) {\n      shaderData.alphaTest = data.alphaTest;\n      shaderData.color = data.color;\n      shaderData.opacity = data.opacity;\n      shaderData.side = parseSide(data.side);\n      shaderData.transparent = data.transparent;\n      shaderData.negate = data.negate;\n      return shaderData;\n    };\n  })(),\n\n  /**\n   * Load font for geometry, load font image for material, and apply.\n   */\n  updateFont: function() {\n    const data = this.data;\n    const geometry = this.geometry;\n\n    // Make invisible during font swap.\n    this.mesh.visible = false;\n    const fetchFontData = Promise.all([FONTS[data.font].json, FONTS[data.font].texture]);\n    return fetchFontData.then(([font, texture]) => {\n      if (font.pages.length !== 1) {\n        throw new Error(\"Currently only single-page bitmap fonts are supported.\");\n      }\n      this.currentFont = font;\n      this.updateGeometry(geometry, font);\n      this.shaderObject.update({ map: texture });\n      this.updateLayout(font);\n      this.mesh.visible = true;\n    });\n  },\n\n  /**\n   * Update layout with anchor, alignment, baseline, and considering any meshes.\n   */\n  updateLayout: function(font) {\n    const el = this.el;\n    const data = this.data;\n    const geometry = this.geometry;\n    const mesh = this.mesh;\n\n    if (!geometry.layout) {\n      return;\n    }\n\n    // Determine width to use (defined width, geometry's width, or default width).\n    const geometryComponent = el.getAttribute(\"geometry\");\n    const width = data.width || (geometryComponent && geometryComponent.width) || DEFAULT_WIDTH;\n\n    // Determine wrap pixel count. Either specified or by experimental fudge factor.\n    // Note that experimental factor will never be correct for variable width fonts.\n    const textRenderWidth = computeWidth(data.wrapPixels, data.wrapCount, font.widthFactor);\n    const textScale = width / textRenderWidth;\n\n    // Determine height to use.\n    const layout = geometry.layout;\n    const height = textScale * (layout.height + layout.descender);\n\n    // Update geometry dimensions to match text layout if width and height are set to 0.\n    // For example, scales a plane to fit text.\n    if (geometryComponent && geometryComponent.primitive === \"plane\") {\n      if (!geometryComponent.width) {\n        el.setAttribute(\"geometry\", \"width\", width);\n      }\n      if (!geometryComponent.height) {\n        el.setAttribute(\"geometry\", \"height\", height);\n      }\n    }\n\n    // Calculate X position to anchor text left, center, or right.\n    const anchor = data.anchor === \"align\" ? data.align : data.anchor;\n    let x, y;\n    if (anchor === \"left\") {\n      x = 0;\n    } else if (anchor === \"right\") {\n      x = -1 * layout.width;\n    } else if (anchor === \"center\") {\n      x = (-1 * layout.width) / 2;\n    } else {\n      throw new TypeError(\"Invalid text.anchor property value\", anchor);\n    }\n\n    // Calculate Y position to anchor text top, center, or bottom.\n    const baseline = data.baseline;\n    if (baseline === \"bottom\") {\n      y = 0;\n    } else if (baseline === \"top\") {\n      y = -1 * layout.height + layout.ascender;\n    } else if (baseline === \"center\") {\n      y = (-1 * layout.height) / 2;\n    } else {\n      throw new TypeError(\"Invalid text.baseline property value\", baseline);\n    }\n\n    // Position and scale mesh to apply layout.\n    mesh.position.x = x * textScale + data.xOffset;\n    mesh.position.y = y * textScale;\n    // Place text slightly in front to avoid Z-fighting.\n    mesh.position.z = data.zOffset;\n    mesh.scale.set(textScale, -1 * textScale, textScale);\n  },\n\n  /**\n   * Update the text geometry using `three-bmfont-text.update`.\n   */\n  updateGeometry: (function() {\n    const geometryUpdateBase = {};\n    const geometryUpdateData = {};\n    const newLineRegex = /\\\\n/g;\n    const tabRegex = /\\\\t/g;\n\n    return function(geometry, font) {\n      const data = this.data;\n\n      geometryUpdateData.font = font;\n      geometryUpdateData.lineHeight =\n        data.lineHeight && isFinite(data.lineHeight) ? data.lineHeight : font.common.lineHeight;\n      geometryUpdateData.text = data.value\n        .toString()\n        .replace(newLineRegex, \"\\n\")\n        .replace(tabRegex, \"\\t\");\n      geometryUpdateData.width = computeWidth(data.wrapPixels, data.wrapCount, font.widthFactor);\n      geometry.update(Object.assign(geometryUpdateBase, data, geometryUpdateData));\n    };\n  })()\n});\n","export const sets = {};\nsets.global = \"global\";\nsets.inputFocused = \"inputFocused\";\nsets.cursorHoveringOnPen = \"cursorHoveringOnPen\";\nsets.cursorHoveringOnCamera = \"cursorHoveringOnCamera\";\nsets.cursorHoveringOnInteractable = \"cursorHoveringOnInteractable\";\nsets.cursorHoveringOnUI = \"cursorHoveringOnUI\";\nsets.cursorHoveringOnVideo = \"cursorHoveringOnVideo\";\nsets.cursorHoveringOnNothing = \"cursorHoveringOnNothing\";\nsets.cursorHoldingPen = \"cursorHoldingPen\";\nsets.cursorHoldingCamera = \"cursorHoldingCamera\";\nsets.cursorHoldingInteractable = \"cursorHoldingInteractable\";\nsets.cursorHoldingUI = \"cursorHoldingUI\";\nsets.cursorHoldingNothing = \"cursorHoldingNothing\";\nsets.rightHandTeleporting = \"rightHandTeleporting\";\nsets.rightHandHoveringOnPen = \"rightHandHoveringOnPen\";\nsets.rightHandHoveringOnCamera = \"rightHandHoveringOnCamera\";\nsets.rightHandHoveringOnInteractable = \"rightHandHoveringOnInteractable\";\nsets.rightHandHoveringOnNothing = \"rightHandHoveringOnNothing\";\nsets.rightHandHoldingPen = \"rightHandHoldingPen\";\nsets.rightHandHoldingCamera = \"rightHandHoldingCamera\";\nsets.rightHandHoldingInteractable = \"rightHandHoldingInteractable\";\nsets.leftHandTeleporting = \"leftHandTeleporting\";\nsets.leftHandHoveringOnPen = \"leftHandHoveringOnPen\";\nsets.leftHandHoveringOnCamera = \"leftHandHoveringOnCamera\";\nsets.leftHandHoveringOnInteractable = \"leftHandHoveringOnInteractable\";\nsets.leftHandHoldingPen = \"leftHandHoldingPen\";\nsets.leftHandHoldingCamera = \"leftHandHoldingCamera\";\nsets.leftHandHoldingInteractable = \"leftHandHoldingInteractable\";\nsets.leftHandHoveringOnNothing = \"leftHandHoveringOnNothing\";\n","const { detect } = require(\"detect-browser\");\n\nconst browser = detect();\n\n// Precision on device detection is fuzzy -- we can sometimes know if a device is definitely\n// available, or definitely *not* available, and assume it may be available otherwise.\nexport const VR_DEVICE_AVAILABILITY = {\n  yes: \"yes\", // Implies VR can be launched into on this device immediately, in this browser\n  no: \"no\", // Implies this VR device is definitely not supported regardless of browser\n  maybe: \"maybe\" // Implies this device may support this VR platform, but may not be installed or in a compatible browser\n};\n\nfunction isMaybeGearVRCompatibleDevice(ua) {\n  return /\\WAndroid\\W/.test(ua);\n}\n\nfunction isMaybeDaydreamCompatibleDevice(ua) {\n  return /\\WAndroid\\W/.test(ua);\n}\n\n// Blacklist of VR device name regex matchers that we do not want to consider as valid VR devices\n// that can be entered into as a \"generic\" entry flow.\nconst GENERIC_ENTRY_TYPE_DEVICE_BLACKLIST = [/cardboard/i];\n\n// Tries to determine VR entry compatibility regardless of the current browser.\n//\n// For each VR \"entry type\", returns VR_DEVICE_AVAILABILITY.yes if that type can be launched into directly from this browser\n// on this device, returns VR_DEVICE_AVAILABILITY.no if that type is known to not be possible to ever use on this device no matter what,\n// and VR_DEVICE_AVAILABILITY.maybe if the device potentially could support that type if a different browser was running, or if\n// the software was setup, an HMD was purchased, etc.\n//\n// When \"yes\" or \"maybe\", we should present the option. If \"maybe\", when chosen try to get them into a compatible browser.\n// Once in a compatible browser, we should assume it will work (if it doesn't, it's because they don't have the headset,\n// haven't installed the software, our guess about their phone was wrong, etc.)\n//\n// At the time of this writing there are the following VR \"entry types\" that will be validated by this method:\n//\n// - screen: Enter \"on-screen\" in 2D\n// - generic: Generic WebVR (platform/OS agnostic indicator if a general 'Enter VR' option should be presented.)\n// - daydream: Google Daydream\n// - gearvr: Oculus GearVR\n// - cardboard: Google Cardboard\n//\nexport async function getAvailableVREntryTypes() {\n  const ua = navigator.userAgent;\n  const isSamsungBrowser = browser.name === \"chrome\" && /SamsungBrowser/.test(ua);\n  const isMobile = AFRAME.utils.device.isMobile();\n  const isMobileVR = AFRAME.utils.device.isMobileVR();\n\n  // This needs to be kept up-to-date with the latest browsers that can support VR and Hubs.\n  // Checking for navigator.getVRDisplays always passes b/c of polyfill.\n  const isWebVRCapableBrowser = window.hasNativeWebVRImplementation;\n\n  const isDaydreamCapableBrowser = !!(isWebVRCapableBrowser && browser.name === \"chrome\" && !isSamsungBrowser);\n  const isIDevice = AFRAME.utils.device.isIOS();\n  const isFirefoxBrowser = browser.name === \"firefox\";\n  const isUIWebView = typeof navigator.mediaDevices === \"undefined\";\n\n  const safari = isIDevice\n    ? !isUIWebView\n      ? VR_DEVICE_AVAILABILITY.yes\n      : VR_DEVICE_AVAILABILITY.maybe\n    : VR_DEVICE_AVAILABILITY.no;\n\n  const isCardboardCapableBrowser = !!(isMobile && !isIDevice && browser.name === \"chrome\" && !isSamsungBrowser);\n\n  let displays = [];\n  try {\n    // Skip getVRDisplays on desktop Chrome since the API is in a broken state there.\n    // See https://github.com/mozilla/hubs/issues/892\n    if (browser.name !== \"chrome\" || isMobile) {\n      // We pull the displays on non-WebVR capable mobile browsers so we can pick up cardboard.\n      displays = isWebVRCapableBrowser || isCardboardCapableBrowser ? await navigator.getVRDisplays() : [];\n    }\n  } catch (e) {\n    console.warn(\"navigator.getVRDisplays() failed\", e);\n  }\n\n  const isOculusBrowser = /Oculus/.test(ua);\n\n  const screen = isMobileVR\n    ? VR_DEVICE_AVAILABILITY.no\n    : isIDevice && isUIWebView\n      ? VR_DEVICE_AVAILABILITY.maybe\n      : VR_DEVICE_AVAILABILITY.yes;\n\n  // HACK -- we prompt the user to install firefox if they click the VR button on a non-WebVR compatible\n  // browser. once we change this (ie when Chrome has VR support) then this check can be removed. Without this\n  // check if you have FF on Mac/Linux you'll get the confusing flow of having a VR button but then\n  // being asked to download FF.\n  const isNonWebVRFirefox = !isWebVRCapableBrowser && isFirefoxBrowser;\n  let generic = isMobile || isNonWebVRFirefox ? VR_DEVICE_AVAILABILITY.no : VR_DEVICE_AVAILABILITY.maybe;\n  let cardboard = VR_DEVICE_AVAILABILITY.no;\n\n  // We only consider GearVR support as \"maybe\" and never \"yes\". The only browser\n  // that will detect GearVR outside of VR is Samsung Internet, and we'd prefer to launch into Oculus\n  // Browser for now since Samsung Internet requires an additional WebVR installation + flag, so return \"maybe\".\n  //\n  // If we are in Oculus Browser (ie, we are literally wearing a GearVR) then return 'yes'.\n  let gearvr = VR_DEVICE_AVAILABILITY.no;\n  if (isMaybeGearVRCompatibleDevice(ua)) {\n    gearvr = isOculusBrowser ? VR_DEVICE_AVAILABILITY.yes : VR_DEVICE_AVAILABILITY.maybe;\n  }\n\n  // For daydream detection, we first check if they are on an Android compatible device, and assume they\n  // may support daydream *unless* this browser has WebVR capabilities, in which case we can do better.\n  let daydream =\n    isMaybeDaydreamCompatibleDevice(ua) && !isMobileVR ? VR_DEVICE_AVAILABILITY.maybe : VR_DEVICE_AVAILABILITY.no;\n\n  cardboard =\n    isCardboardCapableBrowser && displays.find(d => d.capabilities.canPresent && /cardboard/i.test(d.displayName))\n      ? VR_DEVICE_AVAILABILITY.yes\n      : VR_DEVICE_AVAILABILITY.no;\n\n  if (isWebVRCapableBrowser) {\n    // Generic is supported for non-blacklisted devices and presentable HMDs.\n    generic = displays.find(\n      d => d.capabilities.canPresent && !GENERIC_ENTRY_TYPE_DEVICE_BLACKLIST.find(r => r.test(d.displayName))\n    )\n      ? VR_DEVICE_AVAILABILITY.yes\n      : VR_DEVICE_AVAILABILITY.no;\n\n    // For daydream detection, in a WebVR browser we can increase confidence in daydream compatibility.\n    const hasDaydreamWebVRDevice = displays.find(d => /daydream/i.test(d.displayName));\n\n    if (hasDaydreamWebVRDevice) {\n      // If we detected daydream via WebVR\n      daydream = VR_DEVICE_AVAILABILITY.yes;\n      generic = VR_DEVICE_AVAILABILITY.no;\n    } else if (isDaydreamCapableBrowser) {\n      // If we didn't detect daydream in a daydream capable browser, we definitely can't run daydream at all.\n      daydream = VR_DEVICE_AVAILABILITY.no;\n    }\n  }\n\n  return { screen, generic, gearvr, daydream, cardboard, safari };\n}\n","const isMobileVR = AFRAME.utils.device.isMobileVR();\n\nexport function canShare() {\n  // TODO, fix up when OB/FxR support sharing\n  return navigator.share && !isMobileVR;\n}\n\n/**\n * Wraps navigator.share with a fallback to twitter for unsupported browsers\n */\nexport function share(opts) {\n  if (canShare()) {\n    return navigator.share(opts);\n  } else {\n    const { title, url } = opts;\n    const width = 550;\n    const height = 420;\n    const left = (screen.width - width) / 2;\n    const top = (screen.height - height) / 2;\n    const params = `scrollbars=no,menubar=no,toolbar=no,status=no,width=${width},height=${height},top=${top},left=${left}`;\n    const tweetLink = `https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${encodeURIComponent(\n      title\n    )}`;\n    window.open(tweetLink, \"_blank\", params);\n    return Promise.resolve();\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Route } from \"react-router\";\n\n/**\n * A react-router Route that looks for a key/value pair in the state to render something.\n */\nclass StateRoute extends React.Component {\n  static propTypes = {\n    stateKey: PropTypes.string,\n    stateValue: PropTypes.string,\n    history: PropTypes.object\n  };\n\n  render() {\n    const { history, stateKey, stateValue, ...routeProps } = this.props;\n\n    if (\n      (!history.location.state && !stateValue) ||\n      (history.location.state &&\n        (history.location.state[stateKey] === stateValue || (!history.location.state[stateKey] && !stateValue)))\n    ) {\n      return <Route path=\"/\" {...routeProps} />;\n    }\n\n    return null;\n  }\n}\n\nexport default StateRoute;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport DialogContainer from \"./dialog-container.js\";\nimport styles from \"../assets/stylesheets/client-info-dialog.scss\";\nimport { FormattedMessage } from \"react-intl\";\nimport { sluglessPath } from \"../utils/history\";\nimport { getAvatarThumbnailUrl } from \"../utils/avatar-utils\";\n\nexport function getClientInfoClientId(location) {\n  const { search } = location;\n  const urlParams = new URLSearchParams(search);\n  const pathname = sluglessPath(location);\n\n  if (!pathname.startsWith(\"/client\") && !urlParams.get(\"client_id\")) return null;\n  return urlParams.get(\"client_id\") || pathname.substring(9);\n}\n\nexport default class ClientInfoDialog extends Component {\n  static propTypes = {\n    clientId: PropTypes.string,\n    history: PropTypes.object,\n    hubChannel: PropTypes.object,\n    presences: PropTypes.object,\n    performConditionalSignIn: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  state = {\n    avatarThumbnailUrl: null\n  };\n\n  kick() {\n    const { clientId, performConditionalSignIn, hubChannel, onClose } = this.props;\n\n    performConditionalSignIn(\n      () => hubChannel.can(\"kick_users\"),\n      async () => await hubChannel.kick(clientId),\n      \"kick-user\"\n    );\n\n    onClose();\n  }\n\n  hide() {\n    const { clientId, onClose, hubChannel } = this.props;\n    hubChannel.hide(clientId);\n    onClose();\n  }\n\n  mute() {\n    const { clientId, performConditionalSignIn, hubChannel, onClose } = this.props;\n\n    performConditionalSignIn(\n      () => hubChannel.can(\"mute_users\"),\n      async () => await hubChannel.mute(clientId),\n      \"mute-user\"\n    );\n\n    onClose();\n  }\n\n  unhide() {\n    const { clientId, hubChannel, onClose } = this.props;\n    hubChannel.unhide(clientId);\n    onClose();\n  }\n\n  getPresenceProfile() {\n    if (!this.props.presences) return null;\n\n    const presence = Object.entries(this.props.presences).find(([k]) => k === this.props.clientId);\n    if (!presence) return null;\n\n    const metas = presence[1].metas;\n    return metas[metas.length - 1].profile;\n  }\n\n  componentDidMount() {\n    const { avatarId } = this.getPresenceProfile();\n    if (avatarId) {\n      getAvatarThumbnailUrl(avatarId).then(avatarThumbnailUrl => this.setState({ avatarThumbnailUrl }));\n    }\n  }\n\n  render() {\n    const profile = this.getPresenceProfile();\n    if (!profile) return null;\n\n    const { displayName, communityIdentifier } = profile;\n    const { hubChannel, clientId, onClose } = this.props;\n    const title = (\n      <div className={styles.title}>\n        {displayName}\n        <div className={styles.communityIdentifier}>{communityIdentifier}</div>\n      </div>\n    );\n    const mayKick = hubChannel.canOrWillIfCreator(\"kick_users\");\n    const mayMute = hubChannel.canOrWillIfCreator(\"mute_users\");\n    const isHidden = hubChannel.isHidden(clientId);\n\n    return (\n      <DialogContainer className={styles.clientInfoDialog} title={title} wide={true} {...this.props}>\n        <div className={styles.roomInfo}>\n          <div className={styles.clientProfileImage}>\n            <img src={this.state.avatarThumbnailUrl} />\n          </div>\n          <div className={styles.clientActionButtons}>\n            {!isHidden && (\n              <button onClick={() => this.hide()}>\n                <FormattedMessage id=\"client-info.hide-button\" />\n              </button>\n            )}\n            {isHidden && (\n              <button onClick={() => this.unhide()}>\n                <FormattedMessage id=\"client-info.unhide-button\" />\n              </button>\n            )}\n            {mayMute && (\n              <button onClick={() => this.mute()}>\n                <FormattedMessage id=\"client-info.mute-button\" />\n              </button>\n            )}\n            {mayKick && (\n              <button onClick={() => this.kick()}>\n                <FormattedMessage id=\"client-info.kick-button\" />\n              </button>\n            )}\n            <button className={styles.cancel} onClick={onClose}>\n              <FormattedMessage id=\"client-info.cancel\" />\n            </button>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { IntlProvider, FormattedMessage } from \"react-intl\";\nimport { lang, messages } from \"../utils/i18n\";\nimport loaderStyles from \"../assets/stylesheets/loader.scss\";\n\nclass Loader extends Component {\n  static propTypes = {\n    scene: PropTypes.object,\n    finished: PropTypes.bool,\n    onLoaded: PropTypes.func\n  };\n\n  doneWithInitialLoad = false;\n  state = {\n    loadingNum: 0,\n    loadedNum: 0\n  };\n\n  componentDidMount() {\n    this.props.scene.addEventListener(\"model-loading\", this.onObjectLoading);\n    this.props.scene.addEventListener(\"image-loading\", this.onObjectLoading);\n    this.props.scene.addEventListener(\"model-loaded\", this.onObjectLoaded);\n    this.props.scene.addEventListener(\"image-loaded\", this.onObjectLoaded);\n    this.props.scene.addEventListener(\"model-error\", this.onObjectLoaded);\n    this.props.scene.addEventListener(\n      \"environment-scene-loaded\",\n      () => {\n        this.environmentSceneLoaded = true;\n        this.tryFinishLoading();\n      },\n      { once: true }\n    );\n  }\n\n  componentWillUnmount() {\n    this.props.scene.removeEventListener(\"model-loading\", this.onObjectLoading);\n    this.props.scene.removeEventListener(\"image-loading\", this.onObjectLoading);\n    this.props.scene.removeEventListener(\"model-loaded\", this.onObjectLoaded);\n    this.props.scene.removeEventListener(\"image-loaded\", this.onObjectLoaded);\n    this.props.scene.removeEventListener(\"model-error\", this.onObjectLoaded);\n  }\n\n  onObjectLoading = () => {\n    if (!this.doneWithInitialLoad && this.loadingTimeout) {\n      window.clearTimeout(this.loadingTimeout);\n      this.loadingTimeout = null;\n    }\n\n    this.setState(state => {\n      return { loadingNum: state.loadingNum + 1 };\n    });\n  };\n\n  onObjectLoaded = () => {\n    this.setState(state => {\n      return { loadedNum: state.loadedNum + 1 };\n    });\n\n    this.tryFinishLoading();\n  };\n\n  tryFinishLoading = () => {\n    if (!this.doneWithInitialLoad && this.loadingTimeout) window.clearTimeout(this.loadingTimeout);\n\n    if (this.environmentSceneLoaded) {\n      this.loadingTimeout = window.setTimeout(() => {\n        this.doneWithInitialLoad = true;\n        if (this.props.onLoaded) {\n          this.props.onLoaded();\n        }\n      }, 1500);\n    }\n  };\n\n  render() {\n    const nomore = (\n      <h4 className={loaderStyles.loadingText}>\n        <FormattedMessage id=\"loader.entering_lobby\" />\n      </h4>\n    );\n    const progress = this.state.loadingNum === 0 ? \" \" : `${this.state.loadedNum} / ${this.state.loadingNum} `;\n    const usual = (\n      <h4 className={loaderStyles.loadingText}>\n        <FormattedMessage id=\"loader.loading\" />\n        {progress}\n        <FormattedMessage id={this.state.loadingNum !== 1 ? \"loader.objects\" : \"loader.object\"} />\n        ...\n      </h4>\n    );\n    return (\n      <IntlProvider locale={lang} messages={messages}>\n        <div className=\"loading-panel\">\n          <img className=\"loading-panel__logo\" style={{height: 150, width: 150}} src={this.props.loadingIcon} />\n\n          {this.props.finished ? nomore : usual}\n\n          <div className=\"loader-wrap loader-bottom\">\n            <div className=\"loader\">\n              <div className=\"loader-center\" />\n            </div>\n          </div>\n        </div>\n      </IntlProvider>\n    );\n  }\n}\n\nexport default Loader;\n","import React from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport PropTypes from \"prop-types\";\n\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nconst AutoExitWarning = props => (\n  <div className=\"autoexit-panel\">\n    <div className=\"autoexit-panel__title\">\n      <FormattedMessage id=\"autoexit.title\" />\n      <span>{props.secondsRemaining}</span>\n      <FormattedMessage id=\"autoexit.title_units\" />\n    </div>\n    <div className=\"autoexit-panel__subtitle\">\n      <FormattedMessage id=\"autoexit.subtitle\" />\n    </div>\n    <WithHoverSound>\n      <div className=\"autoexit-panel__cancel-button\" onClick={props.onCancel}>\n        <FormattedMessage id=\"autoexit.cancel\" />\n      </div>\n    </WithHoverSound>\n  </div>\n);\n\nAutoExitWarning.propTypes = {\n  secondsRemaining: PropTypes.number,\n  onCancel: PropTypes.func\n};\n\nexport default AutoExitWarning;\n","import React from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport PropTypes from \"prop-types\";\n\nimport MobileScreenEntryImg from \"../assets/images/mobile_screen_entry.svg\";\nimport DesktopScreenEntryImg from \"../assets/images/desktop_screen_entry.svg\";\nimport GenericVREntryImg from \"../assets/images/generic_vr_entry.svg\";\nimport GearVREntryImg from \"../assets/images/gearvr_entry.svg\";\nimport DaydreamEntryImg from \"../assets/images/daydream_entry.svg\";\nimport styles from \"../assets/stylesheets/entry.scss\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport cx from \"classnames\";\n\nconst EntryButton = props => {\n  return (\n    <WithHoverSound>\n      <button\n        className={cx([{ [styles.entryButton]: true, [styles.entryButtonSecondary]: props.secondary }])}\n        onClick={props.onClick}\n      >\n        <img src={props.iconSrc} className={styles.icon} />\n        <div className={styles.label}>\n          <div className={styles.contents}>\n            <span>\n              <FormattedMessage id={props.prefixMessageId} />\n            </span>\n            <span className={styles.bolded}>\n              <FormattedMessage id={props.mediumMessageId} />\n            </span>\n            {props.subtitle && (\n              <div className={styles.subtitle}>\n                <FormattedMessage id={props.subtitle} />\n              </div>\n            )}\n          </div>\n        </div>\n      </button>\n    </WithHoverSound>\n  );\n};\n\nEntryButton.propTypes = {\n  onClick: PropTypes.func,\n  iconSrc: PropTypes.string,\n  secondary: PropTypes.bool,\n  prefixMessageId: PropTypes.string,\n  mediumMessageId: PropTypes.string,\n  subtitle: PropTypes.string,\n  isInHMD: PropTypes.bool\n};\n\nconst isMobile = AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR();\n\nexport const TwoDEntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: isMobile ? MobileScreenEntryImg : DesktopScreenEntryImg,\n    prefixMessageId: \"entry.screen-prefix\",\n    mediumMessageId: isMobile ? \"entry.mobile-screen\" : \"entry.desktop-screen\"\n  };\n\n  return <EntryButton {...entryButtonProps} />;\n};\n\nexport const GenericEntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: GenericVREntryImg,\n    prefixMessageId: \"entry.generic-prefix\",\n    mediumMessageId: \"entry.generic-medium\",\n    subtitle: isMobile ? null : \"entry.generic-subtitle-desktop\"\n  };\n\n  return <EntryButton {...entryButtonProps} />;\n};\n\nexport const GearVREntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: GearVREntryImg,\n    prefixMessageId: \"entry.gearvr-prefix\",\n    mediumMessageId: \"entry.gearvr-medium\"\n  };\n\n  return <EntryButton {...entryButtonProps} />;\n};\n\nexport const DaydreamEntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: DaydreamEntryImg,\n    prefixMessageId: \"entry.daydream-prefix\",\n    mediumMessageId: \"entry.daydream-medium\"\n  };\n\n  return <EntryButton {...entryButtonProps} />;\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport { faPencilAlt } from \"@fortawesome/free-solid-svg-icons/faPencilAlt\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport { SCHEMA } from \"../storage/store\";\nimport styles from \"../assets/stylesheets/profile.scss\";\n// import hubLogo from \"../assets/images/hub-preview-white.png\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport { fetchAvatar } from \"../utils/avatar-utils\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { replaceHistoryState } from \"../utils/history\";\nimport StateLink from \"./state-link\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\n\nimport AvatarPreview from \"./avatar-preview\";\n\nclass ProfileEntryPanel extends Component {\n  static propTypes = {\n    displayNameOverride: PropTypes.string,\n    store: PropTypes.object,\n    mediaSearchStore: PropTypes.object,\n    messages: PropTypes.object,\n    finished: PropTypes.func,\n    intl: PropTypes.object,\n    history: PropTypes.object,\n    avatarId: PropTypes.string,\n    onClose: PropTypes.func\n  };\n\n  state = {\n    avatarId: null,\n    displayName: null,\n    avatar: null\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = this.getStateFromProfile();\n    if (props.avatarId) {\n      this.state.avatarId = props.avatarId;\n    }\n    this.props.store.addEventListener(\"statechanged\", this.storeUpdated);\n    this.scene = document.querySelector(\"a-scene\");\n  }\n\n  getStateFromProfile = () => {\n    const { displayName, avatarId } = this.props.store.state.profile;\n    return { displayName, avatarId };\n  };\n\n  storeUpdated = () => this.setState(this.getStateFromProfile());\n\n  saveStateAndFinish = e => {\n    e && e.preventDefault();\n\n    const { displayName } = this.props.store.state.profile;\n    const { hasChangedName } = this.props.store.state.activity;\n\n    const hasChangedNowOrPreviously = hasChangedName || this.state.displayName !== displayName;\n    this.props.store.update({\n      activity: {\n        hasChangedName: hasChangedNowOrPreviously,\n        hasAcceptedProfile: true\n      },\n      profile: {\n        displayName: this.state.displayName,\n        avatarId: this.state.avatarId\n      }\n    });\n    this.props.finished();\n  };\n\n  stopPropagation = e => {\n    e.stopPropagation();\n  };\n\n  setAvatarFromMediaResult = ({ detail: entry }) => {\n    this.setState({ avatarId: entry.id });\n    // Replace history state with the current avatar id since this component gets destroyed when we open the\n    // avatar editor and we want the back button to work. We read the history state back via the avatarId prop.\n    // We read the current state key from history since it could be \"overlay\" or \"entry_step\".\n    replaceHistoryState(this.props.history, this.props.history.location.state.key, \"profile\", { avatarId: entry.id });\n  };\n\n  componentDidMount() {\n    if (this.nameInput) {\n      // stop propagation so that avatar doesn't move when wasd'ing during text input.\n      this.nameInput.addEventListener(\"keydown\", this.stopPropagation);\n      this.nameInput.addEventListener(\"keypress\", this.stopPropagation);\n      this.nameInput.addEventListener(\"keyup\", this.stopPropagation);\n    }\n    this.scene.addEventListener(\"action_selected_media_result_entry\", this.setAvatarFromMediaResult);\n    // This handles editing avatars in the entry_step, since this component remains mounted with the same avatarId\n    this.scene.addEventListener(\"action_avatar_saved\", this.refetchAvatar);\n\n    this.refetchAvatar();\n  }\n\n  componentDidUpdate(_prevProps, prevState) {\n    if (prevState.avatarId !== this.state.avatarId) {\n      this.refetchAvatar();\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.store.removeEventListener(\"statechanged\", this.storeUpdated);\n    if (this.nameInput) {\n      this.nameInput.removeEventListener(\"keydown\", this.stopPropagation);\n      this.nameInput.removeEventListener(\"keypress\", this.stopPropagation);\n      this.nameInput.removeEventListener(\"keyup\", this.stopPropagation);\n    }\n    this.scene.removeEventListener(\"action_selected_media_result_entry\", this.setAvatarFromMediaResult);\n    this.scene.removeEventListener(\"action_avatar_saved\", this.refetchAvatar);\n  }\n\n  refetchAvatar = async () => {\n    const avatar = await fetchAvatar(this.state.avatarId);\n    if (this.state.avatarId !== avatar.avatar_id) return; // This is an old result, ignore it\n    this.setState({ avatar });\n  };\n\n  render() {\n    const { formatMessage } = this.props.intl;\n\n    return (\n      <div className={styles.profileEntry}>\n        <div className={styles.close}>\n          <a onClick={() => this.props.onClose()}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </a>\n        </div>\n        <form onSubmit={this.saveStateAndFinish} className={styles.form}>\n          <div className={classNames([styles.box, styles.darkened])}>\n            <label htmlFor=\"#profile-entry-display-name\" className={styles.title}>\n              <FormattedMessage id=\"profile.header\" />\n            </label>\n            {this.props.displayNameOverride ? (\n              <span className={styles.displayName}>{this.props.displayNameOverride}</span>\n            ) : (\n              <input\n                id=\"profile-entry-display-name\"\n                className={styles.formFieldText}\n                value={this.state.displayName}\n                onFocus={e => handleTextFieldFocus(e.target)}\n                onBlur={() => handleTextFieldBlur()}\n                onChange={e => this.setState({ displayName: e.target.value })}\n                required\n                spellCheck=\"false\"\n                pattern={SCHEMA.definitions.profile.properties.displayName.pattern}\n                title={formatMessage({ id: \"profile.display_name.validation_warning\" })}\n                ref={inp => (this.nameInput = inp)}\n              />\n            )}\n\n            {this.state.avatar ? (\n              <div className={styles.preview}>\n                <AvatarPreview avatarGltfUrl={this.state.avatar.gltf_url} />\n\n                {this.state.avatar.account_id === this.props.store.credentialsAccountId && (\n                  <StateLink\n                    stateKey=\"overlay\"\n                    stateValue=\"avatar-editor\"\n                    stateDetail={{ avatarId: this.state.avatarId, hideDelete: true, returnToProfile: true }}\n                    history={this.props.history}\n                    className={styles.editAvatar}\n                  >\n                    <FontAwesomeIcon icon={faPencilAlt} />\n                  </StateLink>\n                )}\n\n                <div className={styles.chooseAvatar}>\n                  <a onClick={() => this.props.mediaSearchStore.sourceNavigateWithNoNav(\"avatars\")}>\n                    <FormattedMessage id=\"profile.choose_avatar\" />\n                  </a>\n                </div>\n              </div>\n            ) : (\n              <div className={styles.preview}>\n                <div className={styles.chooseAvatar}>\n                  <a onClick={() => this.props.mediaSearchStore.sourceNavigateWithNoNav(\"avatars\")}>\n                    <FormattedMessage id=\"profile.choose_avatar\" />\n                  </a>\n                </div>\n              </div>\n            )}\n\n            <WithHoverSound>\n              <input className={styles.formSubmit} type=\"submit\" value={formatMessage({ id: \"profile.save\" })} />\n            </WithHoverSound>\n            <div className={styles.links}>\n              <WithHoverSound>\n                <a\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  href=\"https://github.com/mozilla/hubs/blob/master/TERMS.md\"\n                >\n                  <FormattedMessage id=\"profile.terms_of_use\" />\n                </a>\n              </WithHoverSound>\n\n              <WithHoverSound>\n                <a\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  href=\"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\"\n                >\n                  <FormattedMessage id=\"profile.privacy_notice\" />\n                </a>\n              </WithHoverSound>\n            </div>\n          </div>\n        </form>\n        <img className={styles.logo} src={this.props.logo} />\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(ProfileEntryPanel);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport { faAngleRight } from \"@fortawesome/free-solid-svg-icons/faAngleRight\";\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons/faSearch\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons/faStar\";\nimport { faCloudUploadAlt } from \"@fortawesome/free-solid-svg-icons/faCloudUploadAlt\";\nimport { faLink } from \"@fortawesome/free-solid-svg-icons/faLink\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport styles from \"../assets/stylesheets/media-browser.scss\";\nimport { pushHistoryPath, pushHistoryState, sluglessPath } from \"../utils/history\";\nimport { SOURCES } from \"../storage/media-search-store\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { showFullScreenIfWasFullScreen } from \"../utils/fullscreen\";\nimport MediaTiles from \"./media-tiles\";\n\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\nconst PRIVACY_POLICY_LINKS = {\n  videos: \"https://privacy.microsoft.com/en-us/privacystatement\",\n  images: \"https://privacy.microsoft.com/en-us/privacystatement\",\n  gifs: \"https://tenor.com/legal-privacy\",\n  sketchfab: \"https://sketchfab.com/privacy\",\n  poly: \"https://policies.google.com/privacy\",\n  youtube: \"https://policies.google.com/privacy\",\n  twitch: \"https://www.twitch.tv/p/legal/privacy-policy/\"\n};\n\nconst DEFAULT_FACETS = {\n  sketchfab: [\n    { text: \"Animals\", params: { filter: \"animals-pets\" } },\n    { text: \"Architecture\", params: { filter: \"architecture\" } },\n    { text: \"Art\", params: { filter: \"art-abstract\" } },\n    { text: \"Vehicles\", params: { filter: \"cars-vehicles\" } },\n    { text: \"Characters\", params: { filter: \"characters-creatures\" } },\n    { text: \"Culture\", params: { filter: \"cultural-heritage-history\" } },\n    { text: \"Gadgets\", params: { filter: \"electronics-gadgets\" } },\n    { text: \"Fashion\", params: { filter: \"fashion-style\" } },\n    { text: \"Food\", params: { filter: \"food-drink\" } },\n    { text: \"Furniture\", params: { filter: \"furniture-home\" } },\n    { text: \"Music\", params: { filter: \"music\" } },\n    { text: \"Nature\", params: { filter: \"nature-plants\" } },\n    { text: \"News\", params: { filter: \"news-politics\" } },\n    { text: \"People\", params: { filter: \"people\" } },\n    { text: \"Places\", params: { filter: \"places-travel\" } },\n    { text: \"Science\", params: { filter: \"science-technology\" } },\n    { text: \"Sports\", params: { filter: \"sports-fitness\" } },\n    { text: \"Weapons\", params: { filter: \"weapons-military\" } }\n  ],\n  poly: [\n    { text: \"Animals\", params: { filter: \"animals\" } },\n    { text: \"Architecture\", params: { filter: \"architecture\" } },\n    { text: \"Art\", params: { filter: \"art\" } },\n    { text: \"Food\", params: { filter: \"food\" } },\n    { text: \"Nature\", params: { filter: \"nature\" } },\n    { text: \"Objects\", params: { filter: \"objects\" } },\n    { text: \"People\", params: { filter: \"people\" } },\n    { text: \"Scenes\", params: { filter: \"scenes\" } },\n    { text: \"Transport\", params: { filter: \"transport\" } }\n  ],\n  avatars: [\n    { text: \"Featured\", params: { filter: \"featured\" } },\n    { text: \"My Avatars\", params: { filter: \"my-avatars\" } }\n  ],\n  favorites: [],\n  scenes: [{ text: \"Featured\", params: { filter: \"featured\" } }, { text: \"My Scenes\", params: { filter: \"my-scenes\" } }]\n};\n\nclass MediaBrowser extends Component {\n  static propTypes = {\n    mediaSearchStore: PropTypes.object,\n    history: PropTypes.object,\n    intl: PropTypes.object,\n    hubChannel: PropTypes.object,\n    onMediaSearchResultEntrySelected: PropTypes.func,\n    performConditionalSignIn: PropTypes.func\n  };\n\n  state = { query: \"\", facets: [], showNav: true, selectNextResult: false, clearStashedQueryOnClose: false };\n\n  constructor(props) {\n    super(props);\n    this.state = this.getStoreAndHistoryState(props);\n    this.props.mediaSearchStore.addEventListener(\"statechanged\", this.storeUpdated);\n    this.props.mediaSearchStore.addEventListener(\"sourcechanged\", this.sourceChanged);\n  }\n\n  componentDidMount() {}\n\n  componentWillUnmount() {\n    this.props.mediaSearchStore.removeEventListener(\"statechanged\", this.storeUpdated);\n    this.props.mediaSearchStore.removeEventListener(\"sourcechanged\", this.sourceChanged);\n  }\n\n  storeUpdated = () => {\n    const newState = this.getStoreAndHistoryState(this.props);\n    this.setState(newState);\n\n    if (this.state.selectNextResult) {\n      if (newState.result && newState.result.entries.length > 0) {\n        this.selectEntry(newState.result.entries[0]);\n      } else {\n        this.close();\n      }\n    }\n  };\n\n  sourceChanged = () => {\n    if (this.inputRef && !isMobile && !isMobileVR) {\n      this.inputRef.focus();\n    }\n  };\n\n  getUrlSource = searchParams =>\n    searchParams.get(\"media_source\") || sluglessPath(this.props.history.location).substring(7);\n\n  getStoreAndHistoryState = props => {\n    const searchParams = new URLSearchParams(props.history.location.search);\n    const result = props.mediaSearchStore.result;\n\n    const newState = { result, query: this.state.query || searchParams.get(\"q\") || \"\" };\n    const urlSource = this.getUrlSource(searchParams);\n    newState.showNav = !!(searchParams.get(\"media_nav\") !== \"false\");\n\n    if (result && result.suggestions && result.suggestions.length > 0) {\n      newState.facets = result.suggestions.map(s => {\n        return { text: s, params: { q: s } };\n      });\n    } else {\n      newState.facets = DEFAULT_FACETS[urlSource] || [];\n    }\n\n    return newState;\n  };\n\n  handleQueryUpdated = (query, forceNow) => {\n    this.setState({ result: null });\n\n    if (this._sendQueryTimeout) {\n      clearTimeout(this._sendQueryTimeout);\n      this._sendQueryTimeout = null;\n    }\n\n    if (forceNow) {\n      this.props.mediaSearchStore.filterQueryNavigate(\"\", query);\n    } else {\n      // Don't update search on every keystroke, but buffer for some ms.\n      this._sendQueryTimeout = setTimeout(() => {\n        // Drop filter for now, so entering text drops into \"search all\" mode\n        this.props.mediaSearchStore.filterQueryNavigate(\"\", query);\n        this._sendQueryTimeout = null;\n      }, 500);\n    }\n\n    this.setState({ query });\n  };\n\n  handleEntryClicked = (evt, entry) => {\n    evt.preventDefault();\n\n    if (!entry.lucky_query) {\n      this.selectEntry(entry);\n    } else {\n      // Entry has a pointer to another \"i'm feeling lucky\" query -- used for trending videos\n      //\n      // Also, mark the browser to clear the stashed query on close, since this is a temporary\n      // query we are running to get the result we want.\n      this.setState({ clearStashedQueryOnClose: true });\n      this.handleQueryUpdated(entry.lucky_query, true);\n    }\n  };\n\n  selectEntry = entry => {\n    if (!this.props.onMediaSearchResultEntrySelected) return;\n    this.props.onMediaSearchResultEntrySelected(entry);\n    this.close();\n  };\n\n  handleSourceClicked = source => {\n    this.props.mediaSearchStore.sourceNavigate(source);\n  };\n\n  handleFacetClicked = facet => {\n    const searchParams = this.getSearchClearedSearchParams(true, true);\n\n    for (const [k, v] of Object.entries(facet.params)) {\n      searchParams.set(k, v);\n    }\n\n    pushHistoryPath(this.props.history, this.props.history.location.pathname, searchParams.toString());\n  };\n\n  getSearchClearedSearchParams = (keepSource, keepNav) => {\n    return this.props.mediaSearchStore.getSearchClearedSearchParams(this.props.history.location, keepSource, keepNav);\n  };\n\n  pushExitMediaBrowserHistory = (stashLastSearchParams = true) => {\n    this.props.mediaSearchStore.pushExitMediaBrowserHistory(this.props.history, stashLastSearchParams);\n  };\n\n  showCustomMediaDialog = source => {\n    const isSceneApiType = source === \"scenes\";\n    const isAvatarApiType = source === \"avatars\";\n    this.pushExitMediaBrowserHistory(!isAvatarApiType);\n    const dialog = isSceneApiType ? \"change_scene\" : isAvatarApiType ? \"avatar_url\" : \"create\";\n    pushHistoryState(this.props.history, \"modal\", dialog);\n  };\n\n  close = () => {\n    showFullScreenIfWasFullScreen();\n    const urlSource = this.getUrlSource(new URLSearchParams(this.props.history.location.search));\n    this.pushExitMediaBrowserHistory(urlSource !== \"avatars\" && urlSource !== \"favorites\");\n    if (this.state.clearStashedQueryOnClose) {\n      this.props.mediaSearchStore.clearStashedQuery();\n    }\n  };\n\n  handlePager = delta => {\n    this.setState({ result: null });\n    this.props.mediaSearchStore.pageNavigate(delta);\n    this.browserDiv.scrollTop = 0;\n  };\n\n  render() {\n    const { formatMessage } = this.props.intl;\n    const searchParams = new URLSearchParams(this.props.history.location.search);\n    const urlSource = this.getUrlSource(searchParams);\n    const isSceneApiType = urlSource === \"scenes\";\n    const isFavorites = urlSource === \"favorites\";\n    const showCustomOption =\n      !isFavorites && (!isSceneApiType || this.props.hubChannel.canOrWillIfCreator(\"update_hub\"));\n    const entries = (this.state.result && this.state.result.entries) || [];\n    const hideSearch = urlSource === \"avatars\" || urlSource === \"favorites\";\n    const showEmptyStringOnNoResult = urlSource !== \"avatars\" && urlSource !== \"scenes\";\n\n    // Don't render anything if we just did a feeling lucky query and are waiting on result.\n    if (this.state.selectNextResult) return <div />;\n    const handleCustomClicked = urlSource => {\n      const isAvatarApiType = urlSource === \"avatars\";\n      if (isAvatarApiType) {\n        this.showCustomMediaDialog(urlSource);\n      } else {\n        this.props.performConditionalSignIn(\n          () => !isSceneApiType || this.props.hubChannel.can(\"update_hub\"),\n          () => this.showCustomMediaDialog(urlSource),\n          \"change-scene\"\n        );\n      }\n    };\n\n    return (\n      <div className={styles.mediaBrowser} ref={browserDiv => (this.browserDiv = browserDiv)}>\n        <div className={classNames([styles.box, styles.darkened])}>\n          <div className={classNames(styles.header, { [styles.noSearch]: hideSearch })}>\n            <div className={styles.headerLeft}>\n              <a onClick={() => this.close()}>\n                <i>\n                  <FontAwesomeIcon icon={faTimes} />\n                </i>\n              </a>\n            </div>\n            <div className={styles.headerCenter}>\n              {urlSource === \"favorites\" && (\n                <div className={styles.favoritesHeader}>\n                  <i>\n                    <FontAwesomeIcon icon={faStar} />\n                  </i>\n                  <FormattedMessage id=\"media-browser.favorites-header\" />\n                </div>\n              )}\n              {!hideSearch && (\n                <div className={styles.search}>\n                  <i>\n                    <FontAwesomeIcon icon={faSearch} />\n                  </i>\n                  <input\n                    type=\"text\"\n                    autoFocus={!isMobile && !isMobileVR}\n                    ref={r => (this.inputRef = r)}\n                    placeholder={formatMessage({\n                      id: `media-browser.search-placeholder.${urlSource}`\n                    })}\n                    onFocus={e => handleTextFieldFocus(e.target)}\n                    onBlur={() => handleTextFieldBlur()}\n                    onKeyDown={e => {\n                      if (e.key === \"Enter\" && e.ctrlKey) {\n                        if (entries.length > 0 && !this._sendQueryTimeout) {\n                          this.handleEntryClicked(e, entries[0]);\n                        } else if (this.state.query.trim() !== \"\") {\n                          this.handleQueryUpdated(this.state.query, true);\n                          this.setState({ selectNextResult: true });\n                        } else {\n                          this.close();\n                        }\n                      } else if (e.key === \"Escape\" || (e.key === \"Enter\" && isMobile)) {\n                        e.target.blur();\n                      }\n                    }}\n                    value={this.state.query}\n                    onChange={e => this.handleQueryUpdated(e.target.value)}\n                  />\n                </div>\n              )}\n              <div className={styles.engineAttribution}>\n                {!hideSearch &&\n                  urlSource !== \"scenes\" &&\n                  urlSource !== \"avatars\" &&\n                  urlSource !== \"favorites\" && (\n                    <div className={styles.engineAttributionContents}>\n                      <FormattedMessage id={`media-browser.powered_by.${urlSource}`} />\n                      {PRIVACY_POLICY_LINKS[urlSource] && (\n                        <a href={PRIVACY_POLICY_LINKS[urlSource]} target=\"_blank\" rel=\"noreferrer noopener\">\n                          <FormattedMessage id=\"media-browser.privacy_policy\" />\n                        </a>\n                      )}\n                    </div>\n                  )}\n                {urlSource === \"scenes\" && (\n                  <div className={styles.engineAttributionContents}>\n                    <FormattedMessage id={`media-browser.powered_by.${urlSource}`} />\n                    <a href=\"/spoke\" target=\"_blank\" rel=\"noreferrer noopener\">\n                      <FormattedMessage id=\"media-browser.spoke\" />\n                    </a>\n                    |\n                    <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"/?report\">\n                      <FormattedMessage id=\"media-browser.report_issue\" />\n                    </a>\n                  </div>\n                )}\n              </div>\n            </div>\n            <div className={styles.headerRight}>\n              {showCustomOption && (\n                <a onClick={() => handleCustomClicked(urlSource)} className={styles.createButton}>\n                  <i>\n                    <FontAwesomeIcon icon={[\"scenes\", \"avatars\"].includes(urlSource) ? faLink : faCloudUploadAlt} />\n                  </i>\n                </a>\n              )}\n              {showCustomOption && (\n                <a onClick={() => handleCustomClicked(urlSource)} className={styles.createLink}>\n                  <FormattedMessage\n                    id={`media-browser.add_custom_${\n                      this.state.result && isSceneApiType ? \"scene\" : urlSource === \"avatars\" ? \"avatar\" : \"object\"\n                    }`}\n                  />\n                </a>\n              )}\n            </div>\n          </div>\n\n          {this.state.showNav && (\n            <div className={styles.nav}>\n              {SOURCES.map(s => (\n                <a\n                  onClick={() => this.handleSourceClicked(s)}\n                  key={s}\n                  className={classNames({ [styles.navSource]: true, [styles.navSourceSelected]: urlSource === s })}\n                >\n                  <FormattedMessage id={`media-browser.nav_title.${s}`} />\n                </a>\n              ))}\n              <div className={styles.navRightPad}>&nbsp;</div>\n              <div className={styles.navScrollArrow}>\n                <FontAwesomeIcon icon={faAngleRight} />\n              </div>\n            </div>\n          )}\n\n          {this.state.facets &&\n            this.state.facets.length > 0 && (\n              <div className={styles.facets}>\n                {this.state.facets.map((s, i) => (\n                  <a onClick={() => this.handleFacetClicked(s)} key={i} className={styles.facet}>\n                    {s.text}\n                  </a>\n                ))}\n              </div>\n            )}\n\n          {this.props.mediaSearchStore.isFetching ||\n          this._sendQueryTimeout ||\n          (this.state.result && this.state.result.entries.length > 0) ||\n          !showEmptyStringOnNoResult ? (\n            <MediaTiles\n              result={this.state.result}\n              history={this.props.history}\n              urlSource={urlSource}\n              handleEntryClicked={this.handleEntryClicked}\n              handlePager={this.handlePager}\n            />\n          ) : (\n            <div className={styles.emptyString}>\n              <FormattedMessage id={`media-browser.empty.${urlSource}`} />\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(MediaBrowser);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport giphyLogo from \"../assets/images/giphy_logo.png\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPaperclip } from \"@fortawesome/free-solid-svg-icons/faPaperclip\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport styles from \"../assets/stylesheets/create-object-dialog.scss\";\nimport cx from \"classnames\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nconst attributionHostnames = {\n  \"giphy.com\": giphyLogo,\n  \"media.giphy.com\": giphyLogo\n};\n\nconst DEFAULT_OBJECT_URL = \"https://asset-bundles-prod.reticulum.io/interactables/Ducky/DuckyMesh-438ff8e022.gltf\";\nconst isMobile = AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR();\nconst instructions = \"Paste a URL to an image, video, model, scene, or upload.\";\nconst desktopTips = \"Tip: You can paste URLs directly into Hubs with Ctrl+V\";\nconst references = (\n  <span>\n    For models, try{\" \"}\n    <a href=\"https://sketchfab.com/search?features=downloadable&type=models\" target=\"_blank\" rel=\"noopener noreferrer\">\n      Sketchfab\n    </a>,{\" \"}\n    <a href=\"http://poly.google.com/\" target=\"_blank\" rel=\"noopener noreferrer\">\n      Google Poly\n    </a>, or our{\" \"}\n    <a href=\"https://sketchfab.com/mozillareality\" target=\"_blank\" rel=\"noopener noreferrer\">\n      collection\n    </a>.\n  </span>\n);\n\nconst mobileInstructions = (\n  <div>\n    <p>{instructions}</p>\n    <p>{references}</p>\n  </div>\n);\nconst desktopInstructions = (\n  <div>\n    <p>{instructions}</p>\n    <p>{references}</p>\n    <p>{desktopTips}</p>\n  </div>\n);\n\nlet lastUrl = \"\";\nconst fileInputId = \"file-input\";\n\nexport default class CreateObjectDialog extends Component {\n  state = {\n    url: \"\",\n    file: null,\n    fileName: \"\"\n  };\n\n  static propTypes = {\n    onCreate: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  componentDidMount() {\n    this.setState({ url: lastUrl });\n  }\n\n  componentWillUnmount() {\n    lastUrl = this.state.url;\n  }\n\n  onUrlChange = e => {\n    let attributionImage = this.state.attributionImage;\n    if (e.target && e.target.value && e.target.validity.valid) {\n      const url = new URL(e.target.value);\n      attributionImage = attributionHostnames[url.hostname];\n    }\n    this.setState({\n      url: e.target && e.target.value,\n      attributionImage: attributionImage\n    });\n  };\n\n  onFileChange = e => {\n    this.setState({\n      file: e.target.files[0],\n      fileName: e.target.files[0].name\n    });\n  };\n\n  reset = e => {\n    e.preventDefault();\n    this.setState({\n      url: \"\",\n      file: null,\n      fileName: \"\"\n    });\n    this.fileInput.value = null;\n  };\n\n  onCreateClicked = e => {\n    e.preventDefault();\n    this.props.onCreate(this.state.file || this.state.url || DEFAULT_OBJECT_URL);\n    this.props.onClose();\n  };\n\n  render() {\n    const { onCreate, onClose, ...other } = this.props; // eslint-disable-line no-unused-vars\n\n    const cancelButton = (\n      <WithHoverSound>\n        <label className={cx(styles.smallButton, styles.cancelIcon)} onClick={this.reset}>\n          <FontAwesomeIcon icon={faTimes} />\n        </label>\n      </WithHoverSound>\n    );\n    const uploadButton = (\n      <WithHoverSound>\n        <label htmlFor={fileInputId} className={cx(styles.smallButton, styles.uploadIcon)}>\n          <FontAwesomeIcon icon={faPaperclip} />\n        </label>\n      </WithHoverSound>\n    );\n    const filenameLabel = <label className={cx(styles.leftSideOfInput)}>{this.state.fileName}</label>;\n    const urlInput = (\n      <input\n        className={cx(styles.leftSideOfInput)}\n        placeholder=\"Image/Video/glTF URL\"\n        onFocus={e => handleTextFieldFocus(e.target)}\n        onBlur={() => handleTextFieldBlur()}\n        onChange={this.onUrlChange}\n        type=\"url\"\n        value={this.state.url}\n      />\n    );\n\n    return (\n      <DialogContainer title=\"Create Object\" onClose={this.props.onClose} {...other}>\n        <div>\n          {isMobile ? mobileInstructions : desktopInstructions}\n          <form onSubmit={this.onCreateClicked}>\n            <div className={styles.addMediaForm}>\n              <input\n                id={fileInputId}\n                ref={f => (this.fileInput = f)}\n                className={styles.hideFileInput}\n                type=\"file\"\n                onChange={this.onFileChange}\n              />\n              <div className={styles.inputBorder}>\n                {this.state.file ? filenameLabel : urlInput}\n                {this.state.url || this.state.fileName ? cancelButton : uploadButton}\n              </div>\n              <div className={styles.buttons}>\n                <WithHoverSound>\n                  <button className={styles.actionButton}>\n                    <span>Create</span>\n                  </button>\n                </WithHoverSound>\n              </div>\n              {this.state.attributionImage ? (\n                <div>\n                  <img src={this.state.attributionImage} />\n                </div>\n              ) : null}\n            </div>\n          </form>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/change-scene-dialog.scss\";\nimport cx from \"classnames\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { FormattedMessage } from \"react-intl\";\n\nexport default class ChangeSceneDialog extends Component {\n  state = {\n    url: \"\"\n  };\n\n  static propTypes = {\n    onChange: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  onUrlChange = e => {\n    this.setState({\n      url: e.target && e.target.value\n    });\n  };\n\n  reset = e => {\n    e.preventDefault();\n    this.setState({ url: \"\" });\n  };\n\n  onChangeClicked = e => {\n    e.preventDefault();\n\n    if (this.state.url) {\n      this.props.onChange(this.state.url);\n    }\n\n    this.props.onClose();\n  };\n\n  render() {\n    const { onChange, onClose } = this.props; // eslint-disable-line no-unused-vars\n\n    return (\n      <DialogContainer title=\"Custom Scene\" onClose={this.props.onClose}>\n        <div>\n          <div>\n            <p>\n              Paste a URL to a{\" \"}\n              <a href=\"/spoke\" target=\"_blank\" rel=\"noopener noreferrer\">\n                Spoke\n              </a>{\" \"}\n              scene or a URL to a{\" \"}\n              <a href=\"https://en.wikipedia.org/wiki/GlTF#GLB\" target=\"_blank\" rel=\"noopener noreferrer\">\n                GLB\n              </a>.\n            </p>\n          </div>\n          <form onSubmit={this.onChangeClicked}>\n            <div className={styles.changeSceneForm}>\n              <div className={styles.inputBorder}>\n                <input\n                  className={cx(styles.leftSideOfInput)}\n                  placeholder=\"Scene URL\"\n                  onFocus={e => handleTextFieldFocus(e.target)}\n                  onBlur={() => handleTextFieldBlur()}\n                  onChange={this.onUrlChange}\n                  type=\"url\"\n                  value={this.state.url}\n                />\n              </div>\n              <div className={styles.buttons}>\n                <button className={styles.actionButton}>\n                  <FormattedMessage id=\"change-scene-dialog.change-scene\" />\n                </button>\n              </div>\n              <div className={styles.spokeCreate}>\n                <div>\n                  <FormattedMessage id=\"change-scene-dialog.create-in-spoke\" />\n                </div>\n                <a className={styles.spokeLaunch} href=\"/spoke/new\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  <FormattedMessage id=\"change-scene-dialog.new-spoke-project\" />\n                </a>\n              </div>\n            </div>\n          </form>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport styles from \"../assets/stylesheets/avatar-url-dialog.scss\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\n\nexport default class AvatarUrlDialog extends Component {\n  state = {\n    url: \"\"\n  };\n\n  static propTypes = {\n    onChange: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  onUrlChange = e => {\n    this.setState({\n      url: e.target && e.target.value\n    });\n  };\n\n  onChangeClicked = e => {\n    e.preventDefault();\n\n    if (this.state.url) {\n      this.props.onChange(this.state.url);\n    }\n\n    this.props.onClose();\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Custom Avatar URL\" className={styles.avatarUrlDialog} onClose={this.props.onClose}>\n        <p>\n          Paste a URL to a{\" \"}\n          <a href=\"https://en.wikipedia.org/wiki/GlTF#GLB\" target=\"_blank\" rel=\"noopener noreferrer\">\n            GLB\n          </a>.\n        </p>\n        <form className=\"form\" onSubmit={this.onChangeClicked}>\n          <input\n            className=\"url-field\"\n            placeholder=\"Avatar GLB URL\"\n            onFocus={e => handleTextFieldFocus(e.target)}\n            onBlur={() => handleTextFieldBlur()}\n            onChange={this.onUrlChange}\n            type=\"url\"\n            value={this.state.url}\n          />\n          <button className=\"submit\">\n            <FormattedMessage id=\"avatar-url-dialog.apply\" />\n          </button>\n        </form>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class HelpDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"Getting Started\" {...this.props}>\n        <div className=\"info-dialog__help\">\n          <p style={{ textAlign: \"center\" }}>\n            Join the Hubs community on{\" \"}\n            <WithHoverSound>\n              <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://discord.gg/wHmY4nd\">\n                Discord\n              </a>\n            </WithHoverSound>\n            !\n          </p>\n          <p>When in a room, other avatars can see and hear you.</p>\n          <p>\n            Use your controller&apos;s action button to teleport from place to place. If it has a grip, use it to pick\n            up objects.\n          </p>\n          <p>\n            In VR, <b>look up</b> to find your menu.\n          </p>\n          <p>\n            The <b>Mic Toggle</b> mutes your mic.\n          </p>\n          <p>\n            The <b>Pause Toggle</b> pauses all other avatars and lets you block others or pin or remove objects.\n          </p>\n          <p>\n            See detailed{\" \"}\n            <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/mozilla/hubs/wiki/Hubs-Features\">\n              feature\n            </a>{\" \"}\n            and{\" \"}\n            <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/mozilla/hubs/wiki/Hubs-Controls\">\n              controls\n            </a>{\" \"}\n            documentation.\n          </p>\n          <p className=\"dialog__box__contents__links\">\n            <WithHoverSound>\n              <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/mozilla/hubs/blob/master/TERMS.md\">\n                <FormattedMessage id=\"profile.terms_of_use\" />\n              </a>\n            </WithHoverSound>\n            <WithHoverSound>\n              <a\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                href=\"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\"\n              >\n                <FormattedMessage id=\"profile.privacy_notice\" />\n              </a>\n            </WithHoverSound>\n            <WithHoverSound>\n              <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"/?report\">\n                <FormattedMessage id=\"help.report_issue\" />\n              </a>\n            </WithHoverSound>\n          </p>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport copy from \"copy-to-clipboard\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\nimport { share, canShare } from \"../utils/share\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport styles from \"../assets/stylesheets/invite-dialog.scss\";\n\nfunction pad(num, size) {\n  let s = `${num}`;\n  while (s.length < size) s = `0${s}`;\n  return s;\n}\n\nexport default class InviteDialog extends Component {\n  static propTypes = {\n    entryCode: PropTypes.number,\n    hubId: PropTypes.string,\n    allowShare: PropTypes.bool,\n    isModal: PropTypes.bool,\n    onClose: PropTypes.func,\n    hasPush: PropTypes.bool,\n    isSubscribed: PropTypes.bool,\n    onSubscribeChanged: PropTypes.func,\n    embedUrl: PropTypes.string\n  };\n\n  state = {\n    copyButtonActive: false,\n    shareButtonActive: false\n  };\n\n  shareClicked = url => {\n    this.setState({ shareButtonActive: true });\n    share({ url, title: \"Join me now in #hubs!\" }).then(() => {\n      this.setState({ shareButtonActive: false });\n    });\n  };\n\n  copyClicked = link => {\n    this.setState({ copyButtonActive: true });\n    setTimeout(() => this.setState({ copyButtonActive: false }), 5000);\n\n    copy(link);\n  };\n\n  render() {\n    const { entryCode, embedUrl } = this.props;\n\n    const entryCodeString = pad(entryCode, 6);\n    const shortLinkText = `hub.link/${this.props.hubId}`;\n    const shortLink = \"https://\" + shortLinkText;\n    const embedText = `<iframe src=\"${embedUrl}\" style=\"width: 1024px; height: 768px;\" allow=\"microphone; camera; vr; speaker;\"></iframe>`;\n\n    return (\n      <div className={classNames({ [styles.dialog]: true, [styles.modal]: this.props.isModal })}>\n        {!this.props.isModal && <div className={styles.attachPoint} />}\n        <WithHoverSound>\n          <button className={styles.close} onClick={() => this.props.onClose()}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </button>\n        </WithHoverSound>\n        <div>\n          <FormattedMessage id={`invite.enter_via${this.props.isModal ? \"_modal\" : \"\"}`} />\n          <WithHoverSound>\n            <a href=\"https://hub.link\" target=\"_blank\" className={styles.hubLinkLink} rel=\"noopener noreferrer\">\n              hub.link\n            </a>\n          </WithHoverSound>\n          <FormattedMessage id=\"invite.and_enter_code\" />\n        </div>\n        <div className={styles.code}>\n          {entryCodeString.split(\"\").map((d, i) => (\n            <div className={classNames({ [styles.digit]: true, [styles[`digit_${i}`]]: true })} key={`link_code_${i}`}>\n              {d}\n            </div>\n          ))}\n        </div>\n        <div>\n          <FormattedMessage id={`invite.or_visit${this.props.isModal ? \"_modal\" : \"\"}`} />\n        </div>\n        <div className={styles.domain}>\n          <input type=\"text\" readOnly onFocus={e => e.target.select()} value={shortLinkText} />\n        </div>\n        <div className={styles.buttons}>\n          <WithHoverSound>\n            <button className={styles.linkButton} onClick={this.copyClicked.bind(this, shortLink)}>\n              <span>{this.state.copyButtonActive ? \"copied!\" : \"copy\"}</span>\n            </button>\n          </WithHoverSound>\n          {this.props.allowShare &&\n            canShare() && (\n              <WithHoverSound>\n                <button className={styles.linkButton} onClick={this.shareClicked.bind(this, shortLink)}>\n                  <span>{this.state.shareButtonActive ? \"sharing...\" : \"share\"}</span>\n                </button>\n              </WithHoverSound>\n            )}\n          {this.props.allowShare &&\n            !canShare() && (\n              <WithHoverSound>\n                <button className={styles.linkButton} onClick={this.shareClicked.bind(this, shortLink)}>\n                  <FormattedMessage id=\"invite.tweet\" />\n                </button>\n              </WithHoverSound>\n            )}\n        </div>\n        {embedUrl && (\n          <div className={styles.embed}>\n            <div>\n              <FormattedMessage id={`invite.embed`} />\n            </div>\n            <div className={styles.embedText}>\n              <input\n                type=\"text\"\n                readOnly\n                onFocus={e => {\n                  e.target.select();\n                  this.setState({ showEmbedTip: true });\n                }}\n                onBlur={() => this.setState({ showEmbedTip: false })}\n                value={embedText}\n              />\n            </div>\n            {this.state.showEmbedTip && (\n              <div className={styles.embedTipWrap}>\n                <div className={styles.embedTip}>\n                  <div className={styles.embedTipAttachPoint} />\n                  <FormattedMessage id=\"invite.embed-tip\" />\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n        {this.props.hasPush && (\n          <div className={styles.subscribe}>\n            <input\n              id=\"subscribe\"\n              type=\"checkbox\"\n              onChange={() => this.props.onSubscribeChanged()}\n              checked={this.props.isSubscribed}\n            />\n            <label htmlFor=\"subscribe\">\n              <FormattedMessage id=\"entry.notify_me\" />\n            </label>\n          </div>\n        )}\n\n        {this.props.isModal && (\n          <button className={styles.enterVrButton} onClick={() => this.props.onClose()}>\n            <FormattedMessage id=\"entry.return-to-vr\" />\n          </button>\n        )}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\nimport PropTypes from \"prop-types\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class InviteTeamDialog extends Component {\n  static propTypes = {\n    hubChannel: PropTypes.object\n  };\n\n  state = {\n    inviteButtonText: \"invite a hubs team member\"\n  };\n\n  constructor(props) {\n    super(props);\n  }\n\n  inviteClicked = () => {\n    this.setState({ inviteButtonText: \"OK! We'll be there shortly.\" });\n    this.props.hubChannel.requestSupport();\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Let's Chat!\" {...this.props}>\n        <div>\n          <div>\n            <p>Have an idea for Hubs? Having trouble?</p>\n            <p>We&apos;d love to chat. Someone from our team will join you in just a few minutes.</p>\n          </div>\n          <div className=\"invite-team-form\">\n            <div className=\"invite-team-form__buttons\">\n              <WithHoverSound>\n                <button className=\"invite-team-form__action-button\" onClick={this.inviteClicked}>\n                  <span>{this.state.inviteButtonText}</span>\n                </button>\n              </WithHoverSound>\n            </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\nimport LinkDialogHeader from \"../assets/images/link_dialog_header.svg\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nimport styles from \"../assets/stylesheets/link-dialog.scss\";\n\nexport default class LinkDialog extends Component {\n  static propTypes = {\n    linkCode: PropTypes.string,\n    onClose: PropTypes.func\n  };\n\n  render() {\n    const { linkCode } = this.props;\n\n    return (\n      <div className={styles.dialog}>\n        <WithHoverSound>\n          <div className={styles.close} onClick={() => this.props.onClose()}>\n            <span>×</span>\n          </div>\n        </WithHoverSound>\n        <div>\n          {!linkCode && (\n            <div>\n              <div className={classNames(\"loading-panel\", styles.codeLoadingPanel)}>\n                <div className=\"loader-wrap\">\n                  <div className=\"loader\">\n                    <div className=\"loader-center\" />\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n          {linkCode && (\n            <div className={styles.contents}>\n              <img className={styles.imageHeader} src={LinkDialogHeader} />\n              <div className={styles.header}>\n                <FormattedMessage id=\"link.connect_headset\" />\n              </div>\n              <div>\n                <FormattedMessage id=\"link.in_your_browser\" />\n              </div>\n              <WithHoverSound>\n                <a href=\"https://hub.link\" className={styles.domain} target=\"_blank\" rel=\"noopener noreferrer\">\n                  hub.link\n                </a>\n              </WithHoverSound>\n              <div>\n                <FormattedMessage id=\"link.enter_code\" />\n              </div>\n              {linkCode && (\n                <div className={styles.code}>\n                  {linkCode.split(\"\").map((d, i) => (\n                    <span className={styles.digit} key={`link_code_${i}`}>\n                      {d}\n                    </span>\n                  ))}\n                </div>\n              )}\n              <div className={styles.keepOpen}>\n                <FormattedMessage id=\"link.do_not_close\" />\n              </div>\n              <WithHoverSound>\n                <button className={styles.closeButton} onClick={() => this.props.onClose()}>\n                  <FormattedMessage id=\"link.cancel\" />\n                </button>\n              </WithHoverSound>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport copy from \"copy-to-clipboard\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class SafariDialog extends Component {\n  state = {\n    copyLinkButtonText: \"copy\"\n  };\n\n  copyLinkClicked = link => {\n    copy(link);\n    this.setState({ copyLinkButtonText: \"copied!\" });\n  };\n\n  render() {\n    const onCopyClicked = this.copyLinkClicked.bind(this, document.location);\n    return (\n      <DialogContainer title=\"Open in Safari\" {...this.props}>\n        <div>\n          <div>Hubs does not support your current browser on iOS. Copy and paste this link directly in Safari.</div>\n          <div className=\"invite-form\">\n            <input\n              type=\"text\"\n              readOnly\n              onFocus={e => e.target.select()}\n              value={document.location}\n              className=\"invite-form__link_field\"\n            />\n            <div className=\"invite-form__buttons\">\n              <WithHoverSound>\n                <button className=\"invite-form__action-button\" onClick={onCopyClicked}>\n                  <span>{this.state.copyLinkButtonText}</span>\n                </button>\n              </WithHoverSound>\n            </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\n\nexport default class SafariMicDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"Microphone Access Required\" {...this.props}>\n        <div>\n          <div>\n            Hubs requires microphone permissions in Safari. <br />\n            Please reload and allow microphone access to continue.\n          </div>\n          <div className=\"invite-form\">\n            <div className=\"invite-form__buttons\">\n              <button className=\"invite-form__action-button\" onClick={() => location.reload()}>\n                Reload\n              </button>\n            </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\n\nimport styles from \"../assets/stylesheets/rename-room-dialog.scss\";\nimport DialogContainer from \"./dialog-container\";\n\nexport default class RenameRoomDialog extends Component {\n  static propTypes = {\n    onRename: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  state = {\n    name: \"\"\n  };\n\n  onSubmit = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onRename(this.state.name);\n    this.props.onClose();\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Set Room Name\" {...this.props}>\n        <form onSubmit={this.onSubmit} className={styles.renameRoomForm}>\n          <span>\n            <FormattedMessage id=\"rename-room.message\" />\n          </span>\n          <input\n            name=\"name\"\n            type=\"text\"\n            required\n            autoFocus\n            autoComplete=\"off\"\n            placeholder=\"Room name\"\n            value={this.state.name}\n            onFocus={e => handleTextFieldFocus(e.target)}\n            onBlur={() => handleTextFieldBlur()}\n            onChange={e => this.setState({ name: e.target.value })}\n            className={styles.nameField}\n          />\n          <button type=\"submit\" className={styles.nextButton}>\n            <FormattedMessage id=\"rename-room.rename\" />\n          </button>\n        </form>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport styles from \"../assets/stylesheets/close-room-dialog.scss\";\nimport DialogContainer from \"./dialog-container\";\n\nexport default class CloseRoomDialog extends Component {\n  static propTypes = {\n    onConfirm: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Close Room\" {...this.props}>\n        <div className={styles.message}>\n          <FormattedMessage id=\"close-room.message\" />\n        </div>\n        <button\n          className={styles.confirmButton}\n          onClick={() => {\n            this.props.onConfirm();\n            this.props.onClose();\n          }}\n        >\n          <FormattedMessage id=\"close-room.confirm\" />\n        </button>\n        <button className={styles.cancelButton} onClick={() => this.props.onClose()}>\n          <FormattedMessage id=\"close-room.cancel\" />\n        </button>\n      </DialogContainer>\n    );\n  }\n}\n","import { sets } from \"./userinput/sets\";\nimport { paths } from \"./userinput/paths\";\n\n// The output of this system is activeTips which shows, if any, the tips to show at the top\n// and bottom of the screen. There are named tips (eg locomotion) that each have validators.\n//\n// Each frame we run all the non-finished validators and take the first tip (by order)\n// which is VALID. Any tip that returns FINISHED will no longer be considered without\n// a local storage reset.\n\n// Validators can return these values:\n//\n// INVALID - Tip is not valid to show\n// VALID - Tip is valid to show\n// FINISH - Tip should always be assumed INVALID going forward\n//\n//\n// Tips have \"scope\", which is a certain context within which the validators are run (right now,\n// just the top of bottom of the screen.) They are also platform-local.\nconst INVALID = 0;\nconst VALID = 1;\nconst FINISH = 2;\n\nconst LOCAL_STORAGE_KEY = \"__hubs_finished_tips\";\nconst NUM_ENTRIES_FOR_FEEDBACK_TIP = 3;\n\nconst TIPS = {\n  desktop: {\n    top: [\"mirror_mode\", \"pen_mode\", \"video_share_mode\", \"mute_mode\"],\n    bottom: [\n      \"look\",\n      \"locomotion\",\n      \"turning\",\n      \"spawn_menu\",\n      \"object_grab\",\n      \"object_zoom\",\n      \"object_scale\",\n      \"freeze_gesture\",\n      \"menu_hover\",\n      \"object_recenter_button\",\n      \"object_rotate_button\",\n      \"object_scale_button\",\n      \"object_pin\",\n      \"invite\",\n      \"pen_color\",\n      \"pen_size\",\n      \"feedback\"\n    ]\n  },\n  mobile: {\n    top: [\"pen_mode\", \"video_share_mode\", \"freeze_mode\", \"mute_mode\"],\n    bottom: [\n      \"look\",\n      \"locomotion\",\n      \"spawn_menu\",\n      \"object_grab\",\n      \"freeze_gesture\",\n      \"object_recenter_button\",\n      \"object_rotate_button\",\n      \"object_scale_button\",\n      \"object_pin\",\n      \"invite\",\n      \"feedback\"\n    ]\n  },\n  standalone: { top: [], bottom: [] }\n};\n\n// These tips, if closed, will only clear themselves, not all tips.\nconst LOCAL_CLOSE_TIPS = [\"feedback\", \"invite\", \"object_pin\"];\n\n// These tips will remain active even if the user closes the tips globally.\nconst KEEP_ACTIVE_AFTER_GLOBAL_CLOSE = [\"feedback\"];\n\nlet localStorageCache = null;\nlet finishedScopes = {}; // Optimization, lets system skip scopes altogether once finished.\n\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\nconst tipPlatform = () => {\n  if (isMobileVR) return \"standalone\";\n  return isMobile ? \"mobile\" : \"desktop\";\n};\n\nconst platformTips = TIPS[tipPlatform()];\n\nconst isTipFinished = tip => {\n  if (localStorageCache === null) {\n    localStorageCache = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));\n  }\n\n  return !!(localStorageCache[tip] && localStorageCache[tip].finished);\n};\n\nexport const markTipFinished = tip => {\n  const storeData = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));\n  storeData[tip] = { finished: true };\n  localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(storeData));\n  localStorageCache = null;\n};\n\nexport const handleTipClose = (fullTip, scope) => {\n  const tip = fullTip.split(\".\")[1];\n\n  // Invite and pinning tips should be locally cleared, others should clear all remaining tips.\n  const tips = LOCAL_CLOSE_TIPS.includes(tip) ? [tip] : platformTips[scope];\n\n  for (let i = 0; i < tips.length; i++) {\n    const t = tips[i];\n\n    if (!KEEP_ACTIVE_AFTER_GLOBAL_CLOSE.includes(t) || t === tip) {\n      markTipFinished(t);\n    }\n  }\n};\n\nexport const resetTips = () => {\n  localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify({}));\n  localStorageCache = null;\n  window.APP.store.resetTipActivityFlags();\n  window.APP.store.resetConfirmedBroadcastedRooms();\n  finishedScopes = {};\n};\n\nconst VALIDATORS = {\n  look: function(userinput) {\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    const cameraDelta = userinput.get(\n      isMobile ? paths.device.touchscreen.touchCameraDelta : paths.device.smartMouse.cameraDelta\n    );\n    return cameraDelta ? FINISH : VALID;\n  },\n  locomotion: function(userinput) {\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    const accel = userinput.get(paths.actions.characterAcceleration);\n\n    // User moved\n    return accel && (accel[0] !== 0 || accel[1] !== 0) ? FINISH : VALID;\n  },\n  turning: function(userinput) {\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (userinput.get(paths.actions.snapRotateLeft) || userinput.get(paths.actions.snapRotateRight)) return FINISH;\n    return VALID;\n  },\n  spawn_menu: function(userinput, scene, mediaCounter) {\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (mediaCounter.count() === 0) return VALID;\n    return FINISH;\n  },\n  freeze_gesture: function(userinput, scene, mediaCounter) {\n    if (mediaCounter.count() === 0) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingInteractable)) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (scene.is(\"frozen\") && userinput.activeSets.includes(sets.cursorHoveringOnInteractable)) return FINISH;\n    return scene.is(\"frozen\") ? INVALID : VALID;\n  },\n  menu_hover: function(userinput, scene, mediaCounter) {\n    if (mediaCounter.count() === 0) return INVALID;\n    if (!scene.is(\"frozen\")) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (scene.is(\"frozen\") && userinput.activeSets.includes(sets.cursorHoveringOnInteractable)) return FINISH;\n    return VALID;\n  },\n  invite: function(userinput, scene) {\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingCamera)) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingInteractable)) return INVALID;\n    return scene.is(\"copresent\") ? FINISH : VALID;\n  },\n  object_grab: function(userinput, scene, mediaCounter) {\n    if (scene.is(\"frozen\")) return INVALID;\n    if (mediaCounter.count() === 0) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingCamera)) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingInteractable)) return FINISH;\n    return VALID;\n  },\n  object_rotate_button: function(userinput, scene, mediaCounter, store) {\n    if (!scene.is(\"frozen\")) return INVALID;\n    if (mediaCounter.count() === 0) return INVALID;\n    if (store && store.state.activity.hasRotated) return FINISH;\n    return VALID;\n  },\n  object_scale_button: function(userinput, scene, mediaCounter, store) {\n    if (!scene.is(\"frozen\")) return INVALID;\n    if (mediaCounter.count() === 0) return INVALID;\n    if (store && store.state.activity.hasScaled) return FINISH;\n    return VALID;\n  },\n  object_recenter_button: function(userinput, scene, mediaCounter, store) {\n    if (!scene.is(\"frozen\")) return INVALID;\n    if (mediaCounter.count() === 0) return INVALID;\n    if (store && store.state.activity.hasRecentered) return FINISH;\n    return VALID;\n  },\n  object_pin: function(userinput, scene, mediaCounter, store) {\n    if (!scene.is(\"frozen\")) return INVALID;\n    if (mediaCounter.count() === 0) return INVALID;\n    if (store && store.state.activity.hasPinned) return FINISH;\n    return VALID;\n  },\n  object_zoom: function(userinput, scene) {\n    if (scene.is(\"frozen\")) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingCamera)) return INVALID;\n    if (!userinput.activeSets.includes(sets.cursorHoldingInteractable)) return INVALID;\n    if (userinput.get(paths.actions.cursor.modDelta)) return FINISH;\n    return VALID;\n  },\n  object_scale: function(userinput, scene) {\n    if (scene.is(\"frozen\")) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingCamera)) return INVALID;\n    if (!userinput.activeSets.includes(sets.cursorHoldingInteractable)) return INVALID;\n    if (userinput.get(paths.actions.cursor.scaleGrabbedGrabbable)) return FINISH;\n    return VALID;\n  },\n  pen_color: function(userinput) {\n    if (!userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (userinput.get(paths.actions.cursor.penNextColor) || userinput.get(paths.actions.cursor.penPrevColor)) {\n      return FINISH;\n    }\n    return VALID;\n  },\n  pen_size: function(userinput) {\n    if (!userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (userinput.get(paths.actions.cursor.scalePenTip)) return FINISH;\n    return VALID;\n  },\n  pen_mode: function(userinput) {\n    if (!userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    return VALID;\n  },\n  freeze_mode: function(userinput, scene) {\n    return scene.is(\"frozen\") ? VALID : INVALID;\n  },\n  video_share_mode: function(userinput, scene) {\n    return scene.is(\"sharing_video\") ? VALID : INVALID;\n  },\n  mirror_mode: function(userinput, scene) {\n    return scene.is(\"mirroring\") ? VALID : INVALID;\n  },\n  mute_mode: function(userinput, scene) {\n    return scene.is(\"muted\") ? VALID : INVALID;\n  },\n  feedback: function(userinput, scene, mediaCounter, store) {\n    if (store && store.state.activity.entryCount >= NUM_ENTRIES_FOR_FEEDBACK_TIP) return VALID;\n    return INVALID;\n  }\n};\n\nAFRAME.registerSystem(\"tips\", {\n  init: function() {\n    this.activeTips = {};\n    this._finishedScopes = {};\n    this._performStep = this._performStep.bind(this);\n\n    if (localStorage.getItem(LOCAL_STORAGE_KEY) === null) {\n      localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify({}));\n    }\n  },\n\n  tick: function() {\n    if (isMobileVR) return; // Optimization for now, don't bother with this on mobile VR until we have real tips\n\n    if (!this._userinput) {\n      this._userinput = this.el.systems.userinput;\n\n      if (!this._userinput) return;\n    }\n\n    if (!this._mediaCounter) {\n      this._mediaCounter =\n        document.querySelector(\"#media-counter\") &&\n        document.querySelector(\"#media-counter\").components[\"networked-counter\"];\n\n      if (!this._mediaCounter) return;\n    }\n\n    const tips = platformTips;\n\n    const prevTop = this.activeTips.top;\n    const prevBottom = this.activeTips.bottom;\n\n    this._performStep(tips.top, \"top\");\n    this._performStep(tips.bottom, \"bottom\");\n\n    if (prevTop !== this.activeTips.top || prevBottom !== this.activeTips.bottom) {\n      this.el.emit(\"tips_changed\", this.activeTips);\n    }\n  },\n\n  _performStep: function(tips, scope) {\n    if (finishedScopes[scope]) return;\n\n    let chosenTip = null;\n    let finishCount = 0;\n\n    for (let i = 0; i < tips.length; i++) {\n      const tip = tips[i];\n      if (isTipFinished(tip)) {\n        finishCount++;\n        continue;\n      }\n\n      switch (VALIDATORS[tip](this._userinput, this.el, this._mediaCounter, window.APP.store)) {\n        case FINISH:\n          markTipFinished(tip);\n          break;\n        case VALID:\n          chosenTip = `${tipPlatform()}.${tip}`;\n          break;\n      }\n\n      if (chosenTip) break;\n    }\n\n    this.activeTips[scope] = chosenTip;\n\n    if (finishCount === tips.length) {\n      // Optimization: Tips are completed for this scope, no need to re-walk.\n      finishedScopes[scope] = true;\n    }\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport styles from \"../assets/stylesheets/tip.scss\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { handleTipClose } from \"../systems/tips.js\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nexport default class Tip extends Component {\n  static propTypes = {\n    history: PropTypes.object,\n    tip: PropTypes.string,\n    tipRegion: PropTypes.string,\n    broadcastTarget: PropTypes.string,\n    pushHistoryState: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  render() {\n    const { tip, tipRegion, broadcastTarget, pushHistoryState } = this.props;\n    let tipBody;\n\n    if ([\".spawn_menu\", \"_button\"].find(x => tip.endsWith(x))) {\n      tipBody = (\n        <div className={styles.splitTip}>\n          <FormattedMessage id={`tips.${tip}-pre`} />\n          <div\n            className={classNames({\n              [styles.splitTipIcon]: true,\n              [styles[tip.split(\".\")[1] + \"-icon\"]]: true\n            })}\n          />\n          <FormattedMessage id={`tips.${tip}-post`} />\n        </div>\n      );\n    } else if (tip === \"discord\") {\n      tipBody = (\n        <div className={styles.tip}>\n          <span>{`Chat in this room is being bridged to ${broadcastTarget} on Discord.`}</span>\n        </div>\n      );\n    } else if (tip === \"embed\") {\n      tipBody = (\n        <div className={styles.tip}>\n          <FormattedMessage id=\"embed.presence-warning\" />\n        </div>\n      );\n    } else if (tip.endsWith(\".feedback\")) {\n      tipBody = (\n        <div className={styles.tip}>\n          <FormattedMessage id={`tips.${tip}`} />\n          &nbsp;\n          <button\n            className={styles.tipLink}\n            onClick={() => {\n              handleTipClose(tip, tipRegion);\n              pushHistoryState(\"modal\", \"feedback\");\n            }}\n          >\n            <FormattedMessage id={`tips.${tip}-link`} />\n          </button>\n        </div>\n      );\n    } else {\n      tipBody = (\n        <div className={styles.tip}>\n          <FormattedMessage id={`tips.${tip}`} />\n        </div>\n      );\n    }\n\n    return (\n      <div className={styles.tipRoot}>\n        <button\n          className={styles.tipCancel}\n          onClick={() => (this.props.onClose ? this.props.onClose(tip, tipRegion) : handleTipClose(tip, tipRegion))}\n        >\n          <i>\n            <FontAwesomeIcon icon={faTimes} />\n          </i>\n        </button>\n        {tipBody}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\n\nexport default class WebRTCScreenshareUnsupportedDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"Share Screen\" {...this.props}>\n        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\" }}>\n          <p>\n            Your browser doesn&apos;t seem to support screen sharing.\n            <br />\n            To share your screen in Hubs, you can use Firefox.\n          </p>\n          <a\n            className=\"info-dialog--action-button\"\n            target=\"_blank\"\n            rel=\"noreferrer noopener\"\n            href=\"https://www.mozilla.org/firefox\"\n          >\n            Download Firefox\n          </a>\n          <p style={{ fontSize: \"0.8em\" }}>\n            You can try&nbsp;\n            <a\n              href=\"https://www.webrtc-experiment.com/screen-sharing/#5591174797993739\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              testing WebRTC screen sharing\n            </a>&nbsp;in your browser.\n          </p>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\n\nexport default class WebAssemblyUnsupportedDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"WebAssembly Unsupported\" {...this.props}>\n        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\" }}>\n          <p>\n            Your browser doesn&apos;t seem to support WebAssembly.\n            <br />\n            Please update or switch to a newer browser.\n          </p>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class WebVRRecommendDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"Enter in VR\" {...this.props}>\n        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\" }}>\n          <p>To enter with Oculus or SteamVR, you can use Firefox.</p>\n          <WithHoverSound>\n            <a\n              className=\"info-dialog--action-button\"\n              href=\"https://www.mozilla.org/firefox\"\n              target=\"_blank\"\n              rel=\"noreferrer noopener\"\n            >\n              Download Firefox\n            </a>\n          </WithHoverSound>\n          <p style={{ fontSize: \"0.8em\" }}>\n            For a list of browsers with experimental VR support, visit{\" \"}\n            <WithHoverSound>\n              <a href=\"https://webvr.rocks\" target=\"_blank\" rel=\"noopener noreferrer\">\n                WebVR Rocks\n              </a>\n            </WithHoverSound>\n          </p>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\nimport styles from \"../assets/stylesheets/feedback-dialog.scss\";\n\nexport default class FeedbackDialog extends Component {\n  render() {\n    return (\n      <DialogContainer wide={true} title=\"\" {...this.props}>\n        <iframe\n          className={styles.formFrame}\n          src=\"https://docs.google.com/forms/d/e/1FAIpQLSe1C-7hCA1XMT8IL8XBnjlxMAU1JXrwAW8YkbmbBJ4B3pDSsw/viewform?embedded=true\"\n          frameBorder=\"0\"\n          marginHeight=\"0\"\n          marginWidth=\"0\"\n        >\n          Loading...\n        </iframe>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\nimport styles from \"../assets/stylesheets/leave-room-dialog.scss\";\nimport { FormattedMessage } from \"react-intl\";\nimport PropTypes from \"prop-types\";\n\nexport default class LeaveRoomDialog extends Component {\n  static propTypes = {\n    messageType: PropTypes.string,\n    destinationUrl: PropTypes.string\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Leave Room\" {...this.props}>\n        <div className={styles.leaveRoom}>\n          <div>\n            <FormattedMessage id={`leave-room-dialog.${this.props.messageType}.message`} />\n          </div>\n          <a href={this.props.destinationUrl} rel=\"noopener noreferrer\">\n            <FormattedMessage id={`leave-room-dialog.${this.props.messageType}.confirm`} />\n          </a>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport DialogContainer from \"./dialog-container.js\";\nimport styles from \"../assets/stylesheets/room-info-dialog.scss\";\nimport { scaledThumbnailUrlFor } from \"../utils/media-url-utils\";\n\nexport default class RoomInfoDialog extends Component {\n  static propTypes = {\n    hubName: PropTypes.string,\n    scene: PropTypes.object\n  };\n\n  render() {\n    const toAttributionDiv = (a, i) => {\n      if (a.url) {\n        const source = a.url.includes(\"sketchfab.com\")\n          ? \"on Sketchfab\"\n          : a.url.includes(\"poly.google.com\")\n            ? \"on Google Poly\"\n            : \"\";\n\n        return (\n          <div className={styles.attribution} key={`${a.url} ${i}`}>\n            <div className={styles.attributionName}>\n              <a href={a.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                {a.name}\n              </a>\n            </div>\n            <div className={styles.attributionAuthor}>\n              by {a.author} {source}\n            </div>\n          </div>\n        );\n      } else {\n        return (\n          <div className={styles.attribution} key={`${a.name} ${a.author} {i}`}>\n            <div className={styles.attributionName}>{a.name}</div>\n            <div className={styles.attributionAuthor}>by {a.author}</div>\n          </div>\n        );\n      }\n    };\n\n    let attributions = null;\n    let creator = null;\n\n    if (this.props.scene.attributions) {\n      creator = this.props.scene.attributions.creator;\n      attributions = (\n        <div>\n          {this.props.scene.attributions.content && this.props.scene.attributions.content.map(toAttributionDiv)}\n        </div>\n      );\n    }\n\n    const title = <div className={styles.title}>{this.props.hubName}</div>;\n\n    return (\n      <DialogContainer title={title} wide={true} {...this.props}>\n        <div className={styles.roomInfo}>\n          <div className={styles.sceneScreenshot}>\n            <a href={this.props.scene.url} target=\"_blank\" rel=\"noopener noreferrer\">\n              <img src={scaledThumbnailUrlFor(this.props.scene.screenshot_url, 400, 480)} />\n            </a>\n          </div>\n          <div className={styles.sceneDetails}>\n            <div className={styles.sceneMain}>\n              <div className={styles.sceneName}>\n                <a href={this.props.scene.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                  {this.props.scene.name}\n                </a>\n              </div>\n              <div className={styles.sceneCreator}>{creator}</div>\n            </div>\n            <div className={styles.sceneAttributions}>{attributions}</div>\n            <div className={styles.sceneButtons}> </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { FormattedMessage } from \"react-intl\";\nimport styles from \"../assets/stylesheets/oauth-dialog.scss\";\nimport classNames from \"classnames\";\n\nexport default class OAuthDialog extends Component {\n  static propTypes = {\n    oauthInfo: PropTypes.array\n  };\n  renderSignInDisclaimer(type) {\n    return (\n      <div>\n        <div>\n          You&apos;ll need to sign in to <span className={styles.oauthTypeName}>{type}</span> to access this room.\n        </div>\n        <br />\n        <div>We&apos;ll ask for access to your e-mail address so you can skip signing in next time.</div>\n        <p className={styles.privacyNotice}>\n          By proceeding, you agree to the{\" \"}\n          <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/mozilla/hubs/blob/master/TERMS.md\">\n            terms of use\n          </a>{\" \"}\n          and{\" \"}\n          <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\">\n            privacy notice\n          </a>.\n        </p>\n      </div>\n    );\n  }\n\n  renderTweetDisclaimer() {\n    return (\n      <div className={styles.twitterMessage}>\n        <FormattedMessage id=\"oauth-dialog.message.twitter\" />\n      </div>\n    );\n  }\n\n  render() {\n    const info = this.props.oauthInfo && this.props.oauthInfo[0];\n    const closable = info && info.type === \"twitter\"; // NOTE: for now, allow closing dialog if doing Twitter sign in (currently just for sharing)\n\n    return (\n      <DialogContainer title=\"\" closable={closable} {...this.props}>\n        <div>\n          {info && (info.type === \"twitter\" ? this.renderTweetDisclaimer() : this.renderSignInDisclaimer(info.type))}\n          <div className=\"invite-form\">\n            <div className={`invite-form__buttons ${styles.oauthButtons}`}>\n              {info ? (\n                <a\n                  href={info.url}\n                  key={info.type}\n                  className={classNames({\n                    [styles.oauthButton]: true,\n                    [styles.oauthTwitterButton]: info.type === \"twitter\",\n                    [styles.oauthDiscordButton]: info.type === \"discord\"\n                  })}\n                >\n                  <FormattedMessage id={`oauth-dialog.sign-in.${info.type}`} />\n                </a>\n              ) : (\n                <div className=\"loader-wrap loader-mid\">\n                  <div className=\"loader\">\n                    <div className=\"loader-center\" />\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport DialogContainer from \"./dialog-container.js\";\nimport styles from \"../assets/stylesheets/tweet-dialog.scss\";\nimport Editor, { createEditorStateWithText } from \"draft-js-plugins-editor\";\nimport { FormattedMessage } from \"react-intl\";\nimport { fetchReticulumAuthenticated } from \"../utils/phoenix-utils\";\nimport createEmojiPlugin from \"draft-js-emoji-plugin\";\nimport createHashtagPlugin from \"draft-js-hashtag-plugin\";\nimport createLinkifyPlugin from \"draft-js-linkify-plugin\";\nimport createCounterPlugin from \"draft-js-counter-plugin\";\nimport classNames from \"classnames\";\nimport { scaledThumbnailUrlFor } from \"../utils/media-url-utils\";\nimport { Modifier, EditorState } from \"draft-js\";\nimport \"draft-js-emoji-plugin/lib/plugin.css\";\nimport \"draft-js-hashtag-plugin/lib/plugin.css\";\nimport \"draft-js-linkify-plugin/lib/plugin.css\";\nimport \"draft-js-counter-plugin/lib/plugin.css\";\n\nconst emojiPlugin = createEmojiPlugin();\nconst hashtagPlugin = createHashtagPlugin();\nconst linkifyPlugin = createLinkifyPlugin();\nconst counterPlugin = createCounterPlugin();\n\n// Taken from draft-js-emoji\nconst addEmoji = (emoji, editorState) => {\n  const contentState = editorState.getCurrentContent();\n  const contentStateWithEntity = contentState.createEntity(\"emoji\", \"IMMUTABLE\", { emojiUnicode: emoji });\n  const entityKey = contentStateWithEntity.getLastCreatedEntityKey();\n  const currentSelectionState = editorState.getSelection();\n\n  let emojiAddedContent;\n  let emojiEndPos = 0;\n  let blockSize = 0;\n\n  // in case text is selected it is removed and then the emoji is added\n  const afterRemovalContentState = Modifier.removeRange(contentState, currentSelectionState, \"backward\");\n\n  // deciding on the position to insert emoji\n  const targetSelection = afterRemovalContentState.getSelectionAfter();\n\n  emojiAddedContent = Modifier.insertText(afterRemovalContentState, targetSelection, emoji, null, entityKey);\n\n  emojiEndPos = targetSelection.getAnchorOffset();\n  const blockKey = targetSelection.getAnchorKey();\n  blockSize = contentState.getBlockForKey(blockKey).getLength();\n\n  // If the emoji is inserted at the end, a space is appended right after for\n  // a smooth writing experience.\n  if (emojiEndPos === blockSize) {\n    emojiAddedContent = Modifier.insertText(emojiAddedContent, emojiAddedContent.getSelectionAfter(), \" \");\n  }\n\n  const newEditorState = EditorState.push(editorState, emojiAddedContent, \"insert-emoji\");\n  return EditorState.forceSelection(newEditorState, emojiAddedContent.getSelectionAfter());\n};\n\nexport default class TweetDialog extends Component {\n  static propTypes = {\n    history: PropTypes.object,\n    onClose: PropTypes.func\n  };\n\n  constructor(props) {\n    super();\n\n    this.state = {\n      editorState: createEditorStateWithText(props.history.location.state.detail.text || \"\"),\n      suggestions: []\n    };\n  }\n\n  componentDidMount() {\n    // Calling this immediately seems to break editor initialization\n    setTimeout(() => {\n      this.editorRef.focus();\n\n      // Other attempts at doing this resulted in no visible cursor or weird editor behavior:\n      this.setState({ editorState: addEmoji(\"🐤\", this.state.editorState) });\n    });\n  }\n\n  async sendTweet() {\n    // For now assume url is a stored file media url\n    const media_stored_file_url = this.props.history.location.state.detail.url;\n    const body = this.state.editorState.getCurrentContent().getPlainText();\n\n    const payload = { media_stored_file_url, body };\n    this.setState({ posting: true });\n    await fetchReticulumAuthenticated(\"/api/v1/twitter/tweets\", \"POST\", payload);\n    this.setState({ posting: false, posted: true });\n  }\n\n  renderPostedDialog() {\n    return (\n      <DialogContainer wide={true} allowOverflow={true} closable={false} title=\"\" {...this.props}>\n        <div className={styles.posted}>\n          <div className={styles.message}>\n            <FormattedMessage id=\"tweet-dialog.posted\" />\n          </div>\n\n          <div className={styles.buttons}>\n            <button className={styles.tweetButton} onClick={() => this.props.onClose()}>\n              <FormattedMessage id=\"tweet-dialog.close\" />\n            </button>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n\n  renderTweetDialog() {\n    const { EmojiSuggestions, EmojiSelect } = emojiPlugin;\n    const { CharCounter } = counterPlugin;\n\n    return (\n      <DialogContainer\n        wide={true}\n        allowOverflow={true}\n        title=\"\"\n        additionalClass={styles.dialogBackground}\n        {...this.props}\n      >\n        <div className={styles.tweet}>\n          <div className={styles.editor} onClick={() => this.editorRef.focus()}>\n            <div className={styles.editorInner}>\n              <Editor\n                ref={r => (this.editorRef = r)}\n                editorState={this.state.editorState}\n                onChange={editorState => this.setState({ editorState })}\n                plugins={[emojiPlugin, hashtagPlugin, linkifyPlugin, counterPlugin]}\n              />\n            </div>\n\n            <div className={styles.emojiButton}>\n              <EmojiSelect />\n            </div>\n\n            <div className={styles.emojiSuggestions}>\n              <EmojiSuggestions />\n            </div>\n\n            {this.state.editorState.getCurrentContent().getPlainText().length > 200 && (\n              <div className={styles.counter}>\n                <CharCounter editorState={this.state.editorState} limit={280} /> / 280\n              </div>\n            )}\n\n            <div className={styles.media}>\n              <img src={scaledThumbnailUrlFor(this.props.history.location.state.detail.url, 450, 255)} />\n            </div>\n          </div>\n\n          {!this.state.posting ? (\n            <div className={styles.buttons}>\n              <button\n                className={styles.tweetButton}\n                onClick={() => this.sendTweet()}\n                disabled={this.state.editorState.getCurrentContent().getPlainText().length > 280}\n              >\n                <FormattedMessage id=\"tweet-dialog.tweet\" />\n              </button>\n            </div>\n          ) : (\n            <div className={classNames([\"loader-wrap\", \"loader-mid\", styles.tweetLoader])}>\n              <div className=\"loader\">\n                <div className=\"loader-center\" />\n              </div>\n            </div>\n          )}\n        </div>\n      </DialogContainer>\n    );\n  }\n\n  render() {\n    if (this.state.posted) {\n      return this.renderPostedDialog();\n    } else {\n      return this.renderTweetDialog();\n    }\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"../assets/stylesheets/message-entry.scss\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { faPaperPlane } from \"@fortawesome/free-solid-svg-icons/faPaperPlane\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nclass LobbyChatBox extends Component {\n  static propTypes = {\n    discordBridges: PropTypes.array,\n    occupantCount: PropTypes.number,\n    onSendMessage: PropTypes.func\n  };\n\n  state = {\n    pendingMessage: \"\"\n  };\n\n  sendMessage = e => {\n    e.preventDefault();\n    if (this.props.onSendMessage) {\n      this.props.onSendMessage(this.state.pendingMessage);\n    }\n    this.setState({ pendingMessage: \"\" });\n  };\n\n  render() {\n    const textRows = this.state.pendingMessage.split(\"\\n\").length;\n    const pendingMessageTextareaHeight = textRows * 28 + \"px\";\n    const pendingMessageFieldHeight = textRows * 28 + 20 + \"px\";\n    const discordSnippet = this.props.discordBridges.map(ch => \"#\" + ch).join(\", \");\n    const occupantSnippet = `${this.props.occupantCount - 1} other${this.props.occupantCount > 2 ? \"s\" : \"\"}`;\n    const messageEntryPlaceholder =\n      this.props.occupantCount <= 1\n        ? \"Nobody is here yet...\"\n        : this.props.discordBridges.length\n          ? `Send message to ${occupantSnippet} and ${discordSnippet}...`\n          : `Send message to ${occupantSnippet}...`;\n\n    return (\n      <form onSubmit={this.sendMessage}>\n        <div\n          className={classNames({\n            [styles.messageEntry]: true,\n            [styles.messageEntryDisabled]: this.props.occupantCount <= 1\n          })}\n          style={{ height: pendingMessageFieldHeight }}\n        >\n          <textarea\n            className={classNames([styles.messageEntryInput, \"chat-focus-target\"])}\n            value={this.state.pendingMessage}\n            rows={textRows}\n            style={{ height: pendingMessageTextareaHeight }}\n            onFocus={e => handleTextFieldFocus(e.target)}\n            onBlur={() => handleTextFieldBlur()}\n            onChange={e => this.setState({ pendingMessage: e.target.value })}\n            disabled={this.props.occupantCount <= 1 ? true : false}\n            onKeyDown={e => {\n              if (e.key === \"Enter\" && !e.shiftKey) {\n                this.sendMessage(e);\n              } else if (e.key === \"Escape\") {\n                e.target.blur();\n              }\n            }}\n            placeholder={messageEntryPlaceholder}\n          />\n          <WithHoverSound>\n            <button\n              className={classNames([styles.messageEntryButton, styles.messageEntrySubmit])}\n              disabled={this.props.occupantCount <= 1 ? true : false}\n              type=\"submit\"\n            >\n              <i>\n                <FontAwesomeIcon icon={faPaperPlane} />\n              </i>\n            </button>\n          </WithHoverSound>\n        </div>\n      </form>\n    );\n  }\n}\n\nexport default LobbyChatBox;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/chat-command-help.scss\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\nexport default class ChatCommandHelp extends Component {\n  static propTypes = {\n    matchingPrefix: PropTypes.string,\n    onTop: PropTypes.bool\n  };\n\n  render() {\n    const commands = [\n      \"leave\",\n      \"fly\",\n      \"grow\",\n      \"shrink\",\n      \"duck\",\n      \"debug\",\n      \"vrstats\",\n      \"scene <scene url>\",\n      \"rename <new name>\"\n    ];\n\n    if (qsTruthy(\"video_capture\")) {\n      commands.push(\"capture [stop]\");\n    }\n\n    return (\n      <div className={classNames({ [styles.commandHelp]: true, [styles.commandHelpOnTop]: this.props.onTop })}>\n        {commands.map(\n          c =>\n            (this.props.matchingPrefix === \"\" ||\n              c.split(\" \")[0].startsWith(this.props.matchingPrefix.split(\" \")[0])) && (\n              <div className={styles.entry} key={c}>\n                <div className={styles.command}>/{c}</div>\n                <div>\n                  <FormattedMessage id={`commands.${c.split(\" \")[0]}`} />\n                </div>\n              </div>\n            )\n        )}\n      </div>\n    );\n  }\n}\n","// https://stackoverflow.com/questions/6209161/extract-the-current-dom-and-print-it-as-a-string-with-styles-intact\n//\n// Mapping between tag names and css default values lookup tables. This allows to exclude default values in the result.\nconst defaultStylesByTagName = {};\n\n// Styles inherited from style sheets will not be rendered for elements with these tag names\nconst noStyleTags = {\n  BASE: true,\n  HEAD: true,\n  HTML: true,\n  META: true,\n  NOFRAME: true,\n  NOSCRIPT: true,\n  PARAM: true,\n  SCRIPT: true,\n  STYLE: true,\n  TITLE: true\n};\n\n// This list determines which css default values lookup tables are precomputed at load time\n// Lookup tables for other tag names will be automatically built at runtime if needed\nconst tagNames = [\n  \"A\",\n  \"ABBR\",\n  \"ADDRESS\",\n  \"AREA\",\n  \"ARTICLE\",\n  \"ASIDE\",\n  \"AUDIO\",\n  \"B\",\n  \"BASE\",\n  \"BDI\",\n  \"BDO\",\n  \"BLOCKQUOTE\",\n  \"BODY\",\n  \"BR\",\n  \"BUTTON\",\n  \"CANVAS\",\n  \"CAPTION\",\n  \"CENTER\",\n  \"CITE\",\n  \"CODE\",\n  \"COL\",\n  \"COLGROUP\",\n  \"COMMAND\",\n  \"DATALIST\",\n  \"DD\",\n  \"DEL\",\n  \"DETAILS\",\n  \"DFN\",\n  \"DIV\",\n  \"DL\",\n  \"DT\",\n  \"EM\",\n  \"EMBED\",\n  \"FIELDSET\",\n  \"FIGCAPTION\",\n  \"FIGURE\",\n  \"FONT\",\n  \"FOOTER\",\n  \"FORM\",\n  \"H1\",\n  \"H2\",\n  \"H3\",\n  \"H4\",\n  \"H5\",\n  \"H6\",\n  \"HEAD\",\n  \"HEADER\",\n  \"HGROUP\",\n  \"HR\",\n  \"HTML\",\n  \"I\",\n  \"IFRAME\",\n  \"IMG\",\n  \"INPUT\",\n  \"INS\",\n  \"KBD\",\n  \"KEYGEN\",\n  \"LABEL\",\n  \"LEGEND\",\n  \"LI\",\n  \"LINK\",\n  \"MAP\",\n  \"MARK\",\n  \"MATH\",\n  \"MENU\",\n  \"META\",\n  \"METER\",\n  \"NAV\",\n  \"NOBR\",\n  \"NOSCRIPT\",\n  \"OBJECT\",\n  \"OL\",\n  \"OPTION\",\n  \"OPTGROUP\",\n  \"OUTPUT\",\n  \"P\",\n  \"PARAM\",\n  \"PRE\",\n  \"PROGRESS\",\n  \"Q\",\n  \"RP\",\n  \"RT\",\n  \"RUBY\",\n  \"S\",\n  \"SAMP\",\n  \"SCRIPT\",\n  \"SECTION\",\n  \"SELECT\",\n  \"SMALL\",\n  \"SOURCE\",\n  \"SPAN\",\n  \"STRONG\",\n  \"STYLE\",\n  \"SUB\",\n  \"SUMMARY\",\n  \"SUP\",\n  \"SVG\",\n  \"TABLE\",\n  \"TBODY\",\n  \"TD\",\n  \"TEXTAREA\",\n  \"TFOOT\",\n  \"TH\",\n  \"THEAD\",\n  \"TIME\",\n  \"TITLE\",\n  \"TR\",\n  \"TRACK\",\n  \"U\",\n  \"UL\",\n  \"VAR\",\n  \"VIDEO\",\n  \"WBR\"\n];\n\nfunction computeDefaultStyleByTagName(tagName) {\n  const defaultStyle = {};\n  const element = document.body.appendChild(document.createElement(tagName));\n  const computedStyle = getComputedStyle(element);\n  for (let i = 0; i < computedStyle.length; i++) {\n    defaultStyle[computedStyle[i]] = computedStyle[computedStyle[i]];\n  }\n  document.body.removeChild(element);\n  return defaultStyle;\n}\n\nfunction getDefaultStyleByTagName(tagName) {\n  tagName = tagName.toUpperCase();\n  if (!defaultStylesByTagName[tagName]) {\n    defaultStylesByTagName[tagName] = computeDefaultStyleByTagName(tagName);\n  }\n  return defaultStylesByTagName[tagName];\n}\n\nexport function warmSerializeElement() {\n  for (let i = 0; i < tagNames.length; i++) {\n    if (!noStyleTags[tagNames[i]]) {\n      defaultStylesByTagName[tagNames[i]] = computeDefaultStyleByTagName(tagNames[i]);\n    }\n  }\n}\n\nexport default function serializeElement(el) {\n  if (Object.keys(defaultStylesByTagName).length === 0) {\n    // Precompute the lookup tables.\n    warmSerializeElement();\n  }\n\n  if (el.nodeType !== Node.ELEMENT_NODE) {\n    throw new TypeError();\n  }\n  const cssTexts = [];\n  const elements = el.querySelectorAll(\"*\");\n  for (let i = 0; i < elements.length; i++) {\n    const e = elements[i];\n    if (!noStyleTags[e.tagName]) {\n      const computedStyle = getComputedStyle(e);\n      const defaultStyle = getDefaultStyleByTagName(e.tagName);\n      cssTexts[i] = e.style.cssText;\n      for (let ii = 0; ii < computedStyle.length; ii++) {\n        const cssPropName = computedStyle[ii];\n\n        // Skip non-standard CSS for now, because it overwrites things like color\n        if (cssPropName.startsWith(\"-webkit\")) continue;\n\n        if (computedStyle[cssPropName] !== defaultStyle[cssPropName]) {\n          e.style[cssPropName] = computedStyle[cssPropName];\n        }\n      }\n    }\n  }\n  const result = el.outerHTML;\n  for (let i = 0; i < elements.length; i++) {\n    elements[i].style.cssText = cssTexts[i];\n  }\n  return result;\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\n\nimport rootStyles from \"../assets/stylesheets/ui-root.scss\";\nimport styles from \"../assets/stylesheets/presence-list.scss\";\nimport PhoneImage from \"../assets/images/presence_phone.png\";\nimport DesktopImage from \"../assets/images/presence_desktop.png\";\nimport DiscordImage from \"../assets/images/presence_discord.png\";\nimport CameraImage from \"../assets/images/presence_camera.png\";\nimport HMDImage from \"../assets/images/presence_vr.png\";\nimport maskEmail from \"../utils/mask-email\";\nimport StateLink from \"./state-link.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faUsers } from \"@fortawesome/free-solid-svg-icons/faUsers\";\nimport { faPencilAlt } from \"@fortawesome/free-solid-svg-icons/faPencilAlt\";\nimport { pushHistoryPath, withSlug } from \"../utils/history\";\n\nfunction getPresenceImage(ctx) {\n  if (ctx && ctx.mobile) {\n    return PhoneImage;\n  } else if (ctx && ctx.hmd) {\n    return HMDImage;\n  } else if (ctx && ctx.discord) {\n    return DiscordImage;\n  } else {\n    return DesktopImage;\n  }\n}\n\nexport function navigateToClientInfo(history, clientId) {\n  const currentParams = new URLSearchParams(history.location.search);\n\n  if (process.env.RETICULUM_SERVER && document.location.host !== process.env.RETICULUM_SERVER) {\n    currentParams.set(\"client_id\", clientId);\n    pushHistoryPath(history, history.location.pathname, currentParams.toString());\n  } else {\n    pushHistoryPath(history, withSlug(history.location, `/clients/${clientId}`), currentParams.toString());\n  }\n}\n\nexport default class PresenceList extends Component {\n  static propTypes = {\n    presences: PropTypes.object,\n    history: PropTypes.object,\n    sessionId: PropTypes.string,\n    signedIn: PropTypes.bool,\n    email: PropTypes.string,\n    onSignIn: PropTypes.func,\n    onSignOut: PropTypes.func\n  };\n\n  state = {\n    expanded: false\n  };\n\n  navigateToClientInfo = clientId => {\n    navigateToClientInfo(this.props.history, clientId);\n  };\n\n  domForPresence = ([sessionId, data]) => {\n    const meta = data.metas[data.metas.length - 1];\n    const context = meta.context;\n    const profile = meta.profile;\n    const recording = meta.streaming || meta.recording;\n    const image = recording ? CameraImage : getPresenceImage(context);\n    const isBot = context && context.discord;\n    const isModerator = meta.roles && meta.roles.moderator;\n    const badge = isModerator && (\n      <span className={styles.moderatorBadge} title=\"Moderator\">\n        &#x2605;\n      </span>\n    );\n\n    return (\n      <WithHoverSound key={sessionId}>\n        <div className={styles.row}>\n          <div className={styles.icon}>\n            <img src={image} />\n          </div>\n          <div\n            className={classNames({\n              [styles.listItem]: true\n            })}\n          >\n            {sessionId === this.props.sessionId ? (\n              <StateLink className={styles.self} stateKey=\"overlay\" stateValue=\"profile\" history={this.props.history}>\n                {profile && profile.displayName}\n                {badge}\n                <i>\n                  <FontAwesomeIcon icon={faPencilAlt} />\n                </i>\n              </StateLink>\n            ) : (\n              <div>\n                {!isBot ? (\n                  <button className={styles.clientLink} onClick={() => this.navigateToClientInfo(sessionId)}>\n                    {profile && profile.displayName}\n                  </button>\n                ) : (\n                  <span>{profile && profile.displayName}</span>\n                )}\n                {badge}\n              </div>\n            )}\n          </div>\n          <div className={styles.presence}>\n            <FormattedMessage id={`presence.in_${meta.presence}`} />\n          </div>\n        </div>\n      </WithHoverSound>\n    );\n  };\n\n  componentDidMount() {\n    document.querySelector(\".a-canvas\").addEventListener(\"mouseup\", () => {\n      if (this.state.expanded) {\n        this.setState({ expanded: false });\n      }\n    });\n  }\n\n  renderExpandedList() {\n    return (\n      <div className={styles.presenceList}>\n        <div className={styles.attachPoint} />\n        <div className={styles.contents}>\n          <div className={styles.rows}>\n            {Object.entries(this.props.presences || {})\n              .filter(([k]) => k === this.props.sessionId)\n              .map(this.domForPresence)}\n            {Object.entries(this.props.presences || {})\n              .filter(([k]) => k !== this.props.sessionId)\n              .map(this.domForPresence)}\n          </div>\n          <div className={styles.signIn}>\n            {this.props.signedIn ? (\n              <div>\n                <span>\n                  <FormattedMessage id=\"sign-in.as\" /> {maskEmail(this.props.email)}\n                </span>{\" \"}\n                <a onClick={this.props.onSignOut}>\n                  <FormattedMessage id=\"sign-in.out\" />\n                </a>\n              </div>\n            ) : (\n              <a onClick={this.props.onSignIn}>\n                <FormattedMessage id=\"sign-in.in\" />\n              </a>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const occupantCount = this.props.presences ? Object.entries(this.props.presences).length : 0;\n    return (\n      <div>\n        <div\n          onClick={() => this.setState({ expanded: !this.state.expanded })}\n          className={classNames({\n            [rootStyles.presenceInfo]: true,\n            [rootStyles.presenceInfoSelected]: this.state.expanded\n          })}\n        >\n          <FontAwesomeIcon icon={faUsers} />\n          <span className={rootStyles.occupantCount}>{occupantCount}</span>\n        </div>\n        {this.state.expanded && this.renderExpandedList()}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\nimport Linkify from \"react-linkify\";\nimport { toArray as toEmojis } from \"react-emoji-render\";\nimport serializeElement from \"../utils/serialize-element\";\nimport { navigateToClientInfo } from \"./presence-list\";\n\nconst messageCanvas = document.createElement(\"canvas\");\nconst emojiRegex = /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|[\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|[\\ud83c[\\ude32-\\ude3a]|[\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/;\nconst urlRegex = /^https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_+.~#?&//=]*)$/;\nconst textureLoader = new THREE.TextureLoader();\n\n// Hacky word wrapping, needed because the SVG conversion doesn't properly deal\n// with wrapping in Firefox for some reason. (The CSS white-space is set to pre)\nconst wordWrap = body => {\n  const maxCharsPerLine = 40;\n  const words = body.split(\" \");\n  const outWords = [];\n  let c = 0;\n\n  for (let i = 0; i < words.length; i++) {\n    const word = words[i];\n\n    if (word.startsWith(\":\") && word.endsWith(\":\")) {\n      c++;\n    } else {\n      c += word.length;\n    }\n\n    outWords.push(word);\n\n    if (c >= maxCharsPerLine) {\n      c = 0;\n      outWords.push(\"\\n\");\n    }\n  }\n\n  return outWords.join(\" \");\n};\n\nconst messageBodyDom = (body, from, fromSessionId, includeFromLink, history) => {\n  // Support wrapping text in ` to get monospace, and multiline.\n  const multiLine = body.split(\"\\n\").length > 1;\n  const wrapStyle = multiLine ? styles.messageWrapMulti : styles.messageWrap;\n  const mono = body.startsWith(\"`\") && body.endsWith(\"`\");\n  const messageBodyClasses = {\n    [styles.messageBody]: true,\n    [styles.messageBodyMulti]: multiLine,\n    [styles.messageBodyMono]: mono\n  };\n  const includeClientLink = includeFromLink && fromSessionId && history && NAF.clientId !== fromSessionId;\n  const onFromClick = includeClientLink ? () => navigateToClientInfo(history, fromSessionId) : () => {};\n\n  if (!multiLine) {\n    body = wordWrap(body);\n  }\n\n  const cleanedBody = (mono ? body.substring(1, body.length - 1) : body).trim();\n\n  return (\n    <div className={wrapStyle}>\n      {from && (\n        <div\n          onClick={onFromClick}\n          className={classNames({ [styles.messageSource]: true, [styles.messageSourceLink]: includeClientLink })}\n        >\n          {from}:\n        </div>\n      )}\n      <div className={classNames(messageBodyClasses)}>\n        <Linkify properties={{ target: \"_blank\", rel: \"noopener referrer\" }}>{toEmojis(cleanedBody)}</Linkify>\n      </div>\n    </div>\n  );\n};\n\nfunction renderChatMessage(body, from, allowEmojiRender, lowResolution) {\n  const isOneLine = body.split(\"\\n\").length === 1;\n  const context = messageCanvas.getContext(\"2d\");\n  const emoji = toEmojis(body);\n  const isEmoji =\n    allowEmojiRender &&\n    emoji.length === 1 &&\n    emoji[0].props &&\n    emoji[0].props.children.match &&\n    emoji[0].props.children.match(emojiRegex);\n\n  const el = document.createElement(\"div\");\n  el.setAttribute(\"xmlns\", \"http://www.w3.org/1999/xhtml\");\n  el.setAttribute(\"class\", `${styles.presenceLog} ${styles.presenceLogSpawn}`);\n\n  // The element is added to the DOM in order to have layout compute the width & height,\n  // and then it is removed after being rendered.\n  document.body.appendChild(el);\n\n  const entryDom = (\n    <div\n      className={classNames({\n        [styles.presenceLogEntry]: !isEmoji,\n        [styles.presenceLogEntryOneLine]: !isEmoji && isOneLine,\n        [styles.presenceLogEmoji]: isEmoji\n      })}\n    >\n      {messageBodyDom(body, from)}\n    </div>\n  );\n\n  return new Promise(resolve => {\n    ReactDOM.render(entryDom, el, () => {\n      // Scale by 12x\n      let objectScale = \"8.33%\";\n      let scale = 12;\n\n      if (lowResolution) {\n        // In low res, scale by 4x\n        objectScale = \"25%\";\n        scale = 4;\n      }\n\n      messageCanvas.width = el.offsetWidth * (scale + 0.1);\n      messageCanvas.height = el.offsetHeight * (scale + 0.1);\n\n      const xhtml = encodeURIComponent(`\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${messageCanvas.width}\" height=\"${messageCanvas.height}\">\n            <foreignObject width=\"${objectScale}\" height=\"${objectScale}\" style=\"transform: scale(${scale});\">\n              ${serializeElement(el)}\n            </foreignObject>\n          </svg>\n    `);\n      const img = new Image();\n\n      img.onload = async () => {\n        context.drawImage(img, 0, 0);\n        const blob = await new Promise(resolve => messageCanvas.toBlob(resolve));\n        ReactDOM.unmountComponentAtNode(el);\n        el.remove();\n        resolve(blob);\n      };\n\n      img.src = \"data:image/svg+xml,\" + xhtml;\n    });\n  });\n}\n\nexport async function createInWorldLogMessage({ name, type, body }) {\n  if (type !== \"chat\") return;\n\n  const lowResolution = AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR();\n  const blob = await renderChatMessage(body, name, false, lowResolution);\n  const entity = document.createElement(\"a-entity\");\n  const meshEntity = document.createElement(\"a-entity\");\n\n  document.querySelector(\"a-scene\").appendChild(entity);\n\n  entity.appendChild(meshEntity);\n  entity.setAttribute(\"follow-in-fov\", {\n    target: \"#player-camera\",\n    offset: { x: 0, y: 0.0, z: -0.8 }\n  });\n\n  const blobUrl = URL.createObjectURL(blob);\n\n  meshEntity.setAttribute(\"animation__float\", {\n    property: \"position\",\n    dur: 10000,\n    from: { x: 0, y: 0, z: 0 },\n    to: { x: 0, y: 0.05, z: -0.05 },\n    easing: \"easeOutQuad\"\n  });\n\n  entity.setAttribute(\"animation__spawn\", {\n    property: \"scale\",\n    dur: 200,\n    from: { x: 0.1, y: 0.1, z: 0.1 },\n    to: { x: 1, y: 1, z: 1 },\n    easing: \"easeOutElastic\"\n  });\n\n  meshEntity.setAttribute(\"animation__opacity\", {\n    property: \"meshMaterial.opacity\",\n    isRawProperty: true,\n    delay: 3000,\n    dur: 8000,\n    from: 1.0,\n    to: 0.0,\n    easing: \"easeInQuad\"\n  });\n\n  meshEntity.addEventListener(\"animationcomplete__opacity\", () => {\n    entity.parentNode.removeChild(entity);\n  });\n\n  textureLoader.load(blobUrl, texture => {\n    const material = new THREE.MeshBasicMaterial();\n    material.transparent = true;\n    material.map = texture;\n    material.generateMipmaps = false;\n    material.needsUpdate = true;\n\n    const geometry = new THREE.PlaneBufferGeometry(1, 1, 1, 1, texture.flipY);\n    const mesh = new THREE.Mesh(geometry, material);\n    meshEntity.setObject3D(\"mesh\", mesh);\n    meshEntity.meshMaterial = material;\n    const scaleFactor = 4000.0 / (lowResolution ? 3.0 : 1.0);\n    meshEntity.object3DMap.mesh.scale.set(texture.image.width / scaleFactor, texture.image.height / scaleFactor, 1);\n  });\n}\n\nexport async function spawnChatMessage(body, from) {\n  if (body.length === 0) return;\n\n  if (body.match(urlRegex)) {\n    document.querySelector(\"a-scene\").emit(\"add_media\", body);\n    return;\n  }\n\n  const blob = await renderChatMessage(body, from, true, false);\n  document.querySelector(\"a-scene\").emit(\"add_media\", new File([blob], \"message.png\", { type: \"image/png\" }));\n}\n\nexport default function ChatMessage(props) {\n  return (\n    <div className={props.className}>\n      {props.maySpawn && (\n        <button\n          className={classNames(styles.iconButton, styles.spawnMessage)}\n          onClick={() => spawnChatMessage(props.body)}\n        />\n      )}\n      {messageBodyDom(props.body, props.name, props.sessionId, props.includeFromLink, props.history)}\n    </div>\n  );\n}\n\nChatMessage.propTypes = {\n  name: PropTypes.string,\n  maySpawn: PropTypes.bool,\n  body: PropTypes.string,\n  sessionId: PropTypes.string,\n  history: PropTypes.object,\n  className: PropTypes.string,\n  includeFromLink: PropTypes.bool\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"../assets/stylesheets/message-entry.scss\";\nimport ChatCommandHelp from \"./chat-command-help\";\nimport { faPaperPlane } from \"@fortawesome/free-solid-svg-icons/faPaperPlane\";\nimport { faCamera } from \"@fortawesome/free-solid-svg-icons/faCamera\";\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons/faPlus\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { spawnChatMessage } from \"./chat-message\";\nimport { pushHistoryState } from \"../utils/history\";\n\nconst isMobile = AFRAME.utils.device.isMobile();\n\nclass InWorldChatBox extends Component {\n  static propTypes = {\n    discordBridges: PropTypes.array,\n    onSendMessage: PropTypes.func,\n    onObjectCreated: PropTypes.func,\n    history: PropTypes.object,\n    enableSpawning: PropTypes.bool\n  };\n\n  state = {\n    pendingMessage: \"\"\n  };\n\n  sendMessage = e => {\n    e.preventDefault();\n    if (this.props.onSendMessage) {\n      this.props.onSendMessage(this.state.pendingMessage);\n    }\n    this.setState({ pendingMessage: \"\" });\n  };\n\n  render() {\n    const textRows = this.state.pendingMessage.split(\"\\n\").length;\n    const pendingMessageTextareaHeight = textRows * 28 + \"px\";\n    const pendingMessageFieldHeight = textRows * 28 + 20 + \"px\";\n    const discordSnippet = this.props.discordBridges.map(ch => \"#\" + ch).join(\", \");\n\n    return (\n      <form onSubmit={this.sendMessage}>\n        <div\n          className={classNames({ [styles.messageEntryInRoom]: true, [styles.messageEntryOnMobile]: isMobile })}\n          style={{ height: pendingMessageFieldHeight }}\n        >\n          {this.state.pendingMessage.startsWith(\"/\") && (\n            <ChatCommandHelp matchingPrefix={this.state.pendingMessage.substring(1)} />\n          )}\n          <input\n            id=\"message-entry-media-input\"\n            type=\"file\"\n            style={{ display: \"none\" }}\n            accept={isMobile ? \"image/*\" : \"*\"}\n            multiple\n            onChange={e => {\n              if (this.props.onObjectCreated) {\n                for (const file of e.target.files) {\n                  this.props.onObjectCreated(file);\n                }\n              }\n            }}\n          />\n          {this.props.enableSpawning && (\n            <label\n              htmlFor=\"message-entry-media-input\"\n              title={\"Upload\"}\n              className={classNames([\n                styles.messageEntryButton,\n                styles.messageEntryButtonInRoom,\n                styles.messageEntryUpload\n              ])}\n            >\n              <i>\n                <FontAwesomeIcon icon={isMobile ? faCamera : faPlus} />\n              </i>\n            </label>\n          )}\n          <textarea\n            style={{ height: pendingMessageTextareaHeight }}\n            className={classNames([\n              styles.messageEntryInput,\n              styles.messageEntryInputInRoom,\n              \"chat-focus-target\",\n              !this.props.enableSpawning && styles.messageEntryInputNoSpawn\n            ])}\n            value={this.state.pendingMessage}\n            rows={textRows}\n            onFocus={e => {\n              handleTextFieldFocus(e.target);\n            }}\n            onBlur={() => {\n              handleTextFieldBlur();\n            }}\n            onChange={e => {\n              e.stopPropagation();\n              this.setState({ pendingMessage: e.target.value });\n            }}\n            onKeyDown={e => {\n              if (e.key === \"Enter\" && !e.ctrlKey && !e.shiftKey) {\n                this.sendMessage(e);\n              } else if (e.key === \"Enter\" && e.ctrlKey) {\n                spawnChatMessage(e.target.value);\n                this.setState({ pendingMessage: \"\" });\n                e.target.blur();\n              } else if (e.key === \"Escape\") {\n                e.target.blur();\n              }\n            }}\n            placeholder={this.props.discordBridges.length ? `Send to room and ${discordSnippet}...` : \"Send to room...\"}\n          />\n          {this.props.enableSpawning && (\n            <button\n              className={classNames([styles.messageEntrySpawn])}\n              onClick={() => {\n                if (this.state.pendingMessage.length > 0) {\n                  spawnChatMessage(this.state.pendingMessage);\n                  this.setState({ pendingMessage: \"\" });\n                } else {\n                  pushHistoryState(this.props.history, \"modal\", \"create\");\n                }\n              }}\n            />\n          )}\n          <button\n            type=\"submit\"\n            className={classNames([\n              styles.messageEntryButton,\n              styles.messageEntryButtonInRoom,\n              styles.messageEntrySubmit\n            ])}\n          >\n            <i>\n              <FontAwesomeIcon icon={faPaperPlane} />\n            </i>\n          </button>\n        </div>\n      </form>\n    );\n  }\n}\n\nexport default InWorldChatBox;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport { fetchReticulumAuthenticated } from \"../utils/phoenix-utils\";\nimport { upload } from \"../utils/media-utils\";\nimport classNames from \"classnames\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport AvatarPreview from \"./avatar-preview\";\nimport styles from \"../assets/stylesheets/avatar-editor.scss\";\n\nconst AVATARS_API = \"/api/v1/avatars\";\n\nexport default class AvatarEditor extends Component {\n  static propTypes = {\n    avatarId: PropTypes.string,\n    onSignIn: PropTypes.func,\n    onSave: PropTypes.func,\n    onClose: PropTypes.func,\n    signedIn: PropTypes.bool,\n    hideDelete: PropTypes.bool,\n    debug: PropTypes.bool,\n    className: PropTypes.string\n  };\n\n  state = {\n    avatar: { name: \"My Avatar\", parent_avatar_listing_id: \"basebot\", files: {} },\n    previewGltfUrl: null\n  };\n\n  constructor(props) {\n    super(props);\n    // Blank avatar, used to create base avatar\n    // this.state = { avatar: { name: \"Base bot avatar\", files: {} } };\n\n    this.inputFiles = {};\n  }\n\n  componentDidMount = async () => {\n    if (this.props.avatarId) {\n      const avatar = await this.fetchAvatar(this.props.avatarId);\n      avatar.creatorAttribution = (avatar.attributions && avatar.attributions.creator) || \"\";\n      Object.assign(this.inputFiles, avatar.files);\n      this.setState({ avatar, previewGltfUrl: avatar.base_gltf_url });\n    } else {\n      const { base_gltf_url } = await this.fetchAvatar(\"basebot\");\n      this.setState({ previewGltfUrl: base_gltf_url });\n    }\n  };\n\n  fetchAvatar = avatarId => {\n    return fetchReticulumAuthenticated(`${AVATARS_API}/${avatarId}`).then(({ avatars }) => avatars[0]);\n  };\n\n  createOrUpdateAvatar = avatar => {\n    return fetchReticulumAuthenticated(\n      avatar.avatar_id ? `${AVATARS_API}/${avatar.avatar_id}` : AVATARS_API,\n      avatar.avatar_id ? \"PUT\" : \"POST\",\n      { avatar }\n    ).then(({ avatars }) => avatars[0]);\n  };\n\n  uploadAvatar = async e => {\n    e.preventDefault();\n\n    if (this.inputFiles.glb && this.inputFiles.glb instanceof File) {\n      const gltfLoader = new THREE.GLTFLoader();\n      const gltfUrl = URL.createObjectURL(this.inputFiles.glb);\n      const onProgress = console.log;\n      const parser = await new Promise((resolve, reject) =>\n        gltfLoader.createParser(gltfUrl, resolve, onProgress, reject)\n      );\n      URL.revokeObjectURL(gltfUrl);\n\n      const { content, body } = parser.extensions.KHR_binary_glTF;\n\n      // Inject hubs components on upload. Used to create base avatar\n      // const gltf = parser.json;\n      // Object.assign(gltf.scenes[0], {\n      //   extensions: {\n      //     MOZ_hubs_components: {\n      //       \"loop-animation\": {\n      //         clip: \"idle_eyes\"\n      //       }\n      //     }\n      //   }\n      // });\n      // Object.assign(gltf.nodes.find(n => n.name === \"Head\"), {\n      //   extensions: {\n      //     MOZ_hubs_components: {\n      //       \"scale-audio-feedback\": \"\"\n      //     }\n      //   }\n      // });\n      // content = JSON.stringify(gltf);\n\n      this.inputFiles.gltf = new File([content], \"file.gltf\", {\n        type: \"model/gltf\"\n      });\n      this.inputFiles.bin = new File([body], \"file.bin\", {\n        type: \"application/octet-stream\"\n      });\n    }\n\n    this.inputFiles.thumbnail = new File([await this.preview.getWrappedInstance().snapshot()], \"thumbnail.png\", {\n      type: \"image/png\"\n    });\n\n    const filesToUpload = [\"gltf\", \"bin\", \"base_map\", \"emissive_map\", \"normal_map\", \"orm_map\", \"thumbnail\"].filter(\n      k => this.inputFiles[k] === null || this.inputFiles[k] instanceof File\n    );\n\n    this.setState({ uploading: true });\n\n    const fileUploads = await Promise.all(filesToUpload.map(f => this.inputFiles[f] && upload(this.inputFiles[f])));\n    const avatar = {\n      ...this.state.avatar,\n      attributions: {\n        creator: this.state.avatar.creatorAttribution\n      },\n      files: fileUploads\n        .map((resp, i) => [filesToUpload[i], resp && [resp.file_id, resp.meta.access_token, resp.meta.promotion_token]])\n        .reduce((o, [k, v]) => ({ ...o, [k]: v }), {})\n    };\n\n    await this.createOrUpdateAvatar(avatar);\n\n    this.setState({ uploading: false });\n\n    if (this.props.onSave) this.props.onSave();\n  };\n\n  deleteAvatar = async e => {\n    e.preventDefault();\n    await fetchReticulumAuthenticated(`${AVATARS_API}/${this.state.avatar.avatar_id}`, \"DELETE\");\n    if (this.props.onSave) this.props.onSave();\n  };\n\n  fileField = (name, label, accept, disabled = false, title) => (\n    <div className=\"file-input-row\" key={name} title={title}>\n      <label htmlFor={`avatar-file_${name}`}>\n        <div className=\"img-box\" />\n        <span>{label}</span>\n      </label>\n      <input\n        id={`avatar-file_${name}`}\n        type=\"file\"\n        accept={accept}\n        disabled={disabled}\n        onChange={e => {\n          this.inputFiles[name] = e.target.files[0];\n          e.target.value = null;\n        }}\n      />\n      {this.state.avatar.files[name] && (\n        <a\n          onClick={() => {\n            this.inputFiles[name] = null;\n          }}\n        >\n          <i>\n            <FontAwesomeIcon icon={faTimes} />\n          </i>\n        </a>\n      )}\n    </div>\n  );\n\n  mapField = (name, label, accept, disabled = false, title) => (\n    <div className=\"file-input-row\" key={name} title={title}>\n      <label htmlFor={`avatar-file_${name}`}>\n        <div className=\"img-box\">{this.state.avatar.files[name] && <img src={this.state.avatar.files[name]} />}</div>\n        <span>{label}</span>\n      </label>\n      <input\n        id={`avatar-file_${name}`}\n        type=\"file\"\n        accept={accept}\n        disabled={disabled}\n        onChange={e => {\n          const file = e.target.files[0];\n          e.target.value = null;\n          this.inputFiles[name] = file;\n          URL.revokeObjectURL(this.state.avatar.files[name]);\n          this.setState({\n            avatar: {\n              ...this.state.avatar,\n              files: {\n                ...this.state.avatar.files,\n                [name]: URL.createObjectURL(file)\n              }\n            }\n          });\n        }}\n      />\n      {this.state.avatar.files[name] && (\n        <a\n          onClick={() => {\n            this.inputFiles[name] = null;\n            URL.revokeObjectURL(this.state.avatar.files[name]);\n            this.setState({\n              avatar: {\n                ...this.state.avatar,\n                files: {\n                  ...this.state.avatar.files,\n                  [name]: null\n                }\n              }\n            });\n          }}\n        >\n          <i>\n            <FontAwesomeIcon icon={faTimes} />\n          </i>\n        </a>\n      )}\n    </div>\n  );\n\n  textField = (name, placeholder, disabled, required) => (\n    <div>\n      <input\n        id={`avatar-${name}`}\n        type=\"text\"\n        disabled={disabled}\n        required={required}\n        placeholder={placeholder}\n        className=\"text-field\"\n        value={this.state.avatar[name] || \"\"}\n        onChange={e => this.setState({ avatar: { ...this.state.avatar, [name]: e.target.value } })}\n      />\n    </div>\n  );\n\n  textarea = (name, placeholder, disabled) => (\n    <div>\n      <textarea\n        id={`avatar-${name}`}\n        disabled={disabled}\n        placeholder={placeholder}\n        className=\"textarea\"\n        value={this.state.avatar[name] || \"\"}\n        onChange={e => this.setState({ avatar: { ...this.state.avatar, [name]: e.target.value } })}\n      />\n    </div>\n  );\n\n  checkbox = (name, children, disabled) => (\n    <div className=\"checkbox-container\">\n      <input\n        id={`avatar-${name}`}\n        type=\"checkbox\"\n        className=\"checkbox\"\n        disabled={disabled}\n        checked={!!this.state.avatar[name]}\n        onChange={e => this.setState({ avatar: { ...this.state.avatar, [name]: e.target.checked } })}\n      />\n      <label htmlFor={`#avatar-${name}`}>{children}</label>\n    </div>\n  );\n\n  render() {\n    const { debug } = this.props;\n    return (\n      <div className={classNames(styles.avatarEditor, this.props.className)}>\n        {this.props.onClose && (\n          <a className=\"close-button\" onClick={this.props.onClose}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </a>\n        )}\n        {this.props.signedIn ? (\n          <div className=\"center\">\n            <div className=\"split\">\n              <div className=\"form-body\">\n                {debug && this.textField(\"avatar_id\", \"Avatar ID\", true)}\n                {debug && this.textField(\"parent_avatar_id\", \"Parent Avatar ID\")}\n                {debug && this.textField(\"parent_avatar_listing_id\", \"Parent Avatar Listing ID\")}\n                {this.textField(\"name\", \"Name\", false, true)}\n                {debug && this.textarea(\"description\", \"Description\")}\n                {debug && this.fileField(\"glb\", \"Avatar GLB\", \"model/gltf+binary,.glb\")}\n\n                {this.mapField(\"base_map\", \"Base Map\", \"image/*\")}\n                {this.mapField(\"emissive_map\", \"Emissive Map\", \"image/*\")}\n                {this.mapField(\"normal_map\", \"Normal Map\", \"image/*\")}\n\n                {this.mapField(\"orm_map\", \"ORM Map\", \"image/*\", false, \"Occlussion (r), Roughness (g), Metallic (b)\")}\n\n                <hr />\n\n                {this.checkbox(\n                  \"allow_promotion\",\n                  <span>\n                    Allow{\" \"}\n                    <a\n                      href=\"https://github.com/mozilla/hubs/blob/master/PROMOTION.md\"\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      Promotion\n                    </a>\n                  </span>\n                )}\n                {this.checkbox(\n                  \"allow_remixing\",\n                  <span>\n                    Allow{\" \"}\n                    <a\n                      href=\"https://github.com/mozilla/hubs/blob/master/REMIXING.md\"\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      Remixing\n                    </a>{\" \"}\n                    <span className=\"license\">\n                      (under{\" \"}\n                      <a href=\"https://creativecommons.org/licenses/by/3.0/\" target=\"_blank\" rel=\"noopener noreferrer\">\n                        CC-BY 3.0\n                      </a>)\n                    </span>\n                  </span>\n                )}\n                {this.textField(\"creatorAttribution\", \"Attribution (optional)\", false, false)}\n\n                {/* {this.mapField(\"ao_map\", \"AO Map\", \"images/\\*\", true)} */}\n                {/* {this.mapField(\"metallic_map\", \"Metallic Map\", \"image/\\*\", true)} */}\n                {/* {this.mapField(\"roughness_map\", \"Roughness Map\", \"image/\\*\", true)} */}\n              </div>\n              <AvatarPreview\n                className=\"preview\"\n                avatarGltfUrl={this.state.previewGltfUrl}\n                {...this.inputFiles}\n                ref={p => (this.preview = p)}\n              />\n            </div>\n            <div className=\"info\">\n              <p>\n                <FormattedMessage id=\"avatar-editor.info\" />\n                <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/j-conrad/hubs-avatar-pipelines\">\n                  <FormattedMessage id=\"avatar-editor.info-link\" />\n                </a>\n              </p>\n            </div>\n            <div>\n              <input\n                disabled={this.state.uploading}\n                onClick={this.uploadAvatar}\n                className=\"form-submit\"\n                type=\"submit\"\n                value={this.state.uploading ? \"Uploading...\" : \"Save\"}\n              />\n            </div>\n            {!this.props.hideDelete && (\n              <div className=\"delete-avatar\">\n                {this.state.confirmDelete ? (\n                  <span>\n                    are you sure? <a onClick={this.deleteAvatar}>yes</a> /{\" \"}\n                    <a onClick={() => this.setState({ confirmDelete: false })}>no</a>\n                  </span>\n                ) : (\n                  <a onClick={() => this.setState({ confirmDelete: true })}>delete avatar</a>\n                )}\n              </div>\n            )}\n          </div>\n        ) : (\n          <a onClick={this.props.onSignIn}>\n            <FormattedMessage id=\"sign-in.in\" />\n          </a>\n        )}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport MovingAverage from \"moving-average\";\n\nconst AudioContext = window.AudioContext || window.webkitAudioContext;\n\nexport default class MicLevelWidget extends Component {\n  static propTypes = {\n    mediaStream: PropTypes.object,\n    hasAudioTrack: PropTypes.bool,\n    muteOnEntry: PropTypes.bool\n  };\n\n  state = {\n    micLevel: 0\n  };\n\n  componentDidMount() {\n    if (this.props.mediaStream != null && this.props.hasAudioTrack) {\n      this.startAnalyzer(this.props.mediaStream);\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.mediaStream !== prevProps.mediaStream || this.props.hasAudioTrack !== prevProps.hasAudioTrack) {\n      this.stopAnalyzer();\n      if (this.props.mediaStream != null && this.props.hasAudioTrack) {\n        this.startAnalyzer(this.props.mediaStream);\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.stopAnalyzer();\n  }\n\n  stopAnalyzer() {\n    if (this.micUpdateInterval != null) {\n      clearInterval(this.micUpdateInterval);\n    }\n    if (this.micLevelAudioContext != null) {\n      this.micLevelAudioContext.close();\n    }\n  }\n\n  startAnalyzer(mediaStream) {\n    this.micLevelAudioContext = new AudioContext();\n    const micSource = this.micLevelAudioContext.createMediaStreamSource(mediaStream);\n    const analyser = this.micLevelAudioContext.createAnalyser();\n    analyser.fftSize = 32;\n    const levels = new Uint8Array(analyser.frequencyBinCount);\n    micSource.connect(analyser);\n    const micLevelMovingAverage = MovingAverage(100);\n    this.micUpdateInterval = setInterval(() => {\n      analyser.getByteTimeDomainData(levels);\n      let v = 0;\n      for (let x = 0; x < levels.length; x++) {\n        v = Math.max(levels[x] - 128, v);\n      }\n      const level = v / 128.0;\n      // Multiplier to increase visual indicator.\n      const multiplier = 6;\n      // We use a moving average to smooth out the visual animation or else it would twitch too fast for\n      // the css renderer to keep up.\n      micLevelMovingAverage.push(Date.now(), level * multiplier);\n      const average = micLevelMovingAverage.movingAverage();\n      this.setState(state => {\n        if (Math.abs(average - state.micLevel) > 0.0001) {\n          return { micLevel: average };\n        }\n      });\n    }, 50);\n  }\n\n  render() {\n    const maxLevelHeight = 111;\n    const micClip = {\n      clip: `rect(${maxLevelHeight - Math.floor(this.state.micLevel * maxLevelHeight)}px, 111px, 111px, 0px)`\n    };\n\n    return (\n      <div className=\"audio-setup-panel__levels__icon\">\n        <img\n          src=\"../assets/images/level_background.png\"\n          srcSet=\"../assets/images/level_background@2x.png 2x\"\n          className=\"audio-setup-panel__levels__icon-part\"\n        />\n        {!this.props.muteOnEntry && (\n          <img\n            src=\"../assets/images/level_fill.png\"\n            srcSet=\"../assets/images/level_fill@2x.png 2x\"\n            className=\"audio-setup-panel__levels__icon-part\"\n            style={micClip}\n          />\n        )}\n        {this.props.hasAudioTrack && !this.props.muteOnEntry ? (\n          <img\n            src=\"../assets/images/mic_level.png\"\n            srcSet=\"../assets/images/mic_level@2x.png 2x\"\n            className=\"audio-setup-panel__levels__icon-part\"\n          />\n        ) : (\n          <img\n            src=\"../assets/images/mic_denied.png\"\n            srcSet=\"../assets/images/mic_denied@2x.png 2x\"\n            className=\"audio-setup-panel__levels__icon-part\"\n          />\n        )}\n        {this.props.hasAudioTrack &&\n          !this.props.muteOnEntry && (\n            <div className=\"audio-setup-panel__levels__test_label\">\n              <FormattedMessage id=\"audio.talk_to_test\" />\n            </div>\n          )}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nimport webmTone from \"../assets/sfx/tone.webm\";\nimport mp3Tone from \"../assets/sfx/tone.mp3\";\nimport oggTone from \"../assets/sfx/tone.ogg\";\nimport wavTone from \"../assets/sfx/tone.wav\";\n\nexport default class OutputLevelWidget extends Component {\n  state = {\n    tonePlaying: false\n  };\n\n  constructor(props) {\n    super(props);\n    this.playTestTone = this.playTestTone.bind(this);\n    this.toneClip = document.createElement(\"audio\");\n    if (this.toneClip.canPlayType(\"audio/webm\")) {\n      this.toneClip.src = webmTone;\n    } else if (this.toneClip.canPlayType(\"audio/mpeg\")) {\n      this.toneClip.src = mp3Tone;\n    } else if (this.toneClip.canPlayType(\"audio/ogg\")) {\n      this.toneClip.src = oggTone;\n    } else {\n      this.toneClip.src = wavTone;\n    }\n  }\n\n  componentWillUnmount() {\n    this.toneClip.pause();\n    this.toneClip.currentTime = 0;\n    if (this.testToneTimeout != null) {\n      clearTimeout(this.testToneTimeout);\n    }\n  }\n\n  playTestTone() {\n    if (this.testToneTimeout != null) {\n      clearTimeout(this.testToneTimeout);\n    }\n    this.toneClip.currentTime = 0;\n    this.toneClip.play();\n    this.setState({ tonePlaying: true });\n    this.testToneTimeout = setTimeout(() => {\n      this.setState({ tonePlaying: false });\n    }, 1393);\n  }\n\n  render() {\n    const maxLevelHeight = 111;\n    const speakerClip = { clip: `rect(${this.state.tonePlaying ? 0 : maxLevelHeight}px, 111px, 111px, 0px)` };\n    return (\n      <WithHoverSound>\n        <div className=\"audio-setup-panel__levels__icon_clickable\" onClick={this.playTestTone}>\n          <img\n            src=\"../assets/images/level_action_background.png\"\n            srcSet=\"../assets/images/level_action_background@2x.png 2x\"\n            className=\"audio-setup-panel__levels__icon-part\"\n          />\n          <img\n            src=\"../assets/images/level_action_fill.png\"\n            srcSet=\"../assets/images/level_action_fill@2x.png 2x\"\n            className=\"audio-setup-panel__levels__icon-part\"\n            style={speakerClip}\n          />\n          <img\n            src=\"../assets/images/speaker_level.png\"\n            srcSet=\"../assets/images/speaker_level@2x.png 2x\"\n            className=\"audio-setup-panel__levels__icon-part\"\n          />\n          <div className=\"audio-setup-panel__levels__test_label\">\n            <FormattedMessage id=\"audio.click_to_test\" />\n          </div>\n        </div>\n      </WithHoverSound>\n    );\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\n\nimport { share } from \"../utils/share\";\nimport { getLandingPageForPhoto } from \"../utils/phoenix-utils\";\n\nexport default function PhotoMessage({ name, body: { src: url }, className, maySpawn, hubId }) {\n  const landingPageUrl = getLandingPageForPhoto(url);\n  const onShareClicked = share.bind(null, {\n    url: landingPageUrl,\n    title: `Taken in #hubs, join me at https://hub.link/${hubId}`\n  });\n  return (\n    <div className={className}>\n      {maySpawn && <button className={classNames(styles.iconButton, styles.share)} onClick={onShareClicked} />}\n      <div className={styles.mediaBody}>\n        <span>\n          <b>{name}</b>\n        </span>\n        <span>\n          {\"took a \"}\n          <b>\n            <a href={landingPageUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n              photo\n            </a>\n          </b>.\n        </span>\n      </div>\n      <a href={landingPageUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n        <img src={url} />\n      </a>\n    </div>\n  );\n}\nPhotoMessage.propTypes = {\n  name: PropTypes.string,\n  maySpawn: PropTypes.bool,\n  body: PropTypes.object,\n  className: PropTypes.string,\n  hubId: PropTypes.string\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\nimport { proxiedUrlFor } from \"../utils/media-url-utils\";\n\nfunction spawnImage(url) {\n  document.querySelector(\"a-scene\").emit(\"add_media\", url);\n}\n\nexport default function ImageMessage({ name, body: { src: url }, className, maySpawn }) {\n  return (\n    <div className={className}>\n      {maySpawn && (\n        <button className={classNames(styles.iconButton, styles.spawnMessage)} onClick={() => spawnImage(url)} />\n      )}\n      <div className={styles.mediaBody}>{name && <div className={styles.messageSource}>{name}:</div>}</div>\n      <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n        <img src={proxiedUrlFor(url)} />\n      </a>\n    </div>\n  );\n}\n\nImageMessage.propTypes = {\n  name: PropTypes.string,\n  maySpawn: PropTypes.bool,\n  body: PropTypes.object,\n  className: PropTypes.string\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport ChatMessage from \"./chat-message\";\nimport PhotoMessage from \"./photo-message\";\nimport ImageMessage from \"./image-message\";\nimport { getPresenceContextForSession } from \"../utils/phoenix-utils\";\n\nexport default class PresenceLog extends Component {\n  static propTypes = {\n    entries: PropTypes.array,\n    inRoom: PropTypes.bool,\n    hubId: PropTypes.string,\n    history: PropTypes.object,\n    presences: PropTypes.object\n  };\n\n  constructor(props) {\n    super(props);\n  }\n\n  domForEntry = e => {\n    const entryClasses = {\n      [styles.presenceLogEntry]: true,\n      [styles.presenceLogEntryWithButton]: (e.type === \"chat\" || e.type === \"image\") && e.maySpawn,\n      [styles.presenceLogChat]: e.type === \"chat\",\n      [styles.expired]: !!e.expired\n    };\n\n    const presenceContext = e.sessionId ? getPresenceContextForSession(this.props.presences, e.sessionId) : {};\n    const isBot = !!presenceContext.discord;\n\n    switch (e.type) {\n      case \"join\":\n      case \"entered\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.name}</b>&nbsp;<FormattedMessage id={`presence.${e.type}_${e.presence}`} />\n          </div>\n        );\n      case \"leave\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.name}</b>&nbsp;<FormattedMessage id={`presence.${e.type}`} />\n          </div>\n        );\n      case \"display_name_changed\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.oldName}</b>&nbsp;<FormattedMessage id=\"presence.name_change\" />&nbsp;<b>{e.newName}</b>.\n          </div>\n        );\n      case \"scene_changed\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.name}</b>&nbsp;<FormattedMessage id=\"presence.scene_change\" />&nbsp;<b>{e.sceneName}</b>.\n          </div>\n        );\n      case \"hub_name_changed\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.name}</b>&nbsp;<FormattedMessage id=\"presence.hub_name_change\" />&nbsp;<b>{e.hubName}</b>.\n          </div>\n        );\n      case \"chat\":\n        return (\n          <ChatMessage\n            key={e.key}\n            name={e.name}\n            className={classNames(entryClasses)}\n            body={e.body}\n            maySpawn={e.maySpawn}\n            sessionId={e.sessionId}\n            includeFromLink={this.props.inRoom && !isBot}\n            history={this.props.history}\n          />\n        );\n      case \"image\":\n        return (\n          <ImageMessage\n            key={e.key}\n            name={e.name}\n            className={classNames(entryClasses, styles.media)}\n            body={e.body}\n            maySpawn={e.maySpawn}\n          />\n        );\n      case \"photo\":\n        return (\n          <PhotoMessage\n            key={e.key}\n            name={e.name}\n            className={classNames(entryClasses, styles.media)}\n            body={e.body}\n            maySpawn={e.maySpawn}\n            hubId={this.props.hubId}\n          />\n        );\n      case \"log\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            {e.body}\n          </div>\n        );\n    }\n  };\n\n  render() {\n    const presenceClasses = {\n      [styles.presenceLog]: true,\n      [styles.presenceLogInRoom]: this.props.inRoom\n    };\n\n    return <div className={classNames(presenceClasses)}>{this.props.entries.map(this.domForEntry)}</div>;\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport StateLink from \"./state-link.js\";\nimport { resetTips } from \"../systems/tips\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faImage } from \"@fortawesome/free-solid-svg-icons/faImage\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons/faStar\";\nimport { faDoorClosed } from \"@fortawesome/free-solid-svg-icons/faDoorClosed\";\nimport { faPencilAlt } from \"@fortawesome/free-solid-svg-icons/faPencilAlt\";\nimport { faInfoCircle } from \"@fortawesome/free-solid-svg-icons/faInfoCircle\";\nimport { faBars } from \"@fortawesome/free-solid-svg-icons/faBars\";\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons/faPlus\";\nimport { faMinus } from \"@fortawesome/free-solid-svg-icons/faMinus\";\nimport { faVideo } from \"@fortawesome/free-solid-svg-icons/faVideo\";\nimport { showFullScreenIfAvailable } from \"../utils/fullscreen\";\nimport LeaveRoomDialog from \"./leave-room-dialog.js\";\n\nimport styles from \"../assets/stylesheets/settings-menu.scss\";\nimport rootStyles from \"../assets/stylesheets/ui-root.scss\";\n\nexport default class SettingsMenu extends Component {\n  static propTypes = {\n    history: PropTypes.object,\n    isStreaming: PropTypes.bool,\n    toggleStreamerMode: PropTypes.func,\n    mediaSearchStore: PropTypes.object,\n    scene: PropTypes.object,\n    hubScene: PropTypes.object,\n    hubChannel: PropTypes.object,\n    performConditionalSignIn: PropTypes.func,\n    showNonHistoriedDialog: PropTypes.func,\n    pushHistoryState: PropTypes.func,\n    toggleFlyMode: PropTypes.func\n  };\n\n  state = {\n    expanded: false\n  };\n\n  componentDidMount() {\n    document.querySelector(\".a-canvas\").addEventListener(\"mouseup\", () => {\n      if (this.state.expanded) {\n        this.setState({ expanded: false });\n      }\n    });\n  }\n\n  renderExpandedMenu() {\n    const rowClasses = classNames([styles.row, styles.settingsRow]);\n    const rowHeader = classNames([styles.row, styles.settingsRow, styles.rowHeader]);\n    // const showRoomSettings = !!this.props.hubChannel.canOrWillIfCreator(\"update_hub\");\n    const showRoomSettings = false;\n    // const showCloseRoom = !!this.props.hubChannel.canOrWillIfCreator(\"close_hub\");\n    const showCloseRoom = false;\n    // const showRoomInfo = !!this.props.hubScene;\n    const showRoomInfo = false;\n    // const showRoomSection = showRoomSettings || showRoomInfo || showCloseRoom;\n    const showRoomSection = false;\n    const showStreamerMode = this.props.scene.is(\"entered\") && !!this.props.hubChannel.canOrWillIfCreator(\"kick_users\");\n\n    const playerRig = document.querySelector(\"#player-rig\");\n    const flyEnabled = playerRig.getAttribute(\"character-controller\", \"fly\").fly;\n    console.log(flyEnabled)\n\n    // Draw self first\n    return (\n      <div className={styles.settingsMenu}>\n        <div className={styles.attachPoint} />\n        <div className={styles.contents}>\n          <div className={styles.rows}>\n            <div className={rowHeader}>\n              <FormattedMessage id=\"settings.row-profile\" />\n            </div>\n            <div className={rowClasses}>\n              <div className={styles.icon}>\n                <img src=\"../assets/images/change_avatar.svg\" />\n              </div>\n              <div className={styles.listItem}>\n                <StateLink\n                  stateKey=\"overlay\"\n                  stateValue=\"profile\"\n                  history={this.props.history}\n                  onClick={() => this.setState({ expanded: false })}\n                >\n                  <FormattedMessage id=\"settings.change-avatar\" />\n                </StateLink>\n              </div>\n            </div>\n            <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faStar} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <div\n                    className={styles.listItemLink}\n                    onClick={() => {\n                      this.props.toggleFlyMode(!flyEnabled);\n                      this.setState({ expanded: false });\n                    }}\n                  >\n                    {flyEnabled ? \"Disable\" : \"Enable\"} Fly Mode\n                  </div>\n                </div>\n              </div>\n            {false ? <div className={rowClasses}>\n              <div className={styles.icon}>\n                <i>\n                  <FontAwesomeIcon icon={faStar} />\n                </i>\n              </div>\n              <div className={styles.listItem}>\n                <div\n                  className={styles.listItemLink}\n                  onClick={() => {\n                    this.props.performConditionalSignIn(\n                      () => this.props.hubChannel.signedIn,\n                      () => {\n                        showFullScreenIfAvailable();\n                        this.props.mediaSearchStore.sourceNavigateWithNoNav(\"favorites\");\n                      },\n                      \"favorite-rooms\"\n                    );\n                  }}\n                >\n                  <FormattedMessage id=\"settings.favorites\" />\n                </div>\n              </div>\n            </div> : <span />}\n            {showRoomSection && (\n              <div className={rowHeader}>\n                <FormattedMessage id=\"settings.row-room\" />\n              </div>\n            )}\n            {showRoomSettings && (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faImage} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <div\n                    className={styles.listItemLink}\n                    onClick={() => {\n                      this.props.performConditionalSignIn(\n                        () => this.props.hubChannel.can(\"update_hub\"),\n                        () => {\n                          showFullScreenIfAvailable();\n                          this.props.mediaSearchStore.sourceNavigateWithNoNav(\"scenes\");\n                          this.setState({ expanded: false });\n                        },\n                        \"change-scene\"\n                      );\n                    }}\n                  >\n                    <FormattedMessage id=\"settings.change-scene\" />\n                  </div>\n                </div>\n              </div>\n            )}\n            {showRoomSettings && (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faPencilAlt} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <a\n                    href=\"#\"\n                    onClick={e => {\n                      e.preventDefault();\n\n                      this.props.performConditionalSignIn(\n                        () => this.props.hubChannel.can(\"update_hub\"),\n                        () => {\n                          this.props.pushHistoryState(\"modal\", \"rename_room\");\n                          this.setState({ expanded: false });\n                        },\n                        \"rename-room\"\n                      );\n                    }}\n                  >\n                    <FormattedMessage id=\"settings.rename-room\" />\n                  </a>\n                </div>\n              </div>\n            )}\n            {showCloseRoom && (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faDoorClosed} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <a\n                    href=\"#\"\n                    onClick={e => {\n                      e.preventDefault();\n\n                      this.props.performConditionalSignIn(\n                        () => this.props.hubChannel.can(\"update_hub\"),\n                        () => {\n                          this.props.pushHistoryState(\"modal\", \"close_room\");\n                          this.setState({ expanded: false });\n                        },\n                        \"close-room\"\n                      );\n                    }}\n                  >\n                    <FormattedMessage id=\"settings.close-room\" />\n                  </a>\n                </div>\n              </div>\n            )}\n            {showRoomInfo && (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faInfoCircle} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <StateLink\n                    stateKey=\"modal\"\n                    stateValue=\"room_info\"\n                    history={this.props.history}\n                    onClick={() => this.setState({ expanded: false })}\n                  >\n                    <FormattedMessage id=\"settings.room-info\" />\n                  </StateLink>\n                </div>\n              </div>\n            )}\n            <div className={rowClasses}>\n              <div className={styles.icon}>\n                <i>\n                  <FontAwesomeIcon icon={faDoorClosed} />\n                </i>\n              </div>\n              <div className={styles.listItem}>\n                <a\n                  href=\"#\"\n                  onClick={e => {\n                    e.preventDefault();\n                    this.props.showNonHistoriedDialog(LeaveRoomDialog, {\n                      destinationUrl: \"/\",\n                      messageType: \"create-room\"\n                    });\n                    this.setState({ expanded: false });\n                  }}\n                >\n                  Leave Room\n                </a>\n              </div>\n            </div>\n            {showStreamerMode ? (\n              <div className={rowHeader}>\n                <FormattedMessage id=\"settings.row-tools\" />\n              </div>\n            ) : (\n              <div />\n            )}\n            {showStreamerMode ? (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faVideo} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <div\n                    className={styles.listItemLink}\n                    onClick={() => {\n                      this.props.toggleStreamerMode(true);\n                      this.setState({ expanded: false });\n                    }}\n                  >\n                    <FormattedMessage id=\"settings.enable-streamer-mode\" />\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <div />\n            )}\n            {false && <div className={classNames([styles.bottomLinksMain])}>\n              <a href=\"/whats-new\" target=\"_blank\" rel=\"noreferrer noopener\">\n                <FormattedMessage id=\"settings.whats-new\" />\n              </a>\n              <button\n                onClick={e => {\n                  e.preventDefault();\n                  resetTips();\n                  this.setState({ expanded: false });\n                }}\n              >\n                <FormattedMessage id=\"settings.tips\" />\n              </button>\n              <a href=\"https://github.com/mozilla/hubs/wiki/Hubs-Controls\" target=\"_blank\" rel=\"noreferrer noopener\">\n                <FormattedMessage id=\"settings.controls\" />\n              </a>\n            </div>}\n            {false && <div className={classNames([styles.bottomLinks])}>\n              <a href=\"https://github.com/mozilla/hubs/wiki/Hubs-Features\" target=\"_blank\" rel=\"noreferrer noopener\">\n                <FormattedMessage id=\"settings.features\" />\n              </a>\n              <a href=\"https://discord.gg/wHmY4nd\" target=\"_blank\" rel=\"noreferrer noopener\">\n                <FormattedMessage id=\"settings.community\" />\n              </a>\n              <button\n                onClick={e => {\n                  e.preventDefault();\n                  this.props.pushHistoryState(\"modal\", \"feedback\");\n                }}\n              >\n                <FormattedMessage id=\"settings.send-feedback\" />\n              </button>\n              <a className={styles.bottomLink} href=\"/?report\" target=\"_blank\" rel=\"noreferrer noopener\">\n                <FormattedMessage id=\"settings.report\" />\n              </a>\n              <a\n                className={styles.bottomLink}\n                href=\"https://github.com/mozilla/hubs/blob/master/TERMS.md\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n              >\n                <FormattedMessage id=\"settings.terms\" />\n              </a>\n              <a\n                className={styles.bottomLink}\n                href=\"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n              >\n                <FormattedMessage id=\"settings.privacy\" />\n              </a>\n            </div>}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        <FontAwesomeIcon\n          icon={faBars}\n          onClick={() => this.setState({ expanded: !this.state.expanded })}\n          className={classNames({\n            [rootStyles.cornerButton]: true,\n            [rootStyles.cornerButtonSelected]: this.state.expanded\n          })}\n        />\n        {this.state.expanded && this.renderExpandedMenu()}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n// import hubLogo from \"../assets/images/hub-preview-white.png\";\nimport styles from \"../assets/stylesheets/preload-overlay.scss\";\nimport { FormattedMessage } from \"react-intl\";\n\nconst isMobile = AFRAME.utils.device.isMobile();\n\nexport default class PreloadOverlay extends Component {\n  static propTypes = {\n    hubName: PropTypes.string,\n    hubScene: PropTypes.object,\n    baseUrl: PropTypes.string,\n    onLoadClicked: PropTypes.func\n  };\n\n  render() {\n    return (\n      <div className={styles.treatment}>\n        <div className={styles.screenshot}>\n          {this.props.hubScene && <img className={styles.screenshot} src={this.props.hubScene.screenshot_url} />}\n        </div>\n        <a href=\"/\" target=\"_blank\" rel=\"noopener noreferrer\" className={styles.logo}>\n          <img src={this.props.logo} />\n        </a>\n        <div className={styles.mainPanel}>\n          <div className={styles.hubName}>{this.props.hubName}</div>\n          {this.props.onLoadClicked &&\n            (!isMobile ? (\n              <button className={styles.loadButton} onClick={this.props.onLoadClicked}>\n                <FormattedMessage id=\"embed.load-button\" />\n              </button>\n            ) : (\n              <a href={this.props.baseUrl} target=\"_blank\" className={styles.loadButton} rel=\"noreferrer noopener\">\n                <FormattedMessage id=\"embed.load-button\" />\n              </a>\n            ))}\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\n\nconst { detect } = require(\"detect-browser\");\nimport styles from \"../assets/stylesheets/2d-hud.scss\";\nimport uiStyles from \"../assets/stylesheets/ui-root.scss\";\nimport { FormattedMessage } from \"react-intl\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\n\nconst browser = detect();\n\nclass TopHUD extends Component {\n  static propTypes = {\n    muted: PropTypes.bool,\n    flyingEnabled: PropTypes.bool,\n    isCursorHoldingPen: PropTypes.bool,\n    hasActiveCamera: PropTypes.bool,\n    frozen: PropTypes.bool,\n    watching: PropTypes.bool,\n    onWatchEnded: PropTypes.func,\n    videoShareMediaSource: PropTypes.string,\n    showVideoShareFailed: PropTypes.bool,\n    hideVideoShareFailedTip: PropTypes.func,\n    activeTip: PropTypes.string,\n    history: PropTypes.object,\n    onToggleMute: PropTypes.func,\n    onToggleFreeze: PropTypes.func,\n    onSpawnPen: PropTypes.func,\n    onSpawnCamera: PropTypes.func,\n    onShareVideo: PropTypes.func,\n    onEndShareVideo: PropTypes.func,\n    onShareVideoNotCapable: PropTypes.func,\n    mediaSearchStore: PropTypes.object,\n    isStreaming: PropTypes.bool,\n    showStreamingTip: PropTypes.bool,\n    hideStreamingTip: PropTypes.func\n  };\n\n  state = {\n    showVideoShareOptions: false,\n    lastActiveMediaSource: null\n  };\n\n  handleVideoShareClicked = source => {\n    if ((source === \"screen\" || source === \"window\") && browser.name !== \"firefox\") {\n      this.props.onShareVideoNotCapable();\n      return;\n    }\n\n    if (this.props.videoShareMediaSource) {\n      this.props.onEndShareVideo();\n    } else {\n      this.props.onShareVideo(source);\n      this.setState({ lastActiveMediaSource: source });\n    }\n  };\n\n  buildVideoSharingButtons = () => {\n    const isMobile = AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR();\n\n    const videoShareExtraOptionTypes = [];\n    const primaryVideoShareType =\n      this.props.videoShareMediaSource || this.state.lastActiveMediaSource || (isMobile ? \"camera\" : \"screen\");\n\n    if (this.state.showVideoShareOptions) {\n      videoShareExtraOptionTypes.push(primaryVideoShareType);\n\n      [\"screen\", \"window\", \"camera\"].forEach(t => {\n        if (videoShareExtraOptionTypes.indexOf(t) === -1) {\n          videoShareExtraOptionTypes.push(t);\n        }\n      });\n    }\n\n    const showExtrasOnHover = () => {\n      if (isMobile) return;\n\n      clearTimeout(this.hideVideoSharingButtonTimeout);\n\n      if (!this.props.videoShareMediaSource) {\n        this.setState({ showVideoShareOptions: true });\n      }\n    };\n\n    const hideExtrasOnOut = () => {\n      this.hideVideoSharingButtonTimeout = setTimeout(() => {\n        this.setState({ showVideoShareOptions: false });\n      }, 250);\n    };\n\n    return (\n      <div\n        className={cx(styles.iconButton, styles[`share_${primaryVideoShareType}`], {\n          [styles.active]: this.props.videoShareMediaSource === primaryVideoShareType,\n          [styles.videoShare]: true\n        })}\n        title={this.props.videoShareMediaSource !== null ? \"Stop sharing\" : `Share ${primaryVideoShareType}`}\n        onClick={() => {\n          if (!this.state.showVideoShareOptions) {\n            this.handleVideoShareClicked(primaryVideoShareType);\n          }\n        }}\n        onMouseOver={showExtrasOnHover}\n      >\n        {videoShareExtraOptionTypes.length > 0 && (\n          <div className={cx(styles.videoShareExtraOptions)} onMouseOut={hideExtrasOnOut}>\n            {videoShareExtraOptionTypes.map(type => (\n              <div\n                key={type}\n                className={cx(styles.iconButton, styles[`share_${type}`], {\n                  [styles.active]: this.props.videoShareMediaSource === type\n                })}\n                title={this.props.videoShareMediaSource === type ? \"Stop sharing\" : `Share ${type}`}\n                onClick={() => this.handleVideoShareClicked(type)}\n                onMouseOver={showExtrasOnHover}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  render() {\n    const videoSharingButtons = this.buildVideoSharingButtons();\n    const isMobile = AFRAME.utils.device.isMobile();\n    const tipDivForType = (type, cancelFunc) => (\n      <div className={cx(styles.topTip)}>\n        {cancelFunc && (\n          <button className={styles.tipCancel} onClick={cancelFunc}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </button>\n        )}\n        {!this.props.frozen && <div className={cx([styles.attachPoint, styles[`attach_${type.split(\".\")[1]}`]])} />}\n        <FormattedMessage id={`tips.${type}`} />\n      </div>\n    );\n\n    let tip;\n\n    if (this.props.watching) {\n      tip = (\n        <div className={cx([styles.topTip, styles.topTipNoHud])}>\n          <button className={styles.tipCancel} onClick={() => this.props.onWatchEnded()}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </button>\n          <FormattedMessage id={`tips.${isMobile ? \"mobile\" : \"desktop\"}.watching`} />\n          {!isMobile && (\n            <button className={styles.tipCancelText} onClick={() => this.props.onWatchEnded()}>\n              <FormattedMessage id=\"tips.watching.back\" />\n            </button>\n          )}\n        </div>\n      );\n    } else if (this.props.showVideoShareFailed) {\n      tip = tipDivForType(`${isMobile ? \"mobile\" : \"desktop\"}.video_share_failed`, this.props.hideVideoShareFailedTip);\n    } else if (this.props.activeTip) {\n      tip = tipDivForType(this.props.activeTip);\n    }\n\n    // Hide buttons when frozen.\n    return (\n      <div className={cx(styles.container, styles.top, styles.unselectable, uiStyles.uiInteractive)}>\n        {this.props.frozen || this.props.watching ? (\n          <div className={cx(uiStyles.uiInteractive, styles.panel)}>{tip}</div>\n        ) : (\n          <div className={cx(uiStyles.uiInteractive, styles.panel)}>\n            {tip}\n            {videoSharingButtons}\n            <div\n              className={cx(styles.iconButton, styles.mute, { [styles.active]: this.props.muted })}\n              title={this.props.muted ? \"Unmute Mic\" : \"Mute Mic\"}\n              onClick={this.props.onToggleMute}\n            />\n            <button\n              className={cx(uiStyles.uiInteractive, styles.iconButton, styles.spawn)}\n              onClick={() => this.props.mediaSearchStore.sourceNavigateToDefaultSource()}\n            />\n            <div\n              className={cx(styles.iconButton, styles.pen, { [styles.active]: this.props.isCursorHoldingPen })}\n              title={\"Pen\"}\n              onClick={this.props.onSpawnPen}\n            />\n            <div\n              className={cx(styles.iconButton, styles.camera, { [styles.active]: this.props.hasActiveCamera })}\n              title={\"Camera\"}\n              onClick={this.props.onSpawnCamera}\n            />\n            <div\n              className={cx(styles.iconButton, styles.fly, { [styles.active]: this.props.flyingEnabled })}\n              title={this.props.flyingEnabled ? \"Disable Flying\" : \"Enable Flying\"}\n              onClick={()=>this.props.onToggleFlying(!this.props.flyingEnabled)}\n            />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default { TopHUD };\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/spectating-label.scss\";\nimport { FormattedMessage } from \"react-intl\";\n\nexport class SpectatingLabel extends Component {\n  static propTypes = {\n    name: PropTypes.string\n  };\n\n  render() {\n    return (\n      <div className={styles.label}>\n        <FormattedMessage id=\"lobby.watching\" />\n        <b>{this.props.name}</b>\n      </div>\n    );\n  }\n}\n","import { willRequireUserGesture, showFullScreenIfAvailable } from \"./fullscreen\";\nimport screenfull from \"screenfull\";\n\nlet _isIn2DInterstitial = false;\nlet _exitAction = null;\n\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\nconst afterUserGesturePrompt = f => {\n  const scene = document.querySelector(\"a-scene\");\n  scene.addEventListener(\"2d-interstitial-gesture-complete\", f, { once: true });\n  scene.emit(\"2d-interstitial-gesture-required\");\n};\n\nexport function handleExitTo2DInterstitial(isLower, exitAction) {\n  const scene = document.querySelector(\"a-scene\");\n  if (!scene.is(\"vr-mode\")) {\n    if (isMobileVR && willRequireUserGesture()) {\n      afterUserGesturePrompt(() => {\n        showFullScreenIfAvailable();\n      });\n    }\n\n    return;\n  }\n\n  _isIn2DInterstitial = true;\n  _exitAction = exitAction;\n\n  if (isMobileVR) {\n    // Immersive browser, exit VR.\n    scene.exitVR().then(() => {\n      afterUserGesturePrompt(() => {\n        showFullScreenIfAvailable();\n      });\n    });\n  } else {\n    // Non-immersive browser, show notice\n    const vrNotice = document.querySelector(\".vr-notice\");\n    vrNotice.object3D.visible = true;\n    vrNotice.setAttribute(\"follow-in-fov\", {\n      angle: isLower ? 39 : -15\n    });\n  }\n}\n\nexport function exit2DInterstitialAndEnterVR(force) {\n  if (!force && !_isIn2DInterstitial) {\n    return;\n  }\n\n  _isIn2DInterstitial = false;\n\n  document.querySelector(\".vr-notice\").object3D.visible = false;\n\n  const scene = document.querySelector(\"a-scene\");\n\n  if (isMobileVR) {\n    if (screenfull.isFullscreen) {\n      screenfull.exit();\n      afterUserGesturePrompt(() => scene.enterVR());\n    } else {\n      scene.enterVR();\n    }\n  } else {\n    if (!scene.is(\"vr-mode\")) {\n      scene.enterVR();\n    }\n  }\n}\n\nexport function isIn2DInterstitial() {\n  return _isIn2DInterstitial;\n}\n\nexport function forceExitFrom2DInterstitial() {\n  if (!_isIn2DInterstitial) return;\n\n  if (_exitAction) {\n    _exitAction();\n    _exitAction = null;\n  }\n\n  exit2DInterstitialAndEnterVR();\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport copy from \"copy-to-clipboard\";\nimport { airtableAssets, airtableAssetsInitialState } from '../airtable'\nimport { IntlProvider, FormattedMessage, addLocaleData } from \"react-intl\";\nimport en from \"react-intl/locale-data/en\";\nimport screenfull from \"screenfull\";\n\nimport { VR_DEVICE_AVAILABILITY } from \"../utils/vr-caps-detect\";\nimport { canShare } from \"../utils/share\";\nimport styles from \"../assets/stylesheets/ui-root.scss\";\nimport entryStyles from \"../assets/stylesheets/entry.scss\";\nimport inviteStyles from \"../assets/stylesheets/invite-dialog.scss\";\nimport { ReactAudioContext, WithHoverSound } from \"./wrap-with-audio\";\nimport {\n  pushHistoryState,\n  clearHistoryState,\n  popToBeginningOfHubHistory,\n  navigateToPriorPage,\n  sluglessPath\n} from \"../utils/history\";\nimport StateLink from \"./state-link.js\";\nimport StateRoute from \"./state-route.js\";\nimport { getPresenceProfileForSession, discordBridgesForPresences } from \"../utils/phoenix-utils\";\nimport { getClientInfoClientId } from \"./client-info-dialog\";\nimport { getCurrentStreamer } from \"../utils/component-utils\";\n\nimport { lang, messages } from \"../utils/i18n\";\nimport Loader from \"./loader\";\nimport AutoExitWarning from \"./auto-exit-warning\";\nimport { TwoDEntryButton, GenericEntryButton, DaydreamEntryButton } from \"./entry-buttons.js\";\nimport ProfileEntryPanel from \"./profile-entry-panel\";\nimport MediaBrowser from \"./media-browser\";\n\nimport CreateObjectDialog from \"./create-object-dialog.js\";\nimport ChangeSceneDialog from \"./change-scene-dialog.js\";\nimport AvatarUrlDialog from \"./avatar-url-dialog.js\";\nimport HelpDialog from \"./help-dialog.js\";\nimport InviteDialog from \"./invite-dialog.js\";\nimport InviteTeamDialog from \"./invite-team-dialog.js\";\nimport LinkDialog from \"./link-dialog.js\";\nimport SafariDialog from \"./safari-dialog.js\";\nimport SafariMicDialog from \"./safari-mic-dialog.js\";\nimport SignInDialog from \"./sign-in-dialog.js\";\nimport RenameRoomDialog from \"./rename-room-dialog.js\";\nimport CloseRoomDialog from \"./close-room-dialog.js\";\nimport Tip from \"./tip.js\";\nimport WebRTCScreenshareUnsupportedDialog from \"./webrtc-screenshare-unsupported-dialog.js\";\nimport WebAssemblyUnsupportedDialog from \"./webassembly-unsupported-dialog.js\";\nimport WebVRRecommendDialog from \"./webvr-recommend-dialog.js\";\nimport FeedbackDialog from \"./feedback-dialog.js\";\nimport LeaveRoomDialog from \"./leave-room-dialog.js\";\nimport RoomInfoDialog from \"./room-info-dialog.js\";\nimport ClientInfoDialog from \"./client-info-dialog.js\";\nimport OAuthDialog from \"./oauth-dialog.js\";\nimport TweetDialog from \"./tweet-dialog.js\";\nimport LobbyChatBox from \"./lobby-chat-box.js\";\nimport InWorldChatBox from \"./in-world-chat-box.js\";\nimport AvatarEditor from \"./avatar-editor\";\nimport MicLevelWidget from \"./mic-level-widget.js\";\nimport OutputLevelWidget from \"./output-level-widget.js\";\nimport PresenceLog from \"./presence-log.js\";\nimport PresenceList from \"./presence-list.js\";\nimport SettingsMenu from \"./settings-menu.js\";\nimport PreloadOverlay from \"./preload-overlay.js\";\nimport TwoDHUD from \"./2d-hud\";\nimport { SpectatingLabel } from \"./spectating-label\";\nimport { showFullScreenIfAvailable, showFullScreenIfWasFullScreen } from \"../utils/fullscreen\";\nimport { exit2DInterstitialAndEnterVR, isIn2DInterstitial } from \"../utils/vr-interstitial\";\n\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons/faStar\";\nimport { faArrowLeft } from \"@fortawesome/free-solid-svg-icons/faArrowLeft\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport qsTruthy from \"../utils/qs_truthy\";\nconst avatarEditorDebug = qsTruthy(\"avatarEditorDebug\");\n\naddLocaleData([...en]);\n\n// This is a list of regexes that match the microphone labels of HMDs.\n//\n// If entering VR mode, and if any of these regexes match an audio device,\n// the user will be prevented from entering VR until one of those devices is\n// selected as the microphone.\n//\n// Note that this doesn't have to be exhaustive: if no devices match any regex\n// then we rely upon the user to select the proper mic.\nconst HMD_MIC_REGEXES = [/\\Wvive\\W/i, /\\Wrift\\W/i];\n\nconst IN_ROOM_MODAL_ROUTER_PATHS = [\"/media\"];\nconst IN_ROOM_MODAL_QUERY_VARS = [\"media_source\"];\n\nconst LOBBY_MODAL_ROUTER_PATHS = [\"/media/scenes\", \"/media/avatars\", \"/media/favorites\"];\nconst LOBBY_MODAL_QUERY_VARS = [\"media_source\"];\nconst LOBBY_MODAL_QUERY_VALUES = [\"scenes\", \"avatars\", \"favorites\"];\n\nasync function grantedMicLabels() {\n  const mediaDevices = await navigator.mediaDevices.enumerateDevices();\n  return mediaDevices.filter(d => d.label && d.kind === \"audioinput\").map(d => d.label);\n}\n\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\nconst isMobilePhoneOrVR = isMobile || isMobileVR;\n\nconst AUTO_EXIT_TIMER_SECONDS = 10;\n\nclass UIRoot extends Component {\n  willCompileAndUploadMaterials = false;\n\n  static propTypes = {\n    enterScene: PropTypes.func,\n    exitScene: PropTypes.func,\n    onSendMessage: PropTypes.func,\n    disableAutoExitOnConcurrentLoad: PropTypes.bool,\n    forcedVREntryType: PropTypes.string,\n    isBotMode: PropTypes.bool,\n    store: PropTypes.object,\n    mediaSearchStore: PropTypes.object,\n    scene: PropTypes.object,\n    authChannel: PropTypes.object,\n    hubChannel: PropTypes.object,\n    linkChannel: PropTypes.object,\n    hubEntryCode: PropTypes.number,\n    availableVREntryTypes: PropTypes.object,\n    environmentSceneLoaded: PropTypes.bool,\n    roomUnavailableReason: PropTypes.string,\n    platformUnsupportedReason: PropTypes.string,\n    hubId: PropTypes.string,\n    hubName: PropTypes.string,\n    hubScene: PropTypes.object,\n    hubIsBound: PropTypes.bool,\n    isSupportAvailable: PropTypes.bool,\n    presenceLogEntries: PropTypes.array,\n    presences: PropTypes.object,\n    sessionId: PropTypes.string,\n    subscriptions: PropTypes.object,\n    initialIsSubscribed: PropTypes.bool,\n    initialIsFavorited: PropTypes.bool,\n    showSignInDialog: PropTypes.bool,\n    signInMessageId: PropTypes.string,\n    signInCompleteMessageId: PropTypes.string,\n    signInContinueTextId: PropTypes.string,\n    onContinueAfterSignIn: PropTypes.func,\n    showSafariDialog: PropTypes.bool,\n    showSafariMicDialog: PropTypes.bool,\n    showWebAssemblyDialog: PropTypes.bool,\n    showOAuthDialog: PropTypes.bool,\n    onCloseOAuthDialog: PropTypes.func,\n    oauthInfo: PropTypes.array,\n    isCursorHoldingPen: PropTypes.bool,\n    hasActiveCamera: PropTypes.bool,\n    onMediaSearchResultEntrySelected: PropTypes.func,\n    onAvatarSaved: PropTypes.func,\n    activeTips: PropTypes.object,\n    location: PropTypes.object,\n    history: PropTypes.object,\n    showInterstitialPrompt: PropTypes.bool,\n    onInterstitialPromptClicked: PropTypes.func,\n    performConditionalSignIn: PropTypes.func,\n    hide: PropTypes.bool,\n    showPreload: PropTypes.bool,\n    onPreloadLoadClicked: PropTypes.func,\n    embed: PropTypes.bool,\n    embedToken: PropTypes.string,\n    onLoaded: PropTypes.func\n  };\n\n  state = {\n    enterInVR: false,\n    muteOnEntry: false,\n    entered: false,\n    dialog: null,\n    showShareDialog: false,\n    broadcastTipDismissed: false,\n    linkCode: null,\n    linkCodeCancel: null,\n    miniInviteActivated: false,\n\n    didConnectToNetworkedScene: false,\n    noMoreLoadingUpdates: false,\n    hideLoader: false,\n    watching: false,\n    isStreaming: false,\n    showStreamingTip: false,\n\n    waitingOnAudio: false,\n    mediaStream: null,\n    audioTrack: null,\n    micDevices: [],\n\n    autoExitTimerStartedAt: null,\n    autoExitTimerInterval: null,\n    secondsRemainingBeforeAutoExit: Infinity,\n\n    muted: false,\n    flyingEnabled: false,\n    frozen: false,\n\n    exited: false,\n\n    signedIn: false,\n    videoShareMediaSource: null,\n    showVideoShareFailed: false\n  };\n\n  constructor(props) {\n    super(props);\n    if (props.showSafariMicDialog) {\n      this.state.dialog = <SafariMicDialog closable={false} />;\n    }\n    if (props.showSafariDialog) {\n      this.state.dialog = <SafariDialog closable={false} />;\n    }\n    if (props.showWebAssemblyDialog) {\n      this.state.dialog = <WebAssemblyUnsupportedDialog closable={false} />;\n    }\n\n    props.mediaSearchStore.setHistory(props.history);\n\n    // An exit handler that discards event arguments and can be cleaned up.\n    this.exitEventHandler = () => this.exit();\n\n    this.state.airtableAssets = airtableAssetsInitialState;\n  }\n\n  componentDidUpdate(prevProps) {\n    const { hubChannel, showSignInDialog } = this.props;\n    if (hubChannel) {\n      const { signedIn } = hubChannel;\n      if (signedIn !== this.state.signedIn) {\n        this.setState({ signedIn });\n      }\n    }\n    if (prevProps.showSignInDialog !== showSignInDialog) {\n      if (showSignInDialog) {\n        this.showContextualSignInDialog();\n      } else {\n        this.closeDialog();\n      }\n    }\n    if (!this.willCompileAndUploadMaterials && this.state.noMoreLoadingUpdates) {\n      this.willCompileAndUploadMaterials = true;\n      // We want to ensure that react and the browser have had the chance to render / update.\n      // See https://stackoverflow.com/a/34999925 , although our solution flipped setTimeout and requestAnimationFrame\n      window.requestAnimationFrame(() => {\n        window.setTimeout(() => {\n          if (!this.props.isBotMode) {\n            this.props.scene.renderer.compileAndUploadMaterials(this.props.scene.object3D, this.props.scene.camera);\n          }\n\n          if (!this.state.hideLoader) {\n            this.setState({ hideLoader: true });\n          }\n        }, 0);\n      });\n    }\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"concurrentload\", this.onConcurrentLoad);\n    document.querySelector(\".a-canvas\").addEventListener(\"mouseup\", () => {\n      if (this.state.showShareDialog) {\n        this.setState({ showShareDialog: false });\n      }\n    });\n\n    this.props.scene.addEventListener(\n      \"didConnectToNetworkedScene\",\n      () => {\n        this.setState({ didConnectToNetworkedScene: true });\n      },\n      { once: true }\n    );\n    this.props.scene.addEventListener(\"loaded\", this.onSceneLoaded);\n    this.props.scene.addEventListener(\"stateadded\", this.onAframeStateChanged);\n    this.props.scene.addEventListener(\"stateremoved\", this.onAframeStateChanged);\n    this.props.scene.addEventListener(\"share_video_enabled\", this.onShareVideoEnabled);\n    this.props.scene.addEventListener(\"share_video_disabled\", this.onShareVideoDisabled);\n    this.props.scene.addEventListener(\"share_video_failed\", this.onShareVideoFailed);\n    this.props.scene.addEventListener(\"exit\", this.exitEventHandler);\n    this.props.scene.addEventListener(\"action_exit_watch\", () => this.setState({ watching: false, hide: false }));\n\n    const scene = this.props.scene;\n\n    this.props.store.addEventListener(\"statechanged\", this.onStoreChanged);\n\n    const unsubscribe = this.props.history.listen((location, action) => {\n      const state = location.state;\n\n      // If we just hit back into the entry flow, just go back to the page before the room landing page.\n      if (action === \"POP\" && state && state.entry_step && this.state.entered) {\n        unsubscribe();\n        navigateToPriorPage(this.props.history);\n        return;\n      }\n    });\n\n    // If we refreshed the page with any state history (eg if we were in the entry flow\n    // or had a modal/overlay open) just reset everything to the beginning of the flow by\n    // erasing all history that was accumulated for this room (including across refreshes.)\n    //\n    // We don't do this for the media browser case, since we want to be able to share\n    // links to the browser pages\n    if (this.props.history.location.state && !sluglessPath(this.props.history.location).startsWith(\"/media\")) {\n      popToBeginningOfHubHistory(this.props.history);\n    }\n\n    this.setState({\n      audioContext: {\n        playSound: sound => {\n          scene.emit(sound);\n        },\n        onMouseLeave: () => {\n          //          scene.emit(\"play_sound-hud_mouse_leave\");\n        }\n      }\n    });\n\n    if (this.props.forcedVREntryType && this.props.forcedVREntryType.endsWith(\"_now\")) {\n      setTimeout(() => this.handleForceEntry(), 2000);\n    }\n\n    airtableAssets.find('recHqITRS7cBMwn9i', (err, record) => \n       this.setState({airtableAssets: record.fields})\n    )\n  }\n\n  componentWillUnmount() {\n    this.props.scene.removeEventListener(\"loaded\", this.onSceneLoaded);\n    this.props.scene.removeEventListener(\"exit\", this.exitEventHandler);\n    this.props.scene.removeEventListener(\"share_video_enabled\", this.onShareVideoEnabled);\n    this.props.scene.removeEventListener(\"share_video_disabled\", this.onShareVideoDisabled);\n    this.props.scene.removeEventListener(\"share_video_failed\", this.onShareVideoFailed);\n  }\n\n  showContextualSignInDialog = () => {\n    const {\n      signInMessageId,\n      authChannel,\n      signInCompleteMessageId,\n      signInContinueTextId,\n      onContinueAfterSignIn\n    } = this.props;\n\n    this.showNonHistoriedDialog(SignInDialog, {\n      message: messages[signInMessageId],\n      onSignIn: async email => {\n        const { authComplete } = await authChannel.startAuthentication(email, this.props.hubChannel);\n\n        this.showNonHistoriedDialog(SignInDialog, { authStarted: true, onClose: onContinueAfterSignIn });\n\n        await authComplete;\n\n        this.setState({ signedIn: true });\n        this.showNonHistoriedDialog(SignInDialog, {\n          authComplete: true,\n          message: messages[signInCompleteMessageId],\n          continueText: messages[signInContinueTextId],\n          onClose: onContinueAfterSignIn,\n          onContinue: onContinueAfterSignIn\n        });\n      },\n      onClose: onContinueAfterSignIn\n    });\n  };\n\n  updateSubscribedState = () => {\n    const isSubscribed = this.props.subscriptions && this.props.subscriptions.isSubscribed();\n    this.setState({ isSubscribed });\n  };\n\n  toggleFavorited = () => {\n    this.props.performConditionalSignIn(\n      () => this.props.hubChannel.signedIn,\n      () => {\n        const isFavorited = this.isFavorited();\n\n        this.props.hubChannel[isFavorited ? \"unfavorite\" : \"favorite\"]();\n        this.setState({ isFavorited: !isFavorited });\n      },\n      \"favorite-room\"\n    );\n  };\n\n  isFavorited = () => {\n    return this.state.isFavorited !== undefined ? this.state.isFavorited : this.props.initialIsFavorited;\n  };\n\n  onLoadingFinished = () => {\n    this.setState({ noMoreLoadingUpdates: true });\n\n    if (this.props.onLoaded) {\n      this.props.onLoaded();\n    }\n  };\n\n  onSceneLoaded = () => {\n    this.setState({ sceneLoaded: true });\n  };\n\n  // TODO: we need to come up with a cleaner way to handle the shared state between aframe and react than emmitting events and setting state on the scene\n  onAframeStateChanged = e => {\n    if (!(e.detail === \"muted\" || e.detail === \"frozen\")) return;\n    this.setState({\n      [e.detail]: this.props.scene.is(e.detail)\n    });\n  };\n\n  onShareVideoEnabled = e => {\n    this.setState({ videoShareMediaSource: e.detail.source });\n  };\n\n  onShareVideoDisabled = () => {\n    this.setState({ videoShareMediaSource: null });\n  };\n\n  onShareVideoFailed = () => {\n    this.setState({ showVideoShareFailed: true });\n  };\n\n  toggleMute = () => {\n    this.props.scene.emit(\"action_mute\");\n  };\n\n  toggleFreeze = () => {\n    this.props.scene.emit(\"action_freeze\");\n  };\n\n  shareVideo = mediaSource => {\n    this.props.scene.emit(`action_share_${mediaSource}`);\n  };\n\n  endShareVideo = () => {\n    this.props.scene.emit(\"action_end_video_sharing\");\n  };\n\n  spawnPen = () => {\n    this.props.scene.emit(\"penButtonPressed\");\n  };\n\n  onSubscribeChanged = async () => {\n    if (!this.props.subscriptions) return;\n\n    await this.props.subscriptions.toggle();\n    this.updateSubscribedState();\n  };\n\n  handleForceEntry = () => {\n    if (!this.props.forcedVREntryType) return;\n\n    if (this.props.forcedVREntryType.startsWith(\"daydream\")) {\n      this.enterDaydream();\n    } else if (this.props.forcedVREntryType.startsWith(\"vr\")) {\n      this.enterVR();\n    } else if (this.props.forcedVREntryType.startsWith(\"2d\")) {\n      this.enter2D();\n    }\n  };\n\n  onConcurrentLoad = () => {\n    if (this.props.disableAutoExitOnConcurrentLoad) return;\n\n    const autoExitTimerInterval = setInterval(() => {\n      let secondsRemainingBeforeAutoExit = Infinity;\n\n      if (this.state.autoExitTimerStartedAt) {\n        const secondsSinceStart = (new Date() - this.state.autoExitTimerStartedAt) / 1000;\n        secondsRemainingBeforeAutoExit = Math.max(0, Math.floor(AUTO_EXIT_TIMER_SECONDS - secondsSinceStart));\n      }\n\n      this.setState({ secondsRemainingBeforeAutoExit });\n      this.checkForAutoExit();\n    }, 500);\n\n    this.setState({ autoExitTimerStartedAt: new Date(), autoExitTimerInterval });\n  };\n\n  checkForAutoExit = () => {\n    if (this.state.secondsRemainingBeforeAutoExit !== 0) return;\n    this.endAutoExitTimer();\n    this.exit();\n  };\n\n  exit = reason => {\n    this.props.exitScene(reason);\n    this.setState({ exited: true });\n  };\n\n  isWaitingForAutoExit = () => {\n    return this.state.secondsRemainingBeforeAutoExit <= AUTO_EXIT_TIMER_SECONDS;\n  };\n\n  endAutoExitTimer = () => {\n    clearInterval(this.state.autoExitTimerInterval);\n    this.setState({\n      autoExitTimerStartedAt: null,\n      autoExitTimerInterval: null,\n      secondsRemainingBeforeAutoExit: Infinity\n    });\n  };\n\n  performDirectEntryFlow = async enterInVR => {\n    this.setState({ enterInVR, waitingOnAudio: true });\n\n    const hasGrantedMic = (await grantedMicLabels()).length > 0;\n\n    if (hasGrantedMic) {\n      await this.setMediaStreamToDefault();\n      this.beginOrSkipAudioSetup();\n    } else {\n      this.pushHistoryState(\"entry_step\", \"mic_grant\");\n    }\n\n    this.setState({ waitingOnAudio: false });\n  };\n\n  enter2D = async () => {\n    await this.performDirectEntryFlow(false);\n  };\n\n  enterVR = async () => {\n    if (this.props.forcedVREntryType || this.props.availableVREntryTypes.generic !== VR_DEVICE_AVAILABILITY.maybe) {\n      await this.performDirectEntryFlow(true);\n    } else {\n      this.pushHistoryState(\"modal\", \"webvr\");\n    }\n  };\n\n  enterDaydream = async () => {\n    await this.performDirectEntryFlow(true);\n  };\n\n  micDeviceChanged = async ev => {\n    const constraints = { audio: { deviceId: { exact: [ev.target.value] } } };\n    await this.fetchAudioTrack(constraints);\n    await this.setupNewMediaStream();\n  };\n\n  setMediaStreamToDefault = async () => {\n    let hasAudio = false;\n    const { lastUsedMicDeviceId } = this.props.store.state.settings;\n\n    // Try to fetch last used mic, if there was one.\n    if (lastUsedMicDeviceId) {\n      hasAudio = await this.fetchAudioTrack({ audio: { deviceId: { ideal: lastUsedMicDeviceId } } });\n    } else {\n      hasAudio = await this.fetchAudioTrack({ audio: true });\n    }\n\n    await this.setupNewMediaStream();\n\n    return { hasAudio };\n  };\n\n  fetchAudioTrack = async constraints => {\n    if (this.state.audioTrack) {\n      this.state.audioTrack.stop();\n    }\n\n    try {\n      const mediaStream = await navigator.mediaDevices.getUserMedia(constraints);\n      const audioTrack = mediaStream.getAudioTracks()[0];\n      this.setState({ audioTrack });\n\n      if (/Oculus/.test(navigator.userAgent)) {\n        // HACK Oculus Browser 6 seems to randomly end the microphone audio stream. This re-creates it.\n        // Note the ended event will only fire if some external event ends the stream, not if we call stop().\n        const recreateAudioStream = async () => {\n          console.warn(\n            \"Oculus Browser 6 bug hit: Audio stream track ended without calling stop. Recreating audio stream.\"\n          );\n\n          const mediaStream = await navigator.mediaDevices.getUserMedia(constraints);\n          const audioTrack = mediaStream.getAudioTracks()[0];\n          NAF.connection.adapter.setLocalMediaStream(mediaStream);\n          audioTrack.addEventListener(\"ended\", recreateAudioStream, { once: true });\n        };\n\n        audioTrack.addEventListener(\"ended\", recreateAudioStream, { once: true });\n      }\n\n      return true;\n    } catch (e) {\n      // Error fetching audio track, most likely a permission denial.\n      this.setState({ audioTrack: null });\n      return false;\n    }\n  };\n\n  setupNewMediaStream = async () => {\n    const mediaStream = new MediaStream();\n\n    await this.fetchMicDevices();\n\n    // we should definitely have an audioTrack at this point unless they denied mic access\n    if (this.state.audioTrack) {\n      mediaStream.addTrack(this.state.audioTrack);\n      const micDeviceId = this.micDeviceIdForMicLabel(this.micLabelForMediaStream(mediaStream));\n      if (micDeviceId) {\n        this.props.store.update({ settings: { lastUsedMicDeviceId: micDeviceId } });\n      }\n    }\n\n    this.setState({ mediaStream });\n  };\n\n  onMicGrantButton = async () => {\n    if (this.props.location.state && this.props.location.state.entry_step === \"mic_grant\") {\n      const { hasAudio } = await this.setMediaStreamToDefault();\n\n      if (hasAudio) {\n        this.pushHistoryState(\"entry_step\", \"mic_granted\");\n      } else {\n        this.beginOrSkipAudioSetup();\n      }\n    } else {\n      this.beginOrSkipAudioSetup();\n    }\n  };\n\n  beginOrSkipAudioSetup = () => {\n    const skipAudioSetup = this.props.forcedVREntryType && this.props.forcedVREntryType.endsWith(\"_now\");\n\n    if (skipAudioSetup) {\n      this.onAudioReadyButton();\n    } else {\n      this.pushHistoryState(\"entry_step\", \"audio\");\n    }\n  };\n\n  fetchMicDevices = () => {\n    return new Promise(resolve => {\n      navigator.mediaDevices.enumerateDevices().then(mediaDevices => {\n        this.setState(\n          {\n            micDevices: mediaDevices\n              .filter(d => d.kind === \"audioinput\")\n              .map(d => ({ deviceId: d.deviceId, label: d.label }))\n          },\n          resolve\n        );\n      });\n    });\n  };\n\n  shouldShowHmdMicWarning = () => {\n    if (isMobile || AFRAME.utils.device.isMobileVR()) return false;\n    if (!this.state.enterInVR) return false;\n    if (!this.hasHmdMicrophone()) return false;\n\n    return !HMD_MIC_REGEXES.find(r => this.selectedMicLabel().match(r));\n  };\n\n  hasHmdMicrophone = () => {\n    return !!this.state.micDevices.find(d => HMD_MIC_REGEXES.find(r => d.label.match(r)));\n  };\n\n  micLabelForMediaStream = mediaStream => {\n    return (mediaStream && mediaStream.getAudioTracks().length > 0 && mediaStream.getAudioTracks()[0].label) || \"\";\n  };\n\n  selectedMicLabel = () => {\n    return this.micLabelForMediaStream(this.state.mediaStream);\n  };\n\n  micDeviceIdForMicLabel = label => {\n    return this.state.micDevices.filter(d => d.label === label).map(d => d.deviceId)[0];\n  };\n\n  selectedMicDeviceId = () => {\n    return this.micDeviceIdForMicLabel(this.selectedMicLabel());\n  };\n\n  shouldShowFullScreen = () => {\n    // Disable full screen on iOS, since Safari's fullscreen mode does not let you prevent native pinch-to-zoom gestures.\n    return (\n      (isMobile || AFRAME.utils.device.isMobileVR()) &&\n      !AFRAME.utils.device.isIOS() &&\n      !this.state.enterInVR &&\n      screenfull.enabled\n    );\n  };\n\n  onAudioReadyButton = () => {\n    if (!this.state.enterInVR) {\n      showFullScreenIfAvailable();\n    }\n\n    this.props.enterScene(this.state.mediaStream, this.state.enterInVR, this.state.muteOnEntry);\n\n    const mediaStream = this.state.mediaStream;\n\n    if (mediaStream) {\n      if (mediaStream.getAudioTracks().length > 0) {\n        console.log(`Using microphone: ${mediaStream.getAudioTracks()[0].label}`);\n      }\n\n      if (mediaStream.getVideoTracks().length > 0) {\n        console.log(\"Screen sharing enabled.\");\n      }\n    }\n\n    this.setState({ entered: true, showShareDialog: false });\n    clearHistoryState(this.props.history);\n  };\n\n  attemptLink = async () => {\n    this.pushHistoryState(\"overlay\", \"link\");\n    const { code, cancel, onFinished } = await this.props.linkChannel.generateCode();\n    this.setState({ linkCode: code, linkCodeCancel: cancel });\n    onFinished.then(() => {\n      this.setState({ log: false, linkCode: null, linkCodeCancel: null });\n      this.props.history.goBack();\n    });\n  };\n\n  showShareDialog = () => {\n    this.props.store.update({ activity: { hasOpenedShare: true } });\n    this.setState({ showShareDialog: true });\n  };\n\n  toggleShareDialog = async () => {\n    this.props.store.update({ activity: { hasOpenedShare: true } });\n    this.setState({ showShareDialog: !this.state.showShareDialog });\n  };\n\n  createObject = media => {\n    this.props.scene.emit(\"add_media\", media);\n  };\n\n  changeScene = url => {\n    this.props.hubChannel.updateScene(url);\n  };\n\n  setAvatarUrl = url => {\n    this.props.store.update({ profile: { ...this.props.store.state.profile, ...{ avatarId: url } } });\n  };\n\n  closeDialog = () => {\n    if (this.state.dialog) {\n      this.setState({ dialog: null });\n    } else {\n      this.props.history.goBack();\n    }\n\n    if (isIn2DInterstitial()) {\n      exit2DInterstitialAndEnterVR();\n    } else {\n      showFullScreenIfWasFullScreen();\n    }\n  };\n\n  showNonHistoriedDialog = (DialogClass, props = {}) => {\n    this.setState({\n      dialog: <DialogClass {...{ onClose: this.closeDialog, ...props }} />\n    });\n  };\n\n  toggleStreamerMode = enable => {\n    const playerRig = document.querySelector(\"#player-rig\");\n    playerRig.setAttribute(\"character-controller\", \"fly\", enable);\n\n    if (enable) {\n      this.props.hubChannel.beginStreaming();\n      this.setState({ isStreaming: true, showStreamingTip: true });\n    } else {\n      this.props.hubChannel.endStreaming();\n      this.setState({ isStreaming: false });\n    }\n  };\n\n  toggleFlyMode = enable => {\n    const playerRig = document.querySelector(\"#player-rig\");\n    playerRig.setAttribute(\"character-controller\", \"fly\", enable);  \n    this.setState({flyingEnabled: enable})\n  }\n  \n\n  renderDialog = (DialogClass, props = {}) => <DialogClass {...{ onClose: this.closeDialog, ...props }} />;\n\n  showSignInDialog = () => {\n    this.showNonHistoriedDialog(SignInDialog, {\n      message: messages[\"sign-in.prompt\"],\n      onSignIn: async email => {\n        const { authComplete } = await this.props.authChannel.startAuthentication(email, this.props.hubChannel);\n\n        this.showNonHistoriedDialog(SignInDialog, { authStarted: true });\n\n        await authComplete;\n\n        this.setState({ signedIn: true });\n        this.closeDialog();\n      }\n    });\n  };\n\n  signOut = async () => {\n    await this.props.authChannel.signOut(this.props.hubChannel);\n    this.setState({ signedIn: false });\n  };\n\n  showWebRTCScreenshareUnsupportedDialog = () => {\n    this.pushHistoryState(\"modal\", \"webrtc-screenshare\");\n  };\n\n  onMiniInviteClicked = () => {\n    const link = \"https://hub.link/\" + this.props.hubId;\n\n    this.setState({ miniInviteActivated: true });\n    setTimeout(() => {\n      this.setState({ miniInviteActivated: false });\n    }, 5000);\n\n    if (canShare()) {\n      navigator.share({ title: document.title, url: link });\n    } else {\n      copy(link);\n    }\n  };\n\n  sendMessage = msg => {\n    this.props.onSendMessage(msg);\n  };\n\n  occupantCount = () => {\n    return this.props.presences ? Object.entries(this.props.presences).length : 0;\n  };\n\n  onStoreChanged = () => {\n    const broadcastedRoomConfirmed = this.props.store.state.confirmedBroadcastedRooms.includes(this.props.hubId);\n    if (broadcastedRoomConfirmed !== this.state.broadcastTipDismissed) {\n      this.setState({ broadcastTipDismissed: broadcastedRoomConfirmed });\n    }\n  };\n\n  confirmBroadcastedRoom = () => {\n    this.props.store.update({ confirmedBroadcastedRooms: [this.props.hubId] });\n  };\n\n  discordBridges = () => {\n    if (!this.props.presences) {\n      return [];\n    } else {\n      return discordBridgesForPresences(this.props.presences);\n    }\n  };\n\n  hasEmbedPresence = () => {\n    if (!this.props.presences) {\n      return false;\n    } else {\n      for (const p of Object.values(this.props.presences)) {\n        for (const m of p.metas) {\n          if (m.context && m.context.embed) {\n            return true;\n          }\n        }\n      }\n    }\n\n    return false;\n  };\n\n  pushHistoryState = (k, v) => pushHistoryState(this.props.history, k, v);\n\n  renderInterstitialPrompt = () => {\n    return (\n      <IntlProvider locale={lang} messages={messages}>\n        <div className={styles.interstitial} onClick={() => this.props.onInterstitialPromptClicked()}>\n          <div>\n            <FormattedMessage id=\"interstitial.prompt\" />\n          </div>\n        </div>\n      </IntlProvider>\n    );\n  };\n\n  renderExitedPane = () => {\n    let subtitle = null;\n    if (this.props.roomUnavailableReason === \"closed\") {\n      // TODO i18n, due to links and markup\n      subtitle = (\n        <div>\n          Sorry, this room is no longer available.\n          <p />A room may be closed if we receive reports that it violates our{\" \"}\n          <WithHoverSound>\n            <a target=\"_blank\" rel=\"noreferrer noopener\" href=\"https://github.com/mozilla/hubs/blob/master/TERMS.md\">\n              Terms of Use\n            </a>\n          </WithHoverSound>\n          .<br />\n          If you have questions, contact us at{\" \"}\n          <WithHoverSound>\n            <a href=\"mailto:hubs@mozilla.com\">hubs@mozilla.com</a>\n          </WithHoverSound>\n          .<p />\n          If you&apos;d like to run your own server, hubs&apos;s source code is available on{\" \"}\n          <WithHoverSound>\n            <a href=\"https://github.com/mozilla/hubs\">GitHub</a>\n          </WithHoverSound>\n          .\n        </div>\n      );\n    } else if (this.props.platformUnsupportedReason === \"no_data_channels\") {\n      // TODO i18n, due to links and markup\n      subtitle = (\n        <div>\n          Your browser does not support{\" \"}\n          <WithHoverSound>\n            <a\n              href=\"https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/createDataChannel#Browser_compatibility\"\n              rel=\"noreferrer noopener\"\n            >\n              WebRTC Data Channels\n            </a>\n          </WithHoverSound>\n          , which is required to use Hubs.\n          <br />\n          If you&quot;d like to use Hubs with Oculus or SteamVR, you can{\" \"}\n          <WithHoverSound>\n            <a href=\"https://www.mozilla.org/firefox\" rel=\"noreferrer noopener\">\n              Download Firefox\n            </a>\n          </WithHoverSound>\n          .\n        </div>\n      );\n    } else {\n      const reason = this.props.roomUnavailableReason || this.props.platformUnsupportedReason;\n      const exitSubtitleId = `exit.subtitle.${reason || \"exited\"}`;\n      subtitle = (\n        <div>\n          <FormattedMessage id={exitSubtitleId} />\n          <p />\n          {![\"left\", \"disconnected\"].includes(this.props.roomUnavailableReason) && (\n            <div>\n              You can also{\" \"}\n              <WithHoverSound>\n                <a href=\"/\">create a new room</a>\n              </WithHoverSound>\n              .\n            </div>\n          )}\n        </div>\n      );\n    }\n\n    return (\n      <IntlProvider locale={lang} messages={messages}>\n        <div className=\"exited-panel\">\n          <img className=\"exited-panel__logo\" src=\"../assets/images/logo.svg\" />\n          <div className=\"exited-panel__subtitle\">{subtitle}</div>\n        </div>\n      </IntlProvider>\n    );\n  };\n\n  renderBotMode = () => {\n    return (\n      <div className=\"loading-panel\">\n        <img className=\"loading-panel__logo\" src=\"../assets/images/logo.svg\" />\n        <input type=\"file\" id=\"bot-audio-input\" accept=\"audio/*\" />\n        <input type=\"file\" id=\"bot-data-input\" accept=\"application/json\" />\n      </div>\n    );\n  };\n\n  renderEntryStartPanel = () => {\n    const { hasAcceptedProfile, hasChangedName } = this.props.store.state.activity;\n    const promptForNameAndAvatarBeforeEntry = this.props.hubIsBound ? !hasAcceptedProfile : !hasChangedName;\n\n    return (\n      <div className={entryStyles.entryPanel}>\n        <div className={entryStyles.name}>\n\n          <span>{this.props.hubName}</span>\n\n          {false && this.props.hubChannel.canOrWillIfCreator(\"update_hub\") ? (\n\n            <button\n              className={entryStyles.renameButton}\n              onClick={() =>\n                this.props.performConditionalSignIn(\n                  () => this.props.hubChannel.can(\"update_hub\"),\n                  () => this.pushHistoryState(\"modal\", \"rename_room\"),\n                  \"rename-room\"\n                )\n              }\n            >\n              {this.props.hubName}\n            </button>\n          ) : false ? (\n            <span>{this.props.hubName}</span>\n          ) : <span />}\n          <button onClick={() => this.setState({ watching: true })} className={entryStyles.collapseButton}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </button>\n\n          {false && <button\n            onClick={() => this.toggleFavorited()}\n            className={classNames({\n              [entryStyles.entryFavoriteButton]: true,\n              [entryStyles.favoriteButton]: true,\n              [entryStyles.favorited]: this.isFavorited()\n            })}\n          >\n            <i title=\"Favorite\">\n              <FontAwesomeIcon icon={faStar} />\n            </i>\n          </button>}\n        </div>\n\n        <div className={entryStyles.roomSubtitle}>\n          <FormattedMessage id=\"entry.lobby\" />\n        </div>\n\n        <div className={entryStyles.center}>\n\n          <LobbyChatBox\n            occupantCount={this.occupantCount()}\n            discordBridges={this.discordBridges()}\n            onSendMessage={this.sendMessage}\n          />\n        </div>\n\n        {!this.state.waitingOnAudio ? (\n          <div className={entryStyles.buttonContainer}>\n            {!isMobileVR && (\n              <a\n                onClick={e => {\n                  e.preventDefault();\n                  this.attemptLink();\n                }}\n                className={classNames([entryStyles.secondaryActionButton, entryStyles.wideButton])}\n              >\n                <FormattedMessage id=\"entry.device-medium\" />\n                <div className={entryStyles.buttonSubtitle}>\n                  <FormattedMessage id={isMobile ? \"entry.device-subtitle-mobile\" : \"entry.device-subtitle-desktop\"} />\n                </div>\n              </a>\n            )}\n            {promptForNameAndAvatarBeforeEntry || !this.props.forcedVREntryType ? (\n              <StateLink\n                stateKey=\"entry_step\"\n                stateValue={promptForNameAndAvatarBeforeEntry ? \"profile\" : \"device\"}\n                history={this.props.history}\n                className={classNames([entryStyles.actionButton, entryStyles.wideButton])}\n              >\n                <FormattedMessage id=\"entry.enter-room\" />\n              </StateLink>\n            ) : (\n              <a\n                onClick={e => {\n                  e.preventDefault();\n                  this.handleForceEntry();\n                }}\n                className={classNames([entryStyles.actionButton, entryStyles.wideButton])}\n              >\n                <FormattedMessage id=\"entry.enter-room\" />\n              </a>\n            )}\n          </div>\n        ) : (\n          <div>\n            <div className=\"loader-wrap loader-mid\">\n              <div className=\"loader\">\n                <div className=\"loader-center\" />\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  renderDevicePanel = () => {\n    return (\n      <div className={entryStyles.entryPanel}>\n        <div onClick={() => this.props.history.goBack()} className={entryStyles.back}>\n          <i>\n            <FontAwesomeIcon icon={faArrowLeft} />\n          </i>\n          <FormattedMessage id=\"entry.back\" />\n        </div>\n\n        <div className={entryStyles.title}>\n          <FormattedMessage id=\"entry.choose-device\" />\n        </div>\n\n        {!this.state.waitingOnAudio ? (\n          <div className={entryStyles.buttonContainer}>\n            {this.props.availableVREntryTypes.cardboard !== VR_DEVICE_AVAILABILITY.no && (\n              <div className={entryStyles.secondary} onClick={this.enterVR}>\n                <FormattedMessage id=\"entry.cardboard\" />\n              </div>\n            )}\n            {this.props.availableVREntryTypes.generic !== VR_DEVICE_AVAILABILITY.no && (\n              <GenericEntryButton secondary={true} onClick={this.enterVR} />\n            )}\n            {this.props.availableVREntryTypes.daydream === VR_DEVICE_AVAILABILITY.yes && (\n              <DaydreamEntryButton secondary={true} onClick={this.enterDaydream} subtitle={null} />\n            )}\n            {this.props.availableVREntryTypes.screen === VR_DEVICE_AVAILABILITY.yes && (\n              <TwoDEntryButton onClick={this.enter2D} />\n            )}\n          </div>\n        ) : (\n          <div className={entryStyles.audioLoader}>\n            <div className=\"loader-wrap loader-mid\">\n              <div className=\"loader\">\n                <div className=\"loader-center\" />\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  renderMicPanel = granted => {\n    return (\n      <div className=\"mic-grant-panel\">\n        <div onClick={() => this.props.history.goBack()} className={entryStyles.back}>\n          <i>\n            <FontAwesomeIcon icon={faArrowLeft} />\n          </i>\n          <FormattedMessage id=\"entry.back\" />\n        </div>\n\n        <div className=\"mic-grant-panel__grant-container\">\n          <div className=\"mic-grant-panel__title\">\n            <FormattedMessage id={granted ? \"audio.granted-title\" : \"audio.grant-title\"} />\n          </div>\n          <div className=\"mic-grant-panel__subtitle\">\n            <FormattedMessage id={granted ? \"audio.granted-subtitle\" : \"audio.grant-subtitle\"} />\n          </div>\n          <div className=\"mic-grant-panel__button-container\">\n            {granted ? (\n              <WithHoverSound>\n                <button className=\"mic-grant-panel__button\" onClick={this.onMicGrantButton}>\n                  <img src=\"../assets/images/mic_granted.png\" srcSet=\"../assets/images/mic_granted@2x.png 2x\" />\n                </button>\n              </WithHoverSound>\n            ) : (\n              <WithHoverSound>\n                <button className=\"mic-grant-panel__button\" onClick={this.onMicGrantButton}>\n                  <img src=\"../assets/images/mic_denied.png\" srcSet=\"../assets/images/mic_denied@2x.png 2x\" />\n                </button>\n              </WithHoverSound>\n            )}\n          </div>\n          <div className=\"mic-grant-panel__next-container\">\n            <WithHoverSound>\n              <button className={classNames(\"mic-grant-panel__next\")} onClick={this.onMicGrantButton}>\n                <FormattedMessage id=\"audio.granted-next\" />\n              </button>\n            </WithHoverSound>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderAudioSetupPanel = () => {\n    const subtitleId = isMobilePhoneOrVR ? \"audio.subtitle-mobile\" : \"audio.subtitle-desktop\";\n    return (\n      <div className=\"audio-setup-panel\">\n        <div onClick={() => this.props.history.goBack()} className={entryStyles.back}>\n          <i>\n            <FontAwesomeIcon icon={faArrowLeft} />\n          </i>\n          <FormattedMessage id=\"entry.back\" />\n        </div>\n\n        <div>\n          <div className=\"audio-setup-panel__title\">\n            <FormattedMessage id=\"audio.title\" />\n          </div>\n          <div className=\"audio-setup-panel__subtitle\">\n            {(isMobilePhoneOrVR || this.state.enterInVR) && <FormattedMessage id={subtitleId} />}\n          </div>\n          <div className=\"audio-setup-panel__levels\">\n            <MicLevelWidget\n              hasAudioTrack={!!this.state.audioTrack}\n              muteOnEntry={this.state.muteOnEntry}\n              mediaStream={this.state.mediaStream}\n            />\n            <OutputLevelWidget />\n          </div>\n          {this.state.audioTrack && this.state.micDevices.length > 1 ? (\n            <div className=\"audio-setup-panel__device-chooser\">\n              <WithHoverSound>\n                <select\n                  className=\"audio-setup-panel__device-chooser__dropdown\"\n                  value={this.selectedMicDeviceId()}\n                  onChange={this.micDeviceChanged}\n                >\n                  {this.state.micDevices.map(d => (\n                    <option key={d.deviceId} value={d.deviceId}>\n                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                      {d.label}\n                    </option>\n                  ))}\n                </select>\n              </WithHoverSound>\n              <img\n                className=\"audio-setup-panel__device-chooser__mic-icon\"\n                src=\"../assets/images/mic_small.png\"\n                srcSet=\"../assets/images/mic_small@2x.png 2x\"\n              />\n              <img\n                className=\"audio-setup-panel__device-chooser__dropdown-arrow\"\n                src=\"../assets/images/dropdown_arrow.png\"\n                srcSet=\"../assets/images/dropdown_arrow@2x.png 2x\"\n              />\n            </div>\n          ) : (\n            <div />\n          )}\n          {this.shouldShowHmdMicWarning() && (\n            <div className=\"audio-setup-panel__hmd-mic-warning\">\n              <img\n                src=\"../assets/images/warning_icon.png\"\n                srcSet=\"../assets/images/warning_icon@2x.png 2x\"\n                className=\"audio-setup-panel__hmd-mic-warning__icon\"\n              />\n              <span className=\"audio-setup-panel__hmd-mic-warning__label\">\n                <FormattedMessage id=\"audio.hmd-mic-warning\" />\n              </span>\n            </div>\n          )}\n        </div>\n        <div className=\"audio-setup-panel__mute-container\">\n          <input\n            id=\"mute-on-entry\"\n            type=\"checkbox\"\n            onChange={() => this.setState({ muteOnEntry: !this.state.muteOnEntry })}\n            checked={this.state.muteOnEntry}\n          />\n          <label htmlFor=\"mute-on-entry\">\n            <FormattedMessage id=\"entry.mute-on-entry\" />\n          </label>\n        </div>\n        <div className=\"audio-setup-panel__enter-button-container\">\n          <WithHoverSound>\n            <button className=\"audio-setup-panel__enter-button\" onClick={this.onAudioReadyButton}>\n              <FormattedMessage id=\"audio.enter-now\" />\n            </button>\n          </WithHoverSound>\n        </div>\n      </div>\n    );\n  };\n\n  isInModalOrOverlay = () => {\n    if (\n      this.state.entered &&\n      (IN_ROOM_MODAL_ROUTER_PATHS.find(x => sluglessPath(this.props.history.location).startsWith(x)) ||\n        IN_ROOM_MODAL_QUERY_VARS.find(x => new URLSearchParams(this.props.history.location.search).get(x)))\n    ) {\n      return true;\n    }\n\n    if (\n      !this.state.entered &&\n      (LOBBY_MODAL_ROUTER_PATHS.find(x => sluglessPath(this.props.history.location).startsWith(x)) ||\n        LOBBY_MODAL_QUERY_VARS.find(\n          (x, i) => new URLSearchParams(this.props.history.location.search).get(x) === LOBBY_MODAL_QUERY_VALUES[i]\n        ))\n    ) {\n      return true;\n    }\n\n    return !!(\n      (this.props.history &&\n        this.props.history.location.state &&\n        (this.props.history.location.state.modal || this.props.history.location.state.overlay)) ||\n      this.state.dialog\n    );\n  };\n\n  render() {\n    if (this.props.hide || this.state.hide) return <div />;\n\n    const isExited = this.state.exited || this.props.roomUnavailableReason || this.props.platformUnsupportedReason;\n    const preload = this.props.showPreload;\n\n    const isLoading =\n      !preload &&\n      (!this.state.hideLoader || !this.state.didConnectToNetworkedScene) &&\n      !(this.props.showSafariMicDialog || this.props.showSafariDialog || this.props.showWebAssemblyDialog);\n\n    const rootStyles = {\n      [styles.ui]: true,\n      \"ui-root\": true,\n      \"in-modal-or-overlay\": this.isInModalOrOverlay()\n    };\n    const hasPush = navigator.serviceWorker && \"PushManager\" in window;\n\n    if (this.props.showOAuthDialog && !this.props.showInterstitialPrompt)\n      return (\n        <IntlProvider locale={lang} messages={messages}>\n          <div className={classNames(rootStyles)}>\n            <OAuthDialog onClose={this.props.onCloseOAuthDialog} oauthInfo={this.props.oauthInfo} />\n          </div>\n        </IntlProvider>\n      );\n    if (isExited) return this.renderExitedPane();\n    if (isLoading) {\n      return (\n        <Loader loadingIcon={this.state.airtableAssets.Icon} scene={this.props.scene} finished={this.state.noMoreLoadingUpdates} onLoaded={this.onLoadingFinished} />\n      );\n    }\n    if (this.props.showInterstitialPrompt) return this.renderInterstitialPrompt();\n    if (this.props.isBotMode) return this.renderBotMode();\n\n    const embed = this.props.embed;\n    const entered = this.state.entered;\n    const watching = this.state.watching;\n    const enteredOrWatching = entered || watching;\n    const enteredOrWatchingOrPreload = entered || watching || preload;\n    const baseUrl = `${location.protocol}//${location.host}${location.pathname}`;\n    const inEntryFlow = !!(\n      this.props.history &&\n      this.props.history.location.state &&\n      this.props.history.location.state.entry_step\n    );\n\n    const entryDialog =\n      this.props.availableVREntryTypes &&\n      !preload &&\n      (this.isWaitingForAutoExit() ? (\n        <AutoExitWarning\n          secondsRemaining={this.state.secondsRemainingBeforeAutoExit}\n          onCancel={this.endAutoExitTimer}\n        />\n      ) : (\n        <div className={entryStyles.entryDialog}>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"device\" history={this.props.history}>\n            {this.renderDevicePanel()}\n          </StateRoute>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"mic_grant\" history={this.props.history}>\n            {this.renderMicPanel(false)}\n          </StateRoute>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"mic_granted\" history={this.props.history}>\n            {this.renderMicPanel(true)}\n          </StateRoute>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"audio\" history={this.props.history}>\n            {this.renderAudioSetupPanel()}\n          </StateRoute>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"\" history={this.props.history}>\n            {this.renderEntryStartPanel()}\n          </StateRoute>\n        </div>\n      ));\n\n    const dialogBoxContentsClassNames = classNames({\n      [styles.uiInteractive]: !this.isInModalOrOverlay(),\n      [styles.uiDialogBoxContents]: true,\n      [styles.backgrounded]: this.isInModalOrOverlay()\n    });\n\n    const showVREntryButton = entered && isMobileVR;\n\n    const presenceLogEntries = this.props.presenceLogEntries || [];\n\n    const mediaSource = this.props.mediaSearchStore.getUrlMediaSource(this.props.history.location);\n\n    // Allow scene picker pre-entry, otherwise wait until entry\n    const showMediaBrowser =\n      mediaSource && ([\"scenes\", \"avatars\", \"favorites\"].includes(mediaSource) || this.state.entered);\n    const hasTopTip = (this.props.activeTips && this.props.activeTips.top) || this.state.showVideoShareFailed;\n\n    const clientInfoClientId = getClientInfoClientId(this.props.history.location);\n    const showClientInfo = !!clientInfoClientId;\n\n    const discordBridges = this.discordBridges();\n    const discordSnippet = discordBridges.map(ch => \"#\" + ch).join(\", \");\n    const hasEmbedPresence = this.hasEmbedPresence();\n    const hasDiscordBridges = discordBridges.length > 0;\n    const showBroadcastTip =\n      (hasDiscordBridges || (hasEmbedPresence && !this.props.embed)) && !this.state.broadcastTipDismissed;\n\n    const showInviteTip =\n      !showVREntryButton &&\n      !hasTopTip &&\n      !entered &&\n      !embed &&\n      !preload &&\n      !watching &&\n      !hasTopTip &&\n      !inEntryFlow &&\n      !this.props.store.state.activity.hasOpenedShare &&\n      this.occupantCount() <= 1;\n\n    const showChooseSceneButton =\n    false && \n      !showVREntryButton &&\n      !entered &&\n      !embed &&\n      !preload &&\n      !watching &&\n      !showInviteTip &&\n      !this.state.showShareDialog &&\n      this.props.hubChannel &&\n      this.props.hubChannel.canOrWillIfCreator(\"update_hub\");\n\n    const displayNameOverride = this.props.hubIsBound\n      ? getPresenceProfileForSession(this.props.presences, this.props.sessionId).displayName\n      : null;\n\n    const streaming = this.state.isStreaming;\n    const streamingTip = streaming &&\n      this.state.showStreamingTip && (\n        <div className={classNames([styles.streamingTip])}>\n          <div className={classNames([styles.streamingTipAttachPoint])} />\n          <button\n            title=\"Dismiss\"\n            className={styles.streamingTipClose}\n            onClick={() => this.setState({ showStreamingTip: false })}\n          >\n            <FontAwesomeIcon icon={faTimes} />\n          </button>\n\n          <div className={styles.streamingTipMessage}>\n            <FormattedMessage id=\"tips.streaming\" />\n          </div>\n        </div>\n      );\n\n    const streamer = getCurrentStreamer();\n    const streamerName = streamer && streamer.displayName;\n\n    return (\n      <ReactAudioContext.Provider value={this.state.audioContext}>\n        <IntlProvider locale={lang} messages={messages}>\n          <div className={classNames(rootStyles)}>\n            {this.state.dialog}\n            {preload && (\n              <PreloadOverlay\n                hubName={this.props.hubName}\n                hubScene={this.props.hubScene}\n                baseUrl={baseUrl}\n                onLoadClicked={this.props.onPreloadLoadClicked}\n                logo={this.state.DarkLogo}\n              />\n            )}\n            <StateRoute\n              stateKey=\"overlay\"\n              stateValue=\"profile\"\n              history={this.props.history}\n              render={props => (\n                <ProfileEntryPanel\n                  {...props}\n                  displayNameOverride={displayNameOverride}\n                  finished={() => this.pushHistoryState()}\n                  onClose={() => this.pushHistoryState()}\n                  store={this.props.store}\n                  mediaSearchStore={this.props.mediaSearchStore}\n                  avatarId={props.location.state.detail && props.location.state.detail.avatarId}\n                  logo={this.state.airtableAssets.DarkLogo}\n                />\n              )}\n            />\n            <StateRoute\n              stateKey=\"overlay\"\n              stateValue=\"avatar-editor\"\n              history={this.props.history}\n              render={props => (\n                <AvatarEditor\n                  className={styles.avatarEditor}\n                  signedIn={this.state.signedIn}\n                  onSignIn={this.showSignInDialog}\n                  onSave={() => {\n                    if (props.location.state.detail && props.location.state.detail.returnToProfile) {\n                      this.props.history.goBack();\n                    } else {\n                      this.props.history.goBack();\n                      // We are returning to the media browser. Trigger an update so that the filter switches to\n                      // my-avatars, now that we've saved an avatar.\n                      this.props.mediaSearchStore.sourceNavigateWithNoNav(\"avatars\");\n                    }\n                    this.props.onAvatarSaved();\n                  }}\n                  onClose={() => this.props.history.goBack()}\n                  store={this.props.store}\n                  debug={avatarEditorDebug}\n                  avatarId={props.location.state.detail && props.location.state.detail.avatarId}\n                  hideDelete={props.location.state.detail && props.location.state.detail.hideDelete}\n                />\n              )}\n            />\n            {showMediaBrowser && (\n              <MediaBrowser\n                history={this.props.history}\n                mediaSearchStore={this.props.mediaSearchStore}\n                hubChannel={this.props.hubChannel}\n                onMediaSearchResultEntrySelected={entry => {\n                  if (entry.type === \"hub\") {\n                    this.showNonHistoriedDialog(LeaveRoomDialog, {\n                      destinationUrl: entry.url,\n                      messageType: \"join-room\"\n                    });\n                  } else {\n                    this.props.onMediaSearchResultEntrySelected(entry);\n                  }\n                }}\n                performConditionalSignIn={this.props.performConditionalSignIn}\n              />\n            )}\n            <StateRoute\n              stateKey=\"entry_step\"\n              stateValue=\"profile\"\n              history={this.props.history}\n              render={props => (\n                <ProfileEntryPanel\n                  {...props}\n                  displayNameOverride={displayNameOverride}\n                  finished={() => {\n                    if (this.props.forcedVREntryType) {\n                      this.pushHistoryState();\n                      this.handleForceEntry();\n                    } else {\n                      this.pushHistoryState(\"entry_step\", \"device\");\n                    }\n                  }}\n                  onClose={() => this.pushHistoryState()}\n                  store={this.props.store}\n                  mediaSearchStore={this.props.mediaSearchStore}\n                  avatarId={props.location.state.detail && props.location.state.detail.avatarId}\n                  logo={this.state.airtableAssets.DarkLogo}\n                />\n              )}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"rename_room\"\n              history={this.props.history}\n              render={() =>\n                this.renderDialog(RenameRoomDialog, { onRename: name => this.props.hubChannel.rename(name) })\n              }\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"close_room\"\n              history={this.props.history}\n              render={() => this.renderDialog(CloseRoomDialog, { onConfirm: () => this.props.hubChannel.closeHub() })}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"help\"\n              history={this.props.history}\n              render={() => this.renderDialog(HelpDialog)}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"support\"\n              history={this.props.history}\n              render={() => this.renderDialog(InviteTeamDialog, { hubChannel: this.props.hubChannel })}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"create\"\n              history={this.props.history}\n              render={() => this.renderDialog(CreateObjectDialog, { onCreate: this.createObject })}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"change_scene\"\n              history={this.props.history}\n              render={() => this.renderDialog(ChangeSceneDialog, { onChange: this.changeScene })}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"avatar_url\"\n              history={this.props.history}\n              render={() => this.renderDialog(AvatarUrlDialog, { onChange: this.setAvatarUrl })}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"webvr\"\n              history={this.props.history}\n              render={() => this.renderDialog(WebVRRecommendDialog)}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"webrtc-screenshare\"\n              history={this.props.history}\n              render={() => this.renderDialog(WebRTCScreenshareUnsupportedDialog)}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"room_info\"\n              history={this.props.history}\n              render={() =>\n                this.renderDialog(RoomInfoDialog, { scene: this.props.hubScene, hubName: this.props.hubName })\n              }\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"feedback\"\n              history={this.props.history}\n              render={() =>\n                this.renderDialog(FeedbackDialog, {\n                  history: this.props.history,\n                  onClose: () => this.pushHistoryState(\"modal\", null)\n                })\n              }\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"tweet\"\n              history={this.props.history}\n              render={() => this.renderDialog(TweetDialog, { history: this.props.history, onClose: this.closeDialog })}\n            />\n            {showClientInfo && (\n              <ClientInfoDialog\n                clientId={clientInfoClientId}\n                onClose={this.closeDialog}\n                history={this.props.history}\n                presences={this.props.presences}\n                hubChannel={this.props.hubChannel}\n                performConditionalSignIn={this.props.performConditionalSignIn}\n              />\n            )}\n            {(!enteredOrWatching || this.isWaitingForAutoExit()) && (\n              <div className={styles.uiDialog}>\n                <PresenceLog\n                  entries={presenceLogEntries}\n                  presences={this.props.presences}\n                  hubId={this.props.hubId}\n                  history={this.props.history}\n                />\n                <div className={dialogBoxContentsClassNames}>{entryDialog}</div>\n              </div>\n            )}\n            {enteredOrWatchingOrPreload && (\n              <PresenceLog\n                inRoom={true}\n                presences={this.props.presences}\n                entries={presenceLogEntries}\n                hubId={this.props.hubId}\n                history={this.props.history}\n              />\n            )}\n            {entered &&\n              this.props.activeTips &&\n              this.props.activeTips.bottom &&\n              (!presenceLogEntries || presenceLogEntries.length === 0) &&\n              !showBroadcastTip && (\n                <Tip tip={this.props.activeTips.bottom} tipRegion=\"bottom\" pushHistoryState={this.pushHistoryState} />\n              )}\n            {enteredOrWatchingOrPreload &&\n              showBroadcastTip && (\n                <Tip\n                  tip={hasDiscordBridges ? \"discord\" : \"embed\"}\n                  broadcastTarget={discordSnippet}\n                  onClose={() => this.confirmBroadcastedRoom()}\n                />\n              )}\n            {enteredOrWatchingOrPreload && (\n              <InWorldChatBox\n                discordBridges={discordBridges}\n                onSendMessage={this.sendMessage}\n                onObjectCreated={this.createObject}\n                enableSpawning={entered}\n                history={this.props.history}\n              />\n            )}\n            {this.state.frozen && (\n              <button className={styles.leaveButton} onClick={() => this.exit(\"left\")}>\n                <FormattedMessage id=\"entry.leave-room\" />\n              </button>\n            )}\n            {!this.state.frozen &&\n              !watching &&\n              !preload && (\n                <div\n                  className={classNames({\n                    [inviteStyles.inviteContainer]: true,\n                    [inviteStyles.inviteContainerBelowHud]: entered,\n                    [inviteStyles.inviteContainerInverted]: this.state.showShareDialog\n                  })}\n                >\n                  {false && !embed &&\n                    !showVREntryButton &&\n                    !hasTopTip &&\n                    !streaming && (\n                      <WithHoverSound>\n                        <button\n                          className={classNames({\n                            [inviteStyles.inviteButton]: true,\n                            [inviteStyles.hideSmallScreens]: this.occupantCount() > 1 && entered\n                          })}\n                          onClick={() => this.toggleShareDialog()}\n                        >\n                          <FormattedMessage id=\"entry.share-button\" />\n                        </button>\n                      </WithHoverSound>\n                    )}\n                  {showChooseSceneButton && (\n                    <button\n                      className={classNames([styles.chooseSceneButton])}\n                      onClick={() => {\n                        this.props.performConditionalSignIn(\n                          () => this.props.hubChannel.can(\"update_hub\"),\n                          () => {\n                            showFullScreenIfAvailable();\n                            this.props.mediaSearchStore.sourceNavigateWithNoNav(\"scenes\");\n                          },\n                          \"change-scene\"\n                        );\n                      }}\n                    >\n                      <FormattedMessage id=\"entry.change-scene\" />\n                    </button>\n                  )}\n\n                  {showInviteTip && (\n                    <div className={styles.inviteTip}>\n                      <div className={styles.inviteTipAttachPoint} />\n                      <FormattedMessage id={`entry.${isMobile ? \"mobile\" : \"desktop\"}.invite-tip`} />\n                    </div>\n                  )}\n                  {!embed &&\n                    !showVREntryButton &&\n                    this.occupantCount() > 1 &&\n                    !hasTopTip &&\n                    entered &&\n                    !streaming && (\n                      <WithHoverSound>\n                        <button onClick={this.onMiniInviteClicked} className={inviteStyles.inviteMiniButton}>\n                          <span>\n                            {this.state.miniInviteActivated\n                              ? navigator.share\n                                ? \"sharing...\"\n                                : \"copied!\"\n                              : \"hub.link/\" + this.props.hubId}\n                          </span>\n                        </button>\n                      </WithHoverSound>\n                    )}\n                  {showVREntryButton && (\n                    <WithHoverSound>\n                      <button className={inviteStyles.enterButton} onClick={() => exit2DInterstitialAndEnterVR(true)}>\n                        <FormattedMessage id=\"entry.enter-in-vr\" />\n                      </button>\n                    </WithHoverSound>\n                  )}\n                  {embed && (\n                    <a href={baseUrl} className={inviteStyles.enterButton} target=\"_blank\" rel=\"noopener noreferrer\">\n                      <FormattedMessage id=\"entry.open-in-window\" />\n                    </a>\n                  )}\n                  {this.state.showShareDialog && (\n                    <InviteDialog\n                      allowShare={!isMobileVR}\n                      entryCode={this.props.hubEntryCode}\n                      embedUrl={\n                        this.props.embedToken && !isMobilePhoneOrVR\n                          ? `${baseUrl}?embed_token=${this.props.embedToken}`\n                          : null\n                      }\n                      hasPush={hasPush}\n                      isSubscribed={\n                        this.state.isSubscribed === undefined ? this.props.initialIsSubscribed : this.state.isSubscribed\n                      }\n                      onSubscribeChanged={() => this.onSubscribeChanged()}\n                      hubId={this.props.hubId}\n                      onClose={() => this.setState({ showShareDialog: false })}\n                    />\n                  )}\n                </div>\n              )}\n            <StateRoute\n              stateKey=\"overlay\"\n              stateValue=\"invite\"\n              history={this.props.history}\n              render={() => (\n                <InviteDialog\n                  allowShare={!!navigator.share}\n                  entryCode={this.props.hubEntryCode}\n                  hubId={this.props.hubId}\n                  isModal={true}\n                  onClose={() => {\n                    this.props.history.goBack();\n                    exit2DInterstitialAndEnterVR();\n                  }}\n                />\n              )}\n            />\n            <StateRoute\n              stateKey=\"overlay\"\n              stateValue=\"link\"\n              history={this.props.history}\n              render={() => (\n                <LinkDialog\n                  linkCode={this.state.linkCode}\n                  onClose={() => {\n                    this.state.linkCodeCancel();\n                    this.setState({ linkCode: null, linkCodeCancel: null });\n                    this.props.history.goBack();\n                  }}\n                />\n              )}\n            />\n            {streaming && (\n              <button\n                title=\"Exit Camera Mode\"\n                onClick={() => this.toggleStreamerMode(false)}\n                className={classNames([styles.cornerButton, styles.cameraModeExitButton])}\n              >\n                <FontAwesomeIcon icon={faTimes} />\n              </button>\n            )}\n            {streamingTip}\n\n            <PresenceList\n              history={this.props.history}\n              presences={this.props.presences}\n              sessionId={this.props.sessionId}\n              signedIn={this.state.signedIn}\n              email={this.props.store.state.credentials.email}\n              onSignIn={this.showSignInDialog}\n              onSignOut={this.signOut}\n            />\n\n            {!streaming &&\n              !preload && (\n                <SettingsMenu\n                  history={this.props.history}\n                  mediaSearchStore={this.props.mediaSearchStore}\n                  isStreaming={streaming}\n                  toggleStreamerMode={this.toggleStreamerMode}\n                  hubChannel={this.props.hubChannel}\n                  hubScene={this.props.hubScene}\n                  scene={this.props.scene}\n                  performConditionalSignIn={this.props.performConditionalSignIn}\n                  showNonHistoriedDialog={this.showNonHistoriedDialog}\n                  pushHistoryState={this.pushHistoryState}\n                  toggleFlyMode={this.toggleFlyMode}\n                />\n              )}\n            {!entered && !streaming && !isMobile && streamerName && <SpectatingLabel name={streamerName} />}\n            {enteredOrWatching && (\n              <div className={styles.topHud}>\n                <TwoDHUD.TopHUD\n                  history={this.props.history}\n                  mediaSearchStore={this.props.mediaSearchStore}\n                  muted={this.state.muted}\n                  frozen={this.state.frozen}\n                  watching={this.state.watching}\n                  onWatchEnded={() => this.setState({ watching: false })}\n                  videoShareMediaSource={this.state.videoShareMediaSource}\n                  showVideoShareFailed={this.state.showVideoShareFailed}\n                  hideVideoShareFailedTip={() => this.setState({ showVideoShareFailed: false })}\n                  activeTip={this.props.activeTips && this.props.activeTips.top}\n                  isCursorHoldingPen={this.props.isCursorHoldingPen}\n                  hasActiveCamera={this.props.hasActiveCamera}\n                  onToggleMute={this.toggleMute}\n                  onToggleFlying={this.toggleFlyMode}\n                  flyingEnabled={this.state.flyingEnabled}\n                  onToggleFreeze={this.toggleFreeze}\n                  onSpawnPen={this.spawnPen}\n                  onSpawnCamera={() => this.props.scene.emit(\"action_toggle_camera\")}\n                  onShareVideo={this.shareVideo}\n                  onEndShareVideo={this.endShareVideo}\n                  onShareVideoNotCapable={() => this.showWebRTCScreenshareUnsupportedDialog()}\n                  isStreaming={streaming}\n                  showStreamingTip={this.state.showStreamingTip}\n                  hideStreamingTip={() => {\n                    this.setState({ showStreamingTip: false });\n                  }}\n                />\n                {!watching && !streaming ? (\n                  <div className={styles.nagCornerButton}>\n                    <button onClick={() => this.pushHistoryState(\"modal\", \"feedback\")}>\n                      <FormattedMessage id=\"feedback.prompt\" />\n                    </button>\n                  </div>\n                ) : (\n                  <div className={styles.nagCornerButton}>\n                    <button onClick={() => this.setState({ hide: true })}>\n                      <FormattedMessage id=\"hide-ui.prompt\" />\n                    </button>\n                  </div>\n                )}\n\n                {!streaming && false && (\n                  <button\n                    onClick={() => this.toggleFavorited()}\n                    className={classNames({\n                      [entryStyles.favorited]: this.isFavorited(),\n                      [styles.inRoomFavoriteButton]: true\n                    })}\n                  >\n                    <i title=\"Favorite\">\n                      <FontAwesomeIcon icon={faStar} />\n                    </i>\n                  </button>\n                )}\n              </div>\n            )}\n          </div>\n        </IntlProvider>\n      </ReactAudioContext.Provider>\n    );\n  }\n}\n\nexport default UIRoot;\n","import jwtDecode from \"jwt-decode\";\nimport { EventTarget } from \"event-target-shim\";\nimport { Presence } from \"phoenix\";\nimport { migrateChannelToSocket, discordBridgesForPresences } from \"./phoenix-utils\";\n\nconst MS_PER_DAY = 1000 * 60 * 60 * 24;\nconst MS_PER_MONTH = 1000 * 60 * 60 * 24 * 30;\n\nfunction isSameMonth(da, db) {\n  return da.getFullYear() == db.getFullYear() && da.getMonth() == db.getMonth();\n}\n\nfunction isSameDay(da, db) {\n  return isSameMonth(da, db) && da.getDate() == db.getDate();\n}\n\n// Permissions that will be assumed if the user becomes the creator.\nconst HUB_CREATOR_PERMISSIONS = [\"update_hub\", \"close_hub\", \"mute_users\", \"kick_users\"];\n\nexport default class HubChannel extends EventTarget {\n  constructor(store, hubId) {\n    super();\n    this.store = store;\n    this.hubId = hubId;\n    this._signedIn = !!this.store.state.credentials.token;\n    this._permissions = {};\n    this._blockedSessionIds = new Set();\n  }\n\n  get signedIn() {\n    return this._signedIn;\n  }\n\n  // Returns true if this current session has the given permission.\n  can(permission) {\n    return this._permissions && this._permissions[permission];\n  }\n\n  // Returns true if the current session has the given permission, *or* will get the permission\n  // if they sign in and become the creator.\n  canOrWillIfCreator(permission) {\n    if (this._getCreatorAssignmentToken() && HUB_CREATOR_PERMISSIONS.includes(permission)) return true;\n    return this.can(permission);\n  }\n\n  // Migrates this hub channel to a new phoenix channel and presence\n  async migrateToSocket(socket, params) {\n    let presenceBindings;\n\n    // Unbind presence, and then set up bindings after reconnect\n    if (this.presence) {\n      presenceBindings = {\n        onJoin: this.presence.caller.onJoin,\n        onLeave: this.presence.caller.onLeave,\n        onSync: this.presence.caller.onSync\n      };\n\n      this.presence.onJoin(function() {});\n      this.presence.onLeave(function() {});\n      this.presence.onSync(function() {});\n    }\n\n    this.channel = await migrateChannelToSocket(this.channel, socket, params);\n    this.presence = new Presence(this.channel);\n\n    if (presenceBindings) {\n      this.presence.onJoin(presenceBindings.onJoin);\n      this.presence.onLeave(presenceBindings.onLeave);\n      this.presence.onSync(presenceBindings.onSync);\n    }\n  }\n\n  setPhoenixChannel = channel => {\n    this.channel = channel;\n    this.presence = new Presence(channel);\n  };\n\n  setPermissionsFromToken = token => {\n    // Note: token is not verified.\n    this._permissions = jwtDecode(token);\n    this.dispatchEvent(new CustomEvent(\"permissions_updated\"));\n\n    // Refresh the token 1 minute before it expires.\n    const nextRefresh = new Date(this._permissions.exp * 1000 - 60 * 1000) - new Date();\n    setTimeout(async () => {\n      const result = await this.fetchPermissions();\n      this.dispatchEvent(new CustomEvent(\"permissions-refreshed\", { detail: result }));\n    }, nextRefresh);\n  };\n\n  sendEntryEvent = async () => {\n    if (!this.channel) {\n      console.warn(\"No phoenix channel initialized before room entry.\");\n      return;\n    }\n\n    let entryDisplayType = \"Screen\";\n\n    if (navigator.getVRDisplays) {\n      const vrDisplay = (await navigator.getVRDisplays()).find(d => d.isPresenting);\n\n      if (vrDisplay) {\n        entryDisplayType = vrDisplay.displayName;\n      }\n    }\n\n    // This is fairly hacky, but gets the # of initial occupants\n    let initialOccupantCount = 0;\n\n    if (NAF.connection.adapter && NAF.connection.adapter.publisher) {\n      initialOccupantCount = NAF.connection.adapter.publisher.initialOccupants.length;\n    }\n\n    const entryTimingFlags = this.getEntryTimingFlags();\n\n    const entryEvent = {\n      ...entryTimingFlags,\n      initialOccupantCount,\n      entryDisplayType,\n      userAgent: navigator.userAgent\n    };\n\n    this.channel.push(\"events:entered\", entryEvent);\n  };\n\n  beginStreaming() {\n    this.channel.push(\"events:begin_streaming\", {});\n  }\n\n  endStreaming() {\n    this.channel.push(\"events:end_streaming\", {});\n  }\n\n  getEntryTimingFlags = () => {\n    const entryTimingFlags = { isNewDaily: true, isNewMonthly: true, isNewDayWindow: true, isNewMonthWindow: true };\n    const storedLastEnteredAt = this.store.state.activity.lastEnteredAt;\n\n    if (!storedLastEnteredAt) {\n      return entryTimingFlags;\n    }\n\n    const now = new Date();\n    const lastEntered = new Date(storedLastEnteredAt);\n    const msSinceLastEntered = now - lastEntered;\n\n    // note that new daily and new monthly is based on client local time\n    entryTimingFlags.isNewDaily = !isSameDay(now, lastEntered);\n    entryTimingFlags.isNewMonthly = !isSameMonth(now, lastEntered);\n    entryTimingFlags.isNewDayWindow = msSinceLastEntered > MS_PER_DAY;\n    entryTimingFlags.isNewMonthWindow = msSinceLastEntered > MS_PER_MONTH;\n\n    return entryTimingFlags;\n  };\n\n  sendObjectSpawnedEvent = objectType => {\n    if (!this.channel) {\n      console.warn(\"No phoenix channel initialized before object spawn.\");\n      return;\n    }\n\n    const spawnEvent = {\n      object_type: objectType\n    };\n\n    this.channel.push(\"events:object_spawned\", spawnEvent);\n  };\n\n  sendProfileUpdate = () => {\n    this.channel.push(\"events:profile_updated\", { profile: this.store.state.profile });\n  };\n\n  updateScene = url => {\n    if (!this._permissions.update_hub) return \"unauthorized\";\n    this.channel.push(\"update_scene\", { url });\n  };\n\n  rename = name => {\n    if (!this._permissions.update_hub) return \"unauthorized\";\n    this.channel.push(\"update_hub\", { name });\n  };\n\n  closeHub = () => {\n    if (!this._permissions.close_hub) return \"unauthorized\";\n    this.channel.push(\"close_hub\", {});\n  };\n\n  subscribe = subscription => {\n    this.channel.push(\"subscribe\", { subscription });\n  };\n\n  // If true, will tell the server to not send us any NAF traffic\n  allowNAFTraffic = allow => {\n    this.channel.push(allow ? \"unblock_naf\" : \"block_naf\", {});\n  };\n\n  unsubscribe = subscription => {\n    return new Promise(resolve => this.channel.push(\"unsubscribe\", { subscription }).receive(\"ok\", resolve));\n  };\n\n  sendMessage = (body, type = \"chat\") => {\n    if (!body) return;\n    this.channel.push(\"message\", { body, type });\n  };\n\n  _getCreatorAssignmentToken = () => {\n    const creatorAssignmentTokenEntry =\n      this.store.state.creatorAssignmentTokens &&\n      this.store.state.creatorAssignmentTokens.find(t => t.hubId === this.hubId);\n\n    return creatorAssignmentTokenEntry && creatorAssignmentTokenEntry.creatorAssignmentToken;\n  };\n\n  signIn = token => {\n    return new Promise((resolve, reject) => {\n      const creator_assignment_token = this._getCreatorAssignmentToken();\n\n      this.channel\n        .push(\"sign_in\", { token, creator_assignment_token })\n        .receive(\"ok\", ({ perms_token }) => {\n          this.setPermissionsFromToken(perms_token);\n          this._signedIn = true;\n          resolve();\n        })\n        .receive(\"error\", err => {\n          if (err.reason === \"invalid_token\") {\n            console.warn(\"sign in failed\", err);\n            // Token expired or invalid TODO purge from storage if possible\n            resolve();\n          } else {\n            console.error(\"sign in failed\", err);\n            reject();\n          }\n        });\n    });\n  };\n\n  signOut = () => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"sign_out\")\n        .receive(\"ok\", () => {\n          this._permissions = {};\n          this._signedIn = false;\n          this.dispatchEvent(new CustomEvent(\"permissions_updated\"));\n          resolve();\n        })\n        .receive(\"error\", reject);\n    });\n  };\n\n  getHost = () => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"get_host\")\n        .receive(\"ok\", res => {\n          resolve(res.host);\n        })\n        .receive(\"error\", reject);\n    });\n  };\n\n  getTwitterOAuthURL = () => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"oauth\", { type: \"twitter\" })\n        .receive(\"ok\", res => {\n          resolve(res.oauth_url);\n        })\n        .receive(\"error\", reject);\n    });\n  };\n\n  discordBridges = () => {\n    if (!this.presence || !this.presence.state) return [];\n    return discordBridgesForPresences(this.presence.state);\n  };\n\n  pin = (id, gltfNode, fileId, fileAccessToken, promotionToken) => {\n    const payload = { id, gltf_node: gltfNode };\n    if (fileId && promotionToken) {\n      payload.file_id = fileId;\n      payload.file_access_token = fileAccessToken;\n      payload.promotion_token = promotionToken;\n    }\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"pin\", payload)\n        .receive(\"ok\", resolve)\n        .receive(\"error\", reject);\n    });\n  };\n\n  unpin = (id, fileId) => {\n    const payload = { id };\n    if (fileId) {\n      payload.file_id = fileId;\n    }\n    this.channel.push(\"unpin\", payload);\n  };\n\n  fetchPermissions = () => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"refresh_perms_token\")\n        .receive(\"ok\", res => {\n          this.setPermissionsFromToken(res.perms_token);\n          resolve({ permsToken: res.perms_token, permissions: this._permissions });\n        })\n        .receive(\"error\", reject);\n    });\n  };\n\n  mute = sessionId => {\n    this.channel.push(\"mute\", { session_id: sessionId });\n  };\n\n  hide = sessionId => {\n    NAF.connection.adapter.block(sessionId);\n    this._blockedSessionIds.add(sessionId);\n  };\n\n  unhide = sessionId => {\n    if (!this._blockedSessionIds.has(sessionId)) return;\n    NAF.connection.adapter.unblock(sessionId);\n    NAF.connection.entities.completeSync(sessionId);\n    this._blockedSessionIds.delete(sessionId);\n  };\n\n  isHidden = sessionId => this._blockedSessionIds.has(sessionId);\n\n  kick = async sessionId => {\n    const permsToken = await this.fetchPermissions();\n    NAF.connection.adapter.kick(sessionId, permsToken);\n    this.channel.push(\"kick\", { session_id: sessionId });\n  };\n\n  requestSupport = () => this.channel.push(\"events:request_support\", {});\n  favorite = () => this.channel.push(\"favorite\", {});\n  unfavorite = () => this.channel.push(\"unfavorite\", {});\n\n  disconnect = () => {\n    if (this.channel) {\n      this.channel.socket.disconnect();\n    }\n  };\n}\n","const PHYSICS_CONSTANTS = require(\"aframe-physics-system/src/constants\"),\n  SHAPE = PHYSICS_CONSTANTS.SHAPE,\n  FIT = PHYSICS_CONSTANTS.FIT;\n\nfunction exceedsDensityThreshold(count, subtree) {\n  const bounds = subtree.boundingData;\n  const triangleThreshold = 1000;\n  const minimumVolume = 0.1;\n  const minimumTriangles = 100;\n  const dx = bounds[3] - bounds[0];\n  const dy = bounds[4] - bounds[1];\n  const dz = bounds[5] - bounds[2];\n  const volume = dx * dy * dz;\n\n  if (volume < minimumVolume) {\n    return false;\n  }\n\n  if (count < minimumTriangles) {\n    return false;\n  }\n\n  return count / volume > triangleThreshold;\n}\n\nfunction isHighDensity(subtree) {\n  if (subtree.count) {\n    const result = exceedsDensityThreshold(subtree.count, subtree);\n    return result === true ? true : subtree.count;\n  } else {\n    const leftResult = isHighDensity(subtree.left);\n    if (leftResult === true) return true;\n    const rightResult = isHighDensity(subtree.right);\n    if (rightResult === true) return true;\n\n    const count = leftResult + rightResult;\n    const result = exceedsDensityThreshold(count, subtree);\n    return result === true ? true : count;\n  }\n}\n\nfunction isGeometryHighDensity(geo) {\n  const bvh = geo.boundsTree;\n  const roots = bvh._roots;\n  for (let i = 0; i < roots.length; ++i) {\n    return isHighDensity(roots[i]) === true;\n  }\n  return false;\n}\n\nexport const traverseMeshesAndAddShapes = (function() {\n  const shapePrefix = \"ammo-shape__\";\n  const shapes = [];\n  return function(el) {\n    const meshRoot = el.object3DMap.mesh;\n    while (shapes.length > 0) {\n      const { id, entity } = shapes.pop();\n      entity.removeAttribute(id);\n    }\n\n    console.group(\"traverseMeshesAndAddShapes\");\n\n    if (document.querySelector([\"[ammo-shape__trimesh]\", \"[ammo-shape__heightfield]\"])) {\n      console.log(\"heightfield or trimesh found on scene\");\n    } else {\n      console.log(\"collision not found in scene\");\n\n      let isHighDensity = false;\n      meshRoot.traverse(o => {\n        if (\n          o.isMesh &&\n          (!THREE.Sky || o.__proto__ != THREE.Sky.prototype) &&\n          !o.name.startsWith(\"Floor_Plan\") &&\n          !o.name.startsWith(\"Ground_Plane\") &&\n          o.geometry.boundsTree\n        ) {\n          if (isGeometryHighDensity(o.geometry)) {\n            isHighDensity = true;\n            return;\n          }\n        }\n      });\n\n      let navMesh = null;\n\n      if (isHighDensity) {\n        console.log(\"mesh contains high triangle density region\");\n        navMesh = document.querySelector(\"[nav-mesh]\");\n      }\n\n      if (navMesh) {\n        console.log(`mesh density exceeded, using floor plan only`);\n        navMesh.setAttribute(shapePrefix + \"floorPlan\", {\n          type: SHAPE.MESH,\n          margin: 0.01,\n          fit: FIT.ALL,\n          includeInvisible: true\n        });\n        shapes.push({ id: shapePrefix + \"floorPlan\", entity: navMesh });\n      } else if (!isHighDensity) {\n        el.setAttribute(shapePrefix + \"environment\", {\n          type: SHAPE.MESH,\n          margin: 0.01,\n          fit: FIT.ALL\n        });\n        shapes.push({ id: shapePrefix + \"environment\", entity: el });\n        console.log(\"adding mesh shape for all visible meshes\");\n      } else {\n        el.setAttribute(shapePrefix + \"defaultFloor\", {\n          type: SHAPE.BOX,\n          margin: 0.01,\n          halfExtents: { x: 4000, y: 0.5, z: 4000 },\n          offset: { x: 0, y: -0.5, z: 0 },\n          fit: FIT.MANUAL\n        });\n        shapes.push({ id: shapePrefix + \"defaultFloor\", entity: el });\n        console.log(\"adding default floor collision\");\n      }\n    }\n    console.groupEnd();\n  };\n})();\n","import { spawnChatMessage } from \"./react-components/chat-message\";\nimport { SOUND_QUACK, SOUND_SPECIAL_QUACK } from \"./systems/sound-effects-system\";\n\nconst DUCK_URL = \"https://asset-bundles-prod.reticulum.io/interactables/Ducky/DuckyMesh-438ff8e022.gltf\";\n\n// Handles user-entered messages\nexport default class MessageDispatch {\n  constructor(scene, entryManager, hubChannel, addToPresenceLog, remountUI, mediaSearchStore) {\n    this.scene = scene;\n    this.entryManager = entryManager;\n    this.hubChannel = hubChannel;\n    this.addToPresenceLog = addToPresenceLog;\n    this.remountUI = remountUI;\n    this.mediaSearchStore = mediaSearchStore;\n  }\n\n  log = body => {\n    this.addToPresenceLog({ type: \"log\", body });\n  };\n\n  dispatch = message => {\n    if (message.startsWith(\"/\")) {\n      const commandParts = message.substring(1).split(\" \");\n      this.dispatchCommand(commandParts[0], ...commandParts.slice(1));\n      document.activeElement.blur(); // Commands should blur\n    } else {\n      this.hubChannel.sendMessage(message);\n    }\n  };\n\n  dispatchCommand = (command, ...args) => {\n    const entered = this.scene.is(\"entered\");\n\n    if (!entered) {\n      this.addToPresenceLog({ type: \"log\", body: \"You must enter the room to use this command.\" });\n      return;\n    }\n\n    const playerRig = document.querySelector(\"#player-rig\");\n    const scales = [0.0625, 0.125, 0.25, 0.5, 1.0, 1.5, 3, 5, 7.5, 12.5];\n    const curScale = playerRig.object3D.scale;\n    let err;\n    let physicsSystem;\n    const captureSystem = this.scene.systems[\"capture-system\"];\n\n    switch (command) {\n      case \"fly\":\n        if (playerRig.getAttribute(\"character-controller\").fly !== true) {\n          playerRig.setAttribute(\"character-controller\", \"fly\", true);\n          this.addToPresenceLog({ type: \"log\", body: \"Fly mode enabled.\" });\n        } else {\n          playerRig.setAttribute(\"character-controller\", \"fly\", false);\n          this.addToPresenceLog({ type: \"log\", body: \"Fly mode disabled.\" });\n        }\n        break;\n      case \"grow\":\n        for (let i = 0; i < scales.length; i++) {\n          if (scales[i] > curScale.x) {\n            playerRig.object3D.scale.set(scales[i], scales[i], scales[i]);\n            playerRig.object3D.matrixNeedsUpdate = true;\n            break;\n          }\n        }\n\n        break;\n      case \"shrink\":\n        for (let i = scales.length - 1; i >= 0; i--) {\n          if (curScale.x > scales[i]) {\n            playerRig.object3D.scale.set(scales[i], scales[i], scales[i]);\n            break;\n          }\n        }\n\n        break;\n      case \"leave\":\n        this.entryManager.exitScene();\n        this.remountUI({ roomUnavailableReason: \"left\" });\n        break;\n      case \"duck\":\n        spawnChatMessage(DUCK_URL);\n        if (Math.random() < 0.01) {\n          this.scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SPECIAL_QUACK);\n        } else {\n          this.scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_QUACK);\n        }\n        break;\n      case \"debug\":\n        physicsSystem = document.querySelector(\"a-scene\").systems.physics;\n        physicsSystem.setDebug(!physicsSystem.debug);\n        break;\n      case \"vrstats\":\n        document.getElementById(\"stats\").components[\"stats-plus\"].toggleVRStats();\n        break;\n      case \"scene\":\n        if (args[0]) {\n          err = this.hubChannel.updateScene(args[0]);\n\n          if (err === \"unauthorized\") {\n            this.addToPresenceLog({ type: \"log\", body: \"You do not have permission to change the scene.\" });\n          }\n        } else {\n          this.mediaSearchStore.sourceNavigateWithNoNav(\"scenes\");\n        }\n\n        break;\n      case \"rename\":\n        err = this.hubChannel.rename(args.join(\" \"));\n        if (err === \"unauthorized\") {\n          this.addToPresenceLog({ type: \"log\", body: \"You do not have permission to rename this room.\" });\n        }\n        break;\n      case \"capture\":\n        if (!captureSystem.available()) {\n          this.log(\"Capture unavailable.\");\n          break;\n        }\n        if (args[0] === \"stop\") {\n          if (captureSystem.started()) {\n            captureSystem.stop();\n            this.log(\"Capture stopped.\");\n          } else {\n            this.log(\"Capture already stopped.\");\n          }\n        } else {\n          if (captureSystem.started()) {\n            this.log(\"Capture already running.\");\n          } else {\n            captureSystem.start();\n            this.log(\"Capture started.\");\n          }\n        }\n        break;\n    }\n  };\n}\n","import qsTruthy from \"./utils/qs_truthy\";\nimport nextTick from \"./utils/next-tick\";\nimport pinnedEntityToGltf from \"./utils/pinned-entity-to-gltf\";\n\nconst isBotMode = qsTruthy(\"bot\");\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isDebug = qsTruthy(\"debug\");\nconst qs = new URLSearchParams(location.search);\n\nimport { addMedia, getPromotionTokenForFile } from \"./utils/media-utils\";\nimport {\n  isIn2DInterstitial,\n  handleExitTo2DInterstitial,\n  exit2DInterstitialAndEnterVR,\n  forceExitFrom2DInterstitial\n} from \"./utils/vr-interstitial\";\nimport { ObjectContentOrigins } from \"./object-types\";\nimport { getAvatarSrc, getAvatarType } from \"./utils/avatar-utils\";\nimport { pushHistoryState } from \"./utils/history\";\nimport { SOUND_ENTER_SCENE } from \"./systems/sound-effects-system\";\n\nconst isIOS = AFRAME.utils.device.isIOS();\n\nexport default class SceneEntryManager {\n  constructor(hubChannel, authChannel, availableVREntryTypes, history) {\n    this.hubChannel = hubChannel;\n    this.authChannel = authChannel;\n    this.availableVREntryTypes = availableVREntryTypes;\n    this.store = window.APP.store;\n    this.mediaSearchStore = window.APP.mediaSearchStore;\n    this.scene = document.querySelector(\"a-scene\");\n    this.cursorController = document.querySelector(\"#cursor-controller\");\n    this.playerRig = document.querySelector(\"#player-rig\");\n    this._entered = false;\n    this.performConditionalSignIn = () => {};\n    this.history = history;\n  }\n\n  init = () => {\n    this.whenSceneLoaded(() => {\n      this.cursorController.components[\"cursor-controller\"].enabled = false;\n    });\n  };\n\n  hasEntered = () => {\n    return this._entered;\n  };\n\n  enterScene = async (mediaStream, enterInVR, muteOnEntry) => {\n    const playerCamera = document.querySelector(\"#player-camera\");\n    playerCamera.removeAttribute(\"scene-preview-camera\");\n\n    if (isDebug) {\n      NAF.connection.adapter.session.options.verbose = true;\n    }\n\n    if (enterInVR) {\n      // This specific scene state var is used to check if the user went through the\n      // entry flow and chose VR entry, and is used to preempt VR mode on refreshes.\n      this.scene.addState(\"vr-entered\");\n\n      // HACK - A-Frame calls getVRDisplays at module load, we want to do it here to\n      // force gamepads to become live.\n      navigator.getVRDisplays();\n\n      exit2DInterstitialAndEnterVR(true);\n    }\n\n    if (isMobile || qsTruthy(\"mobile\")) {\n      this.playerRig.setAttribute(\"virtual-gamepad-controls\", {});\n    }\n\n    this._setupPlayerRig();\n    this._setupBlocking();\n    this._setupKicking();\n    this._setupMedia(mediaStream);\n    this._setupCamera();\n\n    if (qsTruthy(\"offline\")) return;\n\n    this._spawnAvatar();\n\n    this.scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_ENTER_SCENE);\n\n    if (isBotMode) {\n      this._runBot(mediaStream);\n      return;\n    }\n\n    if (mediaStream) {\n      NAF.connection.adapter.setLocalMediaStream(mediaStream);\n    }\n\n    this.scene.classList.remove(\"hand-cursor\");\n    this.scene.classList.add(\"no-cursor\");\n\n    this.cursorController.components[\"cursor-controller\"].enabled = true;\n    this._entered = true;\n\n    // Delay sending entry event telemetry until VR display is presenting.\n    (async () => {\n      while (enterInVR && !(await navigator.getVRDisplays()).find(d => d.isPresenting)) {\n        await nextTick();\n      }\n\n      this.hubChannel.sendEntryEvent().then(() => {\n        this.store.update({ activity: { lastEnteredAt: new Date().toISOString() } });\n      });\n    })();\n\n    // Bump stored entry count after 30s\n    setTimeout(() => this.store.bumpEntryCount(), 30000);\n\n    this.scene.addState(\"entered\");\n\n    if (muteOnEntry) {\n      this.scene.emit(\"action_mute\");\n    }\n  };\n\n  whenSceneLoaded = callback => {\n    if (this.scene.hasLoaded) {\n      callback();\n    } else {\n      this.scene.addEventListener(\"loaded\", callback);\n    }\n  };\n\n  enterSceneWhenLoaded = (mediaStream, enterInVR) => {\n    this.whenSceneLoaded(() => this.enterScene(mediaStream, enterInVR));\n  };\n\n  exitScene = () => {\n    if (NAF.connection.adapter && NAF.connection.adapter.localMediaStream) {\n      NAF.connection.adapter.localMediaStream.getTracks().forEach(t => t.stop());\n    }\n    if (this.hubChannel) {\n      this.hubChannel.disconnect();\n    }\n    if (this.scene.renderer) {\n      this.scene.renderer.setAnimationLoop(null); // Stop animation loop, TODO A-Frame should do this\n    }\n    document.body.removeChild(this.scene);\n  };\n\n  _setupPlayerRig = () => {\n    this._setPlayerInfoFromProfile();\n    this.store.addEventListener(\"statechanged\", this._setPlayerInfoFromProfile);\n\n    const avatarScale = parseInt(qs.get(\"avatar_scale\"), 10);\n    if (avatarScale) {\n      this.playerRig.setAttribute(\"scale\", { x: avatarScale, y: avatarScale, z: avatarScale });\n    }\n  };\n\n  _setPlayerInfoFromProfile = async () => {\n    const avatarId = this.store.state.profile.avatarId;\n    const avatarSrc = await getAvatarSrc(avatarId);\n\n    this.playerRig.setAttribute(\"player-info\", { avatarSrc, avatarType: getAvatarType(avatarId) });\n  };\n\n  _setupKicking = () => {\n    // This event is only received by the kicker\n    document.body.addEventListener(\"kicked\", ({ detail }) => {\n      const { clientId: kickedClientId } = detail;\n      const { entities } = NAF.connection.entities;\n      for (const id in entities) {\n        const entity = entities[id];\n        if (NAF.utils.getCreator(entity) !== kickedClientId) continue;\n\n        if (entity.components.networked.data.persistent) {\n          NAF.utils.takeOwnership(entity);\n          this._unpinElement(entity);\n          entity.parentNode.removeChild(entity);\n        } else {\n          NAF.entities.removeEntity(id);\n        }\n      }\n    });\n  };\n\n  _setupBlocking = () => {\n    document.body.addEventListener(\"blocked\", ev => {\n      NAF.connection.entities.removeEntitiesOfClient(ev.detail.clientId);\n    });\n\n    document.body.addEventListener(\"unblocked\", ev => {\n      NAF.connection.entities.completeSync(ev.detail.clientId, true);\n    });\n  };\n\n  _pinElement = async el => {\n    const { networkId } = el.components.networked.data;\n\n    const { fileId, src } = el.components[\"media-loader\"].data;\n\n    let fileAccessToken, promotionToken;\n    if (fileId) {\n      fileAccessToken = new URL(src).searchParams.get(\"token\");\n      const storedPromotionToken = getPromotionTokenForFile(fileId);\n      if (storedPromotionToken) {\n        promotionToken = storedPromotionToken.promotionToken;\n      }\n    }\n\n    const gltfNode = pinnedEntityToGltf(el);\n    if (!gltfNode) return;\n    el.setAttribute(\"networked\", { persistent: true });\n    el.setAttribute(\"media-loader\", { fileIsOwned: true });\n\n    try {\n      await this.hubChannel.pin(networkId, gltfNode, fileId, fileAccessToken, promotionToken);\n      this.store.update({ activity: { hasPinned: true } });\n    } catch (e) {\n      if (e.reason === \"invalid_token\") {\n        await this.authChannel.signOut(this.hubChannel);\n        this._signInAndPinOrUnpinElement(el);\n      } else {\n        console.warn(\"Pin failed for unknown reason\", e);\n      }\n    }\n  };\n\n  _signInAndPinOrUnpinElement = (el, pin) => {\n    const action = pin ? () => this._pinElement(el) : async () => await this._unpinElement(el);\n\n    this.performConditionalSignIn(() => this.hubChannel.signedIn, action, pin ? \"pin\" : \"unpin\", () => {\n      // UI pins/un-pins the entity optimistically, so we undo that here.\n      // Note we have to disable the sign in flow here otherwise this will recurse.\n      this._disableSignInOnPinAction = true;\n      el.setAttribute(\"pinnable\", \"pinned\", !pin);\n      this._disableSignInOnPinAction = false;\n    });\n  };\n\n  _unpinElement = el => {\n    const components = el.components;\n    const networked = components.networked;\n\n    if (!networked || !networked.data || !NAF.utils.isMine(el)) return;\n\n    const networkId = components.networked.data.networkId;\n    el.setAttribute(\"networked\", { persistent: false });\n\n    const mediaLoader = components[\"media-loader\"];\n    const fileId = mediaLoader.data && mediaLoader.data.fileId;\n\n    this.hubChannel.unpin(networkId, fileId);\n  };\n\n  _setupMedia = mediaStream => {\n    const offset = { x: 0, y: 0, z: -1.5 };\n    const spawnMediaInfrontOfPlayer = (src, contentOrigin) => {\n      const { entity, orientation } = addMedia(\n        src,\n        \"#interactable-media\",\n        contentOrigin,\n        null,\n        !(src instanceof MediaStream),\n        true\n      );\n      orientation.then(or => {\n        entity.setAttribute(\"offset-relative-to\", {\n          target: \"#player-camera\",\n          offset,\n          orientation: or\n        });\n      });\n\n      return entity;\n    };\n\n    this.scene.addEventListener(\"add_media\", e => {\n      const contentOrigin = e.detail instanceof File ? ObjectContentOrigins.FILE : ObjectContentOrigins.URL;\n\n      spawnMediaInfrontOfPlayer(e.detail, contentOrigin);\n    });\n\n    this.scene.addEventListener(\"pinned\", e => {\n      if (this._disableSignInOnPinAction) return;\n      this._signInAndPinOrUnpinElement(e.detail.el, true);\n    });\n\n    this.scene.addEventListener(\"unpinned\", e => {\n      if (this._disableSignInOnPinAction) return;\n      this._signInAndPinOrUnpinElement(e.detail.el, false);\n    });\n\n    this.scene.addEventListener(\"object_spawned\", e => {\n      this.hubChannel.sendObjectSpawnedEvent(e.detail.objectType);\n    });\n\n    this.scene.addEventListener(\"action_spawn\", () => {\n      handleExitTo2DInterstitial(false, () => window.APP.mediaSearchStore.pushExitMediaBrowserHistory());\n      window.APP.mediaSearchStore.sourceNavigateToDefaultSource();\n    });\n\n    this.scene.addEventListener(\"action_invite\", () => {\n      handleExitTo2DInterstitial(false, () => this.history.goBack());\n      pushHistoryState(this.history, \"overlay\", \"invite\");\n    });\n\n    this.scene.addEventListener(\"action_kick_client\", ({ detail: { clientId } }) => {\n      this.performConditionalSignIn(\n        () => this.hubChannel.can(\"kick_users\"),\n        async () => await window.APP.hubChannel.kick(clientId),\n        \"kick-user\"\n      );\n    });\n\n    this.scene.addEventListener(\"action_mute_client\", ({ detail: { clientId } }) => {\n      this.performConditionalSignIn(\n        () => this.hubChannel.can(\"mute_users\"),\n        () => window.APP.hubChannel.mute(clientId),\n        \"mute-user\"\n      );\n    });\n\n    this.scene.addEventListener(\"action_vr_notice_closed\", () => forceExitFrom2DInterstitial());\n\n    document.addEventListener(\"paste\", e => {\n      if (\n        (e.target.matches(\"input, textarea\") || e.target.contentEditable === \"true\") &&\n        document.activeElement === e.target\n      )\n        return;\n\n      // Never paste into scene if dialog is open\n      const uiRoot = document.querySelector(\".ui-root\");\n      if (uiRoot && uiRoot.classList.contains(\"in-modal-or-overlay\")) return;\n\n      const url = e.clipboardData.getData(\"text\");\n      const files = e.clipboardData.files && e.clipboardData.files;\n      if (url) {\n        spawnMediaInfrontOfPlayer(url, ObjectContentOrigins.URL);\n      } else {\n        for (const file of files) {\n          spawnMediaInfrontOfPlayer(file, ObjectContentOrigins.CLIPBOARD);\n        }\n      }\n    });\n\n    document.addEventListener(\"dragover\", e => e.preventDefault());\n\n    document.addEventListener(\"drop\", e => {\n      e.preventDefault();\n      const url = e.dataTransfer.getData(\"url\");\n      const files = e.dataTransfer.files;\n      if (url) {\n        spawnMediaInfrontOfPlayer(url, ObjectContentOrigins.URL);\n      } else {\n        for (const file of files) {\n          spawnMediaInfrontOfPlayer(file, ObjectContentOrigins.FILE);\n        }\n      }\n    });\n\n    let currentVideoShareEntity;\n    let isHandlingVideoShare = false;\n\n    const shareVideoMediaStream = async constraints => {\n      if (isHandlingVideoShare) return;\n      isHandlingVideoShare = true;\n\n      let newStream;\n\n      try {\n        newStream = await navigator.mediaDevices.getUserMedia(constraints);\n      } catch (e) {\n        isHandlingVideoShare = false;\n        this.scene.emit(\"share_video_failed\");\n        return;\n      }\n\n      const videoTracks = newStream ? newStream.getVideoTracks() : [];\n\n      if (videoTracks.length > 0) {\n        newStream.getVideoTracks().forEach(track => mediaStream.addTrack(track));\n        NAF.connection.adapter.setLocalMediaStream(mediaStream);\n        currentVideoShareEntity = spawnMediaInfrontOfPlayer(mediaStream, undefined);\n\n        // Wire up custom removal event which will stop the stream.\n        currentVideoShareEntity.setAttribute(\"emit-scene-event-on-remove\", \"event:action_end_video_sharing\");\n      }\n\n      this.scene.emit(\"share_video_enabled\", { source: constraints.video.mediaSource });\n      this.scene.addState(\"sharing_video\");\n      isHandlingVideoShare = false;\n    };\n\n    this.scene.addEventListener(\"action_share_camera\", () => {\n      shareVideoMediaStream({\n        video: {\n          mediaSource: \"camera\",\n          width: isIOS ? { max: 1280 } : { max: 1280, ideal: 720 },\n          frameRate: 30\n        }\n      });\n    });\n\n    this.scene.addEventListener(\"action_share_window\", () => {\n      shareVideoMediaStream({\n        video: {\n          mediaSource: \"window\",\n          // Work around BMO 1449832 by calculating the width. This will break for multi monitors if you share anything\n          // other than your current monitor that has a different aspect ratio.\n          width: 720 * (screen.width / screen.height),\n          height: 720,\n          frameRate: 30\n        }\n      });\n    });\n\n    this.scene.addEventListener(\"action_share_screen\", () => {\n      shareVideoMediaStream({\n        video: {\n          mediaSource: \"screen\",\n          // Work around BMO 1449832 by calculating the width. This will break for multi monitors if you share anything\n          // other than your current monitor that has a different aspect ratio.\n          width: 720 * (screen.width / screen.height),\n          height: 720,\n          frameRate: 30\n        }\n      });\n    });\n\n    this.scene.addEventListener(\"action_end_video_sharing\", () => {\n      if (isHandlingVideoShare) return;\n      isHandlingVideoShare = true;\n\n      if (currentVideoShareEntity && currentVideoShareEntity.parentNode) {\n        NAF.utils.takeOwnership(currentVideoShareEntity);\n        currentVideoShareEntity.parentNode.removeChild(currentVideoShareEntity);\n      }\n\n      for (const track of mediaStream.getVideoTracks()) {\n        mediaStream.removeTrack(track);\n      }\n\n      NAF.connection.adapter.setLocalMediaStream(mediaStream);\n      currentVideoShareEntity = null;\n\n      this.scene.emit(\"share_video_disabled\");\n      this.scene.removeState(\"sharing_video\");\n      isHandlingVideoShare = false;\n    });\n\n    this.scene.addEventListener(\"action_selected_media_result_entry\", e => {\n      // TODO spawn in space when no rights\n      const entry = e.detail;\n      if ([\"avatar\", \"avatar_listing\"].includes(entry.type)) return;\n      if ((entry.type === \"scene_listing\" || entry.type === \"scene\") && this.hubChannel.can(\"update_hub\")) return;\n\n      // If user has HMD lifted up or gone through interstitial, delay spawning for now. eventually show a modal\n      const spawnDelay = isIn2DInterstitial() ? 3000 : 0;\n\n      setTimeout(() => {\n        spawnMediaInfrontOfPlayer(entry.url, ObjectContentOrigins.URL);\n      }, spawnDelay);\n\n      exit2DInterstitialAndEnterVR();\n    });\n\n    this.mediaSearchStore.addEventListener(\"media-exit\", () => {\n      exit2DInterstitialAndEnterVR();\n    });\n  };\n\n  _setupCamera = () => {\n    this.scene.addEventListener(\"action_toggle_camera\", () => {\n      const myCamera = this.scene.systems[\"camera-tools\"].getMyCamera();\n\n      if (myCamera) {\n        myCamera.parentNode.removeChild(myCamera);\n        this.scene.removeState(\"camera\");\n      } else {\n        const entity = document.createElement(\"a-entity\");\n        entity.setAttribute(\"networked\", { template: \"#interactable-camera\" });\n        entity.setAttribute(\"offset-relative-to\", {\n          target: \"#player-camera\",\n          offset: { x: 0, y: 0, z: -1.5 }\n        });\n        this.scene.appendChild(entity);\n        this.scene.addState(\"camera\");\n      }\n\n      // Need to wait a frame so camera is registered with system.\n      setTimeout(() => this.scene.emit(\"camera_toggled\"));\n    });\n\n    this.scene.addEventListener(\"photo_taken\", e => {\n      this.hubChannel.sendMessage({ src: e.detail }, \"photo\");\n    });\n  };\n\n  _spawnAvatar = () => {\n    this.playerRig.setAttribute(\"networked\", \"template: #remote-avatar-template; attachTemplateToLocal: false;\");\n    this.playerRig.setAttribute(\"networked-avatar\", \"\");\n    this.playerRig.emit(\"entered\");\n  };\n\n  _runBot = async mediaStream => {\n    const audioEl = document.createElement(\"audio\");\n    let audioInput;\n    let dataInput;\n\n    // Wait for startup to render form\n    do {\n      audioInput = document.querySelector(\"#bot-audio-input\");\n      dataInput = document.querySelector(\"#bot-data-input\");\n      await nextTick();\n    } while (!audioInput || !dataInput);\n\n    const getAudio = () => {\n      audioEl.loop = true;\n      audioEl.muted = true;\n      audioEl.crossorigin = \"anonymous\";\n      audioEl.src = URL.createObjectURL(audioInput.files[0]);\n      document.body.appendChild(audioEl);\n    };\n\n    if (audioInput.files && audioInput.files.length > 0) {\n      getAudio();\n    } else {\n      audioInput.onchange = getAudio;\n    }\n\n    const camera = document.querySelector(\"#player-camera\");\n    const leftController = document.querySelector(\"#player-left-controller\");\n    const rightController = document.querySelector(\"#player-right-controller\");\n    const getRecording = () => {\n      fetch(URL.createObjectURL(dataInput.files[0]))\n        .then(resp => resp.json())\n        .then(recording => {\n          camera.setAttribute(\"replay\", \"\");\n          camera.components[\"replay\"].poses = recording.camera.poses;\n\n          leftController.setAttribute(\"replay\", \"\");\n          leftController.components[\"replay\"].poses = recording.left.poses;\n          leftController.removeAttribute(\"visibility-by-path\");\n          leftController.removeAttribute(\"track-pose\");\n          leftController.setAttribute(\"visible\", true);\n\n          rightController.setAttribute(\"replay\", \"\");\n          rightController.components[\"replay\"].poses = recording.right.poses;\n          rightController.removeAttribute(\"visibility-by-path\");\n          rightController.removeAttribute(\"track-pose\");\n          rightController.setAttribute(\"visible\", true);\n        });\n    };\n\n    if (dataInput.files && dataInput.files.length > 0) {\n      getRecording();\n    } else {\n      dataInput.onchange = getRecording;\n    }\n\n    await new Promise(resolve => audioEl.addEventListener(\"canplay\", resolve));\n    mediaStream.addTrack(\n      audioEl.captureStream\n        ? audioEl.captureStream().getAudioTracks()[0]\n        : audioEl.mozCaptureStream\n          ? audioEl.mozCaptureStream().getAudioTracks()[0]\n          : null\n    );\n    NAF.connection.adapter.setLocalMediaStream(mediaStream);\n    audioEl.play();\n  };\n}\n","export default function pinnedEntityToGltf(el) {\n  if (!NAF.utils.isMine(el)) return;\n\n  // Construct a GLTF node from this entity\n  const object3D = el.object3D;\n  const components = el.components;\n  const networkId = components.networked.data.networkId;\n\n  const gltfComponents = {};\n  // TODO: Move to MOZ_hubs_components and include version number. Requires migration of existing room objects.\n  // Please do this before making a breaking change to the data stored here.\n  const gltfNode = { name: networkId, extensions: { HUBS_components: gltfComponents } };\n\n  // Adapted from three.js GLTFExporter\n  const equalArray = (x, y) => x.length === y.length && x.every((v, i) => v === y[i]);\n  const rotation = object3D.quaternion.toArray();\n  const position = object3D.position.toArray();\n  const scale = object3D.scale.toArray();\n\n  if (!equalArray(rotation, [0, 0, 0, 1])) gltfNode.rotation = rotation;\n  if (!equalArray(position, [0, 0, 0])) gltfNode.translation = position;\n  if (!equalArray(scale, [1, 1, 1])) gltfNode.scale = scale;\n\n  if (components[\"media-loader\"]) {\n    const mediaSrc = components[\"media-loader\"].data.src;\n    const mediaContentSubtype = components[\"media-loader\"].data.contentSubtype;\n\n    if (mediaSrc.startsWith(\"hubs://\") && mediaSrc.endsWith(\"/video\")) {\n      // Do not persist hubs client video urls\n      return null;\n    }\n\n    gltfComponents.media = { src: mediaSrc, contentSubtype: mediaContentSubtype, id: networkId };\n\n    if (components[\"media-pager\"]) {\n      gltfComponents.media.pageIndex = components[\"media-pager\"].data.index;\n    }\n\n    if (components[\"media-video\"] && components[\"media-video\"].data.videoPaused) {\n      gltfComponents.media.paused = true;\n      gltfComponents.media.time = components[\"media-video\"].data.time;\n    }\n  }\n\n  gltfComponents.pinnable = { pinned: true };\n\n  return gltfNode;\n}\n","import nextTick from \"./utils/next-tick.js\";\nconst INIT_TIMEOUT_MS = 5000;\n\n// Manages web push subscriptions\n//\nfunction urlBase64ToUint8Array(base64String) {\n  const padding = \"=\".repeat((4 - (base64String.length % 4)) % 4);\n  const base64 = (base64String + padding).replace(/-/g, \"+\").replace(/_/g, \"/\");\n\n  const rawData = window.atob(base64);\n  const outputArray = new Uint8Array(rawData.length);\n\n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i);\n  }\n  return outputArray;\n}\n\nexport default class Subscriptions {\n  constructor(hubId) {\n    this.hubId = hubId;\n  }\n\n  setHubChannel = hubChannel => {\n    this.hubChannel = hubChannel;\n  };\n\n  setRegistration = registration => {\n    this.registration = registration;\n  };\n\n  setRegistrationFailed = () => {\n    this.registration = null;\n  };\n\n  setVapidPublicKey = vapidPublicKey => {\n    this.vapidPublicKey = vapidPublicKey;\n  };\n\n  setSubscribed = isSubscribed => {\n    this._isSubscribed = isSubscribed;\n  };\n\n  isSubscribed = () => {\n    return this._isSubscribed;\n  };\n\n  getCurrentEndpoint = async () => {\n    if (!navigator.serviceWorker) return null;\n    const startedAt = performance.now();\n\n    // registration becomes null if failed, non null if registered\n    while (this.registration === undefined && performance.now() - startedAt < INIT_TIMEOUT_MS) await nextTick();\n    if (performance.now() - startedAt >= INIT_TIMEOUT_MS) console.warn(\"Service worker registration timed out.\");\n    if (!this.registration || !this.registration.pushManager) return null;\n\n    while (this.vapidPublicKey === undefined) await nextTick();\n    if (this.vapidPublicKey === null) return null;\n\n    try {\n      const convertedVapidKey = urlBase64ToUint8Array(this.vapidPublicKey);\n\n      if (\n        (await this.registration.pushManager.permissionState({\n          userVisibleOnly: true,\n          applicationServerKey: convertedVapidKey\n        })) !== \"granted\"\n      )\n        return null;\n    } catch (e) {\n      return null; // Chrome can throw here complaining about userVisible if push is not right\n    }\n    const sub = await this.registration.pushManager.getSubscription();\n    if (!sub) return null;\n\n    return sub.endpoint;\n  };\n\n  toggle = async () => {\n    if (!this.registration) return;\n\n    if (this._isSubscribed) {\n      const pushSubscription = await this.registration.pushManager.getSubscription();\n      const res = await this.hubChannel.unsubscribe(pushSubscription);\n\n      if (res && res.has_remaining_subscriptions === false) {\n        pushSubscription.unsubscribe();\n      }\n    } else {\n      let pushSubscription = await this.registration.pushManager.getSubscription();\n\n      if (!pushSubscription) {\n        const convertedVapidKey = urlBase64ToUint8Array(this.vapidPublicKey);\n\n        pushSubscription = await this.registration.pushManager.subscribe({\n          userVisibleOnly: true,\n          applicationServerKey: convertedVapidKey\n        });\n      }\n\n      this.hubChannel.subscribe(pushSubscription);\n    }\n\n    this._isSubscribed = !this._isSubscribed;\n  };\n}\n","import { forEachMaterial } from \"../utils/material-utils\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\nconst invaderPos = new AFRAME.THREE.Vector3();\nconst bubblePos = new AFRAME.THREE.Vector3();\nconst isDebug = qsTruthy(\"debug\");\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\n/**\n * Updates invaders every tick, doing one per frame on mobile VR.\n * testing multiline things\n * @namespace avatar/personal-space-bubble\n * @system personal-space-bubble\n */\nAFRAME.registerSystem(\"personal-space-bubble\", {\n  schema: {\n    debug: { default: false },\n    enabled: { default: true }\n  },\n\n  init() {\n    this.invaders = [];\n    this.bubbles = [];\n    this.tickCount = 0;\n    this._updateInvaders = this._updateInvaders.bind(this);\n  },\n\n  registerBubble(bubble) {\n    this.bubbles.push(bubble);\n  },\n\n  unregisterBubble(bubble) {\n    const index = this.bubbles.indexOf(bubble);\n\n    if (index !== -1) {\n      this.bubbles.splice(index, 1);\n    }\n  },\n\n  registerInvader(invader) {\n    NAF.utils.getNetworkedEntity(invader.el).then(networkedEl => {\n      const owner = NAF.utils.getNetworkOwner(networkedEl);\n\n      if (owner !== NAF.clientId) {\n        this.invaders.push(invader);\n      }\n    });\n  },\n\n  unregisterInvader(invader) {\n    const index = this.invaders.indexOf(invader);\n\n    if (index !== -1) {\n      this.invaders.splice(index, 1);\n    }\n  },\n\n  update() {\n    for (let i = 0; i < this.bubbles.length; i++) {\n      this.bubbles[i].updateDebug();\n    }\n\n    for (let i = 0; i < this.invaders.length; i++) {\n      this.invaders[i].updateDebug();\n      if (!this.data.enabled) {\n        this.invaders[i].setInvading(false);\n      }\n    }\n\n    if (this.data.enabled) {\n      this.el.addState(\"spacebubble\");\n    } else {\n      this.el.removeState(\"spacebubble\");\n    }\n  },\n\n  tick() {\n    this._updateInvaders();\n    this.tickCount++;\n  },\n\n  _updateInvaders: (function() {\n    const tempInvasionFlags = [];\n\n    const setInvaderFlag = (i, invaders, bubble) => {\n      // Hide the invader if inside the bubble\n      const invader = invaders[i];\n      invaderPos.setFromMatrixPosition(invader.el.object3D.matrixWorld);\n\n      const distanceSquared = bubblePos.distanceToSquared(invaderPos);\n      const radiusSum = bubble.data.radius + invader.data.radius;\n\n      if (distanceSquared < radiusSum * radiusSum) {\n        tempInvasionFlags[i] = true;\n      }\n    };\n\n    const flushInvadingFlagsForIndex = (i, invaders) => {\n      if (invaders[i].invading !== tempInvasionFlags[i]) {\n        invaders[i].setInvading(tempInvasionFlags[i]);\n      }\n    };\n\n    return function() {\n      if (!this.data.enabled) return;\n      if (this.invaders.length === 0) return;\n\n      tempInvasionFlags.length = 0;\n\n      // precondition for this stuff -- the bubbles and invaders need updated world matrices.\n      // right now this is satisfied because we update the world matrices in the character controller\n      for (let i = 0; i < this.invaders.length; i++) {\n        this.invaders[i].el.object3D.updateMatrices(); // We read matrixWorld below, update matrices here\n        tempInvasionFlags[i] = false;\n      }\n\n      // Loop through all of the space bubbles (usually one)\n      for (let i = 0; i < this.bubbles.length; i++) {\n        const bubble = this.bubbles[i];\n\n        bubble.el.object3D.updateMatrices();\n        bubblePos.setFromMatrixPosition(bubble.el.object3D.matrixWorld);\n\n        if (!isMobileVR) {\n          for (let j = 0; j < this.invaders.length; j++) {\n            setInvaderFlag(j, this.invaders, bubble);\n          }\n        } else {\n          // Optimization: update one invader per frame on mobile VR\n          setInvaderFlag(this.tickCount % this.invaders.length, this.invaders, bubble);\n        }\n      }\n\n      if (!isMobileVR) {\n        for (let i = 0; i < this.invaders.length; i++) {\n          flushInvadingFlagsForIndex(i, this.invaders);\n        }\n      } else {\n        flushInvadingFlagsForIndex(this.tickCount % this.invaders.length, this.invaders);\n      }\n    };\n  })()\n});\n\nfunction createSphereGizmo(radius) {\n  const geometry = new THREE.SphereBufferGeometry(radius, 10, 10);\n  const wireframe = new THREE.WireframeGeometry(geometry);\n  const line = new THREE.LineSegments(wireframe);\n  line.material.opacity = 0.5;\n  line.material.transparent = true;\n  return line;\n}\n\n// TODO: we need to come up with a more generic way of doing this as this is very specific to our avatars.\n/**\n * Specifies a mesh associated with an invader.\n * @namespace avatar/personal-space-bubble\n * @component space-invader-mesh\n */\nAFRAME.registerComponent(\"space-invader-mesh\", {\n  schema: {\n    meshName: { type: \"string\" }\n  },\n  update() {\n    this.targetMesh = this.el.object3D.getObjectByName(this.data.meshName);\n  }\n});\n\nfunction findInvaderMesh(entity) {\n  while (entity && !(entity.components && entity.components[\"space-invader-mesh\"])) {\n    entity = entity.parentNode;\n  }\n  return entity && entity.components[\"space-invader-mesh\"].targetMesh;\n}\n\nconst DEBUG_OBJ = \"psb-debug\";\n\n/**\n * Represents an entity that can invade a personal space bubble\n * @namespace avatar/personal-space-bubble\n * @component personal-space-invader\n */\nAFRAME.registerComponent(\"personal-space-invader\", {\n  schema: {\n    radius: { type: \"number\", default: 0.1 },\n    useMaterial: { default: false },\n    debug: { default: false },\n    invadingOpacity: { default: 0.3 }\n  },\n\n  init() {\n    const system = this.el.sceneEl.systems[\"personal-space-bubble\"];\n    system.registerInvader(this);\n    if (this.data.useMaterial) {\n      const mesh = findInvaderMesh(this.el);\n      if (mesh) {\n        this.targetMesh = mesh;\n      }\n    }\n    this.invading = false;\n  },\n\n  update() {\n    this.radiusSquared = this.data.radius * this.data.radius;\n    this.updateDebug();\n  },\n\n  updateDebug() {\n    const system = this.el.sceneEl.systems[\"personal-space-bubble\"];\n    if (system.data.debug || this.data.debug) {\n      !this.el.object3DMap[DEBUG_OBJ] && this.el.setObject3D(DEBUG_OBJ, createSphereGizmo(this.data.radius));\n    } else if (this.el.object3DMap[DEBUG_OBJ]) {\n      this.el.removeObject3D(DEBUG_OBJ);\n    }\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"personal-space-bubble\"].unregisterInvader(this);\n  },\n\n  setInvading(invading) {\n    if (this.invading === invading) return;\n\n    if (this.targetMesh && this.targetMesh.material) {\n      forEachMaterial(this.targetMesh, material => {\n        material.opacity = invading ? this.data.invadingOpacity : 1;\n        material.transparent = invading;\n      });\n    } else {\n      this.el.object3D.visible = !invading;\n    }\n    this.invading = invading;\n  }\n});\n\n/**\n * Represents a personal space bubble on an entity.\n * @namespace avatar/personal-space-bubble\n * @component personal-space-bubble\n */\nAFRAME.registerComponent(\"personal-space-bubble\", {\n  schema: {\n    radius: { type: \"number\", default: 0.8 },\n    debug: { default: false }\n  },\n  init() {\n    this.system.registerBubble(this);\n  },\n\n  update() {\n    this.radiusSquared = this.data.radius * this.data.radius;\n    this.updateDebug();\n  },\n\n  updateDebug() {\n    if (!isDebug) return;\n\n    if (this.system.data.debug || this.data.debug) {\n      !this.el.object3DMap[DEBUG_OBJ] && this.el.setObject3D(DEBUG_OBJ, createSphereGizmo(this.data.radius));\n    } else if (this.el.object3DMap[DEBUG_OBJ]) {\n      this.el.removeObject3D(DEBUG_OBJ);\n    }\n  },\n\n  remove() {\n    this.system.unregisterBubble(this);\n  }\n});\n","import { paths } from \"../paths\";\n\n// TODO: Where do these values (500, 10, 2) come from?\nconst modeMod = {\n  [WheelEvent.DOM_DELTA_PIXEL]: 500,\n  [WheelEvent.DOM_DELTA_LINE]: 10,\n  [WheelEvent.DOM_DELTA_PAGE]: 2\n};\n\nconst isInModal = (() => {\n  let uiRoot = null;\n\n  return function() {\n    if (!uiRoot) {\n      uiRoot = document.querySelector(\".ui-root\");\n    }\n\n    return uiRoot && uiRoot.classList.contains(\"in-modal-or-overlay\");\n  };\n})();\n\nexport class MouseDevice {\n  constructor() {\n    this.events = [];\n    this.coords = [0, 0]; // normalized screenspace coordinates in [(-1, 1), (-1, 1)]\n    this.movementXY = [0, 0]; // deltas\n    this.buttonLeft = false;\n    this.buttonRight = false;\n    this.wheel = 0; // delta\n\n    const queueEvent = this.events.push.bind(this.events);\n    const canvas = document.querySelector(\"canvas\");\n    [\"mousedown\", \"wheel\"].map(x => canvas.addEventListener(x, queueEvent));\n    [\"mousemove\", \"mouseup\"].map(x => window.addEventListener(x, queueEvent));\n\n    document.addEventListener(\"wheel\", e => {\n      // Do not capture wheel events if they are being sent to an modal/overlay\n      if (!isInModal()) {\n        e.preventDefault();\n      }\n    });\n  }\n\n  process(event) {\n    if (event.type === \"wheel\") {\n      this.wheel += (event.deltaX + event.deltaY) / modeMod[event.deltaMode];\n      return true;\n    }\n\n    const left = event.button === 0;\n    const right = event.button === 2;\n    this.coords[0] = (event.clientX / window.innerWidth) * 2 - 1;\n    this.coords[1] = -(event.clientY / window.innerHeight) * 2 + 1;\n    this.movementXY[0] += event.movementX;\n    this.movementXY[1] += event.movementY;\n    if (event.type === \"mousedown\" && left) {\n      this.mouseDownLeftThisFrame = true;\n      this.buttonLeft = true;\n    } else if (event.type === \"mousedown\" && right) {\n      this.mouseDownRightThisFrame = true;\n      this.buttonRight = true;\n    } else if (event.type === \"mouseup\" && left) {\n      if (this.mouseDownLeftThisFrame) {\n        return false;\n      }\n      this.buttonLeft = false;\n    } else if (event.type === \"mouseup\" && right) {\n      if (this.mouseDownRightThisFrame) {\n        return false;\n      }\n      this.buttonRight = false;\n    }\n    return true;\n  }\n\n  write(frame) {\n    this.movementXY[0] = 0; // deltas\n    this.movementXY[1] = 0; // deltas\n    this.wheel = 0; // delta\n\n    this.didStopProcessingEarly = false;\n    this.mouseDownLeftThisFrame = false;\n    this.mouseDownRightThisFrame = false;\n\n    for (let i = 0; i < this.events.length; i++) {\n      const event = this.events[i];\n      if (!this.process(event)) {\n        this.didStopProcessingEarly = true;\n        this.events.splice(0, i);\n        break;\n      }\n    }\n\n    if (!this.didStopProcessingEarly) {\n      this.events.length = 0;\n    }\n\n    frame.setVector2(paths.device.mouse.coords, this.coords[0], this.coords[1]);\n    frame.setVector2(paths.device.mouse.movementXY, this.movementXY[0], this.movementXY[1]);\n    frame.setValueType(paths.device.mouse.buttonLeft, this.buttonLeft);\n    frame.setValueType(paths.device.mouse.buttonRight, this.buttonRight);\n    frame.setValueType(paths.device.mouse.wheel, this.wheel);\n  }\n}\n\nwindow.oncontextmenu = e => {\n  if (!isInModal()) {\n    e.preventDefault();\n  }\n};\n","// You might prefer to use this over a Set because iterating over a set allocates memory\nexport function ArrayBackedSet(initialItems) {\n  return {\n    items: initialItems || [],\n    has(item) {\n      return this.items.indexOf(item) !== -1;\n    },\n    add(item) {\n      if (!this.has(item)) {\n        this.items.push(item);\n      }\n    },\n    delete(item) {\n      const index = this.items.indexOf(item);\n      if (index !== -1) {\n        this.items[index] = this.items[this.items.length - 1];\n        this.items.pop();\n      }\n    },\n    clear() {\n      this.items.length = 0;\n    }\n  };\n}\n","import { paths } from \"../paths\";\nimport { ArrayBackedSet } from \"../array-backed-set\";\nexport class KeyboardDevice {\n  constructor() {\n    this.seenKeys = new ArrayBackedSet();\n    this.keys = {};\n    this.events = [];\n\n    [\"keydown\", \"keyup\"].map(x =>\n      document.addEventListener(x, e => {\n        if (!e.key) return;\n        this.events.push(e);\n\n        // Block browser hotkeys for chat command, media browser and freeze\n        if (\n          (e.type === \"keydown\" &&\n            e.key === \"/\" &&\n            ![\"TEXTAREA\", \"INPUT\"].includes(document.activeElement && document.activeElement.nodeName) &&\n            !(document.activeElement && document.activeElement.contentEditable === \"true\")) ||\n          (e.ctrlKey &&\n            (e.key === \"1\" ||\n              e.key === \"2\" ||\n              e.key === \"3\" ||\n              e.key === \"4\" ||\n              e.key === \"5\" ||\n              e.key === \"6\" ||\n              e.key === \"7\" ||\n              e.key === \"8\" ||\n              e.key === \"9\" ||\n              e.key === \"0\")) ||\n          e.key === \"Tab\"\n        ) {\n          e.preventDefault();\n          return false;\n        }\n      })\n    );\n    [\"blur\"].map(x => window.addEventListener(x, this.events.push.bind(this.events)));\n  }\n\n  write(frame) {\n    for (let i = 0; i < this.events.length; i++) {\n      const event = this.events[i];\n      if (event.type === \"blur\") {\n        this.keys = {};\n        this.seenKeys.clear();\n      } else {\n        const key = event.key.toLowerCase();\n        this.keys[key] = event.type === \"keydown\";\n        this.seenKeys.add(key);\n      }\n    }\n\n    this.events.length = 0;\n\n    for (let i = 0; i < this.seenKeys.items.length; i++) {\n      const key = this.seenKeys.items[i];\n      const path = paths.device.keyboard.key(key);\n      frame.setValueType(path, this.keys[key]);\n    }\n  }\n}\n","import { paths } from \"../paths\";\n\nexport class HudDevice {\n  constructor() {\n    this.events = [];\n    document.querySelector(\"a-scene\").addEventListener(\"penButtonPressed\", this.events.push.bind(this.events));\n  }\n\n  write(frame) {\n    frame.setValueType(paths.device.hud.penButton, this.events.length !== 0);\n    while (this.events.length) {\n      this.events.pop();\n    }\n  }\n}\n","import { paths } from \"../paths\";\n\nexport class XboxControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n    this.buttonMap = [\n      { name: \"a\", buttonId: 0 },\n      { name: \"b\", buttonId: 1 },\n      { name: \"x\", buttonId: 2 },\n      { name: \"y\", buttonId: 3 },\n      { name: \"leftBumper\", buttonId: 4 },\n      { name: \"rightBumper\", buttonId: 5 },\n      { name: \"leftTrigger\", buttonId: 6 },\n      { name: \"rightTrigger\", buttonId: 7 },\n      { name: \"back\", buttonId: 8 },\n      { name: \"start\", buttonId: 9 },\n      { name: \"leftJoystick\", buttonId: 10 },\n      { name: \"rightJoystick\", buttonId: 11 },\n      { name: \"dpadUp\", buttonId: 12 },\n      { name: \"dpadDown\", buttonId: 13 },\n      { name: \"dpadLeft\", buttonId: 14 },\n      { name: \"dpadRight\", buttonId: 15 }\n    ];\n    this.axisMap = [\n      { name: \"leftJoystickHorizontal\", axisId: 0 },\n      { name: \"leftJoystickVertical\", axisId: 1 },\n      { name: \"rightJoystickHorizontal\", axisId: 2 },\n      { name: \"rightJoystickVertical\", axisId: 3 }\n    ];\n  }\n\n  write(frame) {\n    this.gamepad = navigator.getGamepads()[this.gamepad.index];\n    if (this.gamepad.connected) {\n      const xboxPaths = paths.device.xbox;\n      this.buttonMap.forEach(b => {\n        const path = xboxPaths.button(b.name);\n        const button = this.gamepad.buttons[b.buttonId];\n        frame.setValueType(path.pressed, !!button.pressed);\n        frame.setValueType(path.touched, !!button.touched);\n        frame.setValueType(path.value, button.value);\n      });\n      frame.setValueType(xboxPaths.axesSum, 0);\n      this.axisMap.forEach(axis => {\n        frame.setValueType(xboxPaths.axis(axis.name), this.gamepad.axes[axis.axisId]);\n        frame.setValueType(xboxPaths.axesSum, frame.get(xboxPaths.axesSum) + Math.abs(this.gamepad.axes[axis.axisId]));\n      });\n\n      if (this.gamepad.hapticActuators && this.gamepad.hapticActuators[0]) {\n        frame.setValueType(paths.haptics.actuators[this.gamepad.hand], this.gamepad.hapticActuators[0]);\n      }\n    }\n  }\n}\n","const THREE = typeof window !== \"undefined\" && window.THREE;\nconst Vector3 = (THREE && THREE.Vector3) || function() {};\nconst Quaternion = (THREE && THREE.Quaternion) || function() {};\nconst forward = typeof window !== \"undefined\" && window.THREE && new THREE.Vector3(0, 0, -1);\nexport function Pose() {\n  return {\n    position: new Vector3(),\n    direction: new Vector3(),\n    orientation: new Quaternion(),\n    fromOriginAndDirection: function(origin, direction) {\n      this.position = origin;\n      this.direction = direction;\n      this.orientation = this.orientation.setFromUnitVectors(forward, direction);\n      return this;\n    },\n    fromCameraProjection: function(camera, normalizedX, normalizedY) {\n      this.position.setFromMatrixPosition(camera.matrixWorld);\n      this.direction\n        .set(normalizedX, normalizedY, 0.5)\n        .unproject(camera)\n        .sub(this.position)\n        .normalize();\n      this.fromOriginAndDirection(this.position, this.direction);\n      return this;\n    },\n    copy: function(pose) {\n      this.position.copy(pose.position);\n      this.direction.copy(pose.direction);\n      this.orientation.copy(pose.orientation);\n    }\n  };\n}\n","// Vector from eyes to elbow (divided by user height).\nconst EYES_TO_ELBOW = { x: 0.175, y: -0.3, z: -0.03 };\n// Vector from eyes to elbow (divided by user height).\nconst FOREARM = { x: 0, y: 0, z: -0.175 };\n\nexport const applyArmModel = (function() {\n  const controllerEuler = new THREE.Euler();\n  const deltaControllerPosition = new THREE.Vector3();\n  const controllerQuaternion = new THREE.Quaternion();\n  const controllerPosition = new THREE.Vector3();\n  return function applyArmModel(gamepadPose, hand, headObject3D, userHeight) {\n    headObject3D.updateMatrices();\n    controllerPosition.copy(headObject3D.position);\n    controllerPosition.y = controllerPosition.y - userHeight;\n    deltaControllerPosition.set(\n      EYES_TO_ELBOW.x * (hand === \"left\" ? -1 : hand === \"right\" ? 1 : 0),\n      EYES_TO_ELBOW.y,\n      EYES_TO_ELBOW.z\n    );\n    deltaControllerPosition.multiplyScalar(userHeight);\n    deltaControllerPosition.applyAxisAngle(headObject3D.up, headObject3D.rotation.y);\n    controllerPosition.add(deltaControllerPosition);\n    deltaControllerPosition.set(FOREARM.x, FOREARM.y, FOREARM.z);\n    deltaControllerPosition.multiplyScalar(userHeight);\n    controllerQuaternion.fromArray(gamepadPose.orientation);\n    controllerEuler.setFromQuaternion(controllerQuaternion);\n    controllerEuler.set(controllerEuler.x, controllerEuler.y, 0);\n    deltaControllerPosition.applyEuler(controllerEuler);\n    controllerPosition.add(deltaControllerPosition);\n    return controllerPosition;\n  };\n})();\n","export const copySittingToStandingTransform = function copySittingToStandingTransform(matrix) {\n  navigator.getVRDisplays &&\n    navigator.getVRDisplays().then(displays => {\n      if (displays[0] && displays[0].stageParameters && displays[0].stageParameters.sittingToStandingTransform) {\n        matrix.fromArray(displays[0].stageParameters.sittingToStandingTransform);\n      }\n    });\n};\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { applyArmModel } from \"../arm-model.js\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\n\nconst TOUCHPAD = paths.device.oculusgo.touchpad;\nconst TRIGGER = paths.device.oculusgo.trigger;\n\nexport class OculusGoControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.pose = new Pose();\n    this.q = new THREE.Quaternion();\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n    this.matrix = new THREE.Matrix4();\n    this.orientation = new THREE.Quaternion();\n\n    // TODO ideally we should just be getting pose from the gamepad\n    // TODO if controller is set to left hand, we still use right hand query here\n    // because otherwise things break.\n    this.rayObject = document.querySelector(\"#player-right-controller\").object3D;\n    this.headObject3D = document.querySelector(\"#player-camera\").object3D;\n    navigator.getGamepads();\n  }\n\n  write(frame) {\n    // Have to call navigator.getGamepads() in order for the gamepad object to update.\n    navigator.getGamepads();\n    if (this.gamepad.connected) {\n      frame.setValueType(TOUCHPAD.axisX, this.gamepad.axes[0]);\n      frame.setValueType(TOUCHPAD.axisY, this.gamepad.axes[1]);\n      frame.setValueType(TOUCHPAD.pressed, this.gamepad.buttons[0].pressed);\n      frame.setValueType(TOUCHPAD.touched, this.gamepad.buttons[0].touched);\n      frame.setValueType(TOUCHPAD.value, this.gamepad.buttons[0].value);\n      frame.setValueType(TRIGGER.pressed, this.gamepad.buttons[1].pressed);\n      frame.setValueType(TRIGGER.touched, this.gamepad.buttons[1].touched);\n      frame.setValueType(TRIGGER.value, this.gamepad.buttons[1].value);\n\n      this.rayObject.updateMatrices();\n      this.rayObject.getWorldQuaternion(this.q);\n      frame.setValueType(paths.actions.rayObjectRotation, this.q);\n      const rayMatrixWorld = this.rayObject.matrixWorld;\n      this.rayObjectRotation.setFromRotationMatrix(rayMatrixWorld);\n      this.pose.position.setFromMatrixPosition(rayMatrixWorld);\n      this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n      this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n      frame.setPose(paths.device.oculusgo.pose, this.pose);\n\n      if (this.gamepad.pose.orientation) {\n        // TODO if controller is set to left hand, we still draw right hand until\n        // bindings are overhauled to handle primary/secondary hands.\n        frame.setMatrix4(\n          paths.device.oculusgo.matrix,\n          this.matrix\n            .compose(\n              applyArmModel(this.gamepad.pose, this.gamepad.hand, this.headObject3D, 1.6),\n              this.orientation.fromArray(this.gamepad.pose.orientation),\n              ONES\n            )\n            .premultiply(this.sittingToStandingMatrix)\n        );\n      }\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { applyArmModel } from \"../arm-model.js\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\n\nconst TOUCHPAD = paths.device.gearVRController.button(\"touchpad\");\nconst TRIGGER = paths.device.gearVRController.button(\"trigger\");\nconst TOUCHPAD_X = paths.device.gearVRController.axis(\"touchpadX\");\nconst TOUCHPAD_Y = paths.device.gearVRController.axis(\"touchpadY\");\n\nexport class GearVRControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n    this.buttonMap = [{ name: \"touchpad\", buttonId: 0 }, { name: \"trigger\", buttonId: 1 }];\n    this.axisMap = [{ name: \"touchpadX\", axisId: 0 }, { name: \"touchpadY\", axisId: 1 }];\n\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.selector = `#player-${gamepad.hand}-controller`;\n    this.pose = new Pose();\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n\n    this.matrix = new THREE.Matrix4();\n    this.orientation = new THREE.Quaternion();\n  }\n\n  write(frame) {\n    // Chrome requires a call to getGamepads() for the gamepad state to update.\n    navigator.getGamepads();\n    if (this.gamepad.connected) {\n      const touchpad = this.gamepad.buttons[0];\n      frame.setValueType(TOUCHPAD.pressed, !!touchpad.pressed);\n      frame.setValueType(TOUCHPAD.touched, !!touchpad.touched);\n      frame.setValueType(TOUCHPAD.value, !!touchpad.value);\n\n      const trigger = this.gamepad.buttons[1];\n      frame.setValueType(TRIGGER.pressed, !!trigger.pressed);\n      frame.setValueType(TRIGGER.touched, !!trigger.touched);\n      frame.setValueType(TRIGGER.value, !!trigger.value);\n\n      frame.setValueType(TOUCHPAD_X, this.gamepad.axes[0]);\n      frame.setValueType(TOUCHPAD_Y, this.gamepad.axes[1]);\n\n      // TODO we should just be getting pose from the gamepad\n      if (!this.rayObject) {\n        this.rayObject = document.querySelector(this.selector).object3D;\n      }\n      this.rayObject.updateMatrixWorld();\n      this.rayObjectRotation.setFromRotationMatrix(this.rayObject.matrixWorld);\n      this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n      this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n      this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n      frame.setPose(paths.device.gearVRController.pose, this.pose);\n      this.headObject3D = this.headObject3D || document.querySelector(\"#player-camera\").object3D;\n      if (this.gamepad.pose.orientation) {\n        frame.setMatrix4(\n          paths.device.gearVRController.matrix,\n          this.matrix\n            .compose(\n              applyArmModel(this.gamepad.pose, this.gamepad.hand, this.headObject3D, 1.6),\n              this.orientation.fromArray(this.gamepad.pose.orientation),\n              ONES\n            )\n            .premultiply(this.sittingToStandingMatrix)\n        );\n      }\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\n\nexport const leftOculusTouchButtonMap = [\n  { name: \"thumbStick\", buttonId: 0 },\n  { name: \"trigger\", buttonId: 1 },\n  { name: \"grip\", buttonId: 2 },\n  { name: \"x\", buttonId: 3 },\n  { name: \"y\", buttonId: 4 }\n];\nexport const rightOculusTouchButtonMap = [\n  { name: \"thumbStick\", buttonId: 0 },\n  { name: \"trigger\", buttonId: 1 },\n  { name: \"grip\", buttonId: 2 },\n  { name: \"a\", buttonId: 3 },\n  { name: \"b\", buttonId: 4 }\n];\n\nconst LEFT_HAND_OFFSET = new THREE.Matrix4().makeTranslation(-0.025, -0.03, 0.1);\nconst RIGHT_HAND_OFFSET = new THREE.Matrix4().makeTranslation(0.025, -0.03, 0.1);\n\nexport class OculusTouchControllerDevice {\n  constructor(gamepad) {\n    this.rayObjectRotation = new THREE.Quaternion();\n\n    // wake the gamepad api up. otherwise it does not report touch controllers.\n    // in chrome it still won't unless you enter vr.\n    navigator.getVRDisplays();\n\n    const buttonMaps = {\n      left: leftOculusTouchButtonMap,\n      right: rightOculusTouchButtonMap\n    };\n\n    const devicePaths = {\n      left: paths.device.leftOculusTouch,\n      right: paths.device.rightOculusTouch\n    };\n\n    this.gamepad = gamepad;\n    this.pose = new Pose();\n    this.buttonMap = buttonMaps[gamepad.hand];\n    this.axisMap = [{ name: \"joyX\", axisId: 0 }, { name: \"joyY\", axisId: 1 }];\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n    this.matrix = new THREE.Matrix4();\n    this.path = devicePaths[gamepad.hand];\n    this.selector = `#player-${gamepad.hand}-controller`;\n\n    this.position = new THREE.Vector3();\n    this.orientation = new THREE.Quaternion();\n    this.handOffset = this.gamepad.hand === \"left\" ? LEFT_HAND_OFFSET : RIGHT_HAND_OFFSET;\n  }\n\n  write(frame) {\n    if (!this.gamepad) return;\n    this.gamepad = navigator.getGamepads()[this.gamepad.index];\n    if (!this.gamepad || !this.gamepad.connected) return;\n\n    this.buttonMap.forEach(b => {\n      const path = this.path.button(b.name);\n      const button = this.gamepad.buttons[b.buttonId];\n      frame.setValueType(path.pressed, !!button.pressed);\n      frame.setValueType(path.touched, !!button.touched);\n      frame.setValueType(path.value, button.value);\n    });\n    frame.setValueType(this.path.axesSum, 0);\n    this.axisMap.forEach(axis => {\n      frame.setValueType(this.path.axis(axis.name), this.gamepad.axes[axis.axisId]);\n      frame.setValueType(this.path.axesSum, frame.get(this.path.axesSum) + Math.abs(this.gamepad.axes[axis.axisId]));\n    });\n\n    this.rayObject = this.rayObject || document.querySelector(this.selector).object3D;\n    this.rayObject.updateMatrixWorld();\n    this.rayObjectRotation.setFromRotationMatrix(this.rayObject.matrixWorld);\n    this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n    this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n    this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n    frame.setPose(this.path.pose, this.pose);\n    if (this.gamepad.pose.position && this.gamepad.pose.orientation) {\n      frame.setMatrix4(\n        this.path.matrix,\n        this.matrix\n          .compose(\n            this.position.fromArray(this.gamepad.pose.position),\n            this.orientation.fromArray(this.gamepad.pose.orientation),\n            ONES\n          )\n          .premultiply(this.sittingToStandingMatrix)\n          .multiply(this.handOffset)\n      );\n    }\n    if (this.gamepad.hapticActuators && this.gamepad.hapticActuators[0]) {\n      frame.setValueType(paths.haptics.actuators[this.gamepad.hand], this.gamepad.hapticActuators[0]);\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { applyArmModel } from \"../arm-model\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\nconst HAND_OFFSET = new THREE.Matrix4().makeTranslation(0, 0, -0.04);\n\nconst TOUCHPAD = paths.device.daydream.button(\"touchpad\");\nconst TOUCHPAD_X = paths.device.daydream.axis(\"touchpadX\");\nconst TOUCHPAD_Y = paths.device.daydream.axis(\"touchpadY\");\nconst POSE = paths.device.daydream.pose;\nconst MATRIX = paths.device.daydream.matrix;\n\nexport class DaydreamControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.selector = `#player-${gamepad.hand || \"right\"}-controller`;\n    this.pose = new Pose();\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n    this.matrix = new THREE.Matrix4();\n    this.orientation = new THREE.Quaternion();\n  }\n\n  write(frame) {\n    this.gamepad = navigator.getGamepads()[0];\n    if (this.gamepad && this.gamepad.connected) {\n      const button = this.gamepad.buttons[0];\n      frame.setValueType(TOUCHPAD.pressed, !!button.pressed);\n      frame.setValueType(TOUCHPAD.touched, !!button.touched);\n      frame.setValueType(TOUCHPAD.value, !!button.value);\n\n      frame.setValueType(TOUCHPAD_X, this.gamepad.axes[0]);\n      frame.setValueType(TOUCHPAD_Y, this.gamepad.axes[1]);\n\n      // TODO ideally we should just be getting pose from the gamepad\n      if (!this.rayObject) {\n        this.rayObject = document.querySelector(this.selector).object3D;\n      }\n      this.rayObject.updateMatrixWorld();\n      this.rayObjectRotation.setFromRotationMatrix(this.rayObject.matrixWorld);\n      this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n      this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n      this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n      frame.setPose(POSE, this.pose);\n\n      this.headObject3D = this.headObject3D || document.querySelector(\"#player-camera\").object3D;\n\n      if (this.gamepad.pose.orientation) {\n        frame.setMatrix4(\n          MATRIX,\n          this.matrix\n            .compose(\n              applyArmModel(this.gamepad.pose, this.gamepad.hand, this.headObject3D, 1.6),\n              this.orientation.fromArray(this.gamepad.pose.orientation),\n              ONES\n            )\n            .premultiply(this.sittingToStandingMatrix)\n            .multiply(HAND_OFFSET)\n        );\n      }\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\nconst HAND_OFFSET = new THREE.Matrix4().compose(\n  new THREE.Vector3(0, 0, 0.13),\n  new THREE.Quaternion().setFromEuler(new THREE.Euler(-40 * THREE.Math.DEG2RAD, 0, 0)),\n  new THREE.Vector3(1, 1, 1)\n);\nconst RAY_ROTATION = new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(1, 0, 0), -Math.PI / 12);\n\nexport class ViveControllerDevice {\n  constructor(gamepad) {\n    // wake the gamepad api up. otherwise it does not report touch controllers.\n    // in chrome it still won't unless you enter vr.\n    navigator.getVRDisplays();\n    this.gamepad = gamepad;\n\n    if (this.gamepad.id === \"HTC Vive Focus Plus Controller\") {\n      this.buttonMap = [\n        { name: \"touchpad\", buttonId: 0 },\n        { name: \"trigger\", buttonId: 1 },\n        { name: \"grip\", buttonId: 2 }\n      ];\n    } else {\n      this.buttonMap = [\n        { name: \"touchpad\", buttonId: 0 },\n        { name: \"trigger\", buttonId: 1 },\n        { name: \"grip\", buttonId: 2 },\n        { name: \"top\", buttonId: 3 }\n      ];\n    }\n    this.axisMap = [{ name: \"joyX\", axisId: 0 }, { name: \"joyY\", axisId: 1 }];\n\n    this.pose = new Pose();\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.path = paths.device.vive[gamepad.hand || \"right\"];\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n\n    this.matrix = new THREE.Matrix4();\n    this.position = new THREE.Vector3();\n    this.orientation = new THREE.Quaternion();\n  }\n\n  write(frame) {\n    this.gamepad = navigator.getGamepads()[this.gamepad.index];\n    if (!this.gamepad.connected) return;\n\n    this.buttonMap.forEach(b => {\n      const path = this.path.button(b.name);\n      const button = this.gamepad.buttons[b.buttonId];\n      frame.setValueType(path.pressed, !!button.pressed);\n      frame.setValueType(path.touched, !!button.touched);\n      frame.setValueType(path.value, button.value);\n    });\n    frame.setValueType(this.path.axesSum, 0);\n    this.axisMap.forEach(axis => {\n      frame.setValueType(this.path.axis(axis.name), this.gamepad.axes[axis.axisId]);\n      frame.setValueType(this.path.axesSum, frame.get(this.path.axesSum) + Math.abs(this.gamepad.axes[axis.axisId]));\n    });\n\n    if (!this.selector) {\n      if (this.gamepad.hand) {\n        this.path = paths.device.vive[this.gamepad.hand];\n        this.selector = `#player-${this.gamepad.hand}-controller`;\n        console.warn(\"gamepad hand eventually specified\");\n      } else {\n        return;\n      }\n    }\n    const el = document.querySelector(this.selector);\n    const rayObject = el.object3D;\n    rayObject.updateMatrixWorld();\n    this.rayObjectRotation.setFromRotationMatrix(rayObject.matrixWorld);\n    this.pose.position.setFromMatrixPosition(rayObject.matrixWorld);\n    this.pose.direction\n      .set(0, 0, -1)\n      .applyQuaternion(RAY_ROTATION)\n      .applyQuaternion(this.rayObjectRotation);\n    this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n    frame.setPose(this.path.pose, this.pose);\n\n    if (this.gamepad.pose.position && this.gamepad.pose.orientation) {\n      frame.setMatrix4(\n        this.path.matrix,\n        this.matrix\n          .compose(\n            this.position.fromArray(this.gamepad.pose.position),\n            this.orientation.fromArray(this.gamepad.pose.orientation),\n            ONES\n          )\n          .premultiply(this.sittingToStandingMatrix)\n          .multiply(HAND_OFFSET)\n      );\n    }\n\n    if (this.gamepad.hapticActuators && this.gamepad.hapticActuators[0]) {\n      frame.setValueType(paths.haptics.actuators[this.gamepad.hand], this.gamepad.hapticActuators[0]);\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\nconst ONES = new THREE.Vector3(1, 1, 1);\nconst HAND_OFFSET = new THREE.Matrix4().compose(\n  new THREE.Vector3(0, -0.017, 0.13),\n  new THREE.Quaternion().setFromEuler(new THREE.Euler(-40 * THREE.Math.DEG2RAD, 0, 0)),\n  new THREE.Vector3(1, 1, 1)\n);\n\nexport class WindowsMixedRealityControllerDevice {\n  constructor(gamepad) {\n    this.rayObject = null;\n    this.rayObjectRotation = new THREE.Quaternion();\n\n    // wake the gamepad api up. otherwise it does not report touch controllers.\n    // in chrome it still won't unless you enter vr.\n    navigator.getVRDisplays();\n\n    this.gamepad = gamepad;\n    this.pose = new Pose();\n\n    if (gamepad.hand) {\n      this.selector = `#player-${gamepad.hand}-controller`;\n    }\n\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n    this.matrix = new THREE.Matrix4();\n    this.position = new THREE.Vector3();\n    this.orientation = new THREE.Quaternion();\n  }\n  write(frame) {\n    this.gamepad = navigator.getGamepads()[this.gamepad.index];\n    if (!this.gamepad.connected) return;\n\n    const path = paths.device.wmr[this.gamepad.hand || \"right\"];\n\n    frame.setValueType(path.touchpad.pressed, this.gamepad.buttons[0].pressed);\n    frame.setValueType(path.touchpad.touched, this.gamepad.buttons[0].touched);\n    frame.setValueType(path.touchpad.value, this.gamepad.buttons[0].value);\n\n    frame.setValueType(path.trigger.pressed, this.gamepad.buttons[1].pressed);\n    frame.setValueType(path.trigger.touched, this.gamepad.buttons[1].touched);\n    frame.setValueType(path.trigger.value, this.gamepad.buttons[1].value);\n\n    frame.setValueType(path.grip.pressed, this.gamepad.buttons[2].pressed);\n    frame.setValueType(path.grip.touched, this.gamepad.buttons[2].touched);\n    frame.setValueType(path.grip.value, this.gamepad.buttons[2].value);\n\n    frame.setValueType(path.menu.pressed, this.gamepad.buttons[3].pressed);\n    frame.setValueType(path.menu.touched, this.gamepad.buttons[3].touched);\n    frame.setValueType(path.menu.value, this.gamepad.buttons[3].value);\n\n    frame.setValueType(path.touchpad.axisX, this.gamepad.axes[0]);\n    frame.setValueType(path.touchpad.axisY, this.gamepad.axes[1]);\n    frame.setValueType(path.joystick.axisX, this.gamepad.axes[2]);\n    frame.setValueType(path.joystick.axisY, this.gamepad.axes[3]);\n\n    if (!this.selector) {\n      if (!this.gamepad.hand) return;\n      this.selector = `#player-${this.gamepad.hand}-controller`;\n    }\n\n    this.rayObject = this.rayObject || document.querySelector(this.selector).object3D;\n    this.rayObject.updateMatrixWorld();\n    this.rayObjectRotation.setFromRotationMatrix(this.rayObject.matrixWorld);\n\n    this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n    this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n    this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n    frame.setPose(path.pose, this.pose);\n\n    if (this.gamepad.pose.position && this.gamepad.pose.orientation) {\n      frame.setMatrix4(\n        path.matrix,\n        this.matrix\n          .compose(\n            this.position.fromArray(this.gamepad.pose.position),\n            this.orientation.fromArray(this.gamepad.pose.orientation),\n            ONES\n          )\n          .premultiply(this.sittingToStandingMatrix)\n          .multiply(HAND_OFFSET)\n      );\n    }\n\n    if (this.gamepad.hapticActuators && this.gamepad.hapticActuators[0]) {\n      frame.setValueType(paths.haptics.actuators[this.gamepad.hand], this.gamepad.hapticActuators[0]);\n    }\n  }\n}\n","import { paths } from \"../paths\";\n\nconst TWOPI = Math.PI * 2;\n\nclass CircularBuffer {\n  constructor(length) {\n    this.items = new Array(length).fill(0);\n    this.writePtr = 0;\n  }\n\n  push(item) {\n    this.items[this.writePtr] = item;\n    this.writePtr = (this.writePtr + 1) % this.items.length;\n  }\n}\n\nconst abs = Math.abs;\n// Input: two numbers between [-Math.PI, Math.PI]\n// Output: difference between them, where -Math.PI === Math.PI\nconst difference = (curr, prev) => {\n  const a = curr - prev;\n  const b = curr + TWOPI - prev;\n  const c = curr - (prev + TWOPI);\n  if (abs(a) < abs(b)) {\n    if (abs(a) < abs(c)) {\n      return a;\n    }\n  }\n  if (abs(b) < abs(c)) {\n    return b;\n  }\n\n  return c;\n};\n\nconst average = a => {\n  let sum = 0;\n  for (let i = 0; i < a.length; i++) {\n    const n = a[i];\n    sum += n;\n  }\n  return sum / a.length;\n};\n\nexport class GyroDevice {\n  constructor() {\n    this.hmdEuler = new THREE.Euler();\n    this.hmdQuaternion = new THREE.Quaternion();\n    this.prevX = this.hmdEuler.x;\n    this.prevY = this.hmdEuler.y;\n    this.dXBuffer = new CircularBuffer(6);\n    this.dYBuffer = new CircularBuffer(6);\n    this.hasPolyfill = window.webvrpolyfill;\n    if (this.hasPolyfill) {\n      this.vrDisplay = window.webvrpolyfill.getPolyfillDisplays()[0];\n      this.frameData = new window.webvrpolyfill.constructor.VRFrameData();\n    }\n  }\n\n  write(frame) {\n    if (!this.hasPolyfill) {\n      return;\n    }\n    const hmdEuler = this.hmdEuler;\n    this.vrDisplay.getFrameData(this.frameData);\n    if (this.frameData.pose.orientation !== null) {\n      this.hmdQuaternion.fromArray(this.frameData.pose.orientation);\n      hmdEuler.setFromQuaternion(this.hmdQuaternion, \"YXZ\");\n    }\n\n    // Don't use gyro values when device is lying flat\n    if (hmdEuler.x < -Math.PI * 0.475) return;\n\n    const dX = THREE.Math.RAD2DEG * difference(hmdEuler.x, this.prevX);\n    const dY = THREE.Math.RAD2DEG * difference(hmdEuler.y, this.prevY);\n\n    this.dXBuffer.push(Math.abs(dX) < 0.001 ? 0 : dX);\n    this.dYBuffer.push(Math.abs(dY) < 0.001 ? 0 : dY);\n\n    this.averageDeltaX = average(this.dXBuffer.items);\n    this.averageDeltaY = average(this.dYBuffer.items);\n\n    this.prevX = hmdEuler.x;\n    this.prevY = hmdEuler.y;\n    frame.setValueType(paths.device.gyro.averageDeltaX, this.averageDeltaX);\n    frame.setValueType(paths.device.gyro.averageDeltaY, this.averageDeltaY);\n  }\n}\n","/* global AFRAME Ammo NAF */\nimport { paths } from \"./userinput/paths\";\nimport { SOUND_HOVER_OR_GRAB } from \"./sound-effects-system\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\nfunction findHandCollisionTargetForHand(body) {\n  const driver = AFRAME.scenes[0].systems.physics.driver;\n  const numManifolds = driver.dispatcher.getNumManifolds();\n  const handPtr = Ammo.getPointer(body);\n  for (let i = 0; i < numManifolds; i++) {\n    const persistentManifold = driver.dispatcher.getManifoldByIndexInternal(i);\n    const body0ptr = Ammo.getPointer(persistentManifold.getBody0());\n    const body1ptr = Ammo.getPointer(persistentManifold.getBody1());\n    if (handPtr !== body0ptr && handPtr !== body1ptr) {\n      continue;\n    }\n    const numContacts = persistentManifold.getNumContacts();\n    for (let j = 0; j < numContacts; j++) {\n      const manifoldPoint = persistentManifold.getContactPoint(j);\n      if (manifoldPoint.getDistance() <= 10e-6) {\n        const object3D = driver.els.get(handPtr === body0ptr ? body1ptr : body0ptr).object3D;\n        if (object3D.el && object3D.el.components.tags && object3D.el.components.tags.data.isHandCollisionTarget) {\n          return object3D.el;\n        }\n        return null;\n      }\n    }\n  }\n  return null;\n}\n\nconst remoteHoverTargets = new Map();\nexport function findRemoteHoverTarget(object3D) {\n  if (!object3D) return null;\n  const target = remoteHoverTargets.get(object3D);\n  return target || findRemoteHoverTarget(object3D.parent);\n}\nAFRAME.registerComponent(\"is-remote-hover-target\", {\n  init: function() {\n    remoteHoverTargets.set(this.el.object3D, this.el);\n  },\n  remove: function() {\n    remoteHoverTargets.delete(this.el.object3D);\n  }\n});\n\nfunction isUI(el) {\n  return (\n    el && el.components.tags && (el.components.tags.data.singleActionButton || el.components.tags.data.holdableButton)\n  );\n}\n\nAFRAME.registerSystem(\"interaction\", {\n  updateCursorIntersection: function(intersection) {\n    this.rightRemoteHoverTarget = intersection && findRemoteHoverTarget(intersection.object);\n  },\n\n  isHeld(el) {\n    return this.state.leftHand.held === el || this.state.rightHand.held === el || this.state.rightRemote.held === el;\n  },\n\n  init: function() {\n    this.options = {\n      leftHand: {\n        entity: null,\n        grabPath: paths.actions.leftHand.grab,\n        dropPath: paths.actions.leftHand.drop,\n        hoverFn: findHandCollisionTargetForHand\n      },\n      rightHand: {\n        entity: null,\n        grabPath: paths.actions.rightHand.grab,\n        dropPath: paths.actions.rightHand.drop,\n        hoverFn: findHandCollisionTargetForHand\n      },\n      rightRemote: {\n        entity: null,\n        grabPath: paths.actions.cursor.grab,\n        dropPath: paths.actions.cursor.drop,\n        hoverFn: this.getRightRemoteHoverTarget\n      }\n    };\n    this.state = {\n      leftHand: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      rightHand: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      rightRemote: {\n        hovered: null,\n        held: null,\n        spawning: null\n      }\n    };\n    this.previousState = {\n      leftHand: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      rightHand: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      rightRemote: {\n        hovered: null,\n        held: null,\n        spawning: null\n      }\n    };\n\n    waitForDOMContentLoaded().then(() => {\n      this.cursorController = document.querySelector(\"#cursor-controller\");\n      this.options.leftHand.entity = document.querySelector(\"#player-left-controller\");\n      this.options.rightHand.entity = document.querySelector(\"#player-right-controller\");\n      this.options.rightRemote.entity = document.querySelector(\"#cursor\");\n    });\n  },\n\n  getRightRemoteHoverTarget() {\n    return this.rightRemoteHoverTarget;\n  },\n\n  tickInteractor(options, state) {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    if (state.held) {\n      const networked = state.held.components[\"networked\"];\n      const lostOwnership = networked && networked.data && networked.data.owner !== NAF.clientId;\n      if (userinput.get(options.dropPath) || lostOwnership) {\n        state.held = null;\n      }\n    } else {\n      state.hovered = options.hoverFn.call(this, options.entity.body);\n      if (\n        state.hovered &&\n        state.hovered.components.tags &&\n        state.hovered.components.tags.data.isHoldable &&\n        userinput.get(options.grabPath) &&\n        (this.el.is(\"frozen\") || !state.hovered.components.pinnable || !state.hovered.components.pinnable.data.pinned)\n      ) {\n        state.held = state.hovered;\n      }\n    }\n  },\n\n  tick2(sfx) {\n    if (!this.el.is(\"entered\")) return;\n\n    Object.assign(this.previousState.rightHand, this.state.rightHand);\n    Object.assign(this.previousState.rightRemote, this.state.rightRemote);\n    Object.assign(this.previousState.leftHand, this.state.leftHand);\n\n    this.rightHandTeleporter =\n      this.rightHandTeleporter || document.querySelector(\"#player-right-controller\").components[\"teleporter\"];\n    this.gazeTeleporter = this.gazeTeleporter || document.querySelector(\"#gaze-teleport\").components[\"teleporter\"];\n\n    if (this.options.leftHand.entity.object3D.visible) {\n      this.tickInteractor(this.options.leftHand, this.state.leftHand);\n    }\n    if (this.options.rightHand.entity.object3D.visible && !this.state.rightRemote.held) {\n      this.tickInteractor(this.options.rightHand, this.state.rightHand);\n    }\n\n    if (!this.state.rightHand.held && !this.state.rightHand.hovered) {\n      this.tickInteractor(this.options.rightRemote, this.state.rightRemote);\n    }\n\n    const rightHandInteracting = this.state.rightHand.hovered || this.state.rightHand.held;\n    const rightHandTeleporting = this.rightHandTeleporter.isTeleporting || this.gazeTeleporter.isTeleporting;\n    const rightRemotePenIntersectingInVR =\n      this.el.sceneEl.is(\"vr-mode\") &&\n      this.state.rightRemote.held &&\n      this.state.rightRemote.held.components &&\n      this.state.rightRemote.held.components.tags &&\n      this.state.rightRemote.held.components.tags.data.isPen &&\n      this.state.rightRemote.held.children[0].components.pen.intersection;\n\n    const enableRightRemote = !rightHandInteracting && !rightHandTeleporting && !rightRemotePenIntersectingInVR;\n\n    this.cursorController.components[\"cursor-controller\"].enabled = enableRightRemote;\n\n    if (!enableRightRemote) {\n      this.state.rightRemote.hovered = null;\n    }\n\n    if (\n      this.state.leftHand.held !== this.previousState.leftHand.held ||\n      this.state.rightHand.held !== this.previousState.rightHand.held ||\n      this.state.rightRemote.held !== this.previousState.rightRemote.held ||\n      (isUI(this.state.rightRemote.hovered) &&\n        this.state.rightRemote.hovered !== this.previousState.rightRemote.hovered)\n    ) {\n      sfx.playSoundOneShot(SOUND_HOVER_OR_GRAB);\n    }\n\n    if (this.el.systems.userinput.get(paths.actions.logInteractionState)) {\n      console.log(\n        \"Interaction System State\\nleftHand held\",\n        this.state.leftHand.held,\n        \"\\nleftHand hovered\",\n        this.state.leftHand.hovered,\n        \"\\nrightHand held\",\n        this.state.rightHand.held,\n        \"\\nrightHand hovered\",\n        this.state.rightHand.hovered,\n        \"\\nrightRemote held\",\n        this.state.rightRemote.held,\n        \"\\nrightRemote hovered\",\n        this.state.rightRemote.hovered\n      );\n    }\n  }\n});\n","import { sets } from \"../sets\";\nimport { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { findRemoteHoverTarget } from \"../../interactions\";\n\nconst calculateCursorPose = function(camera, coords, origin, direction, cursorPose) {\n  origin.setFromMatrixPosition(camera.matrixWorld);\n  direction\n    .set(coords[0], coords[1], 0.5)\n    .unproject(camera)\n    .sub(origin)\n    .normalize();\n  cursorPose.fromOriginAndDirection(origin, direction);\n  return cursorPose;\n};\n\nexport class AppAwareMouseDevice {\n  constructor() {\n    this.prevButtonLeft = false;\n    this.clickedOnAnything = false;\n    this.cursorPose = new Pose();\n    this.prevCursorPose = new Pose();\n    this.origin = new THREE.Vector3();\n    this.prevOrigin = new THREE.Vector3();\n    this.direction = new THREE.Vector3();\n    this.prevDirection = new THREE.Vector3();\n  }\n\n  write(frame) {\n    this.prevCursorPose.copy(this.cursorPose);\n    this.prevOrigin.copy(this.origin);\n    this.prevDirection.copy(this.prevDirection);\n\n    if (!this.cursorController) {\n      this.cursorController = document.querySelector(\"[cursor-controller]\").components[\"cursor-controller\"];\n    }\n\n    if (!this.camera) {\n      this.camera = document.querySelector(\"#player-camera\").components.camera.camera;\n    }\n\n    const buttonLeft = frame.get(paths.device.mouse.buttonLeft);\n    const buttonRight = frame.get(paths.device.mouse.buttonRight);\n    if (buttonLeft && !this.prevButtonLeft) {\n      const rawIntersections = [];\n      this.cursorController.raycaster.intersectObjects(\n        AFRAME.scenes[0].systems[\"hubs-systems\"].cursorTargettingSystem.targets,\n        true,\n        rawIntersections\n      );\n      const intersection = rawIntersections.find(x => x.object.el);\n      const remoteHoverTarget = intersection && findRemoteHoverTarget(intersection.object);\n      const userinput = AFRAME.scenes[0].systems.userinput;\n      this.clickedOnAnything =\n        (intersection &&\n          intersection.object.el.matches(\".pen, .pen *, .video, .video *, .interactable, .interactable *\") &&\n          !(\n            remoteHoverTarget &&\n            remoteHoverTarget.components.pinnable &&\n            remoteHoverTarget.components.pinnable.data.pinned &&\n            !AFRAME.scenes[0].is(\"frozen\")\n          )) ||\n        userinput.activeSets.includes(sets.cursorHoldingPen) ||\n        userinput.activeSets.includes(sets.cursorHoldingInteractable) ||\n        userinput.activeSets.includes(sets.cursorHoldingCamera);\n    }\n    this.prevButtonLeft = buttonLeft;\n\n    if (!buttonLeft) {\n      this.clickedOnAnything = false;\n    }\n\n    if ((!this.clickedOnAnything && buttonLeft) || buttonRight) {\n      const movementXY = frame.get(paths.device.mouse.movementXY);\n      if (movementXY) {\n        frame.setVector2(paths.device.smartMouse.cameraDelta, movementXY[0], movementXY[1]);\n      }\n    }\n\n    const coords = frame.get(paths.device.mouse.coords);\n    frame.setPose(\n      paths.device.smartMouse.cursorPose,\n      calculateCursorPose(this.camera, coords, this.origin, this.direction, this.cursorPose)\n    );\n  }\n}\n","export function touchIsAssigned(touch, assignments) {\n  return (\n    assignments.find(assignment => {\n      return assignment.touch.identifier === touch.identifier;\n    }) !== undefined\n  );\n}\n\nexport function jobIsAssigned(job, assignments) {\n  return (\n    assignments.find(assignment => {\n      return assignment.job === job;\n    }) !== undefined\n  );\n}\n\nexport function assign(touch, job, assignments) {\n  if (touchIsAssigned(touch, assignments) || jobIsAssigned(job, assignments)) {\n    console.error(\"cannot reassign touches or jobs. unassign first\");\n    return undefined;\n  }\n  const assignment = { job, touch };\n  assignments.push(assignment);\n  return assignment;\n}\n\nexport function unassign(touch, job, assignments) {\n  function match(assignment) {\n    return assignment.touch.identifier === touch.identifier && assignment.job === job;\n  }\n  assignments.splice(assignments.findIndex(match), 1);\n}\n\nexport function findByJob(job, assignments) {\n  return assignments.find(assignment => {\n    return assignment.job === job;\n  });\n}\n\nexport function findByTouch(touch, assignments) {\n  return assignments.find(assignment => {\n    return assignment.touch.identifier === touch.identifier;\n  });\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { touchIsAssigned, jobIsAssigned, assign, unassign, findByJob, findByTouch } from \"./touchscreen/assignments\";\nimport { findRemoteHoverTarget } from \"../../interactions\";\n\nconst MOVE_CURSOR_JOB = \"MOVE CURSOR\";\nconst MOVE_CAMERA_JOB = \"MOVE CAMERA\";\nconst FIRST_PINCHER_JOB = \"FIRST PINCHER\";\nconst SECOND_PINCHER_JOB = \"SECOND PINCHER\";\n\nconst TAP_PATHS = [\n  paths.device.touchscreen.tap1,\n  paths.device.touchscreen.tap2,\n  paths.device.touchscreen.tap3,\n  paths.device.touchscreen.tap4,\n  paths.device.touchscreen.tap5\n];\n\nfunction distance(x1, y1, x2, y2) {\n  const dx = x1 - x2;\n  const dy = y1 - y2;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nconst getPlayerCamera = (() => {\n  let playerCamera;\n\n  return function() {\n    if (!playerCamera) {\n      playerCamera = document.querySelector(\"#player-camera\").components.camera.camera;\n    }\n\n    return playerCamera;\n  };\n})();\n\nfunction shouldMoveCursor(touch, raycaster) {\n  const isCursorGrabbing = !!AFRAME.scenes[0].systems.interaction.state.rightRemote.held;\n  if (isCursorGrabbing) {\n    return true;\n  }\n  const rawIntersections = [];\n  raycaster.setFromCamera(\n    {\n      x: (touch.clientX / window.innerWidth) * 2 - 1,\n      y: -(touch.clientY / window.innerHeight) * 2 + 1\n    },\n    getPlayerCamera()\n  );\n  raycaster.intersectObjects(\n    AFRAME.scenes[0].systems[\"hubs-systems\"].cursorTargettingSystem.targets,\n    true,\n    rawIntersections\n  );\n  const intersection = rawIntersections.find(x => x.object.el);\n  const remoteHoverTarget = intersection && findRemoteHoverTarget(intersection.object);\n  return (\n    intersection &&\n    intersection.object.el.matches(\".interactable, .interactable *\") &&\n    !(\n      remoteHoverTarget &&\n      remoteHoverTarget.components.pinnable &&\n      remoteHoverTarget.components.pinnable.data.pinned &&\n      !AFRAME.scenes[0].is(\"frozen\")\n    )\n  );\n}\n\nexport class AppAwareTouchscreenDevice {\n  constructor() {\n    this.raycaster = new THREE.Raycaster(new THREE.Vector3(), new THREE.Vector3(), 0, 4);\n    this.assignments = [];\n    this.pinch = { initialDistance: 0, currentDistance: 0, delta: 0 };\n\n    // When touches appear, this timestamps and then watches for the high water mark of # of touches\n    this.pendingTap = { maxTouchCount: 0, startedAt: 0 };\n    this.tapIndexToWriteNextFrame = 0;\n\n    this.events = [];\n    [\"touchstart\", \"touchend\", \"touchmove\", \"touchcancel\"].map(x =>\n      document.querySelector(\"canvas\").addEventListener(x, this.events.push.bind(this.events))\n    );\n  }\n\n  end(touch) {\n    if (!touchIsAssigned(touch, this.assignments)) {\n      console.warn(\"touch does not have a job\", touch);\n    } else {\n      const assignment = findByTouch(touch, this.assignments);\n      switch (assignment.job) {\n        case MOVE_CURSOR_JOB:\n        case MOVE_CAMERA_JOB:\n          // If grab was being delayed, we should fire the initial grab and also delay the unassignment\n          // to ensure we write at least two frames with the grab down (since the action set will change)\n          // and otherwise we'd not see the falling xform.\n          if (assignment.framesUntilGrab >= 0) {\n            assignment.framesUntilUnassign = assignment.framesUntilGrab + 2;\n          } else {\n            unassign(assignment.touch, assignment.job, this.assignments);\n          }\n\n          break;\n        case FIRST_PINCHER_JOB:\n          unassign(assignment.touch, assignment.job, this.assignments);\n          this.pinch = { initialDistance: 0, currentDistance: 0, delta: 0 };\n\n          if (jobIsAssigned(SECOND_PINCHER_JOB, this.assignments)) {\n            const second = findByJob(SECOND_PINCHER_JOB, this.assignments);\n            unassign(second.touch, second.job, this.assignments);\n            if (jobIsAssigned(MOVE_CAMERA_JOB, this.assignments)) {\n              // reassign secondPincher to firstPincher\n              const first = assign(second.touch, FIRST_PINCHER_JOB, this.assignments);\n              first.clientX = second.clientX;\n              first.clientY = second.clientY;\n            } else {\n              // reassign secondPincher to moveCamera\n              const cameraMover = assign(second.touch, MOVE_CAMERA_JOB, this.assignments);\n              cameraMover.clientX = second.clientX;\n              cameraMover.clientY = second.clientY;\n              cameraMover.delta = [0, 0];\n            }\n          }\n          break;\n        case SECOND_PINCHER_JOB:\n          unassign(assignment.touch, assignment.job, this.assignments);\n          this.pinch = { initialDistance: 0, currentDistance: 0, delta: 0 };\n          if (jobIsAssigned(FIRST_PINCHER_JOB, this.assignments) && !jobIsAssigned(MOVE_CAMERA_JOB, this.assignments)) {\n            //reassign firstPincher to moveCamera\n            const first = findByJob(FIRST_PINCHER_JOB, this.assignments);\n            unassign(first.touch, first.job, this.assignments);\n            const cameraMover = assign(first.touch, MOVE_CAMERA_JOB, this.assignments);\n            cameraMover.clientX = first.clientX;\n            cameraMover.clientY = first.clientY;\n            cameraMover.delta = [0, 0];\n          }\n          break;\n      }\n    }\n\n    // Touches cleared, determine what to do with pending tap\n    if (this.assignments.length === 0) {\n      if (this.pendingTap.maxTouchCount > 0 && performance.now() - this.pendingTap.startedAt <= 125) {\n        this.tapIndexToWriteNextFrame = this.pendingTap.maxTouchCount;\n      }\n\n      this.pendingTap = { maxTouchCount: 0 };\n    }\n  }\n\n  move(touch) {\n    if (!touchIsAssigned(touch, this.assignments)) {\n      if (!touch.target.classList[0] || !touch.target.classList[0].startsWith(\"virtual-gamepad-controls\")) {\n        console.warn(\"touch does not have job\", touch);\n      }\n      return;\n    }\n\n    const assignment = findByTouch(touch, this.assignments);\n    switch (assignment.job) {\n      case MOVE_CURSOR_JOB:\n        assignment.cursorPose.fromCameraProjection(\n          getPlayerCamera(),\n          (touch.clientX / window.innerWidth) * 2 - 1,\n          -(touch.clientY / window.innerHeight) * 2 + 1\n        );\n        break;\n      case MOVE_CAMERA_JOB:\n        assignment.delta[0] += touch.clientX - assignment.clientX;\n        assignment.delta[1] += touch.clientY - assignment.clientY;\n        assignment.clientX = touch.clientX;\n        assignment.clientY = touch.clientY;\n        break;\n      case FIRST_PINCHER_JOB:\n      case SECOND_PINCHER_JOB:\n        assignment.clientX = touch.clientX;\n        assignment.clientY = touch.clientY;\n        if (jobIsAssigned(FIRST_PINCHER_JOB, this.assignments) && jobIsAssigned(SECOND_PINCHER_JOB, this.assignments)) {\n          const first = findByJob(FIRST_PINCHER_JOB, this.assignments);\n          const second = findByJob(SECOND_PINCHER_JOB, this.assignments);\n          const currentDistance = distance(first.clientX, first.clientY, second.clientX, second.clientY);\n          this.pinch.delta += currentDistance - this.pinch.currentDistance;\n          this.pinch.currentDistance = currentDistance;\n        }\n        break;\n    }\n  }\n\n  start(touch) {\n    if (touchIsAssigned(touch, this.assignments)) {\n      console.error(\"touch already has a job\");\n      return;\n    }\n\n    const isFirstTouch = this.assignments.length === 0;\n    const isSecondTouch = this.assignments.length === 1;\n    const isThirdTouch = this.assignments.length === 2;\n\n    const hasSecondPinch = !!findByJob(SECOND_PINCHER_JOB, this.assignments);\n\n    if (isFirstTouch || (isThirdTouch && hasSecondPinch)) {\n      let assignment;\n\n      // First touch or third touch and other two fingers were pinching\n      if (shouldMoveCursor(touch, this.raycaster)) {\n        assignment = assign(touch, MOVE_CURSOR_JOB, this.assignments);\n\n        // Grabbing objects is delayed by several frames:\n        // - We don't want the physics constraint to be applied too early, which results in crazy velocities\n        // - We don't want to mis-trigger grabs if the user is about to put down a second finger.\n        assignment.framesUntilGrab = 2;\n      } else {\n        assignment = assign(touch, MOVE_CAMERA_JOB, this.assignments);\n        assignment.delta = [0, 0];\n      }\n\n      assignment.clientX = touch.clientX;\n      assignment.clientY = touch.clientY;\n\n      // On touch down, we always move the cursor on the first frame, but the MOVE_CURSOR_JOB indicates\n      // the touch will then track the cursor (instead of the camera)\n      assignment.cursorPose = new Pose().fromCameraProjection(\n        getPlayerCamera(),\n        (touch.clientX / window.innerWidth) * 2 - 1,\n        -(touch.clientY / window.innerHeight) * 2 + 1\n      );\n    } else if (isSecondTouch || isThirdTouch) {\n      const cursorJob = findByJob(MOVE_CURSOR_JOB, this.assignments);\n\n      if (isSecondTouch && cursorJob && cursorJob.framesUntilGrab < 0) {\n        // The second touch is happening after grab activated, so assign this touch to first pinch.\n        const first = assign(touch, FIRST_PINCHER_JOB, this.assignments);\n        first.clientX = touch.clientX;\n        first.clientY = touch.clientY;\n      } else {\n        // Second or third touch, but third touch only if not pinching\n        if (isSecondTouch) {\n          // The second touch is happening before the grab activated, so re-assign the first\n          // to the first pinch, and effectively cancel the grab.\n          const previousAssignment = this.assignments[0];\n          unassign(previousAssignment.touch, previousAssignment.job, this.assignments);\n          const first = assign(previousAssignment.touch, FIRST_PINCHER_JOB, this.assignments);\n          first.clientX = previousAssignment.clientX;\n          first.clientY = previousAssignment.clientY;\n        }\n\n        const first = findByJob(FIRST_PINCHER_JOB, this.assignments);\n\n        if (!first) {\n          const first = assign(touch, FIRST_PINCHER_JOB, this.assignments);\n          first.clientX = touch.clientX;\n          first.clientY = touch.clientY;\n          return;\n        } else {\n          const second = assign(touch, SECOND_PINCHER_JOB, this.assignments);\n          second.clientX = touch.clientX;\n          second.clientY = touch.clientY;\n\n          const initialDistance = distance(first.clientX, first.clientY, second.clientX, second.clientY);\n\n          this.pinch = {\n            initialDistance,\n            currentDistance: initialDistance,\n            delta: 0\n          };\n        }\n      }\n    }\n\n    if (this.pendingTap.maxTouchCount === 0 && this.assignments.length > 0) {\n      this.pendingTap.startedAt = performance.now();\n    }\n\n    this.pendingTap.maxTouchCount = Math.max(this.pendingTap.maxTouchCount, this.assignments.length);\n  }\n\n  process(event) {\n    switch (event.type) {\n      case \"touchstart\":\n        for (const touch of event.changedTouches) {\n          this.start(touch);\n        }\n        break;\n      case \"touchmove\":\n        for (const touch of event.touches) {\n          this.move(touch);\n        }\n        break;\n      case \"touchend\":\n      case \"touchcancel\":\n        for (const touch of event.changedTouches) {\n          this.end(touch);\n        }\n        break;\n    }\n  }\n\n  write(frame) {\n    if (this.pinch) {\n      this.pinch.delta = 0;\n    }\n    const cameraMover =\n      jobIsAssigned(MOVE_CAMERA_JOB, this.assignments) && findByJob(MOVE_CAMERA_JOB, this.assignments);\n    if (cameraMover) {\n      cameraMover.delta[0] = 0;\n      cameraMover.delta[1] = 0;\n    }\n\n    this.events.forEach(event => {\n      this.process(event);\n    });\n    while (this.events.length) {\n      this.events.pop();\n    }\n\n    const path = paths.device.touchscreen;\n    const hasCursorJob = jobIsAssigned(MOVE_CURSOR_JOB, this.assignments);\n    const hasCameraJob = jobIsAssigned(MOVE_CAMERA_JOB, this.assignments);\n\n    if (hasCursorJob || hasCameraJob) {\n      frame.setValueType(path.isTouching, true);\n\n      const assignment = findByJob(MOVE_CURSOR_JOB, this.assignments) || findByJob(MOVE_CAMERA_JOB, this.assignments);\n      frame.setPose(path.cursorPose, assignment.cursorPose);\n    }\n\n    frame.setValueType(path.isTouchingGrabbable, false);\n\n    if (hasCursorJob) {\n      const assignment = findByJob(MOVE_CURSOR_JOB, this.assignments);\n      frame.setValueType(path.isTouchingGrabbable, assignment.framesUntilGrab <= 0);\n      assignment.framesUntilGrab--;\n\n      if (assignment.framesUntilUnassign >= 0) {\n        if (assignment.framesUntilUnassign === 0) {\n          unassign(assignment.touch, assignment.job, this.assignments);\n        }\n\n        assignment.framesUntilUnassign--;\n      }\n    }\n\n    if (hasCameraJob) {\n      const delta = findByJob(MOVE_CAMERA_JOB, this.assignments).delta;\n      frame.setVector2(path.touchCameraDelta, delta[0], delta[1]);\n    }\n\n    frame.setValueType(path.pinch.delta, this.pinch.delta);\n    frame.setValueType(path.pinch.initialDistance, this.pinch.initialDistance);\n    frame.setValueType(path.pinch.currentDistance, this.pinch.currentDistance);\n\n    if (this.tapIndexToWriteNextFrame && this.tapIndexToWriteNextFrame < TAP_PATHS.length) {\n      // write to tap-X path if we had an X-fingered tap\n      frame.setValueType(TAP_PATHS[this.tapIndexToWriteNextFrame - 1], true);\n    }\n\n    this.tapIndexToWriteNextFrame = 0;\n  }\n}\n","import { Pose } from \"../pose\";\nimport { angleTo4Direction } from \"../../../utils/dpad\";\n\nexport const xforms = {\n  noop: function() {},\n  copy: function(frame, src, dest) {\n    frame.setValueType(dest.value, frame.get(src.value));\n  },\n  scale: function(scalar) {\n    return function scale(frame, src, dest) {\n      if (frame.get(src.value) !== undefined) {\n        frame.setValueType(dest.value, frame.get(src.value) * scalar);\n      }\n    };\n  },\n  scaleExp: function(scalar, exp = 1) {\n    return function scale(frame, src, dest) {\n      if (frame.get(src.value) !== undefined) {\n        if (exp === 1) {\n          frame.setValueType(dest.value, frame.get(src.value) * scalar);\n        } else {\n          frame.setValueType(dest.value, Math.pow(frame.get(src.value), exp) * scalar);\n        }\n      }\n    };\n  },\n  deadzone: function(deadzoneSize) {\n    return function deadzone(frame, src, dest) {\n      frame.setValueType(dest.value, Math.abs(frame.get(src.value)) < deadzoneSize ? 0 : frame.get(src.value));\n    };\n  },\n  split_vec2: function(frame, src, dest) {\n    const value = frame.get(src.value);\n    if (value !== undefined) {\n      frame.setValueType(dest.x, value[0]);\n      frame.setValueType(dest.y, value[1]);\n    }\n  },\n  compose_vec2: function(frame, src, dest) {\n    const x = frame.get(src.x);\n    const y = frame.get(src.y);\n    if (x !== undefined && y !== undefined) {\n      frame.setVector2(dest.value, x, y);\n    }\n  },\n  negate: function(frame, src, dest) {\n    frame.setValueType(dest.value, -frame.get(src.value));\n  },\n  copyIfFalse: function(frame, src, dest) {\n    frame.setValueType(dest.value, frame.get(src.bool) ? undefined : frame.get(src.value));\n  },\n  copyIfTrue: function(frame, src, dest) {\n    frame.setValueType(dest.value, frame.get(src.bool) ? frame.get(src.value) : undefined);\n  },\n  zeroIfDefined: function(frame, src, dest) {\n    frame.setValueType(dest.value, frame.get(src.bool) !== undefined ? 0 : frame.get(src.value));\n  },\n  true: function(frame, src, dest) {\n    frame.setValueType(dest.value, true);\n  },\n  rising: function rising(frame, src, dest, prevState) {\n    frame.setValueType(dest.value, frame.get(src.value) && prevState === false);\n    return !!frame.get(src.value);\n  },\n  risingWithFrameDelay: function(n) {\n    return function risingWithFrameDelay(frame, src, dest, state = { values: new Array(n) }) {\n      frame.setValueType(dest.value, state.values.shift());\n      state.values.push(frame.get(src.value) && !state.prev);\n      state.prev = frame.get(src.value);\n      return state;\n    };\n  },\n  falling: function falling(frame, src, dest, prevState) {\n    frame.setValueType(dest.value, !frame.get(src.value) && prevState);\n    return !!frame.get(src.value);\n  },\n  vec2Zero: function(frame, _, dest) {\n    frame.setVector2(dest.value, 0, 0);\n  },\n  poseFromCameraProjection: function() {\n    let camera;\n    const pose = new Pose();\n    return function poseFromCameraProjection(frame, src, dest) {\n      if (!camera) {\n        camera = document.querySelector(\"#player-camera\").components.camera.camera;\n      }\n      const value = frame.get(src.value);\n      frame.setPose(dest.value, pose.fromCameraProjection(camera, value[0], value[1]));\n    };\n  },\n  vec2dpad: function(deadzoneRadius, invertX = false, invertY = false) {\n    const deadzoneRadiusSquared = deadzoneRadius * deadzoneRadius;\n\n    return function vec2dpad(frame, src, dest) {\n      if (!frame.get(src.value)) return;\n      const [x, y] = frame.get(src.value);\n      const inCenter = x * x + y * y < deadzoneRadiusSquared;\n      const direction = inCenter ? \"center\" : angleTo4Direction(Math.atan2(invertX ? -x : x, invertY ? -y : y));\n      if (!dest[direction]) return;\n      frame.setValueType(dest[direction], true);\n    };\n  },\n  always: function(constValue) {\n    return function always(frame, _, dest) {\n      frame.setValueType(dest.value, constValue);\n    };\n  },\n  wasd_to_vec2: function(frame, { w, a, s, d }, { vec2 }) {\n    let x = 0;\n    let y = 0;\n    if (frame.get(a)) x -= 1;\n    if (frame.get(d)) x += 1;\n    if (frame.get(w)) y += 1;\n    if (frame.get(s)) y -= 1;\n    frame.setVector2(vec2, x, y);\n  },\n  add_vec2: function(frame, src, dest) {\n    const first = frame.get(src.first);\n    const second = frame.get(src.second);\n    if (first && second) {\n      frame.setVector2(dest.value, first[0] + second[0], first[1] + second[1]);\n    } else if (second) {\n      frame.setVector2(dest.value, second[0], second[1]);\n    } else if (first) {\n      frame.setVector2(dest.value, first[0], first[1]);\n    }\n  },\n  max_vec2: function(frame, src, dest) {\n    const first = frame.get(src.first);\n    const second = frame.get(src.second);\n    if (first && second) {\n      const max =\n        first[0] * first[0] + first[1] * first[1] > second[0] * second[0] + second[1] * second[1] ? first : second;\n      frame.setVector2(dest.value, max[0], max[1]);\n    } else if (second) {\n      frame.setVector2(dest.value, second[0], second[1]);\n    } else if (first) {\n      frame.setVector2(dest.value, first[0], first[1]);\n    }\n  },\n  normalize_vec2: function(frame, src, dest) {\n    const vec2 = frame.get(src.value);\n    if (vec2) {\n      if (vec2[0] === 0 && vec2[0] === 0) {\n        frame.setVector2(dest.value, vec2[0], vec2[1]);\n      } else {\n        const l = Math.sqrt(vec2[0] * vec2[0] + vec2[1] * vec2[1]);\n        frame.setVector2(dest.value, vec2[0] / l, vec2[1] / l);\n      }\n    }\n  },\n  all: function(frame, src, dest) {\n    for (let i = 0, l = src.length; i < l; i++) {\n      const path = src[i];\n      if (!frame.get(path)) {\n        frame.setValueType(dest.value, false);\n        return;\n      }\n    }\n    frame.setValueType(dest.value, true);\n  },\n  any: function(frame, src, dest) {\n    for (let i = 0, l = src.length; i < l; i++) {\n      const path = src[i];\n      if (frame.get(path)) {\n        frame.setValueType(dest.value, true);\n        return;\n      }\n    }\n    frame.setValueType(dest.value, false);\n  },\n  touch_axis_scroll(scale = 1, snap_to) {\n    return function touch_axis_scroll(frame, src, dest, state = { value: 0, touching: false }) {\n      if (snap_to === undefined || Math.abs(frame.get(src.value) - state.value) >= snap_to) {\n        frame.setValueType(\n          dest.value,\n          state.touching && frame.get(src.touching) ? scale * (frame.get(src.value) - state.value) : 0\n        );\n      }\n\n      state.value = frame.get(src.value);\n      state.touching = frame.get(src.touching);\n\n      return state;\n    };\n  }\n};\n","export function angleTo4Direction(angle) {\n  angle = (angle * THREE.Math.RAD2DEG + 180 + 45) % 360;\n  if (angle > 0 && angle < 90) {\n    return \"north\";\n  } else if (angle >= 90 && angle < 180) {\n    return \"west\";\n  } else if (angle >= 180 && angle < 270) {\n    return \"south\";\n  } else {\n    return \"east\";\n  }\n}\n\nexport function angleTo8Direction(angle) {\n  angle = (angle * THREE.Math.RAD2DEG + 180 + 45) % 360;\n  let direction = \"\";\n  if ((angle >= 0 && angle < 120) || angle >= 330) {\n    direction += \"north\";\n  }\n  if (angle >= 150 && angle < 300) {\n    direction += \"south\";\n  }\n  if (angle >= 60 && angle < 210) {\n    direction += \"west\";\n  }\n  if ((angle >= 240 && angle < 360) || angle < 30) {\n    direction += \"east\";\n  }\n  return direction;\n}\n","export const addSetsToBindings = mapping => {\n  for (const setName in mapping) {\n    for (const binding of mapping[setName]) {\n      if (!binding.sets) {\n        binding.sets = [];\n      }\n      binding.sets.push(setName);\n    }\n  }\n  return mapping;\n};\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\n// import { Pose } from \"../pose\";\n\nconst wasd_vec2 = \"/var/mouse-and-keyboard/wasd_vec2\";\nconst keyboardCharacterAcceleration = \"/var/mouse-and-keyboard/keyboardCharacterAcceleration\";\nconst arrows_vec2 = \"/var/mouse-and-keyboard/arrows_vec2\";\nconst togglePenWithRMB = \"/vars/mouse-and-keyboard/drop_pen_with_RMB\";\nconst togglePenWithEsc = \"/vars/mouse-and-keyboard/drop_pen_with_esc\";\nconst togglePenWithP = \"/vars/mouse-and-keyboard/drop_pen_with_p\";\nconst togglePenWithHud = \"/vars/mouse-and-keyboard/drop_pen_with_hud\";\nconst togglePen = \"/vars/mouse-and-keyboard/togglePen\";\n\nconst k = name => {\n  return `/keyboard-mouse-user/keyboard-var/${name}`;\n};\n\nexport const keyboardMouseUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {},\n      dest: { value: paths.actions.cursor.hideLine },\n      xform: xforms.always(true)\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: { value: keyboardCharacterAcceleration },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.normalize_vec2\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: paths.actions.boost },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.camera.exitMirror },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Tab\") },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: paths.actions.thaw },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"p\") },\n      dest: { value: togglePenWithP },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.hud.penButton },\n      dest: { value: togglePenWithHud },\n      xform: xforms.rising\n    },\n    {\n      src: [togglePenWithHud, togglePenWithP],\n      dest: { value: togglePen },\n      xform: xforms.any\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising,\n      priority: 100\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"c\") },\n      dest: { value: paths.actions.toggleCamera },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"x\") },\n      dest: { value: paths.actions.takeSnapshot },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.smartMouse.cursorPose },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.smartMouse.cameraDelta },\n      dest: { x: \"/var/smartMouseCamDeltaX\", y: \"/var/smartMouseCamDeltaY\" },\n      xform: xforms.split_vec2\n    },\n    {\n      src: { value: \"/var/smartMouseCamDeltaX\" },\n      dest: { value: \"/var/smartMouseCamDeltaXScaled\" },\n      xform: xforms.scale(-0.2)\n    },\n    {\n      src: { value: \"/var/smartMouseCamDeltaY\" },\n      dest: { value: \"/var/smartMouseCamDeltaYScaled\" },\n      xform: xforms.scale(-0.1)\n    },\n    {\n      src: { x: \"/var/smartMouseCamDeltaXScaled\", y: \"/var/smartMouseCamDeltaYScaled\" },\n      dest: { value: paths.actions.cameraDelta },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: paths.actions.cameraDelta },\n      dest: { value: paths.actions.lobbyCameraDelta },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"/\")\n      },\n      dest: {\n        value: paths.actions.focusChatCommand\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.mediaExit },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/shift+1\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/shift+2\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/shift+3\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/shift+4\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/shift+5\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/shift+6\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/shift+7\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/shift+8\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"k\")\n      },\n      dest: {\n        value: paths.actions.logInteractionState\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.mouse.buttonRight\n      },\n      dest: {\n        value: paths.actions.startGazeTeleport\n      },\n      xform: xforms.rising,\n      priority: 100\n    },\n    {\n      src: {\n        value: paths.device.mouse.buttonRight\n      },\n      dest: {\n        value: paths.actions.stopGazeTeleport\n      },\n      xform: xforms.falling,\n      priority: 100\n    }\n\n    // Helpful bindings for debugging hands in 2D\n    // {\n    //   src: {},\n    //   dest: { value: paths.actions.rightHand.matrix },\n    //   xform: xforms.always(\n    //     new THREE.Matrix4().compose(\n    //       new THREE.Vector3(0.2, 1.3, -0.8),\n    //       new THREE.Quaternion(0, 0, 0, 0),\n    //       new THREE.Vector3(1, 1, 1)\n    //     )\n    //   )\n    // },\n    // {\n    //   src: {},\n    //   dest: { value: paths.actions.leftHand.matrix },\n    //   xform: xforms.always(\n    //     new THREE.Matrix4().compose(\n    //       new THREE.Vector3(-0.2, 1.4, -0.8),\n    //       new THREE.Quaternion(0, 0, 0, 0),\n    //       new THREE.Vector3(1, 1, 1)\n    //     )\n    //   )\n    // }\n  ],\n\n  [sets.cursorHoldingPen]: [\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"q\")\n      },\n      dest: { value: \"/var/shift+q\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+q\" },\n      dest: { value: paths.actions.cursor.penPrevColor },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"e\")\n      },\n      dest: { value: \"/var/shift+e\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+e\" },\n      dest: { value: paths.actions.cursor.penNextColor },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"q\")\n      },\n      dest: { value: \"/var/notshift+q\" },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: { value: \"/var/notshift+q\" },\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"e\")\n      },\n      dest: { value: \"/var/notshift+e\" },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: { value: \"/var/notshift+e\" },\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: k(\"wheelWithShift\")\n      },\n      dest: { value: \"/var/cursorScalePenTipWheel\" },\n      xform: xforms.copy,\n      priority: 200\n    },\n    {\n      src: { value: \"/var/cursorScalePenTipWheel\" },\n      dest: { value: paths.actions.cursor.scalePenTip },\n      xform: xforms.scale(0.03)\n    },\n    {\n      src: { value: paths.device.mouse.buttonRight },\n      dest: { value: togglePenWithRMB },\n      xform: xforms.falling,\n      priority: 200\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: togglePenWithEsc },\n      xform: xforms.rising\n    },\n    {\n      src: [togglePenWithRMB, togglePenWithEsc, togglePenWithP, togglePenWithHud],\n      dest: { value: togglePen },\n      xform: xforms.any\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"z\")\n      },\n      dest: { value: paths.actions.cursor.undoDrawing },\n      priority: 1001,\n      xform: xforms.rising\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.pen.remove },\n      xform: xforms.rising,\n      priority: 200\n    }\n  ],\n\n  [sets.cursorHoldingCamera]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.falling,\n      priority: 2\n    }\n  ],\n\n  [sets.cursorHoldingInteractable]: [\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.mouse.wheel\n      },\n      dest: {\n        value: k(\"wheelWithShift\")\n      },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.mouse.wheel\n      },\n      dest: {\n        value: k(\"wheelWithoutShift\")\n      },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: {\n        value: k(\"wheelWithoutShift\")\n      },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: k(\"wheelWithShift\")\n      },\n      dest: { value: paths.actions.cursor.scaleGrabbedGrabbable },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.falling,\n      priority: 2\n    }\n  ],\n  [sets.cursorHoldingUI]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: paths.actions.transformModifier },\n      xform: xforms.copy\n    }\n  ],\n  [sets.cursorHoveringOnInteractable]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n  [sets.cursorHoveringOnVideo]: [\n    {\n      src: { value: paths.device.mouse.wheel },\n      dest: { value: paths.actions.cursor.mediaVolumeMod },\n      xform: xforms.scale(-0.3)\n    }\n  ],\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ],\n\n  [sets.cursorHoveringOnUI]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst zero = \"/vars/touchscreen/zero\";\nconst forward = \"/vars/touchscreen/pinchDeltaForward\";\nconst touchCamDelta = \"vars/touchscreen/touchCameraDelta\";\nconst touchCamDeltaX = \"vars/touchscreen/touchCameraDelta/x\";\nconst touchCamDeltaY = \"vars/touchscreen/touchCameraDelta/y\";\nconst touchCamDeltaXScaled = \"vars/touchscreen/touchCameraDelta/x/scaled\";\nconst touchCamDeltaYScaled = \"vars/touchscreen/touchCameraDelta/y/scaled\";\nconst gyroCamDelta = \"vars/gyro/gyroCameraDelta\";\nconst gyroCamDeltaXScaled = \"vars/gyro/gyroCameraDelta/x/scaled\";\nconst gyroCamDeltaYScaled = \"vars/gyro/gyroCameraDelta/y/scaled\";\nconst togglePen = \"/vars/touchscreen/togglePen\";\n\nexport const touchscreenUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {},\n      dest: { value: paths.actions.cursor.hideLine },\n      xform: xforms.always(true)\n    },\n    {\n      src: { value: paths.device.touchscreen.pinch.delta },\n      dest: { value: forward },\n      xform: xforms.scale(0.25)\n    },\n    {\n      src: { value: paths.device.touchscreen.tap2 },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.copy\n    },\n    {\n      src: {},\n      dest: { value: zero },\n      xform: xforms.always(0)\n    },\n    {\n      src: { x: zero, y: forward },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: paths.device.touchscreen.cursorPose },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.touchscreen.touchCameraDelta },\n      dest: { x: touchCamDeltaX, y: touchCamDeltaY },\n      xform: xforms.split_vec2\n    },\n    {\n      src: { value: touchCamDeltaX },\n      dest: { value: touchCamDeltaXScaled },\n      xform: xforms.scale(0.18)\n    },\n    {\n      src: { value: touchCamDeltaY },\n      dest: { value: touchCamDeltaYScaled },\n      xform: xforms.scale(0.35)\n    },\n    {\n      src: { x: touchCamDeltaXScaled, y: touchCamDeltaYScaled },\n      dest: { value: touchCamDelta },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: paths.device.gyro.averageDeltaX },\n      dest: { value: gyroCamDeltaXScaled },\n      xform: xforms.scale(1.0)\n    },\n    {\n      src: { value: paths.device.gyro.averageDeltaY },\n      dest: { value: gyroCamDeltaYScaled },\n      xform: xforms.scale(1.0)\n    },\n    {\n      src: { x: gyroCamDeltaYScaled, y: gyroCamDeltaXScaled },\n      dest: { value: gyroCamDelta },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        first: touchCamDelta,\n        second: gyroCamDelta\n      },\n      dest: { value: paths.actions.cameraDelta },\n      xform: xforms.add_vec2\n    },\n    {\n      src: { value: touchCamDelta },\n      dest: { value: paths.actions.lobbyCameraDelta },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.hud.penButton },\n      dest: { value: togglePen },\n      xform: xforms.rising\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n  [sets.cursorHoldingInteractable]: [\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.falling,\n      priority: 1\n    }\n  ],\n\n  [sets.cursorHoveringOnPen]: [],\n  [sets.cursorHoldingPen]: [\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.startDrawing },\n      xform: xforms.risingWithFrameDelay(5),\n      priority: 2\n    },\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.stopDrawing },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.pen.remove },\n      xform: xforms.rising,\n      priority: 3\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nexport const keyboardDebuggingBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst name = \"/touch/var/\";\n\nconst leftButton = paths.device.leftOculusTouch.button;\nconst leftAxis = paths.device.leftOculusTouch.axis;\nconst leftPose = paths.device.leftOculusTouch.pose;\nconst rightButton = paths.device.rightOculusTouch.button;\nconst rightAxis = paths.device.rightOculusTouch.axis;\nconst rightPose = paths.device.rightOculusTouch.pose;\n\nconst leftJoyXDeadzoned = `${name}left/joy/x/deadzoned`;\nconst leftJoyYDeadzoned = `${name}left/joy/y/deadzoned`;\nconst scaledLeftJoyX = `${name}left/scaledJoyX`;\nconst scaledLeftJoyY = `${name}left/scaledJoyY`;\nconst cursorDrop2 = `${name}right/cursorDrop2`;\nconst cursorDrop1 = `${name}right/cursorDrop1`;\nconst rightHandDrop2 = `${name}right/rightHandDrop2`;\nconst rightGripRisingGrab = `${name}right/grip/RisingGrab`;\nconst rightTriggerRisingGrab = `${name}right/trigger/RisingGrab`;\nconst leftGripRisingGrab = `${name}left/grip/RisingGrab`;\nconst leftTriggerRisingGrab = `${name}left/trigger/RisingGrab`;\nconst rightDpadNorth = `${name}rightDpad/north`;\nconst rightDpadSouth = `${name}rightDpad/south`;\nconst rightDpadEast = `${name}rightDpad/east`;\nconst rightDpadWest = `${name}rightDpad/west`;\nconst rightDpadCenter = `${name}rightDpad/center`;\nconst rightJoy = `${name}right/joy`;\nconst rightJoyY1 = `${name}right/joyY1`;\nconst rightJoyY2 = `${name}right/joyY2`;\nconst rightJoyYDeadzoned = `${name}right/joy/y/deadzoned`;\nconst leftDpadNorth = `${name}leftDpad/north`;\nconst leftDpadSouth = `${name}leftDpad/south`;\nconst leftDpadEast = `${name}leftDpad/east`;\nconst leftDpadWest = `${name}leftDpad/west`;\nconst leftDpadCenter = `${name}leftDpad/center`;\nconst leftJoy = `${name}left/joy`;\nconst oculusTouchCharacterAcceleration = `${name}characterAcceleration`;\nconst keyboardCharacterAcceleration = \"/var/keyboard/characterAcceleration\";\nconst characterAcceleration = \"/var/oculus-touch/nonNormalizedCharacterAcceleration\";\nconst wasd_vec2 = \"/var/keyboard/wasd_vec2\";\nconst arrows_vec2 = \"/var/keyboard/arrows_vec2\";\nconst keyboardBoost = \"/var/keyboard-oculus/boost\";\nconst rightBoost = \"/var/right-oculus/boost\";\nconst leftBoost = \"/var/left-oculus/boost\";\nconst rightTouchSnapRight = `${name}/right/snap-right`;\nconst rightTouchSnapLeft = `${name}/right/snap-left`;\nconst keyboardSnapRight = `${name}/keyboard/snap-right`;\nconst keyboardSnapLeft = `${name}/keyboard/snap-left`;\n\nconst lowerButtons = `${name}buttons/lower`;\n\nconst ensureFrozenViaButtons = `${name}buttons/ensureFrozen`;\nconst ensureFrozenViaKeyboard = `${name}keyboard/ensureFrozen`;\n\nconst thawViaButtons = `${name}buttons/thaw`;\nconst thawViaKeyboard = `${name}keyboard/thaw`;\n\nconst v = s => {\n  return \"/oculus-touch-user-vars/\" + s;\n};\nconst leftGripPressed1 = v(\"leftGripPressed1\");\nconst leftGripPressed2 = v(\"leftGripPressed2\");\nconst rightGripPressed1 = v(\"rightGripPressed1\");\nconst rightGripPressed2 = v(\"rightGripPressed2\");\nconst leftTriggerPressed1 = v(\"leftTriggerPressed1\");\nconst leftTriggerPressed2 = v(\"leftTriggerPressed2\");\nconst rightTriggerPressed1 = v(\"rightTriggerPressed1\");\nconst rightTriggerPressed2 = v(\"rightTriggerPressed2\");\n\nexport const oculusTouchUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: paths.device.leftOculusTouch.matrix\n      },\n      dest: {\n        value: paths.actions.leftHand.matrix\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: paths.device.rightOculusTouch.matrix\n      },\n      dest: {\n        value: paths.actions.rightHand.matrix\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [ensureFrozenViaButtons, ensureFrozenViaKeyboard],\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.any\n    },\n    {\n      src: [thawViaButtons, thawViaKeyboard],\n      dest: { value: paths.actions.thaw },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: leftButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftGripPressed1\n      },\n      dest: {\n        value: paths.actions.leftHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [leftButton(\"x\").touched, leftButton(\"y\").touched, leftButton(\"thumbStick\").touched],\n      dest: {\n        value: paths.actions.leftHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: { value: leftButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftTriggerPressed1 },\n      dest: {\n        value: paths.actions.leftHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightGripPressed1\n      },\n      dest: {\n        value: paths.actions.rightHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [rightButton(\"a\").touched, rightButton(\"b\").touched, rightButton(\"thumbStick\").touched],\n      dest: {\n        value: paths.actions.rightHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: { value: rightButton(\"trigger\").pressed },\n      dest: {\n        value: rightTriggerPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightButton(\"trigger\").pressed },\n      dest: {\n        value: rightTriggerPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightTriggerPressed1 },\n      dest: {\n        value: paths.actions.rightHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: leftAxis(\"joyX\"),\n        y: leftAxis(\"joyY\")\n      },\n      dest: {\n        value: leftJoy\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: leftJoy\n      },\n      dest: {\n        north: leftDpadNorth,\n        south: leftDpadSouth,\n        east: leftDpadEast,\n        west: leftDpadWest,\n        center: leftDpadCenter\n      },\n      xform: xforms.vec2dpad(0.2, false, true)\n    },\n    {\n      src: {\n        value: rightAxis(\"joyY\")\n      },\n      dest: { value: rightJoyY1 },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightAxis(\"joyY\")\n      },\n      dest: { value: rightJoyY2 },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: rightAxis(\"joyX\"),\n        y: rightJoyY1\n      },\n      dest: {\n        value: rightJoy\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: rightJoy\n      },\n      dest: {\n        north: rightDpadNorth,\n        south: rightDpadSouth,\n        east: rightDpadEast,\n        west: rightDpadWest,\n        center: rightDpadCenter\n      },\n      xform: xforms.vec2dpad(0.2, false, true)\n    },\n    {\n      src: {\n        value: rightDpadEast\n      },\n      dest: {\n        value: rightTouchSnapRight\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: keyboardSnapRight },\n      xform: xforms.rising\n    },\n    {\n      src: [rightTouchSnapRight, keyboardSnapRight],\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.any\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Tab\") },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: ensureFrozenViaKeyboard },\n      xform: xforms.copy\n    },\n    {\n      src: [leftButton(\"x\").pressed, rightButton(\"a\").pressed],\n      dest: { value: lowerButtons },\n      xform: xforms.any\n    },\n    {\n      src: { value: lowerButtons },\n      dest: { value: ensureFrozenViaButtons },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lowerButtons },\n      dest: { value: thawViaButtons },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: thawViaKeyboard },\n      xform: xforms.falling\n    },\n    {\n      src: {\n        value: rightDpadWest\n      },\n      dest: {\n        value: rightTouchSnapLeft\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: keyboardSnapLeft },\n      xform: xforms.rising\n    },\n    {\n      src: [rightTouchSnapLeft, keyboardSnapLeft],\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: leftAxis(\"joyY\")\n      },\n      dest: {\n        value: leftJoyYDeadzoned\n      },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: {\n        value: leftJoyYDeadzoned\n      },\n      dest: {\n        value: scaledLeftJoyY\n      },\n      xform: xforms.scale(-1.5) // horizontal character speed modifier\n    },\n    {\n      src: {\n        value: leftAxis(\"joyX\")\n      },\n      dest: {\n        value: leftJoyXDeadzoned\n      },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: {\n        value: leftJoyXDeadzoned\n      },\n      dest: {\n        value: scaledLeftJoyX\n      },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: {\n        x: scaledLeftJoyX,\n        y: scaledLeftJoyY\n      },\n      dest: { value: oculusTouchCharacterAcceleration },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: {\n        first: oculusTouchCharacterAcceleration,\n        second: keyboardCharacterAcceleration\n      },\n      dest: {\n        value: characterAcceleration\n      },\n      xform: xforms.max_vec2\n    },\n    {\n      src: {\n        value: characterAcceleration,\n        override: \"/device/overrides/foo\"\n      },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: keyboardBoost },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftButton(\"y\").pressed\n      },\n      dest: {\n        value: leftBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightButton(\"b\").pressed\n      },\n      dest: {\n        value: rightBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [keyboardBoost, leftBoost, rightBoost],\n      dest: { value: paths.actions.boost },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"/\")\n      },\n      dest: {\n        value: paths.actions.focusChatCommand\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.mediaExit },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"p\") },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"c\") },\n      dest: { value: paths.actions.toggleCamera },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"x\") },\n      dest: { value: paths.actions.takeSnapshot },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/shift+1\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/shift+2\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/shift+3\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/shift+4\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/shift+5\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/shift+6\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/shift+7\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/shift+8\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"k\")\n      },\n      dest: {\n        value: paths.actions.logInteractionState\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rightPose },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightPose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftPose },\n      dest: { value: paths.actions.leftHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    }\n  ],\n\n  [sets.leftHandHoveringOnNothing]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.cursorHoveringOnUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.cursorHoveringOnVideo]: [\n    {\n      src: { value: rightAxis(\"joyY\") },\n      dest: { value: paths.actions.cursor.mediaVolumeMod },\n      xform: xforms.scale(-0.01)\n    }\n  ],\n\n  [sets.cursorHoveringOnNothing]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.leftHandHoveringOnInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: leftTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [leftGripRisingGrab],\n      dest: { value: paths.actions.leftHand.grab },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n\n  [sets.leftHandHoldingInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.falling\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaButtons },\n      priority: 1,\n      xform: xforms.always(false)\n    }\n  ],\n\n  [sets.leftHandHoveringOnPen]: [],\n  [sets.leftHandHoldingPen]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: leftDpadEast,\n        override: \"/device/overrides/foo\"\n      },\n      dest: {\n        value: paths.actions.leftHand.penNextColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: leftDpadWest,\n        override: \"/device/overrides/foo\"\n      },\n      dest: {\n        value: paths.actions.leftHand.penPrevColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: leftJoyYDeadzoned },\n      dest: { value: paths.actions.leftHand.scalePenTip },\n      xform: xforms.scaleExp(-0.005, 5),\n      priority: 1\n    },\n    {\n      src: { value: leftButton(\"y\").pressed },\n      dest: { value: paths.actions.leftHand.switchDrawMode },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: leftButton(\"x\").pressed },\n      dest: { value: paths.actions.leftHand.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.cursorHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rightGripRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rightTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [rightGripRisingGrab],\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n\n  [sets.cursorHoldingUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: cursorDrop2 },\n      xform: xforms.falling,\n      priority: 5\n    }\n  ],\n\n  [sets.cursorHoldingInteractable]: [\n    {\n      src: { value: rightAxis(\"joyY\") },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.scale(0.1)\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: cursorDrop1 },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: [cursorDrop1, cursorDrop2],\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.any,\n      priority: 2\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaButtons },\n      priority: 1,\n      xform: xforms.always(false)\n    }\n  ],\n\n  [sets.cursorHoveringOnPen]: [],\n\n  [sets.cursorHoldingPen]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: rightButton(\"b\").pressed },\n      dest: { value: paths.actions.cursor.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightHandHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rightGripRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rightTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [rightGripRisingGrab],\n      dest: { value: paths.actions.rightHand.grab },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n\n  [sets.rightHandHoldingInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: {\n        value: rightHandDrop2\n      },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: [rightHandDrop2],\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.any,\n      priority: 2\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaButtons },\n      priority: 1,\n      xform: xforms.always(false)\n    }\n  ],\n  [sets.rightHandHoveringOnPen]: [],\n  [sets.rightHandHoldingPen]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: rightDpadEast\n      },\n      dest: {\n        value: paths.actions.rightHand.penNextColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: rightDpadWest\n      },\n      dest: {\n        value: paths.actions.rightHand.penPrevColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: rightAxis(\"joyY\")\n      },\n      dest: {\n        value: rightJoyYDeadzoned\n      },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: rightJoyYDeadzoned },\n      dest: { value: paths.actions.rightHand.scalePenTip },\n      xform: xforms.scaleExp(-0.005, 5),\n      priority: 2\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: rightButton(\"b\").pressed },\n      dest: { value: paths.actions.rightHand.switchDrawMode },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: rightButton(\"a\").pressed },\n      dest: { value: paths.actions.rightHand.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.cursorHoveringOnCamera]: [],\n  [sets.rightHandHoveringOnCamera]: [],\n  [sets.leftHandHoveringOnCamera]: [],\n\n  [sets.rightHandHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.takeSnapshot },\n      xform: xforms.rising,\n      priority: 4\n    }\n  ],\n  [sets.leftHandHoldingCamera]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.takeSnapshot },\n      xform: xforms.rising,\n      priority: 4\n    }\n  ],\n  [sets.cursorHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.takeSnapshot },\n      xform: xforms.rising,\n      priority: 4\n    }\n  ],\n\n  [sets.rightHandHoveringOnNothing]: [],\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst v = name => {\n  return `/vive-user/vive-var/${name}`;\n};\n\nconst lButton = paths.device.vive.left.button;\nconst lAxis = paths.device.vive.left.axis;\nconst lPose = paths.device.vive.left.pose;\nconst lJoy = v(\"left/joy\");\nconst lJoyScaled = v(\"left/joy/scaled\");\nconst lJoyXScaled = v(\"left/joyX/scaled\");\nconst lJoyYScaled = v(\"left/joyY/scaled\");\nconst lDpadNorth = v(\"left/dpad/north\");\nconst lDpadSouth = v(\"left/dpad/south\");\nconst lDpadEast = v(\"left/dpad/east\");\nconst lDpadWest = v(\"left/dpad/west\");\nconst lDpadCenter = v(\"left/dpad/center\");\nconst lTriggerFallingStopDrawing = v(\"left/trigger/falling/stopDrawing\");\nconst lGripFallingStopDrawing = v(\"left/grip/falling/stopDrawing\");\nconst lTriggerRisingGrab = v(\"left/trigger/rising/grab\");\nconst lGripRisingGrab = v(\"left/grab/rising/grab\");\nconst lTouchpadRising2 = v(\"left/touchpad/rising2\");\nconst lTouchpadRising1 = v(\"left/touchpad/rising1\");\nconst lCharacterAcceleration = v(\"left/characterAcceleration\");\nconst characterAcceleration = v(\"nonNormalizedCharacterAcceleration\");\nconst leftBoost = v(\"left/boost\");\n\nconst rButton = paths.device.vive.right.button;\nconst rAxis = paths.device.vive.right.axis;\nconst rPose = paths.device.vive.right.pose;\nconst rJoy = v(\"right/joy\");\nconst rDpadNorth = v(\"right/dpad/north\");\nconst rDpadSouth = v(\"right/dpad/south\");\nconst rDpadEast = v(\"right/dpad/east\");\nconst rDpadWest = v(\"right/dpad/west\");\nconst rDpadCenter = v(\"right/dpad/center\");\nconst rDpadCenterStrip = v(\"right/dpad/centerStrip\");\nconst rTouchpadRising = v(\"right/touchpad/rising\");\nconst rTouchpadFalling = v(\"right/touchpad/falling\");\nconst rightBoost = v(\"right/boost\");\nconst rTriggerRisingGrab = v(\"right/trigger/rising/grab\");\nconst rGripRisingGrab = v(\"right/grab/rising/grab\");\nconst cursorDrop1 = v(\"right/cursorDrop1\");\nconst cursorDrop2 = v(\"right/cursorDrop2\");\nconst rHandDrop1 = v(\"right/drop1\");\nconst rHandDrop2 = v(\"right/drop2\");\nconst rTriggerStopTeleport = v(\"right/trigger/stopTeleport\");\nconst rTouchpadStopTeleport = v(\"right/touchpad/stopTeleport\");\nconst rootForFrozenOverrideWhenHolding = \"rootForFrozenOverrideWhenHolding\";\n\nconst ensureFrozenViaDpad = v(\"dpad/ensureFrozen\");\nconst ensureFrozenViaKeyboard = v(\"keyboard/ensureFrozen\");\n\nconst thawViaDpad = v(\"dpad/thaw\");\nconst thawViaKeyboard = v(\"keyboard/thaw\");\n\nconst rSnapRight = v(\"right/snap-right\");\nconst rSnapLeft = v(\"right/snap-left\");\n\nconst k = name => {\n  return `/vive-user/keyboard-var/${name}`;\n};\nconst keyboardSnapRight = k(\"snap-right\");\nconst keyboardSnapLeft = k(\"snap-left\");\nconst keyboardCharacterAcceleration = k(\"characterAcceleration\");\nconst wasd_vec2 = k(\"wasd_vec2\");\nconst arrows_vec2 = k(\"arrows_vec2\");\nconst keyboardBoost = k(\"boost\");\n\nconst leftGripPressed1 = v(\"leftGripPressed1\");\nconst leftGripPressed2 = v(\"leftGripPressed2\");\nconst rightGripPressed1 = v(\"rightGripPressed1\");\nconst rightGripPressed2 = v(\"rightGripPressed2\");\nconst leftTriggerPressed1 = v(\"leftTriggerPressed1\");\nconst leftTriggerPressed2 = v(\"leftTriggerPressed2\");\nconst leftTouchpadPressed1 = v(\"leftTouchpadPressed1\");\nconst leftTouchpadPressed2 = v(\"leftTouchpadPressed2\");\nconst rightTriggerPressed1 = v(\"rightTriggerPressed1\");\nconst rightTriggerPressed2 = v(\"rightTriggerPressed2\");\nconst leftTouchpadFallingStopTeleport = v(\"leftTouchpadFallingStopTeleport\");\nconst leftTriggerFallingStopTeleport = v(\"leftTriggerFallingStopTeleport\");\nconst leftGripFallingWhileHoldingPen = v(\"leftGripFallingWhileHoldingPen\");\n\nexport const viveUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: paths.device.vive.left.matrix\n      },\n      dest: {\n        value: paths.actions.leftHand.matrix\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: paths.device.vive.right.matrix\n      },\n      dest: {\n        value: paths.actions.rightHand.matrix\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [ensureFrozenViaDpad, ensureFrozenViaKeyboard],\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.any\n    },\n    {\n      src: [thawViaDpad, thawViaKeyboard],\n      dest: { value: paths.actions.thaw },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: lButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftGripPressed1\n      },\n      dest: {\n        value: paths.actions.leftHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: lButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [lButton(\"touchpad\").touched, lButton(\"top\").touched],\n      dest: {\n        value: paths.actions.leftHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: { value: leftTriggerPressed1 },\n      dest: {\n        value: paths.actions.leftHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightGripPressed1\n      },\n      dest: {\n        value: paths.actions.rightHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [rButton(\"touchpad\").touched, rButton(\"top\").touched],\n      dest: {\n        value: paths.actions.rightHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: rButton(\"trigger\").pressed\n      },\n      dest: { value: rightTriggerPressed1 },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"trigger\").pressed\n      },\n      dest: { value: rightTriggerPressed2 },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightTriggerPressed1 },\n      dest: {\n        value: paths.actions.rightHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: lAxis(\"joyX\"),\n        y: lAxis(\"joyY\")\n      },\n      dest: {\n        value: lJoy\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: lJoy\n      },\n      dest: {\n        north: lDpadNorth,\n        south: lDpadSouth,\n        east: lDpadEast,\n        west: lDpadWest,\n        center: lDpadCenter\n      },\n      xform: xforms.vec2dpad(0.35)\n    },\n    {\n      src: {\n        value: lButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: leftTouchpadPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: lButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: leftTouchpadPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: rAxis(\"joyX\"),\n        y: rAxis(\"joyY\")\n      },\n      dest: {\n        value: rJoy\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: rJoy\n      },\n      dest: {\n        north: rDpadNorth,\n        south: rDpadSouth,\n        east: rDpadEast,\n        west: rDpadWest,\n        center: rDpadCenter\n      },\n      xform: xforms.vec2dpad(0.35, false, true)\n    },\n    {\n      src: [rDpadNorth, rDpadSouth, rDpadCenter],\n      dest: { value: rDpadCenterStrip },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: rButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: rTouchpadRising\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: rButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: rTouchpadFalling\n      },\n      xform: xforms.falling\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadEast\n      },\n      dest: {\n        value: rSnapRight\n      },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: keyboardSnapRight },\n      xform: xforms.rising\n    },\n    {\n      src: [rSnapRight, keyboardSnapRight],\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.any\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Tab\") },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: ensureFrozenViaKeyboard },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: thawViaKeyboard },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"p\") },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"c\") },\n      dest: { value: paths.actions.toggleCamera },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"x\") },\n      dest: { value: paths.actions.takeSnapshot },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rButton(\"touchpad\").pressed, bool: rDpadCenterStrip },\n      dest: { value: ensureFrozenViaDpad },\n      root: rootForFrozenOverrideWhenHolding,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: rTouchpadFalling },\n      dest: { value: thawViaDpad },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadWest\n      },\n      dest: {\n        value: rSnapLeft\n      },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: keyboardSnapLeft },\n      xform: xforms.rising\n    },\n    {\n      src: [rSnapLeft, keyboardSnapLeft],\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.any\n    },\n\n    {\n      src: {\n        value: lAxis(\"joyX\")\n      },\n      dest: {\n        value: lJoyXScaled\n      },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: {\n        value: lAxis(\"joyY\")\n      },\n      dest: { value: lJoyYScaled },\n      xform: xforms.scale(1.5) // vertical character speed modifier\n    },\n    {\n      src: {\n        x: lJoyXScaled,\n        y: lJoyYScaled\n      },\n      dest: { value: lJoyScaled },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        bool: leftTouchpadPressed2,\n        value: lJoyScaled\n      },\n      dest: { value: lCharacterAcceleration },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"/\")\n      },\n      dest: {\n        value: paths.actions.focusChatCommand\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.mediaExit },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/shift+1\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/shift+2\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/shift+3\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/shift+4\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/shift+5\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/shift+6\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/shift+7\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/shift+8\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"k\")\n      },\n      dest: {\n        value: paths.actions.logInteractionState\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: {\n        first: lCharacterAcceleration,\n        second: keyboardCharacterAcceleration\n      },\n      dest: {\n        value: characterAcceleration\n      },\n      xform: xforms.max_vec2\n    },\n    {\n      src: { value: characterAcceleration },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.normalize_vec2\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: keyboardBoost },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: lButton(\"top\").pressed\n      },\n      dest: {\n        value: leftBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"top\").pressed\n      },\n      dest: {\n        value: rightBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [keyboardBoost, leftBoost, rightBoost],\n      dest: { value: paths.actions.boost },\n      xform: xforms.any\n    },\n    {\n      src: { value: rPose },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rPose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lPose },\n      dest: { value: paths.actions.leftHand.pose },\n      xform: xforms.copy\n    }\n  ],\n  [sets.rightHandTeleporting]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rTriggerStopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: rButton(\"touchpad\").pressed },\n      dest: { value: rTouchpadStopTeleport },\n      xform: xforms.falling\n    },\n    {\n      src: [rTriggerStopTeleport, rTouchpadStopTeleport],\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.any\n    }\n  ],\n  [sets.leftHandHoveringOnNothing]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftHandTeleporting]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: leftTriggerFallingStopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [leftTriggerFallingStopTeleport, leftTouchpadFallingStopTeleport, leftGripFallingWhileHoldingPen],\n      dest: { value: paths.actions.leftHand.stopTeleport },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.rightHandHoveringOnNothing]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.cursorHoveringOnNothing]: [],\n\n  [sets.cursorHoveringOnUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.cursorHoveringOnVideo]: [\n    {\n      src: {\n        value: rAxis(\"joyY\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.mediaVolumeMod },\n      xform: xforms.touch_axis_scroll(0.1)\n    }\n  ],\n\n  [sets.leftHandHoveringOnInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: lGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: lTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: [lGripRisingGrab],\n      dest: { value: paths.actions.leftHand.grab },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.leftHandHoldingInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.falling,\n      priority: 1\n    }\n  ],\n\n  [sets.leftHandHoveringOnPen]: [],\n  [sets.leftHandHoldingPen]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.noop,\n      priority: 2\n    },\n    {\n      src: { value: leftTouchpadPressed2 },\n      dest: { value: leftTouchpadFallingStopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: {\n        value: leftTouchpadPressed2\n      },\n      dest: {\n        value: lTouchpadRising1\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: {\n        bool: lTouchpadRising1,\n        value: lDpadCenter\n      },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startDrawing },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: lTriggerFallingStopDrawing },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: lGripFallingStopDrawing },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftGripFallingWhileHoldingPen },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [lTriggerFallingStopDrawing, lGripFallingStopDrawing],\n      dest: { value: paths.actions.leftHand.stopDrawing },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: leftTouchpadPressed2\n      },\n      dest: {\n        value: lTouchpadRising2\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: {\n        bool: lTouchpadRising2,\n        value: lDpadNorth\n      },\n      dest: {\n        value: paths.actions.leftHand.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        bool: lTouchpadRising2,\n        value: lDpadSouth\n      },\n      dest: {\n        value: paths.actions.leftHand.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        value: lAxis(\"joyX\"),\n        touching: lButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.leftHand.scalePenTip },\n      xform: xforms.touch_axis_scroll(0.05)\n    },\n    {\n      src: { value: lButton(\"top\").pressed },\n      dest: { value: paths.actions.leftHand.undoDrawing },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.cursorHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: [rGripRisingGrab],\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.cursorHoldingUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: {\n        value: cursorDrop2\n      },\n      xform: xforms.falling,\n      priority: 4\n    }\n  ],\n\n  [sets.cursorHoldingInteractable]: [\n    {\n      src: {\n        value: rAxis(\"joyY\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.touch_axis_scroll(-1)\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: cursorDrop1 },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [cursorDrop1, cursorDrop2],\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.any\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaDpad },\n      root: rootForFrozenOverrideWhenHolding,\n      xform: xforms.always(false)\n    }\n  ],\n\n  [sets.cursorHoveringOnPen]: [],\n\n  [sets.cursorHoldingPen]: [\n    {\n      src: [cursorDrop1],\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.noop,\n      priority: 1\n    },\n    {\n      src: [cursorDrop2],\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.noop,\n      priority: 1\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadCenter\n      },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: rAxis(\"joyX\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.scalePenTip },\n      xform: xforms.touch_axis_scroll(0.1)\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadNorth\n      },\n      dest: {\n        value: paths.actions.cursor.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadSouth\n      },\n      dest: {\n        value: paths.actions.cursor.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: { value: rButton(\"top\").pressed },\n      dest: { value: paths.actions.cursor.undoDrawing },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.rightHandHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [rGripRisingGrab],\n      dest: { value: paths.actions.rightHand.grab },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.rightHandHoldingInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rHandDrop1 },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: {\n        value: rHandDrop2\n      },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: [rHandDrop1],\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.any,\n      priority: 2\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaDpad },\n      root: rootForFrozenOverrideWhenHolding,\n      xform: xforms.always(false)\n    }\n  ],\n  [sets.rightHandHoveringOnPen]: [],\n  [sets.rightHandHoldingPen]: [\n    {\n      src: [rHandDrop1],\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.noop,\n      priority: 1\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadCenter\n      },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadNorth\n      },\n      dest: {\n        value: paths.actions.rightHand.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadSouth\n      },\n      dest: {\n        value: paths.actions.rightHand.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        value: rAxis(\"joyX\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.rightHand.scalePenTip },\n      xform: xforms.touch_axis_scroll(0.05)\n    },\n    {\n      src: { value: rButton(\"top\").pressed },\n      dest: { value: paths.actions.rightHand.undoDrawing },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.cursorHoveringOnCamera]: [],\n  [sets.rightHandHoveringOnCamera]: [],\n  [sets.leftHandHoveringOnCamera]: [],\n\n  [sets.rightHandHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.takeSnapshot },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.noop },\n      xform: xforms.falling,\n      priority: 3\n    }\n  ],\n  [sets.leftHandHoldingCamera]: [\n    {\n      src: { value: lButton(\"trigger\").pressed },\n      dest: { value: paths.actions.leftHand.takeSnapshot },\n      xform: xforms.rising\n    }\n  ],\n  [sets.cursorHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.takeSnapshot },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.noop },\n      xform: xforms.falling,\n      priority: 3\n    }\n  ],\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst lGripPressed = paths.device.wmr.left.grip.pressed;\nconst rGripPressed = paths.device.wmr.right.grip.pressed;\nconst rTriggerPressed = paths.device.wmr.right.trigger.pressed;\n\nconst rJoyNorth = paths.device.wmr.v(\"right/joy/north\");\nconst rGripRising = paths.device.wmr.v(\"right/grip/rising\");\nconst rTriggerRising = paths.device.wmr.v(\"right/trigger/rising\");\nconst rGripFalling = paths.device.wmr.v(\"right/grip/falling\");\nconst rTriggerFalling = paths.device.wmr.v(\"right/trigger/falling\");\n\nfunction dpadVariables(hand) {\n  return {\n    padWest: paths.device.wmr.v(hand + \"/pad/west\"),\n    padEast: paths.device.wmr.v(hand + \"/pad/east\"),\n    padNorth: paths.device.wmr.v(hand + \"/pad/north\"),\n    padSouth: paths.device.wmr.v(hand + \"/pad/south\"),\n    padCenter: paths.device.wmr.v(hand + \"/pad/center\"),\n    padCenterStrip: paths.device.wmr.v(hand + \"/pad/centerStrip\")\n  };\n}\n\nfunction dpadBindings(hand) {\n  const { padWest, padEast, padNorth, padSouth, padCenter, padCenterStrip } = dpadVariables(hand);\n  const pad = paths.device.wmr.v(hand + \"/pad\");\n  return [\n    {\n      src: {\n        x: paths.device.wmr[hand].touchpad.axisX,\n        y: paths.device.wmr[hand].touchpad.axisY\n      },\n      dest: { value: pad },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: pad },\n      dest: {\n        west: padWest,\n        east: padEast,\n        north: padNorth,\n        south: padSouth,\n        center: padCenter\n      },\n      xform: xforms.vec2dpad(0.5, false, false)\n    },\n    {\n      src: [padNorth, padCenter, padSouth],\n      dest: { value: padCenterStrip },\n      xform: xforms.any\n    }\n  ];\n}\n\nconst neverFrozenBinding = {\n  src: {},\n  dest: { value: paths.actions.ensureFrozen },\n  xform: xforms.always(false)\n};\n\nfunction penBindings(hand, forCursor) {\n  const padY = paths.device.wmr[hand].touchpad.axisY;\n  const triggerPressed = paths.device.wmr[hand].trigger.pressed;\n  const padPressed = paths.device.wmr[hand].touchpad.pressed;\n  const padTouched = paths.device.wmr[hand].touchpad.touched;\n\n  const padRising = paths.device.wmr.v(hand + \"/pad/rising\");\n  const padCenterStripTouched = paths.device.wmr.v(hand + \"/pad/centerStrip/touched\");\n  const { padWest, padEast, padCenter, padCenterStrip } = dpadVariables(hand);\n\n  const actions = paths.actions[forCursor ? \"cursor\" : hand + \"Hand\"];\n\n  return [\n    neverFrozenBinding,\n    ...dpadBindings(hand),\n    {\n      src: { value: triggerPressed },\n      dest: { value: actions.startDrawing },\n      xform: xforms.rising\n    },\n    {\n      src: { value: triggerPressed },\n      dest: { value: actions.stopDrawing },\n      xform: xforms.falling\n    },\n    {\n      src: { value: padPressed },\n      dest: { value: padRising },\n      xform: xforms.rising\n    },\n    {\n      src: { bool: padRising, value: padWest },\n      dest: { value: actions.penPrevColor },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { bool: padRising, value: padEast },\n      dest: { value: actions.penNextColor },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: [padCenterStrip, padTouched],\n      dest: { value: padCenterStripTouched },\n      xform: xforms.all\n    },\n    {\n      src: { value: padY, touching: padCenterStripTouched },\n      dest: { value: actions.scalePenTip },\n      xform: xforms.touch_axis_scroll(-0.05)\n    },\n    {\n      src: [padRising, padCenter],\n      dest: { value: actions.undoDrawing },\n      xform: xforms.all\n    }\n  ];\n}\n\nfunction handPoseBindings(hand) {\n  const padTouched = paths.device.wmr[hand].touchpad.touched;\n  const triggerPressed = paths.device.wmr[hand].trigger.pressed;\n  const gripPressed = paths.device.wmr[hand].grip.pressed;\n  const actions = paths.actions[hand + \"Hand\"];\n  return [\n    {\n      src: { value: padTouched },\n      dest: { value: actions.thumb },\n      xform: xforms.copy\n    },\n    {\n      src: { value: triggerPressed },\n      dest: { value: actions.index },\n      xform: xforms.copy\n    },\n    {\n      src: { value: gripPressed },\n      dest: { value: actions.middleRingPinky },\n      xform: xforms.copy\n    }\n  ];\n}\n\nfunction freezeBindings() {\n  const leftPadPressed = paths.device.wmr.left.touchpad.pressed;\n  const rightPadPressed = paths.device.wmr.right.touchpad.pressed;\n  const leftPadFalling = paths.device.wmr.v(\"left/touchpad/falling\");\n  const rightPadFalling = paths.device.wmr.v(\"right/touchpad/falling\");\n  const keyboardSaceFalling = paths.device.wmr.k(\"space/falling\");\n  return [\n    {\n      src: [paths.device.keyboard.key(\" \"), leftPadPressed, rightPadPressed],\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.any\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: keyboardSaceFalling },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Tab\") },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: leftPadPressed },\n      dest: { value: leftPadFalling },\n      xform: xforms.falling\n    },\n    {\n      src: { value: rightPadPressed },\n      dest: { value: rightPadFalling },\n      xform: xforms.falling\n    },\n    {\n      src: [keyboardSaceFalling, leftPadFalling, rightPadFalling],\n      dest: { value: paths.actions.thaw },\n      xform: xforms.any\n    }\n  ];\n}\n\nfunction characterAccelerationBindings() {\n  const wasd_vec2 = paths.device.wmr.k(\"wasd_vec2\");\n  const arrows_vec2 = paths.device.wmr.k(\"arrows_vec2\");\n  const keyboardCharacterAcceleration = paths.device.wmr.k(\"characterAcceleration\");\n  const lJoyXDeadzoned = paths.device.wmr.v(\"left/joy/x/deadzoned\");\n  const lJoyYDeadzoned = paths.device.wmr.v(\"left/joy/y/deadzoned\");\n  const lJoyXScaled = paths.device.wmr.v(\"left/joy/x/scaled\");\n  const lJoyYScaled = paths.device.wmr.v(\"left/joy/y/scaled\");\n  const lCharacterAcceleration = paths.device.wmr.v(\"left/characterAcceleration\");\n  return [\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: { value: paths.device.wmr.left.joystick.axisX },\n      dest: { value: lJoyXDeadzoned },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: lJoyXDeadzoned },\n      dest: { value: lJoyXScaled },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: { value: paths.device.wmr.left.joystick.axisY },\n      dest: { value: lJoyYDeadzoned },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: lJoyYDeadzoned },\n      dest: { value: lJoyYScaled },\n      xform: xforms.scale(-1.5) // vertical character speed modifier\n    },\n    {\n      src: { x: lJoyXScaled, y: lJoyYScaled },\n      dest: { value: lCharacterAcceleration },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        first: lCharacterAcceleration,\n        second: keyboardCharacterAcceleration\n      },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: [\n        paths.device.wmr.left.trigger.pressed,\n        paths.device.wmr.right.trigger.pressed,\n        paths.device.keyboard.key(\"shift\")\n      ],\n      dest: { value: paths.actions.boost },\n      xform: xforms.any\n    }\n  ];\n}\n\nfunction cursorModDeltaBindings() {\n  const { padNorth, padSouth } = dpadVariables(\"right\");\n  const rPadNorthOrSouth = paths.device.wmr.v(\"right/pad/northOrSouth\");\n  const rPadNorthOrSouthPressed = paths.device.wmr.v(\"right/pad/northOrSouth/pressed\");\n  const rPadNorthOrSouthPressedY = paths.device.wmr.v(\"right/pad/northOrSouthpressed/y\");\n  return [\n    ...dpadBindings(\"right\"),\n    {\n      src: [padNorth, padSouth],\n      dest: { value: rPadNorthOrSouth },\n      xform: xforms.any\n    },\n    {\n      src: [rPadNorthOrSouth, paths.device.wmr.right.touchpad.pressed],\n      dest: { value: rPadNorthOrSouthPressed },\n      xform: xforms.all\n    },\n    {\n      src: {\n        bool: rPadNorthOrSouthPressed,\n        value: paths.device.wmr.right.touchpad.axisY\n      },\n      dest: { value: rPadNorthOrSouthPressedY },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: rPadNorthOrSouthPressedY },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.scale(0.1)\n    }\n  ];\n}\n\nfunction cursorMediaVolumeModBindings() {\n  const hand = \"right\";\n  const padY = paths.device.wmr[hand].touchpad.axisY;\n  const padTouched = paths.device.wmr[hand].touchpad.touched;\n\n  const padCenterStripTouched = paths.device.wmr.v(hand + \"/pad/centerStrip/touched\");\n  const { padCenterStrip } = dpadVariables(hand);\n\n  return [\n    ...dpadBindings(hand),\n    {\n      src: [padCenterStrip, padTouched],\n      dest: { value: padCenterStripTouched },\n      xform: xforms.all\n    },\n    {\n      src: { value: padY, touching: padCenterStripTouched },\n      dest: { value: paths.actions.cursor.mediaVolumeMod },\n      xform: xforms.touch_axis_scroll(-0.1)\n    }\n  ];\n}\n\nfunction holdingCameraBindings(hand, forCursor) {\n  const actions = paths.actions[forCursor ? \"cursor\" : hand + \"Hand\"];\n  return [\n    neverFrozenBinding,\n    {\n      src: { value: paths.device.wmr[hand].trigger.pressed },\n      dest: { value: actions.takeSnapshot },\n      xform: xforms.rising\n    }\n  ];\n}\n\nfunction teleportationAndRotationBindings() {\n  const rJoy = paths.device.wmr.v(\"right/joy\");\n  const rJoyWest = paths.device.wmr.v(\"right/joy/west\");\n  const rJoyEast = paths.device.wmr.v(\"right/joy/East\");\n  const rJoyWestRising = paths.device.wmr.v(\"right/joy/west/rising\");\n  const rJoyEastRising = paths.device.wmr.v(\"right/joy/east/rising\");\n  const keyboardQRising = paths.device.wmr.k(\"q/rising\");\n  const keyboardERising = paths.device.wmr.k(\"e/rising\");\n  return [\n    {\n      src: {\n        x: paths.device.wmr.right.joystick.axisX,\n        y: paths.device.wmr.right.joystick.axisY\n      },\n      dest: { value: rJoy },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: rJoy },\n      dest: {\n        north: rJoyNorth,\n        west: rJoyWest,\n        east: rJoyEast\n      },\n      xform: xforms.vec2dpad(0.2, false, false)\n    },\n    {\n      src: { value: rJoyNorth },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rJoyWest },\n      dest: { value: rJoyWestRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rJoyEast },\n      dest: { value: rJoyEastRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: keyboardQRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: keyboardERising },\n      xform: xforms.rising\n    },\n    {\n      src: [rJoyWestRising, keyboardQRising],\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.any\n    },\n    {\n      src: [rJoyEastRising, keyboardERising],\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.any\n    }\n  ];\n}\n\nexport const wmrUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: { value: paths.device.wmr.left.matrix },\n      dest: { value: paths.actions.leftHand.matrix },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.right.matrix },\n      dest: { value: paths.actions.rightHand.matrix },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.left.pose },\n      dest: { value: paths.actions.leftHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.right.pose },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.right.pose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    },\n    ...handPoseBindings(\"left\"),\n    ...handPoseBindings(\"right\"),\n    ...freezeBindings(),\n    ...teleportationAndRotationBindings(),\n    ...characterAccelerationBindings(),\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"/\")\n      },\n      dest: {\n        value: paths.actions.focusChatCommand\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.mediaExit },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/shift+1\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/shift+2\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/shift+3\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/shift+4\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/shift+5\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/shift+6\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/shift+7\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/shift+8\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftHandHoveringOnNothing]: [],\n  [sets.cursorHoveringOnNothing]: [],\n  [sets.rightHandHoveringOnNothing]: [],\n\n  [sets.rightHandTeleporting]: [\n    {\n      src: { value: rJoyNorth },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.falling\n    }\n  ],\n\n  [sets.cursorHoveringOnUI]: [\n    {\n      src: { value: rTriggerPressed },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.cursorHoveringOnVideo]: [...cursorMediaVolumeModBindings()],\n\n  [sets.leftHandHoveringOnInteractable]: [\n    {\n      src: { value: lGripPressed },\n      dest: { value: paths.actions.leftHand.grab },\n      xform: xforms.rising\n    }\n  ],\n  [sets.cursorHoveringOnInteractable]: [\n    {\n      src: { value: rGripPressed },\n      dest: { value: rGripRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rTriggerPressed },\n      dest: { value: rTriggerRising },\n      xform: xforms.rising\n    },\n    {\n      src: [rGripRising, rTriggerRising],\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.any\n    }\n  ],\n  [sets.rightHandHoveringOnInteractable]: [\n    {\n      src: { value: rGripPressed },\n      dest: { value: paths.actions.rightHand.grab },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftHandHoldingInteractable]: [\n    neverFrozenBinding,\n    {\n      src: { value: lGripPressed },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.falling\n    }\n  ],\n  [sets.cursorHoldingInteractable]: [\n    neverFrozenBinding,\n    ...cursorModDeltaBindings(),\n    {\n      src: { value: rGripPressed },\n      dest: { value: rGripFalling },\n      xform: xforms.falling\n    },\n    {\n      src: { value: rTriggerPressed },\n      dest: { value: rTriggerFalling },\n      xform: xforms.falling\n    },\n    {\n      src: [rGripFalling, rTriggerFalling],\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.any\n    }\n  ],\n  [sets.rightHandHoldingInteractable]: [\n    neverFrozenBinding,\n    {\n      src: { value: rGripPressed },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.falling\n    }\n  ],\n\n  [sets.leftHandHoveringOnPen]: [],\n  [sets.cursorHoveringOnPen]: [],\n  [sets.rightHandHoveringOnPen]: [],\n\n  [sets.leftHandHoldingPen]: penBindings(\"left\"),\n  [sets.cursorHoldingPen]: penBindings(\"right\", true),\n  [sets.rightHandHoldingPen]: penBindings(\"right\"),\n\n  [sets.leftHandHoveringOnCamera]: [],\n  [sets.cursorHoveringOnCamera]: [],\n  [sets.rightHandHoveringOnCamera]: [],\n\n  [sets.leftHandHoldingCamera]: holdingCameraBindings(\"left\"),\n  [sets.cursorHoldingCamera]: holdingCameraBindings(\"right\", true),\n  [sets.rightHandHoldingCamera]: holdingCameraBindings(\"right\"),\n\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst button = paths.device.xbox.button;\nconst axis = paths.device.xbox.axis;\nconst scaledRightJoystickVertical = paths.device.xbox.v(\"scaledRightJoystickVertical\");\nconst scaledLeftJoystickCursorDelta = paths.device.xbox.v(\"scaledLeftJoystickCursorDelta\");\nconst deadzonedRightJoystickHorizontal = paths.device.xbox.v(\"deadzonedRightJoystickHorizontal\");\nconst deadzonedRightJoystickVertical = paths.device.xbox.v(\"deadzonedRightJoystickVertical\");\nconst deadzonedLeftJoystickHorizontal = paths.device.xbox.v(\"deadzonedLeftJoystickHorizontal\");\nconst deadzonedLeftJoystickVertical = paths.device.xbox.v(\"deadzonedLeftJoystickVertical\");\nconst vec2Zero = paths.device.xbox.v(\"vec2Zero\");\nconst zero = paths.device.xbox.v(\"zero\");\n\nfunction characterAccelerationBindings(disableForwardOnTrigger) {\n  const scaledLeftJoystickHorizontal = paths.device.xbox.v(\"scaledLeftJoystickHorizontal\");\n  const scaledLeftJoystickVertical = paths.device.xbox.v(\"scaledLeftJoystickVertical\");\n  const scaledLeftJoystickForwardAcceleration = paths.device.xbox.v(\"scaledLeftJoystickForwardAcceleration\");\n  return [\n    {\n      src: { value: deadzonedLeftJoystickHorizontal },\n      dest: { value: scaledLeftJoystickHorizontal },\n      xform: xforms.scale(1.5) // horizontal move speed modifier\n    },\n    {\n      src: { value: deadzonedLeftJoystickVertical },\n      dest: { value: scaledLeftJoystickVertical },\n      xform: xforms.scale(-1.25) // vertical move speed modifier\n    },\n    {\n      src: {\n        bool: button(\"leftTrigger\").pressed,\n        value: scaledLeftJoystickVertical\n      },\n      dest: { value: scaledLeftJoystickForwardAcceleration },\n      xform: disableForwardOnTrigger ? xforms.copyIfFalse : xforms.copy\n    },\n    {\n      src: {\n        x: scaledLeftJoystickHorizontal,\n        y: scaledLeftJoystickForwardAcceleration\n      },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.compose_vec2\n    }\n  ];\n}\n\nexport const xboxControllerUserBindings = addSetsToBindings({\n  [sets.cursorHoldingPen]: [\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.startDrawing },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.stopDrawing },\n      xform: xforms.falling,\n      priority: 200\n    },\n    {\n      src: { value: button(\"b\").pressed },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"y\").pressed },\n      dest: { value: paths.actions.cursor.undoDrawing },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: button(\"a\").pressed },\n      dest: { value: paths.actions.cursor.penNextColor },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"x\").pressed },\n      dest: { value: paths.actions.cursor.penPrevColor },\n      xform: xforms.rising\n    }\n  ],\n  [sets.global]: [\n    {\n      src: {},\n      dest: { value: paths.actions.cursor.hideLine },\n      xform: xforms.always(true)\n    },\n    {\n      src: { value: axis(\"rightJoystickHorizontal\") },\n      dest: { value: deadzonedRightJoystickHorizontal },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: deadzonedRightJoystickHorizontal },\n      dest: { value: paths.actions.angularVelocity },\n      xform: xforms.scale(0.6) // horizontal look speed modifier\n    },\n    {\n      src: { value: axis(\"rightJoystickVertical\") },\n      dest: { value: deadzonedRightJoystickVertical },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: deadzonedRightJoystickVertical },\n      dest: { value: scaledRightJoystickVertical },\n      xform: xforms.scale(-1.25) // vertical look speed modifier\n    },\n    {\n      src: {},\n      dest: { value: zero },\n      xform: xforms.always(0)\n    },\n    {\n      src: {\n        x: zero,\n        y: scaledRightJoystickVertical\n      },\n      dest: { value: paths.actions.cameraDelta },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: paths.actions.cameraDelta },\n      dest: { value: paths.actions.lobbyCameraDelta },\n      xform: xforms.copy\n    },\n    {\n      src: { value: axis(\"leftJoystickHorizontal\") },\n      dest: { value: deadzonedLeftJoystickHorizontal },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: axis(\"leftJoystickVertical\") },\n      dest: { value: deadzonedLeftJoystickVertical },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: button(\"leftTrigger\").pressed },\n      dest: { value: paths.actions.boost },\n      xform: xforms.copy\n    },\n    {\n      src: { value: button(\"leftBumper\").pressed },\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"rightBumper\").pressed },\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.rising\n    },\n    {\n      src: {},\n      dest: { value: vec2Zero },\n      xform: xforms.vec2Zero\n    },\n    {\n      src: { value: vec2Zero },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.poseFromCameraProjection()\n    },\n    {\n      src: { value: button(\"y\").pressed },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising,\n      priority: 100\n    },\n    {\n      src: { value: button(\"dpadUp\").pressed },\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.copy\n    },\n    {\n      src: { value: button(\"dpadUp\").pressed },\n      dest: { value: paths.actions.thaw },\n      xform: xforms.falling\n    },\n    {\n      src: { value: button(\"start\").pressed },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"a\").pressed },\n      dest: { value: paths.actions.startGazeTeleport },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"a\").pressed },\n      dest: { value: paths.actions.stopGazeTeleport },\n      xform: xforms.falling\n    }\n  ],\n  [sets.cursorHoldingNothing]: [...characterAccelerationBindings()],\n  [sets.cursorHoldingInteractable]: [\n    ...characterAccelerationBindings(true),\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.falling,\n      priority: 100\n    },\n    {\n      src: { value: deadzonedLeftJoystickVertical },\n      dest: { value: scaledLeftJoystickCursorDelta },\n      xform: xforms.scale(0.25)\n    },\n    {\n      src: {\n        bool: button(\"leftTrigger\").pressed,\n        value: scaledLeftJoystickCursorDelta\n      },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.copyIfTrue\n    }\n  ],\n  [sets.cursorHoveringOnUI]: [\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising\n    }\n  ],\n  [sets.cursorHoveringOnInteractable]: [\n    ...characterAccelerationBindings(),\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising,\n      priority: 100\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\n// vars\nconst v = s => `/vars/daydream/${s}`;\nconst touchpad = v(\"touchpad/axis\");\nconst touchpadRising = v(\"touchpad/rising\");\nconst touchpadFalling = v(\"touchpad/falling\");\nconst touchpadPressed = v(\"touchpad/pressed\");\nconst dpadNorth = v(\"dpad/north\");\nconst dpadSouth = v(\"dpad/south\");\nconst dpadEast = v(\"dpad/east\");\nconst dpadWest = v(\"dpad/west\");\nconst dpadCenter = v(\"dpad/center\");\nconst brushSizeDelta = v(\"brushSizeDelta\");\nconst cursorModDelta = v(\"cursorModDelta\");\nconst dpadSouthDrop = v(\"dropSouth\");\nconst dpadCenterDrop = v(\"dropCenter\");\n\nconst grabBinding = [\n  {\n    src: { value: dpadCenter, bool: touchpadRising },\n    dest: { value: paths.actions.cursor.grab },\n    xform: xforms.copyIfTrue,\n    priority: 100\n  }\n];\n\nconst dropOnCenterOrSouth = [\n  {\n    src: { value: dpadCenter, bool: touchpadRising },\n    dest: { value: dpadCenterDrop },\n    xform: xforms.copyIfTrue,\n    priority: 100\n  },\n  {\n    src: { value: dpadSouth, bool: touchpadRising },\n    dest: { value: dpadSouthDrop },\n    xform: xforms.copyIfTrue,\n    priority: 100\n  },\n  {\n    src: [dpadCenterDrop, dpadSouthDrop],\n    dest: { value: paths.actions.cursor.drop },\n    xform: xforms.any\n  }\n];\n\nexport const daydreamUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: { value: paths.device.daydream.matrix },\n      dest: { value: paths.actions.rightHand.matrix },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: paths.device.daydream.axis(\"touchpadX\"),\n        y: paths.device.daydream.axis(\"touchpadY\")\n      },\n      dest: { value: touchpad },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: paths.device.daydream.button(\"touchpad\").pressed\n      },\n      dest: { value: touchpadRising },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.daydream.button(\"touchpad\").pressed\n      },\n      dest: { value: touchpadFalling },\n      xform: xforms.falling\n    },\n    {\n      src: {\n        value: paths.device.daydream.button(\"touchpad\").pressed\n      },\n      dest: { value: touchpadPressed },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: touchpad\n      },\n      dest: {\n        north: dpadNorth,\n        south: dpadSouth,\n        east: dpadEast,\n        west: dpadWest,\n        center: dpadCenter\n      },\n      xform: xforms.vec2dpad(0.5)\n    },\n    {\n      src: {\n        value: dpadEast,\n        bool: touchpadRising\n      },\n      dest: {\n        value: paths.actions.snapRotateRight\n      },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        value: dpadWest,\n        bool: touchpadRising\n      },\n      dest: {\n        value: paths.actions.snapRotateLeft\n      },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        value: dpadCenter,\n        bool: touchpadRising\n      },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: paths.device.daydream.pose },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.daydream.pose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    }\n  ],\n\n  [sets.cursorHoveringOnInteractable]: grabBinding,\n  [sets.cursorHoveringOnUI]: grabBinding,\n\n  [sets.cursorHoveringOnVideo]: [\n    {\n      src: {\n        value: paths.device.daydream.axis(\"touchpadY\"),\n        touching: paths.device.daydream.button(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.mediaVolumeMod },\n      xform: xforms.touch_axis_scroll(-0.1)\n    }\n  ],\n\n  [sets.cursorHoldingInteractable]: [\n    {\n      src: { value: touchpadFalling },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: paths.device.daydream.axis(\"touchpadY\"),\n        touching: paths.device.daydream.button(\"touchpad\").touched\n      },\n      dest: { value: cursorModDelta },\n      xform: xforms.touch_axis_scroll()\n    },\n    {\n      src: { value: cursorModDelta },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.copy\n    }\n  ],\n\n  [sets.rightHandTeleporting]: [\n    {\n      src: { value: touchpadFalling },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.copy\n    }\n  ],\n\n  [sets.cursorHoldingPen]: [\n    {\n      src: { value: dpadNorth, bool: touchpadRising },\n      dest: { value: paths.actions.cursor.startDrawing },\n      xform: xforms.copyIfTrue,\n      priority: 100\n    },\n    {\n      src: { value: touchpadFalling },\n      dest: { value: paths.actions.cursor.stopDrawing },\n      xform: xforms.copy,\n      priority: 100\n    },\n    {\n      src: {\n        value: paths.device.daydream.axis(\"touchpadX\"),\n        touching: paths.device.daydream.button(\"touchpad\").touched\n      },\n      dest: { value: brushSizeDelta },\n      xform: xforms.touch_axis_scroll(-0.1)\n    },\n    {\n      src: {\n        value: brushSizeDelta,\n        bool: touchpadPressed\n      },\n      dest: { value: paths.actions.cursor.scalePenTip },\n      xform: xforms.copyIfFalse,\n      priority: 100\n    },\n    {\n      src: { value: dpadEast, bool: touchpadRising },\n      dest: {\n        value: paths.actions.cursor.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 100\n    },\n    {\n      src: { value: dpadWest, bool: touchpadRising },\n      dest: {\n        value: paths.actions.cursor.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 100\n    },\n    {\n      src: {\n        value: cursorModDelta,\n        bool: touchpadPressed\n      },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.copyIfFalse,\n      priority: 100\n    },\n    ...dropOnCenterOrSouth\n  ],\n\n  [sets.cursorHoldingCamera]: [\n    // Don't drop on touchpad release\n    {\n      src: {\n        value: touchpadFalling\n      },\n      xform: xforms.noop,\n      priority: 100\n    },\n    {\n      src: {\n        value: dpadNorth,\n        bool: touchpadRising\n      },\n      dest: { value: paths.actions.cursor.takeSnapshot },\n      xform: xforms.copyIfTrue,\n      priority: 100\n    },\n    ...dropOnCenterOrSouth\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nexport const cardboardUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: { value: paths.device.touchscreen.isTouching },\n      dest: {\n        value: paths.actions.startGazeTeleport\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.touchscreen.isTouching },\n      dest: {\n        value: paths.actions.stopGazeTeleport\n      },\n      xform: xforms.falling\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nexport default function generate3DOFTriggerBindings(device) {\n  const touchpad = device.v(\"touchpad\");\n  const touchpadButton = device.button(\"touchpad\");\n  const triggerButton = device.button(\"trigger\");\n  const touchpadX = device.axis(\"touchpadX\");\n  const touchpadXForPen = device.axis(\"touchpadXForPen\");\n  const touchpadY = device.axis(\"touchpadY\");\n  const touchpadYForPen = device.axis(\"touchpadYForPen\");\n  const touchpadRising = device.v(\"touchpad/rising\");\n  const touchpadFalling = device.v(\"touchpad/falling\");\n  const triggerRising = device.v(\"trigger/rising\");\n  const triggerFalling = device.v(\"trigger/falling\");\n  const dpadNorth = device.v(\"dpad/north\");\n  const dpadSouth = device.v(\"dpad/south\");\n  const dpadEast = device.v(\"dpad/east\");\n  const dpadWest = device.v(\"dpad/west\");\n  const dpadCenter = device.v(\"dpad/center\");\n  const dpadCenterStrip = device.v(\"dpad/centerStrip\");\n  const dpadBottomCenterStrip = device.v(\"dpad/bottomCenterStrip\");\n  const togglePen = \"/vars/oculus-go/togglePen\";\n\n  const grabBinding = {\n    src: {\n      value: triggerRising\n    },\n    dest: { value: paths.actions.cursor.grab },\n    xform: xforms.copy,\n    priority: 200\n  };\n  const dropBinding = {\n    src: {\n      value: triggerFalling\n    },\n    dest: { value: paths.actions.cursor.drop },\n    xform: xforms.copy,\n    priority: 200\n  };\n\n  return addSetsToBindings({\n    [sets.global]: [\n      {\n        src: { value: device.matrix },\n        dest: { value: paths.actions.rightHand.matrix },\n        xform: xforms.copy\n      },\n      {\n        src: {\n          value: triggerButton.pressed\n        },\n        dest: { value: triggerRising },\n        xform: xforms.rising\n      },\n      {\n        src: {\n          value: triggerButton.pressed\n        },\n        dest: { value: triggerFalling },\n        xform: xforms.falling\n      },\n      {\n        src: {\n          value: touchpadButton.pressed\n        },\n        dest: { value: touchpadRising },\n        xform: xforms.rising,\n        priority: 100\n      },\n      {\n        src: {\n          value: touchpadButton.pressed\n        },\n        dest: { value: touchpadFalling },\n        xform: xforms.falling,\n        priority: 100\n      },\n      {\n        src: {\n          x: touchpadX,\n          y: touchpadY\n        },\n        dest: { value: touchpad },\n        xform: xforms.compose_vec2\n      },\n      {\n        src: { value: touchpadX },\n        dest: { value: touchpadXForPen },\n        xform: xforms.copy\n      },\n      {\n        src: { value: touchpadY },\n        dest: { value: touchpadYForPen },\n        xform: xforms.copy\n      },\n      {\n        src: {\n          value: touchpad\n        },\n        dest: {\n          north: dpadNorth,\n          south: dpadSouth,\n          east: dpadEast,\n          west: dpadWest,\n          center: dpadCenter\n        },\n        xform: xforms.vec2dpad(0.3)\n      },\n      {\n        src: [dpadCenter, dpadSouth],\n        dest: { value: dpadBottomCenterStrip },\n        xform: xforms.any\n      },\n      {\n        src: [dpadNorth, dpadBottomCenterStrip],\n        dest: { value: dpadCenterStrip },\n        xform: xforms.any\n      },\n      {\n        src: {\n          value: dpadCenterStrip,\n          bool: touchpadButton.pressed\n        },\n        dest: {\n          value: paths.actions.ensureFrozen\n        },\n        priority: 100,\n        xform: xforms.copyIfTrue\n      },\n      {\n        src: { value: touchpadFalling },\n        dest: {\n          value: paths.actions.thaw\n        },\n        xform: xforms.copy\n      },\n      {\n        src: {\n          value: dpadEast,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.snapRotateRight\n        },\n        xform: xforms.copyIfTrue,\n        priority: 100\n      },\n      {\n        src: {\n          value: dpadWest,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.snapRotateLeft\n        },\n        xform: xforms.copyIfTrue,\n        priority: 100\n      },\n      {\n        src: {\n          value: triggerRising\n        },\n        dest: { value: paths.actions.rightHand.startTeleport },\n        xform: xforms.copy,\n        priority: 100\n      },\n      {\n        src: { value: device.pose },\n        dest: { value: paths.actions.cursor.pose },\n        xform: xforms.copy\n      },\n      {\n        src: { value: device.pose },\n        dest: { value: paths.actions.rightHand.pose },\n        xform: xforms.copy\n      },\n      {\n        src: { value: touchpadButton.touched },\n        dest: { value: paths.actions.rightHand.thumb },\n        xform: xforms.copy\n      },\n      {\n        src: { value: triggerButton.pressed },\n        dest: { value: paths.actions.rightHand.index },\n        xform: xforms.copy\n      },\n      {\n        src: { value: triggerButton.pressed },\n        dest: { value: paths.actions.rightHand.middleRingPinky },\n        xform: xforms.copy\n      }\n    ],\n\n    [sets.cursorHoveringOnInteractable]: [grabBinding],\n    [sets.cursorHoveringOnUI]: [grabBinding],\n    [sets.cursorHoldingUI]: [dropBinding],\n    [sets.cursorHoveringOnVideo]: [\n      {\n        src: {\n          value: touchpadY,\n          touching: touchpadButton.touched\n        },\n        dest: { value: paths.actions.cursor.mediaVolumeMod },\n        xform: xforms.touch_axis_scroll(-0.1)\n      }\n    ],\n\n    [sets.cursorHoldingInteractable]: [\n      {\n        src: {\n          value: triggerFalling\n        },\n        dest: { value: paths.actions.cursor.drop },\n        xform: xforms.copy,\n        priority: 200\n      },\n      {\n        src: {\n          value: touchpadY,\n          touching: touchpadButton.touched\n        },\n        dest: { value: paths.actions.cursor.modDelta },\n        xform: xforms.touch_axis_scroll()\n      },\n      {\n        src: { value: dpadCenterStrip },\n        priority: 200,\n        xform: xforms.noop\n      }\n    ],\n\n    [sets.rightHandTeleporting]: [\n      {\n        src: {\n          value: triggerFalling\n        },\n        dest: { value: paths.actions.rightHand.stopTeleport },\n        xform: xforms.copy,\n        priority: 100\n      }\n    ],\n\n    [sets.cursorHoldingPen]: [\n      {\n        src: {\n          value: triggerRising\n        },\n        dest: { value: paths.actions.cursor.startDrawing },\n        xform: xforms.copy,\n        priority: 300\n      },\n      {\n        src: {\n          value: triggerFalling\n        },\n        dest: { value: paths.actions.cursor.stopDrawing },\n        xform: xforms.copy,\n        priority: 300\n      },\n      {\n        src: {\n          value: touchpadXForPen,\n          touching: touchpadButton.touched\n        },\n        dest: { value: paths.actions.cursor.scalePenTip },\n        xform: xforms.touch_axis_scroll(0.1, 0.1),\n        priority: 200\n      },\n      {\n        src: {\n          value: touchpadYForPen,\n          touching: touchpadButton.touched\n        },\n        dest: { value: paths.actions.cursor.modDelta },\n        xform: xforms.touch_axis_scroll(1, 0.1),\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadBottomCenterStrip,\n          bool: touchpadFalling\n        },\n        dest: { value: togglePen },\n        xform: xforms.copyIfTrue,\n        priority: 300\n      },\n      {\n        src: { value: togglePen },\n        dest: { value: paths.actions.cursor.drop },\n        xform: xforms.rising,\n        priority: 200\n      },\n      {\n        src: { value: togglePen },\n        dest: { value: paths.actions.pen.remove },\n        xform: xforms.rising,\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadEast,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.cursor.penPrevColor\n        },\n        xform: xforms.copyIfTrue,\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadWest,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.cursor.penNextColor\n        },\n        xform: xforms.copyIfTrue,\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadNorth,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.cursor.undoDrawing\n        },\n        xform: xforms.copyIfTrue,\n        priority: 200\n      }\n    ],\n\n    [sets.cursorHoldingCamera]: [\n      {\n        src: {\n          value: triggerRising\n        },\n        dest: { value: paths.actions.cursor.takeSnapshot },\n        xform: xforms.copy,\n        priority: 300\n      }\n    ]\n  });\n}\n","import { sets } from \"./sets\";\n\nlet leftTeleporter, rightTeleporter;\n\nexport function resolveActionSets() {\n  leftTeleporter = leftTeleporter || document.querySelector(\"#player-left-controller\").components.teleporter;\n  rightTeleporter = rightTeleporter || document.querySelector(\"#player-right-controller\").components.teleporter;\n  const userinput = AFRAME.scenes[0].systems.userinput;\n  const { leftHand, rightHand, rightRemote } = AFRAME.scenes[0].systems.interaction.state;\n\n  userinput.toggleSet(sets.leftHandHoveringOnNothing, !leftHand.held && !leftHand.hovered);\n  userinput.toggleSet(\n    sets.leftHandHoveringOnPen,\n    !leftHand.held &&\n      leftHand.hovered &&\n      leftHand.hovered.components.tags &&\n      leftHand.hovered.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.leftHandHoveringOnCamera,\n    !leftHand.held && leftHand.hovered && leftHand.hovered.components[\"camera-tool\"]\n  );\n  userinput.toggleSet(\n    sets.leftHandHoveringOnInteractable,\n    !leftHand.held &&\n      (leftHand.hovered &&\n        ((leftHand.hovered.components.tags && leftHand.hovered.components.tags.data.offersRemoteConstraint) ||\n          leftHand.hovered.components[\"super-spawner\"]))\n  );\n  userinput.toggleSet(\n    sets.leftHandHoveringOnVideo,\n    !leftHand.held && leftHand.hovered && leftHand.hovered.components[\"media-video\"]\n  );\n  userinput.toggleSet(\n    sets.leftHandHoldingPen,\n    leftHand.held && leftHand.held.components.tags && leftHand.held.components.tags.data.isPen\n  );\n  userinput.toggleSet(sets.leftHandHoldingCamera, leftHand.held && leftHand.held.components[\"camera-tool\"]);\n  userinput.toggleSet(sets.leftHandHoldingInteractable, leftHand.held);\n\n  userinput.toggleSet(\n    sets.rightHandHoveringOnNothing,\n    !rightRemote.held && !rightRemote.hovered && !rightHand.held && !rightHand.hovered\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnPen,\n    !rightHand.held &&\n      rightHand.hovered &&\n      rightHand.hovered.components.tags &&\n      rightHand.hovered.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnCamera,\n    !rightHand.held && rightHand.hovered && rightHand.hovered.components[\"camera-tool\"]\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnInteractable,\n    !rightHand.held &&\n      (rightHand.hovered &&\n        ((rightHand.hovered.components.tags && rightHand.hovered.components.tags.data.offersRemoteConstraint) ||\n          rightHand.hovered.components[\"super-spawner\"]))\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnVideo,\n    !rightHand.held && rightHand.hovered && rightHand.hovered.components[\"media-video\"]\n  );\n  userinput.toggleSet(\n    sets.rightHandHoldingPen,\n    rightHand.held && rightHand.held.components.tags && rightHand.held.components.tags.data.isPen\n  );\n  userinput.toggleSet(sets.rightHandHoldingCamera, rightHand.held && rightHand.held.components[\"camera-tool\"]);\n  userinput.toggleSet(sets.rightHandHoldingInteractable, rightHand.held);\n\n  userinput.toggleSet(\n    sets.cursorHoveringOnNothing,\n    !rightHand.held && !rightHand.hovered && !rightRemote.held && !rightRemote.hovered\n  );\n  userinput.toggleSet(\n    sets.cursorHoveringOnPen,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      rightRemote.hovered.components.tags &&\n      rightRemote.hovered.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.cursorHoveringOnCamera,\n\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      rightRemote.hovered.components[\"camera-tool\"]\n  );\n  userinput.toggleSet(\n    sets.cursorHoveringOnInteractable,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      ((rightRemote.hovered.components.tags && rightRemote.hovered.components.tags.data.offersRemoteConstraint) ||\n        rightRemote.hovered.components[\"super-spawner\"])\n  );\n  userinput.toggleSet(\n    sets.cursorHoveringOnUI,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      (rightRemote.hovered.components.tags &&\n        (rightRemote.hovered.components.tags.data.singleActionButton ||\n          rightRemote.hovered.components.tags.data.holdableButton))\n  );\n  userinput.toggleSet(\n    sets.cursorHoveringOnVideo,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      rightRemote.hovered.components[\"media-video\"]\n  );\n\n  userinput.toggleSet(sets.cursorHoldingNothing, !rightHand.held && !rightRemote.held);\n  userinput.toggleSet(\n    sets.cursorHoldingPen,\n\n    !rightHand.held &&\n      !rightHand.hovered &&\n      rightRemote.held &&\n      rightRemote.held.components.tags &&\n      rightRemote.held.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.cursorHoldingCamera,\n    !rightHand.held && !rightHand.hovered && rightRemote.held && rightRemote.held.components[\"camera-tool\"]\n  );\n  userinput.toggleSet(\n    sets.cursorHoldingUI,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      rightRemote.held &&\n      rightRemote.held.components.tags &&\n      rightRemote.held.components.tags.data.holdableButton\n  );\n  userinput.toggleSet(sets.cursorHoldingInteractable, rightRemote.held);\n\n  userinput.toggleSet(sets.leftHandTeleporting, leftTeleporter.isTeleporting);\n  userinput.toggleSet(sets.rightHandTeleporting, rightTeleporter.isTeleporting);\n\n  userinput.toggleSet(\n    sets.inputFocused,\n    document.activeElement.nodeName === \"INPUT\" ||\n      document.activeElement.nodeName === \"TEXTAREA\" ||\n      document.activeElement.contentEditable === \"true\"\n  );\n}\n","import { paths } from \"../paths\";\n\nexport class GamepadDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n  }\n\n  write(frame) {\n    if (this.gamepad.connected) {\n      this.gamepad.buttons.forEach((button, i) => {\n        const buttonPath = paths.device.gamepad(this.gamepad.index).button(i);\n        frame.setValueType(buttonPath.pressed, !!button.pressed);\n        frame.setValueType(buttonPath.touched, !!button.touched);\n        frame.setValueType(buttonPath.value, button.value);\n      });\n      this.gamepad.axes.forEach((axis, i) => {\n        frame.setValueType(paths.device.gamepad(this.gamepad.index).axis(i), axis);\n      });\n    }\n  }\n}\n","export const gamepadBindings = {};\n","import { sets } from \"./sets\";\nimport { paths } from \"./paths\";\n\nimport { MouseDevice } from \"./devices/mouse\";\nimport { KeyboardDevice } from \"./devices/keyboard\";\nimport { HudDevice } from \"./devices/hud\";\nimport { XboxControllerDevice } from \"./devices/xbox-controller\";\nimport { OculusGoControllerDevice } from \"./devices/oculus-go-controller\";\nimport { GearVRControllerDevice } from \"./devices/gear-vr-controller\";\nimport { OculusTouchControllerDevice } from \"./devices/oculus-touch-controller\";\nimport { DaydreamControllerDevice } from \"./devices/daydream-controller\";\nimport { ViveControllerDevice } from \"./devices/vive-controller\";\nimport { WindowsMixedRealityControllerDevice } from \"./devices/windows-mixed-reality-controller\";\nimport { GyroDevice } from \"./devices/gyro\";\n\nimport { AppAwareMouseDevice } from \"./devices/app-aware-mouse\";\nimport { AppAwareTouchscreenDevice } from \"./devices/app-aware-touchscreen\";\n\nimport { keyboardMouseUserBindings } from \"./bindings/keyboard-mouse-user\";\nimport { touchscreenUserBindings } from \"./bindings/touchscreen-user\";\nimport { keyboardDebuggingBindings } from \"./bindings/keyboard-debugging\";\nimport { oculusTouchUserBindings } from \"./bindings/oculus-touch-user\";\nimport { viveUserBindings } from \"./bindings/vive-user\";\nimport { wmrUserBindings } from \"./bindings/windows-mixed-reality-user\";\nimport { xboxControllerUserBindings } from \"./bindings/xbox-controller-user\";\nimport { daydreamUserBindings } from \"./bindings/daydream-user\";\nimport { cardboardUserBindings } from \"./bindings/cardboard-user\";\n\nimport generate3DOFTriggerBindings from \"./bindings/oculus-go-user\";\nconst oculusGoUserBindings = generate3DOFTriggerBindings(paths.device.oculusgo);\nconst gearVRControllerUserBindings = generate3DOFTriggerBindings(paths.device.gearVRController);\n\nimport { resolveActionSets } from \"./resolve-action-sets\";\nimport { GamepadDevice } from \"./devices/gamepad\";\nimport { gamepadBindings } from \"./bindings/generic-gamepad\";\nimport { getAvailableVREntryTypes, VR_DEVICE_AVAILABILITY } from \"../../utils/vr-caps-detect\";\nimport { ArrayBackedSet } from \"./array-backed-set\";\n\nfunction arrayContentsDiffer(a, b) {\n  if (a.length !== b.length) return true;\n\n  for (let i = 0, il = a.length; i < il; i++) {\n    const elem = a[i];\n    let found = false;\n\n    for (let j = 0, jl = b.length; j < jl; j++) {\n      if (elem === b[j]) {\n        found = true;\n        break;\n      }\n    }\n\n    if (!found) return true;\n  }\n\n  return false;\n}\n\nconst satisfiesPath = (binding, path) => {\n  for (const key in binding.dest) {\n    if (binding.dest[key].indexOf(path) !== -1) {\n      return true;\n    }\n  }\n  return false;\n};\n\nconst satisfyPath = (bindings, path) => {\n  for (const binding of bindings) {\n    if (satisfiesPath(binding, path)) {\n      return true;\n    }\n  }\n  return false;\n};\n\nconst satisfiedBy = (binding, bindings) => {\n  for (const path of Object.values(binding.src)) {\n    if (path.startsWith(\"/device/\")) continue;\n    if (!satisfyPath(bindings, path)) return false;\n  }\n  return true;\n};\n\nfunction dependencySort(mappings) {\n  const unsorted = [];\n  for (const mapping of mappings) {\n    for (const setName in mapping) {\n      for (const binding of mapping[setName]) {\n        unsorted.push(binding);\n      }\n    }\n  }\n\n  const sorted = [];\n  while (unsorted.length > 0) {\n    const binding = unsorted.shift();\n    if (satisfiedBy(binding, sorted)) {\n      sorted.push(binding);\n    } else {\n      unsorted.push(binding);\n    }\n  }\n\n  return sorted;\n}\n\nfunction canMask(masker, masked) {\n  if (masker.priority === undefined) {\n    masker.priority = 0;\n  }\n  if (masked.priority === undefined) {\n    masked.priority = 0;\n  }\n  if (masked.priority >= masker.priority) return false;\n  for (const maskerKey in masker.src) {\n    const maskerPath = masker.src[maskerKey];\n    for (const maskedKey in masked.src) {\n      const maskedPath = masked.src[maskedKey];\n      if (maskedPath.indexOf(maskerPath) !== -1) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nfunction computeMasks(bindings) {\n  const masks = new Array(bindings.length);\n  for (let row = 0; row < bindings.length; row++) {\n    const masksRow = (masks[row] = []);\n    const bindingsRow = bindings[row];\n    for (let col = 0; col < bindings.length; col++) {\n      if (canMask(bindings[col], bindingsRow)) {\n        masksRow.push(col);\n      }\n    }\n  }\n  return masks;\n}\n\nfunction isActive(binding, sets) {\n  for (let i = 0; i < binding.sets.length; i++) {\n    if (sets.includes(binding.sets[i])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction computeExecutionStrategy(sortedBindings, masks, activeSets) {\n  const actives = new Array(sortedBindings.length);\n  for (let row = 0; row < sortedBindings.length; row++) {\n    actives[row] = isActive(sortedBindings[row], activeSets);\n  }\n\n  const masked = new Array(sortedBindings.length);\n  for (let row = 0; row < sortedBindings.length; row++) {\n    const maskedRow = (masked[row] = []);\n    const masksRow = masks[row];\n    for (let col = 0; col < sortedBindings.length; col++) {\n      if (actives[col] && masksRow.indexOf(col) !== -1) {\n        maskedRow.push(col);\n      }\n    }\n  }\n\n  return { actives, masked };\n}\n\nAFRAME.registerSystem(\"userinput\", {\n  get(path) {\n    if (!this.frame) return;\n    return this.frame.get(path);\n  },\n\n  toggleSet(set, value) {\n    this.pendingSetChanges.push(set);\n    this.pendingSetChanges.push(!!value);\n  },\n\n  init() {\n    this.frame = {\n      generation: 0,\n      values: {},\n      generations: {},\n      get: function(path) {\n        if (this.generations[path] !== this.generation) return undefined;\n        return this.values[path];\n      },\n      setValueType: function(path, value) {\n        this.values[path] = value;\n        this.generations[path] = this.generation;\n      },\n      setVector2: function(path, a, b) {\n        const value = this.values[path] || [];\n        value[0] = a;\n        value[1] = b;\n        this.values[path] = value;\n        this.generations[path] = this.generation;\n      },\n      setPose: function(path, pose) {\n        this.setValueType(path, pose);\n      },\n      setMatrix4: function(path, mat4) {\n        // Should we assume the incoming mat4 is safe to store instead of copying values?\n        const value = this.values[path] || new THREE.Matrix4();\n        value.copy(mat4);\n        this.values[path] = value;\n        this.generations[path] = this.generation;\n      }\n    };\n\n    this.prevActiveSets = [];\n    this.activeSets = [sets.global];\n    this.pendingSetChanges = [];\n    this.xformStates = new Map();\n    this.activeDevices = new ArrayBackedSet([new HudDevice()]);\n\n    const isMobile = AFRAME.utils.device.isMobile();\n    const isMobileVR = AFRAME.utils.device.isMobileVR();\n\n    if (!(isMobile || isMobileVR)) {\n      this.activeDevices.add(new MouseDevice());\n      this.activeDevices.add(new AppAwareMouseDevice());\n      this.activeDevices.add(new KeyboardDevice());\n    } else if (!isMobileVR) {\n      this.activeDevices.add(new AppAwareTouchscreenDevice());\n      this.activeDevices.add(new KeyboardDevice());\n      this.activeDevices.add(new GyroDevice());\n    }\n\n    this.isMobile = isMobile;\n    this.isMobileVR = isMobileVR;\n\n    this.registeredMappings = new Set([keyboardDebuggingBindings]);\n    this.registeredMappingsChanged = true;\n\n    const vrGamepadMappings = new Map();\n    vrGamepadMappings.set(WindowsMixedRealityControllerDevice, wmrUserBindings);\n    vrGamepadMappings.set(ViveControllerDevice, viveUserBindings);\n    vrGamepadMappings.set(OculusTouchControllerDevice, oculusTouchUserBindings);\n    vrGamepadMappings.set(OculusGoControllerDevice, oculusGoUserBindings);\n    vrGamepadMappings.set(GearVRControllerDevice, gearVRControllerUserBindings);\n    vrGamepadMappings.set(DaydreamControllerDevice, daydreamUserBindings);\n\n    const nonVRGamepadMappings = new Map();\n    nonVRGamepadMappings.set(XboxControllerDevice, xboxControllerUserBindings);\n    nonVRGamepadMappings.set(GamepadDevice, gamepadBindings);\n\n    const updateBindingsForVRMode = () => {\n      const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n      const isMobile = AFRAME.utils.device.isMobile();\n\n      if (inVRMode) {\n        console.log(\"Using VR bindings.\");\n        this.registeredMappings.delete(isMobile ? touchscreenUserBindings : keyboardMouseUserBindings);\n        // add mappings for all active VR input devices\n        for (let i = 0; i < this.activeDevices.items.length; i++) {\n          const activeDevice = this.activeDevices.items[i];\n          const mapping = vrGamepadMappings.get(activeDevice.constructor);\n          mapping && this.registeredMappings.add(mapping);\n        }\n\n        // Handle cardboard by looking of VR device caps\n        if (isMobile) {\n          getAvailableVREntryTypes().then(availableVREntryTypes => {\n            if (availableVREntryTypes.cardboard === VR_DEVICE_AVAILABILITY.yes) {\n              this.registeredMappings.add(cardboardUserBindings);\n              this.registeredMappingsChanged = true;\n            }\n          });\n        }\n      } else {\n        console.log(\"Using Non-VR bindings.\");\n        // remove mappings for all active VR input devices\n        for (let i = 0; i < this.activeDevices.items.length; i++) {\n          const activeDevice = this.activeDevices.items[i];\n          this.registeredMappings.delete(vrGamepadMappings.get(activeDevice.constructor));\n        }\n        this.registeredMappings.add(isMobile ? touchscreenUserBindings : keyboardMouseUserBindings);\n      }\n\n      for (let i = 0; i < this.activeDevices.items.length; i++) {\n        const activeDevice = this.activeDevices.items[i];\n        const mapping = nonVRGamepadMappings.get(activeDevice.constructor);\n        mapping && this.registeredMappings.add(mapping);\n      }\n\n      this.registeredMappingsChanged = true;\n    };\n\n    const gamepadConnected = e => {\n      let gamepadDevice;\n      for (let i = 0; i < this.activeDevices.items.length; i++) {\n        const activeDevice = this.activeDevices.items[i];\n        if (activeDevice.gamepad && activeDevice.gamepad.index === e.gamepad.index) {\n          console.warn(\"connected already fired for gamepad\", e.gamepad);\n          return; // multiple connect events without a disconnect event\n        }\n      }\n      // HACK Firefox Nightly bug causes corrupt gamepad names for OpenVR, so do startsWith\n      if (e.gamepad.id.startsWith(\"OpenVR Gamepad\") || e.gamepad.id === \"HTC Vive Focus Plus Controller\") {\n        gamepadDevice = new ViveControllerDevice(e.gamepad);\n      } else if (e.gamepad.id.startsWith(\"Oculus Touch\")) {\n        gamepadDevice = new OculusTouchControllerDevice(e.gamepad);\n      } else if (e.gamepad.id.startsWith(\"Spatial Controller\")) {\n        gamepadDevice = new WindowsMixedRealityControllerDevice(e.gamepad);\n      } else if (e.gamepad.id === \"Oculus Go Controller\") {\n        gamepadDevice = new OculusGoControllerDevice(e.gamepad);\n      } else if (e.gamepad.id === \"Gear VR Controller\" || e.gamepad.id === \"HTC Vive Focus Controller\") {\n        gamepadDevice = new GearVRControllerDevice(e.gamepad);\n      } else if (e.gamepad.id === \"Daydream Controller\") {\n        gamepadDevice = new DaydreamControllerDevice(e.gamepad);\n      } else if (e.gamepad.mapping === \"standard\") {\n        // Our XboxController device and bindings should be generic enough for most gamepads.\n        gamepadDevice = new XboxControllerDevice(e.gamepad);\n      } else {\n        // This device doesn't actually have any bindings, but we need to fallback to something.\n        gamepadDevice = new GamepadDevice(e.gamepad);\n      }\n\n      this.activeDevices.add(gamepadDevice);\n\n      updateBindingsForVRMode();\n    };\n\n    const gamepadDisconnected = e => {\n      for (let i = 0; i < this.activeDevices.items.length; i++) {\n        const device = this.activeDevices.items[i];\n        if (device.gamepad && device.gamepad.index === e.gamepad.index) {\n          this.registeredMappings.delete(\n            vrGamepadMappings.get(device.constructor) || nonVRGamepadMappings.get(device.constructor)\n          );\n          this.activeDevices.delete(device);\n          return;\n        }\n      }\n\n      updateBindingsForVRMode();\n    };\n\n    window.addEventListener(\"gamepadconnected\", gamepadConnected, false);\n    window.addEventListener(\"gamepaddisconnected\", gamepadDisconnected, false);\n    for (const gamepad of navigator.getGamepads()) {\n      gamepad && gamepadConnected({ gamepad });\n    }\n\n    this.el.sceneEl.addEventListener(\"enter-vr\", updateBindingsForVRMode);\n    this.el.sceneEl.addEventListener(\"exit-vr\", updateBindingsForVRMode);\n\n    updateBindingsForVRMode();\n  },\n\n  maybeToggleXboxMapping() {\n    if (this.isMobile || this.isMobileVR) return;\n\n    const vrAxesSum =\n      (this.get(paths.device.vive.left.axesSum) || 0) +\n      (this.get(paths.device.vive.right.axesSum) || 0) +\n      (this.get(paths.device.leftOculusTouch.axesSum) || 0) +\n      (this.get(paths.device.rightOculusTouch.axesSum) || 0);\n    const mouseMovement = this.get(paths.device.mouse.movementXY);\n    const nonXboxActivity = (mouseMovement[0] || mouseMovement[1]) > 2 || vrAxesSum > 0.5;\n\n    const hasXboxMapping = this.registeredMappings.has(xboxControllerUserBindings);\n\n    if (nonXboxActivity && hasXboxMapping) {\n      this.registeredMappings.delete(xboxControllerUserBindings);\n      this.registeredMappingsChanged = true;\n    } else if (this.get(paths.device.xbox.axesSum) > 0.5 && !hasXboxMapping) {\n      this.registeredMappings.add(xboxControllerUserBindings);\n      this.registeredMappingsChanged = true;\n    }\n  },\n\n  tick2() {\n    this.frame.generation += 1;\n    const registeredMappingsChanged = this.registeredMappingsChanged;\n    if (registeredMappingsChanged) {\n      this.registeredMappingsChanged = false;\n      this.prevSortedBindings = this.sortedBindings;\n      this.sortedBindings = dependencySort(this.registeredMappings);\n      if (!this.prevSortedBindings) {\n        this.prevSortedBindings = this.sortedBindings;\n      }\n      this.masks = computeMasks(this.sortedBindings);\n    }\n\n    this.prevActiveSets.length = 0;\n    for (let i = 0; i < this.activeSets.length; i++) {\n      const item = this.activeSets[i];\n      this.prevActiveSets.push(item);\n    }\n    resolveActionSets();\n    for (let i = 0, l = this.pendingSetChanges.length; i < l; i += 2) {\n      const set = this.pendingSetChanges[i];\n      const value = this.pendingSetChanges[i + 1];\n\n      if (value) {\n        if (!this.activeSets.includes(set)) {\n          this.activeSets.push(set);\n        }\n      } else {\n        const idx = this.activeSets.indexOf(set);\n\n        if (idx > -1) {\n          this.activeSets.splice(idx, 1);\n        }\n      }\n    }\n    const activeSetsChanged = arrayContentsDiffer(this.prevActiveSets, this.activeSets);\n    this.pendingSetChanges.length = 0;\n    if (registeredMappingsChanged || activeSetsChanged || (!this.actives && !this.masked)) {\n      this.prevActives = this.actives;\n      this.prevMasked = this.masked;\n      const { actives, masked } = computeExecutionStrategy(this.sortedBindings, this.masks, this.activeSets);\n      this.actives = actives;\n      this.masked = masked;\n    }\n\n    for (let i = 0; i < this.activeDevices.items.length; i++) {\n      this.activeDevices.items[i].write(this.frame);\n    }\n\n    for (let i = 0; i < this.sortedBindings.length; i++) {\n      if (!this.actives[i] || this.masked[i].length > 0) continue;\n\n      const binding = this.sortedBindings[i];\n\n      let bindingExistedLastFrame = true;\n      if (!registeredMappingsChanged && activeSetsChanged && this.prevSortedBindings) {\n        const j = this.prevSortedBindings.indexOf(binding);\n        bindingExistedLastFrame = j > -1 && this.prevActives[j] && this.prevMasked[j].length === 0;\n      }\n      if (!bindingExistedLastFrame) {\n        this.xformStates.delete(binding);\n      }\n\n      const { src, dest, xform, debug } = binding;\n\n      let oldValue;\n\n      if (debug) {\n        oldValue = this.frame.get(dest.value);\n      }\n\n      const newState = xform(this.frame, src, dest, this.xformStates.get(binding));\n\n      if (debug) {\n        // Note for now this only works with bindings that have { value: } sources and dests\n        console.log(\n          `${JSON.stringify(src.value)} (${src.value && JSON.stringify(this.frame.get(src.value))}) to ${JSON.stringify(\n            dest\n          )}: ${oldValue} -> ${this.frame.get(dest.value)}`\n        );\n      }\n\n      if (newState !== undefined) {\n        this.xformStates.set(binding, newState);\n      }\n    }\n\n    this.prevSortedBindings = this.sortedBindings;\n\n    this.maybeToggleXboxMapping();\n  }\n});\n","import { paths } from \"./userinput/paths\";\n\nAFRAME.registerSystem(\"camera-mirror\", {\n  init() {\n    this._onWindowResize = this._onWindowResize.bind(this);\n    window.addEventListener(\"resize\", this._onWindowResize, false);\n  },\n\n  tick() {\n    const userinput = this.el.systems.userinput;\n\n    if (userinput.get(paths.actions.camera.exitMirror) && this.mirrorEl) {\n      this.unmirrorCameraAtEl(this.mirrorEl);\n    }\n  },\n\n  // Adds a camera under el, and starts mirroring\n  mirrorCameraAtEl(el) {\n    // TODO probably should explicitly check for immersive mode here.\n    if (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR()) return;\n    if (this.mirrorEl && this.mirrorEl !== el) this.unmirrorCameraAtEl(this.mirrorEl);\n\n    this.mirrorEl = el;\n    this.mirrorCamera = new THREE.PerspectiveCamera(80, window.innerWidth / window.innerHeight, 0.1, 30000);\n    this.mirrorCamera.rotation.set(0, Math.PI, 0);\n    el.setObject3D(\"mirror-camera\", this.mirrorCamera);\n\n    document.body.classList.add(\"mirrored-camera\");\n\n    if (!this.directRenderFunc) {\n      this._patchRenderFunc();\n    }\n\n    this.mirrorEl.emit(\"mirrored\", { el: this.mirrorEl });\n    this.mirrorEl.sceneEl.addState(\"mirroring\");\n  },\n\n  unmirrorCameraAtEl(el) {\n    if (this.mirrorEl !== el) return;\n\n    el.removeObject3D(\"mirror-camera\");\n    document.body.classList.remove(\"mirrored-camera\");\n    const oldEl = this.mirrorEl;\n\n    this.mirrorEl = null;\n    this.mirrorCamera = null;\n\n    oldEl.emit(\"unmirrored\", { el: oldEl });\n    oldEl.sceneEl.removeState(\"mirroring\");\n  },\n\n  getMirroredCameraEl() {\n    return this.mirrorEl;\n  },\n\n  _onWindowResize() {\n    if (!this.mirrorCamera) return;\n    this.mirrorCamera.aspect = window.innerWidth / window.innerHeight;\n    this.mirrorCamera.updateProjectionMatrix();\n    this.el.sceneEl.renderer.setSize(window.innerWidth, window.innerHeight);\n  },\n\n  _patchRenderFunc() {\n    const headEl = document.getElementById(\"player-head\");\n    const hudEl = document.getElementById(\"player-hud\");\n    const tempHeadScale = new THREE.Vector3();\n    const renderer = this.el.renderer;\n    const playerHead = headEl && headEl.object3D;\n    const playerHud = hudEl && hudEl.object3D;\n\n    this.directRenderFunc = renderer.render;\n\n    this.el.sceneEl.renderer.render = (scene, camera, renderTarget) => {\n      const wasVREnabled = renderer.vr.enabled;\n\n      if (wasVREnabled || renderTarget || !this.mirrorCamera) {\n        this.directRenderFunc.call(renderer, scene, camera, renderTarget);\n        if (!this.mirrorCamera || renderTarget) return;\n      }\n\n      if (playerHead) {\n        tempHeadScale.copy(playerHead.scale);\n        playerHead.scale.set(1, 1, 1);\n        playerHead.updateMatrices(true, true);\n        playerHead.updateMatrixWorld(true, true);\n      }\n\n      let playerHudWasVisible;\n\n      if (playerHud) {\n        playerHudWasVisible = playerHud.visible;\n        playerHud.visible = false;\n        if (this.el.sceneEl.systems[\"post-physics\"]) {\n          this.el.sceneEl.systems[\"post-physics\"].spriteSystem.mesh.visible = false;\n        }\n      }\n      renderer.vr.enabled = false;\n      const tmpOnAfterRender = this.el.object3D.onAfterRender;\n      delete this.el.object3D.onAfterRender;\n      this.directRenderFunc.call(renderer, scene, this.mirrorCamera);\n      this.el.object3D.onAfterRender = tmpOnAfterRender;\n      renderer.vr.enabled = wasVREnabled;\n      if (playerHead) {\n        playerHead.scale.copy(tempHeadScale);\n        playerHead.updateMatrices(true, true);\n        playerHead.updateMatrixWorld(true);\n      }\n      if (playerHud) {\n        playerHud.visible = playerHudWasVisible;\n        if (this.el.sceneEl.systems[\"post-physics\"]) {\n          this.el.sceneEl.systems[\"post-physics\"].spriteSystem.mesh.visible = true;\n        }\n      }\n    };\n  }\n});\n","import { paths } from \"./paths\";\nimport qsTruthy from \"../../utils/qs_truthy\";\n\nconst PATHS_TO_SHOW = [\"/actions/\", \"/device/\"];\n\nAFRAME.registerSystem(\"userinput-debug\", {\n  active: true,\n\n  tick() {\n    if (!this.active) return;\n\n    const userinput = AFRAME.scenes[0].systems.userinput;\n\n    if (this.userinputFrameStatus) {\n      const replacer = (k, v) => {\n        if (typeof v === \"number\") {\n          return `${v >= 0 ? \"+\" : \"\"}${v.toFixed(3)}`;\n        }\n        return v;\n      };\n      const pathsOutput = [];\n      const { frame } = userinput;\n      for (const key in frame.values) {\n        if (!frame.get(key)) continue;\n        if (!PATHS_TO_SHOW.some(x => key.startsWith(x))) continue;\n        let val = JSON.stringify(frame.get(key), replacer);\n        if (val) val = val.replace(/{\"(\\w{3,})\":/g, '{\\n  \"$1\":').replace(/,\"(\\w{3,})\":/g, ',\\n  \"$1\":');\n        pathsOutput.push(`${key} -> ${val}`);\n      }\n      this.userinputFrameStatus.textContent = pathsOutput.join(\"\\n\");\n    }\n\n    if (userinput.get(paths.actions.logDebugFrame)) {\n      if (qsTruthy(\"userinput_debug\") && !this.userinputFrameStatus) {\n        this.userinputFrameStatus = document.createElement(\"div\");\n        this.userinputFrameStatus.id = \"userinput-frame-status\";\n        this.userinputFrameStatus.style = `\n          position: absolute;\n          z-index: 2;\n          left: 0; bottom: 0;\n          background: white;\n          white-space: pre;\n          font-family: monospace;\n          font-size: 8pt;\n        `;\n        document.body.append(this.userinputFrameStatus);\n      }\n\n      console.log(userinput);\n      console.log(\"sorted\", userinput.sortedBindings);\n      console.log(\"actives\", userinput.actives);\n      console.log(\"masks\", userinput.masks);\n      console.log(\"masked\", userinput.masked);\n      console.log(\"devices\", userinput.activeDevices);\n      console.log(\"activeSets\", userinput.activeSets);\n      console.log(\"frame\", userinput.frame);\n      console.log(\"xformStates\", userinput.xformStates);\n      const { sortedBindings, actives, masked } = userinput;\n      for (const i in sortedBindings) {\n        const sb = [];\n        if (masked[i].length > 0) {\n          for (const j of masked[i]) {\n            sb.push(JSON.stringify(sortedBindings[j]));\n          }\n        }\n\n        if (this.logBindings) {\n          console.log(\n            \"binding: \",\n            i,\n            \"\\n\",\n            sortedBindings[i],\n            \"\\n\",\n            \"dest: \",\n            sortedBindings[i].dest && Object.values(sortedBindings[i].dest),\n            \"\\n\",\n            \"active: \",\n            actives[i],\n            \"\\n\",\n            \"maskedBy: \",\n            masked[i],\n            \"\\n\",\n            sb.join(\"\\n\"),\n            \"\\n\"\n          );\n        }\n      }\n    }\n  }\n});\n","import { paths } from \"./userinput/paths\";\nimport { SOURCES } from \"../storage/media-search-store\";\n\nconst MEDIA_SEARCH_PATHS = [\n  paths.actions.mediaSearch1,\n  paths.actions.mediaSearch2,\n  paths.actions.mediaSearch3,\n  paths.actions.mediaSearch4,\n  paths.actions.mediaSearch5,\n  paths.actions.mediaSearch6,\n  paths.actions.mediaSearch7,\n  paths.actions.mediaSearch8\n];\n\n// Every frame, looks for input paths that trigger UI-relevant events and handles them.\nAFRAME.registerSystem(\"ui-hotkeys\", {\n  init() {\n    this.mediaSearchStore = window.APP.mediaSearchStore;\n  },\n\n  tick: function() {\n    if (!this.userinput) {\n      this.userinput = this.el.systems.userinput;\n    }\n\n    if (this.userinput.get(paths.actions.focusChat)) {\n      this.focusChat();\n    }\n\n    if (this.userinput.get(paths.actions.focusChatCommand)) {\n      this.focusChat(\"/\");\n    }\n\n    if (this.userinput.get(paths.actions.mediaExit)) {\n      if (window.APP.history.location.state && window.APP.history.location.state.value !== \"avatar-editor\") {\n        this.mediaSearchStore.pushExitMediaBrowserHistory();\n      }\n\n      this.el.emit(\"action_exit_watch\");\n    }\n\n    for (let i = 0; i < MEDIA_SEARCH_PATHS.length; i++) {\n      if (this.userinput.get(MEDIA_SEARCH_PATHS[i])) {\n        this.mediaSearchStore.sourceNavigate(SOURCES[i]);\n      }\n    }\n\n    if (this.userinput.get(paths.actions.toggleCamera)) {\n      this.el.emit(\"action_toggle_camera\");\n    }\n  },\n\n  focusChat: function(prefix) {\n    const target = document.querySelector(\".chat-focus-target\");\n    if (!target) return;\n\n    target.focus();\n\n    if (prefix) {\n      target.value = prefix;\n    }\n  }\n});\n","import { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\nexport class CursorTargettingSystem {\n  constructor() {\n    this.targets = [];\n    this.setDirty = this.setDirty.bind(this);\n    this.dirty = true;\n\n    // TODO: Use the MutationRecords passed into the callback function to determine added/removed nodes!\n    this.observer = new MutationObserver(this.setDirty);\n\n    waitForDOMContentLoaded().then(() => {\n      const scene = document.querySelector(\"a-scene\");\n      this.rightRemote = document.querySelector(\"#cursor-controller\");\n      this.observer.observe(scene, { childList: true, attributes: true, subtree: true });\n      scene.addEventListener(\"object3dset\", this.setDirty);\n      scene.addEventListener(\"object3dremove\", this.setDirty);\n    });\n  }\n\n  setDirty() {\n    this.dirty = true;\n  }\n\n  tick(t) {\n    if (this.dirty) {\n      this.populateEntities(this.targets);\n      this.dirty = false;\n    }\n\n    this.rightRemote.components[\"cursor-controller\"].tick2(t);\n  }\n\n  populateEntities(targets) {\n    targets.length = 0;\n    // TODO: Do not querySelectorAll on the entire scene every time anything changes!\n    const els = AFRAME.scenes[0].querySelectorAll(\".collidable, .interactable, .ui\");\n    for (let i = 0; i < els.length; i++) {\n      if (els[i].object3D) {\n        targets.push(els[i].object3D);\n      }\n    }\n  }\n\n  remove() {\n    this.observer.disconnect();\n    AFRAME.scenes[0].removeEventListener(\"object3dset\", this.setDirty);\n    AFRAME.scenes[0].removeEventListener(\"object3dremove\", this.setDirty);\n  }\n}\n","/* global NAF AFRAME */\nconst ACTIVATION_STATE = require(\"aframe-physics-system/src/constants\").ACTIVATION_STATE;\n\nexport class ConstraintsSystem {\n  constructor() {\n    this.prevLeftHand = {\n      held: null,\n      hovered: null,\n      spawning: null\n    };\n    this.prevRightHand = {\n      held: null,\n      hovered: null,\n      spawning: null\n    };\n    this.prevRightRemote = {\n      held: null,\n      hovered: null,\n      spawning: null\n    };\n  }\n\n  tickInteractor(constraintTag, entityId, state, prevState) {\n    if (prevState.held === state.held) {\n      if (!state.spawning && prevState.spawning && state.held && state.held.components.tags.data[constraintTag]) {\n        state.held.setAttribute(\"ammo-body\", {\n          type: \"dynamic\",\n          activationState: ACTIVATION_STATE.DISABLE_DEACTIVATION\n        });\n        state.held.setAttribute(\"ammo-constraint__\" + entityId, { target: \"#\" + entityId });\n      }\n      return;\n    }\n    if (prevState.held && prevState.held.components.tags.data[constraintTag]) {\n      prevState.held.removeAttribute(\"ammo-constraint__\" + entityId);\n      let hasAnotherConstraint = false;\n      for (const componentName in prevState.held.components) {\n        if (componentName.startsWith(\"ammo-constraint\")) {\n          hasAnotherConstraint = true;\n        }\n      }\n      if (!hasAnotherConstraint) {\n        prevState.held.setAttribute(\"ammo-body\", { activationState: ACTIVATION_STATE.ACTIVE_TAG });\n      }\n    }\n    if (!state.spawning && state.held && state.held.components.tags.data[constraintTag]) {\n      if (!state.held.components[\"networked\"] || NAF.utils.isMine(state.held) || NAF.utils.takeOwnership(state.held)) {\n        state.held.setAttribute(\"ammo-body\", {\n          type: \"dynamic\",\n          activationState: ACTIVATION_STATE.DISABLE_DEACTIVATION\n        });\n        state.held.setAttribute(\"ammo-constraint__\" + entityId, { target: \"#\" + entityId });\n      } else {\n        console.log(\"Failed to obtain ownership while trying to create constraint on networked object.\");\n      }\n    }\n  }\n\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n\n    this.tickInteractor(\n      \"offersHandConstraint\",\n      interaction.options.leftHand.entity.id,\n      interaction.state.leftHand,\n      this.prevLeftHand\n    );\n    this.tickInteractor(\n      \"offersHandConstraint\",\n      interaction.options.rightHand.entity.id,\n      interaction.state.rightHand,\n      this.prevRightHand\n    );\n    this.tickInteractor(\n      \"offersRemoteConstraint\",\n      interaction.options.rightRemote.entity.id,\n      interaction.state.rightRemote,\n      this.prevRightRemote\n    );\n\n    Object.assign(this.prevLeftHand, interaction.state.leftHand);\n    Object.assign(this.prevRightHand, interaction.state.rightHand);\n    Object.assign(this.prevRightRemote, interaction.state.rightRemote);\n  }\n}\n","/* global THREE AFRAME */\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\nconst COLLISION_FILTER_MASK_HANDS = { collisionFilterMask: COLLISION_LAYERS.HANDS };\nexport const distanceBetweenStretchers = (() => {\n  const a = new THREE.Vector3();\n  const b = new THREE.Vector3();\n  return function distanceBetweenStretchers(obj1, obj2) {\n    obj1.getWorldPosition(a);\n    obj2.getWorldPosition(b);\n    return a.distanceTo(b);\n  };\n})();\n\nexport class TwoPointStretchingSystem {\n  constructor() {\n    this.initialScale = new THREE.Vector3();\n  }\n\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const { leftHand, rightHand, rightRemote } = interaction.state;\n\n    const stretching = leftHand.held && (leftHand.held === rightHand.held || leftHand.held === rightRemote.held);\n    let leftStretcher, rightStretcher;\n    if (stretching) {\n      leftStretcher = interaction.options.leftHand.entity.object3D;\n      rightStretcher =\n        leftHand.held === rightHand.held\n          ? interaction.options.rightHand.entity.object3D\n          : interaction.options.rightRemote.entity.object3D;\n      if (\n        leftStretcher !== this.previousLeftStretcher ||\n        rightStretcher !== this.previousRightStretcher ||\n        leftHand.held !== this.stretched\n      ) {\n        this.initialStretchDistance = distanceBetweenStretchers(leftStretcher, rightStretcher);\n        this.stretched = leftHand.held;\n        this.initialScale.copy(this.stretched.object3D.scale);\n        if (this.stretched.components[\"ammo-body\"]) {\n          this.stretched.setAttribute(\"ammo-body\", COLLISION_FILTER_MASK_HANDS);\n        }\n      }\n\n      this.stretched.object3D.scale\n        .copy(this.initialScale)\n        .multiplyScalar(distanceBetweenStretchers(leftStretcher, rightStretcher) / this.initialStretchDistance);\n      this.stretched.object3D.matrixNeedsUpdate = true;\n    }\n\n    this.previousLeftStretcher = leftStretcher;\n    this.previousRightStretcher = rightStretcher;\n  }\n}\n","export class SingleActionButtonSystem {\n  tick() {\n    this.didInteractThisFrame = false;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const hovered = interaction.state.rightRemote.hovered;\n    if (\n      hovered &&\n      userinput.get(interaction.options.rightRemote.grabPath) &&\n      hovered.components.tags &&\n      hovered.components.tags.data.singleActionButton\n    ) {\n      this.didInteractThisFrame = true;\n      hovered.object3D.dispatchEvent({\n        type: \"interact\",\n        object3D: interaction.options.rightRemote.entity.object3D\n      });\n    }\n  }\n}\n\nexport class HoldableButtonSystem {\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const held = interaction.state.rightRemote.held;\n\n    if (this.prevHeld && this.prevHeld !== held) {\n      this.prevHeld.object3D.dispatchEvent({\n        type: \"holdable-button-up\",\n        object3D: interaction.options.rightRemote.entity.object3D\n      });\n    }\n    if (held && this.prevHeld !== held) {\n      held.object3D.dispatchEvent({\n        type: \"holdable-button-down\",\n        object3D: interaction.options.rightRemote.entity.object3D\n      });\n    }\n\n    this.prevHeld = held;\n  }\n}\n\nconst hasButtonComponent = (function() {\n  const BUTTON_COMPONENT_NAMES = [\"icon-button\", \"text-button\", \"pin-networked-object-button\"];\n  return function hasButtonComponent(components) {\n    for (let i = 0; i < BUTTON_COMPONENT_NAMES.length; i++) {\n      if (components[BUTTON_COMPONENT_NAMES[i]]) {\n        return true;\n      }\n    }\n    return false;\n  };\n})();\n\nfunction getHoverableButton(hovered) {\n  if (!hovered) return null;\n  if (hasButtonComponent(hovered.components)) return hovered;\n  if (hovered.children) {\n    // TODO: not sure if looping thru children here is desireable, but we did this to accomodate the rounded-button mixins\n    for (let i = 0; i < hovered.children.length; i++) {\n      if (hasButtonComponent(hovered.children[i].components)) {\n        return hovered.children[i];\n      }\n    }\n  }\n  return null;\n}\n\nfunction dispatch(el, event) {\n  el.object3D.dispatchEvent(event);\n  if (el.children) {\n    for (let i = 0; i < el.children.length; i++) {\n      if (hasButtonComponent(el.children[i].components)) {\n        el.children[i].object3D.dispatchEvent(event);\n      }\n    }\n  }\n}\n\nconst HOVERED = { type: \"hovered\" };\nconst UNHOVERED = { type: \"unhovered\" };\nexport class HoverButtonSystem {\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const button = getHoverableButton(interaction.state.rightRemote.hovered);\n\n    if (this.prevButton && this.prevButton !== button) {\n      dispatch(this.prevButton, UNHOVERED);\n    }\n\n    if (button && this.prevButton !== button) {\n      dispatch(button, HOVERED);\n    }\n\n    this.prevButton = button;\n  }\n}\n","function getSpecificHoverMenu(el) {\n  return (\n    el.components[\"hover-menu\"] ||\n    el.components[\"hover-menu__video\"] ||\n    el.components[\"hover-menu__camera\"] ||\n    el.components[\"hover-menu__hubs-item\"] ||\n    el.components[\"hover-menu__link\"] ||\n    el.components[\"hover-menu__photo\"]\n  );\n}\n\nfunction findHoverMenu(hovered) {\n  if (!hovered) return null;\n  const hoverMenu = getSpecificHoverMenu(hovered);\n  if (hoverMenu) {\n    return hoverMenu;\n  }\n  if (!(hovered.components.tags && hovered.components.tags.data.isHoverMenuChild)) {\n    return null;\n  }\n  let el = hovered.parentNode;\n  while (!getSpecificHoverMenu(el)) {\n    el = el.parentNode;\n  }\n  return getSpecificHoverMenu(el);\n}\n\nexport class HoverMenuSystem {\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const hoverMenu = findHoverMenu(interaction.state.rightRemote.hovered);\n\n    if (this.prevHoverMenu && this.prevHoverMenu !== hoverMenu) {\n      this.prevHoverMenu.hovering = false;\n      this.prevHoverMenu.applyHoverState();\n    }\n\n    if (hoverMenu && this.prevHoverMenu !== hoverMenu) {\n      hoverMenu.hovering = true;\n      hoverMenu.applyHoverState();\n    }\n\n    this.prevHoverMenu = hoverMenu;\n  }\n}\n","import { addMedia } from \"../utils/media-utils\";\nimport { ObjectContentOrigins } from \"../object-types\";\n\n// WARNING: This system mutates interaction system state!\nexport class SuperSpawnerSystem {\n  maybeSpawn(state, entity, grabPath) {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const superSpawner = state.hovered && state.hovered.components[\"super-spawner\"];\n    if (superSpawner && !superSpawner.cooldownTimeout && userinput.get(grabPath)) {\n      this.performSpawn(state, entity, grabPath, userinput, superSpawner);\n    }\n  }\n\n  performSpawn(state, entity, grabPath, userinput, superSpawner) {\n    entity.object3D.updateMatrices();\n    entity.object3D.matrix.decompose(entity.object3D.position, entity.object3D.quaternion, entity.object3D.scale);\n    const data = superSpawner.data;\n    const spawnedEntity = addMedia(\n      data.src,\n      data.template,\n      ObjectContentOrigins.SPAWNER,\n      null,\n      data.resolve,\n      data.resize,\n      false\n    ).entity;\n    spawnedEntity.object3D.position.copy(\n      data.useCustomSpawnPosition ? data.spawnPosition : superSpawner.el.object3D.position\n    );\n    spawnedEntity.object3D.rotation.copy(\n      data.useCustomSpawnRotation ? data.spawnRotation : superSpawner.el.object3D.rotation\n    );\n    spawnedEntity.object3D.scale.copy(data.useCustomSpawnScale ? data.spawnScale : superSpawner.el.object3D.scale);\n    spawnedEntity.object3D.matrixNeedsUpdate = true;\n    state.held = spawnedEntity;\n\n    superSpawner.activateCooldown();\n    state.spawning = true;\n    // WARNING: previously used waitForEvent which is semantically different than\n    // entity.addEventListener(\"body-loaded\", ...) and adding a callback fn via\n    // addEventListener will not work unless the callback function wraps its code in setTimeout(()=>{...}, 0)\n    spawnedEntity.addEventListener(\n      \"body-loaded\",\n      () => {\n        setTimeout(() => {\n          state.spawning = false;\n          spawnedEntity.object3D.position.copy(\n            data.useCustomSpawnPosition ? data.spawnPosition : superSpawner.el.object3D.position\n          );\n          if (data.centerSpawnedObject) {\n            spawnedEntity.body.position.copy(entity.object3D.position);\n          }\n          spawnedEntity.object3D.matrixNeedsUpdate = true;\n        });\n      },\n      { once: true }\n    );\n  }\n\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    this.maybeSpawn(\n      interaction.state.leftHand,\n      interaction.options.leftHand.entity,\n      interaction.options.leftHand.grabPath\n    );\n    this.maybeSpawn(\n      interaction.state.rightHand,\n      interaction.options.rightHand.entity,\n      interaction.options.rightHand.grabPath\n    );\n    this.maybeSpawn(\n      interaction.state.rightRemote,\n      interaction.options.rightRemote.entity,\n      interaction.options.rightRemote.grabPath\n    );\n  }\n}\n","import { paths } from \"./userinput/paths\";\nimport { distanceBetweenStretchers } from \"./two-point-stretching-system\";\n\nfunction copyState(previous, current, isTeleporting) {\n  previous.held = current.held;\n  previous.hovered = current.hovered;\n  previous.isTeleporting = isTeleporting;\n}\n\n// TODO: These strengths should be written into bindings, since vibration strength varies across devices.\nconst STRENGTH = {\n  DROP: 0.1,\n  PICKUP: 0.2,\n  BUTTON_PRESSED: 0.2,\n  HOVER: 0.08,\n  STRETCH_BASE: 0.05,\n  STRETCH_DISTANCE: 0.2,\n  TELEPORTING: 0.08,\n  TELEPORTED: 0.2\n};\n\nfunction determineStrength(previous, current, isTeleporting) {\n  if (previous.held && !current.held) {\n    return STRENGTH.DROP;\n  } else if (!previous.held && current.held) {\n    return STRENGTH.PICKUP;\n  } else if (!previous.hovered && current.hovered) {\n    return STRENGTH.HOVER;\n  } else if (isTeleporting) {\n    return STRENGTH.TELEPORTING;\n  } else if (previous.isTeleporting && !isTeleporting) {\n    return STRENGTH.TELEPORTED;\n  } else {\n    return 0;\n  }\n}\n\nfunction determineStretchStrength(stretchSystem) {\n  if (!stretchSystem.stretcherLeft || !stretchSystem.stretcherRight) {\n    return 0;\n  }\n\n  return THREE.Math.clamp(\n    STRENGTH.STRETCH_BASE +\n      STRENGTH.STRETCH_DISTANCE *\n        Math.abs(\n          distanceBetweenStretchers(stretchSystem.stretcherLeft, stretchSystem.stretcherRight) -\n            stretchSystem.initialStretchDistance\n        ),\n    0,\n    0.5\n  );\n}\n\nexport class HapticFeedbackSystem {\n  constructor() {\n    this.state = {\n      rightHand: {\n        held: null,\n        hovered: null,\n        isTeleporting: false\n      },\n      rightRemote: {\n        held: null,\n        hovered: null,\n        isTeleporting: false\n      },\n      leftHand: {\n        held: null,\n        hovered: null,\n        isTeleporting: false\n      }\n    };\n  }\n\n  tick(twoPointStretchingSystem, didClickButton) {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const leftActuator = userinput.get(paths.haptics.actuators.left);\n    const rightActuator = userinput.get(paths.haptics.actuators.right);\n    if (!leftActuator && !rightActuator) {\n      return;\n    }\n\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const { leftHand, rightHand, rightRemote } = interaction.state;\n    this.leftTeleporter =\n      this.leftTeleporter || document.querySelector(\"#player-left-controller\").components.teleporter;\n    this.rightTeleporter =\n      this.rightTeleporter || document.querySelector(\"#player-right-controller\").components.teleporter;\n\n    const leftHandStrength = determineStrength(this.state.leftHand, leftHand, this.leftTeleporter.isTeleporting);\n    const rightHandStrength = determineStrength(this.state.rightHand, rightHand, this.rightTeleporter.isTeleporting);\n    const rightRemoteStrength = determineStrength(this.state.rightRemote, rightRemote, false);\n    const buttonPressedStrength = didClickButton ? STRENGTH.BUTTON_PRESSED : 0;\n    const stretchingStrength = determineStretchStrength(twoPointStretchingSystem);\n\n    const leftStrength = Math.max(leftHandStrength, stretchingStrength);\n    const rightStrength = Math.max(rightHandStrength, rightRemoteStrength, stretchingStrength, buttonPressedStrength);\n\n    if (leftStrength && leftActuator) {\n      leftActuator.pulse(leftStrength, 15);\n    }\n\n    if (rightStrength && rightActuator) {\n      rightActuator.pulse(rightStrength, 15);\n    }\n\n    copyState(this.state.rightHand, rightHand, this.rightTeleporter.isTeleporting);\n    copyState(this.state.leftHand, leftHand, this.leftTeleporter.isTeleporting);\n    copyState(this.state.rightRemote, rightRemote, false);\n  }\n}\n","import { BatchRawUniformGroup } from \"@mozillareality/three-batch-manager\";\n\nconst tempVec3 = new Array(3);\nconst tempVec4 = new Array(4);\n\nexport const INSTANCE_DATA_BYTE_LENGTH = 112;\nconst DEFAULT_COLOR = new THREE.Color(1, 1, 1);\nconst HIDE_MATRIX = new THREE.Matrix4().makeScale(0, 0, 0);\n\nexport function sizeofInstances(instanceCount) {\n  const hubsDataSize =\n    instanceCount * 4 * 4 + // sweepParams\n    4 *\n      (3 + // interactorOnePos\n      1 + // isFrozen\n      3 + // interactorTwoPos\n        1); // time\n  return instanceCount * INSTANCE_DATA_BYTE_LENGTH + hubsDataSize;\n}\n\nexport default class HubsBatchRawUniformGroup extends BatchRawUniformGroup {\n  constructor(maxInstances, meshToEl) {\n    const data = new ArrayBuffer(sizeofInstances(maxInstances));\n    super(maxInstances, \"InstanceData\", data);\n\n    let offset = this.offset;\n    this.hubs_sweepParams = new Float32Array(this.data, offset, 4 * maxInstances);\n    offset += this.hubs_sweepParams.byteLength;\n\n    this.hubs_interactorOnePos = new Float32Array(this.data, offset, 3);\n    offset += this.hubs_interactorOnePos.byteLength;\n\n    this.hubs_isFrozen = new Uint32Array(this.data, offset, 1);\n    offset += this.hubs_isFrozen.byteLength;\n\n    this.hubs_interactorTwoPos = new Float32Array(this.data, offset, 3);\n    offset += this.hubs_interactorTwoPos.byteLength;\n\n    this.hubs_time = new Float32Array(this.data, offset, 1);\n    offset += this.hubs_time.byteLength;\n\n    this.offset = offset;\n\n    this.meshToEl = meshToEl;\n  }\n\n  update(time) {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    let interactorOne, interactorTwo;\n\n    for (let instanceId = 0; instanceId < this.meshes.length; instanceId++) {\n      const mesh = this.meshes[instanceId];\n      if (!mesh) continue;\n\n      mesh.updateMatrices();\n\n      // TODO need to account for nested visibility deeper than 1 level\n      this.setInstanceTransform(instanceId, mesh.visible && mesh.parent.visible ? mesh.matrixWorld : HIDE_MATRIX);\n      this.setInstanceColor(instanceId, mesh.material.color || DEFAULT_COLOR, mesh.material.opacity || 1);\n\n      const el = this.meshToEl.get(mesh);\n      if (el) {\n        const obj = el.object3D;\n        const hoverableVisuals = el.components[\"hoverable-visuals\"];\n        const worldY = obj.matrixWorld.elements[13];\n        const scaledRadius = obj.scale.y * hoverableVisuals.boundingSphere.radius;\n\n        const isPinned = el.components.pinnable && el.components.pinnable.data.pinned;\n        const isSpawner = !!el.components[\"super-spawner\"];\n        const isFrozen = el.sceneEl.is(\"frozen\");\n        const hideDueToPinning = !isSpawner && isPinned && !isFrozen;\n\n        let highlightInteractorOne, highlightInteractorTwo;\n        if (interaction.state.leftHand.hovered === el || interaction.state.leftHand.held === el) {\n          interactorOne = interaction.options.leftHand.entity.object3D;\n          highlightInteractorOne = true;\n        }\n\n        if (interaction.state.rightRemote.hovered === el || interaction.state.rightRemote.held === el) {\n          interactorTwo = interaction.options.rightRemote.entity.object3D;\n          highlightInteractorTwo = true;\n        } else if (interaction.state.rightHand.hovered === el || interaction.state.rightHand.held === el) {\n          interactorTwo = interaction.options.rightHand.entity.object3D;\n          highlightInteractorTwo = true;\n        }\n\n        tempVec4[0] = worldY - scaledRadius;\n        tempVec4[1] = worldY + scaledRadius;\n        tempVec4[2] = !!highlightInteractorOne && !hideDueToPinning;\n        tempVec4[3] = !!highlightInteractorTwo && !hideDueToPinning;\n        this.hubs_sweepParams.set(tempVec4, instanceId * 4);\n      }\n    }\n\n    if (interactorOne) {\n      tempVec3[0] = interactorOne.matrixWorld.elements[12];\n      tempVec3[1] = interactorOne.matrixWorld.elements[13];\n      tempVec3[2] = interactorOne.matrixWorld.elements[14];\n      this.hubs_interactorOnePos.set(tempVec3);\n    }\n\n    if (interactorTwo) {\n      tempVec3[0] = interactorTwo.matrixWorld.elements[12];\n      tempVec3[1] = interactorTwo.matrixWorld.elements[13];\n      tempVec3[2] = interactorTwo.matrixWorld.elements[14];\n      this.hubs_interactorTwoPos.set(tempVec3);\n    }\n\n    this.hubs_time[0] = time;\n    this.hubs_isFrozen[0] = AFRAME.scenes[0].is(\"frozen\") ? 1 : 0;\n  }\n}\n","import { BatchManager } from \"@mozillareality/three-batch-manager\";\n\nimport HubsBatchRawUniformGroup from \"./render-manager/hubs-batch-raw-uniform-group\";\nimport { sizeofInstances } from \"./render-manager/hubs-batch-raw-uniform-group\";\nimport unlitBatchVert from \"./render-manager/unlit-batch.vert\";\nimport unlitBatchFrag from \"./render-manager/unlit-batch.frag\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\nconst MAX_INSTANCES = 500;\nconst UBO_BYTE_LENGTH = sizeofInstances(MAX_INSTANCES);\n\nexport class BatchManagerSystem {\n  constructor(scene, renderer) {\n    this.meshToEl = new WeakMap();\n    const gl = renderer.context;\n\n    if (!qsTruthy(\"enableBatching\")) {\n      console.warn(\"Batching is not on by default and must be turned on with enableBatching. Disabling batching.\");\n      return;\n    }\n\n    if (!(window.WebGL2RenderingContext && gl instanceof WebGL2RenderingContext)) {\n      console.warn(\"Batching requires WebGL 2. Disabling batching.\");\n      return;\n    }\n\n    if (UBO_BYTE_LENGTH > gl.getParameter(gl.MAX_UNIFORM_BLOCK_SIZE)) {\n      console.warn(\"Insufficient MAX_UNIFORM_BLOCK_SIZE, Disabling batching\");\n      return;\n    }\n\n    this.batchingEnabled = true;\n\n    this.ubo = new HubsBatchRawUniformGroup(MAX_INSTANCES, this.meshToEl);\n    this.batchManager = new BatchManager(scene, renderer, {\n      maxInstances: MAX_INSTANCES,\n      ubo: this.ubo,\n      shaders: {\n        unlit: {\n          vertexShader: unlitBatchVert,\n          fragmentShader: unlitBatchFrag\n        }\n      }\n    });\n  }\n\n  addObject(rootObject) {\n    if (!this.batchingEnabled) return 0;\n\n    let batchedCount = 0;\n    rootObject.traverse(object => {\n      if (object.isMesh) {\n        if (this.batchManager.addMesh(object)) batchedCount++;\n      }\n    });\n    return batchedCount;\n  }\n\n  removeObject(rootObject) {\n    if (!this.batchingEnabled) return;\n\n    rootObject.traverse(object => {\n      if (object.isMesh) {\n        this.batchManager.removeMesh(object);\n      }\n    });\n  }\n\n  tick(time) {\n    if (!this.batchingEnabled) return;\n\n    this.batchManager.update(time);\n  }\n}\n","export class LobbyCameraSystem {\n  tick() {\n    const el = document.querySelector(\"[scene-preview-camera]\");\n    if (el) {\n      el.components[\"scene-preview-camera\"].tick2();\n    }\n  }\n}\n","import { CursorTargettingSystem } from \"./cursor-targetting-system\";\nimport { ConstraintsSystem } from \"./constraints-system\";\nimport { TwoPointStretchingSystem } from \"./two-point-stretching-system\";\nimport { SingleActionButtonSystem, HoldableButtonSystem, HoverButtonSystem } from \"./button-systems\";\nimport { HoverMenuSystem } from \"./hover-menu-system\";\nimport { SuperSpawnerSystem } from \"./super-spawner-system\";\nimport { HapticFeedbackSystem } from \"./haptic-feedback-system\";\nimport { SoundEffectsSystem } from \"./sound-effects-system\";\n\nimport { BatchManagerSystem } from \"./render-manager-system\";\nimport { LobbyCameraSystem } from \"./lobby-camera-system\";\n\nAFRAME.registerSystem(\"hubs-systems\", {\n  init() {\n    this.cursorTargettingSystem = new CursorTargettingSystem();\n    this.constraintsSystem = new ConstraintsSystem();\n    this.twoPointStretchingSystem = new TwoPointStretchingSystem();\n    this.singleActionButtonSystem = new SingleActionButtonSystem();\n    this.holdableButtonSystem = new HoldableButtonSystem();\n    this.hoverButtonSystem = new HoverButtonSystem();\n    this.hoverMenuSystem = new HoverMenuSystem();\n    this.superSpawnerSystem = new SuperSpawnerSystem();\n    this.hapticFeedbackSystem = new HapticFeedbackSystem();\n    this.soundEffectsSystem = new SoundEffectsSystem();\n    this.lobbyCameraSystem = new LobbyCameraSystem();\n    this.batchManagerSystem = new BatchManagerSystem(this.el.sceneEl.object3D, this.el.sceneEl.renderer);\n  },\n\n  tick(t) {\n    const systems = AFRAME.scenes[0].systems;\n    systems.userinput.tick2();\n    systems.interaction.tick2(this.soundEffectsSystem);\n    this.superSpawnerSystem.tick();\n    this.cursorTargettingSystem.tick(t);\n    this.constraintsSystem.tick();\n    this.twoPointStretchingSystem.tick();\n    this.singleActionButtonSystem.tick();\n    this.holdableButtonSystem.tick();\n    this.hoverButtonSystem.tick();\n    this.hoverMenuSystem.tick();\n    this.hapticFeedbackSystem.tick(this.twoPointStretchingSystem, this.singleActionButtonSystem.didInteractThisFrame);\n    this.soundEffectsSystem.tick();\n    this.lobbyCameraSystem.tick();\n    // batchManager is ticked in \"post-physics\" system\n  },\n\n  remove() {\n    this.cursorTargettingSystem.remove();\n  }\n});\n","import qsTruthy from \"../utils/qs_truthy\";\n\nAFRAME.registerSystem(\"capture-system\", {\n  init() {\n    this._gotAudioTrack = false;\n    this._recorderTimeout = null;\n  },\n\n  _initRecorder() {\n    if (!this.available()) return;\n\n    this._stream = new MediaStream();\n\n    const video = this.el.canvas.captureStream().getVideoTracks()[0];\n    this._stream.addTrack(video);\n\n    this._recorder = new MediaRecorder(this._stream, { mimeType: \"video/webm; codecs=vp8\" });\n\n    const chunks = [];\n\n    this._recorder.ondataavailable = e => {\n      chunks.push(e.data);\n    };\n    this._recorder.onstop = () => {\n      if (chunks.length === 0) return;\n      const mimeType = chunks[0].type;\n      const blob = new Blob(chunks, { type: mimeType });\n      chunks.length = 0;\n      this.el.emit(\"add_media\", new File([blob], \"capture\", { type: mimeType }));\n    };\n  },\n\n  available() {\n    return qsTruthy(\"video_capture\") && window.MediaRecorder && MediaRecorder.isTypeSupported(\"video/webm; codecs=vp8\");\n  },\n\n  started() {\n    return this._recorder && this._recorder.state !== \"inactive\";\n  },\n\n  _tryAddingAudioTrack() {\n    if (this._gotAudioTrack || !this.el.audioListener) return;\n\n    const listener = this.el.audioListener;\n    const destination = listener.context.createMediaStreamDestination();\n    listener.getInput().connect(destination);\n    const audio = destination.stream.getAudioTracks()[0];\n\n    this._stream.addTrack(audio);\n    this._gotAudioTrack = true;\n  },\n\n  start() {\n    if (!this._recorder) {\n      this._initRecorder();\n    }\n\n    // The scene doesn't get an audioListener until something in the scene is playing audio.\n    // So we have to get the audio track lazily.\n    this._tryAddingAudioTrack();\n\n    if (!this.started()) {\n      this._recorder.start();\n      this._recorderTimeout = setTimeout(() => {\n        if (this.started()) {\n          this._recorder.stop();\n        }\n      }, 15000);\n    }\n  },\n\n  stop() {\n    if (this.started()) {\n      clearTimeout(this._recorderTimeout);\n      this._recorder.stop();\n    }\n  }\n});\n","/* global AFRAME THREE */\n\n// See doc/spritesheet-generation.md for information about this spritesheet\nimport spritesheet from \"../assets/images/spritesheets/sprite-system-spritesheet.json\";\nimport { createImageTexture } from \"../utils/media-utils\";\nimport spritesheetPng from \"../assets/images/spritesheets/sprite-system-spritesheet.png\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport vert from \"./sprites/sprite.vert\";\nimport frag from \"./sprites/sprite.frag\";\n\nconst multiviewVertPrefix = [\n  // GLSL 3.0 conversion\n  \"#version 300 es\",\n  \"#define attribute in\",\n  \"#define varying out\",\n  \"#define texture2D texture\",\n  \"#extension GL_OVR_multiview : require\",\n  \"layout(num_views = 2) in;\",\n  \"uniform mat4 modelViewMatrix;\",\n  \"uniform mat4 modelViewMatrix2;\",\n  \"#define modelViewMatrix (gl_ViewID_OVR==0u?modelViewMatrix:modelViewMatrix2)\",\n  \"uniform mat4 projectionMatrix;\",\n  \"uniform mat4 projectionMatrix2;\",\n  \"#define projectionMatrix (gl_ViewID_OVR==0u?projectionMatrix:projectionMatrix2)\",\n  \"\"\n].join(\"\\n\");\nconst nonmultiviewVertPrefix = [\"uniform mat4 modelViewMatrix;\", \"uniform mat4 projectionMatrix;\", \"\"].join(\"\\n\");\n\nconst multiviewFragPrefix = [\n  \"#version 300 es\",\n  \"#define varying in\",\n  \"out highp vec4 pc_fragColor;\",\n  \"#define gl_FragColor pc_fragColor\",\n  \"#define texture2D texture\",\n  \"\"\n].join(\"\\n\");\n\nconst nonmultiviewFragPrefix = \"\";\n\nfunction isVisible(o) {\n  if (!o.visible) return false;\n  if (!o.parent) return true;\n  return isVisible(o.parent);\n}\n\nAFRAME.registerComponent(\"sprite\", {\n  schema: { name: { type: \"string\" } },\n  tick() {\n    // TODO when we run out of sprites we currently just stop rendering them. We need to do something better.\n    if (!(this.didRegisterWithSystem || this.didFailToRegister) && this.el.sceneEl.systems[\"post-physics\"]) {\n      const registered = this.el.sceneEl.systems[\"post-physics\"].spriteSystem.add(this);\n      this.didRegisterWithSystem = registered > 0;\n      this.didFailToRegister = registered < 0;\n    }\n  },\n\n  update() {\n    if (this.didRegisterWithSystem) {\n      this.el.sceneEl.systems[\"post-physics\"].spriteSystem.updateUVs(this);\n    }\n  },\n\n  remove() {\n    if (this.didRegisterWithSystem) {\n      this.el.sceneEl.systems[\"post-physics\"].spriteSystem.remove(this);\n    }\n  }\n});\n\nconst normalizedFrame = (function() {\n  const memo = new Map();\n  return function normalizedFrame(name, spritesheet, missingSprites) {\n    let ret = memo.get(name);\n    if (ret) {\n      return ret;\n    } else {\n      if (!spritesheet.frames[name]) {\n        if (missingSprites.indexOf(name) === -1) {\n          missingSprites.push(name);\n        }\n        ret = { x: 0, y: 0, w: 0, h: 0 };\n        memo.set(name, ret);\n        return ret;\n      }\n      const size = spritesheet.meta.size;\n      const frame = spritesheet.frames[name].frame;\n      ret = {\n        x: frame.x / size.w,\n        y: frame.y / size.h,\n        w: frame.w / size.w,\n        h: frame.h / size.h\n      };\n      memo.set(name, ret);\n      return ret;\n    }\n  };\n})();\n\nconst raycastOnSprite = (function() {\n  const vA = new THREE.Vector3();\n  const vB = new THREE.Vector3();\n  const vC = new THREE.Vector3();\n  const vD = new THREE.Vector3();\n  const point = new THREE.Vector3();\n  const intersectionInfo = { distance: 0, point, object: null };\n\n  return function raycast(raycaster, intersects) {\n    vA.set(-0.5, 0.5, 0).applyMatrix4(this.matrixWorld);\n    vB.set(0.5, 0.5, 0).applyMatrix4(this.matrixWorld);\n    vC.set(-0.5, -0.5, 0).applyMatrix4(this.matrixWorld);\n    let intersect = raycaster.ray.intersectTriangle(vA, vC, vB, false, point);\n    if (intersect === null) {\n      vD.set(0.5, -0.5, 0).applyMatrix4(this.matrixWorld);\n      intersect = raycaster.ray.intersectTriangle(vB, vC, vD, false, point);\n      if (intersect === null) {\n        return;\n      }\n    }\n\n    const distance = raycaster.ray.origin.distanceTo(point);\n    if (distance < raycaster.near || distance > raycaster.far) return;\n\n    intersectionInfo.distance = distance;\n    intersectionInfo.point = point;\n    intersectionInfo.object = this;\n    intersects.push(intersectionInfo);\n  };\n})();\n\nfunction getHoverableVisuals(el) {\n  if (!el || !el.components) return null;\n  if (el.components[\"hoverable-visuals\"]) {\n    return el.components[\"hoverable-visuals\"];\n  }\n  return getHoverableVisuals(el.parentEl);\n}\n\nfunction enableSweepingEffect(comp) {\n  const hoverableVisuals = getHoverableVisuals(comp.el);\n  if (!hoverableVisuals) {\n    return false;\n  }\n\n  const isPinned = hoverableVisuals.el.components.pinnable && hoverableVisuals.el.components.pinnable.data.pinned;\n  const isSpawner = !!hoverableVisuals.el.components[\"super-spawner\"];\n  const isFrozen = hoverableVisuals.el.sceneEl.is(\"frozen\");\n  const hideDueToPinning = !isSpawner && isPinned && !isFrozen;\n  return hoverableVisuals.data.enableSweepingEffect && !hideDueToPinning;\n}\n\nfunction createGeometry(maxSprites) {\n  const geometry = new THREE.BufferGeometry();\n  geometry.addAttribute(\"a_vertices\", new THREE.BufferAttribute(new Float32Array(maxSprites * 3 * 4), 3, false));\n  geometry.addAttribute(\n    \"a_hubs_EnableSweepingEffect\",\n    new THREE.BufferAttribute(new Float32Array(maxSprites * 4), 1, false)\n  );\n  geometry.addAttribute(\n    \"a_hubs_SweepParams\",\n    new THREE.BufferAttribute(new Float32Array(maxSprites * 4 * 2), 2, false)\n  );\n  geometry.addAttribute(\"a_uvs\", new THREE.BufferAttribute(new Float32Array(maxSprites * 2 * 4), 2, false));\n  const mvCols = new THREE.InterleavedBuffer(new Float32Array(maxSprites * 16 * 4), 16);\n  geometry.addAttribute(\"mvCol0\", new THREE.InterleavedBufferAttribute(mvCols, 4, 0, false));\n  geometry.addAttribute(\"mvCol1\", new THREE.InterleavedBufferAttribute(mvCols, 4, 4, false));\n  geometry.addAttribute(\"mvCol2\", new THREE.InterleavedBufferAttribute(mvCols, 4, 8, false));\n  geometry.addAttribute(\"mvCol3\", new THREE.InterleavedBufferAttribute(mvCols, 4, 12, false));\n  const indices = new Array(3 * 2 * maxSprites);\n  for (let i = 0; i < maxSprites; i++) {\n    indices[i * 3 * 2 + 0] = i * 4 + 0;\n    indices[i * 3 * 2 + 1] = i * 4 + 2;\n    indices[i * 3 * 2 + 2] = i * 4 + 1;\n    indices[i * 3 * 2 + 3] = i * 4 + 1;\n    indices[i * 3 * 2 + 4] = i * 4 + 2;\n    indices[i * 3 * 2 + 5] = i * 4 + 3;\n  }\n  geometry.setIndex(indices);\n  return geometry;\n}\n\nconst ZEROS = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\nexport class SpriteSystem {\n  raycast(raycaster, intersects) {\n    for (let i = 0; i < this.slots.length; i++) {\n      if (!this.slots[i]) continue;\n\n      const o = this.indexWithSprite.get(i).el.object3D;\n      if (isVisible(o)) {\n        raycastOnSprite.call(o, raycaster, intersects);\n      }\n    }\n    return intersects;\n  }\n  constructor(scene) {\n    this.missingSprites = [];\n    this.maxSprites = 512;\n    this.slots = new Array(this.maxSprites);\n    this.spriteWithIndex = new Map();\n    this.indexWithSprite = new Map();\n    this.stack = new Array(this.maxSprites);\n    for (let i = 0; i < this.maxSprites; i++) {\n      this.stack[i] = this.maxSprites - 1 - i;\n    }\n\n    const vertexShader = String.prototype.concat(\n      scene.renderer.vr.multiview ? multiviewVertPrefix : nonmultiviewVertPrefix,\n      vert\n    );\n    const fragmentShader = String.prototype.concat(\n      scene.renderer.vr.multiview ? multiviewFragPrefix : nonmultiviewFragPrefix,\n      frag\n    );\n    Promise.all([createImageTexture(spritesheetPng), waitForDOMContentLoaded()]).then(([spritesheetTexture]) => {\n      const material = new THREE.RawShaderMaterial({\n        uniforms: {\n          u_spritesheet: { value: spritesheetTexture },\n          hubs_Time: { value: 0 }\n        },\n        vertexShader,\n        fragmentShader,\n        side: THREE.DoubleSide,\n        transparent: true\n      });\n      this.mesh = new THREE.Mesh(createGeometry(this.maxSprites), material);\n      const el = document.createElement(\"a-entity\");\n      el.classList.add(\"ui\");\n      scene.appendChild(el);\n      el.setObject3D(\"mesh\", this.mesh);\n      this.mesh.frustumCulled = false;\n      this.mesh.renderOrder = window.APP.RENDER_ORDER.HUD_ICONS;\n      this.mesh.raycast = this.raycast.bind(this);\n    });\n  }\n\n  tick(t) {\n    if (!this.mesh) return;\n\n    this.mesh.material.uniforms.hubs_Time.value = t;\n    this.mesh.material.uniformsNeedUpdate = true;\n\n    const mvCols = this.mesh.geometry.attributes[\"mvCol0\"].data; // interleaved\n    const aEnableSweepingEffect = this.mesh.geometry.attributes[\"a_hubs_EnableSweepingEffect\"];\n    const aSweepParams = this.mesh.geometry.attributes[\"a_hubs_SweepParams\"];\n    for (let i = 0; i < this.slots.length; i++) {\n      if (!this.slots[i]) continue;\n\n      const sprite = this.indexWithSprite.get(i);\n      if (isVisible(sprite.el.object3D)) {\n        const enableSweepingEffectValue = enableSweepingEffect(sprite) ? 1 : 0;\n        aEnableSweepingEffect.array[i * 4 + 0] = enableSweepingEffectValue;\n        aEnableSweepingEffect.array[i * 4 + 1] = enableSweepingEffectValue;\n        aEnableSweepingEffect.array[i * 4 + 2] = enableSweepingEffectValue;\n        aEnableSweepingEffect.array[i * 4 + 3] = enableSweepingEffectValue;\n        aEnableSweepingEffect.needsUpdate = true;\n        if (enableSweepingEffectValue) {\n          const hoverableVisuals = getHoverableVisuals(sprite.el);\n          const s = hoverableVisuals.sweepParams[0];\n          const t = hoverableVisuals.sweepParams[1];\n          aSweepParams.setXY(4 * i + 0, s, t);\n          aSweepParams.setXY(4 * i + 1, s, t);\n          aSweepParams.setXY(4 * i + 2, s, t);\n          aSweepParams.setXY(4 * i + 3, s, t);\n          aSweepParams.needsUpdate = true;\n        }\n\n        sprite.el.object3D.updateMatrices();\n        const mat4 = sprite.el.object3D.matrixWorld;\n        mvCols.array.set(mat4.elements, i * 4 * 16 + 0);\n        mvCols.array.set(mat4.elements, i * 4 * 16 + 1 * 16);\n        mvCols.array.set(mat4.elements, i * 4 * 16 + 2 * 16);\n        mvCols.array.set(mat4.elements, i * 4 * 16 + 3 * 16);\n        mvCols.needsUpdate = true;\n      } else {\n        mvCols.array.set(ZEROS, i * 4 * 16 + 0);\n        mvCols.array.set(ZEROS, i * 4 * 16 + 1 * 16);\n        mvCols.array.set(ZEROS, i * 4 * 16 + 2 * 16);\n        mvCols.array.set(ZEROS, i * 4 * 16 + 3 * 16);\n        mvCols.needsUpdate = true;\n      }\n    }\n  }\n\n  updateUVs(sprite) {\n    const flipY = this.mesh.material.uniforms.u_spritesheet.value.flipY;\n    const i = this.spriteWithIndex.get(sprite);\n    const frame = normalizedFrame(sprite.data.name, spritesheet, this.missingSprites);\n    const aUvs = this.mesh.geometry.attributes[\"a_uvs\"];\n\n    aUvs.setXY(i * 4 + 0, frame.x, flipY ? 1 - frame.y : frame.y);\n    aUvs.setXY(i * 4 + 1, frame.x + frame.w, flipY ? 1 - frame.y : frame.y);\n    aUvs.setXY(i * 4 + 2, frame.x, flipY ? 1 - frame.y - frame.h : frame.y + frame.h);\n    aUvs.setXY(i * 4 + 3, frame.x + frame.w, flipY ? 1 - frame.y - frame.h : frame.y + frame.h);\n    aUvs.needsUpdate = true;\n  }\n\n  add(sprite) {\n    if (!this.mesh) {\n      return 0;\n    }\n    const i = this.stack.pop();\n    if (i === undefined) {\n      console.error(\"Too many sprites\");\n      return -1;\n    }\n    this.slots[i] = true;\n    this.spriteWithIndex.set(sprite, i);\n    this.indexWithSprite.set(i, sprite);\n\n    this.updateUVs(sprite);\n\n    const aVertices = this.mesh.geometry.attributes[\"a_vertices\"];\n    aVertices.setXYZ(i * 4 + 0, -0.5, 0.5, 0);\n    aVertices.setXYZ(i * 4 + 1, 0.5, 0.5, 0);\n    aVertices.setXYZ(i * 4 + 2, -0.5, -0.5, 0);\n    aVertices.setXYZ(i * 4 + 3, 0.5, -0.5, 0);\n    aVertices.needsUpdate = true;\n    return 1;\n  }\n\n  remove(sprite) {\n    const i = this.spriteWithIndex.get(sprite);\n    this.spriteWithIndex.delete(sprite);\n    this.indexWithSprite.delete(i);\n    this.slots[i] = false;\n    this.stack.push(i);\n\n    const mvCols = this.mesh.geometry.attributes[\"mvCol0\"].data; // interleaved\n    mvCols.array.set(ZEROS, i * 4 * 16 + 0);\n    mvCols.array.set(ZEROS, i * 4 * 16 + 1 * 16);\n    mvCols.array.set(ZEROS, i * 4 * 16 + 2 * 16);\n    mvCols.array.set(ZEROS, i * 4 * 16 + 3 * 16);\n    mvCols.needsUpdate = true;\n  }\n}\n","import { SpriteSystem } from \"./sprites\";\n\nconst i = window.setInterval(() => {\n  if (AFRAME.scenes[0] && AFRAME.scenes[0].systems && AFRAME.scenes[0].systems.physics) {\n    AFRAME.registerSystem(\"post-physics\", {\n      init() {\n        this.spriteSystem = new SpriteSystem(this.el);\n        this.hubsSystems = this.el.sceneEl.systems[\"hubs-systems\"];\n      },\n      tick(t, dt) {\n        this.spriteSystem.tick(t, dt);\n        this.hubsSystems.batchManagerSystem.tick(t);\n      }\n    });\n    window.clearInterval(i);\n  }\n}, 1000);\n","import { paths } from \"../systems/userinput/paths\";\n\nAFRAME.registerComponent(\"scalable-when-grabbed\", {\n  tick: function() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    if (interaction.state.rightRemote.held !== this.el) return;\n    const deltaScale = userinput.get(paths.actions.cursor.scaleGrabbedGrabbable);\n    if (!deltaScale) return;\n\n    this.el.object3D.scale.addScalar(deltaScale).clampScalar(0.1, 100);\n    this.el.object3D.matrixNeedsUpdate = true;\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\nimport { sets } from \"../systems/userinput/sets\";\nimport { getLastWorldPosition } from \"../utils/three-utils\";\n\nconst HIGHLIGHT = new THREE.Color(23 / 255, 64 / 255, 118 / 255);\nconst NO_HIGHLIGHT = new THREE.Color(190 / 255, 190 / 255, 190 / 255);\nconst TRANSFORM_COLOR_1 = new THREE.Color(150 / 255, 80 / 255, 150 / 255);\nconst TRANSFORM_COLOR_2 = new THREE.Color(23 / 255, 64 / 255, 118 / 255);\nAFRAME.registerComponent(\"cursor-controller\", {\n  schema: {\n    cursor: { type: \"selector\" },\n    camera: { type: \"selector\" },\n    far: { default: 25 },\n    near: { default: 0.01 },\n    defaultDistance: { default: 4 },\n    minDistance: { default: 0.18 }\n  },\n\n  init: function() {\n    this.enabled = true;\n\n    this.data.cursor.addEventListener(\n      \"loaded\",\n      () => {\n        this.data.cursor.object3DMap.mesh.renderOrder = window.APP.RENDER_ORDER.CURSOR;\n      },\n      { once: true }\n    );\n\n    this.raycaster = new THREE.Raycaster();\n    this.raycaster.firstHitOnly = true; // flag specific to three-mesh-bvh\n    this.distance = this.data.far;\n    this.color = new THREE.Color(0, 0, 0);\n\n    const lineGeometry = new THREE.BufferGeometry();\n    lineGeometry.addAttribute(\"position\", new THREE.BufferAttribute(new Float32Array(2 * 3), 3));\n\n    this.line = new THREE.Line(\n      lineGeometry,\n      new THREE.LineBasicMaterial({\n        color: \"white\",\n        opacity: 0.2,\n        transparent: true,\n        visible: false\n      })\n    );\n    this.el.setObject3D(\"line\", this.line);\n  },\n\n  update: function() {\n    this.raycaster.far = this.data.far;\n    this.raycaster.near = this.data.near;\n  },\n\n  tick2: (() => {\n    const rawIntersections = [];\n    const cameraPos = new THREE.Vector3();\n\n    return function(t) {\n      const userinput = AFRAME.scenes[0].systems.userinput;\n      const cursorPose = userinput.get(paths.actions.cursor.pose);\n      const hideLine = userinput.get(paths.actions.cursor.hideLine);\n\n      this.data.cursor.object3D.visible = this.enabled && !!cursorPose;\n      this.line.material.visible = !!(this.enabled && !hideLine);\n\n      if (!this.enabled || !cursorPose) {\n        return;\n      }\n\n      const interaction = AFRAME.scenes[0].systems.interaction;\n      let intersection;\n      const isGrabbing = !!interaction.state.rightRemote.held;\n      if (!isGrabbing) {\n        rawIntersections.length = 0;\n        this.raycaster.ray.origin = cursorPose.position;\n        this.raycaster.ray.direction = cursorPose.direction;\n        this.raycaster.intersectObjects(\n          AFRAME.scenes[0].systems[\"hubs-systems\"].cursorTargettingSystem.targets,\n          true,\n          rawIntersections\n        );\n        intersection = rawIntersections[0];\n        interaction.updateCursorIntersection(intersection);\n        this.distance = intersection ? intersection.distance : this.data.defaultDistance;\n      }\n\n      const { cursor, minDistance, far, camera } = this.data;\n\n      const cursorModDelta = userinput.get(paths.actions.cursor.modDelta) || 0;\n      if (isGrabbing && !userinput.activeSets.includes(sets.cursorHoldingUI)) {\n        this.distance = THREE.Math.clamp(this.distance - cursorModDelta, minDistance, far);\n      }\n      cursor.object3D.position.copy(cursorPose.position).addScaledVector(cursorPose.direction, this.distance);\n      // The cursor will always be oriented towards the player about its Y axis, so objects held by the cursor will rotate towards the player.\n      getLastWorldPosition(camera.object3D, cameraPos);\n      cameraPos.y = cursor.object3D.position.y;\n      cursor.object3D.lookAt(cameraPos);\n      cursor.object3D.scale.setScalar(Math.pow(this.distance, 0.315) * 0.75);\n      cursor.object3D.matrixNeedsUpdate = true;\n\n      if (AFRAME.scenes[0].systems[\"transform-selected-object\"].transforming) {\n        this.color.copy(TRANSFORM_COLOR_1).lerpHSL(TRANSFORM_COLOR_2, 0.5 + 0.5 * Math.sin(t / 1000.0));\n      } else if (intersection || isGrabbing) {\n        this.color.copy(HIGHLIGHT);\n      } else {\n        this.color.copy(NO_HIGHLIGHT);\n      }\n\n      if (!this.data.cursor.object3DMap.mesh.material.color.equals(this.color)) {\n        this.data.cursor.object3DMap.mesh.material.color.copy(this.color);\n        this.data.cursor.object3DMap.mesh.material.needsUpdate = true;\n      }\n\n      if (this.line.material.visible) {\n        const posePosition = cursorPose.position;\n        const cursorPosition = cursor.object3D.position;\n        const positionArray = this.line.geometry.attributes.position.array;\n\n        positionArray[0] = posePosition.x;\n        positionArray[1] = posePosition.y;\n        positionArray[2] = posePosition.z;\n        positionArray[3] = cursorPosition.x;\n        positionArray[4] = cursorPosition.y;\n        positionArray[5] = cursorPosition.z;\n\n        this.line.geometry.attributes.position.needsUpdate = true;\n        this.line.geometry.computeBoundingSphere();\n      }\n    };\n  })()\n});\n","import { paths } from \"../../systems/userinput/paths\";\nimport { getLastWorldPosition, getLastWorldQuaternion } from \"../../utils/three-utils\";\nimport {\n  SOUND_PEN_START_DRAW,\n  SOUND_PEN_STOP_DRAW,\n  SOUND_PEN_UNDO_DRAW,\n  SOUND_PEN_CHANGE_COLOR\n} from \"../../systems/sound-effects-system\";\nimport { waitForDOMContentLoaded } from \"../../utils/async-utils\";\nimport MobileStandardMaterial from \"../../materials/MobileStandardMaterial\";\n\nconst pathsMap = {\n  \"player-right-controller\": {\n    startDrawing: paths.actions.rightHand.startDrawing,\n    stopDrawing: paths.actions.rightHand.stopDrawing,\n    undoDrawing: paths.actions.rightHand.undoDrawing,\n    switchDrawMode: paths.actions.rightHand.switchDrawMode,\n    penNextColor: paths.actions.rightHand.penNextColor,\n    penPrevColor: paths.actions.rightHand.penPrevColor,\n    scalePenTip: paths.actions.rightHand.scalePenTip\n  },\n  \"player-left-controller\": {\n    startDrawing: paths.actions.leftHand.startDrawing,\n    stopDrawing: paths.actions.leftHand.stopDrawing,\n    undoDrawing: paths.actions.leftHand.undoDrawing,\n    switchDrawMode: paths.actions.leftHand.switchDrawMode,\n    penNextColor: paths.actions.leftHand.penNextColor,\n    penPrevColor: paths.actions.leftHand.penPrevColor,\n    scalePenTip: paths.actions.leftHand.scalePenTip\n  },\n  cursor: {\n    pose: paths.actions.cursor.pose,\n    startDrawing: paths.actions.cursor.startDrawing,\n    stopDrawing: paths.actions.cursor.stopDrawing,\n    undoDrawing: paths.actions.cursor.undoDrawing,\n    penNextColor: paths.actions.cursor.penNextColor,\n    penPrevColor: paths.actions.cursor.penPrevColor,\n    scalePenTip: paths.actions.cursor.scalePenTip\n  }\n};\n\nconst DRAW_MODE = {\n  DEFAULT_2D: 0,\n  PROJECTION: 1\n};\n\nconst MAX_DISTANCE_BETWEEN_SURFACES = 1;\n\n/**\n * Pen tool\n * A tool that allows drawing on networked-drawing components.\n * @namespace drawing\n * @component pen\n */\n\nfunction almostEquals(epsilon, u, v) {\n  return Math.abs(u.x - v.x) < epsilon && Math.abs(u.y - v.y) < epsilon && Math.abs(u.z - v.z) < epsilon;\n}\n\nAFRAME.registerComponent(\"pen\", {\n  schema: {\n    drawFrequency: { default: 5 }, //frequency of polling for drawing points\n    minDistanceBetweenPoints: { default: 0.01 }, //minimum distance to register new drawing point\n    camera: { type: \"selector\" },\n    drawingManager: { type: \"string\" },\n    color: { type: \"color\", default: \"#FF0033\" },\n    availableColors: {\n      default: [\n        \"#FF0033\",\n        \"#FFFF00\",\n        \"#0099FF\",\n        \"#00FF33\",\n        \"#9900FF\",\n        \"#FF6600\",\n        \"#8D5524\",\n        \"#C68642\",\n        \"#E0AC69\",\n        \"#F1C27D\",\n        \"#FFDBAC\",\n        \"#FFFFFF\",\n        \"#222222\",\n        \"#111111\",\n        \"#000000\"\n      ]\n    },\n    radius: { default: 0.01 }, //drawing geometry radius\n    minRadius: { default: 0.005 },\n    maxRadius: { default: 0.2 },\n    far: { default: 100 },\n    near: { default: 0.01 }\n  },\n\n  init() {\n    this.timeSinceLastDraw = 0;\n\n    this.lastPosition = new THREE.Vector3();\n    this.lastPosition.copy(this.el.object3D.position);\n\n    this.direction = new THREE.Vector3(1, 0, 0);\n\n    this.currentDrawing = null;\n\n    this.normal = new THREE.Vector3();\n\n    this.worldPosition = new THREE.Vector3();\n\n    this.colorIndex = 0;\n\n    this.grabbed = false;\n\n    this.raycaster = new THREE.Raycaster();\n    this.raycaster.firstHitOnly = true; // flag specific to three-mesh-bvh\n\n    this.originalPosition = this.el.object3D.position.clone();\n    this.intersection = null;\n    this.lastIntersectionDistance = 0;\n\n    const lineGeometry = new THREE.BufferGeometry();\n    lineGeometry.addAttribute(\"position\", new THREE.BufferAttribute(new Float32Array(2 * 3), 3));\n\n    this.line = new THREE.Line(\n      lineGeometry,\n      new THREE.LineBasicMaterial({\n        color: \"red\",\n        opacity: 0.2,\n        transparent: true,\n        visible: true\n      })\n    );\n\n    //prevents the line from being a raycast target for the cursor\n    this.line.raycast = function() {};\n\n    this.el.parentEl.setObject3D(\"penline\", this.line);\n\n    this.drawMode = DRAW_MODE.DEFAULT_2D;\n\n    this.targets = [];\n    this.setDirty = this.setDirty.bind(this);\n    this.dirty = true;\n\n    let material = new THREE.MeshStandardMaterial();\n    if (window.APP && window.APP.quality === \"low\") {\n      material = MobileStandardMaterial.fromStandardMaterial(material);\n    }\n    this.penTip = new THREE.Mesh(new THREE.SphereBufferGeometry(1, 16, 12), material);\n    this.penTip.scale.setScalar(this.data.radius / this.el.parentEl.object3D.scale.x);\n    this.penTip.matrixNeedsUpdate = true;\n\n    this.el.setObject3D(\"mesh\", this.penTip);\n\n    const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n    if (environmentMapComponent) {\n      environmentMapComponent.applyEnvironmentMap(this.el.parentEl.object3D);\n    }\n\n    // TODO: Use the MutationRecords passed into the callback function to determine added/removed nodes!\n    this.observer = new MutationObserver(this.setDirty);\n\n    waitForDOMContentLoaded().then(() => {\n      const scene = document.querySelector(\"a-scene\");\n      this.rightRemote = document.querySelector(\"#cursor-controller\");\n      this.observer.observe(scene, { childList: true, attributes: true, subtree: true });\n      scene.addEventListener(\"object3dset\", this.setDirty);\n      scene.addEventListener(\"object3dremove\", this.setDirty);\n    });\n  },\n\n  play() {\n    this.drawingManager = document.querySelector(this.data.drawingManager).components[\"drawing-manager\"];\n    this.drawingManager.createDrawing();\n  },\n\n  update(prevData) {\n    if (prevData.color != this.data.color) {\n      this.penTip.material.color.set(this.data.color);\n      this.line.material.color.set(this.data.color);\n    }\n    if (prevData.radius != this.data.radius) {\n      this.el.setAttribute(\"radius\", this.data.radius);\n    }\n\n    this.raycaster.far = this.data.far;\n    this.raycaster.near = this.data.near;\n  },\n\n  tick: (() => {\n    const rawIntersections = [];\n    const lineStartPosition = new THREE.Vector3();\n    const lineEndPosition = new THREE.Vector3();\n    const worldQuaternion = new THREE.Quaternion();\n    return function(t, dt) {\n      const userinput = AFRAME.scenes[0].systems.userinput;\n      const interaction = AFRAME.scenes[0].systems.interaction;\n\n      if (interaction.state.rightHand.held === this.el.parentNode) {\n        this.grabberId = \"player-right-controller\";\n      } else if (interaction.state.leftHand.held === this.el.parentNode) {\n        this.grabberId = \"player-left-controller\";\n      } else if (interaction.state.rightRemote.held === this.el.parentNode) {\n        this.grabberId = \"cursor\";\n        this.drawMode = DRAW_MODE.PROJECTION;\n      } else {\n        this.grabberId = null;\n      }\n\n      if (this.grabberId && pathsMap[this.grabberId]) {\n        const sfx = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem;\n        const paths = pathsMap[this.grabberId];\n        if (userinput.get(paths.startDrawing)) {\n          this._startDraw();\n          sfx.playSoundOneShot(SOUND_PEN_START_DRAW);\n        }\n        if (userinput.get(paths.stopDrawing)) {\n          this._endDraw();\n          sfx.playSoundOneShot(SOUND_PEN_STOP_DRAW);\n        }\n        const penScaleMod = userinput.get(paths.scalePenTip);\n        if (penScaleMod) {\n          this._changeRadius(penScaleMod);\n        }\n        if (userinput.get(paths.penNextColor)) {\n          this._changeColor(1);\n          sfx.playSoundOneShot(SOUND_PEN_CHANGE_COLOR);\n        }\n        if (userinput.get(paths.penPrevColor)) {\n          this._changeColor(-1);\n          sfx.playSoundOneShot(SOUND_PEN_CHANGE_COLOR);\n        }\n        if (userinput.get(paths.undoDrawing)) {\n          this._undoDraw();\n          sfx.playSoundOneShot(SOUND_PEN_UNDO_DRAW);\n        }\n        if (paths.switchDrawMode && userinput.get(paths.switchDrawMode)) {\n          this.drawMode = this.drawMode === DRAW_MODE.DEFAULT_2D ? DRAW_MODE.PROJECTION : DRAW_MODE.DEFAULT_2D;\n        }\n      }\n\n      rawIntersections.length = 0;\n\n      this.intersection = null;\n      let cursorPose;\n      if (this.drawMode === DRAW_MODE.PROJECTION) {\n        if (this.grabberId === \"cursor\") {\n          cursorPose = userinput.get(pathsMap.cursor.pose);\n          if (cursorPose) {\n            this.raycaster.ray.origin.copy(cursorPose.position);\n            this.raycaster.ray.direction.copy(cursorPose.direction);\n          }\n        } else if (this.grabberId !== null) {\n          getLastWorldPosition(this.el.parentEl.object3D, this.raycaster.ray.origin);\n          getLastWorldQuaternion(this.el.parentEl.object3D, worldQuaternion);\n          this.raycaster.ray.direction.set(0, -1, 0);\n          this.raycaster.ray.direction.applyQuaternion(worldQuaternion);\n        }\n\n        if (this.grabberId !== null) {\n          this.raycaster.intersectObjects(this.targets, true, rawIntersections);\n          this.intersection = rawIntersections[0];\n\n          if (this.intersection) {\n            if (cursorPose) {\n              lineStartPosition.copy(cursorPose.position);\n              this.el.parentEl.object3D.worldToLocal(lineStartPosition);\n            } else {\n              lineStartPosition.set(0, 0, 0);\n            }\n            lineEndPosition.copy(this.intersection.point);\n            this.el.parentEl.object3D.worldToLocal(lineEndPosition);\n\n            const positionArray = this.line.geometry.attributes.position.array;\n            positionArray[0] = lineStartPosition.x;\n            positionArray[1] = lineStartPosition.y;\n            positionArray[2] = lineStartPosition.z;\n            positionArray[3] = lineEndPosition.x;\n            positionArray[4] = lineEndPosition.y;\n            positionArray[5] = lineEndPosition.z;\n\n            this.line.geometry.attributes.position.needsUpdate = true;\n          }\n\n          if (this.intersection) {\n            this.el.object3D.position.copy(this.intersection.point);\n\n            this.el.parentEl.object3D.worldToLocal(this.el.object3D.position);\n\n            this.el.object3D.matrixNeedsUpdate = true;\n            this.worldPosition.copy(this.intersection.point);\n          } else {\n            this.el.object3D.position.copy(this.originalPosition);\n            this.el.object3D.matrixNeedsUpdate = true;\n            getLastWorldPosition(this.el.object3D, this.worldPosition);\n          }\n        }\n      } else {\n        this.el.object3D.position.copy(this.originalPosition);\n        this.el.object3D.matrixNeedsUpdate = true;\n        getLastWorldPosition(this.el.object3D, this.worldPosition);\n      }\n\n      this._setPenVisible(this.grabberId !== \"cursor\" || !this.intersection);\n      this._setLineVisible(\n        this.el.sceneEl.is(\"vr-mode\") && this.drawMode === DRAW_MODE.PROJECTION && this.intersection\n      );\n\n      //Prevent drawings from \"jumping\" large distances\n      if (\n        this.currentDrawing &&\n        (this.lastIntersectedObject !== (this.intersection ? this.intersection.object : null) &&\n          (!this.intersection ||\n            Math.abs(this.intersection.distance - this.lastIntersectionDistance) > MAX_DISTANCE_BETWEEN_SURFACES))\n      ) {\n        this.worldPosition.copy(this.lastPosition);\n        this._endDraw();\n      }\n      this.lastIntersectionDistance = this.intersection ? this.intersection.distance : 0;\n      this.lastIntersectedObject = this.intersection ? this.intersection.object : null;\n\n      if (!almostEquals(0.005, this.worldPosition, this.lastPosition)) {\n        this.direction.subVectors(this.worldPosition, this.lastPosition).normalize();\n        this.lastPosition.copy(this.worldPosition);\n      }\n\n      if (this.currentDrawing) {\n        const time = this.timeSinceLastDraw + dt;\n        if (\n          time >= this.data.drawFrequency &&\n          this.currentDrawing.getLastPoint().distanceTo(this.worldPosition) >= this.data.minDistanceBetweenPoints\n        ) {\n          this._getNormal(this.normal, this.worldPosition, this.direction);\n          this.currentDrawing.draw(this.worldPosition, this.direction, this.normal, this.data.color, this.data.radius);\n        }\n\n        this.timeSinceLastDraw = time % this.data.drawFrequency;\n      }\n\n      if (this.currentDrawing && !this.grabberId) {\n        this._endDraw();\n      }\n\n      if (this.dirty) {\n        this.populateEntities(this.targets);\n        this.dirty = false;\n      }\n\n      this.el.object3D.matrixNeedsUpdate = true;\n    };\n  })(),\n\n  _setPenVisible(visible) {\n    if (this.el.parentEl.object3DMap.mesh && this.el.parentEl.object3DMap.mesh.visible !== visible) {\n      this.el.parentEl.object3DMap.mesh.visible = visible;\n    }\n  },\n\n  _setLineVisible(visible) {\n    if (this.line.material.visible !== visible) {\n      this.line.material.visible = visible;\n    }\n  },\n\n  //helper function to get normal of direction of drawing cross direction to camera\n  _getNormal: (() => {\n    const directionToCamera = new THREE.Vector3();\n    return function(normal, position, direction) {\n      directionToCamera.subVectors(position, this.data.camera.object3D.position).normalize();\n      normal.crossVectors(direction, directionToCamera);\n    };\n  })(),\n\n  _startDraw() {\n    this.currentDrawing = this.drawingManager.getDrawing(this);\n    if (this.currentDrawing) {\n      this._getNormal(this.normal, this.worldPosition, this.direction);\n      this.currentDrawing.startDraw(this.worldPosition, this.direction, this.normal, this.data.color, this.data.radius);\n    }\n  },\n\n  _endDraw() {\n    if (this.currentDrawing) {\n      this.timeSinceLastDraw = 0;\n      this._getNormal(this.normal, this.worldPosition, this.direction);\n      this.currentDrawing.endDraw(this.worldPosition, this.direction, this.normal);\n      this.drawingManager.returnDrawing(this);\n      this.currentDrawing = null;\n    }\n  },\n\n  _undoDraw() {\n    const drawing = this.drawingManager.getDrawing(this);\n    if (drawing) {\n      drawing.undoDraw();\n      this.drawingManager.returnDrawing(this);\n    }\n  },\n\n  _changeColor(mod) {\n    this.colorIndex = (this.colorIndex + mod + this.data.availableColors.length) % this.data.availableColors.length;\n    this.data.color = this.data.availableColors[this.colorIndex];\n    this.penTip.material.color.set(this.data.color);\n    this.line.material.color.set(this.data.color);\n  },\n\n  _changeRadius(mod) {\n    this.data.radius = Math.max(this.data.minRadius, Math.min(this.data.radius + mod, this.data.maxRadius));\n    this.penTip.scale.setScalar(this.data.radius / this.el.parentEl.object3D.scale.x);\n    this.penTip.matrixNeedsUpdate = true;\n  },\n\n  setDirty() {\n    this.dirty = true;\n  },\n\n  populateEntities(targets) {\n    targets.length = 0;\n    // TODO: Do not querySelectorAll on the entire scene every time anything changes!\n    const els = AFRAME.scenes[0].querySelectorAll(\".collidable, .interactable, #environment-root\");\n    for (let i = 0; i < els.length; i++) {\n      if (!els[i].classList.contains(\"pen\") && els[i].object3D) {\n        targets.push(els[i].object3D);\n      }\n    }\n  },\n\n  remove() {\n    this.observer.disconnect();\n    AFRAME.scenes[0].removeEventListener(\"object3dset\", this.setDirty);\n    AFRAME.scenes[0].removeEventListener(\"object3dremove\", this.setDirty);\n    this.el.parentEl.removeObject3D(\"penline\");\n  }\n});\n","export default class SharedBufferGeometry {\n  constructor(material, primitiveMode, maxBufferSize) {\n    this.material = material;\n    this.primitiveMode = primitiveMode;\n\n    this.maxBufferSize = maxBufferSize;\n    this.geometries = [];\n    this.current = null;\n    this.drawing = new THREE.Object3D();\n    this.addBuffer();\n  }\n\n  restartPrimitive() {\n    if (this.idx.position >= this.current.attributes.position.count) {\n      console.error(\"maxBufferSize limit exceeded\");\n    } else if (this.idx.position !== 0) {\n      let prev = (this.idx.position - 1) * 3;\n      const position = this.current.attributes.position.array;\n      this.addVertex(position[prev++], position[prev++], position[prev++]);\n\n      this.idx.color++;\n      this.idx.normal++;\n    }\n  }\n\n  remove(prevIdx, idx) {\n    // Loop through all the attributes: position, color, normal,...\n    if (this.idx.position > idx.position) {\n      for (const key in this.idx) {\n        const componentSize = 3;\n        let pos = prevIdx[key] * componentSize;\n        const start = (idx[key] + 1) * componentSize;\n        const end = this.idx[key] * componentSize;\n        for (let i = start; i < end; i++) {\n          this.current.attributes[key].array[pos++] = this.current.attributes[key].array[i];\n        }\n        const diff = idx[key] - prevIdx[key] + 1;\n        this.idx[key] -= diff;\n      }\n    } else {\n      for (const key in this.idx) {\n        const diff = idx[key] - prevIdx[key];\n        this.idx[key] -= diff;\n      }\n    }\n\n    this.update();\n  }\n\n  undo(prevIdx) {\n    this.idx = prevIdx;\n    this.update();\n  }\n\n  addBuffer() {\n    const geometry = new THREE.BufferGeometry();\n\n    const vertices = new Float32Array(this.maxBufferSize * 3);\n    const normals = new Float32Array(this.maxBufferSize * 3);\n    const colors = new Float32Array(this.maxBufferSize * 3);\n\n    const mesh = new THREE.Mesh(geometry, this.material);\n\n    mesh.drawMode = this.primitiveMode;\n\n    mesh.frustumCulled = false;\n    mesh.vertices = vertices;\n\n    const object3D = new THREE.Object3D();\n    this.drawing.add(object3D);\n    object3D.add(mesh);\n\n    geometry.setDrawRange(0, 0);\n    geometry.addAttribute(\"position\", new THREE.BufferAttribute(vertices, 3).setDynamic(true));\n    geometry.addAttribute(\"normal\", new THREE.BufferAttribute(normals, 3).setDynamic(true));\n    geometry.addAttribute(\"color\", new THREE.BufferAttribute(colors, 3).setDynamic(true));\n\n    this.previous = null;\n    if (this.geometries.length > 0) {\n      this.previous = this.current;\n    }\n\n    this.idx = {\n      position: 0,\n      normal: 0,\n      color: 0\n    };\n\n    this.geometries.push(geometry);\n    this.current = geometry;\n  }\n\n  addColor(r, g, b) {\n    this.current.attributes.color.setXYZ(this.idx.color++, r, g, b);\n  }\n\n  addNormal(x, y, z) {\n    this.current.attributes.normal.setXYZ(this.idx.normal++, x, y, z);\n  }\n\n  addVertex(x, y, z) {\n    const buffer = this.current.attributes.position;\n    if (this.idx.position === buffer.count) {\n      console.error(\"maxBufferSize limit exceeded\");\n    }\n    buffer.setXYZ(this.idx.position++, x, y, z);\n  }\n\n  update() {\n    this.current.setDrawRange(0, this.idx.position);\n\n    this.current.attributes.color.needsUpdate = true;\n    this.current.attributes.normal.needsUpdate = true;\n    this.current.attributes.position.needsUpdate = true;\n  }\n}\n","import SharedBufferGeometry from \"./sharedbuffergeometry\";\n\nexport default class SharedBufferGeometryManager {\n  constructor() {\n    this.sharedBuffers = {};\n  }\n\n  addSharedBuffer(name, material, primitiveMode, maxBufferSize) {\n    this.sharedBuffers[name] = new SharedBufferGeometry(material, primitiveMode, maxBufferSize);\n  }\n\n  getSharedBuffer(name) {\n    return this.sharedBuffers[name];\n  }\n}\n","/* global THREE */\n/**\n * Networked Drawing\n * Creates procedurally generated 'lines' (or tubes) that are networked.\n * @namespace drawing\n * @component networked-drawing\n */\n\nimport SharedBufferGeometryManager from \"../../utils/sharedbuffergeometrymanager\";\nimport MobileStandardMaterial from \"../../materials/MobileStandardMaterial\";\n\nconst MSG_CONFIRM_CONNECT = 0;\nconst MSG_BUFFER_DATA = 1;\nconst MSG_BUFFER_DATA_FULL = 2;\n\nfunction copyData(fromArray, toArray, fromIndex, toIndex) {\n  let i = fromIndex - 1;\n  let j = -1;\n  while (i + 1 <= toIndex) {\n    toArray[++j] = fromArray[++i];\n  }\n}\n\nAFRAME.registerComponent(\"networked-drawing\", {\n  schema: {\n    segments: { default: 8 }, //the number of \"sides\" the procedural tube should have\n    defaultRadius: { default: 0.01 }, //the radius of the procedural tube\n    maxDrawTimeout: { default: 600000 }, //the maximum time a drawn line will live\n    maxLines: { default: 50 }, //how many lines can persist before lines older than minDrawTime are removed\n    maxPointsPerLine: { default: 250 } //the max number of points a single line can have\n  },\n\n  init() {\n    this._receiveData = this._receiveData.bind(this);\n\n    this.networkBuffer = [];\n\n    this.sendNetworkBufferQueue = [];\n\n    this.drawStarted = false;\n    this.lineStarted = false;\n    this.remoteLineStarted = false;\n\n    this.receivedBufferParts = 0;\n    this.bufferIndex = 0;\n    this.connectedToOwner = false;\n    this.networkBufferInitialized = false;\n\n    const options = {\n      vertexColors: THREE.VertexColors\n    };\n\n    this.color = new THREE.Color();\n    this.radius = this.data.defaultRadius;\n    this.segments = this.data.segments;\n\n    let material = new THREE.MeshStandardMaterial(options);\n    if (window.APP && window.APP.quality === \"low\") {\n      material = MobileStandardMaterial.fromStandardMaterial(material);\n    }\n\n    this.sharedBufferGeometryManager = new SharedBufferGeometryManager();\n    // NOTE: 20 is approximate for how many floats per point are added.\n    // maxLines + 1 because a line can be currently drawing while at maxLines.\n    // Multiply by 1/3 (0.333) because 3 floats per vertex (x, y, z).\n    const maxBufferSize = Math.round(this.data.maxPointsPerLine * 20 * (this.data.maxLines + 1) * 0.333);\n    this.sharedBufferGeometryManager.addSharedBuffer(0, material, THREE.TriangleStripDrawMode, maxBufferSize);\n\n    this.lastPoint = new THREE.Vector3();\n\n    this.lastSegments = [];\n    this.currentSegments = [];\n    for (let x = 0; x < this.segments; x++) {\n      this.lastSegments[x] = {\n        position: new THREE.Vector3(),\n        normal: new THREE.Vector3()\n      };\n      this.currentSegments[x] = {\n        position: new THREE.Vector3(),\n        normal: new THREE.Vector3()\n      };\n    }\n\n    this.sharedBuffer = this.sharedBufferGeometryManager.getSharedBuffer(0);\n    this.drawing = this.sharedBuffer.drawing;\n    const sceneEl = document.querySelector(\"a-scene\");\n    this.scene = sceneEl.object3D;\n    this.scene.add(this.drawing);\n\n    const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n    if (environmentMapComponent) {\n      environmentMapComponent.applyEnvironmentMap(this.drawing);\n    }\n\n    this.prevIdx = Object.assign({}, this.sharedBuffer.idx);\n    this.idx = Object.assign({}, this.sharedBuffer.idx);\n    this.vertexCount = 0; //number of vertices added for current line (used for line deletion).\n    this.networkBufferCount = 0; //number of items added to networkBuffer for current line (used for line deletion).\n    this.currentPointCount = 0; //number of points added for current line (used for maxPointsPerLine).\n    this.invalidPointRead = false; //flag flipped if we read a bad point anywhere during this line\n    this.lastReadPointCount = 0; //last read point count read off of the network, used for sanity checking\n    this.networkBufferHistory = []; //tracks vertexCount and networkBufferCount so that lines can be deleted.\n\n    NAF.connection.onConnect(() => {\n      NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n        this.networkedEl = networkedEl;\n        this.networkId = NAF.utils.getNetworkId(this.networkedEl);\n        this.drawingId = \"drawing-\" + this.networkId;\n        NAF.connection.subscribeToDataChannel(this.drawingId, this._receiveData);\n      });\n    });\n  },\n\n  remove() {\n    NAF.connection.unsubscribeToDataChannel(this.drawingId, this._receiveData);\n\n    this.scene.remove(this.drawing);\n  },\n\n  tick(t) {\n    const connected = NAF.connection.isConnected() && this.networkedEl;\n    const isMine = connected && NAF.utils.isMine(this.networkedEl);\n\n    if (!this.connectedToOwner && connected) {\n      const owner = NAF.utils.getNetworkOwner(this.networkedEl);\n      if (!isMine && NAF.connection.hasActiveDataChannel(owner)) {\n        NAF.connection.sendDataGuaranteed(owner, this.drawingId, {\n          type: MSG_CONFIRM_CONNECT,\n          clientId: NAF.clientId\n        });\n        this.connectedToOwner = true;\n      }\n    }\n\n    if (this.networkBuffer.length > 0 && connected) {\n      if (!isMine) {\n        this._drawFromNetwork();\n      } else if (this.bufferIndex < this.networkBuffer.length) {\n        this._broadcastDrawing();\n      }\n    }\n\n    //TODO: handle possibility that a clientId gets stuck in sendNetworkBufferQueue\n    //if that client disconnects before this executes and an activeDataChannel is opened.\n    if (isMine && this.sendNetworkBufferQueue.length > 0) {\n      const connected = [];\n      for (let i = 0; i < this.sendNetworkBufferQueue.length; i++) {\n        if (NAF.connection.hasActiveDataChannel(this.sendNetworkBufferQueue[i])) {\n          connected.push(this.sendNetworkBufferQueue[i]);\n        }\n      }\n      for (let j = 0; j < connected.length; j++) {\n        const pos = this.sendNetworkBufferQueue.indexOf(connected[j]);\n        this._sendNetworkBuffer(connected[j]);\n        this.sendNetworkBufferQueue.splice(pos, 1);\n      }\n    }\n\n    this._deleteExpiredLines(t);\n  },\n\n  _broadcastDrawing: (() => {\n    const copyArray = [];\n    return function() {\n      copyArray.length = 0;\n      copyData(this.networkBuffer, copyArray, this.bufferIndex, this.networkBuffer.length - 1);\n\n      //remove undo's from networkBuffer after they've been sent so that\n      //newly joining clients don't get them\n      let index = -1;\n      while ((index = this.networkBuffer.indexOf(\"-\")) != -1) {\n        this.networkBuffer.splice(index, 1);\n      }\n      this.bufferIndex = this.networkBuffer.length;\n      NAF.connection.broadcastDataGuaranteed(this.drawingId, { type: MSG_BUFFER_DATA, buffer: copyArray });\n    };\n  })(),\n\n  _drawFromNetwork: (() => {\n    const position = new THREE.Vector3();\n    const direction = new THREE.Vector3();\n    const normal = new THREE.Vector3();\n    return function() {\n      let head = this.networkBuffer[0];\n      if (head === \"-\") {\n        this._undoDraw();\n        this.networkBuffer.shift();\n        head = this.networkBuffer[0];\n      }\n      let didWork = false;\n      while (head != null && this.networkBuffer.length >= 11) {\n        const pointCount = this.networkBuffer[0];\n\n        // This is a sanity check against the sequence number to help uncover remaining bugs.\n        // If the point is out-of-order, report the error and stop drawing this line.\n        if (pointCount !== this.lastReadPointCount + 1) {\n          this.invalidPointRead = true;\n\n          console.error(\n            `Draw networking error: ID ${this.drawingId} expected point ${this.lastReadPointCount +\n              1} but received ${pointCount}`\n          );\n        }\n\n        this.lastReadPointCount = pointCount;\n        position.set(this.networkBuffer[1], this.networkBuffer[2], this.networkBuffer[3]);\n        direction.set(this.networkBuffer[4], this.networkBuffer[5], this.networkBuffer[6]);\n        this.radius = Math.round(direction.length() * 1000) / 1000; //radius is encoded as length of direction vector\n        direction.normalize();\n        normal.set(this.networkBuffer[7], this.networkBuffer[8], this.networkBuffer[9]);\n        this.color.setHex(Math.round(normal.length()) - 1); //color is encoded as length of normal vector\n        normal.normalize();\n\n        this.networkBuffer.splice(0, 10);\n\n        if (!this.remoteLineStarted) {\n          this.startDraw(position, direction, normal);\n          this.remoteLineStarted = true;\n        }\n\n        if (this.networkBuffer[0] === null) {\n          if (!this.invalidPointRead) {\n            this._endDraw(position, direction, normal);\n          }\n\n          this.remoteLineStarted = false;\n          this.networkBuffer.shift();\n          this.lastReadPointCount = 0;\n          this.invalidPointRead = false;\n        } else {\n          if (!this.invalidPointRead) {\n            this._draw(position, direction, normal);\n            didWork = true;\n          }\n        }\n      }\n      if (didWork) this._updateBuffer();\n    };\n  })(),\n\n  _deleteExpiredLines(time) {\n    const length = this.networkBufferHistory.length;\n    if (length > 0) {\n      const drawTime = this.networkBufferHistory[0].time;\n      if (length > this.data.maxLines || drawTime + this.data.maxDrawTimeout <= time) {\n        const datum = this.networkBufferHistory[0];\n        if (length > 1) {\n          datum.idxLength += 2 - (this.segments % 2); //account for extra verts added for degenerate triangles\n          this.networkBufferHistory[1].idxLength -= 2 - (this.segments % 2);\n        }\n        this.idx.position = datum.idxLength;\n        this.idx.uv = datum.idxLength;\n        this.idx.normal = datum.idxLength;\n        this.idx.color = datum.idxLength;\n        this.sharedBuffer.remove(this.prevIdx, this.idx);\n        this.networkBufferHistory.shift();\n        if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n          this.networkBuffer.splice(0, datum.networkBufferCount);\n          this.bufferIndex -= datum.networkBufferCount;\n        }\n      }\n    }\n  },\n\n  _sendNetworkBuffer: (() => {\n    const copyArray = [];\n    //This number needs to be approx. < ~6000 based on napkin math\n    //see: https://github.com/webrtc/adapter/blob/682e0f2439e139da6c0c406370eae820637b8sc1a/src/js/common_shim.js#L157\n    const chunkAmount = 3000;\n    return function(clientId) {\n      if (NAF.utils.isMine(this.networkedEl)) {\n        if (this.networkBuffer.length <= chunkAmount) {\n          NAF.connection.sendDataGuaranteed(clientId, this.drawingId, {\n            type: MSG_BUFFER_DATA_FULL,\n            parts: 1,\n            buffer: this.networkBuffer\n          });\n        } else {\n          let start = 0;\n          let end = 0;\n          while (end < this.networkBuffer.length) {\n            end = Math.min(end + chunkAmount, this.networkBuffer.length);\n            copyArray.length = 0;\n            copyData(this.networkBuffer, copyArray, start, end - 1);\n            start = end;\n            NAF.connection.sendDataGuaranteed(clientId, this.drawingId, {\n              type: MSG_BUFFER_DATA_FULL,\n              parts: Math.ceil(this.networkBuffer.length / chunkAmount),\n              buffer: copyArray\n            });\n          }\n        }\n      }\n    };\n  })(),\n\n  _receiveData(_, dataType, data) {\n    switch (data.type) {\n      case MSG_CONFIRM_CONNECT:\n        this.sendNetworkBufferQueue.push(data.clientId);\n        break;\n      case MSG_BUFFER_DATA:\n        if (this.networkBufferInitialized) {\n          this.networkBuffer.push.apply(this.networkBuffer, data.buffer);\n        }\n        break;\n      case MSG_BUFFER_DATA_FULL:\n        this.networkBuffer.push.apply(this.networkBuffer, data.buffer);\n        if (++this.receivedBufferParts >= data.parts) {\n          this.networkBufferInitialized = true;\n        }\n        break;\n    }\n  },\n\n  getLastPoint() {\n    return this.lastPoint;\n  },\n\n  startDraw(position, direction, normal, color, radius) {\n    if (!NAF.connection.isConnected()) {\n      return;\n    }\n\n    this.drawStarted = true;\n\n    if (color) {\n      this.color.set(color);\n    }\n    if (radius) this.radius = radius;\n\n    this.lastPoint.copy(position);\n    this._addToNetworkBuffer(position, direction, normal);\n  },\n\n  draw(position, direction, normal, color, radius) {\n    if (!NAF.connection.isConnected() || !this.drawStarted) {\n      return;\n    }\n\n    if (color && color != \"#\" + this.color.getHexString().toUpperCase()) {\n      this.color.set(color);\n    }\n    if (radius) this.radius = radius;\n\n    this._addToNetworkBuffer(position, direction, normal);\n    this._draw(position, direction, normal);\n\n    this._updateBuffer();\n  },\n\n  _draw: (() => {\n    const capNormal = new THREE.Vector3();\n    return function(position, direction, normal, radiusMultiplier = 1.0) {\n      if (!this.lineStarted) {\n        this._generateSegments(this.lastSegments, position, direction, normal, this.radius * radiusMultiplier);\n\n        if (this.networkBufferHistory.length === 0) {\n          //start with CW faceculling order\n          this._addDegenerateTriangle();\n        } else {\n          //only do the following if the sharedBuffer is not empty\n          this._restartPrimitive();\n          this._addDegenerateTriangle();\n          if (this.segments % 2 === 0) {\n            //flip faceculling order if even numbered segments\n            this._addDegenerateTriangle();\n          }\n        }\n\n        //get normal for tip of cap\n        capNormal.copy(direction).negate();\n        //get normals for rim of cap\n        for (let i = 0; i < this.segments; i++) {\n          this.lastSegments[i].normal.add(capNormal).multiplyScalar(0.5);\n        }\n\n        this._drawCap(this.lastPoint, this.lastSegments, capNormal);\n        if (this.segments % 2 !== 0) {\n          //flip faceculling order if odd numbered segments\n          this._addDegenerateTriangle();\n        }\n\n        this.lineStarted = true;\n      } else {\n        this._generateSegments(this.currentSegments, position, direction, normal, this.radius * radiusMultiplier);\n        this._drawCylinder();\n\n        if (this.currentPointCount > this.data.maxPointsPerLine) {\n          this._drawEndCap(position, direction);\n          this._endLine();\n        }\n      }\n      this.lastPoint.copy(position);\n    };\n  })(),\n\n  undoDraw() {\n    if (!NAF.connection.isConnected() || this.drawStarted) {\n      return;\n    }\n    this._undoDraw();\n    this._pushToNetworkBuffer(\"-\");\n  },\n\n  _undoDraw() {\n    const length = this.networkBufferHistory.length;\n    if (length > 0) {\n      const datum = this.networkBufferHistory.pop();\n      this.idx.position = 0;\n      this.idx.uv = 0;\n      this.idx.normal = 0;\n      this.idx.color = 0;\n      if (length > 1) {\n        datum.idxLength += 1 - (this.segments % 2); //account for extra verts added for degenerate triangles\n        this.idx.position = this.sharedBuffer.idx.position - datum.idxLength;\n        this.idx.uv = this.sharedBuffer.idx.uv - datum.idxLength;\n        this.idx.normal = this.sharedBuffer.idx.normal - datum.idxLength;\n        this.idx.color = this.sharedBuffer.idx.color - datum.idxLength;\n      }\n      this.sharedBuffer.remove(this.idx, this.sharedBuffer.idx);\n      if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n        this.networkBuffer.splice(this.networkBuffer.length - datum.networkBufferCount, datum.networkBufferCount);\n        this.bufferIndex -= datum.networkBufferCount;\n      }\n    }\n  },\n\n  endDraw(position, direction, normal) {\n    this._endDraw(position, direction, normal);\n    this._updateBuffer();\n  },\n\n  _endDraw(position, direction, normal) {\n    if (!this.lineStarted && this.drawStarted) {\n      this._drawPoint(position);\n    } else if (this.lineStarted && this.drawStarted) {\n      this._addToNetworkBuffer(position, direction, normal);\n      this._draw(position, direction, normal);\n      this._drawEndCap(position, direction);\n    }\n    this._endLine();\n  },\n\n  _drawEndCap: (() => {\n    const projectedDirection = new THREE.Vector3();\n    const projectedPoint = new THREE.Vector3();\n    return function(position, direction) {\n      if (this.lineStarted && this.drawStarted) {\n        projectedDirection.copy(direction).multiplyScalar(this.radius);\n        projectedPoint.copy(position).add(projectedDirection);\n        this._addDegenerateTriangle(); //flip faceculling order before drawing end-cap\n        this._drawCap(projectedPoint, this.lastSegments, direction);\n      }\n    };\n  })(),\n\n  _endLine() {\n    if (!this.drawStarted) return;\n\n    if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) this._pushToNetworkBuffer(null);\n\n    const datum = {\n      networkBufferCount: this.networkBufferCount,\n      idxLength: this.vertexCount - 1,\n      time: this.el.sceneEl.clock.elapsedTime * 1000\n    };\n    this.networkBufferHistory.push(datum);\n    this.vertexCount = 0;\n    this.networkBufferCount = 0;\n    this.currentPointCount = 0;\n    this.lineStarted = false;\n    this.drawStarted = false;\n  },\n\n  _addToNetworkBuffer: (() => {\n    const copyDirection = new THREE.Vector3();\n    const copyNormal = new THREE.Vector3();\n    return function(position, direction, normal) {\n      if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n        ++this.currentPointCount;\n        this._pushToNetworkBuffer(this.currentPointCount);\n        this._pushToNetworkBuffer(position.x);\n        this._pushToNetworkBuffer(position.y);\n        this._pushToNetworkBuffer(position.z);\n        copyDirection.copy(direction);\n        copyDirection.setLength(this.radius); //encode radius as length of direction vector\n        this._pushToNetworkBuffer(copyDirection.x);\n        this._pushToNetworkBuffer(copyDirection.y);\n        this._pushToNetworkBuffer(copyDirection.z);\n        copyNormal.copy(normal);\n        copyNormal.setLength(this.color.getHex() + 1); //encode color as length, add one in case color is black\n        this._pushToNetworkBuffer(copyNormal.x);\n        this._pushToNetworkBuffer(copyNormal.y);\n        this._pushToNetworkBuffer(copyNormal.z);\n      }\n    };\n  })(),\n\n  _pushToNetworkBuffer(val) {\n    //don't increment networkBufferCount if undo, because the undo character\n    //will be removed in tick() on the next frame\n    if (val !== \"-\") {\n      ++this.networkBufferCount;\n    }\n    this.networkBuffer.push(val);\n  },\n\n  //draw a cylinder from last to current segments\n  _drawCylinder() {\n    //average the normals with the normals from the lastSegment\n    //not a perfect normal calculation, but works well enough\n    for (let i = 0; i < this.segments; i++) {\n      this.currentSegments[i].normal.add(this.lastSegments[i].normal).multiplyScalar(0.5);\n    }\n\n    for (let i = 0; i != this.segments + 1; i++) {\n      this._addVertex(this.lastSegments[i % this.segments]);\n      this._addVertex(this.currentSegments[i % this.segments]);\n    }\n\n    for (let i = 0; i < this.segments; i++) {\n      this.lastSegments[i].position.copy(this.currentSegments[i].position);\n      this.lastSegments[i].normal.copy(this.currentSegments[i].normal);\n    }\n  },\n\n  //draw a standalone point in space\n  _drawPoint: (() => {\n    const up = new THREE.Vector3(0, 1, 0);\n    const down = new THREE.Vector3(0, -1, 0);\n    const left = new THREE.Vector3(1, 0, 0);\n    const projectedDirection = new THREE.Vector3();\n    const projectedPoint = new THREE.Vector3();\n    return function(position) {\n      projectedDirection.copy(up).multiplyScalar(this.radius * 0.75);\n      projectedPoint.copy(position).add(projectedDirection);\n      this.lastPoint.copy(projectedPoint);\n\n      projectedDirection.copy(up).multiplyScalar(this.radius * 0.5);\n      projectedPoint.copy(position).add(projectedDirection);\n      this._draw(projectedPoint, down, left, 0.75);\n\n      this._draw(position, down, left);\n\n      projectedDirection.copy(down).multiplyScalar(this.radius * 0.5);\n      projectedPoint.copy(position).add(projectedDirection);\n      this._draw(projectedPoint, down, left, 0.75);\n\n      projectedDirection.copy(down).multiplyScalar(this.radius * 0.75);\n      projectedPoint.copy(position).add(projectedDirection);\n\n      this._addDegenerateTriangle(); //discarded\n      this._drawCap(projectedPoint, this.lastSegments, down);\n    };\n  })(),\n\n  //draw a cap to start/end a line\n  _drawCap(point, segments, normal) {\n    let segmentIndex = 0;\n    for (let i = 0; i < this.segments * 2 - (this.segments % 2); i++) {\n      if ((i - 2) % 4 === 0) {\n        this._addVertex({ position: point, normal: normal });\n      } else {\n        this._addVertex(segments[segmentIndex % this.segments]);\n        if ((i + 1) % 5 !== 0) {\n          ++segmentIndex;\n        }\n      }\n    }\n  },\n\n  _restartPrimitive() {\n    this.sharedBuffer.restartPrimitive();\n    ++this.vertexCount;\n  },\n\n  _updateBuffer() {\n    this.sharedBuffer.update();\n  },\n\n  _addVertex(segment) {\n    const point = segment.position;\n    const normal = segment.normal;\n    this.sharedBuffer.addVertex(point.x, point.y, point.z);\n    this.sharedBuffer.addColor(this.color.r, this.color.g, this.color.b);\n\n    if (normal) {\n      this.sharedBuffer.addNormal(normal.x, normal.y, normal.z);\n    } else {\n      ++this.sharedBuffer.idx.normal;\n    }\n\n    ++this.sharedBuffer.idx.uv;\n    ++this.vertexCount;\n  },\n\n  _addDegenerateTriangle() {\n    this._addVertex(this.lastSegments[0]);\n  },\n\n  //calculate the segments for a given point\n  _generateSegments(segmentsList, point, forward, up, radius) {\n    const angleIncrement = (Math.PI * 2) / this.segments;\n    for (let i = 0; i < this.segments; i++) {\n      const segment = segmentsList[i].position;\n      this._rotatePointAroundAxis(segment, point, forward, up, angleIncrement * i, radius);\n      segmentsList[i].normal.subVectors(segment, point).normalize();\n    }\n  },\n\n  _rotatePointAroundAxis: (() => {\n    const calculatedDirection = new THREE.Vector3();\n    return function(out, point, axis, up, angle, radius) {\n      calculatedDirection.copy(up);\n      calculatedDirection.applyAxisAngle(axis, angle);\n      out.copy(point).add(calculatedDirection.normalize().multiplyScalar(radius));\n    };\n  })()\n});\n","function registerNetworkSchemas() {\n  const vectorRequiresUpdate = epsilon => {\n    return () => {\n      let prev = null;\n\n      return curr => {\n        if (prev === null) {\n          prev = new THREE.Vector3(curr.x, curr.y, curr.z);\n          return true;\n        } else if (!NAF.utils.almostEqualVec3(prev, curr, epsilon)) {\n          prev.copy(curr);\n          return true;\n        }\n\n        return false;\n      };\n    };\n  };\n\n  NAF.schemas.add({\n    template: \"#remote-avatar-template\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      \"scale\",\n      \"player-info\",\n      \"networked-avatar\",\n      {\n        selector: \".camera\",\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \".camera\",\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        selector: \".left-controller\",\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \".left-controller\",\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        selector: \".left-controller\",\n        component: \"visible\"\n      },\n      {\n        selector: \".right-controller\",\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \".right-controller\",\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        selector: \".right-controller\",\n        component: \"visible\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-media\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      \"scale\",\n      // TODO: Optimize checking mediaOptions with requiresNetworkUpdate.\n      \"media-loader\",\n      {\n        component: \"media-video\",\n        property: \"time\"\n      },\n      {\n        component: \"media-video\",\n        property: \"videoPaused\"\n      },\n      {\n        component: \"media-pager\",\n        property: \"index\"\n      },\n      \"pinnable\"\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#static-media\",\n    components: [\n      // TODO: Optimize checking mediaOptions with requiresNetworkUpdate.\n      \"media-loader\",\n      {\n        component: \"media-video\",\n        property: \"time\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#static-controlled-media\",\n    components: [\n      // TODO: Optimize checking mediaOptions with requiresNetworkUpdate.\n      \"media-loader\",\n      {\n        component: \"media-video\",\n        property: \"time\"\n      },\n      {\n        component: \"media-video\",\n        property: \"videoPaused\"\n      },\n      {\n        component: \"media-pager\",\n        property: \"index\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-drawing\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      \"scale\",\n      \"networked-drawing\"\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-camera\",\n    components: [\"position\", \"rotation\"]\n  });\n\n  NAF.schemas.add({\n    template: \"#pen-interactable\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      \"scale\",\n      \"media-loader\",\n      {\n        selector: \"#pen\",\n        component: \"pen\",\n        property: \"radius\"\n      },\n      {\n        selector: \"#pen\",\n        component: \"pen\",\n        property: \"color\"\n      }\n    ]\n  });\n}\n\nexport default registerNetworkSchemas;\n","import \"@babel/polyfill\";\nimport \"./utils/debug-log\";\n\nconsole.log(`Hubs version: ${process.env.BUILD_VERSION || \"?\"}`);\n\nimport \"./assets/stylesheets/hub.scss\";\n\nimport \"aframe\";\nimport \"./utils/logging\";\nimport { patchWebGLRenderingContext } from \"./utils/webgl\";\npatchWebGLRenderingContext();\n\nimport \"three/examples/js/loaders/GLTFLoader\";\nimport \"networked-aframe/src/index\";\nimport \"naf-janus-adapter\";\nimport \"aframe-rounded\";\nimport \"webrtc-adapter\";\nimport \"aframe-slice9-component\";\nimport \"./utils/audio-context-fix\";\nimport \"./utils/threejs-positional-audio-updatematrixworld\";\nimport \"./utils/threejs-world-update\";\nimport patchThreeAllocations from \"./utils/threejs-allocation-patches\";\nimport { detectOS, detect } from \"detect-browser\";\nimport {\n  getReticulumFetchUrl,\n  getReticulumMeta,\n  invalidateReticulumMeta,\n  migrateChannelToSocket\n} from \"./utils/phoenix-utils\";\n\nimport nextTick from \"./utils/next-tick\";\nimport { addAnimationComponents } from \"./utils/animation\";\nimport Cookies from \"js-cookie\";\n\nimport \"./components/scene-components\";\nimport \"./components/mute-mic\";\nimport \"./components/toggle-flying\";\nimport \"./components/bone-mute-state-indicator\";\nimport \"./components/bone-visibility\";\nimport \"./components/in-world-hud\";\nimport \"./components/virtual-gamepad-controls\";\nimport \"./components/ik-controller\";\nimport \"./components/hand-controls2\";\nimport \"./components/character-controller\";\nimport \"./components/hoverable-visuals\";\nimport \"./components/hover-visuals\";\nimport \"./components/offset-relative-to\";\nimport \"./components/player-info\";\nimport \"./components/debug\";\nimport \"./components/hand-poses\";\nimport \"./components/hud-controller\";\nimport \"./components/freeze-controller\";\nimport \"./components/icon-button\";\nimport \"./components/text-button\";\nimport \"./components/block-button\";\nimport \"./components/mute-button\";\nimport \"./components/kick-button\";\nimport \"./components/close-vr-notice-button\";\nimport \"./components/leave-room-button\";\nimport \"./components/visible-if-permitted\";\nimport \"./components/visibility-while-frozen\";\nimport \"./components/stats-plus\";\nimport \"./components/networked-avatar\";\nimport \"./components/media-views\";\nimport \"./components/avatar-volume-controls\";\nimport \"./components/pinch-to-move\";\nimport \"./components/pitch-yaw-rotator\";\nimport \"./components/position-at-box-shape-border\";\nimport \"./components/pinnable\";\nimport \"./components/pin-networked-object-button\";\nimport \"./components/drop-object-button\";\nimport \"./components/remove-networked-object-button\";\nimport \"./components/camera-focus-button\";\nimport \"./components/mirror-camera-button\";\nimport \"./components/unmute-video-button\";\nimport \"./components/destroy-at-extreme-distances\";\nimport \"./components/visible-to-owner\";\nimport \"./components/camera-tool\";\nimport \"./components/emit-state-change\";\nimport \"./components/action-to-event\";\nimport \"./components/action-to-remove\";\nimport \"./components/emit-scene-event-on-remove\";\nimport \"./components/follow-in-fov\";\nimport \"./components/matrix-auto-update\";\nimport \"./components/clone-media-button\";\nimport \"./components/open-media-button\";\nimport \"./components/tweet-media-button\";\nimport \"./components/transform-object-button\";\nimport \"./components/hover-menu\";\nimport \"./components/disable-frustum-culling\";\nimport \"./components/teleporter\";\nimport \"./components/set-active-camera\";\nimport \"./components/track-pose\";\nimport \"./components/replay\";\nimport \"./components/visibility-by-path\";\nimport \"./components/tags\";\nimport \"./components/hubs-text\";\nimport \"./components/billboard\";\nimport { sets as userinputSets } from \"./systems/userinput/sets\";\n\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\nimport { Router, Route } from \"react-router-dom\";\nimport { createBrowserHistory } from \"history\";\nimport { pushHistoryState } from \"./utils/history\";\nimport UIRoot from \"./react-components/ui-root\";\nimport AuthChannel from \"./utils/auth-channel\";\nimport HubChannel from \"./utils/hub-channel\";\nimport LinkChannel from \"./utils/link-channel\";\nimport { connectToReticulum } from \"./utils/phoenix-utils\";\nimport { disableiOSZoom } from \"./utils/disable-ios-zoom\";\nimport { proxiedUrlFor } from \"./utils/media-url-utils\";\nimport { traverseMeshesAndAddShapes } from \"./utils/physics-utils\";\nimport { handleExitTo2DInterstitial, exit2DInterstitialAndEnterVR } from \"./utils/vr-interstitial\";\nimport { getAvatarSrc } from \"./utils/avatar-utils.js\";\nimport MessageDispatch from \"./message-dispatch\";\nimport SceneEntryManager from \"./scene-entry-manager\";\nimport Subscriptions from \"./subscriptions\";\nimport { createInWorldLogMessage } from \"./react-components/chat-message\";\n\nimport \"./systems/nav\";\nimport \"./systems/frame-scheduler\";\nimport \"./systems/personal-space-bubble\";\nimport \"./systems/app-mode\";\nimport \"./systems/permissions\";\nimport \"./systems/exit-on-blur\";\nimport \"./systems/camera-tools\";\nimport \"./systems/userinput/userinput\";\nimport \"./systems/camera-mirror\";\nimport \"./systems/userinput/userinput-debug\";\nimport \"./systems/ui-hotkeys\";\nimport \"./systems/tips\";\nimport \"./systems/interactions\";\nimport \"./systems/hubs-systems\";\nimport \"./systems/capture-system\";\nimport { SOUND_CHAT_MESSAGE } from \"./systems/sound-effects-system\";\n\nimport \"./gltf-component-mappings\";\n\nimport { App } from \"./App\";\n\nwindow.APP = new App();\nwindow.APP.RENDER_ORDER = {\n  HUD_BACKGROUND: 1,\n  HUD_ICONS: 2,\n  CURSOR: 3\n};\nconst store = window.APP.store;\nconst mediaSearchStore = window.APP.mediaSearchStore;\nconst OAUTH_FLOW_PERMS_TOKEN_KEY = \"ret-oauth-flow-perms-token\";\nconst NOISY_OCCUPANT_COUNT = 12; // Above this # of occupants, we stop posting join/leaves/renames\n\nconst qs = new URLSearchParams(location.search);\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\nconst isEmbed = window.self !== window.top;\nif (isEmbed && !qs.get(\"embed_token\")) {\n  // Should be covered by X-Frame-Options, but just in case.\n  throw new Error(\"no embed token\");\n}\n\nconst embedsEnabled = qs.get(\"embeds\");\n\nTHREE.Object3D.DefaultMatrixAutoUpdate = false;\nwindow.APP.quality = qs.get(\"quality\") || (isMobile || isMobileVR) ? \"low\" : \"high\";\n\nconst Ammo = require(\"ammo.js/builds/ammo.wasm.js\");\nconst AmmoWasm = require(\"ammo.js/builds/ammo.wasm.wasm\");\nwindow.Ammo = Ammo.bind(undefined, {\n  locateFile(path) {\n    if (path.endsWith(\".wasm\")) {\n      return AmmoWasm;\n    }\n    return path;\n  }\n});\nrequire(\"aframe-physics-system\");\n\nimport \"./systems/post-physics\";\n\nimport \"./components/owned-object-limiter\";\nimport \"./components/set-unowned-body-kinematic\";\nimport \"./components/scalable-when-grabbed\";\nimport \"./components/networked-counter\";\nimport \"./components/event-repeater\";\nimport \"./components/set-yxz-order\";\n\nimport \"./components/cursor-controller\";\n\nimport \"./components/nav-mesh-helper\";\n\nimport \"./components/tools/pen\";\nimport \"./components/tools/networked-drawing\";\nimport \"./components/tools/drawing-manager\";\n\nimport registerNetworkSchemas from \"./network-schemas\";\nimport registerTelemetry from \"./telemetry\";\nimport { warmSerializeElement } from \"./utils/serialize-element\";\n\nimport { getAvailableVREntryTypes, VR_DEVICE_AVAILABILITY } from \"./utils/vr-caps-detect.js\";\nimport detectConcurrentLoad from \"./utils/concurrent-load-detector.js\";\n\nimport qsTruthy from \"./utils/qs_truthy\";\n\nconst PHOENIX_RELIABLE_NAF = \"phx-reliable\";\nNAF.options.firstSyncSource = PHOENIX_RELIABLE_NAF;\n\nconst isBotMode = qsTruthy(\"bot\");\nconst isTelemetryDisabled = qsTruthy(\"disable_telemetry\");\nconst isDebug = qsTruthy(\"debug\");\nconst loadingEnvironmentURL = proxiedUrlFor(\n  \"https://uploads-prod.reticulum.io/files/61d77151-7a74-40a6-b427-0c5a350c4502.glb\"\n);\n\nif (!isBotMode && !isTelemetryDisabled) {\n  registerTelemetry(\"/hub\", \"Room Landing Page\");\n}\n\ndisableiOSZoom();\ndetectConcurrentLoad();\n\nstore.init();\n\nfunction getPlatformUnsupportedReason() {\n  if (typeof RTCDataChannelEvent === \"undefined\") return \"no_data_channels\";\n  return null;\n}\n\nfunction setupLobbyCamera() {\n  const camera = document.querySelector(\"#player-camera\");\n  const previewCamera = document.querySelector(\"#environment-scene\").object3D.getObjectByName(\"scene-preview-camera\");\n\n  if (previewCamera) {\n    camera.object3D.position.copy(previewCamera.position);\n    camera.object3D.rotation.copy(previewCamera.rotation);\n    camera.object3D.rotation.reorder(\"YXZ\");\n  } else {\n    const cameraPos = camera.object3D.position;\n    camera.object3D.position.set(cameraPos.x, 2.5, cameraPos.z);\n  }\n\n  camera.object3D.matrixNeedsUpdate = true;\n\n  camera.setAttribute(\"scene-preview-camera\", \"positionOnly: true; duration: 60\");\n  camera.components[\"pitch-yaw-rotator\"].set(camera.object3D.rotation.x, camera.object3D.rotation.y);\n}\n\nlet uiProps = {};\n\n// Hub ID and slug are the basename\nlet routerBaseName = document.location.pathname\n  .split(\"/\")\n  .slice(0, 2)\n  .join(\"/\");\n\nif (document.location.pathname.includes(\"hub.html\")) {\n  routerBaseName = \"\";\n}\n\nconst history = createBrowserHistory({ basename: routerBaseName });\nwindow.APP.history = history;\n\nconst qsVREntryType = qs.get(\"vr_entry_type\");\n\nfunction mountUI(props = {}) {\n  const scene = document.querySelector(\"a-scene\");\n  const disableAutoExitOnConcurrentLoad = qsTruthy(\"allow_multi\");\n  const isCursorHoldingPen = scene && scene.systems.userinput.activeSets.includes(userinputSets.cursorHoldingPen);\n  const hasActiveCamera = scene && !!scene.systems[\"camera-tools\"].getMyCamera();\n  const forcedVREntryType = qsVREntryType;\n\n  ReactDOM.render(\n    <Router history={history}>\n      <Route\n        render={routeProps => (\n          <UIRoot\n            {...{\n              scene,\n              isBotMode,\n              disableAutoExitOnConcurrentLoad,\n              forcedVREntryType,\n              store,\n              mediaSearchStore,\n              isCursorHoldingPen,\n              hasActiveCamera,\n              ...props,\n              ...routeProps\n            }}\n          />\n        )}\n      />\n    </Router>,\n    document.getElementById(\"ui-root\")\n  );\n}\n\nfunction remountUI(props) {\n  uiProps = { ...uiProps, ...props };\n  mountUI(uiProps);\n}\n\nasync function updateUIForHub(hub) {\n  remountUI({\n    hubId: hub.hub_id,\n    hubName: hub.name,\n    hubScene: hub.scene,\n    hubEntryCode: hub.entry_code\n  });\n}\n\nasync function updateEnvironmentForHub(hub) {\n  let sceneUrl = 'https://www.dropbox.com/s/ayl3t33p2ymnxux/Axon%20Park_Cliffside.glb'\n  let isLegacyBundle; // Deprecated\n\n  const environmentScene = document.querySelector(\"#environment-scene\");\n  const sceneEl = document.querySelector(\"a-scene\");\n\n  if (hub.scene) {\n    isLegacyBundle = false;\n    sceneUrl = hub.scene.model_url;\n  } else if (hub.scene === null) {\n    // delisted/removed scene\n    sceneUrl = loadingEnvironmentURL;\n  } else {\n    const defaultSpaceTopic = hub.topics[0];\n    const glbAsset = defaultSpaceTopic.assets.find(a => a.asset_type === \"glb\");\n    const bundleAsset = defaultSpaceTopic.assets.find(a => a.asset_type === \"gltf_bundle\");\n    sceneUrl = (glbAsset || bundleAsset).src;\n    const hasExtension = /\\.gltf/i.test(sceneUrl) || /\\.glb/i.test(sceneUrl);\n    isLegacyBundle = !(glbAsset || hasExtension);\n  }\n\n  if (isLegacyBundle) {\n    // Deprecated\n    const res = await fetch(sceneUrl);\n    const data = await res.json();\n    const baseURL = new URL(THREE.LoaderUtils.extractUrlBase(sceneUrl), window.location.href);\n    sceneUrl = new URL(data.assets[0].src, baseURL).href;\n  } else {\n    sceneUrl = proxiedUrlFor(sceneUrl);\n  }\n\n  console.log(`Scene URL: ${sceneUrl}`);\n\n  let environmentEl = null;\n\n  if (environmentScene.childNodes.length === 0) {\n    const environmentEl = document.createElement(\"a-entity\");\n    environmentEl.setAttribute(\"gltf-model-plus\", { src: sceneUrl, useCache: false, inflate: true });\n\n    environmentScene.appendChild(environmentEl);\n\n    environmentEl.addEventListener(\n      \"model-loaded\",\n      () => {\n        // Show the canvas once the model has loaded\n        document.querySelector(\".a-canvas\").classList.remove(\"a-hidden\");\n\n        //TODO: check if the environment was made with spoke to determine if a shape should be added\n        traverseMeshesAndAddShapes(environmentEl);\n      },\n      { once: true }\n    );\n  } else {\n    // Change environment\n    environmentEl = environmentScene.childNodes[0];\n\n    // Clear the three.js image cache and load the loading environment before switching to the new one.\n    THREE.Cache.clear();\n\n    environmentEl.addEventListener(\n      \"model-loaded\",\n      () => {\n        environmentEl.addEventListener(\n          \"model-loaded\",\n          () => {\n            traverseMeshesAndAddShapes(environmentEl);\n\n            // We've already entered, so move to new spawn point once new environment is loaded\n            if (sceneEl.is(\"entered\")) {\n              document.querySelector(\"#player-rig\").components[\"spawn-controller\"].moveToSpawnPoint();\n            }\n          },\n          { once: true }\n        );\n\n        environmentEl.setAttribute(\"gltf-model-plus\", { src: sceneUrl });\n      },\n      { once: true }\n    );\n\n    environmentEl.setAttribute(\"gltf-model-plus\", { src: loadingEnvironmentURL });\n  }\n}\n\nasync function handleHubChannelJoined(entryManager, hubChannel, messageDispatch, data) {\n  const scene = document.querySelector(\"a-scene\");\n  const isRejoin = NAF.connection.isConnected();\n\n  if (isRejoin) {\n    // Slight hack, to ensure correct presence state we need to re-send the entry event\n    // on re-join. Ideally this would be updated into the channel socket state but this\n    // would require significant changes to the hub channel events and socket management.\n    if (scene.is(\"entered\")) {\n      hubChannel.sendEntryEvent();\n    }\n\n    // Send complete sync on phoenix re-join.\n    NAF.connection.entities.completeSync(null, true);\n    return;\n  }\n\n  // Turn off NAF for embeds as an optimization, so the user's browser isn't getting slammed\n  // with NAF traffic on load.\n  if (isEmbed) {\n    hubChannel.allowNAFTraffic(false);\n  }\n\n  const hub = data.hubs[0];\n\n  let embedToken = hub.embed_token;\n\n  if (!embedToken) {\n    const embedTokenEntry = store.state.embedTokens && store.state.embedTokens.find(t => t.hubId === hub.hub_id);\n\n    if (embedTokenEntry) {\n      embedToken = embedTokenEntry.embedToken;\n    }\n  }\n\n  console.log(`Janus host: ${hub.host}`);\n\n  remountUI({\n    onSendMessage: messageDispatch.dispatch,\n    onLoaded: () => store.executeOnLoadActions(scene),\n    onMediaSearchResultEntrySelected: entry => scene.emit(\"action_selected_media_result_entry\", entry),\n    onMediaSearchCancelled: entry => scene.emit(\"action_media_search_cancelled\", entry),\n    onAvatarSaved: entry => scene.emit(\"action_avatar_saved\", entry),\n    embedToken: embedsEnabled ? embedToken : null\n  });\n\n  scene.addEventListener(\"action_selected_media_result_entry\", e => {\n    const entry = e.detail;\n    if (entry.type !== \"scene_listing\" && entry.type !== \"scene\") return;\n    if (!hubChannel.can(\"update_hub\")) return;\n\n    hubChannel.updateScene(entry.url);\n  });\n\n  // Handle request for user gesture\n  scene.addEventListener(\"2d-interstitial-gesture-required\", () => {\n    remountUI({\n      showInterstitialPrompt: true,\n      onInterstitialPromptClicked: () => {\n        scene.emit(\"2d-interstitial-gesture-complete\");\n        remountUI({ showInterstitialPrompt: false, onInterstitialPromptClicked: null });\n      }\n    });\n  });\n\n  const objectsScene = document.querySelector(\"#objects-scene\");\n  const objectsUrl = getReticulumFetchUrl(`/${hub.hub_id}/objects.gltf`);\n  const objectsEl = document.createElement(\"a-entity\");\n  objectsEl.setAttribute(\"gltf-model-plus\", { src: objectsUrl, useCache: false, inflate: true });\n\n  if (!isBotMode) {\n    objectsScene.appendChild(objectsEl);\n  }\n\n  // Wait for scene objects to load before connecting, so there is no race condition on network state.\n  const connectToScene = async () => {\n    scene.setAttribute(\"networked-scene\", {\n      room: hub.hub_id,\n      serverURL: `wss://${hub.host}`,\n      debug: !!isDebug\n    });\n\n    while (!scene.components[\"networked-scene\"] || !scene.components[\"networked-scene\"].data) await nextTick();\n\n    scene.addEventListener(\"adapter-ready\", ({ detail: adapter }) => {\n      let newHostPollInterval = null;\n\n      // When reconnecting, update the server URL if necessary\n      adapter.setReconnectionListeners(\n        () => {\n          if (newHostPollInterval) return;\n\n          newHostPollInterval = setInterval(async () => {\n            const currentServerURL = NAF.connection.adapter.serverUrl;\n            const newHubHost = await hubChannel.getHost();\n            const newServerURL = `wss://${newHubHost}`;\n\n            if (currentServerURL !== newServerURL) {\n              console.log(\"Connecting to new Janus server \" + newServerURL);\n              scene.setAttribute(\"networked-scene\", { serverURL: newServerURL });\n              adapter.serverUrl = newServerURL;\n            }\n          }, 1000);\n        },\n        () => {\n          clearInterval(newHostPollInterval);\n          newHostPollInterval = null;\n        },\n        null\n      );\n\n      const sendViaPhoenix = reliable => (clientId, dataType, data) => {\n        const payload = { dataType, data };\n\n        if (clientId) {\n          payload.clientId = clientId;\n        }\n\n        const isOpen = hubChannel.channel.socket.connectionState() === \"open\";\n\n        if (isOpen || reliable) {\n          if (isOpen) {\n            hubChannel.channel.push(\"naf\", payload);\n          } else {\n            // Memory is re-used, so make a copy\n            hubChannel.channel.push(\"naf\", AFRAME.utils.clone(payload));\n          }\n        }\n      };\n\n      adapter.reliableTransport = sendViaPhoenix(true);\n      adapter.unreliableTransport = sendViaPhoenix(false);\n    });\n\n    const loadEnvironmentAndConnect = () => {\n      updateEnvironmentForHub(hub);\n\n      scene.components[\"networked-scene\"]\n        .connect()\n        .then(() => scene.emit(\"didConnectToNetworkedScene\"))\n        .catch(connectError => {\n          // hacky until we get return codes\n          const isFull = connectError.error && connectError.error.msg.match(/\\bfull\\b/i);\n          console.error(connectError);\n          remountUI({ roomUnavailableReason: isFull ? \"full\" : \"connect_error\" });\n          entryManager.exitScene();\n\n          return;\n        });\n    };\n\n    updateUIForHub(hub);\n\n    if (!isEmbed) {\n      loadEnvironmentAndConnect();\n    } else {\n      remountUI({\n        onPreloadLoadClicked: () => {\n          hubChannel.allowNAFTraffic(true);\n          remountUI({ showPreload: false });\n          loadEnvironmentAndConnect();\n        }\n      });\n    }\n  };\n\n  if (!isBotMode) {\n    objectsEl.addEventListener(\"model-loaded\", async el => {\n      if (el.target !== objectsEl) return;\n      connectToScene();\n    });\n  } else {\n    connectToScene();\n  }\n}\n\nasync function runBotMode(scene, entryManager) {\n  const noop = () => {};\n  scene.renderer = { setAnimationLoop: noop, render: noop };\n\n  while (!NAF.connection.isConnected()) await nextTick();\n  entryManager.enterSceneWhenLoaded(new MediaStream(), false);\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\n  const canvas = document.querySelector(\".a-canvas\");\n  canvas.classList.add(\"a-hidden\");\n\n  warmSerializeElement();\n\n  if (!window.WebAssembly) {\n    remountUI({ showWebAssemblyDialog: true });\n    return;\n  }\n\n  // If we are on iOS but we don't have the mediaDevices API, then we are likely in a Firefox or Chrome WebView,\n  // or a WebView preview used in apps like Twitter and Discord. So we show the dialog that tells users to open\n  // the room in the real Safari.\n  const detectedOS = detectOS(navigator.userAgent);\n  if (detectedOS === \"iOS\" && !navigator.mediaDevices) {\n    remountUI({ showSafariDialog: true });\n    return;\n  }\n\n  // HACK: On Safari for iOS & MacOS, if mic permission is not granted, subscriber webrtc negotiation fails.\n  // So we need to insist on microphone grants to continue.\n  const browser = detect();\n  if ([\"iOS\", \"Mac OS\"].includes(detectedOS) && [\"safari\", \"ios\"].includes(browser.name)) {\n    try {\n      await navigator.mediaDevices.getUserMedia({ audio: true });\n    } catch (e) {\n      remountUI({ showSafariMicDialog: true });\n      return;\n    }\n  }\n\n  const hubId = qs.get(\"hub_id\") || document.location.pathname.substring(1).split(\"/\")[0];\n  console.log(`Hub ID: ${hubId}`);\n\n  const subscriptions = new Subscriptions(hubId);\n\n  if (navigator.serviceWorker) {\n    try {\n      navigator.serviceWorker\n        .register(\"/hub.service.js\")\n        .then(() => {\n          navigator.serviceWorker.ready\n            .then(registration => subscriptions.setRegistration(registration))\n            .catch(() => subscriptions.setRegistrationFailed());\n        })\n        .catch(() => subscriptions.setRegistrationFailed());\n    } catch (e) {\n      subscriptions.setRegistrationFailed();\n    }\n  } else {\n    subscriptions.setRegistrationFailed();\n  }\n\n  const scene = document.querySelector(\"a-scene\");\n  scene.setAttribute(\"shadow\", { enabled: window.APP.quality !== \"low\" }); // Disable shadows on low quality\n\n  // Physics needs to be ready before spawning anything.\n  while (!scene.systems.physics.initialized) await nextTick();\n\n  const onSceneLoaded = () => {\n    const physicsSystem = scene.systems.physics;\n    physicsSystem.setDebug(isDebug || physicsSystem.data.debug);\n    patchThreeAllocations();\n  };\n\n  if (scene.hasLoaded) {\n    onSceneLoaded();\n  } else {\n    scene.addEventListener(\"loaded\", onSceneLoaded, { once: true });\n  }\n\n  // If the stored avatar doesn't have a valid src, reset to a legacy avatar.\n  const avatarSrc = await getAvatarSrc(store.state.profile.avatarId);\n  if (!avatarSrc) {\n    store.resetToRandomLegacyAvatar();\n  }\n\n  const authChannel = new AuthChannel(store);\n  const hubChannel = new HubChannel(store, hubId);\n  const availableVREntryTypes = await getAvailableVREntryTypes();\n  const entryManager = new SceneEntryManager(hubChannel, authChannel, availableVREntryTypes, history);\n  const performConditionalSignIn = async (predicate, action, messageId, onFailure) => {\n    if (predicate()) return action();\n\n    const signInContinueTextId = scene.is(\"vr-mode\") ? \"entry.return-to-vr\" : \"dialog.close\";\n\n    handleExitTo2DInterstitial(true, () => remountUI({ showSignInDialog: false }));\n\n    remountUI({\n      showSignInDialog: true,\n      signInMessageId: `sign-in.${messageId}`,\n      signInCompleteMessageId: `sign-in.${messageId}-complete`,\n      signInContinueTextId,\n      onContinueAfterSignIn: async () => {\n        remountUI({ showSignInDialog: false });\n        let actionError = null;\n        if (predicate()) {\n          try {\n            await action();\n          } catch (e) {\n            actionError = e;\n          }\n        } else {\n          actionError = new Error(\"Predicate failed post sign-in\");\n        }\n\n        if (actionError && onFailure) onFailure(actionError);\n        exit2DInterstitialAndEnterVR();\n      }\n    });\n  };\n\n  window.addEventListener(\"action_create_avatar\", () => {\n    performConditionalSignIn(\n      () => hubChannel.signedIn,\n      () => pushHistoryState(history, \"overlay\", \"avatar-editor\"),\n      \"create-avatar\"\n    );\n  });\n\n  scene.addEventListener(\"scene_media_selected\", e => {\n    const sceneInfo = e.detail;\n\n    performConditionalSignIn(\n      () => hubChannel.can(\"update_hub\"),\n      () => hubChannel.updateScene(sceneInfo),\n      \"change-scene\"\n    );\n  });\n\n  scene.addEventListener(\"action_media_tweet\", e => {\n    let isInModal = false;\n    let isInOAuth = false;\n\n    const exitOAuth = () => {\n      isInOAuth = false;\n      store.clearOnLoadActions();\n      remountUI({ showOAuthDialog: false, oauthInfo: null });\n    };\n\n    handleExitTo2DInterstitial(true, () => {\n      if (isInModal) history.goBack();\n      if (isInOAuth) exitOAuth();\n    });\n\n    performConditionalSignIn(\n      () => hubChannel.signedIn,\n      async () => {\n        if (hubChannel.can(\"tweet\")) {\n          isInModal = true;\n          pushHistoryState(history, \"modal\", \"tweet\", e.detail);\n        } else {\n          const url = await hubChannel.getTwitterOAuthURL();\n          isInOAuth = true;\n          store.enqueueOnLoadAction(\"emit_scene_event\", { event: \"action_media_tweet\", detail: e.detail });\n          remountUI({\n            showOAuthDialog: true,\n            oauthInfo: [{ type: \"twitter\", url: url }],\n            onCloseOAuthDialog: () => exitOAuth()\n          });\n        }\n      },\n      \"tweet\"\n    );\n  });\n\n  remountUI({ performConditionalSignIn, embed: isEmbed, showPreload: isEmbed });\n  entryManager.performConditionalSignIn = performConditionalSignIn;\n  entryManager.init();\n\n  const linkChannel = new LinkChannel(store);\n\n  window.APP.scene = scene;\n  window.APP.hubChannel = hubChannel;\n\n  const handleEarlyVRMode = () => {\n    // If VR headset is activated, refreshing page will fire vrdisplayactivate\n    // which puts A-Frame in VR mode, so exit VR mode whenever it is attempted\n    // to be entered and we haven't entered the room yet.\n    if (scene.is(\"vr-mode\") && !scene.is(\"vr-entered\")) {\n      console.log(\"Pre-emptively exiting VR mode.\");\n      scene.exitVR();\n      return true;\n    }\n\n    return false;\n  };\n\n  scene.addEventListener(\"enter-vr\", () => {\n    if (handleEarlyVRMode()) return true;\n\n    if (isMobileVR) {\n      // Optimization, stop drawing UI if not visible\n      remountUI({ hide: true });\n    }\n\n    document.body.classList.add(\"vr-mode\");\n\n    // Don't stretch canvas on cardboard, since that's drawing the actual VR view :)\n    if ((!isMobile && !isMobileVR) || availableVREntryTypes.cardboard !== VR_DEVICE_AVAILABILITY.yes) {\n      document.body.classList.add(\"vr-mode-stretch\");\n    }\n  });\n\n  handleEarlyVRMode();\n\n  // HACK A-Frame 0.9.0 seems to fail to wire up vrdisplaypresentchange early enough\n  // to catch presentation state changes and recognize that an HMD is presenting on startup.\n  window.addEventListener(\n    \"vrdisplaypresentchange\",\n    () => {\n      if (scene.is(\"vr-entered\")) return;\n      if (scene.is(\"vr-mode\")) return;\n\n      const device = AFRAME.utils.device.getVRDisplay();\n\n      if (device && device.isPresenting) {\n        if (!scene.is(\"vr-mode\")) {\n          console.warn(\"Hit A-Frame bug where VR display is presenting but A-Frame has not entered VR mode.\");\n          scene.enterVR();\n        }\n      }\n    },\n    { once: true }\n  );\n\n  scene.addEventListener(\"exit-vr\", () => {\n    document.body.classList.remove(\"vr-mode\");\n    document.body.classList.remove(\"vr-mode-stretch\");\n\n    remountUI({ hide: false });\n\n    // HACK: Oculus browser pauses videos when exiting VR mode, so we need to resume them after a timeout.\n    if (/OculusBrowser/i.test(window.navigator.userAgent)) {\n      document.querySelectorAll(\"[media-video]\").forEach(m => {\n        const video = m.components[\"media-video\"].video;\n\n        if (!video.paused) {\n          setTimeout(() => video.play(), 1000);\n        }\n      });\n    }\n  });\n\n  registerNetworkSchemas();\n\n  remountUI({\n    authChannel,\n    hubChannel,\n    linkChannel,\n    subscriptions,\n    enterScene: entryManager.enterScene,\n    exitScene: reason => {\n      entryManager.exitScene();\n\n      if (reason) {\n        remountUI({ roomUnavailableReason: reason });\n      }\n    },\n    initialIsSubscribed: subscriptions.isSubscribed(),\n    activeTips: scene.systems.tips.activeTips\n  });\n\n  scene.addEventListener(\"action_focus_chat\", () => {\n    const chatFocusTarget = document.querySelector(\".chat-focus-target\");\n    chatFocusTarget && chatFocusTarget.focus();\n  });\n\n  scene.addEventListener(\"tips_changed\", e => {\n    remountUI({ activeTips: e.detail });\n  });\n\n  scene.addEventListener(\"leave_room_requested\", () => {\n    scene.exitVR();\n    entryManager.exitScene(\"left\");\n    remountUI({ roomUnavailableReason: \"left\" });\n  });\n\n  scene.addEventListener(\"camera_toggled\", () => remountUI({}));\n\n  scene.addEventListener(\"camera_removed\", () => remountUI({}));\n\n  scene.addEventListener(\"hub_closed\", () => {\n    scene.exitVR();\n    entryManager.exitScene(\"closed\");\n    remountUI({ roomUnavailableReason: \"closed\" });\n  });\n\n  const platformUnsupportedReason = getPlatformUnsupportedReason();\n\n  if (platformUnsupportedReason) {\n    remountUI({ platformUnsupportedReason });\n    entryManager.exitScene();\n    return;\n  }\n\n  if (qs.get(\"required_version\") && process.env.BUILD_VERSION) {\n    const buildNumber = process.env.BUILD_VERSION.split(\" \", 1)[0]; // e.g. \"123 (abcd5678)\"\n\n    if (qs.get(\"required_version\") !== buildNumber) {\n      remountUI({ roomUnavailableReason: \"version_mismatch\" });\n      setTimeout(() => document.location.reload(), 5000);\n      entryManager.exitScene();\n      return;\n    }\n  }\n\n  getReticulumMeta().then(reticulumMeta => {\n    console.log(`Reticulum @ ${reticulumMeta.phx_host}: v${reticulumMeta.version} on ${reticulumMeta.pool}`);\n\n    if (\n      qs.get(\"required_ret_version\") &&\n      (qs.get(\"required_ret_version\") !== reticulumMeta.version || qs.get(\"required_ret_pool\") !== reticulumMeta.pool)\n    ) {\n      remountUI({ roomUnavailableReason: \"version_mismatch\" });\n      setTimeout(() => document.location.reload(), 5000);\n      entryManager.exitScene();\n      return;\n    }\n  });\n\n  if (isMobileVR) {\n    remountUI({ availableVREntryTypes, forcedVREntryType: \"vr\" });\n\n    if (/Oculus/.test(navigator.userAgent)) {\n      // HACK - The polyfill reports Cardboard as the primary VR display on startup out ahead of Oculus Go on Oculus Browser 5.5.0 beta. This display is cached by A-Frame,\n      // so we need to resolve that and get the real VRDisplay before entering as well.\n      const displays = await navigator.getVRDisplays();\n      const vrDisplay = displays.length && displays[0];\n      AFRAME.utils.device.getVRDisplay = () => vrDisplay;\n    }\n  } else {\n    const hasVREntryDevice =\n      availableVREntryTypes.cardboard !== VR_DEVICE_AVAILABILITY.no ||\n      availableVREntryTypes.generic !== VR_DEVICE_AVAILABILITY.no ||\n      availableVREntryTypes.daydream !== VR_DEVICE_AVAILABILITY.no;\n\n    remountUI({ availableVREntryTypes, forcedVREntryType: qsVREntryType || (!hasVREntryDevice ? \"2d\" : null) });\n  }\n\n  const environmentScene = document.querySelector(\"#environment-scene\");\n\n  const onFirstEnvironmentLoad = () => {\n    if (!scene.is(\"entered\")) {\n      setupLobbyCamera();\n    }\n\n    // Replace renderer with a noop renderer to reduce bot resource usage.\n    if (isBotMode) {\n      runBotMode(scene, entryManager);\n    }\n\n    environmentScene.removeEventListener(\"model-loaded\", onFirstEnvironmentLoad);\n  };\n\n  environmentScene.addEventListener(\"model-loaded\", onFirstEnvironmentLoad);\n\n  environmentScene.addEventListener(\"model-loaded\", () => {\n    // This will be run every time the environment is changed (including the first load.)\n    remountUI({ environmentSceneLoaded: true });\n    scene.emit(\"environment-scene-loaded\");\n\n    // Re-bind the teleporter controls collision meshes in case the scene changed.\n    document.querySelectorAll(\"a-entity[teleporter]\").forEach(x => x.components[\"teleporter\"].queryCollisionEntities());\n\n    for (const modelEl of environmentScene.children) {\n      addAnimationComponents(modelEl);\n    }\n  });\n\n  const socket = await connectToReticulum(isDebug);\n\n  socket.onClose(e => {\n    // We don't currently have an easy way to distinguish between being kicked (server closes socket)\n    // and a variety of other network issues that seem to produce the 1000 closure code, but the\n    // latter are probably more common. Either way, we just tell the user they got disconnected.\n    const NORMAL_CLOSURE = 1000;\n    if (e.code === NORMAL_CLOSURE) {\n      entryManager.exitScene();\n      remountUI({ roomUnavailableReason: \"disconnected\" });\n    }\n  });\n\n  let retDeployReconnectInterval;\n  const retReconnectMaxDelayMs = 15000;\n\n  // Reticulum global channel\n  let retPhxChannel = socket.channel(`ret`, { hub_id: hubId });\n  retPhxChannel\n    .join()\n    .receive(\"ok\", async data => subscriptions.setVapidPublicKey(data.vapid_public_key))\n    .receive(\"error\", res => {\n      subscriptions.setVapidPublicKey(null);\n      console.error(res);\n    });\n\n  const pushSubscriptionEndpoint = await subscriptions.getCurrentEndpoint();\n\n  const oauthFlowPermsToken = Cookies.get(OAUTH_FLOW_PERMS_TOKEN_KEY);\n\n  if (oauthFlowPermsToken) {\n    Cookies.remove(OAUTH_FLOW_PERMS_TOKEN_KEY);\n  }\n\n  const createHubChannelParams = permsToken => {\n    const params = {\n      profile: store.state.profile,\n      push_subscription_endpoint: pushSubscriptionEndpoint,\n      auth_token: null,\n      perms_token: null,\n      context: {\n        mobile: isMobile || isMobileVR,\n        hmd: availableVREntryTypes.isInHMD,\n        embed: isEmbed\n      }\n    };\n\n    if (permsToken) {\n      params.perms_token = permsToken;\n    }\n\n    const { token } = store.state.credentials;\n    if (token) {\n      console.log(`Logged into account ${store.credentialsAccountId}`);\n      params.auth_token = token;\n    }\n\n    return params;\n  };\n\n  const migrateToNewReticulumServer = async deployNotification => {\n    // On Reticulum deploys, reconnect after a random delay until pool + version match deployed version/pool\n    console.log(`Reticulum deploy detected v${deployNotification.ret_version} on ${deployNotification.ret_pool}`);\n    clearInterval(retDeployReconnectInterval);\n\n    setTimeout(() => {\n      const tryReconnect = async () => {\n        invalidateReticulumMeta();\n        const reticulumMeta = await getReticulumMeta();\n\n        if (\n          reticulumMeta.pool === deployNotification.ret_pool &&\n          reticulumMeta.version === deployNotification.ret_version\n        ) {\n          console.log(\"Reticulum reconnecting.\");\n          clearInterval(retDeployReconnectInterval);\n          const oldSocket = retPhxChannel.socket;\n          const socket = await connectToReticulum(isDebug, oldSocket.params());\n          retPhxChannel = await migrateChannelToSocket(retPhxChannel, socket);\n          await hubChannel.migrateToSocket(socket, createHubChannelParams());\n          authChannel.setSocket(socket);\n          linkChannel.setSocket(socket);\n\n          // Disconnect old socket after a delay to ensure this user is always registered in presence.\n          setTimeout(() => {\n            console.log(\"Reconnection complete. Disconnecting old reticulum socket.\");\n            oldSocket.teardown();\n          }, 10000);\n        }\n      };\n\n      retDeployReconnectInterval = setInterval(tryReconnect, 5000);\n      tryReconnect();\n    }, Math.floor(Math.random() * retReconnectMaxDelayMs));\n  };\n\n  retPhxChannel.on(\"notice\", async data => {\n    // On Reticulum deploys, reconnect after a random delay until pool + version match deployed version/pool\n    if (data.event === \"ret-deploy\") {\n      await migrateToNewReticulumServer(data);\n    }\n  });\n\n  const hubPhxChannel = socket.channel(`hub:${hubId}`, createHubChannelParams(oauthFlowPermsToken));\n\n  const presenceLogEntries = [];\n  const addToPresenceLog = entry => {\n    entry.key = Date.now().toString();\n\n    presenceLogEntries.push(entry);\n    remountUI({ presenceLogEntries });\n    if (entry.type === \"chat\") {\n      scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CHAT_MESSAGE);\n    }\n\n    // Fade out and then remove\n    setTimeout(() => {\n      entry.expired = true;\n      remountUI({ presenceLogEntries });\n\n      setTimeout(() => {\n        presenceLogEntries.splice(presenceLogEntries.indexOf(entry), 1);\n        remountUI({ presenceLogEntries });\n      }, 5000);\n    }, 20000);\n  };\n\n  const messageDispatch = new MessageDispatch(\n    scene,\n    entryManager,\n    hubChannel,\n    addToPresenceLog,\n    remountUI,\n    mediaSearchStore\n  );\n\n  let isInitialJoin = true;\n\n  hubChannel.setPhoenixChannel(hubPhxChannel);\n\n  hubPhxChannel\n    .join()\n    .receive(\"ok\", async data => {\n      socket.params().session_id = data.session_id;\n      socket.params().session_token = data.session_token;\n\n      const vrHudPresenceCount = document.querySelector(\"#hud-presence-count\");\n\n      if (isInitialJoin) {\n        store.addEventListener(\"profilechanged\", hubChannel.sendProfileUpdate.bind(hubChannel));\n        hubChannel.presence.onSync(() => {\n          const presence = hubChannel.presence;\n\n          remountUI({\n            sessionId: socket.params().session_id,\n            presences: presence.state\n          });\n\n          const occupantCount = Object.entries(presence.state).length;\n          vrHudPresenceCount.setAttribute(\"text\", \"value\", occupantCount.toString());\n\n          if (occupantCount > 1) {\n            scene.addState(\"copresent\");\n          } else {\n            scene.removeState(\"copresent\");\n          }\n\n          // HACK - Set a flag on the presence object indicating if the initial sync has completed,\n          // which is used to determine if we should fire join/leave messages into the presence log.\n          presence.__hadInitialSync = true;\n\n          presence.onJoin((sessionId, current, info) => {\n            // Ignore presence join/leaves if this Presence has not yet had its initial sync (o/w the user\n            // will see join messages for every user.)\n            if (!hubChannel.presence.__hadInitialSync) return;\n\n            const meta = info.metas[info.metas.length - 1];\n            const occupantCount = Object.entries(hubChannel.presence.state).length;\n\n            if (occupantCount <= NOISY_OCCUPANT_COUNT) {\n              if (current) {\n                // Change to existing presence\n                const isSelf = sessionId === socket.params().session_id;\n                const currentMeta = current.metas[0];\n\n                if (\n                  !isSelf &&\n                  currentMeta.presence !== meta.presence &&\n                  meta.presence === \"room\" &&\n                  meta.profile.displayName\n                ) {\n                  addToPresenceLog({\n                    type: \"entered\",\n                    presence: meta.presence,\n                    name: meta.profile.displayName\n                  });\n                }\n\n                if (\n                  currentMeta.profile &&\n                  meta.profile &&\n                  currentMeta.profile.displayName !== meta.profile.displayName\n                ) {\n                  addToPresenceLog({\n                    type: \"display_name_changed\",\n                    oldName: currentMeta.profile.displayName,\n                    newName: meta.profile.displayName\n                  });\n                }\n              } else if (info.metas.length === 1) {\n                // New presence\n                const meta = info.metas[0];\n\n                if (meta.presence && meta.profile.displayName) {\n                  addToPresenceLog({\n                    type: \"join\",\n                    presence: meta.presence,\n                    name: meta.profile.displayName\n                  });\n                }\n              }\n            }\n\n            scene.emit(\"presence_updated\", {\n              sessionId,\n              profile: meta.profile,\n              roles: meta.roles,\n              streaming: meta.streaming,\n              recording: meta.recording\n            });\n          });\n\n          presence.onLeave((sessionId, current, info) => {\n            // Ignore presence join/leaves if this Presence has not yet had its initial sync\n            if (!hubChannel.presence.__hadInitialSync) return;\n\n            if (current && current.metas.length > 0) return;\n            const occupantCount = Object.entries(hubChannel.presence.state).length;\n            if (occupantCount > NOISY_OCCUPANT_COUNT) return;\n\n            const meta = info.metas[0];\n\n            if (meta.profile.displayName) {\n              addToPresenceLog({\n                type: \"leave\",\n                name: meta.profile.displayName\n              });\n            }\n          });\n        });\n      }\n\n      isInitialJoin = false;\n\n      const permsToken = oauthFlowPermsToken || data.perms_token;\n      hubChannel.setPermissionsFromToken(permsToken);\n\n      scene.addEventListener(\"adapter-ready\", ({ detail: adapter }) => {\n        adapter.setClientId(socket.params().session_id);\n        adapter.setJoinToken(data.perms_token);\n        hubChannel.addEventListener(\"permissions-refreshed\", e => adapter.setJoinToken(e.detail.permsToken));\n      });\n      subscriptions.setHubChannel(hubChannel);\n\n      subscriptions.setSubscribed(data.subscriptions.web_push);\n\n      remountUI({\n        hubIsBound: data.hub_requires_oauth,\n        initialIsFavorited: data.subscriptions.favorites,\n        initialIsSubscribed: subscriptions.isSubscribed()\n      });\n\n      await handleHubChannelJoined(entryManager, hubChannel, messageDispatch, data);\n    })\n    .receive(\"error\", res => {\n      if (res.reason === \"closed\") {\n        entryManager.exitScene();\n        remountUI({ roomUnavailableReason: \"closed\" });\n      } else if (res.reason === \"oauth_required\") {\n        entryManager.exitScene();\n        remountUI({ oauthInfo: res.oauth_info, showOAuthDialog: true });\n      } else if (res.reason === \"join_denied\") {\n        entryManager.exitScene();\n        remountUI({ roomUnavailableReason: \"denied\" });\n      }\n\n      console.error(res);\n    });\n\n  hubPhxChannel.on(\"naf\", data => {\n    if (!NAF.connection.adapter) return;\n    NAF.connection.adapter.onData(data, PHOENIX_RELIABLE_NAF);\n  });\n\n  hubPhxChannel.on(\"message\", ({ session_id, type, body, from }) => {\n    const getAuthor = () => {\n      const userInfo = hubChannel.presence.state[session_id];\n      if (from) {\n        return from;\n      } else if (userInfo) {\n        return userInfo.metas[0].profile.displayName;\n      } else {\n        return \"Mystery user\";\n      }\n    };\n\n    const name = getAuthor();\n    const maySpawn = scene.is(\"entered\");\n\n    const incomingMessage = { name, type, body, maySpawn, sessionId: session_id };\n\n    if (scene.is(\"vr-mode\")) {\n      createInWorldLogMessage(incomingMessage);\n    }\n\n    addToPresenceLog(incomingMessage);\n  });\n\n  hubPhxChannel.on(\"hub_refresh\", ({ session_id, hubs, stale_fields }) => {\n    const hub = hubs[0];\n    const userInfo = hubChannel.presence.state[session_id];\n\n    updateUIForHub(hub);\n\n    if (stale_fields.includes(\"scene\")) {\n      updateEnvironmentForHub(hub);\n\n      addToPresenceLog({\n        type: \"scene_changed\",\n        name: userInfo.metas[0].profile.displayName,\n        sceneName: hub.scene ? hub.scene.name : \"a custom URL\"\n      });\n    }\n\n    if (stale_fields.includes(\"name\")) {\n      const titleParts = document.title.split(\" | \"); // Assumes title has | trailing site name\n      titleParts[0] = hub.name;\n      document.title = titleParts.join(\" | \");\n\n      // Re-write the slug in the browser history\n      const pathParts = history.location.pathname.split(\"/\");\n      const oldSlug = pathParts[1];\n      const { search, state } = history.location;\n      const pathname = history.location.pathname.replace(`/${oldSlug}`, `/${hub.slug}`);\n\n      history.replace({ pathname, search, state });\n\n      addToPresenceLog({\n        type: \"hub_name_changed\",\n        name: userInfo.metas[0].profile.displayName,\n        hubName: hub.name\n      });\n    }\n\n    if (hub.entry_mode === \"deny\") {\n      scene.emit(\"hub_closed\");\n    }\n  });\n\n  hubPhxChannel.on(\"mute\", ({ session_id }) => {\n    if (session_id === NAF.clientId && !scene.is(\"muted\")) {\n      scene.emit(\"action_mute\");\n    }\n  });\n\n  authChannel.setSocket(socket);\n  linkChannel.setSocket(socket);\n});\n","// Stores a key in localStorage and registeres a listener for the same key being set (by another tab).\n// When detected, fire a \"concurrentload\" event.\nexport default function detectConcurrentLoad(instanceKey = \"global\") {\n  const key = `___concurrent_load_detector_${instanceKey}`;\n  localStorage.setItem(key, JSON.stringify({ started_at: new Date() }));\n  const onStorageEvent = e => {\n    if (e.key !== key) return;\n    window.dispatchEvent(new CustomEvent(\"concurrentload\"));\n    window.removeEventListener(\"storage\", onStorageEvent);\n  };\n  window.addEventListener(\"storage\", onStorageEvent);\n}\n","export default function patchThreeAllocations() {\n  const renderer = AFRAME.scenes[0].renderer;\n  const gl = renderer.context;\n\n  // These functions in three.js uses the arguments object, which allocates.\n  renderer.state.texImage2D = function(a, b, c, d, e, f, g, h, i) {\n    try {\n      if (g === undefined) {\n        gl.texImage2D(a, b, c, d, e, f);\n      } else {\n        gl.texImage2D(a, b, c, d, e, f, g, h, i);\n      }\n    } catch (error) {\n      console.error(\"THREE.WebGLState:\", error);\n    }\n  };\n\n  renderer.state.compressedTexImage2D = function(a, b, c, d, e, f, g, h, i, j) {\n    try {\n      if (h === undefined) {\n        gl.compressedTexImage2D(a, b, c, d, e, f, g);\n      } else if (i === undefined) {\n        gl.compressedTexImage2D(a, b, c, d, e, f, g, h);\n      } else if (j === undefined) {\n        gl.compressedTexImage2D(a, b, c, d, e, f, g, h, i);\n      } else {\n        gl.compressedTexImage2D(a, b, c, d, e, f, g, h, i, j);\n      }\n    } catch (error) {\n      console.error(\"THREE.WebGLState:\", error);\n    }\n  };\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nexport default class DialogContainer extends Component {\n  static propTypes = {\n    title: PropTypes.node,\n    children: PropTypes.node.isRequired,\n    onClose: PropTypes.func,\n    closable: PropTypes.bool,\n    wide: PropTypes.bool,\n    className: PropTypes.string,\n    allowOverflow: PropTypes.bool,\n    additionalClass: PropTypes.string\n  };\n\n  static defaultProps = {\n    closable: true\n  };\n\n  constructor(props) {\n    super(props);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onContainerClicked = this.onContainerClicked.bind(this);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.onKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.onKeyDown);\n  }\n\n  onKeyDown(e) {\n    if (this.props.closable && e.key === \"Escape\") {\n      this.props.onClose();\n    }\n  }\n\n  onContainerClicked = e => {\n    if (this.props.closable && e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return (\n      <div className={classNames(\"dialog-overlay\", this.props.className)}>\n        <div className=\"dialog\" onClick={this.onContainerClicked}>\n          <div className={`dialog__box ${this.props.wide ? \"dialog__wide\" : \"\"} `}>\n            <div\n              className={classNames(\n                \"dialog__box__contents\",\n                this.props.allowOverflow ? \"dialog__box__contents-overflow\" : null,\n                this.props.additionalClass\n              )}\n            >\n              {this.props.closable &&\n                this.props.onClose && (\n                  <WithHoverSound>\n                    <button className=\"dialog__box__contents__close\" onClick={() => this.props.onClose()}>\n                      <i>\n                        <FontAwesomeIcon icon={faTimes} />\n                      </i>\n                    </button>\n                  </WithHoverSound>\n                )}\n              {this.props.title && <div className=\"dialog__box__contents__title\">{this.props.title}</div>}\n              <div className=\"dialog__box__contents__body\">{this.props.children}</div>\n              <div className=\"dialog__box__contents__button-container\" />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","module.exports = __webpack_public_path__ + \"assets/images/warning_icon-739d2a2ea906737505bcbc2cb51123a8.png\";","module.exports = __webpack_public_path__ + \"assets/images/warning_icon@2x-706e4a4db33f9456bac320e956b4120d.png\";","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport \"three/examples/js/controls/OrbitControls\";\n\nimport { createDefaultEnvironmentMap } from \"../components/environment-map\";\nimport { loadGLTF } from \"../components/gltf-model-plus\";\nimport { disposeNode } from \"../utils/three-utils\";\nimport { createImageBitmap, disposeImageBitmap } from \"../utils/image-bitmap-utils\";\nimport styles from \"../assets/stylesheets/avatar-preview.scss\";\n\nconst TEXTURE_PROPS = {\n  base_map: [\"map\"],\n  emissive_map: [\"emissiveMap\"],\n  normal_map: [\"normalMap\"],\n  orm_map: [\"aoMap\", \"roughnessMap\", \"metalnessMap\"]\n};\n\nconst ALL_MAPS = Object.keys(TEXTURE_PROPS);\n\n// This should match our aframe renderer=\"antialias: true; colorManagement: true; sortObjects: true;\n// physicallyCorrectLights: true; webgl2: true; multiview: false;\"\nfunction createRenderer(canvas, alpha = false, useDevicePixelRatio = true) {\n  const context = canvas.getContext(\"webgl2\", {\n    alpha,\n    depth: true,\n    antialias: true,\n    premultipliedAlpha: true,\n    preserveDrawingBuffer: false,\n    powerPreference: \"default\"\n  });\n\n  const renderer = new THREE.WebGLRenderer({ alpha, canvas, context });\n  renderer.gammaOutput = true;\n  renderer.gammaFactor = 2.2;\n  renderer.physicallyCorrectLights = true;\n  if (useDevicePixelRatio) {\n    renderer.setPixelRatio(window.devicePixelRatio);\n  }\n  return renderer;\n}\n\nconst createImageBitmapFromURL = url =>\n  fetch(url)\n    .then(r => r.blob())\n    .then(createImageBitmap);\n\nconst ORBIT_ANGLE = new THREE.Euler(-30 * THREE.Math.DEG2RAD, 30 * THREE.Math.DEG2RAD, 0);\nconst DEFAULT_MARGIN = 1;\n\nfunction fitBoxInFrustum(camera, box, center, margin = DEFAULT_MARGIN) {\n  const halfYExtents = Math.max(box.max.y - center.y, center.y - box.min.y);\n  const halfVertFOV = THREE.Math.degToRad(camera.fov / 2);\n  camera.position.set(0, 0, (halfYExtents / Math.tan(halfVertFOV) + box.max.z) * margin);\n  camera.position.applyEuler(ORBIT_ANGLE);\n  camera.position.add(center);\n  camera.lookAt(center);\n}\n\nclass AvatarPreview extends Component {\n  static propTypes = {\n    avatarGltfUrl: PropTypes.string,\n    className: PropTypes.string\n  };\n  constructor(props) {\n    super(props);\n    this.state = { loading: true, error: null };\n    this.avatar = null;\n    this.imageBitmaps = {};\n  }\n\n  componentDidMount = () => {\n    this.scene = new THREE.Scene();\n\n    this.camera = new THREE.PerspectiveCamera(55, this.canvas.clientWidth / this.canvas.clientHeight, 0.1, 1000);\n    this.controls = new THREE.OrbitControls(this.camera, this.canvas);\n    this.controls.enablePan = false;\n\n    const light = new THREE.DirectionalLight(0xf7f6ef, 1);\n    light.position.set(0, 10, 10);\n    this.scene.add(light);\n    this.scene.add(new THREE.HemisphereLight(0xb1e3ff, 0xb1e3ff, 2.5));\n\n    this.camera.position.set(-0.2, 0.5, 0.5);\n    this.camera.matrixAutoUpdate = true;\n\n    this.controls.target.set(0, 0.45, 0);\n    this.controls.update();\n\n    if (this.props.avatarGltfUrl) {\n      this.loadPreviewAvatar(this.props.avatarGltfUrl).then(this.setAvatar);\n    }\n\n    const clock = new THREE.Clock();\n\n    this.snapshotCanvas = document.createElement(\"canvas\");\n    this.snapshotCanvas.width = 720;\n    this.snapshotCanvas.height = 1280;\n    this.snapshotCamera = new THREE.PerspectiveCamera(55, 720 / 1280, 0.1, 1000);\n    this.snapshotCamera.matrixAutoUpdate = true;\n    this.snapshotRenderer = createRenderer(this.snapshotCanvas, true, false);\n    this.snapshotRenderer.setClearAlpha(0);\n\n    this.previewRenderer = createRenderer(this.canvas);\n    this.previewRenderer.setClearColor(0xeaeaea);\n    this.previewRenderer.setAnimationLoop(() => {\n      const dt = clock.getDelta();\n      this.mixer && this.mixer.update(dt);\n      this.previewRenderer.render(this.scene, this.camera);\n    });\n    window.addEventListener(\"resize\", this.resize);\n    this.resize();\n  };\n\n  resize = () => {\n    const width = this.canvas.parentElement.offsetWidth;\n    const height = this.canvas.parentElement.offsetHeight;\n    this.previewRenderer.setSize(width, height);\n    this.camera.aspect = width / height;\n    this.camera.updateProjectionMatrix();\n  };\n\n  setAvatar = avatar => {\n    if (!avatar) return;\n    this.avatar = avatar;\n    this.scene.add(avatar);\n    this.resetCamera();\n    this.setState({ error: null, loading: false });\n  };\n\n  resetCamera = (() => {\n    const box = new THREE.Box3();\n    const center = new THREE.Vector3();\n    return () => {\n      box.setFromObject(this.avatar);\n      box.getCenter(center);\n\n      // Shift the center vertically in order to frame the avatar nicely.\n      center.y = (box.max.y - box.min.y) * 0.6 + box.min.y;\n\n      fitBoxInFrustum(this.camera, box, center);\n      fitBoxInFrustum(this.snapshotCamera, box, center, 0.7);\n\n      this.controls.target.copy(center);\n      this.controls.update();\n    };\n  })();\n\n  componentWillUnmount = () => {\n    // Gotta be particularly careful about disposing things here since we will likely create many avatar\n    // previews during a session and Chrome will eventually discard the oldest webgl context if we leak\n    // contexts by holding on to them directly or indirectly.\n\n    this.scene && this.scene.traverse(disposeNode);\n    if (this.previewRenderer) {\n      this.previewRenderer.dispose();\n      this.previewRenderer.context = null;\n    }\n    if (this.snapshotRenderer) {\n      this.snapshotRenderer.dispose();\n      this.snapshotRenderer.context = null;\n    }\n    if (this.controls) {\n      this.controls.dispose();\n      this.controls.domElement = null;\n    }\n\n    Object.values(this.imageBitmaps).forEach(img => disposeImageBitmap(img));\n    window.removeEventListener(\"resize\", this.resize);\n  };\n\n  componentDidUpdate = async oldProps => {\n    if (oldProps.avatarGltfUrl !== this.props.avatarGltfUrl) {\n      if (this.avatar) {\n        this.scene.remove(this.avatar);\n        this.avatar = null;\n      }\n      if (this.props.avatarGltfUrl) {\n        this.setState({ error: null, loading: true });\n        await this.loadPreviewAvatar(this.props.avatarGltfUrl).then(this.setAvatar);\n      }\n    }\n    this.applyMaps(oldProps, this.props);\n  };\n\n  applyMaps(oldProps, newProps) {\n    return Promise.all(\n      ALL_MAPS.map(mapName => {\n        const applyMap = this.applyMapToPreview.bind(this, mapName);\n        if (oldProps[mapName] != newProps[mapName]) {\n          if (newProps[mapName] instanceof File) {\n            return createImageBitmap(newProps[mapName]).then(applyMap);\n          } else if (newProps[mapName]) {\n            return createImageBitmapFromURL(newProps[mapName]).then(applyMap);\n          } else {\n            return this.revertMap(mapName);\n          }\n        }\n      })\n    );\n  }\n\n  loadPreviewAvatar = async avatarGltfUrl => {\n    let gltf;\n    try {\n      gltf = await loadGLTF(avatarGltfUrl, \"model/gltf\");\n    } catch (e) {\n      this.setState({ loading: false, error: true });\n      return;\n    }\n\n    // On the backend we look for a material called Bot_PBS, here we are looking for a mesh called Avatar.\n    // When we \"officially\" support uploading custom GLTFs we need to decide what we are going to key things on\n    this.previewMesh =\n      gltf.scene.getObjectByName(\"AvatarMesh\") ||\n      gltf.scene.getObjectByName(\"Avatar\") ||\n      gltf.scene.getObjectByName(\"Bot_Skinned\") ||\n      gltf.scene;\n\n    const idleAnimation = gltf.animations && gltf.animations.find(({ name }) => name === \"idle_eyes\");\n    if (idleAnimation) {\n      this.mixer = new THREE.AnimationMixer(this.previewMesh);\n      const action = this.mixer.clipAction(idleAnimation);\n      action.enabled = true;\n      action.setLoop(THREE.LoopRepeat, Infinity).play();\n      this.idleAnimationAction = action;\n    }\n\n    const { material } = this.previewMesh;\n    if (material) {\n      // We delete onUpdate here to opt out of the auto texture cleanup after GPU upload.\n      const getImage = p => delete material[p].onUpdate && material[p].image;\n      this.originalMaps = {\n        base_map: TEXTURE_PROPS[\"base_map\"].map(getImage),\n        emissive_map: TEXTURE_PROPS[\"emissive_map\"].map(getImage),\n        normal_map: TEXTURE_PROPS[\"normal_map\"].map(getImage),\n        orm_map: TEXTURE_PROPS[\"orm_map\"].map(getImage)\n      };\n\n      await Promise.all([\n        this.applyMaps({}, this.props), // Apply initial maps\n        createDefaultEnvironmentMap().then(t => {\n          this.previewMesh.material.envMap = t;\n          this.previewMesh.material.needsUpdate = true;\n        })\n      ]);\n    } else {\n      this.originalMaps = {};\n    }\n\n    return gltf.scene;\n  };\n\n  applyMapToPreview = (name, image) => {\n    if (this.imageBitmaps[name]) {\n      disposeImageBitmap(this.imageBitmaps[name]);\n    }\n    this.imageBitmaps[name] = image;\n    TEXTURE_PROPS[name].forEach(prop => {\n      const texture = this.previewMesh.material[prop];\n      texture.image = image;\n      texture.needsUpdate = true;\n    });\n  };\n\n  revertMap = name => {\n    if (this.imageBitmaps[name]) {\n      disposeImageBitmap(this.imageBitmaps[name]);\n    }\n    delete this.imageBitmaps[name];\n    this.originalMaps[name].forEach((bm, i) => {\n      const texture = this.previewMesh.material[TEXTURE_PROPS[name][i]];\n      texture.image = bm;\n      texture.needsUpdate = true;\n    });\n  };\n\n  snapshot = () => {\n    return new Promise(resolve => {\n      if (this.idleAnimationAction) this.idleAnimationAction.stop();\n      this.snapshotRenderer.render(this.scene, this.snapshotCamera);\n      this.snapshotCanvas.toBlob(blob => {\n        if (this.idleAnimationAction) this.idleAnimationAction.play();\n        resolve(blob);\n      });\n    });\n  };\n\n  render() {\n    return (\n      <div className={classNames(styles.preview, this.props.className)}>\n        {this.state.loading &&\n          !this.state.error && (\n            <div className=\"loader\">\n              <div className=\"loader-center\" />\n            </div>\n          )}\n        {this.state.error &&\n          !this.state.loading && (\n            <div className=\"error\">\n              <img\n                src=\"../assets/images/warning_icon.png\"\n                srcSet=\"../assets/images/warning_icon@2x.png 2x\"\n                className=\"error-icon\"\n              />\n              <FormattedMessage id=\"avatar-preview.loading-failed\" />\n            </div>\n          )}\n        <canvas ref={c => (this.canvas = c)} />\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(AvatarPreview, { withRef: true });\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport styles from \"../assets/stylesheets/sign-in-dialog.scss\";\nimport DialogContainer from \"./dialog-container\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\n\nexport default class SignInDialog extends Component {\n  static propTypes = {\n    authStarted: PropTypes.bool,\n    authComplete: PropTypes.bool,\n    onSignIn: PropTypes.func,\n    onContinue: PropTypes.func,\n    message: PropTypes.string,\n    continueText: PropTypes.string\n  };\n\n  state = {\n    email: \"\"\n  };\n\n  onSubmit = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onSignIn(this.state.email);\n  };\n\n  render() {\n    let contents;\n    if (this.props.authStarted) {\n      contents = (\n        <p>\n          <FormattedMessage className=\"preformatted\" id=\"sign-in.auth-started\" />\n        </p>\n      );\n    } else if (this.props.authComplete) {\n      contents = (\n        <div className={styles.signInComplete}>\n          <p>{this.props.message}</p>\n          <button onClick={this.props.onContinue} className={styles.continueButton}>\n            {this.props.continueText}\n          </button>\n        </div>\n      );\n    } else {\n      contents = (\n        <form onSubmit={this.onSubmit} className={styles.signInForm}>\n          <span>{this.props.message}</span>\n          <input\n            name=\"email\"\n            type=\"email\"\n            required\n            placeholder=\"Your email address\"\n            value={this.state.email}\n            onFocus={e => handleTextFieldFocus(e.target)}\n            onBlur={() => handleTextFieldBlur()}\n            onChange={e => this.setState({ email: e.target.value })}\n            className={styles.emailField}\n          />\n          <p className={styles.terms}>\n            By proceeding, you agree to the{\" \"}\n            <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/mozilla/hubs/blob/master/TERMS.md\">\n              terms of use\n            </a>{\" \"}\n            and{\" \"}\n            <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\">\n              privacy notice\n            </a>.\n          </p>\n          <button type=\"submit\" className={styles.nextButton}>\n            next\n          </button>\n        </form>\n      );\n    }\n\n    return (\n      <DialogContainer title=\"Sign In\" {...this.props}>\n        {contents}\n      </DialogContainer>\n    );\n  }\n}\n","// removed by extract-text-webpack-plugin\nmodule.exports = {\"media-browser\":\"media-browser__media-browser__y0Hsu\",\"mediaBrowser\":\"media-browser__media-browser__y0Hsu\",\"facets\":\"media-browser__facets__1Yz65\",\"facet\":\"media-browser__facet__2uP6U\",\"body\":\"media-browser__body__j6Tv2\",\"pager\":\"media-browser__pager__RKx5O\",\"header-center\":\"media-browser__header-center__2D9CW\",\"headerCenter\":\"media-browser__header-center__2D9CW\",\"search\":\"media-browser__search__3gQ84\",\"engine-attribution\":\"media-browser__engine-attribution__2P2aD\",\"engineAttribution\":\"media-browser__engine-attribution__2P2aD\",\"engine-attribution-contents\":\"media-browser__engine-attribution-contents__gCdfr\",\"engineAttributionContents\":\"media-browser__engine-attribution-contents__gCdfr\",\"favorites-header\":\"media-browser__favorites-header__1XzZx\",\"favoritesHeader\":\"media-browser__favorites-header__1XzZx\",\"box\":\"media-browser__box__1KHYi\",\"header\":\"media-browser__header__zqZ09\",\"no-search\":\"media-browser__no-search__3N90H\",\"noSearch\":\"media-browser__no-search__3N90H\",\"nav\":\"media-browser__nav__9J5If\",\"nav-right-pad\":\"media-browser__nav-right-pad__1qH0B\",\"navRightPad\":\"media-browser__nav-right-pad__1qH0B\",\"nav-source\":\"media-browser__nav-source__o6NI6\",\"navSource\":\"media-browser__nav-source__o6NI6\",\"nav-source-selected\":\"media-browser__nav-source-selected__2osjH\",\"navSourceSelected\":\"media-browser__nav-source-selected__2osjH\",\"nav-scroll-arrow\":\"media-browser__nav-scroll-arrow__2Nikk\",\"navScrollArrow\":\"media-browser__nav-scroll-arrow__2Nikk\",\"tiles\":\"media-browser__tiles__1BYEY\",\"tile\":\"media-browser__tile__2lzHU\",\"info\":\"media-browser__info__2c8Zs\",\"name\":\"media-browser__name__RFiE4\",\"attribution\":\"media-browser__attribution__3glgj\",\"creator\":\"media-browser__creator__3LDPh\",\"publisher\":\"media-browser__publisher__mTzsX\",\"last-joined\":\"media-browser__last-joined__2DVWf\",\"lastJoined\":\"media-browser__last-joined__2DVWf\",\"tile-link\":\"media-browser__tile-link__IXyUO\",\"tileLink\":\"media-browser__tile-link__IXyUO\",\"tile-content\":\"media-browser__tile-content__1QYSP\",\"tileContent\":\"media-browser__tile-content__1QYSP\",\"avatar-tile\":\"media-browser__avatar-tile__qNo2r\",\"avatarTile\":\"media-browser__avatar-tile__qNo2r\",\"edit-avatar\":\"media-browser__edit-avatar__2HBfV\",\"editAvatar\":\"media-browser__edit-avatar__2HBfV\",\"create-tile\":\"media-browser__create-tile__RL9vr\",\"createTile\":\"media-browser__create-tile__RL9vr\",\"tiles-variable\":\"media-browser__tiles-variable__1ZNxg\",\"tilesVariable\":\"media-browser__tiles-variable__1ZNxg\",\"page-number\":\"media-browser__page-number__OTpSH\",\"pageNumber\":\"media-browser__page-number__OTpSH\",\"pager-button-disabled\":\"media-browser__pager-button-disabled__ytlSN\",\"pagerButtonDisabled\":\"media-browser__pager-button-disabled__ytlSN\",\"header-left\":\"media-browser__header-left__1ObQh\",\"headerLeft\":\"media-browser__header-left__1ObQh\",\"header-right\":\"media-browser__header-right__3k3JZ\",\"headerRight\":\"media-browser__header-right__3k3JZ\",\"create-button\":\"media-browser__create-button__30hMV\",\"createButton\":\"media-browser__create-button__30hMV\",\"create-link\":\"media-browser__create-link__28Bpj\",\"createLink\":\"media-browser__create-link__28Bpj\",\"empty-string\":\"media-browser__empty-string__3r0tc\",\"emptyString\":\"media-browser__empty-string__3r0tc\",\"media-browser-inline\":\"media-browser__media-browser-inline__3AgWD\",\"mediaBrowserInline\":\"media-browser__media-browser-inline__3AgWD\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"email-field\":\"sign-in-dialog__email-field__g3xRW\",\"emailField\":\"sign-in-dialog__email-field__g3xRW\",\"next-button\":\"sign-in-dialog__next-button__2pGtq\",\"nextButton\":\"sign-in-dialog__next-button__2pGtq\",\"continue-button\":\"sign-in-dialog__continue-button__kFN6Z\",\"continueButton\":\"sign-in-dialog__continue-button__kFN6Z\",\"sign-in-form\":\"sign-in-dialog__sign-in-form__3Muog\",\"signInForm\":\"sign-in-dialog__sign-in-form__3Muog\",\"sign-in-complete\":\"sign-in-dialog__sign-in-complete__3JMkv\",\"signInComplete\":\"sign-in-dialog__sign-in-complete__3JMkv\",\"terms\":\"sign-in-dialog__terms__3TT6i\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"ui\":\"hub__ui__3UYRO\",\"ui-dialog\":\"hub__ui-dialog__vlyfc\",\"uiDialog\":\"hub__ui-dialog__vlyfc\",\"ui-interactive\":\"hub__ui-interactive__3bdyc\",\"uiInteractive\":\"hub__ui-interactive__3bdyc\",\"presence-info\":\"hub__presence-info__dqWyo\",\"presenceInfo\":\"hub__presence-info__dqWyo\",\"corner-button\":\"hub__corner-button__2KphD\",\"cornerButton\":\"hub__corner-button__2KphD\",\"profile-entry\":\"hub__profile-entry__1RY0R\",\"profileEntry\":\"hub__profile-entry__1RY0R\",\"form-submit\":\"hub__form-submit__12yem\",\"formSubmit\":\"hub__form-submit__12yem\",\"nag-corner-button\":\"hub__nag-corner-button__lNoyE\",\"nagCornerButton\":\"hub__nag-corner-button__lNoyE\",\"choose-scene-button\":\"hub__choose-scene-button__5Y0Q_\",\"chooseSceneButton\":\"hub__choose-scene-button__5Y0Q_\",\"choose-avatar\":\"hub__choose-avatar__22JJm\",\"chooseAvatar\":\"hub__choose-avatar__22JJm\",\"entry-button-secondary\":\"hub__entry-button-secondary__2ui-g\",\"entryButtonSecondary\":\"hub__entry-button-secondary__2ui-g\",\"entry-panel\":\"hub__entry-panel__cCmIv\",\"entryPanel\":\"hub__entry-panel__cCmIv\",\"button-container\":\"hub__button-container__38FOc\",\"buttonContainer\":\"hub__button-container__38FOc\",\"secondary-action-button\":\"hub__secondary-action-button__2KoCD\",\"secondaryActionButton\":\"hub__secondary-action-button__2KoCD\",\"leave-button\":\"hub__leave-button__1YK4o\",\"leaveButton\":\"hub__leave-button__1YK4o\",\"interstitial\":\"hub__interstitial__3WXbJ\",\"entry-button\":\"hub__entry-button__1e9jM\",\"entryButton\":\"hub__entry-button__1e9jM\",\"action-button\":\"hub__action-button__3zqlu\",\"actionButton\":\"hub__action-button__3zqlu\",\"collapse-button\":\"hub__collapse-button__3N-6b\",\"collapseButton\":\"hub__collapse-button__3N-6b\",\"favorite-button\":\"hub__favorite-button__1Qgbp\",\"favoriteButton\":\"hub__favorite-button__1Qgbp\",\"back\":\"hub__back__3AZh2\",\"form-field-text\":\"hub__form-field-text__tR1Lt\",\"formFieldText\":\"hub__form-field-text__tR1Lt\",\"lobby-label\":\"hub__lobby-label__2ktmo\",\"lobbyLabel\":\"hub__lobby-label__2ktmo\",\"label\":\"hub__label__1kjp1\",\"title\":\"hub__title__ezGEu\",\"name\":\"hub__name__2umw1\",\"rename-button\":\"hub__rename-button__h-4K7\",\"renameButton\":\"hub__rename-button__h-4K7\",\"center\":\"hub__center__1Mvfu\",\"wide-button\":\"hub__wide-button__1yqDc\",\"wideButton\":\"hub__wide-button__1yqDc\",\"screen-sharing\":\"hub__screen-sharing__2VF91\",\"screenSharing\":\"hub__screen-sharing__2VF91\",\"checkbox\":\"hub__checkbox__32dyv\",\"invite-tip\":\"hub__invite-tip__9enoe\",\"inviteTip\":\"hub__invite-tip__9enoe\",\"loading-text\":\"hub__loading-text__1WDud\",\"loadingText\":\"hub__loading-text__1WDud\",\"streaming-tip\":\"hub__streaming-tip__1LnId\",\"streamingTip\":\"hub__streaming-tip__1LnId\",\"streaming-tip-attach-point\":\"hub__streaming-tip-attach-point__1oCgh\",\"streamingTipAttachPoint\":\"hub__streaming-tip-attach-point__1oCgh\",\"streaming-tip-close\":\"hub__streaming-tip-close__E6fwS\",\"streamingTipClose\":\"hub__streaming-tip-close__E6fwS\",\"streaming-tip-message\":\"hub__streaming-tip-message__XcScW\",\"streamingTipMessage\":\"hub__streaming-tip-message__XcScW\",\"ui-dialog-box-contents\":\"hub__ui-dialog-box-contents__PZ5qP\",\"uiDialogBoxContents\":\"hub__ui-dialog-box-contents__PZ5qP\",\"backgrounded\":\"hub__backgrounded__30IfD\",\"in-room-favorite-button\":\"hub__in-room-favorite-button__2T-zs\",\"inRoomFavoriteButton\":\"hub__in-room-favorite-button__2T-zs\",\"occupant-count\":\"hub__occupant-count__3eAEj\",\"occupantCount\":\"hub__occupant-count__3eAEj\",\"presence-info-selected\":\"hub__presence-info-selected__FRBSA\",\"presenceInfoSelected\":\"hub__presence-info-selected__FRBSA\",\"camera-mode-exit-button\":\"hub__camera-mode-exit-button__BqKKt\",\"cameraModeExitButton\":\"hub__camera-mode-exit-button__BqKKt\",\"corner-button-selected\":\"hub__corner-button-selected__Cqa93\",\"cornerButtonSelected\":\"hub__corner-button-selected__Cqa93\",\"invite-tip-attach-point\":\"hub__invite-tip-attach-point__2y_bz\",\"inviteTipAttachPoint\":\"hub__invite-tip-attach-point__2y_bz\",\"avatar-editor\":\"hub__avatar-editor__2b8-H\",\"avatarEditor\":\"hub__avatar-editor__2b8-H\",\"logo\":\"hub__logo__3kJSj\",\"form\":\"hub__form__3kQXh\",\"box\":\"hub__box__2SMbn\",\"links\":\"hub__links__1C6Ce\",\"darkened\":\"hub__darkened__1gqMQ\",\"display-name\":\"hub__display-name__36hFZ\",\"displayName\":\"hub__display-name__36hFZ\",\"preview\":\"hub__preview__2UUoU\",\"edit-avatar\":\"hub__edit-avatar__22A53\",\"editAvatar\":\"hub__edit-avatar__22A53\",\"close\":\"hub__close__gWtCN\",\"entry-dialog\":\"hub__entry-dialog__2Ljux\",\"entryDialog\":\"hub__entry-dialog__2Ljux\",\"favorited\":\"hub__favorited__3c3lB\",\"icon\":\"hub__icon__1pzf7\",\"bolded\":\"hub__bolded__2MYLZ\",\"subtitle\":\"hub__subtitle__3kYcd\",\"room-subtitle\":\"hub__room-subtitle__GhUCG\",\"roomSubtitle\":\"hub__room-subtitle__GhUCG\",\"lobby\":\"hub__lobby__2VW6G\",\"profile-icon\":\"hub__profile-icon__fwSfD\",\"profileIcon\":\"hub__profile-icon__fwSfD\",\"button-subtitle\":\"hub__button-subtitle__3kkpo\",\"buttonSubtitle\":\"hub__button-subtitle__3kkpo\",\"audio-loader\":\"hub__audio-loader__F5ovU\",\"audioLoader\":\"hub__audio-loader__F5ovU\",\"webvr-link-container\":\"hub__webvr-link-container__1Vq5m\",\"webvrLinkContainer\":\"hub__webvr-link-container__1Vq5m\",\"webvr-link\":\"hub__webvr-link__xW04U\",\"webvrLink\":\"hub__webvr-link__xW04U\",\"secondary\":\"hub__secondary__22yt_\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"touchZone\":\"virtual-gamepad-controls__touchZone__1KF_C\",\"left\":\"virtual-gamepad-controls__left__1-URB\",\"right\":\"virtual-gamepad-controls__right__1cgnU\",\"mockJoystickContainer\":\"virtual-gamepad-controls__mockJoystickContainer__1aH3e\",\"mockJoystick\":\"virtual-gamepad-controls__mockJoystick__2CuCG\",\"inner\":\"virtual-gamepad-controls__inner__1Bn3C\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"ui\":\"ui-root__ui__33CMU\",\"ui-dialog\":\"ui-root__ui-dialog__2TY9Y\",\"uiDialog\":\"ui-root__ui-dialog__2TY9Y\",\"ui-interactive\":\"ui-root__ui-interactive__2mtC4\",\"uiInteractive\":\"ui-root__ui-interactive__2mtC4\",\"presence-info\":\"ui-root__presence-info__3cieq\",\"presenceInfo\":\"ui-root__presence-info__3cieq\",\"corner-button\":\"ui-root__corner-button__2rfQ5\",\"cornerButton\":\"ui-root__corner-button__2rfQ5\",\"nag-corner-button\":\"ui-root__nag-corner-button__3TFW5\",\"nagCornerButton\":\"ui-root__nag-corner-button__3TFW5\",\"choose-scene-button\":\"ui-root__choose-scene-button__3VNdD\",\"chooseSceneButton\":\"ui-root__choose-scene-button__3VNdD\",\"leave-button\":\"ui-root__leave-button__29u2_\",\"leaveButton\":\"ui-root__leave-button__29u2_\",\"interstitial\":\"ui-root__interstitial__1cotl\",\"invite-tip\":\"ui-root__invite-tip__20NJ6\",\"inviteTip\":\"ui-root__invite-tip__20NJ6\",\"streaming-tip\":\"ui-root__streaming-tip__17WYl\",\"streamingTip\":\"ui-root__streaming-tip__17WYl\",\"streaming-tip-attach-point\":\"ui-root__streaming-tip-attach-point__3XSH-\",\"streamingTipAttachPoint\":\"ui-root__streaming-tip-attach-point__3XSH-\",\"streaming-tip-close\":\"ui-root__streaming-tip-close__1OHPc\",\"streamingTipClose\":\"ui-root__streaming-tip-close__1OHPc\",\"streaming-tip-message\":\"ui-root__streaming-tip-message__2XOUD\",\"streamingTipMessage\":\"ui-root__streaming-tip-message__2XOUD\",\"ui-dialog-box-contents\":\"ui-root__ui-dialog-box-contents__3XWtl\",\"uiDialogBoxContents\":\"ui-root__ui-dialog-box-contents__3XWtl\",\"backgrounded\":\"ui-root__backgrounded__34j0m\",\"in-room-favorite-button\":\"ui-root__in-room-favorite-button__2I0Kj\",\"inRoomFavoriteButton\":\"ui-root__in-room-favorite-button__2I0Kj\",\"occupant-count\":\"ui-root__occupant-count__34rGX\",\"occupantCount\":\"ui-root__occupant-count__34rGX\",\"presence-info-selected\":\"ui-root__presence-info-selected__1Jhbw\",\"presenceInfoSelected\":\"ui-root__presence-info-selected__1Jhbw\",\"camera-mode-exit-button\":\"ui-root__camera-mode-exit-button__2mpbz\",\"cameraModeExitButton\":\"ui-root__camera-mode-exit-button__2mpbz\",\"corner-button-selected\":\"ui-root__corner-button-selected__qRY5R\",\"cornerButtonSelected\":\"ui-root__corner-button-selected__qRY5R\",\"invite-tip-attach-point\":\"ui-root__invite-tip-attach-point__3rQJ6\",\"inviteTipAttachPoint\":\"ui-root__invite-tip-attach-point__3rQJ6\",\"avatar-editor\":\"ui-root__avatar-editor__2mO8z\",\"avatarEditor\":\"ui-root__avatar-editor__2mO8z\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"entry-button-secondary\":\"entry__entry-button-secondary__1Fr_E\",\"entryButtonSecondary\":\"entry__entry-button-secondary__1Fr_E\",\"entry-panel\":\"entry__entry-panel__34CD9\",\"entryPanel\":\"entry__entry-panel__34CD9\",\"button-container\":\"entry__button-container__3Blog\",\"buttonContainer\":\"entry__button-container__3Blog\",\"secondary-action-button\":\"entry__secondary-action-button__3FCMj\",\"secondaryActionButton\":\"entry__secondary-action-button__3FCMj\",\"entry-button\":\"entry__entry-button__G7PQF\",\"entryButton\":\"entry__entry-button__G7PQF\",\"action-button\":\"entry__action-button__3Vnab\",\"actionButton\":\"entry__action-button__3Vnab\",\"collapse-button\":\"entry__collapse-button__3_PLp\",\"collapseButton\":\"entry__collapse-button__3_PLp\",\"favorite-button\":\"entry__favorite-button__2CVuk\",\"favoriteButton\":\"entry__favorite-button__2CVuk\",\"back\":\"entry__back__J4Sgl\",\"lobby-label\":\"entry__lobby-label__2Nj9w\",\"lobbyLabel\":\"entry__lobby-label__2Nj9w\",\"label\":\"entry__label__fUhpb\",\"title\":\"entry__title__1GITj\",\"name\":\"entry__name__sYOeV\",\"rename-button\":\"entry__rename-button__KFW9R\",\"renameButton\":\"entry__rename-button__KFW9R\",\"center\":\"entry__center__1105W\",\"wide-button\":\"entry__wide-button__2tfMM\",\"wideButton\":\"entry__wide-button__2tfMM\",\"screen-sharing\":\"entry__screen-sharing__NBXQu\",\"screenSharing\":\"entry__screen-sharing__NBXQu\",\"checkbox\":\"entry__checkbox__3SoPk\",\"entry-dialog\":\"entry__entry-dialog__30kMs\",\"entryDialog\":\"entry__entry-dialog__30kMs\",\"favorited\":\"entry__favorited__2IHpj\",\"icon\":\"entry__icon__3JiUl\",\"bolded\":\"entry__bolded__13B4f\",\"subtitle\":\"entry__subtitle__1BC2y\",\"room-subtitle\":\"entry__room-subtitle__7MSMo\",\"roomSubtitle\":\"entry__room-subtitle__7MSMo\",\"lobby\":\"entry__lobby__3AxfL\",\"profile-icon\":\"entry__profile-icon__3BAWG\",\"profileIcon\":\"entry__profile-icon__3BAWG\",\"button-subtitle\":\"entry__button-subtitle__3zrEo\",\"buttonSubtitle\":\"entry__button-subtitle__3zrEo\",\"audio-loader\":\"entry__audio-loader__1YCJd\",\"audioLoader\":\"entry__audio-loader__1YCJd\",\"webvr-link-container\":\"entry__webvr-link-container__3scWP\",\"webvrLinkContainer\":\"entry__webvr-link-container__3scWP\",\"webvr-link\":\"entry__webvr-link__3eWuZ\",\"webvrLink\":\"entry__webvr-link__3eWuZ\",\"secondary\":\"entry__secondary__3uhYE\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"invite-container\":\"invite-dialog__invite-container__1c0Jw\",\"inviteContainer\":\"invite-dialog__invite-container__1c0Jw\",\"dialog\":\"invite-dialog__dialog__1XbxO\",\"link-button\":\"invite-dialog__link-button__S_o-t\",\"linkButton\":\"invite-dialog__link-button__S_o-t\",\"enter-vr-button\":\"invite-dialog__enter-vr-button__3y1BF\",\"enterVrButton\":\"invite-dialog__enter-vr-button__3y1BF\",\"invite-button\":\"invite-dialog__invite-button__3cjFw\",\"inviteButton\":\"invite-dialog__invite-button__3cjFw\",\"enter-button\":\"invite-dialog__enter-button__2Z5EY\",\"enterButton\":\"invite-dialog__enter-button__2Z5EY\",\"invite-mini-button\":\"invite-dialog__invite-mini-button__2zWJj\",\"inviteMiniButton\":\"invite-dialog__invite-mini-button__2zWJj\",\"domain\":\"invite-dialog__domain__2Q8Wr\",\"embed-text\":\"invite-dialog__embed-text__3-Boo\",\"embedText\":\"invite-dialog__embed-text__3-Boo\",\"invite-container-inverted\":\"invite-dialog__invite-container-inverted__1E3hR\",\"inviteContainerInverted\":\"invite-dialog__invite-container-inverted__1E3hR\",\"subscribe\":\"invite-dialog__subscribe__qlJL4\",\"embed-tip-wrap\":\"invite-dialog__embed-tip-wrap__2CQRc\",\"embedTipWrap\":\"invite-dialog__embed-tip-wrap__2CQRc\",\"embed-tip\":\"invite-dialog__embed-tip__12p0o\",\"embedTip\":\"invite-dialog__embed-tip__12p0o\",\"modal\":\"invite-dialog__modal__1hbVP\",\"hide-small-screens\":\"invite-dialog__hide-small-screens__3UCeH\",\"hideSmallScreens\":\"invite-dialog__hide-small-screens__3UCeH\",\"invite-container-below-hud\":\"invite-dialog__invite-container-below-hud__30RHX\",\"inviteContainerBelowHud\":\"invite-dialog__invite-container-below-hud__30RHX\",\"attach-point\":\"invite-dialog__attach-point__otyII\",\"attachPoint\":\"invite-dialog__attach-point__otyII\",\"code\":\"invite-dialog__code__13AIx\",\"keep-open\":\"invite-dialog__keep-open__229sO\",\"keepOpen\":\"invite-dialog__keep-open__229sO\",\"digit\":\"invite-dialog__digit__2w64P\",\"digit_2\":\"invite-dialog__digit_2__pQCJ3\",\"digit2\":\"invite-dialog__digit_2__pQCJ3\",\"digit_3\":\"invite-dialog__digit_3__1bWtt\",\"digit3\":\"invite-dialog__digit_3__1bWtt\",\"code-loading-panel\":\"invite-dialog__code-loading-panel__1gghm\",\"codeLoadingPanel\":\"invite-dialog__code-loading-panel__1gghm\",\"hub-link-link\":\"invite-dialog__hub-link-link__2guVF\",\"hubLinkLink\":\"invite-dialog__hub-link-link__2guVF\",\"buttons\":\"invite-dialog__buttons__1yN_j\",\"embed\":\"invite-dialog__embed__2zy_A\",\"close\":\"invite-dialog__close__3PAxl\",\"embed-tip-attach-point\":\"invite-dialog__embed-tip-attach-point__2UAZp\",\"embedTipAttachPoint\":\"invite-dialog__embed-tip-attach-point__2UAZp\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"client-action-buttons\":\"client-info-dialog__client-action-buttons__3u-6v\",\"clientActionButtons\":\"client-info-dialog__client-action-buttons__3u-6v\",\"cancel\":\"client-info-dialog__cancel__2BguV\",\"client-info-dialog\":\"client-info-dialog__client-info-dialog__2e1dc\",\"clientInfoDialog\":\"client-info-dialog__client-info-dialog__2e1dc\",\"title\":\"client-info-dialog__title__3FGPe\",\"community-identifier\":\"client-info-dialog__community-identifier__g3lbP\",\"communityIdentifier\":\"client-info-dialog__community-identifier__g3lbP\",\"client-info\":\"client-info-dialog__client-info__1MUSa\",\"clientInfo\":\"client-info-dialog__client-info__1MUSa\",\"client-profile-image\":\"client-info-dialog__client-profile-image__zt1EA\",\"clientProfileImage\":\"client-info-dialog__client-profile-image__zt1EA\",\"client-details\":\"client-info-dialog__client-details__1F5zy\",\"clientDetails\":\"client-info-dialog__client-details__1F5zy\",\"client-main\":\"client-info-dialog__client-main__2BC1s\",\"clientMain\":\"client-info-dialog__client-main__2BC1s\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"loading-text\":\"loader__loading-text__QVcF3\",\"loadingText\":\"loader__loading-text__QVcF3\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"profile-entry\":\"profile__profile-entry__1pJKZ\",\"profileEntry\":\"profile__profile-entry__1pJKZ\",\"form-submit\":\"profile__form-submit__2y7xb\",\"formSubmit\":\"profile__form-submit__2y7xb\",\"choose-avatar\":\"profile__choose-avatar__2EV0F\",\"chooseAvatar\":\"profile__choose-avatar__2EV0F\",\"form-field-text\":\"profile__form-field-text__1bzeV\",\"formFieldText\":\"profile__form-field-text__1bzeV\",\"title\":\"profile__title__Vcynv\",\"logo\":\"profile__logo__1JZAd\",\"form\":\"profile__form__1-hBO\",\"box\":\"profile__box__oJXQD\",\"links\":\"profile__links__2hukW\",\"darkened\":\"profile__darkened__1rVba\",\"display-name\":\"profile__display-name__auABh\",\"displayName\":\"profile__display-name__auABh\",\"preview\":\"profile__preview__3QjLq\",\"edit-avatar\":\"profile__edit-avatar__3386A\",\"editAvatar\":\"profile__edit-avatar__3386A\",\"close\":\"profile__close__2Uitz\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"preview\":\"avatar-preview__preview__2I8qx\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"action-button\":\"create-object-dialog__action-button__3OIJQ\",\"actionButton\":\"create-object-dialog__action-button__3OIJQ\",\"buttons\":\"create-object-dialog__buttons__1zA-b\",\"small-button\":\"create-object-dialog__small-button__7UxXQ\",\"smallButton\":\"create-object-dialog__small-button__7UxXQ\",\"input-border\":\"create-object-dialog__input-border__1N9AV\",\"inputBorder\":\"create-object-dialog__input-border__1N9AV\",\"left-side-of-input\":\"create-object-dialog__left-side-of-input__zyV06\",\"leftSideOfInput\":\"create-object-dialog__left-side-of-input__zyV06\",\"add-media-form\":\"create-object-dialog__add-media-form__10Wh-\",\"addMediaForm\":\"create-object-dialog__add-media-form__10Wh-\",\"cancel-icon\":\"create-object-dialog__cancel-icon__yD-8A\",\"cancelIcon\":\"create-object-dialog__cancel-icon__yD-8A\",\"upload-icon\":\"create-object-dialog__upload-icon__19g9k\",\"uploadIcon\":\"create-object-dialog__upload-icon__19g9k\",\"hide-file-input\":\"create-object-dialog__hide-file-input__2myDe\",\"hideFileInput\":\"create-object-dialog__hide-file-input__2myDe\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"action-button\":\"change-scene-dialog__action-button__1xtdK\",\"actionButton\":\"change-scene-dialog__action-button__1xtdK\",\"buttons\":\"change-scene-dialog__buttons__2QE34\",\"spoke-launch\":\"change-scene-dialog__spoke-launch__YObDn\",\"spokeLaunch\":\"change-scene-dialog__spoke-launch__YObDn\",\"input-border\":\"change-scene-dialog__input-border__30jd6\",\"inputBorder\":\"change-scene-dialog__input-border__30jd6\",\"left-side-of-input\":\"change-scene-dialog__left-side-of-input__14WKu\",\"leftSideOfInput\":\"change-scene-dialog__left-side-of-input__14WKu\",\"change-scene-button\":\"change-scene-dialog__change-scene-button__ckfZW\",\"changeSceneButton\":\"change-scene-dialog__change-scene-button__ckfZW\",\"spoke-create\":\"change-scene-dialog__spoke-create__2krL-\",\"spokeCreate\":\"change-scene-dialog__spoke-create__2krL-\"};","/* global fetch THREE */\nimport URL_TICK from \"../assets/sfx/tick.mp3\";\nimport URL_TELEPORT_LOOP from \"../assets/sfx/teleport-loop.mp3\";\nimport URL_QUICK_TURN from \"../assets/sfx/quickTurn.mp3\";\nimport URL_TAP_MELLOW from \"../assets/sfx/tap_mellow.mp3\";\nimport URL_PEN_SPAWN from \"../assets/sfx/PenSpawn.mp3\";\nimport URL_PEN_DRAW from \"../assets/sfx/PenDraw1.mp3\";\nimport URL_CAMERA_SNAPSHOT from \"../assets/sfx/PicSnapHey.mp3\";\nimport URL_WELCOME from \"../assets/sfx/welcome.mp3\";\nimport URL_QUACK from \"../assets/sfx/quack.mp3\";\nimport URL_SPECIAL_QUACK from \"../assets/sfx/specialquack.mp3\";\nimport URL_POP from \"../assets/sfx/pop.mp3\";\nimport URL_FREEZE from \"../assets/sfx/Eb_blip.mp3\";\nimport URL_TACK from \"../assets/sfx/tack.mp3\";\nimport URL_MEDIA_LOADED from \"../assets/sfx/A_bendUp.mp3\";\nimport URL_MEDIA_LOADING from \"../assets/sfx/suspense.mp3\";\n\nlet soundEnum = 0;\nexport const SOUND_HOVER_OR_GRAB = soundEnum++;\nexport const SOUND_THAW = soundEnum++;\nexport const SOUND_PEN_STOP_DRAW = soundEnum++;\nexport const SOUND_PEN_UNDO_DRAW = soundEnum++;\nexport const SOUND_PEN_CHANGE_COLOR = soundEnum++;\nexport const SOUND_TOGGLE_MIC = soundEnum++;\nexport const SOUND_TELEPORT_START = soundEnum++;\nexport const SOUND_TELEPORT_END = soundEnum++;\nexport const SOUND_SNAP_ROTATE = soundEnum++;\nexport const SOUND_SPAWN_PEN = soundEnum++;\nexport const SOUND_PEN_START_DRAW = soundEnum++;\nexport const SOUND_CAMERA_TOOL_TOOK_SNAPSHOT = soundEnum++;\nexport const SOUND_ENTER_SCENE = soundEnum++;\nexport const SOUND_QUACK = soundEnum++;\nexport const SOUND_SPECIAL_QUACK = soundEnum++;\nexport const SOUND_CHAT_MESSAGE = soundEnum++;\nexport const SOUND_FREEZE = soundEnum++;\nexport const SOUND_PIN = soundEnum++;\nexport const SOUND_MEDIA_LOADING = soundEnum++;\nexport const SOUND_MEDIA_LOADED = soundEnum++;\n\n// Safari doesn't support the promise form of decodeAudioData, so we polyfill it.\nfunction decodeAudioData(audioContext, arrayBuffer) {\n  return new Promise((resolve, reject) => {\n    audioContext.decodeAudioData(arrayBuffer, resolve, reject);\n  });\n}\n\nexport class SoundEffectsSystem {\n  constructor() {\n    this.pendingEffects = [];\n    this.audioContext = THREE.AudioContext.getContext();\n    const soundsAndUrls = [\n      [SOUND_HOVER_OR_GRAB, URL_TICK],\n      [SOUND_THAW, URL_TICK],\n      [SOUND_PEN_STOP_DRAW, URL_TICK],\n      [SOUND_PEN_UNDO_DRAW, URL_TICK],\n      [SOUND_PEN_CHANGE_COLOR, URL_TICK],\n      [SOUND_TOGGLE_MIC, URL_TICK],\n      [SOUND_TELEPORT_START, URL_TELEPORT_LOOP],\n      [SOUND_TELEPORT_END, URL_QUICK_TURN],\n      [SOUND_SNAP_ROTATE, URL_TAP_MELLOW],\n      [SOUND_SPAWN_PEN, URL_PEN_SPAWN],\n      [SOUND_PEN_START_DRAW, URL_PEN_DRAW],\n      [SOUND_CAMERA_TOOL_TOOK_SNAPSHOT, URL_CAMERA_SNAPSHOT],\n      [SOUND_ENTER_SCENE, URL_WELCOME],\n      [SOUND_QUACK, URL_QUACK],\n      [SOUND_SPECIAL_QUACK, URL_SPECIAL_QUACK],\n      [SOUND_CHAT_MESSAGE, URL_POP],\n      [SOUND_FREEZE, URL_FREEZE],\n      [SOUND_PIN, URL_TACK],\n      [SOUND_MEDIA_LOADING, URL_MEDIA_LOADING],\n      [SOUND_MEDIA_LOADED, URL_MEDIA_LOADED]\n    ];\n    const loading = new Map();\n    const load = url => {\n      let audioBufferPromise = loading.get(url);\n      if (!audioBufferPromise) {\n        audioBufferPromise = fetch(url)\n          .then(r => r.arrayBuffer())\n          .then(arrayBuffer => decodeAudioData(this.audioContext, arrayBuffer));\n        loading.set(url, audioBufferPromise);\n      }\n      return audioBufferPromise;\n    };\n    this.sounds = new Map();\n    soundsAndUrls.map(([sound, url]) => {\n      load(url).then(audioBuffer => {\n        this.sounds.set(sound, audioBuffer);\n      });\n    });\n  }\n\n  enqueueSound(sound, loop) {\n    const audioBuffer = this.sounds.get(sound);\n    if (!audioBuffer) return null;\n    // The nodes are very inexpensive to create, according to\n    // https://developer.mozilla.org/en-US/docs/Web/API/AudioBufferSourceNode\n    const source = this.audioContext.createBufferSource();\n    source.buffer = audioBuffer;\n    source.connect(this.audioContext.destination);\n    source.loop = loop;\n    this.pendingEffects.push(source);\n    return source;\n  }\n\n  playSoundOneShot(sound) {\n    return this.enqueueSound(sound, false);\n  }\n\n  playSoundLooped(sound) {\n    return this.enqueueSound(sound, true);\n  }\n\n  playSoundLoopedWithGain(sound) {\n    const audioBuffer = this.sounds.get(sound);\n    if (!audioBuffer) return null;\n\n    const source = this.audioContext.createBufferSource();\n    const gain = this.audioContext.createGain();\n    source.buffer = audioBuffer;\n    source.connect(gain);\n    gain.connect(this.audioContext.destination);\n    source.loop = true;\n    this.pendingEffects.push(source);\n    return { gain, source };\n  }\n\n  stopSoundNode(node) {\n    const index = this.pendingEffects.indexOf(node);\n    if (index !== -1) {\n      this.pendingEffects.splice(index, 1);\n    } else {\n      node.stop();\n    }\n  }\n\n  tick() {\n    for (let i = 0; i < this.pendingEffects.length; i++) {\n      this.pendingEffects[i].start();\n    }\n    this.pendingEffects.length = 0;\n  }\n}\n","// removed by extract-text-webpack-plugin\nmodule.exports = {\"avatar-url-dialog\":\"avatar-url-dialog__avatar-url-dialog__17OoD\",\"avatarUrlDialog\":\"avatar-url-dialog__avatar-url-dialog__17OoD\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"close-button\":\"link-dialog__close-button__2THTw\",\"closeButton\":\"link-dialog__close-button__2THTw\",\"domain\":\"link-dialog__domain__1WbPJ\",\"dialog\":\"link-dialog__dialog__1zbyG\",\"header\":\"link-dialog__header__1A06x\",\"contents\":\"link-dialog__contents__3ODVz\",\"code\":\"link-dialog__code__259RI\",\"imageHeader\":\"link-dialog__imageHeader__eaJe6\",\"keep-open\":\"link-dialog__keep-open__DYcUI\",\"keepOpen\":\"link-dialog__keep-open__DYcUI\",\"digit\":\"link-dialog__digit___zoC4\",\"code-loading-panel\":\"link-dialog__code-loading-panel__WKkNk\",\"codeLoadingPanel\":\"link-dialog__code-loading-panel__WKkNk\",\"close\":\"link-dialog__close__2TTmg\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"name-field\":\"rename-room-dialog__name-field__1Huun\",\"nameField\":\"rename-room-dialog__name-field__1Huun\",\"next-button\":\"rename-room-dialog__next-button__3OH0z\",\"nextButton\":\"rename-room-dialog__next-button__3OH0z\",\"continue-button\":\"rename-room-dialog__continue-button__2xIHQ\",\"continueButton\":\"rename-room-dialog__continue-button__2xIHQ\",\"rename-room-form\":\"rename-room-dialog__rename-room-form__2B6N7\",\"renameRoomForm\":\"rename-room-dialog__rename-room-form__2B6N7\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"cancel-button\":\"close-room-dialog__cancel-button__MmtAo\",\"cancelButton\":\"close-room-dialog__cancel-button__MmtAo\",\"confirm-button\":\"close-room-dialog__confirm-button__Bs9y3\",\"confirmButton\":\"close-room-dialog__confirm-button__Bs9y3\",\"message\":\"close-room-dialog__message__1Rvh3\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"tip-root\":\"tip__tip-root__1s7D1\",\"tipRoot\":\"tip__tip-root__1s7D1\",\"tip-link\":\"tip__tip-link__3m4Iq\",\"tipLink\":\"tip__tip-link__3m4Iq\",\"tip-cancel\":\"tip__tip-cancel__1xPNP\",\"tipCancel\":\"tip__tip-cancel__1xPNP\",\"tip\":\"tip__tip__32KOl\",\"split-tip\":\"tip__split-tip__1xSCE\",\"splitTip\":\"tip__split-tip__1xSCE\",\"split-tip-icon\":\"tip__split-tip-icon__1ZXw0\",\"splitTipIcon\":\"tip__split-tip-icon__1ZXw0\",\"spawn_menu-icon\":\"tip__spawn_menu-icon__2en_9\",\"spawnMenuIcon\":\"tip__spawn_menu-icon__2en_9\",\"object_rotate_button-icon\":\"tip__object_rotate_button-icon__2tgeV\",\"objectRotateButtonIcon\":\"tip__object_rotate_button-icon__2tgeV\",\"object_scale_button-icon\":\"tip__object_scale_button-icon__pxKrw\",\"objectScaleButtonIcon\":\"tip__object_scale_button-icon__pxKrw\",\"object_recenter_button-icon\":\"tip__object_recenter_button-icon__38tNR\",\"objectRecenterButtonIcon\":\"tip__object_recenter_button-icon__38tNR\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"form-frame\":\"feedback-dialog__form-frame__1gfk_\",\"formFrame\":\"feedback-dialog__form-frame__1gfk_\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"leave-room\":\"leave-room-dialog__leave-room__31Jf7\",\"leaveRoom\":\"leave-room-dialog__leave-room__31Jf7\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"title\":\"room-info-dialog__title__3-3CO\",\"room-info\":\"room-info-dialog__room-info__3XkbS\",\"roomInfo\":\"room-info-dialog__room-info__3XkbS\",\"scene-screenshot\":\"room-info-dialog__scene-screenshot__3PWz-\",\"sceneScreenshot\":\"room-info-dialog__scene-screenshot__3PWz-\",\"scene-details\":\"room-info-dialog__scene-details__2pYml\",\"sceneDetails\":\"room-info-dialog__scene-details__2pYml\",\"scene-main\":\"room-info-dialog__scene-main__2mhXj\",\"sceneMain\":\"room-info-dialog__scene-main__2mhXj\",\"scene-name\":\"room-info-dialog__scene-name__1bqGh\",\"sceneName\":\"room-info-dialog__scene-name__1bqGh\",\"scene-creator\":\"room-info-dialog__scene-creator__3_za4\",\"sceneCreator\":\"room-info-dialog__scene-creator__3_za4\",\"scene-attributions\":\"room-info-dialog__scene-attributions__QpYVd\",\"sceneAttributions\":\"room-info-dialog__scene-attributions__QpYVd\",\"attribution\":\"room-info-dialog__attribution__I9_V-\",\"attribution-name\":\"room-info-dialog__attribution-name__3JTpI\",\"attributionName\":\"room-info-dialog__attribution-name__3JTpI\",\"attribution-author\":\"room-info-dialog__attribution-author__BouZB\",\"attributionAuthor\":\"room-info-dialog__attribution-author__BouZB\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"oauth-discord-button\":\"oauth-dialog__oauth-discord-button__A_Zra\",\"oauthDiscordButton\":\"oauth-dialog__oauth-discord-button__A_Zra\",\"oauth-twitter-button\":\"oauth-dialog__oauth-twitter-button__Vh4oX\",\"oauthTwitterButton\":\"oauth-dialog__oauth-twitter-button__Vh4oX\",\"oauth-button\":\"oauth-dialog__oauth-button__25RiO\",\"oauthButton\":\"oauth-dialog__oauth-button__25RiO\",\"oauth-type-name\":\"oauth-dialog__oauth-type-name__jPyhW\",\"oauthTypeName\":\"oauth-dialog__oauth-type-name__jPyhW\",\"oauth-icon\":\"oauth-dialog__oauth-icon__v1G6W\",\"oauthIcon\":\"oauth-dialog__oauth-icon__v1G6W\",\"privacy-notice\":\"oauth-dialog__privacy-notice__2R9ZT\",\"privacyNotice\":\"oauth-dialog__privacy-notice__2R9ZT\",\"oauth-buttons\":\"oauth-dialog__oauth-buttons__1U1Ni\",\"oauthButtons\":\"oauth-dialog__oauth-buttons__1U1Ni\",\"twitter-message\":\"oauth-dialog__twitter-message__cWCES\",\"twitterMessage\":\"oauth-dialog__twitter-message__cWCES\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"buttons\":\"tweet-dialog__buttons__1gYv2\",\"tweet-button\":\"tweet-dialog__tweet-button__3XvNj\",\"tweetButton\":\"tweet-dialog__tweet-button__3XvNj\",\"tweet\":\"tweet-dialog__tweet__25N6e\",\"editor\":\"tweet-dialog__editor__3xJV-\",\"editor-inner\":\"tweet-dialog__editor-inner__1Zhzc\",\"editorInner\":\"tweet-dialog__editor-inner__1Zhzc\",\"emoji-button\":\"tweet-dialog__emoji-button__2L9tR\",\"emojiButton\":\"tweet-dialog__emoji-button__2L9tR\",\"counter\":\"tweet-dialog__counter__2OZyX\",\"highlight\":\"tweet-dialog__highlight__1EXxs\",\"media\":\"tweet-dialog__media__IeN9e\",\"posted\":\"tweet-dialog__posted__2t8RC\",\"tweet-loader\":\"tweet-dialog__tweet-loader__3Q8YL\",\"tweetLoader\":\"tweet-dialog__tweet-loader__3Q8YL\",\"dialog-background\":\"tweet-dialog__dialog-background__2vvyQ\",\"dialogBackground\":\"tweet-dialog__dialog-background__2vvyQ\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"message-entry-in-room\":\"message-entry__message-entry-in-room__1aN5s\",\"messageEntryInRoom\":\"message-entry__message-entry-in-room__1aN5s\",\"message-entry-spawn\":\"message-entry__message-entry-spawn__1_AF5\",\"messageEntrySpawn\":\"message-entry__message-entry-spawn__1_AF5\",\"message-entry-input\":\"message-entry__message-entry-input__2AtQE\",\"messageEntryInput\":\"message-entry__message-entry-input__2AtQE\",\"message-entry\":\"message-entry__message-entry__x7lQX\",\"messageEntry\":\"message-entry__message-entry__x7lQX\",\"message-entry-disabled\":\"message-entry__message-entry-disabled__25LSI\",\"messageEntryDisabled\":\"message-entry__message-entry-disabled__25LSI\",\"message-entry-button\":\"message-entry__message-entry-button__3xJhH\",\"messageEntryButton\":\"message-entry__message-entry-button__3xJhH\",\"message-entry-button-in-room\":\"message-entry__message-entry-button-in-room__2yMTR\",\"messageEntryButtonInRoom\":\"message-entry__message-entry-button-in-room__2yMTR\",\"message-entry-upload\":\"message-entry__message-entry-upload__3F0sX\",\"messageEntryUpload\":\"message-entry__message-entry-upload__3F0sX\",\"message-entry-input-in-room\":\"message-entry__message-entry-input-in-room__30ReF\",\"messageEntryInputInRoom\":\"message-entry__message-entry-input-in-room__30ReF\",\"message-entry-input-no-spawn\":\"message-entry__message-entry-input-no-spawn__1wF7R\",\"messageEntryInputNoSpawn\":\"message-entry__message-entry-input-no-spawn__1wF7R\",\"message-entry-on-mobile\":\"message-entry__message-entry-on-mobile__2pSYF\",\"messageEntryOnMobile\":\"message-entry__message-entry-on-mobile__2pSYF\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"command-help\":\"chat-command-help__command-help__q0Wb8\",\"commandHelp\":\"chat-command-help__command-help__q0Wb8\",\"entry\":\"chat-command-help__entry__1E1un\",\"command\":\"chat-command-help__command__2GMyn\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"presence-log\":\"presence-log__presence-log__10oFj\",\"presenceLog\":\"presence-log__presence-log__10oFj\",\"presence-log-entry\":\"presence-log__presence-log-entry__dt0t4\",\"presenceLogEntry\":\"presence-log__presence-log-entry__dt0t4\",\"message-body\":\"presence-log__message-body__2L9jA\",\"messageBody\":\"presence-log__message-body__2L9jA\",\"message-body-multi\":\"presence-log__message-body-multi__2e-Sx\",\"messageBodyMulti\":\"presence-log__message-body-multi__2e-Sx\",\"message-body-mono\":\"presence-log__message-body-mono__3zuQE\",\"messageBodyMono\":\"presence-log__message-body-mono__3zuQE\",\"message-wrap\":\"presence-log__message-wrap__2aWCa\",\"messageWrap\":\"presence-log__message-wrap__2aWCa\",\"message-wrap-multi\":\"presence-log__message-wrap-multi__1eA6v\",\"messageWrapMulti\":\"presence-log__message-wrap-multi__1eA6v\",\"message-source\":\"presence-log__message-source__3CI4d\",\"messageSource\":\"presence-log__message-source__3CI4d\",\"message-source-link\":\"presence-log__message-source-link__1evTZ\",\"messageSourceLink\":\"presence-log__message-source-link__1evTZ\",\"icon-button\":\"presence-log__icon-button__2Shbm\",\"iconButton\":\"presence-log__icon-button__2Shbm\",\"spawn-message\":\"presence-log__spawn-message__14Ne8\",\"spawnMessage\":\"presence-log__spawn-message__14Ne8\",\"share\":\"presence-log__share__37U7E\",\"media\":\"presence-log__media__2qG_d\",\"mediaBody\":\"presence-log__mediaBody__1rByA\",\"expired\":\"presence-log__expired__2wMJc\",\"presence-log-entry-with-button\":\"presence-log__presence-log-entry-with-button__1PxTw\",\"presenceLogEntryWithButton\":\"presence-log__presence-log-entry-with-button__1PxTw\",\"presence-log-in-room\":\"presence-log__presence-log-in-room__17h3n\",\"presenceLogInRoom\":\"presence-log__presence-log-in-room__17h3n\",\"presence-log-spawn\":\"presence-log__presence-log-spawn__3jlmT\",\"presenceLogSpawn\":\"presence-log__presence-log-spawn__3jlmT\",\"presence-log-entry-one-line\":\"presence-log__presence-log-entry-one-line__bRXfp\",\"presenceLogEntryOneLine\":\"presence-log__presence-log-entry-one-line__bRXfp\",\"presence-log-emoji\":\"presence-log__presence-log-emoji__1_3Yn\",\"presenceLogEmoji\":\"presence-log__presence-log-emoji__1_3Yn\",\"emoji\":\"presence-log__emoji__10b18\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"client-link\":\"presence-list__client-link__3tkyz\",\"clientLink\":\"presence-list__client-link__3tkyz\",\"presence-list\":\"presence-list__presence-list__1KERe\",\"presenceList\":\"presence-list__presence-list__1KERe\",\"attach-point\":\"presence-list__attach-point__kIdfx\",\"attachPoint\":\"presence-list__attach-point__kIdfx\",\"contents\":\"presence-list__contents__1B7bz\",\"rows\":\"presence-list__rows__1B6KS\",\"row\":\"presence-list__row__1D2j2\",\"row-header\":\"presence-list__row-header__3kl1w\",\"rowHeader\":\"presence-list__row-header__3kl1w\",\"list-item\":\"presence-list__list-item__2YARP\",\"listItem\":\"presence-list__list-item__2YARP\",\"list-item-link\":\"presence-list__list-item-link__2DLC2\",\"listItemLink\":\"presence-list__list-item-link__2DLC2\",\"presence\":\"presence-list__presence__15DJe\",\"sign-in\":\"presence-list__sign-in__28eVu\",\"signIn\":\"presence-list__sign-in__28eVu\",\"icon\":\"presence-list__icon__1t8iB\",\"self\":\"presence-list__self__1g-bw\",\"moderator-badge\":\"presence-list__moderator-badge__2njku\",\"moderatorBadge\":\"presence-list__moderator-badge__2njku\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"avatar-editor\":\"avatar-editor__avatar-editor__xtJ6P\",\"avatarEditor\":\"avatar-editor__avatar-editor__xtJ6P\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"bottom-links-main\":\"settings-menu__bottom-links-main__Vtlje\",\"bottomLinksMain\":\"settings-menu__bottom-links-main__Vtlje\",\"bottom-links\":\"settings-menu__bottom-links__b1tDE\",\"bottomLinks\":\"settings-menu__bottom-links__b1tDE\",\"settings-menu\":\"settings-menu__settings-menu__3x1Pv\",\"settingsMenu\":\"settings-menu__settings-menu__3x1Pv\",\"attach-point\":\"settings-menu__attach-point__2gV3g\",\"attachPoint\":\"settings-menu__attach-point__2gV3g\",\"contents\":\"settings-menu__contents__3GQlW\",\"rows\":\"settings-menu__rows__2OtlS\",\"row\":\"settings-menu__row__3w7fz\",\"row-header\":\"settings-menu__row-header__2oCqk\",\"rowHeader\":\"settings-menu__row-header__2oCqk\",\"list-item\":\"settings-menu__list-item__1__z6\",\"listItem\":\"settings-menu__list-item__1__z6\",\"list-item-link\":\"settings-menu__list-item-link__2ovr3\",\"listItemLink\":\"settings-menu__list-item-link__2ovr3\",\"settings-row\":\"settings-menu__settings-row__1sDDk\",\"settingsRow\":\"settings-menu__settings-row__1sDDk\",\"icon\":\"settings-menu__icon__3KMMz\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"load-button\":\"preload-overlay__load-button__ba1d4\",\"loadButton\":\"preload-overlay__load-button__ba1d4\",\"treatment\":\"preload-overlay__treatment__1L4r0\",\"screenshot\":\"preload-overlay__screenshot__3TZYm\",\"hub-name\":\"preload-overlay__hub-name__2txaT\",\"hubName\":\"preload-overlay__hub-name__2txaT\",\"main-panel\":\"preload-overlay__main-panel__2EX4k\",\"mainPanel\":\"preload-overlay__main-panel__2EX4k\",\"logo\":\"preload-overlay__logo__1IJJc\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"panel\":\"_2d-hud__panel__2oM_T\",\"tip-cancel-text\":\"_2d-hud__tip-cancel-text__12KQ2\",\"tipCancelText\":\"_2d-hud__tip-cancel-text__12KQ2\",\"top-tip\":\"_2d-hud__top-tip__E5uti\",\"topTip\":\"_2d-hud__top-tip__E5uti\",\"container\":\"_2d-hud__container__66GRt\",\"top\":\"_2d-hud__top__3PiNe\",\"column\":\"_2d-hud__column__1y7XY\",\"bottom\":\"_2d-hud__bottom__2jUcT\",\"hide\":\"_2d-hud__hide__3HJO8\",\"attach-point\":\"_2d-hud__attach-point__17FSc\",\"attachPoint\":\"_2d-hud__attach-point__17FSc\",\"attach_video_share_mode\":\"_2d-hud__attach_video_share_mode__21PhM\",\"attachVideoShareMode\":\"_2d-hud__attach_video_share_mode__21PhM\",\"attach_video_share_failed\":\"_2d-hud__attach_video_share_failed__2tfqf\",\"attachVideoShareFailed\":\"_2d-hud__attach_video_share_failed__2tfqf\",\"attach_pen_mode\":\"_2d-hud__attach_pen_mode__cI1AW\",\"attachPenMode\":\"_2d-hud__attach_pen_mode__cI1AW\",\"attach_mute_mode\":\"_2d-hud__attach_mute_mode__153iB\",\"attachMuteMode\":\"_2d-hud__attach_mute_mode__153iB\",\"attach_freeze_mode\":\"_2d-hud__attach_freeze_mode__3UIHP\",\"attachFreezeMode\":\"_2d-hud__attach_freeze_mode__3UIHP\",\"top-tip-no-hud\":\"_2d-hud__top-tip-no-hud__16RXh\",\"topTipNoHud\":\"_2d-hud__top-tip-no-hud__16RXh\",\"tip-cancel\":\"_2d-hud__tip-cancel__JaFV-\",\"tipCancel\":\"_2d-hud__tip-cancel__JaFV-\",\"video-share-extra-options\":\"_2d-hud__video-share-extra-options__31VMr\",\"videoShareExtraOptions\":\"_2d-hud__video-share-extra-options__31VMr\",\"iconButton\":\"_2d-hud__iconButton__3faJz\",\"up\":\"_2d-hud__up__1lyhr\",\"small\":\"_2d-hud__small__2rqgF\",\"large\":\"_2d-hud__large__2bHqH\",\"video-share\":\"_2d-hud__video-share__38X7W\",\"videoShare\":\"_2d-hud__video-share__38X7W\",\"fly\":\"_2d-hud__fly__kDxPK\",\"active\":\"_2d-hud__active__1TMB8\",\"mute\":\"_2d-hud__mute__25kHI\",\"pen\":\"_2d-hud__pen__3uTC7\",\"camera\":\"_2d-hud__camera__84ksg\",\"freeze\":\"_2d-hud__freeze__26rlJ\",\"spawn\":\"_2d-hud__spawn__1FoBz\",\"mobile-media-picker\":\"_2d-hud__mobile-media-picker__3ZXHc\",\"mobileMediaPicker\":\"_2d-hud__mobile-media-picker__3ZXHc\",\"share_camera\":\"_2d-hud__share_camera__v67Il\",\"shareCamera\":\"_2d-hud__share_camera__v67Il\",\"share_screen\":\"_2d-hud__share_screen__1HQ8E\",\"shareScreen\":\"_2d-hud__share_screen__1HQ8E\",\"share_window\":\"_2d-hud__share_window__stsD3\",\"shareWindow\":\"_2d-hud__share_window__stsD3\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"label\":\"spectating-label__label__3JS5A\"};","const qs = new URLSearchParams(location.search);\n\nexport default function qsTruthy(param) {\n  const val = qs.get(param);\n  // if the param exists but is not set (e.g. \"?foo&bar\"), its value is the empty string.\n  return val === \"\" || /1|on|true|yes/i.test(val);\n}\n","export function findAncestorWithComponent(entity, componentName) {\n  while (entity && !(entity.components && entity.components[componentName])) {\n    entity = entity.parentNode;\n  }\n  return entity;\n}\n","// Computes an AABB that surrounds the object in question and all of its children.\n// Note that if the children have rotations, this probably won't return the tightest\n// possible AABB -- we could return a tighter one if we examined all of the vertices\n// of the geometry for ourselves, but we don't care enough for what we're using this\n// for to do so much work.\nconst computeObjectAABB = (function() {\n  const bounds = new THREE.Box3();\n  return function(root, target) {\n    target.makeEmpty();\n    root.traverse(node => {\n      const geometry = node.geometry;\n      if (geometry != null) {\n        if (geometry.boundingBox == null) {\n          geometry.computeBoundingBox();\n        }\n        target.union(bounds.copy(geometry.boundingBox).applyMatrix4(node.matrixWorld));\n      }\n    });\n    return target;\n  };\n})();\n\nconst rotation = new THREE.Euler();\nexport function getBox(entity, boxRoot) {\n  const box = new THREE.Box3();\n\n  rotation.copy(entity.object3D.rotation);\n  entity.object3D.rotation.set(0, 0, 0);\n\n  entity.object3D.updateMatrices(true, true);\n  boxRoot.updateMatrices(true, true);\n  boxRoot.updateMatrixWorld(true);\n\n  computeObjectAABB(boxRoot, box);\n\n  if (!box.isEmpty()) {\n    entity.object3D.worldToLocal(box.min);\n    entity.object3D.worldToLocal(box.max);\n    entity.object3D.rotation.copy(rotation);\n    entity.object3D.matrixNeedsUpdate = true;\n  }\n\n  boxRoot.matrixWorldNeedsUpdate = true;\n  boxRoot.updateMatrices();\n\n  return box;\n}\n\nexport function getScaleCoefficient(length, box) {\n  if (box.isEmpty()) return 1.0;\n\n  const { max, min } = box;\n  const dX = Math.abs(max.x - min.x);\n  const dY = Math.abs(max.y - min.y);\n  const dZ = Math.abs(max.z - min.z);\n  const lengthOfLongestComponent = Math.max(dX, dY, dZ);\n  return length / lengthOfLongestComponent;\n}\n","import {airtableMessages} from '../airtable'\n\n// let fields;\n\n// airtableAssets.find('recHqITRS7cBMwn9i', (err, record) => \n//    fields = record.fields\n// )\n\nasync () => {\n\tawait console.log(airtableMessages)\n}\n\nlet motto = airtableMessages && airtableMessages.get('Motto') || 'Learn together, from anywhere.\\nThe future of learning is virtual.\\nEqualizing access to premier quality education.'\n\n\nexport default {\n  \"en\": {\n    \"auth.verified-title\": \"E-Mail Verified!\",\n    \"auth.verified\": \"Your email has been verified!\\nYou can now close this browser tab and return to Hubs.\",\n    \"auth.spoke-verified\": \"You email has been verified!\\nYou can now close this browser tab and return to Spoke.\",\n    \"sign-in.prompt\": \"Sign in to pin objects in rooms.\",\n    \"sign-in.auth-started\":\n      \"Email sent!\\n\\nTo continue, go click on the link in the email using your phone, tablet, or PC.\",\n    \"sign-in.pin\": \"You'll need to sign in to pin objects.\",\n    \"sign-in.pin-complete\": \"You are now signed in.\",\n    \"sign-in.unpin\": \"You'll need to sign in to un-pin objects.\",\n    \"sign-in.unpin-complete\": \"You are now signed in.\",\n    \"sign-in.change-scene\": \"You'll need to sign in to change the scene.\",\n    \"sign-in.change-scene-complete\": \"You are now signed in.\",\n    \"sign-in.rename-room\": \"You'll need to sign in to rename axon park.\",\n    \"sign-in.rename-room-complete\": \"You are now signed in.\",\n    \"sign-in.close-room\": \"You'll need to sign in to close axon park.\",\n    \"sign-in.close-room-complete\": \"You are now signed in.\",\n    \"sign-in.mute-user\": \"You'll need to sign in to mute other users.\",\n    \"sign-in.mute-user-complete\": \"You are now signed in.\",\n    \"sign-in.kick-user\": \"You'll need to sign in to kick other users.\",\n    \"sign-in.kick-user-complete\": \"You are now signed in.\",\n    \"sign-in.create-avatar\": \"You'll need to sign in to create avatars.\",\n    \"sign-in.create-avatar-complete\": \"You are now signed in.\",\n    \"sign-in.favorite-room\": \"You'll need to sign in to add this room to your favorites.\",\n    \"sign-in.favorite-rooms\": \"You'll need to sign in to add favorite rooms.\",\n    \"sign-in.favorite-room-complete\": \"You are now signed in.\",\n    \"sign-in.favorite-rooms-complete\": \"You are now signed in.\",\n    \"sign-in.as\": \"Signed in as\",\n    \"sign-in.in\": \"Sign In\",\n    \"sign-in.out\": \"Sign Out\",\n    \"rename-room.message\": \"Enter the new name for axon park.\",\n    \"rename-room.rename\": \"Rename Axon Park\",\n    \"close-room.message\":\n      \"Closing this room will remove yourself and others from axon park, shutting it down permanently.\\n\\nAre you sure? This action cannot be undone.\",\n    \"close-room.confirm\": \"Yes, Close Axon Park\",\n    \"close-room.cancel\": \"Cancel\",\n    \"entry.room\": \"Immersive Education\",\n    \"entry.enter-room-title\": \"Lobby\",\n    \"entry.enter-room\": \"enter or send to device\",\n    \"entry.leave-room\": \"Leave Axon Park\",\n    \"entry.change-scene\": \"Choose a Scene\",\n    \"entry.in-lobby-notice\": \"You are viewing Axon Park from the lobby.\",\n    \"entry.screen-prefix\": \"Enter on \",\n    \"entry.desktop-screen\": \"Screen\",\n    \"entry.mobile-screen\": \"Phone\",\n    \"entry.mobile-safari\": \"Safari\",\n    \"entry.generic-prefix\": \" \",\n    \"entry.generic-medium\": \"Connected VR Headset\",\n    \"entry.generic-subtitle-desktop\": \"Oculus or SteamVR\",\n    \"entry.gearvr-prefix\": \"Enter on \",\n    \"entry.gearvr-medium\": \"Gear VR\",\n    \"entry.choose-device\": \"Choose Device\",\n    \"entry.device-medium\": \"Send to Device\",\n    \"entry.device-subtitle-desktop\": \"Standalone VR or Phone\",\n    \"entry.device-subtitle-mobile\": \"Standalone VR or PC\",\n    \"entry.device-subtitle-vr\": \"Phone or PC\",\n    \"entry.cardboard\": \"Enter on Google Cardboard\",\n    \"entry.daydream-prefix\": \"Enter on \",\n    \"entry.daydream-medium\": \"Daydream\",\n    \"entry.daydream-via-chrome\": \"Using Google Chrome\",\n    \"entry.invite-others\": \"invite others\",\n    \"entry.share-button\": \"share\",\n    \"entry.desktop.invite-tip\": \"Nobody is here yet. Share this room to get together.\",\n    \"entry.mobile.invite-tip\": \"Share to get together.\",\n    \"entry.invite-team-nag\": \"Invite a hubs team member\",\n    \"entry.enable-screen-sharing\": \"Share my desktop\",\n    \"entry.return-to-vr\": \"Return to VR\",\n    \"entry.enter-in-vr\": \"Enter in VR\",\n    \"entry.open-in-window\": \"Open in Tab\",\n    \"entry.lobby\": \"Lobby\",\n    \"entry.back\": \"Back\",\n    \"entry.notify_me\": \"Notify me when others arrive\",\n    \"entry.mute-on-entry\": \"Mute my microphone\",\n    \"profile.save\": \"Accept\",\n    \"profile.display_name.validation_warning\": \"Alphanumerics and hyphens. At least 3 characters, no more than 32\",\n    \"profile.header\": \"Name & Avatar\",\n    \"profile.terms_of_use\": \"Terms of Use\",\n    \"profile.privacy_notice\": \"Privacy Notice\",\n    \"profile.choose_avatar\": \"Browse Avatars\",\n    \"profile.tabs.legacy\": \"Default\",\n    \"profile.tabs.skinnable\": \"Custom Skin\",\n    \"profile.tabs.url\": \"Custom Model\",\n    \"profile.info\": \"Resources for creating custom avatar models can be found\",\n    \"profile.info-link\": \"here\",\n    \"avatar-editor.info\": \"Resources for creating custom avatar skins can be found\",\n    \"avatar-editor.info-link\": \"here\",\n    \"avatar-preview.loading-failed\": \"Loading failed\\nPlease choose another avatar\",\n    \"media-browser.search-placeholder.scenes\": \"Search Scenes...\",\n    \"media-browser.search-placeholder.avatars\": \"Search Avatars...\",\n    \"media-browser.search-placeholder.videos\": \"Search the web...\",\n    \"media-browser.search-placeholder.images\": \"Search the web...\",\n    \"media-browser.search-placeholder.youtube\": \"Search for videos...\",\n    \"media-browser.search-placeholder.gifs\": \"Search for GIFs...\",\n    \"media-browser.search-placeholder.twitch\": \"Search for streams...\",\n    \"media-browser.search-placeholder.sketchfab\": \"Search for models...\",\n    \"media-browser.search-placeholder.poly\": \"Search for models...\",\n    \"media-browser.search-placeholder.base\": \"Search...\",\n    \"media-browser.favorites-header\": \"Favorite Rooms\",\n    \"media-browser.add_custom_object\": \"Custom URL or File\",\n    \"media-browser.add_custom_scene\": \"Custom Scene\",\n    \"media-browser.add_custom_avatar\": \"Avatar GLB URL\",\n    \"media-browser.privacy_policy\": \"Privacy Policy\",\n    \"media-browser.spoke\": \"Spoke\",\n    \"media-browser.report_issue\": \"Report Issue\",\n    \"media-browser.powered_by.images\": \"Search by Bing | \",\n    \"media-browser.powered_by.videos\": \"Search by Bing | \",\n    \"media-browser.powered_by.youtube\": \"Search by Google | \",\n    \"media-browser.powered_by.gifs\": \"Search by Tenor | \",\n    \"media-browser.powered_by.sketchfab\": \"Search by Sketchfab | \",\n    \"media-browser.powered_by.poly\": \"Search by Google | \",\n    \"media-browser.powered_by.twitch\": \"Search by Twitch | \",\n    \"media-browser.powered_by.scenes\": \"Made with \",\n    \"media-browser.powered_by.avatars\": \" \",\n    \"media-browser.empty.images\": \"No results. Try entering a new search above.\",\n    \"media-browser.empty.videos\": \"No results. Try entering a new search above.\",\n    \"media-browser.empty.youtube\": \"No results. Try entering a new search above.\",\n    \"media-browser.empty.gifs\": \"No result. Try entering a new search above.\",\n    \"media-browser.empty.sketchfab\": \"No results. Try entering a new search above.\",\n    \"media-browser.empty.poly\": \"No results. Try entering a new search above.\",\n    \"media-browser.empty.twitch\": \"No results. Try entering a new search above.\",\n    \"media-browser.empty.favorites\": \"You don't have any favorites. Click a ⭐ to add to your favorites.\",\n    \"media-browser.nav_title.youtube\": \"YouTube\",\n    \"media-browser.nav_title.videos\": \"Videos\",\n    \"media-browser.nav_title.images\": \"Images\",\n    \"media-browser.nav_title.gifs\": \"GIFs\",\n    \"media-browser.nav_title.scenes\": \"Scenes\",\n    \"media-browser.nav_title.avatars\": \"Avatars\",\n    \"media-browser.nav_title.sketchfab\": \"Sketchfab\",\n    \"media-browser.nav_title.poly\": \"Google Poly\",\n    \"media-browser.nav_title.twitch\": \"Twitch\",\n    \"media-browser.create-avatar\": \"Create Avatar\",\n    \"media-browser.create-scene\": \"Create Scene with Spoke\",\n    \"media-browser.hub.joined-prefix\": \"Joined \",\n    \"media-browser.hub.joined-prefix\": \"Visited \",\n    \"audio.title\": \"Audio Setup\",\n    \"audio.talk_to_test\": \"talk\",\n    \"audio.click_to_test\": \"click\",\n    \"audio.subtitle-desktop\": \"Confirm HMD speaker output\",\n    \"audio.subtitle-mobile\": \"Earphones are recommended\",\n    \"audio.enter-now\": \"Enter Now\",\n    \"audio.hmd-mic-warning\": \"Your HMD mic is not chosen\",\n    \"audio.grant-title\": \"Grant mic permissions\",\n    \"audio.grant-subtitle\": \"Mic access needed to be heard by others\",\n    \"audio.granted-title\": \"Mic permissions granted\",\n    \"audio.granted-subtitle\": \"You can still mute yourself in-game\",\n    \"audio.granted-next\": \"Next\",\n    \"exit.subtitle.exited\": \"Your session has ended. Refresh your browser to start a new one.\",\n    \"exit.subtitle.closed\": \"This room is no longer available.\",\n    \"exit.subtitle.denied\": \"You are not permitted to join this room. Please request permission from the room creator.\",\n    \"exit.subtitle.kicked\": \"You have been kicked from axon park.\",\n    \"exit.subtitle.left\": \"You have left axon park.\",\n    \"exit.subtitle.full\": \"This room is full, please try again later.\",\n    \"exit.subtitle.connect_error\": \"Unable to connect to this room, please try again later.\",\n    \"exit.subtitle.version_mismatch\":\n      \"The version you deployed is not available yet. Your browser will refresh in 5 seconds.\",\n    \"autoexit.title\": \"Auto-ending session in \",\n    \"autoexit.title_units\": \" seconds\",\n    \"autoexit.subtitle\": \"You have started another session.\",\n    \"autoexit.cancel\": \"CANCEL\",\n    \"presence.entered_room\": \"entered axon park.\",\n    \"presence.entered_lobby\": \"entered axon park's lobby.\",\n    \"presence.join_lobby\": \"joined the axon park lobby.\",\n    \"presence.join_room\": \"joined axon park.\",\n    \"presence.leave\": \"left.\",\n    \"presence.name_change\": \"is now known as\",\n    \"presence.scene_change\": \"changed the scene to\",\n    \"presence.hub_name_change\": \"changed the name of the room to\",\n    \"presence.in_lobby\": \"Axon Park Lobby\",\n    \"presence.in_room\": \"In Axon Park\",\n    \"home.create_a_room\": \"Initialize Axon Park\",\n    \"home.desktop.add_pwa\": \"Install Desktop App\",\n    \"home.mobile.add_pwa\": \"Add to Home Screen\",\n    \"home.take_a_tour\": \"Take a Tour\",\n    \"home.room_create_options\": \"options\",\n    \"home.room_create_button\": \"Initialize Axon Park\",\n    \"home.create_name.validation_warning\": \"Invalid name, limited to 4 to 64 characters and limited symbols.\",\n    \"home.join_us\": \"Join the Conversation\",\n    \"home.have_code\": \"Have an axon park code?\",\n    \"home.add_to_discord_1\": \"Add the\",\n    \"home.add_to_discord_2\": \"Hubs Bot\",\n    \"home.add_to_discord_3\": \"to Discord\",\n    \"home.create_with_spoke\": \"Create a Scene\",\n    \"home.report_issue\": \"Report Issues\",\n    \"home.source_link\": \"Source\",\n    \"home.whats_new_link\": \"What's New\",\n    \"home.spoke_link\": \"Spoke\",\n    \"home.about_link\": \"About\",\n    \"home.community_link\": \"Community\",\n    \"home.privacy_notice\": \"Privacy Notice\",\n    \"home.terms_of_use\": \"Terms of Use\",\n    \"home.get_updates\": \"Get Updates\",\n    \"home.hero_title\": \"A new way to get together\",\n    \"home.hero_blurb\": motto,\n    \"home.made_with_love\": \"made with 🦆 by \",\n    \"home.environment_author_by\": \" by \",\n    \"dialog.close\": \"close\",\n    \"mailing_list.privacy_label\": \"I'm okay with Mozilla handling my info as explained in\",\n    \"mailing_list.privacy_link\": \"this Privacy Notice\",\n    \"link.link_page_header_entry\": \"Enter your code:\",\n    \"link.link_page_header_headset\": \"Enter Send to Device code:\",\n    \"link.linking_a_headset\": \"Have a letter code?\",\n    \"link.try_again\": \"We couldn't find that code.\\nPlease try again.\",\n    \"help.report_issue\": \"Report an Issue\",\n    \"scene.logo_tagline\": \"A new way to get together\",\n    \"scene.create_button\": \"Create a room with this scene\",\n    \"scene.tweet_button\": \"Share on Twitter\",\n    \"scene.unavailable\": \"This scene is no longer available.\",\n    \"link.in_your_browser\": \"In your device's web browser, go to:\",\n    \"link.enter_code\": \"Then, enter this one-time letter code:\",\n    \"link.do_not_close\":\n      \"Your account and avatar will be transferred to the device.\\nKeep this page open to use this code.\",\n    \"link.connect_headset\": \"Send to Device\",\n    \"link.cancel\": \"cancel\",\n    \"invite.enter_via\": \"Enter via \",\n    \"invite.enter_via_modal\": \"Others may enter via \",\n    \"invite.tweet\": \"tweet\",\n    \"invite.and_enter_code\": \" with code:\",\n    \"invite.or_visit\": \"or share permalink\",\n    \"invite.or_visit_modal\": \"or by visiting permalink\",\n    \"invite.embed\": \"or embed on a page\",\n    \"invite.embed-tip\":\n      \"Please be mindful of where you embed a Hubs room.\\nAnyone who can access the page can enter and create/remove objects.\",\n    \"spoke.primary_tagline\": \"make your space\",\n    \"spoke.secondary_tagline\": \"Create 3D social scenes for \",\n    \"spoke.thank_you\": \"Thank you for downloading Spoke!\",\n    \"spoke.download_win\": \"Download for Windows\",\n    \"spoke.download_macos\": \"Download for Mac\",\n    \"spoke.download_linux\": \"Download for Linux\",\n    \"spoke.download_unsupported\": \"View Releases\",\n    \"spoke.browse_all_versions\": \"Browse All Versions\",\n    \"spoke.beginner_tutorial_button\": \"Learn Spoke in 5 Minutes\",\n    \"spoke.advanced_tutorial_button\": \"Advanced Spoke in 10 minutes\",\n    \"spoke.play_button\": \"Learn Spoke in 5 Minutes\",\n    \"commands.fly\": \"Toggle fly mode.\",\n    \"commands.grow\": \"Increase your avatar's size.\",\n    \"commands.shrink\": \"Decrease your avatar's size.\",\n    \"commands.scene\": \"Change the scene.\",\n    \"commands.rename\": \"Rename the room.\",\n    \"commands.help\": \"Show help.\",\n    \"commands.leave\": \"Disconnect from axon park.\",\n    \"commands.duck\": \"The duck tested well. Quack.\",\n    \"commands.capture\": \"Capture a 15 second video.\",\n    \"commands.debug\": \"Toggle physics debug rendering.\",\n    \"commands.vrstats\": \"Toggle stats in VR.\",\n    \"settings.change-avatar\": \"Set Name & Avatar\",\n    \"settings.change-scene\": \"Choose a Scene\",\n\n    \"settings.favorites\": \"Favorite Rooms\",\n    \"settings.rename-room\": \"Set Axon Park Name...\",\n    \"settings.close-room\": \"Close Axon Park...\",\n    \"settings.room-info\": \"Axon Park Info\",\n    \"settings.create-room\": \"New Axon Park...\",\n\n    \"settings.create-scene\": \"Get Spoke\",\n    \"settings.send-feedback\": \"Send Feedback\",\n    \"settings.whats-new\": \"What's New\",\n    \"settings.features\": \"Help\",\n    \"settings.controls\": \"Controls\",\n    \"settings.community\": \"Join Discord\",\n    \"settings.tips\": \"Show Tips\",\n    \"settings.report\": \"Report Issue\",\n    \"settings.terms\": \"Terms of Use\",\n    \"settings.privacy\": \"Privacy Notice\",\n    \"settings.help\": \"Help\",\n\n    \"settings.row-profile\": \"You\",\n    \"settings.row-room\": \"Axon Park\",\n\n    \"tips.mobile.video_share_mode\": \"Tap to stop sharing video.\",\n    \"tips.mobile.pen_mode\": \"Tap icon again to end drawing.\",\n    \"tips.mobile.mute_mode\": \"You are muted. Tap to unmute.\",\n    \"tips.mobile.freeze_mode\": \"Two-finger tap to hide menus.\",\n    \"tips.mobile.look\": \"Welcome! 👋 Tap and drag to look around.\",\n    \"tips.mobile.locomotion\": \"Great! To move, pinch with two fingers.\",\n    \"tips.mobile.spawn_menu-pre\": \"Use the \",\n    \"tips.mobile.spawn_menu-post\": \"at the top to create objects.\",\n    \"tips.mobile.freeze_gesture\": \"Two-finger tap to show menus.\",\n    \"tips.mobile.object_grab\": \"Drag an object to move or throw it.\",\n    \"tips.mobile.object_rotate_button-pre\": \"Tap and drag \",\n    \"tips.mobile.object_rotate_button-post\": \" to rotate.\",\n    \"tips.mobile.object_scale_button-pre\": \"Tap and drag \",\n    \"tips.mobile.object_scale_button-post\": \" to scale.\",\n    \"tips.mobile.object_recenter_button-pre\": \"Tap \",\n    \"tips.mobile.object_recenter_button-post\": \" to have the object face you.\",\n\n    \"tips.mobile.object_pin\": \"Pin an object to save it to axon park.\",\n    \"tips.mobile.object_pin\": \"Pin an object to save it to axon park.\",\n    \"tips.mobile.invite\": \"Use the Invite button to share axon park.\",\n\n    \"tips.desktop.video_share_mode\": \"You're streaming. Select again to stop sharing video.\",\n    \"tips.desktop.pen_mode\": \"Press ESC or right click to drop pen. Ctrl-Z to undo.\",\n    \"tips.desktop.mirror_mode\": \"Press ESC to end camera mirroring.\",\n    \"tips.desktop.mute_mode\": \"You are muted. Click or press M to un-mute.\",\n    \"tips.desktop.look\": \"Welcome to Hubs! 👋 Click and drag to look around.\",\n    \"tips.desktop.locomotion\": \"Great! Now, use the W A S D keys to move. Hold shift to boost.\",\n    \"tips.desktop.turning\": \"Perfect. Use the Q and E keys to rotate.\",\n    \"tips.desktop.spawn_menu-pre\": \"To create objects, click the \",\n    \"tips.desktop.spawn_menu-post\": \"button at the top of the screen, or press Ctrl 1 through 7.\",\n    \"tips.desktop.freeze_gesture\": \"Press and hold spacebar to show object menus.\",\n    \"tips.desktop.menu_hover\": \"Now, point the cursor at an object to show the menu.\",\n    \"tips.desktop.object_grab\": \"Click and drag an object to move it. Or, flick to throw it!\",\n    \"tips.desktop.object_pin\": \"Pin an object to save it to axon park.\",\n    \"tips.desktop.object_zoom\": \"Scroll to move this object towards and away from you.\",\n    \"tips.desktop.object_rotate_button-pre\": \"Click and drag \",\n    \"tips.desktop.object_rotate_button-post\": \" to rotate the object.\",\n    \"tips.desktop.object_scale_button-pre\": \"Click and drag \",\n    \"tips.desktop.object_scale_button-post\": \" to scale the object.\",\n    \"tips.desktop.object_recenter_button-pre\": \"Click \",\n    \"tips.desktop.object_recenter_button-post\": \" to rotate the object to face you. Helpful if you drop it!\",\n    \"tips.desktop.object_scale\": \"Hold shift and scroll to scale it bigger and smaller.\",\n    \"tips.desktop.pen_color\": \"Use Shift-Q and Shift-E to change the pen color.\",\n    \"tips.desktop.pen_size\": \"Hold Shift and scroll to change the pen size.\",\n    \"tips.desktop.invite\": \"Nobody else is here. Use the Share button at the top to share this room.\",\n    \"tips.desktop.watching\": \"You're in the lobby. Others cannot see or hear you.\",\n    \"tips.watching.back\": \"Enter Room\",\n    \"tips.mobile.watching\": \"You're in the lobby.\",\n    \"tips.watching-exit\": \"Back\",\n    \"loader.entering_lobby\": \"Entering lobby...\",\n    \"loader.loading\": \"Loading \",\n    \"loader.object\": \"object\",\n    \"loader.objects\": \"objects\",\n    \"change-scene-dialog.change-scene\": \"Change Scene\",\n    \"change-scene-dialog.create-in-spoke\": \"Or, create a new scene using Spoke.\",\n    \"change-scene-dialog.new-spoke-project\": \"Launch Spoke\",\n    \"avatar-url-dialog.apply\": \"Apply\",\n    \"interstitial.prompt\": \"Continue\",\n    \"feedback.prompt\": \"Feedback\",\n    \"hide-ui.prompt\": \"Hide All\",\n    \"discord.primary_tagline\":\n      \"Share a virtual room with your community.\\nWatch videos, play with 3D objects, or just hang out.\",\n    \"discord.secondary_tagline\": \"No downloads or sign up. Full VR support too.\",\n    \"discord.contact_us\": \"Invite Bot to Server\",\n    \"discord.community_link\": \"Hubs Discord\",\n    \"discord.splash_tag\": \"Designed for serious businessing.\",\n    \"client-info.kick-button\": \"Kick\",\n    \"client-info.hide-button\": \"Hide\",\n    \"client-info.unhide-button\": \"Un-hide \",\n    \"client-info.mute-button\": \"Mute\",\n    \"client-info.cancel\": \"Cancel\",\n    \"avatar-landing.select\": \"Select\",\n    \"avatar-landing.selected\": \"This is your current avatar\",\n    \"leave-room-dialog.join-room.message\": \"Joining a new room will leave this one. Are you sure?\",\n    \"leave-room-dialog.join-room.confirm\": \"Join Room\",\n    \"leave-room-dialog.create-room.message\": \"Creating a new room will leave this one. Are you sure?\",\n    \"leave-room-dialog.create-room.confirm\": \"Leave Room\",\n    \"embed.load-button\": \"Load Room\",\n    \"embed.presence-warning\": \"This room is embedded, so may be visible to visitors on other websites.\"\n  }\n}\n","import localeData from \"../axonpark/messages.js\";\n// import localeData from \"../assets/translations.data.json\";\nconst navigatorLang = ((navigator.languages && navigator.languages[0]) || navigator.language || navigator.userLanguage)\n  .toLowerCase()\n  .split(/[_-]+/)[0];\nexport const lang = (localeData[navigatorLang] && navigatorLang) || \"en\";\nexport const messages = localeData[lang] || localeData.en;\n","// A-Frame blows away any npm debug log filters so this allow the user to set the log filter\n// via the query string.\nimport debug from \"debug\";\nimport qsTruthy from \"./qs_truthy\";\n\nconst qs = new URLSearchParams(location.search);\nconst isDebug = qsTruthy(\"debug\");\nconst logFilter = qs.get(\"log_filter\") || (isDebug && \"naf-janus-adapter:*\");\n\nif (logFilter) {\n  debug.enable(logFilter);\n}\n","import uuid from \"uuid/v4\";\n\nexport default class AuthChannel {\n  constructor(store) {\n    this.store = store;\n    this.socket = null;\n    this._signedIn = !!this.store.state.credentials.token;\n  }\n\n  setSocket = socket => {\n    this.socket = socket;\n  };\n\n  get email() {\n    return this.store.state.credentials.email;\n  }\n\n  get signedIn() {\n    return this._signedIn;\n  }\n\n  signOut = async hubChannel => {\n    if (hubChannel) {\n      await hubChannel.signOut();\n    }\n    this.store.update({ credentials: { token: null, email: null } });\n    this.store.resetToRandomLegacyAvatar();\n    this._signedIn = false;\n  };\n\n  verifyAuthentication(authTopic, authToken, authPayload) {\n    const channel = this.socket.channel(authTopic);\n    return new Promise((resolve, reject) =>\n      channel\n        .join()\n        .receive(\"ok\", () => {\n          channel.on(\"auth_credentials\", async ({ credentials: token, payload: payload }) => {\n            await this.handleAuthCredentials(payload.email, token);\n            resolve();\n          });\n\n          channel.push(\"auth_verified\", { token: authToken, payload: authPayload });\n        })\n        .receive(\"error\", reject)\n    );\n  }\n\n  async startAuthentication(email, hubChannel) {\n    const channel = this.socket.channel(`auth:${uuid()}`);\n    await new Promise((resolve, reject) =>\n      channel\n        .join()\n        .receive(\"ok\", resolve)\n        .receive(\"error\", reject)\n    );\n\n    const authComplete = new Promise(resolve =>\n      channel.on(\"auth_credentials\", async ({ credentials: token }) => {\n        await this.handleAuthCredentials(email, token, hubChannel);\n        resolve();\n      })\n    );\n\n    channel.push(\"auth_request\", { email, origin: \"hubs\" });\n\n    // Returning an object with the authComplete promise since we want the caller to wait for the above await but not\n    // for authComplete.\n    return { authComplete };\n  }\n\n  async handleAuthCredentials(email, token, hubChannel) {\n    this.store.update({ credentials: { email, token } });\n\n    if (hubChannel) {\n      await hubChannel.signIn(token);\n    }\n\n    this._signedIn = true;\n  }\n}\n","export function addAnimationComponents(modelEl) {\n  if (!modelEl.components[\"animation-mixer\"]) {\n    return;\n  }\n\n  if (!modelEl.querySelector(\"[loop-animation]\")) {\n    modelEl.setAttribute(\"loop-animation\", \"\");\n  }\n}\n","//\n// Based on THREE.TextureLoader\n// https://github.com/mrdoob/three.js/blob/master/src/loaders/TextureLoader.js\n// Licensed under the MIT license.\n// https://github.com/mrdoob/three.js/blob/master/LICENSE\n//\n\n// http://www.libpng.org/pub/png/spec/1.2/PNG-Structure.html\nconst PNGFileSignature = new Uint8Array([137, 80, 78, 71, 13, 10, 26, 10]);\n\n// https://en.wikipedia.org/wiki/JPEG_File_Interchange_Format#File_format_structure\n// SOI Chunk Header: FF D8\n// JFIF / EXIF Chunk Header: FF ?? (either E0 or E1)\nconst JPEGFileSignature = new Uint8Array([255, 216, 255]);\n\nfunction signaturesEqual(referenceFileSignature, arrayBuffer) {\n  const signatureLength = referenceFileSignature.byteLength;\n\n  if (signatureLength > arrayBuffer.byteLength) {\n    return false;\n  }\n\n  const bufferView = new Uint8Array(arrayBuffer, 0, signatureLength);\n\n  for (let i = 0; i < signatureLength; i++) {\n    if (referenceFileSignature[i] !== bufferView[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction loadAsync(loader, url, onProgress) {\n  return new Promise((resolve, reject) => loader.load(url, resolve, onProgress, reject));\n}\n\nfunction getChunkType(arrayBuffer, byteOffset) {\n  const arr = new Uint8Array(arrayBuffer, byteOffset, 4);\n  return String.fromCharCode.apply(null, arr);\n}\n\nexport default class HubsTextureLoader {\n  static crossOrigin = \"anonymous\";\n\n  constructor(manager = THREE.DefaultLoadingManager) {\n    this.manager = manager;\n  }\n\n  load(url, onLoad, onProgress, onError) {\n    const texture = new THREE.Texture();\n\n    this.loadTextureAsync(texture, url, onProgress)\n      .then(onLoad)\n      .catch(onError);\n\n    return texture;\n  }\n\n  async loadTextureAsync(texture, src, onProgress) {\n    let url = src;\n    let transparent = true;\n\n    const fileLoader = new THREE.FileLoader(this.manager);\n    fileLoader.setResponseType(\"blob\");\n\n    const blob = await loadAsync(fileLoader, src, onProgress);\n\n    const bytes = await new Response(blob).arrayBuffer();\n\n    if (signaturesEqual(PNGFileSignature, bytes)) {\n      const dataView = new DataView(bytes);\n      const colorType = dataView.getUint8(25);\n\n      if (colorType === 3) {\n        // Chunk layout:\n        // length - 4 bytes\n        // type - 4 bytes\n        // data - length bytes\n        // crc - 4 bytes\n\n        const chunkHeaderSize = 12; // length + type + crc (excludes data)\n\n        let curChunkOffset = PNGFileSignature.byteLength;\n        let curChunkType = getChunkType(bytes, curChunkOffset + 4);\n\n        while (curChunkType !== \"IEND\") {\n          if (curChunkType === \"tRNS\") {\n            transparent = true;\n            break;\n          }\n\n          curChunkOffset = curChunkOffset + dataView.getUint32(curChunkOffset) + chunkHeaderSize;\n          curChunkType = getChunkType(bytes, curChunkOffset + 4);\n        }\n      } else if (colorType === 0 || colorType === 2) {\n        transparent = false;\n      }\n    } else if (signaturesEqual(JPEGFileSignature, bytes)) {\n      // JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\n      transparent = false;\n    } else {\n      console.warn(`Couldn't detect image type for: \"${src}\". Using RGBA pixel format.`);\n    }\n\n    url = URL.createObjectURL(blob);\n\n    let imageLoader;\n\n    if (window.createImageBitmap !== undefined) {\n      imageLoader = new THREE.ImageBitmapLoader(this.manager);\n      texture.flipY = false;\n    } else {\n      imageLoader = new THREE.ImageLoader(this.manager);\n    }\n\n    imageLoader.setCrossOrigin(this.crossOrigin);\n    imageLoader.setPath(this.path);\n\n    const cacheKey = this.manager.resolveURL(src);\n\n    let image;\n\n    try {\n      image = await loadAsync(imageLoader, url, onProgress);\n    } catch (e) {\n      // Clean up blob url if loading the image fails.\n      URL.revokeObjectURL(url);\n      throw e;\n    }\n\n    // Image was just added to cache before this function gets called, disable caching by immediatly removing it\n    THREE.Cache.remove(cacheKey);\n\n    texture.image = image;\n    texture.format = transparent ? THREE.RGBAFormat : THREE.RGBFormat;\n    texture.needsUpdate = true;\n\n    texture.onUpdate = function() {\n      // Delete texture data once it has been uploaded to the GPU\n      texture.image.close && texture.image.close();\n      delete texture.image;\n      URL.revokeObjectURL(url);\n    };\n\n    return texture;\n  }\n\n  setCrossOrigin(value) {\n    this.crossOrigin = value;\n    return this;\n  }\n\n  setPath(value) {\n    this.path = value;\n    return this;\n  }\n}\n","import { objectTypeForOriginAndContentType } from \"../object-types\";\nimport { getReticulumFetchUrl } from \"./phoenix-utils\";\nimport mediaHighlightFrag from \"./media-highlight-frag.glsl\";\nimport { mapMaterials } from \"./material-utils\";\nimport HubsTextureLoader from \"../loaders/HubsTextureLoader\";\nimport { validMaterials } from \"../components/hoverable-visuals\";\n\nconst mediaAPIEndpoint = getReticulumFetchUrl(\"/api/v1/media\");\n\nconst resolveUrlCache = new Map();\nexport const resolveUrl = async (url, index) => {\n  const cacheKey = `${url}|${index}`;\n  if (resolveUrlCache.has(cacheKey)) return resolveUrlCache.get(cacheKey);\n\n  const response = await fetch(mediaAPIEndpoint, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ media: { url, index } })\n  });\n\n  if (!response.ok) {\n    const message = `Error resolving url \"${url}\":`;\n    try {\n      const body = await response.text();\n      throw new Error(message + \" \" + body);\n    } catch (e) {\n      throw new Error(message + \" \" + response.statusText);\n    }\n  }\n\n  const resolved = await response.json();\n  resolveUrlCache.set(cacheKey, resolved);\n  return resolved;\n};\n\nexport const upload = file => {\n  const formData = new FormData();\n  formData.append(\"media\", file);\n  formData.append(\"promotion_mode\", \"with_token\");\n  return fetch(mediaAPIEndpoint, {\n    method: \"POST\",\n    body: formData\n  }).then(r => r.json());\n};\n\n// https://stackoverflow.com/questions/7584794/accessing-jpeg-exif-rotation-data-in-javascript-on-the-client-side/32490603#32490603\nfunction getOrientation(file, callback) {\n  const reader = new FileReader();\n  reader.onload = function(e) {\n    const view = new DataView(e.target.result);\n    if (view.getUint16(0, false) != 0xffd8) {\n      return callback(-2);\n    }\n    const length = view.byteLength;\n    let offset = 2;\n    while (offset < length) {\n      if (view.getUint16(offset + 2, false) <= 8) return callback(-1);\n      const marker = view.getUint16(offset, false);\n      offset += 2;\n      if (marker == 0xffe1) {\n        if (view.getUint32((offset += 2), false) != 0x45786966) {\n          return callback(-1);\n        }\n\n        const little = view.getUint16((offset += 6), false) == 0x4949;\n        offset += view.getUint32(offset + 4, little);\n        const tags = view.getUint16(offset, little);\n        offset += 2;\n        for (let i = 0; i < tags; i++) {\n          if (view.getUint16(offset + i * 12, little) == 0x0112) {\n            return callback(view.getUint16(offset + i * 12 + 8, little));\n          }\n        }\n      } else if ((marker & 0xff00) != 0xff00) {\n        break;\n      } else {\n        offset += view.getUint16(offset, false);\n      }\n    }\n    return callback(-1);\n  };\n  reader.readAsArrayBuffer(file);\n}\n\nlet interactableId = 0;\nexport const addMedia = (\n  src,\n  template,\n  contentOrigin,\n  contentSubtype = null,\n  resolve = false,\n  resize = false,\n  animate = true\n) => {\n  const scene = AFRAME.scenes[0];\n\n  const entity = document.createElement(\"a-entity\");\n  entity.id = \"interactable-media-\" + interactableId++;\n  entity.setAttribute(\"networked\", { template: template });\n  const needsToBeUploaded = src instanceof File;\n  entity.setAttribute(\"media-loader\", {\n    resize,\n    resolve,\n    animate,\n    src: typeof src === \"string\" ? src : \"\",\n    contentSubtype,\n    fileIsOwned: !needsToBeUploaded\n  });\n\n  entity.object3D.matrixNeedsUpdate = true;\n\n  scene.appendChild(entity);\n\n  const fireLoadingTimeout = setTimeout(() => {\n    scene.emit(\"media-loading\", { src: src });\n  }, 100);\n\n  [\"model-loaded\", \"video-loaded\", \"image-loaded\"].forEach(eventName => {\n    entity.addEventListener(\n      eventName,\n      async () => {\n        clearTimeout(fireLoadingTimeout);\n        scene.emit(\"media-loaded\", { src: src });\n      },\n      { once: true }\n    );\n  });\n\n  const orientation = new Promise(function(resolve) {\n    if (needsToBeUploaded) {\n      getOrientation(src, x => {\n        resolve(x);\n      });\n    } else {\n      resolve(1);\n    }\n  });\n  if (needsToBeUploaded) {\n    upload(src)\n      .then(response => {\n        const srcUrl = new URL(response.raw);\n        srcUrl.searchParams.set(\"token\", response.meta.access_token);\n        entity.setAttribute(\"media-loader\", { resolve: false, src: srcUrl.href, fileId: response.file_id });\n        window.APP.store.update({\n          uploadPromotionTokens: [{ fileId: response.file_id, promotionToken: response.meta.promotion_token }]\n        });\n      })\n      .catch(e => {\n        console.error(\"Media upload failed\", e);\n        entity.setAttribute(\"media-loader\", { src: \"error\" });\n      });\n  } else if (src instanceof MediaStream) {\n    entity.setAttribute(\"media-loader\", { src: `hubs://clients/${NAF.clientId}/video` });\n  }\n\n  if (contentOrigin) {\n    entity.addEventListener(\"media_resolved\", ({ detail }) => {\n      const objectType = objectTypeForOriginAndContentType(contentOrigin, detail.contentType, detail.src);\n      scene.emit(\"object_spawned\", { objectType });\n    });\n  }\n\n  return { entity, orientation };\n};\n\nexport function injectCustomShaderChunks(obj) {\n  const vertexRegex = /\\bskinning_vertex\\b/;\n  const fragRegex = /\\bgl_FragColor\\b/;\n\n  const shaderUniforms = [];\n  const batchManagerSystem = AFRAME.scenes[0].systems[\"hubs-systems\"].batchManagerSystem;\n\n  obj.traverse(object => {\n    if (!object.material) return;\n\n    object.material = mapMaterials(object, material => {\n      if (!validMaterials.includes(material.type)) {\n        return material;\n      }\n\n      // HACK, this routine inadvertently leaves the A-Frame shaders wired to the old, dark\n      // material, so maps cannot be updated at runtime. This breaks UI elements who have\n      // hover/toggle state, so for now just skip these while we figure out a more correct\n      // solution.\n      if (\n        object.el.classList.contains(\"ui\") ||\n        object.el.classList.contains(\"hud\") ||\n        object.el.getAttribute(\"text-button\")\n      )\n        return material;\n\n      // Used when the object is batched\n      batchManagerSystem.meshToEl.set(object, obj.el);\n\n      const newMaterial = material.clone();\n      // This will not run if the object is never rendered unbatched, since its unbatched shader will never be compiled\n      newMaterial.onBeforeCompile = shader => {\n        if (!vertexRegex.test(shader.vertexShader)) return;\n\n        shader.uniforms.hubs_IsFrozen = { value: false };\n        shader.uniforms.hubs_EnableSweepingEffect = { value: false };\n        shader.uniforms.hubs_SweepParams = { value: [0, 0] };\n        shader.uniforms.hubs_InteractorOnePos = { value: [0, 0, 0] };\n        shader.uniforms.hubs_InteractorTwoPos = { value: [0, 0, 0] };\n        shader.uniforms.hubs_HighlightInteractorOne = { value: false };\n        shader.uniforms.hubs_HighlightInteractorTwo = { value: false };\n        shader.uniforms.hubs_Time = { value: 0 };\n\n        const vchunk = `\n        if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\n          vec4 wt = modelMatrix * vec4(transformed, 1);\n\n          // Used in the fragment shader below.\n          hubs_WorldPosition = wt.xyz;\n        }\n      `;\n\n        const vlines = shader.vertexShader.split(\"\\n\");\n        const vindex = vlines.findIndex(line => vertexRegex.test(line));\n        vlines.splice(vindex + 1, 0, vchunk);\n        vlines.unshift(\"varying vec3 hubs_WorldPosition;\");\n        vlines.unshift(\"uniform bool hubs_IsFrozen;\");\n        vlines.unshift(\"uniform bool hubs_HighlightInteractorOne;\");\n        vlines.unshift(\"uniform bool hubs_HighlightInteractorTwo;\");\n        shader.vertexShader = vlines.join(\"\\n\");\n\n        const flines = shader.fragmentShader.split(\"\\n\");\n        const findex = flines.findIndex(line => fragRegex.test(line));\n        flines.splice(findex + 1, 0, mediaHighlightFrag);\n        flines.unshift(\"varying vec3 hubs_WorldPosition;\");\n        flines.unshift(\"uniform bool hubs_IsFrozen;\");\n        flines.unshift(\"uniform bool hubs_EnableSweepingEffect;\");\n        flines.unshift(\"uniform vec2 hubs_SweepParams;\");\n        flines.unshift(\"uniform bool hubs_HighlightInteractorOne;\");\n        flines.unshift(\"uniform vec3 hubs_InteractorOnePos;\");\n        flines.unshift(\"uniform bool hubs_HighlightInteractorTwo;\");\n        flines.unshift(\"uniform vec3 hubs_InteractorTwoPos;\");\n        flines.unshift(\"uniform float hubs_Time;\");\n        shader.fragmentShader = flines.join(\"\\n\");\n\n        shaderUniforms.push(shader.uniforms);\n      };\n      newMaterial.needsUpdate = true;\n      return newMaterial;\n    });\n  });\n\n  return shaderUniforms;\n}\n\nexport function getPromotionTokenForFile(fileId) {\n  return window.APP.store.state.uploadPromotionTokens.find(upload => upload.fileId === fileId);\n}\n\nconst mediaPos = new THREE.Vector3();\n\nexport function spawnMediaAround(el, media, contentSubtype, snapCount, mirrorOrientation = false) {\n  const { entity, orientation } = addMedia(media, \"#interactable-media\", undefined, contentSubtype, false);\n\n  const pos = el.object3D.position;\n\n  entity.object3D.position.set(pos.x, pos.y, pos.z);\n  entity.object3D.rotation.copy(el.object3D.rotation);\n\n  if (mirrorOrientation) {\n    entity.object3D.rotateY(Math.PI);\n  }\n\n  // Generate photos in a circle around camera, starting from the bottom.\n  // Prevent z-fighting but place behind viewfinder\n  const idx = (snapCount % 6) + 3;\n\n  mediaPos.set(\n    Math.cos(Math.PI * 2 * (idx / 6.0)) * 0.75,\n    Math.sin(Math.PI * 2 * (idx / 6.0)) * 0.75,\n    -0.05 + idx * 0.001\n  );\n\n  el.object3D.localToWorld(mediaPos);\n  entity.object3D.visible = false;\n\n  entity.addEventListener(\n    \"image-loaded\",\n    () => {\n      entity.object3D.visible = true;\n      entity.setAttribute(\"animation__photo_pos\", {\n        property: \"position\",\n        dur: 800,\n        from: { x: pos.x, y: pos.y, z: pos.z },\n        to: { x: mediaPos.x, y: mediaPos.y, z: mediaPos.z },\n        easing: \"easeOutElastic\"\n      });\n    },\n    { once: true }\n  );\n\n  entity.object3D.matrixNeedsUpdate = true;\n\n  entity.addEventListener(\n    \"media_resolved\",\n    () => {\n      el.emit(\"photo_taken\", entity.components[\"media-loader\"].data.src);\n    },\n    { once: true }\n  );\n\n  return { entity, orientation };\n}\n\nexport const textureLoader = new HubsTextureLoader().setCrossOrigin(\"anonymous\");\n\nexport async function createImageTexture(url) {\n  const texture = new THREE.Texture();\n\n  try {\n    await textureLoader.loadTextureAsync(texture, url);\n  } catch (e) {\n    throw new Error(`'${url}' could not be fetched (Error code: ${e.status}; Response: ${e.statusText})`);\n  }\n\n  texture.encoding = THREE.sRGBEncoding;\n  texture.anisotropy = 4;\n\n  return texture;\n}\n","const tempVector3 = new THREE.Vector3();\nconst tempQuaternion = new THREE.Quaternion();\n\nexport function getLastWorldPosition(src, target) {\n  src.updateMatrices();\n  target.setFromMatrixPosition(src.matrixWorld);\n  return target;\n}\n\nexport function getLastWorldQuaternion(src, target) {\n  src.updateMatrices();\n  src.matrixWorld.decompose(tempVector3, target, tempVector3);\n  return target;\n}\n\nexport function getLastWorldScale(src, target) {\n  src.updateMatrices();\n  src.matrixWorld.decompose(tempVector3, tempQuaternion, target);\n  return target;\n}\n\nexport function disposeMaterial(mtrl) {\n  if (mtrl.map) mtrl.map.dispose();\n  if (mtrl.lightMap) mtrl.lightMap.dispose();\n  if (mtrl.bumpMap) mtrl.bumpMap.dispose();\n  if (mtrl.normalMap) mtrl.normalMap.dispose();\n  if (mtrl.specularMap) mtrl.specularMap.dispose();\n  if (mtrl.envMap) mtrl.envMap.dispose();\n  mtrl.dispose();\n}\n\nexport function disposeNode(node) {\n  if (!(node instanceof THREE.Mesh)) return;\n\n  if (node.geometry) {\n    node.geometry.dispose();\n  }\n\n  if (node.material) {\n    let materialArray;\n    if (node.material instanceof THREE.MeshFaceMaterial || node.material instanceof THREE.MultiMaterial) {\n      materialArray = node.material.materials;\n    } else if (node.material instanceof Array) {\n      materialArray = node.material;\n    }\n    if (materialArray) {\n      materialArray.forEach(disposeMaterial);\n    } else {\n      disposeMaterial(node.material);\n    }\n  }\n}\n\nexport function setMatrixWorld(object3D, m) {\n  object3D.matrixWorld.copy(m);\n  object3D.matrix = object3D.matrix.getInverse(object3D.parent.matrixWorld).multiply(object3D.matrixWorld);\n  object3D.matrix.decompose(object3D.position, object3D.quaternion, object3D.scale);\n}\n","export function forEachMaterial(object3D, fn) {\n  if (!object3D.material) return;\n\n  if (Array.isArray(object3D.material)) {\n    object3D.material.forEach(fn);\n  } else {\n    fn(object3D.material);\n  }\n}\n\nexport function mapMaterials(object3D, fn) {\n  if (!object3D.material) return;\n\n  if (Array.isArray(object3D.material)) {\n    return object3D.material.map(fn);\n  } else {\n    return fn(object3D.material);\n  }\n}\n","export default function maskEmail(email) {\n  if (!email) return \"\";\n  const emailParts = email.split(\"@\");\n  const emailIdentity = emailParts[0];\n  const emailDomain = emailParts[1];\n  const truncatedIdentity = emailIdentity.substring(0, Math.min(emailIdentity.length, 3));\n  return `${truncatedIdentity}...@${emailDomain}`;\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport dayjs from \"dayjs-ext\";\nimport relativeTime from \"dayjs-ext/plugin/relativeTime\";\nimport { FormattedMessage } from \"react-intl\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faAngleLeft } from \"@fortawesome/free-solid-svg-icons/faAngleLeft\";\nimport { faAngleRight } from \"@fortawesome/free-solid-svg-icons/faAngleRight\";\nimport { faExternalLinkAlt } from \"@fortawesome/free-solid-svg-icons/faExternalLinkAlt\";\nimport { faPencilAlt } from \"@fortawesome/free-solid-svg-icons/faPencilAlt\";\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons/faPlus\";\n\nimport styles from \"../assets/stylesheets/media-browser.scss\";\nimport { scaledThumbnailUrlFor } from \"../utils/media-url-utils\";\nimport StateLink from \"./state-link\";\n\ndayjs.extend(relativeTime);\n\nconst PUBLISHER_FOR_ENTRY_TYPE = {\n  sketchfab_model: \"Sketchfab\",\n  poly_model: \"Google Poly\",\n  twitch_stream: \"Twitch\"\n};\n\nclass MediaTiles extends Component {\n  static propTypes = {\n    result: PropTypes.object,\n    history: PropTypes.object,\n    urlSource: PropTypes.string,\n    handleEntryClicked: PropTypes.func,\n    handlePager: PropTypes.func\n  };\n\n  render() {\n    const { urlSource, result } = this.props;\n    const entries = (result && result.entries) || [];\n    const [createTileWidth, createTileHeight] = this.getTileDimensions(false, urlSource === \"avatars\");\n    const searchParams = new URLSearchParams((this.props.history ? this.props.history.location : location).search);\n    const hasMeta = !!(result && result.meta);\n    const apiSource = (hasMeta && result.meta.source) || null;\n    const isVariableWidth = result && [\"bing_images\", \"tenor\"].includes(apiSource);\n    const hasNext = !!(hasMeta && result.meta.next_cursor) || false;\n    const hasPrevious = searchParams.get(\"cursor\");\n\n    return (\n      <div className={styles.body}>\n        <div className={classNames({ [styles.tiles]: true, [styles.tilesVariable]: isVariableWidth })}>\n          {(urlSource === \"avatars\" || urlSource === \"scenes\") && (\n            <div\n              style={{ width: `${createTileWidth}px`, height: `${createTileHeight}px` }}\n              className={classNames(styles.tile, styles.createTile)}\n            >\n              {urlSource === \"scenes\" ? (\n                <a href=\"/spoke/new\" rel=\"noopener noreferrer\" target=\"_blank\" className={styles.tileLink}>\n                  <div className={styles.tileContent}>\n                    <FontAwesomeIcon icon={faPlus} />\n                    <FormattedMessage id=\"media-browser.create-scene\" />\n                  </div>\n                </a>\n              ) : (\n                <a\n                  onClick={e => {\n                    e.preventDefault();\n                    window.dispatchEvent(new CustomEvent(\"action_create_avatar\"));\n                  }}\n                  className={styles.tileLink}\n                >\n                  <div className={styles.tileContent}>\n                    <FontAwesomeIcon icon={faPlus} />\n                    <FormattedMessage id=\"media-browser.create-avatar\" />\n                  </div>\n                </a>\n              )}\n            </div>\n          )}\n\n          {entries.map(this.entryToTile)}\n        </div>\n\n        {result &&\n          (hasNext || hasPrevious) &&\n          this.props.handlePager && (\n            <div className={styles.pager}>\n              <a\n                className={classNames({ [styles.previousPage]: true, [styles.pagerButtonDisabled]: !hasPrevious })}\n                onClick={() => this.props.handlePager(-1)}\n              >\n                <FontAwesomeIcon icon={faAngleLeft} />\n              </a>\n              <div className={styles.pageNumber}>{result.meta.page}</div>\n              <a\n                className={classNames({ [styles.nextPage]: true, [styles.pagerButtonDisabled]: !hasNext })}\n                onClick={() => this.props.handlePager(1)}\n              >\n                <FontAwesomeIcon icon={faAngleRight} />\n              </a>\n            </div>\n          )}\n      </div>\n    );\n  }\n\n  getTileDimensions = (isImage, isAvatar, imageAspect) => {\n    // Doing breakpointing here, so we can have proper image placeholder based upon dynamic aspect ratio\n    const clientWidth = window.innerWidth;\n    let imageHeight = clientWidth < 1079 ? (clientWidth < 768 ? (clientWidth < 400 ? 85 : 100) : 150) : 200;\n    if (isAvatar) imageHeight = Math.floor(imageHeight * 1.5);\n\n    // Aspect ratio can vary per image if its an image result. Avatars are a taller portrait aspect, o/w assume 720p\n    let imageWidth;\n    if (isImage) {\n      imageWidth = Math.floor(Math.max(imageAspect * imageHeight, imageHeight * 0.85));\n    } else if (isAvatar) {\n      imageWidth = Math.floor((9 / 16) * imageHeight);\n    } else {\n      imageWidth = Math.floor(Math.max((16 / 9) * imageHeight, imageHeight * 0.85));\n    }\n\n    return [imageWidth, imageHeight];\n  };\n\n  entryToTile = (entry, idx) => {\n    const imageSrc = entry.images.preview.url;\n    const creator = entry.attributions && entry.attributions.creator;\n    const isImage = entry.type.endsWith(\"_image\");\n    const isAvatar = [\"avatar\", \"avatar_listing\"].includes(entry.type);\n    const isHub = [\"hub\"].includes(entry.type);\n    const imageAspect = entry.images.preview.width / entry.images.preview.height;\n\n    const [imageWidth, imageHeight] = this.getTileDimensions(isImage, isAvatar, imageAspect);\n\n    const publisherName =\n      (entry.attributions && entry.attributions.publisher && entry.attributions.publisher.name) ||\n      PUBLISHER_FOR_ENTRY_TYPE[entry.type];\n\n    return (\n      <div style={{ width: `${imageWidth}px` }} className={styles.tile} key={`${entry.id}_${idx}`}>\n        <a\n          href={entry.url}\n          rel=\"noreferrer noopener\"\n          onClick={e => this.props.handleEntryClicked && this.props.handleEntryClicked(e, entry)}\n          className={styles.tileLink}\n          style={{ width: `${imageWidth}px`, height: `${imageHeight}px` }}\n        >\n          <img\n            className={classNames(styles.tileContent, styles.avatarTile)}\n            src={scaledThumbnailUrlFor(imageSrc, imageWidth, imageHeight)}\n          />\n        </a>\n        {entry.type === \"avatar\" && (\n          <StateLink\n            className={styles.editAvatar}\n            stateKey=\"overlay\"\n            stateValue=\"avatar-editor\"\n            stateDetail={{ avatarId: entry.id }}\n            history={this.props.history}\n          >\n            <FontAwesomeIcon icon={faPencilAlt} />\n          </StateLink>\n        )}\n        {!entry.type.endsWith(\"_image\") && (\n          <div className={styles.info}>\n            <a\n              href={entry.url}\n              rel=\"noreferrer noopener\"\n              className={styles.name}\n              onClick={e => this.props.handleEntryClicked && this.props.handleEntryClicked(e, entry)}\n            >\n              {entry.name || \"\\u00A0\"}\n            </a>\n            {!isAvatar &&\n              !isHub && (\n                <div className={styles.attribution}>\n                  <div className={styles.creator}>\n                    {creator && creator.name === undefined && <span>{creator}</span>}\n                    {creator && creator.name && !creator.url && <span>{creator.name}</span>}\n                    {creator &&\n                      creator.name &&\n                      creator.url && (\n                        <a href={creator.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                          {creator.name}\n                        </a>\n                      )}\n                  </div>\n                  {publisherName && (\n                    <div className={styles.publisher}>\n                      <i>\n                        <FontAwesomeIcon icon={faExternalLinkAlt} />\n                      </i>\n                      &nbsp;<a href={entry.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                        {publisherName}\n                      </a>\n                    </div>\n                  )}\n                </div>\n              )}\n            {isHub && (\n              <div className={styles.attribution}>\n                <div className={styles.lastJoined}>\n                  <FormattedMessage id=\"media-browser.hub.joined-prefix\" />\n                  {dayjs(entry.last_activated_at).fromNow()}\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  };\n}\nexport default MediaTiles;\n","const THREE = AFRAME.THREE;\n\nfunction checkFloatTextureSupport() {\n  const renderer = new THREE.WebGLRenderer();\n\n  const scene = new THREE.Scene();\n  const size = 2;\n  const data = new Float32Array(size * size * 4);\n  const dataTexture = new THREE.DataTexture(data, size, size, THREE.RGBAFormat, THREE.FloatType);\n  const box = new THREE.Mesh(new THREE.PlaneBufferGeometry(1, 1), new THREE.MeshBasicMaterial({ map: dataTexture }));\n  box.material.map.needsUpdate = true;\n  scene.add(box);\n\n  renderer.render(scene, new THREE.Camera());\n  const result = renderer.context.getError() === 0;\n  renderer.dispose();\n  return result;\n}\n\nexport function patchWebGLRenderingContext() {\n  if (/Android.+Firefox/.test(navigator.userAgent)) {\n    // It appears that Galaxy S6 devices falsely report that they support\n    // OES_texture_float in Firefox. This workaround disables float textures\n    // for those devices.\n    // See https://github.com/mozilla/hubs/issues/32 and\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1338656\n    const originalGetExtension = WebGLRenderingContext.prototype.getExtension;\n    const supportsFloatTextures = checkFloatTextureSupport();\n    WebGLRenderingContext.prototype.getExtension = function patchedGetExtension(name) {\n      if (name === \"OES_texture_float\" && !supportsFloatTextures) {\n        return null;\n      }\n      return originalGetExtension.call(this, name);\n    };\n  }\n}\n","module.exports = __webpack_public_path__ + \"assets/LoadingObject_Atom-7dcc3b81897e68b740c1cf12b6cf4c3f.glb\";","module.exports = __webpack_public_path__ + \"assets/sfx/teleport-loop-84e2caa4f62e5c6d6ce339b0c715c06d.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/quickTurn-cda89edb1a7a32e4442cac70cd2694be.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/tap_mellow-673398d6e97818ec4b675708d460bd0f.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/PenSpawn-aac1f534773040f0fafa41e9db76017b.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/PenDraw1-ddbdc17a6beefecbca2685c8c9d0d2d5.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/PicSnapHey-0228ddd197e5a6d88f7bcd2ceb340f8e.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/welcome-0083300978d5dd05eaa376f65761da47.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/quack-1f18502834f8f1db43990b769c2ab193.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/specialquack-6d1a192a6092e8dfed5d3de063755ee2.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/pop-5784f3bcfaf98637147737448d6df8df.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/Eb_blip-8d7302990e83d6798400a6027dce3936.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/tack-0d55b064794faaa1733fcf6bc89cad0c.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/A_bendUp-de32e556413bb2a527fb514984738c70.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/suspense-f27c64840e5ede36ec694c22a030615c.mp3\";","module.exports = __webpack_public_path__ + \"assets/waternormals-4418dde3f6abc21dc32506acf5f5b093.jpg\";","import { avatars } from \"../assets/avatars/avatars.js\";\n\nconst names = [\n  \"Baers-Pochard\",\n  \"Baikal-Teal\",\n  \"Barrows-Goldeneye\",\n  \"Blue-Billed\",\n  \"Blue-Duck\",\n  \"Blue-Winged\",\n  \"Brown-Teal\",\n  \"Bufflehead\",\n  \"Canvasback\",\n  \"Cape-Shoveler\",\n  \"Chestnut-Teal\",\n  \"Chiloe-Wigeon\",\n  \"Cinnamon-Teal\",\n  \"Comb-Duck\",\n  \"Common-Eider\",\n  \"Common-Goldeneye\",\n  \"Common-Merganser\",\n  \"Common-Pochard\",\n  \"Common-Scoter\",\n  \"Common-Shelduck\",\n  \"Cotton-Pygmy\",\n  \"Crested-Duck\",\n  \"Crested-Shelduck\",\n  \"Eatons-Pintail\",\n  \"Falcated\",\n  \"Ferruginous\",\n  \"Freckled-Duck\",\n  \"Gadwall\",\n  \"Garganey\",\n  \"Greater-Scaup\",\n  \"Green-Pygmy\",\n  \"Grey-Teal\",\n  \"Hardhead\",\n  \"Harlequin\",\n  \"Hartlaubs\",\n  \"Hooded-Merganser\",\n  \"Hottentot-Teal\",\n  \"Kelp-Goose\",\n  \"King-Eider\",\n  \"Lake-Duck\",\n  \"Laysan-Duck\",\n  \"Lesser-Scaup\",\n  \"Long-Tailed\",\n  \"Maccoa-Duck\",\n  \"Mallard\",\n  \"Mandarin\",\n  \"Marbled-Teal\",\n  \"Mellers-Duck\",\n  \"Merganser\",\n  \"Northern-Pintail\",\n  \"Orinoco-Goose\",\n  \"Paradise-Shelduck\",\n  \"Plumed-Whistler\",\n  \"Puna-Teal\",\n  \"Pygmy-Goose\",\n  \"Radjah-Shelduck\",\n  \"Red-Billed\",\n  \"Red-Crested\",\n  \"Red-Shoveler\",\n  \"Ring-Necked\",\n  \"Ringed-Teal\",\n  \"Rosy-Billed\",\n  \"Ruddy-Shelduck\",\n  \"Salvadoris-Teal\",\n  \"Scaly-Sided\",\n  \"Shelduck\",\n  \"Shoveler\",\n  \"Silver-Teal\",\n  \"Smew\",\n  \"Spectacled-Eider\",\n  \"Spot-Billed\",\n  \"Spotted-Whistler\",\n  \"Steamerduck\",\n  \"Stellers-Eider\",\n  \"Sunda-Teal\",\n  \"Surf-Scoter\",\n  \"Tufted-Duck\",\n  \"Velvet-Scoter\",\n  \"Wandering-Whistler\",\n  \"Whistling-duck\",\n  \"White-Backed\",\n  \"White-Cheeked\",\n  \"White-Winged\",\n  \"Wigeon\",\n  \"Wood-Duck\",\n  \"Yellow-Billed\"\n];\n\nfunction selectRandom(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nexport function generateRandomName() {\n  return `${selectRandom(names)}-${Math.floor(10000 + Math.random() * 10000)}`;\n}\n\nexport const avatarIds = avatars.map(av => av.id);\n\nexport function generateDefaultProfile() {\n  return {\n    avatarId: selectRandom(avatarIds)\n  };\n}\n","import { Validator } from \"jsonschema\";\nimport merge from \"deepmerge\";\nimport Cookies from \"js-cookie\";\nimport jwtDecode from \"jwt-decode\";\n\nconst LOCAL_STORE_KEY = \"___hubs_store\";\nconst STORE_STATE_CACHE_KEY = Symbol();\nconst OAUTH_FLOW_CREDENTIALS_KEY = \"ret-oauth-flow-account-credentials\";\nconst validator = new Validator();\nimport { EventTarget } from \"event-target-shim\";\nimport { generateDefaultProfile, generateRandomName } from \"../utils/identity.js\";\n\n// Durable (via local-storage) schema-enforced state that is meant to be consumed via forward data flow.\n// (Think flux but with way less incidental complexity, at least for now :))\nexport const SCHEMA = {\n  id: \"/HubsStore\",\n\n  definitions: {\n    profile: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        displayName: { type: \"string\", pattern: \"^[A-Za-z0-9-]{3,32}$\" },\n        avatarId: { type: \"string\" },\n        personalAvatarId: { type: \"string\" }\n      }\n    },\n\n    credentials: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        token: { type: [\"null\", \"string\"] },\n        email: { type: [\"null\", \"string\"] }\n      }\n    },\n\n    activity: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        hasFoundFreeze: { type: \"boolean\" },\n        hasChangedName: { type: \"boolean\" },\n        hasAcceptedProfile: { type: \"boolean\" },\n        lastEnteredAt: { type: \"string\" },\n        hasPinned: { type: \"boolean\" },\n        hasRotated: { type: \"boolean\" },\n        hasRecentered: { type: \"boolean\" },\n        hasScaled: { type: \"boolean\" },\n        hasHoveredInWorldHud: { type: \"boolean\" },\n        hasOpenedShare: { type: \"boolean\" },\n        entryCount: { type: \"number\" }\n      }\n    },\n\n    settings: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        lastUsedMicDeviceId: { type: \"string\" }\n      }\n    },\n\n    // Legacy\n    confirmedDiscordRooms: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n\n    confirmedBroadcastedRooms: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n\n    uploadPromotionTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          fileId: { type: \"string\" },\n          promotionToken: { type: \"string\" }\n        }\n      }\n    },\n\n    creatorAssignmentTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          creatorAssignmentToken: { type: \"string\" }\n        }\n      }\n    },\n\n    embedTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          embedToken: { type: \"string\" }\n        }\n      }\n    },\n\n    onLoadActions: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          action: { type: \"string\" },\n          args: { type: \"object\" }\n        }\n      }\n    }\n  },\n\n  type: \"object\",\n\n  properties: {\n    profile: { $ref: \"#/definitions/profile\" },\n    credentials: { $ref: \"#/definitions/credentials\" },\n    activity: { $ref: \"#/definitions/activity\" },\n    settings: { $ref: \"#/definitions/settings\" },\n    confirmedDiscordRooms: { $ref: \"#/definitions/confirmedDiscordRooms\" }, // Legacy\n    confirmedBroadcastedRooms: { $ref: \"#/definitions/confirmedBroadcastedRooms\" },\n    uploadPromotionTokens: { $ref: \"#/definitions/uploadPromotionTokens\" },\n    creatorAssignmentTokens: { $ref: \"#/definitions/creatorAssignmentTokens\" },\n    embedTokens: { $ref: \"#/definitions/embedTokens\" },\n    onLoadActions: { $ref: \"#/definitions/onLoadActions\" }\n  },\n\n  additionalProperties: false\n};\n\nexport default class Store extends EventTarget {\n  constructor() {\n    super();\n\n    if (localStorage.getItem(LOCAL_STORE_KEY) === null) {\n      localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify({}));\n    }\n\n    // When storage is updated in another window\n    window.addEventListener(\"storage\", e => {\n      if (e.key !== LOCAL_STORE_KEY) return;\n      delete this[STORE_STATE_CACHE_KEY];\n      this.dispatchEvent(new CustomEvent(\"statechanged\"));\n    });\n\n    this.update({\n      activity: {},\n      settings: {},\n      credentials: {},\n      profile: {},\n      confirmedDiscordRooms: [],\n      confirmedBroadcastedRooms: [],\n      uploadPromotionTokens: [],\n      creatorAssignmentTokens: [],\n      embedTokens: [],\n      onLoadActions: []\n    });\n\n    const oauthFlowCredentials = Cookies.getJSON(OAUTH_FLOW_CREDENTIALS_KEY);\n    if (oauthFlowCredentials) {\n      this.update({ credentials: oauthFlowCredentials });\n      this.resetToRandomLegacyAvatar();\n      Cookies.remove(OAUTH_FLOW_CREDENTIALS_KEY);\n    }\n  }\n\n  // Initializes store with any default bits\n  init = () => {\n    this.update({\n      profile: { ...generateDefaultProfile(), ...(this.state.profile || {}) }\n    });\n\n    // Regenerate name to encourage users to change it.\n    if (!this.state.activity.hasChangedName) {\n      this.update({ profile: { displayName: generateRandomName() } });\n    }\n  };\n\n  resetToRandomLegacyAvatar = () => {\n    this.update({\n      profile: { ...(this.state.profile || {}), ...generateDefaultProfile() }\n    });\n  };\n\n  get state() {\n    if (!this.hasOwnProperty(STORE_STATE_CACHE_KEY)) {\n      this[STORE_STATE_CACHE_KEY] = JSON.parse(localStorage.getItem(LOCAL_STORE_KEY));\n    }\n\n    return this[STORE_STATE_CACHE_KEY];\n  }\n\n  get credentialsAccountId() {\n    if (this.state.credentials.token) {\n      return jwtDecode(this.state.credentials.token).sub;\n    } else {\n      return null;\n    }\n  }\n\n  resetConfirmedBroadcastedRooms() {\n    this.clearStoredArray(\"confirmedBroadcastedRooms\");\n  }\n\n  resetTipActivityFlags() {\n    this.update({\n      activity: { hasRotated: false, hasPinned: false, hasRecentered: false, hasScaled: false, entryCount: 0 }\n    });\n  }\n\n  bumpEntryCount() {\n    const currentEntryCount = this.state.activity.entryCount || 0;\n    this.update({ activity: { entryCount: currentEntryCount + 1 } });\n  }\n\n  // Sets a one-time action to perform the next time the page loads\n  enqueueOnLoadAction(action, args) {\n    this.update({ onLoadActions: [{ action, args }] });\n  }\n\n  executeOnLoadActions(sceneEl) {\n    for (let i = 0; i < this.state.onLoadActions.length; i++) {\n      const { action, args } = this.state.onLoadActions[i];\n\n      if (action === \"emit_scene_event\") {\n        sceneEl.emit(args.event, args.detail);\n      }\n    }\n\n    this.clearOnLoadActions();\n  }\n\n  clearOnLoadActions() {\n    this.clearStoredArray(\"onLoadActions\");\n  }\n\n  clearStoredArray(key) {\n    const overwriteMerge = (destinationArray, sourceArray) => sourceArray;\n    const update = {};\n    update[key] = [];\n\n    this.update(update, { arrayMerge: overwriteMerge });\n  }\n\n  update(newState, mergeOpts) {\n    const finalState = merge(this.state, newState, mergeOpts);\n    const { valid } = validator.validate(finalState, SCHEMA);\n\n    if (!valid) {\n      // Intentionally not including details about the state or validation result here, since we don't want to leak\n      // sensitive data in the error message.\n      throw new Error(`Write to store failed schema validation.`);\n    }\n\n    localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify(finalState));\n    delete this[STORE_STATE_CACHE_KEY];\n\n    if (newState.profile !== undefined) {\n      this.dispatchEvent(new CustomEvent(\"profilechanged\"));\n    }\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    return finalState;\n  }\n}\n","// NOTE: We do not use an IV since we generate a new keypair each time we use these routines.\n\nasync function deriveKey(privateKey, publicKey) {\n  return crypto.subtle.deriveKey(\n    { name: \"ECDH\", public: publicKey },\n    privateKey,\n    { name: \"AES-CBC\", length: 256 },\n    true,\n    [\"encrypt\", \"decrypt\"]\n  );\n}\n\nasync function publicKeyToString(key) {\n  return JSON.stringify(await crypto.subtle.exportKey(\"jwk\", key));\n}\n\nasync function stringToPublicKey(s) {\n  return await crypto.subtle.importKey(\"jwk\", JSON.parse(s), { name: \"ECDH\", namedCurve: \"P-256\" }, true, []);\n}\n\nfunction stringToArrayBuffer(s) {\n  const buf = new Uint8Array(s.length);\n\n  for (let i = 0; i < s.length; i++) {\n    buf[i] = s.charCodeAt(i);\n  }\n\n  return buf;\n}\n\nfunction arrayBufferToString(b) {\n  const buf = new Uint8Array(b);\n  let s = \"\";\n\n  for (let i = 0; i < buf.byteLength; i++) {\n    s += String.fromCharCode(buf[i]);\n  }\n\n  return s;\n}\n\n// This allows a single object to be passed encrypted from a receiver in a req -> response flow\n\n// Requestor generates a public key and private key, and should send the public key to receiver.\nexport async function generateKeys() {\n  const keyPair = await crypto.subtle.generateKey({ name: \"ECDH\", namedCurve: \"P-256\" }, true, [\"deriveKey\"]);\n  const publicKeyString = await publicKeyToString(keyPair.publicKey);\n  return { publicKeyString, privateKey: keyPair.privateKey };\n}\n\n// Receiver takes the public key from requestor and passes obj to get a response public key and the encrypted data to return.\nexport async function generatePublicKeyAndEncryptedObject(incomingPublicKeyString, obj) {\n  const iv = new Uint8Array(16);\n  const incomingPublicKey = await stringToPublicKey(incomingPublicKeyString);\n  const keyPair = await crypto.subtle.generateKey({ name: \"ECDH\", namedCurve: \"P-256\" }, true, [\"deriveKey\"]);\n  const publicKeyString = await publicKeyToString(keyPair.publicKey);\n  const secret = await deriveKey(keyPair.privateKey, incomingPublicKey);\n\n  const encryptedData = btoa(\n    arrayBufferToString(\n      await crypto.subtle.encrypt({ name: \"AES-CBC\", iv }, secret, stringToArrayBuffer(JSON.stringify(obj)))\n    )\n  );\n\n  return { publicKeyString, encryptedData };\n}\n\n// Requestor then takes the receiver's public key, the private key (returned from generateKeys()), and the data from the receiver.\nexport async function decryptObject(publicKeyString, privateKey, base64value) {\n  const iv = new Uint8Array(16);\n  const publicKey = await stringToPublicKey(publicKeyString);\n  const secret = await deriveKey(privateKey, publicKey);\n  const ciphertext = stringToArrayBuffer(atob(base64value));\n  const data = await crypto.subtle.decrypt({ name: \"AES-CBC\", iv }, secret, ciphertext);\n  return JSON.parse(arrayBufferToString(data));\n}\n","import { generatePublicKeyAndEncryptedObject, generateKeys, decryptObject } from \"./crypto\";\n\nconst LINK_ACTION_TIMEOUT = 10000;\n\nexport default class LinkChannel {\n  constructor(store) {\n    this.store = store;\n  }\n\n  setSocket = socket => {\n    this.socket = socket;\n  };\n\n  // Returns a promise that, when resolved, will forward an object with three keys:\n  //\n  // code: The code that was made available to use for link.\n  //\n  // cancel: A function that the caller can call to cancel the use of the code.\n  //\n  // onFinished: A promise that, when resolved, indicates the code is no longer usable,\n  // because it was either successfully used by the remote device or it has expired\n  // (\"used\" or \"expired\" is passed to the callback).\n  generateCode = () => {\n    return new Promise(resolve => {\n      const onFinished = new Promise(finished => {\n        const step = () => {\n          const getLetter = () => \"ABCDEFGHI\"[Math.floor(Math.random() * 9)];\n          const code = `${getLetter()}${getLetter()}${getLetter()}${getLetter()}`;\n\n          // Only respond to one link_request in this channel.\n          let readyToSend = false;\n          let leftChannel = false;\n\n          const channel = this.socket.channel(`link:${code}`, { timeout: LINK_ACTION_TIMEOUT });\n\n          const leave = () => {\n            if (!leftChannel) channel.leave();\n            leftChannel = true;\n          };\n\n          const cancel = () => leave();\n\n          channel.on(\"link_expired\", () => finished(\"expired\"));\n\n          channel.on(\"presence_state\", state => {\n            if (readyToSend) return;\n\n            if (Object.keys(state).length > 0) {\n              // Code is in use by someone else, try a new one\n              step();\n            } else {\n              readyToSend = true;\n              resolve({ code, cancel, onFinished });\n            }\n          });\n\n          channel.on(\"link_request\", incoming => {\n            if (readyToSend) {\n              const data = { path: location.pathname };\n\n              // Copy profile data to link'ed device if it's been set.\n              if (this.store.state.activity.hasChangedName) {\n                data.profile = { ...this.store.state.profile };\n              }\n              data.credentials = { ...this.store.state.credentials };\n\n              generatePublicKeyAndEncryptedObject(incoming.public_key, data).then(\n                ({ publicKeyString, encryptedData }) => {\n                  const payload = {\n                    target_session_id: incoming.reply_to_session_id,\n                    public_key: publicKeyString,\n                    data: encryptedData\n                  };\n\n                  if (!leftChannel) {\n                    channel.push(\"link_response\", payload);\n                  }\n\n                  leave();\n\n                  finished(\"used\");\n                  readyToSend = false;\n                }\n              );\n            }\n          });\n\n          channel.join().receive(\"error\", r => console.error(r));\n        };\n\n        step();\n      });\n    });\n  };\n\n  // Attempts to receive a link payload from a remote device using the given code.\n  //\n  // Promise rejects if the code is invalid or there is a problem with the channel.\n  // Promise resolves and passes payload of link source on successful link.\n  attemptLink = code => {\n    return new Promise((resolve, reject) => {\n      const channel = this.socket.channel(`link:${code}`, { timeout: LINK_ACTION_TIMEOUT });\n      let finished = false;\n\n      generateKeys().then(({ publicKeyString, privateKey }) => {\n        channel.on(\"presence_state\", state => {\n          const numOccupants = Object.keys(state).length;\n\n          if (numOccupants === 1) {\n            // Great, only sender is in topic, request link\n            channel.push(\"link_request\", {\n              reply_to_session_id: this.socket.params().session_id,\n              public_key: publicKeyString\n            });\n\n            setTimeout(() => {\n              if (finished) return;\n              channel.leave();\n              reject(new Error(\"no_response\"));\n            }, LINK_ACTION_TIMEOUT);\n          } else if (numOccupants === 0) {\n            // Nobody in this channel, probably a bad code.\n            channel.leave();\n            reject(new Error(\"failed\"));\n          } else {\n            console.warn(\"link code channel already has 2 or more occupants, something fishy is going on.\");\n            channel.leave();\n            reject(new Error(\"in_use\"));\n          }\n        });\n\n        channel.on(\"link_response\", payload => {\n          finished = true;\n          channel.leave();\n\n          decryptObject(payload.public_key, privateKey, payload.data).then(resolve);\n        });\n\n        channel\n          .join()\n          .receive(\"ok\", data => (this.socket.params().session_id = data.session_id))\n          .receive(\"error\", r => console.error(r));\n      });\n    });\n  };\n}\n","import screenfull from \"screenfull\";\nimport { showFullScreenIfWasFullScreen } from \"./fullscreen\";\nconst { detect } = require(\"detect-browser\");\n\nconst browser = detect();\nlet isExitingFullscreenDueToFocus = false;\n\n// Utility function that handles a bunch of incidental stuff related to text fields:\n//\n// - On non-mobile platforms, selects the value on focus\n// - If full screen, exits/enters full screen because of firefox full screen issues\nexport function handleTextFieldFocus(target) {\n  if (!window.AFRAME) return;\n  const isMobile = AFRAME.utils.device.isMobile();\n\n  if (screenfull.isFullscreen && !AFRAME.utils.device.isMobileVR() && browser.name === \"firefox\") {\n    // This will prevent focus, but its the only way to avoid getting into a\n    // weird \"firefox reports full screen but actually not\". You end up having to tap\n    // twice to ultimately get the focus.\n    //\n    // We need to keep track of a bit here so that we don't re-full screen when\n    // the text box is blurred by the browser.\n\n    isExitingFullscreenDueToFocus = true;\n    screenfull.exit().then(() => {\n      target.focus();\n    });\n  }\n\n  if (!isMobile) target.select();\n}\n\nexport function handleTextFieldBlur() {\n  // This is the incidental blur event when exiting fullscreen mode on mobile\n  if (isExitingFullscreenDueToFocus) {\n    isExitingFullscreenDueToFocus = false;\n    return;\n  }\n\n  showFullScreenIfWasFullScreen();\n}\n","module.exports = __webpack_public_path__ + \"assets/images/mic_denied-5ce12e4dc9b5eb42ce69b753c46c2174.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_denied@2x-127a94ff73b93a0b4ac89682ce836b91.png\";","// Enumeration of spawned object content origins. URL means the content is\n// fetched from a URL, FILE means it was an uploaded/dropped file, and\n// CLIPBOARD means it was raw data pasted in from the clipboard, SPAWNER means\n// it was copied over from a spawner.\nexport const ObjectContentOrigins = {\n  URL: 1,\n  FILE: 2,\n  CLIPBOARD: 3,\n  SPAWNER: 4\n};\n\n// Enumeration of spawnable object types, used for telemetry, which encapsulates\n// both the origin of the content for the object and also the type of content\n// contained in the object.\nexport const ObjectTypes = {\n  URL_IMAGE: 0,\n  URL_VIDEO: 1,\n  URL_MODEL: 2,\n  URL_PDF: 3,\n  URL_AUDIO: 4,\n  //URL_TEXT: 5,\n  //URL_TELEPORTER: 6,\n  FILE_IMAGE: 8,\n  FILE_VIDEO: 9,\n  FILE_MODEL: 10,\n  FILE_PDF: 11,\n  FILE_AUDIO: 12,\n  //FILE_TEXT: 13,\n  CLIPBOARD_IMAGE: 16,\n  CLIPBOARD_VIDEO: 17,\n  CLIPBOARD_MODEL: 18,\n  CLIPBOARD_PDF: 19,\n  CLIPBOARD_AUDIO: 20,\n  //CLIPBOARD_TEXT: 21,\n  SPAWNER_IMAGE: 24,\n  SPAWNER_VIDEO: 25,\n  SPAWNER_MODEL: 26,\n  SPAWNER_PDF: 27,\n  SPAWNER_AUDIO: 28,\n  //SPAWNER_TEXT: 29,\n  CAMERA: 30,\n  UNKNOWN: 31\n};\n\n// Given an origin and three object type values for URL, FILE, and CLIPBOARD\n// origins respectively, return the appropriate one\nfunction objectTypeForOrigin(contentOrigin, urlType, fileType, clipboardType, spawnerType) {\n  if (contentOrigin === ObjectContentOrigins.URL) {\n    return urlType;\n  } else if (contentOrigin === ObjectContentOrigins.FILE) {\n    return fileType;\n  } else if (contentOrigin === ObjectContentOrigins.CLIPBOARD) {\n    return clipboardType;\n  } else {\n    return spawnerType;\n  }\n}\n\n// Lookup table of mime-type prefixes to the set of object types that we should use\n// for objects spawned matching their underlying Content-Type.\nconst objectTypeMimePrefixLookupMap = {\n  \"image/\": [ObjectTypes.URL_IMAGE, ObjectTypes.FILE_IMAGE, ObjectTypes.CLIPBOARD_IMAGE, ObjectTypes.SPAWNER_IMAGE],\n  \"model/\": [ObjectTypes.URL_MODEL, ObjectTypes.FILE_MODEL, ObjectTypes.CLIPBOARD_MODEL, ObjectTypes.SPAWNER_MODEL],\n  \"application/x-zip-compressed\": [\n    ObjectTypes.URL_MODEL,\n    ObjectTypes.FILE_MODEL,\n    ObjectTypes.CLIPBOARD_MODEL,\n    ObjectTypes.SPAWNER_MODEL\n  ],\n  \"video/\": [ObjectTypes.URL_VIDEO, ObjectTypes.FILE_VIDEO, ObjectTypes.CLIPBOARD_VIDEO, ObjectTypes.SPAWNER_VIDEO],\n  \"application/vnd.apple.mpegurl\": [\n    ObjectTypes.URL_VIDEO,\n    ObjectTypes.FILE_VIDEO,\n    ObjectTypes.CLIPBOARD_VIDEO,\n    ObjectTypes.SPAWNER_VIDEO\n  ],\n  \"application/x-mpegurl\": [\n    ObjectTypes.URL_VIDEO,\n    ObjectTypes.FILE_VIDEO,\n    ObjectTypes.CLIPBOARD_VIDEO,\n    ObjectTypes.SPAWNER_VIDEO\n  ],\n  \"audio/\": [ObjectTypes.URL_AUDIO, ObjectTypes.FILE_AUDIO, ObjectTypes.CLIPBOARD_AUDIO, ObjectTypes.SPAWNER_AUDIO],\n  \"application/pdf\": [ObjectTypes.URL_PDF, ObjectTypes.FILE_PDF, ObjectTypes.CLIPBOARD_PDF, ObjectTypes.SPAWNER_PDF]\n};\n\nconst srcSuffixLookupMap = {\n  \".m3u8\": [ObjectTypes.URL_VIDEO, ObjectTypes.FILE_VIDEO, ObjectTypes.CLIPBOARD_VIDEO, ObjectTypes.SPAWNER_VIDEO]\n};\n\n// Given an content origin and the resolved mime type of a piece of content, return\n// the ObjectType, if any, for that content.\nexport function objectTypeForOriginAndContentType(contentOrigin, contentType, src) {\n  for (const prefix in objectTypeMimePrefixLookupMap) {\n    if (contentType.toLowerCase().startsWith(prefix)) {\n      const types = objectTypeMimePrefixLookupMap[prefix];\n      return objectTypeForOrigin(contentOrigin, ...types);\n    }\n  }\n\n  if (src) {\n    for (const suffix in srcSuffixLookupMap) {\n      if (src.toLowerCase().endsWith(suffix)) {\n        const types = srcSuffixLookupMap[suffix];\n        return objectTypeForOrigin(contentOrigin, ...types);\n      }\n    }\n  }\n\n  return ObjectTypes.UNKNOWN;\n}\n","export const avatars = [\n  {\n    id: \"botdefault\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotDefault_Avatar-9f71f8ff22.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botdefault-thumb-42C4C7D3C01D085EAFDAC8BACE591CE6.png\"\n  },\n  {\n    id: \"botbobo\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotBobo_Avatar-f9740a010b.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botbobo-thumb-261278FD5831E9CD89610D15948F23E4.png\"\n  },\n  {\n    id: \"botdom\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotDom_Avatar-0c48bf15a5.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botdom-thumb-1160EB5E81D24F12CE643C520CE1E99E.png\"\n  },\n  {\n    id: \"botgreg\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotGreg_Avatar-98d39797bb.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botgreg-thumb-F2A37F14F9C342EE44DDE9B24DD9B9FC.png\"\n  },\n  {\n    id: \"botguest\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotGuest_Avatar-78cd857332.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botguest-thumb-F7A471250E2C10C2709325C3B02A8BBB.png\"\n  },\n  {\n    id: \"botjim\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotJim_Avatar-d28005a687.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botjim-thumb-A2D195C1A51A082BCED58BD172481B39.png\"\n  },\n  {\n    id: \"botkev\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotKev_Avatar-a95787bb51.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botkev-thumb-90746A7349E3F964C913EA612EE9A53F.png\"\n  },\n  {\n    id: \"botpinky\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotPinky_Avatar-b0b93f8675.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botpinky-thumb-C2E69D4479077766B988DC3EE4F30BE5.png\"\n  },\n  {\n    id: \"botrobert\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotRobert_Avatar-e9554880f3.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botrobert-thumb-9C33F2C752326E2CF4321EAA7BDB4E47.png\"\n  },\n  {\n    id: \"botwoody\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotWoody_Avatar-0140485a23.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botwoody-thumb-F1F1FA7E21301B5AC1D8872B4ED0CC56.png\"\n  }\n];\n","import Raven from \"raven-js\";\n\nconst ga = window.ga;\n\nexport default function registerTelemetry(trackedPage, trackedTitle) {\n  const sentryDsn = process.env.SENTRY_DSN;\n  const gaTrackingId = process.env.GA_TRACKING_ID;\n\n  if (sentryDsn) {\n    console.log(\"Tracking: Sentry DSN: \" + sentryDsn);\n    Raven.config(sentryDsn).install();\n  }\n\n  if (ga && gaTrackingId) {\n    console.log(\"Tracking: Google Analytics ID: \" + gaTrackingId);\n\n    ga(\"create\", gaTrackingId, \"auto\");\n\n    if (trackedPage) {\n      ga(\"set\", \"page\", trackedPage);\n    }\n\n    if (trackedTitle) {\n      ga(\"set\", \"title\", trackedTitle);\n    }\n\n    ga(\"send\", \"pageview\");\n  }\n}\n","import qsTruthy from \"./qs_truthy\";\n\nconst showLog = qsTruthy(\"debug_log\");\n\nif (showLog) {\n  const template = document.createElement(\"template\");\n  template.innerHTML = `\n    <style>\n      #debug-log {\n        position: absolute;\n        top: 13em;\n        background: white;\n        opacity: 0.7;\n        z-index: 1000;\n      }\n      #debug-log, #debug-log-input {\n        font-family: monospace;\n        font-size: 11px;\n        width: 100%;\n      }\n\n      #debug-log-controls {\n        display: flex;\n        padding: 0.2em;\n      }\n\n      #debug-log-eval {\n        display: flex;\n        flex: 1;\n      }\n\n      #debug-log-log {\n        overflow: auto;\n        height: 30vh;\n      }\n      #debug-log-log.minimized {\n        height: auto;\n      }\n      #debug-log-log.minimized .entry {\n        display: none;\n      }\n      #debug-log-log.minimized .entry:last-child {\n        display: block;\n      }\n      #debug-log-log .entry {\n        border: 1px solid grey;\n        margin: 0.2em;\n        padding: 0.2em;\n      }\n      #debug-log-log .entry.error { background-color: pink; }\n      #debug-log-log .entry.warn { background-color: orange; }\n    </style>\n    <div id=\"debug-log\">\n        <div id=\"debug-log-controls\">\n          <form id=\"debug-log-eval\">\n            <input id=\"debug-log-input\" placeholder=\"&gt;&gt;\" autocorrect=\"off\" autocapitalize=\"none\" />\n            <button>&gt;</button>\n          </form>\n          <button id=\"debug-log-minimize\">_</button>\n        </div>\n        <div id=\"debug-log-log\"></div>\n    </div>\n  `;\n\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    document.body.appendChild(template.content);\n  });\n\n  const debugLog = template.content.querySelector(\"#debug-log-log\");\n  debugLog.addEventListener(\"wheel\", e => e.stopPropagation());\n\n  const debugLogInput = template.content.querySelector(\"#debug-log-input\");\n  const debugLogEval = template.content.querySelector(\"#debug-log-eval\");\n  debugLogEval.onsubmit = e => {\n    e.preventDefault();\n    console.log(eval(`(${debugLogInput.value})`));\n  };\n\n  let minimized = false;\n  const debugLogMinimize = template.content.querySelector(\"#debug-log-minimize\");\n  debugLogMinimize.onclick = () => {\n    minimized = !minimized;\n    debugLog.className = minimized ? \"minimized\" : \"\";\n    debugLog.scrollTop = debugLog.scrollHeight - debugLog.clientHeight;\n  };\n\n  const origConsoleLog = console.log;\n  const origConsoleError = console.error;\n  const origConsoleWarn = console.warn;\n\n  const log = function(className, objs) {\n    let entry;\n    if (debugLog.childNodes.length > 1000) {\n      entry = debugLog.firstChild;\n    } else {\n      entry = document.createElement(\"div\");\n      entry.classList.add(\"entry\");\n    }\n    entry.classList.remove(\"warn\", \"error\");\n    entry.classList.add(className);\n\n    const arr = Array.from(objs);\n    const firstObj = arr[0];\n    let content;\n    if (typeof firstObj === \"string\" && firstObj.includes(\"%c\")) {\n      content = firstObj.replace(/%c/g, \"\");\n    } else if (firstObj instanceof Error) {\n      content = `${firstObj.message}\\n${firstObj.stack}`;\n    } else {\n      content = arr\n        .map(obj => {\n          if (typeof obj === \"string\") return obj;\n          return JSON.stringify(obj);\n        })\n        .join(\" \");\n    }\n\n    const time = new Date().toISOString().substring(11, 23);\n    entry.textContent = `[${time}] ${content}`;\n\n    const shouldScroll = debugLog.scrollTop === debugLog.scrollHeight - debugLog.clientHeight;\n    debugLog.append(entry);\n    if (shouldScroll) debugLog.scrollTop = debugLog.scrollHeight - debugLog.clientHeight;\n  };\n\n  console.warn = function() {\n    origConsoleWarn.apply(null, arguments);\n    log(\"warn\", arguments);\n  };\n\n  console.error = function() {\n    origConsoleError.apply(null, arguments);\n    log(\"error\", arguments);\n  };\n\n  console.log = function() {\n    origConsoleLog.apply(null, arguments);\n    log(\"log\", arguments);\n  };\n\n  window.onunhandledrejection = e => log(\"error\", [e.reason.message, e.reason.code, e.reason.name]);\n  window.onerror = e => log(\"error\", [e]);\n}\n","const zeroPos = new THREE.Vector3(0, 0, 0);\nconst zeroQuat = new THREE.Quaternion();\nconst oneScale = new THREE.Vector3(1, 1, 1);\nconst identity = new THREE.Matrix4();\nidentity.identity();\n\n// Patch animation system\nconst bindingSetters = THREE.PropertyBinding.prototype.SetterByBindingTypeAndVersioning;\nconst Versioning = THREE.PropertyBinding.prototype.Versioning;\n\n// For all binding types, monkey patch the setters that require world matrix\n// updates to also flip matrixNeedsUpdate\nfor (let i = 0; i < bindingSetters.length; i++) {\n  const setter = bindingSetters[i][Versioning.MatrixWorldNeedsUpdate];\n  if (!setter) continue;\n\n  bindingSetters[i][Versioning.MatrixWorldNeedsUpdate] = function() {\n    const v = setter.apply(this, arguments);\n    this.targetObject.matrixNeedsUpdate = true;\n    return v;\n  };\n}\n\nTHREE.Object3D.prototype.getWorldPosition = function(target) {\n  if (target === undefined) {\n    console.warn(\"THREE.Object3D: .getWorldPosition() target is now required\");\n    target = new THREE.Vector3();\n  }\n\n  // New function, defined below (used instead of updateMatrixWorld)\n  this.updateMatrices();\n\n  return target.setFromMatrixPosition(this.matrixWorld);\n};\n\nTHREE.Object3D.prototype.getWorldQuaternion = (function() {\n  const position = new THREE.Vector3();\n  const scale = new THREE.Vector3();\n\n  return function getWorldQuaternion(target) {\n    if (target === undefined) {\n      console.warn(\"THREE.Object3D: .getWorldQuaternion() target is now required\");\n      target = new THREE.Quaternion();\n    }\n\n    // New function, defined below (used instead of updateMatrixWorld)\n    this.updateMatrices();\n    this.matrixWorld.decompose(position, target, scale);\n\n    return target;\n  };\n})();\n\nTHREE.Object3D.getWorldScale = (function() {\n  const position = new THREE.Vector3();\n  const quaternion = new THREE.Quaternion();\n\n  return function getWorldScale(target) {\n    if (target === undefined) {\n      console.warn(\"THREE.Object3D: .getWorldScale() target is now required\");\n      target = new THREE.Vector3();\n    }\n\n    // New function, defined below (used instead of updateMatrixWorld)\n    this.updateMatrices();\n    this.matrixWorld.decompose(position, quaternion, target);\n\n    return target;\n  };\n})();\n\nconst handleMatrixModification = o => {\n  if (!o.matrixIsModified) {\n    o.matrixIsModified = true;\n\n    if (o.cachedMatrixWorld) {\n      o.cachedMatrixWorld.copy(o.matrixWorld);\n      o.matrixWorld = o.cachedMatrixWorld;\n    }\n  }\n};\n\nconst updateMatrix = THREE.Object3D.prototype.updateMatrix;\nTHREE.Object3D.prototype.updateMatrix = function() {\n  updateMatrix.apply(this, arguments);\n  handleMatrixModification(this);\n};\n\nconst applyMatrix = THREE.Object3D.prototype.applyMatrix;\nTHREE.Object3D.prototype.applyMatrix = function() {\n  applyMatrix.apply(this, arguments);\n  handleMatrixModification(this);\n};\n\n// By the end of this function this.matrix reflects the updated local matrix\n// and this.matrixWorld reflects the updated world matrix, taking into account\n// parent matrices.\n//\n// forceLocalUpdate - Forces the local matrix to be updated regardless of if it has not\n// been marked dirty.\n//\n// forceWorldUpdate - Forces the world matrix to be updated regardless of if the local matrix\n// has been updated since the last update.\n//\n// skipParents - unless true, all parent matricies are updated before updating this object's\n// local and world matrix.\n//\nTHREE.Object3D.prototype.updateMatrices = function(forceLocalUpdate, forceWorldUpdate, skipParents) {\n  if (!this.hasHadFirstMatrixUpdate) {\n    if (\n      !this.position.equals(zeroPos) ||\n      !this.quaternion.equals(zeroQuat) ||\n      !this.scale.equals(oneScale) ||\n      !this.matrix.equals(identity)\n    ) {\n      // Only update the matrix the first time if its non-identity, this way\n      // this.matrixIsModified will remain false until the default\n      // identity matrix is updated.\n      this.updateMatrix();\n    }\n\n    this.hasHadFirstMatrixUpdate = true;\n    this.matrixWorldNeedsUpdate = true;\n    this.cachedMatrixWorld = this.matrixWorld;\n  } else if (this.matrixNeedsUpdate || this.matrixAutoUpdate || forceLocalUpdate) {\n    this.updateMatrix();\n    if (this.matrixNeedsUpdate) this.matrixNeedsUpdate = false;\n  }\n\n  if (!skipParents && this.parent) {\n    this.parent.updateMatrices(false, forceWorldUpdate, false);\n    this.matrixWorldNeedsUpdate = this.matrixWorldNeedsUpdate || this.parent.childrenNeedMatrixWorldUpdate;\n  }\n\n  if (this.matrixWorldNeedsUpdate || forceWorldUpdate) {\n    if (this.parent === null) {\n      this.matrixWorld.copy(this.matrix);\n    } else {\n      // If the matrix is unmodified, it is the identity matrix,\n      // and hence we can use the parent's world matrix directly.\n      //\n      // Note this assumes all callers will either not pass skipParents=true\n      // *or* will update the parent themselves beforehand as is done in\n      // updateMatrixWorld.\n      if (!this.matrixIsModified) {\n        this.matrixWorld = this.parent.matrixWorld;\n      } else {\n        // Once matrixIsModified === true, this.matrixWorld has been updated to be a local\n        // copy, not a reference to this.parent.matrixWorld (see updateMatrix/applyMatrix)\n        this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix);\n      }\n    }\n\n    this.childrenNeedMatrixWorldUpdate = true;\n    this.matrixWorldNeedsUpdate = false;\n  }\n};\n\n// Computes this object's matrices and then the recursively computes the matrices of all the children.\n//\n// forceWorldUpdate - If true and the object is visible, will force the world matrix to be updated for\n// this node and all of its children.\n//\n// includeInvisible - If true, does not ignore non-visible objects.\nTHREE.Object3D.prototype.updateMatrixWorld = function(forceWorldUpdate, includeInvisible) {\n  if (!this.visible && !includeInvisible) return;\n\n  // Do not recurse upwards, since this is recursing downwards\n  this.updateMatrices(false, forceWorldUpdate, true);\n\n  const children = this.children;\n  const forceChildrenWorldUpdate = this.childrenNeedMatrixWorldUpdate || forceWorldUpdate;\n\n  for (let i = 0, l = children.length; i < l; i++) {\n    children[i].updateMatrixWorld(forceChildrenWorldUpdate, includeInvisible);\n  }\n\n  if (this.childrenNeedMatrixWorldUpdate) this.childrenNeedMatrixWorldUpdate = false;\n};\n\n// Updates this function to use updateMatrices() to avoid extra matrix computations\nTHREE.Object3D.prototype.lookAt = (function() {\n  // This method does not support objects having non-uniformly-scaled parent(s)\n\n  const q1 = new THREE.Quaternion();\n  const m1 = new THREE.Matrix4();\n  const target = new THREE.Vector3();\n  const position = new THREE.Vector3();\n\n  return function lookAt(x, y, z) {\n    if (x.isVector3) {\n      target.copy(x);\n    } else {\n      target.set(x, y, z);\n    }\n\n    const parent = this.parent;\n\n    this.updateMatrices(); // hubs change\n\n    position.setFromMatrixPosition(this.matrixWorld);\n\n    if (this.isCamera || this.isLight) {\n      m1.lookAt(position, target, this.up);\n    } else {\n      m1.lookAt(target, position, this.up);\n    }\n\n    this.quaternion.setFromRotationMatrix(m1);\n\n    if (parent) {\n      m1.extractRotation(parent.matrixWorld);\n      q1.setFromRotationMatrix(m1);\n      this.quaternion.premultiply(q1.inverse());\n    }\n  };\n})();\n","/* eslint-disable */\n\n// Modified version of A-Frame's animation component to set matrixNeedsUpdate = true in the\n// scenario where the transform changes on an object during an animation.\n//\n// Changes are identified w comment // hubs\n//\n// Bugfix added 3/1/19 - If an animation component is removed before its delay setting, then\n// it erroneously restarts.\n\nvar anime = require(\"animejs\").default;\nvar components = AFRAME.components; // hubs\nvar registerComponent = AFRAME.registerComponent; // hubs\n//var THREE = require('../lib/three'); // hubs\nvar utils = AFRAME.utils; // hubs\n\ndelete AFRAME.components.animation; // hubs\n\nvar colorHelperFrom = new THREE.Color();\nvar colorHelperTo = new THREE.Color();\n\nvar getComponentProperty = utils.entity.getComponentProperty;\nvar setComponentProperty = utils.entity.setComponentProperty;\nvar splitCache = {};\n\nvar TYPE_COLOR = \"color\";\nvar PROP_POSITION = \"position\";\nvar PROP_ROTATION = \"rotation\";\nvar PROP_SCALE = \"scale\";\nvar STRING_COMPONENTS = \"components\";\nvar STRING_OBJECT3D = \"object3D\";\n\n/**\n * Animation component for A-Frame using anime.js.\n *\n * The component manually controls the tick by setting `autoplay: false` on anime.js and\n * manually * calling `animation.tick()` in the tick handler. To pause or resume, we toggle a\n * boolean * flag * `isAnimationPlaying`.\n *\n * anime.js animation config for tweenining Javascript objects and values works as:\n *\n *  config = {\n *    targets: {foo: 0.0, bar: '#000'},\n *    foo: 1.0,\n *    bar: '#FFF'\n *  }\n *\n * The above will tween each property in `targets`. The `to` values are set in the root of\n * the config.\n *\n * @member {object} animation - anime.js instance.\n * @member {boolean} animationIsPlaying - Control if animation is playing.\n */\nmodule.exports.Component = registerComponent(\"animation\", {\n  schema: {\n    autoplay: { default: true },\n    delay: { default: 0 },\n    dir: { default: \"\" },\n    dur: { default: 1000 },\n    easing: { default: \"easeInQuad\" },\n    elasticity: { default: 400 },\n    enabled: { default: true },\n    from: { default: \"\" },\n    loop: {\n      default: 0,\n      parse: function(value) {\n        // Boolean or integer.\n        if (value === true || value === \"true\") {\n          return true;\n        }\n        if (value === false || value === \"false\") {\n          return false;\n        }\n        return parseInt(value, 10);\n      }\n    },\n    property: { default: \"\" },\n    startEvents: { type: \"array\" },\n    pauseEvents: { type: \"array\" },\n    resumeEvents: { type: \"array\" },\n    round: { default: false },\n    to: { default: \"\" },\n    type: { default: \"\" },\n    isRawProperty: { default: false }\n  },\n\n  multiple: true,\n\n  init: function() {\n    var self = this;\n\n    this.eventDetail = { name: this.attrName };\n    this.time = 0;\n\n    this.animation = null;\n    this.animationIsPlaying = false;\n    this.onStartEvent = this.onStartEvent.bind(this);\n    this.beginAnimation = this.beginAnimation.bind(this);\n    this.pauseAnimation = this.pauseAnimation.bind(this);\n    this.resumeAnimation = this.resumeAnimation.bind(this);\n\n    this.fromColor = {};\n    this.toColor = {};\n    this.targets = {};\n    this.targetsArray = [];\n\n    this.updateConfigForDefault = this.updateConfigForDefault.bind(this);\n    this.updateConfigForRawColor = this.updateConfigForRawColor.bind(this);\n\n    this.config = {\n      complete: function() {\n        self.animationIsPlaying = false;\n        self.el.emit(\"animationcomplete\", self.eventDetail, false);\n        if (self.id) {\n          self.el.emit(\"animationcomplete__\" + self.id, self.eventDetail, false);\n        }\n      }\n    };\n  },\n\n  update: function(oldData) {\n    var config = this.config;\n    var data = this.data;\n\n    this.animationIsPlaying = false;\n\n    if (!this.data.enabled) {\n      return;\n    }\n\n    if (!data.property) {\n      return;\n    }\n\n    // Base config.\n    config.autoplay = false;\n    config.direction = data.dir;\n    config.duration = data.dur;\n    config.easing = data.easing;\n    config.elasticity = data.elasticity;\n    config.loop = data.loop;\n    config.round = data.round;\n\n    // Start new animation.\n    this.createAndStartAnimation();\n  },\n\n  tick: function(t, dt) {\n    if (!this.animationIsPlaying) {\n      return;\n    }\n    this.time += dt;\n    this.animation.tick(this.time);\n  },\n\n  remove: function() {\n    this.pauseAnimation();\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n  },\n\n  pause: function() {\n    this.paused = true;\n    this.pausedWasPlaying = this.animationIsPlaying;\n    this.pauseAnimation();\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n  },\n\n  /**\n   * `play` handler only for resuming scene.\n   */\n  play: function() {\n    if (!this.paused) {\n      return;\n    }\n    this.paused = false;\n    this.addEventListeners();\n    if (this.pausedWasPlaying) {\n      this.resumeAnimation();\n      this.pausedWasPlaying = false;\n    }\n  },\n\n  /**\n   * Start animation from scratch.\n   */\n  createAndStartAnimation: function() {\n    var data = this.data;\n\n    this.updateConfig();\n    this.animationIsPlaying = false;\n    this.animation = anime(this.config);\n\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n    this.addEventListeners();\n\n    // Wait for start events for animation.\n    if (!data.autoplay || (data.startEvents && data.startEvents.length)) {\n      return;\n    }\n\n    // Delay animation.\n    if (data.delay) {\n      // hubs\n      this.delayTimeout = setTimeout(this.beginAnimation, data.delay);\n      return;\n    }\n\n    // Play animation.\n    this.beginAnimation();\n  },\n\n  /**\n   * This is before animation start (including from startEvents).\n   * Set to initial state (config.from, time = 0, seekTime = 0).\n   */\n  beginAnimation: function() {\n    this.updateConfig();\n    this.time = 0;\n    this.animationIsPlaying = true;\n    this.stopRelatedAnimations();\n    this.el.emit(\"animationbegin\", this.eventDetail, false);\n  },\n\n  pauseAnimation: function() {\n    this.animationIsPlaying = false;\n  },\n\n  resumeAnimation: function() {\n    this.animationIsPlaying = true;\n  },\n\n  /**\n   * startEvents callback.\n   */\n  onStartEvent: function() {\n    if (!this.data.enabled) {\n      return;\n    }\n\n    this.updateConfig();\n    if (this.animation) {\n      this.animation.pause();\n    }\n    this.animation = anime(this.config);\n\n    // Include the delay before each start event.\n    if (this.data.delay) {\n      setTimeout(this.beginAnimation, this.data.delay);\n      return;\n    }\n    this.beginAnimation();\n  },\n\n  /**\n   * rawProperty: true and type: color;\n   */\n  updateConfigForRawColor: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var from;\n    var key;\n    var to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForRawColor)) {\n      return;\n    }\n\n    from = data.from === \"\" ? getRawProperty(el, data.property) : data.from;\n    to = data.to;\n\n    // Use r/g/b vector for color type.\n    this.setColorConfig(from, to);\n    from = this.fromColor;\n    to = this.toColor;\n\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) {\n      config[key] = to[key];\n    }\n\n    config.update = (function() {\n      var lastValue = {};\n      return function(anim) {\n        var value;\n        value = anim.animatables[0].target;\n        // For animation timeline.\n        if (value.r === lastValue.r && value.g === lastValue.g && value.b === lastValue.b) {\n          return;\n        }\n\n        setRawProperty(el, data.property, value, data.type);\n      };\n    })();\n  },\n\n  /**\n   * Stuff property into generic `property` key.\n   */\n  updateConfigForDefault: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var from;\n    var isBoolean;\n    var isNumber;\n    var to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForDefault)) {\n      return;\n    }\n\n    if (data.from === \"\") {\n      // Infer from.\n      from = isRawProperty(data) ? getRawProperty(el, data.property) : getComponentProperty(el, data.property);\n    } else {\n      // Explicit from.\n      from = data.from;\n    }\n\n    to = data.to;\n\n    isNumber = !isNaN(from || to);\n    if (isNumber) {\n      from = parseFloat(from);\n      to = parseFloat(to);\n    } else {\n      from = from ? from.toString() : from;\n      to = to ? to.toString() : to;\n    }\n\n    // Convert booleans to integer to allow boolean flipping.\n    isBoolean = data.to === \"true\" || data.to === \"false\" || data.to === true || data.to === false;\n    if (isBoolean) {\n      from = data.from === \"true\" || data.from === true ? 1 : 0;\n      to = data.to === \"true\" || data.to === true ? 1 : 0;\n    }\n\n    this.targets.aframeProperty = from;\n    config.targets = this.targets;\n    config.aframeProperty = to;\n    config.update = (function() {\n      var lastValue;\n\n      return function(anim) {\n        var value;\n        value = anim.animatables[0].target.aframeProperty;\n\n        // Need to do a last value check for animation timeline since all the tweening\n        // begins simultaenously even if the value has not changed. Also better for perf\n        // anyways.\n        if (value === lastValue) {\n          return;\n        }\n        lastValue = value;\n\n        if (isBoolean) {\n          value = value >= 1;\n        }\n\n        if (isRawProperty(data)) {\n          setRawProperty(el, data.property, value, data.type);\n        } else {\n          setComponentProperty(el, data.property, value);\n        }\n      };\n    })();\n  },\n\n  /**\n   * Extend x/y/z/w onto the config.\n   * Update vector by modifying object3D.\n   */\n  updateConfigForVector: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var key;\n    var from;\n    var to;\n\n    // Parse coordinates.\n    from =\n      data.from !== \"\"\n        ? utils.coordinates.parse(data.from) // If data.from defined, use that.\n        : getComponentProperty(el, data.property); // If data.from not defined, get on the fly.\n    to = utils.coordinates.parse(data.to);\n\n    if (data.property === PROP_ROTATION) {\n      toRadians(from);\n      toRadians(to);\n    }\n\n    // Set to and from.\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) {\n      config[key] = to[key];\n    }\n\n    // If animating object3D transformation, run more optimized updater.\n    if (data.property === PROP_POSITION || data.property === PROP_ROTATION || data.property === PROP_SCALE) {\n      config.update = (function() {\n        var lastValue = {};\n        return function(anim) {\n          var value = anim.animatables[0].target;\n\n          if (data.property === PROP_SCALE) {\n            value.x = Math.max(0.0001, value.x);\n            value.y = Math.max(0.0001, value.y);\n            value.z = Math.max(0.0001, value.z);\n          }\n\n          // For animation timeline.\n          if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n            return;\n          }\n\n          lastValue.x = value.x;\n          lastValue.y = value.y;\n          lastValue.z = value.z;\n\n          el.object3D[data.property].set(value.x, value.y, value.z);\n          el.object3D.matrixNeedsUpdate = true; // hubs\n        };\n      })();\n      return;\n    }\n\n    // Animating some vector.\n    config.update = (function() {\n      var lastValue = {};\n      return function(anim) {\n        var value = anim.animations[0].target;\n\n        // Animate rotation through radians.\n        // For animation timeline.\n        if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n          return;\n        }\n        lastValue.x = value.x;\n        lastValue.y = value.y;\n        lastValue.z = value.z;\n        setComponentProperty(el, data.property, value);\n      };\n    })();\n  },\n\n  /**\n   * Update the config before each run.\n   */\n  updateConfig: function() {\n    var propType;\n\n    // Route config type.\n    propType = getPropertyType(this.el, this.data.property);\n    if (isRawProperty(this.data) && this.data.type === TYPE_COLOR) {\n      this.updateConfigForRawColor();\n    } else if (propType === \"vec2\" || propType === \"vec3\" || propType === \"vec4\") {\n      this.updateConfigForVector();\n    } else {\n      this.updateConfigForDefault();\n    }\n  },\n\n  /**\n   * Wait for component to initialize.\n   */\n  waitComponentInitRawProperty: function(cb) {\n    var componentName;\n    var data = this.data;\n    var el = this.el;\n    var self = this;\n\n    if (data.from !== \"\") {\n      return false;\n    }\n\n    if (!data.property.startsWith(STRING_COMPONENTS)) {\n      return false;\n    }\n\n    componentName = splitDot(data.property)[1];\n    if (el.components[componentName]) {\n      return false;\n    }\n\n    el.addEventListener(\"componentinitialized\", function wait(evt) {\n      if (evt.detail.name !== componentName) {\n        return;\n      }\n      cb();\n      // Since the config was created async, create the animation now since we missed it\n      // earlier.\n      self.animation = anime(self.config);\n      el.removeEventListener(\"componentinitialized\", wait);\n    });\n    return true;\n  },\n\n  /**\n   * Make sure two animations on the same property don't fight each other.\n   * e.g., animation__mouseenter=\"property: material.opacity\"\n   *       animation__mouseleave=\"property: material.opacity\"\n   */\n  stopRelatedAnimations: function() {\n    var component;\n    var componentName;\n    for (componentName in this.el.components) {\n      component = this.el.components[componentName];\n      if (componentName === this.attrName) {\n        continue;\n      }\n      if (component.name !== \"animation\") {\n        continue;\n      }\n      if (!component.animationIsPlaying) {\n        continue;\n      }\n      if (component.data.property !== this.data.property) {\n        continue;\n      }\n      component.animationIsPlaying = false;\n    }\n  },\n\n  addEventListeners: function() {\n    var data = this.data;\n    var el = this.el;\n    addEventListeners(el, data.startEvents, this.onStartEvent);\n    addEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    addEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  removeEventListeners: function() {\n    var data = this.data;\n    var el = this.el;\n    removeEventListeners(el, data.startEvents, this.onStartEvent);\n    removeEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    removeEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  // hubs\n  cancelDelayedStart: function() {\n    if (this.delayTimeout) {\n      clearTimeout(this.delayTimeout);\n      this.delayTimeout = null;\n    }\n  },\n\n  setColorConfig: function(from, to) {\n    colorHelperFrom.set(from);\n    colorHelperTo.set(to);\n    from = this.fromColor;\n    to = this.toColor;\n    from.r = colorHelperFrom.r;\n    from.g = colorHelperFrom.g;\n    from.b = colorHelperFrom.b;\n    to.r = colorHelperTo.r;\n    to.g = colorHelperTo.g;\n    to.b = colorHelperTo.b;\n  }\n});\n\n/**\n * Given property name, check schema to see what type we are animating.\n * We just care whether the property is a vector.\n */\nfunction getPropertyType(el, property) {\n  var component;\n  var componentName;\n  var split;\n  var propertyName;\n\n  split = property.split(\".\");\n  componentName = split[0];\n  propertyName = split[1];\n  component = el.components[componentName] || components[componentName];\n\n  // Primitives.\n  if (!component) {\n    return null;\n  }\n\n  // Dynamic schema. We only care about vectors anyways.\n  if (propertyName && !component.schema[propertyName]) {\n    return null;\n  }\n\n  // Multi-prop.\n  if (propertyName) {\n    return component.schema[propertyName].type;\n  }\n\n  // Single-prop.\n  return component.schema.type;\n}\n\n/**\n * Convert object to radians.\n */\nfunction toRadians(obj) {\n  obj.x = THREE.Math.degToRad(obj.x);\n  obj.y = THREE.Math.degToRad(obj.y);\n  obj.z = THREE.Math.degToRad(obj.z);\n}\n\nfunction addEventListeners(el, eventNames, handler) {\n  var i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.addEventListener(eventNames[i], handler);\n  }\n}\n\nfunction removeEventListeners(el, eventNames, handler) {\n  var i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.removeEventListener(eventNames[i], handler);\n  }\n}\n\nfunction getRawProperty(el, path) {\n  var i;\n  var split;\n  var value;\n  split = splitDot(path);\n  value = el;\n  for (i = 0; i < split.length; i++) {\n    value = value[split[i]];\n  }\n  return value;\n}\n\nfunction setRawProperty(el, path, value, type) {\n  var i;\n  var split;\n  var propertyName;\n  var targetValue;\n\n  if (path.startsWith(\"object3D.rotation\")) {\n    value = THREE.Math.degToRad(value);\n  }\n\n  // Walk.\n  split = splitDot(path);\n  targetValue = el;\n  for (i = 0; i < split.length - 1; i++) {\n    targetValue = targetValue[split[i]];\n  }\n  propertyName = split[split.length - 1];\n\n  // Raw color.\n  if (type === TYPE_COLOR) {\n    if (\"r\" in targetValue[propertyName]) {\n      targetValue[propertyName].r = value.r;\n      targetValue[propertyName].g = value.g;\n      targetValue[propertyName].b = value.b;\n    } else {\n      targetValue[propertyName].x = value.r;\n      targetValue[propertyName].y = value.g;\n      targetValue[propertyName].z = value.b;\n    }\n    return;\n  }\n\n  targetValue[propertyName] = value;\n}\n\nfunction splitDot(path) {\n  if (path in splitCache) {\n    return splitCache[path];\n  }\n  splitCache[path] = path.split(\".\");\n  return splitCache[path];\n}\n\nfunction isRawProperty(data) {\n  return data.isRawProperty || data.property.startsWith(STRING_COMPONENTS) || data.property.startsWith(STRING_OBJECT3D);\n}\n","AFRAME.registerComponent(\"ambient-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.AmbientLight();\n    this.el.setObject3D(\"ambient-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n    this.rendererSystem = this.el.sceneEl.systems.renderer;\n  },\n\n  update(prevData) {\n    if (this.data.color !== prevData.color) {\n      this.light.color.set(this.data.color);\n      this.rendererSystem.applyColorCorrection(this.light.color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      this.light.intensity = this.data.intensity;\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"ambient-light\");\n  }\n});\n","/**\n * Instantiates and updates a THREE.AnimationMixer on an entity.\n * @component animation-mixer\n */\nAFRAME.registerComponent(\"animation-mixer\", {\n  initMixer(animations) {\n    this.mixer = new THREE.AnimationMixer(this.el.object3D);\n    this.el.object3D.animations = animations;\n    this.animations = animations;\n  },\n\n  tick: function(t, dt) {\n    if (this.mixer) {\n      this.mixer.update(dt / 1000);\n    }\n  }\n});\n","// This computation is expensive, so we run on at most one avatar per frame, including quiet avatars.\n// However if we detect an avatar is seen speaking (its volume is above DISABLE_AT_VOLUME_THRESHOLD)\n// then we continue analysis for at least DISABLE_GRACE_PERIOD_MS and disable doing it every frame if\n// the avatar is quiet during that entire duration (eg they are muted)\nconst DISABLE_AT_VOLUME_THRESHOLD = 0.00001;\nconst DISABLE_GRACE_PERIOD_MS = 10000;\n\n/**\n * Emits audioFrequencyChange events based on a networked audio source\n * @namespace avatar\n * @component networked-audio-analyser\n */\nAFRAME.registerComponent(\"networked-audio-analyser\", {\n  async init() {\n    this.volume = 0;\n    this.prevVolume = 0;\n    this.smoothing = 0.3;\n    this.threshold = 0.01;\n    this._updateAnalysis = this._updateAnalysis.bind(this);\n    this._runScheduledWork = this._runScheduledWork.bind(this);\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._updateAnalysis, \"audio-analyser\");\n    this.el.addEventListener(\"sound-source-set\", event => {\n      const ctx = THREE.AudioContext.getContext();\n      this.analyser = ctx.createAnalyser();\n      this.analyser.fftSize = 32;\n      this.levels = new Uint8Array(this.analyser.frequencyBinCount);\n      event.detail.soundSource.connect(this.analyser);\n    });\n  },\n\n  remove: function() {\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._runScheduledWork, \"audio-analyser\");\n  },\n\n  tick: function(t) {\n    if (!this.avatarIsQuiet) {\n      this._updateAnalysis(t);\n    }\n  },\n\n  _runScheduledWork: function() {\n    if (this.avatarIsQuiet) {\n      this._updateAnalysis();\n    }\n  },\n\n  // Updates the analysis/volume. If t is passed, that implies this is called via tick\n  // and so as a performance optimization will check to see if it's been at least DISABLE_GRACE_PERIOD_MS\n  // since the last volume was seen above DISABLE_AT_VOLUME_THRESHOLD, and if so, will disable\n  // tick updates until the volume exceeds the level again.\n  _updateAnalysis: function(t) {\n    if (!this.analyser) return;\n\n    // take care with compatibility, e.g. safari doesn't support getFloatTimeDomainData\n    this.analyser.getByteTimeDomainData(this.levels);\n\n    let sum = 0;\n    for (let i = 0; i < this.levels.length; i++) {\n      const amplitude = (this.levels[i] - 128) / 128;\n      sum += amplitude * amplitude;\n    }\n    let currVolume = Math.sqrt(sum / this.levels.length);\n    if (currVolume < this.threshold) {\n      currVolume = 0;\n    }\n    this.volume = this.smoothing * currVolume + (1 - this.smoothing) * this.prevVolume;\n    this.prevVolume = this.volume;\n\n    if (this.volume < DISABLE_AT_VOLUME_THRESHOLD) {\n      if (t && this.lastSeenVolume && this.lastSeenVolume < t - DISABLE_GRACE_PERIOD_MS) {\n        this.avatarIsQuiet = true;\n      }\n    } else {\n      if (t) {\n        this.lastSeenVolume = t;\n      }\n\n      this.avatarIsQuiet = false;\n    }\n  }\n});\n\n/**\n * Sets an entity's scale base on audioFrequencyChange events.\n * @namespace avatar\n * @component scale-audio-feedback\n */\nAFRAME.registerComponent(\"scale-audio-feedback\", {\n  schema: {\n    minScale: { default: 1 },\n    maxScale: { default: 2 }\n  },\n\n  init() {\n    this._playerCamera = document.getElementById(\"player-camera\").object3D;\n    this._playerCameraWorldPosition = new THREE.Vector3();\n    this._worldPosition = new THREE.Vector3();\n  },\n\n  tick() {\n    // TODO: come up with a cleaner way to handle this.\n    // bone's are \"hidden\" by scaling them with bone-visibility, without this we would overwrite that.\n    if (!this.el.object3D.visible) return;\n\n    const { minScale, maxScale } = this.data;\n\n    const audioAnalyser = this.el.components[\"networked-audio-analyser\"];\n\n    if (!audioAnalyser) return;\n\n    const { object3D } = this.el;\n\n    this._playerCameraWorldPosition.setFromMatrixPosition(this._playerCamera.matrixWorld);\n    this._worldPosition.setFromMatrixPosition(object3D.matrixWorld);\n    const distance = this._worldPosition.distanceTo(this._playerCameraWorldPosition) / 10;\n\n    const scale = Math.min(maxScale, minScale + (maxScale - minScale) * audioAnalyser.volume * 8 * distance);\n\n    object3D.scale.setScalar(scale);\n    object3D.matrixNeedsUpdate = true;\n  }\n});\n","/**\n * Sets the CSS class on an entity.\n * @component css-class\n */\nAFRAME.registerComponent(\"css-class\", {\n  schema: {\n    type: \"string\"\n  },\n  multiple: true,\n  init() {\n    this.el.classList.add(this.data);\n  },\n  update(oldData) {\n    if (this.data !== oldData) {\n      this.el.classList.remove(oldData);\n      this.el.classList.add(this.data);\n    }\n  },\n  remove() {\n    this.el.classList.remove(this.data);\n  }\n});\n","/* global CANNON */\n/**\n * Floats a duck based on its scale.\n * @component duck\n */\nAFRAME.registerComponent(\"duck\", {\n  schema: {\n    initialForce: { default: 0 },\n    maxForce: { default: 6.5 },\n    maxScale: { default: 5 }\n  },\n\n  init: function() {\n    this.physicsSystem = this.el.sceneEl.systems.physics;\n    this.hasBody = false;\n    this.position = new CANNON.Vec3();\n    this.force = new CANNON.Vec3(0, this.data.initialForce, 0);\n    this.initialScale = this.el.object3D.scale.x;\n    this.maxScale = this.data.maxScale * this.initialScale;\n  },\n\n  play: function() {\n    this.physicsSystem.addComponent(this);\n  },\n\n  pause: function() {\n    this.physicsSystem.removeComponent(this);\n  },\n\n  beforeStep: function() {\n    if (this.el.body && NAF.utils.isMine(this.el)) {\n      const currentScale = this.el.object3D.scale.x;\n      const ratio = Math.min(1, (currentScale - this.initialScale) / (this.maxScale - this.initialScale));\n      const force = ratio * this.data.maxForce;\n      if (force > 0) {\n        const angle = Math.random() * Math.PI * 2;\n        const x = Math.cos(angle);\n        const z = Math.sin(angle);\n        this.force.set(x, force, z);\n        this.position.set(x * 0.01, 0, z * 0.01);\n        this.el.object3D.matrixNeedsUpdate = true;\n        this.el.body.applyForce(this.force, this.position);\n      }\n    }\n  }\n});\n","/* global CANNON */\nAFRAME.registerComponent(\"heightfield\", {\n  init() {\n    this.el.addEventListener(\"componentinitialized\", e => {\n      if (e.detail.name === \"static-body\") {\n        this.generateAndAddHeightfield(this.el.components[\"static-body\"]);\n      }\n    });\n    this.el.setAttribute(\"static-body\", { shape: \"none\", mass: 0 });\n  },\n  generateAndAddHeightfield(body) {\n    const { offset, distance, data } = this.data;\n\n    const orientation = new CANNON.Quaternion();\n    orientation.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), -Math.PI / 2);\n\n    const rotation = new CANNON.Quaternion();\n    rotation.setFromAxisAngle(new CANNON.Vec3(0, 1, 0), -Math.PI / 2);\n    rotation.mult(orientation, orientation);\n\n    const cannonOffset = new CANNON.Vec3(offset.x, offset.y, offset.z);\n\n    const shape = new CANNON.Heightfield(data, { elementSize: distance });\n\n    body.addShape(shape, cannonOffset, orientation);\n  }\n});\n","AFRAME.registerComponent(\"hemisphere-light\", {\n  schema: {\n    skyColor: { type: \"color\" },\n    groundColor: { type: \"color\" },\n    intensity: { default: 1.0 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.HemisphereLight();\n    this.light.position.set(0, 0, 0);\n    this.light.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"hemisphere-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n  },\n\n  update(prevData) {\n    if (this.data.skyColor !== prevData.skyColor) {\n      this.light.color.set(this.data.skyColor);\n    }\n\n    if (this.data.groundColor !== prevData.groundColor) {\n      this.light.groundColor.set(this.data.groundColor);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      this.light.intensity = this.data.intensity;\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"hemisphere-light\");\n  }\n});\n","/**\n * Hides entities based on the scene's quality mode\n * @namespace environment\n * @component hide-when-quality\n */\nAFRAME.registerComponent(\"hide-when-quality\", {\n  schema: { type: \"string\", default: \"low\" },\n\n  init() {\n    this.onQualityChanged = this.onQualityChanged.bind(this);\n    this.el.sceneEl.addEventListener(\"quality-changed\", this.onQualityChanged);\n  },\n\n  onQualityChanged(event) {\n    this.updateComponentState(event.detail);\n  },\n\n  update(oldData) {\n    if (this.data !== oldData) {\n      this.updateComponentState(window.APP.quality);\n    }\n  },\n\n  updateComponentState(quality) {\n    this.el.setAttribute(\"visible\", quality !== this.data);\n  }\n});\n","AFRAME.registerComponent(\"point-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    range: { default: 0 },\n    decay: { default: 2 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.PointLight();\n    this.light.shadow.camera.matrixAutoUpdate = true;\n    this.el.setObject3D(\"point-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n    this.rendererSystem = this.el.sceneEl.systems.renderer;\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      const color = new THREE.Color(this.data.color);\n      this.rendererSystem.applyColorCorrection(color);\n      light.color.copy(color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.range !== prevData.range) {\n      light.distance = this.data.range;\n    }\n\n    if (this.data.decay !== prevData.decay) {\n      light.decay = this.data.decay;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"point-light\");\n  }\n});\n","AFRAME.registerComponent(\"spot-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    range: { default: 0 },\n    decay: { default: 2 },\n    innerConeAngle: { default: 0 },\n    outerConeAngle: { default: Math.PI / 4.0 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.SpotLight();\n    this.light.position.set(0, 0, 0);\n    this.light.target.position.set(0, 0, 1);\n    this.light.add(this.light.target);\n    this.light.matrixNeedsUpdate = true;\n    this.light.target.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"spot-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      light.color.set(this.data.color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.range !== prevData.range) {\n      light.distance = this.data.range;\n    }\n\n    if (this.data.decay !== prevData.decay) {\n      light.decay = this.data.decay;\n    }\n\n    if (this.data.innerConeAngle !== prevData.innerConeAngle || this.data.outerConeAngle !== prevData.outerConeAngle) {\n      light.angle = this.data.outerConeAngle;\n      light.penumbra = 1.0 - this.data.innerConeAngle / this.data.outerConeAngle;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"spot-light\");\n  }\n});\n","/* global AFRAME */\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nAFRAME.registerComponent(\"floaty-object\", {\n  schema: {\n    // Make the object locked/kinematic upon load\n    autoLockOnLoad: { default: false },\n\n    // Make the object kinematic immediately upon release\n    autoLockOnRelease: { default: false },\n\n    // On release, modify the gravity based upon gravitySpeedLimit. If less than this, let the object float\n    // otherwise apply releaseGravity.\n    modifyGravityOnRelease: { default: false },\n\n    // Gravity to apply if object is thrown at a speed greated than speed limit.\n    releaseGravity: { default: -2 },\n\n    // If true, the degree to which angular rotation is allowed when floating is reduced (useful for 2d media)\n    reduceAngularFloat: { default: false },\n\n    // Velocity speed limit under which gravity will not be added if modifyGravityOnRelease is true\n    gravitySpeedLimit: { default: 1.85 } // Set to 0 to never apply gravity\n  },\n\n  init() {\n    this.onGrab = this.onGrab.bind(this);\n    this.onRelease = this.onRelease.bind(this);\n  },\n\n  tick() {\n    if (!this.ammoBody) {\n      this.ammoBody = this.el.components[\"ammo-body\"];\n    }\n\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const isHeld = interaction.isHeld(this.el);\n    if (isHeld && !this.wasHeld) {\n      this.onGrab();\n    }\n    if (this.wasHeld && !isHeld) {\n      this.onRelease();\n    }\n\n    if (!isHeld && this._makeStaticWhenAtRest) {\n      const isMine = this.el.components.networked && NAF.utils.isMine(this.el);\n      const linearThreshold = this.ammoBody.data.linearSleepingThreshold;\n      const angularThreshold = this.ammoBody.data.angularSleepingThreshold;\n      const isAtRest =\n        this.ammoBody.body.getLinearVelocity().length2() < linearThreshold * linearThreshold &&\n        this.ammoBody.body.getAngularVelocity().length2() < angularThreshold * angularThreshold;\n\n      if (isAtRest && isMine) {\n        this.el.setAttribute(\"ammo-body\", { type: \"static\" });\n      }\n\n      if (isAtRest || !isMine) {\n        this._makeStaticWhenAtRest = false;\n      }\n    }\n\n    this.wasHeld = isHeld;\n  },\n\n  play() {\n    // We do this in play instead of in init because otherwise NAF.utils.isMine fails\n    if (this.hasBeenHereBefore) return;\n    this.hasBeenHereBefore = true;\n    if (this.el.body) {\n      this._onBodyLoaded();\n    } else {\n      this._onBodyLoaded = this._onBodyLoaded.bind(this);\n      this.el.addEventListener(\"body-loaded\", this._onBodyLoaded, { once: true });\n    }\n  },\n\n  setLocked(locked) {\n    if (this.el.components.networked && !NAF.utils.isMine(this.el)) return;\n\n    this.locked = locked;\n    this.el.setAttribute(\"ammo-body\", { type: locked ? \"kinematic\" : \"dynamic\" });\n  },\n\n  _onBodyLoaded() {\n    if (this.data.autoLockOnLoad) {\n      this.setLocked(true);\n    }\n  },\n\n  onRelease() {\n    if (this.data.modifyGravityOnRelease) {\n      if (\n        this.data.gravitySpeedLimit === 0 ||\n        this.ammoBody.getVelocity().length2() < this.data.gravitySpeedLimit * this.data.gravitySpeedLimit\n      ) {\n        this.el.setAttribute(\"ammo-body\", {\n          gravity: { x: 0, y: 0, z: 0 },\n          angularDamping: this.data.reduceAngularFloat ? 0.98 : 0.5,\n          linearDamping: 0.95,\n          linearSleepingThreshold: 0.1,\n          angularSleepingThreshold: 0.1,\n          collisionFilterMask: COLLISION_LAYERS.HANDS\n        });\n\n        this._makeStaticWhenAtRest = true;\n      } else {\n        this.el.setAttribute(\"ammo-body\", {\n          gravity: { x: 0, y: this.data.releaseGravity, z: 0 },\n          angularDamping: 0.01,\n          linearDamping: 0.01,\n          linearSleepingThreshold: 1.6,\n          angularSleepingThreshold: 2.5,\n          collisionFilterMask: COLLISION_LAYERS.DEFAULT_INTERACTABLE\n        });\n      }\n    } else {\n      this.el.setAttribute(\"ammo-body\", { collisionFilterMask: COLLISION_LAYERS.DEFAULT_INTERACTABLE });\n    }\n\n    if (this.data.autoLockOnRelease) {\n      this.setLocked(true);\n    }\n  },\n\n  onGrab() {\n    this.el.setAttribute(\"ammo-body\", {\n      collisionFilterMask: COLLISION_LAYERS.HANDS\n    });\n    this.setLocked(false);\n  },\n\n  remove() {\n    this.el.removeEventListener(\"body-loaded\", this._onBodyLoaded);\n    if (this.stuckTo) {\n      const stuckTo = this.stuckTo;\n      delete this.stuckTo;\n      stuckTo._unstickObject();\n    }\n  }\n});\n","const sizeVec = new THREE.Vector3();\nconst boundingBoxWorldPositionVec = new THREE.Vector3();\nconst colliderWorldPositionVec = new THREE.Vector3();\n\nAFRAME.registerComponent(\"trigger-volume\", {\n  schema: {\n    colliders: { type: \"selectorAll\" },\n    size: { type: \"vec3\", default: { x: 1, y: 1, z: 1 } },\n    target: { type: \"selector\" },\n    enterComponent: { type: \"string\" },\n    enterProperty: { type: \"string\" },\n    enterValue: {\n      default: \"\",\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    },\n    leaveComponent: { type: \"string\" },\n    leaveProperty: { type: \"string\" },\n    leaveValue: {\n      default: \"\",\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n  init() {\n    this.boundingBox = new THREE.Box3();\n    this.collidingLastFrame = {};\n  },\n  update() {\n    this.el.object3D.getWorldPosition(boundingBoxWorldPositionVec);\n    sizeVec.copy(this.data.size);\n    this.boundingBox.setFromCenterAndSize(boundingBoxWorldPositionVec, sizeVec);\n  },\n  tick() {\n    const colliders = this.data.colliders;\n\n    for (let i = 0; i < colliders.length; i++) {\n      const collider = colliders[i];\n      const object3D = collider.object3D;\n\n      object3D.getWorldPosition(colliderWorldPositionVec);\n      const isColliding = this.boundingBox.containsPoint(colliderWorldPositionVec);\n      const collidingLastFrame = this.collidingLastFrame[object3D.id];\n\n      if (isColliding && !collidingLastFrame) {\n        this.data.target.setAttribute(this.data.enterComponent, this.data.enterProperty, this.data.enterValue);\n      } else if (!isColliding && collidingLastFrame) {\n        this.data.target.setAttribute(this.data.leaveComponent, this.data.leaveProperty, this.data.leaveValue);\n      }\n\n      this.collidingLastFrame[object3D.id] = isColliding;\n    }\n  }\n});\n","// HACK: Setting videoPaused on media-video doesn't work if you are the owner.\n// This component gets around that by calling .togglePlaying() to play/pause the video based on a property change.\nAFRAME.registerComponent(\"video-pause-state\", {\n  schema: {\n    paused: { default: false }\n  },\n\n  init() {\n    this.onPauseStateChange = this.onPauseStateChange.bind(this);\n    this.videoComponent = this.el.components[\"media-video\"];\n\n    if (this.videoComponent) {\n      this.onVideoLoaded();\n    } else {\n      this.onVideoLoaded = this.onVideoLoaded.bind(this);\n      this.el.addEventListener(\"video-loaded\", this.onVideoLoaded);\n    }\n  },\n\n  onVideoLoaded() {\n    this.videoComponent = this.el.components[\"media-video\"];\n    this.video = this.videoComponent.video;\n    this.video.addEventListener(\"pause\", this.onPauseStateChange);\n  },\n\n  onPauseStateChange() {\n    this.el.setAttribute(\"paused\", this.video.paused);\n  },\n\n  update() {\n    if (this.video && this.data.paused !== this.video.paused) {\n      this.videoComponent.togglePlaying();\n    }\n  },\n\n  remove() {\n    this.video.removeEventListener(\"pause\", this.onPauseStateChange);\n    this.el.removeEventListener(\"video-loaded\", this.onVideoLoaded);\n  }\n});\n","/**\n * Logs all events dispatched on an entity\n * @namespace debug\n * @component log-events\n */\nAFRAME.registerComponent(\"log-events\", {\n  init: function() {\n    const el = this.el;\n    const log = this.log.bind(this);\n    const origDispatch = this.el.dispatchEvent;\n    this.el.dispatchEvent = function() {\n      log(Array.from(arguments));\n      return origDispatch.apply(el, arguments);\n    };\n  },\n  log: function([e]) {\n    if ([\"componentchanged\"].includes(e.type)) return;\n    let firstObject = true;\n    const replacer = (k, x) => {\n      if (!x) return x;\n      if (typeof x === \"object\" && x.length === undefined) {\n        if (firstObject) {\n          firstObject = false;\n          return x;\n        }\n        return \"[object]\";\n      }\n      return x;\n    };\n    console.info(`log-events: ${this.el.id} ${e.type} ${JSON.stringify(e.detail, replacer)}`);\n  }\n});\n\n/**\n * Logs all life cycle phases on an entity.\n * @namespace debug\n * @component lifecycle-checker\n */\nAFRAME.registerComponent(\"lifecycle-checker\", {\n  schema: {\n    name: { type: \"string\" },\n    tick: { default: false }\n  },\n  init: function() {\n    this.log(\"init\");\n  },\n  update: function() {\n    this.log(\"update\");\n  },\n  tick: function() {\n    if (this.data.tick) {\n      this.log(\"tick\");\n    }\n  },\n  remove: function() {\n    this.log(\"remove\");\n  },\n  pause: function() {\n    this.log(\"pause\");\n  },\n  play: function() {\n    this.log(\"play\");\n  },\n\n  log: function(method) {\n    console.info(`lifecycle-checker:${this.data.name} ${method}`);\n  }\n});\n","const { Pathfinding } = require(\"three-pathfinding\");\n\nAFRAME.registerSystem(\"nav\", {\n  init: function() {\n    this.pathfinder = new Pathfinding();\n  },\n\n  loadMesh: function(mesh, zone) {\n    this.el.object3D.updateMatrixWorld();\n\n    if (this.mesh && this.mesh.geometry && this.mesh.geometry.dispose) {\n      this.mesh.geometry.dispose();\n    }\n\n    this.mesh = mesh;\n    const geometry = new THREE.Geometry().fromBufferGeometry(mesh.geometry);\n    geometry.applyMatrix(mesh.matrixWorld);\n    this.pathfinder.setZoneData(zone, Pathfinding.createZone(geometry));\n    this.el.sceneEl.emit(\"nav-mesh-loaded\");\n  }\n});\n","export const createImageBitmap =\n  window.createImageBitmap ||\n  async function(data) {\n    return new Promise(resolve => {\n      // https://dev.to/nektro/createimagebitmap-polyfill-for-safari-and-edge-228\n      // https://gist.github.com/MonsieurV/fb640c29084c171b4444184858a91bc7\n\n      let srcUrl;\n      if (data instanceof Blob) {\n        srcUrl = URL.createObjectURL(data);\n      } else {\n        const canvas = document.createElement(\"canvas\");\n        const ctx = canvas.getContext(\"2d\");\n        canvas.width = data.width;\n        canvas.height = data.height;\n        ctx.putImageData(data, 0, 0);\n        srcUrl = canvas.toDataURL();\n      }\n      const img = document.createElement(\"img\");\n\n      img.addEventListener(\"load\", () => resolve(img));\n\n      img.src = srcUrl;\n    });\n  };\n\nexport function disposeImageBitmap(imageBitmap) {\n  if (imageBitmap instanceof HTMLImageElement && imageBitmap.src.startsWith(\"blob:\")) {\n    URL.revokeObjectURL(imageBitmap.src);\n  } else {\n    imageBitmap.close && imageBitmap.close();\n  }\n}\n","/**\n * Listens to events from an event source and re-emits them on this entity\n * @component event-repeater\n */\nAFRAME.registerComponent(\"event-repeater\", {\n  schema: {\n    eventSource: { type: \"selector\" },\n    events: { type: \"array\" }\n  },\n\n  play: function() {\n    this.data.eventListeners = [];\n    const events = this.data.events;\n    for (let i = 0; i < events.length; i++) {\n      const event = events[i];\n      this.data.eventListeners[event] = this._handleEvent.bind(this, event);\n      this.data.eventSource.addEventListener(event, this.data.eventListeners[event]);\n    }\n  },\n\n  pause: function() {\n    const events = this.data.events;\n    for (let i = 0; i < events.length; i++) {\n      const event = events[i];\n      this.data.eventSource.removeEventListener(event, this.data.eventListeners[event]);\n    }\n    this.data.eventListeners = [];\n  },\n\n  _handleEvent: function(event, e) {\n    this.el.emit(event, e.detail);\n  }\n});\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport const ReactAudioContext = React.createContext({});\n\nexport const hudHoverSound = \"play_sound-hud_hover_start\";\n\nexport const WithHoverSound = ({ sound, children }) => {\n  return (\n    <ReactAudioContext.Consumer>\n      {context => {\n        return React.cloneElement(children, {\n          onMouseEnter: e => {\n            if (context && context.playSound) {\n              context.playSound(sound || hudHoverSound);\n            }\n            children.props.onMouseEnter && children.props.onMouseEnter(e);\n          }\n        });\n      }}\n    </ReactAudioContext.Consumer>\n  );\n};\n\nWithHoverSound.propTypes = {\n  children: PropTypes.object,\n  sound: PropTypes.string\n};\n","export default function nextTick() {\n  return new Promise(resolve => {\n    setTimeout(resolve, 0);\n  });\n}\n"],"sourceRoot":""}