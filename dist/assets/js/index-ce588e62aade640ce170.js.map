{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/utils/fullscreen.js","webpack:///./src/assets/environments/environments.js","webpack:///./src/react-components/auth-dialog.js","webpack:///./src/react-components/join-us-dialog.js","webpack:///./src/react-components/report-dialog.js","webpack:///./src/react-components/updates-dialog.js","webpack:///./src/react-components/home-root.js","webpack:///./src/index.js","webpack:///./src/utils/name-generation.js","webpack:///./src/utils/phoenix-utils.js","webpack:///./src/assets/images/hub-preview-light-no-shadow.png","webpack:///./src/assets/stylesheets/index.scss","webpack:///./src/assets/stylesheets/sign-in-dialog.scss","webpack:///./src/react-components/sign-in-dialog.js","webpack:///./src/react-components/dialog-container.js","webpack:///./src/utils/i18n.js","webpack:///./src/utils/video-utils.js","webpack:///./src/utils/mask-email.js","webpack:///./src/utils/auth-channel.js","webpack:///./src/utils/identity.js","webpack:///./src/storage/store.js","webpack:///./src/assets/avatars/avatars.js","webpack:///./src/utils/focus-utils.js","webpack:///./src/telemetry.js","webpack:///./src/react-components/wrap-with-audio.js","webpack:///./src/assets/video/home.webm","webpack:///./src/assets/video/home.mp4","webpack:///./src/assets/images/discord-logo-small.png","webpack:///./src/assets/images/moz-logo-black.png"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","7","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","__webpack_exports__","showFullScreenIfAvailable","showFullScreenIfWasFullScreen","screenfull__WEBPACK_IMPORTED_MODULE_0__","screenfull__WEBPACK_IMPORTED_MODULE_0___default","hasEnteredFullScreenThisSession","AFRAME","utils","device","isMobile","isMobileVR","isIOS","screenfull","enabled","request","isFullscreen","ENVIRONMENT_URLS","concat","map","x","process","AuthDialog","Component","render","authOrigin","verifying","this","props","formatMessage","intl","title","id","react_default","a","createElement","dialog_container","_extends","index_es","className","PropTypes","bool","string","injectIntl","JoinUsDialog","join_us_dialog_extends","href","target","rel","ReportDialog","report_dialog_extends","wrap_with_audio","UpdatesDialog","[object Object]","args","super","updates_dialog_defineProperty","mailingListEmail","mailingListPrivacy","_this$props","onSubmittedEmail","other","_objectWithoutProperties","onSubmit","async","e","preventDefault","stopPropagation","state","payload","email","newsletters","privacy","fmt","source_url","document","location","fetch","body","formurlencoded","method","headers","content-type","then","type","onChange","setState","required","placeholder","checked","func","addLocaleData","en","HomeRoot","constructor","home_root_defineProperty","environments","dialog","signedIn","DialogClass","_objectSpread","onClose","closeDialog","showDialog","closable","videoEl","querySelector","playbackRate","playVideoWithStopOnBlur","SignInDialog","message","messages","onSignIn","authComplete","authChannel","startAuthentication","authStarted","signOut","sceneUrlBase","sceneInfoUrl","sceneId","scene","json","scenes","attribution","split","join","authors","organization","scene_id","meta","images","srcset","screenshot_url","environmentLoads","src","res","bundle_url","Promise","all","trigger","createAndRedirectToNewHub","componentDidMount","authVerify","showAuthDialog","verifyAuth","loadEnvironmentFromScene","loadEnvironments","loadHomeVideo","listSignup","showUpdatesDialog","report","showReportDialog","channel","connectToReticulum","authTopic","resolve","reject","receive","token","authToken","mainContentClassNames","classNames","styles","mainContent","noninteractive","locale","lang","home","headerContent","titleAndNav","onClick","links","signIn","maskEmail","onLinkClicked","showSignInDialog","heroContent","heroPanel","container","logo","hubLogo","blurb","ctaButtons","primaryButton","ctaButton","rightPanel","secondaryLink","discordLogoSmall","footerContent","top","link","showJoinUsDialog","mozLogo","store","initialEnvironment","qs","URLSearchParams","search","registerTelemetry","pathname","startsWith","substring","Store","AuthChannel","setSocket","root","home_root","has","ReactDOM","getElementById","adjectives","nouns","generateHubName","randItem","set","Math","floor","random","charAt","toUpperCase","getReticulumFetchUrl","invalidateReticulumMeta","getReticulumMeta","getLandingPageForPhoto","fetchReticulumAuthenticated","getPresenceProfileForSession","migrateChannelToSocket","path","absolute","reticulumMeta","invalidatedReticulumMetaThisSession","version","getAttribute","pool","phx_host","phxHostOverride","debug","params","getNewSocketUrl","socketProtocol","protocol","socketHost","socketPort","includes","socketUrl","console","log","socketSettings","logger","kind","msg","socket","Socket","connect","onError","endPointPath","URL","endPoint","newEndPoint","photoUrl","parsedUrl","replace","url","APP","credentials","retUrl","authorization","JSON","stringify","text","parse","sceneUrl","createUrl","hub","default_environment_gltf_bundle_url","error","update","creatorAssignmentToken","creator_assignment_token","creatorAssignmentTokens","hubId","hub_id","host","presences","sessionId","presence","entries","find","k","metas","profile","oldChannel","topic","bindings","item","on","event","callback","pushBuffer","timeout","oldJoinPush","joinPush","recHooks","status","hero-content","cta-buttons","primary-button","loading-text","loadingText","main-content","header-content","title-and-nav","sign-in","video-container","videoContainer","background-video","backgroundVideo","hero-panel","cta-button","hero-video","heroVideo","have-code","haveCode","secondary-link","footer-content","moz-logo","bottom","email-field","emailField","next-button","nextButton","continue-button","continueButton","sign-in-form","signInForm","sign-in-complete","signInComplete","terms","_defineProperty","contents","react__WEBPACK_IMPORTED_MODULE_0___default","react_intl__WEBPACK_IMPORTED_MODULE_2__","onContinue","continueText","onFocus","handleTextFieldFocus","onBlur","handleTextFieldBlur","_dialog_container__WEBPACK_IMPORTED_MODULE_4__","DialogContainer","currentTarget","onKeyDown","onContainerClicked","addEventListener","componentWillUnmount","removeEventListener","wide","_wrap_with_audio__WEBPACK_IMPORTED_MODULE_3__","_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_5__","icon","faTimes","children","node","isRequired","_assets_translations_data_json__WEBPACK_IMPORTED_MODULE_0__","navigatorLang","navigator","languages","language","userLanguage","toLowerCase","localeData","toggleVideo","hasFocus","play","pause","emailParts","emailIdentity","emailDomain","min","hubChannel","resetToRandomLegacyAvatar","_signedIn","uuid","origin","names","selectRandom","arr","avatarIds","avatars","av","generateDefaultProfile","avatarId","LOCAL_STORE_KEY","STORE_STATE_CACHE_KEY","OAUTH_FLOW_CREDENTIALS_KEY","validator","Validator","SCHEMA","definitions","additionalProperties","properties","displayName","pattern","personalAvatarId","activity","hasFoundFreeze","hasChangedName","hasAcceptedProfile","lastEnteredAt","hasPinned","hasRotated","hasRecentered","hasScaled","hasHoveredInWorldHud","settings","lastUsedMicDeviceId","confirmedDiscordRooms","items","uploadPromotionTokens","fileId","promotionToken","$ref","EventTarget","localStorage","getItem","setItem","oauthFlowCredentials","Cookies","getJSON","remove","credentialsAccountId","jwtDecode","sub","resetConfirmedDiscordRooms","arrayMerge","destinationArray","sourceArray","resetTipActivityFlags","newState","mergeOpts","finalState","merge","valid","validate","Error","dispatchEvent","CustomEvent","model","thumbnail","_fullscreen__WEBPACK_IMPORTED_MODULE_1__","detect","require","browser","isExitingFullscreenDueToFocus","exit","focus","select","raven_js__WEBPACK_IMPORTED_MODULE_0__","raven_js__WEBPACK_IMPORTED_MODULE_0___default","ga","trackedPage","trackedTitle","sentryDsn","SENTRY_DSN","gaTrackingId","GA_TRACKING_ID","Raven","config","install","ReactAudioContext","WithHoverSound","react__WEBPACK_IMPORTED_MODULE_0__","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","React","createContext","sound","Consumer","context","cloneElement","onMouseEnter","playSound","propTypes"],"mappings":"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CA,QACA,UACA,UACA,OACA,SACA,UACA,WACA,SACA,WACA,aACA,WACA,SACA,UACA,UACA,OACA,QACA,QACA,UACA,OACA,YACA,WACA,SACA,WACA,OACA,WACA,WACA,SACA,QACA,YACA,MACA,WACA,SACA,UACA,QACA,WACA,WACA,QACA,QACA,MACA,QACA,YACA,OACA,UACA,SACA,cACA,WACA,UACA,YACA,UACA,WACA,YACA,UACA,aACA,SACA,WACA,UACA,WACA,SACA,YACA,UACA,QACA,OACA,OACA,QACA,YACA,QACA,SACA,SACA,QACA,UACA,aACA,SACA,cACA,YACA,WACA,OACA,QACA,WACA,UACA,WACA,WACA,cACA,cACA,OACA,SACA,QACA,YACA,UACA,WACA,SACA,WACA,eACA,aACA,OACA,SACA,MACA,WACA,SACA,QACA,SACA,UACA,QACA,QACA,SACA,SACA,WACA,OACA,UACA,aACA,aACA,YACA,YACA,UACA,SACA,UACA,aACA,aACA,OACA,YACA,WACA,WACA,SACA,YACA,WACA,aACA,aACA,cACA,UACA,UACA,OACA,QACA,QACA,SACA,OACA,WACA,OACA,YACA,QACA,UACA,UACA,WACA,QACA,WACA,YACA,QACA,YACA,QACA,OACA,YACA,aACA,QACA,SACA,SACA,QACA,QACA,QACA,MACA,QACA,WACA,QACA,WACA,QACA,WACA,UACA,SACA,OACA,QACA,MACA,UACA,QACA,UACA,QACA,QACA,QACA,WACA,WACA,SACA,WACA,WACA,cACA,gBACA,WACA,aACA,QACA,aACA,YACA,cACA,WACA,aACA,UACA,YACA,UACA,YACA,YACA,aACA,YACA,WACA,OACA,WACA,OACA,YACA,QACA,SACA,WACA,WACA,SACA,SACA,OACA,WACA,WACA,UACA,YACA,SACA,UACA,YACA,aACA,QACA,SACA,eACA,UACA,QACA,SACA,UACA,YACA,OACA,MACA,UACA,UACA,WACA,WACA,QACA,QACA,WACA,SACA,WACA,WACA,aACA,SACA,aACA,cACA,SACA,aACA,WACA,SACA,SACA,OACA,QACA,SACA,SACA,SACA,UACA,OACA,WACA,QACA,aACA,SACA,UACA,UACA,WACA,YACA,YACA,QACA,UACA,YACA,QACA,SACA,UACA,UACA,UACA,UACA,OACA,QACA,OACA,SACA,YACA,UACA,YACA,cACA,WACA,UACA,eACA,SACA,OACA,cACA,WACA,YACA,SACA,WACA,UACA,YACA,UACA,WACA,WACA,SACA,YACA,UACA,OACA,WACA,QACA,YACA,WACA,WACA,QACA,QACA,SACA,OACA,YACA,SACA,eACA,aACA,WACA,SACA,SACA,YACA,SACA,OACA,WACA,YACA,QACA,QACA,OACA,OACA,QACA,SACA,UACA,UACA,SACA,UACA,OACA,WACA,UACA,WACA,YACA,WACA,UACA,cACA,QACA,YACA,OACA,QACA,WACA,OACA,QACA,OACA,gBACA,UACA,YACA,cACA,SACA,QACA,SACA,WACA,WACA,WACA,WACA,OACA,UACA,OACA,QACA,SACA,SACA,SACA,WACA,SACA,SACA,OACA,OACA,UACA,UACA,QACA,SACA,eACA,cACA,WACA,UACA,cACA,SACA,YACA,SACA,cACA,aACA,YACA,SACA,QACA,SACA,WACA,QACA,UACA,WACA,YACA,YACA,cACA,QACA,OACA,YACA,YACA,YACA,YACA,aACA,YACA,WACA,QACA,OACA,WACA,QACA,WACA,aACA,SACA,WACA,WACA,SACA,YACA,UACA,UACA,aACA,MACA,OACA,aACA,WACA,WACA,YACA,cACA,QACA,QACA,UACA,gBACA,WACA,OACA,UACA,SACA,SACA,SACA,aACA,SACA,UACA,WACA,WACA,SACA,UACA,UACA,WACA,UACA,QACA,aACA,aACA,QACA,iBACA,UACA,SACA,SACA,WACA,SACA,QACA,SACA,QACA,cACA,WACA,UACA,SACA,WACA,WACA,QACA,UACA,YACA,aACA,aACA,SACA,SACA,UACA,SACA,UACA,QACA,YACA,SACA,UACA,WACA,WACA,YACA,aACA,UACA,YACA,YACA,QACA,UACA,SACA,WACA,OACA,UACA,SACA,WACA,QACA,QACA,OACA,cACA,YACA,WACA,UACA,WACA,SACA,cACA,SACA,SACA,WACA,OACA,WACA,QACA,QACA,UACA,QACA,QACA,SACA,YACA,SACA,cACA,cACA,QACA,QACA,QACA,QACA,WACA,WACA,YACA,eACA,aACA,aACA,OACA,aACA,cACA,YACA,SACA,QACA,UACA,WACA,OACA,OACA,UACA,WACA,SACA,aACA,SACA,UACA,UACA,SACA,QACA,QACA,SACA,aACA,YACA,QACA,QACA,cACA,UACA,WACA,cACA,SACA,WACA,OACA,SACA,OACA,SACA,WACA,QACA,QACA,UACA,aACA,SACA,WACA,MACA,QACA,YACA,UACA,OACA,UACA,OACA,WACA,OACA,QACA,UACA,QACA,OACA,SACA,WACA,SACA,OACA,UACA,SACA,cACA,YACA,UAGIC,EAAQ,CACZ,QACA,OACA,QACA,WACA,QACA,OACA,SACA,QACA,YACA,SACA,eACA,WACA,QACA,SACA,WACA,QACA,SACA,UACA,OACA,SACA,SACA,UACA,OACA,OACA,OACA,QACA,OACA,QACA,YACA,SACA,OACA,SACA,SACA,WACA,YACA,cACA,SACA,YACA,SACA,UACA,aACA,WACA,cACA,YACA,OACA,UACA,SACA,aACA,WACA,eACA,aACA,SACA,OACA,UAGK,SAASC,IACd,MAAMC,EAAWC,IACf,MAAMxP,EAAIwP,EAAIC,KAAKC,MAAMD,KAAKE,SAAWH,EAAI5Q,SAC7C,OAAOoB,EAAE4P,OAAO,GAAGC,cAAgB7P,EAAEiC,MAAM,IAG7C,SAAUsN,EAASH,MAAeG,EAASH,MAAeG,EAASF,iBCzpBrEtP,EAAAS,EAAA0B,EAAA,sBAAA4N,IAAA/P,EAAAS,EAAA0B,EAAA,sBAAA6N,IAAAhQ,EAAAS,EAAA0B,EAAA,sBAAA8N,IAAAjQ,EAAAS,EAAA0B,EAAA,sBAAAyJ,IAAA5L,EAAAS,EAAA0B,EAAA,sBAAA+N,IAAAlQ,EAAAS,EAAA0B,EAAA,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","file":"assets/js/index-ce588e62aade640ce170.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t7: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([1461,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import screenfull from \"screenfull\";\n\nlet hasEnteredFullScreenThisSession = false;\n\nfunction shouldShowFullScreen() {\n  // Disable full screen on iOS, since Safari's fullscreen mode does not let you prevent native pinch-to-zoom gestures.\n  return (\n    (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR()) &&\n    !AFRAME.utils.device.isIOS() &&\n    screenfull.enabled\n  );\n}\n\nexport function showFullScreenIfAvailable() {\n  if (shouldShowFullScreen()) {\n    screenfull.request();\n    hasEnteredFullScreenThisSession = true;\n  }\n}\n\nexport function showFullScreenIfWasFullScreen() {\n  if (hasEnteredFullScreenThisSession && !screenfull.isFullscreen) {\n    screenfull.request();\n  }\n}\n","const BASE_ENVIRONMENTS = [\n  \"/rooms/meetingroom/MeetingRoom.bundle.json\",\n  \"/rooms/atrium/Atrium.bundle.json\",\n  \"/rooms/MedievalFantasyBook/MedievalFantasyBook.bundle.json\",\n  \"/rooms/rooftopbuilding1/RooftopBuilding1.bundle.json\",\n  \"/rooms/wideopenspace/WideOpenSpace.bundle.json\"\n];\nconst EXTRA_ENVIRONMENTS = process.env.EXTRA_ENVIRONMENTS ? process.env.EXTRA_ENVIRONMENTS.split(\",\") : [];\nconst ALL_ENVIRONMENTS = EXTRA_ENVIRONMENTS.concat(BASE_ENVIRONMENTS);\n\nexport const ENVIRONMENT_URLS = ALL_ENVIRONMENTS.map(x => {\n  return process.env.ASSET_BUNDLE_SERVER + x;\n});\n\nexport const DEFAULT_ENVIRONMENT_URL = ENVIRONMENT_URLS[0];\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\nimport DialogContainer from \"./dialog-container.js\";\n\nclass AuthDialog extends Component {\n  static propTypes = {\n    intl: PropTypes.object,\n    verifying: PropTypes.bool,\n    authOrigin: PropTypes.string\n  };\n\n  render() {\n    const { authOrigin, verifying } = this.props;\n    const { formatMessage } = this.props.intl;\n    const title = verifying ? formatMessage({ id: \"auth.verifying\" }) : formatMessage({ id: \"auth.verified-title\" });\n\n    return (\n      <DialogContainer title={title} {...this.props}>\n        {verifying ? (\n          <FormattedMessage id=\"auth.verifying\" />\n        ) : authOrigin === \"spoke\" ? (\n          <FormattedMessage className=\"preformatted\" id=\"auth.spoke-verified\" />\n        ) : (\n          <FormattedMessage className=\"preformatted\" id=\"auth.verified\" />\n        )}\n      </DialogContainer>\n    );\n  }\n}\n\nexport default injectIntl(AuthDialog);\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\n\nexport default class JoinUsDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"Join Us\" {...this.props}>\n        <span>\n          <p>\n            Join us in the{\" \"}\n            <a href=\"https://discord.gg/wHmY4nd\" target=\"_blank\" rel=\"noopener noreferrer\">\n              Hubs community\n            </a>{\" \"}\n            on Discord.\n            <br />\n          </p>\n          <p>VR meetups every Friday at noon PDT!</p>\n          <p>\n            You can also follow us on Twitter at{\" \"}\n            <a href=\"https://twitter.com/mozillareality\" target=\"_blank\" rel=\"noopener noreferrer\">\n              @mozillareality\n            </a>.\n          </p>\n        </span>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class ReportDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"Report an Issue\" {...this.props}>\n        <span>\n          <p>Need to report a problem?</p>\n          <p>\n            You can file a{\" \"}\n            <WithHoverSound>\n              <a href=\"https://github.com/mozilla/hubs/issues\" target=\"_blank\" rel=\"noopener noreferrer\">\n                GitHub Issue\n              </a>\n            </WithHoverSound>{\" \"}\n            or e-mail us for support at{\" \"}\n            <WithHoverSound>\n              <a href=\"mailto:hubs@mozilla.com\">hubs@mozilla.com</a>\n            </WithHoverSound>\n          </p>\n          <p>\n            You can also find us on{\" \"}\n            <WithHoverSound>\n              <a href=\"https://discord.gg/wHmY4nd\" target=\"_blank\" rel=\"noopener noreferrer\">\n                Discord\n              </a>\n            </WithHoverSound>\n          </p>\n        </span>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport PropTypes from \"prop-types\";\nimport formurlencoded from \"form-urlencoded\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class UpdatesDialog extends Component {\n  static propTypes = {\n    onSubmittedEmail: PropTypes.func\n  };\n\n  state = {\n    mailingListEmail: \"\",\n    mailingListPrivacy: false\n  };\n\n  render() {\n    const { onSubmittedEmail, ...other } = this.props;\n    const signUpForMailingList = async e => {\n      e.preventDefault();\n      e.stopPropagation();\n      if (!this.state.mailingListPrivacy) return;\n\n      const url = \"https://www.mozilla.org/en-US/newsletter/\";\n\n      const payload = {\n        email: this.state.mailingListEmail,\n        newsletters: \"hubs\",\n        privacy: true,\n        fmt: \"H\",\n        source_url: document.location.href\n      };\n\n      await fetch(url, {\n        body: formurlencoded(payload),\n        method: \"POST\",\n        headers: { \"content-type\": \"application/x-www-form-urlencoded\" }\n      }).then(onSubmittedEmail);\n    };\n\n    return (\n      <DialogContainer {...other}>\n        <span>\n          <p>Sign up to get updates about new features in Hubs.</p>\n          <form onSubmit={signUpForMailingList}>\n            <div className=\"mailing-list-form\">\n              <WithHoverSound>\n                <input\n                  type=\"email\"\n                  value={this.state.mailingListEmail}\n                  onChange={e => this.setState({ mailingListEmail: e.target.value })}\n                  className=\"mailing-list-form__email_field\"\n                  required\n                  placeholder=\"Your email here\"\n                />\n              </WithHoverSound>\n              <label className=\"mailing-list-form__privacy\">\n                <WithHoverSound>\n                  <input\n                    className=\"mailing-list-form__privacy_checkbox\"\n                    type=\"checkbox\"\n                    required\n                    value={this.state.mailingListPrivacy}\n                    onChange={e => this.setState({ mailingListPrivacy: e.target.checked })}\n                  />\n                </WithHoverSound>\n                <span className=\"mailing-list-form__privacy_label\">\n                  <FormattedMessage id=\"mailing_list.privacy_label\" />{\" \"}\n                  <WithHoverSound>\n                    <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://www.mozilla.org/en-US/privacy/\">\n                      <FormattedMessage id=\"mailing_list.privacy_link\" />\n                    </a>\n                  </WithHoverSound>\n                </span>\n              </label>\n              <WithHoverSound>\n                <input className=\"mailing-list-form__submit\" type=\"submit\" value=\"Sign Up Now\" />\n              </WithHoverSound>\n            </div>\n          </form>\n        </span>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { IntlProvider, FormattedMessage, addLocaleData } from \"react-intl\";\nimport en from \"react-intl/locale-data/en\";\n\nimport { lang, messages } from \"../utils/i18n\";\nimport { playVideoWithStopOnBlur } from \"../utils/video-utils.js\";\nimport homeVideoWebM from \"../assets/video/home.webm\";\nimport homeVideoMp4 from \"../assets/video/home.mp4\";\nimport hubLogo from \"../assets/images/hub-preview-light-no-shadow.png\";\nimport discordLogoSmall from \"../assets/images/discord-logo-small.png\";\nimport mozLogo from \"../assets/images/moz-logo-black.png\";\nimport classNames from \"classnames\";\nimport { ENVIRONMENT_URLS } from \"../assets/environments/environments\";\nimport { createAndRedirectToNewHub, connectToReticulum } from \"../utils/phoenix-utils\";\nimport maskEmail from \"../utils/mask-email\";\n\nimport styles from \"../assets/stylesheets/index.scss\";\n\nimport AuthDialog from \"./auth-dialog.js\";\nimport JoinUsDialog from \"./join-us-dialog.js\";\nimport ReportDialog from \"./report-dialog.js\";\nimport SignInDialog from \"./sign-in-dialog.js\";\nimport UpdatesDialog from \"./updates-dialog.js\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\naddLocaleData([...en]);\n\nclass HomeRoot extends Component {\n  static propTypes = {\n    intl: PropTypes.object,\n    sceneId: PropTypes.string,\n    store: PropTypes.object,\n    authChannel: PropTypes.object,\n    authVerify: PropTypes.bool,\n    authTopic: PropTypes.string,\n    authToken: PropTypes.string,\n    authOrigin: PropTypes.string,\n    listSignup: PropTypes.bool,\n    report: PropTypes.bool,\n    initialEnvironment: PropTypes.string\n  };\n\n  state = {\n    environments: [],\n    dialog: null,\n    signedIn: null,\n    mailingListEmail: \"\",\n    mailingListPrivacy: false\n  };\n\n  constructor(props) {\n    super(props);\n    this.state.signedIn = props.authChannel.signedIn;\n    this.state.email = props.authChannel.email;\n  }\n\n  componentDidMount() {\n    if (this.props.authVerify) {\n      this.showAuthDialog(true);\n      this.verifyAuth().then(this.showAuthDialog);\n      return;\n    }\n    if (this.props.sceneId) {\n      this.loadEnvironmentFromScene();\n    } else {\n      this.loadEnvironments();\n    }\n    this.loadHomeVideo();\n    if (this.props.listSignup) {\n      this.showUpdatesDialog();\n    } else if (this.props.report) {\n      this.showReportDialog();\n    }\n  }\n\n  async verifyAuth() {\n    const socket = await connectToReticulum();\n    const channel = socket.channel(this.props.authTopic);\n    await new Promise((resolve, reject) =>\n      channel\n        .join()\n        .receive(\"ok\", resolve)\n        .receive(\"error\", reject)\n    );\n    channel.push(\"auth_verified\", { token: this.props.authToken });\n  }\n\n  showDialog = (DialogClass, props = {}) => {\n    this.setState({\n      dialog: <DialogClass {...{ onClose: this.closeDialog, ...props }} />\n    });\n  };\n\n  showAuthDialog = verifying => {\n    this.showDialog(AuthDialog, { closable: false, verifying, authOrigin: this.props.authOrigin });\n  };\n\n  loadHomeVideo = () => {\n    const videoEl = document.querySelector(\"#background-video\");\n    if (!videoEl) return;\n    videoEl.playbackRate = 0.9;\n    playVideoWithStopOnBlur(videoEl);\n  };\n\n  closeDialog = () => {\n    this.setState({ dialog: null });\n  };\n\n  showJoinUsDialog = () => this.showDialog(JoinUsDialog);\n\n  showReportDialog = () => this.showDialog(ReportDialog);\n\n  showUpdatesDialog = () =>\n    this.showDialog(UpdatesDialog, {\n      onSubmittedEmail: () => {\n        this.showDialog(\n          <DialogContainer>Great! Please check your e-mail to confirm your subscription.</DialogContainer>\n        );\n      }\n    });\n\n  showSignInDialog = () => {\n    this.showDialog(SignInDialog, {\n      message: messages[\"sign-in.prompt\"],\n      onSignIn: async email => {\n        const { authComplete } = await this.props.authChannel.startAuthentication(email);\n        this.showDialog(SignInDialog, { authStarted: true });\n        await authComplete;\n        this.setState({ signedIn: true, email });\n        this.closeDialog();\n      }\n    });\n  };\n\n  signOut = () => {\n    this.props.authChannel.signOut();\n    this.setState({ signedIn: false });\n  };\n\n  loadEnvironmentFromScene = async () => {\n    let sceneUrlBase = \"/api/v1/scenes\";\n    if (process.env.RETICULUM_SERVER) {\n      sceneUrlBase = `https://${process.env.RETICULUM_SERVER}${sceneUrlBase}`;\n    }\n    const sceneInfoUrl = `${sceneUrlBase}/${this.props.sceneId}`;\n    const resp = await fetch(sceneInfoUrl).then(r => r.json());\n    const scene = resp.scenes[0];\n    const attribution = scene.attribution && scene.attribution.split(\"\\n\").join(\", \");\n    const authors = attribution && [{ organization: { name: attribution } }];\n    // Transform the scene info into a an environment bundle structure.\n    this.setState({\n      environments: [\n        {\n          scene_id: this.props.sceneId,\n          meta: {\n            title: scene.name,\n            authors,\n            images: [{ type: \"preview-thumbnail\", srcset: scene.screenshot_url }]\n          }\n        }\n      ]\n    });\n  };\n\n  loadEnvironments = () => {\n    const environments = [];\n\n    const environmentLoads = ENVIRONMENT_URLS.map(src =>\n      (async () => {\n        const res = await fetch(src);\n        const data = await res.json();\n        data.bundle_url = src;\n        environments.push(data);\n      })()\n    );\n\n    Promise.all(environmentLoads).then(() => this.setState({ environments }));\n  };\n\n  onLinkClicked = trigger => {\n    return e => {\n      e.preventDefault();\n      e.stopPropagation();\n      trigger();\n    };\n  };\n\n  launchTour = () => {\n    createAndRedirectToNewHub(\n      \"Hubs Tour\",\n      // TODO BP placeholder tour scene\n      // \"chjVRLh\", // dev\n      \"d2SF68V\", // prod\n      null,\n      false\n    );\n  };\n\n  render() {\n    const mainContentClassNames = classNames({\n      [styles.mainContent]: true,\n      [styles.noninteractive]: !!this.state.dialog\n    });\n\n    const showFTUEVideo = false;\n\n    return (\n      <IntlProvider locale={lang} messages={messages}>\n        <div className={styles.home}>\n          <div className={mainContentClassNames}>\n            <div className={styles.headerContent}>\n              <div className={styles.titleAndNav} onClick={() => (document.location = \"/\")}>\n                <div className={styles.links}>\n                  <WithHoverSound>\n                    <a href=\"/whats-new\">\n                      <FormattedMessage id=\"home.whats_new_link\" />\n                    </a>\n                  </WithHoverSound>\n                  <WithHoverSound>\n                    <a href=\"https://github.com/mozilla/hubs\" rel=\"noreferrer noopener\">\n                      <FormattedMessage id=\"home.source_link\" />\n                    </a>\n                  </WithHoverSound>\n                  <WithHoverSound>\n                    <a href=\"https://discord.gg/wHmY4nd\" rel=\"noreferrer noopener\">\n                      <FormattedMessage id=\"home.community_link\" />\n                    </a>\n                  </WithHoverSound>\n                  <WithHoverSound>\n                    <a href=\"/spoke\" rel=\"noreferrer noopener\">\n                      Spoke\n                    </a>\n                  </WithHoverSound>\n                </div>\n              </div>\n              <div className={styles.signIn}>\n                {this.state.signedIn ? (\n                  <div>\n                    <span>\n                      <FormattedMessage id=\"sign-in.as\" /> {maskEmail(this.state.email)}\n                    </span>{\" \"}\n                    <a onClick={this.onLinkClicked(this.signOut)}>\n                      <FormattedMessage id=\"sign-in.out\" />\n                    </a>\n                  </div>\n                ) : (\n                  <a onClick={this.onLinkClicked(this.showSignInDialog)}>\n                    <FormattedMessage id=\"sign-in.in\" />\n                  </a>\n                )}\n              </div>\n            </div>\n            <div className={styles.heroContent}>\n              <div className={styles.heroPanel}>\n                <div className={styles.container}>\n                  <div className={styles.logo}>\n                    <img src={hubLogo} />\n                  </div>\n                  <div className={styles.blurb}>\n                    <FormattedMessage id=\"home.hero_blurb\" />\n                  </div>\n                </div>\n                <div className={styles.ctaButtons}>\n                  <button\n                    className={classNames(styles.primaryButton, styles.ctaButton)}\n                    onClick={e => {\n                      e.preventDefault();\n                      createAndRedirectToNewHub(null, process.env.DEFAULT_SCENE_SID, null, false);\n                    }}\n                  >\n                    <FormattedMessage id=\"home.create_a_room\" />\n                  </button>\n                </div>\n              </div>\n              <div className={classNames(styles.heroPanel, styles.rightPanel)}>\n                {showFTUEVideo && (\n                  <div className={styles.heroVideo}>\n                    <video playsInline muted loop autoPlay>\n                      <source src={homeVideoWebM} type=\"video/webm\" />\n                      <source src={homeVideoMp4} type=\"video/mp4\" />\n                    </video>\n                  </div>\n                )}\n                <div>\n                  <WithHoverSound>\n                    <div className={styles.secondaryLink}>\n                      <a href=\"/link\">\n                        <FormattedMessage id=\"home.have_code\" />\n                      </a>\n                    </div>\n                  </WithHoverSound>\n\n                  <WithHoverSound>\n                    <div className={styles.secondaryLink}>\n                      <div>\n                        <FormattedMessage id=\"home.add_to_discord_1\" />\n                      </div>\n                      <img src={discordLogoSmall} />\n                      <a href=\"/discord\">\n                        <FormattedMessage id=\"home.add_to_discord_2\" />\n                      </a>\n                      <div>\n                        <FormattedMessage id=\"home.add_to_discord_3\" />\n                      </div>\n                    </div>\n                  </WithHoverSound>\n                </div>\n              </div>\n            </div>\n            <div className={styles.footerContent}>\n              <div className={styles.links}>\n                <div className={styles.top}>\n                  <WithHoverSound>\n                    <a\n                      className={styles.link}\n                      rel=\"noopener noreferrer\"\n                      href=\"#\"\n                      onClick={this.onLinkClicked(this.showJoinUsDialog)}\n                    >\n                      <FormattedMessage id=\"home.join_us\" />\n                    </a>\n                  </WithHoverSound>\n                  <WithHoverSound>\n                    <a\n                      className={styles.link}\n                      rel=\"noopener noreferrer\"\n                      href=\"#\"\n                      onClick={this.onLinkClicked(this.showUpdatesDialog)}\n                    >\n                      <FormattedMessage id=\"home.get_updates\" />\n                    </a>\n                  </WithHoverSound>\n                  <WithHoverSound>\n                    <a\n                      className={styles.link}\n                      rel=\"noopener noreferrer\"\n                      href=\"#\"\n                      onClick={this.onLinkClicked(this.showReportDialog)}\n                    >\n                      <FormattedMessage id=\"home.report_issue\" />\n                    </a>\n                  </WithHoverSound>\n                  <WithHoverSound>\n                    <a\n                      className={styles.link}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      href=\"https://github.com/mozilla/hubs/blob/master/TERMS.md\"\n                    >\n                      <FormattedMessage id=\"home.terms_of_use\" />\n                    </a>\n                  </WithHoverSound>\n                  <WithHoverSound>\n                    <a\n                      className={styles.link}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      href=\"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\"\n                    >\n                      <FormattedMessage id=\"home.privacy_notice\" />\n                    </a>\n                  </WithHoverSound>\n\n                  <img className={styles.mozLogo} src={mozLogo} />\n                </div>\n              </div>\n            </div>\n          </div>\n          {this.state.dialog}\n        </div>\n      </IntlProvider>\n    );\n  }\n}\n\nexport default HomeRoot;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./assets/stylesheets/index.scss\";\nimport registerTelemetry from \"./telemetry\";\nimport HomeRoot from \"./react-components/home-root\";\nimport AuthChannel from \"./utils/auth-channel\";\nimport { createAndRedirectToNewHub, connectToReticulum } from \"./utils/phoenix-utils\";\nimport Store from \"./storage/store\";\n\nconst qs = new URLSearchParams(location.search);\nregisterTelemetry(\"/home\", \"Hubs Home Page\");\n\nconst { pathname } = document.location;\nconst sceneId = qs.get(\"scene_id\") || (pathname.startsWith(\"/scenes/\") && pathname.substring(1).split(\"/\")[1]);\n\n(async () => {\n  if (qs.get(\"new\") !== null) {\n    createAndRedirectToNewHub(null, process.env.DEFAULT_SCENE_SID, null, true);\n    return;\n  }\n\n  const store = new Store();\n  const authChannel = new AuthChannel(store);\n  authChannel.setSocket(await connectToReticulum());\n\n  const root = (\n    <HomeRoot\n      initialEnvironment={qs.get(\"initial_environment\")}\n      sceneId={sceneId || \"\"}\n      store={store}\n      authChannel={authChannel}\n      authVerify={qs.has(\"auth_topic\")}\n      authTopic={qs.get(\"auth_topic\")}\n      authToken={qs.get(\"auth_token\")}\n      authOrigin={qs.get(\"auth_origin\")}\n      listSignup={qs.has(\"list_signup\")}\n      report={qs.has(\"report\")}\n    />\n  );\n  ReactDOM.render(root, document.getElementById(\"home-root\"));\n})();\n","const adjectives = [\n  \"able\",\n  \"absolute\",\n  \"acceptable\",\n  \"acclaimed\",\n  \"accomplished\",\n  \"accurate\",\n  \"aching\",\n  \"acrobatic\",\n  \"adorable\",\n  \"adventurous\",\n  \"basic\",\n  \"belated\",\n  \"beloved\",\n  \"calm\",\n  \"candid\",\n  \"capital\",\n  \"carefree\",\n  \"caring\",\n  \"cautious\",\n  \"celebrated\",\n  \"charming\",\n  \"daring\",\n  \"darling\",\n  \"dearest\",\n  \"each\",\n  \"eager\",\n  \"early\",\n  \"earnest\",\n  \"easy\",\n  \"easygoing\",\n  \"ecstatic\",\n  \"edible\",\n  \"fabulous\",\n  \"fair\",\n  \"faithful\",\n  \"familiar\",\n  \"famous\",\n  \"fancy\",\n  \"fantastic\",\n  \"far\",\n  \"generous\",\n  \"gentle\",\n  \"genuine\",\n  \"giant\",\n  \"handmade\",\n  \"handsome\",\n  \"handy\",\n  \"happy\",\n  \"icy\",\n  \"ideal\",\n  \"identical\",\n  \"keen\",\n  \"lasting\",\n  \"lavish\",\n  \"magnificent\",\n  \"majestic\",\n  \"mammoth\",\n  \"marvelous\",\n  \"natural\",\n  \"obedient\",\n  \"palatable\",\n  \"parched\",\n  \"passionate\",\n  \"pastel\",\n  \"peaceful\",\n  \"perfect\",\n  \"perfumed\",\n  \"quaint\",\n  \"qualified\",\n  \"radiant\",\n  \"rapid\",\n  \"rare\",\n  \"safe\",\n  \"sandy\",\n  \"satisfied\",\n  \"scaly\",\n  \"scarce\",\n  \"scared\",\n  \"scary\",\n  \"scented\",\n  \"scientific\",\n  \"secret\",\n  \"sentimental\",\n  \"talkative\",\n  \"tangible\",\n  \"tart\",\n  \"tasty\",\n  \"tattered\",\n  \"teeming\",\n  \"ultimate\",\n  \"uncommon\",\n  \"unconscious\",\n  \"understated\",\n  \"warm\",\n  \"active\",\n  \"adept\",\n  \"admirable\",\n  \"admired\",\n  \"adorable\",\n  \"adored\",\n  \"advanced\",\n  \"affectionate\",\n  \"beneficial\",\n  \"best\",\n  \"better\",\n  \"big\",\n  \"cheerful\",\n  \"cheery\",\n  \"chief\",\n  \"chilly\",\n  \"classic\",\n  \"clean\",\n  \"clear\",\n  \"clever\",\n  \"decent\",\n  \"decisive\",\n  \"deep\",\n  \"defiant\",\n  \"definitive\",\n  \"delectable\",\n  \"delicious\",\n  \"elaborate\",\n  \"elastic\",\n  \"elated\",\n  \"elegant\",\n  \"elementary\",\n  \"elliptical\",\n  \"fast\",\n  \"favorable\",\n  \"favorite\",\n  \"fearless\",\n  \"gifted\",\n  \"glamorous\",\n  \"gleaming\",\n  \"glittering\",\n  \"harmonious\",\n  \"imaginative\",\n  \"immense\",\n  \"jealous\",\n  \"kind\",\n  \"leafy\",\n  \"legal\",\n  \"mature\",\n  \"mean\",\n  \"nautical\",\n  \"neat\",\n  \"necessary\",\n  \"needy\",\n  \"oddball\",\n  \"offbeat\",\n  \"periodic\",\n  \"perky\",\n  \"personal\",\n  \"pertinent\",\n  \"petty\",\n  \"quarterly\",\n  \"ready\",\n  \"real\",\n  \"realistic\",\n  \"reasonable\",\n  \"regal\",\n  \"serene\",\n  \"shabby\",\n  \"sharp\",\n  \"shiny\",\n  \"showy\",\n  \"shy\",\n  \"silky\",\n  \"tempting\",\n  \"tense\",\n  \"terrific\",\n  \"testy\",\n  \"thankful\",\n  \"uniform\",\n  \"unique\",\n  \"vast\",\n  \"weary\",\n  \"wee\",\n  \"welcome\",\n  \"agile\",\n  \"alarmed\",\n  \"alert\",\n  \"alive\",\n  \"bleak\",\n  \"blissful\",\n  \"blushing\",\n  \"coarse\",\n  \"colorful\",\n  \"colossal\",\n  \"comfortable\",\n  \"compassionate\",\n  \"complete\",\n  \"delightful\",\n  \"dense\",\n  \"dependable\",\n  \"dependent\",\n  \"descriptive\",\n  \"detailed\",\n  \"determined\",\n  \"devoted\",\n  \"different\",\n  \"eminent\",\n  \"emotional\",\n  \"enchanted\",\n  \"enchanting\",\n  \"energetic\",\n  \"enormous\",\n  \"fine\",\n  \"finished\",\n  \"firm\",\n  \"firsthand\",\n  \"fixed\",\n  \"flashy\",\n  \"flawless\",\n  \"glorious\",\n  \"glossy\",\n  \"golden\",\n  \"good\",\n  \"gorgeous\",\n  \"graceful\",\n  \"healthy\",\n  \"heartfelt\",\n  \"hearty\",\n  \"helpful\",\n  \"impartial\",\n  \"impressive\",\n  \"jolly\",\n  \"jovial\",\n  \"lighthearted\",\n  \"likable\",\n  \"lined\",\n  \"mellow\",\n  \"melodic\",\n  \"memorable\",\n  \"mild\",\n  \"new\",\n  \"opulent\",\n  \"playful\",\n  \"pleasant\",\n  \"pleasing\",\n  \"plump\",\n  \"plush\",\n  \"polished\",\n  \"polite\",\n  \"reliable\",\n  \"relieved\",\n  \"remarkable\",\n  \"remote\",\n  \"respectful\",\n  \"responsible\",\n  \"simple\",\n  \"simplistic\",\n  \"sizzling\",\n  \"sleepy\",\n  \"slight\",\n  \"slim\",\n  \"smart\",\n  \"smooth\",\n  \"snappy\",\n  \"snoopy\",\n  \"thirsty\",\n  \"this\",\n  \"thorough\",\n  \"those\",\n  \"thoughtful\",\n  \"united\",\n  \"vibrant\",\n  \"vicious\",\n  \"wellmade\",\n  \"whimsical\",\n  \"whirlwind\",\n  \"zesty\",\n  \"amazing\",\n  \"ambitious\",\n  \"ample\",\n  \"amused\",\n  \"amusing\",\n  \"ancient\",\n  \"angelic\",\n  \"antique\",\n  \"bold\",\n  \"bossy\",\n  \"both\",\n  \"bouncy\",\n  \"bountiful\",\n  \"complex\",\n  \"conscious\",\n  \"considerate\",\n  \"constant\",\n  \"content\",\n  \"conventional\",\n  \"cooked\",\n  \"cool\",\n  \"cooperative\",\n  \"diligent\",\n  \"dimwitted\",\n  \"direct\",\n  \"discrete\",\n  \"envious\",\n  \"essential\",\n  \"ethical\",\n  \"euphoric\",\n  \"flippant\",\n  \"fluffy\",\n  \"flustered\",\n  \"focused\",\n  \"fond\",\n  \"gracious\",\n  \"grand\",\n  \"grandiose\",\n  \"granular\",\n  \"grateful\",\n  \"grave\",\n  \"great\",\n  \"hidden\",\n  \"high\",\n  \"hilarious\",\n  \"homely\",\n  \"incomparable\",\n  \"incredible\",\n  \"infamous\",\n  \"joyful\",\n  \"lively\",\n  \"loathsome\",\n  \"lonely\",\n  \"long\",\n  \"mindless\",\n  \"miniature\",\n  \"minor\",\n  \"misty\",\n  \"next\",\n  \"nice\",\n  \"nifty\",\n  \"nimble\",\n  \"orderly\",\n  \"organic\",\n  \"ornate\",\n  \"popular\",\n  \"posh\",\n  \"positive\",\n  \"potable\",\n  \"powerful\",\n  \"powerless\",\n  \"precious\",\n  \"present\",\n  \"prestigious\",\n  \"quick\",\n  \"rewarding\",\n  \"rich\",\n  \"right\",\n  \"sociable\",\n  \"soft\",\n  \"solid\",\n  \"some\",\n  \"sophisticated\",\n  \"soulful\",\n  \"sparkling\",\n  \"spectacular\",\n  \"speedy\",\n  \"spicy\",\n  \"spiffy\",\n  \"spirited\",\n  \"spiteful\",\n  \"splendid\",\n  \"spotless\",\n  \"spry\",\n  \"thrifty\",\n  \"tidy\",\n  \"tight\",\n  \"timely\",\n  \"tinted\",\n  \"unruly\",\n  \"untimely\",\n  \"violet\",\n  \"wicked\",\n  \"wide\",\n  \"wild\",\n  \"willing\",\n  \"winding\",\n  \"windy\",\n  \"zigzag\",\n  \"apprehensive\",\n  \"appropriate\",\n  \"artistic\",\n  \"assured\",\n  \"astonishing\",\n  \"bright\",\n  \"brilliant\",\n  \"bronze\",\n  \"coordinated\",\n  \"courageous\",\n  \"courteous\",\n  \"crafty\",\n  \"crazy\",\n  \"creamy\",\n  \"creative\",\n  \"crisp\",\n  \"distant\",\n  \"distinct\",\n  \"downright\",\n  \"evergreen\",\n  \"everlasting\",\n  \"every\",\n  \"evil\",\n  \"excellent\",\n  \"excitable\",\n  \"exemplary\",\n  \"exhausted\",\n  \"forthright\",\n  \"fortunate\",\n  \"fragrant\",\n  \"frank\",\n  \"free\",\n  \"frequent\",\n  \"fresh\",\n  \"friendly\",\n  \"frightened\",\n  \"frigid\",\n  \"gripping\",\n  \"grounded\",\n  \"honest\",\n  \"honorable\",\n  \"honored\",\n  \"hopeful\",\n  \"hospitable\",\n  \"hot\",\n  \"huge\",\n  \"infatuated\",\n  \"infinite\",\n  \"informal\",\n  \"insistent\",\n  \"instructive\",\n  \"juicy\",\n  \"jumbo\",\n  \"knowing\",\n  \"knowledgeable\",\n  \"longterm\",\n  \"loud\",\n  \"lovable\",\n  \"loving\",\n  \"modern\",\n  \"modest\",\n  \"monumental\",\n  \"normal\",\n  \"notable\",\n  \"outgoing\",\n  \"precious\",\n  \"pretty\",\n  \"prickly\",\n  \"primary\",\n  \"pristine\",\n  \"private\",\n  \"prize\",\n  \"productive\",\n  \"profitable\",\n  \"quiet\",\n  \"quintessential\",\n  \"roasted\",\n  \"robust\",\n  \"square\",\n  \"squiggly\",\n  \"stable\",\n  \"staid\",\n  \"starry\",\n  \"steel\",\n  \"stimulating\",\n  \"striking\",\n  \"striped\",\n  \"strong\",\n  \"studious\",\n  \"stunning\",\n  \"tough\",\n  \"trained\",\n  \"treasured\",\n  \"tremendous\",\n  \"triangular\",\n  \"tricky\",\n  \"unused\",\n  \"unusual\",\n  \"upbeat\",\n  \"virtual\",\n  \"witty\",\n  \"wonderful\",\n  \"wooden\",\n  \"worldly\",\n  \"youthful\",\n  \"attached\",\n  \"attentive\",\n  \"attractive\",\n  \"austere\",\n  \"authentic\",\n  \"automatic\",\n  \"aware\",\n  \"awesome\",\n  \"bubbly\",\n  \"bustling\",\n  \"busy\",\n  \"buttery\",\n  \"cuddly\",\n  \"cultured\",\n  \"curly\",\n  \"curvy\",\n  \"cute\",\n  \"cylindrical\",\n  \"downright\",\n  \"dramatic\",\n  \"excited\",\n  \"exciting\",\n  \"exotic\",\n  \"experienced\",\n  \"expert\",\n  \"frosty\",\n  \"fruitful\",\n  \"full\",\n  \"fumbling\",\n  \"funny\",\n  \"fussy\",\n  \"growing\",\n  \"grown\",\n  \"gummy\",\n  \"humble\",\n  \"humongous\",\n  \"hungry\",\n  \"intelligent\",\n  \"interesting\",\n  \"known\",\n  \"kooky\",\n  \"loyal\",\n  \"lucky\",\n  \"luminous\",\n  \"lustrous\",\n  \"luxurious\",\n  \"multicolored\",\n  \"mysterious\",\n  \"noteworthy\",\n  \"numb\",\n  \"nutritious\",\n  \"outstanding\",\n  \"overjoyed\",\n  \"proper\",\n  \"proud\",\n  \"prudent\",\n  \"punctual\",\n  \"puny\",\n  \"pure\",\n  \"puzzled\",\n  \"puzzling\",\n  \"quirky\",\n  \"stupendous\",\n  \"sturdy\",\n  \"stylish\",\n  \"subdued\",\n  \"subtle\",\n  \"sunny\",\n  \"super\",\n  \"superb\",\n  \"supportive\",\n  \"surprised\",\n  \"sweet\",\n  \"swift\",\n  \"sympathetic\",\n  \"trivial\",\n  \"trusting\",\n  \"trustworthy\",\n  \"trusty\",\n  \"truthful\",\n  \"twin\",\n  \"usable\",\n  \"used\",\n  \"useful\",\n  \"utilized\",\n  \"vital\",\n  \"vivid\",\n  \"worried\",\n  \"worthwhile\",\n  \"worthy\",\n  \"writhing\",\n  \"wry\",\n  \"yummy\",\n  \"chocolate\",\n  \"crimson\",\n  \"cyan\",\n  \"fuchsia\",\n  \"gold\",\n  \"honeydew\",\n  \"lime\",\n  \"linen\",\n  \"magenta\",\n  \"olive\",\n  \"peru\",\n  \"salmon\",\n  \"seashell\",\n  \"sienna\",\n  \"snow\",\n  \"thistle\",\n  \"tomato\",\n  \"transparent\",\n  \"turquoise\",\n  \"violet\"\n];\n\nconst nouns = [\n  \"space\",\n  \"land\",\n  \"world\",\n  \"universe\",\n  \"plane\",\n  \"room\",\n  \"nation\",\n  \"plaza\",\n  \"gathering\",\n  \"meetup\",\n  \"get together\",\n  \"conclave\",\n  \"party\",\n  \"domain\",\n  \"dominion\",\n  \"realm\",\n  \"square\",\n  \"commons\",\n  \"park\",\n  \"cosmos\",\n  \"sphere\",\n  \"terrain\",\n  \"spot\",\n  \"zone\",\n  \"area\",\n  \"tract\",\n  \"turf\",\n  \"place\",\n  \"territory\",\n  \"volume\",\n  \"camp\",\n  \"picnic\",\n  \"outing\",\n  \"vacation\",\n  \"adventure\",\n  \"exploration\",\n  \"outing\",\n  \"walkabout\",\n  \"safari\",\n  \"venture\",\n  \"roundtable\",\n  \"barbecue\",\n  \"celebration\",\n  \"festivity\",\n  \"gala\",\n  \"shindig\",\n  \"social\",\n  \"convention\",\n  \"assembly\",\n  \"congregation\",\n  \"rendezvous\",\n  \"huddle\",\n  \"meet\",\n  \"soiree\"\n];\n\nexport function generateHubName() {\n  const randItem = set => {\n    const s = set[Math.floor(Math.random() * set.length)];\n    return s.charAt(0).toUpperCase() + s.slice(1);\n  };\n\n  return `${randItem(adjectives)} ${randItem(adjectives)} ${randItem(nouns)}`;\n}\n","import { Socket } from \"phoenix\";\nimport { generateHubName } from \"../utils/name-generation\";\n\nimport Store from \"../storage/store\";\n\nconst resolverLink = document.createElement(\"a\");\nexport function getReticulumFetchUrl(path, absolute = false) {\n  if (process.env.RETICULUM_SERVER) {\n    return `https://${process.env.RETICULUM_SERVER}${path}`;\n  } else if (absolute) {\n    resolverLink.href = path;\n    return resolverLink.href;\n  } else {\n    return path;\n  }\n}\n\nlet reticulumMeta = null;\nlet invalidatedReticulumMetaThisSession = false;\n\nexport async function invalidateReticulumMeta() {\n  invalidatedReticulumMetaThisSession = true;\n  reticulumMeta = null;\n}\n\nexport async function getReticulumMeta() {\n  if (!reticulumMeta) {\n    // Initially look up version based upon page, avoiding round-trip, otherwise fetch.\n    if (!invalidatedReticulumMetaThisSession && document.querySelector(\"meta[name='ret:version']\")) {\n      reticulumMeta = {\n        version: document.querySelector(\"meta[name='ret:version']\").getAttribute(\"value\"),\n        pool: document.querySelector(\"meta[name='ret:pool']\").getAttribute(\"value\"),\n        phx_host: document.querySelector(\"meta[name='ret:phx_host']\").getAttribute(\"value\")\n      };\n    } else {\n      await fetch(getReticulumFetchUrl(\"/api/v1/meta\")).then(async res => {\n        reticulumMeta = await res.json();\n      });\n    }\n  }\n\n  const qs = new URLSearchParams(location.search);\n  const phxHostOverride = qs.get(\"phx_host\");\n\n  if (phxHostOverride) {\n    reticulumMeta.phx_host = phxHostOverride;\n  }\n\n  return reticulumMeta;\n}\n\nexport async function connectToReticulum(debug = false, params = null) {\n  const qs = new URLSearchParams(location.search);\n\n  const getNewSocketUrl = async () => {\n    const socketProtocol = qs.get(\"phx_protocol\") || (document.location.protocol === \"https:\" ? \"wss:\" : \"ws:\");\n    let socketHost = qs.get(\"phx_host\");\n    let socketPort = qs.get(\"phx_port\");\n\n    const reticulumMeta = await getReticulumMeta();\n    socketHost = socketHost || reticulumMeta.phx_host;\n    socketPort = socketPort || (process.env.RETICULUM_SERVER.includes(\"hubs.local\") ? \"4000\" : \"443\"); // TODO phx_port\n    return `${socketProtocol}//${socketHost}${socketPort ? `:${socketPort}` : \"\"}`;\n  };\n\n  const socketUrl = await getNewSocketUrl();\n  console.log(`Phoenix Socket URL: ${socketUrl}`);\n\n  const socketSettings = {};\n\n  if (debug) {\n    socketSettings.logger = (kind, msg, data) => {\n      console.log(`${kind}: ${msg}`, data);\n    };\n  }\n\n  if (params) {\n    socketSettings.params = params;\n  }\n\n  const socket = new Socket(`${socketUrl}/socket`, socketSettings);\n  socket.connect();\n  socket.onError(async () => {\n    // On error, underlying reticulum node may have died, so rebalance by\n    // fetching a new healthy node to connect to.\n    invalidateReticulumMeta();\n\n    const endPointPath = new URL(socket.endPoint).pathname;\n    const newSocketUrl = await getNewSocketUrl();\n    const newEndPoint = `${newSocketUrl}${endPointPath}`;\n    console.log(`Socket error, changed endpoint to ${newEndPoint}`);\n    socket.endPoint = newEndPoint;\n  });\n\n  return socket;\n}\n\nexport function getLandingPageForPhoto(photoUrl) {\n  const parsedUrl = new URL(photoUrl);\n  return getReticulumFetchUrl(parsedUrl.pathname.replace(\".png\", \".html\") + parsedUrl.search, true);\n}\n\nexport function fetchReticulumAuthenticated(url, method = \"GET\", payload) {\n  const { token } = window.APP.store.state.credentials;\n  const retUrl = getReticulumFetchUrl(url);\n  const params = {\n    headers: {\n      \"content-type\": \"application/json\",\n      authorization: `bearer ${token}`\n    },\n    method\n  };\n  if (payload) {\n    params.body = JSON.stringify(payload);\n  }\n  return fetch(retUrl, params).then(async r => {\n    const result = await r.text();\n    try {\n      return JSON.parse(result);\n    } catch (e) {\n      // Some reticulum responses, particularly DELETE requests, don't return json.\n      return result;\n    }\n  });\n}\n\nexport async function createAndRedirectToNewHub(name, sceneId, sceneUrl, replace) {\n  const createUrl = getReticulumFetchUrl(\"/api/v1/hubs\");\n  const payload = { hub: { name: name || generateHubName() } };\n\n  if (sceneId) {\n    payload.hub.scene_id = sceneId;\n  } else {\n    payload.hub.default_environment_gltf_bundle_url = sceneUrl;\n  }\n\n  const headers = { \"content-type\": \"application/json\" };\n  const store = new Store();\n  if (store.state && store.state.credentials.token) {\n    headers.authorization = `bearer ${store.state.credentials.token}`;\n  }\n\n  let res = await fetch(createUrl, {\n    body: JSON.stringify(payload),\n    headers,\n    method: \"POST\"\n  }).then(r => r.json());\n\n  if (res.error === \"invalid_token\") {\n    // Clear the invalid token from store.\n    store.update({ credentials: { token: null, email: null } });\n\n    // Create hub anonymously\n    delete headers.authorization;\n    res = await fetch(createUrl, {\n      body: JSON.stringify(payload),\n      headers,\n      method: \"POST\"\n    }).then(r => r.json());\n  }\n\n  const hub = res;\n  let url = hub.url;\n\n  const creatorAssignmentToken = hub.creator_assignment_token;\n  if (creatorAssignmentToken) {\n    store.update({ creatorAssignmentTokens: [{ hubId: hub.hub_id, creatorAssignmentToken: creatorAssignmentToken }] });\n  }\n\n  if (process.env.RETICULUM_SERVER && document.location.host !== process.env.RETICULUM_SERVER) {\n    url = `/hub.html?hub_id=${hub.hub_id}`;\n  }\n\n  if (replace) {\n    document.location.replace(url);\n  } else {\n    document.location = url;\n  }\n}\n\nexport function getPresenceProfileForSession(presences, sessionId) {\n  const entry = Object.entries(presences || {}).find(([k]) => k === sessionId) || [];\n  const presence = entry[1];\n  return (presence && presence.metas && presence.metas[0].profile) || {};\n}\n\n// Takes the given channel, and creates a new channel with the same bindings\n// with the given socket, joins it, and leaves the old channel after joining.\n//\n// NOTE: This function relies upon phoenix channel object internals, so this\n// function will need to be reviewed if/when we ever update phoenix.js\nexport function migrateChannelToSocket(oldChannel, socket, params) {\n  const channel = socket.channel(oldChannel.topic, params || oldChannel.params);\n\n  for (let i = 0, l = oldChannel.bindings.length; i < l; i++) {\n    const item = oldChannel.bindings[i];\n    channel.on(item.event, item.callback);\n  }\n\n  for (let i = 0, l = oldChannel.pushBuffer.length; i < l; i++) {\n    const item = oldChannel.pushBuffer[i];\n    channel.push(item.event, item.payload, item.timeout);\n  }\n\n  const oldJoinPush = oldChannel.joinPush;\n  const joinPush = channel.join();\n\n  for (let i = 0, l = oldJoinPush.recHooks.length; i < l; i++) {\n    const item = oldJoinPush.recHooks[i];\n    joinPush.receive(item.status, item.callback);\n  }\n\n  return new Promise(resolve => {\n    joinPush.receive(\"ok\", () => {\n      // Clear all event handlers first so no duplicate messages come in.\n      oldChannel.bindings = [];\n      resolve(channel);\n    });\n  });\n}\n","module.exports = __webpack_public_path__ + \"assets/images/hub-preview-light-no-shadow-5ebb166e8580d819b445892173ec0286.png\";","// removed by extract-text-webpack-plugin\nmodule.exports = {\"hero-content\":\"index__hero-content__11fJu\",\"heroContent\":\"index__hero-content__11fJu\",\"cta-buttons\":\"index__cta-buttons__3SD-3\",\"ctaButtons\":\"index__cta-buttons__3SD-3\",\"primary-button\":\"index__primary-button__r8Kw5\",\"primaryButton\":\"index__primary-button__r8Kw5\",\"loading-text\":\"index__loading-text__3tobw\",\"loadingText\":\"index__loading-text__3tobw\",\"home\":\"index__home__3xkuf\",\"main-content\":\"index__main-content__1L8Sf\",\"mainContent\":\"index__main-content__1L8Sf\",\"noninteractive\":\"index__noninteractive__3jQRs\",\"header-content\":\"index__header-content__1XfPi\",\"headerContent\":\"index__header-content__1XfPi\",\"title-and-nav\":\"index__title-and-nav__23waG\",\"titleAndNav\":\"index__title-and-nav__23waG\",\"links\":\"index__links__p0Llg\",\"sign-in\":\"index__sign-in__2L8Bu\",\"signIn\":\"index__sign-in__2L8Bu\",\"video-container\":\"index__video-container__2Z1bb\",\"videoContainer\":\"index__video-container__2Z1bb\",\"background-video\":\"index__background-video__1XJJZ\",\"backgroundVideo\":\"index__background-video__1XJJZ\",\"container\":\"index__container__cs00S\",\"logo\":\"index__logo__2zl0D\",\"blurb\":\"index__blurb__3k96f\",\"hero-panel\":\"index__hero-panel__2AEHu\",\"heroPanel\":\"index__hero-panel__2AEHu\",\"cta-button\":\"index__cta-button__vTmK6\",\"ctaButton\":\"index__cta-button__vTmK6\",\"rightPanel\":\"index__rightPanel__2JG0C\",\"hero-video\":\"index__hero-video__Yf3bL\",\"heroVideo\":\"index__hero-video__Yf3bL\",\"have-code\":\"index__have-code__1EZm-\",\"haveCode\":\"index__have-code__1EZm-\",\"secondary-link\":\"index__secondary-link__3gfJB\",\"secondaryLink\":\"index__secondary-link__3gfJB\",\"footer-content\":\"index__footer-content__2GrlX\",\"footerContent\":\"index__footer-content__2GrlX\",\"moz-logo\":\"index__moz-logo__1ifwj\",\"mozLogo\":\"index__moz-logo__1ifwj\",\"top\":\"index__top__1gv9a\",\"link\":\"index__link__ujnyC\",\"bottom\":\"index__bottom__2Zyu1\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"email-field\":\"sign-in-dialog__email-field__g3xRW\",\"emailField\":\"sign-in-dialog__email-field__g3xRW\",\"next-button\":\"sign-in-dialog__next-button__2pGtq\",\"nextButton\":\"sign-in-dialog__next-button__2pGtq\",\"continue-button\":\"sign-in-dialog__continue-button__kFN6Z\",\"continueButton\":\"sign-in-dialog__continue-button__kFN6Z\",\"sign-in-form\":\"sign-in-dialog__sign-in-form__3Muog\",\"signInForm\":\"sign-in-dialog__sign-in-form__3Muog\",\"sign-in-complete\":\"sign-in-dialog__sign-in-complete__3JMkv\",\"signInComplete\":\"sign-in-dialog__sign-in-complete__3JMkv\",\"terms\":\"sign-in-dialog__terms__3TT6i\"};","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport styles from \"../assets/stylesheets/sign-in-dialog.scss\";\nimport DialogContainer from \"./dialog-container\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\n\nexport default class SignInDialog extends Component {\n  static propTypes = {\n    authStarted: PropTypes.bool,\n    authComplete: PropTypes.bool,\n    onSignIn: PropTypes.func,\n    onContinue: PropTypes.func,\n    message: PropTypes.string,\n    continueText: PropTypes.string\n  };\n\n  state = {\n    email: \"\"\n  };\n\n  onSubmit = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onSignIn(this.state.email);\n  };\n\n  render() {\n    let contents;\n    if (this.props.authStarted) {\n      contents = (\n        <p>\n          <FormattedMessage className=\"preformatted\" id=\"sign-in.auth-started\" />\n        </p>\n      );\n    } else if (this.props.authComplete) {\n      contents = (\n        <div className={styles.signInComplete}>\n          <p>{this.props.message}</p>\n          <button onClick={this.props.onContinue} className={styles.continueButton}>\n            {this.props.continueText}\n          </button>\n        </div>\n      );\n    } else {\n      contents = (\n        <form onSubmit={this.onSubmit} className={styles.signInForm}>\n          <span>{this.props.message}</span>\n          <input\n            name=\"email\"\n            type=\"email\"\n            required\n            placeholder=\"Your email address\"\n            value={this.state.email}\n            onFocus={e => handleTextFieldFocus(e.target)}\n            onBlur={() => handleTextFieldBlur()}\n            onChange={e => this.setState({ email: e.target.value })}\n            className={styles.emailField}\n          />\n          <p className={styles.terms}>\n            By proceeding, you agree to the{\" \"}\n            <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/mozilla/hubs/blob/master/TERMS.md\">\n              terms of use\n            </a>{\" \"}\n            and{\" \"}\n            <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\">\n              privacy notice\n            </a>.\n          </p>\n          <button type=\"submit\" className={styles.nextButton}>\n            next\n          </button>\n        </form>\n      );\n    }\n\n    return (\n      <DialogContainer title=\"Sign In\" {...this.props}>\n        {contents}\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nexport default class DialogContainer extends Component {\n  static propTypes = {\n    title: PropTypes.node,\n    children: PropTypes.node.isRequired,\n    onClose: PropTypes.func,\n    closable: PropTypes.bool,\n    wide: PropTypes.bool,\n    className: PropTypes.string\n  };\n\n  static defaultProps = {\n    closable: true\n  };\n\n  constructor(props) {\n    super(props);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onContainerClicked = this.onContainerClicked.bind(this);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.onKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.onKeyDown);\n  }\n\n  onKeyDown(e) {\n    if (this.props.closable && e.key === \"Escape\") {\n      this.props.onClose();\n    }\n  }\n\n  onContainerClicked = e => {\n    if (this.props.closable && e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return (\n      <div className={classNames(\"dialog-overlay\", this.props.className)}>\n        <div className=\"dialog\" onClick={this.onContainerClicked}>\n          <div className={`dialog__box ${this.props.wide ? \"dialog__wide\" : \"\"} `}>\n            <div className=\"dialog__box__contents\">\n              {this.props.closable &&\n                this.props.onClose && (\n                  <WithHoverSound>\n                    <button className=\"dialog__box__contents__close\" onClick={() => this.props.onClose()}>\n                      <i>\n                        <FontAwesomeIcon icon={faTimes} />\n                      </i>\n                    </button>\n                  </WithHoverSound>\n                )}\n              <div className=\"dialog__box__contents__title\">{this.props.title}</div>\n              <div className=\"dialog__box__contents__body\">{this.props.children}</div>\n              <div className=\"dialog__box__contents__button-container\" />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import localeData from \"../assets/translations.data.json\";\nconst navigatorLang = ((navigator.languages && navigator.languages[0]) || navigator.language || navigator.userLanguage)\n  .toLowerCase()\n  .split(/[_-]+/)[0];\nexport const lang = (localeData[navigatorLang] && navigatorLang) || \"en\";\nexport const messages = localeData[lang] || localeData.en;\n","export function playVideoWithStopOnBlur(videoEl) {\n  function toggleVideo() {\n    // Play the video if the window/tab is visible.\n    if (document.hasFocus()) {\n      videoEl.play();\n    } else {\n      videoEl.pause();\n    }\n  }\n  if (\"hasFocus\" in document) {\n    document.addEventListener(\"visibilitychange\", toggleVideo);\n    window.addEventListener(\"focus\", toggleVideo);\n    window.addEventListener(\"blur\", toggleVideo);\n  }\n}\n","export default function maskEmail(email) {\n  if (!email) return \"\";\n  const emailParts = email.split(\"@\");\n  const emailIdentity = emailParts[0];\n  const emailDomain = emailParts[1];\n  const truncatedIdentity = emailIdentity.substring(0, Math.min(emailIdentity.length, 3));\n  return `${truncatedIdentity}...@${emailDomain}`;\n}\n","import uuid from \"uuid/v4\";\n\nexport default class AuthChannel {\n  constructor(store) {\n    this.store = store;\n    this.socket = null;\n    this._signedIn = !!this.store.state.credentials.token;\n  }\n\n  setSocket = socket => {\n    this.socket = socket;\n  };\n\n  get email() {\n    return this.store.state.credentials.email;\n  }\n\n  get signedIn() {\n    return this._signedIn;\n  }\n\n  signOut = async hubChannel => {\n    if (hubChannel) {\n      await hubChannel.signOut();\n    }\n    this.store.update({ credentials: { token: null, email: null } });\n    this.store.resetToRandomLegacyAvatar();\n    this._signedIn = false;\n  };\n\n  async startAuthentication(email, hubChannel) {\n    const channel = this.socket.channel(`auth:${uuid()}`);\n    await new Promise((resolve, reject) =>\n      channel\n        .join()\n        .receive(\"ok\", resolve)\n        .receive(\"error\", reject)\n    );\n\n    const authComplete = new Promise(resolve =>\n      channel.on(\"auth_credentials\", async ({ credentials: token }) => {\n        this.store.update({ credentials: { email, token } });\n        if (hubChannel) {\n          await hubChannel.signIn(token);\n        }\n        this._signedIn = true;\n        resolve();\n      })\n    );\n\n    channel.push(\"auth_request\", { email, origin: \"hubs\" });\n\n    // Returning an object with the authComplete promise since we want the caller to wait for the above await but not\n    // for authComplete.\n    return { authComplete };\n  }\n}\n","import { avatars } from \"../assets/avatars/avatars.js\";\n\nconst names = [\n  \"Baers-Pochard\",\n  \"Baikal-Teal\",\n  \"Barrows-Goldeneye\",\n  \"Blue-Billed\",\n  \"Blue-Duck\",\n  \"Blue-Winged\",\n  \"Brown-Teal\",\n  \"Bufflehead\",\n  \"Canvasback\",\n  \"Cape-Shoveler\",\n  \"Chestnut-Teal\",\n  \"Chiloe-Wigeon\",\n  \"Cinnamon-Teal\",\n  \"Comb-Duck\",\n  \"Common-Eider\",\n  \"Common-Goldeneye\",\n  \"Common-Merganser\",\n  \"Common-Pochard\",\n  \"Common-Scoter\",\n  \"Common-Shelduck\",\n  \"Cotton-Pygmy\",\n  \"Crested-Duck\",\n  \"Crested-Shelduck\",\n  \"Eatons-Pintail\",\n  \"Falcated\",\n  \"Ferruginous\",\n  \"Freckled-Duck\",\n  \"Gadwall\",\n  \"Garganey\",\n  \"Greater-Scaup\",\n  \"Green-Pygmy\",\n  \"Grey-Teal\",\n  \"Hardhead\",\n  \"Harlequin\",\n  \"Hartlaubs\",\n  \"Hooded-Merganser\",\n  \"Hottentot-Teal\",\n  \"Kelp-Goose\",\n  \"King-Eider\",\n  \"Lake-Duck\",\n  \"Laysan-Duck\",\n  \"Lesser-Scaup\",\n  \"Long-Tailed\",\n  \"Maccoa-Duck\",\n  \"Mallard\",\n  \"Mandarin\",\n  \"Marbled-Teal\",\n  \"Mellers-Duck\",\n  \"Merganser\",\n  \"Northern-Pintail\",\n  \"Orinoco-Goose\",\n  \"Paradise-Shelduck\",\n  \"Plumed-Whistler\",\n  \"Puna-Teal\",\n  \"Pygmy-Goose\",\n  \"Radjah-Shelduck\",\n  \"Red-Billed\",\n  \"Red-Crested\",\n  \"Red-Shoveler\",\n  \"Ring-Necked\",\n  \"Ringed-Teal\",\n  \"Rosy-Billed\",\n  \"Ruddy-Shelduck\",\n  \"Salvadoris-Teal\",\n  \"Scaly-Sided\",\n  \"Shelduck\",\n  \"Shoveler\",\n  \"Silver-Teal\",\n  \"Smew\",\n  \"Spectacled-Eider\",\n  \"Spot-Billed\",\n  \"Spotted-Whistler\",\n  \"Steamerduck\",\n  \"Stellers-Eider\",\n  \"Sunda-Teal\",\n  \"Surf-Scoter\",\n  \"Tufted-Duck\",\n  \"Velvet-Scoter\",\n  \"Wandering-Whistler\",\n  \"Whistling-duck\",\n  \"White-Backed\",\n  \"White-Cheeked\",\n  \"White-Winged\",\n  \"Wigeon\",\n  \"Wood-Duck\",\n  \"Yellow-Billed\"\n];\n\nfunction selectRandom(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nexport function generateRandomName() {\n  return `${selectRandom(names)}-${Math.floor(10000 + Math.random() * 10000)}`;\n}\n\nexport const avatarIds = avatars.map(av => av.id);\n\nexport function generateDefaultProfile() {\n  return {\n    avatarId: selectRandom(avatarIds)\n  };\n}\n","import { Validator } from \"jsonschema\";\nimport merge from \"deepmerge\";\nimport Cookies from \"js-cookie\";\nimport jwtDecode from \"jwt-decode\";\n\nconst LOCAL_STORE_KEY = \"___hubs_store\";\nconst STORE_STATE_CACHE_KEY = Symbol();\nconst OAUTH_FLOW_CREDENTIALS_KEY = \"ret-oauth-flow-account-credentials\";\nconst validator = new Validator();\nimport { EventTarget } from \"event-target-shim\";\nimport { generateDefaultProfile, generateRandomName } from \"../utils/identity.js\";\n\n// Durable (via local-storage) schema-enforced state that is meant to be consumed via forward data flow.\n// (Think flux but with way less incidental complexity, at least for now :))\nexport const SCHEMA = {\n  id: \"/HubsStore\",\n\n  definitions: {\n    profile: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        displayName: { type: \"string\", pattern: \"^[A-Za-z0-9-]{3,32}$\" },\n        avatarId: { type: \"string\" },\n        personalAvatarId: { type: \"string\" }\n      }\n    },\n\n    credentials: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        token: { type: [\"null\", \"string\"] },\n        email: { type: [\"null\", \"string\"] }\n      }\n    },\n\n    activity: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        hasFoundFreeze: { type: \"boolean\" },\n        hasChangedName: { type: \"boolean\" },\n        hasAcceptedProfile: { type: \"boolean\" },\n        lastEnteredAt: { type: \"string\" },\n        hasPinned: { type: \"boolean\" },\n        hasRotated: { type: \"boolean\" },\n        hasRecentered: { type: \"boolean\" },\n        hasScaled: { type: \"boolean\" },\n        hasHoveredInWorldHud: { type: \"boolean\" }\n      }\n    },\n\n    settings: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        lastUsedMicDeviceId: { type: \"string\" }\n      }\n    },\n\n    confirmedDiscordRooms: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n\n    uploadPromotionTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          fileId: { type: \"string\" },\n          promotionToken: { type: \"string\" }\n        }\n      }\n    },\n\n    creatorAssignmentTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          creatorAssignmentToken: { type: \"string\" }\n        }\n      }\n    }\n  },\n\n  type: \"object\",\n\n  properties: {\n    profile: { $ref: \"#/definitions/profile\" },\n    credentials: { $ref: \"#/definitions/credentials\" },\n    activity: { $ref: \"#/definitions/activity\" },\n    settings: { $ref: \"#/definitions/settings\" },\n    confirmedDiscordRooms: { $ref: \"#/definitions/confirmedDiscordRooms\" },\n    uploadPromotionTokens: { $ref: \"#/definitions/uploadPromotionTokens\" },\n    creatorAssignmentTokens: { $ref: \"#/definitions/creatorAssignmentTokens\" }\n  },\n\n  additionalProperties: false\n};\n\nexport default class Store extends EventTarget {\n  constructor() {\n    super();\n\n    if (localStorage.getItem(LOCAL_STORE_KEY) === null) {\n      localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify({}));\n    }\n    this.update({\n      activity: {},\n      settings: {},\n      credentials: {},\n      profile: {},\n      confirmedDiscordRooms: [],\n      uploadPromotionTokens: [],\n      creatorAssignmentTokens: []\n    });\n\n    const oauthFlowCredentials = Cookies.getJSON(OAUTH_FLOW_CREDENTIALS_KEY);\n    if (oauthFlowCredentials) {\n      this.update({ credentials: oauthFlowCredentials });\n      this.resetToRandomLegacyAvatar();\n      Cookies.remove(OAUTH_FLOW_CREDENTIALS_KEY);\n    }\n  }\n\n  // Initializes store with any default bits\n  init = () => {\n    this.update({\n      profile: { ...generateDefaultProfile(), ...(this.state.profile || {}) }\n    });\n\n    // Regenerate name to encourage users to change it.\n    if (!this.state.activity.hasChangedName) {\n      this.update({ profile: { displayName: generateRandomName() } });\n    }\n  };\n\n  resetToRandomLegacyAvatar = () => {\n    this.update({\n      profile: { ...(this.state.profile || {}), ...generateDefaultProfile() }\n    });\n  };\n\n  get state() {\n    if (!this.hasOwnProperty(STORE_STATE_CACHE_KEY)) {\n      this[STORE_STATE_CACHE_KEY] = JSON.parse(localStorage.getItem(LOCAL_STORE_KEY));\n    }\n\n    return this[STORE_STATE_CACHE_KEY];\n  }\n\n  get credentialsAccountId() {\n    if (this.state.credentials.token) {\n      return jwtDecode(this.state.credentials.token).sub;\n    } else {\n      return null;\n    }\n  }\n\n  resetConfirmedDiscordRooms() {\n    // merge causing us some annoyance here :(\n    const overwriteMerge = (destinationArray, sourceArray) => sourceArray;\n    this.update({ confirmedDiscordRooms: [] }, { arrayMerge: overwriteMerge });\n  }\n\n  resetTipActivityFlags() {\n    this.update({ activity: { hasRotated: false, hasPinned: false, hasRecentered: false, hasScaled: false } });\n  }\n\n  update(newState, mergeOpts) {\n    const finalState = merge(this.state, newState, mergeOpts);\n    const { valid } = validator.validate(finalState, SCHEMA);\n\n    if (!valid) {\n      // Intentionally not including details about the state or validation result here, since we don't want to leak\n      // sensitive data in the error message.\n      throw new Error(`Write to store failed schema validation.`);\n    }\n\n    localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify(finalState));\n    delete this[STORE_STATE_CACHE_KEY];\n\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    return finalState;\n  }\n}\n","export const avatars = [\n  {\n    id: \"botdefault\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotDefault_Avatar-9f71f8ff22.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botdefault-thumb-42C4C7D3C01D085EAFDAC8BACE591CE6.png\"\n  },\n  {\n    id: \"botbobo\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotBobo_Avatar-f9740a010b.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botbobo-thumb-261278FD5831E9CD89610D15948F23E4.png\"\n  },\n  {\n    id: \"botdom\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotDom_Avatar-0c48bf15a5.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botdom-thumb-1160EB5E81D24F12CE643C520CE1E99E.png\"\n  },\n  {\n    id: \"botgreg\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotGreg_Avatar-98d39797bb.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botgreg-thumb-F2A37F14F9C342EE44DDE9B24DD9B9FC.png\"\n  },\n  {\n    id: \"botguest\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotGuest_Avatar-78cd857332.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botguest-thumb-F7A471250E2C10C2709325C3B02A8BBB.png\"\n  },\n  {\n    id: \"botjim\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotJim_Avatar-d28005a687.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botjim-thumb-A2D195C1A51A082BCED58BD172481B39.png\"\n  },\n  {\n    id: \"botkev\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotKev_Avatar-a95787bb51.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botkev-thumb-90746A7349E3F964C913EA612EE9A53F.png\"\n  },\n  {\n    id: \"botpinky\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotPinky_Avatar-b0b93f8675.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botpinky-thumb-C2E69D4479077766B988DC3EE4F30BE5.png\"\n  },\n  {\n    id: \"botrobert\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotRobert_Avatar-e9554880f3.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botrobert-thumb-9C33F2C752326E2CF4321EAA7BDB4E47.png\"\n  },\n  {\n    id: \"botwoody\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotWoody_Avatar-0140485a23.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botwoody-thumb-F1F1FA7E21301B5AC1D8872B4ED0CC56.png\"\n  }\n];\n","import screenfull from \"screenfull\";\nimport { showFullScreenIfWasFullScreen } from \"./fullscreen\";\nconst { detect } = require(\"detect-browser\");\n\nconst browser = detect();\nlet isExitingFullscreenDueToFocus = false;\n\n// Utility function that handles a bunch of incidental stuff related to text fields:\n//\n// - On non-mobile platforms, selects the value on focus\n// - If full screen, exits/enters full screen because of firefox full screen issues\nexport function handleTextFieldFocus(target) {\n  if (!window.AFRAME) return;\n  const isMobile = AFRAME.utils.device.isMobile();\n\n  if (screenfull.isFullscreen && !AFRAME.utils.device.isMobileVR() && browser.name === \"firefox\") {\n    // This will prevent focus, but its the only way to avoid getting into a\n    // weird \"firefox reports full screen but actually not\". You end up having to tap\n    // twice to ultimately get the focus.\n    //\n    // We need to keep track of a bit here so that we don't re-full screen when\n    // the text box is blurred by the browser.\n\n    isExitingFullscreenDueToFocus = true;\n    screenfull.exit().then(() => {\n      target.focus();\n    });\n  }\n\n  if (!isMobile) target.select();\n}\n\nexport function handleTextFieldBlur() {\n  // This is the incidental blur event when exiting fullscreen mode on mobile\n  if (isExitingFullscreenDueToFocus) {\n    isExitingFullscreenDueToFocus = false;\n    return;\n  }\n\n  showFullScreenIfWasFullScreen();\n}\n","import Raven from \"raven-js\";\n\nconst ga = window.ga;\n\nexport default function registerTelemetry(trackedPage, trackedTitle) {\n  const sentryDsn = process.env.SENTRY_DSN;\n  const gaTrackingId = process.env.GA_TRACKING_ID;\n\n  if (sentryDsn) {\n    console.log(\"Tracking: Sentry DSN: \" + sentryDsn);\n    Raven.config(sentryDsn).install();\n  }\n\n  if (ga && gaTrackingId) {\n    console.log(\"Tracking: Google Analytics ID: \" + gaTrackingId);\n\n    ga(\"create\", gaTrackingId, \"auto\");\n\n    if (trackedPage) {\n      ga(\"set\", \"page\", trackedPage);\n    }\n\n    if (trackedTitle) {\n      ga(\"set\", \"title\", trackedTitle);\n    }\n\n    ga(\"send\", \"pageview\");\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport const ReactAudioContext = React.createContext({});\n\nexport const hudHoverSound = \"play_sound-hud_hover_start\";\n\nexport const WithHoverSound = ({ sound, children }) => {\n  return (\n    <ReactAudioContext.Consumer>\n      {context => {\n        return React.cloneElement(children, {\n          onMouseEnter: e => {\n            if (context && context.playSound) {\n              context.playSound(sound || hudHoverSound);\n            }\n            children.props.onMouseEnter && children.props.onMouseEnter(e);\n          }\n        });\n      }}\n    </ReactAudioContext.Consumer>\n  );\n};\n\nWithHoverSound.propTypes = {\n  children: PropTypes.object,\n  sound: PropTypes.string\n};\n","module.exports = __webpack_public_path__ + \"assets/video/home-aee18c619a9005bd4b0d31295670af80.webm\";","module.exports = __webpack_public_path__ + \"assets/video/home-5af051d2c531928dbaaf51b9badaabde.mp4\";","module.exports = __webpack_public_path__ + \"assets/images/discord-logo-small-2c21aeda16de354ba5334551a883b481.png\";","module.exports = __webpack_public_path__ + \"assets/images/moz-logo-black-b2559c1a75a74dc0e702c9c8d4f9eeae.png\";"],"sourceRoot":""}