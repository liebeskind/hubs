{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/assets/images/media-error.gif","webpack:///./src/assets/camera_tool.glb","webpack:///./src/assets/images/mic_granted.png","webpack:///./src/assets/images/mic_granted@2x.png","webpack:///./src/assets/images/mic_small.png","webpack:///./src/assets/images/mic_small@2x.png","webpack:///./src/assets/images/dropdown_arrow.png","webpack:///./src/assets/images/dropdown_arrow@2x.png","webpack:///./src/assets/images/mobile_screen_entry.svg","webpack:///./src/assets/images/desktop_screen_entry.svg","webpack:///./src/assets/images/generic_vr_entry.svg","webpack:///./src/assets/images/gearvr_entry.svg","webpack:///./src/assets/images/daydream_entry.svg","webpack:///./src/assets/images/link_dialog_header.svg","webpack:///./src/assets/images/presence_phone.png","webpack:///./src/assets/images/presence_desktop.png","webpack:///./src/assets/images/presence_discord.png","webpack:///./src/assets/images/presence_camera.png","webpack:///./src/assets/images/presence_vr.png","webpack:///./src/assets/images/level_background.png","webpack:///./src/assets/images/level_background@2x.png","webpack:///./src/assets/images/level_fill.png","webpack:///./src/assets/images/level_fill@2x.png","webpack:///./src/assets/images/mic_level.png","webpack:///./src/assets/images/mic_level@2x.png","webpack:///./src/assets/images/level_action_background.png","webpack:///./src/assets/images/level_action_background@2x.png","webpack:///./src/assets/images/level_action_fill.png","webpack:///./src/assets/images/level_action_fill@2x.png","webpack:///./src/assets/images/speaker_level.png","webpack:///./src/assets/images/speaker_level@2x.png","webpack:///./src/assets/sfx/tone.webm","webpack:///./src/assets/sfx/tone.mp3","webpack:///./src/assets/sfx/tone.ogg","webpack:///./src/assets/sfx/tone.wav","webpack:///./src/assets/images/change_avatar.svg","webpack:///./src/assets/images/spritesheets/sprite-system-spritesheet.png","webpack:///./src/systems/sprites/sprite.vert","webpack:///./src/systems/sprites/sprite.frag","webpack:///./src/utils/history.js","webpack:///./src/utils/avatar-utils.js","webpack:///./src/utils/fullscreen.js","webpack:///./src/materials/MobileStandardMaterial.js","webpack:///./src/storage/media-search-store.js","webpack:///./src/assets/sfx/tick.mp3","webpack:///./src/react-components/state-link.js","webpack:///./src/utils/audio-context-fix.js","webpack:///./src/utils/threejs-positional-audio-updatematrixworld.js","webpack:///./src/components/bone-mute-state-indicator.js","webpack:///./src/components/bone-visibility.js","webpack:///./src/components/hoverable-visuals.js","webpack:///./src/components/hover-visuals.js","webpack:///./src/components/offset-relative-to.js","webpack:///./src/components/hud-controller.js","webpack:///./src/components/icon-button.js","webpack:///./src/components/text-button.js","webpack:///./src/components/block-button.js","webpack:///./src/components/mute-button.js","webpack:///./src/components/kick-button.js","webpack:///./src/components/close-vr-notice-button.js","webpack:///./src/components/leave-room-button.js","webpack:///./src/components/visible-if-permitted.js","webpack:///./src/components/networked-avatar.js","webpack:///./src/components/pinnable.js","webpack:///./src/components/drop-object-button.js","webpack:///./src/components/remove-networked-object-button.js","webpack:///./src/components/camera-focus-button.js","webpack:///./src/components/mirror-camera-button.js","webpack:///./src/components/visible-to-owner.js","webpack:///./src/components/emit-state-change.js","webpack:///./src/components/action-to-event.js","webpack:///./src/components/action-to-remove.js","webpack:///./src/components/emit-scene-event-on-remove.js","webpack:///./src/components/follow-in-fov.js","webpack:///./src/components/matrix-auto-update.js","webpack:///./src/components/hover-menu.js","webpack:///./src/components/disable-frustum-culling.js","webpack:///./src/components/set-active-camera.js","webpack:///./src/components/track-pose.js","webpack:///./src/components/replay.js","webpack:///./src/components/visibility-by-path.js","webpack:///./src/utils/phoenix-utils.js","webpack:///./src/components/tags.js","webpack:///./src/components/gltf-model-plus.js","webpack:///./src/components/billboard.js","webpack:///./src/systems/frame-scheduler.js","webpack:///./src/systems/app-mode.js","webpack:///./src/systems/permissions.js","webpack:///./src/systems/exit-on-blur.js","webpack:///./src/systems/camera-tools.js","webpack:///./src/utils/promisify-worker.js","webpack:///./src/utils/async-utils.js","webpack:///./src/components/owned-object-limiter.js","webpack:///./src/components/set-unowned-body-kinematic.js","webpack:///./src/components/networked-counter.js","webpack:///./src/components/set-yxz-order.js","webpack:///./src/components/nav-mesh-helper.js","webpack:///./src/components/tools/drawing-manager.js","webpack:///./src/components/mute-mic.js","webpack:///./src/components/in-world-hud.js","webpack:///./src/components/virtual-gamepad-controls.js","webpack:///./src/components/ik-controller.js","webpack:///./src/components/hand-controls2.js","webpack:///./src/components/character-controller.js","webpack:///./src/components/player-info.js","webpack:///./src/components/hand-poses.js","webpack:///./src/components/freeze-controller.js","webpack:///./src/components/visibility-while-frozen.js","webpack:///./src/components/stats-plus.js","webpack:///./src/components/media-views.js","webpack:///./src/components/avatar-volume-controls.js","webpack:///./src/components/pinch-to-move.js","webpack:///./src/components/pitch-yaw-rotator.js","webpack:///./src/components/position-at-box-shape-border.js","webpack:///./src/components/pin-networked-object-button.js","webpack:///./src/components/unmute-video-button.js","webpack:///./src/components/destroy-at-extreme-distances.js","webpack:///./src/components/camera-tool.js","webpack:///./src/components/clone-media-button.js","webpack:///./src/components/open-media-button.js","webpack:///./src/components/transform-object-button.js","webpack:///./src/components/teleporter.js","webpack:///./src/components/hubs-text.js","webpack:///./src/systems/userinput/sets.js","webpack:///./src/utils/vr-caps-detect.js","webpack:///./src/react-components/state-route.js","webpack:///./src/react-components/client-info-dialog.js","webpack:///./src/react-components/loader.js","webpack:///./src/react-components/auto-exit-warning.js","webpack:///./src/react-components/entry-buttons.js","webpack:///./src/react-components/profile-entry-panel.js","webpack:///./src/react-components/media-browser.js","webpack:///./src/react-components/create-object-dialog.js","webpack:///./src/react-components/change-scene-dialog.js","webpack:///./src/react-components/avatar-url-dialog.js","webpack:///./src/react-components/help-dialog.js","webpack:///./src/utils/share.js","webpack:///./src/react-components/invite-dialog.js","webpack:///./src/react-components/invite-team-dialog.js","webpack:///./src/react-components/link-dialog.js","webpack:///./src/react-components/safari-dialog.js","webpack:///./src/react-components/safari-mic-dialog.js","webpack:///./src/react-components/rename-room-dialog.js","webpack:///./src/react-components/close-room-dialog.js","webpack:///./src/react-components/webrtc-screenshare-unsupported-dialog.js","webpack:///./src/react-components/webassembly-unsupported-dialog.js","webpack:///./src/react-components/webvr-recommend-dialog.js","webpack:///./src/react-components/leave-room-dialog.js","webpack:///./src/react-components/room-info-dialog.js","webpack:///./src/react-components/oauth-dialog.js","webpack:///./src/react-components/lobby-chat-box.js","webpack:///./src/react-components/chat-command-help.js","webpack:///./src/utils/serialize-element.js","webpack:///./src/react-components/presence-list.js","webpack:///./src/react-components/chat-message.js","webpack:///./src/react-components/in-world-chat-box.js","webpack:///./src/react-components/avatar-editor.js","webpack:///./src/react-components/mic-level-widget.js","webpack:///./src/react-components/output-level-widget.js","webpack:///./src/react-components/photo-message.js","webpack:///./src/react-components/image-message.js","webpack:///./src/react-components/presence-log.js","webpack:///./src/systems/tips.js","webpack:///./src/react-components/settings-menu.js","webpack:///./src/react-components/preload-overlay.js","webpack:///./src/react-components/2d-hud.js","webpack:///./src/react-components/spectating-label.js","webpack:///./src/utils/vr-interstitial.js","webpack:///./src/react-components/ui-root.js","webpack:///./src/utils/hub-channel.js","webpack:///./src/utils/physics-utils.js","webpack:///./src/message-dispatch.js","webpack:///./src/scene-entry-manager.js","webpack:///./src/utils/pinned-entity-to-gltf.js","webpack:///./src/subscriptions.js","webpack:///./src/systems/personal-space-bubble.js","webpack:///./src/systems/userinput/devices/mouse.js","webpack:///./src/systems/userinput/array-backed-set.js","webpack:///./src/systems/userinput/devices/keyboard.js","webpack:///./src/systems/userinput/devices/hud.js","webpack:///./src/systems/userinput/devices/xbox-controller.js","webpack:///./src/systems/userinput/pose.js","webpack:///./src/systems/userinput/arm-model.js","webpack:///./src/systems/userinput/devices/copy-sitting-to-standing-transform.js","webpack:///./src/systems/userinput/devices/oculus-go-controller.js","webpack:///./src/systems/userinput/devices/gear-vr-controller.js","webpack:///./src/systems/userinput/devices/oculus-touch-controller.js","webpack:///./src/systems/userinput/devices/daydream-controller.js","webpack:///./src/systems/userinput/devices/vive-controller.js","webpack:///./src/systems/userinput/devices/windows-mixed-reality-controller.js","webpack:///./src/systems/userinput/devices/gyro.js","webpack:///./src/systems/interactions.js","webpack:///./src/systems/userinput/devices/app-aware-mouse.js","webpack:///./src/systems/userinput/devices/touchscreen/assignments.js","webpack:///./src/systems/userinput/devices/app-aware-touchscreen.js","webpack:///./src/systems/userinput/bindings/xforms.js","webpack:///./src/utils/dpad.js","webpack:///./src/systems/userinput/bindings/utils.js","webpack:///./src/systems/userinput/bindings/keyboard-mouse-user.js","webpack:///./src/systems/userinput/bindings/touchscreen-user.js","webpack:///./src/systems/userinput/bindings/keyboard-debugging.js","webpack:///./src/systems/userinput/bindings/oculus-touch-user.js","webpack:///./src/systems/userinput/bindings/vive-user.js","webpack:///./src/systems/userinput/bindings/windows-mixed-reality-user.js","webpack:///./src/systems/userinput/bindings/xbox-controller-user.js","webpack:///./src/systems/userinput/bindings/daydream-user.js","webpack:///./src/systems/userinput/bindings/cardboard-user.js","webpack:///./src/systems/userinput/bindings/oculus-go-user.js","webpack:///./src/systems/userinput/resolve-action-sets.js","webpack:///./src/systems/userinput/devices/gamepad.js","webpack:///./src/systems/userinput/bindings/generic-gamepad.js","webpack:///./src/systems/userinput/userinput.js","webpack:///./src/systems/camera-mirror.js","webpack:///./src/systems/userinput/userinput-debug.js","webpack:///./src/systems/ui-hotkeys.js","webpack:///./src/systems/cursor-targetting-system.js","webpack:///./src/systems/constraints-system.js","webpack:///./src/systems/two-point-stretching-system.js","webpack:///./src/systems/button-systems.js","webpack:///./src/systems/hover-menu-system.js","webpack:///./src/systems/super-spawner-system.js","webpack:///./src/systems/haptic-feedback-system.js","webpack:///./src/systems/lobby-camera-system.js","webpack:///./src/systems/hubs-systems.js","webpack:///./src/systems/capture-system.js","webpack:///./src/systems/sprites.js","webpack:///./src/systems/post-physics.js","webpack:///./src/components/scalable-when-grabbed.js","webpack:///./src/components/cursor-controller.js","webpack:///./src/components/tools/pen.js","webpack:///./src/utils/sharedbuffergeometry.js","webpack:///./src/utils/sharedbuffergeometrymanager.js","webpack:///./src/components/tools/networked-drawing.js","webpack:///./src/network-schemas.js","webpack:///./src/hub.js","webpack:///./src/utils/concurrent-load-detector.js","webpack:///./src/utils/threejs-allocation-patches.js","webpack:///./src/utils/media-url-utils.js","webpack:///./src/constants.js","webpack:///./src/components/environment-map.js","webpack:///./src/assets/images/cubemap/posx.jpg","webpack:///./src/assets/images/cubemap/negx.jpg","webpack:///./src/assets/images/cubemap/posy.jpg","webpack:///./src/assets/images/cubemap/negy.jpg","webpack:///./src/assets/images/cubemap/posz.jpg","webpack:///./src/assets/images/cubemap/negz.jpg","webpack:///./src/utils/disable-ios-zoom.js","webpack:///./src/App.js","webpack:///./src/utils/component-utils.js","webpack:///./src/assets/stylesheets/media-browser.scss","webpack:///./src/assets/stylesheets/sign-in-dialog.scss","webpack:///./src/assets/stylesheets/hub.scss","webpack:///./src/components/virtual-gamepad-controls.css","webpack:///./src/assets/stylesheets/ui-root.scss","webpack:///./src/assets/stylesheets/entry.scss","webpack:///./src/systems/userinput/paths.js","webpack:///./src/airtable.js","webpack:///./src/assets/stylesheets/invite-dialog.scss","webpack:///./src/assets/stylesheets/client-info-dialog.scss","webpack:///./src/assets/stylesheets/loader.scss","webpack:///./src/assets/stylesheets/profile.scss","webpack:///./src/assets/stylesheets/avatar-preview.scss","webpack:///./src/assets/stylesheets/create-object-dialog.scss","webpack:///./src/assets/stylesheets/change-scene-dialog.scss","webpack:///./src/assets/stylesheets/avatar-url-dialog.scss","webpack:///./src/assets/stylesheets/link-dialog.scss","webpack:///./src/assets/stylesheets/rename-room-dialog.scss","webpack:///./src/assets/stylesheets/close-room-dialog.scss","webpack:///./src/assets/stylesheets/leave-room-dialog.scss","webpack:///./src/assets/stylesheets/room-info-dialog.scss","webpack:///./src/assets/stylesheets/oauth-dialog.scss","webpack:///./src/assets/stylesheets/message-entry.scss","webpack:///./src/assets/stylesheets/chat-command-help.scss","webpack:///./src/assets/stylesheets/presence-log.scss","webpack:///./src/assets/stylesheets/presence-list.scss","webpack:///./src/assets/stylesheets/avatar-editor.scss","webpack:///./src/assets/stylesheets/settings-menu.scss","webpack:///./src/assets/stylesheets/preload-overlay.scss","webpack:///./src/assets/stylesheets/2d-hud.scss","webpack:///./src/assets/stylesheets/spectating-label.scss","webpack:///./src/assets/images/warning_icon.png","webpack:///./src/assets/images/warning_icon@2x.png","webpack:///./src/react-components/avatar-preview.js","webpack:///./src/react-components/sign-in-dialog.js","webpack:///./src/react-components/dialog-container.js","webpack:///./src/systems/sound-effects-system.js","webpack:///./src/utils/scene-graph.js","webpack:///./src/utils/auto-box-collider.js","webpack:///./src/utils/logging.js","webpack:///./src/utils/auth-channel.js","webpack:///./src/utils/animation.js","webpack:///./src/utils/qs_truthy.js","webpack:///./src/everyspace/messages.js","webpack:///./src/utils/i18n.js","webpack:///./src/utils/mask-email.js","webpack:///./src/react-components/media-tiles.js","webpack:///./src/utils/webgl.js","webpack:///./src/utils/media-highlight-frag.glsl","webpack:///./src/assets/LoadingObject_Atom.glb","webpack:///./src/assets/sfx/teleport-loop.mp3","webpack:///./src/assets/sfx/quickTurn.mp3","webpack:///./src/assets/sfx/tap_mellow.mp3","webpack:///./src/assets/sfx/PenSpawn.mp3","webpack:///./src/assets/sfx/PenDraw1.mp3","webpack:///./src/assets/sfx/PicSnapHey.mp3","webpack:///./src/assets/sfx/welcome.mp3","webpack:///./src/assets/sfx/quack.mp3","webpack:///./src/assets/sfx/specialquack.mp3","webpack:///./src/assets/sfx/pop.mp3","webpack:///./src/assets/sfx/Eb_blip.mp3","webpack:///./src/assets/sfx/tack.mp3","webpack:///./src/assets/sfx/A_bendUp.mp3","webpack:///./src/assets/sfx/suspense.mp3","webpack:///./src/assets/waternormals.jpg","webpack:///./src/utils/crypto.js","webpack:///./src/utils/link-channel.js","webpack:///./src/utils/identity.js","webpack:///./src/storage/store.js","webpack:///./src/utils/media-utils.js","webpack:///./src/utils/focus-utils.js","webpack:///./src/assets/images/mic_denied.png","webpack:///./src/assets/images/mic_denied@2x.png","webpack:///./src/utils/three-utils.js","webpack:///./src/utils/material-utils.js","webpack:///./src/assets/avatars/avatars.js","webpack:///./src/telemetry.js","webpack:///./src/utils/debug-log.js","webpack:///./src/utils/threejs-world-update.js","webpack:///./src/components/animation.js","webpack:///./src/components/ambient-light.js","webpack:///./src/components/animation-mixer.js","webpack:///./src/components/audio-feedback.js","webpack:///./src/components/css-class.js","webpack:///./src/components/duck.js","webpack:///./src/components/heightfield.js","webpack:///./src/components/hemisphere-light.js","webpack:///./src/components/hide-when-quality.js","webpack:///./src/components/point-light.js","webpack:///./src/components/spot-light.js","webpack:///./src/components/floaty-object.js","webpack:///./src/components/trigger-volume.js","webpack:///./src/components/video-pause-state.js","webpack:///./src/components/debug.js","webpack:///./src/systems/nav.js","webpack:///./src/components/event-repeater.js","webpack:///./src/object-types.js","webpack:///./src/react-components/wrap-with-audio.js","webpack:///./src/utils/image-bitmap-utils.js","webpack:///./src/utils/resizeShadowCameraFrustum.js","webpack:///./src/components/directional-light.js","webpack:///./src/components/layers.js","webpack:///./src/components/loop-animation.js","webpack:///./src/components/media-loader.js","webpack:///./src/components/quack.js","webpack:///./src/components/scene-preview-camera.js","webpack:///./src/components/skybox.js","webpack:///./src/components/spawn-controller.js","webpack:///./src/components/super-spawner.js","webpack:///./src/components/water.js","webpack:///./src/utils/component-mappings.js","webpack:///./src/gltf-component-mappings.js","webpack:///./src/utils/next-tick.js","webpack:///./src/assets/images/logo.svg","webpack:///./src/assets/images/giphy_logo.png"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","6","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","pushOrUpdateHistory","history","replace","k","v","detail","newPathname","newSearch","state","newLength","location","__historyLength","_objectSpread","__duplicate","pathname","undefined","search","isDuplicate","method","pushHistoryState","replaceHistoryState","pushHistoryPath","path","clearHistoryState","popToBeginningOfHubHistory","navigateToPriorPage","len","Promise","resolve","unsubscribe","listen","go","sluglessPath","split","join","withSlug","AVATAR_TYPES","LEGACY","SKINNABLE","URL","legacyAvatarIds","avatars","map","a","id","getAvatarType","avatarId","indexOf","startsWith","resp","fetchReticulumAuthenticated","fetchAvatar","_x2","_fetchAvatar","this","arguments","avatar_id","gltf_url","find","avatar","model","fetchSkinnableAvatar","proxiedUrlFor","then","getAvatarSrc","fetchAvatarGltfUrl","getAvatarThumbnailUrl","_x4","_getAvatarThumbnailUrl","thumbnail","files","__webpack_exports__","showFullScreenIfAvailable","showFullScreenIfWasFullScreen","screenfull__WEBPACK_IMPORTED_MODULE_0__","screenfull__WEBPACK_IMPORTED_MODULE_0___default","hasEnteredFullScreenThisSession","AFRAME","utils","device","isMobile","isMobileVR","isIOS","screenfull","enabled","request","isFullscreen","VERTEX_SHADER","FRAGMENT_SHADER","MobileStandardMaterial","THREE","ShaderMaterial","[object Object]","args","super","_defineProperty","material","parameters","vertexShader","fragmentShader","uniforms","uvTransform","Matrix3","diffuse","color","opacity","aoMapIntensity","aoMap","emissive","emissiveMap","fog","lights","transparent","alphaTest","skinning","morphTargets","vertexColors","mobileMaterial","clone","fromStandardMaterial","SOURCES","EMPTY_RESULT","entries","meta","URL_SOURCE_TO_TO_API_SOURCE","scenes","images","videos","youtube","gifs","sketchfab","poly","twitch","favorites","MEDIA_SOURCE_DEFAULT_FILTERS","SEARCH_CONTEXT_PARAMS","MediaSearchStore","EventTarget","constructor","_this","_ref","_asyncToGenerator","dispatchEvent","CustomEvent","urlSource","getUrlMediaSource","previousSource","urlParams","URLSearchParams","requestIndex","currentRequestIndex","searchParams","locationSearchParams","isMy","param","set","source","navigator","languages","singular","fetch","APP","store","credentialsAccountId","toString","url","getReticulumFetchUrl","lastSavedUrl","isFetching","fetchReticulum","nextCursor","next_cursor","lastFetchedUrl","_x","legacyAvatar","type","preview","width","height","gltfs","delta","goBack","filter","query","delete","keepSource","keepNav","_stashedParams","_stashedSource","q","_sourceNavigate","_ref2","hideNav","useLastStashedParams","currentQuery","getSearchClearedSearchParams","useValue","hasAccountWithAvatars","_hasAccountWithAvatars","process","document","host","_x3","substring","stashLastSearchParams","_stashLastSearchParams","hasMediaPath","setHistory","_update","StateLink","React","Component","handleClick","event","props","onClick","defaultPrevented","button","target","metaKey","altKey","ctrlKey","shiftKey","isModifiedEvent","preventDefault","stateKey","stateValue","stateDetail","render","innerRef","className","children","react__WEBPACK_IMPORTED_MODULE_0___default","createElement","href","ref","PropTypes","bool","string","func","node","addEventListener","ctx","AudioContext","getContext","resume","setTimeout","body","removeEventListener","PositionalAudio","updateMatrixWorld","position","Vector3","quaternion","Quaternion","scale","orientation","force","Object3D","setInitial","_lastPosition","_lastOrientation","_lastListenerPosition","panner","listener","context","matrixWorld","decompose","applyQuaternion","Math","abs","x","Number","EPSILON","y","z","positionX","positionY","positionZ","setPosition","setOrientation","registerComponent","schema","unmutedBoneName","default","mutedBoneName","onPos","offPos","init","onStateToggled","el","unmutedBone","object3D","getObjectByName","mutedBone","modelLoaded","updateMuteState","play","sceneEl","pause","e","muted","is","matrixNeedsUpdate","tick","visible","lastVisible","updateMatrices","interactorOneTransform","interactorTwoTransform","enableSweepingEffect","boundingSphere","Sphere","sweepParams","remove","boundingBox","time","isPinned","components","pinnable","pinned","isSpawner","isFrozen","hideDueToPinning","interactorOne","interactorTwo","interaction","systems","leftHand","hovered","held","options","entity","rightRemote","rightHand","toArray","worldY","elements","scaledRadius","radius","uniform","hubs_EnableSweepingEffect","hubs_IsFrozen","hubs_SweepParams","hubs_HighlightInteractorOne","hubs_InteractorOnePos","hubs_HighlightInteractorTwo","hubs_InteractorTwoPos","hubs_Time","hand","handleLeftVisuals","handleRightVisuals","hideVisualEffectOnElement","hadLeftVisualLastFrame","hadRightVisualLastFrame","interactingElement","hideVisual","offset","on","selfDestruct","updateOffset","QUARTER_CIRCLE","PI","offsetVector","obj","copy","localToWorld","parent","worldToLocal","getWorldQuaternion","rotateOnAxis","removeAttribute","TWOPI","head","lookCutoff","animRange","yawCutoff","onChildHovered","removeHoverEvents","isYLocked","lockedHeadPositionY","lookDir","lookEuler","Euler","hoverableChildren","querySelectorAll","hud","pitch","rotation","RAD2DEG","yawDif","b","deltaAngle","forceHudVisible","activity","hasHoveredInWorldHud","clamp","hudLocked","hudOutOfView","add","DEG2RAD","update","image","hoverImage","activeImage","activeHoverImage","active","tooltip","tooltipText","activeTooltipText","onHover","hovering","updateButtonState","onHoverOut","sprite","setAttribute","console","warn","error","querySelector","textHoverColor","textColor","backgroundHoverColor","backgroundColor","textEl","noop","dependencies","getObject3D","raycast","block","owner","NAF","getNetworkedEntity","networkedEl","networked","clientId","hubChannel","hide","mute","emit","kick","updateVisibility","permissions","canOrWillIfCreator","left_hand_pose","right_hand_pose","_fireEvents","oldData","isMine","pinStateChanged","changed","currentScale","dur","from","to","easing","delay","wasHeld","COLLISION_LAYERS","require","targetEl","takeOwnership","modifyGravityOnRelease","gravity","angularDamping","linearDamping","linearSleepingThreshold","angularSleepingThreshold","collisionFilterMask","DEFAULT_INTERACTABLE","activate","parentNode","removeChild","track","selector","cameraSystem","myCamera","getMyCamera","focus","isVisible","shouldBeVisible","labelSelector","_updateUI","_isMirrored","labelEl","unmirror","mirror","getMirroredCameraEl","isMirrored","onStateChange","newOwner","multiple","transform","oneof","stateadded","stateremoved","userinput","requireOwnership","speed","angle","targetPos","snappedRot","snappedQ","snappedXForm","Matrix4","snappedXFormWorld","tempVector","dt","_applyMaskedTargetRotation","applyMatrix4","started","order","setFromEuler","compose","multiplyMatrices","_updateMatrixAutoUpdate","matrixAutoUpdate","template","dirs","dim","onFrozenStateChange","getHoverMenu","applyHoverState","menuPromise","menu","appendChild","importNode","content","animate","object3DMap","mesh","setScalar","traverse","frustumCulled","camera","currentActiveCamera","activeCameraEl","setActiveCamera","canvas","classList","matrix","matrixIsModified","playhead","poseIndex","overflow","poses","timestamp","absolute","_fetchReticulum","headers","Content-Type","credentialsToken","credentials","token","authorization","res","status","text","JSON","parse","reticulumMeta","invalidatedReticulumMetaThisSession","invalidateReticulumMeta","_invalidateReticulumMeta","getReticulumMeta","_getReticulumMeta","version","getAttribute","pool","phx_host","json","_x7","phxHostOverride","connectToReticulum","_connectToReticulum","debug","params","qs","getNewSocketUrl","_ref3","socketProtocol","protocol","socketHost","socketPort","RETICULUM_SOCKET_SERVER","port","socketUrl","log","socketSettings","logger","kind","msg","socket","Socket","connect","onError","endPointPath","endPoint","newEndPoint","getLandingPageForPhoto","photoUrl","parsedUrl","payload","retUrl","content-type","stringify","createAndRedirectToNewHub","_x5","_x6","_createAndRedirectToNewHub","sceneId","sceneUrl","createUrl","assets","Name","SceneUrl","record","airtableAssets","fields","hub","default_environment_gltf_bundle_url","Store","email","creatorAssignmentToken","creator_assignment_token","creatorAssignmentTokens","hubId","hub_id","embedToken","embed_token","embedTokens","getPresenceProfileForSession","presences","sessionId","presence","metas","profile","migrateChannelToSocket","oldChannel","channel","topic","bindings","item","callback","pushBuffer","timeout","oldJoinPush","joinPush","recHooks","receive","isHandCollisionTarget","isHoldable","offersHandConstraint","offersRemoteConstraint","singleActionButton","holdableButton","isPen","isHoverMenuChild","didUpdateOnce","Mesh","acceleratedRaycast","GLTFCache","extractZipFile","promisifyWorker","SketchfabZipWorker","defaultInflator","componentName","componentData","Error","Array","isArray","cloneSkinnedMesh","cloneLookup","Map","parallelTraverse","sourceNode","clonedNode","isMesh","geometry","boundsTree","sourceMesh","isSkinnedMesh","sourceBones","skeleton","bones","clonedMesh","sourceBone","has","bindMatrix","getHubsComponents","hubsComponents","userData","gltfExtensions","MOZ_hubs_components","HUBS_components","legacyComponents","GLTFModelPlus","componentKey","inflator","inflateEntities","indexToEntityMap","templates","isRoot","modelToWorldScale","childEntities","child","entityComponents","append","uuid","setFromQuaternion","multiplyScalar","identity","setObject3D","toLowerCase","animations","gltfIndex","attachTemplate","root","templateRoot","targetEls","cloneNode","attributes","loadGLTF","_loadGLTF","src","contentType","preferredTechnique","onProgress","jsonPreprocessor","fileMap","gltfUrl","includes","loadingManager","LoadingManager","setURLModifier","getCustomGLTFParserURLResolver","gltfLoader","GLTFLoader","parser","reject","createParser","extensions","oldHeightfieldNode","nodes","heightfield","runMigration","materials","MOZ_alt_materials","altMaterialIndex","extras","gltf","scene","DefaultMatrixAutoUpdate","mapMaterials","isMeshStandardMaterial","keys","forEach","revokeObjectURL","useCache","inflate","quality","loadTemplates","applySrc","templateEl","firstElementChild","loadModel","technique","_this2","charAt","assetEl","getElementById","lastSrc","inflatedEl","disposeLastInflatedEl","initMixer","hasBufferGeometry","isBufferGeometry","hasBoundsTree","geo","triCount","index","count","MeshBVH","strategy","maxDepth","object3DToSet","nextTick","inflatedEntity","prop","inflateComponents","rewires","environmentMapComponent","applyEnvironmentMap","f","format","dispose","_updateBillboard","_updateIsInView","schedule","unschedule","isInView","frustum","Frustum","frustumMatrix","box","Box3","boxTemp","expandBox","computeBoundingBox","expandByPoint","min","max","playerCamera","screenCamera","projectionMatrix","matrixWorldInverse","setFromMatrix","makeEmpty","intersectsBox","isInViewOfCamera","setFromMatrixPosition","lookAt","registerSystem","registry","queues","frameIndex","queue","idx","invert","updateComponentState","inVRMode","class","can","permissionName","fetchPermissions","onBlur","onFocus","onTimeout","onEnterVR","isOculusBrowser","userAgent","match","enteredVR","lastTimeoutCheck","exitTimeout","clearTimeout","cameraEls","register","_onOwnershipChange","deregister","avatarUpdated","onAvatarUpdated","worker","nextItemId","outstanding","onmessage","err","handlers","transfer","promise","postMessage","waitForDOMContentLoaded","waitForEvent","readyState","eventName","eventObj","once","counter","_syncCounterRegistration","isHeld","timestamps","performance","now","setBodyKinematic","didThisOnce","UNOWNED_INTERACTABLE","locked","clear","size","_destroyOldest","oldestEl","minTs","MAX_VALUE","ts","_destroy","teleporters","queryCollisionEntities","_onComponentInitialized","drawingToPen","drawingEl","drawing","createDrawing","getDrawing","pen","returnDrawing","bindAllEvents","events","unbindAllEvents","eventSrc","toggleEvents","muteEvents","unmuteEvents","onToggle","onMute","onUnmute","connection","adapter","soundEffectsSystem","playSoundOneShot","SOUND_TOGGLE_MIC","enableMicrophone","removeState","addState","mic","spawn","cameraBtn","inviteBtn","background","updateButtonStates","evt","onMicClick","onSpawnClick","onPenClick","SOUND_SPAWN_PEN","onCameraClick","onInviteClick","onEnterVr","onExitVr","onFirstInteraction","onMoveJoystickChanged","onMoveJoystickEnd","onLookJoystickChanged","onLookJoystickEnd","mockJoystickContainer","styles","leftMock","mockJoystick","leftMockSmall","inner","rightMock","rightMockSmall","leftTouchZone","touchZone","left","leftStick","nipplejs","zone","fadeTime","rightTouchZone","right","rightStick","inVr","moving","rotating","moveEvent","axis","rotateYEvent","rotateXEvent","off","joystick","radian","cos","sin","style","display","leftController","rightController","LEGACY_HAND_ROTATIONS","makeRotationFromEuler","HAND_ROTATIONS","leftEye","rightEye","neck","chest","hips","rotationSpeed","alwaysUpdate","_runScheduledWork","flipY","makeRotationY","cameraForward","headTransform","hipsPosition","invHipsToHeadVector","middleEyeMatrix","middleEyePosition","invMiddleEyeToHead","cameraYRotation","cameraYQuaternion","invHipsQuaternion","headQuaternion","rootToChest","invRootToChest","ikRoot","findIKRoot","hasConvergedHips","lastCameraTransform","cameraMirrorSystem","addVectors","divideScalar","makeTranslation","getInverse","negate","updateMatrix","hasNewCameraTransform","equals","forceIkUpdate","setFromRotationMatrix","slerp","epsilon","u","w","inverse","premultiply","handRotations","avatarType","updateHand","handRotation","handObject3D","controllerObject3D","isLeft","handMatrix","spaceInvader","handHiddenByPersonalSpace","invading","multiply","cameraWorld","pos","containsPoint","mirrorCamera","getWorldPosition","POSES","pose","poseForFingers","thumb","middleRingPinky","subpath","paths","actions","previous","current","groundAcc","pivot","snapRotationDegrees","fly","navGroup","navNode","velocity","accelerationInput","pendingSnapRotationMatrix","angularVelocity","_withinWarningLimit","_warningCount","setAccelerationInput","snapRotateLeft","snapRotateRight","setAngularVelocity","leftRotationMatrix","rightRotationMatrix","reset","axes","SOUND_SNAP_ROTATE","teleportTo","rig","deltaFromHeadToTargetForHead","targetForHead","targetForRig","targetWorldPosition","sub","pathfinder","nav","getGroup","_setNavNode","clampStep","move","trans","transInv","pivotPos","rotationAxis","yawMatrix","rotationMatrix","rotationInvMatrix","pivotRotationMatrix","pivotRotationInvMatrix","startPos","startScale","deltaSeconds","distance","userinputAngularVelocity","rotationDelta","acc","characterAcceleration","makeRotationAxis","updateVelocity","boost","lengthSq","setPositionOnNavMesh","_warnWithWarningLimit","getClosestNode","start","end","zones","dvx","dvz","ensureAvatarNodes","some","originalRoot","scale-audio-feedback","avatarSrc","displayName","communityIdentifier","isModerator","isRecording","applyProperties","updateDisplayName","applyDisplayName","handleModelError","isLocalPlayerInfo","playerSessionId","networkedEntity","getCreator","playerPresence","updateDisplayNameFromPresenceMeta","registerComponentInstance","deregisterComponentInstance","presenceMeta","streaming","recording","roles","moderator","nametagEl","communityIdentifierEl","recordingBadgeEl","modBadgeEl","modelEl","injectCustomShaderChunks","resetToRandomLegacyAvatar","open","thumbDown","indexDown","mrpDown","thumbUp","point","fist","pinch","NETWORK_POSES","animatePose","mixerEl","findAncestorWithComponent","suffix","mixer","clipAction","networkField","getNetworkedAvatar","networkedAvatar","parentEl","prev","curr","stop","fadeOut","fadeIn","setHandPose","toggleEvent","ensureFrozen","thaw","toggleFreeze","hasFoundFreeze","frozen","SOUND_FREEZE","SOUND_THAW","withinDistance","requireHoverOnNonMobile","camWorldPos","objWorldPos","cam","hoverableSearch","hoverable","shouldNotBeVisible","isWithinDistance","getLastWorldPosition","distanceToSquared","isTransforming","transforming","toggle","onExpand","onCollapse","stats","threeStats","renderer","aframeStats","plugins","rStats","css","values","fps","caption","below","groups","createStats","statsEl","statsHeaderEl","statsTitleEl","innerHTML","collapseEl","insertBefore","firstChild","fpsEl","lastFpsUpdate","lastFps","frameCount","inVR","vrStatsEnabled","qsTruthy","initVRStats","lastUpdate","vrPanel","whiteSpace","baseline","depthTest","toggleVRStats","physics","addComponent","removeComponent","beforeStep","afterStep","frame","round","toFixed","info","calls","triangles","show","ONCE_TRUE","TYPE_IMG_PNG","parseGIF","GIFWorker","VOLUME_LABELS","GIFTexture","Texture","frames","delays","disposals","_ctx","generateMipmaps","isVideoTexture","minFilter","NearestFilter","frameStartTime","Date","clearRect","drawImage","needsUpdate","arrayBuffer","rawImageData","delayTimes","loadCnt","img","Image","onload","texture","encoding","sRGBEncoding","LinearFilter","catch","videoEl","autoplay","preload","crossOrigin","createVideoTexture","createVideoEl","VideoTexture","streamClientId","stream","getMediaStream","srcObject","MediaStream","getVideoTracks","isHLS","HLS","isSupported","corsProxyPrefix","CORS_PROXY_SERVER","baseUrl","hls","xhrSetup","xhr","buildAbsoluteURL","loadSource","attachMedia","Events","ERROR","fatal","ErrorTypes","NETWORK_ERROR","startLoad","MEDIA_ERROR","recoverMediaError","canPlayType","onerror","hasResolved","resolveOnce","poll","videoHeight","videoWidth","scaleToAspectRatio","ratio","disposeTexture","HTMLVideoElement","video","load","destroy","textureCache","cache","retain","cacheItem","release","errorImage","errorImageSrc","errorTexture","timeFmt","floor","h","magFilter","volume","loop","audioType","hidePlaybackControls","distanceModel","rolloffFactor","refDistance","maxDistance","coneInnerAngle","coneOuterAngle","coneOuterGain","videoPaused","projection","tickRate","syncTolerance","onPauseStateChange","tryUpdateVideoPlaybackState","updateSrc","seekForward","seekBack","volumeUp","volumeDown","snap","changeVolumeBy","togglePlaying","videoMutedAt","localSnapCount","isSnapping","onSnapImageLoaded","hoverMenu","playbackControls","playPauseButton","volumeUpButton","volumeDownButton","seekForwardButton","seekBackButton","snapButton","timeLabel","volumeLabel","updateVolumeLabel","updateHoverMenuBasedOnLiveState","updatePlaybackState","getNetworkOwner","random","audioListener","AudioListener","cameraEl","videoIsLive","currentTime","SOUND_CAMERA_TOOL_TOOK_SNAPSHOT","blob","toBlob","file","File","spawnMediaAround","paused","audio","gain","_playbackStateChangeTimeout","_this3","cleanUp","audioSource","createMediaElementSource","setDistanceModel","setRolloffFactor","setRefDistance","setMaxDistance","Audio","setNodeSource","updateLiveState","levels","currentLevel","details","live","LEVEL_SWITCHED","duration","Infinity","MeshBasicMaterial","SphereBufferGeometry","PlaneBufferGeometry","side","DoubleSide","volumeMod","cursor","mediaVolumeMod","removeObject3D","disconnect","_hasRetainedTexture","_this4","createGIFTexture","createImageTexture","RGBAFormat","sound","touchscreen","pinchDelta","degToRad","radToDeg","minPitch","maxPitch","yaw","onRotateX","pendingXRotation","look","deltaPitch","deltaYaw","cameraDelta","lobbyCameraDelta","lookX","lookY","HALF_PI","THREE_HALF_PI","forward","back","zero","dir","halfExtent","_updateBox","_setupTarget","halfExtents","opening","wasVisible","scaleChanged","previousScaleX","previousScaleY","previousScaleZ","isAnimating","targetPosition","pointOnBoxFace","pointOnBoxFaceToCamera","boxCenter","tempParentWorldScale","boxFaceNormal","forceNewExtents","getBox","targetSquareDistance","targetDir","targetHalfExtentStr","targetHalfExtent","targetRotation","targetCameraDot","halfExtentStr","subVectors","normalize","cameraAngleDotBoxNormal","dot","squareDistance","setFromMatrixScale","sqrt","targetScale","finalScale","tipSelector","hideWhenPinnedSelector","_updateUIOnStateChange","tipEl","onHovered","onUnhovered","wasPinned","SOUND_PIN","_discordBridges","channels","discordBridges","fileIsOwned","fileId","canPin","getPromotionTokenForFile","hideEl","mediaVideo","xMin","xMax","yMin","yMax","zMin","zMax","_checkForDestroy","cameraModelPromise","cameraModelSrc","pathsMap","player-right-controller","takeSnapshot","player-left-controller","snapCanvas","pixels","imageData","createImageData","bitmap","createImageBitmap","enableCameraViewport","previewFPS","imageWidth","imageHeight","renderTarget","WebGLRenderTarget","depth","stencil","PerspectiveCamera","updateRenderTargetNextTick","aspect","screen","selfieScreen","takeSnapshotNextTick","unmirrorCameraAtEl","trackTarget","mirrorCameraAtEl","playerHead","heldLeftHand","heldRightHand","heldRightRemote","grabberId","grabPath","grabberPaths","tock","tempHeadScale","headEl","playerHud","hudEl","playerHudWasVisible","spriteSystem","tmpVRFlag","vr","tmpOnAfterRender","onAfterRender","setRenderTarget","snapPixels","Uint8Array","readRenderTargetPixels","pixelsToPNG","objectType","ObjectTypes","CAMERA","guessContentType","resize","addMedia","ObjectContentOrigins","label","mayChangeScene","isHubsAvatarUrl","isHubsSceneUrl","isHubsRoomUrl","pop","AMMO_BODY_ATTRIBUTES","HANDS","TRANSFORM_MODE","AXIS","PUPPET","CURSOR","ALIGN","SCALE","STEP_LENGTH","CAMERA_WORLD_QUATERNION","CAMERA_WORLD_POSITION","TARGET_WORLD_QUATERNION","v2","q2","onGrabStart","transformSystem","startTransform","onGrabEnd","stopTransform","dxStore","dxApplied","dyAll","dyStore","dyApplied","puppet","initialControllerOrientation","initialControllerOrientation_inverse","initialObjectOrientation","currentControllerOrientation","controllerOrientationDelta","planarInfo","plane","wireframe","normal","intersections","previousPointOnPlane","currentPointOnPlane","deltaOnPlane","finalProjectedVec","startPlaneCasting","raycaster","far","sign","sign2","dxAll","hasScaled","hasRotated","hasRecentered","puppetingTick","cursorAxisOrScaleTick","cameraToPlaneDistance","intersection","projectOnPlane","modify","transformModifier","setFromAxisAngle","scaleFactor","newScale","FORWARD","TWO_PI","RayCurve","numPoints","BufferGeometry","vertices","Float32Array","uvs","addAttribute","BufferAttribute","setDynamic","drawMode","TriangleStripDrawMode","direction","parabolicCurve","p0","v0","out","setDirection","UP","cross","setWidth","setPoint","posA","posB","checkLineIntersection","meshes","referenceNormal","landingMaxAngle","hitPoint","intersects","intersectObjects","collisionNormal","angleNormals","angleTo","isValidNormalsAngle","face","LANDING_NORMAL","vecHelper","confirm","collisionEntities","hitCylinderColor","hitCylinderRadius","outerRadius","hitCylinderHeight","isTeleporting","rayCurve","teleportEntity","parabola","hit","Raycaster","rigWorldPosition","newRigWorldPosition","teleportOriginWorldPosition","teleportEventDetail","oldPosition","newPosition","prevHitHeight","hitEntity","createHitEntity","stopPlayingTeleportSound","teleportingSound","stopSoundNode","sfx","timeTeleporting","playSoundLoopedWithGain","SOUND_TELEPORT_START","characterController","SOUND_TELEPORT_END","collidedIndex","timeSegment","percentToDraw","segmentT","hitEntityOpacity","easeOutIn","dRadii","outerScale","easeIn","outerTorus","torus","cylinder","primitive","radiusTubular","segmentsRadial","segmentsTubular","shader","segmentsHeight","openEnded","MAX_ANISOTROPY","computeWidth","wrapPixels","wrapCount","widthFactor","FONTS","roboto","font","ch","chars","yoffset","sum","digitsum","digits","xadvance","computeFontWidthFactor","ImageLoader","anisotropy","loadTexture","align","oneOf","anchor","letterSpacing","lineHeight","tabSize","xOffset","zOffset","shaderData","getShaderData","shaderObject","shaders","Shader","createTextGeometry","attrName","updateFont","currentFont","updateGeometry","updateLayout","FrontSide","BackSide","parseSide","all","pages","layout","geometryComponent","textScale","descender","TypeError","ascender","geometryUpdateBase","geometryUpdateData","newLineRegex","tabRegex","isFinite","common","assign","sets","detect","browser","VR_DEVICE_AVAILABILITY","yes","no","maybe","GENERIC_ENTRY_TYPE_DEVICE_BLACKLIST","getAvailableVREntryTypes","_getAvailableVREntryTypes","ua","isSamsungBrowser","test","isWebVRCapableBrowser","hasNativeWebVRImplementation","isDaydreamCapableBrowser","isIDevice","isFirefoxBrowser","isUIWebView","mediaDevices","safari","isCardboardCapableBrowser","displays","getVRDisplays","generic","cardboard","gearvr","isMaybeGearVRCompatibleDevice","daydream","isMaybeDaydreamCompatibleDevice","capabilities","canPresent","StateRoute","_this$props","routeProps","_objectWithoutProperties","react_default","es_Route","_extends","ClientInfoDialog","client_info_dialog_defineProperty","avatarThumbnailUrl","performConditionalSignIn","onClose","client_info_dialog_asyncToGenerator","unhide","getPresenceProfile","componentDidMount","setState","title","mayKick","mayMute","isHidden","dialog_container","client_info_dialog_extends","clientInfoDialog","wide","roomInfo","clientProfileImage","clientActionButtons","index_es","cancel","Loader","loader_defineProperty","loadingNum","loadedNum","doneWithInitialLoad","loadingTimeout","tryFinishLoading","environmentSceneLoaded","onLoaded","onObjectLoading","onObjectLoaded","componentWillUnmount","nomore","loaderStyles","loadingText","progress","usual","locale","lang","messages","loadingIcon","finished","AutoExitWarning","secondsRemaining","wrap_with_audio","onCancel","propTypes","number","EntryButton","cx","entryButton","entryButtonSecondary","secondary","iconSrc","icon","contents","prefixMessageId","bolded","mediumMessageId","subtitle","isInHMD","TwoDEntryButton","entryButtonProps","MobileScreenEntryImg","DesktopScreenEntryImg","GenericEntryButton","GenericVREntryImg","DaydreamEntryButton","DaydreamEntryImg","ProfileEntryPanel","profile_entry_panel_defineProperty","getStateFromProfile","hasChangedName","hasChangedNowOrPreviously","hasAcceptedProfile","stopPropagation","entry","profile_entry_panel_asyncToGenerator","storeUpdated","nameInput","setAvatarFromMediaResult","refetchAvatar","componentDidUpdate","_prevProps","prevState","formatMessage","intl","profileEntry","onSubmit","saveStateAndFinish","form","classNames","darkened","htmlFor","displayNameOverride","formFieldText","handleTextFieldFocus","handleTextFieldBlur","onChange","required","spellCheck","pattern","SCHEMA","definitions","properties","inp","avatar_preview","avatarGltfUrl","account_id","state_link","hideDelete","returnToProfile","editAvatar","react_fontawesome_index_es","faPencilAlt","chooseAvatar","mediaSearchStore","sourceNavigateWithNoNav","formSubmit","links","rel","logo","injectIntl","PRIVACY_POLICY_LINKS","DEFAULT_FACETS","MediaBrowser","media_browser_defineProperty","facets","showNav","selectNextResult","clearStashedQueryOnClose","newState","getStoreAndHistoryState","selectEntry","close","inputRef","getUrlSource","suggestions","forceNow","_sendQueryTimeout","filterQueryNavigate","lucky_query","handleQueryUpdated","onMediaSearchResultEntrySelected","sourceNavigate","facet","pushExitMediaBrowserHistory","isSceneApiType","isAvatarApiType","dialog","clearStashedQuery","pageNavigate","browserDiv","scrollTop","sourceChanged","showCustomOption","hideSearch","showEmptyStringOnNoResult","handleCustomClicked","showCustomMediaDialog","mediaBrowser","header","noSearch","headerLeft","faTimes","headerCenter","favoritesHeader","faStar","faSearch","autoFocus","placeholder","onKeyDown","handleEntryClicked","trim","blur","engineAttribution","engineAttributionContents","headerRight","createButton","faLink","faCloudUploadAlt","createLink","handleSourceClicked","navSource","navSourceSelected","navRightPad","navScrollArrow","faAngleRight","handleFacetClicked","media_tiles","handlePager","emptyString","attributionHostnames","giphy.com","giphyLogo","media.giphy.com","DEFAULT_OBJECT_URL","instructions","references","mobileInstructions","desktopInstructions","lastUrl","fileInputId","CreateObjectDialog","create_object_dialog_defineProperty","fileName","attributionImage","validity","valid","hostname","fileInput","onCreate","other","create_object_dialog_objectWithoutProperties","cancelButton","smallButton","cancelIcon","uploadButton","uploadIcon","faPaperclip","filenameLabel","leftSideOfInput","urlInput","onUrlChange","create_object_dialog_extends","onCreateClicked","addMediaForm","hideFileInput","onFileChange","inputBorder","buttons","actionButton","ChangeSceneDialog","change_scene_dialog_defineProperty","onChangeClicked","changeSceneForm","spokeCreate","spokeLaunch","AvatarUrlDialog","avatar_url_dialog_defineProperty","avatarUrlDialog","HelpDialog","help_dialog_extends","textAlign","share","opts","tweetLink","encodeURIComponent","InviteDialog","invite_dialog_defineProperty","copyButtonActive","shareButtonActive","link","entryCode","embedUrl","entryCodeString","num","pad","shortLinkText","shortLink","embedText","modal","isModal","attachPoint","hubLinkLink","code","digit","domain","readOnly","select","linkButton","copyClicked","allowShare","shareClicked","embed","showEmbedTip","embedTipWrap","embedTip","embedTipAttachPoint","hasPush","subscribe","onSubscribeChanged","checked","isSubscribed","enterVrButton","InviteTeamDialog","invite_team_dialog_defineProperty","inviteButtonText","requestSupport","invite_team_dialog_extends","inviteClicked","LinkDialog","linkCode","codeLoadingPanel","imageHeader","LinkDialogHeader","keepOpen","closeButton","SafariDialog","safari_dialog_defineProperty","copyLinkButtonText","onCopyClicked","copyLinkClicked","safari_dialog_extends","SafariMicDialog","safari_mic_dialog_extends","reload","RenameRoomDialog","rename_room_dialog_defineProperty","onRename","rename_room_dialog_extends","renameRoomForm","autoComplete","nameField","nextButton","CloseRoomDialog","close_room_dialog_extends","message","confirmButton","onConfirm","WebRTCScreenshareUnsupportedDialog","webrtc_screenshare_unsupported_dialog_extends","flexDirection","alignItems","fontSize","WebAssemblyUnsupportedDialog","webassembly_unsupported_dialog_extends","WebVRRecommendDialog","webvr_recommend_dialog_extends","LeaveRoomDialog","leave_room_dialog_extends","leaveRoom","messageType","destinationUrl","RoomInfoDialog","toAttributionDiv","attribution","attributionName","attributionAuthor","author","attributions","creator","hubName","room_info_dialog_extends","sceneScreenshot","scaledThumbnailUrlFor","screenshot_url","sceneDetails","sceneMain","sceneName","sceneCreator","sceneAttributions","sceneButtons","OAuthDialog","oauth_dialog_extends","privacyNotice","oauthButtons","oauthInfo","oauthButton","oauthTypeName","array","LobbyChatBox","lobby_chat_box_defineProperty","pendingMessage","onSendMessage","textRows","pendingMessageTextareaHeight","pendingMessageFieldHeight","discordSnippet","occupantSnippet","occupantCount","messageEntryPlaceholder","sendMessage","messageEntry","messageEntryDisabled","messageEntryInput","rows","disabled","messageEntryButton","messageEntrySubmit","faPaperPlane","ChatCommandHelp","commands","commandHelp","commandHelpOnTop","onTop","matchingPrefix","command","defaultStylesByTagName","noStyleTags","BASE","HEAD","HTML","META","NOFRAME","NOSCRIPT","PARAM","SCRIPT","STYLE","TITLE","tagNames","computeDefaultStyleByTagName","tagName","defaultStyle","element","computedStyle","getComputedStyle","warmSerializeElement","navigateToClientInfo","currentParams","PresenceList","presence_list_defineProperty","CameraImage","mobile","PhoneImage","hmd","HMDImage","discord","DiscordImage","DesktopImage","getPresenceImage","isBot","badge","moderatorBadge","row","listItem","self","clientLink","presenceList","domForPresence","signIn","signedIn","maskEmail","onSignOut","onSignIn","messageCanvas","emojiRegex","urlRegex","textureLoader","TextureLoader","messageBodyDom","fromSessionId","multiLine","wrapStyle","messageWrapMulti","messageWrap","mono","endsWith","messageBodyClasses","messageBody","messageBodyMulti","messageBodyMono","includeClientLink","onFromClick","words","outWords","word","wordWrap","cleanedBody","messageSource","messageSourceLink","Linkify_default","toEmojis","renderChatMessage","allowEmojiRender","lowResolution","isOneLine","emoji","isEmoji","presenceLog","presenceLogSpawn","entryDom","presenceLogEntry","presenceLogEntryOneLine","presenceLogEmoji","ReactDOM","objectScale","offsetWidth","offsetHeight","xhtml","nodeType","Node","ELEMENT_NODE","cssTexts","toUpperCase","cssText","ii","cssPropName","outerHTML","serializeElement","chat_message_asyncToGenerator","unmountComponentAtNode","meshEntity","blobUrl","createObjectURL","isRawProperty","meshMaterial","spawnChatMessage","_spawnChatMessage","ChatMessage","maySpawn","iconButton","spawnMessage","InWorldChatBox","in_world_chat_box_defineProperty","messageEntryInRoom","messageEntryOnMobile","chat_command_help_ChatCommandHelp","accept","onObjectCreated","enableSpawning","messageEntryButtonInRoom","messageEntryUpload","faCamera","faPlus","messageEntryInputInRoom","messageEntryInputNoSpawn","messageEntrySpawn","AVATARS_API","AvatarEditor","avatar_editor_defineProperty","parent_avatar_listing_id","previewGltfUrl","avatar_editor_asyncToGenerator","creatorAttribution","inputFiles","base_gltf_url","glb","KHR_binary_glTF","bin","getWrappedInstance","snapshot","filesToUpload","uploading","fileUploads","upload","avatar_editor_objectSpread","file_id","access_token","promotion_token","reduce","createOrUpdateAvatar","onSave","avatarEditor","textField","textarea","fileField","mapField","checkbox","avatar_editor_extends","uploadAvatar","confirmDelete","deleteAvatar","webkitAudioContext","MicLevelWidget","mic_level_widget_defineProperty","micLevel","mediaStream","hasAudioTrack","startAnalyzer","prevProps","stopAnalyzer","micUpdateInterval","clearInterval","micLevelAudioContext","micSource","createMediaStreamSource","analyser","createAnalyser","fftSize","frequencyBinCount","micLevelMovingAverage","MovingAverage","setInterval","getByteTimeDomainData","level","average","movingAverage","micClip","clip","level_background_default","srcSet","level_background_2x_default","muteOnEntry","level_fill_default","level_fill_2x_default","mic_level_default","mic_level_2x_default","mic_denied_default","mic_denied_2x_default","OutputLevelWidget","output_level_widget_defineProperty","tonePlaying","playTestTone","toneClip","webmTone","mp3Tone","oggTone","wavTone","testToneTimeout","speakerClip","level_action_background_default","level_action_background_2x_default","level_action_fill_default","level_action_fill_2x_default","speaker_level_default","speaker_level_2x_default","PhotoMessage","landingPageUrl","onShareClicked","mediaBody","ImageMessage","spawnImage","PresenceLog","presence_log_defineProperty","entryClasses","presenceLogEntryWithButton","presenceLogChat","expired","oldName","newName","media","presenceClasses","presenceLogInRoom","inRoom","domForEntry","LOCAL_CLOSE_TIPS","localStorageCache","finishedScopes","tipPlatform","platformTips","desktop","top","bottom","standalone","isTipFinished","tip","localStorage","getItem","markTipFinished","storeData","setItem","handleTipClose","fullTip","scope","tips","resetTips","resetTipActivityFlags","resetConfirmedBroadcastedRooms","VALIDATORS","activeSets","cursorHoldingPen","touchCameraDelta","smartMouse","locomotion","accel","turning","spawn_menu","mediaCounter","freeze_gesture","cursorHoldingInteractable","cursorHoveringOnInteractable","menu_hover","invite","cursorHoldingCamera","object_grab","object_rotate_button","object_scale_button","object_recenter_button","object_pin","hasPinned","object_zoom","modDelta","object_scale","scaleGrabbedGrabbable","pen_color","penNextColor","penPrevColor","pen_size","scalePenTip","pen_mode","freeze_mode","video_share_mode","mirror_mode","mute_mode","activeTips","_finishedScopes","_performStep","_userinput","_mediaCounter","prevTop","prevBottom","chosenTip","finishCount","SettingsMenu","rowClasses","settingsRow","rowHeader","showRoomSettings","showCloseRoom","showRoomInfo","hubScene","showRoomSection","showStreamerMode","settingsMenu","change_avatar_default","hideSettings","listItemLink","faImage","faDoorClosed","faInfoCircle","showNonHistoriedDialog","faVideo","toggleStreamerMode","bottomLinksMain","bottomLinks","bottomLink","isStreaming","PreloadOverlay","treatment","screenshot","mainPanel","onLoadClicked","loadButton","TopHUD","_2d_hud_defineProperty","showVideoShareOptions","lastActiveMediaSource","videoShareMediaSource","onEndShareVideo","onShareVideo","onShareVideoNotCapable","videoShareExtraOptionTypes","primaryVideoShareType","showExtrasOnHover","hideVideoSharingButtonTimeout","videoShare","handleVideoShareClicked","onMouseOver","videoShareExtraOptions","onMouseOut","videoSharingButtons","buildVideoSharingButtons","watching","topTip","topTipNoHud","tipCancel","onWatchEnded","tipCancelText","activeTip","container","unselectable","uiStyles","uiInteractive","panel","onToggleMute","sourceNavigateToDefaultSource","isCursorHoldingPen","onSpawnPen","hasActiveCamera","onSpawnCamera","onToggleFreeze","showStreamingTip","hideStreamingTip","react_components_2d_hud","SpectatingLabel","_isIn2DInterstitial","_exitAction","afterUserGesturePrompt","handleExitTo2DInterstitial","isLower","exitAction","exitVR","vrNotice","handleReEntryToVRFrom2DInterstitial","exit","enterVR","avatarEditorDebug","addLocaleData","en","HMD_MIC_REGEXES","IN_ROOM_MODAL_ROUTER_PATHS","IN_ROOM_MODAL_QUERY_VARS","LOBBY_MODAL_ROUTER_PATHS","LOBBY_MODAL_QUERY_VARS","LOBBY_MODAL_QUERY_VALUES","enumerateDevices","isMobilePhoneOrVR","AUTO_EXIT_TIMER_SECONDS","UIRoot","ui_root_defineProperty","enterInVR","entered","showShareDialog","showPresenceList","showSettingsMenu","broadcastTipDismissed","linkCodeCancel","miniInviteActivated","didConnectToNetworkedScene","noMoreLoadingUpdates","hideLoader","waitingOnAudio","shareScreen","requestedScreen","audioTrack","numAudioTracks","micDevices","profileNamePending","autoExitTimerStartedAt","autoExitTimerInterval","secondsRemainingBeforeAutoExit","spacebubble","exited","signInMessageId","authChannel","signInCompleteMessageId","signInContinueTextId","onContinueAfterSignIn","SignInDialog","ui_root_asyncToGenerator","authComplete","startAuthentication","authStarted","continueText","onContinue","subscriptions","isFavorited","initialIsFavorited","sceneLoaded","mediaSource","updateSubscribedState","forcedVREntryType","enterDaydream","enter2D","disableAutoExitOnConcurrentLoad","secondsSinceStart","checkForAutoExit","endAutoExitTimer","reason","exitScene","grantedMicLabels","_ref4","hasGrantedMicPermissions","setMediaStreamToDefault","beginOrSkipAudioSetup","performDirectEntryFlow","availableVREntryTypes","_ref8","ev","constraints","deviceId","exact","fetchAudioTrack","setupNewMediaStream","hasAudio","lastUsedMicDeviceId","settings","ideal","_ref10","getUserMedia","getAudioTracks","fetchMicDevices","addTrack","micDeviceId","micDeviceIdForMicLabel","micLabelForMediaStream","entry_step","onAudioReadyButton","hasHmdMicrophone","selectedMicLabel","enterScene","onFinished","linkChannel","generateCode","hasOpenedShare","updateScene","ui_root_objectSpread","DialogClass","closeDialog","enable","beginStreaming","endStreaming","_ref15","signOut","broadcastedRoomConfirmed","confirmedBroadcastedRooms","interstitial","onInterstitialPromptClicked","roomUnavailableReason","platformUnsupportedReason","exitSubtitleId","logo_default","promptForNameAndAvatarBeforeEntry","hubIsBound","entryStyles","entryPanel","collapseButton","toggleFavorited","entryFavoriteButton","favoriteButton","favorited","roomSubtitle","center","lobby_chat_box","buttonContainer","attemptLink","secondaryActionButton","wideButton","buttonSubtitle","handleForceEntry","faArrowLeft","audioLoader","screenSharing","setStateAndRequestScreen","granted","onMicGrantButton","mic_granted_default","mic_granted_2x_default","subtitleId","mic_level_widget_MicLevelWidget","output_level_widget_OutputLevelWidget","selectedMicDeviceId","micDeviceChanged","mic_small_default","mic_small_2x_default","dropdown_arrow_default","dropdown_arrow_2x_default","shouldShowHmdMicWarning","warning_icon_default","warning_icon_2x_default","overlay","showSafariMicDialog","safari_mic_dialog_SafariMicDialog","closable","showSafariDialog","safari_dialog_SafariDialog","showWebAssemblyDialog","webassembly_unsupported_dialog_WebAssemblyUnsupportedDialog","exitEventHandler","airtableAssetsInitialState","showSignInDialog","showContextualSignInDialog","willCompileAndUploadMaterials","requestAnimationFrame","isBotMode","compileAndUploadMaterials","onConcurrentLoad","onSceneLoaded","onAframeStateChanged","onShareVideoEnabled","onShareVideoDisabled","onStoreChanged","action","audioContext","playSound","onMouseLeave","isExited","showPreload","isLoading","rootStyles","ui","ui-root","in-modal-or-overlay","isInModalOrOverlay","serviceWorker","showOAuthDialog","oauth_dialog_OAuthDialog","renderExitedPane","react_components_loader","Icon","onLoadingFinished","showInterstitialPrompt","renderInterstitialPrompt","renderBotMode","enteredOrWatching","enteredOrWatchingOrPreload","entryDialog","isWaitingForAutoExit","auto_exit_warning","state_route","renderDevicePanel","renderMicPanel","renderAudioSetupPanel","renderEntryStartPanel","dialogBoxContentsClassNames","uiDialogBoxContents","backgrounded","showVREntryButton","presenceLogEntries","showMediaBrowser","hasTopTip","clientInfoClientId","getClientInfoClientId","showClientInfo","hasEmbedPresence","hasDiscordBridges","showBroadcastTip","showInviteTip","streamingTip","streamingTipAttachPoint","streamingTipClose","streamingTipMessage","streamer","getCurrentStreamer","streamerName","Provider","preload_overlay_PreloadOverlay","onPreloadLoadClicked","DarkLogo","profile_entry_panel","ui_root_extends","avatar_editor_AvatarEditor","onAvatarSaved","react_components_media_browser","renderDialog","rename","closeHub","createObject","changeScene","setAvatarUrl","client_info_dialog_ClientInfoDialog","uiDialog","presence_log_PresenceLog","bottomTip","splitTip","splitTipIcon","confirmBroadcastedRoom","in_world_chat_box","leaveButton","inviteStyles","inviteContainer","inviteContainerBelowHud","inviteContainerInverted","inviteTip","inviteTipAttachPoint","onMiniInviteClicked","inviteMiniButton","enterButton","invite_dialog_InviteDialog","hubEntryCode","initialIsSubscribed","link_dialog_LinkDialog","cornerButton","cameraModeExitButton","cornerButtonSelected","faBars","presenceInfo","presenceInfoSelected","faUsers","presence_list_PresenceList","settings_menu_SettingsMenu","spectating_label_SpectatingLabel","topHud","toggleMute","onToggleSpaceBubble","toggleSpaceBubble","spawnPen","shareVideo","endShareVideo","showWebRTCScreenshareUnsupportedDialog","nagCornerButton","inRoomFavoriteButton","isSupportAvailable","MS_PER_DAY","MS_PER_MONTH","isSameMonth","da","db","getFullYear","getMonth","HUB_CREATOR_PERMISSIONS","HubChannel","hub_channel_defineProperty","Presence","_permissions","jwtDecode","nextRefresh","exp","hub_channel_asyncToGenerator","entryDisplayType","vrDisplay","isPresenting","initialOccupantCount","publisher","initialOccupants","entryEvent","hub_channel_objectSpread","getEntryTimingFlags","entryTimingFlags","isNewDaily","isNewMonthly","isNewDayWindow","isNewMonthWindow","storedLastEnteredAt","lastEnteredAt","lastEntered","msSinceLastEntered","getDate","isSameDay","spawnEvent","object_type","update_hub","close_hub","subscription","allow","creatorAssignmentTokenEntry","_getCreatorAssignmentToken","perms_token","setPermissionsFromToken","_signedIn","gltfNode","fileAccessToken","promotionToken","gltf_node","file_access_token","permsToken","session_id","_blockedSessionIds","unblock","entities","completeSync","Set","permission","migrateToSocket","presenceBindings","onJoin","caller","onLeave","onSync","PHYSICS_CONSTANTS","SHAPE","FIT","exceedsDensityThreshold","subtree","bounds","boundingData","isHighDensity","leftResult","rightResult","isGeometryHighDensity","roots","_roots","traverseMeshesAndAddShapes","shapes","meshRoot","group","Sky","__proto__","navMesh","shapePrefix","MESH","margin","fit","ALL","includeInvisible","BOX","MANUAL","groupEnd","DUCK_URL","MessageDispatch","entryManager","addToPresenceLog","remountUI","message_dispatch_defineProperty","commandParts","dispatchCommand","activeElement","playerRig","scales","curScale","physicsSystem","captureSystem","SOUND_SPECIAL_QUACK","SOUND_QUACK","setDebug","available","isDebug","SceneEntryManager","scene_entry_manager_defineProperty","whenSceneLoaded","cursorController","_entered","scene_entry_manager_asyncToGenerator","session","verbose","_setupPlayerRig","_setupBlocking","_setupKicking","_setupMedia","_setupCamera","_spawnAvatar","SOUND_ENTER_SCENE","_runBot","setLocalMediaStream","sendEntryEvent","toISOString","hasLoaded","localMediaStream","getTracks","setAnimationLoop","_setPlayerInfoFromProfile","avatarScale","parseInt","kickedClientId","persistent","_unpinElement","removeEntity","removeEntitiesOfClient","networkId","storedPromotionToken","gltfComponents","equalArray","every","translation","mediaSrc","pageIndex","pinnedEntityToGltf","pin","_signInAndPinOrUnpinElement","_pinElement","_disableSignInOnPinAction","mediaLoader","unpin","spawnMediaInfrontOfPlayer","contentOrigin","or","currentVideoShareEntity","FILE","sendObjectSpawnedEvent","matches","clipboardData","getData","CLIPBOARD","dataTransfer","isHandlingVideoShare","shareVideoMediaStream","_ref7","newStream","frameRate","removeTrack","audioEl","audioInput","dataInput","getAudio","crossorigin","onchange","getRecording","captureStream","mozCaptureStream","INIT_TIMEOUT_MS","urlBase64ToUint8Array","base64String","base64","repeat","rawData","atob","outputArray","charCodeAt","Subscriptions","subscriptions_defineProperty","registration","vapidPublicKey","_isSubscribed","subscriptions_asyncToGenerator","startedAt","pushManager","convertedVapidKey","permissionState","userVisibleOnly","applicationServerKey","getSubscription","endpoint","pushSubscription","has_remaining_subscriptions","invaderPos","bubblePos","createSphereGizmo","WireframeGeometry","line","LineSegments","invaders","bubbles","tickCount","_updateInvaders","registerBubble","bubble","unregisterBubble","registerInvader","invader","unregisterInvader","updateDebug","setInvading","tempInvasionFlags","setInvaderFlag","distanceSquared","radiusSum","flushInvadingFlagsForIndex","meshName","targetMesh","useMaterial","invadingOpacity","findInvaderMesh","radiusSquared","forEachMaterial","system","modeMod","WheelEvent","DOM_DELTA_PIXEL","DOM_DELTA_LINE","DOM_DELTA_PAGE","isInModal","uiRoot","contains","MouseDevice","coords","movementXY","buttonLeft","buttonRight","wheel","queueEvent","deltaX","deltaY","deltaMode","clientX","innerWidth","clientY","innerHeight","movementX","movementY","mouseDownLeftThisFrame","mouseDownRightThisFrame","write","didStopProcessingEarly","setVector2","mouse","setValueType","ArrayBackedSet","initialItems","items","oncontextmenu","KeyboardDevice","seenKeys","nodeName","keyboard","HudDevice","penButton","XboxControllerDevice","gamepad","buttonMap","buttonId","axisMap","axisId","getGamepads","connected","xboxPaths","xbox","pressed","touched","axesSum","hapticActuators","haptics","actuators","Pose","fromOriginAndDirection","origin","setFromUnitVectors","fromCameraProjection","normalizedX","normalizedY","unproject","EYES_TO_ELBOW","FOREARM","applyArmModel","controllerEuler","deltaControllerPosition","controllerQuaternion","controllerPosition","gamepadPose","headObject3D","userHeight","applyAxisAngle","up","fromArray","applyEuler","copySittingToStandingTransform","stageParameters","sittingToStandingTransform","ONES","TOUCHPAD","oculusgo","touchpad","TRIGGER","trigger","OculusGoControllerDevice","rayObjectRotation","sittingToStandingMatrix","rayObject","axisX","axisY","rayMatrixWorld","setPose","setMatrix4","gearVRController","TOUCHPAD_X","TOUCHPAD_Y","GearVRControllerDevice","leftOculusTouchButtonMap","rightOculusTouchButtonMap","LEFT_HAND_OFFSET","RIGHT_HAND_OFFSET","OculusTouchControllerDevice","buttonMaps","devicePaths","leftOculusTouch","rightOculusTouch","handOffset","HAND_OFFSET","POSE","MATRIX","DaydreamControllerDevice","RAY_ROTATION","ViveControllerDevice","vive","WindowsMixedRealityControllerDevice","wmr","grip","CircularBuffer","fill","writePtr","difference","GyroDevice","hmdEuler","hmdQuaternion","prevX","prevY","dXBuffer","dYBuffer","hasPolyfill","webvrpolyfill","getPolyfillDisplays","frameData","VRFrameData","getFrameData","dX","dY","averageDeltaX","averageDeltaY","gyro","findHandCollisionTargetForHand","driver","numManifolds","dispatcher","getNumManifolds","handPtr","Ammo","getPointer","persistentManifold","getManifoldByIndexInternal","body0ptr","getBody0","body1ptr","getBody1","numContacts","getNumContacts","getContactPoint","getDistance","els","tags","remoteHoverTargets","findRemoteHoverTarget","updateCursorIntersection","rightRemoteHoverTarget","grab","dropPath","drop","hoverFn","getRightRemoteHoverTarget","spawning","previousState","tickInteractor","lostOwnership","tick2","rightHandTeleporter","gazeTeleporter","rightHandInteracting","rightHandTeleporting","rightRemotePenIntersectingInVR","enableRightRemote","SOUND_HOVER_OR_GRAB","logInteractionState","calculateCursorPose","cursorPose","AppAwareMouseDevice","prevButtonLeft","clickedOnAnything","prevCursorPose","prevOrigin","prevDirection","rawIntersections","cursorTargettingSystem","targets","remoteHoverTarget","touchIsAssigned","touch","assignments","assignment","identifier","jobIsAssigned","job","unassign","findIndex","findByJob","findByTouch","MOVE_CURSOR_JOB","MOVE_CAMERA_JOB","FIRST_PINCHER_JOB","SECOND_PINCHER_JOB","TAP_PATHS","tap1","tap2","tap3","tap4","tap5","x1","y1","x2","y2","dx","dy","getPlayerCamera","AppAwareTouchscreenDevice","initialDistance","currentDistance","pendingTap","maxTouchCount","tapIndexToWriteNextFrame","framesUntilGrab","framesUntilUnassign","second","first","cameraMover","isFirstTouch","isSecondTouch","isThirdTouch","hasSecondPinch","setFromCamera","shouldMoveCursor","cursorJob","previousAssignment","changedTouches","touches","hasCursorJob","hasCameraJob","isTouching","isTouchingGrabbable","xforms","dest","scalar","scaleExp","pow","deadzone","deadzoneSize","split_vec2","compose_vec2","copyIfFalse","copyIfTrue","zeroIfDefined","true","rising","risingWithFrameDelay","falling","vec2Zero","_","poseFromCameraProjection","vec2dpad","deadzoneRadius","invertX","invertY","deadzoneRadiusSquared","atan2","always","constValue","wasd_to_vec2","vec2","add_vec2","max_vec2","normalize_vec2","any","touch_axis_scroll","snap_to","touching","addSetsToBindings","mapping","setName","binding","togglePenWithP","togglePenWithHud","keyboardMouseUserBindings","global","hideLine","xform","exitMirror","priority","toggleCamera","muteMic","focusChat","focusChatCommand","mediaExit","mediaSearch1","mediaSearch2","mediaSearch3","mediaSearch4","mediaSearch5","mediaSearch6","mediaSearch7","mediaSearch8","logDebugFrame","startGazeTeleport","stopGazeTeleport","startDrawing","stopDrawing","undoDrawing","cursorHoldingUI","cursorHoveringOnVideo","inputFocused","cursorHoveringOnUI","touchCamDelta","touchscreenUserBindings","cursorHoveringOnPen","keyboardDebuggingBindings","leftButton","leftAxis","leftPose","rightButton","rightAxis","rightPose","rightGripRisingGrab","lowerButtons","leftGripPressed1","leftGripPressed2","rightGripPressed1","rightGripPressed2","leftTriggerPressed1","leftTriggerPressed2","rightTriggerPressed1","rightTriggerPressed2","oculusTouchUserBindings","north","south","east","west","override","stopTeleport","leftHandHoveringOnNothing","startTeleport","cursorHoveringOnNothing","leftHandHoveringOnInteractable","leftHandHoldingInteractable","leftHandHoveringOnPen","leftHandHoldingPen","switchDrawMode","rightHandHoveringOnInteractable","rightHandHoldingInteractable","rightHandHoveringOnPen","rightHandHoldingPen","cursorHoveringOnCamera","rightHandHoveringOnCamera","leftHandHoveringOnCamera","rightHandHoldingCamera","leftHandHoldingCamera","rightHandHoveringOnNothing","lButton","lAxis","lPose","lJoy","lJoyScaled","lJoyXScaled","lJoyYScaled","lDpadNorth","lDpadSouth","lDpadEast","lDpadWest","lDpadCenter","lTriggerFallingStopDrawing","lGripFallingStopDrawing","lTriggerRisingGrab","lGripRisingGrab","lTouchpadRising2","lTouchpadRising1","lCharacterAcceleration","leftBoost","rButton","rAxis","rPose","rJoy","rDpadNorth","rDpadSouth","rDpadEast","rDpadWest","rDpadCenter","rDpadCenterStrip","rTouchpadRising","rTouchpadFalling","rightBoost","rTriggerRisingGrab","rGripRisingGrab","cursorDrop1","cursorDrop2","rHandDrop1","rHandDrop2","rTriggerStopTeleport","rTouchpadStopTeleport","ensureFrozenViaDpad","ensureFrozenViaKeyboard","thawViaDpad","thawViaKeyboard","rSnapRight","rSnapLeft","keyboardSnapRight","keyboardSnapLeft","keyboardCharacterAcceleration","wasd_vec2","arrows_vec2","keyboardBoost","leftTouchpadPressed1","leftTouchpadPressed2","leftTouchpadFallingStopTeleport","leftTriggerFallingStopTeleport","leftGripFallingWhileHoldingPen","viveUserBindings","leftHandTeleporting","lGripPressed","rGripPressed","rTriggerPressed","rJoyNorth","rGripRising","rTriggerRising","rGripFalling","rTriggerFalling","dpadVariables","padWest","padEast","padNorth","padSouth","padCenter","padCenterStrip","dpadBindings","neverFrozenBinding","penBindings","forCursor","padY","triggerPressed","padPressed","padTouched","padRising","padCenterStripTouched","handPoseBindings","gripPressed","holdingCameraBindings","wmrUserBindings","leftPadPressed","rightPadPressed","leftPadFalling","rightPadFalling","keyboardSaceFalling","freezeBindings","rJoyWest","rJoyEast","rJoyWestRising","rJoyEastRising","keyboardQRising","keyboardERising","teleportationAndRotationBindings","lJoyXDeadzoned","lJoyYDeadzoned","characterAccelerationBindings","cursorMediaVolumeModBindings","rPadNorthOrSouth","rPadNorthOrSouthPressed","rPadNorthOrSouthPressedY","cursorModDeltaBindings","scaledRightJoystickVertical","scaledLeftJoystickCursorDelta","deadzonedRightJoystickHorizontal","deadzonedRightJoystickVertical","deadzonedLeftJoystickHorizontal","deadzonedLeftJoystickVertical","disableForwardOnTrigger","scaledLeftJoystickHorizontal","scaledLeftJoystickVertical","scaledLeftJoystickForwardAcceleration","xboxControllerUserBindings","cursorHoldingNothing","touchpadRising","touchpadFalling","touchpadPressed","dpadNorth","dpadSouth","dpadEast","dpadWest","dpadCenter","brushSizeDelta","cursorModDelta","dpadSouthDrop","dpadCenterDrop","grabBinding","dropOnCenterOrSouth","daydreamUserBindings","cardboardUserBindings","generate3DOFTriggerBindings","touchpadButton","triggerButton","touchpadX","touchpadXForPen","touchpadY","touchpadYForPen","triggerRising","triggerFalling","dpadCenterStrip","dpadBottomCenterStrip","togglePen","dropBinding","leftTeleporter","rightTeleporter","GamepadDevice","buttonPath","gamepadBindings","oculusGoUserBindings","gearVRControllerUserBindings","satisfiesPath","satisfyPath","satisfiedBy","canMask","masker","masked","maskerKey","maskerPath","maskedKey","isActive","toggleSet","pendingSetChanges","generation","generations","mat4","prevActiveSets","xformStates","activeDevices","registeredMappings","registeredMappingsChanged","vrGamepadMappings","nonVRGamepadMappings","updateBindingsForVRMode","activeDevice","gamepadConnected","gamepadDevice","maybeToggleXboxMapping","vrAxesSum","mouseMovement","nonXboxActivity","hasXboxMapping","prevSortedBindings","sortedBindings","mappings","unsorted","sorted","dependencySort","masks","masksRow","bindingsRow","col","computeMasks","teleporter","leftHandHoveringOnVideo","rightHandHoveringOnVideo","resolveActionSets","activeSetsChanged","il","elem","found","jl","arrayContentsDiffer","actives","prevActives","prevMasked","maskedRow","computeExecutionStrategy","bindingExistedLastFrame","oldValue","_onWindowResize","mirrorEl","directRenderFunc","_patchRenderFunc","oldEl","updateProjectionMatrix","setSize","wasVREnabled","PATHS_TO_SHOW","userinputFrameStatus","replacer","pathsOutput","val","textContent","sb","logBindings","MEDIA_SEARCH_PATHS","prefix","CursorTargettingSystem","setDirty","dirty","observer","MutationObserver","observe","childList","populateEntities","ACTIVATION_STATE","ConstraintsSystem","prevLeftHand","prevRightHand","prevRightRemote","constraintTag","entityId","hasAnotherConstraint","activationState","ACTIVE_TAG","DISABLE_DEACTIVATION","COLLISION_FILTER_MASK_HANDS","distanceBetweenStretchers","obj1","obj2","distanceTo","TwoPointStretchingSystem","initialScale","leftStretcher","rightStretcher","previousLeftStretcher","previousRightStretcher","stretched","initialStretchDistance","SingleActionButtonSystem","didInteractThisFrame","HoldableButtonSystem","prevHeld","hasButtonComponent","BUTTON_COMPONENT_NAMES","dispatch","HOVERED","UNHOVERED","HoverButtonSystem","getHoverableButton","prevButton","getSpecificHoverMenu","HoverMenuSystem","findHoverMenu","prevHoverMenu","SuperSpawnerSystem","maybeSpawn","superSpawner","cooldownTimeout","performSpawn","spawnedEntity","SPAWNER","useCustomSpawnPosition","spawnPosition","useCustomSpawnRotation","spawnRotation","useCustomSpawnScale","spawnScale","activateCooldown","centerSpawnedObject","copyState","STRENGTH","DROP","PICKUP","BUTTON_PRESSED","HOVER","STRETCH_BASE","STRETCH_DISTANCE","TELEPORTING","TELEPORTED","determineStrength","HapticFeedbackSystem","twoPointStretchingSystem","didClickButton","leftActuator","rightActuator","leftHandStrength","rightHandStrength","rightRemoteStrength","buttonPressedStrength","stretchingStrength","stretchSystem","stretcherLeft","stretcherRight","leftStrength","rightStrength","pulse","LobbyCameraSystem","constraintsSystem","singleActionButtonSystem","holdableButtonSystem","hoverButtonSystem","hoverMenuSystem","superSpawnerSystem","hapticFeedbackSystem","SoundEffectsSystem","lobbyCameraSystem","_gotAudioTrack","_recorderTimeout","_initRecorder","_stream","_recorder","MediaRecorder","mimeType","chunks","ondataavailable","onstop","Blob","isTypeSupported","_tryAddingAudioTrack","destination","createMediaStreamDestination","getInput","multiviewVertPrefix","nonmultiviewVertPrefix","multiviewFragPrefix","nonmultiviewFragPrefix","didRegisterWithSystem","updateUVs","normalizedFrame","memo","spritesheet","missingSprites","ret","raycastOnSprite","vA","vB","vC","vD","intersectionInfo","intersect","ray","intersectTriangle","near","getHoverableVisuals","comp","hoverableVisuals","ZEROS","SpriteSystem","slots","indexWithSprite","maxSprites","spriteWithIndex","stack","String","concat","multiview","vert","frag","spritesheetPng","spritesheetTexture","RawShaderMaterial","u_spritesheet","mvCols","InterleavedBuffer","InterleavedBufferAttribute","indices","setIndex","createGeometry","renderOrder","RENDER_ORDER","HUD_ICONS","uniformsNeedUpdate","aEnableSweepingEffect","aSweepParams","enableSweepingEffectValue","setXY","aUvs","aVertices","setXYZ","deltaScale","addScalar","clampScalar","HIGHLIGHT","Color","NO_HIGHLIGHT","TRANSFORM_COLOR_1","TRANSFORM_COLOR_2","defaultDistance","minDistance","firstHitOnly","lineGeometry","Line","LineBasicMaterial","cameraPos","isGrabbing","addScaledVector","lerpHSL","posePosition","cursorPosition","positionArray","computeBoundingSphere","DRAW_MODE","drawFrequency","minDistanceBetweenPoints","drawingManager","availableColors","minRadius","maxRadius","timeSinceLastDraw","lastPosition","currentDrawing","worldPosition","colorIndex","grabbed","originalPosition","lastIntersectionDistance","MeshStandardMaterial","penTip","prevData","lineStartPosition","lineEndPosition","worldQuaternion","_startDraw","SOUND_PEN_START_DRAW","_endDraw","SOUND_PEN_STOP_DRAW","penScaleMod","_changeRadius","_changeColor","SOUND_PEN_CHANGE_COLOR","_undoDraw","SOUND_PEN_UNDO_DRAW","getLastWorldQuaternion","_setPenVisible","_setLineVisible","lastIntersectedObject","getLastPoint","_getNormal","draw","directionToCamera","crossVectors","startDraw","endDraw","undoDraw","mod","SharedBufferGeometry","primitiveMode","maxBufferSize","geometries","addBuffer","restartPrimitive","addVertex","prevIdx","componentSize","diff","undo","normals","colors","setDrawRange","addColor","g","addNormal","buffer","SharedBufferGeometryManager","sharedBuffers","addSharedBuffer","getSharedBuffer","copyData","fromIndex","toIndex","segments","defaultRadius","maxDrawTimeout","maxLines","maxPointsPerLine","_receiveData","networkBuffer","sendNetworkBufferQueue","drawStarted","lineStarted","remoteLineStarted","receivedBufferParts","bufferIndex","connectedToOwner","networkBufferInitialized","VertexColors","sharedBufferGeometryManager","lastPoint","lastSegments","currentSegments","sharedBuffer","vertexCount","networkBufferCount","currentPointCount","invalidPointRead","lastReadPointCount","networkBufferHistory","onConnect","getNetworkId","drawingId","subscribeToDataChannel","unsubscribeToDataChannel","isConnected","hasActiveDataChannel","sendDataGuaranteed","_broadcastDrawing","_drawFromNetwork","_sendNetworkBuffer","_deleteExpiredLines","copyArray","broadcastDataGuaranteed","didWork","pointCount","setHex","_draw","_updateBuffer","drawTime","datum","idxLength","uv","parts","ceil","dataType","_addToNetworkBuffer","getHexString","capNormal","radiusMultiplier","_generateSegments","_drawCylinder","_drawEndCap","_endLine","_addDegenerateTriangle","_restartPrimitive","_drawCap","_pushToNetworkBuffer","_drawPoint","projectedDirection","projectedPoint","clock","elapsedTime","copyDirection","copyNormal","setLength","getHex","_addVertex","down","segmentIndex","segment","segmentsList","angleIncrement","_rotatePointAroundAxis","calculatedDirection","registerNetworkSchemas","vectorRequiresUpdate","almostEqualVec3","schemas","component","requiresNetworkUpdate","BUILD_VERSION","patchWebGLRenderingContext","App","HUD_BACKGROUND","isEmbed","embedsEnabled","AmmoWasm","locateFile","firstSyncSource","isTelemetryDisabled","loadingEnvironmentURL","registerTelemetry","disableiOSZoom","instanceKey","started_at","onStorageEvent","detectConcurrentLoad","uiProps","routerBaseName","createBrowserHistory","basename","userinputSets","Router","Route","react_components_ui_root","hub_objectSpread","hub_isBotMode","hub_store","hub_mediaSearchStore","mountUI","updateUIForHub","entry_code","updateEnvironmentForHub","isLegacyBundle","environmentScene","model_url","defaultSpaceTopic","topics","glbAsset","asset_type","bundleAsset","hasExtension","baseURL","LoaderUtils","extractUrlBase","environmentEl","childNodes","Cache","moveToSpawnPoint","messageDispatch","allowNAFTraffic","hubs","embedTokenEntry","onMediaSearchCancelled","objectsScene","objectsUrl","objectsEl","connectToScene","_ref9","hub_asyncToGenerator","room","serverURL","newHostPollInterval","setReconnectionListeners","currentServerURL","serverUrl","newServerURL","getHost","sendViaPhoenix","reliable","isOpen","connectionState","reliableTransport","unreliableTransport","loadEnvironmentAndConnect","connectError","isFull","_ref11","_x17","enterSceneWhenLoaded","WebAssembly","detectedOS","detectOS","ready","setRegistration","setRegistrationFailed","initialized","gl","texImage2D","compressedTexImage2D","patchThreeAllocations","AuthChannel","predicate","messageId","onFailure","actionError","_x9","_x10","_x11","_x12","sceneInfo","LinkChannel","handleEarlyVRMode","getVRDisplay","chatFocusTarget","RTCDataChannelEvent","buildNumber","hasVREntryDevice","onFirstEnvironmentLoad","previewCamera","reorder","setupLobbyCamera","runBotMode","addAnimationComponents","retDeployReconnectInterval","retPhxChannel","setVapidPublicKey","vapid_public_key","_x13","pushSubscriptionEndpoint","getCurrentEndpoint","oauthFlowPermsToken","Cookies","createHubChannelParams","push_subscription_endpoint","auth_token","migrateToNewReticulumServer","_ref5","deployNotification","ret_version","ret_pool","tryReconnect","_ref6","oldSocket","setSocket","teardown","_x14","_x15","hubPhxChannel","SOUND_CHAT_MESSAGE","isInitialJoin","setPhoenixChannel","session_token","vrHudPresenceCount","sendProfileUpdate","__hadInitialSync","isSelf","currentMeta","setClientId","setJoinToken","setHubChannel","setSubscribed","web_push","hub_requires_oauth","handleHubChannelJoined","_x16","oauth_info","onData","incomingMessage","userInfo","getAuthor","_createInWorldLogMessage","createInWorldLogMessage","stale_fields","titleParts","oldSlug","slug","entry_mode","isHubsDestinationUrl","nonCorsProxyDomains","commonKnownContentTypes","png","jpg","jpeg","pdf","mp4","mp3","farsparkEncodeUrl","str","btoa","p1","fromCharCode","b64EncodeUnicode","urlHostname","hasIndex","originalUrlParts","decodeURIComponent","extension","hubsSceneRegex","hubsAvatarRegex","hubsRoomRegex","NONE","INTERACTABLES","ENVIRONMENT","AVATAR","DEFAULT_SPAWNER","createDefaultEnvironmentMap","_createDefaultEnvironmentMap","urls","cubeMapPosX","cubeMapNegX","cubeMapPosY","cubeMapNegY","cubeMapPosZ","cubeMapNegZ","CubeTextureLoader","RGBFormat","environmentMap","updateEnvironmentMap","envMap","detect_browser__WEBPACK_IMPORTED_MODULE_0__","lastTouchAtMs","getTime","isDoubleTouch","_storage_store__WEBPACK_IMPORTED_MODULE_0__","_storage_media_search_store__WEBPACK_IMPORTED_MODULE_1__","setQuality","componentRegistry","playerInfos","playerInfo","media-browser","pager","header-center","engine-attribution","engine-attribution-contents","favorites-header","no-search","nav-right-pad","nav-source","nav-source-selected","nav-scroll-arrow","tiles","tile","last-joined","lastJoined","tile-link","tileLink","tile-content","tileContent","avatar-tile","avatarTile","edit-avatar","create-tile","createTile","tiles-variable","tilesVariable","page-number","pageNumber","pager-button-disabled","pagerButtonDisabled","header-left","header-right","create-button","create-link","empty-string","media-browser-inline","mediaBrowserInline","email-field","emailField","next-button","continue-button","continueButton","sign-in-form","signInForm","sign-in-complete","signInComplete","terms","ui-dialog","ui-interactive","presence-info","corner-button","profile-entry","form-submit","nag-corner-button","choose-scene-button","chooseSceneButton","choose-avatar","entry-button-secondary","entry-panel","button-container","secondary-action-button","leave-button","entry-button","action-button","collapse-button","favorite-button","form-field-text","lobby-label","lobbyLabel","rename-button","renameButton","wide-button","screen-sharing","invite-tip","bottom-tip","loading-text","streaming-tip","streaming-tip-attach-point","streaming-tip-close","streaming-tip-message","ui-dialog-box-contents","in-room-favorite-button","occupant-count","presence-info-selected","camera-mode-exit-button","corner-button-selected","invite-tip-attach-point","tip-cancel","split-tip","split-tip-icon","spawn_menu-icon","spawnMenuIcon","object_rotate_button-icon","objectRotateButtonIcon","object_scale_button-icon","objectScaleButtonIcon","object_recenter_button-icon","objectRecenterButtonIcon","avatar-editor","display-name","entry-dialog","room-subtitle","lobby","profile-icon","profileIcon","button-subtitle","audio-loader","webvr-link-container","webvrLinkContainer","webvr-link","webvrLink","toggleScreenShare","gyroCameraDelta","gamepadIndex","buttonIndex","axisIndex","buttonName","axisName","wmrController","Airtable","configure","endpointUrl","apiKey","base","airtableMessages","view","firstPage","records","invite-container","link-button","enter-vr-button","invite-button","inviteButton","enter-button","invite-mini-button","embed-text","invite-container-inverted","embed-tip-wrap","embed-tip","hide-small-screens","hideSmallScreens","invite-container-below-hud","attach-point","keep-open","digit_2","digit2","digit_3","digit3","code-loading-panel","hub-link-link","embed-tip-attach-point","client-action-buttons","client-info-dialog","community-identifier","client-info","clientInfo","client-profile-image","client-details","clientDetails","client-main","clientMain","small-button","input-border","left-side-of-input","add-media-form","cancel-icon","upload-icon","hide-file-input","spoke-launch","change-scene-button","changeSceneButton","spoke-create","avatar-url-dialog","close-button","name-field","rename-room-form","cancel-button","confirm-button","leave-room","room-info","scene-screenshot","scene-details","scene-main","scene-name","scene-creator","scene-attributions","attribution-name","attribution-author","oauth-button","oauth-type-name","oauth-icon","oauthIcon","privacy-notice","oauth-buttons","message-entry-in-room","message-entry-spawn","message-entry-input","message-entry","message-entry-disabled","message-entry-button","message-entry-button-in-room","message-entry-upload","message-entry-input-in-room","message-entry-input-no-spawn","message-entry-on-mobile","command-help","presence-log","presence-log-entry","message-body","message-body-multi","message-body-mono","message-wrap","message-wrap-multi","message-source","message-source-link","icon-button","spawn-message","presence-log-entry-with-button","presence-log-in-room","presence-log-spawn","presence-log-entry-one-line","presence-log-emoji","client-link","presence-list","row-header","list-item","list-item-link","sign-in","moderator-badge","bottom-links-main","settings-menu","settings-row","bottom-links","load-button","hub-name","main-panel","tip-cancel-text","top-tip","column","attach_video_share_mode","attachVideoShareMode","attach_pen_mode","attachPenMode","attach_mute_mode","attachMuteMode","attach_freeze_mode","attachFreezeMode","top-tip-no-hud","video-share-extra-options","small","large","video-share","freeze","mobile-media-picker","mobileMediaPicker","share_camera","shareCamera","share_screen","share_window","shareWindow","TEXTURE_PROPS","base_map","emissive_map","normal_map","orm_map","ALL_MAPS","createRenderer","alpha","useDevicePixelRatio","antialias","premultipliedAlpha","preserveDrawingBuffer","powerPreference","WebGLRenderer","gammaOutput","gammaFactor","physicallyCorrectLights","setPixelRatio","devicePixelRatio","createImageBitmapFromURL","ORBIT_ANGLE","DEFAULT_MARGIN","fitBoxInFrustum","halfYExtents","halfVertFOV","fov","tan","AvatarPreview","Scene","clientWidth","clientHeight","controls","OrbitControls","enablePan","light","DirectionalLight","HemisphereLight","loadPreviewAvatar","setAvatar","Clock","snapshotCanvas","snapshotCamera","snapshotRenderer","setClearAlpha","previewRenderer","setClearColor","getDelta","parentElement","resetCamera","loading","setFromObject","getCenter","disposeNode","domElement","imageBitmaps","disposeImageBitmap","oldProps","applyMaps","previewMesh","idleAnimation","AnimationMixer","setLoop","LoopRepeat","idleAnimationAction","getImage","onUpdate","originalMaps","bm","newProps","mapName","applyMap","applyMapToPreview","revertMap","react__WEBPACK_IMPORTED_MODULE_2___default","_assets_images_warning_icon_png__WEBPACK_IMPORTED_MODULE_0___default","_assets_images_warning_icon_2x_png__WEBPACK_IMPORTED_MODULE_1___default","react_intl__WEBPACK_IMPORTED_MODULE_4__","withRef","react_intl__WEBPACK_IMPORTED_MODULE_2__","_dialog_container__WEBPACK_IMPORTED_MODULE_4__","DialogContainer","currentTarget","onContainerClicked","_wrap_with_audio__WEBPACK_IMPORTED_MODULE_3__","_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_5__","isRequired","SOUND_MEDIA_LOADING","SOUND_MEDIA_LOADED","_assets_sfx_tick_mp3__WEBPACK_IMPORTED_MODULE_0__","_assets_sfx_tick_mp3__WEBPACK_IMPORTED_MODULE_0___default","_assets_sfx_teleport_loop_mp3__WEBPACK_IMPORTED_MODULE_1__","_assets_sfx_teleport_loop_mp3__WEBPACK_IMPORTED_MODULE_1___default","_assets_sfx_quickTurn_mp3__WEBPACK_IMPORTED_MODULE_2__","_assets_sfx_quickTurn_mp3__WEBPACK_IMPORTED_MODULE_2___default","_assets_sfx_tap_mellow_mp3__WEBPACK_IMPORTED_MODULE_3__","_assets_sfx_tap_mellow_mp3__WEBPACK_IMPORTED_MODULE_3___default","_assets_sfx_PenSpawn_mp3__WEBPACK_IMPORTED_MODULE_4__","_assets_sfx_PenSpawn_mp3__WEBPACK_IMPORTED_MODULE_4___default","_assets_sfx_PenDraw1_mp3__WEBPACK_IMPORTED_MODULE_5__","_assets_sfx_PenDraw1_mp3__WEBPACK_IMPORTED_MODULE_5___default","_assets_sfx_PicSnapHey_mp3__WEBPACK_IMPORTED_MODULE_6__","_assets_sfx_PicSnapHey_mp3__WEBPACK_IMPORTED_MODULE_6___default","_assets_sfx_welcome_mp3__WEBPACK_IMPORTED_MODULE_7__","_assets_sfx_welcome_mp3__WEBPACK_IMPORTED_MODULE_7___default","_assets_sfx_quack_mp3__WEBPACK_IMPORTED_MODULE_8__","_assets_sfx_quack_mp3__WEBPACK_IMPORTED_MODULE_8___default","_assets_sfx_specialquack_mp3__WEBPACK_IMPORTED_MODULE_9__","_assets_sfx_specialquack_mp3__WEBPACK_IMPORTED_MODULE_9___default","_assets_sfx_pop_mp3__WEBPACK_IMPORTED_MODULE_10__","_assets_sfx_pop_mp3__WEBPACK_IMPORTED_MODULE_10___default","_assets_sfx_Eb_blip_mp3__WEBPACK_IMPORTED_MODULE_11__","_assets_sfx_Eb_blip_mp3__WEBPACK_IMPORTED_MODULE_11___default","_assets_sfx_tack_mp3__WEBPACK_IMPORTED_MODULE_12__","_assets_sfx_tack_mp3__WEBPACK_IMPORTED_MODULE_12___default","_assets_sfx_A_bendUp_mp3__WEBPACK_IMPORTED_MODULE_13__","_assets_sfx_A_bendUp_mp3__WEBPACK_IMPORTED_MODULE_13___default","_assets_sfx_suspense_mp3__WEBPACK_IMPORTED_MODULE_14__","_assets_sfx_suspense_mp3__WEBPACK_IMPORTED_MODULE_14___default","soundEnum","pendingEffects","soundsAndUrls","URL_TICK","URL_TELEPORT_LOOP","URL_QUICK_TURN","URL_TAP_MELLOW","URL_PEN_SPAWN","URL_PEN_DRAW","URL_CAMERA_SNAPSHOT","URL_WELCOME","URL_QUACK","URL_SPECIAL_QUACK","URL_POP","URL_FREEZE","URL_TACK","URL_MEDIA_LOADING","URL_MEDIA_LOADED","audioBufferPromise","decodeAudioData","sounds","audioBuffer","enqueueSound","createBufferSource","playSoundLooped","createGain","getScaleCoefficient","computeObjectAABB","union","boxRoot","isEmpty","matrixWorldNeedsUpdate","dZ","debug__WEBPACK_IMPORTED_MODULE_0__","debug__WEBPACK_IMPORTED_MODULE_0___default","_qs_truthy__WEBPACK_IMPORTED_MODULE_1__","logFilter","verifyAuthentication","authTopic","authToken","receivedEmail","receivedToken","storeCredentials","handleAuthCredentials","auth.verified-title","auth.verified","auth.spoke-verified","sign-in.prompt","sign-in.auth-started","sign-in.pin","sign-in.pin-complete","sign-in.unpin","sign-in.unpin-complete","sign-in.change-scene","sign-in.change-scene-complete","sign-in.rename-room","sign-in.rename-room-complete","sign-in.close-room","sign-in.close-room-complete","sign-in.mute-user","sign-in.mute-user-complete","sign-in.kick-user","sign-in.kick-user-complete","sign-in.create-avatar","sign-in.create-avatar-complete","sign-in.favorite-room","sign-in.favorite-rooms","sign-in.favorite-room-complete","sign-in.favorite-rooms-complete","sign-in.as","sign-in.in","sign-in.out","rename-room.message","rename-room.rename","close-room.message","close-room.confirm","close-room.cancel","entry.room","entry.enter-room-title","entry.enter-room","entry.leave-room","entry.change-scene","entry.in-lobby-notice","entry.screen-prefix","entry.desktop-screen","entry.mobile-screen","entry.mobile-safari","entry.generic-prefix","entry.generic-medium","entry.generic-subtitle-desktop","entry.gearvr-prefix","entry.gearvr-medium","entry.choose-device","entry.device-medium","entry.device-subtitle-desktop","entry.device-subtitle-mobile","entry.device-subtitle-vr","entry.cardboard","entry.daydream-prefix","entry.daydream-medium","entry.daydream-via-chrome","entry.invite-others","entry.share-button","entry.desktop.invite-tip","entry.mobile.invite-tip","entry.invite-team-nag","entry.enable-screen-sharing","entry.return-to-vr","entry.enter-in-vr","entry.open-in-window","entry.lobby","entry.back","entry.notify_me","entry.mute-on-entry","profile.save","profile.display_name.validation_warning","profile.header","profile.terms_of_use","profile.privacy_notice","profile.choose_avatar","profile.tabs.legacy","profile.tabs.skinnable","profile.tabs.url","profile.info","profile.info-link","avatar-editor.info","avatar-editor.info-link","avatar-preview.loading-failed","media-browser.search-placeholder.scenes","media-browser.search-placeholder.avatars","media-browser.search-placeholder.videos","media-browser.search-placeholder.images","media-browser.search-placeholder.youtube","media-browser.search-placeholder.gifs","media-browser.search-placeholder.twitch","media-browser.search-placeholder.sketchfab","media-browser.search-placeholder.poly","media-browser.search-placeholder.base","media-browser.favorites-header","media-browser.add_custom_object","media-browser.add_custom_scene","media-browser.add_custom_avatar","media-browser.privacy_policy","media-browser.spoke","media-browser.report_issue","media-browser.powered_by.images","media-browser.powered_by.videos","media-browser.powered_by.youtube","media-browser.powered_by.gifs","media-browser.powered_by.sketchfab","media-browser.powered_by.poly","media-browser.powered_by.twitch","media-browser.powered_by.scenes","media-browser.powered_by.avatars","media-browser.empty.images","media-browser.empty.videos","media-browser.empty.youtube","media-browser.empty.gifs","media-browser.empty.sketchfab","media-browser.empty.poly","media-browser.empty.twitch","media-browser.empty.favorites","media-browser.nav_title.youtube","media-browser.nav_title.videos","media-browser.nav_title.images","media-browser.nav_title.gifs","media-browser.nav_title.scenes","media-browser.nav_title.avatars","media-browser.nav_title.sketchfab","media-browser.nav_title.poly","media-browser.nav_title.twitch","media-browser.create-avatar","media-browser.create-scene","media-browser.hub.joined-prefix","audio.title","audio.talk_to_test","audio.click_to_test","audio.subtitle-desktop","audio.subtitle-mobile","audio.enter-now","audio.hmd-mic-warning","audio.grant-title","audio.grant-subtitle","audio.granted-title","audio.granted-subtitle","audio.granted-next","exit.subtitle.exited","exit.subtitle.closed","exit.subtitle.denied","exit.subtitle.kicked","exit.subtitle.left","exit.subtitle.full","exit.subtitle.connect_error","exit.subtitle.version_mismatch","autoexit.title","autoexit.title_units","autoexit.subtitle","autoexit.cancel","presence.entered_room","presence.entered_lobby","presence.join_lobby","presence.join_room","presence.leave","presence.name_change","presence.scene_change","presence.hub_name_change","presence.in_lobby","presence.in_room","home.create_a_room","home.desktop.add_pwa","home.mobile.add_pwa","home.take_a_tour","home.room_create_options","home.room_create_button","home.create_name.validation_warning","home.join_us","home.have_code","home.add_to_discord_1","home.add_to_discord_2","home.add_to_discord_3","home.create_with_spoke","home.report_issue","home.source_link","home.whats_new_link","home.spoke_link","home.about_link","home.community_link","home.privacy_notice","home.terms_of_use","home.get_updates","home.hero_title","home.hero_blurb","home.made_with_love","home.environment_author_by","dialog.close","mailing_list.privacy_label","mailing_list.privacy_link","link.link_page_header_entry","link.link_page_header_headset","link.linking_a_headset","link.try_again","help.report_issue","scene.logo_tagline","scene.create_button","scene.tweet_button","scene.unavailable","link.in_your_browser","link.enter_code","link.do_not_close","link.connect_headset","link.cancel","invite.enter_via","invite.enter_via_modal","invite.tweet","invite.and_enter_code","invite.or_visit","invite.or_visit_modal","invite.embed","invite.embed-tip","spoke.primary_tagline","spoke.secondary_tagline","spoke.thank_you","spoke.download_win","spoke.download_macos","spoke.download_linux","spoke.download_unsupported","spoke.browse_all_versions","spoke.beginner_tutorial_button","spoke.advanced_tutorial_button","spoke.play_button","commands.fly","commands.grow","commands.shrink","commands.scene","commands.rename","commands.help","commands.leave","commands.duck","commands.capture","commands.debug","commands.vrstats","settings.change-avatar","settings.change-scene","settings.favorites","settings.rename-room","settings.close-room","settings.room-info","settings.create-room","settings.create-scene","settings.send-feedback","settings.whats-new","settings.features","settings.controls","settings.community","settings.tips","settings.report","settings.terms","settings.privacy","settings.help","settings.row-profile","settings.row-room","tips.mobile.video_share_mode","tips.mobile.pen_mode","tips.mobile.mute_mode","tips.mobile.freeze_mode","tips.mobile.look","tips.mobile.locomotion","tips.mobile.spawn_menu-pre","tips.mobile.spawn_menu-post","tips.mobile.freeze_gesture","tips.mobile.object_grab","tips.mobile.object_rotate_button-pre","tips.mobile.object_rotate_button-post","tips.mobile.object_scale_button-pre","tips.mobile.object_scale_button-post","tips.mobile.object_recenter_button-pre","tips.mobile.object_recenter_button-post","tips.mobile.object_pin","tips.mobile.invite","tips.desktop.video_share_mode","tips.desktop.pen_mode","tips.desktop.mirror_mode","tips.desktop.mute_mode","tips.desktop.look","tips.desktop.locomotion","tips.desktop.turning","tips.desktop.spawn_menu-pre","tips.desktop.spawn_menu-post","tips.desktop.freeze_gesture","tips.desktop.menu_hover","tips.desktop.object_grab","tips.desktop.object_pin","tips.desktop.object_zoom","tips.desktop.object_rotate_button-pre","tips.desktop.object_rotate_button-post","tips.desktop.object_scale_button-pre","tips.desktop.object_scale_button-post","tips.desktop.object_recenter_button-pre","tips.desktop.object_recenter_button-post","tips.desktop.object_scale","tips.desktop.pen_color","tips.desktop.pen_size","tips.desktop.invite","tips.desktop.watching","tips.watching.back","tips.mobile.watching","tips.watching-exit","loader.entering_lobby","loader.loading","loader.object","loader.objects","change-scene-dialog.change-scene","change-scene-dialog.create-in-spoke","change-scene-dialog.new-spoke-project","avatar-url-dialog.apply","interstitial.prompt","feedback.prompt","hide-ui.prompt","discord.primary_tagline","discord.secondary_tagline","discord.contact_us","discord.community_link","discord.splash_tag","client-info.kick-button","client-info.hide-button","client-info.unhide-button","client-info.mute-button","client-info.cancel","avatar-landing.select","avatar-landing.selected","leave-room-dialog.join-room.message","leave-room-dialog.join-room.confirm","leave-room-dialog.create-room.message","leave-room-dialog.create-room.confirm","embed.load-button","embed.presence-warning","i18n_messages","navigatorLang","language","userLanguage","localeData","emailParts","emailIdentity","emailDomain","dayjs","extend","relativeTime","PUBLISHER_FOR_ENTRY_TYPE","sketchfab_model","poly_model","twitch_stream","MediaTiles","isImage","isAvatar","imageAspect","imageSrc","isHub","getTileDimensions","publisherName","_state_link__WEBPACK_IMPORTED_MODULE_14__","_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_6__","faExternalLinkAlt","react_intl__WEBPACK_IMPORTED_MODULE_5__","last_activated_at","fromNow","createTileWidth","createTileHeight","hasMeta","apiSource","isVariableWidth","hasNext","hasPrevious","entryToTile","previousPage","faAngleLeft","page","nextPage","originalGetExtension","WebGLRenderingContext","getExtension","supportsFloatTextures","dataTexture","DataTexture","FloatType","Camera","getError","checkFloatTextureSupport","deriveKey","privateKey","publicKey","crypto","subtle","public","publicKeyToString","exportKey","stringToPublicKey","importKey","namedCurve","stringToArrayBuffer","buf","arrayBufferToString","byteLength","keyPair","generateKey","publicKeyString","incomingPublicKeyString","iv","incomingPublicKey","secret","encryptedData","encrypt","base64value","ciphertext","decrypt","LINK_ACTION_TIMEOUT","step","getLetter","readyToSend","leftChannel","leave","incoming","_generatePublicKeyAndEncryptedObject","generatePublicKeyAndEncryptedObject","public_key","target_session_id","reply_to_session_id","_generateKeys","generateKeys","numOccupants","_x8","_decryptObject","decryptObject","names","selectRandom","arr","avatarIds","av","generateDefaultProfile","LOCAL_STORE_KEY","STORE_STATE_CACHE_KEY","OAUTH_FLOW_CREDENTIALS_KEY","validator","Validator","additionalProperties","personalAvatarId","confirmedDiscordRooms","uploadPromotionTokens","$ref","oauthFlowCredentials","getJSON","arrayMerge","destinationArray","sourceArray","mergeOpts","finalState","merge","validate","mediaAPIEndpoint","resolveUrlCache","resolveUrl","cacheKey","resolved","formData","FormData","interactableId","needsToBeUploaded","fireLoadingTimeout","reader","FileReader","DataView","getUint16","marker","getUint32","little","readAsArrayBuffer","getOrientation","response","srcUrl","raw","objectTypeForOriginAndContentType","vertexRegex","fragRegex","validMaterials","shaderUniforms","newMaterial","onBeforeCompile","vlines","vindex","unshift","flines","findex","mediaHighlightFrag","mediaPos","snapCount","mirrorOrientation","rotateY","statusText","setCrossOrigin","_fullscreen__WEBPACK_IMPORTED_MODULE_1__","isExitingFullscreenDueToFocus","setMatrixWorld","tempVector3","disposeMaterial","mtrl","lightMap","bumpMap","normalMap","specularMap","materialArray","MeshFaceMaterial","MultiMaterial","fn","raven_js__WEBPACK_IMPORTED_MODULE_0__","raven_js__WEBPACK_IMPORTED_MODULE_0___default","ga","trackedPage","trackedTitle","sentryDsn","SENTRY_DSN","gaTrackingId","GA_TRACKING_ID","Raven","config","install","_qs_truthy__WEBPACK_IMPORTED_MODULE_0__","showLog","debugLog","debugLogInput","debugLogEval","onsubmit","eval","minimized","debugLogMinimize","onclick","scrollHeight","origConsoleLog","origConsoleError","origConsoleWarn","objs","firstObj","shouldScroll","onunhandledrejection","zeroPos","zeroQuat","oneScale","bindingSetters","PropertyBinding","SetterByBindingTypeAndVersioning","Versioning","setter","MatrixWorldNeedsUpdate","targetObject","getWorldScale","handleMatrixModification","cachedMatrixWorld","applyMatrix","forceLocalUpdate","forceWorldUpdate","skipParents","hasHadFirstMatrixUpdate","childrenNeedMatrixWorldUpdate","forceChildrenWorldUpdate","q1","m1","isVector3","isCamera","isLight","extractRotation","anime","animation","colorHelperFrom","colorHelperTo","getComponentProperty","setComponentProperty","splitCache","TYPE_COLOR","STRING_COMPONENTS","STRING_OBJECT3D","toRadians","addEventListeners","eventNames","handler","removeEventListeners","getRawProperty","splitDot","setRawProperty","propertyName","targetValue","elasticity","startEvents","pauseEvents","resumeEvents","eventDetail","animationIsPlaying","onStartEvent","beginAnimation","pauseAnimation","resumeAnimation","fromColor","toColor","targetsArray","updateConfigForDefault","updateConfigForRawColor","complete","createAndStartAnimation","cancelDelayedStart","pausedWasPlaying","updateConfig","delayTimeout","stopRelatedAnimations","waitComponentInitRawProperty","setColorConfig","lastValue","anim","animatables","isBoolean","isNaN","parseFloat","aframeProperty","updateConfigForVector","coordinates","propType","getPropertyType","cb","wait","intensity","AmbientLight","registerLight","rendererSystem","applyColorCorrection","prevVolume","smoothing","threshold","_updateAnalysis","soundSource","avatarIsQuiet","amplitude","currVolume","lastSeenVolume","minScale","maxScale","_playerCamera","_playerCameraWorldPosition","_worldPosition","audioAnalyser","initialForce","maxForce","hasBody","CANNON","Vec3","applyForce","generateAndAddHeightfield","shape","mass","mult","cannonOffset","Heightfield","elementSize","addShape","skyColor","groundColor","onQualityChanged","range","decay","castShadow","shadowMapResolution","shadowBias","shadowRadius","PointLight","shadow","bias","prevWidth","prevHeight","mapSize","innerConeAngle","outerConeAngle","SpotLight","penumbra","autoLockOnLoad","autoLockOnRelease","releaseGravity","reduceAngularFloat","gravitySpeedLimit","onGrab","onRelease","ammoBody","_makeStaticWhenAtRest","linearThreshold","angularThreshold","isAtRest","getLinearVelocity","length2","getAngularVelocity","hasBeenHereBefore","_onBodyLoaded","setLocked","getVelocity","stuckTo","_unstickObject","sizeVec","boundingBoxWorldPositionVec","colliderWorldPositionVec","colliders","enterComponent","enterProperty","enterValue","leaveComponent","leaveProperty","leaveValue","collidingLastFrame","setFromCenterAndSize","isColliding","videoComponent","onVideoLoaded","origDispatch","firstObject","Pathfinding","loadMesh","Geometry","fromBufferGeometry","setZoneData","createZone","eventSource","eventListeners","_handleEvent","URL_IMAGE","URL_VIDEO","URL_MODEL","URL_PDF","URL_AUDIO","FILE_IMAGE","FILE_VIDEO","FILE_MODEL","FILE_PDF","FILE_AUDIO","CLIPBOARD_IMAGE","CLIPBOARD_VIDEO","CLIPBOARD_MODEL","CLIPBOARD_PDF","CLIPBOARD_AUDIO","SPAWNER_IMAGE","SPAWNER_VIDEO","SPAWNER_MODEL","SPAWNER_PDF","SPAWNER_AUDIO","UNKNOWN","objectTypeForOrigin","urlType","fileType","clipboardType","spawnerType","objectTypeMimePrefixLookupMap","image/","model/","application/x-zip-compressed","video/","application/vnd.apple.mpegurl","application/x-mpegurl","audio/","application/pdf","srcSuffixLookupMap",".m3u8","ReactAudioContext","WithHoverSound","react__WEBPACK_IMPORTED_MODULE_0__","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","createContext","Consumer","cloneElement","onMouseEnter","putImageData","toDataURL","imageBitmap","HTMLImageElement","frustumBox","inverseLightMatrixWorld","tempBox","FRUSTUM_PADDING","NEAR_CLIPPING_PLANE","FAR_CLIPPING_PLANE","verts","resizeShadowCameraFrustum","Layers","reflection","inWorldHud","exclusive","layers","mask","layer","newValue","disable","updateClip","currentAction","clipName","loadingObject","loadingObjectSrc","mediaOptions","showLoader","clearLoadingTimeout","onMediaLoaded","updateScale","scaleCoefficient","removeShape","loaderMixer","loadingSoundNode","useFancyLoader","BoxGeometry","loadingClip","loadingScaleClip","AnimationClip","VectorKeyframeTrack","showLoaderTimeout","updateHoverableVisuals","injectedCustomShaderChunks","getBoundingSphere","physicsShape","finish","minHalfExtent","repositionToolbar","addMeshScaleAnimation","onComplete","MIN_VALUE","canonicalUrl","accessibleUrl","expected_content_type","fetchContentType","qsTime","startTime","hash","HULL","toolbar","onNext","onPrev","_ensureUI","hasSetupUI","maxIndex","fetchMaxContentIndex","pageLabel","pageSrc","quackPercentage","specialQuackPercentage","_handleGrabStart","rand","lerp","newRot","positionOnly","startPoint","startRotation","targetPoint","targetRotDelta","backwards","ranOnePass","streamerCamera","getStreamerCamera","translateZ","fromRot","toRot","SkyShader","UniformsUtils","BoxBufferGeometry","luminance","turbidity","rayleigh","mieCoefficient","mieDirectionalG","sunPosition","inclination","azimuth","sky","skyScene","cubeCamera","CubeCamera","theta","phi","vrEnabled","pmremGenerator","PMREMGenerator","pmremCubeUVPacker","PMREMCubeUVPacker","cubeLods","CubeUVRenderTarget","playerHeight","loadedEvent","spawnPoints","spawnPoint","spawnCooldown","animateFromCursor","handPosition","onSpawnEvent","tempSpawnHandPosition","willAnimateFromCursor","syncToPhysics","sx","sy","sz","MobileWater","normalSampler","waterNormals","sunDirection","sunColor","waterColor","eye","distortionScale","mirrorShader","UniformsLib","ShaderChunk","wrapS","wrapT","RepeatWrapping","Water","forceMobile","waterMesh","waterGeometry","loadWaterNormals","waterNormalMap","waterConfig","textureWidth","textureHeight","water","setStyle","getSanitizedComponentMapping","inputComponent","inputProperty","publicComponents","publicComponent","publicProperty","publicProperties","mappedComponent","mappedProperty","getMappedValue","TYPE","decayMigration","mediaInflator","isControlled","hasVolume","templateName","autoPlay","STATIC","collisionFilterGroup","euler","_componentName","loop-animation","enterComponentMapping","leaveComponentMapping","targetEntity","HEIGHTFIELD","heightfieldDistance","heightfieldData"],"mappings":"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KH,UAAWgsB,KAAO2uC,SAAvB,IAAkC5qE,GAClCmyD,GAAA7tD,EAAA8L,cAAA,WACE+hD,GAAA7tD,EAAA8L,cAACujD,GAAA,EAAD,CAAkBpvD,eAAgBvE,EAAE4D,MAAM,KAAK,2HAhC5C0mE,eACA,CACjBK,eAAgBp6D,KAAUE,OAC1Bi6D,MAAOn6D,KAAUC,sFCPrB,MAAMq6D,GAAyB,GAGzBC,GAAc,CAClBC,MAAM,EACNC,MAAM,EACNC,MAAM,EACNC,MAAM,EACNC,SAAS,EACTC,UAAU,EACVC,OAAO,EACPC,QAAQ,EACRC,OAAO,EACPC,OAAO,GAKHC,GAAW,CACf,IACA,OACA,UACA,OACA,UACA,QACA,QACA,IACA,OACA,MACA,MACA,aACA,OACA,KACA,SACA,SACA,UACA,SACA,OACA,OACA,MACA,WACA,UACA,WACA,KACA,MACA,UACA,MACA,MACA,KACA,KACA,KACA,QACA,WACA,aACA,SACA,OACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,SACA,SACA,KACA,OACA,IACA,SACA,MACA,QACA,MACA,MACA,SACA,QACA,SACA,KACA,OACA,MACA,OACA,OACA,OACA,OACA,QACA,MACA,OACA,WACA,SACA,KACA,SACA,WACA,SACA,IACA,QACA,MACA,WACA,IACA,KACA,KACA,OACA,IACA,OACA,SACA,UACA,SACA,QACA,SACA,OACA,SACA,QACA,MACA,UACA,MACA,MACA,QACA,QACA,KACA,WACA,QACA,KACA,QACA,OACA,QACA,KACA,QACA,IACA,KACA,MACA,QACA,OAGF,SAASC,GAA6BC,GACpC,MAAMC,EAAe,GACfC,EAAU19D,SAAS+C,KAAKsR,YAAYrU,SAASiC,cAAcu7D,IAC3DG,EAAgBC,iBAAiBF,GACvC,IAAK,IAAI1tE,EAAI,EAAGA,EAAI2tE,EAAcztE,OAAQF,IACxCytE,EAAaE,EAAc3tE,IAAM2tE,EAAcA,EAAc3tE,IAG/D,OADAgQ,SAAS+C,KAAKiO,YAAY0sD,GACnBD,EAWF,SAASI,KACd,IAAK,IAAI7tE,EAAI,E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","file":"assets/js/hub-b03de590c15e08e5f071.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t6: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([1754,1,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = \"data:image/gif;base64,R0lGODlhEAAQAIQaAAAAAAEBAQABBQEBAgEBBQMDAwAykwBk+wFk+/85Af47AwCIHgCJHgGJHgCKHgOJIPc63vc64Pc64YeHhwDySLu7wru8wru8w7y8wwD6/v///////////////////////yH+EUNyZWF0ZWQgd2l0aCBHSU1QACH5BAEKAB8ALAAAAAAQABAAAAVl4AeMZDl9KAqkLDqd6YrN9HzC4jdbTUPDMBnGQWEAKphBYKTSYR6LRQE5y+VmlUAAc+lWrMIa4nBYxXQJcabMkkUUtLGhJZNA4BiC4HyVSCJpKRhgOktmgoRVLDSELY5mTHQlKyEAOw==\"","module.exports = __webpack_public_path__ + \"assets/camera_tool-a25d0894a6b635779bd4ed41f2de0411.glb\";","module.exports = __webpack_public_path__ + \"assets/images/mic_granted-5d41c8098b2c1a084f07dd3a2473983f.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_granted@2x-f84d9eb002832eeeb768529e6cb1e93e.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_small-b81b3397cc985eb8d3d67a4f007158cc.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_small@2x-d04ff548fa26495f69249f0c34f44b72.png\";","module.exports = __webpack_public_path__ + \"assets/images/dropdown_arrow-601450f494125f8caccec2271aebd4cb.png\";","module.exports = __webpack_public_path__ + \"assets/images/dropdown_arrow@2x-1023ab0bd743b3525d99986de89f0c3b.png\";","module.exports = __webpack_public_path__ + \"assets/images/mobile_screen_entry-b29fcd32c8f70bb828c1abceb62f93e2.svg\";","module.exports = __webpack_public_path__ + \"assets/images/desktop_screen_entry-e5ff9b5e64caa694e9b4183e532fcb17.svg\";","module.exports = __webpack_public_path__ + \"assets/images/generic_vr_entry-c648c26ce1388450df7edbd92ec00f5e.svg\";","module.exports = __webpack_public_path__ + \"assets/images/gearvr_entry-dcea59d35d7fae4c8b9c4985c1743851.svg\";","module.exports = __webpack_public_path__ + \"assets/images/daydream_entry-6e2716960046992dbd6b0e87bf8c2c3a.svg\";","module.exports = __webpack_public_path__ + \"assets/images/link_dialog_header-b15568ca2056d8be7a58c359e6a9ca51.svg\";","module.exports = __webpack_public_path__ + \"assets/images/presence_phone-fd7ea0e8be441172a758704055604e5f.png\";","module.exports = __webpack_public_path__ + \"assets/images/presence_desktop-be24a9f21df60cd831ad66b67282d6f2.png\";","module.exports = __webpack_public_path__ + \"assets/images/presence_discord-e05ead6e6ebc08df9291738d0aa6986d.png\";","module.exports = __webpack_public_path__ + \"assets/images/presence_camera-aaa719190a30677416c33e3dda33d7ef.png\";","module.exports = __webpack_public_path__ + \"assets/images/presence_vr-563f3bd1c0f37473a3303f4a6049288c.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_background-9744d0690bba7838e4a75949d9645c09.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_background@2x-bf55b6a808963d89ff7ce04c516c232c.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_fill-35626a008836cbdc34ec624e16f5b723.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_fill@2x-b3e3675f8281c84660fb5b47eb66126e.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_level-d197b930a4350dc80adb2446babb05e1.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_level@2x-9d49309c2f0e55e5c54193237658768b.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_action_background-5aeb2dca8113545a2bc3e56dc702001b.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_action_background@2x-3a7ab65c95a1b4037d701c8fa16c3cd6.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_action_fill-4e639ed717b8a9a7da4426665ec2dcf4.png\";","module.exports = __webpack_public_path__ + \"assets/images/level_action_fill@2x-eb547f6337c0ea74b35da9812ee3e04b.png\";","module.exports = __webpack_public_path__ + \"assets/images/speaker_level-9567a1a6f33d4d0e59e57903b08369c9.png\";","module.exports = __webpack_public_path__ + \"assets/images/speaker_level@2x-b5e6a12f613576cf5c1a1b96e8c9d8d0.png\";","module.exports = __webpack_public_path__ + \"assets/sfx/tone-624e72d19fe0cea1b85ca174cb6be256.webm\";","module.exports = __webpack_public_path__ + \"assets/sfx/tone-3fa0defb5172b2533fedcc1929605799.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/tone-78ae5a60f0e336f384919eee9f5a2e18.ogg\";","module.exports = __webpack_public_path__ + \"assets/sfx/tone-4604a4c98f36f3e0c6980295bc5c7ffe.wav\";","module.exports = __webpack_public_path__ + \"assets/images/change_avatar-a426739806600c28e20a614cbade29f2.svg\";","module.exports = __webpack_public_path__ + \"assets/images/spritesheets/sprite-system-spritesheet-9756b632b21c83a9668e24ff2a6bc6eb.png\";","module.exports = \"attribute vec4 mvCol0;\\nattribute vec4 mvCol1;\\nattribute vec4 mvCol2;\\nattribute vec4 mvCol3;\\nattribute vec3 a_vertices;\\nattribute vec2 a_uvs;\\nvarying vec2 v_uvs;\\nattribute float a_hubs_EnableSweepingEffect;\\nvarying float v_hubs_EnableSweepingEffect;\\nattribute vec2 a_hubs_SweepParams;\\nvarying vec2 v_hubs_SweepParams;\\nvarying vec3 hubs_WorldPosition;\\n\\nvoid main() {\\n  mat4 mv = mat4(mvCol0, mvCol1, mvCol2, mvCol3);\\n  gl_Position = projectionMatrix * modelViewMatrix * mv * vec4(a_vertices, 1.0);\\n  v_uvs = a_uvs;\\n  v_hubs_EnableSweepingEffect = a_hubs_EnableSweepingEffect;\\n  v_hubs_SweepParams = a_hubs_SweepParams;\\n\\n  vec4 wt = vec4(a_vertices, 1.0);\\n  hubs_WorldPosition = (mv * wt).xyz;\\n}\\n\"","module.exports = \"precision mediump float;\\n\\nuniform sampler2D u_spritesheet;\\n\\nvarying vec2 v_uvs;\\n\\nvarying float v_hubs_EnableSweepingEffect;\\nvarying vec2 v_hubs_SweepParams;\\nvarying vec3 hubs_WorldPosition;\\nuniform bool hubs_HighlightInteractorOne;\\nuniform vec3 hubs_InteractorOnePos;\\nuniform bool hubs_HighlightInteractorTwo;\\nuniform vec3 hubs_InteractorTwoPos;\\nuniform float hubs_Time;\\n\\n#define GAMMA_FACTOR 2.2\\n\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n  return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\\n}\\n\\nvec4 linearToOutputTexel( vec4 value ) {\\n  return LinearToGamma( value, float( GAMMA_FACTOR ) );\\n}\\n\\nvoid main() {\\n    vec4 texColor = texture2D(u_spritesheet, v_uvs);\\n\\n    float ratio = 0.0;\\n    if (v_hubs_EnableSweepingEffect > 0.9 ) {\\n        float size = v_hubs_SweepParams.t - v_hubs_SweepParams.s * 1.0;\\n        float line = mod(hubs_Time / 500.0 * size, size * 3.0) + v_hubs_SweepParams.s - size / 3.0;\\n        if (hubs_WorldPosition.y < line) {\\n            ratio = max(0.0, 1.0 - (line - hubs_WorldPosition.y) / (size * 1.5));\\n        }\\n\\n    }\\n    ratio = min(1.0, ratio);\\n\\n    vec4 highlightColor = linearToOutputTexel(vec4(0.184, 0.499, 0.933, 1.0));\\n    gl_FragColor = vec4((texColor.rgb * (1.0 - ratio)) + (highlightColor.rgb * ratio), texColor.a);\\n}\\n\"","// Utilities for manipulating state history. This provides a number of functions which\n// need to be used to manipulate history state so we can deal with edge cases around\n// entry back button and refreshes once entered.\n//\n// These functions also transparently deal with the room slug, so incoming calls can ignore\n// dealing with it, and provides APIs for getting the non-slug part of the path.\n//\n// The slug cannot be part of the basename for history, because the slug changes intra-session\n// if the room is renamed.\n\n// This pushes/replaces a new k, v pair into the history, while maintaining all the other\n// keys, or clears state if k if null.\n//\n// Also maintains a length key that can be used to find the length of the history chain\n// (across refreshes) for the current room.\nfunction pushOrUpdateHistory(history, replace, k, v, detail, newPathname, newSearch) {\n  let state = {};\n  const newLength = ((history.location.state && history.location.state.__historyLength) || 0) + (replace ? 0 : 1);\n\n  if (k || newPathname || newSearch) {\n    state = history.location.state ? { ...history.location.state } : {};\n    delete state.__duplicate;\n\n    if (k) {\n      state[k] = v;\n      state.key = k;\n      state.value = v;\n      state.detail = detail;\n    }\n  }\n\n  const pathname =\n    newPathname !== undefined ? newPathname : history.location.pathname === \"/\" ? \"\" : history.location.pathname;\n\n  const search = newSearch !== undefined ? newSearch : history.location.search;\n\n  // If popToBeginningOfHubHistory was previously used, there is a duplicate entry\n  // at the top of the history stack (which was needed to wipe out forward history)\n  // so we use this opportunity to replace it.\n  const isDuplicate = history.location.state && history.location.state.__duplicate;\n  const method = replace || isDuplicate ? history.replace : history.push;\n  state.__historyLength = newLength;\n\n  method({ pathname, search, state });\n}\n\nexport function pushHistoryState(history, k, v, detail) {\n  pushOrUpdateHistory(history, false, k, v, detail);\n}\n\nexport function replaceHistoryState(history, k, v, detail) {\n  pushOrUpdateHistory(history, true, k, v, detail);\n}\n\nexport function pushHistoryPath(history, path, search) {\n  pushOrUpdateHistory(history, false, null, null, null, path, search);\n}\n\nexport function clearHistoryState(history) {\n  pushOrUpdateHistory(history, false);\n}\n\n// This will pop the browser history to the first entry that was for this hubs room,\n// and then push a duplicate entry onto the history stack in order to wipe out forward\n// history.\nexport function popToBeginningOfHubHistory(history, navigateToPriorPage) {\n  if (!history.location.state || history.location.state.__historyLength === undefined) return;\n\n  const len = history.location.state.__historyLength;\n  if (len === 0) return;\n\n  return new Promise(resolve => {\n    // After the go() completes, we push a duplicate history entry onto the stack\n    // in order to wipe out forward history. We also optionally go back -2 if we wanted\n    // to go back to the prior page.\n    const unsubscribe = history.listen(() => {\n      unsubscribe();\n      history.push({\n        pathname: history.location.pathname,\n        search: history.location.search,\n        state: { __historyLength: 0, __duplicate: true }\n      });\n      if (navigateToPriorPage) history.go(-2); // Go back to history entry before beginning.\n      resolve();\n    });\n\n    history.go(-len);\n  });\n}\n\n// This will pop the browser history to the entry before the first entry for this hubs room.\nexport function navigateToPriorPage(history) {\n  popToBeginningOfHubHistory(history, true);\n}\n\n// Returns the part of the pathname that does not include the slug\nexport function sluglessPath(location) {\n  const parts = location.pathname.split(\"/\");\n  return `/${parts.slice(2).join(\"/\")}`;\n}\n\n// Returns a new path that includes the current slug as a prefix to the\n// provided path.\nexport function withSlug(location, path) {\n  const parts = location.pathname.split(\"/\");\n  return `/${parts[1]}${path}`;\n}\n","import { fetchReticulumAuthenticated } from \"./phoenix-utils\";\nimport { proxiedUrlFor } from \"./media-url-utils\";\nimport { avatars } from \"../assets/avatars/avatars\";\n\nexport const AVATAR_TYPES = {\n  LEGACY: \"legacy\",\n  SKINNABLE: \"skinnable\",\n  URL: \"url\"\n};\n\nconst legacyAvatarIds = avatars.map(a => a.id);\nexport function getAvatarType(avatarId) {\n  if (!avatarId || legacyAvatarIds.indexOf(avatarId) !== -1) return AVATAR_TYPES.LEGACY;\n  if (avatarId.startsWith(\"http\")) return AVATAR_TYPES.URL;\n  return AVATAR_TYPES.SKINNABLE;\n}\n\nasync function fetchSkinnableAvatar(avatarId) {\n  const resp = await fetchReticulumAuthenticated(`/api/v1/avatars/${avatarId}`);\n  return resp && resp.avatars && resp.avatars[0];\n}\n\nexport async function fetchAvatar(avatarId) {\n  switch (getAvatarType(avatarId)) {\n    case AVATAR_TYPES.LEGACY:\n      return {\n        avatar_id: avatarId,\n        gltf_url: avatars.find(avatar => avatar.id === avatarId).model\n      };\n    case AVATAR_TYPES.SKINNABLE:\n      return fetchSkinnableAvatar(avatarId);\n    case AVATAR_TYPES.URL:\n      return {\n        avatar_id: avatarId,\n        gltf_url: proxiedUrlFor(avatarId)\n      };\n  }\n}\n\nasync function fetchAvatarGltfUrl(avatarId) {\n  return fetchAvatar(avatarId).then(avatar => avatar && avatar.gltf_url);\n}\n\nexport function getAvatarSrc(avatarId) {\n  switch (getAvatarType(avatarId)) {\n    case AVATAR_TYPES.LEGACY:\n      return `#${avatarId}`;\n    case AVATAR_TYPES.SKINNABLE:\n      return fetchAvatarGltfUrl(avatarId);\n    case AVATAR_TYPES.URL:\n      return proxiedUrlFor(avatarId);\n    default:\n      return avatarId;\n  }\n}\n\nexport async function getAvatarThumbnailUrl(avatarId) {\n  switch (getAvatarType(avatarId)) {\n    case AVATAR_TYPES.LEGACY:\n      return avatars.find(avatar => avatar.id === avatarId).thumbnail;\n    case AVATAR_TYPES.SKINNABLE:\n      return fetchAvatar(avatarId).then(avatar => avatar.files.thumbnail);\n    default:\n      return \"https://asset-bundles-prod.reticulum.io/bots/avatar_unavailable.png\";\n  }\n}\n","import screenfull from \"screenfull\";\n\nlet hasEnteredFullScreenThisSession = false;\n\nfunction shouldShowFullScreen() {\n  // Disable full screen on iOS, since Safari's fullscreen mode does not let you prevent native pinch-to-zoom gestures.\n  return (\n    (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR()) &&\n    !AFRAME.utils.device.isIOS() &&\n    screenfull.enabled\n  );\n}\n\nexport function showFullScreenIfAvailable() {\n  if (shouldShowFullScreen()) {\n    screenfull.request();\n    hasEnteredFullScreenThisSession = true;\n  }\n}\n\nexport function showFullScreenIfWasFullScreen() {\n  if (hasEnteredFullScreenThisSession && !screenfull.isFullscreen) {\n    screenfull.request();\n  }\n}\n","const VERTEX_SHADER = `\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n  #include <uv_vertex>\n  #include <uv2_vertex>\n  #include <color_vertex>\n  #include <skinbase_vertex>\n\n  #include <begin_vertex>\n  #include <morphtarget_vertex>\n  #include <skinning_vertex>\n  #include <project_vertex>\n  #include <logdepthbuf_vertex>\n\n  #include <worldpos_vertex>\n  #include <clipping_planes_vertex>\n  #include <fog_vertex>\n}\n`;\n\nconst FRAGMENT_SHADER = `\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <aomap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n  #include <clipping_planes_fragment>\n\n  vec4 diffuseColor = vec4(diffuse, opacity);\n  ReflectedLight reflectedLight = ReflectedLight(vec3(0.0), vec3(0.0), vec3(0.0), vec3(0.0));\n  vec3 totalEmissiveRadiance = emissive;\n\n  #include <logdepthbuf_fragment>\n  #include <map_fragment>\n  #include <color_fragment>\n  #include <alphatest_fragment>\n  #include <emissivemap_fragment>\n\n  reflectedLight.indirectDiffuse += vec3(1.0);\n\n  #include <aomap_fragment>\n\n  reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n  vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n  gl_FragColor = vec4(outgoingLight, diffuseColor.a);\n\n  #include <premultiplied_alpha_fragment>\n  #include <tonemapping_fragment>\n  #include <encodings_fragment>\n  #include <fog_fragment>\n}\n`;\n\nexport default class MobileStandardMaterial extends THREE.ShaderMaterial {\n  type = \"MobileStandardMaterial\";\n  isMobileStandardMaterial = true;\n  static fromStandardMaterial(material) {\n    const parameters = {\n      vertexShader: VERTEX_SHADER,\n      fragmentShader: FRAGMENT_SHADER,\n      uniforms: {\n        uvTransform: { value: new THREE.Matrix3() },\n        diffuse: { value: material.color },\n        opacity: { value: material.opacity },\n        map: { value: material.map },\n        aoMapIntensity: { value: material.aoMapIntensity },\n        aoMap: { value: material.aoMap },\n        emissive: { value: material.emissive },\n        emissiveMap: { value: material.emissiveMap }\n      },\n      fog: true,\n      lights: false,\n      opacity: material.opacity,\n      transparent: material.transparent,\n      alphaTest: material.alphaTest,\n      skinning: material.skinning,\n      morphTargets: material.morphTargets,\n      vertexColors: material.vertexColors\n    };\n\n    const mobileMaterial = new MobileStandardMaterial(parameters);\n\n    mobileMaterial.color = material.color;\n    mobileMaterial.map = material.map;\n    mobileMaterial.aoMap = material.aoMap;\n    mobileMaterial.aoMapIntensity = material.aoMapIntensity;\n    mobileMaterial.emissive = material.emissive;\n    mobileMaterial.emissiveMap = material.emissiveMap;\n\n    return mobileMaterial;\n  }\n  clone() {\n    return MobileStandardMaterial.fromStandardMaterial(this);\n  }\n}\n","import { EventTarget } from \"event-target-shim\";\nimport { getReticulumFetchUrl, fetchReticulum } from \"../utils/phoenix-utils\";\nimport { pushHistoryPath, sluglessPath, withSlug } from \"../utils/history\";\n\nexport const SOURCES = [\"poly\", \"sketchfab\", \"videos\", \"scenes\", \"gifs\", \"images\", \"twitch\"];\n\nconst EMPTY_RESULT = { entries: [], meta: {} };\n\nconst URL_SOURCE_TO_TO_API_SOURCE = {\n  scenes: \"scene_listings\",\n  images: \"bing_images\",\n  videos: \"bing_videos\",\n  youtube: \"youtube_videos\",\n  gifs: \"tenor\",\n  sketchfab: \"sketchfab\",\n  poly: \"poly\",\n  twitch: \"twitch\",\n  favorites: \"favorites\"\n};\n\nexport const MEDIA_SOURCE_DEFAULT_FILTERS = {\n  gifs: \"trending\",\n  sketchfab: \"featured\",\n  scenes: \"featured\",\n  favorites: \"my-favorites\"\n};\n\nconst SEARCH_CONTEXT_PARAMS = [\"q\", \"filter\", \"cursor\"];\n\n// This class is responsible for fetching and storing media search results and provides a\n// convenience API for performing history updates relevant to search navigation.\nexport default class MediaSearchStore extends EventTarget {\n  constructor() {\n    super();\n\n    this.requestIndex = 0;\n  }\n\n  setHistory(history) {\n    this.history = history;\n\n    this._update(this.history.location);\n\n    this.history.listen(location => {\n      this._update(location);\n    });\n  }\n\n  _update = async location => {\n    this.result = null;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    const urlSource = this.getUrlMediaSource(location);\n    if (!urlSource) return;\n\n    if (!this.previousSource || this.previousSource !== urlSource) {\n      this.dispatchEvent(new CustomEvent(\"sourcechanged\"));\n      this.previousSource = urlSource;\n    }\n\n    const urlParams = new URLSearchParams(location.search);\n\n    this.requestIndex++;\n    const currentRequestIndex = this.requestIndex;\n    const searchParams = new URLSearchParams();\n    const locationSearchParams = new URLSearchParams(location.search);\n    const isMy = locationSearchParams.get(\"filter\") && locationSearchParams.get(\"filter\").startsWith(\"my-\");\n\n    for (const param of SEARCH_CONTEXT_PARAMS) {\n      if (!urlParams.get(param)) continue;\n      searchParams.set(param, urlParams.get(param));\n    }\n\n    searchParams.get(\"locale\", navigator.languages[0]);\n\n    let source;\n    if (urlSource === \"avatars\" || urlSource === \"scenes\") {\n      // Avatars + scenes are special since we request them from a different source based on the facet.\n      const singular = urlSource === \"avatars\" ? \"avatar\" : \"scene\";\n      source = isMy ? `${singular}s` : `${singular}_listings`;\n    } else {\n      source = URL_SOURCE_TO_TO_API_SOURCE[urlSource];\n    }\n    searchParams.set(\"source\", source);\n\n    let fetch = true;\n\n    if (source === \"avatars\" || source === \"scenes\" || source === \"favorites\") {\n      if (isMy) {\n        if (window.APP.store.credentialsAccountId) {\n          searchParams.set(\"user\", window.APP.store.credentialsAccountId);\n        } else {\n          fetch = false; // Don't fetch my-* if not signed in\n        }\n      }\n    }\n\n    const path = `/api/v1/media/search?${searchParams.toString()}`;\n    const url = getReticulumFetchUrl(path);\n    if (this.lastSavedUrl === url) return;\n\n    this.isFetching = true;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n    const result = fetch ? await fetchReticulum(path) : EMPTY_RESULT;\n\n    if (this.requestIndex != currentRequestIndex) return;\n\n    this.result = result;\n    this.nextCursor = this.result && this.result.meta && this.result.meta.next_cursor;\n    this.lastFetchedUrl = url;\n    this.isFetching = false;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n  };\n\n  _legacyAvatarToSearchEntry = legacyAvatar => {\n    return {\n      id: legacyAvatar.id,\n      type: \"avatar_listing\",\n      url: legacyAvatar.url,\n      images: { preview: { url: legacyAvatar.thumbnail, width: 720, height: 1280 } },\n      gltfs: { avatar: legacyAvatar.model }\n    };\n  };\n\n  pageNavigate = delta => {\n    if (delta === -1) {\n      this.history.goBack();\n    } else {\n      const location = this.history.location;\n      const searchParams = new URLSearchParams(location.search);\n      searchParams.set(\"cursor\", this.nextCursor);\n      pushHistoryPath(this.history, location.pathname, searchParams.toString());\n    }\n  };\n\n  filterQueryNavigate = (filter, query) => {\n    const location = this.history.location;\n    const searchParams = new URLSearchParams(location.search);\n\n    if (query) {\n      searchParams.set(\"q\", query);\n    } else {\n      searchParams.delete(\"q\");\n    }\n\n    if (filter) {\n      searchParams.set(\"filter\", filter);\n    } else {\n      searchParams.delete(\"filter\");\n    }\n\n    if (filter) {\n      searchParams.set(\"cursor\", filter);\n    } else {\n      searchParams.delete(\"cursor\");\n    }\n\n    pushHistoryPath(this.history, location.pathname, searchParams.toString());\n  };\n\n  getSearchClearedSearchParams = (location, keepSource, keepNav) => {\n    const searchParams = new URLSearchParams(location.search);\n\n    // Strip browsing query params\n    searchParams.delete(\"q\");\n    searchParams.delete(\"filter\");\n    searchParams.delete(\"cursor\");\n\n    if (!keepNav) {\n      searchParams.delete(\"media_nav\");\n    }\n\n    if (!keepSource) {\n      searchParams.delete(\"media_source\");\n    }\n\n    return searchParams;\n  };\n\n  _stashLastSearchParams = location => {\n    const searchParams = new URLSearchParams(location.search);\n\n    this._stashedParams = {};\n    this._stashedSource = null;\n\n    const source = this.getUrlMediaSource(location);\n\n    // HACK for now do not stash favorite search, since that ends up being a source\n    // we do not reveal in the media browser UX. Revisit the rules here when we have a\n    // proper favorites browser. Then, we should have two separate stashes.\n    if (source === \"favorites\") return;\n    this._stashedSource = source;\n\n    for (const param of SEARCH_CONTEXT_PARAMS) {\n      const value = searchParams.get(param);\n\n      if (value) {\n        this._stashedParams[param] = value;\n      }\n    }\n  };\n\n  clearStashedQuery = () => {\n    if (!this._stashedParams) return;\n    delete this._stashedParams.q;\n  };\n\n  sourceNavigate = source => {\n    this._sourceNavigate(source, false, true);\n  };\n\n  sourceNavigateToDefaultSource = () => {\n    this._sourceNavigate(this._stashedSource ? this._stashedSource : SOURCES[0], false, true);\n  };\n\n  sourceNavigateWithNoNav = source => {\n    this._sourceNavigate(source, true, false);\n  };\n\n  _sourceNavigate = async (source, hideNav, useLastStashedParams) => {\n    const currentQuery = new URLSearchParams(this.history.location.search).get(\"q\");\n    const searchParams = this.getSearchClearedSearchParams(this.history.location);\n\n    if (currentQuery) {\n      searchParams.set(\"q\", currentQuery);\n    } else {\n      if (useLastStashedParams && this._stashedParams) {\n        for (const param of SEARCH_CONTEXT_PARAMS) {\n          const value = this._stashedParams[param];\n\n          // Only q param is compatible across sources, so keep it if is stashed.\n          const useValue = param === \"q\" || this._stashedSource === source;\n\n          if (value && useValue) {\n            searchParams.set(param, value);\n          }\n        }\n      } else {\n        if (source === \"avatars\") {\n          const hasAccountWithAvatars = await this._hasAccountWithAvatars();\n          searchParams.set(\"filter\", hasAccountWithAvatars ? \"my-avatars\" : \"featured\");\n        } else if (MEDIA_SOURCE_DEFAULT_FILTERS[source]) {\n          searchParams.set(\"filter\", MEDIA_SOURCE_DEFAULT_FILTERS[source]);\n        }\n      }\n    }\n\n    this._stashedParams = null;\n    this._stashedSource = null;\n\n    if (hideNav) {\n      searchParams.set(\"media_nav\", \"false\");\n    }\n\n    if (process.env.RETICULUM_SERVER && document.location.host !== process.env.RETICULUM_SERVER) {\n      searchParams.set(\"media_source\", source);\n      pushHistoryPath(this.history, this.history.location.pathname, searchParams.toString());\n    } else {\n      pushHistoryPath(this.history, withSlug(this.history.location, `/media/${source}`), searchParams.toString());\n    }\n  };\n\n  _hasAccountWithAvatars = async () => {\n    const { credentialsAccountId } = window.APP.store;\n    if (!credentialsAccountId) return false;\n\n    const searchParams = new URLSearchParams();\n    const source = \"avatars\";\n    searchParams.set(\"source\", source);\n    searchParams.set(\"user\", credentialsAccountId);\n    const result = await fetchReticulum(`/api/v1/media/search?${searchParams.toString()}`);\n    return !!(result && result.entries) && result.entries.length > 0;\n  };\n\n  getUrlMediaSource = location => {\n    const { search } = location;\n    const urlParams = new URLSearchParams(search);\n    const pathname = sluglessPath(location);\n\n    if (!pathname.startsWith(\"/media\") && !urlParams.get(\"media_source\")) return null;\n    return urlParams.get(\"media_source\") || pathname.substring(7);\n  };\n\n  pushExitMediaBrowserHistory = (history, stashLastSearchParams = true) => {\n    if (!history) history = this.history;\n\n    if (stashLastSearchParams) this._stashLastSearchParams(history.location);\n\n    const { pathname } = history.location;\n    const hasMediaPath = sluglessPath(history.location).startsWith(\"/media\");\n    pushHistoryPath(\n      history,\n      hasMediaPath ? withSlug(history.location, \"/\") : pathname,\n      this.getSearchClearedSearchParams(history.location).toString()\n    );\n    this.dispatchEvent(new CustomEvent(\"media-exit\"));\n  };\n}\n","module.exports = __webpack_public_path__ + \"assets/sfx/tick-b0fcbf1d9b6f92a24bec12f9bae1e42a.mp3\";","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { pushHistoryState, replaceHistoryState } from \"../utils/history\";\n\nfunction isModifiedEvent(event) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\n\n/**\n * A history-aware link that pushes/replaces the state, but not the path, in the browser history.\n */\nclass StateLink extends React.Component {\n  static propTypes = {\n    history: PropTypes.object,\n    innerRef: PropTypes.object,\n    replace: PropTypes.bool,\n    stateKey: PropTypes.string,\n    stateValue: PropTypes.string,\n    stateDetail: PropTypes.object,\n    target: PropTypes.string,\n    onClick: PropTypes.func,\n    children: PropTypes.node,\n    className: PropTypes.string\n  };\n\n  async handleClick(event, history) {\n    if (this.props.onClick) this.props.onClick(event);\n\n    if (\n      !event.defaultPrevented && // onClick prevented default\n      event.button === 0 && // ignore everything but left clicks\n      (!this.props.target || this.props.target === \"_self\") && // let browser handle \"target=_blank\" etc.\n      !isModifiedEvent(event) // ignore clicks with modifier keys\n    ) {\n      event.preventDefault();\n      const method = this.props.replace ? replaceHistoryState : pushHistoryState;\n      method(history, this.props.stateKey, this.props.stateValue, this.props.stateDetail);\n    }\n  }\n\n  render() {\n    const { innerRef, target, className, children } = this.props;\n    return (\n      <a\n        target={target}\n        className={className}\n        onClick={event => this.handleClick(event, this.props.history)}\n        href=\"#\"\n        ref={innerRef}\n      >\n        {children}\n      </a>\n    );\n  }\n}\n\nexport default StateLink;\n","/**\n * Chrome and Safari will start Audio contexts in a \"suspended\" state.\n * A user interaction (touch/mouse event) is needed in order to resume the AudioContext.\n */\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const ctx = THREE.AudioContext.getContext();\n\n  function resume() {\n    ctx.resume();\n\n    setTimeout(function() {\n      if (ctx.state === \"running\") {\n        document.body.removeEventListener(\"touchend\", resume, false);\n        document.body.removeEventListener(\"mouseup\", resume, false);\n      }\n    }, 0);\n  }\n\n  document.body.addEventListener(\"touchend\", resume, false);\n  document.body.addEventListener(\"mouseup\", resume, false);\n});\n","// Monkeypatch to address performance issue with updating panner nodes\n// TODO this needs to be merged into 3.js\n\nTHREE.PositionalAudio.prototype.updateMatrixWorld = (function() {\n  const position = new THREE.Vector3();\n  const quaternion = new THREE.Quaternion();\n\n  const scale = new THREE.Vector3();\n  const orientation = new THREE.Vector3();\n\n  return function updateMatrixWorld(force) {\n    THREE.Object3D.prototype.updateMatrixWorld.call(this, force);\n\n    let setInitial = false;\n\n    if (!this._lastPosition) {\n      setInitial = true;\n      this._lastPosition = new THREE.Vector3();\n      this._lastOrientation = new THREE.Vector3();\n      this._lastListenerPosition = new THREE.Vector3();\n    }\n\n    const panner = this.panner;\n    const listener = panner.context.listener;\n    this.matrixWorld.decompose(position, quaternion, scale);\n    orientation.set(0, 0, 1).applyQuaternion(quaternion);\n\n    // Need to update the position on this node if either the listener moves or this node moves,\n    // because otherwise there are audio artifacts in Chrome.\n    if (\n      setInitial ||\n      Math.abs(position.x - this._lastPosition.x) > Number.EPSILON ||\n      Math.abs(position.y - this._lastPosition.y) > Number.EPSILON ||\n      Math.abs(position.z - this._lastPosition.z) > Number.EPSILON ||\n      Math.abs(orientation.x - this._lastOrientation.x) > Number.EPSILON ||\n      Math.abs(orientation.y - this._lastOrientation.y) > Number.EPSILON ||\n      Math.abs(orientation.z - this._lastOrientation.z) > Number.EPSILON ||\n      (listener.positionX && Math.abs(listener.positionX.value - this._lastListenerPosition.x) > Number.EPSILON) ||\n      (listener.positionY && Math.abs(listener.positionY.value - this._lastListenerPosition.y) > Number.EPSILON) ||\n      (listener.positionZ && Math.abs(listener.positionZ.value - this._lastListenerPosition.z) > Number.EPSILON)\n    ) {\n      panner.setPosition(position.x, position.y, position.z);\n      panner.setOrientation(orientation.x, orientation.y, orientation.z);\n\n      this._lastPosition.x = position.x;\n      this._lastPosition.y = position.y;\n      this._lastPosition.z = position.z;\n\n      this._lastOrientation.x = orientation.x;\n      this._lastOrientation.y = orientation.y;\n      this._lastOrientation.z = orientation.z;\n\n      if (listener.positionX && listener.positionY && listener.positionZ) {\n        this._lastListenerPosition.x = listener.positionX.value;\n        this._lastListenerPosition.y = listener.positionY.value;\n        this._lastListenerPosition.z = listener.positionZ.value;\n      }\n    }\n  };\n})();\n","/**\n * Toggles the position of 2 bones into \"on\" and \"off\" positions to indicate mute state.\n * @namespace avatar\n * @component bone-mute-state-indicator\n */\nAFRAME.registerComponent(\"bone-mute-state-indicator\", {\n  schema: {\n    unmutedBoneName: { default: \"Watch_Joint_MicON\" },\n    mutedBoneName: { default: \"Watch_Joint_Muted\" },\n    onPos: { default: 0.81 },\n    offPos: { default: 0.5 }\n  },\n\n  init() {\n    this.onStateToggled = this.onStateToggled.bind(this);\n    this.el.addEventListener(\"model-loaded\", () => {\n      this.unmutedBone = this.el.object3D.getObjectByName(this.data.unmutedBoneName);\n      this.mutedBone = this.el.object3D.getObjectByName(this.data.mutedBoneName);\n      this.modelLoaded = true;\n\n      this.updateMuteState();\n    });\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateToggled);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateToggled);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateToggled);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateToggled);\n  },\n\n  onStateToggled(e) {\n    if (!e.detail.state === \"muted\") return;\n    this.updateMuteState();\n  },\n\n  updateMuteState() {\n    if (!this.modelLoaded) return;\n    const muted = this.el.sceneEl.is(\"muted\");\n    this.mutedBone.position.y = muted ? this.data.onPos : this.data.offPos;\n    this.unmutedBone.position.y = !muted ? this.data.onPos : this.data.offPos;\n    this.mutedBone.matrixNeedsUpdate = true;\n    this.unmutedBone.matrixNeedsUpdate = true;\n  }\n});\n","/**\n * Scales an object to near-zero if the object is invisible. Useful for bones representing avatar body parts.\n * @namespace avatar\n * @component bone-visibility\n */\nAFRAME.registerComponent(\"bone-visibility\", {\n  tick() {\n    const { visible } = this.el.object3D;\n\n    if (this.lastVisible !== visible) {\n      if (visible) {\n        this.el.object3D.scale.set(1, 1, 1);\n      } else {\n        // Three.js doesn't like updating matrices with 0 scale, so we set it to a near zero number.\n        this.el.object3D.scale.set(0.00000001, 0.00000001, 0.00000001);\n      }\n\n      this.lastVisible = visible;\n      this.el.object3D.updateMatrices(true, true);\n      this.el.object3D.updateMatrixWorld(true, true);\n    }\n  }\n});\n","const interactorOneTransform = [];\nconst interactorTwoTransform = [];\n\n/**\n * Applies effects to a hoverable based on hover state.\n * @namespace interactables\n * @component hoverable-visuals\n */\nAFRAME.registerComponent(\"hoverable-visuals\", {\n  schema: {\n    enableSweepingEffect: { type: \"boolean\", default: true }\n  },\n  init() {\n    // uniforms and boundingSphere are set from the component responsible for loading the mesh.\n    this.uniforms = null;\n    this.boundingSphere = new THREE.Sphere();\n\n    this.sweepParams = [0, 0];\n  },\n  remove() {\n    this.uniforms = null;\n    this.boundingBox = null;\n  },\n  tick(time) {\n    if (!this.uniforms || !this.uniforms.length) return;\n\n    const isPinned = this.el.components.pinnable && this.el.components.pinnable.data.pinned;\n    const isSpawner = !!this.el.components[\"super-spawner\"];\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n    const hideDueToPinning = !isSpawner && isPinned && !isFrozen;\n\n    let interactorOne, interactorTwo;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    if (interaction.state.leftHand.hovered === this.el || interaction.state.leftHand.held === this.el) {\n      interactorOne = interaction.options.leftHand.entity.object3D;\n    }\n    if (interaction.state.rightRemote.hovered === this.el || interaction.state.rightRemote.held === this.el) {\n      interactorTwo = interaction.options.rightRemote.entity.object3D;\n    }\n    if (interaction.state.rightHand.hovered === this.el || interaction.state.rightHand.held === this.el) {\n      interactorTwo = interaction.options.rightHand.entity.object3D;\n    }\n\n    if (interactorOne) {\n      interactorOne.matrixWorld.toArray(interactorOneTransform);\n    }\n    if (interactorTwo) {\n      interactorTwo.matrixWorld.toArray(interactorTwoTransform);\n    }\n\n    if (interactorOne || interactorTwo || isFrozen) {\n      const worldY = this.el.object3D.matrixWorld.elements[13];\n      const scaledRadius = this.el.object3D.scale.y * this.boundingSphere.radius;\n      this.sweepParams[0] = worldY - scaledRadius;\n      this.sweepParams[1] = worldY + scaledRadius;\n    }\n\n    for (let i = 0, l = this.uniforms.length; i < l; i++) {\n      const uniform = this.uniforms[i];\n      uniform.hubs_EnableSweepingEffect.value = this.data.enableSweepingEffect && !hideDueToPinning;\n      uniform.hubs_IsFrozen.value = isFrozen;\n      uniform.hubs_SweepParams.value = this.sweepParams;\n\n      uniform.hubs_HighlightInteractorOne.value = !!interactorOne && !hideDueToPinning;\n      uniform.hubs_InteractorOnePos.value[0] = interactorOneTransform[12];\n      uniform.hubs_InteractorOnePos.value[1] = interactorOneTransform[13];\n      uniform.hubs_InteractorOnePos.value[2] = interactorOneTransform[14];\n\n      uniform.hubs_HighlightInteractorTwo.value = !!interactorTwo && !hideDueToPinning;\n      uniform.hubs_InteractorTwoPos.value[0] = interactorTwoTransform[12];\n      uniform.hubs_InteractorTwoPos.value[1] = interactorTwoTransform[13];\n      uniform.hubs_InteractorTwoPos.value[2] = interactorTwoTransform[14];\n\n      if (interactorOne || interactorTwo || isFrozen) {\n        uniform.hubs_Time.value = time;\n      }\n    }\n  }\n});\n","/**\n * Applies effects to a hoverer based on hover state.\n * @namespace interactables\n * @component hover-visuals\n */\nAFRAME.registerComponent(\"hover-visuals\", {\n  schema: {\n    hand: { type: \"string\" }\n  },\n  init() {\n    // uniforms are set from the component responsible for loading the mesh.\n    this.handleLeftVisuals = this.handleLeftVisuals.bind(this);\n    this.handleRightVisuals = this.handleRightVisuals.bind(this);\n    this.hideVisualEffectOnElement = this.hideVisualEffectOnElement.bind(this);\n    this.hadLeftVisualLastFrame = false;\n    this.hadRightVisualLastFrame = false;\n    this.uniforms = null;\n  },\n  remove() {\n    this.uniforms = null;\n  },\n  tick() {\n    if (!this.uniforms || !this.uniforms.length) return;\n\n    // Push down loops to assist JIT:\n    if (this.data.hand === \"left\") {\n      this.handleLeftVisuals();\n    } else {\n      this.handleRightVisuals();\n    }\n  },\n\n  hideVisualEffectOnElement(el) {\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n    const isPinned = el.components.pinnable && el.components.pinnable.data.pinned;\n    const isSpawner = !!el.components[\"super-spawner\"];\n\n    return !isSpawner && isPinned && !isFrozen;\n  },\n\n  handleLeftVisuals: function() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const interactingElement = interaction.state.leftHand.held || interaction.state.leftHand.hovered;\n    const hideVisual = !interactingElement || this.hideVisualEffectOnElement(interactingElement);\n\n    // Last frame, we didn't have a visual so no need to update uniforms.\n    if (hideVisual && !this.hadLeftVisualLastFrame) return;\n    this.hadLeftVisualLastFrame = !hideVisual;\n\n    const elements = this.el.object3D.matrixWorld.elements;\n\n    for (let i = 0, l = this.uniforms.length; i < l; i++) {\n      const uniform = this.uniforms[i];\n      uniform.hubs_HighlightInteractorOne.value = !hideVisual;\n      uniform.hubs_InteractorOnePos.value[0] = elements[12];\n      uniform.hubs_InteractorOnePos.value[1] = elements[13];\n      uniform.hubs_InteractorOnePos.value[2] = elements[14];\n    }\n  },\n\n  handleRightVisuals: function() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n\n    const interactingElement = interaction.state.rightHand.held || interaction.state.rightHand.hovered;\n    const hideVisual = !interactingElement || this.hideVisualEffectOnElement(interactingElement);\n\n    // Last frame, we didn't have a visual so no need to update uniforms.\n    if (hideVisual && !this.hadRightVisualLastFrame) return;\n    this.hadRightVisualLastFrame = !hideVisual;\n\n    const elements = this.el.object3D.matrixWorld.elements;\n\n    for (let i = 0, l = this.uniforms.length; i < l; i++) {\n      const uniform = this.uniforms[i];\n      uniform.hubs_HighlightInteractorTwo.value = !hideVisual;\n      uniform.hubs_InteractorTwoPos.value[0] = elements[12];\n      uniform.hubs_InteractorTwoPos.value[1] = elements[13];\n      uniform.hubs_InteractorTwoPos.value[2] = elements[14];\n    }\n  }\n});\n","/**\n * Positions an entity relative to a given target when the given event is fired.\n * @component offset-relative-to\n */\nAFRAME.registerComponent(\"offset-relative-to\", {\n  schema: {\n    target: {\n      type: \"selector\"\n    },\n    offset: {\n      type: \"vec3\"\n    },\n    on: {\n      type: \"string\"\n    },\n    orientation: {\n      default: 1 // see doc/image_orientations.gif\n    },\n    selfDestruct: {\n      default: false\n    }\n  },\n  init() {\n    this.updateOffset = this.updateOffset.bind(this);\n    if (this.data.on) {\n      this.el.sceneEl.addEventListener(this.data.on, this.updateOffset);\n    } else {\n      this.updateOffset();\n    }\n  },\n\n  updateOffset: (function() {\n    const y = new THREE.Vector3(0, 1, 0);\n    const z = new THREE.Vector3(0, 0, -1);\n    const QUARTER_CIRCLE = Math.PI / 2;\n    const offsetVector = new THREE.Vector3();\n    return function() {\n      const obj = this.el.object3D;\n      const target = this.data.target.object3D;\n      offsetVector.copy(this.data.offset);\n      target.localToWorld(offsetVector);\n      if (obj.parent) {\n        obj.parent.worldToLocal(offsetVector);\n      }\n      obj.position.copy(offsetVector);\n      target.getWorldQuaternion(obj.quaternion);\n\n      // See doc/image_orientations.gif\n      switch (this.data.orientation) {\n        case 8:\n          obj.rotateOnAxis(z, 3 * QUARTER_CIRCLE);\n          break;\n        case 7:\n          obj.rotateOnAxis(z, 3 * QUARTER_CIRCLE);\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 6:\n          obj.rotateOnAxis(z, QUARTER_CIRCLE);\n          break;\n        case 5:\n          obj.rotateOnAxis(z, QUARTER_CIRCLE);\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 4:\n          obj.rotateOnAxis(z, 2 * QUARTER_CIRCLE);\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 3:\n          obj.rotateOnAxis(z, 2 * QUARTER_CIRCLE);\n          break;\n        case 2:\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 1:\n        default:\n          break;\n      }\n\n      obj.matrixNeedsUpdate = true;\n\n      if (this.data.selfDestruct) {\n        if (this.data.on) {\n          this.el.sceneEl.removeEventListener(this.data.on, this.updateOffset);\n        }\n        this.el.removeAttribute(\"offset-relative-to\");\n      }\n    };\n  })()\n});\n","const TWOPI = Math.PI * 2;\nfunction deltaAngle(a, b) {\n  const p = Math.abs(b - a) % TWOPI;\n  return p > Math.PI ? TWOPI - p : p;\n}\n\n/**\n * Positions the HUD and toggles app mode based on where the user is looking\n * @namespace ui\n * @component hud-controller\n */\nAFRAME.registerComponent(\"hud-controller\", {\n  schema: {\n    head: { type: \"selector\" },\n    offset: { default: 0.7 }, // distance from hud above head,\n    lookCutoff: { default: 20 }, // angle at which the hud should be \"on\",\n    animRange: { default: 30 }, // degrees over which to animate the hud into view\n    yawCutoff: { default: 50 } // yaw degrees at wich the hud should reoirent even if the user is looking up\n  },\n  init() {\n    this.onChildHovered = this.onChildHovered.bind(this);\n    this.removeHoverEvents = this.removeHoverEvents.bind(this);\n    this.isYLocked = false;\n    this.lockedHeadPositionY = 0;\n    this.lookDir = new THREE.Vector3();\n    this.lookEuler = new THREE.Euler();\n    this.store = window.APP.store;\n    this.hoverableChildren = this.el.querySelectorAll(\"[is-remote-hover-target]\");\n  },\n\n  tick() {\n    const hud = this.el.object3D;\n    const head = this.data.head.object3D;\n\n    const { offset, lookCutoff, animRange, yawCutoff } = this.data;\n\n    const pitch = head.rotation.x * THREE.Math.RAD2DEG;\n    const yawDif = deltaAngle(head.rotation.y, hud.rotation.y) * THREE.Math.RAD2DEG;\n\n    // HUD is always visible until first hover, to increase discoverability.\n    const forceHudVisible = !this.store.state.activity.hasHoveredInWorldHud;\n\n    // animate the hud into place over animRange degrees as the user aproaches the lookCutoff angle\n    let t = 1 - THREE.Math.clamp(lookCutoff - pitch, 0, animRange) / animRange;\n\n    // HUD is locked down while showing tooltip or if forced.\n    if (forceHudVisible) {\n      t = 1;\n    }\n\n    // Once the HUD is in place it should stay in place until you look sufficiently far down\n    if (t === 1) {\n      this.lockedHeadPositionY = head.position.y;\n      this.hudLocked = true;\n    } else if (this.hudLocked && pitch < lookCutoff - animRange / 2) {\n      this.hudLocked = false;\n    }\n\n    if (this.hudLocked) {\n      t = 1;\n    }\n\n    // Reorient the hud only if the user is looking away from the hud, for right now this arbitrarily means the hud is 1/2 way animated away\n    // TODO: come up with better huristics for this that maybe account for the user turning away from the hud \"too far\", also animate the position so that it doesnt just snap.\n    const hudOutOfView = yawDif >= yawCutoff || pitch < lookCutoff - animRange / 2;\n\n    if (hudOutOfView) {\n      this.lookDir.set(0, 0, -1);\n      this.lookDir.applyQuaternion(head.quaternion);\n      this.lookDir.add(head.position);\n      hud.position.x = this.lookDir.x;\n      hud.position.z = this.lookDir.z;\n      hud.rotation.copy(head.rotation);\n      hud.rotation.x = 0;\n      hud.rotation.z = 0;\n    }\n\n    hud.visible = !hudOutOfView || forceHudVisible;\n    hud.position.y = (this.isYLocked ? this.lockedHeadPositionY : head.position.y) + offset + (1 - t) * offset;\n    hud.rotation.x = (1 - t) * THREE.Math.DEG2RAD * 90;\n    hud.matrixNeedsUpdate = true;\n  },\n\n  play() {\n    for (let i = 0; i < this.hoverableChildren.length; i++) {\n      this.hoverableChildren[i].object3D.addEventListener(\"hovered\", this.onChildHovered);\n    }\n  },\n\n  pause() {\n    this.removeHoverEvents();\n  },\n\n  removeHoverEvents() {\n    for (let i = 0; i < this.hoverableChildren.length; i++) {\n      this.hoverableChildren[i].object3D.removeEventListener(\"hovered\", this.onChildHovered);\n    }\n  },\n\n  onChildHovered() {\n    if (!this.store.state.activity.hasHoveredInWorldHud) {\n      this.store.update({ activity: { hasHoveredInWorldHud: true } });\n      this.removeHoverEvents();\n    }\n  }\n});\n","/**\n * A button with an image, tooltip, hover states.\n * @namespace ui\n * @component icon-button\n */\nAFRAME.registerComponent(\"icon-button\", {\n  schema: {\n    image: { type: \"string\" },\n    hoverImage: { type: \"string\" },\n    activeImage: { type: \"string\" },\n    activeHoverImage: { type: \"string\" },\n    active: { type: \"boolean\" },\n    tooltip: { type: \"selector\" },\n    tooltipText: { type: \"string\" },\n    activeTooltipText: { type: \"string\" }\n  },\n\n  init() {\n    this.el.object3D.matrixNeedsUpdate = true;\n    this.onHover = () => {\n      this.hovering = true;\n      this.updateButtonState();\n    };\n    this.onHoverOut = () => {\n      this.hovering = false;\n      this.updateButtonState();\n    };\n  },\n\n  play() {\n    this.updateButtonState();\n    this.el.object3D.addEventListener(\"hovered\", this.onHover);\n    this.el.object3D.addEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"hovered\", this.onHover);\n    this.el.object3D.removeEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  update() {\n    this.updateButtonState();\n  },\n\n  updateButtonState() {\n    const hovering = this.hovering;\n    const active = this.data.active;\n\n    const image = active ? (hovering ? \"activeHoverImage\" : \"activeImage\") : hovering ? \"hoverImage\" : \"image\";\n\n    if (this.el.components.sprite) {\n      if (this.data[image]) {\n        this.el.setAttribute(\"sprite\", \"name\", this.data[image]);\n      } else {\n        console.warn(`No ${image} image on me.`, this);\n      }\n    } else {\n      console.error(\"No sprite.\");\n    }\n\n    if (this.data.tooltip && hovering) {\n      this.data.tooltip.setAttribute(\"visible\", this.hovering);\n      this.data.tooltip\n        .querySelector(\"[text]\")\n        .setAttribute(\"text\", \"value\", this.data.active ? this.data.activeTooltipText : this.data.tooltipText);\n    }\n  }\n});\n","/**\n * A button with text\n * @namespace ui\n * @component text-button\n */\nAFRAME.registerComponent(\"text-button\", {\n  schema: {\n    textHoverColor: { type: \"string\" },\n    textColor: { type: \"string\" },\n    backgroundHoverColor: { type: \"string\" },\n    backgroundColor: { type: \"string\" }\n  },\n\n  init() {\n    // TODO: This is a bit of a hack to deal with position \"component\" not setting matrixNeedsUpdate. Come up with a better solution.\n    this.el.object3D.matrixNeedsUpdate = true;\n    this.onHover = () => {\n      this.hovering = true;\n      this.updateButtonState();\n    };\n    this.onHoverOut = () => {\n      this.hovering = false;\n      this.updateButtonState();\n    };\n    this.textEl = this.el.querySelector(\"[text]\");\n  },\n\n  play() {\n    this.updateButtonState();\n    this.el.object3D.addEventListener(\"hovered\", this.onHover);\n    this.el.object3D.addEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"hovered\", this.onHover);\n    this.el.object3D.removeEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  update() {\n    this.updateButtonState();\n  },\n\n  updateButtonState() {\n    const hovering = this.hovering;\n    this.el.setAttribute(\"slice9\", \"color\", hovering ? this.data.backgroundHoverColor : this.data.backgroundColor);\n\n    if (this.textEl) {\n      this.textEl.setAttribute(\"text\", \"color\", hovering ? this.data.textHoverColor : this.data.textColor);\n    }\n  }\n});\n\nconst noop = function() {};\n// TODO: this should ideally be fixed upstream somehow but its pretty tricky since text is just a geometry not a different type of Object3D, and Object3D is what handles raycast checks.\nAFRAME.registerComponent(\"text-raycast-hack\", {\n  dependencies: [\"text\"],\n  init() {\n    this.el.getObject3D(\"text\").raycast = noop;\n  }\n});\n","/**\n * Registers a click handler and invokes the block method on the NAF adapter for the owner associated with its entity.\n * @namespace network\n * @component block-button\n */\nAFRAME.registerComponent(\"block-button\", {\n  init() {\n    this.onClick = () => {\n      this.block(this.owner);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.owner = networkedEl.components.networked.data.owner;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  block(clientId) {\n    window.APP.hubChannel.hide(clientId);\n  }\n});\n","AFRAME.registerComponent(\"mute-button\", {\n  init() {\n    this.onClick = () => {\n      this.mute(this.owner);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.owner = networkedEl.components.networked.data.owner;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  async mute(clientId) {\n    this.el.sceneEl.emit(\"action_mute_client\", { clientId });\n  }\n});\n","AFRAME.registerComponent(\"kick-button\", {\n  init() {\n    this.onClick = () => {\n      this.kick(this.owner);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.owner = networkedEl.components.networked.data.owner;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  async kick(clientId) {\n    this.el.sceneEl.emit(\"action_kick_client\", { clientId });\n  }\n});\n","AFRAME.registerComponent(\"close-vr-notice-button\", {\n  init() {\n    this.onClick = () => {\n      this.el.sceneEl.emit(\"action_vr_notice_closed\");\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"leave-room-button\", {\n  init() {\n    this.onClick = () => {\n      this.el.sceneEl.emit(\"leave_room_requested\");\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"visible-if-permitted\", {\n  schema: {\n    type: \"string\"\n  },\n  init() {\n    this.updateVisibility = this.updateVisibility.bind(this);\n    this.updateVisibility();\n    window.APP.hubChannel.addEventListener(\"permissions_updated\", this.updateVisibility);\n  },\n  updateVisibility() {\n    this.el.object3D.visible = this.el.sceneEl.systems.permissions.canOrWillIfCreator(this.data);\n  },\n  remove() {\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.updateVisibility);\n  }\n});\n","/**\n * Stores networked avatar state.\n * @namespace avatar\n * @component networked-avatar\n */\nAFRAME.registerComponent(\"networked-avatar\", {\n  schema: {\n    left_hand_pose: { default: 0 },\n    right_hand_pose: { default: 0 }\n  }\n});\n","AFRAME.registerComponent(\"pinnable\", {\n  schema: {\n    pinned: { default: false }\n  },\n\n  init() {\n    this._fireEvents = this._fireEvents.bind(this);\n\n    // Fire pinned events when page changes so we can persist the page.\n    this.el.addEventListener(\"pager-page-changed\", this._fireEvents);\n\n    // Fire pinned events when video state changes so we can persist the page.\n    this.el.addEventListener(\"owned-video-state-changed\", this._fireEvents);\n  },\n\n  update(oldData) {\n    this._fireEvents(oldData);\n  },\n\n  _fireEvents(oldData) {\n    // We need to guard against _fireEvents being called during entity initialization,\n    // when the networked component isn't initialized yet.\n    if (this.el.components.networked && this.el.components.networked.data && !NAF.utils.isMine(this.el)) return;\n\n    const pinStateChanged = !!oldData.pinned !== this.data.pinned;\n\n    if (this.data.pinned) {\n      this.el.emit(\"pinned\", { el: this.el, changed: pinStateChanged });\n\n      this.el.removeAttribute(\"animation__pin-start\");\n      this.el.removeAttribute(\"animation__pin-end\");\n      const currentScale = this.el.object3D.scale;\n\n      this.el.setAttribute(\"animation__pin-start\", {\n        property: \"scale\",\n        dur: 200,\n        from: { x: currentScale.x, y: currentScale.y, z: currentScale.z },\n        to: { x: currentScale.x * 1.1, y: currentScale.y * 1.1, z: currentScale.z * 1.1 },\n        easing: \"easeOutElastic\"\n      });\n\n      this.el.setAttribute(\"animation__pin-end\", {\n        property: \"scale\",\n        delay: 200,\n        dur: 200,\n        from: { x: currentScale.x * 1.1, y: currentScale.y * 1.1, z: currentScale.z * 1.1 },\n        to: { x: currentScale.x, y: currentScale.y, z: currentScale.z },\n        easing: \"easeOutElastic\"\n      });\n\n      if (this.el.components[\"ammo-body\"]) {\n        this.el.setAttribute(\"ammo-body\", { type: \"static\" });\n      }\n    } else {\n      this.el.emit(\"unpinned\", { el: this.el, changed: pinStateChanged });\n    }\n  },\n\n  tick() {\n    const { leftHand, rightHand, rightRemote } = this.el.sceneEl.systems.interaction.state;\n    const held = leftHand.held === this.el || rightHand.held === this.el || rightRemote.held === this.el;\n    if (!held && this.wasHeld) {\n      this._fireEvents(this.data);\n    }\n    this.wasHeld = held;\n  }\n});\n","const COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nAFRAME.registerComponent(\"drop-object-button\", {\n  init() {\n    this.onClick = () => {\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) return;\n\n      this.targetEl.setAttribute(\"floaty-object\", { modifyGravityOnRelease: false });\n      this.targetEl.setAttribute(\"ammo-body\", {\n        type: \"dynamic\",\n        gravity: { x: 0, y: -9.8, z: 0 },\n        angularDamping: 0.01,\n        linearDamping: 0.01,\n        linearSleepingThreshold: 1.6,\n        angularSleepingThreshold: 2.5,\n        collisionFilterMask: COLLISION_LAYERS.DEFAULT_INTERACTABLE\n      });\n      this.targetEl.components[\"ammo-body\"].body.activate();\n\n      // Remove drop button after using it\n      this.el.parentNode.removeChild(this.el);\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"remove-networked-object-button\", {\n  init() {\n    this.onClick = () => {\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) return;\n\n      this.targetEl.setAttribute(\"animation__remove\", {\n        property: \"scale\",\n        dur: 200,\n        to: { x: 0.01, y: 0.01, z: 0.01 },\n        easing: \"easeInQuad\"\n      });\n\n      this.el.parentNode.removeAttribute(\"visibility-while-frozen\");\n      this.el.parentNode.setAttribute(\"visible\", false);\n\n      this.targetEl.addEventListener(\"animationcomplete\", () => {\n        NAF.utils.takeOwnership(this.targetEl);\n        this.targetEl.parentNode.removeChild(this.targetEl);\n      });\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"camera-focus-button\", {\n  schema: {\n    track: { default: false },\n    selector: { default: null }\n  },\n\n  init() {\n    this.cameraSystem = this.el.sceneEl.systems[\"camera-tools\"];\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      if (this.data.selector) {\n        this.targetEl = networkedEl.querySelector(this.data.selector);\n      } else {\n        this.targetEl = networkedEl;\n      }\n    });\n\n    this.onClick = () => {\n      const myCamera = this.cameraSystem.getMyCamera();\n      if (!myCamera) return;\n\n      myCamera.components[\"camera-tool\"].focus(this.targetEl, this.data.track);\n    };\n  },\n\n  tick() {\n    const isVisible = this.el.object3D.visible;\n    const shouldBeVisible = !!(this.cameraSystem && this.cameraSystem.getMyCamera());\n\n    if (isVisible !== shouldBeVisible) {\n      this.el.setAttribute(\"visible\", shouldBeVisible);\n    }\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"mirror-camera-button\", {\n  schema: {\n    // Selector for label to change when mirroring/un-mirroring\n    labelSelector: { type: \"string\" }\n  },\n\n  init() {\n    this._updateUI = this._updateUI.bind(this);\n    this._isMirrored = this._isMirrored.bind(this);\n    this.labelEl = this.el.parentNode.querySelector(this.data.labelSelector);\n\n    this.onClick = () => {\n      if (!this._isMirrored()) {\n        this.targetEl.components[\"camera-tool\"].mirror();\n      } else {\n        this.targetEl.components[\"camera-tool\"].unmirror();\n      }\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n      this.targetEl.addEventListener(\"mirrored\", this._updateUI);\n      this.targetEl.addEventListener(\"unmirrored\", this._updateUI);\n      this._updateUI();\n    });\n\n    if (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR()) {\n      this.el.object3D.visible = false;\n    }\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  _isMirrored() {\n    return this.targetEl === this.el.sceneEl.systems[\"camera-mirror\"].getMirroredCameraEl();\n  },\n\n  _updateUI() {\n    const isMirrored = this._isMirrored();\n    this.labelEl.setAttribute(\"text\", \"value\", isMirrored ? \"unmirror\" : \"mirror\");\n    this.el.setAttribute(\"text-button\", \"backgroundColor\", isMirrored ? \"#fff\" : \"#ff0520\");\n    this.el.setAttribute(\"text-button\", \"backgroundHoverColor\", isMirrored ? \"#aaa\" : \"#cc0515\");\n  }\n});\n","/**\n * Toggles the visibility of this entity based on networked ownership\n * @namespace ui\n * @component visible-to-owner\n */\nAFRAME.registerComponent(\"visible-to-owner\", {\n  init() {\n    this.onStateChange = e => {\n      this.el.setAttribute(\"visible\", e.detail.newOwner === NAF.clientId);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(el => {\n      el.addEventListener(\"ownership-changed\", this.onStateChange);\n      this.el.setAttribute(\"visible\", NAF.utils.isMine(el));\n    });\n  }\n});\n","AFRAME.registerComponent(\"emit-state-change\", {\n  multiple: true,\n  schema: {\n    state: { type: \"string\" },\n    transform: { type: \"string\", oneof: [\"rising\", \"falling\"] },\n    event: { type: \"string\" }\n  },\n\n  init() {\n    this.stateadded = this.stateadded.bind(this);\n    this.stateremoved = this.stateremoved.bind(this);\n  },\n\n  stateadded(e) {\n    if (e.detail === this.data.state) {\n      this.el.emit(this.data.event);\n    }\n  },\n  stateremoved(e) {\n    if (e.detail === this.data.state) {\n      this.el.emit(this.data.event);\n    }\n  },\n\n  update() {\n    this.el.removeEventListener(\"stateadded\", this.stateadded);\n    this.el.removeEventListener(\"stateremoved\", this.stateremoved);\n\n    if (this.data.transform === \"rising\") {\n      this.el.addEventListener(\"stateadded\", this.stateadded);\n    }\n    if (this.data.transform === \"falling\") {\n      this.el.addEventListener(\"stateremoved\", this.stateremoved);\n    }\n  }\n});\n","AFRAME.registerComponent(\"action-to-event\", {\n  multiple: true,\n\n  schema: {\n    path: { type: \"string\" },\n    event: { type: \"string\" }\n  },\n\n  tick() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    if (userinput.get(this.data.path)) {\n      this.el.emit(this.data.event);\n    }\n  }\n});\n","AFRAME.registerComponent(\"action-to-remove\", {\n  multiple: true,\n\n  schema: {\n    path: { type: \"string\" },\n    requireOwnership: { type: \"boolean\", default: true }\n  },\n\n  init() {\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.networkedEl = networkedEl;\n    });\n  },\n\n  tick() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    if (!userinput.get(this.data.path)) return;\n    if (this.data.requireOwnership && this.networkedEl && !NAF.utils.isMine(this.networkedEl)) return;\n\n    this.el.parentNode.removeChild(this.el);\n  }\n});\n","AFRAME.registerComponent(\"emit-scene-event-on-remove\", {\n  schema: {\n    event: { default: null }\n  },\n\n  remove() {\n    if (this.data.event) {\n      this.el.sceneEl.emit(this.data.event, { el: this.el });\n    }\n  }\n});\n","AFRAME.registerComponent(\"follow-in-fov\", {\n  schema: {\n    target: { type: \"selector\" },\n    offset: { type: \"vec3\" },\n    speed: { type: \"number\", default: 0.003 },\n    angle: { type: \"number\", default: 45 }\n  },\n\n  init() {\n    this.targetPos = new THREE.Vector3();\n    this.offset = new THREE.Vector3();\n    this.offset.copy(this.data.offset);\n\n    this.snappedRot = new THREE.Euler();\n    this.snappedQ = new THREE.Quaternion();\n    this.snappedXForm = new THREE.Matrix4();\n    this.snappedXFormWorld = new THREE.Matrix4();\n    this.tempVector = new THREE.Vector3();\n  },\n\n  tick(t, dt) {\n    if (!this.el.object3D.visible) return;\n\n    const obj = this.el.object3D;\n    const target = this.data.target.object3D;\n\n    // Compute position + rotation by projecting offset along a downward ray in target space,\n    // and mask out Z rotation.\n    this._applyMaskedTargetRotation(\n      -this.data.angle * THREE.Math.DEG2RAD,\n      target.rotation.y,\n      0,\n      this.snappedXFormWorld\n    );\n\n    this.targetPos.copy(this.offset);\n    this.targetPos.applyMatrix4(this.snappedXFormWorld);\n\n    if (obj.parent) {\n      obj.parent.worldToLocal(this.targetPos);\n    }\n\n    if (!this.started) {\n      obj.position.copy(this.targetPos);\n      this.started = true;\n    } else {\n      const t = this.data.speed * dt;\n\n      obj.position.set(\n        obj.position.x + (this.targetPos.x - obj.position.x) * t,\n        obj.position.y + (this.targetPos.y - obj.position.y) * t,\n        obj.position.z + (this.targetPos.z - obj.position.z) * t\n      );\n    }\n\n    this.snappedXFormWorld.decompose(this.tempVector, obj.quaternion, this.tempVector);\n    obj.matrixNeedsUpdate = true;\n  },\n\n  _applyMaskedTargetRotation(x, y, z, to) {\n    const target = this.data.target.object3D;\n    this.snappedRot.set(x, y, z, target.rotation.order);\n    this.snappedQ.setFromEuler(this.snappedRot);\n\n    this.snappedXForm.compose(\n      target.position,\n      this.snappedQ,\n      target.scale\n    );\n\n    to.multiplyMatrices(target.parent.matrixWorld, this.snappedXForm);\n  }\n});\n","AFRAME.registerComponent(\"matrix-auto-update\", {\n  schema: {\n    target: { type: \"string\" }\n  },\n\n  init: function() {\n    this._updateMatrixAutoUpdate = this._updateMatrixAutoUpdate.bind(this);\n    this._updateMatrixAutoUpdate();\n  },\n\n  play: function() {\n    this.el.sceneEl.addEventListener(\"object3dset\", this._updateMatrixAutoUpdate);\n  },\n\n  pause: function() {\n    this.el.sceneEl.removeEventListener(\"object3dset\", this._updateMatrixAutoUpdate);\n  },\n\n  _updateMatrixAutoUpdate: function() {\n    if (this.data.target) {\n      this.el.getObject3D(this.data.target).matrixAutoUpdate = true;\n    } else {\n      this.el.object3D.matrixAutoUpdate = true;\n    }\n  }\n});\n","AFRAME.registerComponent(\"hover-menu\", {\n  multiple: true,\n  schema: {\n    template: { type: \"selector\" },\n    dirs: { type: \"array\" },\n    dim: { default: true }\n  },\n\n  async init() {\n    this.onFrozenStateChange = this.onFrozenStateChange.bind(this);\n    this.hovering = false;\n    await this.getHoverMenu();\n    this.applyHoverState();\n  },\n\n  getHoverMenu() {\n    if (this.menuPromise) return this.menuPromise;\n    return (this.menuPromise = new Promise(resolve => {\n      const menu = this.el.appendChild(document.importNode(this.data.template.content, true).children[0]);\n      // we have to wait a tick for the attach callbacks to get fired for the elements in a template\n      setTimeout(() => {\n        this.menu = menu;\n        this.el.setAttribute(\"position-at-box-shape-border\", {\n          target: \".hover-container\",\n          dirs: this.data.dirs,\n          animate: false,\n          scale: false\n        });\n        resolve(this.menu);\n      });\n    }));\n  },\n\n  onFrozenStateChange(e) {\n    if (!e.detail === \"frozen\") return;\n    this.applyHoverState();\n  },\n\n  applyHoverState() {\n    if (!this.menu) return;\n    this.menu.object3D.visible = !this.el.sceneEl.is(\"frozen\") && this.hovering;\n    if (this.data.dim && this.el.object3DMap.mesh && this.el.object3DMap.mesh.material) {\n      this.el.object3DMap.mesh.material.color.setScalar(this.menu.object3D.visible ? 0.5 : 1);\n    }\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onFrozenStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onFrozenStateChange);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onFrozenStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onFrozenStateChange);\n  }\n});\n","AFRAME.registerComponent(\"disable-frustum-culling\", {\n  init() {\n    this.el.object3D.traverse(o => (o.frustumCulled = false));\n  }\n});\n","AFRAME.registerComponent(\"set-active-camera\", {\n  init() {\n    // This is a hack needed to set the active camera because sometimes A-Frame will create the default camera and set it to the active camera on startup because the query selector to find an existing camera in the scene fails.\n\n    const cameraSystem = this.el.sceneEl.systems.camera;\n    const currentActiveCamera = cameraSystem.activeCameraEl;\n\n    if (currentActiveCamera !== this.el) {\n      cameraSystem.setActiveCamera(this.el);\n\n      // Also A-Frame fails to delete the default camera :P\n      currentActiveCamera.parentNode.removeChild(currentActiveCamera);\n\n      // Look controls leaves behind this CSS class.\n      this.el.sceneEl.canvas.classList.remove(\"a-grab-cursor\");\n    }\n  }\n});\n","AFRAME.registerComponent(\"track-pose\", {\n  schema: {\n    path: { type: \"string\" }\n  },\n\n  tick() {\n    const matrix = AFRAME.scenes[0].systems.userinput.get(this.data.path);\n    if (matrix) {\n      const o = this.el.object3D;\n      o.matrix.copy(matrix);\n      o.matrix.decompose(o.position, o.quaternion, o.scale);\n      o.matrixIsModified = true;\n    }\n  }\n});\n","AFRAME.registerComponent(\"replay\", {\n  init: function() {\n    this.playhead = 0;\n    this.poseIndex = 0;\n  },\n\n  tick: function(t, dt) {\n    let overflow = false;\n    while (!overflow && this.playhead >= this.poses[this.poseIndex].timestamp) {\n      this.el.setAttribute(\"position\", this.poses[this.poseIndex].position);\n      this.el.setAttribute(\"rotation\", this.poses[this.poseIndex].rotation);\n      this.el.object3D.matrixNeedsUpdate = true;\n      this.poseIndex += 1;\n      overflow = this.poseIndex === this.poses.length;\n    }\n\n    this.playhead += dt;\n\n    if (overflow) {\n      this.playhead = 0;\n      this.poseIndex = 0;\n    }\n  }\n});\n","AFRAME.registerComponent(\"visibility-by-path\", {\n  schema: {\n    path: { type: \"string\" }\n  },\n  tick() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const shouldBeVisible = !!userinput.get(this.data.path);\n    if (this.el.object3D.visible !== shouldBeVisible) {\n      this.el.setAttribute(\"visible\", shouldBeVisible);\n    }\n  }\n});\n","import { Socket } from \"phoenix\";\nimport { generateHubName } from \"../utils/name-generation\";\nimport { airtableAssets, airtableAssetsInitialState } from '../airtable'\n\nimport Store from \"../storage/store\";\n\nconst resolverLink = document.createElement(\"a\");\nexport function getReticulumFetchUrl(path, absolute = false) {\n  if (process.env.RETICULUM_SERVER) {\n    return `https://${process.env.RETICULUM_SERVER}${path}`;\n  } else if (absolute) {\n    resolverLink.href = path;\n    return resolverLink.href;\n  } else {\n    return path;\n  }\n}\n\nexport async function fetchReticulum(path, absolute = false) {\n  const headers = { \"Content-Type\": \"application/json\" };\n  const credentialsToken = window.APP.store.state.credentials.token;\n  if (credentialsToken) headers.authorization = `bearer ${credentialsToken}`;\n\n  const res = await fetch(getReticulumFetchUrl(path, absolute), { method: \"GET\", headers });\n\n  if (res.status !== 200) {\n    console.warn(\"Reticulum fetch failed \" + path);\n    return null;\n  }\n\n  const body = await res.text();\n\n  let result;\n  try {\n    result = JSON.parse(body);\n  } catch (e) {\n    result = body; // TODO better error handling\n  }\n\n  return result;\n}\n\nlet reticulumMeta = null;\nlet invalidatedReticulumMetaThisSession = false;\n\nexport async function invalidateReticulumMeta() {\n  invalidatedReticulumMetaThisSession = true;\n  reticulumMeta = null;\n}\n\nexport async function getReticulumMeta() {\n  if (!reticulumMeta) {\n    // Initially look up version based upon page, avoiding round-trip, otherwise fetch.\n    if (!invalidatedReticulumMetaThisSession && document.querySelector(\"meta[name='ret:version']\")) {\n      reticulumMeta = {\n        version: document.querySelector(\"meta[name='ret:version']\").getAttribute(\"value\"),\n        pool: document.querySelector(\"meta[name='ret:pool']\").getAttribute(\"value\"),\n        phx_host: document.querySelector(\"meta[name='ret:phx_host']\").getAttribute(\"value\")\n      };\n    } else {\n      await fetch(getReticulumFetchUrl(\"/api/v1/meta\")).then(async res => {\n        reticulumMeta = await res.json();\n      });\n    }\n  }\n\n  const qs = new URLSearchParams(location.search);\n  const phxHostOverride = qs.get(\"phx_host\");\n\n  if (phxHostOverride) {\n    reticulumMeta.phx_host = phxHostOverride;\n  }\n\n  return reticulumMeta;\n}\n\nexport async function connectToReticulum(debug = false, params = null) {\n  const qs = new URLSearchParams(location.search);\n\n  const getNewSocketUrl = async () => {\n    const socketProtocol = qs.get(\"phx_protocol\") || (document.location.protocol === \"https:\" ? \"wss:\" : \"ws:\");\n    let socketHost = qs.get(\"phx_host\");\n    let socketPort = qs.get(\"phx_port\");\n\n    const reticulumMeta = await getReticulumMeta();\n    socketHost = socketHost || process.env.RETICULUM_SOCKET_SERVER || reticulumMeta.phx_host;\n    socketPort =\n      socketPort ||\n      (process.env.RETICULUM_SERVER ? new URL(`${socketProtocol}//${process.env.RETICULUM_SERVER}`).port : \"443\");\n    return `${socketProtocol}//${socketHost}${socketPort ? `:${socketPort}` : \"\"}`;\n  };\n\n  const socketUrl = await getNewSocketUrl();\n  console.log(`Phoenix Socket URL: ${socketUrl}`);\n\n  const socketSettings = {};\n\n  if (debug) {\n    socketSettings.logger = (kind, msg, data) => {\n      console.log(`${kind}: ${msg}`, data);\n    };\n  }\n\n  if (params) {\n    socketSettings.params = params;\n  }\n\n  const socket = new Socket(`${socketUrl}/socket`, socketSettings);\n  socket.connect();\n  socket.onError(async () => {\n    // On error, underlying reticulum node may have died, so rebalance by\n    // fetching a new healthy node to connect to.\n    invalidateReticulumMeta();\n\n    const endPointPath = new URL(socket.endPoint).pathname;\n    const newSocketUrl = await getNewSocketUrl();\n    const newEndPoint = `${newSocketUrl}${endPointPath}`;\n    console.log(`Socket error, changed endpoint to ${newEndPoint}`);\n    socket.endPoint = newEndPoint;\n  });\n\n  return socket;\n}\n\nexport function getLandingPageForPhoto(photoUrl) {\n  const parsedUrl = new URL(photoUrl);\n  return getReticulumFetchUrl(parsedUrl.pathname.replace(\".png\", \".html\") + parsedUrl.search, true);\n}\n\nexport function fetchReticulumAuthenticated(url, method = \"GET\", payload) {\n  const { token } = window.APP.store.state.credentials;\n  const retUrl = getReticulumFetchUrl(url);\n  const params = {\n    headers: { \"content-type\": \"application/json\" },\n    method\n  };\n  if (token) {\n    params.headers.authorization = `bearer ${token}`;\n  }\n  if (payload) {\n    params.body = JSON.stringify(payload);\n  }\n  return fetch(retUrl, params).then(async r => {\n    const result = await r.text();\n    try {\n      return JSON.parse(result);\n    } catch (e) {\n      // Some reticulum responses, particularly DELETE requests, don't return json.\n      return result;\n    }\n  });\n}\n\nexport async function createAndRedirectToNewHub(name, sceneId, sceneUrl, replace) {\n  const createUrl = getReticulumFetchUrl(\"/api/v1/hubs\");\n\n  let assets = {Name: \"Test\", SceneUrl: null};\n\n  const record = await airtableAssets.find('recHqITRS7cBMwn9i')\n\n  if (record) assets = record.fields;\n  \n  // const payload = { hub: { name: name || generateHubName() } };\n  const payload = { hub: { name: assets.Name } };\n  \n\n  // if (sceneId) {\n  //   payload.hub.scene_id = sceneId;\n  // } else {\n    // payload.hub.default_environment_gltf_bundle_url = sceneUrl;\n    \n    // payload.hub.default_environment_gltf_bundle_url = 'https://www.dropbox.com/s/ayl3t33p2ymnxux/Axon%20Park_Cliffside.glb';\n    // payload.hub.default_environment_gltf_bundle_url = 'https://s3-us-west-1.amazonaws.com/axonpark/Axon_Park_Cliffside.glb';\n    payload.hub.default_environment_gltf_bundle_url = assets.SceneUrl;\n    // payload.hub.default_environment_gltf_bundle_url = '/assets/Axon_Park_Cliffside.glb';\n  // }\n\n  const headers = { \"content-type\": \"application/json\" };\n  const store = new Store();\n  if (store.state && store.state.credentials.token) {\n    headers.authorization = `bearer ${store.state.credentials.token}`;\n  }\n\n  let res = await fetch(createUrl, {\n    body: JSON.stringify(payload),\n    headers,\n    method: \"POST\"\n  }).then(r => r.json());\n\n  if (res.error === \"invalid_token\") {\n    // Clear the invalid token from store.\n    store.update({ credentials: { token: null, email: null } });\n\n    // Create hub anonymously\n    delete headers.authorization;\n    res = await fetch(createUrl, {\n      body: JSON.stringify(payload),\n      headers,\n      method: \"POST\"\n    }).then(r => r.json());\n  }\n\n  const hub = res;\n  let url = hub.url;\n\n  const creatorAssignmentToken = hub.creator_assignment_token;\n  if (creatorAssignmentToken) {\n    store.update({ creatorAssignmentTokens: [{ hubId: hub.hub_id, creatorAssignmentToken: creatorAssignmentToken }] });\n\n    // Don't need to store the embed token if there's no creator assignment token, since that means\n    // we are the owner and will get the embed token on page load.\n    const embedToken = hub.embed_token;\n\n    if (embedToken) {\n      store.update({ embedTokens: [{ hubId: hub.hub_id, embedToken: embedToken }] });\n    }\n  }\n\n  if (process.env.RETICULUM_SERVER && document.location.host !== process.env.RETICULUM_SERVER) {\n    url = `/hub.html?hub_id=${hub.hub_id}`;\n  }\n\n  if (replace) {\n    document.location.replace(url);\n  } else {\n    document.location = url;\n  }\n}\n\nexport function getPresenceProfileForSession(presences, sessionId) {\n  const entry = Object.entries(presences || {}).find(([k]) => k === sessionId) || [];\n  const presence = entry[1];\n  return (presence && presence.metas && presence.metas[0].profile) || {};\n}\n\n// Takes the given channel, and creates a new channel with the same bindings\n// with the given socket, joins it, and leaves the old channel after joining.\n//\n// NOTE: This function relies upon phoenix channel object internals, so this\n// function will need to be reviewed if/when we ever update phoenix.js\nexport function migrateChannelToSocket(oldChannel, socket, params) {\n  const channel = socket.channel(oldChannel.topic, params || oldChannel.params);\n\n  for (let i = 0, l = oldChannel.bindings.length; i < l; i++) {\n    const item = oldChannel.bindings[i];\n    channel.on(item.event, item.callback);\n  }\n\n  for (let i = 0, l = oldChannel.pushBuffer.length; i < l; i++) {\n    const item = oldChannel.pushBuffer[i];\n    channel.push(item.event, item.payload, item.timeout);\n  }\n\n  const oldJoinPush = oldChannel.joinPush;\n  const joinPush = channel.join();\n\n  for (let i = 0, l = oldJoinPush.recHooks.length; i < l; i++) {\n    const item = oldJoinPush.recHooks[i];\n    joinPush.receive(item.status, item.callback);\n  }\n\n  return new Promise(resolve => {\n    joinPush.receive(\"ok\", () => {\n      // Clear all event handlers first so no duplicate messages come in.\n      oldChannel.bindings = [];\n      resolve(channel);\n    });\n  });\n}\n","AFRAME.registerComponent(\"tags\", {\n  schema: {\n    isHandCollisionTarget: { default: false },\n    isHoldable: { default: false },\n    offersHandConstraint: { default: false },\n    offersRemoteConstraint: { default: false },\n    singleActionButton: { default: false },\n    holdableButton: { default: false },\n    isPen: { default: false },\n    isHoverMenuChild: { default: false }\n  },\n  update() {\n    if (this.didUpdateOnce) {\n      console.warn(\"Do not edit tags with .setAttribute\");\n    }\n    this.didUpdateOnce = true;\n  }\n});\n","import nextTick from \"../utils/next-tick\";\nimport { mapMaterials } from \"../utils/material-utils\";\nimport SketchfabZipWorker from \"../workers/sketchfab-zip.worker.js\";\nimport MobileStandardMaterial from \"../materials/MobileStandardMaterial\";\nimport { getCustomGLTFParserURLResolver } from \"../utils/media-url-utils\";\nimport { promisifyWorker } from \"../utils/promisify-worker.js\";\nimport { MeshBVH, acceleratedRaycast } from \"three-mesh-bvh\";\nTHREE.Mesh.prototype.raycast = acceleratedRaycast;\n\nconst GLTFCache = {};\nconst extractZipFile = promisifyWorker(new SketchfabZipWorker());\n\nfunction defaultInflator(el, componentName, componentData) {\n  if (!AFRAME.components[componentName]) {\n    throw new Error(`Inflator failed. \"${componentName}\" component does not exist.`);\n  }\n  if (AFRAME.components[componentName].multiple && Array.isArray(componentData)) {\n    for (let i = 0; i < componentData.length; i++) {\n      el.setAttribute(componentName + \"__\" + i, componentData[i]);\n    }\n  } else {\n    el.setAttribute(componentName, componentData);\n  }\n}\n\nAFRAME.GLTFModelPlus = {\n  // eslint-disable-next-line no-unused-vars\n  components: {},\n  registerComponent(componentKey, componentName, inflator) {\n    inflator = inflator || defaultInflator;\n    AFRAME.GLTFModelPlus.components[componentKey] = { inflator, componentName };\n  }\n};\n\nfunction parallelTraverse(a, b, callback) {\n  callback(a, b);\n\n  for (let i = 0; i < a.children.length; i++) {\n    parallelTraverse(a.children[i], b.children[i], callback);\n  }\n}\n\nfunction generateMeshBVH(object3D) {\n  object3D.traverse(obj => {\n    // note that we might already have a bounds tree if this was a clone of an object with one\n    const hasBufferGeometry = obj.isMesh && obj.geometry.isBufferGeometry;\n    const hasBoundsTree = hasBufferGeometry && obj.geometry.boundsTree;\n    if (hasBufferGeometry && !hasBoundsTree && obj.geometry.attributes.position) {\n      const geo = obj.geometry;\n      const triCount = geo.index ? geo.index.count / 3 : geo.attributes.position.count / 3;\n      // only bother using memory and time making a BVH if there are a reasonable number of tris,\n      // and if there are too many it's too painful and large to tolerate doing it (at least until\n      // we put this in a web worker)\n      if (triCount > 1000 && triCount < 1000000) {\n        // note that bounds tree construction creates an index as a side effect if one doesn't already exist\n        geo.boundsTree = new MeshBVH(obj.geometry, { strategy: 0, maxDepth: 30 });\n      }\n    }\n  });\n}\n\n// Modified version of Don McCurdy's AnimationUtils.clone\n// https://github.com/mrdoob/three.js/pull/14494\nfunction cloneSkinnedMesh(source) {\n  const cloneLookup = new Map();\n\n  const clone = source.clone();\n\n  parallelTraverse(source, clone, function(sourceNode, clonedNode) {\n    cloneLookup.set(sourceNode, clonedNode);\n    if (sourceNode.isMesh && sourceNode.geometry.boundsTree) {\n      clonedNode.geometry.boundsTree = sourceNode.geometry.boundsTree;\n    }\n  });\n\n  source.traverse(function(sourceMesh) {\n    if (!sourceMesh.isSkinnedMesh) return;\n\n    const sourceBones = sourceMesh.skeleton.bones;\n    const clonedMesh = cloneLookup.get(sourceMesh);\n\n    clonedMesh.skeleton = sourceMesh.skeleton.clone();\n\n    clonedMesh.skeleton.bones = sourceBones.map(function(sourceBone) {\n      if (!cloneLookup.has(sourceBone)) {\n        throw new Error(\"Required bones are not descendants of the given object.\");\n      }\n\n      return cloneLookup.get(sourceBone);\n    });\n\n    clonedMesh.bind(clonedMesh.skeleton, sourceMesh.bindMatrix);\n  });\n\n  return clone;\n}\n\nfunction cloneGltf(gltf) {\n  return {\n    animations: gltf.animations,\n    scene: cloneSkinnedMesh(gltf.scene)\n  };\n}\n\nfunction getHubsComponents(node) {\n  const hubsComponents =\n    node.userData.gltfExtensions &&\n    (node.userData.gltfExtensions.MOZ_hubs_components || node.userData.gltfExtensions.HUBS_components);\n\n  // We can remove support for legacy components when our environment, avatar and interactable models are\n  // updated to match Spoke output.\n  const legacyComponents = node.userData.components;\n\n  return hubsComponents || legacyComponents;\n}\n\n/// Walks the tree of three.js objects starting at the given node, using the GLTF data\n/// and template data to construct A-Frame entities and components when necessary.\n/// (It's unnecessary to construct entities for subtrees that have no component data\n/// or templates associated with any of their nodes.)\n///\n/// Returns the A-Frame entity associated with the given node, if one was constructed.\nconst inflateEntities = function(indexToEntityMap, node, templates, isRoot, modelToWorldScale = 1) {\n  // TODO: Remove this once we update the legacy avatars to the new node names\n  if (node.name === \"Chest\") {\n    node.name = \"Spine\";\n  } else if (node.name === \"Root Scene\") {\n    node.name = \"AvatarRoot\";\n  } else if (node.name === \"Bot_Skinned\") {\n    node.name = \"AvatarMesh\";\n  }\n\n  // inflate subtrees first so that we can determine whether or not this node needs to be inflated\n  const childEntities = [];\n  const children = node.children.slice(0); // setObject3D mutates the node's parent, so we have to copy\n  for (const child of children) {\n    const el = inflateEntities(indexToEntityMap, child, templates);\n    if (el) {\n      childEntities.push(el);\n    }\n  }\n\n  const entityComponents = getHubsComponents(node);\n\n  const nodeHasBehavior = !!entityComponents || node.name in templates;\n  if (!nodeHasBehavior && !childEntities.length && !isRoot) {\n    return null; // we don't need an entity for this node\n  }\n\n  const el = document.createElement(\"a-entity\");\n  el.append.apply(el, childEntities);\n\n  // Remove invalid CSS class name characters.\n  const className = (node.name || node.uuid).replace(/[^\\w-]/g, \"\");\n  el.classList.add(className);\n\n  // AFRAME rotation component expects rotations in YXZ, convert it\n  if (node.rotation.order !== \"YXZ\") {\n    node.rotation.setFromQuaternion(node.quaternion, \"YXZ\");\n  }\n\n  // Copy over the object's transform to the THREE.Group and reset the actual transform of the Object3D\n  // all updates to the object should be done through the THREE.Group wrapper\n  el.object3D.position.copy(node.position);\n  el.object3D.rotation.copy(node.rotation);\n  el.object3D.scale.copy(node.scale).multiplyScalar(modelToWorldScale);\n  el.object3D.matrixNeedsUpdate = true;\n\n  node.matrixAutoUpdate = false;\n  node.matrix.identity();\n  node.matrix.decompose(node.position, node.rotation, node.scale);\n\n  el.setObject3D(node.type.toLowerCase(), node);\n  if (entityComponents && \"nav-mesh\" in entityComponents) {\n    el.setObject3D(\"mesh\", node);\n  }\n\n  // Set the name of the `THREE.Group` to match the name of the node,\n  // so that `THREE.PropertyBinding` will find (and later animate)\n  // the group. See `PropertyBinding.findNode`:\n  // https://github.com/mrdoob/three.js/blob/dev/src/animation/PropertyBinding.js#L211\n  el.object3D.name = node.name;\n  if (node.animations) {\n    // Pass animations up to the group object so that when we can pass the group as\n    // the optional root in `THREE.AnimationMixer.clipAction` and use the hierarchy\n    // preserved under the group (but not the node). Otherwise `clipArray` will be\n    // `null` in `THREE.AnimationClip.findByName`.\n    node.parent.animations = node.animations;\n  }\n\n  const gltfIndex = node.userData.gltfIndex;\n  if (gltfIndex !== undefined) {\n    indexToEntityMap[gltfIndex] = el;\n  }\n\n  return el;\n};\n\nfunction inflateComponents(inflatedEntity, indexToEntityMap) {\n  inflatedEntity.object3D.traverse(object3D => {\n    const entityComponents = getHubsComponents(object3D);\n    const el = object3D.el;\n\n    if (entityComponents && el) {\n      for (const prop in entityComponents) {\n        if (entityComponents.hasOwnProperty(prop) && AFRAME.GLTFModelPlus.components.hasOwnProperty(prop)) {\n          const { componentName, inflator } = AFRAME.GLTFModelPlus.components[prop];\n          inflator(el, componentName, entityComponents[prop], entityComponents, indexToEntityMap);\n        }\n      }\n    }\n  });\n}\n\nfunction attachTemplate(root, name, templateRoot) {\n  const targetEls = root.querySelectorAll(\".\" + name);\n  for (const el of targetEls) {\n    const root = templateRoot.cloneNode(true);\n    // Merge root element attributes with the target element\n    for (const { name, value } of root.attributes) {\n      el.setAttribute(name, value);\n    }\n\n    // Append all child elements\n    while (root.children.length > 0) {\n      el.appendChild(root.children[0]);\n    }\n  }\n}\n\nfunction runMigration(version, json) {\n  if (version < 2) {\n    //old heightfields will be on the same node as the nav-mesh, delete those\n    const oldHeightfieldNode = json.nodes.find(node => {\n      let components = null;\n      if (node.extensions && node.extensions.MOZ_hubs_components) {\n        components = node.extensions.MOZ_hubs_components;\n      } else if (node.extensions && node.extensions.HUBS_components) {\n        components = node.extensions.HUBS_components;\n      }\n      return components && components.heightfield && components[\"nav-mesh\"];\n    });\n    if (oldHeightfieldNode) {\n      if (oldHeightfieldNode.extensions.MOZ_hubs_components) {\n        delete oldHeightfieldNode.extensions.MOZ_hubs_components.heightfield;\n      } else if (oldHeightfieldNode.extensions.HUBS_components) {\n        delete oldHeightfieldNode.extensions.HUBS_components.heightfield;\n      }\n    }\n  }\n}\n\nexport async function loadGLTF(src, contentType, preferredTechnique, onProgress, jsonPreprocessor) {\n  let gltfUrl = src;\n  let fileMap;\n\n  if (contentType.includes(\"model/gltf+zip\") || contentType.includes(\"application/x-zip-compressed\")) {\n    fileMap = await extractZipFile(gltfUrl);\n    gltfUrl = fileMap[\"scene.gtlf\"];\n  }\n\n  const loadingManager = new THREE.LoadingManager();\n  loadingManager.setURLModifier(getCustomGLTFParserURLResolver(gltfUrl));\n  const gltfLoader = new THREE.GLTFLoader(loadingManager);\n\n  const parser = await new Promise((resolve, reject) => gltfLoader.createParser(gltfUrl, resolve, onProgress, reject));\n\n  if (jsonPreprocessor) {\n    parser.json = jsonPreprocessor(parser.json);\n  }\n\n  let version = 0;\n  if (\n    parser.json.extensions &&\n    parser.json.extensions.MOZ_hubs_components &&\n    parser.json.extensions.MOZ_hubs_components.hasOwnProperty(\"version\")\n  ) {\n    version = parser.json.extensions.MOZ_hubs_components.version;\n  }\n  runMigration(version, parser.json);\n\n  const materials = parser.json.materials;\n  if (materials) {\n    for (let i = 0; i < materials.length; i++) {\n      const material = materials[i];\n\n      if (\n        material.extensions &&\n        material.extensions.MOZ_alt_materials &&\n        material.extensions.MOZ_alt_materials[preferredTechnique] !== undefined\n      ) {\n        const altMaterialIndex = material.extensions.MOZ_alt_materials[preferredTechnique];\n        materials[i] = materials[altMaterialIndex];\n      }\n    }\n  }\n\n  const nodes = parser.json.nodes;\n\n  if (nodes) {\n    for (let i = 0; i < nodes.length; i++) {\n      const node = nodes[i];\n\n      if (!node.extras) {\n        node.extras = {};\n      }\n\n      node.extras.gltfIndex = i;\n    }\n  }\n\n  const gltf = await new Promise(parser.parse.bind(parser));\n\n  gltf.scene.traverse(object => {\n    // GLTFLoader sets matrixAutoUpdate on animated objects, we want to keep the defaults\n    object.matrixAutoUpdate = THREE.Object3D.DefaultMatrixAutoUpdate;\n\n    object.material = mapMaterials(object, material => {\n      if (material.isMeshStandardMaterial && preferredTechnique === \"KHR_materials_unlit\") {\n        return MobileStandardMaterial.fromStandardMaterial(material);\n      }\n\n      return material;\n    });\n  });\n\n  if (fileMap) {\n    // The GLTF is now cached as a THREE object, we can get rid of the original blobs\n    Object.keys(fileMap).forEach(URL.revokeObjectURL);\n  }\n\n  return gltf;\n}\n\n/**\n * Loads a GLTF model, optionally recursively \"inflates\" the child nodes of a model into a-entities and sets\n * whitelisted components on them if defined in the node's extras.\n * @namespace gltf\n * @component gltf-model-plus\n */\nAFRAME.registerComponent(\"gltf-model-plus\", {\n  schema: {\n    src: { type: \"string\" },\n    contentType: { type: \"string\" },\n    useCache: { default: true },\n    inflate: { default: false },\n    modelToWorldScale: { type: \"number\", default: 1 }\n  },\n\n  init() {\n    this.preferredTechnique =\n      window.APP && window.APP.quality === \"low\" ? \"KHR_materials_unlit\" : \"pbrMetallicRoughness\";\n\n    // This can be set externally if a consumer wants to do some node preprocssing.\n    this.jsonPreprocessor = null;\n\n    this.loadTemplates();\n  },\n\n  update() {\n    this.applySrc(this.data.src, this.data.contentType);\n  },\n\n  loadTemplates() {\n    this.templates = {};\n    this.el.querySelectorAll(\":scope > template\").forEach(templateEl => {\n      const root = document.importNode(templateEl.firstElementChild || templateEl.content.firstElementChild, true);\n      this.templates[templateEl.getAttribute(\"data-name\")] = root;\n    });\n  },\n\n  async loadModel(src, contentType, technique, useCache) {\n    if (useCache) {\n      if (!GLTFCache[src]) {\n        GLTFCache[src] = await loadGLTF(src, contentType, technique, null, this.jsonPreprocessor);\n      }\n\n      return cloneGltf(GLTFCache[src]);\n    } else {\n      return await loadGLTF(src, contentType, technique, null, this.jsonPreprocessor);\n    }\n  },\n\n  async applySrc(src, contentType) {\n    try {\n      // If the src attribute is a selector, get the url from the asset item.\n      if (src && src.charAt(0) === \"#\") {\n        const assetEl = document.getElementById(src.substring(1));\n        src = assetEl.getAttribute(\"src\");\n      }\n\n      if (src === this.lastSrc) return;\n      this.lastSrc = src;\n\n      if (!src) {\n        if (this.inflatedEl) {\n          console.warn(\"gltf-model-plus set to an empty source, unloading inflated model.\");\n          this.disposeLastInflatedEl();\n        }\n        return;\n      }\n\n      this.el.emit(\"model-loading\");\n      const gltf = await this.loadModel(src, contentType, this.preferredTechnique, this.data.useCache);\n\n      // If we started loading something else already\n      // TODO: there should be a way to cancel loading instead\n      if (src != this.lastSrc) return;\n\n      // If we had inflated something already before, clean that up\n      this.disposeLastInflatedEl();\n\n      this.model = gltf.scene || gltf.scenes[0];\n      this.model.animations = gltf.animations;\n\n      if (gltf.animations.length > 0) {\n        this.el.setAttribute(\"animation-mixer\", {});\n        this.el.components[\"animation-mixer\"].initMixer(gltf.animations);\n      } else {\n        generateMeshBVH(this.model);\n      }\n\n      const indexToEntityMap = {};\n\n      let object3DToSet = this.model;\n      if (\n        this.data.inflate &&\n        (this.inflatedEl = inflateEntities(\n          indexToEntityMap,\n          this.model,\n          this.templates,\n          true,\n          this.data.modelToWorldScale\n        ))\n      ) {\n        this.el.appendChild(this.inflatedEl);\n\n        object3DToSet = this.inflatedEl.object3D;\n        // TODO: Still don't fully understand the lifecycle here and how it differs between browsers, we should dig in more\n        // Wait one tick for the appended custom elements to be connected before attaching templates\n        await nextTick();\n        if (src != this.lastSrc) return; // TODO: there must be a nicer pattern for this\n\n        inflateComponents(this.inflatedEl, indexToEntityMap);\n\n        for (const name in this.templates) {\n          attachTemplate(this.el, name, this.templates[name]);\n        }\n      }\n\n      // The call to setObject3D below recursively clobbers any `el` backreferences to entities\n      // in the entire inflated entity graph to point to `object3DToSet`.\n      //\n      // We don't want those overwritten, since lots of code assumes `object3d.el` points to the relevant\n      // A-Frame entity for that three.js object, so we back them up and re-wire them here. If we didn't do\n      // this, all the `el` properties on these object3ds would point to the `object3DToSet` which is either\n      // the model or the root GLTF inflated entity.\n      const rewires = [];\n\n      object3DToSet.traverse(o => {\n        const el = o.el;\n        if (el) rewires.push(() => (o.el = el));\n      });\n\n      const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n\n      if (environmentMapComponent) {\n        environmentMapComponent.applyEnvironmentMap(object3DToSet);\n      }\n\n      this.el.setObject3D(\"mesh\", object3DToSet);\n\n      rewires.forEach(f => f());\n\n      this.el.emit(\"model-loaded\", { format: \"gltf\", model: this.model });\n    } catch (e) {\n      delete GLTFCache[src];\n      console.error(\"Failed to load glTF model\", e, this);\n      this.el.emit(\"model-error\", { format: \"gltf\", src });\n    }\n  },\n\n  disposeLastInflatedEl() {\n    if (this.inflatedEl) {\n      this.inflatedEl.parentNode.removeChild(this.inflatedEl);\n\n      this.inflatedEl.object3D.traverse(x => {\n        if (x.material && x.material.dispose) {\n          x.material.dispose();\n        }\n\n        if (x.geometry) {\n          if (x.geometry.dispose) {\n            x.geometry.dispose();\n          }\n\n          x.geometry.boundsTree = null;\n        }\n      });\n\n      delete this.inflatedEl;\n\n      this.el.removeAttribute(\"animation-mixer\");\n    }\n  }\n});\n","const isMobileVR = AFRAME.utils.device.isMobileVR();\n\n// Billboard component that only updates visible objects and only those in the camera view on mobile VR.\nAFRAME.registerComponent(\"billboard\", {\n  init: function() {\n    this.target = new THREE.Vector3();\n    this._updateBillboard = this._updateBillboard.bind(this);\n    this._updateIsInView = this._updateIsInView.bind(this);\n\n    if (isMobileVR) {\n      this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._updateIsInView, \"billboards\");\n    }\n  },\n  remove() {\n    if (isMobileVR) {\n      this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._updateIsInView, \"billboards\");\n    }\n  },\n\n  tick() {\n    if (this.isInView || !isMobileVR) {\n      this._updateBillboard();\n    }\n  },\n\n  _updateIsInView: (function() {\n    const frustum = new THREE.Frustum();\n    const frustumMatrix = new THREE.Matrix4();\n    const box = new THREE.Box3();\n    const boxTemp = new THREE.Box3();\n\n    const expandBox = o => {\n      if (o.geometry) {\n        o.updateMatrices();\n        o.geometry.computeBoundingBox();\n        boxTemp.copy(o.geometry.boundingBox).applyMatrix4(o.matrixWorld);\n        box.expandByPoint(boxTemp.min);\n        box.expandByPoint(boxTemp.max);\n      }\n    };\n\n    const isInViewOfCamera = (obj, screenCamera) => {\n      frustumMatrix.multiplyMatrices(screenCamera.projectionMatrix, screenCamera.matrixWorldInverse);\n      frustum.setFromMatrix(frustumMatrix);\n      box.makeEmpty();\n      obj.traverse(expandBox);\n\n      // NOTE: not using box.setFromObject here because text nodes do not have Z values in their geometry buffer,\n      // and that routine ultimately assumes they do.\n      return frustum.intersectsBox(box);\n    };\n\n    return function() {\n      if (!this.el.object3D.visible) {\n        this.isInView = false;\n        return;\n      }\n\n      if (!this.playerCamera) {\n        this.playerCamera = document.querySelector(\"#player-camera\").getObject3D(\"camera\");\n      }\n\n      if (!this.playerCamera) return;\n\n      this.isInView = isInViewOfCamera(this.el.object3D, this.playerCamera);\n    };\n  })(),\n\n  _updateBillboard: function() {\n    if (!this.el.object3D.visible) return;\n\n    const camera = this.el.sceneEl.camera;\n    const object3D = this.el.object3D;\n\n    if (camera) {\n      // Set the camera world position as the target.\n      this.target.setFromMatrixPosition(camera.matrixWorld);\n      object3D.lookAt(this.target);\n      object3D.matrixNeedsUpdate = true;\n    }\n  }\n});\n","// Given a function and a queue name, schedules things so a single function\n// from a given queue will be called per frame.\nAFRAME.registerSystem(\"frame-scheduler\", {\n  init() {\n    // Registry a map from queue name to list of registered functions.\n    this.registry = new Map();\n    this.queues = [];\n    this.frameIndex = 0;\n  },\n\n  schedule(func, queue) {\n    if (!this.registry.has(queue)) {\n      this.queues.push(queue);\n      this.registry.set(queue, []);\n    }\n\n    this.registry.get(queue).push(func);\n  },\n\n  unschedule(func) {\n    for (let i = 0; i < this.queues.length; i++) {\n      const queue = this.queues[i];\n      const entries = this.registry.get(queue);\n      const idx = entries.indexOf(func);\n\n      if (idx >= 0) {\n        entries.splice(idx, 1);\n      }\n    }\n  },\n\n  tick: function() {\n    for (let i = 0; i < this.queues.length; i++) {\n      const queue = this.queues[i];\n      const entries = this.registry.get(queue);\n      if (entries.length === 0) continue;\n\n      entries[this.frameIndex % entries.length]();\n    }\n\n    this.frameIndex++;\n  }\n});\n","/* global AFRAME */\n\n/**\n * Toggle visibility of an entity based on if the user is in vr mode or not\n * @namespace vr-mode\n * @component vr-mode-toggle-visibility\n */\nAFRAME.registerComponent(\"vr-mode-toggle-visibility\", {\n  schema: {\n    invert: { type: \"boolean\", default: false }\n  },\n\n  init() {\n    this.updateComponentState = this.updateComponentState.bind(this);\n  },\n\n  play() {\n    this.updateComponentState();\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  updateComponentState() {\n    const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n    this.el.setAttribute(\"visible\", inVRMode !== this.data.invert);\n  }\n});\n\n/**\n * Toggle the isPlaying state of a component based on app mode\n * @namespace vr-mode\n * @component vr-mode-toggle-playing\n */\nAFRAME.registerComponent(\"vr-mode-toggle-playing\", {\n  multiple: true,\n  schema: {\n    invert: { type: \"boolean\", default: false }\n  },\n\n  init() {\n    this.updateComponentState = this.updateComponentState.bind(this);\n  },\n\n  play() {\n    this.updateComponentState();\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  updateComponentState() {\n    const componentName = this.id;\n    const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n    this.el.components[componentName][inVRMode !== this.data.invert ? \"play\" : \"pause\"]();\n  }\n});\n\n/**\n * Toggle a CSS class based upon app mode.\n * @namespace vr-mode\n * @component vr-mode-toggle-class\n */\nAFRAME.registerComponent(\"vr-mode-toggle-class\", {\n  multiple: true,\n  schema: {\n    invert: { type: \"boolean\", default: false },\n    class: { type: \"string\", default: false }\n  },\n\n  init() {\n    this.updateComponentState = this.updateComponentState.bind(this);\n  },\n\n  play() {\n    this.updateComponentState();\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  updateComponentState() {\n    const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n\n    if (inVRMode) {\n      this.el.classList.add(this.data.class);\n    } else {\n      this.el.classList.remove(this.data.class);\n    }\n  }\n});\n","AFRAME.registerSystem(\"permissions\", {\n  can(permissionName) {\n    return !!window.APP.hubChannel.can(permissionName);\n  },\n  canOrWillIfCreator(permissionName) {\n    return !!window.APP.hubChannel.canOrWillIfCreator(permissionName);\n  },\n  fetchPermissions() {\n    return window.APP.hubChannel.fetchPermissions();\n  }\n});\n","/**\n * Emits an \"exit\" event when a user has stopped using the app for a certain period of time\n * @system exit-on-blur\n */\nAFRAME.registerSystem(\"exit-on-blur\", {\n  init() {\n    this.onBlur = this.onBlur.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onTimeout = this.onTimeout.bind(this);\n    this.onEnterVR = this.onEnterVR.bind(this);\n\n    this.isOculusBrowser = navigator.userAgent.match(/Oculus/);\n    this.enteredVR = false;\n\n    window.addEventListener(\"blur\", this.onBlur);\n    window.addEventListener(\"focus\", this.onFocus);\n    this.el.addEventListener(\"enter-vr\", this.onEnterVR);\n\n    this.lastTimeoutCheck = 0;\n    this.exitTimeout = null;\n  },\n\n  tick(t) {\n    // This is a hack to detect when an Oculus Go user has taken off the headset and the headset has\n    // entered standby mode. Currently Oculus Browser is not emitting a blur, vrdisplaydeactivate,\n    // vrdisplayblur, visibilitychange, or vrdisplaypresentchange event, so we wait 15 seconds after\n    // the last requestAnimationFrame callback to determine if the headset has gone into standby mode.\n    // We also check that you have entered VR so that this timeout does not occur in the setup UI.\n    if (\n      this.isOculusBrowser &&\n      this.enteredVR &&\n      (this.lastTimeoutCheck === 0 || t - this.lastTimeoutCheck >= 1000.0) // Don't do this clear every frame, slow.\n    ) {\n      this.lastTimeoutCheck = t;\n      clearTimeout(this.exitTimeout);\n      this.exitTimeout = setTimeout(this.onTimeout, 15 * 1000);\n    }\n  },\n\n  onEnterVR() {\n    this.enteredVR = true;\n  },\n\n  onBlur() {\n    if (this.el.isMobile) {\n      clearTimeout(this.exitTimeout);\n      this.exitTimeout = setTimeout(this.onTimeout, 30 * 1000);\n    }\n  },\n\n  onFocus() {\n    if (this.el.isMobile) {\n      clearTimeout(this.exitTimeout);\n    }\n  },\n\n  onTimeout() {\n    this.el.dispatchEvent(new CustomEvent(\"exit\"));\n  },\n\n  remove() {\n    clearTimeout(this.exitTimeout);\n    window.removeEventListener(\"blur\", this.onBlur);\n  }\n});\n","// Used for tracking and managing camera tools in the scene\nAFRAME.registerSystem(\"camera-tools\", {\n  init() {\n    this.cameraEls = [];\n  },\n\n  register(el) {\n    this.cameraEls.push(el);\n    el.addEventListener(\"ownership-changed\", this._onOwnershipChange);\n    delete this.myCamera;\n  },\n\n  deregister(el) {\n    this.cameraEls = this.cameraEls.filter(c => c !== el);\n    el.removeEventListener(\"ownership-changed\", this._onOwnershipChange);\n    delete this.myCamera;\n  },\n\n  avatarUpdated() {\n    this.cameraEls.forEach(el => delete el.components[\"camera-tool\"].onAvatarUpdated());\n  },\n\n  getMyCamera() {\n    if (this.myCamera !== undefined) return this.myCamera;\n    this.myCamera = this.cameraEls.find(NAF.utils.isMine) || null;\n    return this.myCamera;\n  },\n\n  _onOwnershipChange() {\n    this.myCamera = null;\n  }\n});\n","// Wrapper for a worker which accepts work items and responds with results.\n//\n// The worker must receive messages with data of the shape { id, payload }, and then respond\n// with messages containing matching IDs of the shape { id, result, err }.\n//\n// Returns a function that accepts a work item, sends it to the worker, and returns a promise that\n// will resolve with the result or reject with the error.\n//\nexport function promisifyWorker(worker) {\n  let nextItemId = 0;\n  const outstanding = {}; // item ID: { resolve, reject }\n\n  worker.onmessage = msg => {\n    const { id, result, err } = msg.data;\n    const handlers = outstanding[id];\n    if (handlers == null) {\n      console.error(`Unknown message with ID ${id} received from ${worker}.`);\n    } else {\n      delete outstanding[id];\n      if (err != null) {\n        handlers.reject(new Error(err));\n      } else {\n        handlers.resolve(result);\n      }\n    }\n  };\n\n  return function(data, transfer) {\n    const id = nextItemId++;\n    const promise = new Promise((resolve, reject) => {\n      outstanding[id] = { resolve, reject };\n    });\n    worker.postMessage({ id, payload: data }, transfer);\n    return promise;\n  };\n}\n","export const waitForDOMContentLoaded = function() {\n  if (document.readyState === \"complete\" || document.readyState === \"loaded\" || document.readyState === \"interactive\") {\n    return Promise.resolve(null);\n  } else {\n    return new Promise(resolve => {\n      window.addEventListener(\"DOMContentLoaded\", resolve);\n    });\n  }\n};\n\nexport const waitForEvent = function(eventName, eventObj) {\n  return new Promise(resolve => {\n    eventObj.addEventListener(eventName, resolve, { once: true });\n  });\n};\n","/* global AFRAME NAF performance */\nAFRAME.registerComponent(\"owned-object-limiter\", {\n  schema: {\n    counter: { type: \"selector\" }\n  },\n\n  init() {\n    this.counter = this.data.counter.components[\"networked-counter\"];\n  },\n\n  tick() {\n    this._syncCounterRegistration();\n    const isHeld = this.el.sceneEl.systems.interaction.isHeld(this.el);\n    if (!isHeld && this.wasHeld && this.counter.timestamps.has(this.el)) {\n      this.counter.timestamps.set(this.el, performance.now());\n    }\n    this.wasHeld = isHeld;\n  },\n\n  remove() {\n    this.counter.deregister(this.el);\n  },\n\n  _syncCounterRegistration() {\n    if (!this.el.components[\"networked\"]) return;\n\n    const isPinned = this.el.components[\"pinnable\"] && this.el.components[\"pinnable\"].data.pinned;\n\n    if (NAF.utils.isMine(this.el) && !isPinned) {\n      this.counter.register(this.el);\n    } else {\n      this.counter.deregister(this.el);\n    }\n  }\n});\n","/* global NAF */\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nAFRAME.registerComponent(\"set-unowned-body-kinematic\", {\n  init() {\n    this.setBodyKinematic = this.setBodyKinematic.bind(this);\n  },\n  play() {\n    this.el.addEventListener(\"ownership-lost\", this.setBodyKinematic);\n\n    if (!this.didThisOnce) {\n      // Do this in play instead of init so that the ammo-body and networked components are done\n      this.didThisOnce = true;\n\n      if (!NAF.utils.isMine(this.el)) {\n        this.setBodyKinematic();\n      }\n    }\n  },\n  pause() {\n    this.el.removeEventListener(\"ownership-lost\", this.setBodyKinematic);\n  },\n  setBodyKinematic() {\n    this.el.setAttribute(\"ammo-body\", {\n      type: \"kinematic\",\n      collisionFilterMask: COLLISION_LAYERS.UNOWNED_INTERACTABLE\n    });\n    if (this.el.components[\"floaty-object\"]) {\n      this.el.components[\"floaty-object\"].locked = true;\n    }\n  }\n});\n","/* global AFRAME performance */\n/**\n * Limits networked interactables to a maximum number at any given time\n * @namespace network\n * @component networked-counter\n */\nAFRAME.registerComponent(\"networked-counter\", {\n  schema: {\n    max: { default: 3 }\n  },\n\n  init() {\n    this.timestamps = new Map();\n    this.el.object3D.visible = false;\n  },\n\n  remove() {\n    this.timestamps.clear();\n  },\n\n  count() {\n    return this.timestamps.size;\n  },\n\n  register(el) {\n    if (this.data.max <= 0 || this.timestamps.has(el)) return;\n\n    this.timestamps.set(el, performance.now());\n    if (this.timestamps.size > this.data.max) {\n      this._destroyOldest();\n    }\n  },\n\n  deregister(el) {\n    if (!this.timestamps.has(el)) return;\n    this.timestamps.delete(el);\n  },\n\n  _destroyOldest() {\n    const interaction = this.el.sceneEl.systems.interaction;\n    let oldestEl = null,\n      minTs = Number.MAX_VALUE;\n    this.timestamps.forEach((ts, el) => {\n      if (ts < minTs && !interaction.isHeld(el) && NAF.utils.isMine(el)) {\n        oldestEl = el;\n        minTs = ts;\n      }\n    });\n    this._destroy(oldestEl);\n  },\n\n  _destroy(el) {\n    // Pause the entity so that it won't just re-register itself immediately in owned-object-limiter.\n    el.pause();\n    // networked-interactable's remove will also call deregister, but it will happen async so we do it here as well.\n    this.deregister(el);\n    el.parentNode.removeChild(el);\n  }\n});\n","AFRAME.registerComponent(\"set-yxz-order\", {\n  init: function() {\n    this.el.object3D.rotation.order = \"YXZ\";\n  }\n});\n","/**\n * Initializes teleporters when the environment bundle has loaded.\n * @namespace environment\n * @component nav-mesh-helper\n */\nAFRAME.registerComponent(\"nav-mesh-helper\", {\n  init: function() {\n    this.el.addEventListener(\"model-loaded\", () => {\n      const teleporters = document.querySelectorAll(\"[teleporter]\");\n      for (let i = 0; i < teleporters.length; i++) {\n        teleporters[i].components[\"teleporter\"].queryCollisionEntities();\n      }\n    });\n  }\n});\n","/**\n * Drawing Manager\n * Manages what networked-drawings are available to pen components\n * @namespace drawing\n * @component drawing-manager\n */\nAFRAME.registerComponent(\"drawing-manager\", {\n  init() {\n    this._onComponentInitialized = this._onComponentInitialized.bind(this);\n\n    this.el.object3D.visible = false;\n    this.drawingToPen = new Map();\n  },\n\n  remove() {\n    if (this.drawingEl) {\n      this.drawingEl.removeEventListener(\"componentinitialized\", this._onComponentInitialized);\n    }\n  },\n\n  _onComponentInitialized(e) {\n    if (e.detail.name == \"networked-drawing\") {\n      this.drawing = this.drawingEl.components[\"networked-drawing\"];\n    }\n  },\n\n  createDrawing() {\n    if (!this.drawingEl) {\n      this.drawingEl = document.createElement(\"a-entity\");\n      this.drawingEl.setAttribute(\"networked\", \"template: #interactable-drawing\");\n      this.el.sceneEl.appendChild(this.drawingEl);\n\n      this.drawingEl.addEventListener(\"componentinitialized\", this._onComponentInitialized);\n    }\n  },\n\n  getDrawing(pen) {\n    //TODO: future handling of multiple drawings\n    if (this.drawing && (!this.drawingToPen.has(this.drawing) || this.drawingToPen.get(this.drawing) === pen)) {\n      this.drawingToPen.set(this.drawing, pen);\n      return this.drawing;\n    }\n\n    return null;\n  },\n\n  returnDrawing(pen) {\n    if (this.drawingToPen.has(this.drawing) && this.drawingToPen.get(this.drawing) === pen) {\n      this.drawingToPen.delete(this.drawing);\n    }\n  }\n});\n","import { SOUND_TOGGLE_MIC } from \"../systems/sound-effects-system\";\n\nconst bindAllEvents = function(elements, events, f) {\n  if (!elements || !elements.length) return;\n  for (const el of elements) {\n    events.length &&\n      events.forEach(e => {\n        el.addEventListener(e, f);\n      });\n  }\n};\nconst unbindAllEvents = function(elements, events, f) {\n  if (!elements || !elements.length) return;\n  for (const el of elements) {\n    events.length &&\n      events.forEach(e => {\n        el.removeEventListener(e, f);\n      });\n  }\n};\n\n/**\n * Toggles the microphone on the current network connection based on the given events.\n * @namespace network\n * @component mute-mic\n */\nAFRAME.registerComponent(\"mute-mic\", {\n  schema: {\n    eventSrc: { type: \"selectorAll\" },\n    toggleEvents: { type: \"array\" },\n    muteEvents: { type: \"array\" },\n    unmuteEvents: { type: \"array\" }\n  },\n  init: function() {\n    this.onToggle = this.onToggle.bind(this);\n    this.onMute = this.onMute.bind(this);\n    this.onUnmute = this.onUnmute.bind(this);\n  },\n\n  play: function() {\n    const { eventSrc, toggleEvents, muteEvents, unmuteEvents } = this.data;\n    bindAllEvents(eventSrc, toggleEvents, this.onToggle);\n    bindAllEvents(eventSrc, muteEvents, this.onMute);\n    bindAllEvents(eventSrc, unmuteEvents, this.onUnmute);\n  },\n\n  pause: function() {\n    const { eventSrc, toggleEvents, muteEvents, unmuteEvents } = this.data;\n    unbindAllEvents(eventSrc, toggleEvents, this.onToggle);\n    unbindAllEvents(eventSrc, muteEvents, this.onMute);\n    unbindAllEvents(eventSrc, unmuteEvents, this.onUnmute);\n  },\n\n  onToggle: function() {\n    if (!NAF.connection.adapter) return;\n    if (!this.el.sceneEl.is(\"entered\")) return;\n\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_TOGGLE_MIC);\n    if (this.el.is(\"muted\")) {\n      NAF.connection.adapter.enableMicrophone(true);\n      this.el.removeState(\"muted\");\n    } else {\n      NAF.connection.adapter.enableMicrophone(false);\n      this.el.addState(\"muted\");\n    }\n  },\n\n  onMute: function() {\n    if (!NAF.connection.adapter) return;\n    if (!this.el.is(\"muted\")) {\n      NAF.connection.adapter.enableMicrophone(false);\n      this.el.addState(\"muted\");\n    }\n  },\n\n  onUnmute: function() {\n    if (this.el.is(\"muted\")) {\n      NAF.connection.adapter.enableMicrophone(true);\n      this.el.removeState(\"muted\");\n    }\n  }\n});\n","import { SOUND_SPAWN_PEN } from \"../systems/sound-effects-system\";\n/**\n * HUD panel for muting, freezing, and space bubble controls.\n * @namespace ui\n * @component in-world-hud\n */\nAFRAME.registerComponent(\"in-world-hud\", {\n  init() {\n    this.mic = this.el.querySelector(\".mic\");\n    this.spawn = this.el.querySelector(\".spawn\");\n    this.pen = this.el.querySelector(\".penhud\");\n    this.cameraBtn = this.el.querySelector(\".camera-btn\");\n    this.inviteBtn = this.el.querySelector(\".invite-btn\");\n    this.background = this.el.querySelector(\".bg\");\n\n    this.updateButtonStates = () => {\n      this.mic.setAttribute(\"icon-button\", \"active\", this.el.sceneEl.is(\"muted\"));\n      this.pen.setAttribute(\"icon-button\", \"active\", this.el.sceneEl.is(\"pen\"));\n      this.cameraBtn.setAttribute(\"icon-button\", \"active\", this.el.sceneEl.is(\"camera\"));\n    };\n    this.updateButtonStates();\n\n    this.onStateChange = evt => {\n      if (!(evt.detail === \"muted\" || evt.detail === \"frozen\" || evt.detail === \"pen\" || evt.detail === \"camera\"))\n        return;\n      this.updateButtonStates();\n    };\n\n    this.onMicClick = () => {\n      this.el.emit(\"action_mute\");\n    };\n\n    this.onSpawnClick = () => {\n      this.el.emit(\"action_spawn\");\n    };\n\n    this.onPenClick = () => {\n      this.el.emit(\"spawn_pen\");\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SPAWN_PEN);\n    };\n\n    this.onCameraClick = () => {\n      this.el.emit(\"action_toggle_camera\");\n    };\n\n    this.onInviteClick = () => {\n      this.el.emit(\"action_invite\");\n    };\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateChange);\n\n    this.mic.object3D.addEventListener(\"interact\", this.onMicClick);\n    this.spawn.object3D.addEventListener(\"interact\", this.onSpawnClick);\n    this.pen.object3D.addEventListener(\"interact\", this.onPenClick);\n    this.cameraBtn.object3D.addEventListener(\"interact\", this.onCameraClick);\n    this.inviteBtn.object3D.addEventListener(\"interact\", this.onInviteClick);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateChange);\n\n    this.mic.object3D.removeEventListener(\"interact\", this.onMicClick);\n    this.spawn.object3D.removeEventListener(\"interact\", this.onSpawnClick);\n    this.pen.object3D.removeEventListener(\"interact\", this.onPenClick);\n    this.cameraBtn.object3D.removeEventListener(\"interact\", this.onCameraClick);\n    this.inviteBtn.object3D.removeEventListener(\"interact\", this.onInviteClick);\n  }\n});\n","import nipplejs from \"nipplejs\";\nimport styles from \"./virtual-gamepad-controls.css\";\n\n/**\n * Instantiates 2D virtual gamepads and emits associated events.\n * @namespace user-input\n * @component virtual-gamepad-controls\n */\nAFRAME.registerComponent(\"virtual-gamepad-controls\", {\n  schema: {},\n\n  init() {\n    this.onEnterVr = this.onEnterVr.bind(this);\n    this.onExitVr = this.onExitVr.bind(this);\n    this.onFirstInteraction = this.onFirstInteraction.bind(this);\n    this.onMoveJoystickChanged = this.onMoveJoystickChanged.bind(this);\n    this.onMoveJoystickEnd = this.onMoveJoystickEnd.bind(this);\n    this.onLookJoystickChanged = this.onLookJoystickChanged.bind(this);\n    this.onLookJoystickEnd = this.onLookJoystickEnd.bind(this);\n\n    this.mockJoystickContainer = document.createElement(\"div\");\n    this.mockJoystickContainer.classList.add(styles.mockJoystickContainer);\n    const leftMock = document.createElement(\"div\");\n    leftMock.classList.add(styles.mockJoystick);\n    const leftMockSmall = document.createElement(\"div\");\n    leftMockSmall.classList.add(styles.mockJoystick, styles.inner);\n    leftMock.appendChild(leftMockSmall);\n    this.mockJoystickContainer.appendChild(leftMock);\n    const rightMock = document.createElement(\"div\");\n    rightMock.classList.add(styles.mockJoystick);\n    const rightMockSmall = document.createElement(\"div\");\n    rightMockSmall.classList.add(styles.mockJoystick, styles.inner);\n    rightMock.appendChild(rightMockSmall);\n    this.mockJoystickContainer.appendChild(rightMock);\n    document.body.appendChild(this.mockJoystickContainer);\n\n    // Setup gamepad elements\n    const leftTouchZone = document.createElement(\"div\");\n    leftTouchZone.classList.add(styles.touchZone, styles.left);\n    document.body.appendChild(leftTouchZone);\n\n    this.leftTouchZone = leftTouchZone;\n\n    this.leftStick = nipplejs.create({\n      zone: this.leftTouchZone,\n      color: \"white\",\n      fadeTime: 0\n    });\n\n    this.leftStick.on(\"start\", this.onFirstInteraction);\n    this.leftStick.on(\"move\", this.onMoveJoystickChanged);\n    this.leftStick.on(\"end\", this.onMoveJoystickEnd);\n\n    const rightTouchZone = document.createElement(\"div\");\n    rightTouchZone.classList.add(styles.touchZone, styles.right);\n    document.body.appendChild(rightTouchZone);\n\n    this.rightTouchZone = rightTouchZone;\n\n    this.rightStick = nipplejs.create({\n      zone: this.rightTouchZone,\n      color: \"white\",\n      fadeTime: 0\n    });\n\n    this.rightStick.on(\"start\", this.onFirstInteraction);\n    this.rightStick.on(\"move\", this.onLookJoystickChanged);\n    this.rightStick.on(\"end\", this.onLookJoystickEnd);\n\n    this.inVr = false;\n    this.moving = false;\n    this.rotating = false;\n\n    this.moveEvent = {\n      axis: [0, 0]\n    };\n    this.rotateYEvent = {\n      value: 0\n    };\n    this.rotateXEvent = {\n      value: 0\n    };\n\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.onEnterVr);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.onExitVr);\n  },\n\n  onFirstInteraction() {\n    this.leftStick.off(\"start\", this.onFirstInteraction);\n    this.rightStick.off(\"start\", this.onFirstInteraction);\n    document.body.removeChild(this.mockJoystickContainer);\n  },\n\n  onMoveJoystickChanged(event, joystick) {\n    const angle = joystick.angle.radian;\n    const force = joystick.force < 1 ? joystick.force : 1;\n    const moveStrength = 1.85;\n    const x = Math.cos(angle) * force * moveStrength;\n    const z = Math.sin(angle) * force * moveStrength;\n    this.moving = true;\n    this.moveEvent.axis[0] = x;\n    this.moveEvent.axis[1] = z;\n  },\n\n  onMoveJoystickEnd() {\n    this.moving = false;\n    this.moveEvent.axis[0] = 0;\n    this.moveEvent.axis[1] = 0;\n    this.el.sceneEl.emit(\"move\", this.moveEvent);\n  },\n\n  onLookJoystickChanged(event, joystick) {\n    // Set pitch and yaw angles on right stick move\n    const angle = joystick.angle.radian;\n    const force = joystick.force < 1 ? joystick.force : 1;\n    const turnStrength = 0.5;\n    this.rotating = true;\n    this.rotateYEvent.value = Math.cos(angle) * force * turnStrength;\n    this.rotateXEvent.value = Math.sin(angle) * force * turnStrength;\n  },\n\n  onLookJoystickEnd() {\n    this.rotating = false;\n    this.rotateYEvent.value = 0;\n    this.rotateXEvent.value = 0;\n    this.el.sceneEl.emit(\"rotateY\", this.rotateYEvent);\n    this.el.sceneEl.emit(\"rotateX\", this.rotateXEvent);\n  },\n\n  tick() {\n    if (!this.inVr) {\n      if (this.moving) {\n        this.el.sceneEl.emit(\"move\", this.moveEvent);\n      }\n\n      if (this.rotating) {\n        this.el.sceneEl.emit(\"rotateY\", this.rotateYEvent);\n        this.el.sceneEl.emit(\"rotateX\", this.rotateXEvent);\n      }\n    }\n  },\n\n  onEnterVr() {\n    // Hide the joystick controls\n    this.inVr = true;\n    this.leftTouchZone.style.display = \"none\";\n    this.rightTouchZone.style.display = \"none\";\n  },\n\n  onExitVr() {\n    // Show the joystick controls\n    this.inVr = false;\n    this.leftTouchZone.style.display = \"block\";\n    this.rightTouchZone.style.display = \"block\";\n  },\n\n  remove() {\n    this.el.sceneEl.removeEventListener(\"entervr\", this.onEnterVr);\n    this.el.sceneEl.removeEventListener(\"exitvr\", this.onExitVr);\n    document.body.removeChild(this.mockJoystickContainer);\n    document.body.removeChild(this.leftTouchZone);\n    document.body.removeChild(this.rightTouchZone);\n  }\n});\n","const { Vector3, Quaternion, Matrix4, Euler } = THREE;\n\nimport { AVATAR_TYPES } from \"../utils/avatar-utils\";\n\nfunction quaternionAlmostEquals(epsilon, u, v) {\n  // Note: q and -q represent same rotation\n  return (\n    (Math.abs(u.x - v.x) < epsilon &&\n      Math.abs(u.y - v.y) < epsilon &&\n      Math.abs(u.z - v.z) < epsilon &&\n      Math.abs(u.w - v.w) < epsilon) ||\n    (Math.abs(-u.x - v.x) < epsilon &&\n      Math.abs(-u.y - v.y) < epsilon &&\n      Math.abs(-u.z - v.z) < epsilon &&\n      Math.abs(-u.w - v.w) < epsilon)\n  );\n}\n\n/**\n * Provides access to the end effectors for IK.\n * @namespace avatar\n * @component ik-root\n */\nAFRAME.registerComponent(\"ik-root\", {\n  schema: {\n    camera: { type: \"string\", default: \".camera\" },\n    leftController: { type: \"string\", default: \".left-controller\" },\n    rightController: { type: \"string\", default: \".right-controller\" }\n  },\n  update(oldData) {\n    if (this.data.camera !== oldData.camera) {\n      this.camera = this.el.querySelector(this.data.camera);\n    }\n\n    if (this.data.leftController !== oldData.leftController) {\n      this.leftController = this.el.querySelector(this.data.leftController);\n    }\n\n    if (this.data.rightController !== oldData.rightController) {\n      this.rightController = this.el.querySelector(this.data.rightController);\n    }\n  }\n});\n\nfunction findIKRoot(entity) {\n  while (entity && !(entity.components && entity.components[\"ik-root\"])) {\n    entity = entity.parentNode;\n  }\n  return entity && entity.components[\"ik-root\"];\n}\n\nconst LEGACY_HAND_ROTATIONS = {\n  left: new Matrix4().makeRotationFromEuler(new Euler(-Math.PI / 2, Math.PI / 2, 0)),\n  right: new Matrix4().makeRotationFromEuler(new Euler(Math.PI / 2, Math.PI / 2, 0))\n};\n\nconst HAND_ROTATIONS = {\n  left: new Matrix4().makeRotationFromEuler(new Euler(-Math.PI / 2, Math.PI / 2, 0)),\n  right: new Matrix4().makeRotationFromEuler(new Euler(-Math.PI / 2, -Math.PI / 2, 0))\n};\n\n/**\n * Performs IK on a hip-rooted skeleton to align the hip, head and hands with camera and controller inputs.\n * @namespace avatar\n * @component ik-controller\n */\nAFRAME.registerComponent(\"ik-controller\", {\n  schema: {\n    leftEye: { type: \"string\", default: \"LeftEye\" },\n    rightEye: { type: \"string\", default: \"RightEye\" },\n    head: { type: \"string\", default: \"Head\" },\n    neck: { type: \"string\", default: \"Neck\" },\n    leftHand: { type: \"string\", default: \"LeftHand\" },\n    rightHand: { type: \"string\", default: \"RightHand\" },\n    chest: { type: \"string\", default: \"Spine\" },\n    hips: { type: \"string\", default: \"Hips\" },\n    rotationSpeed: { default: 5 },\n    alwaysUpdate: { type: \"boolean\", default: false }\n  },\n\n  init() {\n    this._runScheduledWork = this._runScheduledWork.bind(this);\n    this._updateIsInView = this._updateIsInView.bind(this);\n\n    this.flipY = new Matrix4().makeRotationY(Math.PI);\n\n    this.cameraForward = new Matrix4();\n    this.headTransform = new Matrix4();\n    this.hipsPosition = new Vector3();\n\n    this.invHipsToHeadVector = new Vector3();\n\n    this.middleEyeMatrix = new Matrix4();\n    this.middleEyePosition = new Vector3();\n    this.invMiddleEyeToHead = new Matrix4();\n\n    this.cameraYRotation = new Euler();\n    this.cameraYQuaternion = new Quaternion();\n\n    this.invHipsQuaternion = new Quaternion();\n    this.headQuaternion = new Quaternion();\n\n    this.rootToChest = new Matrix4();\n    this.invRootToChest = new Matrix4();\n\n    this.ikRoot = findIKRoot(this.el);\n\n    this.isInView = true;\n    this.hasConvergedHips = false;\n    this.lastCameraTransform = new THREE.Matrix4();\n    this.cameraMirrorSystem = this.el.sceneEl.systems[\"camera-mirror\"];\n    this.playerCamera = document.querySelector(\"#player-camera\").getObject3D(\"camera\");\n\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._runScheduledWork, \"ik\");\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._runScheduledWork, \"ik\");\n  },\n\n  update(oldData) {\n    if (this.data.leftEye !== oldData.leftEye) {\n      this.leftEye = this.el.object3D.getObjectByName(this.data.leftEye);\n    }\n\n    if (this.data.rightEye !== oldData.rightEye) {\n      this.rightEye = this.el.object3D.getObjectByName(this.data.rightEye);\n    }\n\n    if (this.data.head !== oldData.head) {\n      this.head = this.el.object3D.getObjectByName(this.data.head);\n    }\n\n    if (this.data.neck !== oldData.neck) {\n      this.neck = this.el.object3D.getObjectByName(this.data.neck);\n    }\n\n    if (this.data.leftHand !== oldData.leftHand) {\n      this.leftHand = this.el.object3D.getObjectByName(this.data.leftHand);\n    }\n\n    if (this.data.rightHand !== oldData.rightHand) {\n      this.rightHand = this.el.object3D.getObjectByName(this.data.rightHand);\n    }\n\n    if (this.data.chest !== oldData.chest) {\n      this.chest = this.el.object3D.getObjectByName(this.data.chest);\n    }\n\n    if (this.data.hips !== oldData.hips) {\n      this.hips = this.el.object3D.getObjectByName(this.data.hips);\n    }\n\n    // Set middleEye's position to be right in the middle of the left and right eyes.\n    this.middleEyePosition.addVectors(this.leftEye.position, this.rightEye.position);\n    this.middleEyePosition.divideScalar(2);\n    this.middleEyeMatrix.makeTranslation(this.middleEyePosition.x, this.middleEyePosition.y, this.middleEyePosition.z);\n    this.invMiddleEyeToHead = this.middleEyeMatrix.getInverse(this.middleEyeMatrix);\n\n    this.invHipsToHeadVector\n      .addVectors(this.chest.position, this.neck.position)\n      .add(this.head.position)\n      .negate();\n  },\n\n  tick(time, dt) {\n    if (!this.ikRoot) {\n      return;\n    }\n\n    const root = this.ikRoot.el.object3D;\n    const { camera, leftController, rightController } = this.ikRoot;\n\n    camera.object3D.updateMatrix();\n\n    const hasNewCameraTransform = !this.lastCameraTransform.equals(camera.object3D.matrix);\n\n    // Optimization: if the camera hasn't moved and the hips converged to the target orientation on a previous frame,\n    // then the avatar does not need any IK this frame.\n    //\n    // Update in-view avatars every frame, and update out-of-view avatars via frame scheduler.\n    if (\n      this.data.alwaysUpdate ||\n      this.forceIkUpdate ||\n      (this.isInView && (hasNewCameraTransform || !this.hasConvergedHips))\n    ) {\n      if (hasNewCameraTransform) {\n        this.lastCameraTransform.copy(camera.object3D.matrix);\n      }\n\n      const {\n        hips,\n        head,\n        neck,\n        chest,\n        cameraForward,\n        headTransform,\n        invMiddleEyeToHead,\n        invHipsToHeadVector,\n        flipY,\n        cameraYRotation,\n        cameraYQuaternion,\n        invHipsQuaternion,\n        rootToChest,\n        invRootToChest\n      } = this;\n\n      // Camera faces the -Z direction. Flip it along the Y axis so that it is +Z.\n      cameraForward.multiplyMatrices(camera.object3D.matrix, flipY);\n\n      // Compute the head position such that the hmd position would be in line with the middleEye\n      headTransform.multiplyMatrices(cameraForward, invMiddleEyeToHead);\n\n      // Then position the hips such that the head is aligned with headTransform\n      // (which positions middleEye in line with the hmd)\n      hips.position.setFromMatrixPosition(headTransform).add(invHipsToHeadVector);\n\n      // Animate the hip rotation to follow the Y rotation of the camera with some damping.\n      cameraYRotation.setFromRotationMatrix(cameraForward, \"YXZ\");\n      cameraYRotation.x = 0;\n      cameraYRotation.z = 0;\n      cameraYQuaternion.setFromEuler(cameraYRotation);\n      Quaternion.slerp(hips.quaternion, cameraYQuaternion, hips.quaternion, (this.data.rotationSpeed * dt) / 1000);\n\n      this.hasConvergedHips = quaternionAlmostEquals(0.0001, cameraYQuaternion, hips.quaternion);\n\n      // Take the head orientation computed from the hmd, remove the Y rotation already applied to it by the hips,\n      // and apply it to the head\n      invHipsQuaternion.copy(hips.quaternion).inverse();\n      head.quaternion.setFromRotationMatrix(headTransform).premultiply(invHipsQuaternion);\n\n      hips.updateMatrix();\n      rootToChest.multiplyMatrices(hips.matrix, chest.matrix);\n      invRootToChest.getInverse(rootToChest);\n\n      root.matrixNeedsUpdate = true;\n      neck.matrixNeedsUpdate = true;\n      head.matrixNeedsUpdate = true;\n      chest.matrixNeedsUpdate = true;\n    }\n\n    const { leftHand, rightHand } = this;\n\n    const handRotations =\n      this.ikRoot.el.components[\"player-info\"].data.avatarType === AVATAR_TYPES.LEGACY\n        ? LEGACY_HAND_ROTATIONS\n        : HAND_ROTATIONS;\n    if (leftHand) this.updateHand(handRotations.left, leftHand, leftController.object3D, true, this.isInView);\n    if (rightHand) this.updateHand(handRotations.right, rightHand, rightController.object3D, false, this.isInView);\n    this.forceIkUpdate = false;\n  },\n\n  updateHand(handRotation, handObject3D, controllerObject3D, isLeft, isInView) {\n    const handMatrix = handObject3D.matrix;\n\n    // TODO: This coupling with personal-space-invader is not ideal.\n    // There should be some intermediate thing managing multiple opinions about object visibility\n    const spaceInvader = handObject3D.el.components[\"personal-space-invader\"];\n    const handHiddenByPersonalSpace = spaceInvader && spaceInvader.invading;\n\n    handObject3D.visible = !handHiddenByPersonalSpace && controllerObject3D.visible;\n\n    // Optimization: skip IK update if not in view and not forced by frame scheduler\n    if (controllerObject3D.visible && (isInView || this.forceIkUpdate || this.data.alwaysUpdate)) {\n      handMatrix.multiplyMatrices(this.invRootToChest, controllerObject3D.matrix);\n\n      handMatrix.multiply(handRotation);\n\n      handObject3D.position.setFromMatrixPosition(handMatrix);\n      handObject3D.rotation.setFromRotationMatrix(handMatrix);\n      handObject3D.matrixNeedsUpdate = true;\n    }\n  },\n\n  _runScheduledWork() {\n    // Every scheduled run, we force an IK update on the next frame (so at most one avatar with forced IK per frame)\n    // and also update the this.isInView bit on the avatar which is used to determine if an IK update should be run\n    // every frame.\n    this.forceIkUpdate = true;\n\n    this._updateIsInView();\n  },\n\n  _updateIsInView: (function() {\n    const frustum = new THREE.Frustum();\n    const frustumMatrix = new THREE.Matrix4();\n    const cameraWorld = new THREE.Vector3();\n    const isInViewOfCamera = (screenCamera, pos) => {\n      frustumMatrix.multiplyMatrices(screenCamera.projectionMatrix, screenCamera.matrixWorldInverse);\n      frustum.setFromMatrix(frustumMatrix);\n      return frustum.containsPoint(pos);\n    };\n\n    return function() {\n      // Take into account the mirror camera if it is enabled.\n      const mirrorCamera = this.cameraMirrorSystem.mirrorCamera;\n\n      const camera = this.ikRoot.camera.object3D;\n      camera.getWorldPosition(cameraWorld);\n\n      this.isInView =\n        isInViewOfCamera(this.playerCamera, cameraWorld) ||\n        (mirrorCamera && isInViewOfCamera(mirrorCamera, cameraWorld));\n    };\n  })()\n});\n","import { paths } from \"../systems/userinput/paths\";\n\nconst POSES = {\n  open: \"open\",\n  point: \"point\",\n  fist: \"fist\",\n  hold: \"hold\",\n  thumbUp: \"thumbUp\",\n  thumbDown: \"thumbDown\",\n  indexDown: \"indexDown\",\n  pinch: \"pinch\",\n  mrpDown: \"mrpDown\"\n};\n\n/**\n * Emits events indicating that avatar hands should be posed differently.\n * @namespace user-input\n * @component hand-controls2\n */\nAFRAME.registerComponent(\"hand-controls2\", {\n  schema: { default: \"left\" },\n\n  init() {\n    this.pose = POSES.open;\n  },\n\n  poseForFingers(thumb, index, middleRingPinky) {\n    if (!thumb && !index && !middleRingPinky) {\n      return POSES.open;\n    } else if (thumb && index && middleRingPinky) {\n      return POSES.fist;\n    } else if (!thumb && index && middleRingPinky) {\n      return POSES.thumbUp;\n    } else if (!thumb && !index && middleRingPinky) {\n      return POSES.mrpDown;\n    } else if (!thumb && index && !middleRingPinky) {\n      return POSES.indexDown;\n    } else if (thumb && !index && !middleRingPinky) {\n      return POSES.thumbDown;\n    } else if (thumb && index && !middleRingPinky) {\n      return POSES.pinch;\n    } else if (thumb && !index && middleRingPinky) {\n      return POSES.point;\n    }\n\n    console.warn(`Did not find matching pose for thumb ${thumb}, index ${index}, middleRingPinky ${middleRingPinky}`);\n    return POSES.open;\n  },\n\n  tick() {\n    const hand = this.data;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const subpath = hand === \"left\" ? paths.actions.leftHand : paths.actions.rightHand;\n    const thumb = userinput.get(subpath.thumb);\n    const index = userinput.get(subpath.index);\n    const middleRingPinky = userinput.get(subpath.middleRingPinky);\n    const pose = this.poseForFingers(thumb, index, middleRingPinky);\n    if (pose !== this.pose) {\n      this.el.emit(\"hand-pose\", { previous: this.pose, current: pose });\n      this.pose = pose;\n    }\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\nimport { SOUND_SNAP_ROTATE } from \"../systems/sound-effects-system\";\nconst CLAMP_VELOCITY = 0.01;\nconst MAX_DELTA = 0.2;\nconst EPS = 10e-6;\nconst MAX_WARNINGS = 10;\n\nconst NAV_ZONE = \"character\";\n\n/**\n * Avatar movement controller that listens to move, rotate and teleportation events and moves the avatar accordingly.\n * The controller accounts for playspace offset and orientation and depends on the nav mesh system for translation.\n * @namespace avatar\n * @component character-controller\n */\nAFRAME.registerComponent(\"character-controller\", {\n  schema: {\n    groundAcc: { default: 5.5 },\n    easing: { default: 10 },\n    pivot: { type: \"selector\" },\n    snapRotationDegrees: { default: THREE.Math.DEG2RAD * 45 },\n    rotationSpeed: { default: -3 },\n    fly: { default: false }\n  },\n\n  init: function() {\n    this.navGroup = null;\n    this.navNode = null;\n    this.velocity = new THREE.Vector3(0, 0, 0);\n    this.accelerationInput = new THREE.Vector3(0, 0, 0);\n    this.pendingSnapRotationMatrix = new THREE.Matrix4();\n    this.angularVelocity = 0; // Scalar value because we only allow rotation around Y\n    this._withinWarningLimit = true;\n    this._warningCount = 0;\n    this.setAccelerationInput = this.setAccelerationInput.bind(this);\n    this.snapRotateLeft = this.snapRotateLeft.bind(this);\n    this.snapRotateRight = this.snapRotateRight.bind(this);\n    this.setAngularVelocity = this.setAngularVelocity.bind(this);\n    this.el.sceneEl.addEventListener(\"nav-mesh-loaded\", () => {\n      this.navGroup = null;\n      this.navNode = null;\n    });\n  },\n\n  update: function() {\n    this.leftRotationMatrix = new THREE.Matrix4().makeRotationY(this.data.snapRotationDegrees);\n    this.rightRotationMatrix = new THREE.Matrix4().makeRotationY(-this.data.snapRotationDegrees);\n  },\n\n  play: function() {\n    const eventSrc = this.el.sceneEl;\n    eventSrc.addEventListener(\"move\", this.setAccelerationInput);\n    eventSrc.addEventListener(\"rotateY\", this.setAngularVelocity);\n  },\n\n  pause: function() {\n    const eventSrc = this.el.sceneEl;\n    eventSrc.removeEventListener(\"move\", this.setAccelerationInput);\n    eventSrc.removeEventListener(\"rotateY\", this.setAngularVelocity);\n    this.reset();\n  },\n\n  reset() {\n    this.accelerationInput.set(0, 0, 0);\n    this.velocity.set(0, 0, 0);\n    this.angularVelocity = 0;\n    this.pendingSnapRotationMatrix.identity();\n  },\n\n  setAccelerationInput: function(event) {\n    const axes = event.detail.axis;\n    this.accelerationInput.set(axes[0], 0, axes[1]);\n  },\n\n  setAngularVelocity: function(event) {\n    this.angularVelocity = event.detail.value;\n  },\n\n  snapRotateLeft: function() {\n    this.pendingSnapRotationMatrix.copy(this.leftRotationMatrix);\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SNAP_ROTATE);\n  },\n\n  snapRotateRight: function() {\n    this.pendingSnapRotationMatrix.copy(this.rightRotationMatrix);\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SNAP_ROTATE);\n  },\n\n  // We assume the rig is at the root, and its local position === its world position.\n  teleportTo: (function() {\n    const rig = new THREE.Vector3();\n    const head = new THREE.Vector3();\n    const deltaFromHeadToTargetForHead = new THREE.Vector3();\n    const targetForHead = new THREE.Vector3();\n    const targetForRig = new THREE.Vector3();\n    return function teleportTo(targetWorldPosition) {\n      const o = this.el.object3D;\n      o.getWorldPosition(rig);\n      this.data.pivot.object3D.getWorldPosition(head);\n      targetForHead.copy(targetWorldPosition);\n      targetForHead.y += this.data.pivot.object3D.position.y;\n      deltaFromHeadToTargetForHead.copy(targetForHead).sub(head);\n      targetForRig.copy(rig).add(deltaFromHeadToTargetForHead);\n\n      const pathfinder = this.el.sceneEl.systems.nav.pathfinder;\n      this.navGroup = pathfinder.getGroup(NAV_ZONE, targetForRig, true, true);\n      this.navNode = null;\n      this._setNavNode(targetForRig);\n      pathfinder.clampStep(rig, targetForRig, this.navNode, NAV_ZONE, this.navGroup, o.position);\n      o.matrixNeedsUpdate = true;\n    };\n  })(),\n\n  tick: (function() {\n    const move = new THREE.Matrix4();\n    const trans = new THREE.Matrix4();\n    const transInv = new THREE.Matrix4();\n    const pivotPos = new THREE.Vector3();\n    const rotationAxis = new THREE.Vector3(0, 1, 0);\n    const yawMatrix = new THREE.Matrix4();\n    const rotationMatrix = new THREE.Matrix4();\n    const rotationInvMatrix = new THREE.Matrix4();\n    const pivotRotationMatrix = new THREE.Matrix4();\n    const pivotRotationInvMatrix = new THREE.Matrix4();\n    const startPos = new THREE.Vector3();\n    const startScale = new THREE.Vector3();\n\n    return function(t, dt) {\n      if (!this.el.sceneEl.is(\"entered\")) return;\n      const deltaSeconds = dt / 1000;\n      const root = this.el.object3D;\n      const pivot = this.data.pivot.object3D;\n      const distance = this.data.groundAcc * deltaSeconds;\n\n      const userinput = AFRAME.scenes[0].systems.userinput;\n      const userinputAngularVelocity = userinput.get(paths.actions.angularVelocity);\n      if (userinputAngularVelocity !== null && userinputAngularVelocity !== undefined) {\n        this.angularVelocity = userinputAngularVelocity;\n      }\n      const rotationDelta = this.data.rotationSpeed * this.angularVelocity * deltaSeconds;\n\n      pivot.updateMatrices();\n      root.updateMatrices();\n\n      startScale.copy(root.scale);\n      startPos.copy(root.position);\n\n      if (userinput.get(paths.actions.snapRotateLeft)) {\n        this.snapRotateLeft();\n      }\n      if (userinput.get(paths.actions.snapRotateRight)) {\n        this.snapRotateRight();\n      }\n      const acc = userinput.get(paths.actions.characterAcceleration);\n      if (acc) {\n        this.accelerationInput.set(\n          this.accelerationInput.x + acc[0],\n          this.accelerationInput.y + 0,\n          this.accelerationInput.z + acc[1]\n        );\n      }\n\n      pivotPos.copy(pivot.position);\n      pivotPos.applyMatrix4(root.matrix);\n      trans.setPosition(pivotPos);\n      transInv.makeTranslation(-pivotPos.x, -pivotPos.y, -pivotPos.z);\n      rotationMatrix.makeRotationAxis(rotationAxis, root.rotation.y);\n      rotationInvMatrix.makeRotationAxis(rotationAxis, -root.rotation.y);\n      pivotRotationMatrix.makeRotationAxis(rotationAxis, pivot.rotation.y);\n      pivotRotationInvMatrix.makeRotationAxis(rotationAxis, -pivot.rotation.y);\n      this.updateVelocity(deltaSeconds, pivot);\n      this.accelerationInput.set(0, 0, 0);\n\n      const boost = userinput.get(paths.actions.boost) ? 2 : 1;\n      move.makeTranslation(\n        this.velocity.x * distance * boost,\n        this.velocity.y * distance * boost,\n        this.velocity.z * distance * boost\n      );\n      yawMatrix.makeRotationAxis(rotationAxis, rotationDelta);\n\n      // Translate to middle of playspace (player rig)\n      root.matrix.premultiply(transInv);\n      // Zero playspace (player rig) rotation\n      root.matrix.premultiply(rotationInvMatrix);\n      // Zero pivot (camera/head) rotation\n      root.matrix.premultiply(pivotRotationInvMatrix);\n      // Apply joystick translation\n      root.matrix.premultiply(move);\n      // Apply joystick yaw rotation\n      root.matrix.premultiply(yawMatrix);\n      // Apply snap rotation if necessary\n      root.matrix.premultiply(this.pendingSnapRotationMatrix);\n      // Reapply pivot (camera/head) rotation\n      root.matrix.premultiply(pivotRotationMatrix);\n      // Reapply playspace (player rig) rotation\n      root.matrix.premultiply(rotationMatrix);\n      // Reapply playspace (player rig) translation\n      root.matrix.premultiply(trans);\n      // update pos/rot/scale\n      root.matrix.decompose(root.position, root.quaternion, root.scale);\n\n      // TODO: the above matrix trnsfomraitons introduce some floating point errors in scale, this reverts them to\n      // avoid spamming network with fake scale updates\n      root.scale.copy(startScale);\n\n      this.pendingSnapRotationMatrix.identity(); // Revert to identity\n\n      if (this.velocity.lengthSq() > EPS && !this.data.fly) {\n        this.setPositionOnNavMesh(startPos, root.position, root);\n      }\n\n      root.matrixNeedsUpdate = true;\n    };\n  })(),\n\n  _warnWithWarningLimit: function(msg) {\n    if (!this._withinWarningLimit) return;\n    this._warningCount++;\n    if (this._warningCount > MAX_WARNINGS) {\n      this._withinWarningLimit = false;\n      msg = \"Warning count exceeded. Will not log further warnings\";\n    }\n    console.warn(\"character-controller\", msg);\n  },\n\n  _setNavNode: function(pos) {\n    if (this.navNode !== null) return;\n    const { pathfinder } = this.el.sceneEl.systems.nav;\n    this.navNode =\n      pathfinder.getClosestNode(pos, NAV_ZONE, this.navGroup, true) ||\n      pathfinder.getClosestNode(pos, NAV_ZONE, this.navGroup);\n  },\n\n  setPositionOnNavMesh: function(start, end, object3D) {\n    const { pathfinder } = this.el.sceneEl.systems.nav;\n    if (!(NAV_ZONE in pathfinder.zones)) return;\n    if (this.navGroup === null) {\n      this.navGroup = pathfinder.getGroup(NAV_ZONE, end, true, true);\n    }\n    this._setNavNode(end);\n    this.navNode = pathfinder.clampStep(start, end, this.navNode, NAV_ZONE, this.navGroup, object3D.position);\n    object3D.matrixNeedsUpdate = true;\n  },\n\n  updateVelocity: function(dt, pivot) {\n    const data = this.data;\n    const velocity = this.velocity;\n\n    // If FPS too low, reset velocity.\n    if (dt > MAX_DELTA) {\n      velocity.x = 0;\n      velocity.y = 0;\n      velocity.z = 0;\n      return;\n    }\n\n    // Decay velocity.\n    if (velocity.x !== 0) {\n      velocity.x -= velocity.x * data.easing * dt;\n    }\n    if (velocity.y !== 0) {\n      velocity.y -= velocity.y * data.easing * dt;\n    }\n    if (velocity.z !== 0) {\n      velocity.z -= velocity.z * data.easing * dt;\n    }\n\n    const dvx = data.groundAcc * dt * this.accelerationInput.x;\n    const dvz = data.groundAcc * dt * -this.accelerationInput.z;\n    velocity.x += dvx;\n\n    if (this.data.fly) {\n      velocity.y += dvz * -Math.sin(pivot.rotation.x);\n      velocity.z += dvz * Math.cos(pivot.rotation.x);\n    } else {\n      velocity.z += dvz;\n    }\n\n    const decay = 0.7;\n    this.accelerationInput.x = this.accelerationInput.x * decay;\n    this.accelerationInput.z = this.accelerationInput.z * decay;\n\n    if (Math.abs(velocity.x) < CLAMP_VELOCITY) {\n      velocity.x = 0;\n    }\n    if (Math.abs(velocity.y) < CLAMP_VELOCITY) {\n      velocity.y = 0;\n    }\n    if (Math.abs(velocity.z) < CLAMP_VELOCITY) {\n      velocity.z = 0;\n    }\n  }\n});\n","import { injectCustomShaderChunks } from \"../utils/media-utils\";\nimport { AVATAR_TYPES } from \"../utils/avatar-utils\";\nimport { registerComponentInstance } from \"../utils/component-utils\";\nimport { deregisterComponentInstance } from \"../utils/component-utils\";\n\nfunction ensureAvatarNodes(json) {\n  const { nodes } = json;\n  if (!nodes.some(node => node.name === \"Head\")) {\n    // If the avatar model doesn't have a Head node. The user has probably chosen a custom GLB.\n    // So, we need to construct a suitable hierarchy for avatar functionality to work.\n    // We re-parent the original root node to the Head node and set the scene root to a new AvatarRoot.\n\n    // Note: We assume that the first node in the primary scene is the one we care about.\n    const originalRoot = json.scenes[json.scene].nodes[0];\n    nodes.push({ name: \"LeftEye\", extensions: { MOZ_hubs_components: {} } });\n    nodes.push({ name: \"RightEye\", extensions: { MOZ_hubs_components: {} } });\n    nodes.push({\n      name: \"Head\",\n      children: [originalRoot, nodes.length - 1, nodes.length - 2],\n      extensions: { MOZ_hubs_components: { \"scale-audio-feedback\": \"\" } }\n    });\n    nodes.push({ name: \"Neck\", children: [nodes.length - 1] });\n    nodes.push({ name: \"Spine\", children: [nodes.length - 1] });\n    nodes.push({ name: \"Hips\", children: [nodes.length - 1] });\n    nodes.push({ name: \"AvatarRoot\", children: [nodes.length - 1] });\n    json.scenes[json.scene].nodes[0] = nodes.length - 1;\n  }\n  return json;\n}\n\n/**\n * Sets player info state, including avatar choice and display name.\n * @namespace avatar\n * @component player-info\n */\nAFRAME.registerComponent(\"player-info\", {\n  schema: {\n    avatarSrc: { type: \"string\" },\n    avatarType: { type: \"string\", default: AVATAR_TYPES.LEGACY }\n  },\n  init() {\n    this.displayName = null;\n    this.communityIdentifier = null;\n    this.isModerator = false;\n    this.isRecording = false;\n    this.applyProperties = this.applyProperties.bind(this);\n    this.updateDisplayName = this.updateDisplayName.bind(this);\n    this.applyDisplayName = this.applyDisplayName.bind(this);\n    this.handleModelError = this.handleModelError.bind(this);\n\n    this.isLocalPlayerInfo = this.el.id === \"player-rig\";\n    this.playerSessionId = null;\n\n    if (!this.isLocalPlayerInfo) {\n      NAF.utils.getNetworkedEntity(this.el).then(networkedEntity => {\n        this.playerSessionId = NAF.utils.getCreator(networkedEntity);\n        const playerPresence = window.APP.hubChannel.presence.state[this.playerSessionId];\n        if (playerPresence) {\n          this.updateDisplayNameFromPresenceMeta(playerPresence.metas[0]);\n        }\n      });\n    }\n    registerComponentInstance(this, \"player-info\");\n  },\n  remove() {\n    deregisterComponentInstance(this, \"player-info\");\n  },\n  play() {\n    this.el.addEventListener(\"model-loaded\", this.applyProperties);\n    this.el.sceneEl.addEventListener(\"presence_updated\", this.updateDisplayName);\n    if (this.isLocalPlayerInfo) {\n      this.el.querySelector(\".model\").addEventListener(\"model-error\", this.handleModelError);\n    }\n  },\n  pause() {\n    this.el.removeEventListener(\"model-loaded\", this.applyProperties);\n    this.el.sceneEl.removeEventListener(\"presence_updated\", this.updateDisplayName);\n    if (this.isLocalPlayerInfo) {\n      this.el.querySelector(\".model\").removeEventListener(\"model-error\", this.handleModelError);\n    }\n  },\n  update() {\n    this.applyProperties();\n  },\n  updateDisplayName(e) {\n    if (!this.playerSessionId && this.isLocalPlayerInfo) {\n      this.playerSessionId = NAF.clientId;\n    }\n    if (!this.playerSessionId) return;\n    if (this.playerSessionId !== e.detail.sessionId) return;\n\n    this.updateDisplayNameFromPresenceMeta(e.detail);\n  },\n  updateDisplayNameFromPresenceMeta(presenceMeta) {\n    this.displayName = presenceMeta.profile.displayName;\n    this.communityIdentifier = presenceMeta.profile.communityIdentifier;\n    this.isRecording = !!(presenceMeta.streaming || presenceMeta.recording);\n    this.isModerator = !!(presenceMeta.roles && presenceMeta.roles.moderator);\n    this.applyDisplayName();\n  },\n  applyDisplayName() {\n    const nametagEl = this.el.querySelector(\".nametag\");\n    if (this.displayName && nametagEl) {\n      nametagEl.setAttribute(\"text\", { value: this.displayName });\n    }\n    const communityIdentifierEl = this.el.querySelector(\".communityIdentifier\");\n    if (communityIdentifierEl) {\n      if (this.communityIdentifier) {\n        communityIdentifierEl.setAttribute(\"text\", { value: this.communityIdentifier });\n      }\n    }\n    const recordingBadgeEl = this.el.querySelector(\".recordingBadge\");\n    if (recordingBadgeEl) {\n      recordingBadgeEl.object3D.visible = this.isRecording;\n    }\n\n    const modBadgeEl = this.el.querySelector(\".modBadge\");\n    if (modBadgeEl) {\n      modBadgeEl.object3D.visible = !this.isRecording && this.isModerator;\n    }\n  },\n  applyProperties() {\n    this.applyDisplayName();\n\n    const modelEl = this.el.querySelector(\".model\");\n    if (this.data.avatarSrc && modelEl) {\n      modelEl.components[\"gltf-model-plus\"].jsonPreprocessor = ensureAvatarNodes;\n      modelEl.setAttribute(\"gltf-model-plus\", \"src\", this.data.avatarSrc);\n      this.el.sceneEl.systems[\"camera-tools\"].avatarUpdated();\n    }\n\n    const uniforms = injectCustomShaderChunks(this.el.object3D);\n    this.el.querySelectorAll(\"[hover-visuals]\").forEach(el => {\n      el.components[\"hover-visuals\"].uniforms = uniforms;\n    });\n  },\n  handleModelError() {\n    window.APP.store.resetToRandomLegacyAvatar();\n  }\n});\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\n\nconst POSES = {\n  open: \"allOpen\",\n  thumbDown: \"thumbDown\",\n  indexDown: \"indexDown\",\n  mrpDown: \"mrpDown\",\n  thumbUp: \"thumbsUp\",\n  point: \"point\",\n  fist: \"allGrip\",\n  pinch: \"pinch\"\n};\n\nconst NETWORK_POSES = [\"allOpen\", \"thumbDown\", \"indexDown\", \"mrpDown\", \"thumbsUp\", \"point\", \"allGrip\", \"pinch\"];\n\n/**\n * Animates between poses based on networked pose state using an animation mixer.\n * @namespace avatar\n * @component hand-pose\n */\nAFRAME.registerComponent(\"hand-pose\", {\n  multiple: true,\n\n  init() {\n    this.pose = 0;\n    this.animatePose = this.animatePose.bind(this);\n    const mixerEl = findAncestorWithComponent(this.el, \"animation-mixer\");\n    const suffix = this.id == \"left\" ? \"_L\" : \"_R\";\n    this.mixer = mixerEl && mixerEl.components[\"animation-mixer\"].mixer;\n    if (!this.mixer || !this.mixer.clipAction(POSES.open + suffix)) {\n      console.warn(\"Avatar does not an 'allOpen' animation, disabling hand animations\");\n      this.el.removeAttribute(\"hand-pose\");\n      return;\n    }\n    this.from = this.to = this.mixer.clipAction(POSES.open + suffix);\n    this.from.play();\n    this.networkField = `${this.id}_hand_pose`;\n\n    const getNetworkedAvatar = el => {\n      if (!el) {\n        window.setTimeout(() => {\n          getNetworkedAvatar(this.el);\n        }, 1000);\n        return;\n      }\n      const networkedAvatar = el.components && el.components[\"networked-avatar\"];\n      if (networkedAvatar) {\n        return networkedAvatar;\n      }\n      return getNetworkedAvatar(el.parentEl);\n    };\n    this.networkedAvatar = getNetworkedAvatar(this.el);\n  },\n\n  tick() {\n    if (\n      !this.networkedAvatar ||\n      !this.networkedAvatar.data ||\n      this.networkedAvatar.data[this.networkField] === this.pose\n    ) {\n      return;\n    }\n\n    this.animatePose(NETWORK_POSES[this.pose], NETWORK_POSES[this.networkedAvatar.data[this.networkField]]);\n    this.pose = this.networkedAvatar.data[this.networkField];\n  },\n\n  animatePose(prev, curr) {\n    this.from.stop();\n    this.to.stop();\n\n    const duration = 0.065;\n    const suffix = this.id == \"left\" ? \"_L\" : \"_R\";\n    this.from = this.mixer.clipAction(prev + suffix);\n    this.to = this.mixer.clipAction(curr + suffix);\n\n    this.from.fadeOut(duration);\n    this.to.fadeIn(duration);\n    this.to.play();\n    this.from.play();\n\n    this.mixer.update(0.001);\n  }\n});\n\n/**\n * Sets the networked hand pose state based on hand-pose events.\n * @namespace avatar\n * @component hand-pose-controller\n */\nAFRAME.registerComponent(\"hand-pose-controller\", {\n  multiple: true,\n  schema: {\n    eventSrc: { type: \"selector\" },\n    networkedAvatar: { type: \"selector\" }\n  },\n  init: function() {\n    this.setHandPose = this.setHandPose.bind(this);\n  },\n\n  play: function() {\n    this.data.eventSrc.addEventListener(\"hand-pose\", this.setHandPose);\n  },\n\n  pause: function() {\n    this.data.eventSrc.removeEventListener(\"hand-pose\", this.setHandPose);\n  },\n\n  setHandPose: function(evt) {\n    this.data.networkedAvatar.setAttribute(\n      \"networked-avatar\",\n      `${this.id}_hand_pose`,\n      NETWORK_POSES.indexOf(POSES[evt.detail.current])\n    );\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\nimport { SOUND_FREEZE, SOUND_THAW } from \"../systems/sound-effects-system\";\n\n/**\n * Toggles freezing of network traffic on the given event.\n * @namespace network\n * @component freeze-controller\n */\nAFRAME.registerComponent(\"freeze-controller\", {\n  schema: {\n    toggleEvent: { type: \"string\" }\n  },\n\n  init: function() {\n    this.onToggle = this.onToggle.bind(this);\n  },\n\n  play: function() {\n    this.el.addEventListener(this.data.toggleEvent, this.onToggle);\n  },\n\n  pause: function() {\n    this.el.removeEventListener(this.data.toggleEvent, this.onToggle);\n  },\n\n  tick: function() {\n    const scene = this.el.sceneEl;\n    if (!scene.is(\"entered\")) return;\n\n    const userinput = scene.systems.userinput;\n    const ensureFrozen = userinput.get(paths.actions.ensureFrozen);\n    const thaw = userinput.get(paths.actions.thaw);\n    const toggleFreeze = userinput.get(paths.actions.toggleFreeze);\n\n    const toggleFreezeDueToInput =\n      (this.el.is(\"frozen\") && thaw) || (!this.el.is(\"frozen\") && ensureFrozen) || toggleFreeze;\n\n    if (toggleFreezeDueToInput) {\n      this.onToggle();\n    }\n  },\n\n  onToggle: function() {\n    window.APP.store.update({ activity: { hasFoundFreeze: true } });\n    if (!NAF.connection.adapter) return;\n    NAF.connection.adapter.toggleFreeze();\n    if (NAF.connection.adapter.frozen) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_FREEZE);\n      this.el.addState(\"frozen\");\n    } else {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_THAW);\n      this.el.removeState(\"frozen\");\n    }\n  }\n});\n","import { getLastWorldPosition } from \"../utils/three-utils\";\n\nconst isMobile = AFRAME.utils.device.isMobile();\n\n/**\n * Toggles the visibility of this entity when the scene is frozen.\n * @namespace ui\n * @component visibility-while-frozen\n */\nAFRAME.registerComponent(\"visibility-while-frozen\", {\n  schema: {\n    withinDistance: { type: \"number\" },\n    visible: { type: \"boolean\", default: true },\n    requireHoverOnNonMobile: { type: \"boolean\", default: true }\n  },\n\n  init() {\n    this.updateVisibility = this.updateVisibility.bind(this);\n    this.camWorldPos = new THREE.Vector3();\n    this.objWorldPos = new THREE.Vector3();\n    this.cam = this.el.sceneEl.camera.el.object3D;\n\n    let hoverableSearch = this.el;\n\n    while (hoverableSearch !== document) {\n      if (hoverableSearch.getAttribute(\"is-remote-hover-target\") !== null) {\n        this.hoverable = hoverableSearch;\n        break;\n      }\n\n      hoverableSearch = hoverableSearch.parentNode;\n    }\n    if (!this.hoverable && this.data.requireHoverOnNonMobile) {\n      console.error(\"Didn't find a remote hover target.\");\n    }\n\n    this.onStateChange = evt => {\n      if (!evt.detail === \"frozen\") return;\n      this.updateVisibility();\n    };\n    this.updateVisibility();\n  },\n\n  tick() {\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n    const isVisible = this.el.object3D.visible;\n    const shouldNotBeVisible = isFrozen === !this.data.visible;\n    if (!isVisible && shouldNotBeVisible) return;\n\n    this.updateVisibility();\n  },\n\n  updateVisibility() {\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n\n    let isWithinDistance = true;\n    const isVisible = this.el.object3D.visible;\n\n    if (this.data.withinDistance) {\n      if (!isVisible) {\n        // Edge case, if the object is not visible force a matrix update\n        // since the main matrix update loop will not do it.\n        this.el.object3D.updateMatrices(true, true);\n      }\n\n      getLastWorldPosition(this.cam, this.camWorldPos);\n      this.objWorldPos.copy(this.el.object3D.position);\n      this.el.object3D.localToWorld(this.objWorldPos);\n\n      isWithinDistance =\n        this.camWorldPos.distanceToSquared(this.objWorldPos) < this.data.withinDistance * this.data.withinDistance;\n    }\n\n    const isTransforming = AFRAME.scenes[0].systems[\"transform-selected-object\"].transforming;\n\n    let shouldBeVisible =\n      ((isFrozen && this.data.visible) || (!isFrozen && !this.data.visible)) && isWithinDistance && !isTransforming;\n\n    if (this.data.requireHoverOnNonMobile && !isMobile) {\n      shouldBeVisible =\n        shouldBeVisible &&\n        ((this.hoverable && AFRAME.scenes[0].systems.interaction.state.rightRemote.hovered === this.hoverable) ||\n          isVisible);\n    }\n\n    if (isVisible !== shouldBeVisible) {\n      this.el.setAttribute(\"visible\", shouldBeVisible);\n    }\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateChange);\n\n    if (this.hoverable) {\n      this.hoverable.object3D.addEventListener(\"hovered\", this.updateVisibility);\n      this.hoverable.object3D.addEventListener(\"unhovered\", this.updateVisibility);\n    }\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateChange);\n\n    if (this.hoverable) {\n      this.hoverable.object3D.addEventListener(\"hovered\", this.updateVisibility);\n      this.hoverable.object3D.addEventListener(\"unhovered\", this.updateVisibility);\n    }\n  }\n});\n\n/**\n * Toggles the interactivity of a UI entity while the scene is frozen.\n * @namespace ui\n * @component ui-class-while-frozen\n */\nAFRAME.registerComponent(\"ui-class-while-frozen\", {\n  init() {\n    this.onStateChange = evt => {\n      if (!evt.detail === \"frozen\") return;\n      this.el.classList.toggle(\"ui\", this.el.sceneEl.is(\"frozen\"));\n    };\n    this.el.classList.toggle(\"ui\", this.el.sceneEl.is(\"frozen\"));\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateChange);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateChange);\n  }\n});\n","import \"./stats-plus.css\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\n// Adapted from https://github.com/aframevr/aframe/blob/master/src/components/scene/stats.js\n\nfunction createStats(scene) {\n  const threeStats = new window.threeStats(scene.renderer);\n  const aframeStats = new window.aframeStats(scene);\n  const plugins = scene.isMobile ? [] : [threeStats, aframeStats];\n  return new window.rStats({\n    css: [], // Our stylesheet is injected from AFrame.\n    values: {\n      fps: { caption: \"fps\", below: 30 }\n    },\n    groups: [{ caption: \"Framerate\", values: [\"fps\", \"raf\", \"physics\"] }],\n    plugins: plugins\n  });\n}\n\nconst HIDDEN_CLASS = \"a-hidden\";\n\nAFRAME.registerComponent(\"stats-plus\", {\n  // Whether or not the stats panel is expanded.\n  // Shows FPS counter when collapsed.\n  schema: { default: false },\n  init() {\n    this.onExpand = this.onExpand.bind(this);\n    this.onCollapse = this.onCollapse.bind(this);\n    this.onEnterVr = this.onEnterVr.bind(this);\n    this.onExitVr = this.onExitVr.bind(this);\n\n    const scene = this.el.sceneEl;\n    this.stats = createStats(scene);\n    this.statsEl = document.querySelector(\".rs-base\");\n\n    // Add header to stats panel so we can collapse it\n    const statsHeaderEl = document.createElement(\"div\");\n    statsHeaderEl.classList.add(\"rs-header\");\n\n    const statsTitleEl = document.createElement(\"h1\");\n    statsTitleEl.innerHTML = \"Stats\";\n    statsHeaderEl.appendChild(statsTitleEl);\n\n    const collapseEl = document.createElement(\"div\");\n    collapseEl.classList.add(\"rs-collapse-btn\");\n    collapseEl.innerHTML = \"X\";\n    collapseEl.addEventListener(\"click\", this.onCollapse);\n    statsHeaderEl.appendChild(collapseEl);\n\n    this.statsEl.insertBefore(statsHeaderEl, this.statsEl.firstChild);\n\n    // Add fps counter to the page\n    this.fpsEl = document.createElement(\"div\");\n    this.fpsEl.addEventListener(\"click\", this.onExpand);\n    this.fpsEl.classList.add(\"rs-fps-counter\");\n    document.body.appendChild(this.fpsEl);\n    this.lastFpsUpdate = performance.now();\n    this.lastFps = 0;\n    this.frameCount = 0;\n    this.inVR = scene.is(\"vr-mode\");\n\n    if (scene.isMobile) {\n      this.statsEl.classList.add(\"rs-mobile\");\n      this.fpsEl.classList.add(\"rs-mobile\");\n    }\n\n    scene.addEventListener(\"enter-vr\", this.onEnterVr);\n    scene.addEventListener(\"exit-vr\", this.onExitVr);\n\n    this.vrStatsEnabled = qsTruthy(\"vrstats\");\n    if (this.vrStatsEnabled) {\n      this.initVRStats();\n    }\n    this.lastUpdate = 0;\n  },\n  initVRStats() {\n    this.vrPanel = document.createElement(\"a-entity\");\n    this.vrPanel.setAttribute(\"text\", { width: 0.5, whiteSpace: \"pre\", value: \"_\", baseline: \"bottom\" });\n    this.vrPanel.addEventListener(\n      \"loaded\",\n      () =>\n        this.vrPanel.object3D.traverse(x => {\n          if (x.material) x.material.depthTest = false;\n        }),\n      { once: true }\n    );\n    this.el.append(this.vrPanel);\n    const background = document.createElement(\"a-plane\");\n    background.setAttribute(\"color\", \"#333333\");\n    background.setAttribute(\"material\", \"shader\", \"flat\");\n    background.setAttribute(\"material\", \"depthTest\", false);\n    background.setAttribute(\"width\", 0.1);\n    background.setAttribute(\"height\", 0.12);\n    background.setAttribute(\"position\", \"-0.2 0.055 0\");\n    this.el.append(background);\n  },\n  toggleVRStats() {\n    if (this.vrStatsEnabled) {\n      this.el.object3D.visible = false;\n      this.vrStatsEnabled = false;\n    } else {\n      if (!this.vrPanel) {\n        this.initVRStats();\n      }\n      this.el.object3D.visible = true;\n      this.vrStatsEnabled = true;\n    }\n  },\n  play() {\n    this.el.sceneEl.systems.physics.addComponent(this);\n  },\n  pause() {\n    this.el.sceneEl.systems.physics.removeComponent(this);\n  },\n  beforeStep() {\n    this.stats(\"physics\").start();\n  },\n  afterStep() {\n    this.stats(\"physics\").end();\n  },\n  update(oldData) {\n    if (oldData !== this.data) {\n      if (this.data) {\n        this.statsEl.classList.remove(HIDDEN_CLASS);\n        this.fpsEl.classList.add(HIDDEN_CLASS);\n      } else {\n        this.statsEl.classList.add(HIDDEN_CLASS);\n        this.fpsEl.classList.remove(HIDDEN_CLASS);\n      }\n    }\n  },\n  tick(time) {\n    const stats = this.stats;\n    if (this.data || this.vrStatsEnabled) {\n      // Update rStats\n      stats(\"rAF\").tick();\n      stats(\"FPS\").frame();\n      stats().update();\n    } else if (!this.inVR) {\n      // Update the fps counter\n      const now = performance.now();\n      this.frameCount++;\n\n      // Update the fps counter text once a second\n      if (now >= this.lastFpsUpdate + 1000) {\n        const fps = Math.round(this.frameCount / ((now - this.lastFpsUpdate) / 1000));\n        if (fps !== this.lastFps) {\n          this.fpsEl.innerHTML = Math.round(fps) + \" FPS\";\n          this.lastFps = fps;\n        }\n        this.lastFpsUpdate = now;\n        this.frameCount = 0;\n      }\n    }\n    if (this.vrStatsEnabled && time - this.lastUpdate > 100) {\n      this.vrPanel.setAttribute(\n        \"text\",\n        \"value\",\n        [\n          `f ${stats(\"fps\")\n            .value()\n            .toFixed(0)}`,\n          `r ${stats(\"raf\")\n            .value()\n            .toFixed(0)}`,\n          `p ${stats(\"physics\")\n            .value()\n            .toFixed(0)}`,\n          `c ${this.el.sceneEl.renderer.info.render.calls}`,\n          `t ${(this.el.sceneEl.renderer.info.render.triangles / 1000).toFixed(0)}k`\n        ].join(\"\\n\")\n      );\n      this.lastUpdate = time;\n    }\n  },\n  onEnterVr() {\n    this.inVR = true;\n    // Hide all stats elements when entering VR on mobile\n    if (this.el.sceneEl.isMobile) {\n      this.statsEl.classList.add(HIDDEN_CLASS);\n      this.fpsEl.classList.add(HIDDEN_CLASS);\n    }\n  },\n  onExitVr() {\n    this.inVR = false;\n    // Revert to previous state whe exiting VR on mobile\n    if (this.el.sceneEl.isMobile) {\n      if (this.data) {\n        this.statsEl.classList.remove(HIDDEN_CLASS);\n      } else {\n        this.fpsEl.classList.remove(HIDDEN_CLASS);\n      }\n    }\n  },\n  onExpand() {\n    this.el.setAttribute(this.name, true);\n  },\n  onCollapse() {\n    this.el.setAttribute(this.name, false);\n  },\n  remove() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.hide);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.show);\n\n    if (this.statsEl) {\n      this.statsEl.parentNode.removeChild(this.statsEl);\n      this.fpsEl.parentNode.removeChild(this.fpsEl);\n    }\n  }\n});\n","/* global performance THREE AFRAME NAF MediaStream process setTimeout */\nimport GIFWorker from \"../workers/gifparsing.worker.js\";\nimport errorImageSrc from \"!!url-loader!../assets/images/media-error.gif\";\nimport { paths } from \"../systems/userinput/paths\";\nimport HLS from \"hls.js/dist/hls.light.js\";\nimport { spawnMediaAround, createImageTexture } from \"../utils/media-utils\";\nimport { proxiedUrlFor } from \"../utils/media-url-utils\";\nimport { buildAbsoluteURL } from \"url-toolkit\";\nimport { SOUND_CAMERA_TOOL_TOOK_SNAPSHOT } from \"../systems/sound-effects-system\";\nimport { promisifyWorker } from \"../utils/promisify-worker.js\";\n\nconst ONCE_TRUE = { once: true };\nconst TYPE_IMG_PNG = { type: \"image/png\" };\nconst parseGIF = promisifyWorker(new GIFWorker());\n\nexport const VOLUME_LABELS = [];\nfor (let i = 0; i <= 20; i++) {\n  let s = \"|\";\n  for (let j = 0; j <= 20; j++) {\n    s += i >= j ? \"|\" : \" \";\n  }\n  s += \"|\";\n  VOLUME_LABELS[i] = s;\n}\n\nclass GIFTexture extends THREE.Texture {\n  constructor(frames, delays, disposals) {\n    super(document.createElement(\"canvas\"));\n    this.image.width = frames[0].width;\n    this.image.height = frames[0].height;\n\n    this._ctx = this.image.getContext(\"2d\");\n\n    this.generateMipmaps = false;\n    this.isVideoTexture = true;\n    this.minFilter = THREE.NearestFilter;\n\n    this.frames = frames;\n    this.delays = delays;\n    this.disposals = disposals;\n\n    this.frame = 0;\n    this.frameStartTime = Date.now();\n  }\n\n  update() {\n    if (!this.frames || !this.delays || !this.disposals) return;\n    const now = Date.now();\n    if (now - this.frameStartTime > this.delays[this.frame]) {\n      if (this.disposals[this.frame] === 2) {\n        this._ctx.clearRect(0, 0, this.image.width, this.image.width);\n      }\n      this.frame = (this.frame + 1) % this.frames.length;\n      this.frameStartTime = now;\n      this._ctx.drawImage(this.frames[this.frame], 0, 0, this.image.width, this.image.height);\n      this.needsUpdate = true;\n    }\n  }\n}\n\nasync function createGIFTexture(url) {\n  return new Promise((resolve, reject) => {\n    fetch(url, { mode: \"cors\" })\n      .then(r => r.arrayBuffer())\n      .then(rawImageData => parseGIF(rawImageData, [rawImageData]))\n      .then(result => {\n        const { frames, delayTimes, disposals } = result;\n        let loadCnt = 0;\n        for (let i = 0; i < frames.length; i++) {\n          const img = new Image();\n          img.onload = e => {\n            loadCnt++;\n            frames[i] = e.target;\n            if (loadCnt === frames.length) {\n              const texture = new GIFTexture(frames, delayTimes, disposals);\n              texture.image.src = url;\n              texture.encoding = THREE.sRGBEncoding;\n              texture.minFilter = THREE.LinearFilter;\n              resolve(texture);\n            }\n          };\n          img.src = frames[i];\n        }\n      })\n      .catch(reject);\n  });\n}\n\nconst isIOS = AFRAME.utils.device.isIOS();\n\n/**\n * Create video element to be used as a texture.\n *\n * @param {string} src - Url to a video file.\n * @returns {Element} Video element.\n */\nasync function createVideoEl() {\n  const videoEl = document.createElement(\"video\");\n  videoEl.setAttribute(\"playsinline\", \"\");\n  videoEl.setAttribute(\"webkit-playsinline\", \"\");\n  // iOS Safari requires the autoplay attribute, or it won't play the video at all.\n  videoEl.autoplay = true;\n  // iOS Safari will not play videos without user interaction. We mute the video so that it can autoplay and then\n  // allow the user to unmute it with an interaction in the unmute-video-button component.\n  videoEl.muted = isIOS;\n  videoEl.preload = \"auto\";\n  videoEl.crossOrigin = \"anonymous\";\n\n  return videoEl;\n}\n\nfunction createVideoTexture(url, contentType) {\n  return new Promise(async (resolve, reject) => {\n    const videoEl = await createVideoEl();\n\n    const texture = new THREE.VideoTexture(videoEl);\n    texture.minFilter = THREE.LinearFilter;\n    texture.encoding = THREE.sRGBEncoding;\n\n    if (url.startsWith(\"hubs://\")) {\n      const streamClientId = url.substring(7).split(\"/\")[1]; // /clients/<client id>/video is only URL for now\n      const stream = await NAF.connection.adapter.getMediaStream(streamClientId, \"video\");\n      videoEl.srcObject = new MediaStream(stream.getVideoTracks());\n      // If hls.js is supported we always use it as it gives us better events\n    } else if (AFRAME.utils.material.isHLS(url, contentType)) {\n      if (HLS.isSupported()) {\n        const corsProxyPrefix = `https://${process.env.CORS_PROXY_SERVER}/`;\n        const baseUrl = url.startsWith(corsProxyPrefix) ? url.substring(corsProxyPrefix.length) : url;\n        const hls = new HLS({\n          xhrSetup: (xhr, u) => {\n            if (u.startsWith(corsProxyPrefix)) {\n              u = u.substring(corsProxyPrefix.length);\n            }\n\n            // HACK HLS.js resolves relative urls internally, but our CORS proxying screws it up. Resolve relative to the original unproxied url.\n            // TODO extend HLS.js to allow overriding of its internal resolving instead\n            if (!u.startsWith(\"http\")) {\n              u = buildAbsoluteURL(baseUrl, u.startsWith(\"/\") ? u : `/${u}`);\n            }\n\n            xhr.open(\"GET\", proxiedUrlFor(u));\n          }\n        });\n        texture.hls = hls;\n        hls.loadSource(url);\n        hls.attachMedia(videoEl);\n        hls.on(HLS.Events.ERROR, function(event, data) {\n          if (data.fatal) {\n            switch (data.type) {\n              case HLS.ErrorTypes.NETWORK_ERROR:\n                // try to recover network error\n                hls.startLoad();\n                break;\n              case HLS.ErrorTypes.MEDIA_ERROR:\n                hls.recoverMediaError();\n                break;\n              default:\n                reject(event);\n                return;\n            }\n          }\n        });\n        // If not, see if native support will work\n      } else if (videoEl.canPlayType(contentType)) {\n        videoEl.src = url;\n        videoEl.onerror = reject;\n      } else {\n        reject(\"HLS unsupported\");\n      }\n    } else {\n      videoEl.src = url;\n      videoEl.onerror = reject;\n    }\n\n    let hasResolved = false;\n\n    const resolveOnce = () => {\n      if (hasResolved) return;\n      hasResolved = true;\n      resolve(texture);\n    };\n\n    videoEl.addEventListener(\"canplay\", resolveOnce, { once: true });\n\n    // HACK: Sometimes iOS fails to fire the canplay event, so we poll for the video dimensions to appear instead.\n    if (isIOS) {\n      const poll = () => {\n        if ((texture.image.videoHeight || texture.image.height) && (texture.image.videoWidth || texture.image.width)) {\n          resolveOnce();\n        } else {\n          setTimeout(poll, 500);\n        }\n      };\n\n      poll();\n    }\n  });\n}\n\nfunction scaleToAspectRatio(el, ratio) {\n  const width = Math.min(1.0, 1.0 / ratio);\n  const height = Math.min(1.0, ratio);\n  el.object3DMap.mesh.scale.set(width, height, 1);\n  el.object3DMap.mesh.matrixNeedsUpdate = true;\n}\n\nfunction disposeTexture(texture) {\n  if (texture.image instanceof HTMLVideoElement) {\n    const video = texture.image;\n    video.pause();\n    video.src = \"\";\n    video.load();\n  }\n\n  if (texture.hls) {\n    texture.hls.destroy();\n  }\n\n  texture.dispose();\n}\n\nclass TextureCache {\n  cache = new Map();\n\n  set(src, texture) {\n    const image = texture.image;\n    this.cache.set(src, {\n      texture,\n      ratio: (image.videoHeight || image.height) / (image.videoWidth || image.width),\n      count: 0\n    });\n    return this.retain(src);\n  }\n\n  has(src) {\n    return this.cache.has(src);\n  }\n\n  get(src) {\n    return this.cache.get(src);\n  }\n\n  retain(src) {\n    const cacheItem = this.cache.get(src);\n    cacheItem.count++;\n    // console.log(\"retain\", src, cacheItem.count);\n    return cacheItem;\n  }\n\n  release(src) {\n    const cacheItem = this.cache.get(src);\n\n    if (!cacheItem) {\n      console.error(`Releasing uncached texture src ${src}`);\n      return;\n    }\n\n    cacheItem.count--;\n    // console.log(\"release\", src, cacheItem.count);\n    if (cacheItem.count <= 0) {\n      // Unload the video element to prevent it from continuing to play in the background\n      disposeTexture(cacheItem.texture);\n      this.cache.delete(src);\n    }\n  }\n}\n\nconst textureCache = new TextureCache();\n\nconst errorImage = new Image();\nerrorImage.src = errorImageSrc;\nconst errorTexture = new THREE.Texture(errorImage);\nerrorTexture.magFilter = THREE.NearestFilter;\nerrorImage.onload = () => {\n  errorTexture.needsUpdate = true;\n};\n\nfunction timeFmt(t) {\n  let s = Math.floor(t),\n    h = Math.floor(s / 3600);\n  s -= h * 3600;\n  let m = Math.floor(s / 60);\n  s -= m * 60;\n  if (h < 10) h = `0${h}`;\n  if (m < 10) m = `0${m}`;\n  if (s < 10) s = `0${s}`;\n  return h === \"00\" ? `${m}:${s}` : `${h}:${m}:${s}`;\n}\n\nAFRAME.registerComponent(\"media-video\", {\n  schema: {\n    src: { type: \"string\" },\n    contentType: { type: \"string\" },\n    volume: { type: \"number\", default: 0.5 },\n    loop: { type: \"boolean\", default: true },\n    audioType: { type: \"string\", default: \"pannernode\" },\n    hidePlaybackControls: { type: \"boolean\", default: false },\n    distanceModel: { type: \"string\", default: \"inverse\" },\n    rolloffFactor: { type: \"number\", default: 1 },\n    refDistance: { type: \"number\", default: 1 },\n    maxDistance: { type: \"number\", default: 10000 },\n    coneInnerAngle: { type: \"number\", default: 360 },\n    coneOuterAngle: { type: \"number\", default: 0 },\n    coneOuterGain: { type: \"number\", default: 0 },\n    videoPaused: { type: \"boolean\" },\n    projection: { type: \"string\", default: \"flat\" },\n    time: { type: \"number\" },\n    tickRate: { default: 1000 }, // ms interval to send time interval updates\n    syncTolerance: { default: 2 }\n  },\n\n  init() {\n    this.onPauseStateChange = this.onPauseStateChange.bind(this);\n    this.tryUpdateVideoPlaybackState = this.tryUpdateVideoPlaybackState.bind(this);\n    this.updateSrc = this.updateSrc.bind(this);\n\n    this.seekForward = this.seekForward.bind(this);\n    this.seekBack = this.seekBack.bind(this);\n    this.volumeUp = this.volumeUp.bind(this);\n    this.volumeDown = this.volumeDown.bind(this);\n    this.snap = this.snap.bind(this);\n    this.changeVolumeBy = this.changeVolumeBy.bind(this);\n    this.togglePlaying = this.togglePlaying.bind(this);\n\n    this.lastUpdate = 0;\n    this.videoMutedAt = 0;\n    this.localSnapCount = 0;\n    this.isSnapping = false;\n    this.onSnapImageLoaded = () => (this.isSnapping = false);\n\n    this.el.setAttribute(\"hover-menu__video\", { template: \"#video-hover-menu\", dirs: [\"forward\", \"back\"] });\n    this.el.components[\"hover-menu__video\"].getHoverMenu().then(menu => {\n      // If we got removed while waiting, do nothing.\n      if (!this.el.parentNode) return;\n\n      this.hoverMenu = menu;\n\n      this.playbackControls = this.el.querySelector(\".video-playback\");\n      this.playPauseButton = this.el.querySelector(\".video-playpause-button\");\n      this.volumeUpButton = this.el.querySelector(\".video-volume-up-button\");\n      this.volumeDownButton = this.el.querySelector(\".video-volume-down-button\");\n      this.seekForwardButton = this.el.querySelector(\".video-seek-forward-button\");\n      this.seekBackButton = this.el.querySelector(\".video-seek-back-button\");\n      this.snapButton = this.el.querySelector(\".video-snap-button\");\n      this.timeLabel = this.el.querySelector(\".video-time-label\");\n      this.volumeLabel = this.el.querySelector(\".video-volume-label\");\n\n      this.playPauseButton.object3D.addEventListener(\"interact\", this.togglePlaying);\n      this.seekForwardButton.object3D.addEventListener(\"interact\", this.seekForward);\n      this.seekBackButton.object3D.addEventListener(\"interact\", this.seekBack);\n      this.volumeUpButton.object3D.addEventListener(\"interact\", this.volumeUp);\n      this.volumeDownButton.object3D.addEventListener(\"interact\", this.volumeDown);\n      this.snapButton.object3D.addEventListener(\"interact\", this.snap);\n\n      this.updateVolumeLabel();\n      this.updateHoverMenuBasedOnLiveState();\n      this.updatePlaybackState();\n    });\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.networkedEl = networkedEl;\n      this.updatePlaybackState();\n\n      // For scene-owned videos, take ownership after a random delay if nobody\n      // else has so there is a timekeeper. Do not due this on iOS because iOS has an\n      // annoying \"auto-pause\" feature that forces one non-autoplaying video to play\n      // at once, which will pause the videos for everyone in the room if owned.\n      if (!isIOS && NAF.utils.getNetworkOwner(this.networkedEl) === \"scene\") {\n        setTimeout(() => {\n          if (NAF.utils.getNetworkOwner(this.networkedEl) === \"scene\") {\n            NAF.utils.takeOwnership(this.networkedEl);\n          }\n        }, 2000 + Math.floor(Math.random() * 2000));\n      }\n    });\n\n    // from a-sound\n    const sceneEl = this.el.sceneEl;\n    sceneEl.audioListener = sceneEl.audioListener || new THREE.AudioListener();\n    if (sceneEl.camera) {\n      sceneEl.camera.add(sceneEl.audioListener);\n    }\n    sceneEl.addEventListener(\"camera-set-active\", function(evt) {\n      evt.detail.cameraEl.getObject3D(\"camera\").add(sceneEl.audioListener);\n    });\n  },\n\n  seekForward() {\n    if ((!this.videoIsLive && NAF.utils.isMine(this.networkedEl)) || NAF.utils.takeOwnership(this.networkedEl)) {\n      this.video.currentTime += 30;\n      this.el.setAttribute(\"media-video\", \"time\", this.video.currentTime);\n    }\n  },\n\n  seekBack() {\n    if ((!this.videoIsLive && NAF.utils.isMine(this.networkedEl)) || NAF.utils.takeOwnership(this.networkedEl)) {\n      this.video.currentTime -= 10;\n      this.el.setAttribute(\"media-video\", \"time\", this.video.currentTime);\n    }\n  },\n\n  changeVolumeBy(v) {\n    this.el.setAttribute(\"media-video\", \"volume\", THREE.Math.clamp(this.data.volume + v, 0, 1));\n    this.updateVolumeLabel();\n  },\n\n  volumeUp() {\n    this.changeVolumeBy(0.1);\n  },\n\n  volumeDown() {\n    this.changeVolumeBy(-0.1);\n  },\n\n  async snap() {\n    if (this.isSnapping) return;\n    this.isSnapping = true;\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_TOOK_SNAPSHOT);\n\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = this.video.videoWidth;\n    canvas.height = this.video.videoHeight;\n    canvas.getContext(\"2d\").drawImage(this.video, 0, 0, canvas.width, canvas.height);\n    const blob = await new Promise(resolve => canvas.toBlob(resolve));\n    const file = new File([blob], \"snap.png\", TYPE_IMG_PNG);\n\n    this.localSnapCount++;\n    const { entity } = spawnMediaAround(this.el, file, this.localSnapCount);\n    entity.addEventListener(\"image-loaded\", this.onSnapImageLoaded, ONCE_TRUE);\n  },\n\n  togglePlaying() {\n    // See onPauseStateChanged for note about iOS\n    if (isIOS && this.video.paused && NAF.utils.isMine(this.networkedEl)) {\n      this.video.play();\n      return;\n    }\n\n    if (this.networkedEl && (NAF.utils.isMine(this.networkedEl) || NAF.utils.takeOwnership(this.networkedEl))) {\n      this.tryUpdateVideoPlaybackState(!this.data.videoPaused);\n    }\n  },\n\n  onPauseStateChange() {\n    // iOS Safari will auto-pause other videos if one is manually started (not autoplayed.) So, to keep things\n    // easy to reason about, we *never* broadcast pauses from iOS.\n    //\n    // if an iOS safari user pauses and plays a video they'll pause all the other videos,\n    // which isn't great, but this check will at least ensure they don't pause those videos\n    // for all other users in the room! Of course, if they go and hit play on those videos auto-paused,\n    // they will become the timekeeper, and will seek everyone to where the video was auto-paused.\n    //\n    // This specific case will diverge the network schema and the video player state, so that\n    // this.data.videoPaused is false (so others will keep playing it) but our local player will\n    // have stopped. So we deal with this special case as well when we press the play button.\n    if (isIOS && this.video.paused && NAF.utils.isMine(this.networkedEl)) {\n      return;\n    }\n\n    this.el.setAttribute(\"media-video\", \"videoPaused\", this.video.paused);\n\n    if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n      this.el.emit(\"owned-video-state-changed\");\n    }\n  },\n\n  updatePlaybackState(force) {\n    if (this.hoverMenu) {\n      this.playbackControls.object3D.visible = !this.data.hidePlaybackControls && !!this.video;\n      this.timeLabel.object3D.visible = !this.data.hidePlaybackControls;\n\n      this.playPauseButton.object3D.visible = !!this.video;\n      this.snapButton.object3D.visible = !!this.video;\n      this.seekForwardButton.object3D.visible = !!this.video && !this.videoIsLive;\n      this.seekBackButton.object3D.visible = !!this.video && !this.videoIsLive;\n    }\n\n    // Only update playback position for videos you don't own\n    if (force || (this.networkedEl && !NAF.utils.isMine(this.networkedEl) && this.video)) {\n      if (Math.abs(this.data.time - this.video.currentTime) > this.data.syncTolerance) {\n        this.tryUpdateVideoPlaybackState(this.data.videoPaused, this.data.time);\n      } else {\n        this.tryUpdateVideoPlaybackState(this.data.videoPaused);\n      }\n    }\n\n    // Volume is local, always update it\n    if (this.audio) {\n      this.audio.gain.gain.value = this.data.volume;\n    }\n  },\n\n  tryUpdateVideoPlaybackState(pause, currentTime) {\n    if (this._playbackStateChangeTimeout) {\n      clearTimeout(this._playbackStateChangeTimeout);\n      delete this._playbackStateChangeTimeout;\n    }\n\n    if (!this.videoIsLive && currentTime !== undefined) {\n      this.video.currentTime = currentTime;\n    }\n\n    if (this.hoverMenu) {\n      this.playPauseButton.setAttribute(\"icon-button\", \"active\", pause);\n    }\n\n    if (pause) {\n      this.video.pause();\n    } else {\n      // Need to deal with the fact play() may fail if user has not interacted with browser yet.\n      this.video.play().catch(() => {\n        this._playbackStateChangeTimeout = setTimeout(() => this.tryUpdateVideoPlaybackState(pause, currentTime), 1000);\n      });\n    }\n  },\n\n  async update(oldData) {\n    const src = this.data.src;\n    this.updatePlaybackState();\n\n    if (!src || src === oldData.src) return;\n    return this.updateSrc(oldData);\n  },\n\n  async updateSrc(oldData) {\n    const { src } = this.data;\n\n    this.cleanUp();\n    if (this.mesh && this.mesh.material) {\n      this.mesh.material.map = null;\n      this.mesh.material.needsUpdate = true;\n    }\n\n    let texture;\n    try {\n      texture = await createVideoTexture(src, this.data.contentType);\n\n      // No way to cancel promises, so if src has changed while we were creating the texture just throw it away.\n      if (this.data.src !== src) {\n        disposeTexture(texture);\n        return;\n      }\n\n      if (!src.startsWith(\"hubs://\")) {\n        // TODO FF error here if binding mediastream: The captured HTMLMediaElement is playing a MediaStream. Applying volume or mute status is not currently supported -- not an issue since we have no audio atm in shared video.\n        texture.audioSource = this.el.sceneEl.audioListener.context.createMediaElementSource(texture.image);\n\n        if (this.data.audioType === \"pannernode\") {\n          this.audio = new THREE.PositionalAudio(this.el.sceneEl.audioListener);\n          this.audio.setDistanceModel(this.data.distanceModel);\n          this.audio.setRolloffFactor(this.data.rolloffFactor);\n          this.audio.setRefDistance(this.data.refDistance);\n          this.audio.setMaxDistance(this.data.maxDistance);\n          this.audio.panner.coneInnerAngle = this.data.coneInnerAngle;\n          this.audio.panner.coneOuterAngle = this.data.coneOuterAngle;\n          this.audio.panner.coneOuterGain = this.data.coneOuterGain;\n        } else {\n          this.audio = new THREE.Audio(this.el.sceneEl.audioListener);\n        }\n\n        this.audio.setNodeSource(texture.audioSource);\n        this.el.setObject3D(\"sound\", this.audio);\n      }\n\n      this.video = texture.image;\n      this.video.loop = this.data.loop;\n      this.video.addEventListener(\"pause\", this.onPauseStateChange);\n      this.video.addEventListener(\"play\", this.onPauseStateChange);\n\n      if (texture.hls) {\n        const updateLiveState = () => {\n          this.videoIsLive = texture.hls.levels[texture.hls.currentLevel].details.live;\n          this.updateHoverMenuBasedOnLiveState();\n        };\n        texture.hls.on(HLS.Events.LEVEL_SWITCHED, updateLiveState);\n        if (texture.hls.currentLevel >= 0) {\n          updateLiveState();\n        }\n      } else {\n        this.videoIsLive = this.video.duration === Infinity;\n        this.updateHoverMenuBasedOnLiveState();\n      }\n\n      if (isIOS) {\n        const template = document.getElementById(\"video-unmute\");\n        this.el.appendChild(document.importNode(template.content, true));\n        this.el.setAttribute(\"position-at-box-shape-border__unmute-ui\", {\n          target: \".unmute-ui\",\n          dirs: [\"forward\", \"back\"]\n        });\n      }\n    } catch (e) {\n      console.error(\"Error loading video\", this.data.src, e);\n      texture = errorTexture;\n    }\n\n    const projection = this.data.projection;\n\n    if (!this.mesh || projection !== oldData.projection) {\n      const material = new THREE.MeshBasicMaterial();\n\n      let geometry;\n\n      if (projection === \"360-equirectangular\") {\n        geometry = new THREE.SphereBufferGeometry(1, 64, 32);\n        // invert the geometry on the x-axis so that all of the faces point inward\n        geometry.scale(-1, 1, 1);\n      } else {\n        geometry = new THREE.PlaneBufferGeometry();\n        material.side = THREE.DoubleSide;\n      }\n\n      this.mesh = new THREE.Mesh(geometry, material);\n      this.el.setObject3D(\"mesh\", this.mesh);\n    }\n\n    this.mesh.material.map = texture;\n    this.mesh.material.needsUpdate = true;\n\n    if (projection === \"flat\") {\n      scaleToAspectRatio(this.el, texture.image.videoHeight / texture.image.videoWidth);\n    }\n\n    this.updatePlaybackState(true);\n\n    if (this.video.muted) {\n      this.videoMutedAt = performance.now();\n    }\n\n    this.el.emit(\"video-loaded\", { projection: projection });\n  },\n\n  updateHoverMenuBasedOnLiveState() {\n    if (!this.hoverMenu) return;\n\n    this.seekForwardButton.object3D.visible = !this.videoIsLive;\n    this.seekBackButton.object3D.visible = !this.videoIsLive;\n\n    if (this.videoIsLive) {\n      this.timeLabel.setAttribute(\"text\", \"value\", \"LIVE\");\n    }\n  },\n\n  updateVolumeLabel() {\n    this.volumeLabel.setAttribute(\n      \"text\",\n      \"value\",\n      this.data.volume === 0 ? \"MUTE\" : VOLUME_LABELS[Math.floor(this.data.volume / 0.05)]\n    );\n  },\n\n  tick() {\n    if (!this.video) return;\n\n    const userinput = this.el.sceneEl.systems.userinput;\n    const interaction = this.el.sceneEl.systems.interaction;\n    const volumeMod = userinput.get(paths.actions.cursor.mediaVolumeMod);\n    if (interaction.state.rightRemote.hovered === this.el && volumeMod) {\n      this.changeVolumeBy(volumeMod);\n    }\n\n    const isHeld = interaction.isHeld(this.el);\n\n    if (this.wasHeld && !isHeld) {\n      this.localSnapCount = 0;\n    }\n\n    this.wasHeld = isHeld;\n\n    if (this.hoverMenu && this.hoverMenu.object3D.visible && !this.videoIsLive) {\n      this.timeLabel.setAttribute(\n        \"text\",\n        \"value\",\n        `${timeFmt(this.video.currentTime)} / ${timeFmt(this.video.duration)}`\n      );\n    }\n\n    // If a non-live video is currently playing and we own it, send out time updates\n    if (!this.data.videoPaused && !this.videoIsLive && this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n      const now = performance.now();\n      if (now - this.lastUpdate > this.data.tickRate) {\n        this.el.setAttribute(\"media-video\", \"time\", this.video.currentTime);\n        this.lastUpdate = now;\n      }\n    }\n  },\n\n  cleanUp() {\n    if (this.mesh && this.mesh.material) {\n      disposeTexture(this.mesh.material.map);\n    }\n  },\n\n  remove() {\n    this.cleanUp();\n\n    if (this.audio) {\n      this.el.removeObject3D(\"sound\");\n      this.audio.disconnect();\n      delete this.audio;\n    }\n\n    if (this.video) {\n      this.video.removeEventListener(\"pause\", this.onPauseStateChange);\n      this.video.removeEventListener(\"play\", this.onPauseStateChange);\n    }\n    if (this.hoverMenu) {\n      this.playPauseButton.object3D.removeEventListener(\"interact\", this.togglePlaying);\n      this.volumeUpButton.object3D.removeEventListener(\"interact\", this.volumeUp);\n      this.volumeDownButton.object3D.removeEventListener(\"interact\", this.volumeDown);\n      this.seekForwardButton.object3D.removeEventListener(\"interact\", this.seekForward);\n      this.seekBackButton.object3D.removeEventListener(\"interact\", this.seekBack);\n    }\n  }\n});\n\nAFRAME.registerComponent(\"media-image\", {\n  schema: {\n    src: { type: \"string\" },\n    projection: { type: \"string\", default: \"flat\" },\n    contentType: { type: \"string\" }\n  },\n\n  remove() {\n    if (this._hasRetainedTexture) {\n      textureCache.release(this.data.src);\n      this._hasRetainedTexture = false;\n    }\n  },\n\n  async update(oldData) {\n    let texture;\n    let ratio = 1;\n\n    try {\n      const { src, contentType } = this.data;\n      if (!src) return;\n\n      this.el.emit(\"image-loading\");\n\n      if (this.mesh && this.mesh.map && src !== oldData.src) {\n        this.mesh.material.map = null;\n        this.mesh.material.needsUpdate = true;\n        if (this.mesh.map !== errorTexture) {\n          textureCache.release(oldData.src);\n        }\n      }\n\n      if (textureCache.has(src)) {\n        const cacheItem = textureCache.retain(src);\n        texture = cacheItem.texture;\n        ratio = cacheItem.ratio;\n      } else {\n        if (src === \"error\") {\n          texture = errorTexture;\n        } else if (contentType.includes(\"image/gif\")) {\n          texture = await createGIFTexture(src);\n        } else if (contentType.startsWith(\"image/\")) {\n          texture = await createImageTexture(src);\n        } else {\n          throw new Error(`Unknown image content type: ${contentType}`);\n        }\n\n        const cacheItem = textureCache.set(src, texture);\n        ratio = cacheItem.ratio;\n\n        // No way to cancel promises, so if src has changed while we were creating the texture just throw it away.\n        if (this.data.src !== src) {\n          textureCache.release(src);\n          return;\n        }\n      }\n\n      this._hasRetainedTexture = true;\n    } catch (e) {\n      console.error(\"Error loading image\", this.data.src, e);\n      texture = errorTexture;\n      this._hasRetainedTexture = false;\n    }\n\n    const projection = this.data.projection;\n\n    if (!this.mesh || projection !== oldData.projection) {\n      const material = new THREE.MeshBasicMaterial();\n\n      let geometry;\n\n      if (projection === \"360-equirectangular\") {\n        geometry = new THREE.SphereBufferGeometry(1, 64, 32);\n        // invert the geometry on the x-axis so that all of the faces point inward\n        geometry.scale(-1, 1, 1);\n      } else {\n        geometry = new THREE.PlaneBufferGeometry(1, 1, 1, 1, texture.flipY);\n        material.side = THREE.DoubleSide;\n      }\n\n      this.mesh = new THREE.Mesh(geometry, material);\n      this.el.setObject3D(\"mesh\", this.mesh);\n    }\n\n    this.mesh.material.map = texture;\n    this.mesh.material.transparent = texture.format === THREE.RGBAFormat;\n    this.mesh.material.needsUpdate = true;\n\n    if (projection === \"flat\") {\n      scaleToAspectRatio(this.el, ratio);\n    }\n\n    this.el.emit(\"image-loaded\", { src: this.data.src, projection: projection });\n  }\n});\n","import { VOLUME_LABELS } from \"./media-views\";\n\nAFRAME.registerComponent(\"avatar-volume-controls\", {\n  schema: {\n    volume: { type: \"number\", default: 1.0 }\n  },\n\n  init() {\n    this.volumeUp = this.volumeUp.bind(this);\n    this.volumeDown = this.volumeDown.bind(this);\n    this.changeVolumeBy = this.changeVolumeBy.bind(this);\n    this.volumeUpButton = this.el.querySelector(\".avatar-volume-up-button\");\n    this.volumeDownButton = this.el.querySelector(\".avatar-volume-down-button\");\n    this.volumeLabel = this.el.querySelector(\".avatar-volume-label\");\n    this.volumeUpButton.object3D.addEventListener(\"interact\", this.volumeUp);\n    this.volumeDownButton.object3D.addEventListener(\"interact\", this.volumeDown);\n\n    this.updateVolumeLabel();\n  },\n\n  changeVolumeBy(v) {\n    this.el.setAttribute(\"avatar-volume-controls\", \"volume\", THREE.Math.clamp(this.data.volume + v, 0, 1));\n    this.updateVolumeLabel();\n  },\n\n  volumeUp() {\n    this.changeVolumeBy(0.1);\n  },\n\n  volumeDown() {\n    this.changeVolumeBy(-0.1);\n  },\n\n  update() {\n    if (this.audio) {\n      this.audio.gain.gain.value = this.data.volume;\n    }\n  },\n\n  updateVolumeLabel() {\n    this.volumeLabel.setAttribute(\n      \"text\",\n      \"value\",\n      this.data.volume === 0 ? \"Muted\" : VOLUME_LABELS[Math.floor(this.data.volume / 0.05)]\n    );\n  },\n\n  tick() {\n    if (this.audio) return;\n\n    // Walk up to Spine and then search down.\n    const source = this.el.parentNode.parentNode.querySelector(\"[networked-audio-source]\");\n    if (!source) return;\n\n    this.audio = source.components[\"networked-audio-source\"].sound;\n    this.update();\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\n\nAFRAME.registerComponent(\"pinch-to-move\", {\n  schema: {\n    speed: { default: 0.25 }\n  },\n  init() {\n    this.axis = [0, 0];\n  },\n  tick() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const pinch = userinput.get(paths.device.touchscreen.pinchDelta);\n    if (pinch) {\n      this.axis[1] = pinch * this.data.speed;\n      this.el.emit(\"move\", { axis: this.axis });\n    }\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\n\nconst degToRad = THREE.Math.degToRad;\nconst radToDeg = THREE.Math.radToDeg;\n\nAFRAME.registerComponent(\"pitch-yaw-rotator\", {\n  schema: {\n    minPitch: { default: -90 },\n    maxPitch: { default: 90 }\n  },\n\n  init() {\n    this.pitch = 0;\n    this.yaw = 0;\n    this.onRotateX = this.onRotateX.bind(this);\n    this.el.sceneEl.addEventListener(\"rotateX\", this.onRotateX);\n    this.el.sceneEl.addEventListener(\"enter-vr\", () => this.pause());\n    this.el.sceneEl.addEventListener(\"exit-vr\", () => this.play());\n    this.pendingXRotation = 0;\n  },\n\n  onRotateX(e) {\n    this.pendingXRotation += e.detail.value;\n  },\n\n  look(deltaPitch, deltaYaw) {\n    const { minPitch, maxPitch } = this.data;\n    this.pitch += deltaPitch;\n    this.pitch = THREE.Math.clamp(this.pitch, minPitch, maxPitch);\n    this.yaw += deltaYaw;\n  },\n\n  set(pitch, yaw) {\n    const { minPitch, maxPitch } = this.data;\n    this.pitch = THREE.Math.clamp(radToDeg(pitch), minPitch, maxPitch);\n    this.yaw = radToDeg(yaw);\n  },\n\n  tick() {\n    const scene = AFRAME.scenes[0];\n    const userinput = scene.systems.userinput;\n    const cameraDelta = userinput.get(scene.is(\"entered\") ? paths.actions.cameraDelta : paths.actions.lobbyCameraDelta);\n    let lookX = this.pendingXRotation;\n    let lookY = 0;\n    if (cameraDelta) {\n      lookY += cameraDelta[0];\n      lookX += cameraDelta[1];\n    }\n    if (lookX !== 0 || lookY !== 0) {\n      this.look(lookX, lookY);\n      this.el.object3D.rotation.set(degToRad(this.pitch), degToRad(this.yaw), 0);\n      this.el.object3D.rotation.order = \"YXZ\";\n    }\n    this.pendingXRotation = 0;\n  }\n});\n","import { getBox } from \"../utils/auto-box-collider.js\";\nimport { getLastWorldPosition } from \"../utils/three-utils\";\n\nconst PI = Math.PI;\nconst HALF_PI = PI / 2;\nconst THREE_HALF_PI = 3 * HALF_PI;\nconst right = new THREE.Vector3(1, 0, 0);\nconst forward = new THREE.Vector3(0, 0, 1);\nconst left = new THREE.Vector3(-1, 0, 0);\nconst back = new THREE.Vector3(0, 0, -1);\nconst zero = new THREE.Vector3(0, 0, 0);\nconst dirs = {\n  left: {\n    dir: left,\n    rotation: THREE_HALF_PI,\n    halfExtent: \"x\"\n  },\n  right: {\n    dir: right,\n    rotation: HALF_PI,\n    halfExtent: \"x\"\n  },\n  forward: {\n    dir: forward,\n    rotation: 0,\n    halfExtent: \"z\"\n  },\n  back: {\n    dir: back,\n    rotation: PI,\n    halfExtent: \"z\"\n  }\n};\n\nAFRAME.registerComponent(\"position-at-box-shape-border\", {\n  multiple: true,\n  schema: {\n    target: { type: \"string\" },\n    dirs: { default: [\"left\", \"right\", \"forward\", \"back\"] },\n    animate: { default: true },\n    scale: { default: true }\n  },\n\n  init() {\n    this.cam = this.el.sceneEl.camera.el.object3D;\n    this._updateBox = this._updateBox.bind(this);\n    this._setupTarget = this._setupTarget.bind(this);\n    this.halfExtents = new THREE.Vector3();\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._updateBox, \"media-components\");\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._updateBox, \"media-components\");\n  },\n\n  update() {\n    this.dirs = this.data.dirs.map(d => dirs[d]);\n  },\n\n  _setupTarget() {\n    this.targetEl = this.el.querySelector(this.data.target);\n    if (!this.targetEl) {\n      console.warn(`Race condition on position-at-box-shape-border on selector ${this.data.target}`);\n      return;\n    }\n\n    this.target = this.targetEl.object3D;\n\n    this.targetEl.addEventListener(\"animationcomplete\", () => {\n      this.targetEl.removeAttribute(\"animation__show\");\n    });\n\n    this.target.scale.setScalar(0.01); // To avoid \"pop\" of gigantic button first time\n    this.target.matrixNeedsUpdate = true;\n  },\n\n  tick() {\n    if (!this.target) {\n      this._setupTarget();\n      return;\n    }\n\n    if (!this.el.getObject3D(\"mesh\")) {\n      return;\n    }\n\n    const isVisible = this.targetEl.object3D.visible;\n    const opening = isVisible && !this.wasVisible;\n    const scaleChanged =\n      this.el.object3D.scale.x !== this.previousScaleX ||\n      this.el.object3D.scale.y !== this.previousScaleY ||\n      this.el.object3D.scale.z !== this.previousScaleZ;\n    const isAnimating = this.targetEl.getAttribute(\"animation__show\");\n\n    // If the target is being shown or the scale changed while the opening animation is being run,\n    // we need to start or re-start the animation.\n    if (opening || (scaleChanged && isAnimating)) {\n      this._updateBox(this.data.animate, true);\n    }\n\n    this.wasVisible = isVisible;\n    this.previousScaleX = this.el.object3D.scale.x;\n    this.previousScaleY = this.el.object3D.scale.y;\n    this.previousScaleZ = this.el.object3D.scale.z;\n  },\n\n  _updateBox: (function() {\n    const camWorldPos = new THREE.Vector3();\n    const targetPosition = new THREE.Vector3();\n    const pointOnBoxFace = new THREE.Vector3();\n    const pointOnBoxFaceToCamera = new THREE.Vector3();\n    const boxCenter = new THREE.Vector3();\n    const tempParentWorldScale = new THREE.Vector3();\n    const boxFaceNormal = new THREE.Vector3();\n    const min = new THREE.Vector3(0.001, 0.001, 0.001);\n\n    return function(animate, forceNewExtents) {\n      if (forceNewExtents || this.mesh !== this.el.getObject3D(\"mesh\")) {\n        this.mesh = this.el.getObject3D(\"mesh\");\n\n        const box = getBox(this.el, this.mesh);\n        this.halfExtents = box.min\n          .clone()\n          .negate()\n          .add(box.max)\n          .multiplyScalar(0.65);\n\n        this.halfExtents.max(min);\n      }\n\n      if (!this.target) return;\n\n      getLastWorldPosition(this.cam, camWorldPos);\n\n      let targetSquareDistance = Infinity;\n      let targetDir = this.dirs[0].dir;\n      let targetHalfExtentStr = this.dirs[0].halfExtent;\n      let targetHalfExtent = this.halfExtents[targetHalfExtentStr];\n      let targetRotation = this.dirs[0].rotation;\n      let targetCameraDot = -1.1;\n\n      this.el.object3D.updateMatrices();\n\n      for (let i = 0; i < this.dirs.length; i++) {\n        const dir = this.dirs[i].dir;\n        const halfExtentStr = this.dirs[i].halfExtent;\n        const halfExtent = this.halfExtents[halfExtentStr];\n        pointOnBoxFace.copy(dir).multiplyScalar(halfExtent);\n        boxCenter.copy(zero);\n\n        this.el.object3D.localToWorld(pointOnBoxFace);\n        this.el.object3D.localToWorld(boxCenter);\n\n        pointOnBoxFaceToCamera.subVectors(camWorldPos, pointOnBoxFace);\n        pointOnBoxFaceToCamera.normalize();\n\n        boxFaceNormal.subVectors(pointOnBoxFace, boxCenter);\n        boxFaceNormal.normalize();\n\n        // Compute dot between camera + box normal to ensure menus are going to be\n        // somewhat perpendicular to camera frustum\n        const cameraAngleDotBoxNormal = boxFaceNormal.dot(pointOnBoxFaceToCamera);\n\n        const squareDistance = pointOnBoxFace.distanceToSquared(camWorldPos);\n        if (cameraAngleDotBoxNormal > targetCameraDot) {\n          targetSquareDistance = squareDistance;\n          targetDir = dir;\n          targetHalfExtent = halfExtent;\n          targetRotation = this.dirs[i].rotation;\n          targetHalfExtentStr = halfExtentStr;\n          targetCameraDot = cameraAngleDotBoxNormal;\n        }\n      }\n\n      this.target.position.copy(targetPosition.copy(targetDir).multiplyScalar(targetHalfExtent));\n      this.target.rotation.set(0, targetRotation, 0);\n\n      tempParentWorldScale.setFromMatrixScale(this.target.parent.matrixWorld);\n\n      const distance = Math.sqrt(targetSquareDistance);\n      const scale = Math.max(this.halfExtents.x, this.halfExtents.z) * distance;\n      const targetScale = Math.min(2.0, Math.max(0.5, scale * tempParentWorldScale.x));\n      const finalScale = this.data.scale ? targetScale / tempParentWorldScale.x : 1;\n\n      if (animate) {\n        this.targetEl.removeAttribute(\"animation__show\");\n\n        this.targetEl.setAttribute(\"animation__show\", {\n          property: \"scale\",\n          dur: 300,\n          from: { x: finalScale * 0.8, y: finalScale * 0.8, z: finalScale * 0.8 },\n          to: { x: finalScale, y: finalScale, z: finalScale },\n          easing: \"easeOutElastic\"\n        });\n      } else if (!this.targetEl.getAttribute(\"animation__show\")) {\n        this.target.scale.setScalar(finalScale);\n      }\n\n      this.target.matrixNeedsUpdate = true;\n    };\n  })()\n});\n","import { getPromotionTokenForFile } from \"../utils/media-utils\";\nimport { SOUND_PIN } from \"../systems/sound-effects-system\";\n\nAFRAME.registerComponent(\"pin-networked-object-button\", {\n  schema: {\n    // Selector for label informing users about Discord bridging of pins.\n    tipSelector: { type: \"string\" },\n\n    // Selector for label to change when pinned/unpinned, must be sibling of this components element\n    labelSelector: { type: \"string\" },\n\n    // Selector for items to hide iff pinned\n    hideWhenPinnedSelector: { type: \"string\" }\n  },\n\n  init() {\n    this._updateUI = this._updateUI.bind(this);\n    this._updateUIOnStateChange = this._updateUIOnStateChange.bind(this);\n    this.el.sceneEl.addEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    this.tipEl = this.el.parentNode.querySelector(this.data.tipSelector);\n    this.labelEl = this.el.parentNode.querySelector(this.data.labelSelector);\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n\n      this._updateUI();\n      this.targetEl.addEventListener(\"pinned\", this._updateUI);\n      this.targetEl.addEventListener(\"unpinned\", this._updateUI);\n    });\n\n    this.onHovered = () => {\n      this.hovering = true;\n      this._updateUI();\n    };\n\n    this.onUnhovered = () => {\n      this.hovering = false;\n      this._updateUI();\n    };\n\n    this.onClick = () => {\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) return;\n\n      const wasPinned = this.targetEl.components.pinnable && this.targetEl.components.pinnable.data.pinned;\n      this.targetEl.setAttribute(\"pinnable\", \"pinned\", !wasPinned);\n      if (!wasPinned) {\n        this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_PIN);\n      }\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n    this.el.object3D.addEventListener(\"hovered\", this.onHovered);\n    this.el.object3D.addEventListener(\"unhovered\", this.onUnhovered);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n    this.el.object3D.removeEventListener(\"hovered\", this.onHovered);\n    this.el.object3D.removeEventListener(\"unhovered\", this.onUnhovered);\n  },\n\n  remove() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    if (this.targetEl) {\n      this.targetEl.removeEventListener(\"pinned\", this._updateUI);\n      this.targetEl.removeEventListener(\"unpinned\", this._updateUI);\n    }\n  },\n\n  _discordBridges() {\n    const presences = window.APP.hubChannel.presence.state;\n    if (!presences) {\n      return [];\n    } else {\n      const channels = [];\n      for (const p of Object.values(presences)) {\n        for (const m of p.metas) {\n          if (m.profile && m.profile.discordBridges) {\n            Array.prototype.push.apply(channels, m.profile.discordBridges.map(b => b.channel.name));\n          }\n        }\n      }\n      return channels;\n    }\n  },\n\n  _updateUIOnStateChange(e) {\n    if (e.detail !== \"frozen\") return;\n    this._updateUI();\n  },\n\n  _updateUI() {\n    const { fileIsOwned, fileId } = this.targetEl.components[\"media-loader\"].data;\n    const canPin = !!(fileIsOwned || (fileId && getPromotionTokenForFile(fileId)));\n    this.el.setAttribute(\"visible\", canPin);\n    this.labelEl.setAttribute(\"visible\", canPin);\n\n    const isPinned = this.targetEl.getAttribute(\"pinnable\") && this.targetEl.getAttribute(\"pinnable\").pinned;\n    const discordBridges = this._discordBridges();\n    this.tipEl.setAttribute(\"visible\", !!(canPin && !isPinned && this.hovering && discordBridges.length > 0));\n\n    if (!canPin) return;\n    this.labelEl.setAttribute(\"text\", \"value\", isPinned ? \"un-pin\" : \"pin\");\n    this.el.setAttribute(\"text-button\", \"backgroundColor\", isPinned ? \"#fff\" : \"#ff3550\");\n    this.el.setAttribute(\"text-button\", \"backgroundHoverColor\", isPinned ? \"#bbb\" : \"#fc3545\");\n\n    this.el.parentNode.querySelectorAll(this.data.hideWhenPinnedSelector).forEach(hideEl => {\n      hideEl.setAttribute(\"visible\", !isPinned);\n    });\n  }\n});\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\n\nAFRAME.registerComponent(\"unmute-video-button\", {\n  init() {\n    this.onClick = () => {\n      const videoEl = findAncestorWithComponent(this.el, \"media-video\");\n      const mediaVideo = videoEl.components[\"media-video\"];\n      if (!mediaVideo || !mediaVideo.video || !mediaVideo.videoMutedAt) return;\n\n      // iOS initially plays the sound and *then* mutes it, and sometimes a second video playing\n      // can break all sound in the app. (Likely a Safari bug.) Adding a delay before the unmute\n      // occurs seems to help with reducing this.\n      if (performance.now() - mediaVideo.videoMutedAt < 3000) {\n        return;\n      }\n\n      if (mediaVideo.video.muted) {\n        mediaVideo.video.muted = false;\n        this.el.setAttribute(\"visible\", false);\n      }\n    };\n  },\n\n  play() {\n    // Safari won't accept grab-start or even mousedown as user-initiated gestures,\n    // so we have to use a global touchstart event here.\n    document.addEventListener(\"touchstart\", this.onClick);\n  },\n\n  pause() {\n    document.removeEventListener(\"touchstart\", this.onClick);\n  }\n});\n","import { getLastWorldPosition } from \"../utils/three-utils\";\n\nAFRAME.registerComponent(\"destroy-at-extreme-distances\", {\n  schema: {\n    xMin: { default: -1000 },\n    xMax: { default: 1000 },\n    yMin: { default: -1000 },\n    yMax: { default: 1000 },\n    zMin: { default: -1000 },\n    zMax: { default: 1000 }\n  },\n\n  init() {\n    this._checkForDestroy = this._checkForDestroy.bind(this);\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._checkForDestroy, \"media-components\");\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._checkForDestroy, \"media-components\");\n  },\n\n  _checkForDestroy: (function() {\n    const pos = new THREE.Vector3();\n    return function() {\n      const { xMin, xMax, yMin, yMax, zMin, zMax } = this.data;\n      getLastWorldPosition(this.el.object3D, pos);\n\n      if (pos.x < xMin || pos.x > xMax || pos.y < yMin || pos.y > yMax || pos.z < zMin || pos.z > zMax) {\n        if (!this.el.components.networked || NAF.utils.isMine(this.el)) {\n          this.el.parentNode.removeChild(this.el);\n        }\n      }\n    };\n  })()\n});\n","import { spawnMediaAround } from \"../utils/media-utils\";\nimport { createImageBitmap } from \"../utils/image-bitmap-utils\";\nimport { ObjectTypes } from \"../object-types\";\nimport { paths } from \"../systems/userinput/paths\";\nimport { SOUND_CAMERA_TOOL_TOOK_SNAPSHOT } from \"../systems/sound-effects-system\";\n\nimport cameraModelSrc from \"../assets/camera_tool.glb\";\n\nconst cameraModelPromise = new Promise(resolve => new THREE.GLTFLoader().load(cameraModelSrc, resolve));\n\nconst pathsMap = {\n  \"player-right-controller\": {\n    takeSnapshot: paths.actions.rightHand.takeSnapshot\n  },\n  \"player-left-controller\": {\n    takeSnapshot: paths.actions.leftHand.takeSnapshot\n  },\n  cursor: {\n    takeSnapshot: paths.actions.cursor.takeSnapshot\n  }\n};\n\nconst snapCanvas = document.createElement(\"canvas\");\nasync function pixelsToPNG(pixels, width, height) {\n  snapCanvas.width = width;\n  snapCanvas.height = height;\n  const context = snapCanvas.getContext(\"2d\");\n\n  const imageData = context.createImageData(width, height);\n  imageData.data.set(pixels);\n  const bitmap = await createImageBitmap(imageData);\n  context.scale(1, -1);\n  context.drawImage(bitmap, 0, -height);\n  const blob = await new Promise(resolve => snapCanvas.toBlob(resolve));\n  return new File([blob], \"snap.png\", { type: \"image/png\" });\n}\n\n// Don't show camera viewports on mobile VR to same framerate.\nconst enableCameraViewport = !AFRAME.utils.device.isMobileVR();\n\nAFRAME.registerComponent(\"camera-tool\", {\n  schema: {\n    previewFPS: { default: 6 },\n    imageWidth: { default: 1024 },\n    imageHeight: { default: 1024 / (16 / 9) }\n  },\n\n  init() {\n    this.lastUpdate = performance.now();\n    this.localSnapCount = 0; // Counter that is used to arrange photos\n\n    this.renderTarget = new THREE.WebGLRenderTarget(this.data.imageWidth, this.data.imageHeight, {\n      format: THREE.RGBAFormat,\n      minFilter: THREE.LinearFilter,\n      magFilter: THREE.NearestFilter,\n      encoding: THREE.sRGBEncoding,\n      depth: false,\n      stencil: false\n    });\n\n    this.camera = new THREE.PerspectiveCamera(50, this.renderTarget.width / this.renderTarget.height, 0.1, 30000);\n    this.camera.rotation.set(0, Math.PI, 0);\n    this.camera.position.set(0, 0, 0.05);\n    this.camera.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"camera\", this.camera);\n\n    const material = new THREE.MeshBasicMaterial({\n      map: this.renderTarget.texture\n    });\n\n    // Bit of a hack here to only update the renderTarget when the screens are in view and at a reduced FPS\n    material.map.isVideoTexture = true;\n    material.map.update = () => {\n      if (enableCameraViewport && performance.now() - this.lastUpdate >= 1000 / this.data.previewFPS) {\n        this.updateRenderTargetNextTick = true;\n      }\n    };\n\n    cameraModelPromise.then(model => {\n      const mesh = model.scene.clone();\n      mesh.scale.set(2, 2, 2);\n      mesh.matrixNeedsUpdate = true;\n      this.el.setObject3D(\"mesh\", mesh);\n\n      const width = 0.28;\n      const geometry = new THREE.PlaneBufferGeometry(width, width / this.camera.aspect);\n\n      const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n      if (environmentMapComponent) {\n        environmentMapComponent.applyEnvironmentMap(this.el.object3D);\n      }\n\n      if (enableCameraViewport) {\n        const screen = new THREE.Mesh(geometry, material);\n        screen.rotation.set(0, Math.PI, 0);\n        screen.position.set(0, 0, -0.042);\n        screen.matrixNeedsUpdate = true;\n        this.el.setObject3D(\"screen\", screen);\n\n        const selfieScreen = new THREE.Mesh(geometry, material);\n        selfieScreen.position.set(0, 0.4, 0);\n        selfieScreen.scale.set(-2, 2, 2);\n        selfieScreen.matrixNeedsUpdate = true;\n        this.el.setObject3D(\"selfieScreen\", selfieScreen);\n\n        this.updateRenderTargetNextTick = true;\n      }\n\n      this.cameraSystem = this.el.sceneEl.systems[\"camera-tools\"];\n      this.cameraSystem.register(this.el);\n    });\n\n    this.el.setAttribute(\"hover-menu__camera\", { template: \"#camera-hover-menu\", dirs: [\"forward\", \"back\"] });\n    this.el.components[\"hover-menu__camera\"].getHoverMenu().then(() => {\n      this.snapButton = this.el.querySelector(\".snap-button\");\n      this.snapButton.object3D.addEventListener(\"interact\", () => {\n        this.takeSnapshotNextTick = true;\n      });\n    });\n  },\n\n  remove() {\n    this.cameraSystem.deregister(this.el);\n    this.el.sceneEl.systems[\"camera-mirror\"].unmirrorCameraAtEl(this.el);\n    this.el.sceneEl.emit(\"camera_removed\");\n  },\n\n  focus(el, track) {\n    if (track) {\n      this.trackTarget = el;\n    } else {\n      this.trackTarget = null;\n    }\n\n    this.lookAt(el);\n  },\n\n  lookAt: (function() {\n    const targetPos = new THREE.Vector3();\n    return function(el) {\n      targetPos.setFromMatrixPosition(el.object3D.matrixWorld);\n      this.el.object3D.lookAt(targetPos);\n      this.el.object3D.matrixNeedsUpdate = true;\n    };\n  })(),\n\n  mirror() {\n    this.el.sceneEl.systems[\"camera-mirror\"].mirrorCameraAtEl(this.el);\n  },\n\n  unmirror() {\n    this.el.sceneEl.systems[\"camera-mirror\"].unmirrorCameraAtEl(this.el);\n  },\n\n  onAvatarUpdated() {\n    delete this.playerHead;\n  },\n\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const heldLeftHand = interaction.state.leftHand.held === this.el;\n    const heldRightHand = interaction.state.rightHand.held === this.el;\n    const heldRightRemote = interaction.state.rightRemote.held === this.el;\n    if (\n      (heldLeftHand && userinput.get(interaction.options.leftHand.grabPath)) ||\n      (heldRightHand && userinput.get(interaction.options.rightHand.grabPath)) ||\n      (heldRightRemote && userinput.get(interaction.options.rightRemote.grabPath))\n    ) {\n      this.localSnapCount = 0;\n    }\n\n    let grabberId;\n    if (heldRightHand) {\n      grabberId = \"player-right-controller\";\n    } else if (heldLeftHand) {\n      grabberId = \"player-left-controller\";\n    } else if (heldRightRemote) {\n      grabberId = \"cursor\";\n    }\n    if (grabberId) {\n      const grabberPaths = pathsMap[grabberId];\n      if (userinput.get(grabberPaths.takeSnapshot)) {\n        this.takeSnapshotNextTick = true;\n      }\n    }\n\n    if (userinput.get(paths.actions.takeSnapshot)) {\n      this.takeSnapshotNextTick = true;\n    }\n  },\n\n  tock: (function() {\n    const tempHeadScale = new THREE.Vector3();\n\n    return function tock() {\n      const sceneEl = this.el.sceneEl;\n      const renderer = this.renderer || sceneEl.renderer;\n      const now = performance.now();\n\n      // Perform lookAt in tock so it will re-orient after grabs, etc.\n      if (this.trackTarget) {\n        if (this.trackTarget.parentNode) {\n          this.lookAt(this.trackTarget);\n        } else {\n          this.trackTarget = null; // Target removed\n        }\n      }\n\n      if (!this.playerHead) {\n        const headEl = document.getElementById(\"player-head\");\n        this.playerHead = headEl && headEl.object3D;\n      }\n\n      if (!this.playerHud) {\n        const hudEl = document.getElementById(\"player-hud\");\n        this.playerHud = hudEl && hudEl.object3D;\n      }\n\n      if (this.takeSnapshotNextTick || this.updateRenderTargetNextTick) {\n        if (this.playerHead) {\n          tempHeadScale.copy(this.playerHead.scale);\n          this.playerHead.scale.set(1, 1, 1);\n          this.playerHead.updateMatrices(true, true);\n          this.playerHead.updateMatrixWorld(true, true);\n        }\n\n        let playerHudWasVisible = false;\n\n        if (this.playerHud) {\n          playerHudWasVisible = this.playerHud.visible;\n          this.playerHud.visible = false;\n          if (this.el.sceneEl.systems[\"post-physics\"]) {\n            this.el.sceneEl.systems[\"post-physics\"].spriteSystem.mesh.visible = false;\n          }\n        }\n\n        const tmpVRFlag = renderer.vr.enabled;\n        const tmpOnAfterRender = sceneEl.object3D.onAfterRender;\n        delete sceneEl.object3D.onAfterRender;\n        renderer.vr.enabled = false;\n\n        renderer.setRenderTarget(this.renderTarget);\n        renderer.render(sceneEl.object3D, this.camera);\n        renderer.setRenderTarget(null);\n\n        renderer.vr.enabled = tmpVRFlag;\n        sceneEl.object3D.onAfterRender = tmpOnAfterRender;\n        if (this.playerHead) {\n          this.playerHead.scale.copy(tempHeadScale);\n          this.playerHead.updateMatrices(true, true);\n          this.playerHead.updateMatrixWorld(true, true);\n        }\n        if (this.playerHud) {\n          this.playerHud.visible = playerHudWasVisible;\n          if (this.el.sceneEl.systems[\"post-physics\"]) {\n            this.el.sceneEl.systems[\"post-physics\"].spriteSystem.mesh.visible = true;\n          }\n        }\n        this.lastUpdate = now;\n        this.updateRenderTargetNextTick = false;\n      }\n\n      if (this.takeSnapshotNextTick) {\n        const width = this.renderTarget.width;\n        const height = this.renderTarget.height;\n        if (!this.snapPixels) {\n          this.snapPixels = new Uint8Array(width * height * 4);\n        }\n        renderer.readRenderTargetPixels(this.renderTarget, 0, 0, width, height, this.snapPixels);\n        pixelsToPNG(this.snapPixels, width, height).then(file => {\n          const { orientation } = spawnMediaAround(this.el, file, this.localSnapCount, true);\n\n          orientation.then(() => {\n            this.el.sceneEl.emit(\"object_spawned\", { objectType: ObjectTypes.CAMERA });\n          });\n        });\n        sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_TOOK_SNAPSHOT);\n        this.takeSnapshotNextTick = false;\n        this.localSnapCount++;\n      }\n    };\n  })()\n});\n","import { addMedia } from \"../utils/media-utils\";\nimport { ObjectContentOrigins } from \"../object-types\";\nimport { guessContentType } from \"../utils/media-url-utils\";\n\nAFRAME.registerComponent(\"clone-media-button\", {\n  init() {\n    this.updateSrc = () => {\n      const src = (this.src = this.targetEl.components[\"media-loader\"].data.src);\n      const visible = src && guessContentType(src) !== \"video/vnd.hubs-webrtc\";\n      this.el.object3D.visible = !!visible;\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n      this.targetEl.addEventListener(\"media_resolved\", this.updateSrc, { once: true });\n      this.updateSrc();\n    });\n\n    this.onClick = () => {\n      const src = this.src;\n      const { resize } = this.targetEl.components[\"media-loader\"].data;\n      const { entity } = addMedia(src, \"#interactable-media\", ObjectContentOrigins.URL, true, resize);\n\n      entity.object3D.matrixNeedsUpdate = true;\n\n      entity.setAttribute(\"offset-relative-to\", {\n        target: \"#player-camera\",\n        offset: { x: 0, y: 0, z: -1.5 }\n      });\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","import { isHubsSceneUrl, isHubsRoomUrl, isHubsAvatarUrl } from \"../utils/media-url-utils\";\nimport { guessContentType } from \"../utils/media-url-utils\";\n\nAFRAME.registerComponent(\"open-media-button\", {\n  init() {\n    this.label = this.el.querySelector(\"[text]\");\n\n    this.updateSrc = () => {\n      const src = (this.src = this.targetEl.components[\"media-loader\"].data.src);\n      const visible = src && guessContentType(src) !== \"video/vnd.hubs-webrtc\";\n      const mayChangeScene = this.el.sceneEl.systems.permissions.canOrWillIfCreator(\"update_hub\");\n\n      this.el.object3D.visible = !!visible;\n\n      if (visible) {\n        let label = \"open link\";\n        if (isHubsAvatarUrl(src)) {\n          label = \"use avatar\";\n        } else if (isHubsSceneUrl(src) && mayChangeScene) {\n          label = \"use scene\";\n        } else if (isHubsRoomUrl(src)) {\n          label = \"visit room\";\n        }\n        this.label.setAttribute(\"text\", \"value\", label);\n      }\n    };\n\n    this.onClick = () => {\n      const mayChangeScene = this.el.sceneEl.systems.permissions.canOrWillIfCreator(\"update_hub\");\n\n      if (isHubsAvatarUrl(this.src)) {\n        const avatarId = new URL(this.src).pathname.split(\"/\").pop();\n        window.APP.store.update({ profile: { avatarId } });\n      } else if (isHubsSceneUrl(this.src) && mayChangeScene) {\n        this.el.sceneEl.emit(\"scene_media_selected\", this.src);\n      } else if (isHubsRoomUrl(this.src)) {\n        location.href = this.src;\n      } else {\n        window.open(this.src);\n      }\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n      this.targetEl.addEventListener(\"media_resolved\", this.updateSrc, { once: true });\n      this.updateSrc();\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\nconst AMMO_BODY_ATTRIBUTES = { type: \"kinematic\", collisionFilterMask: COLLISION_LAYERS.HANDS };\n\nconst TRANSFORM_MODE = {\n  AXIS: \"axis\",\n  PUPPET: \"puppet\",\n  CURSOR: \"cursor\",\n  ALIGN: \"align\",\n  SCALE: \"scale\"\n};\n\nconst SCALE_SENSITIVITY = 100;\nconst MIN_SCALE = 0.1;\nconst MAX_SCALE = 100;\n\nconst STEP_LENGTH = Math.PI / 10;\nconst CAMERA_WORLD_QUATERNION = new THREE.Quaternion();\nconst CAMERA_WORLD_POSITION = new THREE.Vector3();\nconst TARGET_WORLD_QUATERNION = new THREE.Quaternion();\nconst v = new THREE.Vector3();\nconst v2 = new THREE.Vector3();\nconst q = new THREE.Quaternion();\nconst q2 = new THREE.Quaternion();\n\nAFRAME.registerComponent(\"transform-button\", {\n  schema: {\n    mode: {\n      type: \"string\",\n      oneof: Object.values(TRANSFORM_MODE),\n      default: TRANSFORM_MODE.CURSOR\n    },\n    axis: { type: \"vec3\", default: null }\n  },\n  init() {\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n    });\n    const rightHand = document.querySelector(\"#player-right-controller\");\n    this.onGrabStart = e => {\n      if (!this.targetEl) {\n        return;\n      }\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) {\n        return;\n      }\n      if (this.targetEl.body) {\n        this.targetEl.setAttribute(\"ammo-body\", AMMO_BODY_ATTRIBUTES);\n      }\n      this.transformSystem = this.transformSystem || AFRAME.scenes[0].systems[\"transform-selected-object\"];\n      this.transformSystem.startTransform(\n        this.targetEl.object3D,\n        e.object3D.el.id === \"cursor\" ? rightHand.object3D : e.object3D,\n        this.data\n      );\n    };\n    this.onGrabEnd = () => {\n      this.transformSystem = this.transformSystem || AFRAME.scenes[0].systems[\"transform-selected-object\"];\n      this.transformSystem.stopTransform();\n    };\n  },\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onGrabStart);\n    this.el.object3D.addEventListener(\"holdable-button-down\", this.onGrabStart);\n    this.el.object3D.addEventListener(\"holdable-button-up\", this.onGrabEnd);\n  },\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onGrabStart);\n    this.el.object3D.removeEventListener(\"holdable-button-down\", this.onGrabStart);\n    this.el.object3D.removeEventListener(\"holdable-button-up\", this.onGrabEnd);\n  }\n});\n\nAFRAME.registerSystem(\"transform-selected-object\", {\n  init() {\n    this.target = null;\n    this.mode = null;\n    this.transforming = false;\n    this.axis = new THREE.Vector3();\n    this.store = window.APP.store;\n\n    this.dxStore = 0;\n    this.dxApplied = 0;\n    this.dyAll = 0;\n    this.dyStore = 0;\n    this.dyApplied = 0;\n\n    this.puppet = {\n      initialControllerOrientation: new THREE.Quaternion(),\n      initialControllerOrientation_inverse: new THREE.Quaternion(),\n      initialObjectOrientation: new THREE.Quaternion(),\n      currentControllerOrientation: new THREE.Quaternion(),\n      controllerOrientationDelta: new THREE.Quaternion()\n    };\n\n    this.planarInfo = {\n      plane: new THREE.Mesh(\n        new THREE.PlaneBufferGeometry(100000, 100000, 2, 2),\n        new THREE.MeshBasicMaterial({\n          visible: false,\n          wireframe: true,\n          side: THREE.DoubleSide,\n          transparent: true,\n          opacity: 0.3\n        })\n      ),\n      normal: new THREE.Vector3(),\n      intersections: [],\n      previousPointOnPlane: new THREE.Vector3(),\n      currentPointOnPlane: new THREE.Vector3(),\n      deltaOnPlane: new THREE.Vector3(),\n      finalProjectedVec: new THREE.Vector3()\n    };\n    this.el.object3D.add(this.planarInfo.plane);\n  },\n\n  stopTransform() {\n    this.transforming = false;\n  },\n\n  startPlaneCasting() {\n    const { plane, intersections, previousPointOnPlane } = this.planarInfo;\n\n    this.el.camera.getWorldQuaternion(CAMERA_WORLD_QUATERNION);\n    plane.quaternion.copy(CAMERA_WORLD_QUATERNION);\n    this.target.getWorldPosition(plane.position);\n    plane.matrixNeedsUpdate = true;\n    plane.updateMatrixWorld(true);\n\n    intersections.length = 0;\n    this.raycaster =\n      this.raycaster || document.querySelector(\"#cursor-controller\").components[\"cursor-controller\"].raycaster;\n    const far = this.raycaster.far;\n    this.raycaster.far = 1000;\n    plane.raycast(this.raycaster, intersections);\n    this.raycaster.far = far;\n    this.transforming = !!intersections[0];\n    if (!this.transforming) {\n      return;\n    }\n\n    previousPointOnPlane.copy(intersections[0].point);\n\n    this.target.getWorldQuaternion(TARGET_WORLD_QUATERNION);\n\n    v.set(0, 0, -1).applyQuaternion(CAMERA_WORLD_QUATERNION);\n    v2.set(0, 0, -1).applyQuaternion(TARGET_WORLD_QUATERNION);\n    this.sign = v.dot(v2) > 0 ? 1 : -1;\n\n    v.set(0, 1, 0); //.applyQuaternion(this.CAMERA_WORLD_QUATERNION);\n    v2.set(0, 1, 0).applyQuaternion(TARGET_WORLD_QUATERNION);\n    this.sign2 = v.dot(v2) > 0 ? 1 : -1;\n\n    this.dyAll = 0;\n    this.dyStore = 0;\n    this.dyApplied = 0;\n    this.dxAll = 0;\n    this.dxStore = 0;\n    this.dxApplied = 0;\n  },\n\n  startTransform(target, hand, data) {\n    this.target = target;\n    this.hand = hand;\n    this.mode = data.mode;\n    this.transforming = true;\n\n    if (this.mode === TRANSFORM_MODE.ALIGN) {\n      this.store.update({ activity: { hasRecentered: true } });\n      return;\n    } else if (this.mode === TRANSFORM_MODE.SCALE) {\n      this.store.update({ activity: { hasScaled: true } });\n    } else {\n      this.store.update({ activity: { hasRotated: true } });\n    }\n\n    if (this.mode === TRANSFORM_MODE.PUPPET) {\n      this.target.getWorldQuaternion(this.puppet.initialObjectOrientation);\n      this.hand.getWorldQuaternion(this.puppet.initialControllerOrientation);\n      this.puppet.initialControllerOrientation_inverse.copy(this.puppet.initialControllerOrientation).inverse();\n      return;\n    }\n\n    if (this.mode === TRANSFORM_MODE.AXIS) {\n      this.axis.copy(data.axis);\n    }\n\n    this.startPlaneCasting();\n  },\n\n  puppetingTick() {\n    // Find controller delta as a quaternion, then apply it to the object, snapping in fixed increments if desired:\n    // Snap to fixed angle increments by converting to an Euler,\n    // restricting the angles using Math.floor, and converting back to a quaternion.\n    const {\n      currentControllerOrientation,\n      controllerOrientationDelta,\n      initialControllerOrientation_inverse,\n      initialObjectOrientation\n    } = this.puppet;\n    this.hand.getWorldQuaternion(currentControllerOrientation);\n    controllerOrientationDelta.copy(initialControllerOrientation_inverse).premultiply(currentControllerOrientation);\n    this.target.quaternion.copy(initialObjectOrientation).premultiply(controllerOrientationDelta);\n    this.target.matrixNeedsUpdate = true;\n  },\n\n  cursorAxisOrScaleTick() {\n    const {\n      plane,\n      normal,\n      intersections,\n      previousPointOnPlane,\n      currentPointOnPlane,\n      deltaOnPlane,\n      finalProjectedVec\n    } = this.planarInfo;\n\n    this.target.getWorldPosition(plane.position);\n    this.el.camera.getWorldQuaternion(plane.quaternion);\n    plane.matrixNeedsUpdate = true;\n    const cameraToPlaneDistance = v.sub(plane.position).length();\n\n    intersections.length = 0;\n    const far = this.raycaster.far;\n    this.raycaster.far = 1000;\n    plane.raycast(this.raycaster, intersections);\n    this.raycaster.far = far;\n    const intersection = intersections[0]; // point\n    if (!intersection) return;\n\n    normal.set(0, 0, -1).applyQuaternion(plane.quaternion);\n\n    currentPointOnPlane.copy(intersection.point);\n    deltaOnPlane.copy(currentPointOnPlane).sub(previousPointOnPlane);\n    const SENSITIVITY = 10;\n    finalProjectedVec\n      .copy(deltaOnPlane)\n      .projectOnPlane(normal)\n      .applyQuaternion(q.copy(plane.quaternion).inverse())\n      .multiplyScalar(SENSITIVITY / cameraToPlaneDistance);\n    if (this.mode === TRANSFORM_MODE.CURSOR || this.mode === TRANSFORM_MODE.SCALE) {\n      const modify = AFRAME.scenes[0].systems.userinput.get(paths.actions.transformModifier);\n\n      this.dyAll = this.dyStore + finalProjectedVec.y;\n      this.dyApplied = modify ? this.dyAll : Math.round(this.dyAll / STEP_LENGTH) * STEP_LENGTH;\n      this.dyStore = this.dyAll - this.dyApplied;\n\n      this.dxAll = this.dxStore + finalProjectedVec.x;\n      this.dxApplied = modify ? this.dxAll : Math.round(this.dxAll / STEP_LENGTH) * STEP_LENGTH;\n      this.dxStore = this.dxAll - this.dxApplied;\n\n      if (this.mode === TRANSFORM_MODE.CURSOR) {\n        this.target.getWorldQuaternion(TARGET_WORLD_QUATERNION);\n        v.set(1, 0, 0).applyQuaternion(modify ? CAMERA_WORLD_QUATERNION : TARGET_WORLD_QUATERNION);\n        q.setFromAxisAngle(v, modify ? -this.dyApplied : this.sign2 * this.sign * -this.dyApplied);\n\n        if (modify) {\n          v.set(0, 1, 0).applyQuaternion(CAMERA_WORLD_QUATERNION);\n        } else {\n          v.set(0, 1, 0);\n        }\n        q2.setFromAxisAngle(v, this.dxApplied);\n\n        this.target.quaternion.premultiply(q).premultiply(q2);\n      } else {\n        const scaleFactor =\n          THREE.Math.clamp(finalProjectedVec.y + finalProjectedVec.x, -0.0005, 0.0005) * SCALE_SENSITIVITY;\n\n        const newScale = this.target.scale.x * (1.0 + scaleFactor);\n\n        if (newScale > MIN_SCALE && newScale < MAX_SCALE) {\n          this.target.scale.multiplyScalar(1.0 + scaleFactor);\n        }\n      }\n\n      this.target.matrixNeedsUpdate = true;\n    } else if (this.mode === TRANSFORM_MODE.AXIS) {\n      this.dxAll = this.dxStore + finalProjectedVec.x;\n      this.dxApplied = Math.round(this.dxAll / STEP_LENGTH) * STEP_LENGTH;\n      this.dxStore = this.dxAll - this.dxApplied;\n\n      this.target.quaternion.multiply(q.setFromAxisAngle(this.axis, -this.sign * this.dxApplied));\n      this.target.matrixNeedsUpdate = true;\n    }\n\n    previousPointOnPlane.copy(currentPointOnPlane);\n  },\n\n  tick() {\n    if (!this.transforming) {\n      return;\n    }\n\n    if (this.mode === TRANSFORM_MODE.ALIGN) {\n      this.el.camera.getWorldPosition(CAMERA_WORLD_POSITION);\n      this.target.lookAt(CAMERA_WORLD_POSITION);\n      this.transforming = false;\n      return;\n    }\n\n    if (this.mode === TRANSFORM_MODE.PUPPET) {\n      this.puppetingTick();\n      return;\n    }\n    this.cursorAxisOrScaleTick();\n  }\n});\n\nAFRAME.registerComponent(\"transform-button-selector\", {\n  tick() {\n    const hand = AFRAME.scenes[0].systems.userinput.get(paths.actions.rightHand.pose);\n    if (!hand) {\n      if (this.el.components[\"transform-button\"].data.mode !== TRANSFORM_MODE.CURSOR) {\n        this.el.setAttribute(\"transform-button\", \"mode\", TRANSFORM_MODE.CURSOR);\n      }\n    } else {\n      if (this.el.components[\"transform-button\"].data.mode !== TRANSFORM_MODE.PUPPET) {\n        this.el.setAttribute(\"transform-button\", \"mode\", TRANSFORM_MODE.PUPPET);\n      }\n    }\n  }\n});\n\nconst FORWARD = new THREE.Vector3(0, 0, 1);\nconst TWO_PI = 2 * Math.PI;\nAFRAME.registerComponent(\"visible-if-transforming\", {\n  init() {},\n  tick(t) {\n    const shouldBeVisible = AFRAME.scenes[0].systems[\"transform-selected-object\"].transforming;\n    const visibleNeedsUpdate = this.el.getAttribute(\"visible\") !== shouldBeVisible;\n    if (visibleNeedsUpdate) {\n      this.el.setAttribute(\"visible\", AFRAME.scenes[0].systems[\"transform-selected-object\"].transforming);\n    }\n\n    if (shouldBeVisible) {\n      this.el.object3D.quaternion.setFromAxisAngle(FORWARD, TWO_PI * Math.sin(t / 1000.0));\n      this.el.object3D.matrixNeedsUpdate = true;\n    }\n  }\n});\n","const CYLINDER_TEXTURE =\n  \"data:image/png;base64,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\";\n\nimport { SOUND_TELEPORT_START, SOUND_TELEPORT_END } from \"../systems/sound-effects-system\";\n\nfunction easeIn(t) {\n  return t * t;\n}\n\nfunction easeOutIn(t) {\n  if (t < 0.5) return 0.5 * ((t = t * 2 - 1) * t * t + 1);\n  return 0.5 * (t = t * 2 - 1) * t * t + 0.5;\n}\n\nconst RayCurve = function(numPoints, width) {\n  this.geometry = new THREE.BufferGeometry();\n  this.vertices = new Float32Array(numPoints * 3 * 2);\n  this.uvs = new Float32Array(numPoints * 2 * 2);\n  this.width = width;\n\n  this.geometry.addAttribute(\"position\", new THREE.BufferAttribute(this.vertices, 3).setDynamic(true));\n\n  this.material = new THREE.MeshBasicMaterial({\n    side: THREE.DoubleSide,\n    transparent: true\n  });\n\n  this.mesh = new THREE.Mesh(this.geometry, this.material);\n  this.mesh.drawMode = THREE.TriangleStripDrawMode;\n\n  this.mesh.frustumCulled = false;\n  this.mesh.vertices = this.vertices;\n\n  this.direction = new THREE.Vector3();\n  this.numPoints = numPoints;\n};\n\nRayCurve.prototype = {\n  setDirection: function(direction) {\n    const UP = new THREE.Vector3(0, 1, 0);\n    this.direction\n      .copy(direction)\n      .cross(UP)\n      .normalize()\n      .multiplyScalar(this.width / 2);\n  },\n\n  setWidth: function(width) {\n    this.width = width;\n  },\n\n  setPoint: (function() {\n    const posA = new THREE.Vector3();\n    const posB = new THREE.Vector3();\n\n    return function(i, point) {\n      posA.copy(point).add(this.direction);\n      posB.copy(point).sub(this.direction);\n\n      let idx = 2 * 3 * i;\n      this.vertices[idx++] = posA.x;\n      this.vertices[idx++] = posA.y;\n      this.vertices[idx++] = posA.z;\n\n      this.vertices[idx++] = posB.x;\n      this.vertices[idx++] = posB.y;\n      this.vertices[idx++] = posB.z;\n\n      this.geometry.attributes.position.needsUpdate = true;\n    };\n  })()\n};\n\nfunction parabolicCurve(p0, v0, t, out) {\n  out.x = p0.x + v0.x * t;\n  out.y = p0.y + v0.y * t - 4.9 * t * t;\n  out.z = p0.z + v0.z * t;\n  return out;\n}\n\nfunction isValidNormalsAngle(collisionNormal, referenceNormal, landingMaxAngle) {\n  const angleNormals = referenceNormal.angleTo(collisionNormal);\n  return THREE.Math.RAD2DEG * angleNormals <= landingMaxAngle;\n}\n\nconst checkLineIntersection = (function() {\n  const direction = new THREE.Vector3();\n  return function checkLineIntersection(start, end, meshes, raycaster, referenceNormal, landingMaxAngle, hitPoint) {\n    direction.copy(end).sub(start);\n    const distance = direction.length();\n    raycaster.far = distance;\n    raycaster.set(start, direction.normalize());\n    const intersects = raycaster.intersectObjects(meshes, true);\n    if (intersects.length > 0 && isValidNormalsAngle(intersects[0].face.normal, referenceNormal, landingMaxAngle)) {\n      hitPoint.copy(intersects[0].point);\n      return true;\n    }\n    return false;\n  };\n})();\n\nfunction getMeshes(collisionEntities) {\n  return collisionEntities\n    .map(function(entity) {\n      return entity.getObject3D(\"mesh\");\n    })\n    .filter(function(n) {\n      return n;\n    });\n}\n\nconst MISS_OPACITY = 0.1;\nconst HIT_OPACITY = 0.3;\nconst MISS_COLOR = 0xff0000;\nconst HIT_COLOR = 0x00ff00;\nconst FORWARD = new THREE.Vector3(0, 0, -1);\nconst LANDING_NORMAL = new THREE.Vector3(0, 1, 0);\nconst MAX_LANDING_ANGLE = 45;\nconst DRAW_TIME_MS = 400;\nconst q = new THREE.Quaternion();\nconst vecHelper = new THREE.Vector3();\n\nAFRAME.registerComponent(\"teleporter\", {\n  schema: {\n    start: { type: \"string\" },\n    confirm: { type: \"string\" },\n    speed: { default: 12 },\n    collisionEntities: { default: \"\" },\n    hitCylinderColor: { type: \"color\", default: \"#99ff99\" },\n    hitCylinderRadius: { default: 0.25, min: 0 },\n    outerRadius: { default: 0.6, min: 0 },\n    hitCylinderHeight: { default: 0.3, min: 0 }\n  },\n\n  init() {\n    this.isTeleporting = false;\n    this.rayCurve = new RayCurve(20, 0.025);\n    this.rayCurve.mesh.visible = false;\n    this.teleportEntity = document.createElement(\"a-entity\");\n    this.teleportEntity.setObject3D(\"mesh\", this.rayCurve.mesh);\n    this.el.sceneEl.appendChild(this.teleportEntity);\n\n    this.p0 = new THREE.Vector3();\n    this.v0 = new THREE.Vector3();\n    this.parabola = Array.from(new Array(this.rayCurve.numPoints), () => new THREE.Vector3());\n    this.hit = false;\n    this.hitPoint = new THREE.Vector3();\n    this.meshes = [];\n    this.raycaster = new THREE.Raycaster();\n    this.rigWorldPosition = new THREE.Vector3();\n    this.newRigWorldPosition = new THREE.Vector3();\n    this.teleportOriginWorldPosition = new THREE.Vector3();\n\n    this.teleportEventDetail = {\n      oldPosition: this.rigWorldPosition,\n      newPosition: this.newRigWorldPosition,\n      hitPoint: this.hitPoint\n    };\n    this.prevHitHeight = 0;\n    this.direction = new THREE.Vector3();\n    this.hitEntity = this.createHitEntity();\n    this.hitEntity.object3D.visible = false;\n    this.el.sceneEl.appendChild(this.hitEntity);\n    this.queryCollisionEntities();\n  },\n\n  queryCollisionEntities: function() {\n    this.collisionEntities = [].slice.call(this.el.sceneEl.querySelectorAll(this.data.collisionEntities));\n    this.meshes = getMeshes(this.collisionEntities);\n  },\n\n  remove() {\n    this.stopPlayingTeleportSound();\n  },\n\n  stopPlayingTeleportSound() {\n    if (this.teleportingSound) {\n      const sfx = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem;\n      sfx.stopSoundNode(this.teleportingSound.source);\n      this.teleportingSound = null;\n    }\n  },\n\n  tick(t, dt) {\n    if (!this.el.sceneEl.is(\"entered\")) return;\n    const sfx = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const { start, confirm, speed } = this.data;\n    const object3D = this.el.object3D;\n\n    if (!this.isTeleporting && userinput.get(start)) {\n      this.isTeleporting = true;\n      this.timeTeleporting = 0;\n      this.hit = false;\n      this.rayCurve.mesh.visible = true;\n      this.rayCurve.mesh.updateMatrixWorld();\n      this.rayCurve.mesh.material.opacity = MISS_OPACITY;\n      this.rayCurve.mesh.material.color.set(MISS_COLOR);\n      this.rayCurve.mesh.material.needsUpdate = true;\n      this.teleportingSound = sfx.playSoundLoopedWithGain(SOUND_TELEPORT_START);\n      if (this.teleportingSound) {\n        this.teleportingSound.gain.gain.value = 0.005;\n      }\n    }\n\n    if (!this.isTeleporting) {\n      return;\n    }\n    if (this.teleportingSound) {\n      this.teleportingSound.gain.gain.value = Math.min(0.025, this.teleportingSound.gain.gain.value + 0.00002 * dt);\n    }\n\n    if (userinput.get(confirm)) {\n      this.hitEntity.setAttribute(\"visible\", false);\n      this.isTeleporting = false;\n      this.rayCurve.mesh.visible = false;\n\n      if (this.teleportingSound) {\n        this.stopPlayingTeleportSound();\n      }\n\n      if (!this.hit || this.timeTeleporting < DRAW_TIME_MS) {\n        return;\n      }\n\n      this.characterController =\n        this.characterController || document.querySelector(\"#player-rig\").components[\"character-controller\"];\n      this.characterController.teleportTo(this.hitPoint);\n\n      sfx.playSoundOneShot(SOUND_TELEPORT_END);\n      return;\n    }\n\n    this.timeTeleporting += dt;\n    object3D.updateMatrixWorld();\n    object3D.matrixWorld.decompose(this.p0, q, vecHelper);\n    this.direction\n      .copy(FORWARD)\n      .applyQuaternion(q)\n      .normalize();\n    this.rayCurve.setDirection(this.direction);\n    this.v0.copy(this.direction).multiplyScalar(speed);\n\n    let collidedIndex = this.rayCurve.numPoints - 1;\n\n    this.hit = false;\n    this.parabola[0].copy(this.p0);\n    const timeSegment = 1 / (this.rayCurve.numPoints - 1);\n    for (let i = 1; i < this.rayCurve.numPoints; i++) {\n      const t = i * timeSegment;\n      parabolicCurve(this.p0, this.v0, t, vecHelper);\n      this.parabola[i].copy(vecHelper);\n\n      if (\n        checkLineIntersection(\n          this.parabola[i - 1],\n          this.parabola[i],\n          this.meshes,\n          this.raycaster,\n          LANDING_NORMAL,\n          MAX_LANDING_ANGLE,\n          this.hitPoint\n        )\n      ) {\n        this.hit = true;\n        collidedIndex = i;\n        break;\n      }\n    }\n\n    const percentToDraw = this.timeTeleporting > DRAW_TIME_MS ? 1 : this.timeTeleporting / DRAW_TIME_MS;\n    const percentRaycasted = collidedIndex / (this.rayCurve.numPoints - 1);\n    const segmentT = (percentToDraw * percentRaycasted) / (this.rayCurve.numPoints - 1);\n\n    for (let i = 0; i < this.rayCurve.numPoints; i++) {\n      const t = i * segmentT;\n      parabolicCurve(this.p0, this.v0, t, vecHelper);\n      this.rayCurve.setPoint(i, vecHelper);\n    }\n\n    const color = this.hit ? HIT_COLOR : MISS_COLOR;\n    const opacity = this.hit && this.timeTeleporting >= DRAW_TIME_MS ? HIT_OPACITY : MISS_OPACITY;\n    this.rayCurve.material.color.set(color);\n    this.rayCurve.material.opacity = opacity;\n\n    this.hitEntity.setAttribute(\"visible\", this.hit);\n    if (this.hit) {\n      this.hitEntity.setAttribute(\"position\", this.hitPoint);\n      this.hitEntity.object3D.traverse(o => {\n        o.matrixNeedsUpdate = true;\n      });\n      const hitEntityOpacity = HIT_OPACITY * easeOutIn(percentToDraw);\n      const dRadii = this.data.outerRadius - this.data.hitCylinderRadius;\n      const outerScale = (this.data.outerRadius - easeIn(percentToDraw) * dRadii) / this.data.outerRadius;\n      this.outerTorus.object3D.scale.set(outerScale, outerScale, 1);\n      this.torus.setAttribute(\"material\", \"opacity\", hitEntityOpacity);\n      this.cylinder.setAttribute(\"material\", \"opacity\", hitEntityOpacity);\n    }\n  },\n\n  createHitEntity() {\n    const data = this.data;\n\n    // Parent.\n    const hitEntity = document.createElement(\"a-entity\");\n    hitEntity.className = \"hitEntity\";\n\n    // Torus.\n    this.torus = document.createElement(\"a-entity\");\n    this.torus.setAttribute(\"geometry\", {\n      primitive: \"torus\",\n      radius: data.hitCylinderRadius,\n      radiusTubular: 0.01,\n      segmentsRadial: 16,\n      segmentsTubular: 18\n    });\n    this.torus.setAttribute(\"rotation\", { x: 90, y: 0, z: 0 });\n    this.torus.setAttribute(\"material\", {\n      shader: \"flat\",\n      color: data.hitCylinderColor,\n      side: \"double\",\n      depthTest: false\n    });\n    hitEntity.appendChild(this.torus);\n\n    // Cylinder.\n    this.cylinder = document.createElement(\"a-entity\");\n    this.cylinder.setAttribute(\"position\", { x: 0, y: data.hitCylinderHeight / 2, z: 0 });\n    if (window.createImageBitmap !== undefined) {\n      this.cylinder.setAttribute(\"rotation\", { x: 0, y: 0, z: 180 });\n    }\n    this.cylinder.setAttribute(\"geometry\", {\n      primitive: \"cylinder\",\n      segmentsHeight: 1,\n      radius: data.hitCylinderRadius,\n      height: data.hitCylinderHeight,\n      openEnded: true\n    });\n    this.cylinder.setAttribute(\"material\", {\n      shader: \"flat\",\n      color: data.hitCylinderColor,\n      side: \"double\",\n      src: CYLINDER_TEXTURE,\n      transparent: true,\n      depthTest: false\n    });\n    hitEntity.appendChild(this.cylinder);\n\n    // create another torus for animating when the hit destination is ready to go\n    this.outerTorus = document.createElement(\"a-entity\");\n    this.outerTorus.setAttribute(\"geometry\", {\n      primitive: \"torus\",\n      radius: data.outerRadius,\n      radiusTubular: 0.01,\n      segmentsRadial: 16,\n      segmentsTubular: 18\n    });\n    this.outerTorus.setAttribute(\"rotation\", { x: 90, y: 0, z: 0 });\n    this.outerTorus.setAttribute(\"material\", {\n      shader: \"flat\",\n      color: data.hitCylinderColor,\n      side: \"double\",\n      opacity: HIT_OPACITY,\n      depthTest: false\n    });\n    this.outerTorus.setAttribute(\"id\", \"outerTorus\");\n    hitEntity.appendChild(this.outerTorus);\n\n    return hitEntity;\n  }\n});\n","import createTextGeometry from \"three-bmfont-text\";\n\n// 1 to match other A-Frame default widths.\nconst DEFAULT_WIDTH = 1;\n\n// @bryik set anisotropy to 16. Improves look of large amounts of text when viewed from angle.\nconst MAX_ANISOTROPY = 16;\n\n/**\n * Due to using negative scale, we return the opposite side specified.\n * https://github.com/mrdoob/three.js/pull/12787/\n */\nfunction parseSide(side) {\n  switch (side) {\n    case \"back\": {\n      return THREE.FrontSide;\n    }\n    case \"double\": {\n      return THREE.DoubleSide;\n    }\n    default: {\n      return THREE.BackSide;\n    }\n  }\n}\n\n/**\n * Determine wrap pixel count. Either specified or by experimental fudge factor.\n * Note that experimental factor will never be correct for variable width fonts.\n */\nfunction computeWidth(wrapPixels, wrapCount, widthFactor) {\n  return wrapPixels || (0.5 + wrapCount) * widthFactor;\n}\n\n/**\n * Compute default font width factor to use.\n */\nfunction computeFontWidthFactor(font) {\n  let sum = 0;\n  let digitsum = 0;\n  let digits = 0;\n  for (const ch of font.chars) {\n    sum += ch.xadvance;\n    if (ch.id >= 48 && ch.id <= 57) {\n      digits++;\n      digitsum += ch.xadvance;\n    }\n  }\n  return digits ? digitsum / digits : sum / font.chars.length;\n}\n\nfunction loadFont(src) {\n  return fetch(src)\n    .then(resp => resp.json())\n    .then(font => {\n      // Fix negative Y offsets for Roboto MSDF font from tool. Experimentally determined.\n      if (src.indexOf(\"/Roboto-msdf.json\") >= 0) {\n        for (const ch of font.chars) {\n          ch.yoffset += 30;\n        }\n      }\n      font.widthFactor = computeFontWidthFactor(font);\n      return font;\n    });\n}\n\nfunction loadTexture(src) {\n  return new Promise((resolve, reject) => {\n    new THREE.ImageLoader().load(\n      src,\n      image => {\n        const texture = new THREE.Texture();\n        texture.image = image;\n        texture.needsUpdate = true;\n        texture.anisotropy = MAX_ANISOTROPY;\n        resolve(texture);\n      },\n      undefined,\n      err => {\n        console.error(\"Error loading font image\", src, err);\n        reject(null);\n      }\n    );\n  });\n}\n\nconst FONTS = {\n  roboto: {\n    json: loadFont(\"https://cdn.aframe.io/fonts/Roboto-msdf.json\"),\n    texture: loadTexture(\"https://cdn.aframe.io/fonts/Roboto-msdf.png\")\n  }\n};\n\nAFRAME.registerComponent(\"text\", {\n  multiple: true,\n  schema: {\n    align: { type: \"string\", default: \"left\", oneOf: [\"left\", \"right\", \"center\"] },\n    alphaTest: { default: 0.5 },\n    // `anchor` defaults to center to match geometries.\n    anchor: { default: \"center\", oneOf: [\"left\", \"right\", \"center\", \"align\"] },\n    baseline: { default: \"center\", oneOf: [\"top\", \"center\", \"bottom\"] },\n    color: { type: \"color\", default: \"#FFF\" },\n    font: { type: \"string\", default: \"roboto\" },\n    // `height` has no default, will be populated at layout.\n    height: { type: \"number\" },\n    letterSpacing: { type: \"number\", default: 0 },\n    // `lineHeight` defaults to font's `lineHeight` value.\n    lineHeight: { type: \"number\" },\n    // `negate` must be true for fonts generated with older versions of msdfgen (white background).\n    negate: { type: \"boolean\", default: true },\n    opacity: { type: \"number\", default: 1.0 },\n    side: { default: \"front\", oneOf: [\"front\", \"back\", \"double\"] },\n    tabSize: { default: 4 },\n    transparent: { default: true },\n    value: { type: \"string\" },\n    whiteSpace: { default: \"normal\", oneOf: [\"normal\", \"pre\", \"nowrap\"] },\n    // `width` defaults to geometry width if present, else `DEFAULT_WIDTH`.\n    width: { type: \"number\" },\n    // `wrapCount` units are about one default font character. Wrap roughly at this number.\n    wrapCount: { type: \"number\", default: 40 },\n    // `wrapPixels` will wrap using bmfont pixel units (e.g., dejavu's is 32 pixels).\n    wrapPixels: { type: \"number\" },\n    // `xOffset` to add padding.\n    xOffset: { type: \"number\", default: 0 },\n    // `zOffset` will provide a small z offset to avoid z-fighting.\n    zOffset: { type: \"number\", default: 0.001 }\n  },\n\n  init: function() {\n    const shaderData = this.getShaderData(this.data);\n    this.shaderObject = new AFRAME.shaders[\"msdf\"].Shader();\n    this.shaderObject.el = this.el;\n    this.shaderObject.init(shaderData);\n    this.shaderObject.update(shaderData);\n    this.shaderObject.material.transparent = shaderData.transparent; // Apparently, was not set on `init` nor `update`.\n    this.shaderObject.material.side = shaderData.side;\n    this.geometry = createTextGeometry();\n    this.mesh = new THREE.Mesh(this.geometry, this.shaderObject.material);\n    this.el.setObject3D(this.attrName, this.mesh);\n  },\n\n  update: function(oldData) {\n    const data = this.data;\n    const shaderData = this.getShaderData(this.data);\n    this.shaderObject.update(shaderData);\n    this.shaderObject.material.transparent = shaderData.transparent; // Apparently, was not set on `init` nor `update`.\n    this.shaderObject.material.side = shaderData.side;\n\n    // New font. `updateFont` will later change data and layout.\n    if (oldData.font !== data.font) {\n      this.updateFont().catch(err => console.error(err));\n    }\n\n    // Not a new font, but we need to accomodate other changes with the existing font.\n    if (this.currentFont != null) {\n      this.updateGeometry(this.geometry, this.currentFont);\n      this.updateLayout(this.currentFont);\n    }\n  },\n\n  /**\n   * Clean up geometry, material, texture, mesh, objects.\n   */\n  remove: function() {\n    this.geometry.dispose();\n    this.geometry = null;\n    this.el.removeObject3D(this.attrName);\n    this.shaderObject.material.dispose();\n    this.shaderObject.material = null;\n    delete this.shaderObject;\n  },\n\n  getShaderData: (function() {\n    const shaderData = {};\n    return function(data) {\n      shaderData.alphaTest = data.alphaTest;\n      shaderData.color = data.color;\n      shaderData.opacity = data.opacity;\n      shaderData.side = parseSide(data.side);\n      shaderData.transparent = data.transparent;\n      shaderData.negate = data.negate;\n      return shaderData;\n    };\n  })(),\n\n  /**\n   * Load font for geometry, load font image for material, and apply.\n   */\n  updateFont: function() {\n    const data = this.data;\n    const geometry = this.geometry;\n\n    // Make invisible during font swap.\n    this.mesh.visible = false;\n    const fetchFontData = Promise.all([FONTS[data.font].json, FONTS[data.font].texture]);\n    return fetchFontData.then(([font, texture]) => {\n      if (font.pages.length !== 1) {\n        throw new Error(\"Currently only single-page bitmap fonts are supported.\");\n      }\n      this.currentFont = font;\n      this.updateGeometry(geometry, font);\n      this.shaderObject.update({ map: texture });\n      this.updateLayout(font);\n      this.mesh.visible = true;\n    });\n  },\n\n  /**\n   * Update layout with anchor, alignment, baseline, and considering any meshes.\n   */\n  updateLayout: function(font) {\n    const el = this.el;\n    const data = this.data;\n    const geometry = this.geometry;\n    const mesh = this.mesh;\n\n    if (!geometry.layout) {\n      return;\n    }\n\n    // Determine width to use (defined width, geometry's width, or default width).\n    const geometryComponent = el.getAttribute(\"geometry\");\n    const width = data.width || (geometryComponent && geometryComponent.width) || DEFAULT_WIDTH;\n\n    // Determine wrap pixel count. Either specified or by experimental fudge factor.\n    // Note that experimental factor will never be correct for variable width fonts.\n    const textRenderWidth = computeWidth(data.wrapPixels, data.wrapCount, font.widthFactor);\n    const textScale = width / textRenderWidth;\n\n    // Determine height to use.\n    const layout = geometry.layout;\n    const height = textScale * (layout.height + layout.descender);\n\n    // Update geometry dimensions to match text layout if width and height are set to 0.\n    // For example, scales a plane to fit text.\n    if (geometryComponent && geometryComponent.primitive === \"plane\") {\n      if (!geometryComponent.width) {\n        el.setAttribute(\"geometry\", \"width\", width);\n      }\n      if (!geometryComponent.height) {\n        el.setAttribute(\"geometry\", \"height\", height);\n      }\n    }\n\n    // Calculate X position to anchor text left, center, or right.\n    const anchor = data.anchor === \"align\" ? data.align : data.anchor;\n    let x, y;\n    if (anchor === \"left\") {\n      x = 0;\n    } else if (anchor === \"right\") {\n      x = -1 * layout.width;\n    } else if (anchor === \"center\") {\n      x = (-1 * layout.width) / 2;\n    } else {\n      throw new TypeError(\"Invalid text.anchor property value\", anchor);\n    }\n\n    // Calculate Y position to anchor text top, center, or bottom.\n    const baseline = data.baseline;\n    if (baseline === \"bottom\") {\n      y = 0;\n    } else if (baseline === \"top\") {\n      y = -1 * layout.height + layout.ascender;\n    } else if (baseline === \"center\") {\n      y = (-1 * layout.height) / 2;\n    } else {\n      throw new TypeError(\"Invalid text.baseline property value\", baseline);\n    }\n\n    // Position and scale mesh to apply layout.\n    mesh.position.x = x * textScale + data.xOffset;\n    mesh.position.y = y * textScale;\n    // Place text slightly in front to avoid Z-fighting.\n    mesh.position.z = data.zOffset;\n    mesh.scale.set(textScale, -1 * textScale, textScale);\n  },\n\n  /**\n   * Update the text geometry using `three-bmfont-text.update`.\n   */\n  updateGeometry: (function() {\n    const geometryUpdateBase = {};\n    const geometryUpdateData = {};\n    const newLineRegex = /\\\\n/g;\n    const tabRegex = /\\\\t/g;\n\n    return function(geometry, font) {\n      const data = this.data;\n\n      geometryUpdateData.font = font;\n      geometryUpdateData.lineHeight =\n        data.lineHeight && isFinite(data.lineHeight) ? data.lineHeight : font.common.lineHeight;\n      geometryUpdateData.text = data.value\n        .toString()\n        .replace(newLineRegex, \"\\n\")\n        .replace(tabRegex, \"\\t\");\n      geometryUpdateData.width = computeWidth(data.wrapPixels, data.wrapCount, font.widthFactor);\n      geometry.update(Object.assign(geometryUpdateBase, data, geometryUpdateData));\n    };\n  })()\n});\n","export const sets = {};\nsets.global = \"global\";\nsets.inputFocused = \"inputFocused\";\nsets.cursorHoveringOnPen = \"cursorHoveringOnPen\";\nsets.cursorHoveringOnCamera = \"cursorHoveringOnCamera\";\nsets.cursorHoveringOnInteractable = \"cursorHoveringOnInteractable\";\nsets.cursorHoveringOnUI = \"cursorHoveringOnUI\";\nsets.cursorHoveringOnVideo = \"cursorHoveringOnVideo\";\nsets.cursorHoveringOnNothing = \"cursorHoveringOnNothing\";\nsets.cursorHoldingPen = \"cursorHoldingPen\";\nsets.cursorHoldingCamera = \"cursorHoldingCamera\";\nsets.cursorHoldingInteractable = \"cursorHoldingInteractable\";\nsets.cursorHoldingUI = \"cursorHoldingUI\";\nsets.cursorHoldingNothing = \"cursorHoldingNothing\";\nsets.rightHandTeleporting = \"rightHandTeleporting\";\nsets.rightHandHoveringOnPen = \"rightHandHoveringOnPen\";\nsets.rightHandHoveringOnCamera = \"rightHandHoveringOnCamera\";\nsets.rightHandHoveringOnInteractable = \"rightHandHoveringOnInteractable\";\nsets.rightHandHoveringOnNothing = \"rightHandHoveringOnNothing\";\nsets.rightHandHoldingPen = \"rightHandHoldingPen\";\nsets.rightHandHoldingCamera = \"rightHandHoldingCamera\";\nsets.rightHandHoldingInteractable = \"rightHandHoldingInteractable\";\nsets.leftHandTeleporting = \"leftHandTeleporting\";\nsets.leftHandHoveringOnPen = \"leftHandHoveringOnPen\";\nsets.leftHandHoveringOnCamera = \"leftHandHoveringOnCamera\";\nsets.leftHandHoveringOnInteractable = \"leftHandHoveringOnInteractable\";\nsets.leftHandHoldingPen = \"leftHandHoldingPen\";\nsets.leftHandHoldingCamera = \"leftHandHoldingCamera\";\nsets.leftHandHoldingInteractable = \"leftHandHoldingInteractable\";\nsets.leftHandHoveringOnNothing = \"leftHandHoveringOnNothing\";\n","const { detect } = require(\"detect-browser\");\n\nconst browser = detect();\n\n// Precision on device detection is fuzzy -- we can sometimes know if a device is definitely\n// available, or definitely *not* available, and assume it may be available otherwise.\nexport const VR_DEVICE_AVAILABILITY = {\n  yes: \"yes\", // Implies VR can be launched into on this device immediately, in this browser\n  no: \"no\", // Implies this VR device is definitely not supported regardless of browser\n  maybe: \"maybe\" // Implies this device may support this VR platform, but may not be installed or in a compatible browser\n};\n\nfunction isMaybeGearVRCompatibleDevice(ua) {\n  return /\\WAndroid\\W/.test(ua);\n}\n\nfunction isMaybeDaydreamCompatibleDevice(ua) {\n  return /\\WAndroid\\W/.test(ua);\n}\n\n// Blacklist of VR device name regex matchers that we do not want to consider as valid VR devices\n// that can be entered into as a \"generic\" entry flow.\nconst GENERIC_ENTRY_TYPE_DEVICE_BLACKLIST = [/cardboard/i];\n\n// Tries to determine VR entry compatibility regardless of the current browser.\n//\n// For each VR \"entry type\", returns VR_DEVICE_AVAILABILITY.yes if that type can be launched into directly from this browser\n// on this device, returns VR_DEVICE_AVAILABILITY.no if that type is known to not be possible to ever use on this device no matter what,\n// and VR_DEVICE_AVAILABILITY.maybe if the device potentially could support that type if a different browser was running, or if\n// the software was setup, an HMD was purchased, etc.\n//\n// When \"yes\" or \"maybe\", we should present the option. If \"maybe\", when chosen try to get them into a compatible browser.\n// Once in a compatible browser, we should assume it will work (if it doesn't, it's because they don't have the headset,\n// haven't installed the software, our guess about their phone was wrong, etc.)\n//\n// At the time of this writing there are the following VR \"entry types\" that will be validated by this method:\n//\n// - screen: Enter \"on-screen\" in 2D\n// - generic: Generic WebVR (platform/OS agnostic indicator if a general 'Enter VR' option should be presented.)\n// - daydream: Google Daydream\n// - gearvr: Oculus GearVR\n// - cardboard: Google Cardboard\n//\nexport async function getAvailableVREntryTypes() {\n  const ua = navigator.userAgent;\n  const isSamsungBrowser = browser.name === \"chrome\" && /SamsungBrowser/.test(ua);\n  const isMobile = AFRAME.utils.device.isMobile();\n  const isMobileVR = AFRAME.utils.device.isMobileVR();\n\n  // This needs to be kept up-to-date with the latest browsers that can support VR and Hubs.\n  // Checking for navigator.getVRDisplays always passes b/c of polyfill.\n  const isWebVRCapableBrowser = window.hasNativeWebVRImplementation;\n\n  const isDaydreamCapableBrowser = !!(isWebVRCapableBrowser && browser.name === \"chrome\" && !isSamsungBrowser);\n  const isIDevice = AFRAME.utils.device.isIOS();\n  const isFirefoxBrowser = browser.name === \"firefox\";\n  const isUIWebView = typeof navigator.mediaDevices === \"undefined\";\n\n  const safari = isIDevice\n    ? !isUIWebView\n      ? VR_DEVICE_AVAILABILITY.yes\n      : VR_DEVICE_AVAILABILITY.maybe\n    : VR_DEVICE_AVAILABILITY.no;\n\n  const isCardboardCapableBrowser = !!(isMobile && !isIDevice && browser.name === \"chrome\" && !isSamsungBrowser);\n\n  let displays = [];\n  try {\n    // Skip getVRDisplays on desktop Chrome since the API is in a broken state there.\n    // See https://github.com/mozilla/hubs/issues/892\n    if (browser.name !== \"chrome\" || isMobile) {\n      // We pull the displays on non-WebVR capable mobile browsers so we can pick up cardboard.\n      displays = isWebVRCapableBrowser || isCardboardCapableBrowser ? await navigator.getVRDisplays() : [];\n    }\n  } catch (e) {\n    console.warn(\"navigator.getVRDisplays() failed\", e);\n  }\n\n  const isOculusBrowser = /Oculus/.test(ua);\n\n  const screen = isMobileVR\n    ? VR_DEVICE_AVAILABILITY.no\n    : isIDevice && isUIWebView\n      ? VR_DEVICE_AVAILABILITY.maybe\n      : VR_DEVICE_AVAILABILITY.yes;\n\n  // HACK -- we prompt the user to install firefox if they click the VR button on a non-WebVR compatible\n  // browser. once we change this (ie when Chrome has VR support) then this check can be removed. Without this\n  // check if you have FF on Mac/Linux you'll get the confusing flow of having a VR button but then\n  // being asked to download FF.\n  const isNonWebVRFirefox = !isWebVRCapableBrowser && isFirefoxBrowser;\n  let generic = isMobile || isNonWebVRFirefox ? VR_DEVICE_AVAILABILITY.no : VR_DEVICE_AVAILABILITY.maybe;\n  let cardboard = VR_DEVICE_AVAILABILITY.no;\n\n  // We only consider GearVR support as \"maybe\" and never \"yes\". The only browser\n  // that will detect GearVR outside of VR is Samsung Internet, and we'd prefer to launch into Oculus\n  // Browser for now since Samsung Internet requires an additional WebVR installation + flag, so return \"maybe\".\n  //\n  // If we are in Oculus Browser (ie, we are literally wearing a GearVR) then return 'yes'.\n  let gearvr = VR_DEVICE_AVAILABILITY.no;\n  if (isMaybeGearVRCompatibleDevice(ua)) {\n    gearvr = isOculusBrowser ? VR_DEVICE_AVAILABILITY.yes : VR_DEVICE_AVAILABILITY.maybe;\n  }\n\n  // For daydream detection, we first check if they are on an Android compatible device, and assume they\n  // may support daydream *unless* this browser has WebVR capabilities, in which case we can do better.\n  let daydream =\n    isMaybeDaydreamCompatibleDevice(ua) && !isMobileVR ? VR_DEVICE_AVAILABILITY.maybe : VR_DEVICE_AVAILABILITY.no;\n\n  cardboard =\n    isCardboardCapableBrowser && displays.find(d => d.capabilities.canPresent && /cardboard/i.test(d.displayName))\n      ? VR_DEVICE_AVAILABILITY.yes\n      : VR_DEVICE_AVAILABILITY.no;\n\n  if (isWebVRCapableBrowser) {\n    // Generic is supported for non-blacklisted devices and presentable HMDs.\n    generic = displays.find(\n      d => d.capabilities.canPresent && !GENERIC_ENTRY_TYPE_DEVICE_BLACKLIST.find(r => r.test(d.displayName))\n    )\n      ? VR_DEVICE_AVAILABILITY.yes\n      : VR_DEVICE_AVAILABILITY.no;\n\n    // For daydream detection, in a WebVR browser we can increase confidence in daydream compatibility.\n    const hasDaydreamWebVRDevice = displays.find(d => /daydream/i.test(d.displayName));\n\n    if (hasDaydreamWebVRDevice) {\n      // If we detected daydream via WebVR\n      daydream = VR_DEVICE_AVAILABILITY.yes;\n      generic = VR_DEVICE_AVAILABILITY.no;\n    } else if (isDaydreamCapableBrowser) {\n      // If we didn't detect daydream in a daydream capable browser, we definitely can't run daydream at all.\n      daydream = VR_DEVICE_AVAILABILITY.no;\n    }\n  }\n\n  return { screen, generic, gearvr, daydream, cardboard, safari };\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Route } from \"react-router\";\n\n/**\n * A react-router Route that looks for a key/value pair in the state to render something.\n */\nclass StateRoute extends React.Component {\n  static propTypes = {\n    stateKey: PropTypes.string,\n    stateValue: PropTypes.string,\n    history: PropTypes.object\n  };\n\n  render() {\n    const { history, stateKey, stateValue, ...routeProps } = this.props;\n\n    if (\n      (!history.location.state && !stateValue) ||\n      (history.location.state &&\n        (history.location.state[stateKey] === stateValue || (!history.location.state[stateKey] && !stateValue)))\n    ) {\n      return <Route path=\"/\" {...routeProps} />;\n    }\n\n    return null;\n  }\n}\n\nexport default StateRoute;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport DialogContainer from \"./dialog-container.js\";\nimport styles from \"../assets/stylesheets/client-info-dialog.scss\";\nimport { FormattedMessage } from \"react-intl\";\nimport { sluglessPath } from \"../utils/history\";\nimport { getAvatarThumbnailUrl } from \"../utils/avatar-utils\";\n\nexport function getClientInfoClientId(location) {\n  const { search } = location;\n  const urlParams = new URLSearchParams(search);\n  const pathname = sluglessPath(location);\n\n  if (!pathname.startsWith(\"/client\") && !urlParams.get(\"client_id\")) return null;\n  return urlParams.get(\"client_id\") || pathname.substring(9);\n}\n\nexport default class ClientInfoDialog extends Component {\n  static propTypes = {\n    clientId: PropTypes.string,\n    history: PropTypes.object,\n    hubChannel: PropTypes.object,\n    presences: PropTypes.object,\n    performConditionalSignIn: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  state = {\n    avatarThumbnailUrl: null\n  };\n\n  kick() {\n    const { clientId, performConditionalSignIn, hubChannel, onClose } = this.props;\n\n    performConditionalSignIn(\n      () => hubChannel.can(\"kick_users\"),\n      async () => await hubChannel.kick(clientId),\n      \"kick-user\"\n    );\n\n    onClose();\n  }\n\n  hide() {\n    const { clientId, onClose, hubChannel } = this.props;\n    hubChannel.hide(clientId);\n    onClose();\n  }\n\n  mute() {\n    const { clientId, performConditionalSignIn, hubChannel, onClose } = this.props;\n\n    performConditionalSignIn(\n      () => hubChannel.can(\"mute_users\"),\n      async () => await hubChannel.mute(clientId),\n      \"mute-user\"\n    );\n\n    onClose();\n  }\n\n  unhide() {\n    const { clientId, hubChannel, onClose } = this.props;\n    hubChannel.unhide(clientId);\n    onClose();\n  }\n\n  getPresenceProfile() {\n    if (!this.props.presences) return null;\n\n    const presence = Object.entries(this.props.presences).find(([k]) => k === this.props.clientId);\n    if (!presence) return null;\n\n    const metas = presence[1].metas;\n    return metas[metas.length - 1].profile;\n  }\n\n  componentDidMount() {\n    const { avatarId } = this.getPresenceProfile();\n    if (avatarId) {\n      getAvatarThumbnailUrl(avatarId).then(avatarThumbnailUrl => this.setState({ avatarThumbnailUrl }));\n    }\n  }\n\n  render() {\n    const profile = this.getPresenceProfile();\n    if (!profile) return null;\n\n    const { displayName, communityIdentifier } = profile;\n    const { hubChannel, clientId, onClose } = this.props;\n    const title = (\n      <div className={styles.title}>\n        {displayName}\n        <div className={styles.communityIdentifier}>{communityIdentifier}</div>\n      </div>\n    );\n    const mayKick = hubChannel.canOrWillIfCreator(\"kick_users\");\n    const mayMute = hubChannel.canOrWillIfCreator(\"mute_users\");\n    const isHidden = hubChannel.isHidden(clientId);\n\n    return (\n      <DialogContainer className={styles.clientInfoDialog} title={title} wide={true} {...this.props}>\n        <div className={styles.roomInfo}>\n          <div className={styles.clientProfileImage}>\n            <img src={this.state.avatarThumbnailUrl} />\n          </div>\n          <div className={styles.clientActionButtons}>\n            {!isHidden && (\n              <button onClick={() => this.hide()}>\n                <FormattedMessage id=\"client-info.hide-button\" />\n              </button>\n            )}\n            {isHidden && (\n              <button onClick={() => this.unhide()}>\n                <FormattedMessage id=\"client-info.unhide-button\" />\n              </button>\n            )}\n            {mayMute && (\n              <button onClick={() => this.mute()}>\n                <FormattedMessage id=\"client-info.mute-button\" />\n              </button>\n            )}\n            {mayKick && (\n              <button onClick={() => this.kick()}>\n                <FormattedMessage id=\"client-info.kick-button\" />\n              </button>\n            )}\n            <button className={styles.cancel} onClick={onClose}>\n              <FormattedMessage id=\"client-info.cancel\" />\n            </button>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { IntlProvider, FormattedMessage } from \"react-intl\";\nimport { lang, messages } from \"../utils/i18n\";\nimport loaderStyles from \"../assets/stylesheets/loader.scss\";\n\nclass Loader extends Component {\n  static propTypes = {\n    scene: PropTypes.object,\n    finished: PropTypes.bool,\n    onLoaded: PropTypes.func\n  };\n\n  doneWithInitialLoad = false;\n  state = {\n    loadingNum: 0,\n    loadedNum: 0\n  };\n\n  componentDidMount() {\n    this.props.scene.addEventListener(\"model-loading\", this.onObjectLoading);\n    this.props.scene.addEventListener(\"image-loading\", this.onObjectLoading);\n    this.props.scene.addEventListener(\"model-loaded\", this.onObjectLoaded);\n    this.props.scene.addEventListener(\"image-loaded\", this.onObjectLoaded);\n    this.props.scene.addEventListener(\"model-error\", this.onObjectLoaded);\n    this.props.scene.addEventListener(\n      \"environment-scene-loaded\",\n      () => {\n        this.environmentSceneLoaded = true;\n        this.tryFinishLoading();\n      },\n      { once: true }\n    );\n  }\n\n  componentWillUnmount() {\n    this.props.scene.removeEventListener(\"model-loading\", this.onObjectLoading);\n    this.props.scene.removeEventListener(\"image-loading\", this.onObjectLoading);\n    this.props.scene.removeEventListener(\"model-loaded\", this.onObjectLoaded);\n    this.props.scene.removeEventListener(\"image-loaded\", this.onObjectLoaded);\n    this.props.scene.removeEventListener(\"model-error\", this.onObjectLoaded);\n  }\n\n  onObjectLoading = () => {\n    if (!this.doneWithInitialLoad && this.loadingTimeout) {\n      window.clearTimeout(this.loadingTimeout);\n      this.loadingTimeout = null;\n    }\n\n    this.setState(state => {\n      return { loadingNum: state.loadingNum + 1 };\n    });\n  };\n\n  onObjectLoaded = () => {\n    this.setState(state => {\n      return { loadedNum: state.loadedNum + 1 };\n    });\n\n    this.tryFinishLoading();\n  };\n\n  tryFinishLoading = () => {\n    if (!this.doneWithInitialLoad && this.loadingTimeout) window.clearTimeout(this.loadingTimeout);\n\n    if (this.environmentSceneLoaded) {\n      this.loadingTimeout = window.setTimeout(() => {\n        this.doneWithInitialLoad = true;\n        if (this.props.onLoaded) {\n          this.props.onLoaded();\n        }\n      }, 1500);\n    }\n  };\n\n  render() {\n    const nomore = (\n      <h4 className={loaderStyles.loadingText}>\n        <FormattedMessage id=\"loader.entering_lobby\" />\n      </h4>\n    );\n    const progress = this.state.loadingNum === 0 ? \" \" : `${this.state.loadedNum} / ${this.state.loadingNum} `;\n    const usual = (\n      <h4 className={loaderStyles.loadingText}>\n        <FormattedMessage id=\"loader.loading\" />\n        {progress}\n        <FormattedMessage id={this.state.loadingNum !== 1 ? \"loader.objects\" : \"loader.object\"} />\n        ...\n      </h4>\n    );\n    return (\n      <IntlProvider locale={lang} messages={messages}>\n        <div className=\"loading-panel\">\n          <img className=\"loading-panel__logo\" style={{height: 150, width: 150}} src={this.props.loadingIcon} />\n\n          {this.props.finished ? nomore : usual}\n\n          <div className=\"loader-wrap loader-bottom\">\n            <div className=\"loader\">\n              <div className=\"loader-center\" />\n            </div>\n          </div>\n        </div>\n      </IntlProvider>\n    );\n  }\n}\n\nexport default Loader;\n","import React from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport PropTypes from \"prop-types\";\n\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nconst AutoExitWarning = props => (\n  <div className=\"autoexit-panel\">\n    <div className=\"autoexit-panel__title\">\n      <FormattedMessage id=\"autoexit.title\" />\n      <span>{props.secondsRemaining}</span>\n      <FormattedMessage id=\"autoexit.title_units\" />\n    </div>\n    <div className=\"autoexit-panel__subtitle\">\n      <FormattedMessage id=\"autoexit.subtitle\" />\n    </div>\n    <WithHoverSound>\n      <div className=\"autoexit-panel__cancel-button\" onClick={props.onCancel}>\n        <FormattedMessage id=\"autoexit.cancel\" />\n      </div>\n    </WithHoverSound>\n  </div>\n);\n\nAutoExitWarning.propTypes = {\n  secondsRemaining: PropTypes.number,\n  onCancel: PropTypes.func\n};\n\nexport default AutoExitWarning;\n","import React from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport PropTypes from \"prop-types\";\n\nimport MobileScreenEntryImg from \"../assets/images/mobile_screen_entry.svg\";\nimport DesktopScreenEntryImg from \"../assets/images/desktop_screen_entry.svg\";\nimport GenericVREntryImg from \"../assets/images/generic_vr_entry.svg\";\nimport GearVREntryImg from \"../assets/images/gearvr_entry.svg\";\nimport DaydreamEntryImg from \"../assets/images/daydream_entry.svg\";\nimport styles from \"../assets/stylesheets/entry.scss\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport cx from \"classnames\";\n\nconst EntryButton = props => {\n  return (\n    <WithHoverSound>\n      <button\n        className={cx([{ [styles.entryButton]: true, [styles.entryButtonSecondary]: props.secondary }])}\n        onClick={props.onClick}\n      >\n        <img src={props.iconSrc} className={styles.icon} />\n        <div className={styles.label}>\n          <div className={styles.contents}>\n            <span>\n              <FormattedMessage id={props.prefixMessageId} />\n            </span>\n            <span className={styles.bolded}>\n              <FormattedMessage id={props.mediumMessageId} />\n            </span>\n            {props.subtitle && (\n              <div className={styles.subtitle}>\n                <FormattedMessage id={props.subtitle} />\n              </div>\n            )}\n          </div>\n        </div>\n      </button>\n    </WithHoverSound>\n  );\n};\n\nEntryButton.propTypes = {\n  onClick: PropTypes.func,\n  iconSrc: PropTypes.string,\n  secondary: PropTypes.bool,\n  prefixMessageId: PropTypes.string,\n  mediumMessageId: PropTypes.string,\n  subtitle: PropTypes.string,\n  isInHMD: PropTypes.bool\n};\n\nconst isMobile = AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR();\n\nexport const TwoDEntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: isMobile ? MobileScreenEntryImg : DesktopScreenEntryImg,\n    prefixMessageId: \"entry.screen-prefix\",\n    mediumMessageId: isMobile ? \"entry.mobile-screen\" : \"entry.desktop-screen\"\n  };\n\n  return <EntryButton {...entryButtonProps} />;\n};\n\nexport const GenericEntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: GenericVREntryImg,\n    prefixMessageId: \"entry.generic-prefix\",\n    mediumMessageId: \"entry.generic-medium\",\n    subtitle: isMobile ? null : \"entry.generic-subtitle-desktop\"\n  };\n\n  return <EntryButton {...entryButtonProps} />;\n};\n\nexport const GearVREntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: GearVREntryImg,\n    prefixMessageId: \"entry.gearvr-prefix\",\n    mediumMessageId: \"entry.gearvr-medium\"\n  };\n\n  return <EntryButton {...entryButtonProps} />;\n};\n\nexport const DaydreamEntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: DaydreamEntryImg,\n    prefixMessageId: \"entry.daydream-prefix\",\n    mediumMessageId: \"entry.daydream-medium\"\n  };\n\n  return <EntryButton {...entryButtonProps} />;\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport { faPencilAlt } from \"@fortawesome/free-solid-svg-icons/faPencilAlt\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport { SCHEMA } from \"../storage/store\";\nimport styles from \"../assets/stylesheets/profile.scss\";\n// import hubLogo from \"../assets/images/hub-preview-white.png\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport { fetchAvatar } from \"../utils/avatar-utils\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { replaceHistoryState } from \"../utils/history\";\nimport StateLink from \"./state-link\";\n\nimport AvatarPreview from \"./avatar-preview\";\n\nclass ProfileEntryPanel extends Component {\n  static propTypes = {\n    displayNameOverride: PropTypes.string,\n    store: PropTypes.object,\n    mediaSearchStore: PropTypes.object,\n    messages: PropTypes.object,\n    finished: PropTypes.func,\n    intl: PropTypes.object,\n    history: PropTypes.object,\n    avatarId: PropTypes.string\n  };\n\n  state = {\n    avatarId: null,\n    displayName: null,\n    avatar: null\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = this.getStateFromProfile();\n    if (props.avatarId) {\n      this.state.avatarId = props.avatarId;\n    }\n    this.props.store.addEventListener(\"statechanged\", this.storeUpdated);\n    this.scene = document.querySelector(\"a-scene\");\n  }\n\n  getStateFromProfile = () => {\n    const { displayName, avatarId } = this.props.store.state.profile;\n    return { displayName, avatarId };\n  };\n\n  storeUpdated = () => this.setState(this.getStateFromProfile());\n\n  saveStateAndFinish = e => {\n    e && e.preventDefault();\n\n    const { displayName } = this.props.store.state.profile;\n    const { hasChangedName } = this.props.store.state.activity;\n\n    const hasChangedNowOrPreviously = hasChangedName || this.state.displayName !== displayName;\n    this.props.store.update({\n      activity: {\n        hasChangedName: hasChangedNowOrPreviously,\n        hasAcceptedProfile: true\n      },\n      profile: {\n        displayName: this.state.displayName,\n        avatarId: this.state.avatarId\n      }\n    });\n    this.props.finished();\n  };\n\n  stopPropagation = e => {\n    e.stopPropagation();\n  };\n\n  setAvatarFromMediaResult = ({ detail: entry }) => {\n    this.setState({ avatarId: entry.id });\n    // Replace history state with the current avatar id since this component gets destroyed when we open the\n    // avatar editor and we want the back button to work. We read the history state back via the avatarId prop.\n    // We read the current state key from history since it could be \"overlay\" or \"entry_step\".\n    replaceHistoryState(this.props.history, this.props.history.location.state.key, \"profile\", { avatarId: entry.id });\n  };\n\n  componentDidMount() {\n    if (this.nameInput) {\n      // stop propagation so that avatar doesn't move when wasd'ing during text input.\n      this.nameInput.addEventListener(\"keydown\", this.stopPropagation);\n      this.nameInput.addEventListener(\"keypress\", this.stopPropagation);\n      this.nameInput.addEventListener(\"keyup\", this.stopPropagation);\n    }\n    this.scene.addEventListener(\"action_selected_media_result_entry\", this.setAvatarFromMediaResult);\n    // This handles editing avatars in the entry_step, since this component remains mounted with the same avatarId\n    this.scene.addEventListener(\"action_avatar_saved\", this.refetchAvatar);\n\n    this.refetchAvatar();\n  }\n\n  componentDidUpdate(_prevProps, prevState) {\n    if (prevState.avatarId !== this.state.avatarId) {\n      this.refetchAvatar();\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.store.removeEventListener(\"statechanged\", this.storeUpdated);\n    if (this.nameInput) {\n      this.nameInput.removeEventListener(\"keydown\", this.stopPropagation);\n      this.nameInput.removeEventListener(\"keypress\", this.stopPropagation);\n      this.nameInput.removeEventListener(\"keyup\", this.stopPropagation);\n    }\n    this.scene.removeEventListener(\"action_selected_media_result_entry\", this.setAvatarFromMediaResult);\n    this.scene.removeEventListener(\"action_avatar_saved\", this.refetchAvatar);\n  }\n\n  refetchAvatar = async () => {\n    const avatar = await fetchAvatar(this.state.avatarId);\n    if (this.state.avatarId !== avatar.avatar_id) return; // This is an old result, ignore it\n    this.setState({ avatar });\n  };\n\n  render() {\n    const { formatMessage } = this.props.intl;\n\n    return (\n      <div className={styles.profileEntry}>\n        <form onSubmit={this.saveStateAndFinish} className={styles.form}>\n          <div className={classNames([styles.box, styles.darkened])}>\n            <label htmlFor=\"#profile-entry-display-name\" className={styles.title}>\n              <FormattedMessage id=\"profile.header\" />\n            </label>\n            {this.props.displayNameOverride ? (\n              <span className={styles.displayName}>{this.props.displayNameOverride}</span>\n            ) : (\n              <input\n                id=\"profile-entry-display-name\"\n                className={styles.formFieldText}\n                value={this.state.displayName}\n                onFocus={e => handleTextFieldFocus(e.target)}\n                onBlur={() => handleTextFieldBlur()}\n                onChange={e => this.setState({ displayName: e.target.value })}\n                required\n                spellCheck=\"false\"\n                pattern={SCHEMA.definitions.profile.properties.displayName.pattern}\n                title={formatMessage({ id: \"profile.display_name.validation_warning\" })}\n                ref={inp => (this.nameInput = inp)}\n              />\n            )}\n\n            {this.state.avatar ? (\n              <div className={styles.preview}>\n                <AvatarPreview avatarGltfUrl={this.state.avatar.gltf_url} />\n\n                {this.state.avatar.account_id === this.props.store.credentialsAccountId && (\n                  <StateLink\n                    stateKey=\"overlay\"\n                    stateValue=\"avatar-editor\"\n                    stateDetail={{ avatarId: this.state.avatarId, hideDelete: true, returnToProfile: true }}\n                    history={this.props.history}\n                    className={styles.editAvatar}\n                  >\n                    <FontAwesomeIcon icon={faPencilAlt} />\n                  </StateLink>\n                )}\n\n                <div className={styles.chooseAvatar}>\n                  <a onClick={() => this.props.mediaSearchStore.sourceNavigateWithNoNav(\"avatars\")}>\n                    <FormattedMessage id=\"profile.choose_avatar\" />\n                  </a>\n                </div>\n              </div>\n            ) : (\n              <div className={styles.preview}>\n                <div className={styles.chooseAvatar}>\n                  <a onClick={() => this.props.mediaSearchStore.sourceNavigateWithNoNav(\"avatars\")}>\n                    <FormattedMessage id=\"profile.choose_avatar\" />\n                  </a>\n                </div>\n              </div>\n            )}\n\n            <WithHoverSound>\n              <input className={styles.formSubmit} type=\"submit\" value={formatMessage({ id: \"profile.save\" })} />\n            </WithHoverSound>\n            <div className={styles.links}>\n              <WithHoverSound>\n                <a\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  href=\"https://github.com/mozilla/hubs/blob/master/TERMS.md\"\n                >\n                  <FormattedMessage id=\"profile.terms_of_use\" />\n                </a>\n              </WithHoverSound>\n\n              <WithHoverSound>\n                <a\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  href=\"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\"\n                >\n                  <FormattedMessage id=\"profile.privacy_notice\" />\n                </a>\n              </WithHoverSound>\n            </div>\n          </div>\n        </form>\n        <img className={styles.logo} src={this.props.logo} />\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(ProfileEntryPanel);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport { faAngleRight } from \"@fortawesome/free-solid-svg-icons/faAngleRight\";\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons/faSearch\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons/faStar\";\nimport { faCloudUploadAlt } from \"@fortawesome/free-solid-svg-icons/faCloudUploadAlt\";\nimport { faLink } from \"@fortawesome/free-solid-svg-icons/faLink\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport styles from \"../assets/stylesheets/media-browser.scss\";\nimport { pushHistoryPath, pushHistoryState, sluglessPath } from \"../utils/history\";\nimport { SOURCES } from \"../storage/media-search-store\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { showFullScreenIfWasFullScreen } from \"../utils/fullscreen\";\nimport MediaTiles from \"./media-tiles\";\n\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\nconst PRIVACY_POLICY_LINKS = {\n  videos: \"https://privacy.microsoft.com/en-us/privacystatement\",\n  images: \"https://privacy.microsoft.com/en-us/privacystatement\",\n  gifs: \"https://tenor.com/legal-privacy\",\n  sketchfab: \"https://sketchfab.com/privacy\",\n  poly: \"https://policies.google.com/privacy\",\n  youtube: \"https://policies.google.com/privacy\",\n  twitch: \"https://www.twitch.tv/p/legal/privacy-policy/\"\n};\n\nconst DEFAULT_FACETS = {\n  sketchfab: [\n    { text: \"Animals\", params: { filter: \"animals-pets\" } },\n    { text: \"Architecture\", params: { filter: \"architecture\" } },\n    { text: \"Art\", params: { filter: \"art-abstract\" } },\n    { text: \"Vehicles\", params: { filter: \"cars-vehicles\" } },\n    { text: \"Characters\", params: { filter: \"characters-creatures\" } },\n    { text: \"Culture\", params: { filter: \"cultural-heritage-history\" } },\n    { text: \"Gadgets\", params: { filter: \"electronics-gadgets\" } },\n    { text: \"Fashion\", params: { filter: \"fashion-style\" } },\n    { text: \"Food\", params: { filter: \"food-drink\" } },\n    { text: \"Furniture\", params: { filter: \"furniture-home\" } },\n    { text: \"Music\", params: { filter: \"music\" } },\n    { text: \"Nature\", params: { filter: \"nature-plants\" } },\n    { text: \"News\", params: { filter: \"news-politics\" } },\n    { text: \"People\", params: { filter: \"people\" } },\n    { text: \"Places\", params: { filter: \"places-travel\" } },\n    { text: \"Science\", params: { filter: \"science-technology\" } },\n    { text: \"Sports\", params: { filter: \"sports-fitness\" } },\n    { text: \"Weapons\", params: { filter: \"weapons-military\" } }\n  ],\n  poly: [\n    { text: \"Animals\", params: { filter: \"animals\" } },\n    { text: \"Architecture\", params: { filter: \"architecture\" } },\n    { text: \"Art\", params: { filter: \"art\" } },\n    { text: \"Food\", params: { filter: \"food\" } },\n    { text: \"Nature\", params: { filter: \"nature\" } },\n    { text: \"Objects\", params: { filter: \"objects\" } },\n    { text: \"People\", params: { filter: \"people\" } },\n    { text: \"Scenes\", params: { filter: \"scenes\" } },\n    { text: \"Transport\", params: { filter: \"transport\" } }\n  ],\n  avatars: [\n    { text: \"Featured\", params: { filter: \"featured\" } },\n    { text: \"My Avatars\", params: { filter: \"my-avatars\" } }\n  ],\n  favorites: [],\n  scenes: [{ text: \"Featured\", params: { filter: \"featured\" } }, { text: \"My Scenes\", params: { filter: \"my-scenes\" } }]\n};\n\nclass MediaBrowser extends Component {\n  static propTypes = {\n    mediaSearchStore: PropTypes.object,\n    history: PropTypes.object,\n    intl: PropTypes.object,\n    hubChannel: PropTypes.object,\n    onMediaSearchResultEntrySelected: PropTypes.func,\n    performConditionalSignIn: PropTypes.func\n  };\n\n  state = { query: \"\", facets: [], showNav: true, selectNextResult: false, clearStashedQueryOnClose: false };\n\n  constructor(props) {\n    super(props);\n    this.state = this.getStoreAndHistoryState(props);\n    this.props.mediaSearchStore.addEventListener(\"statechanged\", this.storeUpdated);\n    this.props.mediaSearchStore.addEventListener(\"sourcechanged\", this.sourceChanged);\n  }\n\n  componentDidMount() {}\n\n  componentWillUnmount() {\n    this.props.mediaSearchStore.removeEventListener(\"statechanged\", this.storeUpdated);\n    this.props.mediaSearchStore.removeEventListener(\"sourcechanged\", this.sourceChanged);\n  }\n\n  storeUpdated = () => {\n    const newState = this.getStoreAndHistoryState(this.props);\n    this.setState(newState);\n\n    if (this.state.selectNextResult) {\n      if (newState.result && newState.result.entries.length > 0) {\n        this.selectEntry(newState.result.entries[0]);\n      } else {\n        this.close();\n      }\n    }\n  };\n\n  sourceChanged = () => {\n    if (this.inputRef && !isMobile && !isMobileVR) {\n      this.inputRef.focus();\n    }\n  };\n\n  getUrlSource = searchParams =>\n    searchParams.get(\"media_source\") || sluglessPath(this.props.history.location).substring(7);\n\n  getStoreAndHistoryState = props => {\n    const searchParams = new URLSearchParams(props.history.location.search);\n    const result = props.mediaSearchStore.result;\n\n    const newState = { result, query: this.state.query || searchParams.get(\"q\") || \"\" };\n    const urlSource = this.getUrlSource(searchParams);\n    newState.showNav = !!(searchParams.get(\"media_nav\") !== \"false\");\n\n    if (result && result.suggestions && result.suggestions.length > 0) {\n      newState.facets = result.suggestions.map(s => {\n        return { text: s, params: { q: s } };\n      });\n    } else {\n      newState.facets = DEFAULT_FACETS[urlSource] || [];\n    }\n\n    return newState;\n  };\n\n  handleQueryUpdated = (query, forceNow) => {\n    this.setState({ result: null });\n\n    if (this._sendQueryTimeout) {\n      clearTimeout(this._sendQueryTimeout);\n      this._sendQueryTimeout = null;\n    }\n\n    if (forceNow) {\n      this.props.mediaSearchStore.filterQueryNavigate(\"\", query);\n    } else {\n      // Don't update search on every keystroke, but buffer for some ms.\n      this._sendQueryTimeout = setTimeout(() => {\n        // Drop filter for now, so entering text drops into \"search all\" mode\n        this.props.mediaSearchStore.filterQueryNavigate(\"\", query);\n        this._sendQueryTimeout = null;\n      }, 500);\n    }\n\n    this.setState({ query });\n  };\n\n  handleEntryClicked = (evt, entry) => {\n    evt.preventDefault();\n\n    if (!entry.lucky_query) {\n      this.selectEntry(entry);\n    } else {\n      // Entry has a pointer to another \"i'm feeling lucky\" query -- used for trending videos\n      //\n      // Also, mark the browser to clear the stashed query on close, since this is a temporary\n      // query we are running to get the result we want.\n      this.setState({ clearStashedQueryOnClose: true });\n      this.handleQueryUpdated(entry.lucky_query, true);\n    }\n  };\n\n  selectEntry = entry => {\n    if (!this.props.onMediaSearchResultEntrySelected) return;\n    this.props.onMediaSearchResultEntrySelected(entry);\n    this.close();\n  };\n\n  handleSourceClicked = source => {\n    this.props.mediaSearchStore.sourceNavigate(source);\n  };\n\n  handleFacetClicked = facet => {\n    const searchParams = this.getSearchClearedSearchParams(true, true);\n\n    for (const [k, v] of Object.entries(facet.params)) {\n      searchParams.set(k, v);\n    }\n\n    pushHistoryPath(this.props.history, this.props.history.location.pathname, searchParams.toString());\n  };\n\n  getSearchClearedSearchParams = (keepSource, keepNav) => {\n    return this.props.mediaSearchStore.getSearchClearedSearchParams(this.props.history.location, keepSource, keepNav);\n  };\n\n  pushExitMediaBrowserHistory = (stashLastSearchParams = true) => {\n    this.props.mediaSearchStore.pushExitMediaBrowserHistory(this.props.history, stashLastSearchParams);\n  };\n\n  showCustomMediaDialog = source => {\n    const isSceneApiType = source === \"scenes\";\n    const isAvatarApiType = source === \"avatars\";\n    this.pushExitMediaBrowserHistory(!isAvatarApiType);\n    const dialog = isSceneApiType ? \"change_scene\" : isAvatarApiType ? \"avatar_url\" : \"create\";\n    pushHistoryState(this.props.history, \"modal\", dialog);\n  };\n\n  close = () => {\n    showFullScreenIfWasFullScreen();\n    const urlSource = this.getUrlSource(new URLSearchParams(this.props.history.location.search));\n    this.pushExitMediaBrowserHistory(urlSource !== \"avatars\" && urlSource !== \"favorites\");\n    if (this.state.clearStashedQueryOnClose) {\n      this.props.mediaSearchStore.clearStashedQuery();\n    }\n  };\n\n  handlePager = delta => {\n    this.setState({ result: null });\n    this.props.mediaSearchStore.pageNavigate(delta);\n    this.browserDiv.scrollTop = 0;\n  };\n\n  render() {\n    const { formatMessage } = this.props.intl;\n    const searchParams = new URLSearchParams(this.props.history.location.search);\n    const urlSource = this.getUrlSource(searchParams);\n    const isSceneApiType = urlSource === \"scenes\";\n    const isFavorites = urlSource === \"favorites\";\n    const showCustomOption =\n      !isFavorites && (!isSceneApiType || this.props.hubChannel.canOrWillIfCreator(\"update_hub\"));\n    const entries = (this.state.result && this.state.result.entries) || [];\n    const hideSearch = urlSource === \"avatars\" || urlSource === \"favorites\";\n    const showEmptyStringOnNoResult = urlSource !== \"avatars\" && urlSource !== \"scenes\";\n\n    // Don't render anything if we just did a feeling lucky query and are waiting on result.\n    if (this.state.selectNextResult) return <div />;\n    const handleCustomClicked = urlSource => {\n      const isAvatarApiType = urlSource === \"avatars\";\n      if (isAvatarApiType) {\n        this.showCustomMediaDialog(urlSource);\n      } else {\n        this.props.performConditionalSignIn(\n          () => !isSceneApiType || this.props.hubChannel.can(\"update_hub\"),\n          () => this.showCustomMediaDialog(urlSource),\n          \"change-scene\"\n        );\n      }\n    };\n\n    return (\n      <div className={styles.mediaBrowser} ref={browserDiv => (this.browserDiv = browserDiv)}>\n        <div className={classNames([styles.box, styles.darkened])}>\n          <div className={classNames(styles.header, { [styles.noSearch]: hideSearch })}>\n            <div className={styles.headerLeft}>\n              <a onClick={() => this.close()}>\n                <i>\n                  <FontAwesomeIcon icon={faTimes} />\n                </i>\n              </a>\n            </div>\n            <div className={styles.headerCenter}>\n              {urlSource === \"favorites\" && (\n                <div className={styles.favoritesHeader}>\n                  <i>\n                    <FontAwesomeIcon icon={faStar} />\n                  </i>\n                  <FormattedMessage id=\"media-browser.favorites-header\" />\n                </div>\n              )}\n              {!hideSearch && (\n                <div className={styles.search}>\n                  <i>\n                    <FontAwesomeIcon icon={faSearch} />\n                  </i>\n                  <input\n                    type=\"text\"\n                    autoFocus={!isMobile && !isMobileVR}\n                    ref={r => (this.inputRef = r)}\n                    placeholder={formatMessage({\n                      id: `media-browser.search-placeholder.${urlSource}`\n                    })}\n                    onFocus={e => handleTextFieldFocus(e.target)}\n                    onBlur={() => handleTextFieldBlur()}\n                    onKeyDown={e => {\n                      if (e.key === \"Enter\" && e.ctrlKey) {\n                        if (entries.length > 0 && !this._sendQueryTimeout) {\n                          this.handleEntryClicked(e, entries[0]);\n                        } else if (this.state.query.trim() !== \"\") {\n                          this.handleQueryUpdated(this.state.query, true);\n                          this.setState({ selectNextResult: true });\n                        } else {\n                          this.close();\n                        }\n                      } else if (e.key === \"Escape\" || (e.key === \"Enter\" && isMobile)) {\n                        e.target.blur();\n                      }\n                    }}\n                    value={this.state.query}\n                    onChange={e => this.handleQueryUpdated(e.target.value)}\n                  />\n                </div>\n              )}\n              <div className={styles.engineAttribution}>\n                {!hideSearch &&\n                  urlSource !== \"scenes\" &&\n                  urlSource !== \"avatars\" &&\n                  urlSource !== \"favorites\" && (\n                    <div className={styles.engineAttributionContents}>\n                      <FormattedMessage id={`media-browser.powered_by.${urlSource}`} />\n                      {PRIVACY_POLICY_LINKS[urlSource] && (\n                        <a href={PRIVACY_POLICY_LINKS[urlSource]} target=\"_blank\" rel=\"noreferrer noopener\">\n                          <FormattedMessage id=\"media-browser.privacy_policy\" />\n                        </a>\n                      )}\n                    </div>\n                  )}\n                {urlSource === \"scenes\" && (\n                  <div className={styles.engineAttributionContents}>\n                    <FormattedMessage id={`media-browser.powered_by.${urlSource}`} />\n                    <a href=\"/spoke\" target=\"_blank\" rel=\"noreferrer noopener\">\n                      <FormattedMessage id=\"media-browser.spoke\" />\n                    </a>\n                    |\n                    <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"/?report\">\n                      <FormattedMessage id=\"media-browser.report_issue\" />\n                    </a>\n                  </div>\n                )}\n              </div>\n            </div>\n            <div className={styles.headerRight}>\n              {showCustomOption && (\n                <a onClick={() => handleCustomClicked(urlSource)} className={styles.createButton}>\n                  <i>\n                    <FontAwesomeIcon icon={[\"scenes\", \"avatars\"].includes(urlSource) ? faLink : faCloudUploadAlt} />\n                  </i>\n                </a>\n              )}\n              {showCustomOption && (\n                <a onClick={() => handleCustomClicked(urlSource)} className={styles.createLink}>\n                  <FormattedMessage\n                    id={`media-browser.add_custom_${\n                      this.state.result && isSceneApiType ? \"scene\" : urlSource === \"avatars\" ? \"avatar\" : \"object\"\n                    }`}\n                  />\n                </a>\n              )}\n            </div>\n          </div>\n\n          {this.state.showNav && (\n            <div className={styles.nav}>\n              {SOURCES.map(s => (\n                <a\n                  onClick={() => this.handleSourceClicked(s)}\n                  key={s}\n                  className={classNames({ [styles.navSource]: true, [styles.navSourceSelected]: urlSource === s })}\n                >\n                  <FormattedMessage id={`media-browser.nav_title.${s}`} />\n                </a>\n              ))}\n              <div className={styles.navRightPad}>&nbsp;</div>\n              <div className={styles.navScrollArrow}>\n                <FontAwesomeIcon icon={faAngleRight} />\n              </div>\n            </div>\n          )}\n\n          {this.state.facets &&\n            this.state.facets.length > 0 && (\n              <div className={styles.facets}>\n                {this.state.facets.map((s, i) => (\n                  <a onClick={() => this.handleFacetClicked(s)} key={i} className={styles.facet}>\n                    {s.text}\n                  </a>\n                ))}\n              </div>\n            )}\n\n          {this.props.mediaSearchStore.isFetching ||\n          this._sendQueryTimeout ||\n          (this.state.result && this.state.result.entries.length > 0) ||\n          !showEmptyStringOnNoResult ? (\n            <MediaTiles\n              result={this.state.result}\n              history={this.props.history}\n              urlSource={urlSource}\n              handleEntryClicked={this.handleEntryClicked}\n              handlePager={this.handlePager}\n            />\n          ) : (\n            <div className={styles.emptyString}>\n              <FormattedMessage id={`media-browser.empty.${urlSource}`} />\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(MediaBrowser);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport giphyLogo from \"../assets/images/giphy_logo.png\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPaperclip } from \"@fortawesome/free-solid-svg-icons/faPaperclip\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport styles from \"../assets/stylesheets/create-object-dialog.scss\";\nimport cx from \"classnames\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nconst attributionHostnames = {\n  \"giphy.com\": giphyLogo,\n  \"media.giphy.com\": giphyLogo\n};\n\nconst DEFAULT_OBJECT_URL = \"https://asset-bundles-prod.reticulum.io/interactables/Ducky/DuckyMesh-438ff8e022.gltf\";\nconst isMobile = AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR();\nconst instructions = \"Paste a URL to an image, video, model, scene, or upload.\";\nconst desktopTips = \"Tip: You can paste URLs directly into Hubs with Ctrl+V\";\nconst references = (\n  <span>\n    For models, try{\" \"}\n    <a href=\"https://sketchfab.com/search?features=downloadable&type=models\" target=\"_blank\" rel=\"noopener noreferrer\">\n      Sketchfab\n    </a>,{\" \"}\n    <a href=\"http://poly.google.com/\" target=\"_blank\" rel=\"noopener noreferrer\">\n      Google Poly\n    </a>, or our{\" \"}\n    <a href=\"https://sketchfab.com/mozillareality\" target=\"_blank\" rel=\"noopener noreferrer\">\n      collection\n    </a>.\n  </span>\n);\n\nconst mobileInstructions = (\n  <div>\n    <p>{instructions}</p>\n    <p>{references}</p>\n  </div>\n);\nconst desktopInstructions = (\n  <div>\n    <p>{instructions}</p>\n    <p>{references}</p>\n    <p>{desktopTips}</p>\n  </div>\n);\n\nlet lastUrl = \"\";\nconst fileInputId = \"file-input\";\n\nexport default class CreateObjectDialog extends Component {\n  state = {\n    url: \"\",\n    file: null,\n    fileName: \"\"\n  };\n\n  static propTypes = {\n    onCreate: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  componentDidMount() {\n    this.setState({ url: lastUrl });\n  }\n\n  componentWillUnmount() {\n    lastUrl = this.state.url;\n  }\n\n  onUrlChange = e => {\n    let attributionImage = this.state.attributionImage;\n    if (e.target && e.target.value && e.target.validity.valid) {\n      const url = new URL(e.target.value);\n      attributionImage = attributionHostnames[url.hostname];\n    }\n    this.setState({\n      url: e.target && e.target.value,\n      attributionImage: attributionImage\n    });\n  };\n\n  onFileChange = e => {\n    this.setState({\n      file: e.target.files[0],\n      fileName: e.target.files[0].name\n    });\n  };\n\n  reset = e => {\n    e.preventDefault();\n    this.setState({\n      url: \"\",\n      file: null,\n      fileName: \"\"\n    });\n    this.fileInput.value = null;\n  };\n\n  onCreateClicked = e => {\n    e.preventDefault();\n    this.props.onCreate(this.state.file || this.state.url || DEFAULT_OBJECT_URL);\n    this.props.onClose();\n  };\n\n  render() {\n    const { onCreate, onClose, ...other } = this.props; // eslint-disable-line no-unused-vars\n\n    const cancelButton = (\n      <WithHoverSound>\n        <label className={cx(styles.smallButton, styles.cancelIcon)} onClick={this.reset}>\n          <FontAwesomeIcon icon={faTimes} />\n        </label>\n      </WithHoverSound>\n    );\n    const uploadButton = (\n      <WithHoverSound>\n        <label htmlFor={fileInputId} className={cx(styles.smallButton, styles.uploadIcon)}>\n          <FontAwesomeIcon icon={faPaperclip} />\n        </label>\n      </WithHoverSound>\n    );\n    const filenameLabel = <label className={cx(styles.leftSideOfInput)}>{this.state.fileName}</label>;\n    const urlInput = (\n      <input\n        className={cx(styles.leftSideOfInput)}\n        placeholder=\"Image/Video/glTF URL\"\n        onFocus={e => handleTextFieldFocus(e.target)}\n        onBlur={() => handleTextFieldBlur()}\n        onChange={this.onUrlChange}\n        type=\"url\"\n        value={this.state.url}\n      />\n    );\n\n    return (\n      <DialogContainer title=\"Create Object\" onClose={this.props.onClose} {...other}>\n        <div>\n          {isMobile ? mobileInstructions : desktopInstructions}\n          <form onSubmit={this.onCreateClicked}>\n            <div className={styles.addMediaForm}>\n              <input\n                id={fileInputId}\n                ref={f => (this.fileInput = f)}\n                className={styles.hideFileInput}\n                type=\"file\"\n                onChange={this.onFileChange}\n              />\n              <div className={styles.inputBorder}>\n                {this.state.file ? filenameLabel : urlInput}\n                {this.state.url || this.state.fileName ? cancelButton : uploadButton}\n              </div>\n              <div className={styles.buttons}>\n                <WithHoverSound>\n                  <button className={styles.actionButton}>\n                    <span>Create</span>\n                  </button>\n                </WithHoverSound>\n              </div>\n              {this.state.attributionImage ? (\n                <div>\n                  <img src={this.state.attributionImage} />\n                </div>\n              ) : null}\n            </div>\n          </form>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/change-scene-dialog.scss\";\nimport cx from \"classnames\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { FormattedMessage } from \"react-intl\";\n\nexport default class ChangeSceneDialog extends Component {\n  state = {\n    url: \"\"\n  };\n\n  static propTypes = {\n    onChange: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  onUrlChange = e => {\n    this.setState({\n      url: e.target && e.target.value\n    });\n  };\n\n  reset = e => {\n    e.preventDefault();\n    this.setState({ url: \"\" });\n  };\n\n  onChangeClicked = e => {\n    e.preventDefault();\n\n    if (this.state.url) {\n      this.props.onChange(this.state.url);\n    }\n\n    this.props.onClose();\n  };\n\n  render() {\n    const { onChange, onClose } = this.props; // eslint-disable-line no-unused-vars\n\n    return (\n      <DialogContainer title=\"Custom Scene\" onClose={this.props.onClose}>\n        <div>\n          <div>\n            <p>\n              Paste a URL to a{\" \"}\n              <a href=\"/spoke\" target=\"_blank\" rel=\"noopener noreferrer\">\n                Spoke\n              </a>{\" \"}\n              scene or a URL to a{\" \"}\n              <a href=\"https://en.wikipedia.org/wiki/GlTF#GLB\" target=\"_blank\" rel=\"noopener noreferrer\">\n                GLB\n              </a>.\n            </p>\n          </div>\n          <form onSubmit={this.onChangeClicked}>\n            <div className={styles.changeSceneForm}>\n              <div className={styles.inputBorder}>\n                <input\n                  className={cx(styles.leftSideOfInput)}\n                  placeholder=\"Scene URL\"\n                  onFocus={e => handleTextFieldFocus(e.target)}\n                  onBlur={() => handleTextFieldBlur()}\n                  onChange={this.onUrlChange}\n                  type=\"url\"\n                  value={this.state.url}\n                />\n              </div>\n              <div className={styles.buttons}>\n                <button className={styles.actionButton}>\n                  <FormattedMessage id=\"change-scene-dialog.change-scene\" />\n                </button>\n              </div>\n              <div className={styles.spokeCreate}>\n                <div>\n                  <FormattedMessage id=\"change-scene-dialog.create-in-spoke\" />\n                </div>\n                <a className={styles.spokeLaunch} href=\"/spoke/new\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  <FormattedMessage id=\"change-scene-dialog.new-spoke-project\" />\n                </a>\n              </div>\n            </div>\n          </form>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport styles from \"../assets/stylesheets/avatar-url-dialog.scss\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\n\nexport default class AvatarUrlDialog extends Component {\n  state = {\n    url: \"\"\n  };\n\n  static propTypes = {\n    onChange: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  onUrlChange = e => {\n    this.setState({\n      url: e.target && e.target.value\n    });\n  };\n\n  onChangeClicked = e => {\n    e.preventDefault();\n\n    if (this.state.url) {\n      this.props.onChange(this.state.url);\n    }\n\n    this.props.onClose();\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Custom Avatar URL\" className={styles.avatarUrlDialog} onClose={this.props.onClose}>\n        <p>\n          Paste a URL to a{\" \"}\n          <a href=\"https://en.wikipedia.org/wiki/GlTF#GLB\" target=\"_blank\" rel=\"noopener noreferrer\">\n            GLB\n          </a>.\n        </p>\n        <form className=\"form\" onSubmit={this.onChangeClicked}>\n          <input\n            className=\"url-field\"\n            placeholder=\"Avatar GLB URL\"\n            onFocus={e => handleTextFieldFocus(e.target)}\n            onBlur={() => handleTextFieldBlur()}\n            onChange={this.onUrlChange}\n            type=\"url\"\n            value={this.state.url}\n          />\n          <button className=\"submit\">\n            <FormattedMessage id=\"avatar-url-dialog.apply\" />\n          </button>\n        </form>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class HelpDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"Getting Started\" {...this.props}>\n        <div className=\"info-dialog__help\">\n          <p style={{ textAlign: \"center\" }}>\n            Join the Hubs community on{\" \"}\n            <WithHoverSound>\n              <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://discord.gg/wHmY4nd\">\n                Discord\n              </a>\n            </WithHoverSound>\n            !\n          </p>\n          <p>When in a room, other avatars can see and hear you.</p>\n          <p>\n            Use your controller&apos;s action button to teleport from place to place. If it has a grip, use it to pick\n            up objects.\n          </p>\n          <p>\n            In VR, <b>look up</b> to find your menu.\n          </p>\n          <p>\n            The <b>Mic Toggle</b> mutes your mic.\n          </p>\n          <p>\n            The <b>Pause Toggle</b> pauses all other avatars and lets you block others or pin or remove objects.\n          </p>\n          <p>\n            See detailed{\" \"}\n            <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/mozilla/hubs/wiki/Hubs-Features\">\n              feature\n            </a>{\" \"}\n            and{\" \"}\n            <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/mozilla/hubs/wiki/Hubs-Controls\">\n              controls\n            </a>{\" \"}\n            documentation.\n          </p>\n          <p className=\"dialog__box__contents__links\">\n            <WithHoverSound>\n              <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/mozilla/hubs/blob/master/TERMS.md\">\n                <FormattedMessage id=\"profile.terms_of_use\" />\n              </a>\n            </WithHoverSound>\n            <WithHoverSound>\n              <a\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                href=\"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\"\n              >\n                <FormattedMessage id=\"profile.privacy_notice\" />\n              </a>\n            </WithHoverSound>\n            <WithHoverSound>\n              <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"/?report\">\n                <FormattedMessage id=\"help.report_issue\" />\n              </a>\n            </WithHoverSound>\n          </p>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","/**\n * Wraps navigator.share with a fallback to twitter for unsupported browsers\n */\nexport function share(opts) {\n  if (navigator.share) {\n    return navigator.share(opts);\n  } else {\n    const { title, url } = opts;\n    const width = 550;\n    const height = 420;\n    const left = (screen.width - width) / 2;\n    const top = (screen.height - height) / 2;\n    const params = `scrollbars=no,menubar=no,toolbar=no,status=no,width=${width},height=${height},top=${top},left=${left}`;\n    const tweetLink = `https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${encodeURIComponent(\n      title\n    )}`;\n    window.open(tweetLink, \"_blank\", params);\n    return Promise.resolve();\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport copy from \"copy-to-clipboard\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\nimport { share } from \"../utils/share\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport styles from \"../assets/stylesheets/invite-dialog.scss\";\n\nfunction pad(num, size) {\n  let s = `${num}`;\n  while (s.length < size) s = `0${s}`;\n  return s;\n}\n\nexport default class InviteDialog extends Component {\n  static propTypes = {\n    entryCode: PropTypes.number,\n    hubId: PropTypes.string,\n    allowShare: PropTypes.bool,\n    isModal: PropTypes.bool,\n    onClose: PropTypes.func,\n    hasPush: PropTypes.bool,\n    isSubscribed: PropTypes.bool,\n    onSubscribeChanged: PropTypes.func,\n    embedUrl: PropTypes.string\n  };\n\n  state = {\n    copyButtonActive: false,\n    shareButtonActive: false\n  };\n\n  shareClicked = url => {\n    this.setState({ shareButtonActive: true });\n    share({ url, title: \"Join me now in #hubs!\" }).then(() => {\n      this.setState({ shareButtonActive: false });\n    });\n  };\n\n  copyClicked = link => {\n    this.setState({ copyButtonActive: true });\n    setTimeout(() => this.setState({ copyButtonActive: false }), 5000);\n\n    copy(link);\n  };\n\n  render() {\n    const { entryCode, embedUrl } = this.props;\n\n    const entryCodeString = pad(entryCode, 6);\n    const shortLinkText = `hub.link/${this.props.hubId}`;\n    const shortLink = \"https://\" + shortLinkText;\n    const embedText = `<iframe src=\"${embedUrl}\" style=\"width: 1024px; height: 768px;\" allow=\"microphone; camera; vr; speaker;\"></iframe>`;\n\n    return (\n      <div className={classNames({ [styles.dialog]: true, [styles.modal]: this.props.isModal })}>\n        {!this.props.isModal && <div className={styles.attachPoint} />}\n        <WithHoverSound>\n          <button className={styles.close} onClick={() => this.props.onClose()}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </button>\n        </WithHoverSound>\n        <div>\n          <FormattedMessage id={`invite.enter_via${this.props.isModal ? \"_modal\" : \"\"}`} />\n          <WithHoverSound>\n            <a href=\"https://hub.link\" target=\"_blank\" className={styles.hubLinkLink} rel=\"noopener noreferrer\">\n              hub.link\n            </a>\n          </WithHoverSound>\n          <FormattedMessage id=\"invite.and_enter_code\" />\n        </div>\n        <div className={styles.code}>\n          {entryCodeString.split(\"\").map((d, i) => (\n            <div className={classNames({ [styles.digit]: true, [styles[`digit_${i}`]]: true })} key={`link_code_${i}`}>\n              {d}\n            </div>\n          ))}\n        </div>\n        <div>\n          <FormattedMessage id={`invite.or_visit${this.props.isModal ? \"_modal\" : \"\"}`} />\n        </div>\n        <div className={styles.domain}>\n          <input type=\"text\" readOnly onFocus={e => e.target.select()} value={shortLinkText} />\n        </div>\n        <div className={styles.buttons}>\n          <WithHoverSound>\n            <button className={styles.linkButton} onClick={this.copyClicked.bind(this, shortLink)}>\n              <span>{this.state.copyButtonActive ? \"copied!\" : \"copy\"}</span>\n            </button>\n          </WithHoverSound>\n          {this.props.allowShare &&\n            navigator.share && (\n              <WithHoverSound>\n                <button className={styles.linkButton} onClick={this.shareClicked.bind(this, shortLink)}>\n                  <span>{this.state.shareButtonActive ? \"sharing...\" : \"share\"}</span>\n                </button>\n              </WithHoverSound>\n            )}\n          {this.props.allowShare &&\n            !navigator.share && (\n              <WithHoverSound>\n                <button className={styles.linkButton} onClick={this.shareClicked.bind(this, shortLink)}>\n                  <FormattedMessage id=\"invite.tweet\" />\n                </button>\n              </WithHoverSound>\n            )}\n        </div>\n        {embedUrl && (\n          <div className={styles.embed}>\n            <div>\n              <FormattedMessage id={`invite.embed`} />\n            </div>\n            <div className={styles.embedText}>\n              <input\n                type=\"text\"\n                readOnly\n                onFocus={e => {\n                  e.target.select();\n                  this.setState({ showEmbedTip: true });\n                }}\n                onBlur={() => this.setState({ showEmbedTip: false })}\n                value={embedText}\n              />\n            </div>\n            {this.state.showEmbedTip && (\n              <div className={styles.embedTipWrap}>\n                <div className={styles.embedTip}>\n                  <div className={styles.embedTipAttachPoint} />\n                  <FormattedMessage id=\"invite.embed-tip\" />\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n        {this.props.hasPush && (\n          <div className={styles.subscribe}>\n            <input\n              id=\"subscribe\"\n              type=\"checkbox\"\n              onChange={() => this.props.onSubscribeChanged()}\n              checked={this.props.isSubscribed}\n            />\n            <label htmlFor=\"subscribe\">\n              <FormattedMessage id=\"entry.notify_me\" />\n            </label>\n          </div>\n        )}\n\n        {this.props.isModal && (\n          <button className={styles.enterVrButton} onClick={() => this.props.onClose()}>\n            <FormattedMessage id=\"entry.return-to-vr\" />\n          </button>\n        )}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\nimport PropTypes from \"prop-types\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class InviteTeamDialog extends Component {\n  static propTypes = {\n    hubChannel: PropTypes.object\n  };\n\n  state = {\n    inviteButtonText: \"invite a hubs team member\"\n  };\n\n  constructor(props) {\n    super(props);\n  }\n\n  inviteClicked = () => {\n    this.setState({ inviteButtonText: \"OK! We'll be there shortly.\" });\n    this.props.hubChannel.requestSupport();\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Let's Chat!\" {...this.props}>\n        <div>\n          <div>\n            <p>Have an idea for Hubs? Having trouble?</p>\n            <p>We&apos;d love to chat. Someone from our team will join you in just a few minutes.</p>\n          </div>\n          <div className=\"invite-team-form\">\n            <div className=\"invite-team-form__buttons\">\n              <WithHoverSound>\n                <button className=\"invite-team-form__action-button\" onClick={this.inviteClicked}>\n                  <span>{this.state.inviteButtonText}</span>\n                </button>\n              </WithHoverSound>\n            </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\nimport LinkDialogHeader from \"../assets/images/link_dialog_header.svg\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nimport styles from \"../assets/stylesheets/link-dialog.scss\";\n\nexport default class LinkDialog extends Component {\n  static propTypes = {\n    linkCode: PropTypes.string,\n    onClose: PropTypes.func\n  };\n\n  render() {\n    const { linkCode } = this.props;\n\n    return (\n      <div className={styles.dialog}>\n        <WithHoverSound>\n          <div className={styles.close} onClick={() => this.props.onClose()}>\n            <span>×</span>\n          </div>\n        </WithHoverSound>\n        <div>\n          {!linkCode && (\n            <div>\n              <div className={classNames(\"loading-panel\", styles.codeLoadingPanel)}>\n                <div className=\"loader-wrap\">\n                  <div className=\"loader\">\n                    <div className=\"loader-center\" />\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n          {linkCode && (\n            <div className={styles.contents}>\n              <img className={styles.imageHeader} src={LinkDialogHeader} />\n              <div className={styles.header}>\n                <FormattedMessage id=\"link.connect_headset\" />\n              </div>\n              <div>\n                <FormattedMessage id=\"link.in_your_browser\" />\n              </div>\n              <WithHoverSound>\n                <a href=\"https://hub.link\" className={styles.domain} target=\"_blank\" rel=\"noopener noreferrer\">\n                  hub.link\n                </a>\n              </WithHoverSound>\n              <div>\n                <FormattedMessage id=\"link.enter_code\" />\n              </div>\n              {linkCode && (\n                <div className={styles.code}>\n                  {linkCode.split(\"\").map((d, i) => (\n                    <span className={styles.digit} key={`link_code_${i}`}>\n                      {d}\n                    </span>\n                  ))}\n                </div>\n              )}\n              <div className={styles.keepOpen}>\n                <FormattedMessage id=\"link.do_not_close\" />\n              </div>\n              <WithHoverSound>\n                <button className={styles.closeButton} onClick={() => this.props.onClose()}>\n                  <FormattedMessage id=\"link.cancel\" />\n                </button>\n              </WithHoverSound>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport copy from \"copy-to-clipboard\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class SafariDialog extends Component {\n  state = {\n    copyLinkButtonText: \"copy\"\n  };\n\n  copyLinkClicked = link => {\n    copy(link);\n    this.setState({ copyLinkButtonText: \"copied!\" });\n  };\n\n  render() {\n    const onCopyClicked = this.copyLinkClicked.bind(this, document.location);\n    return (\n      <DialogContainer title=\"Open in Safari\" {...this.props}>\n        <div>\n          <div>Hubs does not support your current browser on iOS. Copy and paste this link directly in Safari.</div>\n          <div className=\"invite-form\">\n            <input\n              type=\"text\"\n              readOnly\n              onFocus={e => e.target.select()}\n              value={document.location}\n              className=\"invite-form__link_field\"\n            />\n            <div className=\"invite-form__buttons\">\n              <WithHoverSound>\n                <button className=\"invite-form__action-button\" onClick={onCopyClicked}>\n                  <span>{this.state.copyLinkButtonText}</span>\n                </button>\n              </WithHoverSound>\n            </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\n\nexport default class SafariMicDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"Microphone Access Required\" {...this.props}>\n        <div>\n          <div>\n            Hubs requires microphone permissions in Safari. <br />\n            Please reload and allow microphone access to continue.\n          </div>\n          <div className=\"invite-form\">\n            <div className=\"invite-form__buttons\">\n              <button className=\"invite-form__action-button\" onClick={() => location.reload()}>\n                Reload\n              </button>\n            </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\n\nimport styles from \"../assets/stylesheets/rename-room-dialog.scss\";\nimport DialogContainer from \"./dialog-container\";\n\nexport default class RenameRoomDialog extends Component {\n  static propTypes = {\n    onRename: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  state = {\n    name: \"\"\n  };\n\n  onSubmit = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onRename(this.state.name);\n    this.props.onClose();\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Set Room Name\" {...this.props}>\n        <form onSubmit={this.onSubmit} className={styles.renameRoomForm}>\n          <span>\n            <FormattedMessage id=\"rename-room.message\" />\n          </span>\n          <input\n            name=\"name\"\n            type=\"text\"\n            required\n            autoFocus\n            autoComplete=\"off\"\n            placeholder=\"Room name\"\n            value={this.state.name}\n            onFocus={e => handleTextFieldFocus(e.target)}\n            onBlur={() => handleTextFieldBlur()}\n            onChange={e => this.setState({ name: e.target.value })}\n            className={styles.nameField}\n          />\n          <button type=\"submit\" className={styles.nextButton}>\n            <FormattedMessage id=\"rename-room.rename\" />\n          </button>\n        </form>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport styles from \"../assets/stylesheets/close-room-dialog.scss\";\nimport DialogContainer from \"./dialog-container\";\n\nexport default class CloseRoomDialog extends Component {\n  static propTypes = {\n    onConfirm: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Close Room\" {...this.props}>\n        <div className={styles.message}>\n          <FormattedMessage id=\"close-room.message\" />\n        </div>\n        <button\n          className={styles.confirmButton}\n          onClick={() => {\n            this.props.onConfirm();\n            this.props.onClose();\n          }}\n        >\n          <FormattedMessage id=\"close-room.confirm\" />\n        </button>\n        <button className={styles.cancelButton} onClick={() => this.props.onClose()}>\n          <FormattedMessage id=\"close-room.cancel\" />\n        </button>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\n\nexport default class WebRTCScreenshareUnsupportedDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"Share Screen\" {...this.props}>\n        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\" }}>\n          <p>\n            Your browser doesn&apos;t seem to support WebRTC screen sharing.\n            <br />\n            To share your screen in Hubs, you can use Firefox.\n          </p>\n          <a\n            className=\"info-dialog--action-button\"\n            target=\"_blank\"\n            rel=\"noreferrer noopener\"\n            href=\"https://www.mozilla.org/firefox\"\n          >\n            Download Firefox\n          </a>\n          <p style={{ fontSize: \"0.8em\" }}>\n            To test WebRTC screen sharing in your browser, see this&nbsp;\n            <a\n              href=\"https://www.webrtc-experiment.com/screen-sharing/#5591174797993739\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              WebRTC experiment\n            </a>.\n          </p>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\n\nexport default class WebAssemblyUnsupportedDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"WebAssembly Unsupported\" {...this.props}>\n        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\" }}>\n          <p>\n            Your browser doesn&apos;t seem to support WebAssembly.\n            <br />\n            Please update or switch to a newer browser.\n          </p>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class WebVRRecommendDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"Enter in VR\" {...this.props}>\n        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\" }}>\n          <p>To enter with Oculus or SteamVR, you can use Firefox.</p>\n          <WithHoverSound>\n            <a\n              className=\"info-dialog--action-button\"\n              href=\"https://www.mozilla.org/firefox\"\n              target=\"_blank\"\n              rel=\"noreferrer noopener\"\n            >\n              Download Firefox\n            </a>\n          </WithHoverSound>\n          <p style={{ fontSize: \"0.8em\" }}>\n            For a list of browsers with experimental VR support, visit{\" \"}\n            <WithHoverSound>\n              <a href=\"https://webvr.rocks\" target=\"_blank\" rel=\"noopener noreferrer\">\n                WebVR Rocks\n              </a>\n            </WithHoverSound>\n          </p>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\nimport styles from \"../assets/stylesheets/leave-room-dialog.scss\";\nimport { FormattedMessage } from \"react-intl\";\nimport PropTypes from \"prop-types\";\n\nexport default class LeaveRoomDialog extends Component {\n  static propTypes = {\n    messageType: PropTypes.string,\n    destinationUrl: PropTypes.string\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Leave Room\" {...this.props}>\n        <div className={styles.leaveRoom}>\n          <div>\n            <FormattedMessage id={`leave-room-dialog.${this.props.messageType}.message`} />\n          </div>\n          <a href={this.props.destinationUrl} rel=\"noopener noreferrer\">\n            <FormattedMessage id={`leave-room-dialog.${this.props.messageType}.confirm`} />\n          </a>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport DialogContainer from \"./dialog-container.js\";\nimport styles from \"../assets/stylesheets/room-info-dialog.scss\";\nimport { scaledThumbnailUrlFor } from \"../utils/media-url-utils\";\n\nexport default class RoomInfoDialog extends Component {\n  static propTypes = {\n    hubName: PropTypes.string,\n    scene: PropTypes.object\n  };\n\n  render() {\n    const toAttributionDiv = (a, i) => {\n      if (a.url) {\n        const source = a.url.includes(\"sketchfab.com\")\n          ? \"on Sketchfab\"\n          : a.url.includes(\"poly.google.com\")\n            ? \"on Google Poly\"\n            : \"\";\n\n        return (\n          <div className={styles.attribution} key={`${a.url} ${i}`}>\n            <div className={styles.attributionName}>\n              <a href={a.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                {a.name}\n              </a>\n            </div>\n            <div className={styles.attributionAuthor}>\n              by {a.author} {source}\n            </div>\n          </div>\n        );\n      } else {\n        return (\n          <div className={styles.attribution} key={`${a.name} ${a.author} {i}`}>\n            <div className={styles.attributionName}>{a.name}</div>\n            <div className={styles.attributionAuthor}>by {a.author}</div>\n          </div>\n        );\n      }\n    };\n\n    let attributions = null;\n    let creator = null;\n\n    if (this.props.scene.attributions) {\n      creator = this.props.scene.attributions.creator;\n      attributions = (\n        <div>\n          {this.props.scene.attributions.content && this.props.scene.attributions.content.map(toAttributionDiv)}\n        </div>\n      );\n    }\n\n    const title = <div className={styles.title}>{this.props.hubName}</div>;\n\n    return (\n      <DialogContainer title={title} wide={true} {...this.props}>\n        <div className={styles.roomInfo}>\n          <div className={styles.sceneScreenshot}>\n            <a href={this.props.scene.url} target=\"_blank\" rel=\"noopener noreferrer\">\n              <img src={scaledThumbnailUrlFor(this.props.scene.screenshot_url, 400, 480)} />\n            </a>\n          </div>\n          <div className={styles.sceneDetails}>\n            <div className={styles.sceneMain}>\n              <div className={styles.sceneName}>\n                <a href={this.props.scene.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                  {this.props.scene.name}\n                </a>\n              </div>\n              <div className={styles.sceneCreator}>{creator}</div>\n            </div>\n            <div className={styles.sceneAttributions}>{attributions}</div>\n            <div className={styles.sceneButtons}> </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport DialogContainer from \"./dialog-container.js\";\nimport styles from \"../assets/stylesheets/oauth-dialog.scss\";\n\nexport default class OAuthDialog extends Component {\n  static propTypes = {\n    oauthInfo: PropTypes.array\n  };\n  render() {\n    return (\n      <DialogContainer title=\"Sign In\" {...this.props}>\n        <div>\n          <div>You&apos;ll need to sign in to access this room.</div>\n          <br />\n          <div>We&apos;ll ask for access to your e-mail address so you can skip signing in next time.</div>\n          <p className={styles.privacyNotice}>\n            By proceeding, you agree to the{\" \"}\n            <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/mozilla/hubs/blob/master/TERMS.md\">\n              terms of use\n            </a>{\" \"}\n            and{\" \"}\n            <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\">\n              privacy notice\n            </a>.\n          </p>\n          <div className=\"invite-form\">\n            <div className={`invite-form__buttons ${styles.oauthButtons}`}>\n              {this.props.oauthInfo.map(oauthInfo => (\n                <a href={oauthInfo.url} key={oauthInfo.type} className={styles.oauthButton}>\n                  Sign in with&nbsp;<span className={styles.oauthTypeName}>{oauthInfo.type}</span>\n                </a>\n              ))}\n            </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"../assets/stylesheets/message-entry.scss\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { faPaperPlane } from \"@fortawesome/free-solid-svg-icons/faPaperPlane\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nclass LobbyChatBox extends Component {\n  static propTypes = {\n    discordBridges: PropTypes.array,\n    occupantCount: PropTypes.number,\n    onSendMessage: PropTypes.func\n  };\n\n  state = {\n    pendingMessage: \"\"\n  };\n\n  sendMessage = e => {\n    e.preventDefault();\n    if (this.props.onSendMessage) {\n      this.props.onSendMessage(this.state.pendingMessage);\n    }\n    this.setState({ pendingMessage: \"\" });\n  };\n\n  render() {\n    const textRows = this.state.pendingMessage.split(\"\\n\").length;\n    const pendingMessageTextareaHeight = textRows * 28 + \"px\";\n    const pendingMessageFieldHeight = textRows * 28 + 20 + \"px\";\n    const discordSnippet = this.props.discordBridges.map(ch => \"#\" + ch).join(\", \");\n    const occupantSnippet = `${this.props.occupantCount - 1} other${this.props.occupantCount > 2 ? \"s\" : \"\"}`;\n    const messageEntryPlaceholder =\n      this.props.occupantCount <= 1\n        ? \"Nobody is here yet...\"\n        : this.props.discordBridges.length\n          ? `Send message to ${occupantSnippet} and ${discordSnippet}...`\n          : `Send message to ${occupantSnippet}...`;\n\n    return (\n      <form onSubmit={this.sendMessage}>\n        <div\n          className={classNames({\n            [styles.messageEntry]: true,\n            [styles.messageEntryDisabled]: this.props.occupantCount <= 1\n          })}\n          style={{ height: pendingMessageFieldHeight }}\n        >\n          <textarea\n            className={classNames([styles.messageEntryInput, \"chat-focus-target\"])}\n            value={this.state.pendingMessage}\n            rows={textRows}\n            style={{ height: pendingMessageTextareaHeight }}\n            onFocus={e => handleTextFieldFocus(e.target)}\n            onBlur={() => handleTextFieldBlur()}\n            onChange={e => this.setState({ pendingMessage: e.target.value })}\n            disabled={this.props.occupantCount <= 1 ? true : false}\n            onKeyDown={e => {\n              if (e.key === \"Enter\" && !e.shiftKey) {\n                this.sendMessage(e);\n              } else if (e.key === \"Escape\") {\n                e.target.blur();\n              }\n            }}\n            placeholder={messageEntryPlaceholder}\n          />\n          <WithHoverSound>\n            <button\n              className={classNames([styles.messageEntryButton, styles.messageEntrySubmit])}\n              disabled={this.props.occupantCount <= 1 ? true : false}\n              type=\"submit\"\n            >\n              <i>\n                <FontAwesomeIcon icon={faPaperPlane} />\n              </i>\n            </button>\n          </WithHoverSound>\n        </div>\n      </form>\n    );\n  }\n}\n\nexport default LobbyChatBox;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/chat-command-help.scss\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\nexport default class ChatCommandHelp extends Component {\n  static propTypes = {\n    matchingPrefix: PropTypes.string,\n    onTop: PropTypes.bool\n  };\n\n  render() {\n    const commands = [\n      \"leave\",\n      \"fly\",\n      \"grow\",\n      \"shrink\",\n      \"duck\",\n      \"debug\",\n      \"vrstats\",\n      \"scene <scene url>\",\n      \"rename <new name>\"\n    ];\n\n    if (qsTruthy(\"video_capture\")) {\n      commands.push(\"capture [stop]\");\n    }\n\n    return (\n      <div className={classNames({ [styles.commandHelp]: true, [styles.commandHelpOnTop]: this.props.onTop })}>\n        {commands.map(\n          c =>\n            (this.props.matchingPrefix === \"\" ||\n              c.split(\" \")[0].startsWith(this.props.matchingPrefix.split(\" \")[0])) && (\n              <div className={styles.entry} key={c}>\n                <div className={styles.command}>/{c}</div>\n                <div>\n                  <FormattedMessage id={`commands.${c.split(\" \")[0]}`} />\n                </div>\n              </div>\n            )\n        )}\n      </div>\n    );\n  }\n}\n","// https://stackoverflow.com/questions/6209161/extract-the-current-dom-and-print-it-as-a-string-with-styles-intact\n//\n// Mapping between tag names and css default values lookup tables. This allows to exclude default values in the result.\nconst defaultStylesByTagName = {};\n\n// Styles inherited from style sheets will not be rendered for elements with these tag names\nconst noStyleTags = {\n  BASE: true,\n  HEAD: true,\n  HTML: true,\n  META: true,\n  NOFRAME: true,\n  NOSCRIPT: true,\n  PARAM: true,\n  SCRIPT: true,\n  STYLE: true,\n  TITLE: true\n};\n\n// This list determines which css default values lookup tables are precomputed at load time\n// Lookup tables for other tag names will be automatically built at runtime if needed\nconst tagNames = [\n  \"A\",\n  \"ABBR\",\n  \"ADDRESS\",\n  \"AREA\",\n  \"ARTICLE\",\n  \"ASIDE\",\n  \"AUDIO\",\n  \"B\",\n  \"BASE\",\n  \"BDI\",\n  \"BDO\",\n  \"BLOCKQUOTE\",\n  \"BODY\",\n  \"BR\",\n  \"BUTTON\",\n  \"CANVAS\",\n  \"CAPTION\",\n  \"CENTER\",\n  \"CITE\",\n  \"CODE\",\n  \"COL\",\n  \"COLGROUP\",\n  \"COMMAND\",\n  \"DATALIST\",\n  \"DD\",\n  \"DEL\",\n  \"DETAILS\",\n  \"DFN\",\n  \"DIV\",\n  \"DL\",\n  \"DT\",\n  \"EM\",\n  \"EMBED\",\n  \"FIELDSET\",\n  \"FIGCAPTION\",\n  \"FIGURE\",\n  \"FONT\",\n  \"FOOTER\",\n  \"FORM\",\n  \"H1\",\n  \"H2\",\n  \"H3\",\n  \"H4\",\n  \"H5\",\n  \"H6\",\n  \"HEAD\",\n  \"HEADER\",\n  \"HGROUP\",\n  \"HR\",\n  \"HTML\",\n  \"I\",\n  \"IFRAME\",\n  \"IMG\",\n  \"INPUT\",\n  \"INS\",\n  \"KBD\",\n  \"KEYGEN\",\n  \"LABEL\",\n  \"LEGEND\",\n  \"LI\",\n  \"LINK\",\n  \"MAP\",\n  \"MARK\",\n  \"MATH\",\n  \"MENU\",\n  \"META\",\n  \"METER\",\n  \"NAV\",\n  \"NOBR\",\n  \"NOSCRIPT\",\n  \"OBJECT\",\n  \"OL\",\n  \"OPTION\",\n  \"OPTGROUP\",\n  \"OUTPUT\",\n  \"P\",\n  \"PARAM\",\n  \"PRE\",\n  \"PROGRESS\",\n  \"Q\",\n  \"RP\",\n  \"RT\",\n  \"RUBY\",\n  \"S\",\n  \"SAMP\",\n  \"SCRIPT\",\n  \"SECTION\",\n  \"SELECT\",\n  \"SMALL\",\n  \"SOURCE\",\n  \"SPAN\",\n  \"STRONG\",\n  \"STYLE\",\n  \"SUB\",\n  \"SUMMARY\",\n  \"SUP\",\n  \"SVG\",\n  \"TABLE\",\n  \"TBODY\",\n  \"TD\",\n  \"TEXTAREA\",\n  \"TFOOT\",\n  \"TH\",\n  \"THEAD\",\n  \"TIME\",\n  \"TITLE\",\n  \"TR\",\n  \"TRACK\",\n  \"U\",\n  \"UL\",\n  \"VAR\",\n  \"VIDEO\",\n  \"WBR\"\n];\n\nfunction computeDefaultStyleByTagName(tagName) {\n  const defaultStyle = {};\n  const element = document.body.appendChild(document.createElement(tagName));\n  const computedStyle = getComputedStyle(element);\n  for (let i = 0; i < computedStyle.length; i++) {\n    defaultStyle[computedStyle[i]] = computedStyle[computedStyle[i]];\n  }\n  document.body.removeChild(element);\n  return defaultStyle;\n}\n\nfunction getDefaultStyleByTagName(tagName) {\n  tagName = tagName.toUpperCase();\n  if (!defaultStylesByTagName[tagName]) {\n    defaultStylesByTagName[tagName] = computeDefaultStyleByTagName(tagName);\n  }\n  return defaultStylesByTagName[tagName];\n}\n\nexport function warmSerializeElement() {\n  for (let i = 0; i < tagNames.length; i++) {\n    if (!noStyleTags[tagNames[i]]) {\n      defaultStylesByTagName[tagNames[i]] = computeDefaultStyleByTagName(tagNames[i]);\n    }\n  }\n}\n\nexport default function serializeElement(el) {\n  if (Object.keys(defaultStylesByTagName).length === 0) {\n    // Precompute the lookup tables.\n    warmSerializeElement();\n  }\n\n  if (el.nodeType !== Node.ELEMENT_NODE) {\n    throw new TypeError();\n  }\n  const cssTexts = [];\n  const elements = el.querySelectorAll(\"*\");\n  for (let i = 0; i < elements.length; i++) {\n    const e = elements[i];\n    if (!noStyleTags[e.tagName]) {\n      const computedStyle = getComputedStyle(e);\n      const defaultStyle = getDefaultStyleByTagName(e.tagName);\n      cssTexts[i] = e.style.cssText;\n      for (let ii = 0; ii < computedStyle.length; ii++) {\n        const cssPropName = computedStyle[ii];\n\n        // Skip non-standard CSS for now, because it overwrites things like color\n        if (cssPropName.startsWith(\"-webkit\")) continue;\n\n        if (computedStyle[cssPropName] !== defaultStyle[cssPropName]) {\n          e.style[cssPropName] = computedStyle[cssPropName];\n        }\n      }\n    }\n  }\n  const result = el.outerHTML;\n  for (let i = 0; i < elements.length; i++) {\n    elements[i].style.cssText = cssTexts[i];\n  }\n  return result;\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\n\nimport styles from \"../assets/stylesheets/presence-list.scss\";\nimport PhoneImage from \"../assets/images/presence_phone.png\";\nimport DesktopImage from \"../assets/images/presence_desktop.png\";\nimport DiscordImage from \"../assets/images/presence_discord.png\";\nimport CameraImage from \"../assets/images/presence_camera.png\";\nimport HMDImage from \"../assets/images/presence_vr.png\";\nimport maskEmail from \"../utils/mask-email\";\nimport StateLink from \"./state-link.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPencilAlt } from \"@fortawesome/free-solid-svg-icons/faPencilAlt\";\nimport { pushHistoryPath, withSlug } from \"../utils/history\";\n\nfunction getPresenceImage(ctx) {\n  if (ctx && ctx.mobile) {\n    return PhoneImage;\n  } else if (ctx && ctx.hmd) {\n    return HMDImage;\n  } else if (ctx && ctx.discord) {\n    return DiscordImage;\n  } else {\n    return DesktopImage;\n  }\n}\n\nexport function navigateToClientInfo(history, clientId) {\n  const currentParams = new URLSearchParams(history.location.search);\n\n  if (process.env.RETICULUM_SERVER && document.location.host !== process.env.RETICULUM_SERVER) {\n    currentParams.set(\"client_id\", clientId);\n    pushHistoryPath(history, history.location.pathname, currentParams.toString());\n  } else {\n    pushHistoryPath(history, withSlug(history.location, `/clients/${clientId}`), currentParams.toString());\n  }\n}\n\nexport default class PresenceList extends Component {\n  static propTypes = {\n    presences: PropTypes.object,\n    history: PropTypes.object,\n    sessionId: PropTypes.string,\n    signedIn: PropTypes.bool,\n    email: PropTypes.string,\n    onSignIn: PropTypes.func,\n    onSignOut: PropTypes.func\n  };\n\n  navigateToClientInfo = clientId => {\n    navigateToClientInfo(this.props.history, clientId);\n  };\n\n  domForPresence = ([sessionId, data]) => {\n    const meta = data.metas[data.metas.length - 1];\n    const context = meta.context;\n    const profile = meta.profile;\n    const recording = meta.streaming || meta.recording;\n    const image = recording ? CameraImage : getPresenceImage(context);\n    const isBot = context && context.discord;\n    const isModerator = meta.roles && meta.roles.moderator;\n    const badge = isModerator && (\n      <span className={styles.moderatorBadge} title=\"Moderator\">\n        &#x2605;\n      </span>\n    );\n\n    return (\n      <WithHoverSound key={sessionId}>\n        <div className={styles.row}>\n          <div className={styles.icon}>\n            <img src={image} />\n          </div>\n          <div\n            className={classNames({\n              [styles.listItem]: true\n            })}\n          >\n            {sessionId === this.props.sessionId ? (\n              <StateLink className={styles.self} stateKey=\"overlay\" stateValue=\"profile\" history={this.props.history}>\n                {profile && profile.displayName}\n                {badge}\n                <i>\n                  <FontAwesomeIcon icon={faPencilAlt} />\n                </i>\n              </StateLink>\n            ) : (\n              <div>\n                {!isBot ? (\n                  <button className={styles.clientLink} onClick={() => this.navigateToClientInfo(sessionId)}>\n                    {profile && profile.displayName}\n                  </button>\n                ) : (\n                  <span>{profile && profile.displayName}</span>\n                )}\n                {badge}\n              </div>\n            )}\n          </div>\n          <div className={styles.presence}>\n            <FormattedMessage id={`presence.in_${meta.presence}`} />\n          </div>\n        </div>\n      </WithHoverSound>\n    );\n  };\n\n  render() {\n    // Draw self first\n    return (\n      <div className={styles.presenceList}>\n        <div className={styles.attachPoint} />\n        <div className={styles.contents}>\n          <div className={styles.rows}>\n            {Object.entries(this.props.presences || {})\n              .filter(([k]) => k === this.props.sessionId)\n              .map(this.domForPresence)}\n            {Object.entries(this.props.presences || {})\n              .filter(([k]) => k !== this.props.sessionId)\n              .map(this.domForPresence)}\n          </div>\n          <div className={styles.signIn}>\n            {this.props.signedIn ? (\n              <div>\n                <span>\n                  <FormattedMessage id=\"sign-in.as\" /> {maskEmail(this.props.email)}\n                </span>{\" \"}\n                <a onClick={this.props.onSignOut}>\n                  <FormattedMessage id=\"sign-in.out\" />\n                </a>\n              </div>\n            ) : (\n              <a onClick={this.props.onSignIn}>\n                <FormattedMessage id=\"sign-in.in\" />\n              </a>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\nimport Linkify from \"react-linkify\";\nimport { toArray as toEmojis } from \"react-emoji-render\";\nimport serializeElement from \"../utils/serialize-element\";\nimport { navigateToClientInfo } from \"./presence-list\";\n\nconst messageCanvas = document.createElement(\"canvas\");\nconst emojiRegex = /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|[\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|[\\ud83c[\\ude32-\\ude3a]|[\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/;\nconst urlRegex = /^https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_+.~#?&//=]*)$/;\nconst textureLoader = new THREE.TextureLoader();\n\n// Hacky word wrapping, needed because the SVG conversion doesn't properly deal\n// with wrapping in Firefox for some reason. (The CSS white-space is set to pre)\nconst wordWrap = body => {\n  const maxCharsPerLine = 40;\n  const words = body.split(\" \");\n  const outWords = [];\n  let c = 0;\n\n  for (let i = 0; i < words.length; i++) {\n    const word = words[i];\n\n    if (word.startsWith(\":\") && word.endsWith(\":\")) {\n      c++;\n    } else {\n      c += word.length;\n    }\n\n    outWords.push(word);\n\n    if (c >= maxCharsPerLine) {\n      c = 0;\n      outWords.push(\"\\n\");\n    }\n  }\n\n  return outWords.join(\" \");\n};\n\nconst messageBodyDom = (body, from, fromSessionId, history) => {\n  // Support wrapping text in ` to get monospace, and multiline.\n  const multiLine = body.split(\"\\n\").length > 1;\n  const wrapStyle = multiLine ? styles.messageWrapMulti : styles.messageWrap;\n  const mono = body.startsWith(\"`\") && body.endsWith(\"`\");\n  const messageBodyClasses = {\n    [styles.messageBody]: true,\n    [styles.messageBodyMulti]: multiLine,\n    [styles.messageBodyMono]: mono\n  };\n  const includeClientLink = fromSessionId && history && NAF.clientId !== fromSessionId;\n  const onFromClick = includeClientLink ? () => navigateToClientInfo(history, fromSessionId) : () => {};\n\n  if (!multiLine) {\n    body = wordWrap(body);\n  }\n\n  const cleanedBody = (mono ? body.substring(1, body.length - 1) : body).trim();\n\n  return (\n    <div className={wrapStyle}>\n      {from && (\n        <div\n          onClick={onFromClick}\n          className={classNames({ [styles.messageSource]: true, [styles.messageSourceLink]: includeClientLink })}\n        >\n          {from}:\n        </div>\n      )}\n      <div className={classNames(messageBodyClasses)}>\n        <Linkify properties={{ target: \"_blank\", rel: \"noopener referrer\" }}>{toEmojis(cleanedBody)}</Linkify>\n      </div>\n    </div>\n  );\n};\n\nfunction renderChatMessage(body, from, allowEmojiRender, lowResolution) {\n  const isOneLine = body.split(\"\\n\").length === 1;\n  const context = messageCanvas.getContext(\"2d\");\n  const emoji = toEmojis(body);\n  const isEmoji =\n    allowEmojiRender &&\n    emoji.length === 1 &&\n    emoji[0].props &&\n    emoji[0].props.children.match &&\n    emoji[0].props.children.match(emojiRegex);\n\n  const el = document.createElement(\"div\");\n  el.setAttribute(\"xmlns\", \"http://www.w3.org/1999/xhtml\");\n  el.setAttribute(\"class\", `${styles.presenceLog} ${styles.presenceLogSpawn}`);\n\n  // The element is added to the DOM in order to have layout compute the width & height,\n  // and then it is removed after being rendered.\n  document.body.appendChild(el);\n\n  const entryDom = (\n    <div\n      className={classNames({\n        [styles.presenceLogEntry]: !isEmoji,\n        [styles.presenceLogEntryOneLine]: !isEmoji && isOneLine,\n        [styles.presenceLogEmoji]: isEmoji\n      })}\n    >\n      {messageBodyDom(body, from)}\n    </div>\n  );\n\n  return new Promise(resolve => {\n    ReactDOM.render(entryDom, el, () => {\n      // Scale by 12x\n      let objectScale = \"8.33%\";\n      let scale = 12;\n\n      if (lowResolution) {\n        // In low res, scale by 4x\n        objectScale = \"25%\";\n        scale = 4;\n      }\n\n      messageCanvas.width = el.offsetWidth * (scale + 0.1);\n      messageCanvas.height = el.offsetHeight * (scale + 0.1);\n\n      const xhtml = encodeURIComponent(`\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${messageCanvas.width}\" height=\"${messageCanvas.height}\">\n            <foreignObject width=\"${objectScale}\" height=\"${objectScale}\" style=\"transform: scale(${scale});\">\n              ${serializeElement(el)}\n            </foreignObject>\n          </svg>\n    `);\n      const img = new Image();\n\n      img.onload = async () => {\n        context.drawImage(img, 0, 0);\n        const blob = await new Promise(resolve => messageCanvas.toBlob(resolve));\n        ReactDOM.unmountComponentAtNode(el);\n        el.remove();\n        resolve(blob);\n      };\n\n      img.src = \"data:image/svg+xml,\" + xhtml;\n    });\n  });\n}\n\nexport async function createInWorldLogMessage({ name, type, body }) {\n  if (type !== \"chat\") return;\n\n  const lowResolution = AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR();\n  const blob = await renderChatMessage(body, name, false, lowResolution);\n  const entity = document.createElement(\"a-entity\");\n  const meshEntity = document.createElement(\"a-entity\");\n\n  document.querySelector(\"a-scene\").appendChild(entity);\n\n  entity.appendChild(meshEntity);\n  entity.setAttribute(\"follow-in-fov\", {\n    target: \"#player-camera\",\n    offset: { x: 0, y: 0.0, z: -0.8 }\n  });\n\n  const blobUrl = URL.createObjectURL(blob);\n\n  meshEntity.setAttribute(\"animation__float\", {\n    property: \"position\",\n    dur: 10000,\n    from: { x: 0, y: 0, z: 0 },\n    to: { x: 0, y: 0.05, z: -0.05 },\n    easing: \"easeOutQuad\"\n  });\n\n  entity.setAttribute(\"animation__spawn\", {\n    property: \"scale\",\n    dur: 200,\n    from: { x: 0.1, y: 0.1, z: 0.1 },\n    to: { x: 1, y: 1, z: 1 },\n    easing: \"easeOutElastic\"\n  });\n\n  meshEntity.setAttribute(\"animation__opacity\", {\n    property: \"meshMaterial.opacity\",\n    isRawProperty: true,\n    delay: 3000,\n    dur: 8000,\n    from: 1.0,\n    to: 0.0,\n    easing: \"easeInQuad\"\n  });\n\n  meshEntity.addEventListener(\"animationcomplete__opacity\", () => {\n    entity.parentNode.removeChild(entity);\n  });\n\n  textureLoader.load(blobUrl, texture => {\n    const material = new THREE.MeshBasicMaterial();\n    material.transparent = true;\n    material.map = texture;\n    material.generateMipmaps = false;\n    material.needsUpdate = true;\n\n    const geometry = new THREE.PlaneBufferGeometry(1, 1, 1, 1, texture.flipY);\n    const mesh = new THREE.Mesh(geometry, material);\n    meshEntity.setObject3D(\"mesh\", mesh);\n    meshEntity.meshMaterial = material;\n    const scaleFactor = 4000.0 / (lowResolution ? 3.0 : 1.0);\n    meshEntity.object3DMap.mesh.scale.set(texture.image.width / scaleFactor, texture.image.height / scaleFactor, 1);\n  });\n}\n\nexport async function spawnChatMessage(body, from) {\n  if (body.length === 0) return;\n\n  if (body.match(urlRegex)) {\n    document.querySelector(\"a-scene\").emit(\"add_media\", body);\n    return;\n  }\n\n  const blob = await renderChatMessage(body, from, true, false);\n  document.querySelector(\"a-scene\").emit(\"add_media\", new File([blob], \"message.png\", { type: \"image/png\" }));\n}\n\nexport default function ChatMessage(props) {\n  return (\n    <div className={props.className}>\n      {props.maySpawn && (\n        <button\n          className={classNames(styles.iconButton, styles.spawnMessage)}\n          onClick={() => spawnChatMessage(props.body)}\n        />\n      )}\n      {messageBodyDom(props.body, props.name, props.sessionId, props.history)}\n    </div>\n  );\n}\n\nChatMessage.propTypes = {\n  name: PropTypes.string,\n  maySpawn: PropTypes.bool,\n  body: PropTypes.string,\n  sessionId: PropTypes.string,\n  history: PropTypes.object,\n  className: PropTypes.string\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"../assets/stylesheets/message-entry.scss\";\nimport ChatCommandHelp from \"./chat-command-help\";\nimport { faPaperPlane } from \"@fortawesome/free-solid-svg-icons/faPaperPlane\";\nimport { faCamera } from \"@fortawesome/free-solid-svg-icons/faCamera\";\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons/faPlus\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { spawnChatMessage } from \"./chat-message\";\nimport { pushHistoryState } from \"../utils/history\";\n\nconst isMobile = AFRAME.utils.device.isMobile();\n\nclass InWorldChatBox extends Component {\n  static propTypes = {\n    discordBridges: PropTypes.array,\n    onSendMessage: PropTypes.func,\n    onObjectCreated: PropTypes.func,\n    history: PropTypes.object,\n    enableSpawning: PropTypes.bool\n  };\n\n  state = {\n    pendingMessage: \"\"\n  };\n\n  sendMessage = e => {\n    e.preventDefault();\n    if (this.props.onSendMessage) {\n      this.props.onSendMessage(this.state.pendingMessage);\n    }\n    this.setState({ pendingMessage: \"\" });\n  };\n\n  render() {\n    const textRows = this.state.pendingMessage.split(\"\\n\").length;\n    const pendingMessageTextareaHeight = textRows * 28 + \"px\";\n    const pendingMessageFieldHeight = textRows * 28 + 20 + \"px\";\n    const discordSnippet = this.props.discordBridges.map(ch => \"#\" + ch).join(\", \");\n\n    return (\n      <form onSubmit={this.sendMessage}>\n        <div\n          className={classNames({ [styles.messageEntryInRoom]: true, [styles.messageEntryOnMobile]: isMobile })}\n          style={{ height: pendingMessageFieldHeight }}\n        >\n          {this.state.pendingMessage.startsWith(\"/\") && (\n            <ChatCommandHelp matchingPrefix={this.state.pendingMessage.substring(1)} />\n          )}\n          <input\n            id=\"message-entry-media-input\"\n            type=\"file\"\n            style={{ display: \"none\" }}\n            accept={isMobile ? \"image/*\" : \"*\"}\n            multiple\n            onChange={e => {\n              if (this.props.onObjectCreated) {\n                for (const file of e.target.files) {\n                  this.props.onObjectCreated(file);\n                }\n              }\n            }}\n          />\n          {this.props.enableSpawning && (\n            <label\n              htmlFor=\"message-entry-media-input\"\n              title={\"Upload\"}\n              className={classNames([\n                styles.messageEntryButton,\n                styles.messageEntryButtonInRoom,\n                styles.messageEntryUpload\n              ])}\n            >\n              <i>\n                <FontAwesomeIcon icon={isMobile ? faCamera : faPlus} />\n              </i>\n            </label>\n          )}\n          <textarea\n            style={{ height: pendingMessageTextareaHeight }}\n            className={classNames([\n              styles.messageEntryInput,\n              styles.messageEntryInputInRoom,\n              \"chat-focus-target\",\n              !this.props.enableSpawning && styles.messageEntryInputNoSpawn\n            ])}\n            value={this.state.pendingMessage}\n            rows={textRows}\n            onFocus={e => {\n              handleTextFieldFocus(e.target);\n            }}\n            onBlur={() => {\n              handleTextFieldBlur();\n            }}\n            onChange={e => {\n              e.stopPropagation();\n              this.setState({ pendingMessage: e.target.value });\n            }}\n            onKeyDown={e => {\n              if (e.key === \"Enter\" && !e.ctrlKey && !e.shiftKey) {\n                this.sendMessage(e);\n              } else if (e.key === \"Enter\" && e.ctrlKey) {\n                spawnChatMessage(e.target.value);\n                this.setState({ pendingMessage: \"\" });\n                e.target.blur();\n              } else if (e.key === \"Escape\") {\n                e.target.blur();\n              }\n            }}\n            placeholder={this.props.discordBridges.length ? `Send to room and ${discordSnippet}...` : \"Send to room...\"}\n          />\n          {this.props.enableSpawning && (\n            <button\n              className={classNames([styles.messageEntrySpawn])}\n              onClick={() => {\n                if (this.state.pendingMessage.length > 0) {\n                  spawnChatMessage(this.state.pendingMessage);\n                  this.setState({ pendingMessage: \"\" });\n                } else {\n                  pushHistoryState(this.props.history, \"modal\", \"create\");\n                }\n              }}\n            />\n          )}\n          <button\n            type=\"submit\"\n            className={classNames([\n              styles.messageEntryButton,\n              styles.messageEntryButtonInRoom,\n              styles.messageEntrySubmit\n            ])}\n          >\n            <i>\n              <FontAwesomeIcon icon={faPaperPlane} />\n            </i>\n          </button>\n        </div>\n      </form>\n    );\n  }\n}\n\nexport default InWorldChatBox;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport { fetchReticulumAuthenticated } from \"../utils/phoenix-utils\";\nimport { upload } from \"../utils/media-utils\";\nimport classNames from \"classnames\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport AvatarPreview from \"./avatar-preview\";\nimport styles from \"../assets/stylesheets/avatar-editor.scss\";\n\nconst AVATARS_API = \"/api/v1/avatars\";\n\nexport default class AvatarEditor extends Component {\n  static propTypes = {\n    avatarId: PropTypes.string,\n    onSignIn: PropTypes.func,\n    onSave: PropTypes.func,\n    onClose: PropTypes.func,\n    signedIn: PropTypes.bool,\n    hideDelete: PropTypes.bool,\n    debug: PropTypes.bool,\n    className: PropTypes.string\n  };\n\n  state = {\n    avatar: { name: \"My Avatar\", parent_avatar_listing_id: \"basebot\", files: {} },\n    previewGltfUrl: null\n  };\n\n  constructor(props) {\n    super(props);\n    // Blank avatar, used to create base avatar\n    // this.state = { avatar: { name: \"Base bot avatar\", files: {} } };\n\n    this.inputFiles = {};\n  }\n\n  componentDidMount = async () => {\n    if (this.props.avatarId) {\n      const avatar = await this.fetchAvatar(this.props.avatarId);\n      avatar.creatorAttribution = (avatar.attributions && avatar.attributions.creator) || \"\";\n      Object.assign(this.inputFiles, avatar.files);\n      this.setState({ avatar, previewGltfUrl: avatar.base_gltf_url });\n    } else {\n      const { base_gltf_url } = await this.fetchAvatar(\"basebot\");\n      this.setState({ previewGltfUrl: base_gltf_url });\n    }\n  };\n\n  fetchAvatar = avatarId => {\n    return fetchReticulumAuthenticated(`${AVATARS_API}/${avatarId}`).then(({ avatars }) => avatars[0]);\n  };\n\n  createOrUpdateAvatar = avatar => {\n    return fetchReticulumAuthenticated(\n      avatar.avatar_id ? `${AVATARS_API}/${avatar.avatar_id}` : AVATARS_API,\n      avatar.avatar_id ? \"PUT\" : \"POST\",\n      { avatar }\n    ).then(({ avatars }) => avatars[0]);\n  };\n\n  uploadAvatar = async e => {\n    e.preventDefault();\n\n    if (this.inputFiles.glb && this.inputFiles.glb instanceof File) {\n      const gltfLoader = new THREE.GLTFLoader();\n      const gltfUrl = URL.createObjectURL(this.inputFiles.glb);\n      const onProgress = console.log;\n      const parser = await new Promise((resolve, reject) =>\n        gltfLoader.createParser(gltfUrl, resolve, onProgress, reject)\n      );\n      URL.revokeObjectURL(gltfUrl);\n\n      const { content, body } = parser.extensions.KHR_binary_glTF;\n\n      // Inject hubs components on upload. Used to create base avatar\n      // const gltf = parser.json;\n      // Object.assign(gltf.scenes[0], {\n      //   extensions: {\n      //     MOZ_hubs_components: {\n      //       \"loop-animation\": {\n      //         clip: \"idle_eyes\"\n      //       }\n      //     }\n      //   }\n      // });\n      // Object.assign(gltf.nodes.find(n => n.name === \"Head\"), {\n      //   extensions: {\n      //     MOZ_hubs_components: {\n      //       \"scale-audio-feedback\": \"\"\n      //     }\n      //   }\n      // });\n      // content = JSON.stringify(gltf);\n\n      this.inputFiles.gltf = new File([content], \"file.gltf\", {\n        type: \"model/gltf\"\n      });\n      this.inputFiles.bin = new File([body], \"file.bin\", {\n        type: \"application/octet-stream\"\n      });\n    }\n\n    this.inputFiles.thumbnail = new File([await this.preview.getWrappedInstance().snapshot()], \"thumbnail.png\", {\n      type: \"image/png\"\n    });\n\n    const filesToUpload = [\"gltf\", \"bin\", \"base_map\", \"emissive_map\", \"normal_map\", \"orm_map\", \"thumbnail\"].filter(\n      k => this.inputFiles[k] === null || this.inputFiles[k] instanceof File\n    );\n\n    this.setState({ uploading: true });\n\n    const fileUploads = await Promise.all(filesToUpload.map(f => this.inputFiles[f] && upload(this.inputFiles[f])));\n    const avatar = {\n      ...this.state.avatar,\n      attributions: {\n        creator: this.state.avatar.creatorAttribution\n      },\n      files: fileUploads\n        .map((resp, i) => [filesToUpload[i], resp && [resp.file_id, resp.meta.access_token, resp.meta.promotion_token]])\n        .reduce((o, [k, v]) => ({ ...o, [k]: v }), {})\n    };\n\n    await this.createOrUpdateAvatar(avatar);\n\n    this.setState({ uploading: false });\n\n    if (this.props.onSave) this.props.onSave();\n  };\n\n  deleteAvatar = async e => {\n    e.preventDefault();\n    await fetchReticulumAuthenticated(`${AVATARS_API}/${this.state.avatar.avatar_id}`, \"DELETE\");\n    if (this.props.onSave) this.props.onSave();\n  };\n\n  fileField = (name, label, accept, disabled = false, title) => (\n    <div className=\"file-input-row\" key={name} title={title}>\n      <label htmlFor={`avatar-file_${name}`}>\n        <div className=\"img-box\" />\n        <span>{label}</span>\n      </label>\n      <input\n        id={`avatar-file_${name}`}\n        type=\"file\"\n        accept={accept}\n        disabled={disabled}\n        onChange={e => {\n          this.inputFiles[name] = e.target.files[0];\n          e.target.value = null;\n        }}\n      />\n      {this.state.avatar.files[name] && (\n        <a\n          onClick={() => {\n            this.inputFiles[name] = null;\n          }}\n        >\n          <i>\n            <FontAwesomeIcon icon={faTimes} />\n          </i>\n        </a>\n      )}\n    </div>\n  );\n\n  mapField = (name, label, accept, disabled = false, title) => (\n    <div className=\"file-input-row\" key={name} title={title}>\n      <label htmlFor={`avatar-file_${name}`}>\n        <div className=\"img-box\">{this.state.avatar.files[name] && <img src={this.state.avatar.files[name]} />}</div>\n        <span>{label}</span>\n      </label>\n      <input\n        id={`avatar-file_${name}`}\n        type=\"file\"\n        accept={accept}\n        disabled={disabled}\n        onChange={e => {\n          const file = e.target.files[0];\n          e.target.value = null;\n          this.inputFiles[name] = file;\n          URL.revokeObjectURL(this.state.avatar.files[name]);\n          this.setState({\n            avatar: {\n              ...this.state.avatar,\n              files: {\n                ...this.state.avatar.files,\n                [name]: URL.createObjectURL(file)\n              }\n            }\n          });\n        }}\n      />\n      {this.state.avatar.files[name] && (\n        <a\n          onClick={() => {\n            this.inputFiles[name] = null;\n            URL.revokeObjectURL(this.state.avatar.files[name]);\n            this.setState({\n              avatar: {\n                ...this.state.avatar,\n                files: {\n                  ...this.state.avatar.files,\n                  [name]: null\n                }\n              }\n            });\n          }}\n        >\n          <i>\n            <FontAwesomeIcon icon={faTimes} />\n          </i>\n        </a>\n      )}\n    </div>\n  );\n\n  textField = (name, placeholder, disabled, required) => (\n    <div>\n      <input\n        id={`avatar-${name}`}\n        type=\"text\"\n        disabled={disabled}\n        required={required}\n        placeholder={placeholder}\n        className=\"text-field\"\n        value={this.state.avatar[name] || \"\"}\n        onChange={e => this.setState({ avatar: { ...this.state.avatar, [name]: e.target.value } })}\n      />\n    </div>\n  );\n\n  textarea = (name, placeholder, disabled) => (\n    <div>\n      <textarea\n        id={`avatar-${name}`}\n        disabled={disabled}\n        placeholder={placeholder}\n        className=\"textarea\"\n        value={this.state.avatar[name] || \"\"}\n        onChange={e => this.setState({ avatar: { ...this.state.avatar, [name]: e.target.value } })}\n      />\n    </div>\n  );\n\n  checkbox = (name, children, disabled) => (\n    <div className=\"checkbox-container\">\n      <input\n        id={`avatar-${name}`}\n        type=\"checkbox\"\n        className=\"checkbox\"\n        disabled={disabled}\n        checked={!!this.state.avatar[name]}\n        onChange={e => this.setState({ avatar: { ...this.state.avatar, [name]: e.target.checked } })}\n      />\n      <label htmlFor={`#avatar-${name}`}>{children}</label>\n    </div>\n  );\n\n  render() {\n    const { debug } = this.props;\n    return (\n      <div className={classNames(styles.avatarEditor, this.props.className)}>\n        {this.props.onClose && (\n          <a className=\"close-button\" onClick={this.props.onClose}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </a>\n        )}\n        {this.props.signedIn ? (\n          <div className=\"center\">\n            <div className=\"split\">\n              <div className=\"form-body\">\n                {debug && this.textField(\"avatar_id\", \"Avatar ID\", true)}\n                {debug && this.textField(\"parent_avatar_id\", \"Parent Avatar ID\")}\n                {debug && this.textField(\"parent_avatar_listing_id\", \"Parent Avatar Listing ID\")}\n                {this.textField(\"name\", \"Name\", false, true)}\n                {debug && this.textarea(\"description\", \"Description\")}\n                {debug && this.fileField(\"glb\", \"Avatar GLB\", \"model/gltf+binary,.glb\")}\n\n                {this.mapField(\"base_map\", \"Base Map\", \"image/*\")}\n                {this.mapField(\"emissive_map\", \"Emissive Map\", \"image/*\")}\n                {this.mapField(\"normal_map\", \"Normal Map\", \"image/*\")}\n\n                {this.mapField(\"orm_map\", \"ORM Map\", \"image/*\", false, \"Occlussion (r), Roughness (g), Metallic (b)\")}\n\n                <hr />\n\n                {this.checkbox(\n                  \"allow_promotion\",\n                  <span>\n                    Allow{\" \"}\n                    <a\n                      href=\"https://github.com/mozilla/hubs/blob/master/PROMOTION.md\"\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      Promotion\n                    </a>\n                  </span>\n                )}\n                {this.checkbox(\n                  \"allow_remixing\",\n                  <span>\n                    Allow{\" \"}\n                    <a\n                      href=\"https://github.com/mozilla/hubs/blob/master/REMIXING.md\"\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      Remixing\n                    </a>{\" \"}\n                    <span className=\"license\">\n                      (under{\" \"}\n                      <a href=\"https://creativecommons.org/licenses/by/3.0/\" target=\"_blank\" rel=\"noopener noreferrer\">\n                        CC-BY 3.0\n                      </a>)\n                    </span>\n                  </span>\n                )}\n                {this.textField(\"creatorAttribution\", \"Attribution (optional)\", false, false)}\n\n                {/* {this.mapField(\"ao_map\", \"AO Map\", \"images/\\*\", true)} */}\n                {/* {this.mapField(\"metallic_map\", \"Metallic Map\", \"image/\\*\", true)} */}\n                {/* {this.mapField(\"roughness_map\", \"Roughness Map\", \"image/\\*\", true)} */}\n              </div>\n              <AvatarPreview\n                className=\"preview\"\n                avatarGltfUrl={this.state.previewGltfUrl}\n                {...this.inputFiles}\n                ref={p => (this.preview = p)}\n              />\n            </div>\n            <div className=\"info\">\n              <p>\n                <FormattedMessage id=\"avatar-editor.info\" />\n                <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/j-conrad/hubs-avatar-pipelines\">\n                  <FormattedMessage id=\"avatar-editor.info-link\" />\n                </a>\n              </p>\n            </div>\n            <div>\n              <input\n                disabled={this.state.uploading}\n                onClick={this.uploadAvatar}\n                className=\"form-submit\"\n                type=\"submit\"\n                value={this.state.uploading ? \"Uploading...\" : \"Save\"}\n              />\n            </div>\n            {!this.props.hideDelete && (\n              <div className=\"delete-avatar\">\n                {this.state.confirmDelete ? (\n                  <span>\n                    are you sure? <a onClick={this.deleteAvatar}>yes</a> /{\" \"}\n                    <a onClick={() => this.setState({ confirmDelete: false })}>no</a>\n                  </span>\n                ) : (\n                  <a onClick={() => this.setState({ confirmDelete: true })}>delete avatar</a>\n                )}\n              </div>\n            )}\n          </div>\n        ) : (\n          <a onClick={this.props.onSignIn}>\n            <FormattedMessage id=\"sign-in.in\" />\n          </a>\n        )}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport MovingAverage from \"moving-average\";\n\nconst AudioContext = window.AudioContext || window.webkitAudioContext;\n\nexport default class MicLevelWidget extends Component {\n  static propTypes = {\n    mediaStream: PropTypes.object,\n    hasAudioTrack: PropTypes.bool,\n    muteOnEntry: PropTypes.bool\n  };\n\n  state = {\n    micLevel: 0\n  };\n\n  componentDidMount() {\n    if (this.props.mediaStream != null && this.props.hasAudioTrack) {\n      this.startAnalyzer(this.props.mediaStream);\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.mediaStream !== prevProps.mediaStream || this.props.hasAudioTrack !== prevProps.hasAudioTrack) {\n      this.stopAnalyzer();\n      if (this.props.mediaStream != null && this.props.hasAudioTrack) {\n        this.startAnalyzer(this.props.mediaStream);\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.stopAnalyzer();\n  }\n\n  stopAnalyzer() {\n    if (this.micUpdateInterval != null) {\n      clearInterval(this.micUpdateInterval);\n    }\n    if (this.micLevelAudioContext != null) {\n      this.micLevelAudioContext.close();\n    }\n  }\n\n  startAnalyzer(mediaStream) {\n    this.micLevelAudioContext = new AudioContext();\n    const micSource = this.micLevelAudioContext.createMediaStreamSource(mediaStream);\n    const analyser = this.micLevelAudioContext.createAnalyser();\n    analyser.fftSize = 32;\n    const levels = new Uint8Array(analyser.frequencyBinCount);\n    micSource.connect(analyser);\n    const micLevelMovingAverage = MovingAverage(100);\n    this.micUpdateInterval = setInterval(() => {\n      analyser.getByteTimeDomainData(levels);\n      let v = 0;\n      for (let x = 0; x < levels.length; x++) {\n        v = Math.max(levels[x] - 128, v);\n      }\n      const level = v / 128.0;\n      // Multiplier to increase visual indicator.\n      const multiplier = 6;\n      // We use a moving average to smooth out the visual animation or else it would twitch too fast for\n      // the css renderer to keep up.\n      micLevelMovingAverage.push(Date.now(), level * multiplier);\n      const average = micLevelMovingAverage.movingAverage();\n      this.setState(state => {\n        if (Math.abs(average - state.micLevel) > 0.0001) {\n          return { micLevel: average };\n        }\n      });\n    }, 50);\n  }\n\n  render() {\n    const maxLevelHeight = 111;\n    const micClip = {\n      clip: `rect(${maxLevelHeight - Math.floor(this.state.micLevel * maxLevelHeight)}px, 111px, 111px, 0px)`\n    };\n\n    return (\n      <div className=\"audio-setup-panel__levels__icon\">\n        <img\n          src=\"../assets/images/level_background.png\"\n          srcSet=\"../assets/images/level_background@2x.png 2x\"\n          className=\"audio-setup-panel__levels__icon-part\"\n        />\n        {!this.props.muteOnEntry && (\n          <img\n            src=\"../assets/images/level_fill.png\"\n            srcSet=\"../assets/images/level_fill@2x.png 2x\"\n            className=\"audio-setup-panel__levels__icon-part\"\n            style={micClip}\n          />\n        )}\n        {this.props.hasAudioTrack && !this.props.muteOnEntry ? (\n          <img\n            src=\"../assets/images/mic_level.png\"\n            srcSet=\"../assets/images/mic_level@2x.png 2x\"\n            className=\"audio-setup-panel__levels__icon-part\"\n          />\n        ) : (\n          <img\n            src=\"../assets/images/mic_denied.png\"\n            srcSet=\"../assets/images/mic_denied@2x.png 2x\"\n            className=\"audio-setup-panel__levels__icon-part\"\n          />\n        )}\n        {this.props.hasAudioTrack &&\n          !this.props.muteOnEntry && (\n            <div className=\"audio-setup-panel__levels__test_label\">\n              <FormattedMessage id=\"audio.talk_to_test\" />\n            </div>\n          )}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nimport webmTone from \"../assets/sfx/tone.webm\";\nimport mp3Tone from \"../assets/sfx/tone.mp3\";\nimport oggTone from \"../assets/sfx/tone.ogg\";\nimport wavTone from \"../assets/sfx/tone.wav\";\n\nexport default class OutputLevelWidget extends Component {\n  state = {\n    tonePlaying: false\n  };\n\n  constructor(props) {\n    super(props);\n    this.playTestTone = this.playTestTone.bind(this);\n    this.toneClip = document.createElement(\"audio\");\n    if (this.toneClip.canPlayType(\"audio/webm\")) {\n      this.toneClip.src = webmTone;\n    } else if (this.toneClip.canPlayType(\"audio/mpeg\")) {\n      this.toneClip.src = mp3Tone;\n    } else if (this.toneClip.canPlayType(\"audio/ogg\")) {\n      this.toneClip.src = oggTone;\n    } else {\n      this.toneClip.src = wavTone;\n    }\n  }\n\n  componentWillUnmount() {\n    this.toneClip.pause();\n    this.toneClip.currentTime = 0;\n    if (this.testToneTimeout != null) {\n      clearTimeout(this.testToneTimeout);\n    }\n  }\n\n  playTestTone() {\n    if (this.testToneTimeout != null) {\n      clearTimeout(this.testToneTimeout);\n    }\n    this.toneClip.currentTime = 0;\n    this.toneClip.play();\n    this.setState({ tonePlaying: true });\n    this.testToneTimeout = setTimeout(() => {\n      this.setState({ tonePlaying: false });\n    }, 1393);\n  }\n\n  render() {\n    const maxLevelHeight = 111;\n    const speakerClip = { clip: `rect(${this.state.tonePlaying ? 0 : maxLevelHeight}px, 111px, 111px, 0px)` };\n    return (\n      <WithHoverSound>\n        <div className=\"audio-setup-panel__levels__icon_clickable\" onClick={this.playTestTone}>\n          <img\n            src=\"../assets/images/level_action_background.png\"\n            srcSet=\"../assets/images/level_action_background@2x.png 2x\"\n            className=\"audio-setup-panel__levels__icon-part\"\n          />\n          <img\n            src=\"../assets/images/level_action_fill.png\"\n            srcSet=\"../assets/images/level_action_fill@2x.png 2x\"\n            className=\"audio-setup-panel__levels__icon-part\"\n            style={speakerClip}\n          />\n          <img\n            src=\"../assets/images/speaker_level.png\"\n            srcSet=\"../assets/images/speaker_level@2x.png 2x\"\n            className=\"audio-setup-panel__levels__icon-part\"\n          />\n          <div className=\"audio-setup-panel__levels__test_label\">\n            <FormattedMessage id=\"audio.click_to_test\" />\n          </div>\n        </div>\n      </WithHoverSound>\n    );\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\n\nimport { share } from \"../utils/share\";\nimport { getLandingPageForPhoto } from \"../utils/phoenix-utils\";\n\nexport default function PhotoMessage({ name, body: { src: url }, className, maySpawn, hubId }) {\n  const landingPageUrl = getLandingPageForPhoto(url);\n  const onShareClicked = share.bind(null, {\n    url: landingPageUrl,\n    title: `Taken in #hubs, join me at https://hub.link/${hubId}`\n  });\n  return (\n    <div className={className}>\n      {maySpawn && <button className={classNames(styles.iconButton, styles.share)} onClick={onShareClicked} />}\n      <div className={styles.mediaBody}>\n        <span>\n          <b>{name}</b>\n        </span>\n        <span>\n          {\"took a \"}\n          <b>\n            <a href={landingPageUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n              photo\n            </a>\n          </b>.\n        </span>\n      </div>\n      <a href={landingPageUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n        <img src={url} />\n      </a>\n    </div>\n  );\n}\nPhotoMessage.propTypes = {\n  name: PropTypes.string,\n  maySpawn: PropTypes.bool,\n  body: PropTypes.object,\n  className: PropTypes.string,\n  hubId: PropTypes.string\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\nimport { proxiedUrlFor } from \"../utils/media-url-utils\";\n\nfunction spawnImage(url) {\n  document.querySelector(\"a-scene\").emit(\"add_media\", url);\n}\n\nexport default function ImageMessage({ name, body: { src: url }, className, maySpawn }) {\n  return (\n    <div className={className}>\n      {maySpawn && (\n        <button className={classNames(styles.iconButton, styles.spawnMessage)} onClick={() => spawnImage(url)} />\n      )}\n      <div className={styles.mediaBody}>{name && <div className={styles.messageSource}>{name}:</div>}</div>\n      <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n        <img src={proxiedUrlFor(url)} />\n      </a>\n    </div>\n  );\n}\n\nImageMessage.propTypes = {\n  name: PropTypes.string,\n  maySpawn: PropTypes.bool,\n  body: PropTypes.object,\n  className: PropTypes.string\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport ChatMessage from \"./chat-message\";\nimport PhotoMessage from \"./photo-message\";\nimport ImageMessage from \"./image-message\";\n\nexport default class PresenceLog extends Component {\n  static propTypes = {\n    entries: PropTypes.array,\n    inRoom: PropTypes.bool,\n    hubId: PropTypes.string,\n    history: PropTypes.object\n  };\n\n  constructor(props) {\n    super(props);\n  }\n\n  domForEntry = e => {\n    const entryClasses = {\n      [styles.presenceLogEntry]: true,\n      [styles.presenceLogEntryWithButton]: (e.type === \"chat\" || e.type === \"image\") && e.maySpawn,\n      [styles.presenceLogChat]: e.type === \"chat\",\n      [styles.expired]: !!e.expired\n    };\n\n    switch (e.type) {\n      case \"join\":\n      case \"entered\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.name}</b>&nbsp;<FormattedMessage id={`presence.${e.type}_${e.presence}`} />\n          </div>\n        );\n      case \"leave\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.name}</b>&nbsp;<FormattedMessage id={`presence.${e.type}`} />\n          </div>\n        );\n      case \"display_name_changed\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.oldName}</b>&nbsp;<FormattedMessage id=\"presence.name_change\" />&nbsp;<b>{e.newName}</b>.\n          </div>\n        );\n      case \"scene_changed\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.name}</b>&nbsp;<FormattedMessage id=\"presence.scene_change\" />&nbsp;<b>{e.sceneName}</b>.\n          </div>\n        );\n      case \"hub_name_changed\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.name}</b>&nbsp;<FormattedMessage id=\"presence.hub_name_change\" />&nbsp;<b>{e.hubName}</b>.\n          </div>\n        );\n      case \"chat\":\n        return (\n          <ChatMessage\n            key={e.key}\n            name={e.name}\n            className={classNames(entryClasses)}\n            body={e.body}\n            maySpawn={e.maySpawn}\n            sessionId={e.sessionId}\n            history={this.props.history}\n          />\n        );\n      case \"image\":\n        return (\n          <ImageMessage\n            key={e.key}\n            name={e.name}\n            className={classNames(entryClasses, styles.media)}\n            body={e.body}\n            maySpawn={e.maySpawn}\n          />\n        );\n      case \"photo\":\n        return (\n          <PhotoMessage\n            key={e.key}\n            name={e.name}\n            className={classNames(entryClasses, styles.media)}\n            body={e.body}\n            maySpawn={e.maySpawn}\n            hubId={this.props.hubId}\n          />\n        );\n      case \"log\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            {e.body}\n          </div>\n        );\n    }\n  };\n\n  render() {\n    const presenceClasses = {\n      [styles.presenceLog]: true,\n      [styles.presenceLogInRoom]: this.props.inRoom\n    };\n\n    return <div className={classNames(presenceClasses)}>{this.props.entries.map(this.domForEntry)}</div>;\n  }\n}\n","import { sets } from \"./userinput/sets\";\nimport { paths } from \"./userinput/paths\";\n\n// The output of this system is activeTips which shows, if any, the tips to show at the top\n// and bottom of the screen. There are named tips (eg locomotion) that each have validators.\n//\n// Each frame we run all the non-finished validators and take the first tip (by order)\n// which is VALID. Any tip that returns FINISHED will no longer be considered without\n// a local storage reset.\n\n// Validators can return these values:\n//\n// INVALID - Tip is not valid to show\n// VALID - Tip is valid to show\n// FINISH - Tip should always be assumed INVALID going forward\n//\n//\n// Tips have \"scope\", which is a certain context within which the validators are run (right now,\n// just the top of bottom of the screen.) They are also platform-local.\nconst INVALID = 0;\nconst VALID = 1;\nconst FINISH = 2;\n\nconst LOCAL_STORAGE_KEY = \"__hubs_finished_tips\";\n\nconst TIPS = {\n  desktop: {\n    top: [\"mirror_mode\", \"pen_mode\", \"video_share_mode\", \"mute_mode\"],\n    bottom: [\n      \"look\",\n      \"locomotion\",\n      \"turning\",\n      \"spawn_menu\",\n      \"object_grab\",\n      \"object_zoom\",\n      \"object_scale\",\n      \"freeze_gesture\",\n      \"menu_hover\",\n      \"object_recenter_button\",\n      \"object_rotate_button\",\n      \"object_scale_button\",\n      \"object_pin\",\n      \"invite\",\n      \"pen_color\",\n      \"pen_size\"\n    ]\n  },\n  mobile: {\n    top: [\"pen_mode\", \"video_share_mode\", \"freeze_mode\", \"mute_mode\"],\n    bottom: [\n      \"look\",\n      \"locomotion\",\n      \"spawn_menu\",\n      \"object_grab\",\n      \"freeze_gesture\",\n      \"object_recenter_button\",\n      \"object_rotate_button\",\n      \"object_scale_button\",\n      \"object_pin\",\n      \"invite\"\n    ]\n  },\n  standalone: { top: [], bottom: [] }\n};\n\n// These tips, if closed, will only clear themselves, not all tips.\nconst LOCAL_CLOSE_TIPS = [\"invite\", \"object_pin\"];\n\nlet localStorageCache = null;\nlet finishedScopes = {}; // Optimization, lets system skip scopes altogether once finished.\n\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\nconst tipPlatform = () => {\n  if (isMobileVR) return \"standalone\";\n  return isMobile ? \"mobile\" : \"desktop\";\n};\n\nconst platformTips = TIPS[tipPlatform()];\n\nconst isTipFinished = tip => {\n  if (localStorageCache === null) {\n    localStorageCache = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));\n  }\n\n  return !!(localStorageCache[tip] && localStorageCache[tip].finished);\n};\n\nexport const markTipFinished = tip => {\n  const storeData = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));\n  storeData[tip] = { finished: true };\n  localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(storeData));\n  localStorageCache = null;\n};\n\nexport const handleTipClose = (fullTip, scope) => {\n  const tip = fullTip.split(\".\")[1];\n\n  // Invite and pinning tips should be locally cleared, others should clear all remaining tips.\n  const tips = LOCAL_CLOSE_TIPS.includes(tip) ? [tip] : platformTips[scope];\n\n  for (let i = 0; i < tips.length; i++) {\n    const tip = tips[i];\n    markTipFinished(tip);\n  }\n};\n\nexport const resetTips = () => {\n  localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify({}));\n  localStorageCache = null;\n  window.APP.store.resetTipActivityFlags();\n  window.APP.store.resetConfirmedBroadcastedRooms();\n  finishedScopes = {};\n};\n\nconst VALIDATORS = {\n  look: function(userinput) {\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    const cameraDelta = userinput.get(\n      isMobile ? paths.device.touchscreen.touchCameraDelta : paths.device.smartMouse.cameraDelta\n    );\n    return cameraDelta ? FINISH : VALID;\n  },\n  locomotion: function(userinput) {\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    const accel = userinput.get(paths.actions.characterAcceleration);\n\n    // User moved\n    return accel && (accel[0] !== 0 || accel[1] !== 0) ? FINISH : VALID;\n  },\n  turning: function(userinput) {\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (userinput.get(paths.actions.snapRotateLeft) || userinput.get(paths.actions.snapRotateRight)) return FINISH;\n    return VALID;\n  },\n  spawn_menu: function(userinput, scene, mediaCounter) {\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (mediaCounter.count() === 0) return VALID;\n    return FINISH;\n  },\n  freeze_gesture: function(userinput, scene, mediaCounter) {\n    if (mediaCounter.count() === 0) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingInteractable)) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (scene.is(\"frozen\") && userinput.activeSets.includes(sets.cursorHoveringOnInteractable)) return FINISH;\n    return scene.is(\"frozen\") ? INVALID : VALID;\n  },\n  menu_hover: function(userinput, scene, mediaCounter) {\n    if (mediaCounter.count() === 0) return INVALID;\n    if (!scene.is(\"frozen\")) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (scene.is(\"frozen\") && userinput.activeSets.includes(sets.cursorHoveringOnInteractable)) return FINISH;\n    return VALID;\n  },\n  invite: function(userinput, scene) {\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingCamera)) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingInteractable)) return INVALID;\n    return scene.is(\"copresent\") ? FINISH : VALID;\n  },\n  object_grab: function(userinput, scene, mediaCounter) {\n    if (scene.is(\"frozen\")) return INVALID;\n    if (mediaCounter.count() === 0) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingCamera)) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingInteractable)) return FINISH;\n    return VALID;\n  },\n  object_rotate_button: function(userinput, scene, mediaCounter, store) {\n    if (!scene.is(\"frozen\")) return INVALID;\n    if (mediaCounter.count() === 0) return INVALID;\n    if (store && store.state.activity.hasRotated) return FINISH;\n    return VALID;\n  },\n  object_scale_button: function(userinput, scene, mediaCounter, store) {\n    if (!scene.is(\"frozen\")) return INVALID;\n    if (mediaCounter.count() === 0) return INVALID;\n    if (store && store.state.activity.hasScaled) return FINISH;\n    return VALID;\n  },\n  object_recenter_button: function(userinput, scene, mediaCounter, store) {\n    if (!scene.is(\"frozen\")) return INVALID;\n    if (mediaCounter.count() === 0) return INVALID;\n    if (store && store.state.activity.hasRecentered) return FINISH;\n    return VALID;\n  },\n  object_pin: function(userinput, scene, mediaCounter, store) {\n    if (!scene.is(\"frozen\")) return INVALID;\n    if (mediaCounter.count() === 0) return INVALID;\n    if (store && store.state.activity.hasPinned) return FINISH;\n    return VALID;\n  },\n  object_zoom: function(userinput, scene) {\n    if (scene.is(\"frozen\")) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingCamera)) return INVALID;\n    if (!userinput.activeSets.includes(sets.cursorHoldingInteractable)) return INVALID;\n    if (userinput.get(paths.actions.cursor.modDelta)) return FINISH;\n    return VALID;\n  },\n  object_scale: function(userinput, scene) {\n    if (scene.is(\"frozen\")) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.cursorHoldingCamera)) return INVALID;\n    if (!userinput.activeSets.includes(sets.cursorHoldingInteractable)) return INVALID;\n    if (userinput.get(paths.actions.cursor.scaleGrabbedGrabbable)) return FINISH;\n    return VALID;\n  },\n  pen_color: function(userinput) {\n    if (!userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (userinput.get(paths.actions.cursor.penNextColor) || userinput.get(paths.actions.cursor.penPrevColor)) {\n      return FINISH;\n    }\n    return VALID;\n  },\n  pen_size: function(userinput) {\n    if (!userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    if (userinput.get(paths.actions.cursor.scalePenTip)) return FINISH;\n    return VALID;\n  },\n  pen_mode: function(userinput) {\n    if (!userinput.activeSets.includes(sets.cursorHoldingPen)) return INVALID;\n    return VALID;\n  },\n  freeze_mode: function(userinput, scene) {\n    return scene.is(\"frozen\") ? VALID : INVALID;\n  },\n  video_share_mode: function(userinput, scene) {\n    return scene.is(\"sharing_video\") ? VALID : INVALID;\n  },\n  mirror_mode: function(userinput, scene) {\n    return scene.is(\"mirroring\") ? VALID : INVALID;\n  },\n  mute_mode: function(userinput, scene) {\n    return scene.is(\"muted\") ? VALID : INVALID;\n  }\n};\n\nAFRAME.registerSystem(\"tips\", {\n  init: function() {\n    this.activeTips = {};\n    this._finishedScopes = {};\n    this._performStep = this._performStep.bind(this);\n\n    if (localStorage.getItem(LOCAL_STORAGE_KEY) === null) {\n      localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify({}));\n    }\n  },\n\n  tick: function() {\n    if (isMobileVR) return; // Optimization for now, don't bother with this on mobile VR until we have real tips\n\n    if (!this._userinput) {\n      this._userinput = this.el.systems.userinput;\n\n      if (!this._userinput) return;\n    }\n\n    if (!this._mediaCounter) {\n      this._mediaCounter =\n        document.querySelector(\"#media-counter\") &&\n        document.querySelector(\"#media-counter\").components[\"networked-counter\"];\n\n      if (!this._mediaCounter) return;\n    }\n\n    const tips = platformTips;\n\n    const prevTop = this.activeTips.top;\n    const prevBottom = this.activeTips.bottom;\n\n    this._performStep(tips.top, \"top\");\n    this._performStep(tips.bottom, \"bottom\");\n\n    if (prevTop !== this.activeTips.top || prevBottom !== this.activeTips.bottom) {\n      this.el.emit(\"tips_changed\", this.activeTips);\n    }\n  },\n\n  _performStep: function(tips, scope) {\n    if (finishedScopes[scope]) return;\n\n    let chosenTip = null;\n    let finishCount = 0;\n\n    for (let i = 0; i < tips.length; i++) {\n      const tip = tips[i];\n      if (isTipFinished(tip)) {\n        finishCount++;\n        continue;\n      }\n\n      switch (VALIDATORS[tip](this._userinput, this.el, this._mediaCounter, window.APP.store)) {\n        case FINISH:\n          markTipFinished(tip);\n          break;\n        case VALID:\n          chosenTip = `${tipPlatform()}.${tip}`;\n          break;\n      }\n\n      if (chosenTip) break;\n    }\n\n    this.activeTips[scope] = chosenTip;\n\n    if (finishCount === tips.length) {\n      // Optimization: Tips are completed for this scope, no need to re-walk.\n      finishedScopes[scope] = true;\n    }\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport StateLink from \"./state-link.js\";\nimport { resetTips } from \"../systems/tips\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faImage } from \"@fortawesome/free-solid-svg-icons/faImage\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons/faStar\";\nimport { faDoorClosed } from \"@fortawesome/free-solid-svg-icons/faDoorClosed\";\nimport { faPencilAlt } from \"@fortawesome/free-solid-svg-icons/faPencilAlt\";\nimport { faInfoCircle } from \"@fortawesome/free-solid-svg-icons/faInfoCircle\";\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons/faPlus\";\nimport { faVideo } from \"@fortawesome/free-solid-svg-icons/faVideo\";\nimport { showFullScreenIfAvailable } from \"../utils/fullscreen\";\nimport LeaveRoomDialog from \"./leave-room-dialog.js\";\n\nimport styles from \"../assets/stylesheets/settings-menu.scss\";\n\nexport default class SettingsMenu extends Component {\n  static propTypes = {\n    history: PropTypes.object,\n    hideSettings: PropTypes.func,\n    isStreaming: PropTypes.bool,\n    toggleStreamerMode: PropTypes.func,\n    mediaSearchStore: PropTypes.object,\n    scene: PropTypes.object,\n    hubScene: PropTypes.object,\n    hubChannel: PropTypes.object,\n    performConditionalSignIn: PropTypes.func,\n    showNonHistoriedDialog: PropTypes.func,\n    pushHistoryState: PropTypes.func\n  };\n\n  render() {\n    const rowClasses = classNames([styles.row, styles.settingsRow]);\n    const rowHeader = classNames([styles.row, styles.settingsRow, styles.rowHeader]);\n    const showRoomSettings = !!this.props.hubChannel.canOrWillIfCreator(\"update_hub\");\n    const showCloseRoom = !!this.props.hubChannel.canOrWillIfCreator(\"close_hub\");\n    const showRoomInfo = !!this.props.hubScene;\n    const showRoomSection = showRoomSettings || showRoomInfo || showCloseRoom;\n    const showStreamerMode = this.props.scene.is(\"entered\") && !!this.props.hubChannel.canOrWillIfCreator(\"kick_users\");\n\n    // Draw self first\n    return (\n      <div className={styles.settingsMenu}>\n        <div className={styles.attachPoint} />\n        <div className={styles.contents}>\n          <div className={styles.rows}>\n            <div className={rowHeader}>\n              <FormattedMessage id=\"settings.row-profile\" />\n            </div>\n            <div className={rowClasses}>\n              <div className={styles.icon}>\n                <img src=\"../assets/images/change_avatar.svg\" />\n              </div>\n              <div className={styles.listItem}>\n                <StateLink\n                  stateKey=\"overlay\"\n                  stateValue=\"profile\"\n                  history={this.props.history}\n                  onClick={this.props.hideSettings}\n                >\n                  <FormattedMessage id=\"settings.change-avatar\" />\n                </StateLink>\n              </div>\n            </div>\n            <div className={rowClasses}>\n              <div className={styles.icon}>\n                <i>\n                  <FontAwesomeIcon icon={faStar} />\n                </i>\n              </div>\n              <div className={styles.listItem}>\n                <div\n                  className={styles.listItemLink}\n                  onClick={() => {\n                    this.props.performConditionalSignIn(\n                      () => this.props.hubChannel.signedIn,\n                      () => {\n                        showFullScreenIfAvailable();\n                        this.props.mediaSearchStore.sourceNavigateWithNoNav(\"favorites\");\n                      },\n                      \"favorite-rooms\"\n                    );\n                  }}\n                >\n                  <FormattedMessage id=\"settings.favorites\" />\n                </div>\n              </div>\n            </div>\n            {showRoomSection && (\n              <div className={rowHeader}>\n                <FormattedMessage id=\"settings.row-room\" />\n              </div>\n            )}\n            {showRoomSettings && (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faImage} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <div\n                    className={styles.listItemLink}\n                    onClick={() => {\n                      this.props.performConditionalSignIn(\n                        () => this.props.hubChannel.can(\"update_hub\"),\n                        () => {\n                          showFullScreenIfAvailable();\n                          this.props.mediaSearchStore.sourceNavigateWithNoNav(\"scenes\");\n                          this.props.hideSettings();\n                        },\n                        \"change-scene\"\n                      );\n                    }}\n                  >\n                    <FormattedMessage id=\"settings.change-scene\" />\n                  </div>\n                </div>\n              </div>\n            )}\n            {showRoomSettings && (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faPencilAlt} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <a\n                    href=\"#\"\n                    onClick={e => {\n                      e.preventDefault();\n\n                      this.props.performConditionalSignIn(\n                        () => this.props.hubChannel.can(\"update_hub\"),\n                        () => {\n                          this.props.pushHistoryState(\"modal\", \"rename_room\");\n                          this.props.hideSettings();\n                        },\n                        \"rename-room\"\n                      );\n                    }}\n                  >\n                    <FormattedMessage id=\"settings.rename-room\" />\n                  </a>\n                </div>\n              </div>\n            )}\n            {showCloseRoom && (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faDoorClosed} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <a\n                    href=\"#\"\n                    onClick={e => {\n                      e.preventDefault();\n\n                      this.props.performConditionalSignIn(\n                        () => this.props.hubChannel.can(\"update_hub\"),\n                        () => {\n                          this.props.pushHistoryState(\"modal\", \"close_room\");\n                          this.props.hideSettings();\n                        },\n                        \"close-room\"\n                      );\n                    }}\n                  >\n                    <FormattedMessage id=\"settings.close-room\" />\n                  </a>\n                </div>\n              </div>\n            )}\n            {showRoomInfo && (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faInfoCircle} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <StateLink\n                    stateKey=\"modal\"\n                    stateValue=\"room_info\"\n                    history={this.props.history}\n                    onClick={this.props.hideSettings}\n                  >\n                    <FormattedMessage id=\"settings.room-info\" />\n                  </StateLink>\n                </div>\n              </div>\n            )}\n            <div className={rowClasses}>\n              <div className={styles.icon}>\n                <i>\n                  <FontAwesomeIcon icon={faPlus} />\n                </i>\n              </div>\n              <div className={styles.listItem}>\n                <a\n                  href=\"#\"\n                  onClick={e => {\n                    e.preventDefault();\n                    this.props.showNonHistoriedDialog(LeaveRoomDialog, {\n                      destinationUrl: \"/\",\n                      messageType: \"create-room\"\n                    });\n                    this.props.hideSettings();\n                  }}\n                >\n                  <FormattedMessage id=\"settings.create-room\" />\n                </a>\n              </div>\n            </div>\n            {showStreamerMode ? (\n              <div className={rowHeader}>\n                <FormattedMessage id=\"settings.row-tools\" />\n              </div>\n            ) : (\n              <div />\n            )}\n            {showStreamerMode ? (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faVideo} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <div\n                    className={styles.listItemLink}\n                    onClick={() => {\n                      this.props.toggleStreamerMode(true);\n                    }}\n                  >\n                    <FormattedMessage id=\"settings.enable-streamer-mode\" />\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <div />\n            )}\n            <div className={classNames([styles.bottomLinksMain])}>\n              <a href=\"/whats-new\" target=\"_blank\" rel=\"noreferrer noopener\">\n                <FormattedMessage id=\"settings.whats-new\" />\n              </a>\n              <button\n                onClick={e => {\n                  e.preventDefault();\n                  resetTips();\n                  this.props.hideSettings();\n                }}\n              >\n                <FormattedMessage id=\"settings.tips\" />\n              </button>\n              <a href=\"https://github.com/mozilla/hubs/wiki/Hubs-Controls\" target=\"_blank\" rel=\"noreferrer noopener\">\n                <FormattedMessage id=\"settings.controls\" />\n              </a>\n            </div>\n            <div className={classNames([styles.bottomLinks])}>\n              <a href=\"https://github.com/mozilla/hubs/wiki/Hubs-Features\" target=\"_blank\" rel=\"noreferrer noopener\">\n                <FormattedMessage id=\"settings.features\" />\n              </a>\n              <a href=\"https://discord.gg/wHmY4nd\" target=\"_blank\" rel=\"noreferrer noopener\">\n                <FormattedMessage id=\"settings.community\" />\n              </a>\n              <a target=\"_blank\" href=\"https://forms.gle/1g4H5Ayd1mGWqWpV7\" rel=\"noopener noreferrer\">\n                <FormattedMessage id=\"settings.send-feedback\" />\n              </a>\n              <a className={styles.bottomLink} href=\"/?report\" target=\"_blank\" rel=\"noreferrer noopener\">\n                <FormattedMessage id=\"settings.report\" />\n              </a>\n              <a\n                className={styles.bottomLink}\n                href=\"https://github.com/mozilla/hubs/blob/master/TERMS.md\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n              >\n                <FormattedMessage id=\"settings.terms\" />\n              </a>\n              <a\n                className={styles.bottomLink}\n                href=\"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n              >\n                <FormattedMessage id=\"settings.privacy\" />\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n// import hubLogo from \"../assets/images/hub-preview-white.png\";\nimport styles from \"../assets/stylesheets/preload-overlay.scss\";\nimport { FormattedMessage } from \"react-intl\";\n\nconst isMobile = AFRAME.utils.device.isMobile();\n\nexport default class PreloadOverlay extends Component {\n  static propTypes = {\n    hubName: PropTypes.string,\n    hubScene: PropTypes.object,\n    baseUrl: PropTypes.string,\n    onLoadClicked: PropTypes.func\n  };\n\n  render() {\n    return (\n      <div className={styles.treatment}>\n        <div className={styles.screenshot}>\n          {this.props.hubScene && <img className={styles.screenshot} src={this.props.hubScene.screenshot_url} />}\n        </div>\n        <a href=\"/\" target=\"_blank\" rel=\"noopener noreferrer\" className={styles.logo}>\n          <img src={this.props.logo} />\n        </a>\n        <div className={styles.mainPanel}>\n          <div className={styles.hubName}>{this.props.hubName}</div>\n          {this.props.onLoadClicked &&\n            (!isMobile ? (\n              <button className={styles.loadButton} onClick={this.props.onLoadClicked}>\n                <FormattedMessage id=\"embed.load-button\" />\n              </button>\n            ) : (\n              <a href={this.props.baseUrl} target=\"_blank\" className={styles.loadButton} rel=\"noreferrer noopener\">\n                <FormattedMessage id=\"embed.load-button\" />\n              </a>\n            ))}\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\n\nconst { detect } = require(\"detect-browser\");\nimport styles from \"../assets/stylesheets/2d-hud.scss\";\nimport uiStyles from \"../assets/stylesheets/ui-root.scss\";\nimport { FormattedMessage } from \"react-intl\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\n\nconst browser = detect();\n\nclass TopHUD extends Component {\n  static propTypes = {\n    muted: PropTypes.bool,\n    isCursorHoldingPen: PropTypes.bool,\n    hasActiveCamera: PropTypes.bool,\n    frozen: PropTypes.bool,\n    watching: PropTypes.bool,\n    onWatchEnded: PropTypes.func,\n    videoShareMediaSource: PropTypes.string,\n    activeTip: PropTypes.string,\n    history: PropTypes.object,\n    onToggleMute: PropTypes.func,\n    onToggleFreeze: PropTypes.func,\n    onSpawnPen: PropTypes.func,\n    onSpawnCamera: PropTypes.func,\n    onShareVideo: PropTypes.func,\n    onEndShareVideo: PropTypes.func,\n    onShareVideoNotCapable: PropTypes.func,\n    mediaSearchStore: PropTypes.object,\n    isStreaming: PropTypes.bool,\n    showStreamingTip: PropTypes.bool,\n    hideStreamingTip: PropTypes.func\n  };\n\n  state = {\n    showVideoShareOptions: false,\n    lastActiveMediaSource: null\n  };\n\n  handleVideoShareClicked = source => {\n    if ((source === \"screen\" || source === \"window\") && browser.name !== \"firefox\") {\n      this.props.onShareVideoNotCapable();\n      return;\n    }\n\n    if (this.props.videoShareMediaSource) {\n      this.props.onEndShareVideo();\n    } else {\n      this.props.onShareVideo(source);\n      this.setState({ lastActiveMediaSource: source });\n    }\n  };\n\n  buildVideoSharingButtons = () => {\n    const isMobile = AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR();\n\n    const videoShareExtraOptionTypes = [];\n    const primaryVideoShareType =\n      this.props.videoShareMediaSource || this.state.lastActiveMediaSource || (isMobile ? \"camera\" : \"screen\");\n\n    if (this.state.showVideoShareOptions) {\n      videoShareExtraOptionTypes.push(primaryVideoShareType);\n\n      [\"screen\", \"window\", \"camera\"].forEach(t => {\n        if (videoShareExtraOptionTypes.indexOf(t) === -1) {\n          videoShareExtraOptionTypes.push(t);\n        }\n      });\n    }\n\n    const showExtrasOnHover = () => {\n      if (isMobile) return;\n\n      clearTimeout(this.hideVideoSharingButtonTimeout);\n\n      if (!this.props.videoShareMediaSource) {\n        this.setState({ showVideoShareOptions: true });\n      }\n    };\n\n    const hideExtrasOnOut = () => {\n      this.hideVideoSharingButtonTimeout = setTimeout(() => {\n        this.setState({ showVideoShareOptions: false });\n      }, 250);\n    };\n\n    return (\n      <div\n        className={cx(styles.iconButton, styles[`share_${primaryVideoShareType}`], {\n          [styles.active]: this.props.videoShareMediaSource === primaryVideoShareType,\n          [styles.videoShare]: true\n        })}\n        title={this.props.videoShareMediaSource !== null ? \"Stop sharing\" : `Share ${primaryVideoShareType}`}\n        onClick={() => {\n          if (!this.state.showVideoShareOptions) {\n            this.handleVideoShareClicked(primaryVideoShareType);\n          }\n        }}\n        onMouseOver={showExtrasOnHover}\n      >\n        {videoShareExtraOptionTypes.length > 0 && (\n          <div className={cx(styles.videoShareExtraOptions)} onMouseOut={hideExtrasOnOut}>\n            {videoShareExtraOptionTypes.map(type => (\n              <div\n                key={type}\n                className={cx(styles.iconButton, styles[`share_${type}`], {\n                  [styles.active]: this.props.videoShareMediaSource === type\n                })}\n                title={this.props.videoShareMediaSource === type ? \"Stop sharing\" : `Share ${type}`}\n                onClick={() => this.handleVideoShareClicked(type)}\n                onMouseOver={showExtrasOnHover}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  render() {\n    const videoSharingButtons = this.buildVideoSharingButtons();\n    const isMobile = AFRAME.utils.device.isMobile();\n\n    let tip;\n\n    if (this.props.watching) {\n      tip = (\n        <div className={cx([styles.topTip, styles.topTipNoHud])}>\n          <button className={styles.tipCancel} onClick={() => this.props.onWatchEnded()}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </button>\n          <FormattedMessage id={`tips.${isMobile ? \"mobile\" : \"desktop\"}.watching`} />\n          {!isMobile && (\n            <button className={styles.tipCancelText} onClick={() => this.props.onWatchEnded()}>\n              <FormattedMessage id=\"tips.watching.back\" />\n            </button>\n          )}\n        </div>\n      );\n    } else if (this.props.activeTip) {\n      tip = this.props.activeTip && (\n        <div className={cx(styles.topTip)}>\n          {!this.props.frozen && (\n            <div className={cx([styles.attachPoint, styles[`attach_${this.props.activeTip.split(\".\")[1]}`]])} />\n          )}\n          <FormattedMessage id={`tips.${this.props.activeTip}`} />\n        </div>\n      );\n    }\n\n    // Hide buttons when frozen.\n    return (\n      <div className={cx(styles.container, styles.top, styles.unselectable, uiStyles.uiInteractive)}>\n        {this.props.frozen || this.props.watching ? (\n          <div className={cx(uiStyles.uiInteractive, styles.panel)}>{tip}</div>\n        ) : (\n          <div className={cx(uiStyles.uiInteractive, styles.panel)}>\n            {tip}\n            {videoSharingButtons}\n            <div\n              className={cx(styles.iconButton, styles.mute, { [styles.active]: this.props.muted })}\n              title={this.props.muted ? \"Unmute Mic\" : \"Mute Mic\"}\n              onClick={this.props.onToggleMute}\n            />\n            <button\n              className={cx(uiStyles.uiInteractive, styles.iconButton, styles.spawn)}\n              onClick={() => this.props.mediaSearchStore.sourceNavigateToDefaultSource()}\n            />\n            <div\n              className={cx(styles.iconButton, styles.pen, { [styles.active]: this.props.isCursorHoldingPen })}\n              title={\"Pen\"}\n              onClick={this.props.onSpawnPen}\n            />\n            <div\n              className={cx(styles.iconButton, styles.camera, { [styles.active]: this.props.hasActiveCamera })}\n              title={\"Camera\"}\n              onClick={this.props.onSpawnCamera}\n            />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default { TopHUD };\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/spectating-label.scss\";\nimport { FormattedMessage } from \"react-intl\";\n\nexport class SpectatingLabel extends Component {\n  static propTypes = {\n    name: PropTypes.string\n  };\n\n  render() {\n    return (\n      <div className={styles.label}>\n        <FormattedMessage id=\"lobby.watching\" />\n        <b>{this.props.name}</b>\n      </div>\n    );\n  }\n}\n","import { showFullScreenIfAvailable } from \"./fullscreen\";\nimport screenfull from \"screenfull\";\n\nlet _isIn2DInterstitial = false;\nlet _exitAction = null;\n\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\nconst afterUserGesturePrompt = f => {\n  const scene = document.querySelector(\"a-scene\");\n  scene.addEventListener(\"2d-interstitial-gesture-complete\", f, { once: true });\n  scene.emit(\"2d-interstitial-gesture-required\");\n};\n\nexport function handleExitTo2DInterstitial(isLower, exitAction) {\n  const scene = document.querySelector(\"a-scene\");\n  if (!scene.is(\"vr-mode\")) return;\n\n  _isIn2DInterstitial = true;\n  _exitAction = exitAction;\n\n  if (isMobileVR) {\n    // Immersive browser, exit VR.\n    scene.exitVR().then(() => {\n      afterUserGesturePrompt(() => showFullScreenIfAvailable());\n    });\n  } else {\n    // Non-immersive browser, show notice\n    const vrNotice = document.querySelector(\".vr-notice\");\n    vrNotice.object3D.visible = true;\n    vrNotice.setAttribute(\"follow-in-fov\", {\n      angle: isLower ? 39 : -15\n    });\n  }\n}\n\nexport function handleReEntryToVRFrom2DInterstitial() {\n  if (!_isIn2DInterstitial) return;\n  _isIn2DInterstitial = false;\n\n  document.querySelector(\".vr-notice\").object3D.visible = false;\n\n  if (isMobileVR) {\n    const scene = document.querySelector(\"a-scene\");\n\n    if (screenfull.isFullscreen) {\n      screenfull.exit();\n      afterUserGesturePrompt(() => scene.enterVR());\n    } else {\n      scene.enterVR();\n    }\n  }\n}\n\nexport function isIn2DInterstitial() {\n  return _isIn2DInterstitial;\n}\n\nexport function forceExitFrom2DInterstitial() {\n  if (!_isIn2DInterstitial) return;\n\n  if (_exitAction) {\n    _exitAction();\n    _exitAction = null;\n  }\n\n  handleReEntryToVRFrom2DInterstitial();\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport copy from \"copy-to-clipboard\";\nimport { airtableAssets, airtableAssetsInitialState } from '../airtable'\nimport { IntlProvider, FormattedMessage, addLocaleData } from \"react-intl\";\nimport en from \"react-intl/locale-data/en\";\nimport screenfull from \"screenfull\";\n\nimport { VR_DEVICE_AVAILABILITY } from \"../utils/vr-caps-detect\";\nimport styles from \"../assets/stylesheets/ui-root.scss\";\nimport entryStyles from \"../assets/stylesheets/entry.scss\";\nimport inviteStyles from \"../assets/stylesheets/invite-dialog.scss\";\nimport { ReactAudioContext, WithHoverSound } from \"./wrap-with-audio\";\nimport {\n  pushHistoryState,\n  clearHistoryState,\n  popToBeginningOfHubHistory,\n  navigateToPriorPage,\n  sluglessPath\n} from \"../utils/history\";\nimport StateLink from \"./state-link.js\";\nimport StateRoute from \"./state-route.js\";\nimport { getPresenceProfileForSession } from \"../utils/phoenix-utils\";\nimport { getClientInfoClientId } from \"./client-info-dialog\";\nimport { getCurrentStreamer } from \"../utils/component-utils\";\n\nimport { lang, messages } from \"../utils/i18n\";\nimport Loader from \"./loader\";\nimport AutoExitWarning from \"./auto-exit-warning\";\nimport { TwoDEntryButton, GenericEntryButton, DaydreamEntryButton } from \"./entry-buttons.js\";\nimport ProfileEntryPanel from \"./profile-entry-panel\";\nimport MediaBrowser from \"./media-browser\";\n\nimport CreateObjectDialog from \"./create-object-dialog.js\";\nimport ChangeSceneDialog from \"./change-scene-dialog.js\";\nimport AvatarUrlDialog from \"./avatar-url-dialog.js\";\nimport HelpDialog from \"./help-dialog.js\";\nimport InviteDialog from \"./invite-dialog.js\";\nimport InviteTeamDialog from \"./invite-team-dialog.js\";\nimport LinkDialog from \"./link-dialog.js\";\nimport SafariDialog from \"./safari-dialog.js\";\nimport SafariMicDialog from \"./safari-mic-dialog.js\";\nimport SignInDialog from \"./sign-in-dialog.js\";\nimport RenameRoomDialog from \"./rename-room-dialog.js\";\nimport CloseRoomDialog from \"./close-room-dialog.js\";\nimport WebRTCScreenshareUnsupportedDialog from \"./webrtc-screenshare-unsupported-dialog.js\";\nimport WebAssemblyUnsupportedDialog from \"./webassembly-unsupported-dialog.js\";\nimport WebVRRecommendDialog from \"./webvr-recommend-dialog.js\";\nimport LeaveRoomDialog from \"./leave-room-dialog.js\";\nimport RoomInfoDialog from \"./room-info-dialog.js\";\nimport ClientInfoDialog from \"./client-info-dialog.js\";\nimport OAuthDialog from \"./oauth-dialog.js\";\nimport LobbyChatBox from \"./lobby-chat-box.js\";\nimport InWorldChatBox from \"./in-world-chat-box.js\";\nimport AvatarEditor from \"./avatar-editor\";\nimport MicLevelWidget from \"./mic-level-widget.js\";\nimport OutputLevelWidget from \"./output-level-widget.js\";\nimport PresenceLog from \"./presence-log.js\";\nimport PresenceList from \"./presence-list.js\";\nimport SettingsMenu from \"./settings-menu.js\";\nimport PreloadOverlay from \"./preload-overlay.js\";\nimport TwoDHUD from \"./2d-hud\";\nimport { SpectatingLabel } from \"./spectating-label\";\nimport { showFullScreenIfAvailable, showFullScreenIfWasFullScreen } from \"../utils/fullscreen\";\nimport { handleReEntryToVRFrom2DInterstitial } from \"../utils/vr-interstitial\";\nimport { handleTipClose } from \"../systems/tips.js\";\n\nimport { faUsers } from \"@fortawesome/free-solid-svg-icons/faUsers\";\nimport { faBars } from \"@fortawesome/free-solid-svg-icons/faBars\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons/faStar\";\nimport { faArrowLeft } from \"@fortawesome/free-solid-svg-icons/faArrowLeft\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport qsTruthy from \"../utils/qs_truthy\";\nconst avatarEditorDebug = qsTruthy(\"avatarEditorDebug\");\n\naddLocaleData([...en]);\n\n// This is a list of regexes that match the microphone labels of HMDs.\n//\n// If entering VR mode, and if any of these regexes match an audio device,\n// the user will be prevented from entering VR until one of those devices is\n// selected as the microphone.\n//\n// Note that this doesn't have to be exhaustive: if no devices match any regex\n// then we rely upon the user to select the proper mic.\nconst HMD_MIC_REGEXES = [/\\Wvive\\W/i, /\\Wrift\\W/i];\n\nconst IN_ROOM_MODAL_ROUTER_PATHS = [\"/media\"];\nconst IN_ROOM_MODAL_QUERY_VARS = [\"media_source\"];\n\nconst LOBBY_MODAL_ROUTER_PATHS = [\"/media/scenes\", \"/media/avatars\", \"/media/favorites\"];\nconst LOBBY_MODAL_QUERY_VARS = [\"media_source\"];\nconst LOBBY_MODAL_QUERY_VALUES = [\"scenes\", \"avatars\", \"favorites\"];\n\nasync function grantedMicLabels() {\n  const mediaDevices = await navigator.mediaDevices.enumerateDevices();\n  return mediaDevices.filter(d => d.label && d.kind === \"audioinput\").map(d => d.label);\n}\n\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\nconst isMobilePhoneOrVR = isMobile || isMobileVR;\n\nconst AUTO_EXIT_TIMER_SECONDS = 10;\n\nclass UIRoot extends Component {\n  willCompileAndUploadMaterials = false;\n\n  static propTypes = {\n    enterScene: PropTypes.func,\n    exitScene: PropTypes.func,\n    onSendMessage: PropTypes.func,\n    disableAutoExitOnConcurrentLoad: PropTypes.bool,\n    forcedVREntryType: PropTypes.string,\n    isBotMode: PropTypes.bool,\n    store: PropTypes.object,\n    mediaSearchStore: PropTypes.object,\n    scene: PropTypes.object,\n    authChannel: PropTypes.object,\n    hubChannel: PropTypes.object,\n    linkChannel: PropTypes.object,\n    hubEntryCode: PropTypes.number,\n    availableVREntryTypes: PropTypes.object,\n    environmentSceneLoaded: PropTypes.bool,\n    roomUnavailableReason: PropTypes.string,\n    platformUnsupportedReason: PropTypes.string,\n    hubId: PropTypes.string,\n    hubName: PropTypes.string,\n    hubScene: PropTypes.object,\n    hubIsBound: PropTypes.bool,\n    isSupportAvailable: PropTypes.bool,\n    presenceLogEntries: PropTypes.array,\n    presences: PropTypes.object,\n    sessionId: PropTypes.string,\n    subscriptions: PropTypes.object,\n    initialIsSubscribed: PropTypes.bool,\n    initialIsFavorited: PropTypes.bool,\n    showSignInDialog: PropTypes.bool,\n    signInMessageId: PropTypes.string,\n    signInCompleteMessageId: PropTypes.string,\n    signInContinueTextId: PropTypes.string,\n    onContinueAfterSignIn: PropTypes.func,\n    showSafariDialog: PropTypes.bool,\n    showSafariMicDialog: PropTypes.bool,\n    showWebAssemblyDialog: PropTypes.bool,\n    showOAuthDialog: PropTypes.bool,\n    oauthInfo: PropTypes.array,\n    isCursorHoldingPen: PropTypes.bool,\n    hasActiveCamera: PropTypes.bool,\n    onMediaSearchResultEntrySelected: PropTypes.func,\n    onAvatarSaved: PropTypes.func,\n    activeTips: PropTypes.object,\n    location: PropTypes.object,\n    history: PropTypes.object,\n    showInterstitialPrompt: PropTypes.bool,\n    onInterstitialPromptClicked: PropTypes.func,\n    performConditionalSignIn: PropTypes.func,\n    hide: PropTypes.bool,\n    showPreload: PropTypes.bool,\n    onPreloadLoadClicked: PropTypes.func,\n    embed: PropTypes.bool,\n    embedToken: PropTypes.string\n  };\n\n  state = {\n    enterInVR: false,\n    muteOnEntry: false,\n    entered: false,\n    dialog: null,\n    showShareDialog: false,\n    showPresenceList: false,\n    showSettingsMenu: false,\n    broadcastTipDismissed: false,\n    linkCode: null,\n    linkCodeCancel: null,\n    miniInviteActivated: false,\n\n    didConnectToNetworkedScene: false,\n    noMoreLoadingUpdates: false,\n    hideLoader: false,\n    watching: false,\n    isStreaming: false,\n    showStreamingTip: false,\n\n    waitingOnAudio: false,\n    shareScreen: false,\n    requestedScreen: false,\n    mediaStream: null,\n    audioTrack: null,\n    numAudioTracks: 0,\n    micDevices: [],\n\n    profileNamePending: \"Hello\",\n\n    autoExitTimerStartedAt: null,\n    autoExitTimerInterval: null,\n    secondsRemainingBeforeAutoExit: Infinity,\n\n    muted: false,\n    frozen: false,\n    spacebubble: true,\n\n    exited: false,\n\n    signedIn: false,\n    videoShareMediaSource: null\n  };\n\n  constructor(props) {\n    super(props);\n    if (props.showSafariMicDialog) {\n      this.state.dialog = <SafariMicDialog closable={false} />;\n    }\n    if (props.showSafariDialog) {\n      this.state.dialog = <SafariDialog closable={false} />;\n    }\n    if (props.showWebAssemblyDialog) {\n      this.state.dialog = <WebAssemblyUnsupportedDialog closable={false} />;\n    }\n\n    props.mediaSearchStore.setHistory(props.history);\n\n    // An exit handler that discards event arguments and can be cleaned up.\n    this.exitEventHandler = () => this.exit();\n\n    this.state.airtableAssets = airtableAssetsInitialState;\n  }\n\n  componentDidUpdate(prevProps) {\n    const { hubChannel, showSignInDialog } = this.props;\n    if (hubChannel) {\n      const { signedIn } = hubChannel;\n      if (signedIn !== this.state.signedIn) {\n        this.setState({ signedIn });\n      }\n    }\n    if (prevProps.showSignInDialog !== showSignInDialog) {\n      if (showSignInDialog) {\n        this.showContextualSignInDialog();\n      } else {\n        this.closeDialog();\n      }\n    }\n    if (!this.willCompileAndUploadMaterials && this.state.noMoreLoadingUpdates) {\n      this.willCompileAndUploadMaterials = true;\n      // We want to ensure that react and the browser have had the chance to render / update.\n      // See https://stackoverflow.com/a/34999925 , although our solution flipped setTimeout and requestAnimationFrame\n      window.requestAnimationFrame(() => {\n        window.setTimeout(() => {\n          if (!this.props.isBotMode) {\n            this.props.scene.renderer.compileAndUploadMaterials(this.props.scene.object3D, this.props.scene.camera);\n          }\n\n          this.setState({ hideLoader: true });\n        }, 0);\n      });\n    }\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"concurrentload\", this.onConcurrentLoad);\n    document.querySelector(\".a-canvas\").addEventListener(\"mouseup\", () => {\n      if (this.state.showPresenceList || this.state.showSettingsMenu || this.state.showShareDialog) {\n        this.setState({ showPresenceList: false, showSettingsMenu: false, showShareDialog: false });\n      }\n    });\n\n    this.props.scene.addEventListener(\n      \"didConnectToNetworkedScene\",\n      () => {\n        this.setState({ didConnectToNetworkedScene: true });\n      },\n      { once: true }\n    );\n    this.props.scene.addEventListener(\"loaded\", this.onSceneLoaded);\n    this.props.scene.addEventListener(\"stateadded\", this.onAframeStateChanged);\n    this.props.scene.addEventListener(\"stateremoved\", this.onAframeStateChanged);\n    this.props.scene.addEventListener(\"share_video_enabled\", this.onShareVideoEnabled);\n    this.props.scene.addEventListener(\"share_video_disabled\", this.onShareVideoDisabled);\n    this.props.scene.addEventListener(\"exit\", this.exitEventHandler);\n    this.props.scene.addEventListener(\"action_exit_watch\", () => this.setState({ watching: false, hide: false }));\n\n    const scene = this.props.scene;\n\n    this.props.store.addEventListener(\"statechanged\", this.onStoreChanged);\n\n    const unsubscribe = this.props.history.listen((location, action) => {\n      const state = location.state;\n\n      // If we just hit back into the entry flow, just go back to the page before the room landing page.\n      if (action === \"POP\" && state && state.entry_step && this.state.entered) {\n        unsubscribe();\n        navigateToPriorPage(this.props.history);\n        return;\n      }\n    });\n\n    // If we refreshed the page with any state history (eg if we were in the entry flow\n    // or had a modal/overlay open) just reset everything to the beginning of the flow by\n    // erasing all history that was accumulated for this room (including across refreshes.)\n    //\n    // We don't do this for the media browser case, since we want to be able to share\n    // links to the browser pages\n    if (this.props.history.location.state && !sluglessPath(this.props.history.location).startsWith(\"/media\")) {\n      popToBeginningOfHubHistory(this.props.history);\n    }\n\n    this.setState({\n      audioContext: {\n        playSound: sound => {\n          scene.emit(sound);\n        },\n        onMouseLeave: () => {\n          //          scene.emit(\"play_sound-hud_mouse_leave\");\n        }\n      }\n    });\n\n    if (this.props.forcedVREntryType && this.props.forcedVREntryType.endsWith(\"_now\")) {\n      setTimeout(() => this.handleForceEntry(), 2000);\n    }\n\n    airtableAssets.find('recHqITRS7cBMwn9i', (err, record) => \n       this.setState({airtableAssets: record.fields})\n    )\n  }\n\n  componentWillUnmount() {\n    this.props.scene.removeEventListener(\"loaded\", this.onSceneLoaded);\n    this.props.scene.removeEventListener(\"exit\", this.exitEventHandler);\n    this.props.scene.removeEventListener(\"share_video_enabled\", this.onShareVideoEnabled);\n    this.props.scene.removeEventListener(\"share_video_disabled\", this.onShareVideoDisabled);\n  }\n\n  showContextualSignInDialog = () => {\n    const {\n      signInMessageId,\n      authChannel,\n      signInCompleteMessageId,\n      signInContinueTextId,\n      onContinueAfterSignIn\n    } = this.props;\n\n    this.showNonHistoriedDialog(SignInDialog, {\n      message: messages[signInMessageId],\n      onSignIn: async email => {\n        const { authComplete } = await authChannel.startAuthentication(email, this.props.hubChannel);\n\n        this.showNonHistoriedDialog(SignInDialog, { authStarted: true, onClose: onContinueAfterSignIn });\n\n        await authComplete;\n\n        this.setState({ signedIn: true });\n        this.showNonHistoriedDialog(SignInDialog, {\n          authComplete: true,\n          message: messages[signInCompleteMessageId],\n          continueText: messages[signInContinueTextId],\n          onClose: onContinueAfterSignIn,\n          onContinue: onContinueAfterSignIn\n        });\n      },\n      onClose: onContinueAfterSignIn\n    });\n  };\n\n  updateSubscribedState = () => {\n    const isSubscribed = this.props.subscriptions && this.props.subscriptions.isSubscribed();\n    this.setState({ isSubscribed });\n  };\n\n  toggleFavorited = () => {\n    this.props.performConditionalSignIn(\n      () => this.props.hubChannel.signedIn,\n      () => {\n        const isFavorited = this.isFavorited();\n\n        this.props.hubChannel[isFavorited ? \"unfavorite\" : \"favorite\"]();\n        this.setState({ isFavorited: !isFavorited });\n      },\n      \"favorite-room\"\n    );\n  };\n\n  isFavorited = () => {\n    return this.state.isFavorited !== undefined ? this.state.isFavorited : this.props.initialIsFavorited;\n  };\n\n  onLoadingFinished = () => {\n    this.setState({ noMoreLoadingUpdates: true });\n  };\n\n  onSceneLoaded = () => {\n    this.setState({ sceneLoaded: true });\n  };\n\n  // TODO: we need to come up with a cleaner way to handle the shared state between aframe and react than emmitting events and setting state on the scene\n  onAframeStateChanged = e => {\n    if (!(e.detail === \"muted\" || e.detail === \"frozen\" || e.detail === \"spacebubble\")) return;\n    this.setState({\n      [e.detail]: this.props.scene.is(e.detail)\n    });\n  };\n\n  onShareVideoEnabled = e => {\n    this.setState({ videoShareMediaSource: e.detail.source });\n  };\n\n  onShareVideoDisabled = () => {\n    this.setState({ videoShareMediaSource: null });\n  };\n\n  toggleMute = () => {\n    this.props.scene.emit(\"action_mute\");\n  };\n\n  toggleFreeze = () => {\n    this.props.scene.emit(\"action_freeze\");\n  };\n\n  toggleSpaceBubble = () => {\n    this.props.scene.emit(\"action_space_bubble\");\n  };\n\n  shareVideo = mediaSource => {\n    this.props.scene.emit(`action_share_${mediaSource}`);\n  };\n\n  endShareVideo = () => {\n    this.props.scene.emit(\"action_end_video_sharing\");\n  };\n\n  spawnPen = () => {\n    this.props.scene.emit(\"penButtonPressed\");\n  };\n\n  onSubscribeChanged = async () => {\n    if (!this.props.subscriptions) return;\n\n    await this.props.subscriptions.toggle();\n    this.updateSubscribedState();\n  };\n\n  handleForceEntry = () => {\n    if (!this.props.forcedVREntryType) return;\n\n    if (this.props.forcedVREntryType.startsWith(\"daydream\")) {\n      this.enterDaydream();\n    } else if (this.props.forcedVREntryType.startsWith(\"vr\")) {\n      this.enterVR();\n    } else if (this.props.forcedVREntryType.startsWith(\"2d\")) {\n      this.enter2D();\n    }\n  };\n\n  onConcurrentLoad = () => {\n    if (this.props.disableAutoExitOnConcurrentLoad) return;\n\n    const autoExitTimerInterval = setInterval(() => {\n      let secondsRemainingBeforeAutoExit = Infinity;\n\n      if (this.state.autoExitTimerStartedAt) {\n        const secondsSinceStart = (new Date() - this.state.autoExitTimerStartedAt) / 1000;\n        secondsRemainingBeforeAutoExit = Math.max(0, Math.floor(AUTO_EXIT_TIMER_SECONDS - secondsSinceStart));\n      }\n\n      this.setState({ secondsRemainingBeforeAutoExit });\n      this.checkForAutoExit();\n    }, 500);\n\n    this.setState({ autoExitTimerStartedAt: new Date(), autoExitTimerInterval });\n  };\n\n  checkForAutoExit = () => {\n    if (this.state.secondsRemainingBeforeAutoExit !== 0) return;\n    this.endAutoExitTimer();\n    this.exit();\n  };\n\n  exit = reason => {\n    this.props.exitScene(reason);\n    this.setState({ exited: true });\n  };\n\n  isWaitingForAutoExit = () => {\n    return this.state.secondsRemainingBeforeAutoExit <= AUTO_EXIT_TIMER_SECONDS;\n  };\n\n  endAutoExitTimer = () => {\n    clearInterval(this.state.autoExitTimerInterval);\n    this.setState({\n      autoExitTimerStartedAt: null,\n      autoExitTimerInterval: null,\n      secondsRemainingBeforeAutoExit: Infinity\n    });\n  };\n\n  hasGrantedMicPermissions = async () => {\n    if (this.state.requestedScreen) {\n      // There is no way to tell if you've granted mic permissions in a previous session if we've\n      // already prompted for screen sharing permissions, so we have to assume that we've never granted permissions.\n      // Fortunately, if you *have* granted permissions permanently, there won't be a second browser prompt, but we\n      // can't determine that before hand.\n      // See https://bugzilla.mozilla.org/show_bug.cgi?id=1449783 for a potential solution in the future.\n      return false;\n    } else {\n      // If we haven't requested the screen in this session, check if we've granted permissions in a previous session.\n      return (await grantedMicLabels()).length > 0;\n    }\n  };\n\n  performDirectEntryFlow = async enterInVR => {\n    this.setState({ enterInVR, waitingOnAudio: true });\n\n    const hasGrantedMic = await this.hasGrantedMicPermissions();\n\n    if (hasGrantedMic) {\n      await this.setMediaStreamToDefault();\n      this.beginOrSkipAudioSetup();\n    } else {\n      this.pushHistoryState(\"entry_step\", \"mic_grant\");\n    }\n\n    this.setState({ waitingOnAudio: false });\n  };\n\n  enter2D = async () => {\n    await this.performDirectEntryFlow(false);\n  };\n\n  enterVR = async () => {\n    if (this.props.forcedVREntryType || this.props.availableVREntryTypes.generic !== VR_DEVICE_AVAILABILITY.maybe) {\n      await this.performDirectEntryFlow(true);\n    } else {\n      this.pushHistoryState(\"modal\", \"webvr\");\n    }\n  };\n\n  enterDaydream = async () => {\n    await this.performDirectEntryFlow(true);\n  };\n\n  micDeviceChanged = async ev => {\n    const constraints = { audio: { deviceId: { exact: [ev.target.value] } } };\n    await this.fetchAudioTrack(constraints);\n    await this.setupNewMediaStream();\n  };\n\n  setMediaStreamToDefault = async () => {\n    let hasAudio = false;\n    const { lastUsedMicDeviceId } = this.props.store.state.settings;\n\n    // Try to fetch last used mic, if there was one.\n    if (lastUsedMicDeviceId) {\n      hasAudio = await this.fetchAudioTrack({ audio: { deviceId: { ideal: lastUsedMicDeviceId } } });\n    } else {\n      hasAudio = await this.fetchAudioTrack({ audio: true });\n    }\n\n    await this.setupNewMediaStream();\n\n    return { hasAudio };\n  };\n\n  fetchAudioTrack = async constraints => {\n    if (this.state.audioTrack) {\n      this.state.audioTrack.stop();\n    }\n\n    try {\n      const mediaStream = await navigator.mediaDevices.getUserMedia(constraints);\n      this.setState({\n        audioTrack: mediaStream.getAudioTracks()[0],\n        numAudioTracks: mediaStream.getAudioTracks().length\n      });\n      return true;\n    } catch (e) {\n      // Error fetching audio track, most likely a permission denial.\n      this.setState({ audioTrack: null, numAudioTracks: 0 });\n      return false;\n    }\n  };\n\n  setupNewMediaStream = async () => {\n    const mediaStream = new MediaStream();\n\n    await this.fetchMicDevices();\n\n    // we should definitely have an audioTrack at this point unless they denied mic access\n    if (this.state.audioTrack) {\n      mediaStream.addTrack(this.state.audioTrack);\n      const micDeviceId = this.micDeviceIdForMicLabel(this.micLabelForMediaStream(mediaStream));\n      if (micDeviceId) {\n        this.props.store.update({ settings: { lastUsedMicDeviceId: micDeviceId } });\n      }\n    }\n\n    this.setState({ mediaStream });\n  };\n\n  onMicGrantButton = async () => {\n    if (this.props.location.state && this.props.location.state.entry_step === \"mic_grant\") {\n      const { hasAudio } = await this.setMediaStreamToDefault();\n\n      if (hasAudio) {\n        this.pushHistoryState(\"entry_step\", \"mic_granted\");\n      } else {\n        this.beginOrSkipAudioSetup();\n      }\n    } else {\n      this.beginOrSkipAudioSetup();\n    }\n  };\n\n  beginOrSkipAudioSetup = () => {\n    const skipAudioSetup = this.props.forcedVREntryType && this.props.forcedVREntryType.endsWith(\"_now\");\n\n    if (skipAudioSetup) {\n      this.onAudioReadyButton();\n    } else {\n      this.pushHistoryState(\"entry_step\", \"audio\");\n    }\n  };\n\n  fetchMicDevices = () => {\n    return new Promise(resolve => {\n      navigator.mediaDevices.enumerateDevices().then(mediaDevices => {\n        this.setState(\n          {\n            micDevices: mediaDevices\n              .filter(d => d.kind === \"audioinput\")\n              .map(d => ({ deviceId: d.deviceId, label: d.label }))\n          },\n          resolve\n        );\n      });\n    });\n  };\n\n  shouldShowHmdMicWarning = () => {\n    if (isMobile || AFRAME.utils.device.isMobileVR()) return false;\n    if (!this.state.enterInVR) return false;\n    if (!this.hasHmdMicrophone()) return false;\n\n    return !HMD_MIC_REGEXES.find(r => this.selectedMicLabel().match(r));\n  };\n\n  hasHmdMicrophone = () => {\n    return !!this.state.micDevices.find(d => HMD_MIC_REGEXES.find(r => d.label.match(r)));\n  };\n\n  micLabelForMediaStream = mediaStream => {\n    return (mediaStream && mediaStream.getAudioTracks().length > 0 && mediaStream.getAudioTracks()[0].label) || \"\";\n  };\n\n  selectedMicLabel = () => {\n    return this.micLabelForMediaStream(this.state.mediaStream);\n  };\n\n  micDeviceIdForMicLabel = label => {\n    return this.state.micDevices.filter(d => d.label === label).map(d => d.deviceId)[0];\n  };\n\n  selectedMicDeviceId = () => {\n    return this.micDeviceIdForMicLabel(this.selectedMicLabel());\n  };\n\n  shouldShowFullScreen = () => {\n    // Disable full screen on iOS, since Safari's fullscreen mode does not let you prevent native pinch-to-zoom gestures.\n    return (\n      (isMobile || AFRAME.utils.device.isMobileVR()) &&\n      !AFRAME.utils.device.isIOS() &&\n      !this.state.enterInVR &&\n      screenfull.enabled\n    );\n  };\n\n  onAudioReadyButton = () => {\n    if (!this.state.enterInVR) {\n      showFullScreenIfAvailable();\n    }\n\n    this.props.enterScene(this.state.mediaStream, this.state.enterInVR, this.state.muteOnEntry);\n\n    const mediaStream = this.state.mediaStream;\n\n    if (mediaStream) {\n      if (mediaStream.getAudioTracks().length > 0) {\n        console.log(`Using microphone: ${mediaStream.getAudioTracks()[0].label}`);\n      }\n\n      if (mediaStream.getVideoTracks().length > 0) {\n        console.log(\"Screen sharing enabled.\");\n      }\n    }\n\n    this.setState({ entered: true, showShareDialog: false });\n    clearHistoryState(this.props.history);\n  };\n\n  attemptLink = async () => {\n    this.pushHistoryState(\"overlay\", \"link\");\n    const { code, cancel, onFinished } = await this.props.linkChannel.generateCode();\n    this.setState({ linkCode: code, linkCodeCancel: cancel });\n    onFinished.then(() => {\n      this.setState({ log: false, linkCode: null, linkCodeCancel: null });\n      this.props.history.goBack();\n    });\n  };\n\n  showShareDialog = () => {\n    this.props.store.update({ activity: { hasOpenedShare: true } });\n    this.setState({ showShareDialog: true });\n  };\n\n  toggleShareDialog = async () => {\n    this.props.store.update({ activity: { hasOpenedShare: true } });\n    this.setState({ showShareDialog: !this.state.showShareDialog });\n  };\n\n  createObject = media => {\n    this.props.scene.emit(\"add_media\", media);\n  };\n\n  changeScene = url => {\n    this.props.hubChannel.updateScene(url);\n  };\n\n  setAvatarUrl = url => {\n    this.props.store.update({ profile: { ...this.props.store.state.profile, ...{ avatarId: url } } });\n  };\n\n  closeDialog = () => {\n    showFullScreenIfWasFullScreen();\n\n    if (this.state.dialog) {\n      this.setState({ dialog: null });\n    } else {\n      this.props.history.goBack();\n    }\n  };\n\n  showNonHistoriedDialog = (DialogClass, props = {}) => {\n    this.setState({\n      dialog: <DialogClass {...{ onClose: this.closeDialog, ...props }} />\n    });\n  };\n\n  toggleStreamerMode = enable => {\n    const playerRig = document.querySelector(\"#player-rig\");\n    playerRig.setAttribute(\"character-controller\", \"fly\", enable);\n\n    if (enable) {\n      this.props.hubChannel.beginStreaming();\n      this.setState({ isStreaming: true, showStreamingTip: true, showSettingsMenu: false });\n    } else {\n      this.props.hubChannel.endStreaming();\n      this.setState({ isStreaming: false });\n    }\n  };\n\n  renderDialog = (DialogClass, props = {}) => <DialogClass {...{ onClose: this.closeDialog, ...props }} />;\n\n  showSignInDialog = () => {\n    this.showNonHistoriedDialog(SignInDialog, {\n      message: messages[\"sign-in.prompt\"],\n      onSignIn: async email => {\n        const { authComplete } = await this.props.authChannel.startAuthentication(email, this.props.hubChannel);\n\n        this.showNonHistoriedDialog(SignInDialog, { authStarted: true });\n\n        await authComplete;\n\n        this.setState({ signedIn: true });\n        this.closeDialog();\n      }\n    });\n  };\n\n  signOut = async () => {\n    await this.props.authChannel.signOut(this.props.hubChannel);\n    this.setState({ signedIn: false });\n  };\n\n  showWebRTCScreenshareUnsupportedDialog = () => {\n    this.pushHistoryState(\"modal\", \"webrtc-screenshare\");\n  };\n\n  onMiniInviteClicked = () => {\n    const link = \"https://hub.link/\" + this.props.hubId;\n\n    this.setState({ miniInviteActivated: true });\n    setTimeout(() => {\n      this.setState({ miniInviteActivated: false });\n    }, 5000);\n\n    if (navigator.share) {\n      navigator.share({ title: document.title, url: link });\n    } else {\n      copy(link);\n    }\n  };\n\n  sendMessage = msg => {\n    this.props.onSendMessage(msg);\n  };\n\n  occupantCount = () => {\n    return this.props.presences ? Object.entries(this.props.presences).length : 0;\n  };\n\n  onStoreChanged = () => {\n    const broadcastedRoomConfirmed = this.props.store.state.confirmedBroadcastedRooms.includes(this.props.hubId);\n    if (broadcastedRoomConfirmed !== this.state.broadcastTipDismissed) {\n      this.setState({ broadcastTipDismissed: broadcastedRoomConfirmed });\n    }\n  };\n\n  confirmBroadcastedRoom = () => {\n    this.props.store.update({ confirmedBroadcastedRooms: [this.props.hubId] });\n  };\n\n  discordBridges = () => {\n    if (!this.props.presences) {\n      return [];\n    } else {\n      const channels = [];\n      for (const p of Object.values(this.props.presences)) {\n        for (const m of p.metas) {\n          if (m.profile && m.profile.discordBridges) {\n            Array.prototype.push.apply(channels, m.profile.discordBridges.map(b => b.channel.name));\n          }\n        }\n      }\n      return channels;\n    }\n  };\n\n  hasEmbedPresence = () => {\n    if (!this.props.presences) {\n      return false;\n    } else {\n      for (const p of Object.values(this.props.presences)) {\n        for (const m of p.metas) {\n          if (m.context && m.context.embed) {\n            return true;\n          }\n        }\n      }\n    }\n\n    return false;\n  };\n\n  pushHistoryState = (k, v) => pushHistoryState(this.props.history, k, v);\n\n  renderInterstitialPrompt = () => {\n    return (\n      <IntlProvider locale={lang} messages={messages}>\n        <div className={styles.interstitial} onClick={() => this.props.onInterstitialPromptClicked()}>\n          <div>\n            <FormattedMessage id=\"interstitial.prompt\" />\n          </div>\n        </div>\n      </IntlProvider>\n    );\n  };\n\n  renderExitedPane = () => {\n    let subtitle = null;\n    if (this.props.roomUnavailableReason === \"closed\") {\n      // TODO i18n, due to links and markup\n      subtitle = (\n        <div>\n          Sorry, this room is no longer available.\n          <p />A room may be closed if we receive reports that it violates our{\" \"}\n          <WithHoverSound>\n            <a target=\"_blank\" rel=\"noreferrer noopener\" href=\"https://github.com/mozilla/hubs/blob/master/TERMS.md\">\n              Terms of Use\n            </a>\n          </WithHoverSound>\n          .<br />\n          If you have questions, contact us at{\" \"}\n          <WithHoverSound>\n            <a href=\"mailto:hubs@mozilla.com\">hubs@mozilla.com</a>\n          </WithHoverSound>\n          .<p />\n          If you&apos;d like to run your own server, hubs&apos;s source code is available on{\" \"}\n          <WithHoverSound>\n            <a href=\"https://github.com/mozilla/hubs\">GitHub</a>\n          </WithHoverSound>\n          .\n        </div>\n      );\n    } else if (this.props.platformUnsupportedReason === \"no_data_channels\") {\n      // TODO i18n, due to links and markup\n      subtitle = (\n        <div>\n          Your browser does not support{\" \"}\n          <WithHoverSound>\n            <a\n              href=\"https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/createDataChannel#Browser_compatibility\"\n              rel=\"noreferrer noopener\"\n            >\n              WebRTC Data Channels\n            </a>\n          </WithHoverSound>\n          , which is required to use Hubs.\n          <br />\n          If you&quot;d like to use Hubs with Oculus or SteamVR, you can{\" \"}\n          <WithHoverSound>\n            <a href=\"https://www.mozilla.org/firefox\" rel=\"noreferrer noopener\">\n              Download Firefox\n            </a>\n          </WithHoverSound>\n          .\n        </div>\n      );\n    } else {\n      const reason = this.props.roomUnavailableReason || this.props.platformUnsupportedReason;\n      const exitSubtitleId = `exit.subtitle.${reason || \"exited\"}`;\n      subtitle = (\n        <div>\n          <FormattedMessage id={exitSubtitleId} />\n          <p />\n          {![\"left\", \"kicked\"].includes(this.props.roomUnavailableReason) && (\n            <div>\n              You can also{\" \"}\n              <WithHoverSound>\n                <a href=\"/\">create a new room</a>\n              </WithHoverSound>\n              .\n            </div>\n          )}\n        </div>\n      );\n    }\n\n    return (\n      <IntlProvider locale={lang} messages={messages}>\n        <div className=\"exited-panel\">\n          <img className=\"exited-panel__logo\" src=\"../assets/images/logo.svg\" />\n          <div className=\"exited-panel__subtitle\">{subtitle}</div>\n        </div>\n      </IntlProvider>\n    );\n  };\n\n  renderBotMode = () => {\n    return (\n      <div className=\"loading-panel\">\n        <img className=\"loading-panel__logo\" src=\"../assets/images/logo.svg\" />\n        <input type=\"file\" id=\"bot-audio-input\" accept=\"audio/*\" />\n        <input type=\"file\" id=\"bot-data-input\" accept=\"application/json\" />\n      </div>\n    );\n  };\n\n  renderEntryStartPanel = () => {\n    const { hasAcceptedProfile, hasChangedName } = this.props.store.state.activity;\n    const promptForNameAndAvatarBeforeEntry = this.props.hubIsBound ? !hasAcceptedProfile : !hasChangedName;\n\n    return (\n      <div className={entryStyles.entryPanel}>\n        <div className={entryStyles.name}>\n\n          <span>{this.props.hubName}</span>\n\n          {false && this.props.hubChannel.canOrWillIfCreator(\"update_hub\") ? (\n\n            <button\n              className={entryStyles.renameButton}\n              onClick={() =>\n                this.props.performConditionalSignIn(\n                  () => this.props.hubChannel.can(\"update_hub\"),\n                  () => this.pushHistoryState(\"modal\", \"rename_room\"),\n                  \"rename-room\"\n                )\n              }\n            >\n              {this.props.hubName}\n            </button>\n          ) : false ? (\n            <span>{this.props.hubName}</span>\n          ) : <span />}\n          <button onClick={() => this.setState({ watching: true })} className={entryStyles.collapseButton}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </button>\n\n          <button\n            onClick={() => this.toggleFavorited()}\n            className={classNames({\n              [entryStyles.entryFavoriteButton]: true,\n              [entryStyles.favoriteButton]: true,\n              [entryStyles.favorited]: this.isFavorited()\n            })}\n          >\n            <i title=\"Favorite\">\n              <FontAwesomeIcon icon={faStar} />\n            </i>\n          </button>\n        </div>\n\n        <div className={entryStyles.roomSubtitle}>\n          <FormattedMessage id=\"entry.lobby\" />\n        </div>\n\n        <div className={entryStyles.center}>\n\n          <LobbyChatBox\n            occupantCount={this.occupantCount()}\n            discordBridges={this.discordBridges()}\n            onSendMessage={this.sendMessage}\n          />\n        </div>\n\n        {!this.state.waitingOnAudio ? (\n          <div className={entryStyles.buttonContainer}>\n            {!isMobileVR && (\n              <a\n                onClick={e => {\n                  e.preventDefault();\n                  this.attemptLink();\n                }}\n                className={classNames([entryStyles.secondaryActionButton, entryStyles.wideButton])}\n              >\n                <FormattedMessage id=\"entry.device-medium\" />\n                <div className={entryStyles.buttonSubtitle}>\n                  <FormattedMessage id={isMobile ? \"entry.device-subtitle-mobile\" : \"entry.device-subtitle-desktop\"} />\n                </div>\n              </a>\n            )}\n            {promptForNameAndAvatarBeforeEntry || !this.props.forcedVREntryType ? (\n              <StateLink\n                stateKey=\"entry_step\"\n                stateValue={promptForNameAndAvatarBeforeEntry ? \"profile\" : \"device\"}\n                history={this.props.history}\n                className={classNames([entryStyles.actionButton, entryStyles.wideButton])}\n              >\n                <FormattedMessage id=\"entry.enter-room\" />\n              </StateLink>\n            ) : (\n              <a\n                onClick={e => {\n                  e.preventDefault();\n                  this.handleForceEntry();\n                }}\n                className={classNames([entryStyles.actionButton, entryStyles.wideButton])}\n              >\n                <FormattedMessage id=\"entry.enter-room\" />\n              </a>\n            )}\n          </div>\n        ) : (\n          <div>\n            <div className=\"loader-wrap loader-mid\">\n              <div className=\"loader\">\n                <div className=\"loader-center\" />\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  renderDevicePanel = () => {\n    return (\n      <div className={entryStyles.entryPanel}>\n        <div onClick={() => this.props.history.goBack()} className={entryStyles.back}>\n          <i>\n            <FontAwesomeIcon icon={faArrowLeft} />\n          </i>\n          <FormattedMessage id=\"entry.back\" />\n        </div>\n\n        <div className={entryStyles.title}>\n          <FormattedMessage id=\"entry.choose-device\" />\n        </div>\n\n        {!this.state.waitingOnAudio ? (\n          <div className={entryStyles.buttonContainer}>\n            {this.props.availableVREntryTypes.cardboard !== VR_DEVICE_AVAILABILITY.no && (\n              <div className={entryStyles.secondary} onClick={this.enterVR}>\n                <FormattedMessage id=\"entry.cardboard\" />\n              </div>\n            )}\n            {this.props.availableVREntryTypes.generic !== VR_DEVICE_AVAILABILITY.no && (\n              <GenericEntryButton secondary={true} onClick={this.enterVR} />\n            )}\n            {this.props.availableVREntryTypes.daydream === VR_DEVICE_AVAILABILITY.yes && (\n              <DaydreamEntryButton secondary={true} onClick={this.enterDaydream} subtitle={null} />\n            )}\n            {this.props.availableVREntryTypes.screen === VR_DEVICE_AVAILABILITY.yes && (\n              <TwoDEntryButton onClick={this.enter2D} />\n            )}\n          </div>\n        ) : (\n          <div className={entryStyles.audioLoader}>\n            <div className=\"loader-wrap loader-mid\">\n              <div className=\"loader\">\n                <div className=\"loader-center\" />\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  renderScreensharing = () => {\n    return (\n      <label className={entryStyles.screenSharing}>\n        <input\n          className={entryStyles.checkbox}\n          type=\"checkbox\"\n          value={this.state.shareScreen}\n          onChange={this.setStateAndRequestScreen}\n        />\n        <FormattedMessage id=\"entry.enable-screen-sharing\" />\n      </label>\n    );\n  };\n\n  renderMicPanel = granted => {\n    return (\n      <div className=\"mic-grant-panel\">\n        <div onClick={() => this.props.history.goBack()} className={entryStyles.back}>\n          <i>\n            <FontAwesomeIcon icon={faArrowLeft} />\n          </i>\n          <FormattedMessage id=\"entry.back\" />\n        </div>\n\n        <div className=\"mic-grant-panel__grant-container\">\n          <div className=\"mic-grant-panel__title\">\n            <FormattedMessage id={granted ? \"audio.granted-title\" : \"audio.grant-title\"} />\n          </div>\n          <div className=\"mic-grant-panel__subtitle\">\n            <FormattedMessage id={granted ? \"audio.granted-subtitle\" : \"audio.grant-subtitle\"} />\n          </div>\n          <div className=\"mic-grant-panel__button-container\">\n            {granted ? (\n              <WithHoverSound>\n                <button className=\"mic-grant-panel__button\" onClick={this.onMicGrantButton}>\n                  <img src=\"../assets/images/mic_granted.png\" srcSet=\"../assets/images/mic_granted@2x.png 2x\" />\n                </button>\n              </WithHoverSound>\n            ) : (\n              <WithHoverSound>\n                <button className=\"mic-grant-panel__button\" onClick={this.onMicGrantButton}>\n                  <img src=\"../assets/images/mic_denied.png\" srcSet=\"../assets/images/mic_denied@2x.png 2x\" />\n                </button>\n              </WithHoverSound>\n            )}\n          </div>\n          <div className=\"mic-grant-panel__next-container\">\n            <WithHoverSound>\n              <button className={classNames(\"mic-grant-panel__next\")} onClick={this.onMicGrantButton}>\n                <FormattedMessage id=\"audio.granted-next\" />\n              </button>\n            </WithHoverSound>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderAudioSetupPanel = () => {\n    const subtitleId = isMobilePhoneOrVR ? \"audio.subtitle-mobile\" : \"audio.subtitle-desktop\";\n    return (\n      <div className=\"audio-setup-panel\">\n        <div onClick={() => this.props.history.goBack()} className={entryStyles.back}>\n          <i>\n            <FontAwesomeIcon icon={faArrowLeft} />\n          </i>\n          <FormattedMessage id=\"entry.back\" />\n        </div>\n\n        <div>\n          <div className=\"audio-setup-panel__title\">\n            <FormattedMessage id=\"audio.title\" />\n          </div>\n          <div className=\"audio-setup-panel__subtitle\">\n            {(isMobilePhoneOrVR || this.state.enterInVR) && <FormattedMessage id={subtitleId} />}\n          </div>\n          <div className=\"audio-setup-panel__levels\">\n            <MicLevelWidget\n              hasAudioTrack={!!this.state.audioTrack}\n              muteOnEntry={this.state.muteOnEntry}\n              mediaStream={this.state.mediaStream}\n            />\n            <OutputLevelWidget />\n          </div>\n          {this.state.audioTrack && this.state.micDevices.length > 1 ? (\n            <div className=\"audio-setup-panel__device-chooser\">\n              <WithHoverSound>\n                <select\n                  className=\"audio-setup-panel__device-chooser__dropdown\"\n                  value={this.selectedMicDeviceId()}\n                  onChange={this.micDeviceChanged}\n                >\n                  {this.state.micDevices.map(d => (\n                    <option key={d.deviceId} value={d.deviceId}>\n                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                      {d.label}\n                    </option>\n                  ))}\n                </select>\n              </WithHoverSound>\n              <img\n                className=\"audio-setup-panel__device-chooser__mic-icon\"\n                src=\"../assets/images/mic_small.png\"\n                srcSet=\"../assets/images/mic_small@2x.png 2x\"\n              />\n              <img\n                className=\"audio-setup-panel__device-chooser__dropdown-arrow\"\n                src=\"../assets/images/dropdown_arrow.png\"\n                srcSet=\"../assets/images/dropdown_arrow@2x.png 2x\"\n              />\n            </div>\n          ) : (\n            <div />\n          )}\n          {this.shouldShowHmdMicWarning() && (\n            <div className=\"audio-setup-panel__hmd-mic-warning\">\n              <img\n                src=\"../assets/images/warning_icon.png\"\n                srcSet=\"../assets/images/warning_icon@2x.png 2x\"\n                className=\"audio-setup-panel__hmd-mic-warning__icon\"\n              />\n              <span className=\"audio-setup-panel__hmd-mic-warning__label\">\n                <FormattedMessage id=\"audio.hmd-mic-warning\" />\n              </span>\n            </div>\n          )}\n        </div>\n        <div className=\"audio-setup-panel__mute-container\">\n          <input\n            id=\"mute-on-entry\"\n            type=\"checkbox\"\n            onChange={() => this.setState({ muteOnEntry: !this.state.muteOnEntry })}\n            checked={this.state.muteOnEntry}\n          />\n          <label htmlFor=\"mute-on-entry\">\n            <FormattedMessage id=\"entry.mute-on-entry\" />\n          </label>\n        </div>\n        <div className=\"audio-setup-panel__enter-button-container\">\n          <WithHoverSound>\n            <button className=\"audio-setup-panel__enter-button\" onClick={this.onAudioReadyButton}>\n              <FormattedMessage id=\"audio.enter-now\" />\n            </button>\n          </WithHoverSound>\n        </div>\n      </div>\n    );\n  };\n\n  isInModalOrOverlay = () => {\n    if (\n      this.state.entered &&\n      (IN_ROOM_MODAL_ROUTER_PATHS.find(x => sluglessPath(this.props.history.location).startsWith(x)) ||\n        IN_ROOM_MODAL_QUERY_VARS.find(x => new URLSearchParams(this.props.history.location.search).get(x)))\n    ) {\n      return true;\n    }\n\n    if (\n      !this.state.entered &&\n      (LOBBY_MODAL_ROUTER_PATHS.find(x => sluglessPath(this.props.history.location).startsWith(x)) ||\n        LOBBY_MODAL_QUERY_VARS.find(\n          (x, i) => new URLSearchParams(this.props.history.location.search).get(x) === LOBBY_MODAL_QUERY_VALUES[i]\n        ))\n    ) {\n      return true;\n    }\n\n    return !!(\n      (this.props.history &&\n        this.props.history.location.state &&\n        (this.props.history.location.state.modal || this.props.history.location.state.overlay)) ||\n      this.state.dialog\n    );\n  };\n\n  render() {\n    if (this.props.hide || this.state.hide) return <div />;\n\n    const isExited = this.state.exited || this.props.roomUnavailableReason || this.props.platformUnsupportedReason;\n    const preload = this.props.showPreload;\n\n    const isLoading =\n      !preload &&\n      (!this.state.hideLoader || !this.state.didConnectToNetworkedScene) &&\n      !(this.props.showSafariMicDialog || this.props.showSafariDialog || this.props.showWebAssemblyDialog);\n\n    const rootStyles = {\n      [styles.ui]: true,\n      \"ui-root\": true,\n      \"in-modal-or-overlay\": this.isInModalOrOverlay()\n    };\n    const hasPush = navigator.serviceWorker && \"PushManager\" in window;\n\n    if (this.props.showOAuthDialog)\n      return (\n        <div className={classNames(rootStyles)}>\n          <OAuthDialog closable={false} oauthInfo={this.props.oauthInfo} />\n        </div>\n      );\n    if (isExited) return this.renderExitedPane();\n    if (isLoading) {\n      return (\n        <Loader loadingIcon={this.state.airtableAssets.Icon} scene={this.props.scene} finished={this.state.noMoreLoadingUpdates} onLoaded={this.onLoadingFinished} />\n      );\n    }\n    if (this.props.showInterstitialPrompt) return this.renderInterstitialPrompt();\n    if (this.props.isBotMode) return this.renderBotMode();\n\n    const embed = this.props.embed;\n    const entered = this.state.entered;\n    const watching = this.state.watching;\n    const enteredOrWatching = entered || watching;\n    const enteredOrWatchingOrPreload = entered || watching || preload;\n    const baseUrl = `${location.protocol}//${location.host}${location.pathname}`;\n\n    const entryDialog =\n      this.props.availableVREntryTypes &&\n      !preload &&\n      (this.isWaitingForAutoExit() ? (\n        <AutoExitWarning\n          secondsRemaining={this.state.secondsRemainingBeforeAutoExit}\n          onCancel={this.endAutoExitTimer}\n        />\n      ) : (\n        <div className={entryStyles.entryDialog}>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"device\" history={this.props.history}>\n            {this.renderDevicePanel()}\n          </StateRoute>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"mic_grant\" history={this.props.history}>\n            {this.renderMicPanel(false)}\n          </StateRoute>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"mic_granted\" history={this.props.history}>\n            {this.renderMicPanel(true)}\n          </StateRoute>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"audio\" history={this.props.history}>\n            {this.renderAudioSetupPanel()}\n          </StateRoute>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"\" history={this.props.history}>\n            {this.renderEntryStartPanel()}\n          </StateRoute>\n        </div>\n      ));\n\n    const dialogBoxContentsClassNames = classNames({\n      [styles.uiInteractive]: !this.isInModalOrOverlay(),\n      [styles.uiDialogBoxContents]: true,\n      [styles.backgrounded]: this.isInModalOrOverlay()\n    });\n\n    const showVREntryButton = entered && isMobileVR;\n\n    const presenceLogEntries = this.props.presenceLogEntries || [];\n\n    const mediaSource = this.props.mediaSearchStore.getUrlMediaSource(this.props.history.location);\n\n    // Allow scene picker pre-entry, otherwise wait until entry\n    const showMediaBrowser =\n      mediaSource && ([\"scenes\", \"avatars\", \"favorites\"].includes(mediaSource) || this.state.entered);\n    const hasTopTip = this.props.activeTips && this.props.activeTips.top;\n\n    const clientInfoClientId = getClientInfoClientId(this.props.history.location);\n    const showClientInfo = !!clientInfoClientId;\n\n    const discordBridges = this.discordBridges();\n    const discordSnippet = discordBridges.map(ch => \"#\" + ch).join(\", \");\n    const hasEmbedPresence = this.hasEmbedPresence();\n    const hasDiscordBridges = discordBridges.length > 0;\n    const showBroadcastTip =\n      (hasDiscordBridges || (hasEmbedPresence && !this.props.embed)) && !this.state.broadcastTipDismissed;\n    const showInviteTip =\n      !showVREntryButton &&\n      !hasTopTip &&\n      !entered &&\n      !embed &&\n      !preload &&\n      !watching &&\n      !hasTopTip &&\n      !this.props.store.state.activity.hasOpenedShare &&\n      this.occupantCount() <= 1;\n\n    const showChooseSceneButton =\n    false && \n      !showVREntryButton &&\n      !entered &&\n      !embed &&\n      !preload &&\n      !watching &&\n      !showInviteTip &&\n      !this.state.showShareDialog &&\n      this.props.hubChannel.canOrWillIfCreator(\"update_hub\");\n\n    const displayNameOverride = this.props.hubIsBound\n      ? getPresenceProfileForSession(this.props.presences, this.props.sessionId).displayName\n      : null;\n\n    const streaming = this.state.isStreaming;\n    const streamingTip = streaming &&\n      this.state.showStreamingTip && (\n        <div className={classNames([styles.streamingTip])}>\n          <div className={classNames([styles.streamingTipAttachPoint])} />\n          <button\n            title=\"Dismiss\"\n            className={styles.streamingTipClose}\n            onClick={() => this.setState({ showStreamingTip: false })}\n          >\n            <FontAwesomeIcon icon={faTimes} />\n          </button>\n\n          <div className={styles.streamingTipMessage}>\n            <FormattedMessage id=\"tips.streaming\" />\n          </div>\n        </div>\n      );\n\n    const streamer = getCurrentStreamer();\n    const streamerName = streamer && streamer.displayName;\n\n    return (\n      <ReactAudioContext.Provider value={this.state.audioContext}>\n        <IntlProvider locale={lang} messages={messages}>\n          <div className={classNames(rootStyles)}>\n            {this.state.dialog}\n            {preload && (\n              <PreloadOverlay\n                hubName={this.props.hubName}\n                hubScene={this.props.hubScene}\n                baseUrl={baseUrl}\n                onLoadClicked={this.props.onPreloadLoadClicked}\n                logo={this.state.DarkLogo}\n              />\n            )}\n\n            <StateRoute\n              stateKey=\"overlay\"\n              stateValue=\"profile\"\n              history={this.props.history}\n              render={props => (\n                <ProfileEntryPanel\n                  {...props}\n                  displayNameOverride={displayNameOverride}\n                  finished={() => this.pushHistoryState()}\n                  store={this.props.store}\n                  mediaSearchStore={this.props.mediaSearchStore}\n                  avatarId={props.location.state.detail && props.location.state.detail.avatarId}\n                  logo={this.state.airtableAssets.DarkLogo}\n                />\n              )}\n            />\n            <StateRoute\n              stateKey=\"overlay\"\n              stateValue=\"avatar-editor\"\n              history={this.props.history}\n              render={props => (\n                <AvatarEditor\n                  className={styles.avatarEditor}\n                  signedIn={this.state.signedIn}\n                  onSignIn={this.showSignInDialog}\n                  onSave={() => {\n                    if (props.location.state.detail && props.location.state.detail.returnToProfile) {\n                      this.props.history.goBack();\n                    } else {\n                      this.props.history.goBack();\n                      // We are returning to the media browser. Trigger an update so that the filter switches to\n                      // my-avatars, now that we've saved an avatar.\n                      this.props.mediaSearchStore.sourceNavigateWithNoNav(\"avatars\");\n                    }\n                    this.props.onAvatarSaved();\n                  }}\n                  onClose={() => this.props.history.goBack()}\n                  store={this.props.store}\n                  debug={avatarEditorDebug}\n                  avatarId={props.location.state.detail && props.location.state.detail.avatarId}\n                  hideDelete={props.location.state.detail && props.location.state.detail.hideDelete}\n                />\n              )}\n            />\n            {showMediaBrowser && (\n              <MediaBrowser\n                history={this.props.history}\n                mediaSearchStore={this.props.mediaSearchStore}\n                hubChannel={this.props.hubChannel}\n                onMediaSearchResultEntrySelected={entry => {\n                  if (entry.type === \"hub\") {\n                    this.showNonHistoriedDialog(LeaveRoomDialog, {\n                      destinationUrl: entry.url,\n                      messageType: \"join-room\"\n                    });\n                  } else {\n                    this.props.onMediaSearchResultEntrySelected(entry);\n                  }\n                }}\n                performConditionalSignIn={this.props.performConditionalSignIn}\n              />\n            )}\n            <StateRoute\n              stateKey=\"entry_step\"\n              stateValue=\"profile\"\n              history={this.props.history}\n              render={props => (\n                <ProfileEntryPanel\n                  {...props}\n                  displayNameOverride={displayNameOverride}\n                  finished={() => {\n                    if (this.props.forcedVREntryType) {\n                      this.pushHistoryState();\n                      this.handleForceEntry();\n                    } else {\n                      this.pushHistoryState(\"entry_step\", \"device\");\n                    }\n                  }}\n                  store={this.props.store}\n                  mediaSearchStore={this.props.mediaSearchStore}\n                  avatarId={props.location.state.detail && props.location.state.detail.avatarId}\n                  logo={this.state.airtableAssets.DarkLogo}\n                />\n              )}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"rename_room\"\n              history={this.props.history}\n              render={() =>\n                this.renderDialog(RenameRoomDialog, { onRename: name => this.props.hubChannel.rename(name) })\n              }\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"close_room\"\n              history={this.props.history}\n              render={() => this.renderDialog(CloseRoomDialog, { onConfirm: () => this.props.hubChannel.closeHub() })}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"help\"\n              history={this.props.history}\n              render={() => this.renderDialog(HelpDialog)}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"support\"\n              history={this.props.history}\n              render={() => this.renderDialog(InviteTeamDialog, { hubChannel: this.props.hubChannel })}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"create\"\n              history={this.props.history}\n              render={() => this.renderDialog(CreateObjectDialog, { onCreate: this.createObject })}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"change_scene\"\n              history={this.props.history}\n              render={() => this.renderDialog(ChangeSceneDialog, { onChange: this.changeScene })}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"avatar_url\"\n              history={this.props.history}\n              render={() => this.renderDialog(AvatarUrlDialog, { onChange: this.setAvatarUrl })}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"webvr\"\n              history={this.props.history}\n              render={() => this.renderDialog(WebVRRecommendDialog)}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"webrtc-screenshare\"\n              history={this.props.history}\n              render={() => this.renderDialog(WebRTCScreenshareUnsupportedDialog)}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"room_info\"\n              history={this.props.history}\n              render={() =>\n                this.renderDialog(RoomInfoDialog, { scene: this.props.hubScene, hubName: this.props.hubName })\n              }\n            />\n\n            {showClientInfo && (\n              <ClientInfoDialog\n                clientId={clientInfoClientId}\n                onClose={this.closeDialog}\n                history={this.props.history}\n                presences={this.props.presences}\n                hubChannel={this.props.hubChannel}\n                performConditionalSignIn={this.props.performConditionalSignIn}\n              />\n            )}\n\n            {(!enteredOrWatching || this.isWaitingForAutoExit()) && (\n              <div className={styles.uiDialog}>\n                <PresenceLog entries={presenceLogEntries} hubId={this.props.hubId} history={this.props.history} />\n                <div className={dialogBoxContentsClassNames}>{entryDialog}</div>\n              </div>\n            )}\n\n            {enteredOrWatchingOrPreload && (\n              <PresenceLog\n                inRoom={true}\n                entries={presenceLogEntries}\n                hubId={this.props.hubId}\n                history={this.props.history}\n              />\n            )}\n            {entered &&\n              this.props.activeTips &&\n              this.props.activeTips.bottom &&\n              (!presenceLogEntries || presenceLogEntries.length === 0) &&\n              !showBroadcastTip && (\n                <div className={styles.bottomTip}>\n                  <button\n                    className={styles.tipCancel}\n                    onClick={() => handleTipClose(this.props.activeTips.bottom, \"bottom\")}\n                  >\n                    <i>\n                      <FontAwesomeIcon icon={faTimes} />\n                    </i>\n                  </button>\n                  {[\".spawn_menu\", \"_button\"].find(x => this.props.activeTips.bottom.endsWith(x)) ? (\n                    <div className={styles.splitTip}>\n                      <FormattedMessage id={`tips.${this.props.activeTips.bottom}-pre`} />\n                      <div\n                        className={classNames({\n                          [styles.splitTipIcon]: true,\n                          [styles[this.props.activeTips.bottom.split(\".\")[1] + \"-icon\"]]: true\n                        })}\n                      />\n                      <FormattedMessage id={`tips.${this.props.activeTips.bottom}-post`} />\n                    </div>\n                  ) : (\n                    <div className={styles.tip}>\n                      <FormattedMessage id={`tips.${this.props.activeTips.bottom}`} />\n                    </div>\n                  )}\n                </div>\n              )}\n            {enteredOrWatchingOrPreload &&\n              showBroadcastTip && (\n                <div className={styles.bottomTip}>\n                  <button className={styles.tipCancel} onClick={() => this.confirmBroadcastedRoom()}>\n                    <i>\n                      <FontAwesomeIcon icon={faTimes} />\n                    </i>\n                  </button>\n                  <div className={styles.tip}>\n                    {hasDiscordBridges ? (\n                      <span>{`Chat in this room is being bridged to ${discordSnippet} on Discord.`}</span>\n                    ) : (\n                      <FormattedMessage id=\"embed.presence-warning\" />\n                    )}\n                  </div>\n                </div>\n              )}\n            {enteredOrWatchingOrPreload && (\n              <InWorldChatBox\n                discordBridges={discordBridges}\n                onSendMessage={this.sendMessage}\n                onObjectCreated={this.createObject}\n                enableSpawning={entered}\n                history={this.props.history}\n              />\n            )}\n            {this.state.frozen && (\n              <button className={styles.leaveButton} onClick={() => this.exit(\"left\")}>\n                <FormattedMessage id=\"entry.leave-room\" />\n              </button>\n            )}\n\n            {!this.state.frozen &&\n              !watching &&\n              !preload && (\n                <div\n                  className={classNames({\n                    [inviteStyles.inviteContainer]: true,\n                    [inviteStyles.inviteContainerBelowHud]: entered,\n                    [inviteStyles.inviteContainerInverted]: this.state.showShareDialog\n                  })}\n                >\n                  {false && !embed &&\n                    !showVREntryButton &&\n                    !hasTopTip &&\n                    !streaming && (\n                      <WithHoverSound>\n                        <button\n                          className={classNames({\n                            [inviteStyles.inviteButton]: true,\n                            [inviteStyles.hideSmallScreens]: this.occupantCount() > 1 && entered\n                          })}\n                          onClick={() => this.toggleShareDialog()}\n                        >\n                          <FormattedMessage id=\"entry.share-button\" />\n                        </button>\n                      </WithHoverSound>\n                    )}\n                  {showChooseSceneButton && (\n                    <button\n                      className={classNames([styles.chooseSceneButton])}\n                      onClick={() => {\n                        this.props.performConditionalSignIn(\n                          () => this.props.hubChannel.can(\"update_hub\"),\n                          () => {\n                            showFullScreenIfAvailable();\n                            this.props.mediaSearchStore.sourceNavigateWithNoNav(\"scenes\");\n                          },\n                          \"change-scene\"\n                        );\n                      }}\n                    >\n                      <FormattedMessage id=\"entry.change-scene\" />\n                    </button>\n                  )}\n\n                  {showInviteTip && (\n                    <div className={styles.inviteTip}>\n                      <div className={styles.inviteTipAttachPoint} />\n                      <FormattedMessage id={`entry.${isMobile ? \"mobile\" : \"desktop\"}.invite-tip`} />\n                    </div>\n                  )}\n                  {!embed &&\n                    !showVREntryButton &&\n                    this.occupantCount() > 1 &&\n                    !hasTopTip &&\n                    entered &&\n                    !streaming && (\n                      <WithHoverSound>\n                        <button onClick={this.onMiniInviteClicked} className={inviteStyles.inviteMiniButton}>\n                          <span>\n                            {this.state.miniInviteActivated\n                              ? navigator.share\n                                ? \"sharing...\"\n                                : \"copied!\"\n                              : \"hub.link/\" + this.props.hubId}\n                          </span>\n                        </button>\n                      </WithHoverSound>\n                    )}\n                  {showVREntryButton && (\n                    <WithHoverSound>\n                      <button className={inviteStyles.enterButton} onClick={() => this.props.scene.enterVR()}>\n                        <FormattedMessage id=\"entry.enter-in-vr\" />\n                      </button>\n                    </WithHoverSound>\n                  )}\n                  {embed && (\n                    <a href={baseUrl} className={inviteStyles.enterButton} target=\"_blank\" rel=\"noopener noreferrer\">\n                      <FormattedMessage id=\"entry.open-in-window\" />\n                    </a>\n                  )}\n                  {this.state.showShareDialog && (\n                    <InviteDialog\n                      allowShare={!isMobileVR}\n                      entryCode={this.props.hubEntryCode}\n                      embedUrl={\n                        this.props.embedToken && !isMobilePhoneOrVR\n                          ? `${baseUrl}?embed_token=${this.props.embedToken}`\n                          : null\n                      }\n                      hasPush={hasPush}\n                      isSubscribed={\n                        this.state.isSubscribed === undefined ? this.props.initialIsSubscribed : this.state.isSubscribed\n                      }\n                      onSubscribeChanged={() => this.onSubscribeChanged()}\n                      hubId={this.props.hubId}\n                      onClose={() => this.setState({ showShareDialog: false })}\n                    />\n                  )}\n                </div>\n              )}\n\n            <StateRoute\n              stateKey=\"overlay\"\n              stateValue=\"invite\"\n              history={this.props.history}\n              render={() => (\n                <InviteDialog\n                  allowShare={!!navigator.share}\n                  entryCode={this.props.hubEntryCode}\n                  hubId={this.props.hubId}\n                  isModal={true}\n                  onClose={() => {\n                    this.props.history.goBack();\n                    handleReEntryToVRFrom2DInterstitial();\n                  }}\n                />\n              )}\n            />\n\n            <StateRoute\n              stateKey=\"overlay\"\n              stateValue=\"link\"\n              history={this.props.history}\n              render={() => (\n                <LinkDialog\n                  linkCode={this.state.linkCode}\n                  onClose={() => {\n                    this.state.linkCodeCancel();\n                    this.setState({ linkCode: null, linkCodeCancel: null });\n                    this.props.history.goBack();\n                  }}\n                />\n              )}\n            />\n            {streaming && (\n              <button\n                title=\"Exit Camera Mode\"\n                onClick={() => this.toggleStreamerMode(false)}\n                className={classNames([styles.cornerButton, styles.cameraModeExitButton])}\n              >\n                <FontAwesomeIcon icon={faTimes} />\n              </button>\n            )}\n\n            {streamingTip}\n\n            {!streaming &&\n              !preload && (\n                <div\n                  onClick={() => this.setState({ showSettingsMenu: !this.state.showSettingsMenu })}\n                  className={classNames({\n                    [styles.cornerButton]: true,\n                    [styles.cornerButtonSelected]: this.state.showSettingsMenu\n                  })}\n                >\n                  <FontAwesomeIcon icon={faBars} />\n                </div>\n              )}\n\n            <div\n              onClick={() => this.setState({ showPresenceList: !this.state.showPresenceList })}\n              className={classNames({\n                [styles.presenceInfo]: true,\n                [styles.presenceInfoSelected]: this.state.showPresenceList\n              })}\n            >\n              <FontAwesomeIcon icon={faUsers} />\n              <span className={styles.occupantCount}>{this.occupantCount()}</span>\n            </div>\n\n            {this.state.showPresenceList && (\n              <PresenceList\n                history={this.props.history}\n                presences={this.props.presences}\n                sessionId={this.props.sessionId}\n                signedIn={this.state.signedIn}\n                email={this.props.store.state.credentials.email}\n                onSignIn={this.showSignInDialog}\n                onSignOut={this.signOut}\n              />\n            )}\n\n            {this.state.showSettingsMenu && (\n              <SettingsMenu\n                history={this.props.history}\n                mediaSearchStore={this.props.mediaSearchStore}\n                hideSettings={() => this.setState({ showSettingsMenu: false })}\n                isStreaming={streaming}\n                toggleStreamerMode={this.toggleStreamerMode}\n                hubChannel={this.props.hubChannel}\n                hubScene={this.props.hubScene}\n                scene={this.props.scene}\n                performConditionalSignIn={this.props.performConditionalSignIn}\n                showNonHistoriedDialog={this.showNonHistoriedDialog}\n                pushHistoryState={this.pushHistoryState}\n              />\n            )}\n\n            {!entered && !streaming && !isMobile && streamerName && <SpectatingLabel name={streamerName} />}\n\n            {enteredOrWatching && (\n              <div className={styles.topHud}>\n                <TwoDHUD.TopHUD\n                  history={this.props.history}\n                  mediaSearchStore={this.props.mediaSearchStore}\n                  muted={this.state.muted}\n                  frozen={this.state.frozen}\n                  watching={this.state.watching}\n                  onWatchEnded={() => this.setState({ watching: false })}\n                  spacebubble={this.state.spacebubble}\n                  videoShareMediaSource={this.state.videoShareMediaSource}\n                  activeTip={this.props.activeTips && this.props.activeTips.top}\n                  isCursorHoldingPen={this.props.isCursorHoldingPen}\n                  hasActiveCamera={this.props.hasActiveCamera}\n                  onToggleMute={this.toggleMute}\n                  onToggleFreeze={this.toggleFreeze}\n                  onToggleSpaceBubble={this.toggleSpaceBubble}\n                  onSpawnPen={this.spawnPen}\n                  onSpawnCamera={() => this.props.scene.emit(\"action_toggle_camera\")}\n                  onShareVideo={this.shareVideo}\n                  onEndShareVideo={this.endShareVideo}\n                  onShareVideoNotCapable={() => this.showWebRTCScreenshareUnsupportedDialog()}\n                  isStreaming={streaming}\n                  showStreamingTip={this.state.showStreamingTip}\n                  hideStreamingTip={() => {\n                    this.setState({ showStreamingTip: false });\n                  }}\n                />\n                {!watching && !streaming ? (\n                  <div className={styles.nagCornerButton}>\n                    <a href=\"https://forms.gle/1g4H5Ayd1mGWqWpV7\" target=\"_blank\" rel=\"noopener noreferrer\">\n                      <FormattedMessage id=\"feedback.prompt\" />\n                    </a>\n                  </div>\n                ) : (\n                  <div className={styles.nagCornerButton}>\n                    <button onClick={() => this.setState({ hide: true })}>\n                      <FormattedMessage id=\"hide-ui.prompt\" />\n                    </button>\n                  </div>\n                )}\n\n                {!streaming && (\n                  <button\n                    onClick={() => this.toggleFavorited()}\n                    className={classNames({\n                      [entryStyles.favorited]: this.isFavorited(),\n                      [styles.inRoomFavoriteButton]: true\n                    })}\n                  >\n                    <i title=\"Favorite\">\n                      <FontAwesomeIcon icon={faStar} />\n                    </i>\n                  </button>\n                )}\n              </div>\n            )}\n          </div>\n        </IntlProvider>\n      </ReactAudioContext.Provider>\n    );\n  }\n}\n\nexport default UIRoot;\n","import jwtDecode from \"jwt-decode\";\nimport { EventTarget } from \"event-target-shim\";\nimport { Presence } from \"phoenix\";\nimport { migrateChannelToSocket } from \"./phoenix-utils\";\n\nconst MS_PER_DAY = 1000 * 60 * 60 * 24;\nconst MS_PER_MONTH = 1000 * 60 * 60 * 24 * 30;\n\nfunction isSameMonth(da, db) {\n  return da.getFullYear() == db.getFullYear() && da.getMonth() == db.getMonth();\n}\n\nfunction isSameDay(da, db) {\n  return isSameMonth(da, db) && da.getDate() == db.getDate();\n}\n\n// Permissions that will be assumed if the user becomes the creator.\nconst HUB_CREATOR_PERMISSIONS = [\"update_hub\", \"close_hub\", \"mute_users\", \"kick_users\"];\n\nexport default class HubChannel extends EventTarget {\n  constructor(store, hubId) {\n    super();\n    this.store = store;\n    this.hubId = hubId;\n    this._signedIn = !!this.store.state.credentials.token;\n    this._permissions = {};\n    this._blockedSessionIds = new Set();\n  }\n\n  get signedIn() {\n    return this._signedIn;\n  }\n\n  // Returns true if this current session has the given permission.\n  can(permission) {\n    return this._permissions && this._permissions[permission];\n  }\n\n  // Returns true if the current session has the given permission, *or* will get the permission\n  // if they sign in and become the creator.\n  canOrWillIfCreator(permission) {\n    if (this._getCreatorAssignmentToken() && HUB_CREATOR_PERMISSIONS.includes(permission)) return true;\n    return this.can(permission);\n  }\n\n  // Migrates this hub channel to a new phoenix channel and presence\n  async migrateToSocket(socket, params) {\n    let presenceBindings;\n\n    // Unbind presence, and then set up bindings after reconnect\n    if (this.presence) {\n      presenceBindings = {\n        onJoin: this.presence.caller.onJoin,\n        onLeave: this.presence.caller.onLeave,\n        onSync: this.presence.caller.onSync\n      };\n\n      this.presence.onJoin(function() {});\n      this.presence.onLeave(function() {});\n      this.presence.onSync(function() {});\n    }\n\n    this.channel = await migrateChannelToSocket(this.channel, socket, params);\n    this.presence = new Presence(this.channel);\n\n    if (presenceBindings) {\n      this.presence.onJoin(presenceBindings.onJoin);\n      this.presence.onLeave(presenceBindings.onLeave);\n      this.presence.onSync(presenceBindings.onSync);\n    }\n  }\n\n  setPhoenixChannel = channel => {\n    this.channel = channel;\n    this.presence = new Presence(channel);\n  };\n\n  setPermissionsFromToken = token => {\n    // Note: token is not verified.\n    this._permissions = jwtDecode(token);\n    this.dispatchEvent(new CustomEvent(\"permissions_updated\"));\n\n    // Refresh the token 1 minute before it expires.\n    const nextRefresh = new Date(this._permissions.exp * 1000 - 60 * 1000) - new Date();\n    setTimeout(async () => {\n      const result = await this.fetchPermissions();\n      this.dispatchEvent(new CustomEvent(\"permissions-refreshed\", { detail: result }));\n    }, nextRefresh);\n  };\n\n  sendEntryEvent = async () => {\n    if (!this.channel) {\n      console.warn(\"No phoenix channel initialized before room entry.\");\n      return;\n    }\n\n    let entryDisplayType = \"Screen\";\n\n    if (navigator.getVRDisplays) {\n      const vrDisplay = (await navigator.getVRDisplays()).find(d => d.isPresenting);\n\n      if (vrDisplay) {\n        entryDisplayType = vrDisplay.displayName;\n      }\n    }\n\n    // This is fairly hacky, but gets the # of initial occupants\n    let initialOccupantCount = 0;\n\n    if (NAF.connection.adapter && NAF.connection.adapter.publisher) {\n      initialOccupantCount = NAF.connection.adapter.publisher.initialOccupants.length;\n    }\n\n    const entryTimingFlags = this.getEntryTimingFlags();\n\n    const entryEvent = {\n      ...entryTimingFlags,\n      initialOccupantCount,\n      entryDisplayType,\n      userAgent: navigator.userAgent\n    };\n\n    this.channel.push(\"events:entered\", entryEvent);\n  };\n\n  beginStreaming() {\n    this.channel.push(\"events:begin_streaming\", {});\n  }\n\n  endStreaming() {\n    this.channel.push(\"events:end_streaming\", {});\n  }\n\n  getEntryTimingFlags = () => {\n    const entryTimingFlags = { isNewDaily: true, isNewMonthly: true, isNewDayWindow: true, isNewMonthWindow: true };\n    const storedLastEnteredAt = this.store.state.activity.lastEnteredAt;\n\n    if (!storedLastEnteredAt) {\n      return entryTimingFlags;\n    }\n\n    const now = new Date();\n    const lastEntered = new Date(storedLastEnteredAt);\n    const msSinceLastEntered = now - lastEntered;\n\n    // note that new daily and new monthly is based on client local time\n    entryTimingFlags.isNewDaily = !isSameDay(now, lastEntered);\n    entryTimingFlags.isNewMonthly = !isSameMonth(now, lastEntered);\n    entryTimingFlags.isNewDayWindow = msSinceLastEntered > MS_PER_DAY;\n    entryTimingFlags.isNewMonthWindow = msSinceLastEntered > MS_PER_MONTH;\n\n    return entryTimingFlags;\n  };\n\n  sendObjectSpawnedEvent = objectType => {\n    if (!this.channel) {\n      console.warn(\"No phoenix channel initialized before object spawn.\");\n      return;\n    }\n\n    const spawnEvent = {\n      object_type: objectType\n    };\n\n    this.channel.push(\"events:object_spawned\", spawnEvent);\n  };\n\n  sendProfileUpdate = () => {\n    this.channel.push(\"events:profile_updated\", { profile: this.store.state.profile });\n  };\n\n  updateScene = url => {\n    if (!this._permissions.update_hub) return \"unauthorized\";\n    this.channel.push(\"update_scene\", { url });\n  };\n\n  rename = name => {\n    if (!this._permissions.update_hub) return \"unauthorized\";\n    this.channel.push(\"update_hub\", { name });\n  };\n\n  closeHub = () => {\n    if (!this._permissions.close_hub) return \"unauthorized\";\n    this.channel.push(\"close_hub\", {});\n  };\n\n  subscribe = subscription => {\n    this.channel.push(\"subscribe\", { subscription });\n  };\n\n  // If true, will tell the server to not send us any NAF traffic\n  allowNAFTraffic = allow => {\n    this.channel.push(allow ? \"unblock_naf\" : \"block_naf\", {});\n  };\n\n  unsubscribe = subscription => {\n    return new Promise(resolve => this.channel.push(\"unsubscribe\", { subscription }).receive(\"ok\", resolve));\n  };\n\n  sendMessage = (body, type = \"chat\") => {\n    if (!body) return;\n    this.channel.push(\"message\", { body, type });\n  };\n\n  _getCreatorAssignmentToken = () => {\n    const creatorAssignmentTokenEntry =\n      this.store.state.creatorAssignmentTokens &&\n      this.store.state.creatorAssignmentTokens.find(t => t.hubId === this.hubId);\n\n    return creatorAssignmentTokenEntry && creatorAssignmentTokenEntry.creatorAssignmentToken;\n  };\n\n  signIn = token => {\n    return new Promise((resolve, reject) => {\n      const creator_assignment_token = this._getCreatorAssignmentToken();\n\n      this.channel\n        .push(\"sign_in\", { token, creator_assignment_token })\n        .receive(\"ok\", ({ perms_token }) => {\n          this.setPermissionsFromToken(perms_token);\n          this._signedIn = true;\n          resolve();\n        })\n        .receive(\"error\", err => {\n          if (err.reason === \"invalid_token\") {\n            console.warn(\"sign in failed\", err);\n            // Token expired or invalid TODO purge from storage if possible\n            resolve();\n          } else {\n            console.error(\"sign in failed\", err);\n            reject();\n          }\n        });\n    });\n  };\n\n  signOut = () => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"sign_out\")\n        .receive(\"ok\", () => {\n          this._permissions = {};\n          this._signedIn = false;\n          this.dispatchEvent(new CustomEvent(\"permissions_updated\"));\n          resolve();\n        })\n        .receive(\"error\", reject);\n    });\n  };\n\n  getHost = () => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"get_host\")\n        .receive(\"ok\", res => {\n          resolve(res.host);\n        })\n        .receive(\"error\", reject);\n    });\n  };\n\n  pin = (id, gltfNode, fileId, fileAccessToken, promotionToken) => {\n    const payload = { id, gltf_node: gltfNode };\n    if (fileId && promotionToken) {\n      payload.file_id = fileId;\n      payload.file_access_token = fileAccessToken;\n      payload.promotion_token = promotionToken;\n    }\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"pin\", payload)\n        .receive(\"ok\", resolve)\n        .receive(\"error\", reject);\n    });\n  };\n\n  unpin = (id, fileId) => {\n    const payload = { id };\n    if (fileId) {\n      payload.file_id = fileId;\n    }\n    this.channel.push(\"unpin\", payload);\n  };\n\n  fetchPermissions = () => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"refresh_perms_token\")\n        .receive(\"ok\", res => {\n          this.setPermissionsFromToken(res.perms_token);\n          resolve({ permsToken: res.perms_token, permissions: this._permissions });\n        })\n        .receive(\"error\", reject);\n    });\n  };\n\n  mute = sessionId => {\n    this.channel.push(\"mute\", { session_id: sessionId });\n  };\n\n  hide = sessionId => {\n    NAF.connection.adapter.block(sessionId);\n    this._blockedSessionIds.add(sessionId);\n  };\n\n  unhide = sessionId => {\n    if (!this._blockedSessionIds.has(sessionId)) return;\n    NAF.connection.adapter.unblock(sessionId);\n    NAF.connection.entities.completeSync(sessionId);\n    this._blockedSessionIds.delete(sessionId);\n  };\n\n  isHidden = sessionId => this._blockedSessionIds.has(sessionId);\n\n  kick = async sessionId => {\n    const permsToken = await this.fetchPermissions();\n    NAF.connection.adapter.kick(sessionId, permsToken);\n    this.channel.push(\"kick\", { session_id: sessionId });\n  };\n\n  requestSupport = () => this.channel.push(\"events:request_support\", {});\n  favorite = () => this.channel.push(\"favorite\", {});\n  unfavorite = () => this.channel.push(\"unfavorite\", {});\n\n  disconnect = () => {\n    if (this.channel) {\n      this.channel.socket.disconnect();\n    }\n  };\n}\n","const PHYSICS_CONSTANTS = require(\"aframe-physics-system/src/constants\"),\n  SHAPE = PHYSICS_CONSTANTS.SHAPE,\n  FIT = PHYSICS_CONSTANTS.FIT;\n\nfunction exceedsDensityThreshold(count, subtree) {\n  const bounds = subtree.boundingData;\n  const triangleThreshold = 1000;\n  const minimumVolume = 0.1;\n  const minimumTriangles = 100;\n  const dx = bounds[3] - bounds[0];\n  const dy = bounds[4] - bounds[1];\n  const dz = bounds[5] - bounds[2];\n  const volume = dx * dy * dz;\n\n  if (volume < minimumVolume) {\n    return false;\n  }\n\n  if (count < minimumTriangles) {\n    return false;\n  }\n\n  return count / volume > triangleThreshold;\n}\n\nfunction isHighDensity(subtree) {\n  if (subtree.count) {\n    const result = exceedsDensityThreshold(subtree.count, subtree);\n    return result === true ? true : subtree.count;\n  } else {\n    const leftResult = isHighDensity(subtree.left);\n    if (leftResult === true) return true;\n    const rightResult = isHighDensity(subtree.right);\n    if (rightResult === true) return true;\n\n    const count = leftResult + rightResult;\n    const result = exceedsDensityThreshold(count, subtree);\n    return result === true ? true : count;\n  }\n}\n\nfunction isGeometryHighDensity(geo) {\n  const bvh = geo.boundsTree;\n  const roots = bvh._roots;\n  for (let i = 0; i < roots.length; ++i) {\n    return isHighDensity(roots[i]) === true;\n  }\n  return false;\n}\n\nexport const traverseMeshesAndAddShapes = (function() {\n  const shapePrefix = \"ammo-shape__\";\n  const shapes = [];\n  return function(el) {\n    const meshRoot = el.object3DMap.mesh;\n    while (shapes.length > 0) {\n      const { id, entity } = shapes.pop();\n      entity.removeAttribute(id);\n    }\n\n    console.group(\"traverseMeshesAndAddShapes\");\n\n    if (document.querySelector([\"[ammo-shape__trimesh]\", \"[ammo-shape__heightfield]\"])) {\n      console.log(\"heightfield or trimesh found on scene\");\n    } else {\n      console.log(\"collision not found in scene\");\n\n      let isHighDensity = false;\n      meshRoot.traverse(o => {\n        if (\n          o.isMesh &&\n          (!THREE.Sky || o.__proto__ != THREE.Sky.prototype) &&\n          !o.name.startsWith(\"Floor_Plan\") &&\n          !o.name.startsWith(\"Ground_Plane\") &&\n          o.geometry.boundsTree\n        ) {\n          if (isGeometryHighDensity(o.geometry)) {\n            isHighDensity = true;\n            return;\n          }\n        }\n      });\n\n      let navMesh = null;\n\n      if (isHighDensity) {\n        console.log(\"mesh contains high triangle density region\");\n        navMesh = document.querySelector(\"[nav-mesh]\");\n      }\n\n      if (navMesh) {\n        console.log(`mesh density exceeded, using floor plan only`);\n        navMesh.setAttribute(shapePrefix + \"floorPlan\", {\n          type: SHAPE.MESH,\n          margin: 0.01,\n          fit: FIT.ALL,\n          includeInvisible: true\n        });\n        shapes.push({ id: shapePrefix + \"floorPlan\", entity: navMesh });\n      } else if (!isHighDensity) {\n        el.setAttribute(shapePrefix + \"environment\", {\n          type: SHAPE.MESH,\n          margin: 0.01,\n          fit: FIT.ALL\n        });\n        shapes.push({ id: shapePrefix + \"environment\", entity: el });\n        console.log(\"adding mesh shape for all visible meshes\");\n      } else {\n        el.setAttribute(shapePrefix + \"defaultFloor\", {\n          type: SHAPE.BOX,\n          margin: 0.01,\n          halfExtents: { x: 4000, y: 0.5, z: 4000 },\n          offset: { x: 0, y: -0.5, z: 0 },\n          fit: FIT.MANUAL\n        });\n        shapes.push({ id: shapePrefix + \"defaultFloor\", entity: el });\n        console.log(\"adding default floor collision\");\n      }\n    }\n    console.groupEnd();\n  };\n})();\n","import { spawnChatMessage } from \"./react-components/chat-message\";\nimport { SOUND_QUACK, SOUND_SPECIAL_QUACK } from \"./systems/sound-effects-system\";\n\nconst DUCK_URL = \"https://asset-bundles-prod.reticulum.io/interactables/Ducky/DuckyMesh-438ff8e022.gltf\";\n\n// Handles user-entered messages\nexport default class MessageDispatch {\n  constructor(scene, entryManager, hubChannel, addToPresenceLog, remountUI, mediaSearchStore) {\n    this.scene = scene;\n    this.entryManager = entryManager;\n    this.hubChannel = hubChannel;\n    this.addToPresenceLog = addToPresenceLog;\n    this.remountUI = remountUI;\n    this.mediaSearchStore = mediaSearchStore;\n  }\n\n  log = body => {\n    this.addToPresenceLog({ type: \"log\", body });\n  };\n\n  dispatch = message => {\n    if (message.startsWith(\"/\")) {\n      const commandParts = message.substring(1).split(\" \");\n      this.dispatchCommand(commandParts[0], ...commandParts.slice(1));\n      document.activeElement.blur(); // Commands should blur\n    } else {\n      this.hubChannel.sendMessage(message);\n    }\n  };\n\n  dispatchCommand = (command, ...args) => {\n    const entered = this.scene.is(\"entered\");\n\n    if (!entered) {\n      this.addToPresenceLog({ type: \"log\", body: \"You must enter the room to use this command.\" });\n      return;\n    }\n\n    const playerRig = document.querySelector(\"#player-rig\");\n    const scales = [0.0625, 0.125, 0.25, 0.5, 1.0, 1.5, 3, 5, 7.5, 12.5];\n    const curScale = playerRig.object3D.scale;\n    let err;\n    let physicsSystem;\n    const captureSystem = this.scene.systems[\"capture-system\"];\n\n    switch (command) {\n      case \"fly\":\n        if (playerRig.getAttribute(\"character-controller\").fly !== true) {\n          playerRig.setAttribute(\"character-controller\", \"fly\", true);\n          this.addToPresenceLog({ type: \"log\", body: \"Fly mode enabled.\" });\n        } else {\n          playerRig.setAttribute(\"character-controller\", \"fly\", false);\n          this.addToPresenceLog({ type: \"log\", body: \"Fly mode disabled.\" });\n        }\n        break;\n      case \"grow\":\n        for (let i = 0; i < scales.length; i++) {\n          if (scales[i] > curScale.x) {\n            playerRig.object3D.scale.set(scales[i], scales[i], scales[i]);\n            playerRig.object3D.matrixNeedsUpdate = true;\n            break;\n          }\n        }\n\n        break;\n      case \"shrink\":\n        for (let i = scales.length - 1; i >= 0; i--) {\n          if (curScale.x > scales[i]) {\n            playerRig.object3D.scale.set(scales[i], scales[i], scales[i]);\n            break;\n          }\n        }\n\n        break;\n      case \"leave\":\n        this.entryManager.exitScene();\n        this.remountUI({ roomUnavailableReason: \"left\" });\n        break;\n      case \"duck\":\n        spawnChatMessage(DUCK_URL);\n        if (Math.random() < 0.01) {\n          this.scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SPECIAL_QUACK);\n        } else {\n          this.scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_QUACK);\n        }\n        break;\n      case \"debug\":\n        physicsSystem = document.querySelector(\"a-scene\").systems.physics;\n        physicsSystem.setDebug(!physicsSystem.debug);\n        break;\n      case \"vrstats\":\n        document.getElementById(\"stats\").components[\"stats-plus\"].toggleVRStats();\n        break;\n      case \"scene\":\n        if (args[0]) {\n          err = this.hubChannel.updateScene(args[0]);\n\n          if (err === \"unauthorized\") {\n            this.addToPresenceLog({ type: \"log\", body: \"You do not have permission to change the scene.\" });\n          }\n        } else {\n          this.mediaSearchStore.sourceNavigateWithNoNav(\"scenes\");\n        }\n\n        break;\n      case \"rename\":\n        err = this.hubChannel.rename(args.join(\" \"));\n        if (err === \"unauthorized\") {\n          this.addToPresenceLog({ type: \"log\", body: \"You do not have permission to rename this room.\" });\n        }\n        break;\n      case \"capture\":\n        if (!captureSystem.available()) {\n          this.log(\"Capture unavailable.\");\n          break;\n        }\n        if (args[0] === \"stop\") {\n          if (captureSystem.started()) {\n            captureSystem.stop();\n            this.log(\"Capture stopped.\");\n          } else {\n            this.log(\"Capture already stopped.\");\n          }\n        } else {\n          if (captureSystem.started()) {\n            this.log(\"Capture already running.\");\n          } else {\n            captureSystem.start();\n            this.log(\"Capture started.\");\n          }\n        }\n        break;\n    }\n  };\n}\n","import qsTruthy from \"./utils/qs_truthy\";\nimport nextTick from \"./utils/next-tick\";\nimport pinnedEntityToGltf from \"./utils/pinned-entity-to-gltf\";\n\nconst isBotMode = qsTruthy(\"bot\");\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isDebug = qsTruthy(\"debug\");\nconst qs = new URLSearchParams(location.search);\n\nimport { addMedia, getPromotionTokenForFile } from \"./utils/media-utils\";\nimport {\n  isIn2DInterstitial,\n  handleExitTo2DInterstitial,\n  handleReEntryToVRFrom2DInterstitial,\n  forceExitFrom2DInterstitial\n} from \"./utils/vr-interstitial\";\nimport { ObjectContentOrigins } from \"./object-types\";\nimport { getAvatarSrc, getAvatarType } from \"./utils/avatar-utils\";\nimport { pushHistoryState } from \"./utils/history\";\nimport { SOUND_ENTER_SCENE } from \"./systems/sound-effects-system\";\n\nconst isIOS = AFRAME.utils.device.isIOS();\n\nexport default class SceneEntryManager {\n  constructor(hubChannel, authChannel, availableVREntryTypes, history) {\n    this.hubChannel = hubChannel;\n    this.authChannel = authChannel;\n    this.availableVREntryTypes = availableVREntryTypes;\n    this.store = window.APP.store;\n    this.mediaSearchStore = window.APP.mediaSearchStore;\n    this.scene = document.querySelector(\"a-scene\");\n    this.cursorController = document.querySelector(\"#cursor-controller\");\n    this.playerRig = document.querySelector(\"#player-rig\");\n    this._entered = false;\n    this.performConditionalSignIn = () => {};\n    this.history = history;\n  }\n\n  init = () => {\n    this.whenSceneLoaded(() => {\n      this.cursorController.components[\"cursor-controller\"].enabled = false;\n    });\n  };\n\n  hasEntered = () => {\n    return this._entered;\n  };\n\n  enterScene = async (mediaStream, enterInVR, muteOnEntry) => {\n    const playerCamera = document.querySelector(\"#player-camera\");\n    playerCamera.removeAttribute(\"scene-preview-camera\");\n\n    if (isDebug) {\n      NAF.connection.adapter.session.options.verbose = true;\n    }\n\n    if (enterInVR) {\n      // This specific scene state var is used to check if the user went through the\n      // entry flow and chose VR entry, and is used to preempt VR mode on refreshes.\n      this.scene.addState(\"vr-entered\");\n\n      // HACK - A-Frame calls getVRDisplays at module load, we want to do it here to\n      // force gamepads to become live.\n      navigator.getVRDisplays();\n\n      this.scene.enterVR();\n    }\n\n    if (isMobile || qsTruthy(\"mobile\")) {\n      this.playerRig.setAttribute(\"virtual-gamepad-controls\", {});\n    }\n\n    this._setupPlayerRig();\n    this._setupBlocking();\n    this._setupKicking();\n    this._setupMedia(mediaStream);\n    this._setupCamera();\n\n    if (qsTruthy(\"offline\")) return;\n\n    this._spawnAvatar();\n\n    this.scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_ENTER_SCENE);\n\n    if (isBotMode) {\n      this._runBot(mediaStream);\n      return;\n    }\n\n    if (mediaStream) {\n      NAF.connection.adapter.setLocalMediaStream(mediaStream);\n    }\n\n    this.scene.classList.remove(\"hand-cursor\");\n    this.scene.classList.add(\"no-cursor\");\n\n    this.cursorController.components[\"cursor-controller\"].enabled = true;\n    this._entered = true;\n\n    // Delay sending entry event telemetry until VR display is presenting.\n    (async () => {\n      while (enterInVR && !(await navigator.getVRDisplays()).find(d => d.isPresenting)) {\n        await nextTick();\n      }\n\n      this.hubChannel.sendEntryEvent().then(() => {\n        this.store.update({ activity: { lastEnteredAt: new Date().toISOString() } });\n      });\n    })();\n\n    this.scene.addState(\"entered\");\n\n    if (muteOnEntry) {\n      this.scene.emit(\"action_mute\");\n    }\n  };\n\n  whenSceneLoaded = callback => {\n    if (this.scene.hasLoaded) {\n      callback();\n    } else {\n      this.scene.addEventListener(\"loaded\", callback);\n    }\n  };\n\n  enterSceneWhenLoaded = (mediaStream, enterInVR) => {\n    this.whenSceneLoaded(() => this.enterScene(mediaStream, enterInVR));\n  };\n\n  exitScene = () => {\n    if (NAF.connection.adapter && NAF.connection.adapter.localMediaStream) {\n      NAF.connection.adapter.localMediaStream.getTracks().forEach(t => t.stop());\n    }\n    if (this.hubChannel) {\n      this.hubChannel.disconnect();\n    }\n    if (this.scene.renderer) {\n      this.scene.renderer.setAnimationLoop(null); // Stop animation loop, TODO A-Frame should do this\n    }\n    document.body.removeChild(this.scene);\n  };\n\n  _setupPlayerRig = () => {\n    this._setPlayerInfoFromProfile();\n    this.store.addEventListener(\"statechanged\", this._setPlayerInfoFromProfile);\n\n    const avatarScale = parseInt(qs.get(\"avatar_scale\"), 10);\n    if (avatarScale) {\n      this.playerRig.setAttribute(\"scale\", { x: avatarScale, y: avatarScale, z: avatarScale });\n    }\n  };\n\n  _setPlayerInfoFromProfile = async () => {\n    const avatarId = this.store.state.profile.avatarId;\n    const avatarSrc = await getAvatarSrc(avatarId);\n\n    this.playerRig.setAttribute(\"player-info\", { avatarSrc, avatarType: getAvatarType(avatarId) });\n  };\n\n  _setupKicking = () => {\n    // This event is only received by the kicker\n    document.body.addEventListener(\"kicked\", ({ detail }) => {\n      const { clientId: kickedClientId } = detail;\n      const { entities } = NAF.connection.entities;\n      for (const id in entities) {\n        const entity = entities[id];\n        if (NAF.utils.getCreator(entity) !== kickedClientId) continue;\n\n        if (entity.components.networked.data.persistent) {\n          NAF.utils.takeOwnership(entity);\n          this._unpinElement(entity);\n          entity.parentNode.removeChild(entity);\n        } else {\n          NAF.entities.removeEntity(id);\n        }\n      }\n    });\n  };\n\n  _setupBlocking = () => {\n    document.body.addEventListener(\"blocked\", ev => {\n      NAF.connection.entities.removeEntitiesOfClient(ev.detail.clientId);\n    });\n\n    document.body.addEventListener(\"unblocked\", ev => {\n      NAF.connection.entities.completeSync(ev.detail.clientId, true);\n    });\n  };\n\n  _pinElement = async el => {\n    const { networkId } = el.components.networked.data;\n\n    const { fileId, src } = el.components[\"media-loader\"].data;\n\n    let fileAccessToken, promotionToken;\n    if (fileId) {\n      fileAccessToken = new URL(src).searchParams.get(\"token\");\n      const storedPromotionToken = getPromotionTokenForFile(fileId);\n      if (storedPromotionToken) {\n        promotionToken = storedPromotionToken.promotionToken;\n      }\n    }\n\n    const gltfNode = pinnedEntityToGltf(el);\n    if (!gltfNode) return;\n    el.setAttribute(\"networked\", { persistent: true });\n    el.setAttribute(\"media-loader\", { fileIsOwned: true });\n\n    try {\n      await this.hubChannel.pin(networkId, gltfNode, fileId, fileAccessToken, promotionToken);\n      this.store.update({ activity: { hasPinned: true } });\n    } catch (e) {\n      if (e.reason === \"invalid_token\") {\n        await this.authChannel.signOut(this.hubChannel);\n        this._signInAndPinOrUnpinElement(el);\n      } else {\n        console.warn(\"Pin failed for unknown reason\", e);\n      }\n    }\n  };\n\n  _signInAndPinOrUnpinElement = (el, pin) => {\n    const action = pin ? () => this._pinElement(el) : async () => await this._unpinElement(el);\n\n    this.performConditionalSignIn(() => this.hubChannel.signedIn, action, pin ? \"pin\" : \"unpin\", () => {\n      // UI pins/un-pins the entity optimistically, so we undo that here.\n      // Note we have to disable the sign in flow here otherwise this will recurse.\n      this._disableSignInOnPinAction = true;\n      el.setAttribute(\"pinnable\", \"pinned\", !pin);\n      this._disableSignInOnPinAction = false;\n    });\n  };\n\n  _unpinElement = el => {\n    const components = el.components;\n    const networked = components.networked;\n\n    if (!networked || !networked.data || !NAF.utils.isMine(el)) return;\n\n    const networkId = components.networked.data.networkId;\n    el.setAttribute(\"networked\", { persistent: false });\n\n    const mediaLoader = components[\"media-loader\"];\n    const fileId = mediaLoader.data && mediaLoader.data.fileId;\n\n    this.hubChannel.unpin(networkId, fileId);\n  };\n\n  _setupMedia = mediaStream => {\n    const offset = { x: 0, y: 0, z: -1.5 };\n    const spawnMediaInfrontOfPlayer = (src, contentOrigin) => {\n      const { entity, orientation } = addMedia(\n        src,\n        \"#interactable-media\",\n        contentOrigin,\n        !(src instanceof MediaStream),\n        true\n      );\n      orientation.then(or => {\n        entity.setAttribute(\"offset-relative-to\", {\n          target: \"#player-camera\",\n          offset,\n          orientation: or\n        });\n      });\n\n      return entity;\n    };\n\n    this.scene.addEventListener(\"add_media\", e => {\n      const contentOrigin = e.detail instanceof File ? ObjectContentOrigins.FILE : ObjectContentOrigins.URL;\n\n      spawnMediaInfrontOfPlayer(e.detail, contentOrigin);\n    });\n\n    this.scene.addEventListener(\"pinned\", e => {\n      if (this._disableSignInOnPinAction) return;\n\n      // Don't go into pin/unpin flow if the pin state didn't actually change and this was just initialization\n      if (!e.detail.changed) return;\n\n      this._signInAndPinOrUnpinElement(e.detail.el, true);\n    });\n\n    this.scene.addEventListener(\"unpinned\", e => {\n      if (this._disableSignInOnPinAction) return;\n\n      // Don't go into pin/unpin flow if the pin state didn't actually change and this was just initialization\n      if (!e.detail.changed) return;\n\n      this._signInAndPinOrUnpinElement(e.detail.el, false);\n    });\n\n    this.scene.addEventListener(\"object_spawned\", e => {\n      this.hubChannel.sendObjectSpawnedEvent(e.detail.objectType);\n    });\n\n    this.scene.addEventListener(\"action_spawn\", () => {\n      handleExitTo2DInterstitial(false, () => window.APP.mediaSearchStore.pushExitMediaBrowserHistory());\n      window.APP.mediaSearchStore.sourceNavigateToDefaultSource();\n    });\n\n    this.scene.addEventListener(\"action_invite\", () => {\n      handleExitTo2DInterstitial(false, () => this.history.goBack());\n      pushHistoryState(this.history, \"overlay\", \"invite\");\n    });\n\n    this.scene.addEventListener(\"action_kick_client\", ({ detail: { clientId } }) => {\n      this.performConditionalSignIn(\n        () => this.hubChannel.can(\"kick_users\"),\n        async () => await window.APP.hubChannel.kick(clientId),\n        \"kick-user\"\n      );\n    });\n\n    this.scene.addEventListener(\"action_mute_client\", ({ detail: { clientId } }) => {\n      this.performConditionalSignIn(\n        () => this.hubChannel.can(\"mute_users\"),\n        () => window.APP.hubChannel.mute(clientId),\n        \"mute-user\"\n      );\n    });\n\n    this.scene.addEventListener(\"action_vr_notice_closed\", () => forceExitFrom2DInterstitial());\n\n    document.addEventListener(\"paste\", e => {\n      if (e.target.matches(\"input, textarea\") && document.activeElement === e.target) return;\n\n      const url = e.clipboardData.getData(\"text\");\n      const files = e.clipboardData.files && e.clipboardData.files;\n      if (url) {\n        spawnMediaInfrontOfPlayer(url, ObjectContentOrigins.URL);\n      } else {\n        for (const file of files) {\n          spawnMediaInfrontOfPlayer(file, ObjectContentOrigins.CLIPBOARD);\n        }\n      }\n    });\n\n    document.addEventListener(\"dragover\", e => e.preventDefault());\n\n    document.addEventListener(\"drop\", e => {\n      e.preventDefault();\n      const url = e.dataTransfer.getData(\"url\");\n      const files = e.dataTransfer.files;\n      if (url) {\n        spawnMediaInfrontOfPlayer(url, ObjectContentOrigins.URL);\n      } else {\n        for (const file of files) {\n          spawnMediaInfrontOfPlayer(file, ObjectContentOrigins.FILE);\n        }\n      }\n    });\n\n    let currentVideoShareEntity;\n    let isHandlingVideoShare = false;\n\n    const shareVideoMediaStream = async constraints => {\n      if (isHandlingVideoShare) return;\n      isHandlingVideoShare = true;\n\n      const newStream = await navigator.mediaDevices.getUserMedia(constraints);\n      const videoTracks = newStream ? newStream.getVideoTracks() : [];\n\n      if (videoTracks.length > 0) {\n        newStream.getVideoTracks().forEach(track => mediaStream.addTrack(track));\n        NAF.connection.adapter.setLocalMediaStream(mediaStream);\n        currentVideoShareEntity = spawnMediaInfrontOfPlayer(mediaStream, undefined);\n\n        // Wire up custom removal event which will stop the stream.\n        currentVideoShareEntity.setAttribute(\"emit-scene-event-on-remove\", \"event:action_end_video_sharing\");\n      }\n\n      this.scene.emit(\"share_video_enabled\", { source: constraints.video.mediaSource });\n      this.scene.addState(\"sharing_video\");\n      isHandlingVideoShare = false;\n    };\n\n    this.scene.addEventListener(\"action_share_camera\", () => {\n      shareVideoMediaStream({\n        video: {\n          mediaSource: \"camera\",\n          width: isIOS ? { max: 1280 } : { max: 1280, ideal: 720 },\n          frameRate: 30\n        }\n      });\n    });\n\n    this.scene.addEventListener(\"action_share_window\", () => {\n      shareVideoMediaStream({\n        video: {\n          mediaSource: \"window\",\n          // Work around BMO 1449832 by calculating the width. This will break for multi monitors if you share anything\n          // other than your current monitor that has a different aspect ratio.\n          width: 720 * (screen.width / screen.height),\n          height: 720,\n          frameRate: 30\n        }\n      });\n    });\n\n    this.scene.addEventListener(\"action_share_screen\", () => {\n      shareVideoMediaStream({\n        video: {\n          mediaSource: \"screen\",\n          // Work around BMO 1449832 by calculating the width. This will break for multi monitors if you share anything\n          // other than your current monitor that has a different aspect ratio.\n          width: 720 * (screen.width / screen.height),\n          height: 720,\n          frameRate: 30\n        }\n      });\n    });\n\n    this.scene.addEventListener(\"action_end_video_sharing\", () => {\n      if (isHandlingVideoShare) return;\n      isHandlingVideoShare = true;\n\n      if (currentVideoShareEntity && currentVideoShareEntity.parentNode) {\n        NAF.utils.takeOwnership(currentVideoShareEntity);\n        currentVideoShareEntity.parentNode.removeChild(currentVideoShareEntity);\n      }\n\n      for (const track of mediaStream.getVideoTracks()) {\n        mediaStream.removeTrack(track);\n      }\n\n      NAF.connection.adapter.setLocalMediaStream(mediaStream);\n      currentVideoShareEntity = null;\n\n      this.scene.emit(\"share_video_disabled\");\n      this.scene.removeState(\"sharing_video\");\n      isHandlingVideoShare = false;\n    });\n\n    this.scene.addEventListener(\"action_selected_media_result_entry\", e => {\n      // TODO spawn in space when no rights\n      const entry = e.detail;\n      if ([\"avatar\", \"avatar_listing\"].includes(entry.type)) return;\n      if ((entry.type === \"scene_listing\" || entry.type === \"scene\") && this.hubChannel.can(\"update_hub\")) return;\n\n      // If user has HMD lifted up or gone through interstitial, delay spawning for now. eventually show a modal\n      const spawnDelay = isIn2DInterstitial() ? 3000 : 0;\n\n      setTimeout(() => {\n        spawnMediaInfrontOfPlayer(entry.url, ObjectContentOrigins.URL);\n      }, spawnDelay);\n\n      handleReEntryToVRFrom2DInterstitial();\n    });\n\n    this.mediaSearchStore.addEventListener(\"media-exit\", () => {\n      handleReEntryToVRFrom2DInterstitial();\n    });\n  };\n\n  _setupCamera = () => {\n    this.scene.addEventListener(\"action_toggle_camera\", () => {\n      const myCamera = this.scene.systems[\"camera-tools\"].getMyCamera();\n\n      if (myCamera) {\n        myCamera.parentNode.removeChild(myCamera);\n        this.scene.removeState(\"camera\");\n      } else {\n        const entity = document.createElement(\"a-entity\");\n        entity.setAttribute(\"networked\", { template: \"#interactable-camera\" });\n        entity.setAttribute(\"offset-relative-to\", {\n          target: \"#player-camera\",\n          offset: { x: 0, y: 0, z: -1.5 }\n        });\n        this.scene.appendChild(entity);\n        this.scene.addState(\"camera\");\n      }\n\n      // Need to wait a frame so camera is registered with system.\n      setTimeout(() => this.scene.emit(\"camera_toggled\"));\n    });\n\n    this.scene.addEventListener(\"photo_taken\", e => {\n      this.hubChannel.sendMessage({ src: e.detail }, \"photo\");\n    });\n  };\n\n  _spawnAvatar = () => {\n    this.playerRig.setAttribute(\"networked\", \"template: #remote-avatar-template; attachTemplateToLocal: false;\");\n    this.playerRig.setAttribute(\"networked-avatar\", \"\");\n    this.playerRig.emit(\"entered\");\n  };\n\n  _runBot = async mediaStream => {\n    const audioEl = document.createElement(\"audio\");\n    let audioInput;\n    let dataInput;\n\n    // Wait for startup to render form\n    do {\n      audioInput = document.querySelector(\"#bot-audio-input\");\n      dataInput = document.querySelector(\"#bot-data-input\");\n      await nextTick();\n    } while (!audioInput || !dataInput);\n\n    const getAudio = () => {\n      audioEl.loop = true;\n      audioEl.muted = true;\n      audioEl.crossorigin = \"anonymous\";\n      audioEl.src = URL.createObjectURL(audioInput.files[0]);\n      document.body.appendChild(audioEl);\n    };\n\n    if (audioInput.files && audioInput.files.length > 0) {\n      getAudio();\n    } else {\n      audioInput.onchange = getAudio;\n    }\n\n    const camera = document.querySelector(\"#player-camera\");\n    const leftController = document.querySelector(\"#player-left-controller\");\n    const rightController = document.querySelector(\"#player-right-controller\");\n    const getRecording = () => {\n      fetch(URL.createObjectURL(dataInput.files[0]))\n        .then(resp => resp.json())\n        .then(recording => {\n          camera.setAttribute(\"replay\", \"\");\n          camera.components[\"replay\"].poses = recording.camera.poses;\n\n          leftController.setAttribute(\"replay\", \"\");\n          leftController.components[\"replay\"].poses = recording.left.poses;\n          leftController.removeAttribute(\"visibility-by-path\");\n          leftController.removeAttribute(\"track-pose\");\n          leftController.setAttribute(\"visible\", true);\n\n          rightController.setAttribute(\"replay\", \"\");\n          rightController.components[\"replay\"].poses = recording.right.poses;\n          rightController.removeAttribute(\"visibility-by-path\");\n          rightController.removeAttribute(\"track-pose\");\n          rightController.setAttribute(\"visible\", true);\n        });\n    };\n\n    if (dataInput.files && dataInput.files.length > 0) {\n      getRecording();\n    } else {\n      dataInput.onchange = getRecording;\n    }\n\n    await new Promise(resolve => audioEl.addEventListener(\"canplay\", resolve));\n    mediaStream.addTrack(\n      audioEl.captureStream\n        ? audioEl.captureStream().getAudioTracks()[0]\n        : audioEl.mozCaptureStream\n          ? audioEl.mozCaptureStream().getAudioTracks()[0]\n          : null\n    );\n    NAF.connection.adapter.setLocalMediaStream(mediaStream);\n    audioEl.play();\n  };\n}\n","export default function pinnedEntityToGltf(el) {\n  if (!NAF.utils.isMine(el)) return;\n\n  // Construct a GLTF node from this entity\n  const object3D = el.object3D;\n  const components = el.components;\n  const networkId = components.networked.data.networkId;\n\n  const gltfComponents = {};\n  // TODO: Move to MOZ_hubs_components and include version number. Requires migration of existing room objects.\n  // Please do this before making a breaking change to the data stored here.\n  const gltfNode = { name: networkId, extensions: { HUBS_components: gltfComponents } };\n\n  // Adapted from three.js GLTFExporter\n  const equalArray = (x, y) => x.length === y.length && x.every((v, i) => v === y[i]);\n  const rotation = object3D.quaternion.toArray();\n  const position = object3D.position.toArray();\n  const scale = object3D.scale.toArray();\n\n  if (!equalArray(rotation, [0, 0, 0, 1])) gltfNode.rotation = rotation;\n  if (!equalArray(position, [0, 0, 0])) gltfNode.translation = position;\n  if (!equalArray(scale, [1, 1, 1])) gltfNode.scale = scale;\n\n  if (components[\"media-loader\"]) {\n    const mediaSrc = components[\"media-loader\"].data.src;\n\n    if (mediaSrc.startsWith(\"hubs://\") && mediaSrc.endsWith(\"/video\")) {\n      // Do not persist hubs client video urls\n      return null;\n    }\n\n    gltfComponents.media = { src: mediaSrc, id: networkId };\n\n    if (components[\"media-pager\"]) {\n      gltfComponents.media.pageIndex = components[\"media-pager\"].data.index;\n    }\n\n    if (components[\"media-video\"] && components[\"media-video\"].data.videoPaused) {\n      gltfComponents.media.paused = true;\n      gltfComponents.media.time = components[\"media-video\"].data.time;\n    }\n  }\n\n  gltfComponents.pinnable = { pinned: true };\n\n  return gltfNode;\n}\n","import nextTick from \"./utils/next-tick.js\";\nconst INIT_TIMEOUT_MS = 5000;\n\n// Manages web push subscriptions\n//\nfunction urlBase64ToUint8Array(base64String) {\n  const padding = \"=\".repeat((4 - (base64String.length % 4)) % 4);\n  const base64 = (base64String + padding).replace(/-/g, \"+\").replace(/_/g, \"/\");\n\n  const rawData = window.atob(base64);\n  const outputArray = new Uint8Array(rawData.length);\n\n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i);\n  }\n  return outputArray;\n}\n\nexport default class Subscriptions {\n  constructor(hubId) {\n    this.hubId = hubId;\n  }\n\n  setHubChannel = hubChannel => {\n    this.hubChannel = hubChannel;\n  };\n\n  setRegistration = registration => {\n    this.registration = registration;\n  };\n\n  setRegistrationFailed = () => {\n    this.registration = null;\n  };\n\n  setVapidPublicKey = vapidPublicKey => {\n    this.vapidPublicKey = vapidPublicKey;\n  };\n\n  setSubscribed = isSubscribed => {\n    this._isSubscribed = isSubscribed;\n  };\n\n  isSubscribed = () => {\n    return this._isSubscribed;\n  };\n\n  getCurrentEndpoint = async () => {\n    if (!navigator.serviceWorker) return null;\n    const startedAt = performance.now();\n\n    // registration becomes null if failed, non null if registered\n    while (this.registration === undefined && performance.now() - startedAt < INIT_TIMEOUT_MS) await nextTick();\n    if (performance.now() - startedAt >= INIT_TIMEOUT_MS) console.warn(\"Service worker registration timed out.\");\n    if (!this.registration || !this.registration.pushManager) return null;\n\n    while (this.vapidPublicKey === undefined) await nextTick();\n    if (this.vapidPublicKey === null) return null;\n\n    try {\n      const convertedVapidKey = urlBase64ToUint8Array(this.vapidPublicKey);\n\n      if (\n        (await this.registration.pushManager.permissionState({\n          userVisibleOnly: true,\n          applicationServerKey: convertedVapidKey\n        })) !== \"granted\"\n      )\n        return null;\n    } catch (e) {\n      return null; // Chrome can throw here complaining about userVisible if push is not right\n    }\n    const sub = await this.registration.pushManager.getSubscription();\n    if (!sub) return null;\n\n    return sub.endpoint;\n  };\n\n  toggle = async () => {\n    if (!this.registration) return;\n\n    if (this._isSubscribed) {\n      const pushSubscription = await this.registration.pushManager.getSubscription();\n      const res = await this.hubChannel.unsubscribe(pushSubscription);\n\n      if (res && res.has_remaining_subscriptions === false) {\n        pushSubscription.unsubscribe();\n      }\n    } else {\n      let pushSubscription = await this.registration.pushManager.getSubscription();\n\n      if (!pushSubscription) {\n        const convertedVapidKey = urlBase64ToUint8Array(this.vapidPublicKey);\n\n        pushSubscription = await this.registration.pushManager.subscribe({\n          userVisibleOnly: true,\n          applicationServerKey: convertedVapidKey\n        });\n      }\n\n      this.hubChannel.subscribe(pushSubscription);\n    }\n\n    this._isSubscribed = !this._isSubscribed;\n  };\n}\n","import { forEachMaterial } from \"../utils/material-utils\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\nconst invaderPos = new AFRAME.THREE.Vector3();\nconst bubblePos = new AFRAME.THREE.Vector3();\nconst isDebug = qsTruthy(\"debug\");\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\n/**\n * Updates invaders every tick, doing one per frame on mobile VR.\n * testing multiline things\n * @namespace avatar/personal-space-bubble\n * @system personal-space-bubble\n */\nAFRAME.registerSystem(\"personal-space-bubble\", {\n  schema: {\n    debug: { default: false },\n    enabled: { default: true }\n  },\n\n  init() {\n    this.invaders = [];\n    this.bubbles = [];\n    this.tickCount = 0;\n\n    this._updateInvaders = this._updateInvaders.bind(this);\n\n    this.el.addEventListener(\"action_space_bubble\", () => {\n      this.el.setAttribute(\"personal-space-bubble\", { enabled: !this.data.enabled });\n    });\n  },\n\n  registerBubble(bubble) {\n    this.bubbles.push(bubble);\n  },\n\n  unregisterBubble(bubble) {\n    const index = this.bubbles.indexOf(bubble);\n\n    if (index !== -1) {\n      this.bubbles.splice(index, 1);\n    }\n  },\n\n  registerInvader(invader) {\n    NAF.utils.getNetworkedEntity(invader.el).then(networkedEl => {\n      const owner = NAF.utils.getNetworkOwner(networkedEl);\n\n      if (owner !== NAF.clientId) {\n        this.invaders.push(invader);\n      }\n    });\n  },\n\n  unregisterInvader(invader) {\n    const index = this.invaders.indexOf(invader);\n\n    if (index !== -1) {\n      this.invaders.splice(index, 1);\n    }\n  },\n\n  update() {\n    for (let i = 0; i < this.bubbles.length; i++) {\n      this.bubbles[i].updateDebug();\n    }\n\n    for (let i = 0; i < this.invaders.length; i++) {\n      this.invaders[i].updateDebug();\n      if (!this.data.enabled) {\n        this.invaders[i].setInvading(false);\n      }\n    }\n\n    if (this.data.enabled) {\n      this.el.addState(\"spacebubble\");\n    } else {\n      this.el.removeState(\"spacebubble\");\n    }\n  },\n\n  tick() {\n    this._updateInvaders();\n    this.tickCount++;\n  },\n\n  _updateInvaders: (function() {\n    const tempInvasionFlags = [];\n\n    const setInvaderFlag = (i, invaders, bubble) => {\n      // Hide the invader if inside the bubble\n      const invader = invaders[i];\n      invaderPos.setFromMatrixPosition(invader.el.object3D.matrixWorld);\n\n      const distanceSquared = bubblePos.distanceToSquared(invaderPos);\n      const radiusSum = bubble.data.radius + invader.data.radius;\n\n      if (distanceSquared < radiusSum * radiusSum) {\n        tempInvasionFlags[i] = true;\n      }\n    };\n\n    const flushInvadingFlagsForIndex = (i, invaders) => {\n      if (invaders[i].invading !== tempInvasionFlags[i]) {\n        invaders[i].setInvading(tempInvasionFlags[i]);\n      }\n    };\n\n    return function() {\n      if (!this.data.enabled) return;\n      if (this.invaders.length === 0) return;\n\n      tempInvasionFlags.length = 0;\n\n      // precondition for this stuff -- the bubbles and invaders need updated world matrices.\n      // right now this is satisfied because we update the world matrices in the character controller\n      for (let i = 0; i < this.invaders.length; i++) {\n        this.invaders[i].el.object3D.updateMatrices(); // We read matrixWorld below, update matrices here\n        tempInvasionFlags[i] = false;\n      }\n\n      // Loop through all of the space bubbles (usually one)\n      for (let i = 0; i < this.bubbles.length; i++) {\n        const bubble = this.bubbles[i];\n\n        bubble.el.object3D.updateMatrices();\n        bubblePos.setFromMatrixPosition(bubble.el.object3D.matrixWorld);\n\n        if (!isMobileVR) {\n          for (let j = 0; j < this.invaders.length; j++) {\n            setInvaderFlag(j, this.invaders, bubble);\n          }\n        } else {\n          // Optimization: update one invader per frame on mobile VR\n          setInvaderFlag(this.tickCount % this.invaders.length, this.invaders, bubble);\n        }\n      }\n\n      if (!isMobileVR) {\n        for (let i = 0; i < this.invaders.length; i++) {\n          flushInvadingFlagsForIndex(i, this.invaders);\n        }\n      } else {\n        flushInvadingFlagsForIndex(this.tickCount % this.invaders.length, this.invaders);\n      }\n    };\n  })()\n});\n\nfunction createSphereGizmo(radius) {\n  const geometry = new THREE.SphereBufferGeometry(radius, 10, 10);\n  const wireframe = new THREE.WireframeGeometry(geometry);\n  const line = new THREE.LineSegments(wireframe);\n  line.material.opacity = 0.5;\n  line.material.transparent = true;\n  return line;\n}\n\n// TODO: we need to come up with a more generic way of doing this as this is very specific to our avatars.\n/**\n * Specifies a mesh associated with an invader.\n * @namespace avatar/personal-space-bubble\n * @component space-invader-mesh\n */\nAFRAME.registerComponent(\"space-invader-mesh\", {\n  schema: {\n    meshName: { type: \"string\" }\n  },\n  update() {\n    this.targetMesh = this.el.object3D.getObjectByName(this.data.meshName);\n  }\n});\n\nfunction findInvaderMesh(entity) {\n  while (entity && !(entity.components && entity.components[\"space-invader-mesh\"])) {\n    entity = entity.parentNode;\n  }\n  return entity && entity.components[\"space-invader-mesh\"].targetMesh;\n}\n\nconst DEBUG_OBJ = \"psb-debug\";\n\n/**\n * Represents an entity that can invade a personal space bubble\n * @namespace avatar/personal-space-bubble\n * @component personal-space-invader\n */\nAFRAME.registerComponent(\"personal-space-invader\", {\n  schema: {\n    radius: { type: \"number\", default: 0.1 },\n    useMaterial: { default: false },\n    debug: { default: false },\n    invadingOpacity: { default: 0.3 }\n  },\n\n  init() {\n    const system = this.el.sceneEl.systems[\"personal-space-bubble\"];\n    system.registerInvader(this);\n    if (this.data.useMaterial) {\n      const mesh = findInvaderMesh(this.el);\n      if (mesh) {\n        this.targetMesh = mesh;\n      }\n    }\n    this.invading = false;\n  },\n\n  update() {\n    this.radiusSquared = this.data.radius * this.data.radius;\n    this.updateDebug();\n  },\n\n  updateDebug() {\n    const system = this.el.sceneEl.systems[\"personal-space-bubble\"];\n    if (system.data.debug || this.data.debug) {\n      !this.el.object3DMap[DEBUG_OBJ] && this.el.setObject3D(DEBUG_OBJ, createSphereGizmo(this.data.radius));\n    } else if (this.el.object3DMap[DEBUG_OBJ]) {\n      this.el.removeObject3D(DEBUG_OBJ);\n    }\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"personal-space-bubble\"].unregisterInvader(this);\n  },\n\n  setInvading(invading) {\n    if (this.invading === invading) return;\n\n    if (this.targetMesh && this.targetMesh.material) {\n      forEachMaterial(this.targetMesh, material => {\n        material.opacity = invading ? this.data.invadingOpacity : 1;\n        material.transparent = invading;\n      });\n    } else {\n      this.el.object3D.visible = !invading;\n    }\n    this.invading = invading;\n  }\n});\n\n/**\n * Represents a personal space bubble on an entity.\n * @namespace avatar/personal-space-bubble\n * @component personal-space-bubble\n */\nAFRAME.registerComponent(\"personal-space-bubble\", {\n  schema: {\n    radius: { type: \"number\", default: 0.8 },\n    debug: { default: false }\n  },\n  init() {\n    this.system.registerBubble(this);\n  },\n\n  update() {\n    this.radiusSquared = this.data.radius * this.data.radius;\n    this.updateDebug();\n  },\n\n  updateDebug() {\n    if (!isDebug) return;\n\n    if (this.system.data.debug || this.data.debug) {\n      !this.el.object3DMap[DEBUG_OBJ] && this.el.setObject3D(DEBUG_OBJ, createSphereGizmo(this.data.radius));\n    } else if (this.el.object3DMap[DEBUG_OBJ]) {\n      this.el.removeObject3D(DEBUG_OBJ);\n    }\n  },\n\n  remove() {\n    this.system.unregisterBubble(this);\n  }\n});\n","import { paths } from \"../paths\";\n\n// TODO: Where do these values (500, 10, 2) come from?\nconst modeMod = {\n  [WheelEvent.DOM_DELTA_PIXEL]: 500,\n  [WheelEvent.DOM_DELTA_LINE]: 10,\n  [WheelEvent.DOM_DELTA_PAGE]: 2\n};\n\nconst isInModal = (() => {\n  let uiRoot = null;\n\n  return function() {\n    if (!uiRoot) {\n      uiRoot = document.querySelector(\".ui-root\");\n    }\n\n    return uiRoot && uiRoot.classList.contains(\"in-modal-or-overlay\");\n  };\n})();\n\nexport class MouseDevice {\n  constructor() {\n    this.events = [];\n    this.coords = [0, 0]; // normalized screenspace coordinates in [(-1, 1), (-1, 1)]\n    this.movementXY = [0, 0]; // deltas\n    this.buttonLeft = false;\n    this.buttonRight = false;\n    this.wheel = 0; // delta\n\n    const queueEvent = this.events.push.bind(this.events);\n    const canvas = document.querySelector(\"canvas\");\n    [\"mousedown\", \"wheel\"].map(x => canvas.addEventListener(x, queueEvent));\n    [\"mousemove\", \"mouseup\"].map(x => window.addEventListener(x, queueEvent));\n\n    document.addEventListener(\"wheel\", e => {\n      // Do not capture wheel events if they are being sent to an modal/overlay\n      if (!isInModal()) {\n        e.preventDefault();\n      }\n    });\n  }\n\n  process(event) {\n    if (event.type === \"wheel\") {\n      this.wheel += (event.deltaX + event.deltaY) / modeMod[event.deltaMode];\n      return true;\n    }\n\n    const left = event.button === 0;\n    const right = event.button === 2;\n    this.coords[0] = (event.clientX / window.innerWidth) * 2 - 1;\n    this.coords[1] = -(event.clientY / window.innerHeight) * 2 + 1;\n    this.movementXY[0] += event.movementX;\n    this.movementXY[1] += event.movementY;\n    if (event.type === \"mousedown\" && left) {\n      this.mouseDownLeftThisFrame = true;\n      this.buttonLeft = true;\n    } else if (event.type === \"mousedown\" && right) {\n      this.mouseDownRightThisFrame = true;\n      this.buttonRight = true;\n    } else if (event.type === \"mouseup\" && left) {\n      if (this.mouseDownLeftThisFrame) {\n        return false;\n      }\n      this.buttonLeft = false;\n    } else if (event.type === \"mouseup\" && right) {\n      if (this.mouseDownRightThisFrame) {\n        return false;\n      }\n      this.buttonRight = false;\n    }\n    return true;\n  }\n\n  write(frame) {\n    this.movementXY[0] = 0; // deltas\n    this.movementXY[1] = 0; // deltas\n    this.wheel = 0; // delta\n\n    this.didStopProcessingEarly = false;\n    this.mouseDownLeftThisFrame = false;\n    this.mouseDownRightThisFrame = false;\n\n    for (let i = 0; i < this.events.length; i++) {\n      const event = this.events[i];\n      if (!this.process(event)) {\n        this.didStopProcessingEarly = true;\n        this.events.splice(0, i);\n        break;\n      }\n    }\n\n    if (!this.didStopProcessingEarly) {\n      this.events.length = 0;\n    }\n\n    frame.setVector2(paths.device.mouse.coords, this.coords[0], this.coords[1]);\n    frame.setVector2(paths.device.mouse.movementXY, this.movementXY[0], this.movementXY[1]);\n    frame.setValueType(paths.device.mouse.buttonLeft, this.buttonLeft);\n    frame.setValueType(paths.device.mouse.buttonRight, this.buttonRight);\n    frame.setValueType(paths.device.mouse.wheel, this.wheel);\n  }\n}\n\nwindow.oncontextmenu = e => {\n  if (!isInModal()) {\n    e.preventDefault();\n  }\n};\n","// You might prefer to use this over a Set because iterating over a set allocates memory\nexport function ArrayBackedSet(initialItems) {\n  return {\n    items: initialItems || [],\n    has(item) {\n      return this.items.indexOf(item) !== -1;\n    },\n    add(item) {\n      if (!this.has(item)) {\n        this.items.push(item);\n      }\n    },\n    delete(item) {\n      const index = this.items.indexOf(item);\n      if (index !== -1) {\n        this.items[index] = this.items[this.items.length - 1];\n        this.items.pop();\n      }\n    },\n    clear() {\n      this.items.length = 0;\n    }\n  };\n}\n","import { paths } from \"../paths\";\nimport { ArrayBackedSet } from \"../array-backed-set\";\nexport class KeyboardDevice {\n  constructor() {\n    this.seenKeys = new ArrayBackedSet();\n    this.keys = {};\n    this.events = [];\n\n    [\"keydown\", \"keyup\"].map(x =>\n      document.addEventListener(x, e => {\n        if (!e.key) return;\n        this.events.push(e);\n\n        // Block browser hotkeys for chat command, media browser and freeze\n        if (\n          (e.type === \"keydown\" &&\n            e.key === \"/\" &&\n            ![\"TEXTAREA\", \"INPUT\"].includes(document.activeElement && document.activeElement.nodeName)) ||\n          (e.ctrlKey &&\n            (e.key === \"1\" ||\n              e.key === \"2\" ||\n              e.key === \"3\" ||\n              e.key === \"4\" ||\n              e.key === \"5\" ||\n              e.key === \"6\" ||\n              e.key === \"7\" ||\n              e.key === \"8\" ||\n              e.key === \"9\" ||\n              e.key === \"0\")) ||\n          e.key === \"Tab\"\n        ) {\n          e.preventDefault();\n          return false;\n        }\n      })\n    );\n    [\"blur\"].map(x => window.addEventListener(x, this.events.push.bind(this.events)));\n  }\n\n  write(frame) {\n    for (let i = 0; i < this.events.length; i++) {\n      const event = this.events[i];\n      if (event.type === \"blur\") {\n        this.keys = {};\n        this.seenKeys.clear();\n      } else {\n        const key = event.key.toLowerCase();\n        this.keys[key] = event.type === \"keydown\";\n        this.seenKeys.add(key);\n      }\n    }\n\n    this.events.length = 0;\n\n    for (let i = 0; i < this.seenKeys.items.length; i++) {\n      const key = this.seenKeys.items[i];\n      const path = paths.device.keyboard.key(key);\n      frame.setValueType(path, this.keys[key]);\n    }\n  }\n}\n","import { paths } from \"../paths\";\n\nexport class HudDevice {\n  constructor() {\n    this.events = [];\n    document.querySelector(\"a-scene\").addEventListener(\"penButtonPressed\", this.events.push.bind(this.events));\n  }\n\n  write(frame) {\n    frame.setValueType(paths.device.hud.penButton, this.events.length !== 0);\n    while (this.events.length) {\n      this.events.pop();\n    }\n  }\n}\n","import { paths } from \"../paths\";\n\nexport class XboxControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n    this.buttonMap = [\n      { name: \"a\", buttonId: 0 },\n      { name: \"b\", buttonId: 1 },\n      { name: \"x\", buttonId: 2 },\n      { name: \"y\", buttonId: 3 },\n      { name: \"leftBumper\", buttonId: 4 },\n      { name: \"rightBumper\", buttonId: 5 },\n      { name: \"leftTrigger\", buttonId: 6 },\n      { name: \"rightTrigger\", buttonId: 7 },\n      { name: \"back\", buttonId: 8 },\n      { name: \"start\", buttonId: 9 },\n      { name: \"leftJoystick\", buttonId: 10 },\n      { name: \"rightJoystick\", buttonId: 11 },\n      { name: \"dpadUp\", buttonId: 12 },\n      { name: \"dpadDown\", buttonId: 13 },\n      { name: \"dpadLeft\", buttonId: 14 },\n      { name: \"dpadRight\", buttonId: 15 }\n    ];\n    this.axisMap = [\n      { name: \"leftJoystickHorizontal\", axisId: 0 },\n      { name: \"leftJoystickVertical\", axisId: 1 },\n      { name: \"rightJoystickHorizontal\", axisId: 2 },\n      { name: \"rightJoystickVertical\", axisId: 3 }\n    ];\n  }\n\n  write(frame) {\n    this.gamepad = navigator.getGamepads()[this.gamepad.index];\n    if (this.gamepad.connected) {\n      const xboxPaths = paths.device.xbox;\n      this.buttonMap.forEach(b => {\n        const path = xboxPaths.button(b.name);\n        const button = this.gamepad.buttons[b.buttonId];\n        frame.setValueType(path.pressed, !!button.pressed);\n        frame.setValueType(path.touched, !!button.touched);\n        frame.setValueType(path.value, button.value);\n      });\n      frame.setValueType(xboxPaths.axesSum, 0);\n      this.axisMap.forEach(axis => {\n        frame.setValueType(xboxPaths.axis(axis.name), this.gamepad.axes[axis.axisId]);\n        frame.setValueType(xboxPaths.axesSum, frame.get(xboxPaths.axesSum) + Math.abs(this.gamepad.axes[axis.axisId]));\n      });\n\n      if (this.gamepad.hapticActuators && this.gamepad.hapticActuators[0]) {\n        frame.setValueType(paths.haptics.actuators[this.gamepad.hand], this.gamepad.hapticActuators[0]);\n      }\n    }\n  }\n}\n","const THREE = typeof window !== \"undefined\" && window.THREE;\nconst Vector3 = (THREE && THREE.Vector3) || function() {};\nconst Quaternion = (THREE && THREE.Quaternion) || function() {};\nconst forward = typeof window !== \"undefined\" && window.THREE && new THREE.Vector3(0, 0, -1);\nexport function Pose() {\n  return {\n    position: new Vector3(),\n    direction: new Vector3(),\n    orientation: new Quaternion(),\n    fromOriginAndDirection: function(origin, direction) {\n      this.position = origin;\n      this.direction = direction;\n      this.orientation = this.orientation.setFromUnitVectors(forward, direction);\n      return this;\n    },\n    fromCameraProjection: function(camera, normalizedX, normalizedY) {\n      this.position.setFromMatrixPosition(camera.matrixWorld);\n      this.direction\n        .set(normalizedX, normalizedY, 0.5)\n        .unproject(camera)\n        .sub(this.position)\n        .normalize();\n      this.fromOriginAndDirection(this.position, this.direction);\n      return this;\n    },\n    copy: function(pose) {\n      this.position.copy(pose.position);\n      this.direction.copy(pose.direction);\n      this.orientation.copy(pose.orientation);\n    }\n  };\n}\n","// Vector from eyes to elbow (divided by user height).\nconst EYES_TO_ELBOW = { x: 0.175, y: -0.3, z: -0.03 };\n// Vector from eyes to elbow (divided by user height).\nconst FOREARM = { x: 0, y: 0, z: -0.175 };\n\nexport const applyArmModel = (function() {\n  const controllerEuler = new THREE.Euler();\n  const deltaControllerPosition = new THREE.Vector3();\n  const controllerQuaternion = new THREE.Quaternion();\n  const controllerPosition = new THREE.Vector3();\n  return function applyArmModel(gamepadPose, hand, headObject3D, userHeight) {\n    headObject3D.updateMatrices();\n    controllerPosition.copy(headObject3D.position);\n    controllerPosition.y = controllerPosition.y - userHeight;\n    deltaControllerPosition.set(\n      EYES_TO_ELBOW.x * (hand === \"left\" ? -1 : hand === \"right\" ? 1 : 0),\n      EYES_TO_ELBOW.y,\n      EYES_TO_ELBOW.z\n    );\n    deltaControllerPosition.multiplyScalar(userHeight);\n    deltaControllerPosition.applyAxisAngle(headObject3D.up, headObject3D.rotation.y);\n    controllerPosition.add(deltaControllerPosition);\n    deltaControllerPosition.set(FOREARM.x, FOREARM.y, FOREARM.z);\n    deltaControllerPosition.multiplyScalar(userHeight);\n    controllerQuaternion.fromArray(gamepadPose.orientation);\n    controllerEuler.setFromQuaternion(controllerQuaternion);\n    controllerEuler.set(controllerEuler.x, controllerEuler.y, 0);\n    deltaControllerPosition.applyEuler(controllerEuler);\n    controllerPosition.add(deltaControllerPosition);\n    return controllerPosition;\n  };\n})();\n","export const copySittingToStandingTransform = function copySittingToStandingTransform(matrix) {\n  navigator.getVRDisplays &&\n    navigator.getVRDisplays().then(displays => {\n      if (displays[0] && displays[0].stageParameters && displays[0].stageParameters.sittingToStandingTransform) {\n        matrix.fromArray(displays[0].stageParameters.sittingToStandingTransform);\n      }\n    });\n};\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { applyArmModel } from \"../arm-model.js\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\n\nconst TOUCHPAD = paths.device.oculusgo.touchpad;\nconst TRIGGER = paths.device.oculusgo.trigger;\n\nexport class OculusGoControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.pose = new Pose();\n    this.q = new THREE.Quaternion();\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n    this.matrix = new THREE.Matrix4();\n    this.orientation = new THREE.Quaternion();\n\n    // TODO ideally we should just be getting pose from the gamepad\n    // TODO if controller is set to left hand, we still use right hand query here\n    // because otherwise things break.\n    this.rayObject = document.querySelector(\"#player-right-controller\").object3D;\n    this.headObject3D = document.querySelector(\"#player-camera\").object3D;\n    navigator.getGamepads();\n  }\n\n  write(frame) {\n    // Have to call navigator.getGamepads() in order for the gamepad object to update.\n    navigator.getGamepads();\n    if (this.gamepad.connected) {\n      frame.setValueType(TOUCHPAD.axisX, this.gamepad.axes[0]);\n      frame.setValueType(TOUCHPAD.axisY, this.gamepad.axes[1]);\n      frame.setValueType(TOUCHPAD.pressed, this.gamepad.buttons[0].pressed);\n      frame.setValueType(TOUCHPAD.touched, this.gamepad.buttons[0].touched);\n      frame.setValueType(TOUCHPAD.value, this.gamepad.buttons[0].value);\n      frame.setValueType(TRIGGER.pressed, this.gamepad.buttons[1].pressed);\n      frame.setValueType(TRIGGER.touched, this.gamepad.buttons[1].touched);\n      frame.setValueType(TRIGGER.value, this.gamepad.buttons[1].value);\n\n      this.rayObject.updateMatrices();\n      this.rayObject.getWorldQuaternion(this.q);\n      frame.setValueType(paths.actions.rayObjectRotation, this.q);\n      const rayMatrixWorld = this.rayObject.matrixWorld;\n      this.rayObjectRotation.setFromRotationMatrix(rayMatrixWorld);\n      this.pose.position.setFromMatrixPosition(rayMatrixWorld);\n      this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n      this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n      frame.setPose(paths.device.oculusgo.pose, this.pose);\n\n      if (this.gamepad.pose.orientation) {\n        // TODO if controller is set to left hand, we still draw right hand until\n        // bindings are overhauled to handle primary/secondary hands.\n        frame.setMatrix4(\n          paths.device.oculusgo.matrix,\n          this.matrix\n            .compose(\n              applyArmModel(this.gamepad.pose, this.gamepad.hand, this.headObject3D, 1.6),\n              this.orientation.fromArray(this.gamepad.pose.orientation),\n              ONES\n            )\n            .premultiply(this.sittingToStandingMatrix)\n        );\n      }\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { applyArmModel } from \"../arm-model.js\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\n\nconst TOUCHPAD = paths.device.gearVRController.button(\"touchpad\");\nconst TRIGGER = paths.device.gearVRController.button(\"trigger\");\nconst TOUCHPAD_X = paths.device.gearVRController.axis(\"touchpadX\");\nconst TOUCHPAD_Y = paths.device.gearVRController.axis(\"touchpadY\");\n\nexport class GearVRControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n    this.buttonMap = [{ name: \"touchpad\", buttonId: 0 }, { name: \"trigger\", buttonId: 1 }];\n    this.axisMap = [{ name: \"touchpadX\", axisId: 0 }, { name: \"touchpadY\", axisId: 1 }];\n\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.selector = `#player-${gamepad.hand}-controller`;\n    this.pose = new Pose();\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n\n    this.matrix = new THREE.Matrix4();\n    this.orientation = new THREE.Quaternion();\n  }\n\n  write(frame) {\n    // Chrome requires a call to getGamepads() for the gamepad state to update.\n    navigator.getGamepads();\n    if (this.gamepad.connected) {\n      const touchpad = this.gamepad.buttons[0];\n      frame.setValueType(TOUCHPAD.pressed, !!touchpad.pressed);\n      frame.setValueType(TOUCHPAD.touched, !!touchpad.touched);\n      frame.setValueType(TOUCHPAD.value, !!touchpad.value);\n\n      const trigger = this.gamepad.buttons[1];\n      frame.setValueType(TRIGGER.pressed, !!trigger.pressed);\n      frame.setValueType(TRIGGER.touched, !!trigger.touched);\n      frame.setValueType(TRIGGER.value, !!trigger.value);\n\n      frame.setValueType(TOUCHPAD_X, this.gamepad.axes[0]);\n      frame.setValueType(TOUCHPAD_Y, this.gamepad.axes[1]);\n\n      // TODO we should just be getting pose from the gamepad\n      if (!this.rayObject) {\n        this.rayObject = document.querySelector(this.selector).object3D;\n      }\n      this.rayObject.updateMatrixWorld();\n      this.rayObjectRotation.setFromRotationMatrix(this.rayObject.matrixWorld);\n      this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n      this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n      this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n      frame.setPose(paths.device.gearVRController.pose, this.pose);\n      this.headObject3D = this.headObject3D || document.querySelector(\"#player-camera\").object3D;\n      if (this.gamepad.pose.orientation) {\n        frame.setMatrix4(\n          paths.device.gearVRController.matrix,\n          this.matrix\n            .compose(\n              applyArmModel(this.gamepad.pose, this.gamepad.hand, this.headObject3D, 1.6),\n              this.orientation.fromArray(this.gamepad.pose.orientation),\n              ONES\n            )\n            .premultiply(this.sittingToStandingMatrix)\n        );\n      }\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\n\nexport const leftOculusTouchButtonMap = [\n  { name: \"thumbStick\", buttonId: 0 },\n  { name: \"trigger\", buttonId: 1 },\n  { name: \"grip\", buttonId: 2 },\n  { name: \"x\", buttonId: 3 },\n  { name: \"y\", buttonId: 4 }\n];\nexport const rightOculusTouchButtonMap = [\n  { name: \"thumbStick\", buttonId: 0 },\n  { name: \"trigger\", buttonId: 1 },\n  { name: \"grip\", buttonId: 2 },\n  { name: \"a\", buttonId: 3 },\n  { name: \"b\", buttonId: 4 }\n];\n\nconst LEFT_HAND_OFFSET = new THREE.Matrix4().makeTranslation(-0.025, -0.03, 0.1);\nconst RIGHT_HAND_OFFSET = new THREE.Matrix4().makeTranslation(0.025, -0.03, 0.1);\n\nexport class OculusTouchControllerDevice {\n  constructor(gamepad) {\n    this.rayObjectRotation = new THREE.Quaternion();\n\n    // wake the gamepad api up. otherwise it does not report touch controllers.\n    // in chrome it still won't unless you enter vr.\n    navigator.getVRDisplays();\n\n    const buttonMaps = {\n      left: leftOculusTouchButtonMap,\n      right: rightOculusTouchButtonMap\n    };\n\n    const devicePaths = {\n      left: paths.device.leftOculusTouch,\n      right: paths.device.rightOculusTouch\n    };\n\n    this.gamepad = gamepad;\n    this.pose = new Pose();\n    this.buttonMap = buttonMaps[gamepad.hand];\n    this.axisMap = [{ name: \"joyX\", axisId: 0 }, { name: \"joyY\", axisId: 1 }];\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n    this.matrix = new THREE.Matrix4();\n    this.path = devicePaths[gamepad.hand];\n    this.selector = `#player-${gamepad.hand}-controller`;\n\n    this.position = new THREE.Vector3();\n    this.orientation = new THREE.Quaternion();\n    this.handOffset = this.gamepad.hand === \"left\" ? LEFT_HAND_OFFSET : RIGHT_HAND_OFFSET;\n  }\n\n  write(frame) {\n    if (!this.gamepad) return;\n    this.gamepad = navigator.getGamepads()[this.gamepad.index];\n    if (!this.gamepad || !this.gamepad.connected) return;\n\n    this.buttonMap.forEach(b => {\n      const path = this.path.button(b.name);\n      const button = this.gamepad.buttons[b.buttonId];\n      frame.setValueType(path.pressed, !!button.pressed);\n      frame.setValueType(path.touched, !!button.touched);\n      frame.setValueType(path.value, button.value);\n    });\n    frame.setValueType(this.path.axesSum, 0);\n    this.axisMap.forEach(axis => {\n      frame.setValueType(this.path.axis(axis.name), this.gamepad.axes[axis.axisId]);\n      frame.setValueType(this.path.axesSum, frame.get(this.path.axesSum) + Math.abs(this.gamepad.axes[axis.axisId]));\n    });\n\n    this.rayObject = this.rayObject || document.querySelector(this.selector).object3D;\n    this.rayObject.updateMatrixWorld();\n    this.rayObjectRotation.setFromRotationMatrix(this.rayObject.matrixWorld);\n    this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n    this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n    this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n    frame.setPose(this.path.pose, this.pose);\n    if (this.gamepad.pose.position && this.gamepad.pose.orientation) {\n      frame.setMatrix4(\n        this.path.matrix,\n        this.matrix\n          .compose(\n            this.position.fromArray(this.gamepad.pose.position),\n            this.orientation.fromArray(this.gamepad.pose.orientation),\n            ONES\n          )\n          .premultiply(this.sittingToStandingMatrix)\n          .multiply(this.handOffset)\n      );\n    }\n    if (this.gamepad.hapticActuators && this.gamepad.hapticActuators[0]) {\n      frame.setValueType(paths.haptics.actuators[this.gamepad.hand], this.gamepad.hapticActuators[0]);\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { applyArmModel } from \"../arm-model\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\nconst HAND_OFFSET = new THREE.Matrix4().makeTranslation(0, 0, -0.04);\n\nconst TOUCHPAD = paths.device.daydream.button(\"touchpad\");\nconst TOUCHPAD_X = paths.device.daydream.axis(\"touchpadX\");\nconst TOUCHPAD_Y = paths.device.daydream.axis(\"touchpadY\");\nconst POSE = paths.device.daydream.pose;\nconst MATRIX = paths.device.daydream.matrix;\n\nexport class DaydreamControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.selector = `#player-${gamepad.hand || \"right\"}-controller`;\n    this.pose = new Pose();\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n    this.matrix = new THREE.Matrix4();\n    this.orientation = new THREE.Quaternion();\n  }\n\n  write(frame) {\n    this.gamepad = navigator.getGamepads()[0];\n    if (this.gamepad && this.gamepad.connected) {\n      const button = this.gamepad.buttons[0];\n      frame.setValueType(TOUCHPAD.pressed, !!button.pressed);\n      frame.setValueType(TOUCHPAD.touched, !!button.touched);\n      frame.setValueType(TOUCHPAD.value, !!button.value);\n\n      frame.setValueType(TOUCHPAD_X, this.gamepad.axes[0]);\n      frame.setValueType(TOUCHPAD_Y, this.gamepad.axes[1]);\n\n      // TODO ideally we should just be getting pose from the gamepad\n      if (!this.rayObject) {\n        this.rayObject = document.querySelector(this.selector).object3D;\n      }\n      this.rayObject.updateMatrixWorld();\n      this.rayObjectRotation.setFromRotationMatrix(this.rayObject.matrixWorld);\n      this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n      this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n      this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n      frame.setPose(POSE, this.pose);\n\n      this.headObject3D = this.headObject3D || document.querySelector(\"#player-camera\").object3D;\n\n      if (this.gamepad.pose.orientation) {\n        frame.setMatrix4(\n          MATRIX,\n          this.matrix\n            .compose(\n              applyArmModel(this.gamepad.pose, this.gamepad.hand, this.headObject3D, 1.6),\n              this.orientation.fromArray(this.gamepad.pose.orientation),\n              ONES\n            )\n            .premultiply(this.sittingToStandingMatrix)\n            .multiply(HAND_OFFSET)\n        );\n      }\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\nconst HAND_OFFSET = new THREE.Matrix4().compose(\n  new THREE.Vector3(0, 0, 0.13),\n  new THREE.Quaternion().setFromEuler(new THREE.Euler(-40 * THREE.Math.DEG2RAD, 0, 0)),\n  new THREE.Vector3(1, 1, 1)\n);\nconst RAY_ROTATION = new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(1, 0, 0), -Math.PI / 12);\n\nexport class ViveControllerDevice {\n  constructor(gamepad) {\n    // wake the gamepad api up. otherwise it does not report touch controllers.\n    // in chrome it still won't unless you enter vr.\n    navigator.getVRDisplays();\n    this.gamepad = gamepad;\n\n    if (this.gamepad.id === \"HTC Vive Focus Plus Controller\") {\n      this.buttonMap = [\n        { name: \"touchpad\", buttonId: 0 },\n        { name: \"trigger\", buttonId: 1 },\n        { name: \"grip\", buttonId: 2 }\n      ];\n    } else {\n      this.buttonMap = [\n        { name: \"touchpad\", buttonId: 0 },\n        { name: \"trigger\", buttonId: 1 },\n        { name: \"grip\", buttonId: 2 },\n        { name: \"top\", buttonId: 3 }\n      ];\n    }\n    this.axisMap = [{ name: \"joyX\", axisId: 0 }, { name: \"joyY\", axisId: 1 }];\n\n    this.pose = new Pose();\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.path = paths.device.vive[gamepad.hand || \"right\"];\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n\n    this.matrix = new THREE.Matrix4();\n    this.position = new THREE.Vector3();\n    this.orientation = new THREE.Quaternion();\n  }\n\n  write(frame) {\n    this.gamepad = navigator.getGamepads()[this.gamepad.index];\n    if (!this.gamepad.connected) return;\n\n    this.buttonMap.forEach(b => {\n      const path = this.path.button(b.name);\n      const button = this.gamepad.buttons[b.buttonId];\n      frame.setValueType(path.pressed, !!button.pressed);\n      frame.setValueType(path.touched, !!button.touched);\n      frame.setValueType(path.value, button.value);\n    });\n    frame.setValueType(this.path.axesSum, 0);\n    this.axisMap.forEach(axis => {\n      frame.setValueType(this.path.axis(axis.name), this.gamepad.axes[axis.axisId]);\n      frame.setValueType(this.path.axesSum, frame.get(this.path.axesSum) + Math.abs(this.gamepad.axes[axis.axisId]));\n    });\n\n    if (!this.selector) {\n      if (this.gamepad.hand) {\n        this.path = paths.device.vive[this.gamepad.hand];\n        this.selector = `#player-${this.gamepad.hand}-controller`;\n        console.warn(\"gamepad hand eventually specified\");\n      } else {\n        return;\n      }\n    }\n    const el = document.querySelector(this.selector);\n    const rayObject = el.object3D;\n    rayObject.updateMatrixWorld();\n    this.rayObjectRotation.setFromRotationMatrix(rayObject.matrixWorld);\n    this.pose.position.setFromMatrixPosition(rayObject.matrixWorld);\n    this.pose.direction\n      .set(0, 0, -1)\n      .applyQuaternion(RAY_ROTATION)\n      .applyQuaternion(this.rayObjectRotation);\n    this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n    frame.setPose(this.path.pose, this.pose);\n\n    if (this.gamepad.pose.position && this.gamepad.pose.orientation) {\n      frame.setMatrix4(\n        this.path.matrix,\n        this.matrix\n          .compose(\n            this.position.fromArray(this.gamepad.pose.position),\n            this.orientation.fromArray(this.gamepad.pose.orientation),\n            ONES\n          )\n          .premultiply(this.sittingToStandingMatrix)\n          .multiply(HAND_OFFSET)\n      );\n    }\n\n    if (this.gamepad.hapticActuators && this.gamepad.hapticActuators[0]) {\n      frame.setValueType(paths.haptics.actuators[this.gamepad.hand], this.gamepad.hapticActuators[0]);\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\nconst ONES = new THREE.Vector3(1, 1, 1);\nconst HAND_OFFSET = new THREE.Matrix4().compose(\n  new THREE.Vector3(0, -0.017, 0.13),\n  new THREE.Quaternion().setFromEuler(new THREE.Euler(-40 * THREE.Math.DEG2RAD, 0, 0)),\n  new THREE.Vector3(1, 1, 1)\n);\n\nexport class WindowsMixedRealityControllerDevice {\n  constructor(gamepad) {\n    this.rayObject = null;\n    this.rayObjectRotation = new THREE.Quaternion();\n\n    // wake the gamepad api up. otherwise it does not report touch controllers.\n    // in chrome it still won't unless you enter vr.\n    navigator.getVRDisplays();\n\n    this.gamepad = gamepad;\n    this.pose = new Pose();\n\n    if (gamepad.hand) {\n      this.selector = `#player-${gamepad.hand}-controller`;\n    }\n\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n    this.matrix = new THREE.Matrix4();\n    this.position = new THREE.Vector3();\n    this.orientation = new THREE.Quaternion();\n  }\n  write(frame) {\n    this.gamepad = navigator.getGamepads()[this.gamepad.index];\n    if (!this.gamepad.connected) return;\n\n    const path = paths.device.wmr[this.gamepad.hand || \"right\"];\n\n    frame.setValueType(path.touchpad.pressed, this.gamepad.buttons[0].pressed);\n    frame.setValueType(path.touchpad.touched, this.gamepad.buttons[0].touched);\n    frame.setValueType(path.touchpad.value, this.gamepad.buttons[0].value);\n\n    frame.setValueType(path.trigger.pressed, this.gamepad.buttons[1].pressed);\n    frame.setValueType(path.trigger.touched, this.gamepad.buttons[1].touched);\n    frame.setValueType(path.trigger.value, this.gamepad.buttons[1].value);\n\n    frame.setValueType(path.grip.pressed, this.gamepad.buttons[2].pressed);\n    frame.setValueType(path.grip.touched, this.gamepad.buttons[2].touched);\n    frame.setValueType(path.grip.value, this.gamepad.buttons[2].value);\n\n    frame.setValueType(path.menu.pressed, this.gamepad.buttons[3].pressed);\n    frame.setValueType(path.menu.touched, this.gamepad.buttons[3].touched);\n    frame.setValueType(path.menu.value, this.gamepad.buttons[3].value);\n\n    frame.setValueType(path.touchpad.axisX, this.gamepad.axes[0]);\n    frame.setValueType(path.touchpad.axisY, this.gamepad.axes[1]);\n    frame.setValueType(path.joystick.axisX, this.gamepad.axes[2]);\n    frame.setValueType(path.joystick.axisY, this.gamepad.axes[3]);\n\n    if (!this.selector) {\n      if (!this.gamepad.hand) return;\n      this.selector = `#player-${this.gamepad.hand}-controller`;\n    }\n\n    this.rayObject = this.rayObject || document.querySelector(this.selector).object3D;\n    this.rayObject.updateMatrixWorld();\n    this.rayObjectRotation.setFromRotationMatrix(this.rayObject.matrixWorld);\n\n    this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n    this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n    this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n    frame.setPose(path.pose, this.pose);\n\n    if (this.gamepad.pose.position && this.gamepad.pose.orientation) {\n      frame.setMatrix4(\n        path.matrix,\n        this.matrix\n          .compose(\n            this.position.fromArray(this.gamepad.pose.position),\n            this.orientation.fromArray(this.gamepad.pose.orientation),\n            ONES\n          )\n          .premultiply(this.sittingToStandingMatrix)\n          .multiply(HAND_OFFSET)\n      );\n    }\n\n    if (this.gamepad.hapticActuators && this.gamepad.hapticActuators[0]) {\n      frame.setValueType(paths.haptics.actuators[this.gamepad.hand], this.gamepad.hapticActuators[0]);\n    }\n  }\n}\n","import { paths } from \"../paths\";\n\nconst TWOPI = Math.PI * 2;\n\nclass CircularBuffer {\n  constructor(length) {\n    this.items = new Array(length).fill(0);\n    this.writePtr = 0;\n  }\n\n  push(item) {\n    this.items[this.writePtr] = item;\n    this.writePtr = (this.writePtr + 1) % this.items.length;\n  }\n}\n\nconst abs = Math.abs;\n// Input: two numbers between [-Math.PI, Math.PI]\n// Output: difference between them, where -Math.PI === Math.PI\nconst difference = (curr, prev) => {\n  const a = curr - prev;\n  const b = curr + TWOPI - prev;\n  const c = curr - (prev + TWOPI);\n  if (abs(a) < abs(b)) {\n    if (abs(a) < abs(c)) {\n      return a;\n    }\n  }\n  if (abs(b) < abs(c)) {\n    return b;\n  }\n\n  return c;\n};\n\nconst average = a => {\n  let sum = 0;\n  for (let i = 0; i < a.length; i++) {\n    const n = a[i];\n    sum += n;\n  }\n  return sum / a.length;\n};\n\nexport class GyroDevice {\n  constructor() {\n    this.hmdEuler = new THREE.Euler();\n    this.hmdQuaternion = new THREE.Quaternion();\n    this.prevX = this.hmdEuler.x;\n    this.prevY = this.hmdEuler.y;\n    this.dXBuffer = new CircularBuffer(6);\n    this.dYBuffer = new CircularBuffer(6);\n    this.hasPolyfill = window.webvrpolyfill;\n    if (this.hasPolyfill) {\n      this.vrDisplay = window.webvrpolyfill.getPolyfillDisplays()[0];\n      this.frameData = new window.webvrpolyfill.constructor.VRFrameData();\n    }\n  }\n\n  write(frame) {\n    if (!this.hasPolyfill) {\n      return;\n    }\n    const hmdEuler = this.hmdEuler;\n    this.vrDisplay.getFrameData(this.frameData);\n    if (this.frameData.pose.orientation !== null) {\n      this.hmdQuaternion.fromArray(this.frameData.pose.orientation);\n      hmdEuler.setFromQuaternion(this.hmdQuaternion, \"YXZ\");\n    }\n\n    // Don't use gyro values when device is lying flat\n    if (hmdEuler.x < -Math.PI * 0.475) return;\n\n    const dX = THREE.Math.RAD2DEG * difference(hmdEuler.x, this.prevX);\n    const dY = THREE.Math.RAD2DEG * difference(hmdEuler.y, this.prevY);\n\n    this.dXBuffer.push(Math.abs(dX) < 0.001 ? 0 : dX);\n    this.dYBuffer.push(Math.abs(dY) < 0.001 ? 0 : dY);\n\n    this.averageDeltaX = average(this.dXBuffer.items);\n    this.averageDeltaY = average(this.dYBuffer.items);\n\n    this.prevX = hmdEuler.x;\n    this.prevY = hmdEuler.y;\n    frame.setValueType(paths.device.gyro.averageDeltaX, this.averageDeltaX);\n    frame.setValueType(paths.device.gyro.averageDeltaY, this.averageDeltaY);\n  }\n}\n","/* global AFRAME Ammo NAF */\nimport { paths } from \"./userinput/paths\";\nimport { SOUND_HOVER_OR_GRAB } from \"./sound-effects-system\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\nfunction findHandCollisionTargetForHand(body) {\n  const driver = AFRAME.scenes[0].systems.physics.driver;\n  const numManifolds = driver.dispatcher.getNumManifolds();\n  const handPtr = Ammo.getPointer(body);\n  for (let i = 0; i < numManifolds; i++) {\n    const persistentManifold = driver.dispatcher.getManifoldByIndexInternal(i);\n    const body0ptr = Ammo.getPointer(persistentManifold.getBody0());\n    const body1ptr = Ammo.getPointer(persistentManifold.getBody1());\n    if (handPtr !== body0ptr && handPtr !== body1ptr) {\n      continue;\n    }\n    const numContacts = persistentManifold.getNumContacts();\n    for (let j = 0; j < numContacts; j++) {\n      const manifoldPoint = persistentManifold.getContactPoint(j);\n      if (manifoldPoint.getDistance() <= 10e-6) {\n        const object3D = driver.els.get(handPtr === body0ptr ? body1ptr : body0ptr).object3D;\n        if (object3D.el && object3D.el.components.tags && object3D.el.components.tags.data.isHandCollisionTarget) {\n          return object3D.el;\n        }\n        return null;\n      }\n    }\n  }\n  return null;\n}\n\nconst remoteHoverTargets = new Map();\nexport function findRemoteHoverTarget(object3D) {\n  if (!object3D) return null;\n  const target = remoteHoverTargets.get(object3D);\n  return target || findRemoteHoverTarget(object3D.parent);\n}\nAFRAME.registerComponent(\"is-remote-hover-target\", {\n  init: function() {\n    remoteHoverTargets.set(this.el.object3D, this.el);\n  },\n  remove: function() {\n    remoteHoverTargets.delete(this.el.object3D);\n  }\n});\n\nfunction isUI(el) {\n  return (\n    el && el.components.tags && (el.components.tags.data.singleActionButton || el.components.tags.data.holdableButton)\n  );\n}\n\nAFRAME.registerSystem(\"interaction\", {\n  updateCursorIntersection: function(intersection) {\n    this.rightRemoteHoverTarget = intersection && findRemoteHoverTarget(intersection.object);\n  },\n\n  isHeld(el) {\n    return this.state.leftHand.held === el || this.state.rightHand.held === el || this.state.rightRemote.held === el;\n  },\n\n  init: function() {\n    this.options = {\n      leftHand: {\n        entity: null,\n        grabPath: paths.actions.leftHand.grab,\n        dropPath: paths.actions.leftHand.drop,\n        hoverFn: findHandCollisionTargetForHand\n      },\n      rightHand: {\n        entity: null,\n        grabPath: paths.actions.rightHand.grab,\n        dropPath: paths.actions.rightHand.drop,\n        hoverFn: findHandCollisionTargetForHand\n      },\n      rightRemote: {\n        entity: null,\n        grabPath: paths.actions.cursor.grab,\n        dropPath: paths.actions.cursor.drop,\n        hoverFn: this.getRightRemoteHoverTarget\n      }\n    };\n    this.state = {\n      leftHand: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      rightHand: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      rightRemote: {\n        hovered: null,\n        held: null,\n        spawning: null\n      }\n    };\n    this.previousState = {\n      leftHand: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      rightHand: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      rightRemote: {\n        hovered: null,\n        held: null,\n        spawning: null\n      }\n    };\n\n    waitForDOMContentLoaded().then(() => {\n      this.cursorController = document.querySelector(\"#cursor-controller\");\n      this.options.leftHand.entity = document.querySelector(\"#player-left-controller\");\n      this.options.rightHand.entity = document.querySelector(\"#player-right-controller\");\n      this.options.rightRemote.entity = document.querySelector(\"#cursor\");\n    });\n  },\n\n  getRightRemoteHoverTarget() {\n    return this.rightRemoteHoverTarget;\n  },\n\n  tickInteractor(options, state) {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    if (state.held) {\n      const networked = state.held.components[\"networked\"];\n      const lostOwnership = networked && networked.data && networked.data.owner !== NAF.clientId;\n      if (userinput.get(options.dropPath) || lostOwnership) {\n        state.held = null;\n      }\n    } else {\n      state.hovered = options.hoverFn.call(this, options.entity.body);\n      if (\n        state.hovered &&\n        state.hovered.components.tags &&\n        state.hovered.components.tags.data.isHoldable &&\n        userinput.get(options.grabPath) &&\n        (this.el.is(\"frozen\") || !state.hovered.components.pinnable || !state.hovered.components.pinnable.data.pinned)\n      ) {\n        state.held = state.hovered;\n      }\n    }\n  },\n\n  tick2(sfx) {\n    if (!this.el.is(\"entered\")) return;\n\n    Object.assign(this.previousState.rightHand, this.state.rightHand);\n    Object.assign(this.previousState.rightRemote, this.state.rightRemote);\n    Object.assign(this.previousState.leftHand, this.state.leftHand);\n\n    this.rightHandTeleporter =\n      this.rightHandTeleporter || document.querySelector(\"#player-right-controller\").components[\"teleporter\"];\n    this.gazeTeleporter = this.gazeTeleporter || document.querySelector(\"#gaze-teleport\").components[\"teleporter\"];\n\n    if (this.options.leftHand.entity.object3D.visible) {\n      this.tickInteractor(this.options.leftHand, this.state.leftHand);\n    }\n    if (this.options.rightHand.entity.object3D.visible && !this.state.rightRemote.held) {\n      this.tickInteractor(this.options.rightHand, this.state.rightHand);\n    }\n\n    if (!this.state.rightHand.held && !this.state.rightHand.hovered) {\n      this.tickInteractor(this.options.rightRemote, this.state.rightRemote);\n    }\n\n    const rightHandInteracting = this.state.rightHand.hovered || this.state.rightHand.held;\n    const rightHandTeleporting = this.rightHandTeleporter.isTeleporting || this.gazeTeleporter.isTeleporting;\n    const rightRemotePenIntersectingInVR =\n      this.el.sceneEl.is(\"vr-mode\") &&\n      this.state.rightRemote.held &&\n      this.state.rightRemote.held.components &&\n      this.state.rightRemote.held.components.tags &&\n      this.state.rightRemote.held.components.tags.data.isPen &&\n      this.state.rightRemote.held.children[0].components.pen.intersection;\n\n    const enableRightRemote = !rightHandInteracting && !rightHandTeleporting && !rightRemotePenIntersectingInVR;\n\n    this.cursorController.components[\"cursor-controller\"].enabled = enableRightRemote;\n\n    if (!enableRightRemote) {\n      this.state.rightRemote.hovered = null;\n    }\n\n    if (\n      this.state.leftHand.held !== this.previousState.leftHand.held ||\n      this.state.rightHand.held !== this.previousState.rightHand.held ||\n      this.state.rightRemote.held !== this.previousState.rightRemote.held ||\n      (isUI(this.state.rightRemote.hovered) &&\n        this.state.rightRemote.hovered !== this.previousState.rightRemote.hovered)\n    ) {\n      sfx.playSoundOneShot(SOUND_HOVER_OR_GRAB);\n    }\n\n    if (this.el.systems.userinput.get(paths.actions.logInteractionState)) {\n      console.log(\n        \"Interaction System State\\nleftHand held\",\n        this.state.leftHand.held,\n        \"\\nleftHand hovered\",\n        this.state.leftHand.hovered,\n        \"\\nrightHand held\",\n        this.state.rightHand.held,\n        \"\\nrightHand hovered\",\n        this.state.rightHand.hovered,\n        \"\\nrightRemote held\",\n        this.state.rightRemote.held,\n        \"\\nrightRemote hovered\",\n        this.state.rightRemote.hovered\n      );\n    }\n  }\n});\n","import { sets } from \"../sets\";\nimport { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { findRemoteHoverTarget } from \"../../interactions\";\n\nconst calculateCursorPose = function(camera, coords, origin, direction, cursorPose) {\n  origin.setFromMatrixPosition(camera.matrixWorld);\n  direction\n    .set(coords[0], coords[1], 0.5)\n    .unproject(camera)\n    .sub(origin)\n    .normalize();\n  cursorPose.fromOriginAndDirection(origin, direction);\n  return cursorPose;\n};\n\nexport class AppAwareMouseDevice {\n  constructor() {\n    this.prevButtonLeft = false;\n    this.clickedOnAnything = false;\n    this.cursorPose = new Pose();\n    this.prevCursorPose = new Pose();\n    this.origin = new THREE.Vector3();\n    this.prevOrigin = new THREE.Vector3();\n    this.direction = new THREE.Vector3();\n    this.prevDirection = new THREE.Vector3();\n  }\n\n  write(frame) {\n    this.prevCursorPose.copy(this.cursorPose);\n    this.prevOrigin.copy(this.origin);\n    this.prevDirection.copy(this.prevDirection);\n\n    if (!this.cursorController) {\n      this.cursorController = document.querySelector(\"[cursor-controller]\").components[\"cursor-controller\"];\n    }\n\n    if (!this.camera) {\n      this.camera = document.querySelector(\"#player-camera\").components.camera.camera;\n    }\n\n    const buttonLeft = frame.get(paths.device.mouse.buttonLeft);\n    const buttonRight = frame.get(paths.device.mouse.buttonRight);\n    if (buttonLeft && !this.prevButtonLeft) {\n      const rawIntersections = [];\n      this.cursorController.raycaster.intersectObjects(\n        AFRAME.scenes[0].systems[\"hubs-systems\"].cursorTargettingSystem.targets,\n        true,\n        rawIntersections\n      );\n      const intersection = rawIntersections.find(x => x.object.el);\n      const remoteHoverTarget = intersection && findRemoteHoverTarget(intersection.object);\n      const userinput = AFRAME.scenes[0].systems.userinput;\n      this.clickedOnAnything =\n        (intersection &&\n          intersection.object.el.matches(\".pen, .pen *, .video, .video *, .interactable, .interactable *\") &&\n          !(\n            remoteHoverTarget &&\n            remoteHoverTarget.components.pinnable &&\n            remoteHoverTarget.components.pinnable.data.pinned &&\n            !AFRAME.scenes[0].is(\"frozen\")\n          )) ||\n        userinput.activeSets.includes(sets.cursorHoldingPen) ||\n        userinput.activeSets.includes(sets.cursorHoldingInteractable) ||\n        userinput.activeSets.includes(sets.cursorHoldingCamera);\n    }\n    this.prevButtonLeft = buttonLeft;\n\n    if (!buttonLeft) {\n      this.clickedOnAnything = false;\n    }\n\n    if ((!this.clickedOnAnything && buttonLeft) || buttonRight) {\n      const movementXY = frame.get(paths.device.mouse.movementXY);\n      if (movementXY) {\n        frame.setVector2(paths.device.smartMouse.cameraDelta, movementXY[0], movementXY[1]);\n      }\n    }\n\n    const coords = frame.get(paths.device.mouse.coords);\n    frame.setPose(\n      paths.device.smartMouse.cursorPose,\n      calculateCursorPose(this.camera, coords, this.origin, this.direction, this.cursorPose)\n    );\n  }\n}\n","export function touchIsAssigned(touch, assignments) {\n  return (\n    assignments.find(assignment => {\n      return assignment.touch.identifier === touch.identifier;\n    }) !== undefined\n  );\n}\n\nexport function jobIsAssigned(job, assignments) {\n  return (\n    assignments.find(assignment => {\n      return assignment.job === job;\n    }) !== undefined\n  );\n}\n\nexport function assign(touch, job, assignments) {\n  if (touchIsAssigned(touch, assignments) || jobIsAssigned(job, assignments)) {\n    console.error(\"cannot reassign touches or jobs. unassign first\");\n    return undefined;\n  }\n  const assignment = { job, touch };\n  assignments.push(assignment);\n  return assignment;\n}\n\nexport function unassign(touch, job, assignments) {\n  function match(assignment) {\n    return assignment.touch.identifier === touch.identifier && assignment.job === job;\n  }\n  assignments.splice(assignments.findIndex(match), 1);\n}\n\nexport function findByJob(job, assignments) {\n  return assignments.find(assignment => {\n    return assignment.job === job;\n  });\n}\n\nexport function findByTouch(touch, assignments) {\n  return assignments.find(assignment => {\n    return assignment.touch.identifier === touch.identifier;\n  });\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { touchIsAssigned, jobIsAssigned, assign, unassign, findByJob, findByTouch } from \"./touchscreen/assignments\";\nimport { findRemoteHoverTarget } from \"../../interactions\";\n\nconst MOVE_CURSOR_JOB = \"MOVE CURSOR\";\nconst MOVE_CAMERA_JOB = \"MOVE CAMERA\";\nconst FIRST_PINCHER_JOB = \"FIRST PINCHER\";\nconst SECOND_PINCHER_JOB = \"SECOND PINCHER\";\n\nconst TAP_PATHS = [\n  paths.device.touchscreen.tap1,\n  paths.device.touchscreen.tap2,\n  paths.device.touchscreen.tap3,\n  paths.device.touchscreen.tap4,\n  paths.device.touchscreen.tap5\n];\n\nfunction distance(x1, y1, x2, y2) {\n  const dx = x1 - x2;\n  const dy = y1 - y2;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nconst getPlayerCamera = (() => {\n  let playerCamera;\n\n  return function() {\n    if (!playerCamera) {\n      playerCamera = document.querySelector(\"#player-camera\").components.camera.camera;\n    }\n\n    return playerCamera;\n  };\n})();\n\nfunction shouldMoveCursor(touch, raycaster) {\n  const isCursorGrabbing = !!AFRAME.scenes[0].systems.interaction.state.rightRemote.held;\n  if (isCursorGrabbing) {\n    return true;\n  }\n  const rawIntersections = [];\n  raycaster.setFromCamera(\n    {\n      x: (touch.clientX / window.innerWidth) * 2 - 1,\n      y: -(touch.clientY / window.innerHeight) * 2 + 1\n    },\n    getPlayerCamera()\n  );\n  raycaster.intersectObjects(\n    AFRAME.scenes[0].systems[\"hubs-systems\"].cursorTargettingSystem.targets,\n    true,\n    rawIntersections\n  );\n  const intersection = rawIntersections.find(x => x.object.el);\n  const remoteHoverTarget = intersection && findRemoteHoverTarget(intersection.object);\n  return (\n    intersection &&\n    intersection.object.el.matches(\".interactable, .interactable *\") &&\n    !(\n      remoteHoverTarget &&\n      remoteHoverTarget.components.pinnable &&\n      remoteHoverTarget.components.pinnable.data.pinned &&\n      !AFRAME.scenes[0].is(\"frozen\")\n    )\n  );\n}\n\nexport class AppAwareTouchscreenDevice {\n  constructor() {\n    this.raycaster = new THREE.Raycaster(new THREE.Vector3(), new THREE.Vector3(), 0, 4);\n    this.assignments = [];\n    this.pinch = { initialDistance: 0, currentDistance: 0, delta: 0 };\n\n    // When touches appear, this timestamps and then watches for the high water mark of # of touches\n    this.pendingTap = { maxTouchCount: 0, startedAt: 0 };\n    this.tapIndexToWriteNextFrame = 0;\n\n    this.events = [];\n    [\"touchstart\", \"touchend\", \"touchmove\", \"touchcancel\"].map(x =>\n      document.querySelector(\"canvas\").addEventListener(x, this.events.push.bind(this.events))\n    );\n  }\n\n  end(touch) {\n    if (!touchIsAssigned(touch, this.assignments)) {\n      console.warn(\"touch does not have a job\", touch);\n    } else {\n      const assignment = findByTouch(touch, this.assignments);\n      switch (assignment.job) {\n        case MOVE_CURSOR_JOB:\n        case MOVE_CAMERA_JOB:\n          // If grab was being delayed, we should fire the initial grab and also delay the unassignment\n          // to ensure we write at least two frames with the grab down (since the action set will change)\n          // and otherwise we'd not see the falling xform.\n          if (assignment.framesUntilGrab >= 0) {\n            assignment.framesUntilUnassign = assignment.framesUntilGrab + 2;\n          } else {\n            unassign(assignment.touch, assignment.job, this.assignments);\n          }\n\n          break;\n        case FIRST_PINCHER_JOB:\n          unassign(assignment.touch, assignment.job, this.assignments);\n          this.pinch = { initialDistance: 0, currentDistance: 0, delta: 0 };\n\n          if (jobIsAssigned(SECOND_PINCHER_JOB, this.assignments)) {\n            const second = findByJob(SECOND_PINCHER_JOB, this.assignments);\n            unassign(second.touch, second.job, this.assignments);\n            if (jobIsAssigned(MOVE_CAMERA_JOB, this.assignments)) {\n              // reassign secondPincher to firstPincher\n              const first = assign(second.touch, FIRST_PINCHER_JOB, this.assignments);\n              first.clientX = second.clientX;\n              first.clientY = second.clientY;\n            } else {\n              // reassign secondPincher to moveCamera\n              const cameraMover = assign(second.touch, MOVE_CAMERA_JOB, this.assignments);\n              cameraMover.clientX = second.clientX;\n              cameraMover.clientY = second.clientY;\n              cameraMover.delta = [0, 0];\n            }\n          }\n          break;\n        case SECOND_PINCHER_JOB:\n          unassign(assignment.touch, assignment.job, this.assignments);\n          this.pinch = { initialDistance: 0, currentDistance: 0, delta: 0 };\n          if (jobIsAssigned(FIRST_PINCHER_JOB, this.assignments) && !jobIsAssigned(MOVE_CAMERA_JOB, this.assignments)) {\n            //reassign firstPincher to moveCamera\n            const first = findByJob(FIRST_PINCHER_JOB, this.assignments);\n            unassign(first.touch, first.job, this.assignments);\n            const cameraMover = assign(first.touch, MOVE_CAMERA_JOB, this.assignments);\n            cameraMover.clientX = first.clientX;\n            cameraMover.clientY = first.clientY;\n            cameraMover.delta = [0, 0];\n          }\n          break;\n      }\n    }\n\n    // Touches cleared, determine what to do with pending tap\n    if (this.assignments.length === 0) {\n      if (this.pendingTap.maxTouchCount > 0 && performance.now() - this.pendingTap.startedAt <= 125) {\n        this.tapIndexToWriteNextFrame = this.pendingTap.maxTouchCount;\n      }\n\n      this.pendingTap = { maxTouchCount: 0 };\n    }\n  }\n\n  move(touch) {\n    if (!touchIsAssigned(touch, this.assignments)) {\n      if (!touch.target.classList[0] || !touch.target.classList[0].startsWith(\"virtual-gamepad-controls\")) {\n        console.warn(\"touch does not have job\", touch);\n      }\n      return;\n    }\n\n    const assignment = findByTouch(touch, this.assignments);\n    switch (assignment.job) {\n      case MOVE_CURSOR_JOB:\n        assignment.cursorPose.fromCameraProjection(\n          getPlayerCamera(),\n          (touch.clientX / window.innerWidth) * 2 - 1,\n          -(touch.clientY / window.innerHeight) * 2 + 1\n        );\n        break;\n      case MOVE_CAMERA_JOB:\n        assignment.delta[0] += touch.clientX - assignment.clientX;\n        assignment.delta[1] += touch.clientY - assignment.clientY;\n        assignment.clientX = touch.clientX;\n        assignment.clientY = touch.clientY;\n        break;\n      case FIRST_PINCHER_JOB:\n      case SECOND_PINCHER_JOB:\n        assignment.clientX = touch.clientX;\n        assignment.clientY = touch.clientY;\n        if (jobIsAssigned(FIRST_PINCHER_JOB, this.assignments) && jobIsAssigned(SECOND_PINCHER_JOB, this.assignments)) {\n          const first = findByJob(FIRST_PINCHER_JOB, this.assignments);\n          const second = findByJob(SECOND_PINCHER_JOB, this.assignments);\n          const currentDistance = distance(first.clientX, first.clientY, second.clientX, second.clientY);\n          this.pinch.delta += currentDistance - this.pinch.currentDistance;\n          this.pinch.currentDistance = currentDistance;\n        }\n        break;\n    }\n  }\n\n  start(touch) {\n    if (touchIsAssigned(touch, this.assignments)) {\n      console.error(\"touch already has a job\");\n      return;\n    }\n\n    const isFirstTouch = this.assignments.length === 0;\n    const isSecondTouch = this.assignments.length === 1;\n    const isThirdTouch = this.assignments.length === 2;\n\n    const hasSecondPinch = !!findByJob(SECOND_PINCHER_JOB, this.assignments);\n\n    if (isFirstTouch || (isThirdTouch && hasSecondPinch)) {\n      let assignment;\n\n      // First touch or third touch and other two fingers were pinching\n      if (shouldMoveCursor(touch, this.raycaster)) {\n        assignment = assign(touch, MOVE_CURSOR_JOB, this.assignments);\n\n        // Grabbing objects is delayed by several frames:\n        // - We don't want the physics constraint to be applied too early, which results in crazy velocities\n        // - We don't want to mis-trigger grabs if the user is about to put down a second finger.\n        assignment.framesUntilGrab = 2;\n      } else {\n        assignment = assign(touch, MOVE_CAMERA_JOB, this.assignments);\n        assignment.delta = [0, 0];\n      }\n\n      assignment.clientX = touch.clientX;\n      assignment.clientY = touch.clientY;\n\n      // On touch down, we always move the cursor on the first frame, but the MOVE_CURSOR_JOB indicates\n      // the touch will then track the cursor (instead of the camera)\n      assignment.cursorPose = new Pose().fromCameraProjection(\n        getPlayerCamera(),\n        (touch.clientX / window.innerWidth) * 2 - 1,\n        -(touch.clientY / window.innerHeight) * 2 + 1\n      );\n    } else if (isSecondTouch || isThirdTouch) {\n      const cursorJob = findByJob(MOVE_CURSOR_JOB, this.assignments);\n\n      if (isSecondTouch && cursorJob && cursorJob.framesUntilGrab < 0) {\n        // The second touch is happening after grab activated, so assign this touch to first pinch.\n        const first = assign(touch, FIRST_PINCHER_JOB, this.assignments);\n        first.clientX = touch.clientX;\n        first.clientY = touch.clientY;\n      } else {\n        // Second or third touch, but third touch only if not pinching\n        if (isSecondTouch) {\n          // The second touch is happening before the grab activated, so re-assign the first\n          // to the first pinch, and effectively cancel the grab.\n          const previousAssignment = this.assignments[0];\n          unassign(previousAssignment.touch, previousAssignment.job, this.assignments);\n          const first = assign(previousAssignment.touch, FIRST_PINCHER_JOB, this.assignments);\n          first.clientX = previousAssignment.clientX;\n          first.clientY = previousAssignment.clientY;\n        }\n\n        const first = findByJob(FIRST_PINCHER_JOB, this.assignments);\n\n        if (!first) {\n          const first = assign(touch, FIRST_PINCHER_JOB, this.assignments);\n          first.clientX = touch.clientX;\n          first.clientY = touch.clientY;\n          return;\n        } else {\n          const second = assign(touch, SECOND_PINCHER_JOB, this.assignments);\n          second.clientX = touch.clientX;\n          second.clientY = touch.clientY;\n\n          const initialDistance = distance(first.clientX, first.clientY, second.clientX, second.clientY);\n\n          this.pinch = {\n            initialDistance,\n            currentDistance: initialDistance,\n            delta: 0\n          };\n        }\n      }\n    }\n\n    if (this.pendingTap.maxTouchCount === 0 && this.assignments.length > 0) {\n      this.pendingTap.startedAt = performance.now();\n    }\n\n    this.pendingTap.maxTouchCount = Math.max(this.pendingTap.maxTouchCount, this.assignments.length);\n  }\n\n  process(event) {\n    switch (event.type) {\n      case \"touchstart\":\n        for (const touch of event.changedTouches) {\n          this.start(touch);\n        }\n        break;\n      case \"touchmove\":\n        for (const touch of event.touches) {\n          this.move(touch);\n        }\n        break;\n      case \"touchend\":\n      case \"touchcancel\":\n        for (const touch of event.changedTouches) {\n          this.end(touch);\n        }\n        break;\n    }\n  }\n\n  write(frame) {\n    if (this.pinch) {\n      this.pinch.delta = 0;\n    }\n    const cameraMover =\n      jobIsAssigned(MOVE_CAMERA_JOB, this.assignments) && findByJob(MOVE_CAMERA_JOB, this.assignments);\n    if (cameraMover) {\n      cameraMover.delta[0] = 0;\n      cameraMover.delta[1] = 0;\n    }\n\n    this.events.forEach(event => {\n      this.process(event);\n    });\n    while (this.events.length) {\n      this.events.pop();\n    }\n\n    const path = paths.device.touchscreen;\n    const hasCursorJob = jobIsAssigned(MOVE_CURSOR_JOB, this.assignments);\n    const hasCameraJob = jobIsAssigned(MOVE_CAMERA_JOB, this.assignments);\n\n    if (hasCursorJob || hasCameraJob) {\n      frame.setValueType(path.isTouching, true);\n\n      const assignment = findByJob(MOVE_CURSOR_JOB, this.assignments) || findByJob(MOVE_CAMERA_JOB, this.assignments);\n      frame.setPose(path.cursorPose, assignment.cursorPose);\n    }\n\n    frame.setValueType(path.isTouchingGrabbable, false);\n\n    if (hasCursorJob) {\n      const assignment = findByJob(MOVE_CURSOR_JOB, this.assignments);\n      frame.setValueType(path.isTouchingGrabbable, assignment.framesUntilGrab <= 0);\n      assignment.framesUntilGrab--;\n\n      if (assignment.framesUntilUnassign >= 0) {\n        if (assignment.framesUntilUnassign === 0) {\n          unassign(assignment.touch, assignment.job, this.assignments);\n        }\n\n        assignment.framesUntilUnassign--;\n      }\n    }\n\n    if (hasCameraJob) {\n      const delta = findByJob(MOVE_CAMERA_JOB, this.assignments).delta;\n      frame.setVector2(path.touchCameraDelta, delta[0], delta[1]);\n    }\n\n    frame.setValueType(path.pinch.delta, this.pinch.delta);\n    frame.setValueType(path.pinch.initialDistance, this.pinch.initialDistance);\n    frame.setValueType(path.pinch.currentDistance, this.pinch.currentDistance);\n\n    if (this.tapIndexToWriteNextFrame && this.tapIndexToWriteNextFrame < TAP_PATHS.length) {\n      // write to tap-X path if we had an X-fingered tap\n      frame.setValueType(TAP_PATHS[this.tapIndexToWriteNextFrame - 1], true);\n    }\n\n    this.tapIndexToWriteNextFrame = 0;\n  }\n}\n","import { Pose } from \"../pose\";\nimport { angleTo4Direction } from \"../../../utils/dpad\";\n\nexport const xforms = {\n  noop: function() {},\n  copy: function(frame, src, dest) {\n    frame.setValueType(dest.value, frame.get(src.value));\n  },\n  scale: function(scalar) {\n    return function scale(frame, src, dest) {\n      if (frame.get(src.value) !== undefined) {\n        frame.setValueType(dest.value, frame.get(src.value) * scalar);\n      }\n    };\n  },\n  scaleExp: function(scalar, exp = 1) {\n    return function scale(frame, src, dest) {\n      if (frame.get(src.value) !== undefined) {\n        if (exp === 1) {\n          frame.setValueType(dest.value, frame.get(src.value) * scalar);\n        } else {\n          frame.setValueType(dest.value, Math.pow(frame.get(src.value), exp) * scalar);\n        }\n      }\n    };\n  },\n  deadzone: function(deadzoneSize) {\n    return function deadzone(frame, src, dest) {\n      frame.setValueType(dest.value, Math.abs(frame.get(src.value)) < deadzoneSize ? 0 : frame.get(src.value));\n    };\n  },\n  split_vec2: function(frame, src, dest) {\n    const value = frame.get(src.value);\n    if (value !== undefined) {\n      frame.setValueType(dest.x, value[0]);\n      frame.setValueType(dest.y, value[1]);\n    }\n  },\n  compose_vec2: function(frame, src, dest) {\n    const x = frame.get(src.x);\n    const y = frame.get(src.y);\n    if (x !== undefined && y !== undefined) {\n      frame.setVector2(dest.value, x, y);\n    }\n  },\n  negate: function(frame, src, dest) {\n    frame.setValueType(dest.value, -frame.get(src.value));\n  },\n  copyIfFalse: function(frame, src, dest) {\n    frame.setValueType(dest.value, frame.get(src.bool) ? undefined : frame.get(src.value));\n  },\n  copyIfTrue: function(frame, src, dest) {\n    frame.setValueType(dest.value, frame.get(src.bool) ? frame.get(src.value) : undefined);\n  },\n  zeroIfDefined: function(frame, src, dest) {\n    frame.setValueType(dest.value, frame.get(src.bool) !== undefined ? 0 : frame.get(src.value));\n  },\n  true: function(frame, src, dest) {\n    frame.setValueType(dest.value, true);\n  },\n  rising: function rising(frame, src, dest, prevState) {\n    frame.setValueType(dest.value, frame.get(src.value) && prevState === false);\n    return !!frame.get(src.value);\n  },\n  risingWithFrameDelay: function(n) {\n    return function risingWithFrameDelay(frame, src, dest, state = { values: new Array(n) }) {\n      frame.setValueType(dest.value, state.values.shift());\n      state.values.push(frame.get(src.value) && !state.prev);\n      state.prev = frame.get(src.value);\n      return state;\n    };\n  },\n  falling: function falling(frame, src, dest, prevState) {\n    frame.setValueType(dest.value, !frame.get(src.value) && prevState);\n    return !!frame.get(src.value);\n  },\n  vec2Zero: function(frame, _, dest) {\n    frame.setVector2(dest.value, 0, 0);\n  },\n  poseFromCameraProjection: function() {\n    let camera;\n    const pose = new Pose();\n    return function poseFromCameraProjection(frame, src, dest) {\n      if (!camera) {\n        camera = document.querySelector(\"#player-camera\").components.camera.camera;\n      }\n      const value = frame.get(src.value);\n      frame.setPose(dest.value, pose.fromCameraProjection(camera, value[0], value[1]));\n    };\n  },\n  vec2dpad: function(deadzoneRadius, invertX = false, invertY = false) {\n    const deadzoneRadiusSquared = deadzoneRadius * deadzoneRadius;\n\n    return function vec2dpad(frame, src, dest) {\n      if (!frame.get(src.value)) return;\n      const [x, y] = frame.get(src.value);\n      const inCenter = x * x + y * y < deadzoneRadiusSquared;\n      const direction = inCenter ? \"center\" : angleTo4Direction(Math.atan2(invertX ? -x : x, invertY ? -y : y));\n      if (!dest[direction]) return;\n      frame.setValueType(dest[direction], true);\n    };\n  },\n  always: function(constValue) {\n    return function always(frame, _, dest) {\n      frame.setValueType(dest.value, constValue);\n    };\n  },\n  wasd_to_vec2: function(frame, { w, a, s, d }, { vec2 }) {\n    let x = 0;\n    let y = 0;\n    if (frame.get(a)) x -= 1;\n    if (frame.get(d)) x += 1;\n    if (frame.get(w)) y += 1;\n    if (frame.get(s)) y -= 1;\n    frame.setVector2(vec2, x, y);\n  },\n  add_vec2: function(frame, src, dest) {\n    const first = frame.get(src.first);\n    const second = frame.get(src.second);\n    if (first && second) {\n      frame.setVector2(dest.value, first[0] + second[0], first[1] + second[1]);\n    } else if (second) {\n      frame.setVector2(dest.value, second[0], second[1]);\n    } else if (first) {\n      frame.setVector2(dest.value, first[0], first[1]);\n    }\n  },\n  max_vec2: function(frame, src, dest) {\n    const first = frame.get(src.first);\n    const second = frame.get(src.second);\n    if (first && second) {\n      const max =\n        first[0] * first[0] + first[1] * first[1] > second[0] * second[0] + second[1] * second[1] ? first : second;\n      frame.setVector2(dest.value, max[0], max[1]);\n    } else if (second) {\n      frame.setVector2(dest.value, second[0], second[1]);\n    } else if (first) {\n      frame.setVector2(dest.value, first[0], first[1]);\n    }\n  },\n  normalize_vec2: function(frame, src, dest) {\n    const vec2 = frame.get(src.value);\n    if (vec2) {\n      if (vec2[0] === 0 && vec2[0] === 0) {\n        frame.setVector2(dest.value, vec2[0], vec2[1]);\n      } else {\n        const l = Math.sqrt(vec2[0] * vec2[0] + vec2[1] * vec2[1]);\n        frame.setVector2(dest.value, vec2[0] / l, vec2[1] / l);\n      }\n    }\n  },\n  all: function(frame, src, dest) {\n    for (let i = 0, l = src.length; i < l; i++) {\n      const path = src[i];\n      if (!frame.get(path)) {\n        frame.setValueType(dest.value, false);\n        return;\n      }\n    }\n    frame.setValueType(dest.value, true);\n  },\n  any: function(frame, src, dest) {\n    for (let i = 0, l = src.length; i < l; i++) {\n      const path = src[i];\n      if (frame.get(path)) {\n        frame.setValueType(dest.value, true);\n        return;\n      }\n    }\n    frame.setValueType(dest.value, false);\n  },\n  touch_axis_scroll(scale = 1, snap_to) {\n    return function touch_axis_scroll(frame, src, dest, state = { value: 0, touching: false }) {\n      if (snap_to === undefined || Math.abs(frame.get(src.value) - state.value) >= snap_to) {\n        frame.setValueType(\n          dest.value,\n          state.touching && frame.get(src.touching) ? scale * (frame.get(src.value) - state.value) : 0\n        );\n      }\n\n      state.value = frame.get(src.value);\n      state.touching = frame.get(src.touching);\n\n      return state;\n    };\n  }\n};\n","export function angleTo4Direction(angle) {\n  angle = (angle * THREE.Math.RAD2DEG + 180 + 45) % 360;\n  if (angle > 0 && angle < 90) {\n    return \"north\";\n  } else if (angle >= 90 && angle < 180) {\n    return \"west\";\n  } else if (angle >= 180 && angle < 270) {\n    return \"south\";\n  } else {\n    return \"east\";\n  }\n}\n\nexport function angleTo8Direction(angle) {\n  angle = (angle * THREE.Math.RAD2DEG + 180 + 45) % 360;\n  let direction = \"\";\n  if ((angle >= 0 && angle < 120) || angle >= 330) {\n    direction += \"north\";\n  }\n  if (angle >= 150 && angle < 300) {\n    direction += \"south\";\n  }\n  if (angle >= 60 && angle < 210) {\n    direction += \"west\";\n  }\n  if ((angle >= 240 && angle < 360) || angle < 30) {\n    direction += \"east\";\n  }\n  return direction;\n}\n","export const addSetsToBindings = mapping => {\n  for (const setName in mapping) {\n    for (const binding of mapping[setName]) {\n      if (!binding.sets) {\n        binding.sets = [];\n      }\n      binding.sets.push(setName);\n    }\n  }\n  return mapping;\n};\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\n// import { Pose } from \"../pose\";\n\nconst wasd_vec2 = \"/var/mouse-and-keyboard/wasd_vec2\";\nconst keyboardCharacterAcceleration = \"/var/mouse-and-keyboard/keyboardCharacterAcceleration\";\nconst arrows_vec2 = \"/var/mouse-and-keyboard/arrows_vec2\";\nconst togglePenWithRMB = \"/vars/mouse-and-keyboard/drop_pen_with_RMB\";\nconst togglePenWithEsc = \"/vars/mouse-and-keyboard/drop_pen_with_esc\";\nconst togglePenWithP = \"/vars/mouse-and-keyboard/drop_pen_with_p\";\nconst togglePenWithHud = \"/vars/mouse-and-keyboard/drop_pen_with_hud\";\nconst togglePen = \"/vars/mouse-and-keyboard/togglePen\";\n\nconst k = name => {\n  return `/keyboard-mouse-user/keyboard-var/${name}`;\n};\n\nexport const keyboardMouseUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {},\n      dest: { value: paths.actions.cursor.hideLine },\n      xform: xforms.always(true)\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: { value: keyboardCharacterAcceleration },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.normalize_vec2\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: paths.actions.boost },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.camera.exitMirror },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Tab\") },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: paths.actions.thaw },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"p\") },\n      dest: { value: togglePenWithP },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.hud.penButton },\n      dest: { value: togglePenWithHud },\n      xform: xforms.rising\n    },\n    {\n      src: [togglePenWithHud, togglePenWithP],\n      dest: { value: togglePen },\n      xform: xforms.any\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising,\n      priority: 100\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"c\") },\n      dest: { value: paths.actions.toggleCamera },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"x\") },\n      dest: { value: paths.actions.takeSnapshot },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.smartMouse.cursorPose },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.smartMouse.cameraDelta },\n      dest: { x: \"/var/smartMouseCamDeltaX\", y: \"/var/smartMouseCamDeltaY\" },\n      xform: xforms.split_vec2\n    },\n    {\n      src: { value: \"/var/smartMouseCamDeltaX\" },\n      dest: { value: \"/var/smartMouseCamDeltaXScaled\" },\n      xform: xforms.scale(-0.2)\n    },\n    {\n      src: { value: \"/var/smartMouseCamDeltaY\" },\n      dest: { value: \"/var/smartMouseCamDeltaYScaled\" },\n      xform: xforms.scale(-0.1)\n    },\n    {\n      src: { x: \"/var/smartMouseCamDeltaXScaled\", y: \"/var/smartMouseCamDeltaYScaled\" },\n      dest: { value: paths.actions.cameraDelta },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: paths.actions.cameraDelta },\n      dest: { value: paths.actions.lobbyCameraDelta },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"/\")\n      },\n      dest: {\n        value: paths.actions.focusChatCommand\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.mediaExit },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/shift+1\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/shift+2\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/shift+3\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/shift+4\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/shift+5\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/shift+6\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/shift+7\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/shift+8\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"k\")\n      },\n      dest: {\n        value: paths.actions.logInteractionState\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.mouse.buttonRight\n      },\n      dest: {\n        value: paths.actions.startGazeTeleport\n      },\n      xform: xforms.rising,\n      priority: 100\n    },\n    {\n      src: {\n        value: paths.device.mouse.buttonRight\n      },\n      dest: {\n        value: paths.actions.stopGazeTeleport\n      },\n      xform: xforms.falling,\n      priority: 100\n    }\n\n    // Helpful bindings for debugging hands in 2D\n    // {\n    //   src: {},\n    //   dest: { value: paths.actions.rightHand.matrix },\n    //   xform: xforms.always(\n    //     new THREE.Matrix4().compose(\n    //       new THREE.Vector3(0.2, 1.3, -0.8),\n    //       new THREE.Quaternion(0, 0, 0, 0),\n    //       new THREE.Vector3(1, 1, 1)\n    //     )\n    //   )\n    // },\n    // {\n    //   src: {},\n    //   dest: { value: paths.actions.leftHand.matrix },\n    //   xform: xforms.always(\n    //     new THREE.Matrix4().compose(\n    //       new THREE.Vector3(-0.2, 1.4, -0.8),\n    //       new THREE.Quaternion(0, 0, 0, 0),\n    //       new THREE.Vector3(1, 1, 1)\n    //     )\n    //   )\n    // }\n  ],\n\n  [sets.cursorHoldingPen]: [\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"q\")\n      },\n      dest: { value: \"/var/shift+q\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+q\" },\n      dest: { value: paths.actions.cursor.penPrevColor },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"e\")\n      },\n      dest: { value: \"/var/shift+e\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+e\" },\n      dest: { value: paths.actions.cursor.penNextColor },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"q\")\n      },\n      dest: { value: \"/var/notshift+q\" },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: { value: \"/var/notshift+q\" },\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"e\")\n      },\n      dest: { value: \"/var/notshift+e\" },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: { value: \"/var/notshift+e\" },\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: k(\"wheelWithShift\")\n      },\n      dest: { value: \"/var/cursorScalePenTipWheel\" },\n      xform: xforms.copy,\n      priority: 200\n    },\n    {\n      src: { value: \"/var/cursorScalePenTipWheel\" },\n      dest: { value: paths.actions.cursor.scalePenTip },\n      xform: xforms.scale(0.03)\n    },\n    {\n      src: { value: paths.device.mouse.buttonRight },\n      dest: { value: togglePenWithRMB },\n      xform: xforms.falling,\n      priority: 200\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: togglePenWithEsc },\n      xform: xforms.rising\n    },\n    {\n      src: [togglePenWithRMB, togglePenWithEsc, togglePenWithP, togglePenWithHud],\n      dest: { value: togglePen },\n      xform: xforms.any\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"z\")\n      },\n      dest: { value: paths.actions.cursor.undoDrawing },\n      priority: 1001,\n      xform: xforms.rising\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.pen.remove },\n      xform: xforms.rising,\n      priority: 200\n    }\n  ],\n\n  [sets.cursorHoldingCamera]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.falling,\n      priority: 2\n    }\n  ],\n\n  [sets.cursorHoldingInteractable]: [\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.mouse.wheel\n      },\n      dest: {\n        value: k(\"wheelWithShift\")\n      },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.mouse.wheel\n      },\n      dest: {\n        value: k(\"wheelWithoutShift\")\n      },\n      xform: xforms.copyIfFalse\n    },\n    {\n      src: {\n        value: k(\"wheelWithoutShift\")\n      },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: k(\"wheelWithShift\")\n      },\n      dest: { value: paths.actions.cursor.scaleGrabbedGrabbable },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.falling,\n      priority: 2\n    }\n  ],\n  [sets.cursorHoldingUI]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: paths.actions.transformModifier },\n      xform: xforms.copy\n    }\n  ],\n  [sets.cursorHoveringOnInteractable]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n  [sets.cursorHoveringOnVideo]: [\n    {\n      src: { value: paths.device.mouse.wheel },\n      dest: { value: paths.actions.cursor.mediaVolumeMod },\n      xform: xforms.scale(-0.3)\n    }\n  ],\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ],\n\n  [sets.cursorHoveringOnUI]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst zero = \"/vars/touchscreen/zero\";\nconst forward = \"/vars/touchscreen/pinchDeltaForward\";\nconst touchCamDelta = \"vars/touchscreen/touchCameraDelta\";\nconst touchCamDeltaX = \"vars/touchscreen/touchCameraDelta/x\";\nconst touchCamDeltaY = \"vars/touchscreen/touchCameraDelta/y\";\nconst touchCamDeltaXScaled = \"vars/touchscreen/touchCameraDelta/x/scaled\";\nconst touchCamDeltaYScaled = \"vars/touchscreen/touchCameraDelta/y/scaled\";\nconst gyroCamDelta = \"vars/gyro/gyroCameraDelta\";\nconst gyroCamDeltaXScaled = \"vars/gyro/gyroCameraDelta/x/scaled\";\nconst gyroCamDeltaYScaled = \"vars/gyro/gyroCameraDelta/y/scaled\";\nconst togglePen = \"/vars/touchscreen/togglePen\";\n\nexport const touchscreenUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {},\n      dest: { value: paths.actions.cursor.hideLine },\n      xform: xforms.always(true)\n    },\n    {\n      src: { value: paths.device.touchscreen.pinch.delta },\n      dest: { value: forward },\n      xform: xforms.scale(0.25)\n    },\n    {\n      src: { value: paths.device.touchscreen.tap2 },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.copy\n    },\n    {\n      src: {},\n      dest: { value: zero },\n      xform: xforms.always(0)\n    },\n    {\n      src: { x: zero, y: forward },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: paths.device.touchscreen.cursorPose },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.touchscreen.touchCameraDelta },\n      dest: { x: touchCamDeltaX, y: touchCamDeltaY },\n      xform: xforms.split_vec2\n    },\n    {\n      src: { value: touchCamDeltaX },\n      dest: { value: touchCamDeltaXScaled },\n      xform: xforms.scale(0.18)\n    },\n    {\n      src: { value: touchCamDeltaY },\n      dest: { value: touchCamDeltaYScaled },\n      xform: xforms.scale(0.35)\n    },\n    {\n      src: { x: touchCamDeltaXScaled, y: touchCamDeltaYScaled },\n      dest: { value: touchCamDelta },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: paths.device.gyro.averageDeltaX },\n      dest: { value: gyroCamDeltaXScaled },\n      xform: xforms.scale(1.0)\n    },\n    {\n      src: { value: paths.device.gyro.averageDeltaY },\n      dest: { value: gyroCamDeltaYScaled },\n      xform: xforms.scale(1.0)\n    },\n    {\n      src: { x: gyroCamDeltaYScaled, y: gyroCamDeltaXScaled },\n      dest: { value: gyroCamDelta },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        first: touchCamDelta,\n        second: gyroCamDelta\n      },\n      dest: { value: paths.actions.cameraDelta },\n      xform: xforms.add_vec2\n    },\n    {\n      src: { value: touchCamDelta },\n      dest: { value: paths.actions.lobbyCameraDelta },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.hud.penButton },\n      dest: { value: togglePen },\n      xform: xforms.rising\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n  [sets.cursorHoldingInteractable]: [\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.falling,\n      priority: 1\n    }\n  ],\n\n  [sets.cursorHoveringOnPen]: [],\n  [sets.cursorHoldingPen]: [\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.startDrawing },\n      xform: xforms.risingWithFrameDelay(5),\n      priority: 2\n    },\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.stopDrawing },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.pen.remove },\n      xform: xforms.rising,\n      priority: 3\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nexport const keyboardDebuggingBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst name = \"/touch/var/\";\n\nconst leftButton = paths.device.leftOculusTouch.button;\nconst leftAxis = paths.device.leftOculusTouch.axis;\nconst leftPose = paths.device.leftOculusTouch.pose;\nconst rightButton = paths.device.rightOculusTouch.button;\nconst rightAxis = paths.device.rightOculusTouch.axis;\nconst rightPose = paths.device.rightOculusTouch.pose;\n\nconst leftJoyXDeadzoned = `${name}left/joy/x/deadzoned`;\nconst leftJoyYDeadzoned = `${name}left/joy/y/deadzoned`;\nconst scaledLeftJoyX = `${name}left/scaledJoyX`;\nconst scaledLeftJoyY = `${name}left/scaledJoyY`;\nconst cursorDrop2 = `${name}right/cursorDrop2`;\nconst cursorDrop1 = `${name}right/cursorDrop1`;\nconst rightHandDrop2 = `${name}right/rightHandDrop2`;\nconst rightGripRisingGrab = `${name}right/grip/RisingGrab`;\nconst rightTriggerRisingGrab = `${name}right/trigger/RisingGrab`;\nconst leftGripRisingGrab = `${name}left/grip/RisingGrab`;\nconst leftTriggerRisingGrab = `${name}left/trigger/RisingGrab`;\nconst rightDpadNorth = `${name}rightDpad/north`;\nconst rightDpadSouth = `${name}rightDpad/south`;\nconst rightDpadEast = `${name}rightDpad/east`;\nconst rightDpadWest = `${name}rightDpad/west`;\nconst rightDpadCenter = `${name}rightDpad/center`;\nconst rightJoy = `${name}right/joy`;\nconst rightJoyY1 = `${name}right/joyY1`;\nconst rightJoyY2 = `${name}right/joyY2`;\nconst rightJoyYDeadzoned = `${name}right/joy/y/deadzoned`;\nconst leftDpadNorth = `${name}leftDpad/north`;\nconst leftDpadSouth = `${name}leftDpad/south`;\nconst leftDpadEast = `${name}leftDpad/east`;\nconst leftDpadWest = `${name}leftDpad/west`;\nconst leftDpadCenter = `${name}leftDpad/center`;\nconst leftJoy = `${name}left/joy`;\nconst oculusTouchCharacterAcceleration = `${name}characterAcceleration`;\nconst keyboardCharacterAcceleration = \"/var/keyboard/characterAcceleration\";\nconst characterAcceleration = \"/var/oculus-touch/nonNormalizedCharacterAcceleration\";\nconst wasd_vec2 = \"/var/keyboard/wasd_vec2\";\nconst arrows_vec2 = \"/var/keyboard/arrows_vec2\";\nconst keyboardBoost = \"/var/keyboard-oculus/boost\";\nconst rightBoost = \"/var/right-oculus/boost\";\nconst leftBoost = \"/var/left-oculus/boost\";\nconst rightTouchSnapRight = `${name}/right/snap-right`;\nconst rightTouchSnapLeft = `${name}/right/snap-left`;\nconst keyboardSnapRight = `${name}/keyboard/snap-right`;\nconst keyboardSnapLeft = `${name}/keyboard/snap-left`;\n\nconst lowerButtons = `${name}buttons/lower`;\n\nconst ensureFrozenViaButtons = `${name}buttons/ensureFrozen`;\nconst ensureFrozenViaKeyboard = `${name}keyboard/ensureFrozen`;\n\nconst thawViaButtons = `${name}buttons/thaw`;\nconst thawViaKeyboard = `${name}keyboard/thaw`;\n\nconst v = s => {\n  return \"/oculus-touch-user-vars/\" + s;\n};\nconst leftGripPressed1 = v(\"leftGripPressed1\");\nconst leftGripPressed2 = v(\"leftGripPressed2\");\nconst rightGripPressed1 = v(\"rightGripPressed1\");\nconst rightGripPressed2 = v(\"rightGripPressed2\");\nconst leftTriggerPressed1 = v(\"leftTriggerPressed1\");\nconst leftTriggerPressed2 = v(\"leftTriggerPressed2\");\nconst rightTriggerPressed1 = v(\"rightTriggerPressed1\");\nconst rightTriggerPressed2 = v(\"rightTriggerPressed2\");\n\nexport const oculusTouchUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: paths.device.leftOculusTouch.matrix\n      },\n      dest: {\n        value: paths.actions.leftHand.matrix\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: paths.device.rightOculusTouch.matrix\n      },\n      dest: {\n        value: paths.actions.rightHand.matrix\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [ensureFrozenViaButtons, ensureFrozenViaKeyboard],\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.any\n    },\n    {\n      src: [thawViaButtons, thawViaKeyboard],\n      dest: { value: paths.actions.thaw },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: leftButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftGripPressed1\n      },\n      dest: {\n        value: paths.actions.leftHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [leftButton(\"x\").touched, leftButton(\"y\").touched, leftButton(\"thumbStick\").touched],\n      dest: {\n        value: paths.actions.leftHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: { value: leftButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftTriggerPressed1 },\n      dest: {\n        value: paths.actions.leftHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightGripPressed1\n      },\n      dest: {\n        value: paths.actions.rightHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [rightButton(\"a\").touched, rightButton(\"b\").touched, rightButton(\"thumbStick\").touched],\n      dest: {\n        value: paths.actions.rightHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: { value: rightButton(\"trigger\").pressed },\n      dest: {\n        value: rightTriggerPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightButton(\"trigger\").pressed },\n      dest: {\n        value: rightTriggerPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightTriggerPressed1 },\n      dest: {\n        value: paths.actions.rightHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: leftAxis(\"joyX\"),\n        y: leftAxis(\"joyY\")\n      },\n      dest: {\n        value: leftJoy\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: leftJoy\n      },\n      dest: {\n        north: leftDpadNorth,\n        south: leftDpadSouth,\n        east: leftDpadEast,\n        west: leftDpadWest,\n        center: leftDpadCenter\n      },\n      xform: xforms.vec2dpad(0.2, false, true)\n    },\n    {\n      src: {\n        value: rightAxis(\"joyY\")\n      },\n      dest: { value: rightJoyY1 },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightAxis(\"joyY\")\n      },\n      dest: { value: rightJoyY2 },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: rightAxis(\"joyX\"),\n        y: rightJoyY1\n      },\n      dest: {\n        value: rightJoy\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: rightJoy\n      },\n      dest: {\n        north: rightDpadNorth,\n        south: rightDpadSouth,\n        east: rightDpadEast,\n        west: rightDpadWest,\n        center: rightDpadCenter\n      },\n      xform: xforms.vec2dpad(0.2, false, true)\n    },\n    {\n      src: {\n        value: rightDpadEast\n      },\n      dest: {\n        value: rightTouchSnapRight\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: keyboardSnapRight },\n      xform: xforms.rising\n    },\n    {\n      src: [rightTouchSnapRight, keyboardSnapRight],\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.any\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Tab\") },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: ensureFrozenViaKeyboard },\n      xform: xforms.copy\n    },\n    {\n      src: [leftButton(\"x\").pressed, rightButton(\"a\").pressed],\n      dest: { value: lowerButtons },\n      xform: xforms.any\n    },\n    {\n      src: { value: lowerButtons },\n      dest: { value: ensureFrozenViaButtons },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lowerButtons },\n      dest: { value: thawViaButtons },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: thawViaKeyboard },\n      xform: xforms.falling\n    },\n    {\n      src: {\n        value: rightDpadWest\n      },\n      dest: {\n        value: rightTouchSnapLeft\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: keyboardSnapLeft },\n      xform: xforms.rising\n    },\n    {\n      src: [rightTouchSnapLeft, keyboardSnapLeft],\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: leftAxis(\"joyY\")\n      },\n      dest: {\n        value: leftJoyYDeadzoned\n      },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: {\n        value: leftJoyYDeadzoned\n      },\n      dest: {\n        value: scaledLeftJoyY\n      },\n      xform: xforms.scale(-1.5) // horizontal character speed modifier\n    },\n    {\n      src: {\n        value: leftAxis(\"joyX\")\n      },\n      dest: {\n        value: leftJoyXDeadzoned\n      },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: {\n        value: leftJoyXDeadzoned\n      },\n      dest: {\n        value: scaledLeftJoyX\n      },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: {\n        x: scaledLeftJoyX,\n        y: scaledLeftJoyY\n      },\n      dest: { value: oculusTouchCharacterAcceleration },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: {\n        first: oculusTouchCharacterAcceleration,\n        second: keyboardCharacterAcceleration\n      },\n      dest: {\n        value: characterAcceleration\n      },\n      xform: xforms.max_vec2\n    },\n    {\n      src: {\n        value: characterAcceleration,\n        override: \"/device/overrides/foo\"\n      },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: keyboardBoost },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftButton(\"y\").pressed\n      },\n      dest: {\n        value: leftBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightButton(\"b\").pressed\n      },\n      dest: {\n        value: rightBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [keyboardBoost, leftBoost, rightBoost],\n      dest: { value: paths.actions.boost },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"/\")\n      },\n      dest: {\n        value: paths.actions.focusChatCommand\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.mediaExit },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"p\") },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"c\") },\n      dest: { value: paths.actions.toggleCamera },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"x\") },\n      dest: { value: paths.actions.takeSnapshot },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/shift+1\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/shift+2\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/shift+3\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/shift+4\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/shift+5\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/shift+6\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/shift+7\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/shift+8\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"k\")\n      },\n      dest: {\n        value: paths.actions.logInteractionState\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rightPose },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightPose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftPose },\n      dest: { value: paths.actions.leftHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    }\n  ],\n\n  [sets.leftHandHoveringOnNothing]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.cursorHoveringOnUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.cursorHoveringOnVideo]: [\n    {\n      src: { value: rightAxis(\"joyY\") },\n      dest: { value: paths.actions.cursor.mediaVolumeMod },\n      xform: xforms.scale(-0.01)\n    }\n  ],\n\n  [sets.cursorHoveringOnNothing]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.leftHandHoveringOnInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: leftTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [leftGripRisingGrab],\n      dest: { value: paths.actions.leftHand.grab },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n\n  [sets.leftHandHoldingInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.falling\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaButtons },\n      priority: 1,\n      xform: xforms.always(false)\n    }\n  ],\n\n  [sets.leftHandHoveringOnPen]: [],\n  [sets.leftHandHoldingPen]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: leftDpadEast,\n        override: \"/device/overrides/foo\"\n      },\n      dest: {\n        value: paths.actions.leftHand.penNextColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: leftDpadWest,\n        override: \"/device/overrides/foo\"\n      },\n      dest: {\n        value: paths.actions.leftHand.penPrevColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: leftJoyYDeadzoned },\n      dest: { value: paths.actions.leftHand.scalePenTip },\n      xform: xforms.scaleExp(-0.005, 5),\n      priority: 1\n    },\n    {\n      src: { value: leftButton(\"y\").pressed },\n      dest: { value: paths.actions.leftHand.switchDrawMode },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: leftButton(\"x\").pressed },\n      dest: { value: paths.actions.leftHand.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.cursorHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rightGripRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rightTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [rightGripRisingGrab],\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n\n  [sets.cursorHoldingUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: cursorDrop2 },\n      xform: xforms.falling,\n      priority: 5\n    }\n  ],\n\n  [sets.cursorHoldingInteractable]: [\n    {\n      src: { value: rightAxis(\"joyY\") },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.scale(0.1)\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: cursorDrop1 },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: [cursorDrop1, cursorDrop2],\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.any,\n      priority: 2\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaButtons },\n      priority: 1,\n      xform: xforms.always(false)\n    }\n  ],\n\n  [sets.cursorHoveringOnPen]: [],\n\n  [sets.cursorHoldingPen]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: rightButton(\"b\").pressed },\n      dest: { value: paths.actions.cursor.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightHandHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rightGripRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rightTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [rightGripRisingGrab],\n      dest: { value: paths.actions.rightHand.grab },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n\n  [sets.rightHandHoldingInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: {\n        value: rightHandDrop2\n      },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: [rightHandDrop2],\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.any,\n      priority: 2\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaButtons },\n      priority: 1,\n      xform: xforms.always(false)\n    }\n  ],\n  [sets.rightHandHoveringOnPen]: [],\n  [sets.rightHandHoldingPen]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: rightDpadEast\n      },\n      dest: {\n        value: paths.actions.rightHand.penNextColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: rightDpadWest\n      },\n      dest: {\n        value: paths.actions.rightHand.penPrevColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: rightAxis(\"joyY\")\n      },\n      dest: {\n        value: rightJoyYDeadzoned\n      },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: rightJoyYDeadzoned },\n      dest: { value: paths.actions.rightHand.scalePenTip },\n      xform: xforms.scaleExp(-0.005, 5),\n      priority: 2\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: rightButton(\"b\").pressed },\n      dest: { value: paths.actions.rightHand.switchDrawMode },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: rightButton(\"a\").pressed },\n      dest: { value: paths.actions.rightHand.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.cursorHoveringOnCamera]: [],\n  [sets.rightHandHoveringOnCamera]: [],\n  [sets.leftHandHoveringOnCamera]: [],\n\n  [sets.rightHandHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.takeSnapshot },\n      xform: xforms.rising,\n      priority: 4\n    }\n  ],\n  [sets.leftHandHoldingCamera]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.takeSnapshot },\n      xform: xforms.rising,\n      priority: 4\n    }\n  ],\n  [sets.cursorHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.takeSnapshot },\n      xform: xforms.rising,\n      priority: 4\n    }\n  ],\n\n  [sets.rightHandHoveringOnNothing]: [],\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst v = name => {\n  return `/vive-user/vive-var/${name}`;\n};\n\nconst lButton = paths.device.vive.left.button;\nconst lAxis = paths.device.vive.left.axis;\nconst lPose = paths.device.vive.left.pose;\nconst lJoy = v(\"left/joy\");\nconst lJoyScaled = v(\"left/joy/scaled\");\nconst lJoyXScaled = v(\"left/joyX/scaled\");\nconst lJoyYScaled = v(\"left/joyY/scaled\");\nconst lDpadNorth = v(\"left/dpad/north\");\nconst lDpadSouth = v(\"left/dpad/south\");\nconst lDpadEast = v(\"left/dpad/east\");\nconst lDpadWest = v(\"left/dpad/west\");\nconst lDpadCenter = v(\"left/dpad/center\");\nconst lTriggerFallingStopDrawing = v(\"left/trigger/falling/stopDrawing\");\nconst lGripFallingStopDrawing = v(\"left/grip/falling/stopDrawing\");\nconst lTriggerRisingGrab = v(\"left/trigger/rising/grab\");\nconst lGripRisingGrab = v(\"left/grab/rising/grab\");\nconst lTouchpadRising2 = v(\"left/touchpad/rising2\");\nconst lTouchpadRising1 = v(\"left/touchpad/rising1\");\nconst lCharacterAcceleration = v(\"left/characterAcceleration\");\nconst characterAcceleration = v(\"nonNormalizedCharacterAcceleration\");\nconst leftBoost = v(\"left/boost\");\n\nconst rButton = paths.device.vive.right.button;\nconst rAxis = paths.device.vive.right.axis;\nconst rPose = paths.device.vive.right.pose;\nconst rJoy = v(\"right/joy\");\nconst rDpadNorth = v(\"right/dpad/north\");\nconst rDpadSouth = v(\"right/dpad/south\");\nconst rDpadEast = v(\"right/dpad/east\");\nconst rDpadWest = v(\"right/dpad/west\");\nconst rDpadCenter = v(\"right/dpad/center\");\nconst rDpadCenterStrip = v(\"right/dpad/centerStrip\");\nconst rTouchpadRising = v(\"right/touchpad/rising\");\nconst rTouchpadFalling = v(\"right/touchpad/falling\");\nconst rightBoost = v(\"right/boost\");\nconst rTriggerRisingGrab = v(\"right/trigger/rising/grab\");\nconst rGripRisingGrab = v(\"right/grab/rising/grab\");\nconst cursorDrop1 = v(\"right/cursorDrop1\");\nconst cursorDrop2 = v(\"right/cursorDrop2\");\nconst rHandDrop1 = v(\"right/drop1\");\nconst rHandDrop2 = v(\"right/drop2\");\nconst rTriggerStopTeleport = v(\"right/trigger/stopTeleport\");\nconst rTouchpadStopTeleport = v(\"right/touchpad/stopTeleport\");\nconst rootForFrozenOverrideWhenHolding = \"rootForFrozenOverrideWhenHolding\";\n\nconst ensureFrozenViaDpad = v(\"dpad/ensureFrozen\");\nconst ensureFrozenViaKeyboard = v(\"keyboard/ensureFrozen\");\n\nconst thawViaDpad = v(\"dpad/thaw\");\nconst thawViaKeyboard = v(\"keyboard/thaw\");\n\nconst rSnapRight = v(\"right/snap-right\");\nconst rSnapLeft = v(\"right/snap-left\");\n\nconst k = name => {\n  return `/vive-user/keyboard-var/${name}`;\n};\nconst keyboardSnapRight = k(\"snap-right\");\nconst keyboardSnapLeft = k(\"snap-left\");\nconst keyboardCharacterAcceleration = k(\"characterAcceleration\");\nconst wasd_vec2 = k(\"wasd_vec2\");\nconst arrows_vec2 = k(\"arrows_vec2\");\nconst keyboardBoost = k(\"boost\");\n\nconst leftGripPressed1 = v(\"leftGripPressed1\");\nconst leftGripPressed2 = v(\"leftGripPressed2\");\nconst rightGripPressed1 = v(\"rightGripPressed1\");\nconst rightGripPressed2 = v(\"rightGripPressed2\");\nconst leftTriggerPressed1 = v(\"leftTriggerPressed1\");\nconst leftTriggerPressed2 = v(\"leftTriggerPressed2\");\nconst leftTouchpadPressed1 = v(\"leftTouchpadPressed1\");\nconst leftTouchpadPressed2 = v(\"leftTouchpadPressed2\");\nconst rightTriggerPressed1 = v(\"rightTriggerPressed1\");\nconst rightTriggerPressed2 = v(\"rightTriggerPressed2\");\nconst leftTouchpadFallingStopTeleport = v(\"leftTouchpadFallingStopTeleport\");\nconst leftTriggerFallingStopTeleport = v(\"leftTriggerFallingStopTeleport\");\nconst leftGripFallingWhileHoldingPen = v(\"leftGripFallingWhileHoldingPen\");\n\nexport const viveUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: paths.device.vive.left.matrix\n      },\n      dest: {\n        value: paths.actions.leftHand.matrix\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: paths.device.vive.right.matrix\n      },\n      dest: {\n        value: paths.actions.rightHand.matrix\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [ensureFrozenViaDpad, ensureFrozenViaKeyboard],\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.any\n    },\n    {\n      src: [thawViaDpad, thawViaKeyboard],\n      dest: { value: paths.actions.thaw },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: lButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftGripPressed1\n      },\n      dest: {\n        value: paths.actions.leftHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: lButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [lButton(\"touchpad\").touched, lButton(\"top\").touched],\n      dest: {\n        value: paths.actions.leftHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: { value: leftTriggerPressed1 },\n      dest: {\n        value: paths.actions.leftHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightGripPressed1\n      },\n      dest: {\n        value: paths.actions.rightHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [rButton(\"touchpad\").touched, rButton(\"top\").touched],\n      dest: {\n        value: paths.actions.rightHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: rButton(\"trigger\").pressed\n      },\n      dest: { value: rightTriggerPressed1 },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"trigger\").pressed\n      },\n      dest: { value: rightTriggerPressed2 },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightTriggerPressed1 },\n      dest: {\n        value: paths.actions.rightHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: lAxis(\"joyX\"),\n        y: lAxis(\"joyY\")\n      },\n      dest: {\n        value: lJoy\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: lJoy\n      },\n      dest: {\n        north: lDpadNorth,\n        south: lDpadSouth,\n        east: lDpadEast,\n        west: lDpadWest,\n        center: lDpadCenter\n      },\n      xform: xforms.vec2dpad(0.35)\n    },\n    {\n      src: {\n        value: lButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: leftTouchpadPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: lButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: leftTouchpadPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: rAxis(\"joyX\"),\n        y: rAxis(\"joyY\")\n      },\n      dest: {\n        value: rJoy\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: rJoy\n      },\n      dest: {\n        north: rDpadNorth,\n        south: rDpadSouth,\n        east: rDpadEast,\n        west: rDpadWest,\n        center: rDpadCenter\n      },\n      xform: xforms.vec2dpad(0.35, false, true)\n    },\n    {\n      src: [rDpadNorth, rDpadSouth, rDpadCenter],\n      dest: { value: rDpadCenterStrip },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: rButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: rTouchpadRising\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: rButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: rTouchpadFalling\n      },\n      xform: xforms.falling\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadEast\n      },\n      dest: {\n        value: rSnapRight\n      },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: keyboardSnapRight },\n      xform: xforms.rising\n    },\n    {\n      src: [rSnapRight, keyboardSnapRight],\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.any\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Tab\") },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: ensureFrozenViaKeyboard },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: thawViaKeyboard },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"p\") },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"c\") },\n      dest: { value: paths.actions.toggleCamera },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"x\") },\n      dest: { value: paths.actions.takeSnapshot },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rButton(\"touchpad\").pressed, bool: rDpadCenterStrip },\n      dest: { value: ensureFrozenViaDpad },\n      root: rootForFrozenOverrideWhenHolding,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: rTouchpadFalling },\n      dest: { value: thawViaDpad },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadWest\n      },\n      dest: {\n        value: rSnapLeft\n      },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: keyboardSnapLeft },\n      xform: xforms.rising\n    },\n    {\n      src: [rSnapLeft, keyboardSnapLeft],\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.any\n    },\n\n    {\n      src: {\n        value: lAxis(\"joyX\")\n      },\n      dest: {\n        value: lJoyXScaled\n      },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: {\n        value: lAxis(\"joyY\")\n      },\n      dest: { value: lJoyYScaled },\n      xform: xforms.scale(1.5) // vertical character speed modifier\n    },\n    {\n      src: {\n        x: lJoyXScaled,\n        y: lJoyYScaled\n      },\n      dest: { value: lJoyScaled },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        bool: leftTouchpadPressed2,\n        value: lJoyScaled\n      },\n      dest: { value: lCharacterAcceleration },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"/\")\n      },\n      dest: {\n        value: paths.actions.focusChatCommand\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.mediaExit },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/shift+1\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/shift+2\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/shift+3\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/shift+4\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/shift+5\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/shift+6\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/shift+7\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/shift+8\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"k\")\n      },\n      dest: {\n        value: paths.actions.logInteractionState\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: {\n        first: lCharacterAcceleration,\n        second: keyboardCharacterAcceleration\n      },\n      dest: {\n        value: characterAcceleration\n      },\n      xform: xforms.max_vec2\n    },\n    {\n      src: { value: characterAcceleration },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.normalize_vec2\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: keyboardBoost },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: lButton(\"top\").pressed\n      },\n      dest: {\n        value: leftBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"top\").pressed\n      },\n      dest: {\n        value: rightBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [keyboardBoost, leftBoost, rightBoost],\n      dest: { value: paths.actions.boost },\n      xform: xforms.any\n    },\n    {\n      src: { value: rPose },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rPose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lPose },\n      dest: { value: paths.actions.leftHand.pose },\n      xform: xforms.copy\n    }\n  ],\n  [sets.rightHandTeleporting]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rTriggerStopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: rButton(\"touchpad\").pressed },\n      dest: { value: rTouchpadStopTeleport },\n      xform: xforms.falling\n    },\n    {\n      src: [rTriggerStopTeleport, rTouchpadStopTeleport],\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.any\n    }\n  ],\n  [sets.leftHandHoveringOnNothing]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftHandTeleporting]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: leftTriggerFallingStopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [leftTriggerFallingStopTeleport, leftTouchpadFallingStopTeleport, leftGripFallingWhileHoldingPen],\n      dest: { value: paths.actions.leftHand.stopTeleport },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.rightHandHoveringOnNothing]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.cursorHoveringOnNothing]: [],\n\n  [sets.cursorHoveringOnUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.cursorHoveringOnVideo]: [\n    {\n      src: {\n        value: rAxis(\"joyY\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.mediaVolumeMod },\n      xform: xforms.touch_axis_scroll(0.1)\n    }\n  ],\n\n  [sets.leftHandHoveringOnInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: lGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: lTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: [lGripRisingGrab],\n      dest: { value: paths.actions.leftHand.grab },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.leftHandHoldingInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.falling,\n      priority: 1\n    }\n  ],\n\n  [sets.leftHandHoveringOnPen]: [],\n  [sets.leftHandHoldingPen]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.noop,\n      priority: 2\n    },\n    {\n      src: { value: leftTouchpadPressed2 },\n      dest: { value: leftTouchpadFallingStopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: {\n        value: leftTouchpadPressed2\n      },\n      dest: {\n        value: lTouchpadRising1\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: {\n        bool: lTouchpadRising1,\n        value: lDpadCenter\n      },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startDrawing },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: lTriggerFallingStopDrawing },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: lGripFallingStopDrawing },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftGripFallingWhileHoldingPen },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [lTriggerFallingStopDrawing, lGripFallingStopDrawing],\n      dest: { value: paths.actions.leftHand.stopDrawing },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: leftTouchpadPressed2\n      },\n      dest: {\n        value: lTouchpadRising2\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: {\n        bool: lTouchpadRising2,\n        value: lDpadNorth\n      },\n      dest: {\n        value: paths.actions.leftHand.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        bool: lTouchpadRising2,\n        value: lDpadSouth\n      },\n      dest: {\n        value: paths.actions.leftHand.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        value: lAxis(\"joyX\"),\n        touching: lButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.leftHand.scalePenTip },\n      xform: xforms.touch_axis_scroll(0.05)\n    },\n    {\n      src: { value: lButton(\"top\").pressed },\n      dest: { value: paths.actions.leftHand.undoDrawing },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.cursorHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: [rGripRisingGrab],\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.cursorHoldingUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: {\n        value: cursorDrop2\n      },\n      xform: xforms.falling,\n      priority: 4\n    }\n  ],\n\n  [sets.cursorHoldingInteractable]: [\n    {\n      src: {\n        value: rAxis(\"joyY\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.touch_axis_scroll(-1)\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: cursorDrop1 },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [cursorDrop1, cursorDrop2],\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.any\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaDpad },\n      root: rootForFrozenOverrideWhenHolding,\n      xform: xforms.always(false)\n    }\n  ],\n\n  [sets.cursorHoveringOnPen]: [],\n\n  [sets.cursorHoldingPen]: [\n    {\n      src: [cursorDrop1],\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.noop,\n      priority: 1\n    },\n    {\n      src: [cursorDrop2],\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.noop,\n      priority: 1\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadCenter\n      },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: rAxis(\"joyX\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.scalePenTip },\n      xform: xforms.touch_axis_scroll(0.1)\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadNorth\n      },\n      dest: {\n        value: paths.actions.cursor.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadSouth\n      },\n      dest: {\n        value: paths.actions.cursor.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: { value: rButton(\"top\").pressed },\n      dest: { value: paths.actions.cursor.undoDrawing },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.rightHandHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [rGripRisingGrab],\n      dest: { value: paths.actions.rightHand.grab },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.rightHandHoldingInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rHandDrop1 },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: {\n        value: rHandDrop2\n      },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: [rHandDrop1],\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.any,\n      priority: 2\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaDpad },\n      root: rootForFrozenOverrideWhenHolding,\n      xform: xforms.always(false)\n    }\n  ],\n  [sets.rightHandHoveringOnPen]: [],\n  [sets.rightHandHoldingPen]: [\n    {\n      src: [rHandDrop1],\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.noop,\n      priority: 1\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadCenter\n      },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadNorth\n      },\n      dest: {\n        value: paths.actions.rightHand.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadSouth\n      },\n      dest: {\n        value: paths.actions.rightHand.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        value: rAxis(\"joyX\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.rightHand.scalePenTip },\n      xform: xforms.touch_axis_scroll(0.05)\n    },\n    {\n      src: { value: rButton(\"top\").pressed },\n      dest: { value: paths.actions.rightHand.undoDrawing },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.cursorHoveringOnCamera]: [],\n  [sets.rightHandHoveringOnCamera]: [],\n  [sets.leftHandHoveringOnCamera]: [],\n\n  [sets.rightHandHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.takeSnapshot },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.noop },\n      xform: xforms.falling,\n      priority: 3\n    }\n  ],\n  [sets.leftHandHoldingCamera]: [\n    {\n      src: { value: lButton(\"trigger\").pressed },\n      dest: { value: paths.actions.leftHand.takeSnapshot },\n      xform: xforms.rising\n    }\n  ],\n  [sets.cursorHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.takeSnapshot },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.noop },\n      xform: xforms.falling,\n      priority: 3\n    }\n  ],\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst lGripPressed = paths.device.wmr.left.grip.pressed;\nconst rGripPressed = paths.device.wmr.right.grip.pressed;\nconst rTriggerPressed = paths.device.wmr.right.trigger.pressed;\n\nconst rJoyNorth = paths.device.wmr.v(\"right/joy/north\");\nconst rGripRising = paths.device.wmr.v(\"right/grip/rising\");\nconst rTriggerRising = paths.device.wmr.v(\"right/trigger/rising\");\nconst rGripFalling = paths.device.wmr.v(\"right/grip/falling\");\nconst rTriggerFalling = paths.device.wmr.v(\"right/trigger/falling\");\n\nfunction dpadVariables(hand) {\n  return {\n    padWest: paths.device.wmr.v(hand + \"/pad/west\"),\n    padEast: paths.device.wmr.v(hand + \"/pad/east\"),\n    padNorth: paths.device.wmr.v(hand + \"/pad/north\"),\n    padSouth: paths.device.wmr.v(hand + \"/pad/south\"),\n    padCenter: paths.device.wmr.v(hand + \"/pad/center\"),\n    padCenterStrip: paths.device.wmr.v(hand + \"/pad/centerStrip\")\n  };\n}\n\nfunction dpadBindings(hand) {\n  const { padWest, padEast, padNorth, padSouth, padCenter, padCenterStrip } = dpadVariables(hand);\n  const pad = paths.device.wmr.v(hand + \"/pad\");\n  return [\n    {\n      src: {\n        x: paths.device.wmr[hand].touchpad.axisX,\n        y: paths.device.wmr[hand].touchpad.axisY\n      },\n      dest: { value: pad },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: pad },\n      dest: {\n        west: padWest,\n        east: padEast,\n        north: padNorth,\n        south: padSouth,\n        center: padCenter\n      },\n      xform: xforms.vec2dpad(0.5, false, false)\n    },\n    {\n      src: [padNorth, padCenter, padSouth],\n      dest: { value: padCenterStrip },\n      xform: xforms.any\n    }\n  ];\n}\n\nconst neverFrozenBinding = {\n  src: {},\n  dest: { value: paths.actions.ensureFrozen },\n  xform: xforms.always(false)\n};\n\nfunction penBindings(hand, forCursor) {\n  const padY = paths.device.wmr[hand].touchpad.axisY;\n  const triggerPressed = paths.device.wmr[hand].trigger.pressed;\n  const padPressed = paths.device.wmr[hand].touchpad.pressed;\n  const padTouched = paths.device.wmr[hand].touchpad.touched;\n\n  const padRising = paths.device.wmr.v(hand + \"/pad/rising\");\n  const padCenterStripTouched = paths.device.wmr.v(hand + \"/pad/centerStrip/touched\");\n  const { padWest, padEast, padCenter, padCenterStrip } = dpadVariables(hand);\n\n  const actions = paths.actions[forCursor ? \"cursor\" : hand + \"Hand\"];\n\n  return [\n    neverFrozenBinding,\n    ...dpadBindings(hand),\n    {\n      src: { value: triggerPressed },\n      dest: { value: actions.startDrawing },\n      xform: xforms.rising\n    },\n    {\n      src: { value: triggerPressed },\n      dest: { value: actions.stopDrawing },\n      xform: xforms.falling\n    },\n    {\n      src: { value: padPressed },\n      dest: { value: padRising },\n      xform: xforms.rising\n    },\n    {\n      src: { bool: padRising, value: padWest },\n      dest: { value: actions.penPrevColor },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { bool: padRising, value: padEast },\n      dest: { value: actions.penNextColor },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: [padCenterStrip, padTouched],\n      dest: { value: padCenterStripTouched },\n      xform: xforms.all\n    },\n    {\n      src: { value: padY, touching: padCenterStripTouched },\n      dest: { value: actions.scalePenTip },\n      xform: xforms.touch_axis_scroll(-0.05)\n    },\n    {\n      src: [padRising, padCenter],\n      dest: { value: actions.undoDrawing },\n      xform: xforms.all\n    }\n  ];\n}\n\nfunction handPoseBindings(hand) {\n  const padTouched = paths.device.wmr[hand].touchpad.touched;\n  const triggerPressed = paths.device.wmr[hand].trigger.pressed;\n  const gripPressed = paths.device.wmr[hand].grip.pressed;\n  const actions = paths.actions[hand + \"Hand\"];\n  return [\n    {\n      src: { value: padTouched },\n      dest: { value: actions.thumb },\n      xform: xforms.copy\n    },\n    {\n      src: { value: triggerPressed },\n      dest: { value: actions.index },\n      xform: xforms.copy\n    },\n    {\n      src: { value: gripPressed },\n      dest: { value: actions.middleRingPinky },\n      xform: xforms.copy\n    }\n  ];\n}\n\nfunction freezeBindings() {\n  const leftPadPressed = paths.device.wmr.left.touchpad.pressed;\n  const rightPadPressed = paths.device.wmr.right.touchpad.pressed;\n  const leftPadFalling = paths.device.wmr.v(\"left/touchpad/falling\");\n  const rightPadFalling = paths.device.wmr.v(\"right/touchpad/falling\");\n  const keyboardSaceFalling = paths.device.wmr.k(\"space/falling\");\n  return [\n    {\n      src: [paths.device.keyboard.key(\" \"), leftPadPressed, rightPadPressed],\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.any\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: keyboardSaceFalling },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Tab\") },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: leftPadPressed },\n      dest: { value: leftPadFalling },\n      xform: xforms.falling\n    },\n    {\n      src: { value: rightPadPressed },\n      dest: { value: rightPadFalling },\n      xform: xforms.falling\n    },\n    {\n      src: [keyboardSaceFalling, leftPadFalling, rightPadFalling],\n      dest: { value: paths.actions.thaw },\n      xform: xforms.any\n    }\n  ];\n}\n\nfunction characterAccelerationBindings() {\n  const wasd_vec2 = paths.device.wmr.k(\"wasd_vec2\");\n  const arrows_vec2 = paths.device.wmr.k(\"arrows_vec2\");\n  const keyboardCharacterAcceleration = paths.device.wmr.k(\"characterAcceleration\");\n  const lJoyXDeadzoned = paths.device.wmr.v(\"left/joy/x/deadzoned\");\n  const lJoyYDeadzoned = paths.device.wmr.v(\"left/joy/y/deadzoned\");\n  const lJoyXScaled = paths.device.wmr.v(\"left/joy/x/scaled\");\n  const lJoyYScaled = paths.device.wmr.v(\"left/joy/y/scaled\");\n  const lCharacterAcceleration = paths.device.wmr.v(\"left/characterAcceleration\");\n  return [\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: { value: paths.device.wmr.left.joystick.axisX },\n      dest: { value: lJoyXDeadzoned },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: lJoyXDeadzoned },\n      dest: { value: lJoyXScaled },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: { value: paths.device.wmr.left.joystick.axisY },\n      dest: { value: lJoyYDeadzoned },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: lJoyYDeadzoned },\n      dest: { value: lJoyYScaled },\n      xform: xforms.scale(-1.5) // vertical character speed modifier\n    },\n    {\n      src: { x: lJoyXScaled, y: lJoyYScaled },\n      dest: { value: lCharacterAcceleration },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        first: lCharacterAcceleration,\n        second: keyboardCharacterAcceleration\n      },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: [\n        paths.device.wmr.left.trigger.pressed,\n        paths.device.wmr.right.trigger.pressed,\n        paths.device.keyboard.key(\"shift\")\n      ],\n      dest: { value: paths.actions.boost },\n      xform: xforms.any\n    }\n  ];\n}\n\nfunction cursorModDeltaBindings() {\n  const { padNorth, padSouth } = dpadVariables(\"right\");\n  const rPadNorthOrSouth = paths.device.wmr.v(\"right/pad/northOrSouth\");\n  const rPadNorthOrSouthPressed = paths.device.wmr.v(\"right/pad/northOrSouth/pressed\");\n  const rPadNorthOrSouthPressedY = paths.device.wmr.v(\"right/pad/northOrSouthpressed/y\");\n  return [\n    ...dpadBindings(\"right\"),\n    {\n      src: [padNorth, padSouth],\n      dest: { value: rPadNorthOrSouth },\n      xform: xforms.any\n    },\n    {\n      src: [rPadNorthOrSouth, paths.device.wmr.right.touchpad.pressed],\n      dest: { value: rPadNorthOrSouthPressed },\n      xform: xforms.all\n    },\n    {\n      src: {\n        bool: rPadNorthOrSouthPressed,\n        value: paths.device.wmr.right.touchpad.axisY\n      },\n      dest: { value: rPadNorthOrSouthPressedY },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: rPadNorthOrSouthPressedY },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.scale(0.1)\n    }\n  ];\n}\n\nfunction cursorMediaVolumeModBindings() {\n  const hand = \"right\";\n  const padY = paths.device.wmr[hand].touchpad.axisY;\n  const padTouched = paths.device.wmr[hand].touchpad.touched;\n\n  const padCenterStripTouched = paths.device.wmr.v(hand + \"/pad/centerStrip/touched\");\n  const { padCenterStrip } = dpadVariables(hand);\n\n  return [\n    ...dpadBindings(hand),\n    {\n      src: [padCenterStrip, padTouched],\n      dest: { value: padCenterStripTouched },\n      xform: xforms.all\n    },\n    {\n      src: { value: padY, touching: padCenterStripTouched },\n      dest: { value: paths.actions.cursor.mediaVolumeMod },\n      xform: xforms.touch_axis_scroll(-0.1)\n    }\n  ];\n}\n\nfunction holdingCameraBindings(hand, forCursor) {\n  const actions = paths.actions[forCursor ? \"cursor\" : hand + \"Hand\"];\n  return [\n    neverFrozenBinding,\n    {\n      src: { value: paths.device.wmr[hand].trigger.pressed },\n      dest: { value: actions.takeSnapshot },\n      xform: xforms.rising\n    }\n  ];\n}\n\nfunction teleportationAndRotationBindings() {\n  const rJoy = paths.device.wmr.v(\"right/joy\");\n  const rJoyWest = paths.device.wmr.v(\"right/joy/west\");\n  const rJoyEast = paths.device.wmr.v(\"right/joy/East\");\n  const rJoyWestRising = paths.device.wmr.v(\"right/joy/west/rising\");\n  const rJoyEastRising = paths.device.wmr.v(\"right/joy/east/rising\");\n  const keyboardQRising = paths.device.wmr.k(\"q/rising\");\n  const keyboardERising = paths.device.wmr.k(\"e/rising\");\n  return [\n    {\n      src: {\n        x: paths.device.wmr.right.joystick.axisX,\n        y: paths.device.wmr.right.joystick.axisY\n      },\n      dest: { value: rJoy },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: rJoy },\n      dest: {\n        north: rJoyNorth,\n        west: rJoyWest,\n        east: rJoyEast\n      },\n      xform: xforms.vec2dpad(0.2, false, false)\n    },\n    {\n      src: { value: rJoyNorth },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rJoyWest },\n      dest: { value: rJoyWestRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rJoyEast },\n      dest: { value: rJoyEastRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: keyboardQRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: keyboardERising },\n      xform: xforms.rising\n    },\n    {\n      src: [rJoyWestRising, keyboardQRising],\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.any\n    },\n    {\n      src: [rJoyEastRising, keyboardERising],\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.any\n    }\n  ];\n}\n\nexport const wmrUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: { value: paths.device.wmr.left.matrix },\n      dest: { value: paths.actions.leftHand.matrix },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.right.matrix },\n      dest: { value: paths.actions.rightHand.matrix },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.left.pose },\n      dest: { value: paths.actions.leftHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.right.pose },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.right.pose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    },\n    ...handPoseBindings(\"left\"),\n    ...handPoseBindings(\"right\"),\n    ...freezeBindings(),\n    ...teleportationAndRotationBindings(),\n    ...characterAccelerationBindings(),\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"/\")\n      },\n      dest: {\n        value: paths.actions.focusChatCommand\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.mediaExit },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/shift+1\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/shift+2\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/shift+3\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/shift+4\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/shift+5\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/shift+6\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/shift+7\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/shift+8\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftHandHoveringOnNothing]: [],\n  [sets.cursorHoveringOnNothing]: [],\n  [sets.rightHandHoveringOnNothing]: [],\n\n  [sets.rightHandTeleporting]: [\n    {\n      src: { value: rJoyNorth },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.falling\n    }\n  ],\n\n  [sets.cursorHoveringOnUI]: [\n    {\n      src: { value: rTriggerPressed },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.cursorHoveringOnVideo]: [...cursorMediaVolumeModBindings()],\n\n  [sets.leftHandHoveringOnInteractable]: [\n    {\n      src: { value: lGripPressed },\n      dest: { value: paths.actions.leftHand.grab },\n      xform: xforms.rising\n    }\n  ],\n  [sets.cursorHoveringOnInteractable]: [\n    {\n      src: { value: rGripPressed },\n      dest: { value: rGripRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rTriggerPressed },\n      dest: { value: rTriggerRising },\n      xform: xforms.rising\n    },\n    {\n      src: [rGripRising, rTriggerRising],\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.any\n    }\n  ],\n  [sets.rightHandHoveringOnInteractable]: [\n    {\n      src: { value: rGripPressed },\n      dest: { value: paths.actions.rightHand.grab },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftHandHoldingInteractable]: [\n    neverFrozenBinding,\n    {\n      src: { value: lGripPressed },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.falling\n    }\n  ],\n  [sets.cursorHoldingInteractable]: [\n    neverFrozenBinding,\n    ...cursorModDeltaBindings(),\n    {\n      src: { value: rGripPressed },\n      dest: { value: rGripFalling },\n      xform: xforms.falling\n    },\n    {\n      src: { value: rTriggerPressed },\n      dest: { value: rTriggerFalling },\n      xform: xforms.falling\n    },\n    {\n      src: [rGripFalling, rTriggerFalling],\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.any\n    }\n  ],\n  [sets.rightHandHoldingInteractable]: [\n    neverFrozenBinding,\n    {\n      src: { value: rGripPressed },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.falling\n    }\n  ],\n\n  [sets.leftHandHoveringOnPen]: [],\n  [sets.cursorHoveringOnPen]: [],\n  [sets.rightHandHoveringOnPen]: [],\n\n  [sets.leftHandHoldingPen]: penBindings(\"left\"),\n  [sets.cursorHoldingPen]: penBindings(\"right\", true),\n  [sets.rightHandHoldingPen]: penBindings(\"right\"),\n\n  [sets.leftHandHoveringOnCamera]: [],\n  [sets.cursorHoveringOnCamera]: [],\n  [sets.rightHandHoveringOnCamera]: [],\n\n  [sets.leftHandHoldingCamera]: holdingCameraBindings(\"left\"),\n  [sets.cursorHoldingCamera]: holdingCameraBindings(\"right\", true),\n  [sets.rightHandHoldingCamera]: holdingCameraBindings(\"right\"),\n\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst button = paths.device.xbox.button;\nconst axis = paths.device.xbox.axis;\nconst scaledRightJoystickVertical = paths.device.xbox.v(\"scaledRightJoystickVertical\");\nconst scaledLeftJoystickCursorDelta = paths.device.xbox.v(\"scaledLeftJoystickCursorDelta\");\nconst deadzonedRightJoystickHorizontal = paths.device.xbox.v(\"deadzonedRightJoystickHorizontal\");\nconst deadzonedRightJoystickVertical = paths.device.xbox.v(\"deadzonedRightJoystickVertical\");\nconst deadzonedLeftJoystickHorizontal = paths.device.xbox.v(\"deadzonedLeftJoystickHorizontal\");\nconst deadzonedLeftJoystickVertical = paths.device.xbox.v(\"deadzonedLeftJoystickVertical\");\nconst vec2Zero = paths.device.xbox.v(\"vec2Zero\");\nconst zero = paths.device.xbox.v(\"zero\");\n\nfunction characterAccelerationBindings(disableForwardOnTrigger) {\n  const scaledLeftJoystickHorizontal = paths.device.xbox.v(\"scaledLeftJoystickHorizontal\");\n  const scaledLeftJoystickVertical = paths.device.xbox.v(\"scaledLeftJoystickVertical\");\n  const scaledLeftJoystickForwardAcceleration = paths.device.xbox.v(\"scaledLeftJoystickForwardAcceleration\");\n  return [\n    {\n      src: { value: deadzonedLeftJoystickHorizontal },\n      dest: { value: scaledLeftJoystickHorizontal },\n      xform: xforms.scale(1.5) // horizontal move speed modifier\n    },\n    {\n      src: { value: deadzonedLeftJoystickVertical },\n      dest: { value: scaledLeftJoystickVertical },\n      xform: xforms.scale(-1.25) // vertical move speed modifier\n    },\n    {\n      src: {\n        bool: button(\"leftTrigger\").pressed,\n        value: scaledLeftJoystickVertical\n      },\n      dest: { value: scaledLeftJoystickForwardAcceleration },\n      xform: disableForwardOnTrigger ? xforms.copyIfFalse : xforms.copy\n    },\n    {\n      src: {\n        x: scaledLeftJoystickHorizontal,\n        y: scaledLeftJoystickForwardAcceleration\n      },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.compose_vec2\n    }\n  ];\n}\n\nexport const xboxControllerUserBindings = addSetsToBindings({\n  [sets.cursorHoldingPen]: [\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.startDrawing },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.stopDrawing },\n      xform: xforms.falling,\n      priority: 200\n    },\n    {\n      src: { value: button(\"b\").pressed },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"y\").pressed },\n      dest: { value: paths.actions.cursor.undoDrawing },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: button(\"a\").pressed },\n      dest: { value: paths.actions.cursor.penNextColor },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"x\").pressed },\n      dest: { value: paths.actions.cursor.penPrevColor },\n      xform: xforms.rising\n    }\n  ],\n  [sets.global]: [\n    {\n      src: {},\n      dest: { value: paths.actions.cursor.hideLine },\n      xform: xforms.always(true)\n    },\n    {\n      src: { value: axis(\"rightJoystickHorizontal\") },\n      dest: { value: deadzonedRightJoystickHorizontal },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: deadzonedRightJoystickHorizontal },\n      dest: { value: paths.actions.angularVelocity },\n      xform: xforms.scale(0.6) // horizontal look speed modifier\n    },\n    {\n      src: { value: axis(\"rightJoystickVertical\") },\n      dest: { value: deadzonedRightJoystickVertical },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: deadzonedRightJoystickVertical },\n      dest: { value: scaledRightJoystickVertical },\n      xform: xforms.scale(-1.25) // vertical look speed modifier\n    },\n    {\n      src: {},\n      dest: { value: zero },\n      xform: xforms.always(0)\n    },\n    {\n      src: {\n        x: zero,\n        y: scaledRightJoystickVertical\n      },\n      dest: { value: paths.actions.cameraDelta },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: paths.actions.cameraDelta },\n      dest: { value: paths.actions.lobbyCameraDelta },\n      xform: xforms.copy\n    },\n    {\n      src: { value: axis(\"leftJoystickHorizontal\") },\n      dest: { value: deadzonedLeftJoystickHorizontal },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: axis(\"leftJoystickVertical\") },\n      dest: { value: deadzonedLeftJoystickVertical },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: button(\"leftTrigger\").pressed },\n      dest: { value: paths.actions.boost },\n      xform: xforms.copy\n    },\n    {\n      src: { value: button(\"leftBumper\").pressed },\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"rightBumper\").pressed },\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.rising\n    },\n    {\n      src: {},\n      dest: { value: vec2Zero },\n      xform: xforms.vec2Zero\n    },\n    {\n      src: { value: vec2Zero },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.poseFromCameraProjection()\n    },\n    {\n      src: { value: button(\"y\").pressed },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising,\n      priority: 100\n    },\n    {\n      src: { value: button(\"dpadUp\").pressed },\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.copy\n    },\n    {\n      src: { value: button(\"dpadUp\").pressed },\n      dest: { value: paths.actions.thaw },\n      xform: xforms.falling\n    },\n    {\n      src: { value: button(\"start\").pressed },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"a\").pressed },\n      dest: { value: paths.actions.startGazeTeleport },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"a\").pressed },\n      dest: { value: paths.actions.stopGazeTeleport },\n      xform: xforms.falling\n    }\n  ],\n  [sets.cursorHoldingNothing]: [...characterAccelerationBindings()],\n  [sets.cursorHoldingInteractable]: [\n    ...characterAccelerationBindings(true),\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.falling,\n      priority: 100\n    },\n    {\n      src: { value: deadzonedLeftJoystickVertical },\n      dest: { value: scaledLeftJoystickCursorDelta },\n      xform: xforms.scale(0.25)\n    },\n    {\n      src: {\n        bool: button(\"leftTrigger\").pressed,\n        value: scaledLeftJoystickCursorDelta\n      },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.copyIfTrue\n    }\n  ],\n  [sets.cursorHoveringOnUI]: [\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising\n    }\n  ],\n  [sets.cursorHoveringOnInteractable]: [\n    ...characterAccelerationBindings(),\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.grab },\n      xform: xforms.rising,\n      priority: 100\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\n// vars\nconst v = s => `/vars/daydream/${s}`;\nconst touchpad = v(\"touchpad/axis\");\nconst touchpadRising = v(\"touchpad/rising\");\nconst touchpadFalling = v(\"touchpad/falling\");\nconst touchpadPressed = v(\"touchpad/pressed\");\nconst dpadNorth = v(\"dpad/north\");\nconst dpadSouth = v(\"dpad/south\");\nconst dpadEast = v(\"dpad/east\");\nconst dpadWest = v(\"dpad/west\");\nconst dpadCenter = v(\"dpad/center\");\nconst brushSizeDelta = v(\"brushSizeDelta\");\nconst cursorModDelta = v(\"cursorModDelta\");\nconst dpadSouthDrop = v(\"dropSouth\");\nconst dpadCenterDrop = v(\"dropCenter\");\n\nconst grabBinding = [\n  {\n    src: { value: dpadCenter, bool: touchpadRising },\n    dest: { value: paths.actions.cursor.grab },\n    xform: xforms.copyIfTrue,\n    priority: 100\n  }\n];\n\nconst dropOnCenterOrSouth = [\n  {\n    src: { value: dpadCenter, bool: touchpadRising },\n    dest: { value: dpadCenterDrop },\n    xform: xforms.copyIfTrue,\n    priority: 100\n  },\n  {\n    src: { value: dpadSouth, bool: touchpadRising },\n    dest: { value: dpadSouthDrop },\n    xform: xforms.copyIfTrue,\n    priority: 100\n  },\n  {\n    src: [dpadCenterDrop, dpadSouthDrop],\n    dest: { value: paths.actions.cursor.drop },\n    xform: xforms.any\n  }\n];\n\nexport const daydreamUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: { value: paths.device.daydream.matrix },\n      dest: { value: paths.actions.rightHand.matrix },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: paths.device.daydream.axis(\"touchpadX\"),\n        y: paths.device.daydream.axis(\"touchpadY\")\n      },\n      dest: { value: touchpad },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: paths.device.daydream.button(\"touchpad\").pressed\n      },\n      dest: { value: touchpadRising },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.daydream.button(\"touchpad\").pressed\n      },\n      dest: { value: touchpadFalling },\n      xform: xforms.falling\n    },\n    {\n      src: {\n        value: paths.device.daydream.button(\"touchpad\").pressed\n      },\n      dest: { value: touchpadPressed },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: touchpad\n      },\n      dest: {\n        north: dpadNorth,\n        south: dpadSouth,\n        east: dpadEast,\n        west: dpadWest,\n        center: dpadCenter\n      },\n      xform: xforms.vec2dpad(0.5)\n    },\n    {\n      src: {\n        value: dpadEast,\n        bool: touchpadRising\n      },\n      dest: {\n        value: paths.actions.snapRotateRight\n      },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        value: dpadWest,\n        bool: touchpadRising\n      },\n      dest: {\n        value: paths.actions.snapRotateLeft\n      },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        value: dpadCenter,\n        bool: touchpadRising\n      },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: paths.device.daydream.pose },\n      dest: { value: paths.actions.cursor.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.daydream.pose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    }\n  ],\n\n  [sets.cursorHoveringOnInteractable]: grabBinding,\n  [sets.cursorHoveringOnUI]: grabBinding,\n\n  [sets.cursorHoveringOnVideo]: [\n    {\n      src: {\n        value: paths.device.daydream.axis(\"touchpadY\"),\n        touching: paths.device.daydream.button(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.mediaVolumeMod },\n      xform: xforms.touch_axis_scroll(-0.1)\n    }\n  ],\n\n  [sets.cursorHoldingInteractable]: [\n    {\n      src: { value: touchpadFalling },\n      dest: { value: paths.actions.cursor.drop },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: paths.device.daydream.axis(\"touchpadY\"),\n        touching: paths.device.daydream.button(\"touchpad\").touched\n      },\n      dest: { value: cursorModDelta },\n      xform: xforms.touch_axis_scroll()\n    },\n    {\n      src: { value: cursorModDelta },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.copy\n    }\n  ],\n\n  [sets.rightHandTeleporting]: [\n    {\n      src: { value: touchpadFalling },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.copy\n    }\n  ],\n\n  [sets.cursorHoldingPen]: [\n    {\n      src: { value: dpadNorth, bool: touchpadRising },\n      dest: { value: paths.actions.cursor.startDrawing },\n      xform: xforms.copyIfTrue,\n      priority: 100\n    },\n    {\n      src: { value: touchpadFalling },\n      dest: { value: paths.actions.cursor.stopDrawing },\n      xform: xforms.copy,\n      priority: 100\n    },\n    {\n      src: {\n        value: paths.device.daydream.axis(\"touchpadX\"),\n        touching: paths.device.daydream.button(\"touchpad\").touched\n      },\n      dest: { value: brushSizeDelta },\n      xform: xforms.touch_axis_scroll(-0.1)\n    },\n    {\n      src: {\n        value: brushSizeDelta,\n        bool: touchpadPressed\n      },\n      dest: { value: paths.actions.cursor.scalePenTip },\n      xform: xforms.copyIfFalse,\n      priority: 100\n    },\n    {\n      src: { value: dpadEast, bool: touchpadRising },\n      dest: {\n        value: paths.actions.cursor.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 100\n    },\n    {\n      src: { value: dpadWest, bool: touchpadRising },\n      dest: {\n        value: paths.actions.cursor.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 100\n    },\n    {\n      src: {\n        value: cursorModDelta,\n        bool: touchpadPressed\n      },\n      dest: { value: paths.actions.cursor.modDelta },\n      xform: xforms.copyIfFalse,\n      priority: 100\n    },\n    ...dropOnCenterOrSouth\n  ],\n\n  [sets.cursorHoldingCamera]: [\n    // Don't drop on touchpad release\n    {\n      src: {\n        value: touchpadFalling\n      },\n      xform: xforms.noop,\n      priority: 100\n    },\n    {\n      src: {\n        value: dpadNorth,\n        bool: touchpadRising\n      },\n      dest: { value: paths.actions.cursor.takeSnapshot },\n      xform: xforms.copyIfTrue,\n      priority: 100\n    },\n    ...dropOnCenterOrSouth\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nexport const cardboardUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: { value: paths.device.touchscreen.isTouching },\n      dest: {\n        value: paths.actions.startGazeTeleport\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.touchscreen.isTouching },\n      dest: {\n        value: paths.actions.stopGazeTeleport\n      },\n      xform: xforms.falling\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nexport default function generate3DOFTriggerBindings(device) {\n  const touchpad = device.v(\"touchpad\");\n  const touchpadButton = device.button(\"touchpad\");\n  const triggerButton = device.button(\"trigger\");\n  const touchpadX = device.axis(\"touchpadX\");\n  const touchpadXForPen = device.axis(\"touchpadXForPen\");\n  const touchpadY = device.axis(\"touchpadY\");\n  const touchpadYForPen = device.axis(\"touchpadYForPen\");\n  const touchpadRising = device.v(\"touchpad/rising\");\n  const touchpadFalling = device.v(\"touchpad/falling\");\n  const triggerRising = device.v(\"trigger/rising\");\n  const triggerFalling = device.v(\"trigger/falling\");\n  const dpadNorth = device.v(\"dpad/north\");\n  const dpadSouth = device.v(\"dpad/south\");\n  const dpadEast = device.v(\"dpad/east\");\n  const dpadWest = device.v(\"dpad/west\");\n  const dpadCenter = device.v(\"dpad/center\");\n  const dpadCenterStrip = device.v(\"dpad/centerStrip\");\n  const dpadBottomCenterStrip = device.v(\"dpad/bottomCenterStrip\");\n  const togglePen = \"/vars/oculus-go/togglePen\";\n\n  const grabBinding = {\n    src: {\n      value: triggerRising\n    },\n    dest: { value: paths.actions.cursor.grab },\n    xform: xforms.copy,\n    priority: 200\n  };\n  const dropBinding = {\n    src: {\n      value: triggerFalling\n    },\n    dest: { value: paths.actions.cursor.drop },\n    xform: xforms.copy,\n    priority: 200\n  };\n\n  return addSetsToBindings({\n    [sets.global]: [\n      {\n        src: { value: device.matrix },\n        dest: { value: paths.actions.rightHand.matrix },\n        xform: xforms.copy\n      },\n      {\n        src: {\n          value: triggerButton.pressed\n        },\n        dest: { value: triggerRising },\n        xform: xforms.rising\n      },\n      {\n        src: {\n          value: triggerButton.pressed\n        },\n        dest: { value: triggerFalling },\n        xform: xforms.falling\n      },\n      {\n        src: {\n          value: touchpadButton.pressed\n        },\n        dest: { value: touchpadRising },\n        xform: xforms.rising,\n        priority: 100\n      },\n      {\n        src: {\n          value: touchpadButton.pressed\n        },\n        dest: { value: touchpadFalling },\n        xform: xforms.falling,\n        priority: 100\n      },\n      {\n        src: {\n          x: touchpadX,\n          y: touchpadY\n        },\n        dest: { value: touchpad },\n        xform: xforms.compose_vec2\n      },\n      {\n        src: { value: touchpadX },\n        dest: { value: touchpadXForPen },\n        xform: xforms.copy\n      },\n      {\n        src: { value: touchpadY },\n        dest: { value: touchpadYForPen },\n        xform: xforms.copy\n      },\n      {\n        src: {\n          value: touchpad\n        },\n        dest: {\n          north: dpadNorth,\n          south: dpadSouth,\n          east: dpadEast,\n          west: dpadWest,\n          center: dpadCenter\n        },\n        xform: xforms.vec2dpad(0.3)\n      },\n      {\n        src: [dpadCenter, dpadSouth],\n        dest: { value: dpadBottomCenterStrip },\n        xform: xforms.any\n      },\n      {\n        src: [dpadNorth, dpadBottomCenterStrip],\n        dest: { value: dpadCenterStrip },\n        xform: xforms.any\n      },\n      {\n        src: {\n          value: dpadCenterStrip,\n          bool: touchpadButton.pressed\n        },\n        dest: {\n          value: paths.actions.ensureFrozen\n        },\n        priority: 100,\n        xform: xforms.copyIfTrue\n      },\n      {\n        src: { value: touchpadFalling },\n        dest: {\n          value: paths.actions.thaw\n        },\n        xform: xforms.copy\n      },\n      {\n        src: {\n          value: dpadEast,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.snapRotateRight\n        },\n        xform: xforms.copyIfTrue,\n        priority: 100\n      },\n      {\n        src: {\n          value: dpadWest,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.snapRotateLeft\n        },\n        xform: xforms.copyIfTrue,\n        priority: 100\n      },\n      {\n        src: {\n          value: triggerRising\n        },\n        dest: { value: paths.actions.rightHand.startTeleport },\n        xform: xforms.copy,\n        priority: 100\n      },\n      {\n        src: { value: device.pose },\n        dest: { value: paths.actions.cursor.pose },\n        xform: xforms.copy\n      },\n      {\n        src: { value: device.pose },\n        dest: { value: paths.actions.rightHand.pose },\n        xform: xforms.copy\n      },\n      {\n        src: { value: touchpadButton.touched },\n        dest: { value: paths.actions.rightHand.thumb },\n        xform: xforms.copy\n      },\n      {\n        src: { value: triggerButton.pressed },\n        dest: { value: paths.actions.rightHand.index },\n        xform: xforms.copy\n      },\n      {\n        src: { value: triggerButton.pressed },\n        dest: { value: paths.actions.rightHand.middleRingPinky },\n        xform: xforms.copy\n      }\n    ],\n\n    [sets.cursorHoveringOnInteractable]: [grabBinding],\n    [sets.cursorHoveringOnUI]: [grabBinding],\n    [sets.cursorHoldingUI]: [dropBinding],\n    [sets.cursorHoveringOnVideo]: [\n      {\n        src: {\n          value: touchpadY,\n          touching: touchpadButton.touched\n        },\n        dest: { value: paths.actions.cursor.mediaVolumeMod },\n        xform: xforms.touch_axis_scroll(-0.1)\n      }\n    ],\n\n    [sets.cursorHoldingInteractable]: [\n      {\n        src: {\n          value: triggerFalling\n        },\n        dest: { value: paths.actions.cursor.drop },\n        xform: xforms.copy,\n        priority: 200\n      },\n      {\n        src: {\n          value: touchpadY,\n          touching: touchpadButton.touched\n        },\n        dest: { value: paths.actions.cursor.modDelta },\n        xform: xforms.touch_axis_scroll()\n      },\n      {\n        src: { value: dpadCenterStrip },\n        priority: 200,\n        xform: xforms.noop\n      }\n    ],\n\n    [sets.rightHandTeleporting]: [\n      {\n        src: {\n          value: triggerFalling\n        },\n        dest: { value: paths.actions.rightHand.stopTeleport },\n        xform: xforms.copy,\n        priority: 100\n      }\n    ],\n\n    [sets.cursorHoldingPen]: [\n      {\n        src: {\n          value: triggerRising\n        },\n        dest: { value: paths.actions.cursor.startDrawing },\n        xform: xforms.copy,\n        priority: 300\n      },\n      {\n        src: {\n          value: triggerFalling\n        },\n        dest: { value: paths.actions.cursor.stopDrawing },\n        xform: xforms.copy,\n        priority: 300\n      },\n      {\n        src: {\n          value: touchpadXForPen,\n          touching: touchpadButton.touched\n        },\n        dest: { value: paths.actions.cursor.scalePenTip },\n        xform: xforms.touch_axis_scroll(0.1, 0.1),\n        priority: 200\n      },\n      {\n        src: {\n          value: touchpadYForPen,\n          touching: touchpadButton.touched\n        },\n        dest: { value: paths.actions.cursor.modDelta },\n        xform: xforms.touch_axis_scroll(1, 0.1),\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadBottomCenterStrip,\n          bool: touchpadFalling\n        },\n        dest: { value: togglePen },\n        xform: xforms.copyIfTrue,\n        priority: 300\n      },\n      {\n        src: { value: togglePen },\n        dest: { value: paths.actions.cursor.drop },\n        xform: xforms.rising,\n        priority: 200\n      },\n      {\n        src: { value: togglePen },\n        dest: { value: paths.actions.pen.remove },\n        xform: xforms.rising,\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadEast,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.cursor.penPrevColor\n        },\n        xform: xforms.copyIfTrue,\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadWest,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.cursor.penNextColor\n        },\n        xform: xforms.copyIfTrue,\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadNorth,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.cursor.undoDrawing\n        },\n        xform: xforms.copyIfTrue,\n        priority: 200\n      }\n    ],\n\n    [sets.cursorHoldingCamera]: [\n      {\n        src: {\n          value: triggerRising\n        },\n        dest: { value: paths.actions.cursor.takeSnapshot },\n        xform: xforms.copy,\n        priority: 300\n      }\n    ]\n  });\n}\n","import { sets } from \"./sets\";\n\nlet leftTeleporter, rightTeleporter;\n\nexport function resolveActionSets() {\n  leftTeleporter = leftTeleporter || document.querySelector(\"#player-left-controller\").components.teleporter;\n  rightTeleporter = rightTeleporter || document.querySelector(\"#player-right-controller\").components.teleporter;\n  const userinput = AFRAME.scenes[0].systems.userinput;\n  const { leftHand, rightHand, rightRemote } = AFRAME.scenes[0].systems.interaction.state;\n\n  userinput.toggleSet(sets.leftHandHoveringOnNothing, !leftHand.held && !leftHand.hovered);\n  userinput.toggleSet(\n    sets.leftHandHoveringOnPen,\n    !leftHand.held &&\n      leftHand.hovered &&\n      leftHand.hovered.components.tags &&\n      leftHand.hovered.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.leftHandHoveringOnCamera,\n    !leftHand.held && leftHand.hovered && leftHand.hovered.components[\"camera-tool\"]\n  );\n  userinput.toggleSet(\n    sets.leftHandHoveringOnInteractable,\n    !leftHand.held &&\n      (leftHand.hovered &&\n        ((leftHand.hovered.components.tags && leftHand.hovered.components.tags.data.offersRemoteConstraint) ||\n          leftHand.hovered.components[\"super-spawner\"]))\n  );\n  userinput.toggleSet(\n    sets.leftHandHoveringOnVideo,\n    !leftHand.held && leftHand.hovered && leftHand.hovered.components[\"media-video\"]\n  );\n  userinput.toggleSet(\n    sets.leftHandHoldingPen,\n    leftHand.held && leftHand.held.components.tags && leftHand.held.components.tags.data.isPen\n  );\n  userinput.toggleSet(sets.leftHandHoldingCamera, leftHand.held && leftHand.held.components[\"camera-tool\"]);\n  userinput.toggleSet(sets.leftHandHoldingInteractable, leftHand.held);\n\n  userinput.toggleSet(\n    sets.rightHandHoveringOnNothing,\n    !rightRemote.held && !rightRemote.hovered && !rightHand.held && !rightHand.hovered\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnPen,\n    !rightHand.held &&\n      rightHand.hovered &&\n      rightHand.hovered.components.tags &&\n      rightHand.hovered.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnCamera,\n    !rightHand.held && rightHand.hovered && rightHand.hovered.components[\"camera-tool\"]\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnInteractable,\n    !rightHand.held &&\n      (rightHand.hovered &&\n        ((rightHand.hovered.components.tags && rightHand.hovered.components.tags.data.offersRemoteConstraint) ||\n          rightHand.hovered.components[\"super-spawner\"]))\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnVideo,\n    !rightHand.held && rightHand.hovered && rightHand.hovered.components[\"media-video\"]\n  );\n  userinput.toggleSet(\n    sets.rightHandHoldingPen,\n    rightHand.held && rightHand.held.components.tags && rightHand.held.components.tags.data.isPen\n  );\n  userinput.toggleSet(sets.rightHandHoldingCamera, rightHand.held && rightHand.held.components[\"camera-tool\"]);\n  userinput.toggleSet(sets.rightHandHoldingInteractable, rightHand.held);\n\n  userinput.toggleSet(\n    sets.cursorHoveringOnNothing,\n    !rightHand.held && !rightHand.hovered && !rightRemote.held && !rightRemote.hovered\n  );\n  userinput.toggleSet(\n    sets.cursorHoveringOnPen,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      rightRemote.hovered.components.tags &&\n      rightRemote.hovered.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.cursorHoveringOnCamera,\n\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      rightRemote.hovered.components[\"camera-tool\"]\n  );\n  userinput.toggleSet(\n    sets.cursorHoveringOnInteractable,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      ((rightRemote.hovered.components.tags && rightRemote.hovered.components.tags.data.offersRemoteConstraint) ||\n        rightRemote.hovered.components[\"super-spawner\"])\n  );\n  userinput.toggleSet(\n    sets.cursorHoveringOnUI,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      (rightRemote.hovered.components.tags &&\n        (rightRemote.hovered.components.tags.data.singleActionButton ||\n          rightRemote.hovered.components.tags.data.holdableButton))\n  );\n  userinput.toggleSet(\n    sets.cursorHoveringOnVideo,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      rightRemote.hovered.components[\"media-video\"]\n  );\n\n  userinput.toggleSet(sets.cursorHoldingNothing, !rightHand.held && !rightRemote.held);\n  userinput.toggleSet(\n    sets.cursorHoldingPen,\n\n    !rightHand.held &&\n      !rightHand.hovered &&\n      rightRemote.held &&\n      rightRemote.held.components.tags &&\n      rightRemote.held.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.cursorHoldingCamera,\n    !rightHand.held && !rightHand.hovered && rightRemote.held && rightRemote.held.components[\"camera-tool\"]\n  );\n  userinput.toggleSet(\n    sets.cursorHoldingUI,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      rightRemote.held &&\n      rightRemote.held.components.tags &&\n      rightRemote.held.components.tags.data.holdableButton\n  );\n  userinput.toggleSet(sets.cursorHoldingInteractable, rightRemote.held);\n\n  userinput.toggleSet(sets.leftHandTeleporting, leftTeleporter.isTeleporting);\n  userinput.toggleSet(sets.rightHandTeleporting, rightTeleporter.isTeleporting);\n\n  userinput.toggleSet(\n    sets.inputFocused,\n    document.activeElement.nodeName === \"INPUT\" || document.activeElement.nodeName === \"TEXTAREA\"\n  );\n}\n","import { paths } from \"../paths\";\n\nexport class GamepadDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n  }\n\n  write(frame) {\n    if (this.gamepad.connected) {\n      this.gamepad.buttons.forEach((button, i) => {\n        const buttonPath = paths.device.gamepad(this.gamepad.index).button(i);\n        frame.setValueType(buttonPath.pressed, !!button.pressed);\n        frame.setValueType(buttonPath.touched, !!button.touched);\n        frame.setValueType(buttonPath.value, button.value);\n      });\n      this.gamepad.axes.forEach((axis, i) => {\n        frame.setValueType(paths.device.gamepad(this.gamepad.index).axis(i), axis);\n      });\n    }\n  }\n}\n","export const gamepadBindings = {};\n","import { sets } from \"./sets\";\nimport { paths } from \"./paths\";\n\nimport { MouseDevice } from \"./devices/mouse\";\nimport { KeyboardDevice } from \"./devices/keyboard\";\nimport { HudDevice } from \"./devices/hud\";\nimport { XboxControllerDevice } from \"./devices/xbox-controller\";\nimport { OculusGoControllerDevice } from \"./devices/oculus-go-controller\";\nimport { GearVRControllerDevice } from \"./devices/gear-vr-controller\";\nimport { OculusTouchControllerDevice } from \"./devices/oculus-touch-controller\";\nimport { DaydreamControllerDevice } from \"./devices/daydream-controller\";\nimport { ViveControllerDevice } from \"./devices/vive-controller\";\nimport { WindowsMixedRealityControllerDevice } from \"./devices/windows-mixed-reality-controller\";\nimport { GyroDevice } from \"./devices/gyro\";\n\nimport { AppAwareMouseDevice } from \"./devices/app-aware-mouse\";\nimport { AppAwareTouchscreenDevice } from \"./devices/app-aware-touchscreen\";\n\nimport { keyboardMouseUserBindings } from \"./bindings/keyboard-mouse-user\";\nimport { touchscreenUserBindings } from \"./bindings/touchscreen-user\";\nimport { keyboardDebuggingBindings } from \"./bindings/keyboard-debugging\";\nimport { oculusTouchUserBindings } from \"./bindings/oculus-touch-user\";\nimport { viveUserBindings } from \"./bindings/vive-user\";\nimport { wmrUserBindings } from \"./bindings/windows-mixed-reality-user\";\nimport { xboxControllerUserBindings } from \"./bindings/xbox-controller-user\";\nimport { daydreamUserBindings } from \"./bindings/daydream-user\";\nimport { cardboardUserBindings } from \"./bindings/cardboard-user\";\n\nimport generate3DOFTriggerBindings from \"./bindings/oculus-go-user\";\nconst oculusGoUserBindings = generate3DOFTriggerBindings(paths.device.oculusgo);\nconst gearVRControllerUserBindings = generate3DOFTriggerBindings(paths.device.gearVRController);\n\nimport { resolveActionSets } from \"./resolve-action-sets\";\nimport { GamepadDevice } from \"./devices/gamepad\";\nimport { gamepadBindings } from \"./bindings/generic-gamepad\";\nimport { getAvailableVREntryTypes, VR_DEVICE_AVAILABILITY } from \"../../utils/vr-caps-detect\";\nimport { ArrayBackedSet } from \"./array-backed-set\";\n\nfunction arrayContentsDiffer(a, b) {\n  if (a.length !== b.length) return true;\n\n  for (let i = 0, il = a.length; i < il; i++) {\n    const elem = a[i];\n    let found = false;\n\n    for (let j = 0, jl = b.length; j < jl; j++) {\n      if (elem === b[j]) {\n        found = true;\n        break;\n      }\n    }\n\n    if (!found) return true;\n  }\n\n  return false;\n}\n\nconst satisfiesPath = (binding, path) => {\n  for (const key in binding.dest) {\n    if (binding.dest[key].indexOf(path) !== -1) {\n      return true;\n    }\n  }\n  return false;\n};\n\nconst satisfyPath = (bindings, path) => {\n  for (const binding of bindings) {\n    if (satisfiesPath(binding, path)) {\n      return true;\n    }\n  }\n  return false;\n};\n\nconst satisfiedBy = (binding, bindings) => {\n  for (const path of Object.values(binding.src)) {\n    if (path.startsWith(\"/device/\")) continue;\n    if (!satisfyPath(bindings, path)) return false;\n  }\n  return true;\n};\n\nfunction dependencySort(mappings) {\n  const unsorted = [];\n  for (const mapping of mappings) {\n    for (const setName in mapping) {\n      for (const binding of mapping[setName]) {\n        unsorted.push(binding);\n      }\n    }\n  }\n\n  const sorted = [];\n  while (unsorted.length > 0) {\n    const binding = unsorted.shift();\n    if (satisfiedBy(binding, sorted)) {\n      sorted.push(binding);\n    } else {\n      unsorted.push(binding);\n    }\n  }\n\n  return sorted;\n}\n\nfunction canMask(masker, masked) {\n  if (masker.priority === undefined) {\n    masker.priority = 0;\n  }\n  if (masked.priority === undefined) {\n    masked.priority = 0;\n  }\n  if (masked.priority >= masker.priority) return false;\n  for (const maskerKey in masker.src) {\n    const maskerPath = masker.src[maskerKey];\n    for (const maskedKey in masked.src) {\n      const maskedPath = masked.src[maskedKey];\n      if (maskedPath.indexOf(maskerPath) !== -1) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nfunction computeMasks(bindings) {\n  const masks = new Array(bindings.length);\n  for (let row = 0; row < bindings.length; row++) {\n    const masksRow = (masks[row] = []);\n    const bindingsRow = bindings[row];\n    for (let col = 0; col < bindings.length; col++) {\n      if (canMask(bindings[col], bindingsRow)) {\n        masksRow.push(col);\n      }\n    }\n  }\n  return masks;\n}\n\nfunction isActive(binding, sets) {\n  for (let i = 0; i < binding.sets.length; i++) {\n    if (sets.includes(binding.sets[i])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction computeExecutionStrategy(sortedBindings, masks, activeSets) {\n  const actives = new Array(sortedBindings.length);\n  for (let row = 0; row < sortedBindings.length; row++) {\n    actives[row] = isActive(sortedBindings[row], activeSets);\n  }\n\n  const masked = new Array(sortedBindings.length);\n  for (let row = 0; row < sortedBindings.length; row++) {\n    const maskedRow = (masked[row] = []);\n    const masksRow = masks[row];\n    for (let col = 0; col < sortedBindings.length; col++) {\n      if (actives[col] && masksRow.indexOf(col) !== -1) {\n        maskedRow.push(col);\n      }\n    }\n  }\n\n  return { actives, masked };\n}\n\nAFRAME.registerSystem(\"userinput\", {\n  get(path) {\n    if (!this.frame) return;\n    return this.frame.get(path);\n  },\n\n  toggleSet(set, value) {\n    this.pendingSetChanges.push(set);\n    this.pendingSetChanges.push(!!value);\n  },\n\n  init() {\n    this.frame = {\n      generation: 0,\n      values: {},\n      generations: {},\n      get: function(path) {\n        if (this.generations[path] !== this.generation) return undefined;\n        return this.values[path];\n      },\n      setValueType: function(path, value) {\n        this.values[path] = value;\n        this.generations[path] = this.generation;\n      },\n      setVector2: function(path, a, b) {\n        const value = this.values[path] || [];\n        value[0] = a;\n        value[1] = b;\n        this.values[path] = value;\n        this.generations[path] = this.generation;\n      },\n      setPose: function(path, pose) {\n        this.setValueType(path, pose);\n      },\n      setMatrix4: function(path, mat4) {\n        // Should we assume the incoming mat4 is safe to store instead of copying values?\n        const value = this.values[path] || new THREE.Matrix4();\n        value.copy(mat4);\n        this.values[path] = value;\n        this.generations[path] = this.generation;\n      }\n    };\n\n    this.prevActiveSets = [];\n    this.activeSets = [sets.global];\n    this.pendingSetChanges = [];\n    this.xformStates = new Map();\n    this.activeDevices = new ArrayBackedSet([new HudDevice()]);\n\n    const isMobile = AFRAME.utils.device.isMobile();\n    const isMobileVR = AFRAME.utils.device.isMobileVR();\n\n    if (!(isMobile || isMobileVR)) {\n      this.activeDevices.add(new MouseDevice());\n      this.activeDevices.add(new AppAwareMouseDevice());\n      this.activeDevices.add(new KeyboardDevice());\n    } else if (!isMobileVR) {\n      this.activeDevices.add(new AppAwareTouchscreenDevice());\n      this.activeDevices.add(new KeyboardDevice());\n      this.activeDevices.add(new GyroDevice());\n    }\n\n    this.isMobile = isMobile;\n    this.isMobileVR = isMobileVR;\n\n    this.registeredMappings = new Set([keyboardDebuggingBindings]);\n    this.registeredMappingsChanged = true;\n\n    const vrGamepadMappings = new Map();\n    vrGamepadMappings.set(WindowsMixedRealityControllerDevice, wmrUserBindings);\n    vrGamepadMappings.set(ViveControllerDevice, viveUserBindings);\n    vrGamepadMappings.set(OculusTouchControllerDevice, oculusTouchUserBindings);\n    vrGamepadMappings.set(OculusGoControllerDevice, oculusGoUserBindings);\n    vrGamepadMappings.set(GearVRControllerDevice, gearVRControllerUserBindings);\n    vrGamepadMappings.set(DaydreamControllerDevice, daydreamUserBindings);\n\n    const nonVRGamepadMappings = new Map();\n    nonVRGamepadMappings.set(XboxControllerDevice, xboxControllerUserBindings);\n    nonVRGamepadMappings.set(GamepadDevice, gamepadBindings);\n\n    const updateBindingsForVRMode = () => {\n      const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n      const isMobile = AFRAME.utils.device.isMobile();\n\n      if (inVRMode) {\n        console.log(\"Using VR bindings.\");\n        this.registeredMappings.delete(isMobile ? touchscreenUserBindings : keyboardMouseUserBindings);\n        // add mappings for all active VR input devices\n        for (let i = 0; i < this.activeDevices.items.length; i++) {\n          const activeDevice = this.activeDevices.items[i];\n          const mapping = vrGamepadMappings.get(activeDevice.constructor);\n          mapping && this.registeredMappings.add(mapping);\n        }\n\n        // Handle cardboard by looking of VR device caps\n        if (isMobile) {\n          getAvailableVREntryTypes().then(availableVREntryTypes => {\n            if (availableVREntryTypes.cardboard === VR_DEVICE_AVAILABILITY.yes) {\n              this.registeredMappings.add(cardboardUserBindings);\n              this.registeredMappingsChanged = true;\n            }\n          });\n        }\n      } else {\n        console.log(\"Using Non-VR bindings.\");\n        // remove mappings for all active VR input devices\n        for (let i = 0; i < this.activeDevices.items.length; i++) {\n          const activeDevice = this.activeDevices.items[i];\n          this.registeredMappings.delete(vrGamepadMappings.get(activeDevice.constructor));\n        }\n        this.registeredMappings.add(isMobile ? touchscreenUserBindings : keyboardMouseUserBindings);\n      }\n\n      for (let i = 0; i < this.activeDevices.items.length; i++) {\n        const activeDevice = this.activeDevices.items[i];\n        const mapping = nonVRGamepadMappings.get(activeDevice.constructor);\n        mapping && this.registeredMappings.add(mapping);\n      }\n\n      this.registeredMappingsChanged = true;\n    };\n\n    const gamepadConnected = e => {\n      let gamepadDevice;\n      for (let i = 0; i < this.activeDevices.items.length; i++) {\n        const activeDevice = this.activeDevices.items[i];\n        if (activeDevice.gamepad && activeDevice.gamepad.index === e.gamepad.index) {\n          console.warn(\"connected already fired for gamepad\", e.gamepad);\n          return; // multiple connect events without a disconnect event\n        }\n      }\n      // HACK Firefox Nightly bug causes corrupt gamepad names for OpenVR, so do startsWith\n      if (e.gamepad.id.startsWith(\"OpenVR Gamepad\") || e.gamepad.id === \"HTC Vive Focus Plus Controller\") {\n        gamepadDevice = new ViveControllerDevice(e.gamepad);\n      } else if (e.gamepad.id.startsWith(\"Oculus Touch\")) {\n        gamepadDevice = new OculusTouchControllerDevice(e.gamepad);\n      } else if (e.gamepad.id.startsWith(\"Spatial Controller\")) {\n        gamepadDevice = new WindowsMixedRealityControllerDevice(e.gamepad);\n      } else if (e.gamepad.id === \"Oculus Go Controller\") {\n        gamepadDevice = new OculusGoControllerDevice(e.gamepad);\n      } else if (e.gamepad.id === \"Gear VR Controller\" || e.gamepad.id === \"HTC Vive Focus Controller\") {\n        gamepadDevice = new GearVRControllerDevice(e.gamepad);\n      } else if (e.gamepad.id === \"Daydream Controller\") {\n        gamepadDevice = new DaydreamControllerDevice(e.gamepad);\n      } else if (e.gamepad.id.toLowerCase().includes(\"xinput\")) {\n        gamepadDevice = new XboxControllerDevice(e.gamepad);\n      } else {\n        gamepadDevice = new GamepadDevice(e.gamepad);\n      }\n\n      this.activeDevices.add(gamepadDevice);\n\n      updateBindingsForVRMode();\n    };\n\n    const gamepadDisconnected = e => {\n      for (let i = 0; i < this.activeDevices.items.length; i++) {\n        const device = this.activeDevices.items[i];\n        if (device.gamepad && device.gamepad.index === e.gamepad.index) {\n          this.registeredMappings.delete(\n            vrGamepadMappings.get(device.constructor) || nonVRGamepadMappings.get(device.constructor)\n          );\n          this.activeDevices.delete(device);\n          return;\n        }\n      }\n\n      updateBindingsForVRMode();\n    };\n\n    window.addEventListener(\"gamepadconnected\", gamepadConnected, false);\n    window.addEventListener(\"gamepaddisconnected\", gamepadDisconnected, false);\n    for (const gamepad of navigator.getGamepads()) {\n      gamepad && gamepadConnected({ gamepad });\n    }\n\n    this.el.sceneEl.addEventListener(\"enter-vr\", updateBindingsForVRMode);\n    this.el.sceneEl.addEventListener(\"exit-vr\", updateBindingsForVRMode);\n\n    updateBindingsForVRMode();\n  },\n\n  maybeToggleXboxMapping() {\n    if (this.isMobile || this.isMobileVR) return;\n\n    const vrAxesSum =\n      (this.get(paths.device.vive.left.axesSum) || 0) +\n      (this.get(paths.device.vive.right.axesSum) || 0) +\n      (this.get(paths.device.leftOculusTouch.axesSum) || 0) +\n      (this.get(paths.device.rightOculusTouch.axesSum) || 0);\n    const mouseMovement = this.get(paths.device.mouse.movementXY);\n    const nonXboxActivity = (mouseMovement[0] || mouseMovement[1]) > 2 || vrAxesSum > 0.5;\n\n    const hasXboxMapping = this.registeredMappings.has(xboxControllerUserBindings);\n\n    if (nonXboxActivity && hasXboxMapping) {\n      this.registeredMappings.delete(xboxControllerUserBindings);\n      this.registeredMappingsChanged = true;\n    } else if (this.get(paths.device.xbox.axesSum) > 0.5 && !hasXboxMapping) {\n      this.registeredMappings.add(xboxControllerUserBindings);\n      this.registeredMappingsChanged = true;\n    }\n  },\n\n  tick2() {\n    this.frame.generation += 1;\n    const registeredMappingsChanged = this.registeredMappingsChanged;\n    if (registeredMappingsChanged) {\n      this.registeredMappingsChanged = false;\n      this.prevSortedBindings = this.sortedBindings;\n      this.sortedBindings = dependencySort(this.registeredMappings);\n      if (!this.prevSortedBindings) {\n        this.prevSortedBindings = this.sortedBindings;\n      }\n      this.masks = computeMasks(this.sortedBindings);\n    }\n\n    this.prevActiveSets.length = 0;\n    for (let i = 0; i < this.activeSets.length; i++) {\n      const item = this.activeSets[i];\n      this.prevActiveSets.push(item);\n    }\n    resolveActionSets();\n    for (let i = 0, l = this.pendingSetChanges.length; i < l; i += 2) {\n      const set = this.pendingSetChanges[i];\n      const value = this.pendingSetChanges[i + 1];\n\n      if (value) {\n        if (!this.activeSets.includes(set)) {\n          this.activeSets.push(set);\n        }\n      } else {\n        const idx = this.activeSets.indexOf(set);\n\n        if (idx > -1) {\n          this.activeSets.splice(idx, 1);\n        }\n      }\n    }\n    const activeSetsChanged = arrayContentsDiffer(this.prevActiveSets, this.activeSets);\n    this.pendingSetChanges.length = 0;\n    if (registeredMappingsChanged || activeSetsChanged || (!this.actives && !this.masked)) {\n      this.prevActives = this.actives;\n      this.prevMasked = this.masked;\n      const { actives, masked } = computeExecutionStrategy(this.sortedBindings, this.masks, this.activeSets);\n      this.actives = actives;\n      this.masked = masked;\n    }\n\n    for (let i = 0; i < this.activeDevices.items.length; i++) {\n      this.activeDevices.items[i].write(this.frame);\n    }\n\n    for (let i = 0; i < this.sortedBindings.length; i++) {\n      if (!this.actives[i] || this.masked[i].length > 0) continue;\n\n      const binding = this.sortedBindings[i];\n\n      let bindingExistedLastFrame = true;\n      if (!registeredMappingsChanged && activeSetsChanged && this.prevSortedBindings) {\n        const j = this.prevSortedBindings.indexOf(binding);\n        bindingExistedLastFrame = j > -1 && this.prevActives[j] && this.prevMasked[j].length === 0;\n      }\n      if (!bindingExistedLastFrame) {\n        this.xformStates.delete(binding);\n      }\n\n      const { src, dest, xform, debug } = binding;\n\n      let oldValue;\n\n      if (debug) {\n        oldValue = this.frame.get(dest.value);\n      }\n\n      const newState = xform(this.frame, src, dest, this.xformStates.get(binding));\n\n      if (debug) {\n        // Note for now this only works with bindings that have { value: } sources and dests\n        console.log(\n          `${JSON.stringify(src.value)} (${src.value && JSON.stringify(this.frame.get(src.value))}) to ${JSON.stringify(\n            dest\n          )}: ${oldValue} -> ${this.frame.get(dest.value)}`\n        );\n      }\n\n      if (newState !== undefined) {\n        this.xformStates.set(binding, newState);\n      }\n    }\n\n    this.prevSortedBindings = this.sortedBindings;\n\n    this.maybeToggleXboxMapping();\n  }\n});\n","import { paths } from \"./userinput/paths\";\n\nAFRAME.registerSystem(\"camera-mirror\", {\n  init() {\n    this._onWindowResize = this._onWindowResize.bind(this);\n    window.addEventListener(\"resize\", this._onWindowResize, false);\n  },\n\n  tick() {\n    const userinput = this.el.systems.userinput;\n\n    if (userinput.get(paths.actions.camera.exitMirror) && this.mirrorEl) {\n      this.unmirrorCameraAtEl(this.mirrorEl);\n    }\n  },\n\n  // Adds a camera under el, and starts mirroring\n  mirrorCameraAtEl(el) {\n    // TODO probably should explicitly check for immersive mode here.\n    if (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR()) return;\n    if (this.mirrorEl && this.mirrorEl !== el) this.unmirrorCameraAtEl(this.mirrorEl);\n\n    this.mirrorEl = el;\n    this.mirrorCamera = new THREE.PerspectiveCamera(80, window.innerWidth / window.innerHeight, 0.1, 30000);\n    this.mirrorCamera.rotation.set(0, Math.PI, 0);\n    el.setObject3D(\"mirror-camera\", this.mirrorCamera);\n\n    document.body.classList.add(\"mirrored-camera\");\n\n    if (!this.directRenderFunc) {\n      this._patchRenderFunc();\n    }\n\n    this.mirrorEl.emit(\"mirrored\", { el: this.mirrorEl });\n    this.mirrorEl.sceneEl.addState(\"mirroring\");\n  },\n\n  unmirrorCameraAtEl(el) {\n    if (this.mirrorEl !== el) return;\n\n    el.removeObject3D(\"mirror-camera\");\n    document.body.classList.remove(\"mirrored-camera\");\n    const oldEl = this.mirrorEl;\n\n    this.mirrorEl = null;\n    this.mirrorCamera = null;\n\n    oldEl.emit(\"unmirrored\", { el: oldEl });\n    oldEl.sceneEl.removeState(\"mirroring\");\n  },\n\n  getMirroredCameraEl() {\n    return this.mirrorEl;\n  },\n\n  _onWindowResize() {\n    if (!this.mirrorCamera) return;\n    this.mirrorCamera.aspect = window.innerWidth / window.innerHeight;\n    this.mirrorCamera.updateProjectionMatrix();\n    this.el.sceneEl.renderer.setSize(window.innerWidth, window.innerHeight);\n  },\n\n  _patchRenderFunc() {\n    const headEl = document.getElementById(\"player-head\");\n    const hudEl = document.getElementById(\"player-hud\");\n    const tempHeadScale = new THREE.Vector3();\n    const renderer = this.el.renderer;\n    const playerHead = headEl && headEl.object3D;\n    const playerHud = hudEl && hudEl.object3D;\n\n    this.directRenderFunc = renderer.render;\n\n    this.el.sceneEl.renderer.render = (scene, camera, renderTarget) => {\n      const wasVREnabled = renderer.vr.enabled;\n\n      if (wasVREnabled || renderTarget || !this.mirrorCamera) {\n        this.directRenderFunc.call(renderer, scene, camera, renderTarget);\n        if (!this.mirrorCamera || renderTarget) return;\n      }\n\n      if (playerHead) {\n        tempHeadScale.copy(playerHead.scale);\n        playerHead.scale.set(1, 1, 1);\n        playerHead.updateMatrices(true, true);\n        playerHead.updateMatrixWorld(true, true);\n      }\n\n      let playerHudWasVisible;\n\n      if (playerHud) {\n        playerHudWasVisible = playerHud.visible;\n        playerHud.visible = false;\n        if (this.el.sceneEl.systems[\"post-physics\"]) {\n          this.el.sceneEl.systems[\"post-physics\"].spriteSystem.mesh.visible = false;\n        }\n      }\n      renderer.vr.enabled = false;\n      const tmpOnAfterRender = this.el.object3D.onAfterRender;\n      delete this.el.object3D.onAfterRender;\n      this.directRenderFunc.call(renderer, scene, this.mirrorCamera);\n      this.el.object3D.onAfterRender = tmpOnAfterRender;\n      renderer.vr.enabled = wasVREnabled;\n      if (playerHead) {\n        playerHead.scale.copy(tempHeadScale);\n        playerHead.updateMatrices(true, true);\n        playerHead.updateMatrixWorld(true);\n      }\n      if (playerHud) {\n        playerHud.visible = playerHudWasVisible;\n        if (this.el.sceneEl.systems[\"post-physics\"]) {\n          this.el.sceneEl.systems[\"post-physics\"].spriteSystem.mesh.visible = true;\n        }\n      }\n    };\n  }\n});\n","import { paths } from \"./paths\";\nimport qsTruthy from \"../../utils/qs_truthy\";\n\nconst PATHS_TO_SHOW = [\"/actions/\", \"/device/\"];\n\nAFRAME.registerSystem(\"userinput-debug\", {\n  active: true,\n\n  tick() {\n    if (!this.active) return;\n\n    const userinput = AFRAME.scenes[0].systems.userinput;\n\n    if (this.userinputFrameStatus) {\n      const replacer = (k, v) => {\n        if (typeof v === \"number\") {\n          return `${v >= 0 ? \"+\" : \"\"}${v.toFixed(3)}`;\n        }\n        return v;\n      };\n      const pathsOutput = [];\n      const { frame } = userinput;\n      for (const key in frame.values) {\n        if (!frame.get(key)) continue;\n        if (!PATHS_TO_SHOW.some(x => key.startsWith(x))) continue;\n        let val = JSON.stringify(frame.get(key), replacer);\n        if (val) val = val.replace(/{\"(\\w{3,})\":/g, '{\\n  \"$1\":').replace(/,\"(\\w{3,})\":/g, ',\\n  \"$1\":');\n        pathsOutput.push(`${key} -> ${val}`);\n      }\n      this.userinputFrameStatus.textContent = pathsOutput.join(\"\\n\");\n    }\n\n    if (userinput.get(paths.actions.logDebugFrame)) {\n      if (qsTruthy(\"userinput_debug\") && !this.userinputFrameStatus) {\n        this.userinputFrameStatus = document.createElement(\"div\");\n        this.userinputFrameStatus.id = \"userinput-frame-status\";\n        this.userinputFrameStatus.style = `\n          position: absolute;\n          z-index: 2;\n          left: 0; bottom: 0;\n          background: white;\n          white-space: pre;\n          font-family: monospace;\n          font-size: 8pt;\n        `;\n        document.body.append(this.userinputFrameStatus);\n      }\n\n      console.log(userinput);\n      console.log(\"sorted\", userinput.sortedBindings);\n      console.log(\"actives\", userinput.actives);\n      console.log(\"masks\", userinput.masks);\n      console.log(\"masked\", userinput.masked);\n      console.log(\"devices\", userinput.activeDevices);\n      console.log(\"activeSets\", userinput.activeSets);\n      console.log(\"frame\", userinput.frame);\n      console.log(\"xformStates\", userinput.xformStates);\n      const { sortedBindings, actives, masked } = userinput;\n      for (const i in sortedBindings) {\n        const sb = [];\n        if (masked[i].length > 0) {\n          for (const j of masked[i]) {\n            sb.push(JSON.stringify(sortedBindings[j]));\n          }\n        }\n\n        if (this.logBindings) {\n          console.log(\n            \"binding: \",\n            i,\n            \"\\n\",\n            sortedBindings[i],\n            \"\\n\",\n            \"dest: \",\n            sortedBindings[i].dest && Object.values(sortedBindings[i].dest),\n            \"\\n\",\n            \"active: \",\n            actives[i],\n            \"\\n\",\n            \"maskedBy: \",\n            masked[i],\n            \"\\n\",\n            sb.join(\"\\n\"),\n            \"\\n\"\n          );\n        }\n      }\n    }\n  }\n});\n","import { paths } from \"./userinput/paths\";\nimport { SOURCES } from \"../storage/media-search-store\";\n\nconst MEDIA_SEARCH_PATHS = [\n  paths.actions.mediaSearch1,\n  paths.actions.mediaSearch2,\n  paths.actions.mediaSearch3,\n  paths.actions.mediaSearch4,\n  paths.actions.mediaSearch5,\n  paths.actions.mediaSearch6,\n  paths.actions.mediaSearch7,\n  paths.actions.mediaSearch8\n];\n\n// Every frame, looks for input paths that trigger UI-relevant events and handles them.\nAFRAME.registerSystem(\"ui-hotkeys\", {\n  init() {\n    this.mediaSearchStore = window.APP.mediaSearchStore;\n  },\n\n  tick: function() {\n    if (!this.userinput) {\n      this.userinput = this.el.systems.userinput;\n    }\n\n    if (this.userinput.get(paths.actions.focusChat)) {\n      this.focusChat();\n    }\n\n    if (this.userinput.get(paths.actions.focusChatCommand)) {\n      this.focusChat(\"/\");\n    }\n\n    if (this.userinput.get(paths.actions.mediaExit)) {\n      if (window.APP.history.location.state && window.APP.history.location.state.value !== \"avatar-editor\") {\n        this.mediaSearchStore.pushExitMediaBrowserHistory();\n      }\n\n      this.el.emit(\"action_exit_watch\");\n    }\n\n    for (let i = 0; i < MEDIA_SEARCH_PATHS.length; i++) {\n      if (this.userinput.get(MEDIA_SEARCH_PATHS[i])) {\n        this.mediaSearchStore.sourceNavigate(SOURCES[i]);\n      }\n    }\n\n    if (this.userinput.get(paths.actions.toggleCamera)) {\n      this.el.emit(\"action_toggle_camera\");\n    }\n  },\n\n  focusChat: function(prefix) {\n    const target = document.querySelector(\".chat-focus-target\");\n    if (!target) return;\n\n    target.focus();\n\n    if (prefix) {\n      target.value = prefix;\n    }\n  }\n});\n","import { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\nexport class CursorTargettingSystem {\n  constructor() {\n    this.targets = [];\n    this.setDirty = this.setDirty.bind(this);\n    this.dirty = true;\n\n    // TODO: Use the MutationRecords passed into the callback function to determine added/removed nodes!\n    this.observer = new MutationObserver(this.setDirty);\n\n    waitForDOMContentLoaded().then(() => {\n      const scene = document.querySelector(\"a-scene\");\n      this.rightRemote = document.querySelector(\"#cursor-controller\");\n      this.observer.observe(scene, { childList: true, attributes: true, subtree: true });\n      scene.addEventListener(\"object3dset\", this.setDirty);\n      scene.addEventListener(\"object3dremove\", this.setDirty);\n    });\n  }\n\n  setDirty() {\n    this.dirty = true;\n  }\n\n  tick(t) {\n    if (this.dirty) {\n      this.populateEntities(this.targets);\n      this.dirty = false;\n    }\n\n    this.rightRemote.components[\"cursor-controller\"].tick2(t);\n  }\n\n  populateEntities(targets) {\n    targets.length = 0;\n    // TODO: Do not querySelectorAll on the entire scene every time anything changes!\n    const els = AFRAME.scenes[0].querySelectorAll(\".collidable, .interactable, .ui\");\n    for (let i = 0; i < els.length; i++) {\n      if (els[i].object3D) {\n        targets.push(els[i].object3D);\n      }\n    }\n  }\n\n  remove() {\n    this.observer.disconnect();\n    AFRAME.scenes[0].removeEventListener(\"object3dset\", this.setDirty);\n    AFRAME.scenes[0].removeEventListener(\"object3dremove\", this.setDirty);\n  }\n}\n","/* global NAF AFRAME */\nconst ACTIVATION_STATE = require(\"aframe-physics-system/src/constants\").ACTIVATION_STATE;\n\nexport class ConstraintsSystem {\n  constructor() {\n    this.prevLeftHand = {\n      held: null,\n      hovered: null,\n      spawning: null\n    };\n    this.prevRightHand = {\n      held: null,\n      hovered: null,\n      spawning: null\n    };\n    this.prevRightRemote = {\n      held: null,\n      hovered: null,\n      spawning: null\n    };\n  }\n\n  tickInteractor(constraintTag, entityId, state, prevState) {\n    if (prevState.held === state.held) {\n      if (!state.spawning && prevState.spawning && state.held && state.held.components.tags.data[constraintTag]) {\n        state.held.setAttribute(\"ammo-body\", {\n          type: \"dynamic\",\n          activationState: ACTIVATION_STATE.DISABLE_DEACTIVATION\n        });\n        state.held.setAttribute(\"ammo-constraint__\" + entityId, { target: \"#\" + entityId });\n      }\n      return;\n    }\n    if (prevState.held && prevState.held.components.tags.data[constraintTag]) {\n      prevState.held.removeAttribute(\"ammo-constraint__\" + entityId);\n      let hasAnotherConstraint = false;\n      for (const componentName in prevState.held.components) {\n        if (componentName.startsWith(\"ammo-constraint\")) {\n          hasAnotherConstraint = true;\n        }\n      }\n      if (!hasAnotherConstraint) {\n        prevState.held.setAttribute(\"ammo-body\", { activationState: ACTIVATION_STATE.ACTIVE_TAG });\n      }\n    }\n    if (!state.spawning && state.held && state.held.components.tags.data[constraintTag]) {\n      if (!state.held.components[\"networked\"] || NAF.utils.isMine(state.held) || NAF.utils.takeOwnership(state.held)) {\n        state.held.setAttribute(\"ammo-body\", {\n          type: \"dynamic\",\n          activationState: ACTIVATION_STATE.DISABLE_DEACTIVATION\n        });\n        state.held.setAttribute(\"ammo-constraint__\" + entityId, { target: \"#\" + entityId });\n      } else {\n        console.log(\"Failed to obtain ownership while trying to create constraint on networked object.\");\n      }\n    }\n  }\n\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n\n    this.tickInteractor(\n      \"offersHandConstraint\",\n      interaction.options.leftHand.entity.id,\n      interaction.state.leftHand,\n      this.prevLeftHand\n    );\n    this.tickInteractor(\n      \"offersHandConstraint\",\n      interaction.options.rightHand.entity.id,\n      interaction.state.rightHand,\n      this.prevRightHand\n    );\n    this.tickInteractor(\n      \"offersRemoteConstraint\",\n      interaction.options.rightRemote.entity.id,\n      interaction.state.rightRemote,\n      this.prevRightRemote\n    );\n\n    Object.assign(this.prevLeftHand, interaction.state.leftHand);\n    Object.assign(this.prevRightHand, interaction.state.rightHand);\n    Object.assign(this.prevRightRemote, interaction.state.rightRemote);\n  }\n}\n","/* global THREE AFRAME */\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\nconst COLLISION_FILTER_MASK_HANDS = { collisionFilterMask: COLLISION_LAYERS.HANDS };\nexport const distanceBetweenStretchers = (() => {\n  const a = new THREE.Vector3();\n  const b = new THREE.Vector3();\n  return function distanceBetweenStretchers(obj1, obj2) {\n    obj1.getWorldPosition(a);\n    obj2.getWorldPosition(b);\n    return a.distanceTo(b);\n  };\n})();\n\nexport class TwoPointStretchingSystem {\n  constructor() {\n    this.initialScale = new THREE.Vector3();\n  }\n\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const { leftHand, rightHand, rightRemote } = interaction.state;\n\n    const stretching = leftHand.held && (leftHand.held === rightHand.held || leftHand.held === rightRemote.held);\n    let leftStretcher, rightStretcher;\n    if (stretching) {\n      leftStretcher = interaction.options.leftHand.entity.object3D;\n      rightStretcher =\n        leftHand.held === rightHand.held\n          ? interaction.options.rightHand.entity.object3D\n          : interaction.options.rightRemote.entity.object3D;\n      if (\n        leftStretcher !== this.previousLeftStretcher ||\n        rightStretcher !== this.previousRightStretcher ||\n        leftHand.held !== this.stretched\n      ) {\n        this.initialStretchDistance = distanceBetweenStretchers(leftStretcher, rightStretcher);\n        this.stretched = leftHand.held;\n        this.initialScale.copy(this.stretched.object3D.scale);\n        if (this.stretched.components[\"ammo-body\"]) {\n          this.stretched.setAttribute(\"ammo-body\", COLLISION_FILTER_MASK_HANDS);\n        }\n      }\n\n      this.stretched.object3D.scale\n        .copy(this.initialScale)\n        .multiplyScalar(distanceBetweenStretchers(leftStretcher, rightStretcher) / this.initialStretchDistance);\n      this.stretched.object3D.matrixNeedsUpdate = true;\n    }\n\n    this.previousLeftStretcher = leftStretcher;\n    this.previousRightStretcher = rightStretcher;\n  }\n}\n","export class SingleActionButtonSystem {\n  tick() {\n    this.didInteractThisFrame = false;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const hovered = interaction.state.rightRemote.hovered;\n    if (\n      hovered &&\n      userinput.get(interaction.options.rightRemote.grabPath) &&\n      hovered.components.tags &&\n      hovered.components.tags.data.singleActionButton\n    ) {\n      this.didInteractThisFrame = true;\n      hovered.object3D.dispatchEvent({\n        type: \"interact\",\n        object3D: interaction.options.rightRemote.entity.object3D\n      });\n    }\n  }\n}\n\nexport class HoldableButtonSystem {\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const held = interaction.state.rightRemote.held;\n\n    if (this.prevHeld && this.prevHeld !== held) {\n      this.prevHeld.object3D.dispatchEvent({\n        type: \"holdable-button-up\",\n        object3D: interaction.options.rightRemote.entity.object3D\n      });\n    }\n    if (held && this.prevHeld !== held) {\n      held.object3D.dispatchEvent({\n        type: \"holdable-button-down\",\n        object3D: interaction.options.rightRemote.entity.object3D\n      });\n    }\n\n    this.prevHeld = held;\n  }\n}\n\nconst hasButtonComponent = (function() {\n  const BUTTON_COMPONENT_NAMES = [\"icon-button\", \"text-button\", \"pin-networked-object-button\"];\n  return function hasButtonComponent(components) {\n    for (let i = 0; i < BUTTON_COMPONENT_NAMES.length; i++) {\n      if (components[BUTTON_COMPONENT_NAMES[i]]) {\n        return true;\n      }\n    }\n    return false;\n  };\n})();\n\nfunction getHoverableButton(hovered) {\n  if (!hovered) return null;\n  if (hasButtonComponent(hovered.components)) return hovered;\n  if (hovered.children) {\n    // TODO: not sure if looping thru children here is desireable, but we did this to accomodate the rounded-button mixins\n    for (let i = 0; i < hovered.children.length; i++) {\n      if (hasButtonComponent(hovered.children[i].components)) {\n        return hovered.children[i];\n      }\n    }\n  }\n  return null;\n}\n\nfunction dispatch(el, event) {\n  el.object3D.dispatchEvent(event);\n  if (el.children) {\n    for (let i = 0; i < el.children.length; i++) {\n      if (hasButtonComponent(el.children[i].components)) {\n        el.children[i].object3D.dispatchEvent(event);\n      }\n    }\n  }\n}\n\nconst HOVERED = { type: \"hovered\" };\nconst UNHOVERED = { type: \"unhovered\" };\nexport class HoverButtonSystem {\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const button = getHoverableButton(interaction.state.rightRemote.hovered);\n\n    if (this.prevButton && this.prevButton !== button) {\n      dispatch(this.prevButton, UNHOVERED);\n    }\n\n    if (button && this.prevButton !== button) {\n      dispatch(button, HOVERED);\n    }\n\n    this.prevButton = button;\n  }\n}\n","function getSpecificHoverMenu(el) {\n  return (\n    el.components[\"hover-menu\"] ||\n    el.components[\"hover-menu__video\"] ||\n    el.components[\"hover-menu__camera\"] ||\n    el.components[\"hover-menu__hubs-item\"] ||\n    el.components[\"hover-menu__link\"]\n  );\n}\n\nfunction findHoverMenu(hovered) {\n  if (!hovered) return null;\n  const hoverMenu = getSpecificHoverMenu(hovered);\n  if (hoverMenu) {\n    return hoverMenu;\n  }\n  if (!(hovered.components.tags && hovered.components.tags.data.isHoverMenuChild)) {\n    return null;\n  }\n  let el = hovered.parentNode;\n  while (!getSpecificHoverMenu(el)) {\n    el = el.parentNode;\n  }\n  return getSpecificHoverMenu(el);\n}\n\nexport class HoverMenuSystem {\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const hoverMenu = findHoverMenu(interaction.state.rightRemote.hovered);\n\n    if (this.prevHoverMenu && this.prevHoverMenu !== hoverMenu) {\n      this.prevHoverMenu.hovering = false;\n      this.prevHoverMenu.applyHoverState();\n    }\n\n    if (hoverMenu && this.prevHoverMenu !== hoverMenu) {\n      hoverMenu.hovering = true;\n      hoverMenu.applyHoverState();\n    }\n\n    this.prevHoverMenu = hoverMenu;\n  }\n}\n","import { addMedia } from \"../utils/media-utils\";\nimport { ObjectContentOrigins } from \"../object-types\";\n\n// WARNING: This system mutates interaction system state!\nexport class SuperSpawnerSystem {\n  maybeSpawn(state, entity, grabPath) {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const superSpawner = state.hovered && state.hovered.components[\"super-spawner\"];\n    if (superSpawner && !superSpawner.cooldownTimeout && userinput.get(grabPath)) {\n      this.performSpawn(state, entity, grabPath, userinput, superSpawner);\n    }\n  }\n\n  performSpawn(state, entity, grabPath, userinput, superSpawner) {\n    entity.object3D.updateMatrices();\n    entity.object3D.matrix.decompose(entity.object3D.position, entity.object3D.quaternion, entity.object3D.scale);\n    const data = superSpawner.data;\n    const spawnedEntity = addMedia(\n      data.src,\n      data.template,\n      ObjectContentOrigins.SPAWNER,\n      data.resolve,\n      data.resize,\n      false\n    ).entity;\n    spawnedEntity.object3D.position.copy(\n      data.useCustomSpawnPosition ? data.spawnPosition : superSpawner.el.object3D.position\n    );\n    spawnedEntity.object3D.rotation.copy(\n      data.useCustomSpawnRotation ? data.spawnRotation : superSpawner.el.object3D.rotation\n    );\n    spawnedEntity.object3D.scale.copy(data.useCustomSpawnScale ? data.spawnScale : superSpawner.el.object3D.scale);\n    spawnedEntity.object3D.matrixNeedsUpdate = true;\n    state.held = spawnedEntity;\n\n    superSpawner.activateCooldown();\n    state.spawning = true;\n    // WARNING: previously used waitForEvent which is semantically different than\n    // entity.addEventListener(\"body-loaded\", ...) and adding a callback fn via\n    // addEventListener will not work unless the callback function wraps its code in setTimeout(()=>{...}, 0)\n    spawnedEntity.addEventListener(\n      \"body-loaded\",\n      () => {\n        setTimeout(() => {\n          state.spawning = false;\n          spawnedEntity.object3D.position.copy(\n            data.useCustomSpawnPosition ? data.spawnPosition : superSpawner.el.object3D.position\n          );\n          if (data.centerSpawnedObject) {\n            spawnedEntity.body.position.copy(entity.object3D.position);\n          }\n          spawnedEntity.object3D.matrixNeedsUpdate = true;\n        });\n      },\n      { once: true }\n    );\n  }\n\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    this.maybeSpawn(\n      interaction.state.leftHand,\n      interaction.options.leftHand.entity,\n      interaction.options.leftHand.grabPath\n    );\n    this.maybeSpawn(\n      interaction.state.rightHand,\n      interaction.options.rightHand.entity,\n      interaction.options.rightHand.grabPath\n    );\n    this.maybeSpawn(\n      interaction.state.rightRemote,\n      interaction.options.rightRemote.entity,\n      interaction.options.rightRemote.grabPath\n    );\n  }\n}\n","import { paths } from \"./userinput/paths\";\nimport { distanceBetweenStretchers } from \"./two-point-stretching-system\";\n\nfunction copyState(previous, current, isTeleporting) {\n  previous.held = current.held;\n  previous.hovered = current.hovered;\n  previous.isTeleporting = isTeleporting;\n}\n\n// TODO: These strengths should be written into bindings, since vibration strength varies across devices.\nconst STRENGTH = {\n  DROP: 0.1,\n  PICKUP: 0.2,\n  BUTTON_PRESSED: 0.2,\n  HOVER: 0.08,\n  STRETCH_BASE: 0.05,\n  STRETCH_DISTANCE: 0.2,\n  TELEPORTING: 0.08,\n  TELEPORTED: 0.2\n};\n\nfunction determineStrength(previous, current, isTeleporting) {\n  if (previous.held && !current.held) {\n    return STRENGTH.DROP;\n  } else if (!previous.held && current.held) {\n    return STRENGTH.PICKUP;\n  } else if (!previous.hovered && current.hovered) {\n    return STRENGTH.HOVER;\n  } else if (isTeleporting) {\n    return STRENGTH.TELEPORTING;\n  } else if (previous.isTeleporting && !isTeleporting) {\n    return STRENGTH.TELEPORTED;\n  } else {\n    return 0;\n  }\n}\n\nfunction determineStretchStrength(stretchSystem) {\n  if (!stretchSystem.stretcherLeft || !stretchSystem.stretcherRight) {\n    return 0;\n  }\n\n  return THREE.Math.clamp(\n    STRENGTH.STRETCH_BASE +\n      STRENGTH.STRETCH_DISTANCE *\n        Math.abs(\n          distanceBetweenStretchers(stretchSystem.stretcherLeft, stretchSystem.stretcherRight) -\n            stretchSystem.initialStretchDistance\n        ),\n    0,\n    0.5\n  );\n}\n\nexport class HapticFeedbackSystem {\n  constructor() {\n    this.state = {\n      rightHand: {\n        held: null,\n        hovered: null,\n        isTeleporting: false\n      },\n      rightRemote: {\n        held: null,\n        hovered: null,\n        isTeleporting: false\n      },\n      leftHand: {\n        held: null,\n        hovered: null,\n        isTeleporting: false\n      }\n    };\n  }\n\n  tick(twoPointStretchingSystem, didClickButton) {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const leftActuator = userinput.get(paths.haptics.actuators.left);\n    const rightActuator = userinput.get(paths.haptics.actuators.right);\n    if (!leftActuator && !rightActuator) {\n      return;\n    }\n\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const { leftHand, rightHand, rightRemote } = interaction.state;\n    this.leftTeleporter =\n      this.leftTeleporter || document.querySelector(\"#player-left-controller\").components.teleporter;\n    this.rightTeleporter =\n      this.rightTeleporter || document.querySelector(\"#player-right-controller\").components.teleporter;\n\n    const leftHandStrength = determineStrength(this.state.leftHand, leftHand, this.leftTeleporter.isTeleporting);\n    const rightHandStrength = determineStrength(this.state.rightHand, rightHand, this.rightTeleporter.isTeleporting);\n    const rightRemoteStrength = determineStrength(this.state.rightRemote, rightRemote, false);\n    const buttonPressedStrength = didClickButton ? STRENGTH.BUTTON_PRESSED : 0;\n    const stretchingStrength = determineStretchStrength(twoPointStretchingSystem);\n\n    const leftStrength = Math.max(leftHandStrength, stretchingStrength);\n    const rightStrength = Math.max(rightHandStrength, rightRemoteStrength, stretchingStrength, buttonPressedStrength);\n\n    if (leftStrength && leftActuator) {\n      leftActuator.pulse(leftStrength, 15);\n    }\n\n    if (rightStrength && rightActuator) {\n      rightActuator.pulse(rightStrength, 15);\n    }\n\n    copyState(this.state.rightHand, rightHand, this.rightTeleporter.isTeleporting);\n    copyState(this.state.leftHand, leftHand, this.leftTeleporter.isTeleporting);\n    copyState(this.state.rightRemote, rightRemote, false);\n  }\n}\n","export class LobbyCameraSystem {\n  tick() {\n    const el = document.querySelector(\"[scene-preview-camera]\");\n    if (el) {\n      el.components[\"scene-preview-camera\"].tick2();\n    }\n  }\n}\n","import { CursorTargettingSystem } from \"./cursor-targetting-system\";\nimport { ConstraintsSystem } from \"./constraints-system\";\nimport { TwoPointStretchingSystem } from \"./two-point-stretching-system\";\nimport { SingleActionButtonSystem, HoldableButtonSystem, HoverButtonSystem } from \"./button-systems\";\nimport { HoverMenuSystem } from \"./hover-menu-system\";\nimport { SuperSpawnerSystem } from \"./super-spawner-system\";\nimport { HapticFeedbackSystem } from \"./haptic-feedback-system\";\nimport { SoundEffectsSystem } from \"./sound-effects-system\";\nimport { LobbyCameraSystem } from \"./lobby-camera-system\";\n\nAFRAME.registerSystem(\"hubs-systems\", {\n  init() {\n    this.cursorTargettingSystem = new CursorTargettingSystem();\n    this.constraintsSystem = new ConstraintsSystem();\n    this.twoPointStretchingSystem = new TwoPointStretchingSystem();\n    this.singleActionButtonSystem = new SingleActionButtonSystem();\n    this.holdableButtonSystem = new HoldableButtonSystem();\n    this.hoverButtonSystem = new HoverButtonSystem();\n    this.hoverMenuSystem = new HoverMenuSystem();\n    this.superSpawnerSystem = new SuperSpawnerSystem();\n    this.hapticFeedbackSystem = new HapticFeedbackSystem();\n    this.soundEffectsSystem = new SoundEffectsSystem();\n    this.lobbyCameraSystem = new LobbyCameraSystem();\n  },\n\n  tick(t) {\n    const systems = AFRAME.scenes[0].systems;\n    systems.userinput.tick2();\n    systems.interaction.tick2(this.soundEffectsSystem);\n    this.superSpawnerSystem.tick();\n    this.cursorTargettingSystem.tick(t);\n    this.constraintsSystem.tick();\n    this.twoPointStretchingSystem.tick();\n    this.singleActionButtonSystem.tick();\n    this.holdableButtonSystem.tick();\n    this.hoverButtonSystem.tick();\n    this.hoverMenuSystem.tick();\n    this.hapticFeedbackSystem.tick(this.twoPointStretchingSystem, this.singleActionButtonSystem.didInteractThisFrame);\n    this.soundEffectsSystem.tick();\n    this.lobbyCameraSystem.tick();\n  },\n\n  remove() {\n    this.cursorTargettingSystem.remove();\n  }\n});\n","import qsTruthy from \"../utils/qs_truthy\";\n\nAFRAME.registerSystem(\"capture-system\", {\n  init() {\n    this._gotAudioTrack = false;\n    this._recorderTimeout = null;\n  },\n\n  _initRecorder() {\n    if (!this.available()) return;\n\n    this._stream = new MediaStream();\n\n    const video = this.el.canvas.captureStream().getVideoTracks()[0];\n    this._stream.addTrack(video);\n\n    this._recorder = new MediaRecorder(this._stream, { mimeType: \"video/webm; codecs=vp8\" });\n\n    const chunks = [];\n\n    this._recorder.ondataavailable = e => {\n      chunks.push(e.data);\n    };\n    this._recorder.onstop = () => {\n      if (chunks.length === 0) return;\n      const mimeType = chunks[0].type;\n      const blob = new Blob(chunks, { type: mimeType });\n      chunks.length = 0;\n      this.el.emit(\"add_media\", new File([blob], \"capture\", { type: mimeType }));\n    };\n  },\n\n  available() {\n    return qsTruthy(\"video_capture\") && window.MediaRecorder && MediaRecorder.isTypeSupported(\"video/webm; codecs=vp8\");\n  },\n\n  started() {\n    return this._recorder && this._recorder.state !== \"inactive\";\n  },\n\n  _tryAddingAudioTrack() {\n    if (this._gotAudioTrack || !this.el.audioListener) return;\n\n    const listener = this.el.audioListener;\n    const destination = listener.context.createMediaStreamDestination();\n    listener.getInput().connect(destination);\n    const audio = destination.stream.getAudioTracks()[0];\n\n    this._stream.addTrack(audio);\n    this._gotAudioTrack = true;\n  },\n\n  start() {\n    if (!this._recorder) {\n      this._initRecorder();\n    }\n\n    // The scene doesn't get an audioListener until something in the scene is playing audio.\n    // So we have to get the audio track lazily.\n    this._tryAddingAudioTrack();\n\n    if (!this.started()) {\n      this._recorder.start();\n      this._recorderTimeout = setTimeout(() => {\n        if (this.started()) {\n          this._recorder.stop();\n        }\n      }, 15000);\n    }\n  },\n\n  stop() {\n    if (this.started()) {\n      clearTimeout(this._recorderTimeout);\n      this._recorder.stop();\n    }\n  }\n});\n","/* global AFRAME THREE */\n\n// See doc/spritesheet-generation.md for information about this spritesheet\nimport spritesheet from \"../assets/images/spritesheets/sprite-system-spritesheet.json\";\nimport { createImageTexture } from \"../utils/media-utils\";\nimport spritesheetPng from \"../assets/images/spritesheets/sprite-system-spritesheet.png\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport vert from \"./sprites/sprite.vert\";\nimport frag from \"./sprites/sprite.frag\";\n\nconst multiviewVertPrefix = [\n  // GLSL 3.0 conversion\n  \"#version 300 es\",\n  \"#define attribute in\",\n  \"#define varying out\",\n  \"#define texture2D texture\",\n  \"#extension GL_OVR_multiview : require\",\n  \"layout(num_views = 2) in;\",\n  \"uniform mat4 modelViewMatrix;\",\n  \"uniform mat4 modelViewMatrix2;\",\n  \"#define modelViewMatrix (gl_ViewID_OVR==0u?modelViewMatrix:modelViewMatrix2)\",\n  \"uniform mat4 projectionMatrix;\",\n  \"uniform mat4 projectionMatrix2;\",\n  \"#define projectionMatrix (gl_ViewID_OVR==0u?projectionMatrix:projectionMatrix2)\",\n  \"\"\n].join(\"\\n\");\nconst nonmultiviewVertPrefix = [\"uniform mat4 modelViewMatrix;\", \"uniform mat4 projectionMatrix;\", \"\"].join(\"\\n\");\n\nconst multiviewFragPrefix = [\n  \"#version 300 es\",\n  \"#define varying in\",\n  \"out highp vec4 pc_fragColor;\",\n  \"#define gl_FragColor pc_fragColor\",\n  \"#define texture2D texture\",\n  \"\"\n].join(\"\\n\");\n\nconst nonmultiviewFragPrefix = \"\";\n\nfunction isVisible(o) {\n  if (!o.visible) return false;\n  if (!o.parent) return true;\n  return isVisible(o.parent);\n}\n\nAFRAME.registerComponent(\"sprite\", {\n  schema: { name: { type: \"string\" } },\n  tick() {\n    if (!this.didRegisterWithSystem && this.el.sceneEl.systems[\"post-physics\"]) {\n      this.didRegisterWithSystem = this.el.sceneEl.systems[\"post-physics\"].spriteSystem.add(this);\n    }\n  },\n\n  update() {\n    if (this.didRegisterWithSystem) {\n      this.el.sceneEl.systems[\"post-physics\"].spriteSystem.updateUVs(this);\n    }\n  },\n\n  remove() {\n    if (this.didRegisterWithSystem) {\n      this.el.sceneEl.systems[\"post-physics\"].spriteSystem.remove(this);\n    }\n  }\n});\n\nconst normalizedFrame = (function() {\n  const memo = new Map();\n  return function normalizedFrame(name, spritesheet, missingSprites) {\n    let ret = memo.get(name);\n    if (ret) {\n      return ret;\n    } else {\n      if (!spritesheet.frames[name]) {\n        if (missingSprites.indexOf(name) === -1) {\n          missingSprites.push(name);\n        }\n        ret = { x: 0, y: 0, w: 0, h: 0 };\n        memo.set(name, ret);\n        return ret;\n      }\n      const size = spritesheet.meta.size;\n      const frame = spritesheet.frames[name].frame;\n      ret = {\n        x: frame.x / size.w,\n        y: frame.y / size.h,\n        w: frame.w / size.w,\n        h: frame.h / size.h\n      };\n      memo.set(name, ret);\n      return ret;\n    }\n  };\n})();\n\nconst raycastOnSprite = (function() {\n  const vA = new THREE.Vector3();\n  const vB = new THREE.Vector3();\n  const vC = new THREE.Vector3();\n  const vD = new THREE.Vector3();\n  const point = new THREE.Vector3();\n  const intersectionInfo = { distance: 0, point, object: null };\n\n  return function raycast(raycaster, intersects) {\n    vA.set(-0.5, 0.5, 0).applyMatrix4(this.matrixWorld);\n    vB.set(0.5, 0.5, 0).applyMatrix4(this.matrixWorld);\n    vC.set(-0.5, -0.5, 0).applyMatrix4(this.matrixWorld);\n    let intersect = raycaster.ray.intersectTriangle(vA, vC, vB, false, point);\n    if (intersect === null) {\n      vD.set(0.5, -0.5, 0).applyMatrix4(this.matrixWorld);\n      intersect = raycaster.ray.intersectTriangle(vB, vC, vD, false, point);\n      if (intersect === null) {\n        return;\n      }\n    }\n\n    const distance = raycaster.ray.origin.distanceTo(point);\n    if (distance < raycaster.near || distance > raycaster.far) return;\n\n    intersectionInfo.distance = distance;\n    intersectionInfo.point = point;\n    intersectionInfo.object = this;\n    intersects.push(intersectionInfo);\n  };\n})();\n\nfunction getHoverableVisuals(el) {\n  if (!el || !el.components) return null;\n  if (el.components[\"hoverable-visuals\"]) {\n    return el.components[\"hoverable-visuals\"];\n  }\n  return getHoverableVisuals(el.parentEl);\n}\n\nfunction enableSweepingEffect(comp) {\n  const hoverableVisuals = getHoverableVisuals(comp.el);\n  if (!hoverableVisuals) {\n    return false;\n  }\n\n  const isPinned = hoverableVisuals.el.components.pinnable && hoverableVisuals.el.components.pinnable.data.pinned;\n  const isSpawner = !!hoverableVisuals.el.components[\"super-spawner\"];\n  const isFrozen = hoverableVisuals.el.sceneEl.is(\"frozen\");\n  const hideDueToPinning = !isSpawner && isPinned && !isFrozen;\n  return hoverableVisuals.data.enableSweepingEffect && !hideDueToPinning;\n}\n\nfunction createGeometry(maxSprites) {\n  const geometry = new THREE.BufferGeometry();\n  geometry.addAttribute(\"a_vertices\", new THREE.BufferAttribute(new Float32Array(maxSprites * 3 * 4), 3, false));\n  geometry.addAttribute(\n    \"a_hubs_EnableSweepingEffect\",\n    new THREE.BufferAttribute(new Float32Array(maxSprites * 4), 1, false)\n  );\n  geometry.addAttribute(\n    \"a_hubs_SweepParams\",\n    new THREE.BufferAttribute(new Float32Array(maxSprites * 4 * 2), 2, false)\n  );\n  geometry.addAttribute(\"a_uvs\", new THREE.BufferAttribute(new Float32Array(maxSprites * 2 * 4), 2, false));\n  const mvCols = new THREE.InterleavedBuffer(new Float32Array(maxSprites * 16 * 4), 16);\n  geometry.addAttribute(\"mvCol0\", new THREE.InterleavedBufferAttribute(mvCols, 4, 0, false));\n  geometry.addAttribute(\"mvCol1\", new THREE.InterleavedBufferAttribute(mvCols, 4, 4, false));\n  geometry.addAttribute(\"mvCol2\", new THREE.InterleavedBufferAttribute(mvCols, 4, 8, false));\n  geometry.addAttribute(\"mvCol3\", new THREE.InterleavedBufferAttribute(mvCols, 4, 12, false));\n  const indices = new Array(3 * 2 * maxSprites);\n  for (let i = 0; i < maxSprites; i++) {\n    indices[i * 3 * 2 + 0] = i * 4 + 0;\n    indices[i * 3 * 2 + 1] = i * 4 + 2;\n    indices[i * 3 * 2 + 2] = i * 4 + 1;\n    indices[i * 3 * 2 + 3] = i * 4 + 1;\n    indices[i * 3 * 2 + 4] = i * 4 + 2;\n    indices[i * 3 * 2 + 5] = i * 4 + 3;\n  }\n  geometry.setIndex(indices);\n  return geometry;\n}\n\nconst ZEROS = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\nexport class SpriteSystem {\n  raycast(raycaster, intersects) {\n    for (let i = 0; i < this.slots.length; i++) {\n      if (!this.slots[i]) continue;\n\n      const o = this.indexWithSprite.get(i).el.object3D;\n      if (isVisible(o)) {\n        raycastOnSprite.call(o, raycaster, intersects);\n      }\n    }\n    return intersects;\n  }\n  constructor(scene) {\n    this.missingSprites = [];\n    this.maxSprites = 512;\n    this.slots = new Array(this.maxSprites);\n    this.spriteWithIndex = new Map();\n    this.indexWithSprite = new Map();\n    this.stack = new Array(this.maxSprites);\n    for (let i = 0; i < this.maxSprites; i++) {\n      this.stack[i] = this.maxSprites - 1 - i;\n    }\n\n    const vertexShader = String.prototype.concat(\n      scene.renderer.vr.multiview ? multiviewVertPrefix : nonmultiviewVertPrefix,\n      vert\n    );\n    const fragmentShader = String.prototype.concat(\n      scene.renderer.vr.multiview ? multiviewFragPrefix : nonmultiviewFragPrefix,\n      frag\n    );\n    Promise.all([createImageTexture(spritesheetPng), waitForDOMContentLoaded()]).then(([spritesheetTexture]) => {\n      const material = new THREE.RawShaderMaterial({\n        uniforms: {\n          u_spritesheet: { value: spritesheetTexture },\n          hubs_Time: { value: 0 }\n        },\n        vertexShader,\n        fragmentShader,\n        side: THREE.DoubleSide,\n        transparent: true\n      });\n      this.mesh = new THREE.Mesh(createGeometry(this.maxSprites), material);\n      const el = document.createElement(\"a-entity\");\n      el.classList.add(\"ui\");\n      scene.appendChild(el);\n      el.setObject3D(\"mesh\", this.mesh);\n      this.mesh.frustumCulled = false;\n      this.mesh.renderOrder = window.APP.RENDER_ORDER.HUD_ICONS;\n      this.mesh.raycast = this.raycast.bind(this);\n    });\n  }\n\n  tick(t) {\n    if (!this.mesh) return;\n\n    this.mesh.material.uniforms.hubs_Time.value = t;\n    this.mesh.material.uniformsNeedUpdate = true;\n\n    const mvCols = this.mesh.geometry.attributes[\"mvCol0\"].data; // interleaved\n    const aEnableSweepingEffect = this.mesh.geometry.attributes[\"a_hubs_EnableSweepingEffect\"];\n    const aSweepParams = this.mesh.geometry.attributes[\"a_hubs_SweepParams\"];\n    for (let i = 0; i < this.slots.length; i++) {\n      if (!this.slots[i]) continue;\n\n      const sprite = this.indexWithSprite.get(i);\n      if (isVisible(sprite.el.object3D)) {\n        const enableSweepingEffectValue = enableSweepingEffect(sprite) ? 1 : 0;\n        aEnableSweepingEffect.array[i * 4 + 0] = enableSweepingEffectValue;\n        aEnableSweepingEffect.array[i * 4 + 1] = enableSweepingEffectValue;\n        aEnableSweepingEffect.array[i * 4 + 2] = enableSweepingEffectValue;\n        aEnableSweepingEffect.array[i * 4 + 3] = enableSweepingEffectValue;\n        aEnableSweepingEffect.needsUpdate = true;\n        if (enableSweepingEffectValue) {\n          const hoverableVisuals = getHoverableVisuals(sprite.el);\n          const s = hoverableVisuals.sweepParams[0];\n          const t = hoverableVisuals.sweepParams[1];\n          aSweepParams.setXY(4 * i + 0, s, t);\n          aSweepParams.setXY(4 * i + 1, s, t);\n          aSweepParams.setXY(4 * i + 2, s, t);\n          aSweepParams.setXY(4 * i + 3, s, t);\n          aSweepParams.needsUpdate = true;\n        }\n\n        sprite.el.object3D.updateMatrices();\n        const mat4 = sprite.el.object3D.matrixWorld;\n        mvCols.array.set(mat4.elements, i * 4 * 16 + 0);\n        mvCols.array.set(mat4.elements, i * 4 * 16 + 1 * 16);\n        mvCols.array.set(mat4.elements, i * 4 * 16 + 2 * 16);\n        mvCols.array.set(mat4.elements, i * 4 * 16 + 3 * 16);\n        mvCols.needsUpdate = true;\n      } else {\n        mvCols.array.set(ZEROS, i * 4 * 16 + 0);\n        mvCols.array.set(ZEROS, i * 4 * 16 + 1 * 16);\n        mvCols.array.set(ZEROS, i * 4 * 16 + 2 * 16);\n        mvCols.array.set(ZEROS, i * 4 * 16 + 3 * 16);\n        mvCols.needsUpdate = true;\n      }\n    }\n  }\n\n  updateUVs(sprite) {\n    const flipY = this.mesh.material.uniforms.u_spritesheet.value.flipY;\n    const i = this.spriteWithIndex.get(sprite);\n    const frame = normalizedFrame(sprite.data.name, spritesheet, this.missingSprites);\n    const aUvs = this.mesh.geometry.attributes[\"a_uvs\"];\n\n    aUvs.setXY(i * 4 + 0, frame.x, flipY ? 1 - frame.y : frame.y);\n    aUvs.setXY(i * 4 + 1, frame.x + frame.w, flipY ? 1 - frame.y : frame.y);\n    aUvs.setXY(i * 4 + 2, frame.x, flipY ? 1 - frame.y - frame.h : frame.y + frame.h);\n    aUvs.setXY(i * 4 + 3, frame.x + frame.w, flipY ? 1 - frame.y - frame.h : frame.y + frame.h);\n    aUvs.needsUpdate = true;\n  }\n\n  add(sprite) {\n    if (!this.mesh) {\n      return false;\n    }\n    const i = this.stack.pop();\n    if (i === undefined) {\n      console.error(\"Too many sprites\");\n      return false;\n    }\n    this.slots[i] = true;\n    this.spriteWithIndex.set(sprite, i);\n    this.indexWithSprite.set(i, sprite);\n\n    this.updateUVs(sprite);\n\n    const aVertices = this.mesh.geometry.attributes[\"a_vertices\"];\n    aVertices.setXYZ(i * 4 + 0, -0.5, 0.5, 0);\n    aVertices.setXYZ(i * 4 + 1, 0.5, 0.5, 0);\n    aVertices.setXYZ(i * 4 + 2, -0.5, -0.5, 0);\n    aVertices.setXYZ(i * 4 + 3, 0.5, -0.5, 0);\n    aVertices.needsUpdate = true;\n    return true;\n  }\n\n  remove(sprite) {\n    const i = this.spriteWithIndex.get(sprite);\n    this.spriteWithIndex.delete(sprite);\n    this.indexWithSprite.delete(i);\n    this.slots[i] = false;\n    this.stack.push(i);\n\n    const mvCols = this.mesh.geometry.attributes[\"mvCol0\"].data; // interleaved\n    mvCols.array.set(ZEROS, i * 4 * 16 + 0);\n    mvCols.array.set(ZEROS, i * 4 * 16 + 1 * 16);\n    mvCols.array.set(ZEROS, i * 4 * 16 + 2 * 16);\n    mvCols.array.set(ZEROS, i * 4 * 16 + 3 * 16);\n    mvCols.needsUpdate = true;\n  }\n}\n","import { SpriteSystem } from \"./sprites\";\n\nconst i = window.setInterval(() => {\n  if (AFRAME.scenes[0] && AFRAME.scenes[0].systems && AFRAME.scenes[0].systems.physics) {\n    AFRAME.registerSystem(\"post-physics\", {\n      init() {\n        this.spriteSystem = new SpriteSystem(this.el);\n      },\n      tick(t, dt) {\n        this.spriteSystem.tick(t, dt);\n      }\n    });\n    window.clearInterval(i);\n  }\n}, 1000);\n","import { paths } from \"../systems/userinput/paths\";\n\nAFRAME.registerComponent(\"scalable-when-grabbed\", {\n  tick: function() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    if (interaction.state.rightRemote.held !== this.el) return;\n    const deltaScale = userinput.get(paths.actions.cursor.scaleGrabbedGrabbable);\n    if (!deltaScale) return;\n\n    this.el.object3D.scale.addScalar(deltaScale).clampScalar(0.1, 100);\n    this.el.object3D.matrixNeedsUpdate = true;\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\nimport { sets } from \"../systems/userinput/sets\";\nimport { getLastWorldPosition } from \"../utils/three-utils\";\n\nconst HIGHLIGHT = new THREE.Color(23 / 255, 64 / 255, 118 / 255);\nconst NO_HIGHLIGHT = new THREE.Color(190 / 255, 190 / 255, 190 / 255);\nconst TRANSFORM_COLOR_1 = new THREE.Color(150 / 255, 80 / 255, 150 / 255);\nconst TRANSFORM_COLOR_2 = new THREE.Color(23 / 255, 64 / 255, 118 / 255);\nAFRAME.registerComponent(\"cursor-controller\", {\n  schema: {\n    cursor: { type: \"selector\" },\n    camera: { type: \"selector\" },\n    far: { default: 25 },\n    near: { default: 0.01 },\n    defaultDistance: { default: 4 },\n    minDistance: { default: 0.18 }\n  },\n\n  init: function() {\n    this.enabled = true;\n\n    this.data.cursor.addEventListener(\n      \"loaded\",\n      () => {\n        this.data.cursor.object3DMap.mesh.renderOrder = window.APP.RENDER_ORDER.CURSOR;\n      },\n      { once: true }\n    );\n\n    this.raycaster = new THREE.Raycaster();\n    this.raycaster.firstHitOnly = true; // flag specific to three-mesh-bvh\n    this.distance = this.data.far;\n    this.color = new THREE.Color(0, 0, 0);\n\n    const lineGeometry = new THREE.BufferGeometry();\n    lineGeometry.addAttribute(\"position\", new THREE.BufferAttribute(new Float32Array(2 * 3), 3));\n\n    this.line = new THREE.Line(\n      lineGeometry,\n      new THREE.LineBasicMaterial({\n        color: \"white\",\n        opacity: 0.2,\n        transparent: true,\n        visible: false\n      })\n    );\n    this.el.setObject3D(\"line\", this.line);\n  },\n\n  update: function() {\n    this.raycaster.far = this.data.far;\n    this.raycaster.near = this.data.near;\n  },\n\n  tick2: (() => {\n    const rawIntersections = [];\n    const cameraPos = new THREE.Vector3();\n\n    return function(t) {\n      const userinput = AFRAME.scenes[0].systems.userinput;\n      const cursorPose = userinput.get(paths.actions.cursor.pose);\n      const hideLine = userinput.get(paths.actions.cursor.hideLine);\n\n      this.data.cursor.object3D.visible = this.enabled && !!cursorPose;\n      this.line.material.visible = !!(this.enabled && !hideLine);\n\n      if (!this.enabled || !cursorPose) {\n        return;\n      }\n\n      const interaction = AFRAME.scenes[0].systems.interaction;\n      let intersection;\n      const isGrabbing = !!interaction.state.rightRemote.held;\n      if (!isGrabbing) {\n        rawIntersections.length = 0;\n        this.raycaster.ray.origin = cursorPose.position;\n        this.raycaster.ray.direction = cursorPose.direction;\n        this.raycaster.intersectObjects(\n          AFRAME.scenes[0].systems[\"hubs-systems\"].cursorTargettingSystem.targets,\n          true,\n          rawIntersections\n        );\n        intersection = rawIntersections[0];\n        interaction.updateCursorIntersection(intersection);\n        this.distance = intersection ? intersection.distance : this.data.defaultDistance;\n      }\n\n      const { cursor, minDistance, far, camera } = this.data;\n\n      const cursorModDelta = userinput.get(paths.actions.cursor.modDelta) || 0;\n      if (isGrabbing && !userinput.activeSets.includes(sets.cursorHoldingUI)) {\n        this.distance = THREE.Math.clamp(this.distance - cursorModDelta, minDistance, far);\n      }\n      cursor.object3D.position.copy(cursorPose.position).addScaledVector(cursorPose.direction, this.distance);\n      // The cursor will always be oriented towards the player about its Y axis, so objects held by the cursor will rotate towards the player.\n      getLastWorldPosition(camera.object3D, cameraPos);\n      cameraPos.y = cursor.object3D.position.y;\n      cursor.object3D.lookAt(cameraPos);\n      cursor.object3D.scale.setScalar(Math.pow(this.distance, 0.315) * 0.75);\n      cursor.object3D.matrixNeedsUpdate = true;\n\n      if (AFRAME.scenes[0].systems[\"transform-selected-object\"].transforming) {\n        this.color.copy(TRANSFORM_COLOR_1).lerpHSL(TRANSFORM_COLOR_2, 0.5 + 0.5 * Math.sin(t / 1000.0));\n      } else if (intersection || isGrabbing) {\n        this.color.copy(HIGHLIGHT);\n      } else {\n        this.color.copy(NO_HIGHLIGHT);\n      }\n\n      if (!this.data.cursor.object3DMap.mesh.material.color.equals(this.color)) {\n        this.data.cursor.object3DMap.mesh.material.color.copy(this.color);\n        this.data.cursor.object3DMap.mesh.material.needsUpdate = true;\n      }\n\n      if (this.line.material.visible) {\n        const posePosition = cursorPose.position;\n        const cursorPosition = cursor.object3D.position;\n        const positionArray = this.line.geometry.attributes.position.array;\n\n        positionArray[0] = posePosition.x;\n        positionArray[1] = posePosition.y;\n        positionArray[2] = posePosition.z;\n        positionArray[3] = cursorPosition.x;\n        positionArray[4] = cursorPosition.y;\n        positionArray[5] = cursorPosition.z;\n\n        this.line.geometry.attributes.position.needsUpdate = true;\n        this.line.geometry.computeBoundingSphere();\n      }\n    };\n  })()\n});\n","import { paths } from \"../../systems/userinput/paths\";\nimport { getLastWorldPosition, getLastWorldQuaternion } from \"../../utils/three-utils\";\nimport {\n  SOUND_PEN_START_DRAW,\n  SOUND_PEN_STOP_DRAW,\n  SOUND_PEN_UNDO_DRAW,\n  SOUND_PEN_CHANGE_COLOR\n} from \"../../systems/sound-effects-system\";\nimport { waitForDOMContentLoaded } from \"../../utils/async-utils\";\nimport MobileStandardMaterial from \"../../materials/MobileStandardMaterial\";\n\nconst pathsMap = {\n  \"player-right-controller\": {\n    startDrawing: paths.actions.rightHand.startDrawing,\n    stopDrawing: paths.actions.rightHand.stopDrawing,\n    undoDrawing: paths.actions.rightHand.undoDrawing,\n    switchDrawMode: paths.actions.rightHand.switchDrawMode,\n    penNextColor: paths.actions.rightHand.penNextColor,\n    penPrevColor: paths.actions.rightHand.penPrevColor,\n    scalePenTip: paths.actions.rightHand.scalePenTip\n  },\n  \"player-left-controller\": {\n    startDrawing: paths.actions.leftHand.startDrawing,\n    stopDrawing: paths.actions.leftHand.stopDrawing,\n    undoDrawing: paths.actions.leftHand.undoDrawing,\n    switchDrawMode: paths.actions.leftHand.switchDrawMode,\n    penNextColor: paths.actions.leftHand.penNextColor,\n    penPrevColor: paths.actions.leftHand.penPrevColor,\n    scalePenTip: paths.actions.leftHand.scalePenTip\n  },\n  cursor: {\n    pose: paths.actions.cursor.pose,\n    startDrawing: paths.actions.cursor.startDrawing,\n    stopDrawing: paths.actions.cursor.stopDrawing,\n    undoDrawing: paths.actions.cursor.undoDrawing,\n    penNextColor: paths.actions.cursor.penNextColor,\n    penPrevColor: paths.actions.cursor.penPrevColor,\n    scalePenTip: paths.actions.cursor.scalePenTip\n  }\n};\n\nconst DRAW_MODE = {\n  DEFAULT_2D: 0,\n  PROJECTION: 1\n};\n\nconst MAX_DISTANCE_BETWEEN_SURFACES = 1;\n\n/**\n * Pen tool\n * A tool that allows drawing on networked-drawing components.\n * @namespace drawing\n * @component pen\n */\n\nfunction almostEquals(epsilon, u, v) {\n  return Math.abs(u.x - v.x) < epsilon && Math.abs(u.y - v.y) < epsilon && Math.abs(u.z - v.z) < epsilon;\n}\n\nAFRAME.registerComponent(\"pen\", {\n  schema: {\n    drawFrequency: { default: 5 }, //frequency of polling for drawing points\n    minDistanceBetweenPoints: { default: 0.01 }, //minimum distance to register new drawing point\n    camera: { type: \"selector\" },\n    drawingManager: { type: \"string\" },\n    color: { type: \"color\", default: \"#FF0033\" },\n    availableColors: {\n      default: [\n        \"#FF0033\",\n        \"#FFFF00\",\n        \"#0099FF\",\n        \"#00FF33\",\n        \"#9900FF\",\n        \"#FF6600\",\n        \"#8D5524\",\n        \"#C68642\",\n        \"#E0AC69\",\n        \"#F1C27D\",\n        \"#FFDBAC\",\n        \"#FFFFFF\",\n        \"#222222\",\n        \"#111111\",\n        \"#000000\"\n      ]\n    },\n    radius: { default: 0.01 }, //drawing geometry radius\n    minRadius: { default: 0.005 },\n    maxRadius: { default: 0.2 },\n    far: { default: 100 },\n    near: { default: 0.01 }\n  },\n\n  init() {\n    this.timeSinceLastDraw = 0;\n\n    this.lastPosition = new THREE.Vector3();\n    this.lastPosition.copy(this.el.object3D.position);\n\n    this.direction = new THREE.Vector3(1, 0, 0);\n\n    this.currentDrawing = null;\n\n    this.normal = new THREE.Vector3();\n\n    this.worldPosition = new THREE.Vector3();\n\n    this.colorIndex = 0;\n\n    this.grabbed = false;\n\n    this.raycaster = new THREE.Raycaster();\n    this.raycaster.firstHitOnly = true; // flag specific to three-mesh-bvh\n\n    this.originalPosition = this.el.object3D.position.clone();\n    this.intersection = null;\n    this.lastIntersectionDistance = 0;\n\n    const lineGeometry = new THREE.BufferGeometry();\n    lineGeometry.addAttribute(\"position\", new THREE.BufferAttribute(new Float32Array(2 * 3), 3));\n\n    this.line = new THREE.Line(\n      lineGeometry,\n      new THREE.LineBasicMaterial({\n        color: \"red\",\n        opacity: 0.2,\n        transparent: true,\n        visible: true\n      })\n    );\n\n    //prevents the line from being a raycast target for the cursor\n    this.line.raycast = function() {};\n\n    this.el.parentEl.setObject3D(\"penline\", this.line);\n\n    this.drawMode = DRAW_MODE.DEFAULT_2D;\n\n    this.targets = [];\n    this.setDirty = this.setDirty.bind(this);\n    this.dirty = true;\n\n    let material = new THREE.MeshStandardMaterial();\n    if (window.APP && window.APP.quality === \"low\") {\n      material = MobileStandardMaterial.fromStandardMaterial(material);\n    }\n    this.penTip = new THREE.Mesh(new THREE.SphereBufferGeometry(1, 16, 12), material);\n    this.penTip.scale.setScalar(this.data.radius / this.el.parentEl.object3D.scale.x);\n    this.penTip.matrixNeedsUpdate = true;\n\n    this.el.setObject3D(\"mesh\", this.penTip);\n\n    const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n    if (environmentMapComponent) {\n      environmentMapComponent.applyEnvironmentMap(this.el.parentEl.object3D);\n    }\n\n    // TODO: Use the MutationRecords passed into the callback function to determine added/removed nodes!\n    this.observer = new MutationObserver(this.setDirty);\n\n    waitForDOMContentLoaded().then(() => {\n      const scene = document.querySelector(\"a-scene\");\n      this.rightRemote = document.querySelector(\"#cursor-controller\");\n      this.observer.observe(scene, { childList: true, attributes: true, subtree: true });\n      scene.addEventListener(\"object3dset\", this.setDirty);\n      scene.addEventListener(\"object3dremove\", this.setDirty);\n    });\n  },\n\n  play() {\n    this.drawingManager = document.querySelector(this.data.drawingManager).components[\"drawing-manager\"];\n    this.drawingManager.createDrawing();\n  },\n\n  update(prevData) {\n    if (prevData.color != this.data.color) {\n      this.penTip.material.color.set(this.data.color);\n      this.line.material.color.set(this.data.color);\n    }\n    if (prevData.radius != this.data.radius) {\n      this.el.setAttribute(\"radius\", this.data.radius);\n    }\n\n    this.raycaster.far = this.data.far;\n    this.raycaster.near = this.data.near;\n  },\n\n  tick: (() => {\n    const rawIntersections = [];\n    const lineStartPosition = new THREE.Vector3();\n    const lineEndPosition = new THREE.Vector3();\n    const worldQuaternion = new THREE.Quaternion();\n    return function(t, dt) {\n      const userinput = AFRAME.scenes[0].systems.userinput;\n      const interaction = AFRAME.scenes[0].systems.interaction;\n\n      if (interaction.state.rightHand.held === this.el.parentNode) {\n        this.grabberId = \"player-right-controller\";\n      } else if (interaction.state.leftHand.held === this.el.parentNode) {\n        this.grabberId = \"player-left-controller\";\n      } else if (interaction.state.rightRemote.held === this.el.parentNode) {\n        this.grabberId = \"cursor\";\n        this.drawMode = DRAW_MODE.PROJECTION;\n      } else {\n        this.grabberId = null;\n      }\n\n      if (this.grabberId && pathsMap[this.grabberId]) {\n        const sfx = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem;\n        const paths = pathsMap[this.grabberId];\n        if (userinput.get(paths.startDrawing)) {\n          this._startDraw();\n          sfx.playSoundOneShot(SOUND_PEN_START_DRAW);\n        }\n        if (userinput.get(paths.stopDrawing)) {\n          this._endDraw();\n          sfx.playSoundOneShot(SOUND_PEN_STOP_DRAW);\n        }\n        const penScaleMod = userinput.get(paths.scalePenTip);\n        if (penScaleMod) {\n          this._changeRadius(penScaleMod);\n        }\n        if (userinput.get(paths.penNextColor)) {\n          this._changeColor(1);\n          sfx.playSoundOneShot(SOUND_PEN_CHANGE_COLOR);\n        }\n        if (userinput.get(paths.penPrevColor)) {\n          this._changeColor(-1);\n          sfx.playSoundOneShot(SOUND_PEN_CHANGE_COLOR);\n        }\n        if (userinput.get(paths.undoDrawing)) {\n          this._undoDraw();\n          sfx.playSoundOneShot(SOUND_PEN_UNDO_DRAW);\n        }\n        if (paths.switchDrawMode && userinput.get(paths.switchDrawMode)) {\n          this.drawMode = this.drawMode === DRAW_MODE.DEFAULT_2D ? DRAW_MODE.PROJECTION : DRAW_MODE.DEFAULT_2D;\n        }\n      }\n\n      rawIntersections.length = 0;\n\n      this.intersection = null;\n      let cursorPose;\n      if (this.drawMode === DRAW_MODE.PROJECTION) {\n        if (this.grabberId === \"cursor\") {\n          cursorPose = userinput.get(pathsMap.cursor.pose);\n          if (cursorPose) {\n            this.raycaster.ray.origin.copy(cursorPose.position);\n            this.raycaster.ray.direction.copy(cursorPose.direction);\n          }\n        } else if (this.grabberId !== null) {\n          getLastWorldPosition(this.el.parentEl.object3D, this.raycaster.ray.origin);\n          getLastWorldQuaternion(this.el.parentEl.object3D, worldQuaternion);\n          this.raycaster.ray.direction.set(0, -1, 0);\n          this.raycaster.ray.direction.applyQuaternion(worldQuaternion);\n        }\n\n        if (this.grabberId !== null) {\n          this.raycaster.intersectObjects(this.targets, true, rawIntersections);\n          this.intersection = rawIntersections[0];\n\n          if (this.intersection) {\n            if (cursorPose) {\n              lineStartPosition.copy(cursorPose.position);\n              this.el.parentEl.object3D.worldToLocal(lineStartPosition);\n            } else {\n              lineStartPosition.set(0, 0, 0);\n            }\n            lineEndPosition.copy(this.intersection.point);\n            this.el.parentEl.object3D.worldToLocal(lineEndPosition);\n\n            const positionArray = this.line.geometry.attributes.position.array;\n            positionArray[0] = lineStartPosition.x;\n            positionArray[1] = lineStartPosition.y;\n            positionArray[2] = lineStartPosition.z;\n            positionArray[3] = lineEndPosition.x;\n            positionArray[4] = lineEndPosition.y;\n            positionArray[5] = lineEndPosition.z;\n\n            this.line.geometry.attributes.position.needsUpdate = true;\n          }\n\n          if (this.intersection) {\n            this.el.object3D.position.copy(this.intersection.point);\n\n            this.el.parentEl.object3D.worldToLocal(this.el.object3D.position);\n\n            this.el.object3D.matrixNeedsUpdate = true;\n            this.worldPosition.copy(this.intersection.point);\n          } else {\n            this.el.object3D.position.copy(this.originalPosition);\n            this.el.object3D.matrixNeedsUpdate = true;\n            getLastWorldPosition(this.el.object3D, this.worldPosition);\n          }\n        }\n      } else {\n        this.el.object3D.position.copy(this.originalPosition);\n        this.el.object3D.matrixNeedsUpdate = true;\n        getLastWorldPosition(this.el.object3D, this.worldPosition);\n      }\n\n      this._setPenVisible(this.grabberId !== \"cursor\" || !this.intersection);\n      this._setLineVisible(\n        this.el.sceneEl.is(\"vr-mode\") && this.drawMode === DRAW_MODE.PROJECTION && this.intersection\n      );\n\n      //Prevent drawings from \"jumping\" large distances\n      if (\n        this.currentDrawing &&\n        (this.lastIntersectedObject !== (this.intersection ? this.intersection.object : null) &&\n          (!this.intersection ||\n            Math.abs(this.intersection.distance - this.lastIntersectionDistance) > MAX_DISTANCE_BETWEEN_SURFACES))\n      ) {\n        this.worldPosition.copy(this.lastPosition);\n        this._endDraw();\n      }\n      this.lastIntersectionDistance = this.intersection ? this.intersection.distance : 0;\n      this.lastIntersectedObject = this.intersection ? this.intersection.object : null;\n\n      if (!almostEquals(0.005, this.worldPosition, this.lastPosition)) {\n        this.direction.subVectors(this.worldPosition, this.lastPosition).normalize();\n        this.lastPosition.copy(this.worldPosition);\n      }\n\n      if (this.currentDrawing) {\n        const time = this.timeSinceLastDraw + dt;\n        if (\n          time >= this.data.drawFrequency &&\n          this.currentDrawing.getLastPoint().distanceTo(this.worldPosition) >= this.data.minDistanceBetweenPoints\n        ) {\n          this._getNormal(this.normal, this.worldPosition, this.direction);\n          this.currentDrawing.draw(this.worldPosition, this.direction, this.normal, this.data.color, this.data.radius);\n        }\n\n        this.timeSinceLastDraw = time % this.data.drawFrequency;\n      }\n\n      if (this.currentDrawing && !this.grabberId) {\n        this._endDraw();\n      }\n\n      if (this.dirty) {\n        this.populateEntities(this.targets);\n        this.dirty = false;\n      }\n\n      this.el.object3D.matrixNeedsUpdate = true;\n    };\n  })(),\n\n  _setPenVisible(visible) {\n    if (this.el.parentEl.object3DMap.mesh && this.el.parentEl.object3DMap.mesh.visible !== visible) {\n      this.el.parentEl.object3DMap.mesh.visible = visible;\n    }\n  },\n\n  _setLineVisible(visible) {\n    if (this.line.material.visible !== visible) {\n      this.line.material.visible = visible;\n    }\n  },\n\n  //helper function to get normal of direction of drawing cross direction to camera\n  _getNormal: (() => {\n    const directionToCamera = new THREE.Vector3();\n    return function(normal, position, direction) {\n      directionToCamera.subVectors(position, this.data.camera.object3D.position).normalize();\n      normal.crossVectors(direction, directionToCamera);\n    };\n  })(),\n\n  _startDraw() {\n    this.currentDrawing = this.drawingManager.getDrawing(this);\n    if (this.currentDrawing) {\n      this._getNormal(this.normal, this.worldPosition, this.direction);\n      this.currentDrawing.startDraw(this.worldPosition, this.direction, this.normal, this.data.color, this.data.radius);\n    }\n  },\n\n  _endDraw() {\n    if (this.currentDrawing) {\n      this.timeSinceLastDraw = 0;\n      this._getNormal(this.normal, this.worldPosition, this.direction);\n      this.currentDrawing.endDraw(this.worldPosition, this.direction, this.normal);\n      this.drawingManager.returnDrawing(this);\n      this.currentDrawing = null;\n    }\n  },\n\n  _undoDraw() {\n    const drawing = this.drawingManager.getDrawing(this);\n    if (drawing) {\n      drawing.undoDraw();\n      this.drawingManager.returnDrawing(this);\n    }\n  },\n\n  _changeColor(mod) {\n    this.colorIndex = (this.colorIndex + mod + this.data.availableColors.length) % this.data.availableColors.length;\n    this.data.color = this.data.availableColors[this.colorIndex];\n    this.penTip.material.color.set(this.data.color);\n    this.line.material.color.set(this.data.color);\n  },\n\n  _changeRadius(mod) {\n    this.data.radius = Math.max(this.data.minRadius, Math.min(this.data.radius + mod, this.data.maxRadius));\n    this.penTip.scale.setScalar(this.data.radius / this.el.parentEl.object3D.scale.x);\n    this.penTip.matrixNeedsUpdate = true;\n  },\n\n  setDirty() {\n    this.dirty = true;\n  },\n\n  populateEntities(targets) {\n    targets.length = 0;\n    // TODO: Do not querySelectorAll on the entire scene every time anything changes!\n    const els = AFRAME.scenes[0].querySelectorAll(\".collidable, .interactable, #environment-root\");\n    for (let i = 0; i < els.length; i++) {\n      if (!els[i].classList.contains(\"pen\") && els[i].object3D) {\n        targets.push(els[i].object3D);\n      }\n    }\n  },\n\n  remove() {\n    this.observer.disconnect();\n    AFRAME.scenes[0].removeEventListener(\"object3dset\", this.setDirty);\n    AFRAME.scenes[0].removeEventListener(\"object3dremove\", this.setDirty);\n    this.el.parentEl.removeObject3D(\"penline\");\n  }\n});\n","export default class SharedBufferGeometry {\n  constructor(material, primitiveMode, maxBufferSize) {\n    this.material = material;\n    this.primitiveMode = primitiveMode;\n\n    this.maxBufferSize = maxBufferSize;\n    this.geometries = [];\n    this.current = null;\n    this.drawing = new THREE.Object3D();\n    this.addBuffer();\n  }\n\n  restartPrimitive() {\n    if (this.idx.position >= this.current.attributes.position.count) {\n      console.error(\"maxBufferSize limit exceeded\");\n    } else if (this.idx.position !== 0) {\n      let prev = (this.idx.position - 1) * 3;\n      const position = this.current.attributes.position.array;\n      this.addVertex(position[prev++], position[prev++], position[prev++]);\n\n      this.idx.color++;\n      this.idx.normal++;\n    }\n  }\n\n  remove(prevIdx, idx) {\n    // Loop through all the attributes: position, color, normal,...\n    if (this.idx.position > idx.position) {\n      for (const key in this.idx) {\n        const componentSize = 3;\n        let pos = prevIdx[key] * componentSize;\n        const start = (idx[key] + 1) * componentSize;\n        const end = this.idx[key] * componentSize;\n        for (let i = start; i < end; i++) {\n          this.current.attributes[key].array[pos++] = this.current.attributes[key].array[i];\n        }\n        const diff = idx[key] - prevIdx[key] + 1;\n        this.idx[key] -= diff;\n      }\n    } else {\n      for (const key in this.idx) {\n        const diff = idx[key] - prevIdx[key];\n        this.idx[key] -= diff;\n      }\n    }\n\n    this.update();\n  }\n\n  undo(prevIdx) {\n    this.idx = prevIdx;\n    this.update();\n  }\n\n  addBuffer() {\n    const geometry = new THREE.BufferGeometry();\n\n    const vertices = new Float32Array(this.maxBufferSize * 3);\n    const normals = new Float32Array(this.maxBufferSize * 3);\n    const colors = new Float32Array(this.maxBufferSize * 3);\n\n    const mesh = new THREE.Mesh(geometry, this.material);\n\n    mesh.drawMode = this.primitiveMode;\n\n    mesh.frustumCulled = false;\n    mesh.vertices = vertices;\n\n    const object3D = new THREE.Object3D();\n    this.drawing.add(object3D);\n    object3D.add(mesh);\n\n    geometry.setDrawRange(0, 0);\n    geometry.addAttribute(\"position\", new THREE.BufferAttribute(vertices, 3).setDynamic(true));\n    geometry.addAttribute(\"normal\", new THREE.BufferAttribute(normals, 3).setDynamic(true));\n    geometry.addAttribute(\"color\", new THREE.BufferAttribute(colors, 3).setDynamic(true));\n\n    this.previous = null;\n    if (this.geometries.length > 0) {\n      this.previous = this.current;\n    }\n\n    this.idx = {\n      position: 0,\n      normal: 0,\n      color: 0\n    };\n\n    this.geometries.push(geometry);\n    this.current = geometry;\n  }\n\n  addColor(r, g, b) {\n    this.current.attributes.color.setXYZ(this.idx.color++, r, g, b);\n  }\n\n  addNormal(x, y, z) {\n    this.current.attributes.normal.setXYZ(this.idx.normal++, x, y, z);\n  }\n\n  addVertex(x, y, z) {\n    const buffer = this.current.attributes.position;\n    if (this.idx.position === buffer.count) {\n      console.error(\"maxBufferSize limit exceeded\");\n    }\n    buffer.setXYZ(this.idx.position++, x, y, z);\n  }\n\n  update() {\n    this.current.setDrawRange(0, this.idx.position);\n\n    this.current.attributes.color.needsUpdate = true;\n    this.current.attributes.normal.needsUpdate = true;\n    this.current.attributes.position.needsUpdate = true;\n  }\n}\n","import SharedBufferGeometry from \"./sharedbuffergeometry\";\n\nexport default class SharedBufferGeometryManager {\n  constructor() {\n    this.sharedBuffers = {};\n  }\n\n  addSharedBuffer(name, material, primitiveMode, maxBufferSize) {\n    this.sharedBuffers[name] = new SharedBufferGeometry(material, primitiveMode, maxBufferSize);\n  }\n\n  getSharedBuffer(name) {\n    return this.sharedBuffers[name];\n  }\n}\n","/* global THREE */\n/**\n * Networked Drawing\n * Creates procedurally generated 'lines' (or tubes) that are networked.\n * @namespace drawing\n * @component networked-drawing\n */\n\nimport SharedBufferGeometryManager from \"../../utils/sharedbuffergeometrymanager\";\nimport MobileStandardMaterial from \"../../materials/MobileStandardMaterial\";\n\nconst MSG_CONFIRM_CONNECT = 0;\nconst MSG_BUFFER_DATA = 1;\nconst MSG_BUFFER_DATA_FULL = 2;\n\nfunction copyData(fromArray, toArray, fromIndex, toIndex) {\n  let i = fromIndex - 1;\n  let j = -1;\n  while (i + 1 <= toIndex) {\n    toArray[++j] = fromArray[++i];\n  }\n}\n\nAFRAME.registerComponent(\"networked-drawing\", {\n  schema: {\n    segments: { default: 8 }, //the number of \"sides\" the procedural tube should have\n    defaultRadius: { default: 0.01 }, //the radius of the procedural tube\n    maxDrawTimeout: { default: 600000 }, //the maximum time a drawn line will live\n    maxLines: { default: 50 }, //how many lines can persist before lines older than minDrawTime are removed\n    maxPointsPerLine: { default: 250 } //the max number of points a single line can have\n  },\n\n  init() {\n    this._receiveData = this._receiveData.bind(this);\n\n    this.networkBuffer = [];\n\n    this.sendNetworkBufferQueue = [];\n\n    this.drawStarted = false;\n    this.lineStarted = false;\n    this.remoteLineStarted = false;\n\n    this.receivedBufferParts = 0;\n    this.bufferIndex = 0;\n    this.connectedToOwner = false;\n    this.networkBufferInitialized = false;\n\n    const options = {\n      vertexColors: THREE.VertexColors\n    };\n\n    this.color = new THREE.Color();\n    this.radius = this.data.defaultRadius;\n    this.segments = this.data.segments;\n\n    let material = new THREE.MeshStandardMaterial(options);\n    if (window.APP && window.APP.quality === \"low\") {\n      material = MobileStandardMaterial.fromStandardMaterial(material);\n    }\n\n    this.sharedBufferGeometryManager = new SharedBufferGeometryManager();\n    // NOTE: 20 is approximate for how many floats per point are added.\n    // maxLines + 1 because a line can be currently drawing while at maxLines.\n    // Multiply by 1/3 (0.333) because 3 floats per vertex (x, y, z).\n    const maxBufferSize = Math.round(this.data.maxPointsPerLine * 20 * (this.data.maxLines + 1) * 0.333);\n    this.sharedBufferGeometryManager.addSharedBuffer(0, material, THREE.TriangleStripDrawMode, maxBufferSize);\n\n    this.lastPoint = new THREE.Vector3();\n\n    this.lastSegments = [];\n    this.currentSegments = [];\n    for (let x = 0; x < this.segments; x++) {\n      this.lastSegments[x] = {\n        position: new THREE.Vector3(),\n        normal: new THREE.Vector3()\n      };\n      this.currentSegments[x] = {\n        position: new THREE.Vector3(),\n        normal: new THREE.Vector3()\n      };\n    }\n\n    this.sharedBuffer = this.sharedBufferGeometryManager.getSharedBuffer(0);\n    this.drawing = this.sharedBuffer.drawing;\n    const sceneEl = document.querySelector(\"a-scene\");\n    this.scene = sceneEl.object3D;\n    this.scene.add(this.drawing);\n\n    const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n    if (environmentMapComponent) {\n      environmentMapComponent.applyEnvironmentMap(this.drawing);\n    }\n\n    this.prevIdx = Object.assign({}, this.sharedBuffer.idx);\n    this.idx = Object.assign({}, this.sharedBuffer.idx);\n    this.vertexCount = 0; //number of vertices added for current line (used for line deletion).\n    this.networkBufferCount = 0; //number of items added to networkBuffer for current line (used for line deletion).\n    this.currentPointCount = 0; //number of points added for current line (used for maxPointsPerLine).\n    this.invalidPointRead = false; //flag flipped if we read a bad point anywhere during this line\n    this.lastReadPointCount = 0; //last read point count read off of the network, used for sanity checking\n    this.networkBufferHistory = []; //tracks vertexCount and networkBufferCount so that lines can be deleted.\n\n    NAF.connection.onConnect(() => {\n      NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n        this.networkedEl = networkedEl;\n        this.networkId = NAF.utils.getNetworkId(this.networkedEl);\n        this.drawingId = \"drawing-\" + this.networkId;\n        NAF.connection.subscribeToDataChannel(this.drawingId, this._receiveData);\n      });\n    });\n  },\n\n  remove() {\n    NAF.connection.unsubscribeToDataChannel(this.drawingId, this._receiveData);\n\n    this.scene.remove(this.drawing);\n  },\n\n  tick(t) {\n    const connected = NAF.connection.isConnected() && this.networkedEl;\n    const isMine = connected && NAF.utils.isMine(this.networkedEl);\n\n    if (!this.connectedToOwner && connected) {\n      const owner = NAF.utils.getNetworkOwner(this.networkedEl);\n      if (!isMine && NAF.connection.hasActiveDataChannel(owner)) {\n        NAF.connection.sendDataGuaranteed(owner, this.drawingId, {\n          type: MSG_CONFIRM_CONNECT,\n          clientId: NAF.clientId\n        });\n        this.connectedToOwner = true;\n      }\n    }\n\n    if (this.networkBuffer.length > 0 && connected) {\n      if (!isMine) {\n        this._drawFromNetwork();\n      } else if (this.bufferIndex < this.networkBuffer.length) {\n        this._broadcastDrawing();\n      }\n    }\n\n    //TODO: handle possibility that a clientId gets stuck in sendNetworkBufferQueue\n    //if that client disconnects before this executes and an activeDataChannel is opened.\n    if (isMine && this.sendNetworkBufferQueue.length > 0) {\n      const connected = [];\n      for (let i = 0; i < this.sendNetworkBufferQueue.length; i++) {\n        if (NAF.connection.hasActiveDataChannel(this.sendNetworkBufferQueue[i])) {\n          connected.push(this.sendNetworkBufferQueue[i]);\n        }\n      }\n      for (let j = 0; j < connected.length; j++) {\n        const pos = this.sendNetworkBufferQueue.indexOf(connected[j]);\n        this._sendNetworkBuffer(connected[j]);\n        this.sendNetworkBufferQueue.splice(pos, 1);\n      }\n    }\n\n    this._deleteExpiredLines(t);\n  },\n\n  _broadcastDrawing: (() => {\n    const copyArray = [];\n    return function() {\n      copyArray.length = 0;\n      copyData(this.networkBuffer, copyArray, this.bufferIndex, this.networkBuffer.length - 1);\n\n      //remove undo's from networkBuffer after they've been sent so that\n      //newly joining clients don't get them\n      let index = -1;\n      while ((index = this.networkBuffer.indexOf(\"-\")) != -1) {\n        this.networkBuffer.splice(index, 1);\n      }\n      this.bufferIndex = this.networkBuffer.length;\n      NAF.connection.broadcastDataGuaranteed(this.drawingId, { type: MSG_BUFFER_DATA, buffer: copyArray });\n    };\n  })(),\n\n  _drawFromNetwork: (() => {\n    const position = new THREE.Vector3();\n    const direction = new THREE.Vector3();\n    const normal = new THREE.Vector3();\n    return function() {\n      let head = this.networkBuffer[0];\n      if (head === \"-\") {\n        this._undoDraw();\n        this.networkBuffer.shift();\n        head = this.networkBuffer[0];\n      }\n      let didWork = false;\n      while (head != null && this.networkBuffer.length >= 11) {\n        const pointCount = this.networkBuffer[0];\n\n        // This is a sanity check against the sequence number to help uncover remaining bugs.\n        // If the point is out-of-order, report the error and stop drawing this line.\n        if (pointCount !== this.lastReadPointCount + 1) {\n          this.invalidPointRead = true;\n\n          console.error(\n            `Draw networking error: ID ${this.drawingId} expected point ${this.lastReadPointCount +\n              1} but received ${pointCount}`\n          );\n        }\n\n        this.lastReadPointCount = pointCount;\n        position.set(this.networkBuffer[1], this.networkBuffer[2], this.networkBuffer[3]);\n        direction.set(this.networkBuffer[4], this.networkBuffer[5], this.networkBuffer[6]);\n        this.radius = Math.round(direction.length() * 1000) / 1000; //radius is encoded as length of direction vector\n        direction.normalize();\n        normal.set(this.networkBuffer[7], this.networkBuffer[8], this.networkBuffer[9]);\n        this.color.setHex(Math.round(normal.length()) - 1); //color is encoded as length of normal vector\n        normal.normalize();\n\n        this.networkBuffer.splice(0, 10);\n\n        if (!this.remoteLineStarted) {\n          this.startDraw(position, direction, normal);\n          this.remoteLineStarted = true;\n        }\n\n        if (this.networkBuffer[0] === null) {\n          if (!this.invalidPointRead) {\n            this._endDraw(position, direction, normal);\n          }\n\n          this.remoteLineStarted = false;\n          this.networkBuffer.shift();\n          this.lastReadPointCount = 0;\n          this.invalidPointRead = false;\n        } else {\n          if (!this.invalidPointRead) {\n            this._draw(position, direction, normal);\n            didWork = true;\n          }\n        }\n      }\n      if (didWork) this._updateBuffer();\n    };\n  })(),\n\n  _deleteExpiredLines(time) {\n    const length = this.networkBufferHistory.length;\n    if (length > 0) {\n      const drawTime = this.networkBufferHistory[0].time;\n      if (length > this.data.maxLines || drawTime + this.data.maxDrawTimeout <= time) {\n        const datum = this.networkBufferHistory[0];\n        if (length > 1) {\n          datum.idxLength += 2 - (this.segments % 2); //account for extra verts added for degenerate triangles\n          this.networkBufferHistory[1].idxLength -= 2 - (this.segments % 2);\n        }\n        this.idx.position = datum.idxLength;\n        this.idx.uv = datum.idxLength;\n        this.idx.normal = datum.idxLength;\n        this.idx.color = datum.idxLength;\n        this.sharedBuffer.remove(this.prevIdx, this.idx);\n        this.networkBufferHistory.shift();\n        if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n          this.networkBuffer.splice(0, datum.networkBufferCount);\n          this.bufferIndex -= datum.networkBufferCount;\n        }\n      }\n    }\n  },\n\n  _sendNetworkBuffer: (() => {\n    const copyArray = [];\n    //This number needs to be approx. < ~6000 based on napkin math\n    //see: https://github.com/webrtc/adapter/blob/682e0f2439e139da6c0c406370eae820637b8sc1a/src/js/common_shim.js#L157\n    const chunkAmount = 3000;\n    return function(clientId) {\n      if (NAF.utils.isMine(this.networkedEl)) {\n        if (this.networkBuffer.length <= chunkAmount) {\n          NAF.connection.sendDataGuaranteed(clientId, this.drawingId, {\n            type: MSG_BUFFER_DATA_FULL,\n            parts: 1,\n            buffer: this.networkBuffer\n          });\n        } else {\n          let start = 0;\n          let end = 0;\n          while (end < this.networkBuffer.length) {\n            end = Math.min(end + chunkAmount, this.networkBuffer.length);\n            copyArray.length = 0;\n            copyData(this.networkBuffer, copyArray, start, end - 1);\n            start = end;\n            NAF.connection.sendDataGuaranteed(clientId, this.drawingId, {\n              type: MSG_BUFFER_DATA_FULL,\n              parts: Math.ceil(this.networkBuffer.length / chunkAmount),\n              buffer: copyArray\n            });\n          }\n        }\n      }\n    };\n  })(),\n\n  _receiveData(_, dataType, data) {\n    switch (data.type) {\n      case MSG_CONFIRM_CONNECT:\n        this.sendNetworkBufferQueue.push(data.clientId);\n        break;\n      case MSG_BUFFER_DATA:\n        if (this.networkBufferInitialized) {\n          this.networkBuffer.push.apply(this.networkBuffer, data.buffer);\n        }\n        break;\n      case MSG_BUFFER_DATA_FULL:\n        this.networkBuffer.push.apply(this.networkBuffer, data.buffer);\n        if (++this.receivedBufferParts >= data.parts) {\n          this.networkBufferInitialized = true;\n        }\n        break;\n    }\n  },\n\n  getLastPoint() {\n    return this.lastPoint;\n  },\n\n  startDraw(position, direction, normal, color, radius) {\n    if (!NAF.connection.isConnected()) {\n      return;\n    }\n\n    this.drawStarted = true;\n\n    if (color) {\n      this.color.set(color);\n    }\n    if (radius) this.radius = radius;\n\n    this.lastPoint.copy(position);\n    this._addToNetworkBuffer(position, direction, normal);\n  },\n\n  draw(position, direction, normal, color, radius) {\n    if (!NAF.connection.isConnected() || !this.drawStarted) {\n      return;\n    }\n\n    if (color && color != \"#\" + this.color.getHexString().toUpperCase()) {\n      this.color.set(color);\n    }\n    if (radius) this.radius = radius;\n\n    this._addToNetworkBuffer(position, direction, normal);\n    this._draw(position, direction, normal);\n\n    this._updateBuffer();\n  },\n\n  _draw: (() => {\n    const capNormal = new THREE.Vector3();\n    return function(position, direction, normal, radiusMultiplier = 1.0) {\n      if (!this.lineStarted) {\n        this._generateSegments(this.lastSegments, position, direction, normal, this.radius * radiusMultiplier);\n\n        if (this.networkBufferHistory.length === 0) {\n          //start with CW faceculling order\n          this._addDegenerateTriangle();\n        } else {\n          //only do the following if the sharedBuffer is not empty\n          this._restartPrimitive();\n          this._addDegenerateTriangle();\n          if (this.segments % 2 === 0) {\n            //flip faceculling order if even numbered segments\n            this._addDegenerateTriangle();\n          }\n        }\n\n        //get normal for tip of cap\n        capNormal.copy(direction).negate();\n        //get normals for rim of cap\n        for (let i = 0; i < this.segments; i++) {\n          this.lastSegments[i].normal.add(capNormal).multiplyScalar(0.5);\n        }\n\n        this._drawCap(this.lastPoint, this.lastSegments, capNormal);\n        if (this.segments % 2 !== 0) {\n          //flip faceculling order if odd numbered segments\n          this._addDegenerateTriangle();\n        }\n\n        this.lineStarted = true;\n      } else {\n        this._generateSegments(this.currentSegments, position, direction, normal, this.radius * radiusMultiplier);\n        this._drawCylinder();\n\n        if (this.currentPointCount > this.data.maxPointsPerLine) {\n          this._drawEndCap(position, direction);\n          this._endLine();\n        }\n      }\n      this.lastPoint.copy(position);\n    };\n  })(),\n\n  undoDraw() {\n    if (!NAF.connection.isConnected() || this.drawStarted) {\n      return;\n    }\n    this._undoDraw();\n    this._pushToNetworkBuffer(\"-\");\n  },\n\n  _undoDraw() {\n    const length = this.networkBufferHistory.length;\n    if (length > 0) {\n      const datum = this.networkBufferHistory.pop();\n      this.idx.position = 0;\n      this.idx.uv = 0;\n      this.idx.normal = 0;\n      this.idx.color = 0;\n      if (length > 1) {\n        datum.idxLength += 1 - (this.segments % 2); //account for extra verts added for degenerate triangles\n        this.idx.position = this.sharedBuffer.idx.position - datum.idxLength;\n        this.idx.uv = this.sharedBuffer.idx.uv - datum.idxLength;\n        this.idx.normal = this.sharedBuffer.idx.normal - datum.idxLength;\n        this.idx.color = this.sharedBuffer.idx.color - datum.idxLength;\n      }\n      this.sharedBuffer.remove(this.idx, this.sharedBuffer.idx);\n      if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n        this.networkBuffer.splice(this.networkBuffer.length - datum.networkBufferCount, datum.networkBufferCount);\n        this.bufferIndex -= datum.networkBufferCount;\n      }\n    }\n  },\n\n  endDraw(position, direction, normal) {\n    this._endDraw(position, direction, normal);\n    this._updateBuffer();\n  },\n\n  _endDraw(position, direction, normal) {\n    if (!this.lineStarted && this.drawStarted) {\n      this._drawPoint(position);\n    } else if (this.lineStarted && this.drawStarted) {\n      this._addToNetworkBuffer(position, direction, normal);\n      this._draw(position, direction, normal);\n      this._drawEndCap(position, direction);\n    }\n    this._endLine();\n  },\n\n  _drawEndCap: (() => {\n    const projectedDirection = new THREE.Vector3();\n    const projectedPoint = new THREE.Vector3();\n    return function(position, direction) {\n      if (this.lineStarted && this.drawStarted) {\n        projectedDirection.copy(direction).multiplyScalar(this.radius);\n        projectedPoint.copy(position).add(projectedDirection);\n        this._addDegenerateTriangle(); //flip faceculling order before drawing end-cap\n        this._drawCap(projectedPoint, this.lastSegments, direction);\n      }\n    };\n  })(),\n\n  _endLine() {\n    if (!this.drawStarted) return;\n\n    if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) this._pushToNetworkBuffer(null);\n\n    const datum = {\n      networkBufferCount: this.networkBufferCount,\n      idxLength: this.vertexCount - 1,\n      time: this.el.sceneEl.clock.elapsedTime * 1000\n    };\n    this.networkBufferHistory.push(datum);\n    this.vertexCount = 0;\n    this.networkBufferCount = 0;\n    this.currentPointCount = 0;\n    this.lineStarted = false;\n    this.drawStarted = false;\n  },\n\n  _addToNetworkBuffer: (() => {\n    const copyDirection = new THREE.Vector3();\n    const copyNormal = new THREE.Vector3();\n    return function(position, direction, normal) {\n      if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n        ++this.currentPointCount;\n        this._pushToNetworkBuffer(this.currentPointCount);\n        this._pushToNetworkBuffer(position.x);\n        this._pushToNetworkBuffer(position.y);\n        this._pushToNetworkBuffer(position.z);\n        copyDirection.copy(direction);\n        copyDirection.setLength(this.radius); //encode radius as length of direction vector\n        this._pushToNetworkBuffer(copyDirection.x);\n        this._pushToNetworkBuffer(copyDirection.y);\n        this._pushToNetworkBuffer(copyDirection.z);\n        copyNormal.copy(normal);\n        copyNormal.setLength(this.color.getHex() + 1); //encode color as length, add one in case color is black\n        this._pushToNetworkBuffer(copyNormal.x);\n        this._pushToNetworkBuffer(copyNormal.y);\n        this._pushToNetworkBuffer(copyNormal.z);\n      }\n    };\n  })(),\n\n  _pushToNetworkBuffer(val) {\n    //don't increment networkBufferCount if undo, because the undo character\n    //will be removed in tick() on the next frame\n    if (val !== \"-\") {\n      ++this.networkBufferCount;\n    }\n    this.networkBuffer.push(val);\n  },\n\n  //draw a cylinder from last to current segments\n  _drawCylinder() {\n    //average the normals with the normals from the lastSegment\n    //not a perfect normal calculation, but works well enough\n    for (let i = 0; i < this.segments; i++) {\n      this.currentSegments[i].normal.add(this.lastSegments[i].normal).multiplyScalar(0.5);\n    }\n\n    for (let i = 0; i != this.segments + 1; i++) {\n      this._addVertex(this.lastSegments[i % this.segments]);\n      this._addVertex(this.currentSegments[i % this.segments]);\n    }\n\n    for (let i = 0; i < this.segments; i++) {\n      this.lastSegments[i].position.copy(this.currentSegments[i].position);\n      this.lastSegments[i].normal.copy(this.currentSegments[i].normal);\n    }\n  },\n\n  //draw a standalone point in space\n  _drawPoint: (() => {\n    const up = new THREE.Vector3(0, 1, 0);\n    const down = new THREE.Vector3(0, -1, 0);\n    const left = new THREE.Vector3(1, 0, 0);\n    const projectedDirection = new THREE.Vector3();\n    const projectedPoint = new THREE.Vector3();\n    return function(position) {\n      projectedDirection.copy(up).multiplyScalar(this.radius * 0.75);\n      projectedPoint.copy(position).add(projectedDirection);\n      this.lastPoint.copy(projectedPoint);\n\n      projectedDirection.copy(up).multiplyScalar(this.radius * 0.5);\n      projectedPoint.copy(position).add(projectedDirection);\n      this._draw(projectedPoint, down, left, 0.75);\n\n      this._draw(position, down, left);\n\n      projectedDirection.copy(down).multiplyScalar(this.radius * 0.5);\n      projectedPoint.copy(position).add(projectedDirection);\n      this._draw(projectedPoint, down, left, 0.75);\n\n      projectedDirection.copy(down).multiplyScalar(this.radius * 0.75);\n      projectedPoint.copy(position).add(projectedDirection);\n\n      this._addDegenerateTriangle(); //discarded\n      this._drawCap(projectedPoint, this.lastSegments, down);\n    };\n  })(),\n\n  //draw a cap to start/end a line\n  _drawCap(point, segments, normal) {\n    let segmentIndex = 0;\n    for (let i = 0; i < this.segments * 2 - (this.segments % 2); i++) {\n      if ((i - 2) % 4 === 0) {\n        this._addVertex({ position: point, normal: normal });\n      } else {\n        this._addVertex(segments[segmentIndex % this.segments]);\n        if ((i + 1) % 5 !== 0) {\n          ++segmentIndex;\n        }\n      }\n    }\n  },\n\n  _restartPrimitive() {\n    this.sharedBuffer.restartPrimitive();\n    ++this.vertexCount;\n  },\n\n  _updateBuffer() {\n    this.sharedBuffer.update();\n  },\n\n  _addVertex(segment) {\n    const point = segment.position;\n    const normal = segment.normal;\n    this.sharedBuffer.addVertex(point.x, point.y, point.z);\n    this.sharedBuffer.addColor(this.color.r, this.color.g, this.color.b);\n\n    if (normal) {\n      this.sharedBuffer.addNormal(normal.x, normal.y, normal.z);\n    } else {\n      ++this.sharedBuffer.idx.normal;\n    }\n\n    ++this.sharedBuffer.idx.uv;\n    ++this.vertexCount;\n  },\n\n  _addDegenerateTriangle() {\n    this._addVertex(this.lastSegments[0]);\n  },\n\n  //calculate the segments for a given point\n  _generateSegments(segmentsList, point, forward, up, radius) {\n    const angleIncrement = (Math.PI * 2) / this.segments;\n    for (let i = 0; i < this.segments; i++) {\n      const segment = segmentsList[i].position;\n      this._rotatePointAroundAxis(segment, point, forward, up, angleIncrement * i, radius);\n      segmentsList[i].normal.subVectors(segment, point).normalize();\n    }\n  },\n\n  _rotatePointAroundAxis: (() => {\n    const calculatedDirection = new THREE.Vector3();\n    return function(out, point, axis, up, angle, radius) {\n      calculatedDirection.copy(up);\n      calculatedDirection.applyAxisAngle(axis, angle);\n      out.copy(point).add(calculatedDirection.normalize().multiplyScalar(radius));\n    };\n  })()\n});\n","function registerNetworkSchemas() {\n  const vectorRequiresUpdate = epsilon => {\n    return () => {\n      let prev = null;\n\n      return curr => {\n        if (prev === null) {\n          prev = new THREE.Vector3(curr.x, curr.y, curr.z);\n          return true;\n        } else if (!NAF.utils.almostEqualVec3(prev, curr, epsilon)) {\n          prev.copy(curr);\n          return true;\n        }\n\n        return false;\n      };\n    };\n  };\n\n  NAF.schemas.add({\n    template: \"#remote-avatar-template\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      \"scale\",\n      \"player-info\",\n      \"networked-avatar\",\n      {\n        selector: \".camera\",\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \".camera\",\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        selector: \".left-controller\",\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \".left-controller\",\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        selector: \".left-controller\",\n        component: \"visible\"\n      },\n      {\n        selector: \".right-controller\",\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \".right-controller\",\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        selector: \".right-controller\",\n        component: \"visible\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-media\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      \"scale\",\n      // TODO: Optimize checking mediaOptions with requiresNetworkUpdate.\n      \"media-loader\",\n      {\n        component: \"media-video\",\n        property: \"time\"\n      },\n      {\n        component: \"media-video\",\n        property: \"videoPaused\"\n      },\n      {\n        component: \"media-pager\",\n        property: \"index\"\n      },\n      \"pinnable\"\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#static-media\",\n    components: [\n      // TODO: Optimize checking mediaOptions with requiresNetworkUpdate.\n      \"media-loader\",\n      {\n        component: \"media-video\",\n        property: \"time\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#static-controlled-media\",\n    components: [\n      // TODO: Optimize checking mediaOptions with requiresNetworkUpdate.\n      \"media-loader\",\n      {\n        component: \"media-video\",\n        property: \"time\"\n      },\n      {\n        component: \"media-video\",\n        property: \"videoPaused\"\n      },\n      {\n        component: \"media-pager\",\n        property: \"index\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-drawing\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      \"scale\",\n      \"networked-drawing\"\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-camera\",\n    components: [\"position\", \"rotation\"]\n  });\n\n  NAF.schemas.add({\n    template: \"#pen-interactable\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      \"scale\",\n      \"media-loader\",\n      {\n        selector: \"#pen\",\n        component: \"pen\",\n        property: \"radius\"\n      },\n      {\n        selector: \"#pen\",\n        component: \"pen\",\n        property: \"color\"\n      }\n    ]\n  });\n}\n\nexport default registerNetworkSchemas;\n","import \"@babel/polyfill\";\nimport \"./utils/debug-log\";\n\nconsole.log(`Hubs version: ${process.env.BUILD_VERSION || \"?\"}`);\n\nimport \"./assets/stylesheets/hub.scss\";\n\nimport \"aframe\";\nimport \"./utils/logging\";\nimport { patchWebGLRenderingContext } from \"./utils/webgl\";\npatchWebGLRenderingContext();\n\nimport \"three/examples/js/loaders/GLTFLoader\";\nimport \"networked-aframe/src/index\";\nimport \"naf-janus-adapter\";\nimport \"aframe-rounded\";\nimport \"webrtc-adapter\";\nimport \"aframe-slice9-component\";\nimport \"./utils/audio-context-fix\";\nimport \"./utils/threejs-positional-audio-updatematrixworld\";\nimport \"./utils/threejs-world-update\";\nimport patchThreeAllocations from \"./utils/threejs-allocation-patches\";\nimport { detectOS, detect } from \"detect-browser\";\nimport {\n  getReticulumFetchUrl,\n  getReticulumMeta,\n  invalidateReticulumMeta,\n  migrateChannelToSocket\n} from \"./utils/phoenix-utils\";\n\nimport nextTick from \"./utils/next-tick\";\nimport { addAnimationComponents } from \"./utils/animation\";\nimport Cookies from \"js-cookie\";\n\nimport \"./components/scene-components\";\nimport \"./components/mute-mic\";\nimport \"./components/bone-mute-state-indicator\";\nimport \"./components/bone-visibility\";\nimport \"./components/in-world-hud\";\nimport \"./components/virtual-gamepad-controls\";\nimport \"./components/ik-controller\";\nimport \"./components/hand-controls2\";\nimport \"./components/character-controller\";\nimport \"./components/hoverable-visuals\";\nimport \"./components/hover-visuals\";\nimport \"./components/offset-relative-to\";\nimport \"./components/player-info\";\nimport \"./components/debug\";\nimport \"./components/hand-poses\";\nimport \"./components/hud-controller\";\nimport \"./components/freeze-controller\";\nimport \"./components/icon-button\";\nimport \"./components/text-button\";\nimport \"./components/block-button\";\nimport \"./components/mute-button\";\nimport \"./components/kick-button\";\nimport \"./components/close-vr-notice-button\";\nimport \"./components/leave-room-button\";\nimport \"./components/visible-if-permitted\";\nimport \"./components/visibility-while-frozen\";\nimport \"./components/stats-plus\";\nimport \"./components/networked-avatar\";\nimport \"./components/media-views\";\nimport \"./components/avatar-volume-controls\";\nimport \"./components/pinch-to-move\";\nimport \"./components/pitch-yaw-rotator\";\nimport \"./components/position-at-box-shape-border\";\nimport \"./components/pinnable\";\nimport \"./components/pin-networked-object-button\";\nimport \"./components/drop-object-button\";\nimport \"./components/remove-networked-object-button\";\nimport \"./components/camera-focus-button\";\nimport \"./components/mirror-camera-button\";\nimport \"./components/unmute-video-button\";\nimport \"./components/destroy-at-extreme-distances\";\nimport \"./components/visible-to-owner\";\nimport \"./components/camera-tool\";\nimport \"./components/emit-state-change\";\nimport \"./components/action-to-event\";\nimport \"./components/action-to-remove\";\nimport \"./components/emit-scene-event-on-remove\";\nimport \"./components/follow-in-fov\";\nimport \"./components/matrix-auto-update\";\nimport \"./components/clone-media-button\";\nimport \"./components/open-media-button\";\nimport \"./components/transform-object-button\";\nimport \"./components/hover-menu\";\nimport \"./components/disable-frustum-culling\";\nimport \"./components/teleporter\";\nimport \"./components/set-active-camera\";\nimport \"./components/track-pose\";\nimport \"./components/replay\";\nimport \"./components/visibility-by-path\";\nimport \"./components/tags\";\nimport \"./components/hubs-text\";\nimport \"./components/billboard\";\nimport { sets as userinputSets } from \"./systems/userinput/sets\";\n\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\nimport { Router, Route } from \"react-router-dom\";\nimport { createBrowserHistory } from \"history\";\nimport { pushHistoryState } from \"./utils/history\";\nimport UIRoot from \"./react-components/ui-root\";\nimport AuthChannel from \"./utils/auth-channel\";\nimport HubChannel from \"./utils/hub-channel\";\nimport LinkChannel from \"./utils/link-channel\";\nimport { connectToReticulum } from \"./utils/phoenix-utils\";\nimport { disableiOSZoom } from \"./utils/disable-ios-zoom\";\nimport { proxiedUrlFor } from \"./utils/media-url-utils\";\nimport { traverseMeshesAndAddShapes } from \"./utils/physics-utils\";\nimport { handleExitTo2DInterstitial, handleReEntryToVRFrom2DInterstitial } from \"./utils/vr-interstitial\";\nimport { getAvatarSrc } from \"./utils/avatar-utils.js\";\nimport MessageDispatch from \"./message-dispatch\";\nimport SceneEntryManager from \"./scene-entry-manager\";\nimport Subscriptions from \"./subscriptions\";\nimport { createInWorldLogMessage } from \"./react-components/chat-message\";\n\nimport \"./systems/nav\";\nimport \"./systems/frame-scheduler\";\nimport \"./systems/personal-space-bubble\";\nimport \"./systems/app-mode\";\nimport \"./systems/permissions\";\nimport \"./systems/exit-on-blur\";\nimport \"./systems/camera-tools\";\nimport \"./systems/userinput/userinput\";\nimport \"./systems/camera-mirror\";\nimport \"./systems/userinput/userinput-debug\";\nimport \"./systems/ui-hotkeys\";\nimport \"./systems/tips\";\nimport \"./systems/interactions\";\nimport \"./systems/hubs-systems\";\nimport \"./systems/capture-system\";\nimport { SOUND_CHAT_MESSAGE } from \"./systems/sound-effects-system\";\n\nimport \"./gltf-component-mappings\";\n\nimport { App } from \"./App\";\n\nwindow.APP = new App();\nwindow.APP.RENDER_ORDER = {\n  HUD_BACKGROUND: 1,\n  HUD_ICONS: 2,\n  CURSOR: 3\n};\nconst store = window.APP.store;\nconst mediaSearchStore = window.APP.mediaSearchStore;\nconst OAUTH_FLOW_PERMS_TOKEN_KEY = \"ret-oauth-flow-perms-token\";\nconst NOISY_OCCUPANT_COUNT = 12; // Above this # of occupants, we stop posting join/leaves/renames\n\nconst qs = new URLSearchParams(location.search);\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\nconst isEmbed = window.self !== window.top;\nif (isEmbed && !qs.get(\"embed_token\")) {\n  // Should be covered by X-Frame-Options, but just in case.\n  throw new Error(\"no embed token\");\n}\n\nconst embedsEnabled = qs.get(\"embeds\");\n\nTHREE.Object3D.DefaultMatrixAutoUpdate = false;\nwindow.APP.quality = qs.get(\"quality\") || (isMobile || isMobileVR) ? \"low\" : \"high\";\n\nconst Ammo = require(\"ammo.js/builds/ammo.wasm.js\");\nconst AmmoWasm = require(\"ammo.js/builds/ammo.wasm.wasm\");\nwindow.Ammo = Ammo.bind(undefined, {\n  locateFile(path) {\n    if (path.endsWith(\".wasm\")) {\n      return AmmoWasm;\n    }\n    return path;\n  }\n});\nrequire(\"aframe-physics-system\");\n\nimport \"./systems/post-physics\";\n\nimport \"./components/owned-object-limiter\";\nimport \"./components/set-unowned-body-kinematic\";\nimport \"./components/scalable-when-grabbed\";\nimport \"./components/networked-counter\";\nimport \"./components/event-repeater\";\nimport \"./components/set-yxz-order\";\n\nimport \"./components/cursor-controller\";\n\nimport \"./components/nav-mesh-helper\";\n\nimport \"./components/tools/pen\";\nimport \"./components/tools/networked-drawing\";\nimport \"./components/tools/drawing-manager\";\n\nimport registerNetworkSchemas from \"./network-schemas\";\nimport registerTelemetry from \"./telemetry\";\nimport { warmSerializeElement } from \"./utils/serialize-element\";\n\nimport { getAvailableVREntryTypes, VR_DEVICE_AVAILABILITY } from \"./utils/vr-caps-detect.js\";\nimport detectConcurrentLoad from \"./utils/concurrent-load-detector.js\";\n\nimport qsTruthy from \"./utils/qs_truthy\";\n\nconst PHOENIX_RELIABLE_NAF = \"phx-reliable\";\nNAF.options.firstSyncSource = PHOENIX_RELIABLE_NAF;\n\nconst isBotMode = qsTruthy(\"bot\");\nconst isTelemetryDisabled = qsTruthy(\"disable_telemetry\");\nconst isDebug = qsTruthy(\"debug\");\nconst loadingEnvironmentURL = proxiedUrlFor(\n  \"https://uploads-prod.reticulum.io/files/61d77151-7a74-40a6-b427-0c5a350c4502.glb\"\n);\n\nif (!isBotMode && !isTelemetryDisabled) {\n  registerTelemetry(\"/hub\", \"Room Landing Page\");\n}\n\ndisableiOSZoom();\ndetectConcurrentLoad();\n\nstore.init();\n\nfunction getPlatformUnsupportedReason() {\n  if (typeof RTCDataChannelEvent === \"undefined\") return \"no_data_channels\";\n  return null;\n}\n\nfunction setupLobbyCamera() {\n  const camera = document.querySelector(\"#player-camera\");\n  const previewCamera = document.querySelector(\"#environment-scene\").object3D.getObjectByName(\"scene-preview-camera\");\n\n  if (previewCamera) {\n    camera.object3D.position.copy(previewCamera.position);\n    camera.object3D.rotation.copy(previewCamera.rotation);\n    camera.object3D.rotation.reorder(\"YXZ\");\n  } else {\n    const cameraPos = camera.object3D.position;\n    camera.object3D.position.set(cameraPos.x, 2.5, cameraPos.z);\n  }\n\n  camera.object3D.matrixNeedsUpdate = true;\n\n  camera.setAttribute(\"scene-preview-camera\", \"positionOnly: true; duration: 60\");\n  camera.components[\"pitch-yaw-rotator\"].set(camera.object3D.rotation.x, camera.object3D.rotation.y);\n}\n\nlet uiProps = {};\n\n// Hub ID and slug are the basename\nlet routerBaseName = document.location.pathname\n  .split(\"/\")\n  .slice(0, 2)\n  .join(\"/\");\n\nif (document.location.pathname.includes(\"hub.html\")) {\n  routerBaseName = \"\";\n}\n\nconst history = createBrowserHistory({ basename: routerBaseName });\nwindow.APP.history = history;\n\nfunction mountUI(props = {}) {\n  const scene = document.querySelector(\"a-scene\");\n  const disableAutoExitOnConcurrentLoad = qsTruthy(\"allow_multi\");\n  const forcedVREntryType = qs.get(\"vr_entry_type\");\n  const isCursorHoldingPen = scene && scene.systems.userinput.activeSets.includes(userinputSets.cursorHoldingPen);\n  const hasActiveCamera = scene && !!scene.systems[\"camera-tools\"].getMyCamera();\n\n  ReactDOM.render(\n    <Router history={history}>\n      <Route\n        render={routeProps => (\n          <UIRoot\n            {...{\n              scene,\n              isBotMode,\n              disableAutoExitOnConcurrentLoad,\n              forcedVREntryType,\n              store,\n              mediaSearchStore,\n              isCursorHoldingPen,\n              hasActiveCamera,\n              ...props,\n              ...routeProps\n            }}\n          />\n        )}\n      />\n    </Router>,\n    document.getElementById(\"ui-root\")\n  );\n}\n\nfunction remountUI(props) {\n  uiProps = { ...uiProps, ...props };\n  mountUI(uiProps);\n}\n\nasync function updateUIForHub(hub) {\n  remountUI({\n    hubId: hub.hub_id,\n    hubName: hub.name,\n    hubScene: hub.scene,\n    hubEntryCode: hub.entry_code\n  });\n}\n\nasync function updateEnvironmentForHub(hub) {\n  let sceneUrl = 'https://www.dropbox.com/s/ayl3t33p2ymnxux/Axon%20Park_Cliffside.glb'\n  let isLegacyBundle; // Deprecated\n\n  const environmentScene = document.querySelector(\"#environment-scene\");\n  const sceneEl = document.querySelector(\"a-scene\");\n\n  if (hub.scene) {\n    isLegacyBundle = false;\n    sceneUrl = hub.scene.model_url;\n  } else if (hub.scene === null) {\n    // delisted/removed scene\n    sceneUrl = loadingEnvironmentURL;\n  } else {\n    const defaultSpaceTopic = hub.topics[0];\n    const glbAsset = defaultSpaceTopic.assets.find(a => a.asset_type === \"glb\");\n    const bundleAsset = defaultSpaceTopic.assets.find(a => a.asset_type === \"gltf_bundle\");\n    sceneUrl = (glbAsset || bundleAsset).src;\n    const hasExtension = /\\.gltf/i.test(sceneUrl) || /\\.glb/i.test(sceneUrl);\n    isLegacyBundle = !(glbAsset || hasExtension);\n  }\n\n  if (isLegacyBundle) {\n    // Deprecated\n    const res = await fetch(sceneUrl);\n    const data = await res.json();\n    const baseURL = new URL(THREE.LoaderUtils.extractUrlBase(sceneUrl), window.location.href);\n    sceneUrl = new URL(data.assets[0].src, baseURL).href;\n  } else {\n    sceneUrl = proxiedUrlFor(sceneUrl);\n  }\n\n  console.log(`Scene URL: ${sceneUrl}`);\n\n  let environmentEl = null;\n\n  if (environmentScene.childNodes.length === 0) {\n    const environmentEl = document.createElement(\"a-entity\");\n    environmentEl.setAttribute(\"gltf-model-plus\", { src: sceneUrl, useCache: false, inflate: true });\n\n    environmentScene.appendChild(environmentEl);\n\n    environmentEl.addEventListener(\n      \"model-loaded\",\n      () => {\n        // Show the canvas once the model has loaded\n        document.querySelector(\".a-canvas\").classList.remove(\"a-hidden\");\n\n        //TODO: check if the environment was made with spoke to determine if a shape should be added\n        traverseMeshesAndAddShapes(environmentEl);\n      },\n      { once: true }\n    );\n  } else {\n    // Change environment\n    environmentEl = environmentScene.childNodes[0];\n\n    // Clear the three.js image cache and load the loading environment before switching to the new one.\n    THREE.Cache.clear();\n\n    environmentEl.addEventListener(\n      \"model-loaded\",\n      () => {\n        environmentEl.addEventListener(\n          \"model-loaded\",\n          () => {\n            traverseMeshesAndAddShapes(environmentEl);\n\n            // We've already entered, so move to new spawn point once new environment is loaded\n            if (sceneEl.is(\"entered\")) {\n              document.querySelector(\"#player-rig\").components[\"spawn-controller\"].moveToSpawnPoint();\n            }\n          },\n          { once: true }\n        );\n\n        environmentEl.setAttribute(\"gltf-model-plus\", { src: sceneUrl });\n      },\n      { once: true }\n    );\n\n    environmentEl.setAttribute(\"gltf-model-plus\", { src: loadingEnvironmentURL });\n  }\n}\n\nasync function handleHubChannelJoined(entryManager, hubChannel, messageDispatch, data) {\n  const scene = document.querySelector(\"a-scene\");\n  const isRejoin = NAF.connection.isConnected();\n\n  if (isRejoin) {\n    // Slight hack, to ensure correct presence state we need to re-send the entry event\n    // on re-join. Ideally this would be updated into the channel socket state but this\n    // would require significant changes to the hub channel events and socket management.\n    if (scene.is(\"entered\")) {\n      hubChannel.sendEntryEvent();\n    }\n\n    // Send complete sync on phoenix re-join.\n    NAF.connection.entities.completeSync(null, true);\n    return;\n  }\n\n  // Turn off NAF for embeds as an optimization, so the user's browser isn't getting slammed\n  // with NAF traffic on load.\n  if (isEmbed) {\n    hubChannel.allowNAFTraffic(false);\n  }\n\n  const hub = data.hubs[0];\n\n  let embedToken = hub.embed_token;\n\n  if (!embedToken) {\n    const embedTokenEntry = store.state.embedTokens && store.state.embedTokens.find(t => t.hubId === hub.hub_id);\n\n    if (embedTokenEntry) {\n      embedToken = embedTokenEntry.embedToken;\n    }\n  }\n\n  console.log(`Janus host: ${hub.host}`);\n\n  remountUI({\n    onSendMessage: messageDispatch.dispatch,\n    onMediaSearchResultEntrySelected: entry => scene.emit(\"action_selected_media_result_entry\", entry),\n    onMediaSearchCancelled: entry => scene.emit(\"action_media_search_cancelled\", entry),\n    onAvatarSaved: entry => scene.emit(\"action_avatar_saved\", entry),\n    embedToken: embedsEnabled ? embedToken : null\n  });\n\n  scene.addEventListener(\"action_selected_media_result_entry\", e => {\n    const entry = e.detail;\n    if (entry.type !== \"scene_listing\" && entry.type !== \"scene\") return;\n    if (!hubChannel.can(\"update_hub\")) return;\n\n    hubChannel.updateScene(entry.url);\n  });\n\n  // Handle request for user gesture\n  scene.addEventListener(\"2d-interstitial-gesture-required\", () => {\n    remountUI({\n      showInterstitialPrompt: true,\n      onInterstitialPromptClicked: () => {\n        scene.emit(\"2d-interstitial-gesture-complete\");\n        remountUI({ showInterstitialPrompt: false, onInterstitialPromptClicked: null });\n      }\n    });\n  });\n\n  const objectsScene = document.querySelector(\"#objects-scene\");\n  const objectsUrl = getReticulumFetchUrl(`/${hub.hub_id}/objects.gltf`);\n  const objectsEl = document.createElement(\"a-entity\");\n  objectsEl.setAttribute(\"gltf-model-plus\", { src: objectsUrl, useCache: false, inflate: true });\n\n  if (!isBotMode) {\n    objectsScene.appendChild(objectsEl);\n  }\n\n  // Wait for scene objects to load before connecting, so there is no race condition on network state.\n  const connectToScene = async () => {\n    scene.setAttribute(\"networked-scene\", {\n      room: hub.hub_id,\n      serverURL: `wss://${hub.host}`,\n      debug: !!isDebug\n    });\n\n    while (!scene.components[\"networked-scene\"] || !scene.components[\"networked-scene\"].data) await nextTick();\n\n    scene.addEventListener(\"adapter-ready\", ({ detail: adapter }) => {\n      let newHostPollInterval = null;\n\n      // When reconnecting, update the server URL if necessary\n      adapter.setReconnectionListeners(\n        () => {\n          if (newHostPollInterval) return;\n\n          newHostPollInterval = setInterval(async () => {\n            const currentServerURL = NAF.connection.adapter.serverUrl;\n            const newHubHost = await hubChannel.getHost();\n            const newServerURL = `wss://${newHubHost}`;\n\n            if (currentServerURL !== newServerURL) {\n              console.log(\"Connecting to new Janus server \" + newServerURL);\n              scene.setAttribute(\"networked-scene\", { serverURL: newServerURL });\n              adapter.serverUrl = newServerURL;\n            }\n          }, 1000);\n        },\n        () => {\n          clearInterval(newHostPollInterval);\n          newHostPollInterval = null;\n        },\n        null\n      );\n\n      const sendViaPhoenix = reliable => (clientId, dataType, data) => {\n        const payload = { dataType, data };\n\n        if (clientId) {\n          payload.clientId = clientId;\n        }\n\n        const isOpen = hubChannel.channel.socket.connectionState() === \"open\";\n\n        if (isOpen || reliable) {\n          if (isOpen) {\n            hubChannel.channel.push(\"naf\", payload);\n          } else {\n            // Memory is re-used, so make a copy\n            hubChannel.channel.push(\"naf\", AFRAME.utils.clone(payload));\n          }\n        }\n      };\n\n      adapter.reliableTransport = sendViaPhoenix(true);\n      adapter.unreliableTransport = sendViaPhoenix(false);\n    });\n\n    const loadEnvironmentAndConnect = () => {\n      updateEnvironmentForHub(hub);\n\n      scene.components[\"networked-scene\"]\n        .connect()\n        .then(() => scene.emit(\"didConnectToNetworkedScene\"))\n        .catch(connectError => {\n          // hacky until we get return codes\n          const isFull = connectError.error && connectError.error.msg.match(/\\bfull\\b/i);\n          console.error(connectError);\n          remountUI({ roomUnavailableReason: isFull ? \"full\" : \"connect_error\" });\n          entryManager.exitScene();\n\n          return;\n        });\n    };\n\n    updateUIForHub(hub);\n\n    if (!isEmbed) {\n      loadEnvironmentAndConnect();\n    } else {\n      remountUI({\n        onPreloadLoadClicked: () => {\n          hubChannel.allowNAFTraffic(true);\n          remountUI({ showPreload: false });\n          loadEnvironmentAndConnect();\n        }\n      });\n    }\n  };\n\n  if (!isBotMode) {\n    objectsEl.addEventListener(\"model-loaded\", async el => {\n      if (el.target !== objectsEl) return;\n      connectToScene();\n    });\n  } else {\n    connectToScene();\n  }\n}\n\nasync function runBotMode(scene, entryManager) {\n  const noop = () => {};\n  scene.renderer = { setAnimationLoop: noop, render: noop };\n\n  while (!NAF.connection.isConnected()) await nextTick();\n  entryManager.enterSceneWhenLoaded(new MediaStream(), false);\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\n  const canvas = document.querySelector(\".a-canvas\");\n  canvas.classList.add(\"a-hidden\");\n\n  warmSerializeElement();\n\n  if (!window.WebAssembly) {\n    remountUI({ showWebAssemblyDialog: true });\n    return;\n  }\n\n  // If we are on iOS but we don't have the mediaDevices API, then we are likely in a Firefox or Chrome WebView,\n  // or a WebView preview used in apps like Twitter and Discord. So we show the dialog that tells users to open\n  // the room in the real Safari.\n  const detectedOS = detectOS(navigator.userAgent);\n  if (detectedOS === \"iOS\" && !navigator.mediaDevices) {\n    remountUI({ showSafariDialog: true });\n    return;\n  }\n\n  // HACK: On Safari for iOS & MacOS, if mic permission is not granted, subscriber webrtc negotiation fails.\n  // So we need to insist on microphone grants to continue.\n  const browser = detect();\n  if ([\"iOS\", \"Mac OS\"].includes(detectedOS) && [\"safari\", \"ios\"].includes(browser.name)) {\n    try {\n      await navigator.mediaDevices.getUserMedia({ audio: true });\n    } catch (e) {\n      remountUI({ showSafariMicDialog: true });\n      return;\n    }\n  }\n\n  const hubId = qs.get(\"hub_id\") || document.location.pathname.substring(1).split(\"/\")[0];\n  console.log(`Hub ID: ${hubId}`);\n\n  const subscriptions = new Subscriptions(hubId);\n\n  if (navigator.serviceWorker) {\n    try {\n      navigator.serviceWorker\n        .register(\"/hub.service.js\")\n        .then(() => {\n          navigator.serviceWorker.ready\n            .then(registration => subscriptions.setRegistration(registration))\n            .catch(() => subscriptions.setRegistrationFailed());\n        })\n        .catch(() => subscriptions.setRegistrationFailed());\n    } catch (e) {\n      subscriptions.setRegistrationFailed();\n    }\n  } else {\n    subscriptions.setRegistrationFailed();\n  }\n\n  const scene = document.querySelector(\"a-scene\");\n  scene.setAttribute(\"shadow\", { enabled: window.APP.quality !== \"low\" }); // Disable shadows on low quality\n\n  // Physics needs to be ready before spawning anything.\n  while (!scene.systems.physics.initialized) await nextTick();\n\n  const onSceneLoaded = () => {\n    const physicsSystem = scene.systems.physics;\n    physicsSystem.setDebug(isDebug || physicsSystem.data.debug);\n    patchThreeAllocations();\n  };\n\n  if (scene.hasLoaded) {\n    onSceneLoaded();\n  } else {\n    scene.addEventListener(\"loaded\", onSceneLoaded, { once: true });\n  }\n\n  // If the stored avatar doesn't have a valid src, reset to a legacy avatar.\n  const avatarSrc = await getAvatarSrc(store.state.profile.avatarId);\n  if (!avatarSrc) {\n    store.resetToRandomLegacyAvatar();\n  }\n\n  const authChannel = new AuthChannel(store);\n  const hubChannel = new HubChannel(store, hubId);\n  const availableVREntryTypes = await getAvailableVREntryTypes();\n  const entryManager = new SceneEntryManager(hubChannel, authChannel, availableVREntryTypes, history);\n  const performConditionalSignIn = async (predicate, action, messageId, onFailure) => {\n    if (predicate()) return action();\n\n    const signInContinueTextId = scene.is(\"vr-mode\") ? \"entry.return-to-vr\" : \"dialog.close\";\n\n    handleExitTo2DInterstitial(true, () => remountUI({ showSignInDialog: false }));\n\n    remountUI({\n      showSignInDialog: true,\n      signInMessageId: `sign-in.${messageId}`,\n      signInCompleteMessageId: `sign-in.${messageId}-complete`,\n      signInContinueTextId,\n      onContinueAfterSignIn: async () => {\n        remountUI({ showSignInDialog: false });\n        let actionError = null;\n        if (predicate()) {\n          try {\n            await action();\n          } catch (e) {\n            actionError = e;\n          }\n        } else {\n          actionError = new Error(\"Predicate failed post sign-in\");\n        }\n\n        if (actionError && onFailure) onFailure(actionError);\n        handleReEntryToVRFrom2DInterstitial();\n      }\n    });\n  };\n\n  window.addEventListener(\"action_create_avatar\", () => {\n    performConditionalSignIn(\n      () => hubChannel.signedIn,\n      () => pushHistoryState(history, \"overlay\", \"avatar-editor\"),\n      \"create-avatar\"\n    );\n  });\n\n  scene.addEventListener(\"scene_media_selected\", e => {\n    const sceneInfo = e.detail;\n\n    performConditionalSignIn(\n      () => hubChannel.can(\"update_hub\"),\n      () => hubChannel.updateScene(sceneInfo),\n      \"change-scene\"\n    );\n  });\n\n  remountUI({ performConditionalSignIn, embed: isEmbed, showPreload: isEmbed });\n  entryManager.performConditionalSignIn = performConditionalSignIn;\n  entryManager.init();\n\n  const linkChannel = new LinkChannel(store);\n\n  window.APP.scene = scene;\n  window.APP.hubChannel = hubChannel;\n\n  const handleEarlyVRMode = () => {\n    // If VR headset is activated, refreshing page will fire vrdisplayactivate\n    // which puts A-Frame in VR mode, so exit VR mode whenever it is attempted\n    // to be entered and we haven't entered the room yet.\n    if (scene.is(\"vr-mode\") && !scene.is(\"vr-entered\")) {\n      console.log(\"Pre-emptively exiting VR mode.\");\n      scene.exitVR();\n      return true;\n    }\n\n    return false;\n  };\n\n  scene.addEventListener(\"enter-vr\", () => {\n    if (handleEarlyVRMode()) return true;\n\n    if (isMobileVR) {\n      // Optimization, stop drawing UI if not visible\n      remountUI({ hide: true });\n    }\n\n    document.body.classList.add(\"vr-mode\");\n\n    // Don't stretch canvas on cardboard, since that's drawing the actual VR view :)\n    if ((!isMobile && !isMobileVR) || availableVREntryTypes.cardboard !== VR_DEVICE_AVAILABILITY.yes) {\n      document.body.classList.add(\"vr-mode-stretch\");\n    }\n  });\n\n  handleEarlyVRMode();\n\n  // HACK A-Frame 0.9.0 seems to fail to wire up vrdisplaypresentchange early enough\n  // to catch presentation state changes and recognize that an HMD is presenting on startup.\n  window.addEventListener(\n    \"vrdisplaypresentchange\",\n    () => {\n      if (scene.is(\"vr-entered\")) return;\n      if (scene.is(\"vr-mode\")) return;\n\n      const device = AFRAME.utils.device.getVRDisplay();\n\n      if (device && device.isPresenting) {\n        if (!scene.is(\"vr-mode\")) {\n          console.warn(\"Hit A-Frame bug where VR display is presenting but A-Frame has not entered VR mode.\");\n          scene.enterVR();\n        }\n      }\n    },\n    { once: true }\n  );\n\n  scene.addEventListener(\"exit-vr\", () => {\n    document.body.classList.remove(\"vr-mode\");\n    document.body.classList.remove(\"vr-mode-stretch\");\n\n    remountUI({ hide: false });\n\n    // HACK: Oculus browser pauses videos when exiting VR mode, so we need to resume them after a timeout.\n    if (/OculusBrowser/i.test(window.navigator.userAgent)) {\n      document.querySelectorAll(\"[media-video]\").forEach(m => {\n        const video = m.components[\"media-video\"].video;\n\n        if (!video.paused) {\n          setTimeout(() => video.play(), 1000);\n        }\n      });\n    }\n  });\n\n  registerNetworkSchemas();\n\n  remountUI({\n    authChannel,\n    hubChannel,\n    linkChannel,\n    subscriptions,\n    enterScene: entryManager.enterScene,\n    exitScene: reason => {\n      entryManager.exitScene();\n\n      if (reason) {\n        remountUI({ roomUnavailableReason: reason });\n      }\n    },\n    initialIsSubscribed: subscriptions.isSubscribed(),\n    activeTips: scene.systems.tips.activeTips\n  });\n\n  scene.addEventListener(\"action_focus_chat\", () => {\n    const chatFocusTarget = document.querySelector(\".chat-focus-target\");\n    chatFocusTarget && chatFocusTarget.focus();\n  });\n\n  scene.addEventListener(\"tips_changed\", e => {\n    remountUI({ activeTips: e.detail });\n  });\n\n  scene.addEventListener(\"leave_room_requested\", () => {\n    scene.exitVR();\n    entryManager.exitScene(\"left\");\n    remountUI({ roomUnavailableReason: \"left\" });\n  });\n\n  scene.addEventListener(\"camera_toggled\", () => remountUI({}));\n\n  scene.addEventListener(\"camera_removed\", () => remountUI({}));\n\n  scene.addEventListener(\"hub_closed\", () => {\n    scene.exitVR();\n    entryManager.exitScene(\"closed\");\n    remountUI({ roomUnavailableReason: \"closed\" });\n  });\n\n  const platformUnsupportedReason = getPlatformUnsupportedReason();\n\n  if (platformUnsupportedReason) {\n    remountUI({ platformUnsupportedReason });\n    entryManager.exitScene();\n    return;\n  }\n\n  if (qs.get(\"required_version\") && process.env.BUILD_VERSION) {\n    const buildNumber = process.env.BUILD_VERSION.split(\" \", 1)[0]; // e.g. \"123 (abcd5678)\"\n\n    if (qs.get(\"required_version\") !== buildNumber) {\n      remountUI({ roomUnavailableReason: \"version_mismatch\" });\n      setTimeout(() => document.location.reload(), 5000);\n      entryManager.exitScene();\n      return;\n    }\n  }\n\n  getReticulumMeta().then(reticulumMeta => {\n    console.log(`Reticulum @ ${reticulumMeta.phx_host}: v${reticulumMeta.version} on ${reticulumMeta.pool}`);\n\n    if (\n      qs.get(\"required_ret_version\") &&\n      (qs.get(\"required_ret_version\") !== reticulumMeta.version || qs.get(\"required_ret_pool\") !== reticulumMeta.pool)\n    ) {\n      remountUI({ roomUnavailableReason: \"version_mismatch\" });\n      setTimeout(() => document.location.reload(), 5000);\n      entryManager.exitScene();\n      return;\n    }\n  });\n\n  if (isMobileVR) {\n    remountUI({ availableVREntryTypes, forcedVREntryType: \"vr\" });\n\n    if (/Oculus/.test(navigator.userAgent)) {\n      // HACK - The polyfill reports Cardboard as the primary VR display on startup out ahead of Oculus Go on Oculus Browser 5.5.0 beta. This display is cached by A-Frame,\n      // so we need to resolve that and get the real VRDisplay before entering as well.\n      const displays = await navigator.getVRDisplays();\n      const vrDisplay = displays.length && displays[0];\n      AFRAME.utils.device.getVRDisplay = () => vrDisplay;\n    }\n  } else {\n    const hasVREntryDevice =\n      availableVREntryTypes.cardboard !== VR_DEVICE_AVAILABILITY.no ||\n      availableVREntryTypes.generic !== VR_DEVICE_AVAILABILITY.no ||\n      availableVREntryTypes.daydream !== VR_DEVICE_AVAILABILITY.no;\n\n    remountUI({ availableVREntryTypes, forcedVREntryType: !hasVREntryDevice ? \"2d\" : null });\n  }\n\n  const environmentScene = document.querySelector(\"#environment-scene\");\n\n  const onFirstEnvironmentLoad = () => {\n    if (!scene.is(\"entered\")) {\n      setupLobbyCamera();\n    }\n\n    // Replace renderer with a noop renderer to reduce bot resource usage.\n    if (isBotMode) {\n      runBotMode(scene, entryManager);\n    }\n\n    environmentScene.removeEventListener(\"model-loaded\", onFirstEnvironmentLoad);\n  };\n\n  environmentScene.addEventListener(\"model-loaded\", onFirstEnvironmentLoad);\n\n  environmentScene.addEventListener(\"model-loaded\", () => {\n    // This will be run every time the environment is changed (including the first load.)\n    remountUI({ environmentSceneLoaded: true });\n    scene.emit(\"environment-scene-loaded\");\n\n    // Re-bind the teleporter controls collision meshes in case the scene changed.\n    document.querySelectorAll(\"a-entity[teleporter]\").forEach(x => x.components[\"teleporter\"].queryCollisionEntities());\n\n    for (const modelEl of environmentScene.children) {\n      addAnimationComponents(modelEl);\n    }\n  });\n\n  const socket = await connectToReticulum(isDebug);\n\n  socket.onClose(e => {\n    // The socket should close normally if the server has explicitly killed it.\n    const NORMAL_CLOSURE = 1000;\n    if (e.code === NORMAL_CLOSURE) {\n      entryManager.exitScene();\n      remountUI({ roomUnavailableReason: \"kicked\" });\n    }\n  });\n\n  let retDeployReconnectInterval;\n  const retReconnectMaxDelayMs = 15000;\n\n  // Reticulum global channel\n  let retPhxChannel = socket.channel(`ret`, { hub_id: hubId });\n  retPhxChannel\n    .join()\n    .receive(\"ok\", async data => subscriptions.setVapidPublicKey(data.vapid_public_key))\n    .receive(\"error\", res => {\n      subscriptions.setVapidPublicKey(null);\n      console.error(res);\n    });\n\n  const pushSubscriptionEndpoint = await subscriptions.getCurrentEndpoint();\n\n  const oauthFlowPermsToken = Cookies.get(OAUTH_FLOW_PERMS_TOKEN_KEY);\n\n  if (oauthFlowPermsToken) {\n    Cookies.remove(OAUTH_FLOW_PERMS_TOKEN_KEY);\n  }\n\n  const createHubChannelParams = permsToken => {\n    const params = {\n      profile: store.state.profile,\n      push_subscription_endpoint: pushSubscriptionEndpoint,\n      auth_token: null,\n      perms_token: null,\n      context: {\n        mobile: isMobile || isMobileVR,\n        hmd: availableVREntryTypes.isInHMD,\n        embed: isEmbed\n      }\n    };\n\n    if (permsToken) {\n      params.perms_token = permsToken;\n    }\n\n    const { token } = store.state.credentials;\n    if (token) {\n      console.log(`Logged into account ${store.credentialsAccountId}`);\n      params.auth_token = token;\n    }\n\n    return params;\n  };\n\n  const migrateToNewReticulumServer = async deployNotification => {\n    // On Reticulum deploys, reconnect after a random delay until pool + version match deployed version/pool\n    console.log(`Reticulum deploy detected v${deployNotification.ret_version} on ${deployNotification.ret_pool}`);\n    clearInterval(retDeployReconnectInterval);\n\n    setTimeout(() => {\n      const tryReconnect = async () => {\n        invalidateReticulumMeta();\n        const reticulumMeta = await getReticulumMeta();\n\n        if (\n          reticulumMeta.pool === deployNotification.ret_pool &&\n          reticulumMeta.version === deployNotification.ret_version\n        ) {\n          console.log(\"Reticulum reconnecting.\");\n          clearInterval(retDeployReconnectInterval);\n          const oldSocket = retPhxChannel.socket;\n          const socket = await connectToReticulum(isDebug, oldSocket.params());\n          retPhxChannel = await migrateChannelToSocket(retPhxChannel, socket);\n          await hubChannel.migrateToSocket(socket, createHubChannelParams());\n          authChannel.setSocket(socket);\n          linkChannel.setSocket(socket);\n\n          // Disconnect old socket after a delay to ensure this user is always registered in presence.\n          setTimeout(() => {\n            console.log(\"Reconnection complete. Disconnecting old reticulum socket.\");\n            oldSocket.teardown();\n          }, 10000);\n        }\n      };\n\n      retDeployReconnectInterval = setInterval(tryReconnect, 5000);\n      tryReconnect();\n    }, Math.floor(Math.random() * retReconnectMaxDelayMs));\n  };\n\n  retPhxChannel.on(\"notice\", async data => {\n    // On Reticulum deploys, reconnect after a random delay until pool + version match deployed version/pool\n    if (data.event === \"ret-deploy\") {\n      await migrateToNewReticulumServer(data);\n    }\n  });\n\n  const hubPhxChannel = socket.channel(`hub:${hubId}`, createHubChannelParams(oauthFlowPermsToken));\n\n  const presenceLogEntries = [];\n  const addToPresenceLog = entry => {\n    entry.key = Date.now().toString();\n\n    presenceLogEntries.push(entry);\n    remountUI({ presenceLogEntries });\n    if (entry.type === \"chat\") {\n      scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CHAT_MESSAGE);\n    }\n\n    // Fade out and then remove\n    setTimeout(() => {\n      entry.expired = true;\n      remountUI({ presenceLogEntries });\n\n      setTimeout(() => {\n        presenceLogEntries.splice(presenceLogEntries.indexOf(entry), 1);\n        remountUI({ presenceLogEntries });\n      }, 5000);\n    }, 20000);\n  };\n\n  const messageDispatch = new MessageDispatch(\n    scene,\n    entryManager,\n    hubChannel,\n    addToPresenceLog,\n    remountUI,\n    mediaSearchStore\n  );\n\n  let isInitialJoin = true;\n\n  hubChannel.setPhoenixChannel(hubPhxChannel);\n\n  hubPhxChannel\n    .join()\n    .receive(\"ok\", async data => {\n      socket.params().session_id = data.session_id;\n      socket.params().session_token = data.session_token;\n\n      const vrHudPresenceCount = document.querySelector(\"#hud-presence-count\");\n\n      if (isInitialJoin) {\n        store.addEventListener(\"statechanged\", hubChannel.sendProfileUpdate.bind(hubChannel));\n        hubChannel.presence.onSync(() => {\n          const presence = hubChannel.presence;\n\n          remountUI({\n            sessionId: socket.params().session_id,\n            presences: presence.state\n          });\n\n          const occupantCount = Object.entries(presence.state).length;\n          vrHudPresenceCount.setAttribute(\"text\", \"value\", occupantCount.toString());\n\n          if (occupantCount > 1) {\n            scene.addState(\"copresent\");\n          } else {\n            scene.removeState(\"copresent\");\n          }\n\n          // HACK - Set a flag on the presence object indicating if the initial sync has completed,\n          // which is used to determine if we should fire join/leave messages into the presence log.\n          presence.__hadInitialSync = true;\n\n          presence.onJoin((sessionId, current, info) => {\n            // Ignore presence join/leaves if this Presence has not yet had its initial sync (o/w the user\n            // will see join messages for every user.)\n            if (!hubChannel.presence.__hadInitialSync) return;\n\n            const meta = info.metas[info.metas.length - 1];\n            const occupantCount = Object.entries(hubChannel.presence.state).length;\n\n            if (occupantCount <= NOISY_OCCUPANT_COUNT) {\n              if (current) {\n                // Change to existing presence\n                const isSelf = sessionId === socket.params().session_id;\n                const currentMeta = current.metas[0];\n\n                if (\n                  !isSelf &&\n                  currentMeta.presence !== meta.presence &&\n                  meta.presence === \"room\" &&\n                  meta.profile.displayName\n                ) {\n                  addToPresenceLog({\n                    type: \"entered\",\n                    presence: meta.presence,\n                    name: meta.profile.displayName\n                  });\n                }\n\n                if (\n                  currentMeta.profile &&\n                  meta.profile &&\n                  currentMeta.profile.displayName !== meta.profile.displayName\n                ) {\n                  addToPresenceLog({\n                    type: \"display_name_changed\",\n                    oldName: currentMeta.profile.displayName,\n                    newName: meta.profile.displayName\n                  });\n                }\n              } else if (info.metas.length === 1) {\n                // New presence\n                const meta = info.metas[0];\n\n                if (meta.presence && meta.profile.displayName) {\n                  addToPresenceLog({\n                    type: \"join\",\n                    presence: meta.presence,\n                    name: meta.profile.displayName\n                  });\n                }\n              }\n            }\n\n            scene.emit(\"presence_updated\", {\n              sessionId,\n              profile: meta.profile,\n              roles: meta.roles,\n              streaming: meta.streaming,\n              recording: meta.recording\n            });\n          });\n\n          presence.onLeave((sessionId, current, info) => {\n            // Ignore presence join/leaves if this Presence has not yet had its initial sync\n            if (!hubChannel.presence.__hadInitialSync) return;\n\n            if (current && current.metas.length > 0) return;\n            const occupantCount = Object.entries(hubChannel.presence.state).length;\n            if (occupantCount > NOISY_OCCUPANT_COUNT) return;\n\n            const meta = info.metas[0];\n\n            if (meta.profile.displayName) {\n              addToPresenceLog({\n                type: \"leave\",\n                name: meta.profile.displayName\n              });\n            }\n          });\n        });\n      }\n\n      isInitialJoin = false;\n\n      const permsToken = oauthFlowPermsToken || data.perms_token;\n      hubChannel.setPermissionsFromToken(permsToken);\n\n      scene.addEventListener(\"adapter-ready\", ({ detail: adapter }) => {\n        adapter.setClientId(socket.params().session_id);\n        adapter.setJoinToken(data.perms_token);\n        hubChannel.addEventListener(\"permissions-refreshed\", e => adapter.setJoinToken(e.detail.permsToken));\n      });\n      subscriptions.setHubChannel(hubChannel);\n\n      subscriptions.setSubscribed(data.subscriptions.web_push);\n\n      remountUI({\n        hubIsBound: data.hub_requires_oauth,\n        initialIsFavorited: data.subscriptions.favorites,\n        initialIsSubscribed: subscriptions.isSubscribed()\n      });\n\n      await handleHubChannelJoined(entryManager, hubChannel, messageDispatch, data);\n    })\n    .receive(\"error\", res => {\n      if (res.reason === \"closed\") {\n        entryManager.exitScene();\n        remountUI({ roomUnavailableReason: \"closed\" });\n      } else if (res.reason === \"oauth_required\") {\n        entryManager.exitScene();\n        remountUI({ oauthInfo: res.oauth_info, showOAuthDialog: true });\n      } else if (res.reason === \"join_denied\") {\n        entryManager.exitScene();\n        remountUI({ roomUnavailableReason: \"denied\" });\n      }\n\n      console.error(res);\n    });\n\n  hubPhxChannel.on(\"naf\", data => {\n    if (!NAF.connection.adapter) return;\n    NAF.connection.adapter.onData(data, PHOENIX_RELIABLE_NAF);\n  });\n\n  hubPhxChannel.on(\"message\", ({ session_id, type, body, from }) => {\n    const getAuthor = () => {\n      const userInfo = hubChannel.presence.state[session_id];\n      if (from) {\n        return from;\n      } else if (userInfo) {\n        return userInfo.metas[0].profile.displayName;\n      } else {\n        return \"Mystery user\";\n      }\n    };\n\n    const name = getAuthor();\n    const maySpawn = scene.is(\"entered\");\n\n    const incomingMessage = { name, type, body, maySpawn, sessionId: session_id };\n\n    if (scene.is(\"vr-mode\")) {\n      createInWorldLogMessage(incomingMessage);\n    }\n\n    addToPresenceLog(incomingMessage);\n  });\n\n  hubPhxChannel.on(\"hub_refresh\", ({ session_id, hubs, stale_fields }) => {\n    const hub = hubs[0];\n    const userInfo = hubChannel.presence.state[session_id];\n\n    updateUIForHub(hub);\n\n    if (stale_fields.includes(\"scene\")) {\n      updateEnvironmentForHub(hub);\n\n      addToPresenceLog({\n        type: \"scene_changed\",\n        name: userInfo.metas[0].profile.displayName,\n        sceneName: hub.scene ? hub.scene.name : \"a custom URL\"\n      });\n    }\n\n    if (stale_fields.includes(\"name\")) {\n      const titleParts = document.title.split(\" | \"); // Assumes title has | trailing site name\n      titleParts[0] = hub.name;\n      document.title = titleParts.join(\" | \");\n\n      // Re-write the slug in the browser history\n      const pathParts = history.location.pathname.split(\"/\");\n      const oldSlug = pathParts[1];\n      const { search, state } = history.location;\n      const pathname = history.location.pathname.replace(`/${oldSlug}`, `/${hub.slug}`);\n\n      history.replace({ pathname, search, state });\n\n      addToPresenceLog({\n        type: \"hub_name_changed\",\n        name: userInfo.metas[0].profile.displayName,\n        hubName: hub.name\n      });\n    }\n\n    if (hub.entry_mode === \"deny\") {\n      scene.emit(\"hub_closed\");\n    }\n  });\n\n  hubPhxChannel.on(\"mute\", ({ session_id }) => {\n    if (session_id === NAF.clientId && !scene.is(\"muted\")) {\n      scene.emit(\"action_mute\");\n    }\n  });\n\n  authChannel.setSocket(socket);\n  linkChannel.setSocket(socket);\n});\n","// Stores a key in localStorage and registeres a listener for the same key being set (by another tab).\n// When detected, fire a \"concurrentload\" event.\nexport default function detectConcurrentLoad(instanceKey = \"global\") {\n  const key = `___concurrent_load_detector_${instanceKey}`;\n  localStorage.setItem(key, JSON.stringify({ started_at: new Date() }));\n  const onStorageEvent = e => {\n    if (e.key !== key) return;\n    window.dispatchEvent(new CustomEvent(\"concurrentload\"));\n    window.removeEventListener(\"storage\", onStorageEvent);\n  };\n  window.addEventListener(\"storage\", onStorageEvent);\n}\n","export default function patchThreeAllocations() {\n  const renderer = AFRAME.scenes[0].renderer;\n  const gl = renderer.context;\n\n  // These functions in three.js uses the arguments object, which allocates.\n  renderer.state.texImage2D = function(a, b, c, d, e, f, g, h, i) {\n    try {\n      if (g === undefined) {\n        gl.texImage2D(a, b, c, d, e, f);\n      } else {\n        gl.texImage2D(a, b, c, d, e, f, g, h, i);\n      }\n    } catch (error) {\n      console.error(\"THREE.WebGLState:\", error);\n    }\n  };\n\n  renderer.state.compressedTexImage2D = function(a, b, c, d, e, f, g, h, i, j) {\n    try {\n      if (h === undefined) {\n        gl.compressedTexImage2D(a, b, c, d, e, f, g);\n      } else if (i === undefined) {\n        gl.compressedTexImage2D(a, b, c, d, e, f, g, h);\n      } else if (j === undefined) {\n        gl.compressedTexImage2D(a, b, c, d, e, f, g, h, i);\n      } else {\n        gl.compressedTexImage2D(a, b, c, d, e, f, g, h, i, j);\n      }\n    } catch (error) {\n      console.error(\"THREE.WebGLState:\", error);\n    }\n  };\n}\n","const nonCorsProxyDomains = (process.env.NON_CORS_PROXY_DOMAINS || \"\").split(\",\");\nif (process.env.CORS_PROXY_SERVER) {\n  nonCorsProxyDomains.push(process.env.CORS_PROXY_SERVER);\n}\n\nconst commonKnownContentTypes = {\n  gltf: \"model/gltf\",\n  glb: \"model/gltf-binary\",\n  png: \"image/png\",\n  jpg: \"image/jpeg\",\n  jpeg: \"image/jpeg\",\n  pdf: \"application/pdf\",\n  mp4: \"video/mp4\",\n  mp3: \"audio/mpeg\"\n};\n\n// thanks to https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding\nfunction b64EncodeUnicode(str) {\n  // first we use encodeURIComponent to get percent-encoded UTF-8, then we convert the percent-encodings\n  // into raw bytes which can be fed into btoa.\n  const CHAR_RE = /%([0-9A-F]{2})/g;\n  return btoa(encodeURIComponent(str).replace(CHAR_RE, (_, p1) => String.fromCharCode(\"0x\" + p1)));\n}\n\nconst farsparkEncodeUrl = url => {\n  // farspark doesn't know how to read '=' base64 padding characters\n  // translate base64 + to - and / to _ for URL safety\n  return b64EncodeUnicode(url)\n    .replace(/=+$/g, \"\")\n    .replace(/\\+/g, \"-\")\n    .replace(/\\//g, \"_\");\n};\n\nexport const scaledThumbnailUrlFor = (url, width, height) => {\n  const urlHostname = new URL(url).hostname;\n\n  if (process.env.RETICULUM_SERVER) {\n    const retHostname = new URL(`https://${process.env.RETICULUM_SERVER}`).hostname;\n    if (retHostname === urlHostname) return url;\n  }\n\n  return `https://${process.env.FARSPARK_SERVER}/thumbnail/${farsparkEncodeUrl(url)}?w=${width}&h=${height}`;\n};\n\nexport const proxiedUrlFor = (url, index = null) => {\n  if (!(url.startsWith(\"http:\") || url.startsWith(\"https:\"))) return url;\n\n  const hasIndex = index !== null;\n\n  if (!hasIndex) {\n    // Skip known domains that do not require CORS proxying.\n    try {\n      const parsedUrl = new URL(url);\n      if (nonCorsProxyDomains.find(domain => parsedUrl.hostname.endsWith(domain))) return url;\n    } catch (e) {\n      // Ignore\n    }\n  }\n\n  if (hasIndex || !process.env.CORS_PROXY_SERVER) {\n    const method = hasIndex ? \"extract\" : \"raw\";\n    return `https://${process.env.FARSPARK_SERVER}/0/${method}/0/0/0/${index || 0}/${farsparkEncodeUrl(url)}`;\n  } else {\n    return `https://${process.env.CORS_PROXY_SERVER}/${url}`;\n  }\n};\n\nexport const getCustomGLTFParserURLResolver = gltfUrl => url => {\n  if (typeof url !== \"string\" || url === \"\") return \"\";\n  if (/^(https?:)?\\/\\//i.test(url)) return url;\n  if (/^data:.*,.*$/i.test(url)) return url;\n  if (/^blob:.*$/i.test(url)) return url;\n\n  if (process.env.CORS_PROXY_SERVER) {\n    // For absolute paths with a CORS proxied gltf URL, re-write the url properly to be proxied\n    const corsProxyPrefix = `https://${process.env.CORS_PROXY_SERVER}/`;\n\n    if (gltfUrl.startsWith(corsProxyPrefix)) {\n      const originalUrl = decodeURIComponent(gltfUrl.substring(corsProxyPrefix.length));\n      const originalUrlParts = originalUrl.split(\"/\");\n\n      // Drop the .gltf filename\n      const path = new URL(url).pathname;\n      const assetUrl = originalUrlParts.slice(0, originalUrlParts.length - 1).join(\"/\") + \"/\" + path;\n      return corsProxyPrefix + assetUrl;\n    }\n  }\n\n  return url;\n};\n\nexport const guessContentType = url => {\n  if (url.startsWith(\"hubs://\") && url.endsWith(\"/video\")) return \"video/vnd.hubs-webrtc\";\n  const extension = new URL(url).pathname.split(\".\").pop();\n  return commonKnownContentTypes[extension];\n};\nconst hubsSceneRegex = /https?:\\/\\/(hubs.local(:\\d+)?|(smoke-)?hubs.mozilla.com)\\/scenes\\/(\\w+)\\/?\\S*/;\nconst hubsAvatarRegex = /https?:\\/\\/(hubs.local(:\\d+)?|(smoke-)?hubs.mozilla.com)\\/avatars\\/(\\w+)\\/?\\S*/;\nconst hubsRoomRegex = /https?:\\/\\/(hubs.local(:\\d+)?|(smoke-)?hubs.mozilla.com)\\/(\\w+)\\/?\\S*/;\nexport const isHubsSceneUrl = hubsSceneRegex.test.bind(hubsSceneRegex);\nexport const isHubsRoomUrl = url => !isHubsSceneUrl(url) && hubsRoomRegex.test(url);\nexport const isHubsDestinationUrl = url => isHubsSceneUrl(url) || isHubsRoomUrl(url);\nexport const isHubsAvatarUrl = hubsAvatarRegex.test.bind(hubsAvatarRegex);\n","module.exports = {\n  COLLISION_LAYERS: {\n    ALL: -1,\n    NONE: 0,\n    INTERACTABLES: 1,\n    ENVIRONMENT: 2,\n    AVATAR: 4,\n    HANDS: 8,\n    DEFAULT_INTERACTABLE: 1 | 2 | 4 | 8,\n    UNOWNED_INTERACTABLE: 1 | 8,\n    DEFAULT_SPAWNER: 1 | 8\n  }\n};\n","import { forEachMaterial } from \"../utils/material-utils\";\nimport cubeMapPosX from \"../assets/images/cubemap/posx.jpg\";\nimport cubeMapNegX from \"../assets/images/cubemap/negx.jpg\";\nimport cubeMapPosY from \"../assets/images/cubemap/posy.jpg\";\nimport cubeMapNegY from \"../assets/images/cubemap/negy.jpg\";\nimport cubeMapPosZ from \"../assets/images/cubemap/posz.jpg\";\nimport cubeMapNegZ from \"../assets/images/cubemap/negz.jpg\";\n\nexport async function createDefaultEnvironmentMap() {\n  const urls = [cubeMapPosX, cubeMapNegX, cubeMapPosY, cubeMapNegY, cubeMapPosZ, cubeMapNegZ];\n  const texture = await new Promise((resolve, reject) =>\n    new THREE.CubeTextureLoader().load(urls, resolve, undefined, reject)\n  );\n  texture.format = THREE.RGBFormat;\n  return texture;\n}\n\nAFRAME.registerComponent(\"environment-map\", {\n  init() {\n    this.environmentMap = null;\n\n    this.updateEnvironmentMap = this.updateEnvironmentMap.bind(this);\n  },\n\n  updateEnvironmentMap(environmentMap) {\n    this.environmentMap = environmentMap;\n    this.applyEnvironmentMap(this.el.object3D);\n  },\n\n  applyEnvironmentMap(object3D) {\n    object3D.traverse(object => {\n      forEachMaterial(object, material => {\n        if (material.isMeshStandardMaterial) {\n          material.envMap = this.environmentMap;\n          material.needsUpdate = true;\n        }\n      });\n    });\n  }\n});\n","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posx-d235fb97df77b607be04b84125f40e7c.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negx-35034574e114423babdea92b6a2eb97a.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posy-d0c4e1e7979d75923d4d8b49c191bc6e.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negy-35808d21d1d17ac1b84d3184e365093b.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posz-de29aa8396196e4b040cd5305e351dbe.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negz-d73d18a8b7994524dc39a6ea3fcf43fc.jpg\";","import { detectOS } from \"detect-browser\";\n\nexport function disableiOSZoom() {\n  if (detectOS(navigator.userAgent) !== \"iOS\") return;\n\n  let lastTouchAtMs = 0;\n\n  document.addEventListener(\"touchmove\", ev => {\n    if (ev.scale === 1) return;\n\n    ev.preventDefault();\n  });\n\n  document.addEventListener(\"touchend\", ev => {\n    const now = new Date().getTime();\n    const isDoubleTouch = now - lastTouchAtMs <= 300;\n    lastTouchAtMs = now;\n\n    if (isDoubleTouch) {\n      ev.preventDefault();\n    }\n  });\n}\n","import Store from \"./storage/store\";\nimport MediaSearchStore from \"./storage/media-search-store\";\n\nexport class App {\n  constructor() {\n    this.scene = null;\n    this.quality = \"low\";\n    this.store = new Store();\n    this.mediaSearchStore = new MediaSearchStore();\n  }\n\n  setQuality(quality) {\n    if (this.quality === quality) {\n      return false;\n    }\n\n    this.quality = quality;\n\n    if (this.scene) {\n      this.scene.dispatchEvent(new CustomEvent(\"quality-changed\", { detail: quality }));\n    }\n\n    return true;\n  }\n}\n","// Provides a global registry of running components\nexport function registerComponentInstance(component, name) {\n  window.APP.componentRegistry = window.APP.componentRegistry || {};\n  window.APP.componentRegistry[name] = window.APP.componentRegistry[name] || [];\n  window.APP.componentRegistry[name].push(component);\n}\n\nexport function deregisterComponentInstance(component, name) {\n  if (!window.APP.componentRegistry || !window.APP.componentRegistry[name]) return;\n  window.APP.componentRegistry[name].splice(window.APP.componentRegistry[name].indexOf(component), 1);\n}\n\nexport function getCurrentStreamer() {\n  if (!window.APP || !window.APP.componentRegistry) return null;\n  const playerInfos = window.APP.componentRegistry[\"player-info\"] || [];\n  const presences = window.APP.hubChannel.presence.state;\n\n  for (let i = 0; i < playerInfos.length; i++) {\n    const playerInfo = playerInfos[i];\n    const presence = presences[playerInfo.playerSessionId];\n\n    if (presence && presence.metas[0] && presence.metas[0].streaming) {\n      return playerInfo;\n    }\n  }\n\n  return null;\n}\n","// removed by extract-text-webpack-plugin\nmodule.exports = {\"media-browser\":\"media-browser__media-browser__y0Hsu\",\"mediaBrowser\":\"media-browser__media-browser__y0Hsu\",\"facets\":\"media-browser__facets__1Yz65\",\"facet\":\"media-browser__facet__2uP6U\",\"body\":\"media-browser__body__j6Tv2\",\"pager\":\"media-browser__pager__RKx5O\",\"header-center\":\"media-browser__header-center__2D9CW\",\"headerCenter\":\"media-browser__header-center__2D9CW\",\"search\":\"media-browser__search__3gQ84\",\"engine-attribution\":\"media-browser__engine-attribution__2P2aD\",\"engineAttribution\":\"media-browser__engine-attribution__2P2aD\",\"engine-attribution-contents\":\"media-browser__engine-attribution-contents__gCdfr\",\"engineAttributionContents\":\"media-browser__engine-attribution-contents__gCdfr\",\"favorites-header\":\"media-browser__favorites-header__1XzZx\",\"favoritesHeader\":\"media-browser__favorites-header__1XzZx\",\"box\":\"media-browser__box__1KHYi\",\"header\":\"media-browser__header__zqZ09\",\"no-search\":\"media-browser__no-search__3N90H\",\"noSearch\":\"media-browser__no-search__3N90H\",\"nav\":\"media-browser__nav__9J5If\",\"nav-right-pad\":\"media-browser__nav-right-pad__1qH0B\",\"navRightPad\":\"media-browser__nav-right-pad__1qH0B\",\"nav-source\":\"media-browser__nav-source__o6NI6\",\"navSource\":\"media-browser__nav-source__o6NI6\",\"nav-source-selected\":\"media-browser__nav-source-selected__2osjH\",\"navSourceSelected\":\"media-browser__nav-source-selected__2osjH\",\"nav-scroll-arrow\":\"media-browser__nav-scroll-arrow__2Nikk\",\"navScrollArrow\":\"media-browser__nav-scroll-arrow__2Nikk\",\"tiles\":\"media-browser__tiles__1BYEY\",\"tile\":\"media-browser__tile__2lzHU\",\"info\":\"media-browser__info__2c8Zs\",\"name\":\"media-browser__name__RFiE4\",\"attribution\":\"media-browser__attribution__3glgj\",\"creator\":\"media-browser__creator__3LDPh\",\"publisher\":\"media-browser__publisher__mTzsX\",\"last-joined\":\"media-browser__last-joined__2DVWf\",\"lastJoined\":\"media-browser__last-joined__2DVWf\",\"tile-link\":\"media-browser__tile-link__IXyUO\",\"tileLink\":\"media-browser__tile-link__IXyUO\",\"tile-content\":\"media-browser__tile-content__1QYSP\",\"tileContent\":\"media-browser__tile-content__1QYSP\",\"avatar-tile\":\"media-browser__avatar-tile__qNo2r\",\"avatarTile\":\"media-browser__avatar-tile__qNo2r\",\"edit-avatar\":\"media-browser__edit-avatar__2HBfV\",\"editAvatar\":\"media-browser__edit-avatar__2HBfV\",\"create-tile\":\"media-browser__create-tile__RL9vr\",\"createTile\":\"media-browser__create-tile__RL9vr\",\"tiles-variable\":\"media-browser__tiles-variable__1ZNxg\",\"tilesVariable\":\"media-browser__tiles-variable__1ZNxg\",\"page-number\":\"media-browser__page-number__OTpSH\",\"pageNumber\":\"media-browser__page-number__OTpSH\",\"pager-button-disabled\":\"media-browser__pager-button-disabled__ytlSN\",\"pagerButtonDisabled\":\"media-browser__pager-button-disabled__ytlSN\",\"header-left\":\"media-browser__header-left__1ObQh\",\"headerLeft\":\"media-browser__header-left__1ObQh\",\"header-right\":\"media-browser__header-right__3k3JZ\",\"headerRight\":\"media-browser__header-right__3k3JZ\",\"create-button\":\"media-browser__create-button__30hMV\",\"createButton\":\"media-browser__create-button__30hMV\",\"create-link\":\"media-browser__create-link__28Bpj\",\"createLink\":\"media-browser__create-link__28Bpj\",\"empty-string\":\"media-browser__empty-string__3r0tc\",\"emptyString\":\"media-browser__empty-string__3r0tc\",\"media-browser-inline\":\"media-browser__media-browser-inline__3AgWD\",\"mediaBrowserInline\":\"media-browser__media-browser-inline__3AgWD\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"email-field\":\"sign-in-dialog__email-field__g3xRW\",\"emailField\":\"sign-in-dialog__email-field__g3xRW\",\"next-button\":\"sign-in-dialog__next-button__2pGtq\",\"nextButton\":\"sign-in-dialog__next-button__2pGtq\",\"continue-button\":\"sign-in-dialog__continue-button__kFN6Z\",\"continueButton\":\"sign-in-dialog__continue-button__kFN6Z\",\"sign-in-form\":\"sign-in-dialog__sign-in-form__3Muog\",\"signInForm\":\"sign-in-dialog__sign-in-form__3Muog\",\"sign-in-complete\":\"sign-in-dialog__sign-in-complete__3JMkv\",\"signInComplete\":\"sign-in-dialog__sign-in-complete__3JMkv\",\"terms\":\"sign-in-dialog__terms__3TT6i\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"ui\":\"hub__ui__3UYRO\",\"ui-dialog\":\"hub__ui-dialog__vlyfc\",\"uiDialog\":\"hub__ui-dialog__vlyfc\",\"ui-interactive\":\"hub__ui-interactive__3bdyc\",\"uiInteractive\":\"hub__ui-interactive__3bdyc\",\"presence-info\":\"hub__presence-info__dqWyo\",\"presenceInfo\":\"hub__presence-info__dqWyo\",\"corner-button\":\"hub__corner-button__2KphD\",\"cornerButton\":\"hub__corner-button__2KphD\",\"profile-entry\":\"hub__profile-entry__1RY0R\",\"profileEntry\":\"hub__profile-entry__1RY0R\",\"form-submit\":\"hub__form-submit__12yem\",\"formSubmit\":\"hub__form-submit__12yem\",\"nag-corner-button\":\"hub__nag-corner-button__lNoyE\",\"nagCornerButton\":\"hub__nag-corner-button__lNoyE\",\"choose-scene-button\":\"hub__choose-scene-button__5Y0Q_\",\"chooseSceneButton\":\"hub__choose-scene-button__5Y0Q_\",\"choose-avatar\":\"hub__choose-avatar__22JJm\",\"chooseAvatar\":\"hub__choose-avatar__22JJm\",\"entry-button-secondary\":\"hub__entry-button-secondary__2ui-g\",\"entryButtonSecondary\":\"hub__entry-button-secondary__2ui-g\",\"entry-panel\":\"hub__entry-panel__cCmIv\",\"entryPanel\":\"hub__entry-panel__cCmIv\",\"button-container\":\"hub__button-container__38FOc\",\"buttonContainer\":\"hub__button-container__38FOc\",\"secondary-action-button\":\"hub__secondary-action-button__2KoCD\",\"secondaryActionButton\":\"hub__secondary-action-button__2KoCD\",\"leave-button\":\"hub__leave-button__1YK4o\",\"leaveButton\":\"hub__leave-button__1YK4o\",\"interstitial\":\"hub__interstitial__3WXbJ\",\"entry-button\":\"hub__entry-button__1e9jM\",\"entryButton\":\"hub__entry-button__1e9jM\",\"action-button\":\"hub__action-button__3zqlu\",\"actionButton\":\"hub__action-button__3zqlu\",\"collapse-button\":\"hub__collapse-button__3N-6b\",\"collapseButton\":\"hub__collapse-button__3N-6b\",\"favorite-button\":\"hub__favorite-button__1Qgbp\",\"favoriteButton\":\"hub__favorite-button__1Qgbp\",\"back\":\"hub__back__3AZh2\",\"form-field-text\":\"hub__form-field-text__tR1Lt\",\"formFieldText\":\"hub__form-field-text__tR1Lt\",\"lobby-label\":\"hub__lobby-label__2ktmo\",\"lobbyLabel\":\"hub__lobby-label__2ktmo\",\"label\":\"hub__label__1kjp1\",\"title\":\"hub__title__ezGEu\",\"name\":\"hub__name__2umw1\",\"rename-button\":\"hub__rename-button__h-4K7\",\"renameButton\":\"hub__rename-button__h-4K7\",\"center\":\"hub__center__1Mvfu\",\"wide-button\":\"hub__wide-button__1yqDc\",\"wideButton\":\"hub__wide-button__1yqDc\",\"screen-sharing\":\"hub__screen-sharing__2VF91\",\"screenSharing\":\"hub__screen-sharing__2VF91\",\"checkbox\":\"hub__checkbox__32dyv\",\"invite-tip\":\"hub__invite-tip__9enoe\",\"inviteTip\":\"hub__invite-tip__9enoe\",\"bottom-tip\":\"hub__bottom-tip__1-9c8\",\"bottomTip\":\"hub__bottom-tip__1-9c8\",\"loading-text\":\"hub__loading-text__1WDud\",\"loadingText\":\"hub__loading-text__1WDud\",\"streaming-tip\":\"hub__streaming-tip__1LnId\",\"streamingTip\":\"hub__streaming-tip__1LnId\",\"streaming-tip-attach-point\":\"hub__streaming-tip-attach-point__1oCgh\",\"streamingTipAttachPoint\":\"hub__streaming-tip-attach-point__1oCgh\",\"streaming-tip-close\":\"hub__streaming-tip-close__E6fwS\",\"streamingTipClose\":\"hub__streaming-tip-close__E6fwS\",\"streaming-tip-message\":\"hub__streaming-tip-message__XcScW\",\"streamingTipMessage\":\"hub__streaming-tip-message__XcScW\",\"ui-dialog-box-contents\":\"hub__ui-dialog-box-contents__PZ5qP\",\"uiDialogBoxContents\":\"hub__ui-dialog-box-contents__PZ5qP\",\"backgrounded\":\"hub__backgrounded__30IfD\",\"in-room-favorite-button\":\"hub__in-room-favorite-button__2T-zs\",\"inRoomFavoriteButton\":\"hub__in-room-favorite-button__2T-zs\",\"occupant-count\":\"hub__occupant-count__3eAEj\",\"occupantCount\":\"hub__occupant-count__3eAEj\",\"presence-info-selected\":\"hub__presence-info-selected__FRBSA\",\"presenceInfoSelected\":\"hub__presence-info-selected__FRBSA\",\"camera-mode-exit-button\":\"hub__camera-mode-exit-button__BqKKt\",\"cameraModeExitButton\":\"hub__camera-mode-exit-button__BqKKt\",\"corner-button-selected\":\"hub__corner-button-selected__Cqa93\",\"cornerButtonSelected\":\"hub__corner-button-selected__Cqa93\",\"invite-tip-attach-point\":\"hub__invite-tip-attach-point__2y_bz\",\"inviteTipAttachPoint\":\"hub__invite-tip-attach-point__2y_bz\",\"tip-cancel\":\"hub__tip-cancel__inNaZ\",\"tipCancel\":\"hub__tip-cancel__inNaZ\",\"tip\":\"hub__tip__2fJVE\",\"split-tip\":\"hub__split-tip__1ZzAR\",\"splitTip\":\"hub__split-tip__1ZzAR\",\"split-tip-icon\":\"hub__split-tip-icon__U8mYn\",\"splitTipIcon\":\"hub__split-tip-icon__U8mYn\",\"spawn_menu-icon\":\"hub__spawn_menu-icon__2OAkM\",\"spawnMenuIcon\":\"hub__spawn_menu-icon__2OAkM\",\"object_rotate_button-icon\":\"hub__object_rotate_button-icon__imE5p\",\"objectRotateButtonIcon\":\"hub__object_rotate_button-icon__imE5p\",\"object_scale_button-icon\":\"hub__object_scale_button-icon__3dQUx\",\"objectScaleButtonIcon\":\"hub__object_scale_button-icon__3dQUx\",\"object_recenter_button-icon\":\"hub__object_recenter_button-icon__3JV-m\",\"objectRecenterButtonIcon\":\"hub__object_recenter_button-icon__3JV-m\",\"avatar-editor\":\"hub__avatar-editor__2b8-H\",\"avatarEditor\":\"hub__avatar-editor__2b8-H\",\"logo\":\"hub__logo__3kJSj\",\"form\":\"hub__form__3kQXh\",\"box\":\"hub__box__2SMbn\",\"links\":\"hub__links__1C6Ce\",\"darkened\":\"hub__darkened__1gqMQ\",\"display-name\":\"hub__display-name__36hFZ\",\"displayName\":\"hub__display-name__36hFZ\",\"preview\":\"hub__preview__2UUoU\",\"edit-avatar\":\"hub__edit-avatar__22A53\",\"editAvatar\":\"hub__edit-avatar__22A53\",\"entry-dialog\":\"hub__entry-dialog__2Ljux\",\"entryDialog\":\"hub__entry-dialog__2Ljux\",\"favorited\":\"hub__favorited__3c3lB\",\"icon\":\"hub__icon__1pzf7\",\"bolded\":\"hub__bolded__2MYLZ\",\"subtitle\":\"hub__subtitle__3kYcd\",\"room-subtitle\":\"hub__room-subtitle__GhUCG\",\"roomSubtitle\":\"hub__room-subtitle__GhUCG\",\"lobby\":\"hub__lobby__2VW6G\",\"profile-icon\":\"hub__profile-icon__fwSfD\",\"profileIcon\":\"hub__profile-icon__fwSfD\",\"button-subtitle\":\"hub__button-subtitle__3kkpo\",\"buttonSubtitle\":\"hub__button-subtitle__3kkpo\",\"audio-loader\":\"hub__audio-loader__F5ovU\",\"audioLoader\":\"hub__audio-loader__F5ovU\",\"webvr-link-container\":\"hub__webvr-link-container__1Vq5m\",\"webvrLinkContainer\":\"hub__webvr-link-container__1Vq5m\",\"webvr-link\":\"hub__webvr-link__xW04U\",\"webvrLink\":\"hub__webvr-link__xW04U\",\"secondary\":\"hub__secondary__22yt_\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"touchZone\":\"virtual-gamepad-controls__touchZone__1KF_C\",\"left\":\"virtual-gamepad-controls__left__1-URB\",\"right\":\"virtual-gamepad-controls__right__1cgnU\",\"mockJoystickContainer\":\"virtual-gamepad-controls__mockJoystickContainer__1aH3e\",\"mockJoystick\":\"virtual-gamepad-controls__mockJoystick__2CuCG\",\"inner\":\"virtual-gamepad-controls__inner__1Bn3C\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"ui\":\"ui-root__ui__33CMU\",\"ui-dialog\":\"ui-root__ui-dialog__2TY9Y\",\"uiDialog\":\"ui-root__ui-dialog__2TY9Y\",\"ui-interactive\":\"ui-root__ui-interactive__2mtC4\",\"uiInteractive\":\"ui-root__ui-interactive__2mtC4\",\"presence-info\":\"ui-root__presence-info__3cieq\",\"presenceInfo\":\"ui-root__presence-info__3cieq\",\"corner-button\":\"ui-root__corner-button__2rfQ5\",\"cornerButton\":\"ui-root__corner-button__2rfQ5\",\"nag-corner-button\":\"ui-root__nag-corner-button__3TFW5\",\"nagCornerButton\":\"ui-root__nag-corner-button__3TFW5\",\"choose-scene-button\":\"ui-root__choose-scene-button__3VNdD\",\"chooseSceneButton\":\"ui-root__choose-scene-button__3VNdD\",\"leave-button\":\"ui-root__leave-button__29u2_\",\"leaveButton\":\"ui-root__leave-button__29u2_\",\"interstitial\":\"ui-root__interstitial__1cotl\",\"invite-tip\":\"ui-root__invite-tip__20NJ6\",\"inviteTip\":\"ui-root__invite-tip__20NJ6\",\"bottom-tip\":\"ui-root__bottom-tip__2Ycb0\",\"bottomTip\":\"ui-root__bottom-tip__2Ycb0\",\"streaming-tip\":\"ui-root__streaming-tip__17WYl\",\"streamingTip\":\"ui-root__streaming-tip__17WYl\",\"streaming-tip-attach-point\":\"ui-root__streaming-tip-attach-point__3XSH-\",\"streamingTipAttachPoint\":\"ui-root__streaming-tip-attach-point__3XSH-\",\"streaming-tip-close\":\"ui-root__streaming-tip-close__1OHPc\",\"streamingTipClose\":\"ui-root__streaming-tip-close__1OHPc\",\"streaming-tip-message\":\"ui-root__streaming-tip-message__2XOUD\",\"streamingTipMessage\":\"ui-root__streaming-tip-message__2XOUD\",\"ui-dialog-box-contents\":\"ui-root__ui-dialog-box-contents__3XWtl\",\"uiDialogBoxContents\":\"ui-root__ui-dialog-box-contents__3XWtl\",\"backgrounded\":\"ui-root__backgrounded__34j0m\",\"in-room-favorite-button\":\"ui-root__in-room-favorite-button__2I0Kj\",\"inRoomFavoriteButton\":\"ui-root__in-room-favorite-button__2I0Kj\",\"occupant-count\":\"ui-root__occupant-count__34rGX\",\"occupantCount\":\"ui-root__occupant-count__34rGX\",\"presence-info-selected\":\"ui-root__presence-info-selected__1Jhbw\",\"presenceInfoSelected\":\"ui-root__presence-info-selected__1Jhbw\",\"camera-mode-exit-button\":\"ui-root__camera-mode-exit-button__2mpbz\",\"cameraModeExitButton\":\"ui-root__camera-mode-exit-button__2mpbz\",\"corner-button-selected\":\"ui-root__corner-button-selected__qRY5R\",\"cornerButtonSelected\":\"ui-root__corner-button-selected__qRY5R\",\"invite-tip-attach-point\":\"ui-root__invite-tip-attach-point__3rQJ6\",\"inviteTipAttachPoint\":\"ui-root__invite-tip-attach-point__3rQJ6\",\"tip-cancel\":\"ui-root__tip-cancel__7ueO9\",\"tipCancel\":\"ui-root__tip-cancel__7ueO9\",\"tip\":\"ui-root__tip__ACGnW\",\"split-tip\":\"ui-root__split-tip__3eFQg\",\"splitTip\":\"ui-root__split-tip__3eFQg\",\"split-tip-icon\":\"ui-root__split-tip-icon__3GoW3\",\"splitTipIcon\":\"ui-root__split-tip-icon__3GoW3\",\"spawn_menu-icon\":\"ui-root__spawn_menu-icon__354r7\",\"spawnMenuIcon\":\"ui-root__spawn_menu-icon__354r7\",\"object_rotate_button-icon\":\"ui-root__object_rotate_button-icon__3rIrf\",\"objectRotateButtonIcon\":\"ui-root__object_rotate_button-icon__3rIrf\",\"object_scale_button-icon\":\"ui-root__object_scale_button-icon__1wcZr\",\"objectScaleButtonIcon\":\"ui-root__object_scale_button-icon__1wcZr\",\"object_recenter_button-icon\":\"ui-root__object_recenter_button-icon__3Yf-9\",\"objectRecenterButtonIcon\":\"ui-root__object_recenter_button-icon__3Yf-9\",\"avatar-editor\":\"ui-root__avatar-editor__2mO8z\",\"avatarEditor\":\"ui-root__avatar-editor__2mO8z\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"entry-button-secondary\":\"entry__entry-button-secondary__1Fr_E\",\"entryButtonSecondary\":\"entry__entry-button-secondary__1Fr_E\",\"entry-panel\":\"entry__entry-panel__34CD9\",\"entryPanel\":\"entry__entry-panel__34CD9\",\"button-container\":\"entry__button-container__3Blog\",\"buttonContainer\":\"entry__button-container__3Blog\",\"secondary-action-button\":\"entry__secondary-action-button__3FCMj\",\"secondaryActionButton\":\"entry__secondary-action-button__3FCMj\",\"entry-button\":\"entry__entry-button__G7PQF\",\"entryButton\":\"entry__entry-button__G7PQF\",\"action-button\":\"entry__action-button__3Vnab\",\"actionButton\":\"entry__action-button__3Vnab\",\"collapse-button\":\"entry__collapse-button__3_PLp\",\"collapseButton\":\"entry__collapse-button__3_PLp\",\"favorite-button\":\"entry__favorite-button__2CVuk\",\"favoriteButton\":\"entry__favorite-button__2CVuk\",\"back\":\"entry__back__J4Sgl\",\"lobby-label\":\"entry__lobby-label__2Nj9w\",\"lobbyLabel\":\"entry__lobby-label__2Nj9w\",\"label\":\"entry__label__fUhpb\",\"title\":\"entry__title__1GITj\",\"name\":\"entry__name__sYOeV\",\"rename-button\":\"entry__rename-button__KFW9R\",\"renameButton\":\"entry__rename-button__KFW9R\",\"center\":\"entry__center__1105W\",\"wide-button\":\"entry__wide-button__2tfMM\",\"wideButton\":\"entry__wide-button__2tfMM\",\"screen-sharing\":\"entry__screen-sharing__NBXQu\",\"screenSharing\":\"entry__screen-sharing__NBXQu\",\"checkbox\":\"entry__checkbox__3SoPk\",\"entry-dialog\":\"entry__entry-dialog__30kMs\",\"entryDialog\":\"entry__entry-dialog__30kMs\",\"favorited\":\"entry__favorited__2IHpj\",\"icon\":\"entry__icon__3JiUl\",\"bolded\":\"entry__bolded__13B4f\",\"subtitle\":\"entry__subtitle__1BC2y\",\"room-subtitle\":\"entry__room-subtitle__7MSMo\",\"roomSubtitle\":\"entry__room-subtitle__7MSMo\",\"lobby\":\"entry__lobby__3AxfL\",\"profile-icon\":\"entry__profile-icon__3BAWG\",\"profileIcon\":\"entry__profile-icon__3BAWG\",\"button-subtitle\":\"entry__button-subtitle__3zrEo\",\"buttonSubtitle\":\"entry__button-subtitle__3zrEo\",\"audio-loader\":\"entry__audio-loader__1YCJd\",\"audioLoader\":\"entry__audio-loader__1YCJd\",\"webvr-link-container\":\"entry__webvr-link-container__3scWP\",\"webvrLinkContainer\":\"entry__webvr-link-container__3scWP\",\"webvr-link\":\"entry__webvr-link__3eWuZ\",\"webvrLink\":\"entry__webvr-link__3eWuZ\",\"secondary\":\"entry__secondary__3uhYE\"};","export const paths = {};\npaths.noop = \"/noop\";\npaths.actions = {};\npaths.actions.log = \"/actions/log\";\npaths.actions.toggleScreenShare = \"/actions/toggleScreenShare\";\npaths.actions.snapRotateLeft = \"/actions/snapRotateLeft\";\npaths.actions.snapRotateRight = \"/actions/snapRotateRight\";\npaths.actions.angularVelocity = \"/actions/angularVelocity\";\npaths.actions.logDebugFrame = \"/actions/logDebugFrame\";\npaths.actions.logInteractionState = \"/actions/logInteractionState\";\npaths.actions.cameraDelta = \"/actions/cameraDelta\";\npaths.actions.lobbyCameraDelta = \"/actions/lobbyCameraDelta\";\npaths.actions.characterAcceleration = \"/actions/characterAcceleration\";\npaths.actions.boost = \"/actions/boost\";\npaths.actions.startGazeTeleport = \"/actions/startTeleport\";\npaths.actions.stopGazeTeleport = \"/actions/stopTeleport\";\npaths.actions.spawnPen = \"/actions/spawnPen\";\npaths.actions.ensureFrozen = \"/actions/ensureFrozen\";\npaths.actions.toggleFreeze = \"/actions/toggleFreeze\";\npaths.actions.thaw = \"/actions/thaw\";\npaths.actions.muteMic = \"/actions/muteMic\";\npaths.actions.focusChat = \"/actions/focusChat\";\npaths.actions.focusChatCommand = \"/actions/focusChatCommand\";\npaths.actions.toggleCamera = \"/actions/toggleCamera\";\npaths.actions.takeSnapshot = \"/actions/takeSnapshot\";\npaths.actions.mediaExit = \"/actions/mediaExit\";\npaths.actions.mediaSearch1 = \"/actions/mediaSearch1\";\npaths.actions.mediaSearch2 = \"/actions/mediaSearch2\";\npaths.actions.mediaSearch3 = \"/actions/mediaSearch3\";\npaths.actions.mediaSearch4 = \"/actions/mediaSearch4\";\npaths.actions.mediaSearch5 = \"/actions/mediaSearch5\";\npaths.actions.mediaSearch6 = \"/actions/mediaSearch6\";\npaths.actions.mediaSearch7 = \"/actions/mediaSearch7\";\npaths.actions.mediaSearch8 = \"/actions/mediaSearch8\";\npaths.actions.transformModifier = \"/actions/transformModifier\";\npaths.actions.rayObjectRotation = \"/actions/rayObjectRotation\";\npaths.actions.cursor = {};\npaths.actions.cursor.pose = \"/actions/cursorPose\";\npaths.actions.cursor.hideLine = \"/actions/cursorHideLine\";\npaths.actions.cursor.grab = \"/actions/cursorGrab\";\npaths.actions.cursor.drop = \"/actions/cursorDrop\";\npaths.actions.cursor.modDelta = \"/actions/cursorModDelta\";\npaths.actions.cursor.startDrawing = \"/actions/cursorStartDrawing\";\npaths.actions.cursor.stopDrawing = \"/actions/cursorStopDrawing\";\npaths.actions.cursor.undoDrawing = \"/actions/cursorUndoDrawing\";\npaths.actions.cursor.penNextColor = \"/actions/cursorPenNextColor\";\npaths.actions.cursor.penPrevColor = \"/actions/cursorPenPrevColor\";\npaths.actions.cursor.scalePenTip = \"/actions/cursorScalePenTip\";\npaths.actions.cursor.scaleGrabbedGrabbable = \"/actions/cursorScaleGrabbedGrabbable\";\npaths.actions.cursor.mediaVolumeMod = \"/actions/cursor/mediaVolumeMod\";\npaths.actions.cursor.takeSnapshot = \"/actions/cursorTakeSnapshot\";\npaths.actions.pen = {};\npaths.actions.pen.remove = \"/actions/pen/remove\";\npaths.actions.rightHand = {};\npaths.actions.rightHand.matrix = \"/actions/rightHand/matrix\";\npaths.actions.rightHand.pose = \"/actions/rightHandPose\";\npaths.actions.rightHand.grab = \"/actions/rightHandGrab\";\npaths.actions.rightHand.drop = \"/actions/rightHandDrop\";\npaths.actions.rightHand.modDelta = \"/actions/rightHandModDelta\";\npaths.actions.rightHand.startDrawing = \"/actions/rightHandStartDrawing\";\npaths.actions.rightHand.stopDrawing = \"/actions/rightHandStopDrawing\";\npaths.actions.rightHand.undoDrawing = \"/actions/rightHandUndoDrawing\";\npaths.actions.rightHand.switchDrawMode = \"/actions/rightHandSwitchDrawMode\";\npaths.actions.rightHand.penNextColor = \"/actions/rightHandPenNextColor\";\npaths.actions.rightHand.penPrevColor = \"/actions/rightHandPenPrevColor\";\npaths.actions.rightHand.scalePenTip = \"/actions/rightHandScalePenTip\";\npaths.actions.rightHand.startTeleport = \"/actions/rightHand/startTeleport\";\npaths.actions.rightHand.stopTeleport = \"/actions/rightHand/stopTeleport\";\npaths.actions.rightHand.takeSnapshot = \"/actions/rightHandTakeSnapshot\";\npaths.actions.rightHand.thumb = \"/actions/rightHand/thumbDown\";\npaths.actions.rightHand.index = \"/actions/rightHand/indexDown\";\npaths.actions.rightHand.middleRingPinky = \"/actions/rightHand/middleRingPinkyDown\";\npaths.actions.leftHand = {};\npaths.actions.leftHand.matrix = \"/actions/leftHand/matrix\";\npaths.actions.leftHand.pose = \"/actions/leftHandPose\";\npaths.actions.leftHand.grab = \"/actions/leftHandGrab\";\npaths.actions.leftHand.drop = \"/actions/leftHandDrop\";\npaths.actions.leftHand.modDelta = \"/actions/leftHandModDelta\";\npaths.actions.leftHand.startDrawing = \"/actions/leftHandStartDrawing\";\npaths.actions.leftHand.stopDrawing = \"/actions/leftHandStopDrawing\";\npaths.actions.leftHand.undoDrawing = \"/actions/leftHandUndoDrawing\";\npaths.actions.leftHand.switchDrawMode = \"/actions/leftHandSwitchDrawMode\";\npaths.actions.leftHand.penNextColor = \"/actions/leftHandPenNextColor\";\npaths.actions.leftHand.penPrevColor = \"/actions/leftHandPenPrevColor\";\npaths.actions.leftHand.scalePenTip = \"/actions/leftHandScalePenTip\";\npaths.actions.leftHand.startTeleport = \"/actions/leftHand/startTeleport\";\npaths.actions.leftHand.stopTeleport = \"/actions/leftHand/stopTeleport\";\npaths.actions.leftHand.takeSnapshot = \"/actions/leftHandTakeSnapshot\";\npaths.actions.leftHand.thumb = \"/actions/leftHand/thumbDown\";\npaths.actions.leftHand.index = \"/actions/leftHand/indexDown\";\npaths.actions.leftHand.middleRingPinky = \"/actions/leftHand/middleRingPinkyDown\";\npaths.actions.camera = {};\npaths.actions.camera.exitMirror = \"/actions/cameraExitMirror\";\npaths.haptics = {};\npaths.haptics.actuators = {};\npaths.haptics.actuators.left = \"/haptics/actuators/left\";\npaths.haptics.actuators.right = \"/haptics/actuators/right\";\n\npaths.device = {};\npaths.device.mouse = {};\npaths.device.mouse.coords = \"/device/mouse/coords\";\npaths.device.mouse.movementXY = \"/device/mouse/movementXY\";\npaths.device.mouse.buttonLeft = \"/device/mouse/buttonLeft\";\npaths.device.mouse.buttonRight = \"/device/mouse/buttonRight\";\npaths.device.mouse.wheel = \"/device/mouse/wheel\";\npaths.device.smartMouse = {};\npaths.device.smartMouse.cursorPose = \"/device/smartMouse/cursorPose\";\npaths.device.smartMouse.cameraDelta = \"/device/smartMouse/cameraDelta\";\npaths.device.touchscreen = {};\npaths.device.touchscreen.cursorPose = \"/device/touchscreen/cursorPose\";\npaths.device.touchscreen.touchCameraDelta = \"/device/touchscreen/touchCameraDelta\";\npaths.device.touchscreen.gyroCameraDelta = \"/device/touchscreen/gyroCameraDelta\";\npaths.device.touchscreen.cameraDelta = \"/device/touchscreen/cameraDelta\";\npaths.device.touchscreen.pinch = {};\npaths.device.touchscreen.pinch.delta = \"/device/touchscreen/pinch/delta\";\npaths.device.touchscreen.pinch.initialDistance = \"/device/touchscreen/pinch/initialDistance\";\npaths.device.touchscreen.pinch.currentDistance = \"/device/touchscreen/pinch/currentDistance\";\npaths.device.touchscreen.isTouching = \"/device/touchscreen/isTouching\";\npaths.device.touchscreen.isTouchingGrabbable = \"/device/touchscreen/isTouchingGrabbable\";\npaths.device.touchscreen.tap1 = \"/device/touchscreen/tap1\";\npaths.device.touchscreen.tap2 = \"/device/touchscreen/tap2\";\npaths.device.touchscreen.tap3 = \"/device/touchscreen/tap3\";\npaths.device.touchscreen.tap4 = \"/device/touchscreen/tap4\";\npaths.device.touchscreen.tap5 = \"/device/touchscreen/tap5\";\npaths.device.gyro = {};\npaths.device.gyro.averageDeltaX = \"/device/gyro/averageDeltaX\";\npaths.device.gyro.averageDeltaY = \"/device/gyro/averageDeltaY\";\npaths.device.hud = {};\npaths.device.hud.penButton = \"/device/hud/penButton\";\n\npaths.device.keyboard = {\n  map: new Map(),\n  key: function(k) {\n    let path = this.map.get(k);\n    if (path) {\n      return path;\n    }\n    path = `/device/keyboard/${k.toLowerCase()}`;\n    this.map.set(k, path);\n    return path;\n  }\n};\n\npaths.device.gamepad = gamepadIndex => ({\n  button: buttonIndex => ({\n    pressed: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/pressed`,\n    touched: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/touched`,\n    value: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/value`\n  }),\n  axis: axisIndex => `/device/gamepad/${gamepadIndex}/axis/${axisIndex}`\n});\n\nconst xbox = \"/device/xbox/\";\npaths.device.xbox = {\n  v: name => `/vars/xbox/${name}`,\n  button: buttonName => ({\n    pressed: `${xbox}button/${buttonName}/pressed`,\n    touched: `${xbox}button/${buttonName}/touched`,\n    value: `${xbox}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${xbox}axis/${axisName}`;\n  },\n  axesSum: `${xbox}axis/sum`\n};\n\npaths.device.oculusgo = {\n  // TODO remove these in favor of the direct accessors\n  button: buttonName => ({\n    pressed: `/device/oculusgo/button/${buttonName}/pressed`,\n    touched: `/device/oculusgo/button/${buttonName}/touched`,\n    value: `/device/oculusgo/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/oculusgo/axis/${axisName}`;\n  },\n  //\n  trigger: {\n    pressed: \"/device/oculusgo/button/trigger/pressed\",\n    touched: \"/device/oculusgo/button/trigger/touched\",\n    value: \"/device/oculusgo/button/trigger/value\"\n  },\n  touchpad: {\n    pressed: \"/device/oculusgo/button/touchpad/pressed\",\n    touched: \"/device/oculusgo/button/touchpad/touched\",\n    value: \"/device/oculusgo/button/touchpad/value\",\n    axisX: \"/device/oculusgo/axis/touchpadX\",\n    axisY: \"/device/oculusgo/axis/touchpadY\"\n  },\n  pose: \"/device/oculusgo/pose\",\n  matrix: \"/device/oculusgo/matrix\",\n  v: name => {\n    return `/vars/oculusgo/${name}`;\n  }\n};\n\nconst gearVRController = \"/device/gearVRController/\";\npaths.device.gearVRController = {\n  button: buttonName => ({\n    pressed: `${gearVRController}button/${buttonName}/pressed`,\n    touched: `${gearVRController}button/${buttonName}/touched`,\n    value: `${gearVRController}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${gearVRController}axis/${axisName}`;\n  },\n  pose: `${gearVRController}pose`,\n  matrix: `${gearVRController}matrix`,\n  v: name => {\n    return `/vars/gearVRController/${name}`;\n  }\n};\n\nconst daydream = \"/device/daydream/\";\npaths.device.daydream = {\n  button: buttonName => ({\n    pressed: `${daydream}button/${buttonName}/pressed`,\n    touched: `${daydream}button/${buttonName}/touched`,\n    value: `${daydream}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${daydream}axis/${axisName}`;\n  },\n  pose: `${daydream}pose`,\n  matrix: `${daydream}matrix`\n};\n\nconst rightOculusTouch = \"/device/rightOculusTouch/\";\npaths.device.rightOculusTouch = {\n  button: buttonName => ({\n    pressed: `${rightOculusTouch}button/${buttonName}/pressed`,\n    touched: `${rightOculusTouch}button/${buttonName}/touched`,\n    value: `${rightOculusTouch}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${rightOculusTouch}axis/${axisName}`;\n  },\n  axesSum: `${rightOculusTouch}axis/sum`,\n  pose: `${rightOculusTouch}pose`,\n  matrix: `${rightOculusTouch}matrix`\n};\n\nconst leftOculusTouch = \"/device/leftOculusTouch/\";\npaths.device.leftOculusTouch = {\n  button: buttonName => ({\n    pressed: `${leftOculusTouch}button/${buttonName}/pressed`,\n    touched: `${leftOculusTouch}button/${buttonName}/touched`,\n    value: `${leftOculusTouch}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${leftOculusTouch}axis/${axisName}`;\n  },\n  axesSum: `${leftOculusTouch}axis/sum`,\n  pose: `${leftOculusTouch}pose`,\n  matrix: `${leftOculusTouch}matrix`\n};\n\npaths.device.vive = {};\npaths.device.vive.left = {\n  button: buttonName => ({\n    pressed: `/device/vive/left/button/${buttonName}/pressed`,\n    touched: `/device/vive/left/button/${buttonName}/touched`,\n    value: `/device/vive/left/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/vive/left/axis/${axisName}`;\n  },\n  axesSum: \"/device/vive/left/axis/sum\",\n  pose: `/device/vive/left/pose`,\n  matrix: `/device/vive/left/matrix`\n};\npaths.device.vive.right = {\n  button: buttonName => ({\n    pressed: `/device/vive/right/button/${buttonName}/pressed`,\n    touched: `/device/vive/right/button/${buttonName}/touched`,\n    value: `/device/vive/right/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/vive/right/axis/${axisName}`;\n  },\n  axesSum: \"/device/vive/right/axis/sum\",\n  pose: `/device/vive/right/pose`,\n  matrix: `/device/vive/right/matrix`\n};\n\nfunction button(device, side, name) {\n  return {\n    pressed: `${device}${side}/button/${name}/pressed`,\n    touched: `${device}${side}/button/${name}/touched`,\n    value: `${device}${side}/button/${name}/value`\n  };\n}\n\nfunction axes(device, side, name) {\n  return {\n    axisX: `${device}${side}/axis/${name}X`,\n    axisY: `${device}${side}/axis/${name}Y`\n  };\n}\n\nfunction wmrController(side) {\n  const wmr = \"/device/wmr/\";\n  return {\n    touchpad: {\n      ...button(wmr, side, \"touchpad\"),\n      ...axes(wmr, side, \"touchpad\")\n    },\n    trigger: button(wmr, side, \"trigger\"),\n    grip: button(wmr, side, \"grip\"),\n    menu: button(wmr, side, \"menu\"),\n    joystick: axes(wmr, side, \"joystick\"),\n    pose: `${wmr}${side}/pose`,\n    matrix: `${wmr}${side}/matrix`\n  };\n}\npaths.device.wmr = {};\npaths.device.wmr.v = name => `/vars/wmr/${name}`;\npaths.device.wmr.k = name => `/vars/wmr/keyboard/${name}`;\npaths.device.wmr.left = wmrController(\"left\");\npaths.device.wmr.right = wmrController(\"right\");\n","import Airtable from 'airtable';\nAirtable.configure({\n    endpointUrl: 'https://api.airtable.com',\n    apiKey: 'keyOHSVeLr3ryLrL5'\n});\n\nconst base = Airtable.base('appIR0AlHDFG5WR8z');\n\nexport const airtableAssetsInitialState = { DarkLogo: null, Name: null, Icon: null }\nexport const airtableAssets = base('Assets');\n\nexport const airtableMessages = base('Messages').select({\n    view: 'Grid view'\n}).firstPage(async (err, records) => {\n    if (err) { console.error(err); return; }\n    const record = records[0];\n    // console.log(record.get('Motto'))\n    return record;\n\n    // records.forEach(function(record) {\n    //     console.log('Retrieved', record.get('Motto'));\n    // });\n});;\n// .find('recHqITRS7cBMwn9i', (err, record) => record.fields);\n// export const airtableAssets = () => base('Assets')\n\n// export default base;","// removed by extract-text-webpack-plugin\nmodule.exports = {\"invite-container\":\"invite-dialog__invite-container__1c0Jw\",\"inviteContainer\":\"invite-dialog__invite-container__1c0Jw\",\"dialog\":\"invite-dialog__dialog__1XbxO\",\"link-button\":\"invite-dialog__link-button__S_o-t\",\"linkButton\":\"invite-dialog__link-button__S_o-t\",\"enter-vr-button\":\"invite-dialog__enter-vr-button__3y1BF\",\"enterVrButton\":\"invite-dialog__enter-vr-button__3y1BF\",\"invite-button\":\"invite-dialog__invite-button__3cjFw\",\"inviteButton\":\"invite-dialog__invite-button__3cjFw\",\"enter-button\":\"invite-dialog__enter-button__2Z5EY\",\"enterButton\":\"invite-dialog__enter-button__2Z5EY\",\"invite-mini-button\":\"invite-dialog__invite-mini-button__2zWJj\",\"inviteMiniButton\":\"invite-dialog__invite-mini-button__2zWJj\",\"domain\":\"invite-dialog__domain__2Q8Wr\",\"embed-text\":\"invite-dialog__embed-text__3-Boo\",\"embedText\":\"invite-dialog__embed-text__3-Boo\",\"invite-container-inverted\":\"invite-dialog__invite-container-inverted__1E3hR\",\"inviteContainerInverted\":\"invite-dialog__invite-container-inverted__1E3hR\",\"subscribe\":\"invite-dialog__subscribe__qlJL4\",\"embed-tip-wrap\":\"invite-dialog__embed-tip-wrap__2CQRc\",\"embedTipWrap\":\"invite-dialog__embed-tip-wrap__2CQRc\",\"embed-tip\":\"invite-dialog__embed-tip__12p0o\",\"embedTip\":\"invite-dialog__embed-tip__12p0o\",\"modal\":\"invite-dialog__modal__1hbVP\",\"hide-small-screens\":\"invite-dialog__hide-small-screens__3UCeH\",\"hideSmallScreens\":\"invite-dialog__hide-small-screens__3UCeH\",\"invite-container-below-hud\":\"invite-dialog__invite-container-below-hud__30RHX\",\"inviteContainerBelowHud\":\"invite-dialog__invite-container-below-hud__30RHX\",\"attach-point\":\"invite-dialog__attach-point__otyII\",\"attachPoint\":\"invite-dialog__attach-point__otyII\",\"code\":\"invite-dialog__code__13AIx\",\"keep-open\":\"invite-dialog__keep-open__229sO\",\"keepOpen\":\"invite-dialog__keep-open__229sO\",\"digit\":\"invite-dialog__digit__2w64P\",\"digit_2\":\"invite-dialog__digit_2__pQCJ3\",\"digit2\":\"invite-dialog__digit_2__pQCJ3\",\"digit_3\":\"invite-dialog__digit_3__1bWtt\",\"digit3\":\"invite-dialog__digit_3__1bWtt\",\"code-loading-panel\":\"invite-dialog__code-loading-panel__1gghm\",\"codeLoadingPanel\":\"invite-dialog__code-loading-panel__1gghm\",\"hub-link-link\":\"invite-dialog__hub-link-link__2guVF\",\"hubLinkLink\":\"invite-dialog__hub-link-link__2guVF\",\"buttons\":\"invite-dialog__buttons__1yN_j\",\"embed\":\"invite-dialog__embed__2zy_A\",\"close\":\"invite-dialog__close__3PAxl\",\"embed-tip-attach-point\":\"invite-dialog__embed-tip-attach-point__2UAZp\",\"embedTipAttachPoint\":\"invite-dialog__embed-tip-attach-point__2UAZp\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"client-action-buttons\":\"client-info-dialog__client-action-buttons__3u-6v\",\"clientActionButtons\":\"client-info-dialog__client-action-buttons__3u-6v\",\"cancel\":\"client-info-dialog__cancel__2BguV\",\"client-info-dialog\":\"client-info-dialog__client-info-dialog__2e1dc\",\"clientInfoDialog\":\"client-info-dialog__client-info-dialog__2e1dc\",\"title\":\"client-info-dialog__title__3FGPe\",\"community-identifier\":\"client-info-dialog__community-identifier__g3lbP\",\"communityIdentifier\":\"client-info-dialog__community-identifier__g3lbP\",\"client-info\":\"client-info-dialog__client-info__1MUSa\",\"clientInfo\":\"client-info-dialog__client-info__1MUSa\",\"client-profile-image\":\"client-info-dialog__client-profile-image__zt1EA\",\"clientProfileImage\":\"client-info-dialog__client-profile-image__zt1EA\",\"client-details\":\"client-info-dialog__client-details__1F5zy\",\"clientDetails\":\"client-info-dialog__client-details__1F5zy\",\"client-main\":\"client-info-dialog__client-main__2BC1s\",\"clientMain\":\"client-info-dialog__client-main__2BC1s\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"loading-text\":\"loader__loading-text__QVcF3\",\"loadingText\":\"loader__loading-text__QVcF3\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"profile-entry\":\"profile__profile-entry__1pJKZ\",\"profileEntry\":\"profile__profile-entry__1pJKZ\",\"form-submit\":\"profile__form-submit__2y7xb\",\"formSubmit\":\"profile__form-submit__2y7xb\",\"choose-avatar\":\"profile__choose-avatar__2EV0F\",\"chooseAvatar\":\"profile__choose-avatar__2EV0F\",\"form-field-text\":\"profile__form-field-text__1bzeV\",\"formFieldText\":\"profile__form-field-text__1bzeV\",\"title\":\"profile__title__Vcynv\",\"logo\":\"profile__logo__1JZAd\",\"form\":\"profile__form__1-hBO\",\"box\":\"profile__box__oJXQD\",\"links\":\"profile__links__2hukW\",\"darkened\":\"profile__darkened__1rVba\",\"display-name\":\"profile__display-name__auABh\",\"displayName\":\"profile__display-name__auABh\",\"preview\":\"profile__preview__3QjLq\",\"edit-avatar\":\"profile__edit-avatar__3386A\",\"editAvatar\":\"profile__edit-avatar__3386A\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"preview\":\"avatar-preview__preview__2I8qx\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"action-button\":\"create-object-dialog__action-button__3OIJQ\",\"actionButton\":\"create-object-dialog__action-button__3OIJQ\",\"buttons\":\"create-object-dialog__buttons__1zA-b\",\"small-button\":\"create-object-dialog__small-button__7UxXQ\",\"smallButton\":\"create-object-dialog__small-button__7UxXQ\",\"input-border\":\"create-object-dialog__input-border__1N9AV\",\"inputBorder\":\"create-object-dialog__input-border__1N9AV\",\"left-side-of-input\":\"create-object-dialog__left-side-of-input__zyV06\",\"leftSideOfInput\":\"create-object-dialog__left-side-of-input__zyV06\",\"add-media-form\":\"create-object-dialog__add-media-form__10Wh-\",\"addMediaForm\":\"create-object-dialog__add-media-form__10Wh-\",\"cancel-icon\":\"create-object-dialog__cancel-icon__yD-8A\",\"cancelIcon\":\"create-object-dialog__cancel-icon__yD-8A\",\"upload-icon\":\"create-object-dialog__upload-icon__19g9k\",\"uploadIcon\":\"create-object-dialog__upload-icon__19g9k\",\"hide-file-input\":\"create-object-dialog__hide-file-input__2myDe\",\"hideFileInput\":\"create-object-dialog__hide-file-input__2myDe\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"action-button\":\"change-scene-dialog__action-button__1xtdK\",\"actionButton\":\"change-scene-dialog__action-button__1xtdK\",\"buttons\":\"change-scene-dialog__buttons__2QE34\",\"spoke-launch\":\"change-scene-dialog__spoke-launch__YObDn\",\"spokeLaunch\":\"change-scene-dialog__spoke-launch__YObDn\",\"input-border\":\"change-scene-dialog__input-border__30jd6\",\"inputBorder\":\"change-scene-dialog__input-border__30jd6\",\"left-side-of-input\":\"change-scene-dialog__left-side-of-input__14WKu\",\"leftSideOfInput\":\"change-scene-dialog__left-side-of-input__14WKu\",\"change-scene-button\":\"change-scene-dialog__change-scene-button__ckfZW\",\"changeSceneButton\":\"change-scene-dialog__change-scene-button__ckfZW\",\"spoke-create\":\"change-scene-dialog__spoke-create__2krL-\",\"spokeCreate\":\"change-scene-dialog__spoke-create__2krL-\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"avatar-url-dialog\":\"avatar-url-dialog__avatar-url-dialog__17OoD\",\"avatarUrlDialog\":\"avatar-url-dialog__avatar-url-dialog__17OoD\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"close-button\":\"link-dialog__close-button__2THTw\",\"closeButton\":\"link-dialog__close-button__2THTw\",\"domain\":\"link-dialog__domain__1WbPJ\",\"dialog\":\"link-dialog__dialog__1zbyG\",\"header\":\"link-dialog__header__1A06x\",\"contents\":\"link-dialog__contents__3ODVz\",\"code\":\"link-dialog__code__259RI\",\"imageHeader\":\"link-dialog__imageHeader__eaJe6\",\"keep-open\":\"link-dialog__keep-open__DYcUI\",\"keepOpen\":\"link-dialog__keep-open__DYcUI\",\"digit\":\"link-dialog__digit___zoC4\",\"code-loading-panel\":\"link-dialog__code-loading-panel__WKkNk\",\"codeLoadingPanel\":\"link-dialog__code-loading-panel__WKkNk\",\"close\":\"link-dialog__close__2TTmg\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"name-field\":\"rename-room-dialog__name-field__1Huun\",\"nameField\":\"rename-room-dialog__name-field__1Huun\",\"next-button\":\"rename-room-dialog__next-button__3OH0z\",\"nextButton\":\"rename-room-dialog__next-button__3OH0z\",\"continue-button\":\"rename-room-dialog__continue-button__2xIHQ\",\"continueButton\":\"rename-room-dialog__continue-button__2xIHQ\",\"rename-room-form\":\"rename-room-dialog__rename-room-form__2B6N7\",\"renameRoomForm\":\"rename-room-dialog__rename-room-form__2B6N7\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"cancel-button\":\"close-room-dialog__cancel-button__MmtAo\",\"cancelButton\":\"close-room-dialog__cancel-button__MmtAo\",\"confirm-button\":\"close-room-dialog__confirm-button__Bs9y3\",\"confirmButton\":\"close-room-dialog__confirm-button__Bs9y3\",\"message\":\"close-room-dialog__message__1Rvh3\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"leave-room\":\"leave-room-dialog__leave-room__31Jf7\",\"leaveRoom\":\"leave-room-dialog__leave-room__31Jf7\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"title\":\"room-info-dialog__title__3-3CO\",\"room-info\":\"room-info-dialog__room-info__3XkbS\",\"roomInfo\":\"room-info-dialog__room-info__3XkbS\",\"scene-screenshot\":\"room-info-dialog__scene-screenshot__3PWz-\",\"sceneScreenshot\":\"room-info-dialog__scene-screenshot__3PWz-\",\"scene-details\":\"room-info-dialog__scene-details__2pYml\",\"sceneDetails\":\"room-info-dialog__scene-details__2pYml\",\"scene-main\":\"room-info-dialog__scene-main__2mhXj\",\"sceneMain\":\"room-info-dialog__scene-main__2mhXj\",\"scene-name\":\"room-info-dialog__scene-name__1bqGh\",\"sceneName\":\"room-info-dialog__scene-name__1bqGh\",\"scene-creator\":\"room-info-dialog__scene-creator__3_za4\",\"sceneCreator\":\"room-info-dialog__scene-creator__3_za4\",\"scene-attributions\":\"room-info-dialog__scene-attributions__QpYVd\",\"sceneAttributions\":\"room-info-dialog__scene-attributions__QpYVd\",\"attribution\":\"room-info-dialog__attribution__I9_V-\",\"attribution-name\":\"room-info-dialog__attribution-name__3JTpI\",\"attributionName\":\"room-info-dialog__attribution-name__3JTpI\",\"attribution-author\":\"room-info-dialog__attribution-author__BouZB\",\"attributionAuthor\":\"room-info-dialog__attribution-author__BouZB\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"oauth-button\":\"oauth-dialog__oauth-button__25RiO\",\"oauthButton\":\"oauth-dialog__oauth-button__25RiO\",\"oauth-type-name\":\"oauth-dialog__oauth-type-name__jPyhW\",\"oauthTypeName\":\"oauth-dialog__oauth-type-name__jPyhW\",\"oauth-icon\":\"oauth-dialog__oauth-icon__v1G6W\",\"oauthIcon\":\"oauth-dialog__oauth-icon__v1G6W\",\"privacy-notice\":\"oauth-dialog__privacy-notice__2R9ZT\",\"privacyNotice\":\"oauth-dialog__privacy-notice__2R9ZT\",\"oauth-buttons\":\"oauth-dialog__oauth-buttons__1U1Ni\",\"oauthButtons\":\"oauth-dialog__oauth-buttons__1U1Ni\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"message-entry-in-room\":\"message-entry__message-entry-in-room__1aN5s\",\"messageEntryInRoom\":\"message-entry__message-entry-in-room__1aN5s\",\"message-entry-spawn\":\"message-entry__message-entry-spawn__1_AF5\",\"messageEntrySpawn\":\"message-entry__message-entry-spawn__1_AF5\",\"message-entry-input\":\"message-entry__message-entry-input__2AtQE\",\"messageEntryInput\":\"message-entry__message-entry-input__2AtQE\",\"message-entry\":\"message-entry__message-entry__x7lQX\",\"messageEntry\":\"message-entry__message-entry__x7lQX\",\"message-entry-disabled\":\"message-entry__message-entry-disabled__25LSI\",\"messageEntryDisabled\":\"message-entry__message-entry-disabled__25LSI\",\"message-entry-button\":\"message-entry__message-entry-button__3xJhH\",\"messageEntryButton\":\"message-entry__message-entry-button__3xJhH\",\"message-entry-button-in-room\":\"message-entry__message-entry-button-in-room__2yMTR\",\"messageEntryButtonInRoom\":\"message-entry__message-entry-button-in-room__2yMTR\",\"message-entry-upload\":\"message-entry__message-entry-upload__3F0sX\",\"messageEntryUpload\":\"message-entry__message-entry-upload__3F0sX\",\"message-entry-input-in-room\":\"message-entry__message-entry-input-in-room__30ReF\",\"messageEntryInputInRoom\":\"message-entry__message-entry-input-in-room__30ReF\",\"message-entry-input-no-spawn\":\"message-entry__message-entry-input-no-spawn__1wF7R\",\"messageEntryInputNoSpawn\":\"message-entry__message-entry-input-no-spawn__1wF7R\",\"message-entry-on-mobile\":\"message-entry__message-entry-on-mobile__2pSYF\",\"messageEntryOnMobile\":\"message-entry__message-entry-on-mobile__2pSYF\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"command-help\":\"chat-command-help__command-help__q0Wb8\",\"commandHelp\":\"chat-command-help__command-help__q0Wb8\",\"entry\":\"chat-command-help__entry__1E1un\",\"command\":\"chat-command-help__command__2GMyn\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"presence-log\":\"presence-log__presence-log__10oFj\",\"presenceLog\":\"presence-log__presence-log__10oFj\",\"presence-log-entry\":\"presence-log__presence-log-entry__dt0t4\",\"presenceLogEntry\":\"presence-log__presence-log-entry__dt0t4\",\"message-body\":\"presence-log__message-body__2L9jA\",\"messageBody\":\"presence-log__message-body__2L9jA\",\"message-body-multi\":\"presence-log__message-body-multi__2e-Sx\",\"messageBodyMulti\":\"presence-log__message-body-multi__2e-Sx\",\"message-body-mono\":\"presence-log__message-body-mono__3zuQE\",\"messageBodyMono\":\"presence-log__message-body-mono__3zuQE\",\"message-wrap\":\"presence-log__message-wrap__2aWCa\",\"messageWrap\":\"presence-log__message-wrap__2aWCa\",\"message-wrap-multi\":\"presence-log__message-wrap-multi__1eA6v\",\"messageWrapMulti\":\"presence-log__message-wrap-multi__1eA6v\",\"message-source\":\"presence-log__message-source__3CI4d\",\"messageSource\":\"presence-log__message-source__3CI4d\",\"message-source-link\":\"presence-log__message-source-link__1evTZ\",\"messageSourceLink\":\"presence-log__message-source-link__1evTZ\",\"icon-button\":\"presence-log__icon-button__2Shbm\",\"iconButton\":\"presence-log__icon-button__2Shbm\",\"spawn-message\":\"presence-log__spawn-message__14Ne8\",\"spawnMessage\":\"presence-log__spawn-message__14Ne8\",\"share\":\"presence-log__share__37U7E\",\"media\":\"presence-log__media__2qG_d\",\"mediaBody\":\"presence-log__mediaBody__1rByA\",\"expired\":\"presence-log__expired__2wMJc\",\"presence-log-entry-with-button\":\"presence-log__presence-log-entry-with-button__1PxTw\",\"presenceLogEntryWithButton\":\"presence-log__presence-log-entry-with-button__1PxTw\",\"presence-log-in-room\":\"presence-log__presence-log-in-room__17h3n\",\"presenceLogInRoom\":\"presence-log__presence-log-in-room__17h3n\",\"presence-log-spawn\":\"presence-log__presence-log-spawn__3jlmT\",\"presenceLogSpawn\":\"presence-log__presence-log-spawn__3jlmT\",\"presence-log-entry-one-line\":\"presence-log__presence-log-entry-one-line__bRXfp\",\"presenceLogEntryOneLine\":\"presence-log__presence-log-entry-one-line__bRXfp\",\"presence-log-emoji\":\"presence-log__presence-log-emoji__1_3Yn\",\"presenceLogEmoji\":\"presence-log__presence-log-emoji__1_3Yn\",\"emoji\":\"presence-log__emoji__10b18\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"client-link\":\"presence-list__client-link__3tkyz\",\"clientLink\":\"presence-list__client-link__3tkyz\",\"presence-list\":\"presence-list__presence-list__1KERe\",\"presenceList\":\"presence-list__presence-list__1KERe\",\"attach-point\":\"presence-list__attach-point__kIdfx\",\"attachPoint\":\"presence-list__attach-point__kIdfx\",\"contents\":\"presence-list__contents__1B7bz\",\"rows\":\"presence-list__rows__1B6KS\",\"row\":\"presence-list__row__1D2j2\",\"row-header\":\"presence-list__row-header__3kl1w\",\"rowHeader\":\"presence-list__row-header__3kl1w\",\"list-item\":\"presence-list__list-item__2YARP\",\"listItem\":\"presence-list__list-item__2YARP\",\"list-item-link\":\"presence-list__list-item-link__2DLC2\",\"listItemLink\":\"presence-list__list-item-link__2DLC2\",\"presence\":\"presence-list__presence__15DJe\",\"sign-in\":\"presence-list__sign-in__28eVu\",\"signIn\":\"presence-list__sign-in__28eVu\",\"icon\":\"presence-list__icon__1t8iB\",\"self\":\"presence-list__self__1g-bw\",\"moderator-badge\":\"presence-list__moderator-badge__2njku\",\"moderatorBadge\":\"presence-list__moderator-badge__2njku\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"avatar-editor\":\"avatar-editor__avatar-editor__xtJ6P\",\"avatarEditor\":\"avatar-editor__avatar-editor__xtJ6P\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"bottom-links-main\":\"settings-menu__bottom-links-main__Vtlje\",\"bottomLinksMain\":\"settings-menu__bottom-links-main__Vtlje\",\"settings-menu\":\"settings-menu__settings-menu__3x1Pv\",\"settingsMenu\":\"settings-menu__settings-menu__3x1Pv\",\"attach-point\":\"settings-menu__attach-point__2gV3g\",\"attachPoint\":\"settings-menu__attach-point__2gV3g\",\"contents\":\"settings-menu__contents__3GQlW\",\"rows\":\"settings-menu__rows__2OtlS\",\"row\":\"settings-menu__row__3w7fz\",\"row-header\":\"settings-menu__row-header__2oCqk\",\"rowHeader\":\"settings-menu__row-header__2oCqk\",\"list-item\":\"settings-menu__list-item__1__z6\",\"listItem\":\"settings-menu__list-item__1__z6\",\"list-item-link\":\"settings-menu__list-item-link__2ovr3\",\"listItemLink\":\"settings-menu__list-item-link__2ovr3\",\"settings-row\":\"settings-menu__settings-row__1sDDk\",\"settingsRow\":\"settings-menu__settings-row__1sDDk\",\"icon\":\"settings-menu__icon__3KMMz\",\"bottom-links\":\"settings-menu__bottom-links__b1tDE\",\"bottomLinks\":\"settings-menu__bottom-links__b1tDE\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"load-button\":\"preload-overlay__load-button__ba1d4\",\"loadButton\":\"preload-overlay__load-button__ba1d4\",\"treatment\":\"preload-overlay__treatment__1L4r0\",\"screenshot\":\"preload-overlay__screenshot__3TZYm\",\"hub-name\":\"preload-overlay__hub-name__2txaT\",\"hubName\":\"preload-overlay__hub-name__2txaT\",\"main-panel\":\"preload-overlay__main-panel__2EX4k\",\"mainPanel\":\"preload-overlay__main-panel__2EX4k\",\"logo\":\"preload-overlay__logo__1IJJc\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"panel\":\"_2d-hud__panel__2oM_T\",\"tip-cancel-text\":\"_2d-hud__tip-cancel-text__12KQ2\",\"tipCancelText\":\"_2d-hud__tip-cancel-text__12KQ2\",\"top-tip\":\"_2d-hud__top-tip__E5uti\",\"topTip\":\"_2d-hud__top-tip__E5uti\",\"container\":\"_2d-hud__container__66GRt\",\"top\":\"_2d-hud__top__3PiNe\",\"column\":\"_2d-hud__column__1y7XY\",\"bottom\":\"_2d-hud__bottom__2jUcT\",\"hide\":\"_2d-hud__hide__3HJO8\",\"attach-point\":\"_2d-hud__attach-point__17FSc\",\"attachPoint\":\"_2d-hud__attach-point__17FSc\",\"attach_video_share_mode\":\"_2d-hud__attach_video_share_mode__21PhM\",\"attachVideoShareMode\":\"_2d-hud__attach_video_share_mode__21PhM\",\"attach_pen_mode\":\"_2d-hud__attach_pen_mode__cI1AW\",\"attachPenMode\":\"_2d-hud__attach_pen_mode__cI1AW\",\"attach_mute_mode\":\"_2d-hud__attach_mute_mode__153iB\",\"attachMuteMode\":\"_2d-hud__attach_mute_mode__153iB\",\"attach_freeze_mode\":\"_2d-hud__attach_freeze_mode__3UIHP\",\"attachFreezeMode\":\"_2d-hud__attach_freeze_mode__3UIHP\",\"top-tip-no-hud\":\"_2d-hud__top-tip-no-hud__16RXh\",\"topTipNoHud\":\"_2d-hud__top-tip-no-hud__16RXh\",\"tip-cancel\":\"_2d-hud__tip-cancel__JaFV-\",\"tipCancel\":\"_2d-hud__tip-cancel__JaFV-\",\"video-share-extra-options\":\"_2d-hud__video-share-extra-options__31VMr\",\"videoShareExtraOptions\":\"_2d-hud__video-share-extra-options__31VMr\",\"iconButton\":\"_2d-hud__iconButton__3faJz\",\"up\":\"_2d-hud__up__1lyhr\",\"small\":\"_2d-hud__small__2rqgF\",\"large\":\"_2d-hud__large__2bHqH\",\"video-share\":\"_2d-hud__video-share__38X7W\",\"videoShare\":\"_2d-hud__video-share__38X7W\",\"mute\":\"_2d-hud__mute__25kHI\",\"active\":\"_2d-hud__active__1TMB8\",\"pen\":\"_2d-hud__pen__3uTC7\",\"camera\":\"_2d-hud__camera__84ksg\",\"freeze\":\"_2d-hud__freeze__26rlJ\",\"spawn\":\"_2d-hud__spawn__1FoBz\",\"mobile-media-picker\":\"_2d-hud__mobile-media-picker__3ZXHc\",\"mobileMediaPicker\":\"_2d-hud__mobile-media-picker__3ZXHc\",\"share_camera\":\"_2d-hud__share_camera__v67Il\",\"shareCamera\":\"_2d-hud__share_camera__v67Il\",\"share_screen\":\"_2d-hud__share_screen__1HQ8E\",\"shareScreen\":\"_2d-hud__share_screen__1HQ8E\",\"share_window\":\"_2d-hud__share_window__stsD3\",\"shareWindow\":\"_2d-hud__share_window__stsD3\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"label\":\"spectating-label__label__3JS5A\"};","module.exports = __webpack_public_path__ + \"assets/images/warning_icon-739d2a2ea906737505bcbc2cb51123a8.png\";","module.exports = __webpack_public_path__ + \"assets/images/warning_icon@2x-706e4a4db33f9456bac320e956b4120d.png\";","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport \"three/examples/js/controls/OrbitControls\";\n\nimport { createDefaultEnvironmentMap } from \"../components/environment-map\";\nimport { loadGLTF } from \"../components/gltf-model-plus\";\nimport { disposeNode } from \"../utils/three-utils\";\nimport { createImageBitmap, disposeImageBitmap } from \"../utils/image-bitmap-utils\";\nimport styles from \"../assets/stylesheets/avatar-preview.scss\";\n\nconst TEXTURE_PROPS = {\n  base_map: [\"map\"],\n  emissive_map: [\"emissiveMap\"],\n  normal_map: [\"normalMap\"],\n  orm_map: [\"aoMap\", \"roughnessMap\", \"metalnessMap\"]\n};\n\nconst ALL_MAPS = Object.keys(TEXTURE_PROPS);\n\n// This should match our aframe renderer=\"antialias: true; colorManagement: true; sortObjects: true;\n// physicallyCorrectLights: true; webgl2: true; multiview: false;\"\nfunction createRenderer(canvas, alpha = false, useDevicePixelRatio = true) {\n  const context = canvas.getContext(\"webgl2\", {\n    alpha,\n    depth: true,\n    antialias: true,\n    premultipliedAlpha: true,\n    preserveDrawingBuffer: false,\n    powerPreference: \"default\"\n  });\n\n  const renderer = new THREE.WebGLRenderer({ alpha, canvas, context });\n  renderer.gammaOutput = true;\n  renderer.gammaFactor = 2.2;\n  renderer.physicallyCorrectLights = true;\n  if (useDevicePixelRatio) {\n    renderer.setPixelRatio(window.devicePixelRatio);\n  }\n  return renderer;\n}\n\nconst createImageBitmapFromURL = url =>\n  fetch(url)\n    .then(r => r.blob())\n    .then(createImageBitmap);\n\nconst ORBIT_ANGLE = new THREE.Euler(-30 * THREE.Math.DEG2RAD, 30 * THREE.Math.DEG2RAD, 0);\nconst DEFAULT_MARGIN = 1;\n\nfunction fitBoxInFrustum(camera, box, center, margin = DEFAULT_MARGIN) {\n  const halfYExtents = Math.max(box.max.y - center.y, center.y - box.min.y);\n  const halfVertFOV = THREE.Math.degToRad(camera.fov / 2);\n  camera.position.set(0, 0, (halfYExtents / Math.tan(halfVertFOV) + box.max.z) * margin);\n  camera.position.applyEuler(ORBIT_ANGLE);\n  camera.position.add(center);\n  camera.lookAt(center);\n}\n\nclass AvatarPreview extends Component {\n  static propTypes = {\n    avatarGltfUrl: PropTypes.string,\n    className: PropTypes.string\n  };\n  constructor(props) {\n    super(props);\n    this.state = { loading: true, error: null };\n    this.avatar = null;\n    this.imageBitmaps = {};\n  }\n\n  componentDidMount = () => {\n    this.scene = new THREE.Scene();\n\n    this.camera = new THREE.PerspectiveCamera(55, this.canvas.clientWidth / this.canvas.clientHeight, 0.1, 1000);\n    this.controls = new THREE.OrbitControls(this.camera, this.canvas);\n    this.controls.enablePan = false;\n\n    const light = new THREE.DirectionalLight(0xf7f6ef, 1);\n    light.position.set(0, 10, 10);\n    this.scene.add(light);\n    this.scene.add(new THREE.HemisphereLight(0xb1e3ff, 0xb1e3ff, 2.5));\n\n    this.camera.position.set(-0.2, 0.5, 0.5);\n    this.camera.matrixAutoUpdate = true;\n\n    this.controls.target.set(0, 0.45, 0);\n    this.controls.update();\n\n    if (this.props.avatarGltfUrl) {\n      this.loadPreviewAvatar(this.props.avatarGltfUrl).then(this.setAvatar);\n    }\n\n    const clock = new THREE.Clock();\n\n    this.snapshotCanvas = document.createElement(\"canvas\");\n    this.snapshotCanvas.width = 720;\n    this.snapshotCanvas.height = 1280;\n    this.snapshotCamera = new THREE.PerspectiveCamera(55, 720 / 1280, 0.1, 1000);\n    this.snapshotCamera.matrixAutoUpdate = true;\n    this.snapshotRenderer = createRenderer(this.snapshotCanvas, true, false);\n    this.snapshotRenderer.setClearAlpha(0);\n\n    this.previewRenderer = createRenderer(this.canvas);\n    this.previewRenderer.setClearColor(0xeaeaea);\n    this.previewRenderer.setAnimationLoop(() => {\n      const dt = clock.getDelta();\n      this.mixer && this.mixer.update(dt);\n      this.previewRenderer.render(this.scene, this.camera);\n    });\n    window.addEventListener(\"resize\", this.resize);\n    this.resize();\n  };\n\n  resize = () => {\n    const width = this.canvas.parentElement.offsetWidth;\n    const height = this.canvas.parentElement.offsetHeight;\n    this.previewRenderer.setSize(width, height);\n    this.camera.aspect = width / height;\n    this.camera.updateProjectionMatrix();\n  };\n\n  setAvatar = avatar => {\n    if (!avatar) return;\n    this.avatar = avatar;\n    this.scene.add(avatar);\n    this.resetCamera();\n    this.setState({ error: null, loading: false });\n  };\n\n  resetCamera = (() => {\n    const box = new THREE.Box3();\n    const center = new THREE.Vector3();\n    return () => {\n      box.setFromObject(this.avatar);\n      box.getCenter(center);\n\n      // Shift the center vertically in order to frame the avatar nicely.\n      center.y = (box.max.y - box.min.y) * 0.6 + box.min.y;\n\n      fitBoxInFrustum(this.camera, box, center);\n      fitBoxInFrustum(this.snapshotCamera, box, center, 0.7);\n\n      this.controls.target.copy(center);\n      this.controls.update();\n    };\n  })();\n\n  componentWillUnmount = () => {\n    // Gotta be particularly careful about disposing things here since we will likely create many avatar\n    // previews during a session and Chrome will eventually discard the oldest webgl context if we leak\n    // contexts by holding on to them directly or indirectly.\n\n    this.scene && this.scene.traverse(disposeNode);\n    if (this.previewRenderer) {\n      this.previewRenderer.dispose();\n      this.previewRenderer.context = null;\n    }\n    if (this.snapshotRenderer) {\n      this.snapshotRenderer.dispose();\n      this.snapshotRenderer.context = null;\n    }\n    if (this.controls) {\n      this.controls.dispose();\n      this.controls.domElement = null;\n    }\n\n    Object.values(this.imageBitmaps).forEach(img => disposeImageBitmap(img));\n    window.removeEventListener(\"resize\", this.resize);\n  };\n\n  componentDidUpdate = async oldProps => {\n    if (oldProps.avatarGltfUrl !== this.props.avatarGltfUrl) {\n      if (this.avatar) {\n        this.scene.remove(this.avatar);\n        this.avatar = null;\n      }\n      if (this.props.avatarGltfUrl) {\n        this.setState({ error: null, loading: true });\n        await this.loadPreviewAvatar(this.props.avatarGltfUrl).then(this.setAvatar);\n      }\n    }\n    this.applyMaps(oldProps, this.props);\n  };\n\n  applyMaps(oldProps, newProps) {\n    return Promise.all(\n      ALL_MAPS.map(mapName => {\n        const applyMap = this.applyMapToPreview.bind(this, mapName);\n        if (oldProps[mapName] != newProps[mapName]) {\n          if (newProps[mapName] instanceof File) {\n            return createImageBitmap(newProps[mapName]).then(applyMap);\n          } else if (newProps[mapName]) {\n            return createImageBitmapFromURL(newProps[mapName]).then(applyMap);\n          } else {\n            return this.revertMap(mapName);\n          }\n        }\n      })\n    );\n  }\n\n  loadPreviewAvatar = async avatarGltfUrl => {\n    let gltf;\n    try {\n      gltf = await loadGLTF(avatarGltfUrl, \"model/gltf\");\n    } catch (e) {\n      this.setState({ loading: false, error: true });\n      return;\n    }\n\n    // On the backend we look for a material called Bot_PBS, here we are looking for a mesh called Avatar.\n    // When we \"officially\" support uploading custom GLTFs we need to decide what we are going to key things on\n    this.previewMesh =\n      gltf.scene.getObjectByName(\"AvatarMesh\") ||\n      gltf.scene.getObjectByName(\"Avatar\") ||\n      gltf.scene.getObjectByName(\"Bot_Skinned\") ||\n      gltf.scene;\n\n    const idleAnimation = gltf.animations && gltf.animations.find(({ name }) => name === \"idle_eyes\");\n    if (idleAnimation) {\n      this.mixer = new THREE.AnimationMixer(this.previewMesh);\n      const action = this.mixer.clipAction(idleAnimation);\n      action.enabled = true;\n      action.setLoop(THREE.LoopRepeat, Infinity).play();\n      this.idleAnimationAction = action;\n    }\n\n    const { material } = this.previewMesh;\n    if (material) {\n      // We delete onUpdate here to opt out of the auto texture cleanup after GPU upload.\n      const getImage = p => delete material[p].onUpdate && material[p].image;\n      this.originalMaps = {\n        base_map: TEXTURE_PROPS[\"base_map\"].map(getImage),\n        emissive_map: TEXTURE_PROPS[\"emissive_map\"].map(getImage),\n        normal_map: TEXTURE_PROPS[\"normal_map\"].map(getImage),\n        orm_map: TEXTURE_PROPS[\"orm_map\"].map(getImage)\n      };\n\n      await Promise.all([\n        this.applyMaps({}, this.props), // Apply initial maps\n        createDefaultEnvironmentMap().then(t => {\n          this.previewMesh.material.envMap = t;\n          this.previewMesh.material.needsUpdate = true;\n        })\n      ]);\n    } else {\n      this.originalMaps = {};\n    }\n\n    return gltf.scene;\n  };\n\n  applyMapToPreview = (name, image) => {\n    if (this.imageBitmaps[name]) {\n      disposeImageBitmap(this.imageBitmaps[name]);\n    }\n    this.imageBitmaps[name] = image;\n    TEXTURE_PROPS[name].forEach(prop => {\n      const texture = this.previewMesh.material[prop];\n      texture.image = image;\n      texture.needsUpdate = true;\n    });\n  };\n\n  revertMap = name => {\n    if (this.imageBitmaps[name]) {\n      disposeImageBitmap(this.imageBitmaps[name]);\n    }\n    delete this.imageBitmaps[name];\n    this.originalMaps[name].forEach((bm, i) => {\n      const texture = this.previewMesh.material[TEXTURE_PROPS[name][i]];\n      texture.image = bm;\n      texture.needsUpdate = true;\n    });\n  };\n\n  snapshot = () => {\n    return new Promise(resolve => {\n      if (this.idleAnimationAction) this.idleAnimationAction.stop();\n      this.snapshotRenderer.render(this.scene, this.snapshotCamera);\n      this.snapshotCanvas.toBlob(blob => {\n        if (this.idleAnimationAction) this.idleAnimationAction.play();\n        resolve(blob);\n      });\n    });\n  };\n\n  render() {\n    return (\n      <div className={classNames(styles.preview, this.props.className)}>\n        {this.state.loading &&\n          !this.state.error && (\n            <div className=\"loader\">\n              <div className=\"loader-center\" />\n            </div>\n          )}\n        {this.state.error &&\n          !this.state.loading && (\n            <div className=\"error\">\n              <img\n                src=\"../assets/images/warning_icon.png\"\n                srcSet=\"../assets/images/warning_icon@2x.png 2x\"\n                className=\"error-icon\"\n              />\n              <FormattedMessage id=\"avatar-preview.loading-failed\" />\n            </div>\n          )}\n        <canvas ref={c => (this.canvas = c)} />\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(AvatarPreview, { withRef: true });\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport styles from \"../assets/stylesheets/sign-in-dialog.scss\";\nimport DialogContainer from \"./dialog-container\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\n\nexport default class SignInDialog extends Component {\n  static propTypes = {\n    authStarted: PropTypes.bool,\n    authComplete: PropTypes.bool,\n    onSignIn: PropTypes.func,\n    onContinue: PropTypes.func,\n    message: PropTypes.string,\n    continueText: PropTypes.string\n  };\n\n  state = {\n    email: \"\"\n  };\n\n  onSubmit = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onSignIn(this.state.email);\n  };\n\n  render() {\n    let contents;\n    if (this.props.authStarted) {\n      contents = (\n        <p>\n          <FormattedMessage className=\"preformatted\" id=\"sign-in.auth-started\" />\n        </p>\n      );\n    } else if (this.props.authComplete) {\n      contents = (\n        <div className={styles.signInComplete}>\n          <p>{this.props.message}</p>\n          <button onClick={this.props.onContinue} className={styles.continueButton}>\n            {this.props.continueText}\n          </button>\n        </div>\n      );\n    } else {\n      contents = (\n        <form onSubmit={this.onSubmit} className={styles.signInForm}>\n          <span>{this.props.message}</span>\n          <input\n            name=\"email\"\n            type=\"email\"\n            required\n            placeholder=\"Your email address\"\n            value={this.state.email}\n            onFocus={e => handleTextFieldFocus(e.target)}\n            onBlur={() => handleTextFieldBlur()}\n            onChange={e => this.setState({ email: e.target.value })}\n            className={styles.emailField}\n          />\n          <p className={styles.terms}>\n            By proceeding, you agree to the{\" \"}\n            <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/mozilla/hubs/blob/master/TERMS.md\">\n              terms of use\n            </a>{\" \"}\n            and{\" \"}\n            <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\">\n              privacy notice\n            </a>.\n          </p>\n          <button type=\"submit\" className={styles.nextButton}>\n            next\n          </button>\n        </form>\n      );\n    }\n\n    return (\n      <DialogContainer title=\"Sign In\" {...this.props}>\n        {contents}\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nexport default class DialogContainer extends Component {\n  static propTypes = {\n    title: PropTypes.node,\n    children: PropTypes.node.isRequired,\n    onClose: PropTypes.func,\n    closable: PropTypes.bool,\n    wide: PropTypes.bool,\n    className: PropTypes.string\n  };\n\n  static defaultProps = {\n    closable: true\n  };\n\n  constructor(props) {\n    super(props);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onContainerClicked = this.onContainerClicked.bind(this);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.onKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.onKeyDown);\n  }\n\n  onKeyDown(e) {\n    if (this.props.closable && e.key === \"Escape\") {\n      this.props.onClose();\n    }\n  }\n\n  onContainerClicked = e => {\n    if (this.props.closable && e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return (\n      <div className={classNames(\"dialog-overlay\", this.props.className)}>\n        <div className=\"dialog\" onClick={this.onContainerClicked}>\n          <div className={`dialog__box ${this.props.wide ? \"dialog__wide\" : \"\"} `}>\n            <div className=\"dialog__box__contents\">\n              {this.props.closable &&\n                this.props.onClose && (\n                  <WithHoverSound>\n                    <button className=\"dialog__box__contents__close\" onClick={() => this.props.onClose()}>\n                      <i>\n                        <FontAwesomeIcon icon={faTimes} />\n                      </i>\n                    </button>\n                  </WithHoverSound>\n                )}\n              <div className=\"dialog__box__contents__title\">{this.props.title}</div>\n              <div className=\"dialog__box__contents__body\">{this.props.children}</div>\n              <div className=\"dialog__box__contents__button-container\" />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","/* global fetch THREE */\nimport URL_TICK from \"../assets/sfx/tick.mp3\";\nimport URL_TELEPORT_LOOP from \"../assets/sfx/teleport-loop.mp3\";\nimport URL_QUICK_TURN from \"../assets/sfx/quickTurn.mp3\";\nimport URL_TAP_MELLOW from \"../assets/sfx/tap_mellow.mp3\";\nimport URL_PEN_SPAWN from \"../assets/sfx/PenSpawn.mp3\";\nimport URL_PEN_DRAW from \"../assets/sfx/PenDraw1.mp3\";\nimport URL_CAMERA_SNAPSHOT from \"../assets/sfx/PicSnapHey.mp3\";\nimport URL_WELCOME from \"../assets/sfx/welcome.mp3\";\nimport URL_QUACK from \"../assets/sfx/quack.mp3\";\nimport URL_SPECIAL_QUACK from \"../assets/sfx/specialquack.mp3\";\nimport URL_POP from \"../assets/sfx/pop.mp3\";\nimport URL_FREEZE from \"../assets/sfx/Eb_blip.mp3\";\nimport URL_TACK from \"../assets/sfx/tack.mp3\";\nimport URL_MEDIA_LOADED from \"../assets/sfx/A_bendUp.mp3\";\nimport URL_MEDIA_LOADING from \"../assets/sfx/suspense.mp3\";\n\nlet soundEnum = 0;\nexport const SOUND_HOVER_OR_GRAB = soundEnum++;\nexport const SOUND_THAW = soundEnum++;\nexport const SOUND_PEN_STOP_DRAW = soundEnum++;\nexport const SOUND_PEN_UNDO_DRAW = soundEnum++;\nexport const SOUND_PEN_CHANGE_COLOR = soundEnum++;\nexport const SOUND_TOGGLE_MIC = soundEnum++;\nexport const SOUND_TELEPORT_START = soundEnum++;\nexport const SOUND_TELEPORT_END = soundEnum++;\nexport const SOUND_SNAP_ROTATE = soundEnum++;\nexport const SOUND_SPAWN_PEN = soundEnum++;\nexport const SOUND_PEN_START_DRAW = soundEnum++;\nexport const SOUND_CAMERA_TOOL_TOOK_SNAPSHOT = soundEnum++;\nexport const SOUND_ENTER_SCENE = soundEnum++;\nexport const SOUND_QUACK = soundEnum++;\nexport const SOUND_SPECIAL_QUACK = soundEnum++;\nexport const SOUND_CHAT_MESSAGE = soundEnum++;\nexport const SOUND_FREEZE = soundEnum++;\nexport const SOUND_PIN = soundEnum++;\nexport const SOUND_MEDIA_LOADING = soundEnum++;\nexport const SOUND_MEDIA_LOADED = soundEnum++;\n\n// Safari doesn't support the promise form of decodeAudioData, so we polyfill it.\nfunction decodeAudioData(audioContext, arrayBuffer) {\n  return new Promise((resolve, reject) => {\n    audioContext.decodeAudioData(arrayBuffer, resolve, reject);\n  });\n}\n\nexport class SoundEffectsSystem {\n  constructor() {\n    this.pendingEffects = [];\n    this.audioContext = THREE.AudioContext.getContext();\n    const soundsAndUrls = [\n      [SOUND_HOVER_OR_GRAB, URL_TICK],\n      [SOUND_THAW, URL_TICK],\n      [SOUND_PEN_STOP_DRAW, URL_TICK],\n      [SOUND_PEN_UNDO_DRAW, URL_TICK],\n      [SOUND_PEN_CHANGE_COLOR, URL_TICK],\n      [SOUND_TOGGLE_MIC, URL_TICK],\n      [SOUND_TELEPORT_START, URL_TELEPORT_LOOP],\n      [SOUND_TELEPORT_END, URL_QUICK_TURN],\n      [SOUND_SNAP_ROTATE, URL_TAP_MELLOW],\n      [SOUND_SPAWN_PEN, URL_PEN_SPAWN],\n      [SOUND_PEN_START_DRAW, URL_PEN_DRAW],\n      [SOUND_CAMERA_TOOL_TOOK_SNAPSHOT, URL_CAMERA_SNAPSHOT],\n      [SOUND_ENTER_SCENE, URL_WELCOME],\n      [SOUND_QUACK, URL_QUACK],\n      [SOUND_SPECIAL_QUACK, URL_SPECIAL_QUACK],\n      [SOUND_CHAT_MESSAGE, URL_POP],\n      [SOUND_FREEZE, URL_FREEZE],\n      [SOUND_PIN, URL_TACK],\n      [SOUND_MEDIA_LOADING, URL_MEDIA_LOADING],\n      [SOUND_MEDIA_LOADED, URL_MEDIA_LOADED]\n    ];\n    const loading = new Map();\n    const load = url => {\n      let audioBufferPromise = loading.get(url);\n      if (!audioBufferPromise) {\n        audioBufferPromise = fetch(url)\n          .then(r => r.arrayBuffer())\n          .then(arrayBuffer => decodeAudioData(this.audioContext, arrayBuffer));\n        loading.set(url, audioBufferPromise);\n      }\n      return audioBufferPromise;\n    };\n    this.sounds = new Map();\n    soundsAndUrls.map(([sound, url]) => {\n      load(url).then(audioBuffer => {\n        this.sounds.set(sound, audioBuffer);\n      });\n    });\n  }\n\n  enqueueSound(sound, loop) {\n    const audioBuffer = this.sounds.get(sound);\n    if (!audioBuffer) return null;\n    // The nodes are very inexpensive to create, according to\n    // https://developer.mozilla.org/en-US/docs/Web/API/AudioBufferSourceNode\n    const source = this.audioContext.createBufferSource();\n    source.buffer = audioBuffer;\n    source.connect(this.audioContext.destination);\n    source.loop = loop;\n    this.pendingEffects.push(source);\n    return source;\n  }\n\n  playSoundOneShot(sound) {\n    return this.enqueueSound(sound, false);\n  }\n\n  playSoundLooped(sound) {\n    return this.enqueueSound(sound, true);\n  }\n\n  playSoundLoopedWithGain(sound) {\n    const audioBuffer = this.sounds.get(sound);\n    if (!audioBuffer) return null;\n\n    const source = this.audioContext.createBufferSource();\n    const gain = this.audioContext.createGain();\n    source.buffer = audioBuffer;\n    source.connect(gain);\n    gain.connect(this.audioContext.destination);\n    source.loop = true;\n    this.pendingEffects.push(source);\n    return { gain, source };\n  }\n\n  stopSoundNode(node) {\n    const index = this.pendingEffects.indexOf(node);\n    if (index !== -1) {\n      this.pendingEffects.splice(index, 1);\n    } else {\n      node.stop();\n    }\n  }\n\n  tick() {\n    for (let i = 0; i < this.pendingEffects.length; i++) {\n      this.pendingEffects[i].start();\n    }\n    this.pendingEffects.length = 0;\n  }\n}\n","export function findAncestorWithComponent(entity, componentName) {\n  while (entity && !(entity.components && entity.components[componentName])) {\n    entity = entity.parentNode;\n  }\n  return entity;\n}\n","// Computes an AABB that surrounds the object in question and all of its children.\n// Note that if the children have rotations, this probably won't return the tightest\n// possible AABB -- we could return a tighter one if we examined all of the vertices\n// of the geometry for ourselves, but we don't care enough for what we're using this\n// for to do so much work.\nconst computeObjectAABB = (function() {\n  const bounds = new THREE.Box3();\n  return function(root, target) {\n    target.makeEmpty();\n    root.traverse(node => {\n      const geometry = node.geometry;\n      if (geometry != null) {\n        if (geometry.boundingBox == null) {\n          geometry.computeBoundingBox();\n        }\n        target.union(bounds.copy(geometry.boundingBox).applyMatrix4(node.matrixWorld));\n      }\n    });\n    return target;\n  };\n})();\n\nconst rotation = new THREE.Euler();\nexport function getBox(entity, boxRoot) {\n  const box = new THREE.Box3();\n\n  rotation.copy(entity.object3D.rotation);\n  entity.object3D.rotation.set(0, 0, 0);\n\n  entity.object3D.updateMatrices(true, true);\n  boxRoot.updateMatrices(true, true);\n  boxRoot.updateMatrixWorld(true);\n\n  computeObjectAABB(boxRoot, box);\n\n  if (!box.isEmpty()) {\n    entity.object3D.worldToLocal(box.min);\n    entity.object3D.worldToLocal(box.max);\n    entity.object3D.rotation.copy(rotation);\n    entity.object3D.matrixNeedsUpdate = true;\n  }\n\n  boxRoot.matrixWorldNeedsUpdate = true;\n  boxRoot.updateMatrices();\n\n  return box;\n}\n\nexport function getScaleCoefficient(length, box) {\n  if (box.isEmpty()) return 1.0;\n\n  const { max, min } = box;\n  const dX = Math.abs(max.x - min.x);\n  const dY = Math.abs(max.y - min.y);\n  const dZ = Math.abs(max.z - min.z);\n  const lengthOfLongestComponent = Math.max(dX, dY, dZ);\n  return length / lengthOfLongestComponent;\n}\n","// A-Frame blows away any npm debug log filters so this allow the user to set the log filter\n// via the query string.\nimport debug from \"debug\";\nimport qsTruthy from \"./qs_truthy\";\n\nconst qs = new URLSearchParams(location.search);\nconst isDebug = qsTruthy(\"debug\");\nconst logFilter = qs.get(\"log_filter\") || (isDebug && \"naf-janus-adapter:*\");\n\nif (logFilter) {\n  debug.enable(logFilter);\n}\n","import uuid from \"uuid/v4\";\n\nexport default class AuthChannel {\n  constructor(store) {\n    this.store = store;\n    this.socket = null;\n    this._signedIn = !!this.store.state.credentials.token;\n  }\n\n  setSocket = socket => {\n    this.socket = socket;\n  };\n\n  get email() {\n    return this.store.state.credentials.email;\n  }\n\n  get signedIn() {\n    return this._signedIn;\n  }\n\n  signOut = async hubChannel => {\n    if (hubChannel) {\n      await hubChannel.signOut();\n    }\n    this.store.update({ credentials: { token: null, email: null } });\n    this.store.resetToRandomLegacyAvatar();\n    this._signedIn = false;\n  };\n\n  verifyAuthentication(authTopic, authToken) {\n    const channel = this.socket.channel(authTopic);\n    return new Promise((resolve, reject) =>\n      channel\n        .join()\n        .receive(\"ok\", () => {\n          let receivedEmail;\n          let receivedToken;\n\n          // On the verifier side, also update local storage so we log in on both sides.\n          //\n          // In the case where it's the same browser, it should be updated with the same values in\n          // both tabs, so nbd.\n          const storeCredentials = async () => {\n            if (!receivedEmail || !receivedToken) return;\n            await this.handleAuthCredentials(receivedEmail, receivedToken);\n            resolve();\n          };\n\n          // We need to receive both the credentials token and the email (these come over via separate messages,\n          // since the email needs to be send from the origin process)\n          //\n          // If the user closed the other tab, which would cause the email to not show up, or the token failed,\n          // give up after a timeout.\n          setTimeout(() => {\n            if (!receivedEmail || !receivedToken) resolve();\n          }, 5000);\n\n          channel.on(\"auth_credentials\", async ({ credentials: token }) => {\n            receivedToken = token;\n            storeCredentials();\n          });\n\n          channel.on(\"auth_email\", async ({ email: email }) => {\n            receivedEmail = email;\n            storeCredentials();\n          });\n\n          channel.push(\"auth_verified\", { token: authToken });\n        })\n        .receive(\"error\", reject)\n    );\n  }\n\n  async startAuthentication(email, hubChannel) {\n    const channel = this.socket.channel(`auth:${uuid()}`);\n    await new Promise((resolve, reject) =>\n      channel\n        .join()\n        .receive(\"ok\", resolve)\n        .receive(\"error\", reject)\n    );\n\n    const authComplete = new Promise(resolve =>\n      channel.on(\"auth_credentials\", async ({ credentials: token }) => {\n        await this.handleAuthCredentials(email, token, hubChannel);\n        resolve();\n      })\n    );\n\n    channel.push(\"auth_request\", { email, origin: \"hubs\" });\n\n    // Returning an object with the authComplete promise since we want the caller to wait for the above await but not\n    // for authComplete.\n    return { authComplete };\n  }\n\n  async handleAuthCredentials(email, token, hubChannel) {\n    this.store.update({ credentials: { email, token } });\n\n    if (hubChannel) {\n      await hubChannel.signIn(token);\n    }\n\n    this._signedIn = true;\n  }\n}\n","export function addAnimationComponents(modelEl) {\n  if (!modelEl.components[\"animation-mixer\"]) {\n    return;\n  }\n\n  if (!modelEl.querySelector(\"[loop-animation]\")) {\n    modelEl.setAttribute(\"loop-animation\", \"\");\n  }\n}\n","const qs = new URLSearchParams(location.search);\n\nexport default function qsTruthy(param) {\n  const val = qs.get(param);\n  // if the param exists but is not set (e.g. \"?foo&bar\"), its value is the empty string.\n  return val === \"\" || /1|on|true|yes/i.test(val);\n}\n","import {airtableMessages} from '../airtable'\n\n// let fields;\n\n// airtableAssets.find('recHqITRS7cBMwn9i', (err, record) => \n//    fields = record.fields\n// )\n\nconsole.log(airtableMessages)\nasync () => {\n\tawait console.log(airtableMessages)\n}\n\nlet motto = airtableMessages && airtableMessages.get('Motto') || 'Learn together, from anywhere.\\nThe future of learning is virtual.\\nEqualizing access to premier quality education.'\n\n\nexport default {\n  \"en\": {\n    \"auth.verified-title\": \"E-Mail Verified!\",\n    \"auth.verified\": \"Your email has been verified!\\nYou can now close this browser tab and return to Hubs.\",\n    \"auth.spoke-verified\": \"You email has been verified!\\nYou can now close this browser tab and return to Spoke.\",\n    \"sign-in.prompt\": \"Sign in to pin objects in rooms.\",\n    \"sign-in.auth-started\":\n      \"Email sent!\\n\\nTo continue, go click on the link in the email using your phone, tablet, or PC.\",\n    \"sign-in.pin\": \"You'll need to sign in to pin objects.\",\n    \"sign-in.pin-complete\": \"You are now signed in.\",\n    \"sign-in.unpin\": \"You'll need to sign in to un-pin objects.\",\n    \"sign-in.unpin-complete\": \"You are now signed in.\",\n    \"sign-in.change-scene\": \"You'll need to sign in to change the scene.\",\n    \"sign-in.change-scene-complete\": \"You are now signed in.\",\n    \"sign-in.rename-room\": \"You'll need to sign in to rename axon park.\",\n    \"sign-in.rename-room-complete\": \"You are now signed in.\",\n    \"sign-in.close-room\": \"You'll need to sign in to close axon park.\",\n    \"sign-in.close-room-complete\": \"You are now signed in.\",\n    \"sign-in.mute-user\": \"You'll need to sign in to mute other users.\",\n    \"sign-in.mute-user-complete\": \"You are now signed in.\",\n    \"sign-in.kick-user\": \"You'll need to sign in to kick other users.\",\n    \"sign-in.kick-user-complete\": \"You are now signed in.\",\n    \"sign-in.create-avatar\": \"You'll need to sign in to create avatars.\",\n    \"sign-in.create-avatar-complete\": \"You are now signed in.\",\n    \"sign-in.favorite-room\": \"You'll need to sign in to add this room to your favorites.\",\n    \"sign-in.favorite-rooms\": \"You'll need to sign in to add favorite rooms.\",\n    \"sign-in.favorite-room-complete\": \"You are now signed in.\",\n    \"sign-in.favorite-rooms-complete\": \"You are now signed in.\",\n    \"sign-in.as\": \"Signed in as\",\n    \"sign-in.in\": \"Sign In\",\n    \"sign-in.out\": \"Sign Out\",\n    \"rename-room.message\": \"Enter the new name for axon park.\",\n    \"rename-room.rename\": \"Rename Axon Park\",\n    \"close-room.message\":\n      \"Closing this room will remove yourself and others from axon park, shutting it down permanently.\\n\\nAre you sure? This action cannot be undone.\",\n    \"close-room.confirm\": \"Yes, Close Axon Park\",\n    \"close-room.cancel\": \"Cancel\",\n    \"entry.room\": \"Immersive Education\",\n    \"entry.enter-room-title\": \"Lobby\",\n    \"entry.enter-room\": \"enter or send to device\",\n    \"entry.leave-room\": \"Leave Axon Park\",\n    \"entry.change-scene\": \"Choose a Scene\",\n    \"entry.in-lobby-notice\": \"You are viewing Axon Park from the lobby.\",\n    \"entry.screen-prefix\": \"Enter on \",\n    \"entry.desktop-screen\": \"Screen\",\n    \"entry.mobile-screen\": \"Phone\",\n    \"entry.mobile-safari\": \"Safari\",\n    \"entry.generic-prefix\": \" \",\n    \"entry.generic-medium\": \"Connected VR Headset\",\n    \"entry.generic-subtitle-desktop\": \"Oculus or SteamVR\",\n    \"entry.gearvr-prefix\": \"Enter on \",\n    \"entry.gearvr-medium\": \"Gear VR\",\n    \"entry.choose-device\": \"Choose Device\",\n    \"entry.device-medium\": \"Send to Device\",\n    \"entry.device-subtitle-desktop\": \"Standalone VR or Phone\",\n    \"entry.device-subtitle-mobile\": \"Standalone VR or PC\",\n    \"entry.device-subtitle-vr\": \"Phone or PC\",\n    \"entry.cardboard\": \"Enter on Google Cardboard\",\n    \"entry.daydream-prefix\": \"Enter on \",\n    \"entry.daydream-medium\": \"Daydream\",\n    \"entry.daydream-via-chrome\": \"Using Google Chrome\",\n    \"entry.invite-others\": \"invite others\",\n    \"entry.share-button\": \"share\",\n    \"entry.desktop.invite-tip\": \"Nobody is here yet. Share this room to get together.\",\n    \"entry.mobile.invite-tip\": \"Share to get together.\",\n    \"entry.invite-team-nag\": \"Invite a hubs team member\",\n    \"entry.enable-screen-sharing\": \"Share my desktop\",\n    \"entry.return-to-vr\": \"Return to VR\",\n    \"entry.enter-in-vr\": \"Enter in VR\",\n    \"entry.open-in-window\": \"Open in Tab\",\n    \"entry.lobby\": \"Lobby\",\n    \"entry.back\": \"Back\",\n    \"entry.notify_me\": \"Notify me when others arrive\",\n    \"entry.mute-on-entry\": \"Mute my microphone\",\n    \"profile.save\": \"Accept\",\n    \"profile.display_name.validation_warning\": \"Alphanumerics and hyphens. At least 3 characters, no more than 32\",\n    \"profile.header\": \"Name & Avatar\",\n    \"profile.terms_of_use\": \"Terms of Use\",\n    \"profile.privacy_notice\": \"Privacy Notice\",\n    \"profile.choose_avatar\": \"Browse Avatars\",\n    \"profile.tabs.legacy\": \"Default\",\n    \"profile.tabs.skinnable\": \"Custom Skin\",\n    \"profile.tabs.url\": \"Custom Model\",\n    \"profile.info\": \"Resources for creating custom avatar models can be found\",\n    \"profile.info-link\": \"here\",\n    \"avatar-editor.info\": \"Resources for creating custom avatar skins can be found\",\n    \"avatar-editor.info-link\": \"here\",\n    \"avatar-preview.loading-failed\": \"Loading failed\\nPlease choose another avatar\",\n    \"media-browser.search-placeholder.scenes\": \"Search Scenes...\",\n    \"media-browser.search-placeholder.avatars\": \"Search Avatars...\",\n    \"media-browser.search-placeholder.videos\": \"Search the web...\",\n    \"media-browser.search-placeholder.images\": \"Search the web...\",\n    \"media-browser.search-placeholder.youtube\": \"Search for videos...\",\n    \"media-browser.search-placeholder.gifs\": \"Search for GIFs...\",\n    \"media-browser.search-placeholder.twitch\": \"Search for streams...\",\n    \"media-browser.search-placeholder.sketchfab\": \"Search for models...\",\n    \"media-browser.search-placeholder.poly\": \"Search for models...\",\n    \"media-browser.search-placeholder.base\": \"Search...\",\n    \"media-browser.favorites-header\": \"Favorite Rooms\",\n    \"media-browser.add_custom_object\": \"Custom URL or File\",\n    \"media-browser.add_custom_scene\": \"Custom Scene\",\n    \"media-browser.add_custom_avatar\": \"Avatar GLB URL\",\n    \"media-browser.privacy_policy\": \"Privacy Policy\",\n    \"media-browser.spoke\": \"Spoke\",\n    \"media-browser.report_issue\": \"Report Issue\",\n    \"media-browser.powered_by.images\": \"Search by Bing | \",\n    \"media-browser.powered_by.videos\": \"Search by Bing | \",\n    \"media-browser.powered_by.youtube\": \"Search by Google | \",\n    \"media-browser.powered_by.gifs\": \"Search by Tenor | \",\n    \"media-browser.powered_by.sketchfab\": \"Search by Sketchfab | \",\n    \"media-browser.powered_by.poly\": \"Search by Google | \",\n    \"media-browser.powered_by.twitch\": \"Search by Twitch | \",\n    \"media-browser.powered_by.scenes\": \"Made with \",\n    \"media-browser.powered_by.avatars\": \" \",\n    \"media-browser.empty.images\": \"No results. Try entering a new search above.\",\n    \"media-browser.empty.videos\": \"No results. Try entering a new search above.\",\n    \"media-browser.empty.youtube\": \"No results. Try entering a new search above.\",\n    \"media-browser.empty.gifs\": \"No result. Try entering a new search above.\",\n    \"media-browser.empty.sketchfab\": \"No results. Try entering a new search above.\",\n    \"media-browser.empty.poly\": \"No results. Try entering a new search above.\",\n    \"media-browser.empty.twitch\": \"No results. Try entering a new search above.\",\n    \"media-browser.empty.favorites\": \"You don't have any favorites. Click a ⭐ to add to your favorites.\",\n    \"media-browser.nav_title.youtube\": \"YouTube\",\n    \"media-browser.nav_title.videos\": \"Videos\",\n    \"media-browser.nav_title.images\": \"Images\",\n    \"media-browser.nav_title.gifs\": \"GIFs\",\n    \"media-browser.nav_title.scenes\": \"Scenes\",\n    \"media-browser.nav_title.avatars\": \"Avatars\",\n    \"media-browser.nav_title.sketchfab\": \"Sketchfab\",\n    \"media-browser.nav_title.poly\": \"Google Poly\",\n    \"media-browser.nav_title.twitch\": \"Twitch\",\n    \"media-browser.create-avatar\": \"Create Avatar\",\n    \"media-browser.create-scene\": \"Create Scene with Spoke\",\n    \"media-browser.hub.joined-prefix\": \"Joined \",\n    \"media-browser.hub.joined-prefix\": \"Visited \",\n    \"audio.title\": \"Audio Setup\",\n    \"audio.talk_to_test\": \"talk\",\n    \"audio.click_to_test\": \"click\",\n    \"audio.subtitle-desktop\": \"Confirm HMD speaker output\",\n    \"audio.subtitle-mobile\": \"Earphones are recommended\",\n    \"audio.enter-now\": \"Enter Now\",\n    \"audio.hmd-mic-warning\": \"Your HMD mic is not chosen\",\n    \"audio.grant-title\": \"Grant mic permissions\",\n    \"audio.grant-subtitle\": \"Mic access needed to be heard by others\",\n    \"audio.granted-title\": \"Mic permissions granted\",\n    \"audio.granted-subtitle\": \"You can still mute yourself in-game\",\n    \"audio.granted-next\": \"Next\",\n    \"exit.subtitle.exited\": \"Your session has ended. Refresh your browser to start a new one.\",\n    \"exit.subtitle.closed\": \"This room is no longer available.\",\n    \"exit.subtitle.denied\": \"You are not permitted to join this room. Please request permission from the room creator.\",\n    \"exit.subtitle.kicked\": \"You have been kicked from axon park.\",\n    \"exit.subtitle.left\": \"You have left axon park.\",\n    \"exit.subtitle.full\": \"This room is full, please try again later.\",\n    \"exit.subtitle.connect_error\": \"Unable to connect to this room, please try again later.\",\n    \"exit.subtitle.version_mismatch\":\n      \"The version you deployed is not available yet. Your browser will refresh in 5 seconds.\",\n    \"autoexit.title\": \"Auto-ending session in \",\n    \"autoexit.title_units\": \" seconds\",\n    \"autoexit.subtitle\": \"You have started another session.\",\n    \"autoexit.cancel\": \"CANCEL\",\n    \"presence.entered_room\": \"entered axon park.\",\n    \"presence.entered_lobby\": \"entered axon park's lobby.\",\n    \"presence.join_lobby\": \"joined the axon park lobby.\",\n    \"presence.join_room\": \"joined axon park.\",\n    \"presence.leave\": \"left.\",\n    \"presence.name_change\": \"is now known as\",\n    \"presence.scene_change\": \"changed the scene to\",\n    \"presence.hub_name_change\": \"changed the name of the room to\",\n    \"presence.in_lobby\": \"Axon Park Lobby\",\n    \"presence.in_room\": \"In Axon Park\",\n    \"home.create_a_room\": \"Initialize Axon Park\",\n    \"home.desktop.add_pwa\": \"Install Desktop App\",\n    \"home.mobile.add_pwa\": \"Add to Home Screen\",\n    \"home.take_a_tour\": \"Take a Tour\",\n    \"home.room_create_options\": \"options\",\n    \"home.room_create_button\": \"Initialize Axon Park\",\n    \"home.create_name.validation_warning\": \"Invalid name, limited to 4 to 64 characters and limited symbols.\",\n    \"home.join_us\": \"Join the Conversation\",\n    \"home.have_code\": \"Have an axon park code?\",\n    \"home.add_to_discord_1\": \"Add the\",\n    \"home.add_to_discord_2\": \"Hubs Bot\",\n    \"home.add_to_discord_3\": \"to Discord\",\n    \"home.create_with_spoke\": \"Create a Scene\",\n    \"home.report_issue\": \"Report Issues\",\n    \"home.source_link\": \"Source\",\n    \"home.whats_new_link\": \"What's New\",\n    \"home.spoke_link\": \"Spoke\",\n    \"home.about_link\": \"About\",\n    \"home.community_link\": \"Community\",\n    \"home.privacy_notice\": \"Privacy Notice\",\n    \"home.terms_of_use\": \"Terms of Use\",\n    \"home.get_updates\": \"Get Updates\",\n    \"home.hero_title\": \"A new way to get together\",\n    \"home.hero_blurb\": motto,\n    \"home.made_with_love\": \"made with 🦆 by \",\n    \"home.environment_author_by\": \" by \",\n    \"dialog.close\": \"close\",\n    \"mailing_list.privacy_label\": \"I'm okay with Mozilla handling my info as explained in\",\n    \"mailing_list.privacy_link\": \"this Privacy Notice\",\n    \"link.link_page_header_entry\": \"Enter your code:\",\n    \"link.link_page_header_headset\": \"Enter Send to Device code:\",\n    \"link.linking_a_headset\": \"Have a letter code?\",\n    \"link.try_again\": \"We couldn't find that code.\\nPlease try again.\",\n    \"help.report_issue\": \"Report an Issue\",\n    \"scene.logo_tagline\": \"A new way to get together\",\n    \"scene.create_button\": \"Create a room with this scene\",\n    \"scene.tweet_button\": \"Share on Twitter\",\n    \"scene.unavailable\": \"This scene is no longer available.\",\n    \"link.in_your_browser\": \"In your device's web browser, go to:\",\n    \"link.enter_code\": \"Then, enter this one-time letter code:\",\n    \"link.do_not_close\":\n      \"Your account and avatar will be transferred to the device.\\nKeep this page open to use this code.\",\n    \"link.connect_headset\": \"Send to Device\",\n    \"link.cancel\": \"cancel\",\n    \"invite.enter_via\": \"Enter via \",\n    \"invite.enter_via_modal\": \"Others may enter via \",\n    \"invite.tweet\": \"tweet\",\n    \"invite.and_enter_code\": \" with code:\",\n    \"invite.or_visit\": \"or share permalink\",\n    \"invite.or_visit_modal\": \"or by visiting permalink\",\n    \"invite.embed\": \"or embed on a page\",\n    \"invite.embed-tip\":\n      \"Please be mindful of where you embed a Hubs room.\\nAnyone who can access the page can enter and create/remove objects.\",\n    \"spoke.primary_tagline\": \"make your space\",\n    \"spoke.secondary_tagline\": \"Create 3D social scenes for \",\n    \"spoke.thank_you\": \"Thank you for downloading Spoke!\",\n    \"spoke.download_win\": \"Download for Windows\",\n    \"spoke.download_macos\": \"Download for Mac\",\n    \"spoke.download_linux\": \"Download for Linux\",\n    \"spoke.download_unsupported\": \"View Releases\",\n    \"spoke.browse_all_versions\": \"Browse All Versions\",\n    \"spoke.beginner_tutorial_button\": \"Learn Spoke in 5 Minutes\",\n    \"spoke.advanced_tutorial_button\": \"Advanced Spoke in 10 minutes\",\n    \"spoke.play_button\": \"Learn Spoke in 5 Minutes\",\n    \"commands.fly\": \"Toggle fly mode.\",\n    \"commands.grow\": \"Increase your avatar's size.\",\n    \"commands.shrink\": \"Decrease your avatar's size.\",\n    \"commands.scene\": \"Change the scene.\",\n    \"commands.rename\": \"Rename the room.\",\n    \"commands.help\": \"Show help.\",\n    \"commands.leave\": \"Disconnect from axon park.\",\n    \"commands.duck\": \"The duck tested well. Quack.\",\n    \"commands.capture\": \"Capture a 15 second video.\",\n    \"commands.debug\": \"Toggle physics debug rendering.\",\n    \"commands.vrstats\": \"Toggle stats in VR.\",\n    \"settings.change-avatar\": \"Set Name & Avatar\",\n    \"settings.change-scene\": \"Choose a Scene\",\n\n    \"settings.favorites\": \"Favorite Rooms\",\n    \"settings.rename-room\": \"Set Axon Park Name...\",\n    \"settings.close-room\": \"Close Axon Park...\",\n    \"settings.room-info\": \"Axon Park Info\",\n    \"settings.create-room\": \"New Axon Park...\",\n\n    \"settings.create-scene\": \"Get Spoke\",\n    \"settings.send-feedback\": \"Send Feedback\",\n    \"settings.whats-new\": \"What's New\",\n    \"settings.features\": \"Help\",\n    \"settings.controls\": \"Controls\",\n    \"settings.community\": \"Join Discord\",\n    \"settings.tips\": \"Show Tips\",\n    \"settings.report\": \"Report Issue\",\n    \"settings.terms\": \"Terms of Use\",\n    \"settings.privacy\": \"Privacy Notice\",\n    \"settings.help\": \"Help\",\n\n    \"settings.row-profile\": \"You\",\n    \"settings.row-room\": \"Axon Park\",\n\n    \"tips.mobile.video_share_mode\": \"Tap to stop sharing video.\",\n    \"tips.mobile.pen_mode\": \"Tap icon again to end drawing.\",\n    \"tips.mobile.mute_mode\": \"You are muted. Tap to unmute.\",\n    \"tips.mobile.freeze_mode\": \"Two-finger tap to hide menus.\",\n    \"tips.mobile.look\": \"Welcome! 👋 Tap and drag to look around.\",\n    \"tips.mobile.locomotion\": \"Great! To move, pinch with two fingers.\",\n    \"tips.mobile.spawn_menu-pre\": \"Use the \",\n    \"tips.mobile.spawn_menu-post\": \"at the top to create objects.\",\n    \"tips.mobile.freeze_gesture\": \"Two-finger tap to show menus.\",\n    \"tips.mobile.object_grab\": \"Drag an object to move or throw it.\",\n    \"tips.mobile.object_rotate_button-pre\": \"Tap and drag \",\n    \"tips.mobile.object_rotate_button-post\": \" to rotate.\",\n    \"tips.mobile.object_scale_button-pre\": \"Tap and drag \",\n    \"tips.mobile.object_scale_button-post\": \" to scale.\",\n    \"tips.mobile.object_recenter_button-pre\": \"Tap \",\n    \"tips.mobile.object_recenter_button-post\": \" to have the object face you.\",\n\n    \"tips.mobile.object_pin\": \"Pin an object to save it to axon park.\",\n    \"tips.mobile.object_pin\": \"Pin an object to save it to axon park.\",\n    \"tips.mobile.invite\": \"Use the Invite button to share axon park.\",\n\n    \"tips.desktop.video_share_mode\": \"You're streaming. Select again to stop sharing video.\",\n    \"tips.desktop.pen_mode\": \"Press ESC or right click to drop pen. Ctrl-Z to undo.\",\n    \"tips.desktop.mirror_mode\": \"Press ESC to end camera mirroring.\",\n    \"tips.desktop.mute_mode\": \"You are muted. Click or press M to un-mute.\",\n    \"tips.desktop.look\": \"Welcome to Hubs! 👋 Click and drag to look around.\",\n    \"tips.desktop.locomotion\": \"Great! Now, use the W A S D keys to move. Hold shift to boost.\",\n    \"tips.desktop.turning\": \"Perfect. Use the Q and E keys to rotate.\",\n    \"tips.desktop.spawn_menu-pre\": \"To create objects, click the \",\n    \"tips.desktop.spawn_menu-post\": \"button at the top of the screen, or press Ctrl 1 through 7.\",\n    \"tips.desktop.freeze_gesture\": \"Press and hold spacebar to show object menus.\",\n    \"tips.desktop.menu_hover\": \"Now, point the cursor at an object to show the menu.\",\n    \"tips.desktop.object_grab\": \"Click and drag an object to move it. Or, flick to throw it!\",\n    \"tips.desktop.object_pin\": \"Pin an object to save it to axon park.\",\n    \"tips.desktop.object_zoom\": \"Scroll to move this object towards and away from you.\",\n    \"tips.desktop.object_rotate_button-pre\": \"Click and drag \",\n    \"tips.desktop.object_rotate_button-post\": \" to rotate the object.\",\n    \"tips.desktop.object_scale_button-pre\": \"Click and drag \",\n    \"tips.desktop.object_scale_button-post\": \" to scale the object.\",\n    \"tips.desktop.object_recenter_button-pre\": \"Click \",\n    \"tips.desktop.object_recenter_button-post\": \" to rotate the object to face you. Helpful if you drop it!\",\n    \"tips.desktop.object_scale\": \"Hold shift and scroll to scale it bigger and smaller.\",\n    \"tips.desktop.pen_color\": \"Use Shift-Q and Shift-E to change the pen color.\",\n    \"tips.desktop.pen_size\": \"Hold Shift and scroll to change the pen size.\",\n    \"tips.desktop.invite\": \"Nobody else is here. Use the Share button at the top to share this room.\",\n    \"tips.desktop.watching\": \"You're in the lobby. Others cannot see or hear you.\",\n    \"tips.watching.back\": \"Enter Room\",\n    \"tips.mobile.watching\": \"You're in the lobby.\",\n    \"tips.watching-exit\": \"Back\",\n    \"loader.entering_lobby\": \"Entering lobby...\",\n    \"loader.loading\": \"Loading \",\n    \"loader.object\": \"object\",\n    \"loader.objects\": \"objects\",\n    \"change-scene-dialog.change-scene\": \"Change Scene\",\n    \"change-scene-dialog.create-in-spoke\": \"Or, create a new scene using Spoke.\",\n    \"change-scene-dialog.new-spoke-project\": \"Launch Spoke\",\n    \"avatar-url-dialog.apply\": \"Apply\",\n    \"interstitial.prompt\": \"Continue\",\n    \"feedback.prompt\": \"Feedback\",\n    \"hide-ui.prompt\": \"Hide All\",\n    \"discord.primary_tagline\":\n      \"Share a virtual room with your community.\\nWatch videos, play with 3D objects, or just hang out.\",\n    \"discord.secondary_tagline\": \"No downloads or sign up. Full VR support too.\",\n    \"discord.contact_us\": \"Invite Bot to Server\",\n    \"discord.community_link\": \"Hubs Discord\",\n    \"discord.splash_tag\": \"Designed for serious businessing.\",\n    \"client-info.kick-button\": \"Kick\",\n    \"client-info.hide-button\": \"Hide\",\n    \"client-info.unhide-button\": \"Un-hide \",\n    \"client-info.mute-button\": \"Mute\",\n    \"client-info.cancel\": \"Cancel\",\n    \"avatar-landing.select\": \"Select\",\n    \"avatar-landing.selected\": \"This is your current avatar\",\n    \"leave-room-dialog.join-room.message\": \"Joining a new room will leave this one. Are you sure?\",\n    \"leave-room-dialog.join-room.confirm\": \"Join Room\",\n    \"leave-room-dialog.create-room.message\": \"Creating a new room will leave this one. Are you sure?\",\n    \"leave-room-dialog.create-room.confirm\": \"Leave Room\",\n    \"embed.load-button\": \"Load Room\",\n    \"embed.presence-warning\": \"This room is embedded, so may be visible to visitors on other websites.\"\n  }\n}\n","import localeData from \"../everyspace/messages.js\";\n// import localeData from \"../assets/translations.data.json\";\nconst navigatorLang = ((navigator.languages && navigator.languages[0]) || navigator.language || navigator.userLanguage)\n  .toLowerCase()\n  .split(/[_-]+/)[0];\nexport const lang = (localeData[navigatorLang] && navigatorLang) || \"en\";\nexport const messages = localeData[lang] || localeData.en;\n","export default function maskEmail(email) {\n  if (!email) return \"\";\n  const emailParts = email.split(\"@\");\n  const emailIdentity = emailParts[0];\n  const emailDomain = emailParts[1];\n  const truncatedIdentity = emailIdentity.substring(0, Math.min(emailIdentity.length, 3));\n  return `${truncatedIdentity}...@${emailDomain}`;\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport dayjs from \"dayjs-ext\";\nimport relativeTime from \"dayjs-ext/plugin/relativeTime\";\nimport { FormattedMessage } from \"react-intl\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faAngleLeft } from \"@fortawesome/free-solid-svg-icons/faAngleLeft\";\nimport { faAngleRight } from \"@fortawesome/free-solid-svg-icons/faAngleRight\";\nimport { faExternalLinkAlt } from \"@fortawesome/free-solid-svg-icons/faExternalLinkAlt\";\nimport { faPencilAlt } from \"@fortawesome/free-solid-svg-icons/faPencilAlt\";\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons/faPlus\";\n\nimport styles from \"../assets/stylesheets/media-browser.scss\";\nimport { scaledThumbnailUrlFor } from \"../utils/media-url-utils\";\nimport StateLink from \"./state-link\";\n\ndayjs.extend(relativeTime);\n\nconst PUBLISHER_FOR_ENTRY_TYPE = {\n  sketchfab_model: \"Sketchfab\",\n  poly_model: \"Google Poly\",\n  twitch_stream: \"Twitch\"\n};\n\nclass MediaTiles extends Component {\n  static propTypes = {\n    result: PropTypes.object,\n    history: PropTypes.object,\n    urlSource: PropTypes.string,\n    handleEntryClicked: PropTypes.func,\n    handlePager: PropTypes.func\n  };\n\n  render() {\n    const { urlSource, result } = this.props;\n    const entries = (result && result.entries) || [];\n    const [createTileWidth, createTileHeight] = this.getTileDimensions(false, urlSource === \"avatars\");\n    const searchParams = new URLSearchParams((this.props.history ? this.props.history.location : location).search);\n    const hasMeta = !!(result && result.meta);\n    const apiSource = (hasMeta && result.meta.source) || null;\n    const isVariableWidth = result && [\"bing_images\", \"tenor\"].includes(apiSource);\n    const hasNext = !!(hasMeta && result.meta.next_cursor) || false;\n    const hasPrevious = searchParams.get(\"cursor\");\n\n    return (\n      <div className={styles.body}>\n        <div className={classNames({ [styles.tiles]: true, [styles.tilesVariable]: isVariableWidth })}>\n          {(urlSource === \"avatars\" || urlSource === \"scenes\") && (\n            <div\n              style={{ width: `${createTileWidth}px`, height: `${createTileHeight}px` }}\n              className={classNames(styles.tile, styles.createTile)}\n            >\n              {urlSource === \"scenes\" ? (\n                <a href=\"/spoke/new\" rel=\"noopener noreferrer\" target=\"_blank\" className={styles.tileLink}>\n                  <div className={styles.tileContent}>\n                    <FontAwesomeIcon icon={faPlus} />\n                    <FormattedMessage id=\"media-browser.create-scene\" />\n                  </div>\n                </a>\n              ) : (\n                <a\n                  onClick={e => {\n                    e.preventDefault();\n                    window.dispatchEvent(new CustomEvent(\"action_create_avatar\"));\n                  }}\n                  className={styles.tileLink}\n                >\n                  <div className={styles.tileContent}>\n                    <FontAwesomeIcon icon={faPlus} />\n                    <FormattedMessage id=\"media-browser.create-avatar\" />\n                  </div>\n                </a>\n              )}\n            </div>\n          )}\n\n          {entries.map(this.entryToTile)}\n        </div>\n\n        {result &&\n          (hasNext || hasPrevious) &&\n          this.props.handlePager && (\n            <div className={styles.pager}>\n              <a\n                className={classNames({ [styles.previousPage]: true, [styles.pagerButtonDisabled]: !hasPrevious })}\n                onClick={() => this.props.handlePager(-1)}\n              >\n                <FontAwesomeIcon icon={faAngleLeft} />\n              </a>\n              <div className={styles.pageNumber}>{result.meta.page}</div>\n              <a\n                className={classNames({ [styles.nextPage]: true, [styles.pagerButtonDisabled]: !hasNext })}\n                onClick={() => this.props.handlePager(1)}\n              >\n                <FontAwesomeIcon icon={faAngleRight} />\n              </a>\n            </div>\n          )}\n      </div>\n    );\n  }\n\n  getTileDimensions = (isImage, isAvatar, imageAspect) => {\n    // Doing breakpointing here, so we can have proper image placeholder based upon dynamic aspect ratio\n    const clientWidth = window.innerWidth;\n    let imageHeight = clientWidth < 1079 ? (clientWidth < 768 ? (clientWidth < 400 ? 85 : 100) : 150) : 200;\n    if (isAvatar) imageHeight = Math.floor(imageHeight * 1.5);\n\n    // Aspect ratio can vary per image if its an image result. Avatars are a taller portrait aspect, o/w assume 720p\n    let imageWidth;\n    if (isImage) {\n      imageWidth = Math.floor(Math.max(imageAspect * imageHeight, imageHeight * 0.85));\n    } else if (isAvatar) {\n      imageWidth = Math.floor((9 / 16) * imageHeight);\n    } else {\n      imageWidth = Math.floor(Math.max((16 / 9) * imageHeight, imageHeight * 0.85));\n    }\n\n    return [imageWidth, imageHeight];\n  };\n\n  entryToTile = (entry, idx) => {\n    const imageSrc = entry.images.preview.url;\n    const creator = entry.attributions && entry.attributions.creator;\n    const isImage = entry.type.endsWith(\"_image\");\n    const isAvatar = [\"avatar\", \"avatar_listing\"].includes(entry.type);\n    const isHub = [\"hub\"].includes(entry.type);\n    const imageAspect = entry.images.preview.width / entry.images.preview.height;\n\n    const [imageWidth, imageHeight] = this.getTileDimensions(isImage, isAvatar, imageAspect);\n\n    const publisherName =\n      (entry.attributions && entry.attributions.publisher && entry.attributions.publisher.name) ||\n      PUBLISHER_FOR_ENTRY_TYPE[entry.type];\n\n    return (\n      <div style={{ width: `${imageWidth}px` }} className={styles.tile} key={`${entry.id}_${idx}`}>\n        <a\n          href={entry.url}\n          rel=\"noreferrer noopener\"\n          onClick={e => this.props.handleEntryClicked && this.props.handleEntryClicked(e, entry)}\n          className={styles.tileLink}\n          style={{ width: `${imageWidth}px`, height: `${imageHeight}px` }}\n        >\n          <img\n            className={classNames(styles.tileContent, styles.avatarTile)}\n            src={scaledThumbnailUrlFor(imageSrc, imageWidth, imageHeight)}\n          />\n        </a>\n        {entry.type === \"avatar\" && (\n          <StateLink\n            className={styles.editAvatar}\n            stateKey=\"overlay\"\n            stateValue=\"avatar-editor\"\n            stateDetail={{ avatarId: entry.id }}\n            history={this.props.history}\n          >\n            <FontAwesomeIcon icon={faPencilAlt} />\n          </StateLink>\n        )}\n        {!entry.type.endsWith(\"_image\") && (\n          <div className={styles.info}>\n            <a\n              href={entry.url}\n              rel=\"noreferrer noopener\"\n              className={styles.name}\n              onClick={e => this.props.handleEntryClicked && this.props.handleEntryClicked(e, entry)}\n            >\n              {entry.name || \"\\u00A0\"}\n            </a>\n            {!isAvatar &&\n              !isHub && (\n                <div className={styles.attribution}>\n                  <div className={styles.creator}>\n                    {creator && creator.name === undefined && <span>{creator}</span>}\n                    {creator && creator.name && !creator.url && <span>{creator.name}</span>}\n                    {creator &&\n                      creator.name &&\n                      creator.url && (\n                        <a href={creator.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                          {creator.name}\n                        </a>\n                      )}\n                  </div>\n                  {publisherName && (\n                    <div className={styles.publisher}>\n                      <i>\n                        <FontAwesomeIcon icon={faExternalLinkAlt} />\n                      </i>\n                      &nbsp;<a href={entry.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                        {publisherName}\n                      </a>\n                    </div>\n                  )}\n                </div>\n              )}\n            {isHub && (\n              <div className={styles.attribution}>\n                <div className={styles.lastJoined}>\n                  <FormattedMessage id=\"media-browser.hub.joined-prefix\" />\n                  {dayjs(entry.last_activated_at).fromNow()}\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  };\n}\nexport default MediaTiles;\n","const THREE = AFRAME.THREE;\n\nfunction checkFloatTextureSupport() {\n  const renderer = new THREE.WebGLRenderer();\n\n  const scene = new THREE.Scene();\n  const size = 2;\n  const data = new Float32Array(size * size * 4);\n  const dataTexture = new THREE.DataTexture(data, size, size, THREE.RGBAFormat, THREE.FloatType);\n  const box = new THREE.Mesh(new THREE.PlaneBufferGeometry(1, 1), new THREE.MeshBasicMaterial({ map: dataTexture }));\n  box.material.map.needsUpdate = true;\n  scene.add(box);\n\n  renderer.render(scene, new THREE.Camera());\n  const result = renderer.context.getError() === 0;\n  renderer.dispose();\n  return result;\n}\n\nexport function patchWebGLRenderingContext() {\n  if (/Android.+Firefox/.test(navigator.userAgent)) {\n    // It appears that Galaxy S6 devices falsely report that they support\n    // OES_texture_float in Firefox. This workaround disables float textures\n    // for those devices.\n    // See https://github.com/mozilla/hubs/issues/32 and\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1338656\n    const originalGetExtension = WebGLRenderingContext.prototype.getExtension;\n    const supportsFloatTextures = checkFloatTextureSupport();\n    WebGLRenderingContext.prototype.getExtension = function patchedGetExtension(name) {\n      if (name === \"OES_texture_float\" && !supportsFloatTextures) {\n        return null;\n      }\n      return originalGetExtension.call(this, name);\n    };\n  }\n}\n","module.exports = \"if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\\n  float ratio = 0.0;\\n\\n  if (hubs_EnableSweepingEffect) {\\n    float size = hubs_SweepParams.t - hubs_SweepParams.s;\\n    float line = mod(hubs_Time / 500.0 * size, size * 3.0) + hubs_SweepParams.s - size / 3.0;\\n\\n    if (hubs_WorldPosition.y < line) {\\n      // Highlight with a sweeping gradient.\\n      ratio = max(0.0, 1.0 - (line - hubs_WorldPosition.y) / (size * 1.5));\\n    }\\n  }\\n\\n  // Highlight with a gradient falling off with distance.\\n  float pulse = 9.0 + 3.0 * (sin(hubs_Time / 1000.0) + 1.0);\\n\\n  if (hubs_HighlightInteractorOne) {\\n    float dist1 = distance(hubs_WorldPosition, hubs_InteractorOnePos);\\n    ratio += -min(1.0, pow(dist1 * pulse, 3.0)) + 1.0;\\n  } \\n\\n  if (hubs_HighlightInteractorTwo) {\\n    float dist2 = distance(hubs_WorldPosition, hubs_InteractorTwoPos);\\n    ratio += -min(1.0, pow(dist2 * pulse, 3.0)) + 1.0;\\n  }\\n\\n  ratio = min(1.0, ratio);\\n\\n  // Gamma corrected highlight color\\n  vec3 highlightColor = vec3(0.184, 0.499, 0.933);\\n\\n  gl_FragColor.rgb = (gl_FragColor.rgb * (1.0 - ratio)) + (highlightColor * ratio);\\n}\\n\"","module.exports = __webpack_public_path__ + \"assets/LoadingObject_Atom-7dcc3b81897e68b740c1cf12b6cf4c3f.glb\";","module.exports = __webpack_public_path__ + \"assets/sfx/teleport-loop-84e2caa4f62e5c6d6ce339b0c715c06d.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/quickTurn-cda89edb1a7a32e4442cac70cd2694be.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/tap_mellow-673398d6e97818ec4b675708d460bd0f.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/PenSpawn-aac1f534773040f0fafa41e9db76017b.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/PenDraw1-ddbdc17a6beefecbca2685c8c9d0d2d5.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/PicSnapHey-0228ddd197e5a6d88f7bcd2ceb340f8e.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/welcome-0083300978d5dd05eaa376f65761da47.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/quack-1f18502834f8f1db43990b769c2ab193.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/specialquack-6d1a192a6092e8dfed5d3de063755ee2.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/pop-5784f3bcfaf98637147737448d6df8df.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/Eb_blip-8d7302990e83d6798400a6027dce3936.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/tack-0d55b064794faaa1733fcf6bc89cad0c.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/A_bendUp-de32e556413bb2a527fb514984738c70.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/suspense-f27c64840e5ede36ec694c22a030615c.mp3\";","module.exports = __webpack_public_path__ + \"assets/waternormals-4418dde3f6abc21dc32506acf5f5b093.jpg\";","// NOTE: We do not use an IV since we generate a new keypair each time we use these routines.\n\nasync function deriveKey(privateKey, publicKey) {\n  return crypto.subtle.deriveKey(\n    { name: \"ECDH\", public: publicKey },\n    privateKey,\n    { name: \"AES-CBC\", length: 256 },\n    true,\n    [\"encrypt\", \"decrypt\"]\n  );\n}\n\nasync function publicKeyToString(key) {\n  return JSON.stringify(await crypto.subtle.exportKey(\"jwk\", key));\n}\n\nasync function stringToPublicKey(s) {\n  return await crypto.subtle.importKey(\"jwk\", JSON.parse(s), { name: \"ECDH\", namedCurve: \"P-256\" }, true, []);\n}\n\nfunction stringToArrayBuffer(s) {\n  const buf = new Uint8Array(s.length);\n\n  for (let i = 0; i < s.length; i++) {\n    buf[i] = s.charCodeAt(i);\n  }\n\n  return buf;\n}\n\nfunction arrayBufferToString(b) {\n  const buf = new Uint8Array(b);\n  let s = \"\";\n\n  for (let i = 0; i < buf.byteLength; i++) {\n    s += String.fromCharCode(buf[i]);\n  }\n\n  return s;\n}\n\n// This allows a single object to be passed encrypted from a receiver in a req -> response flow\n\n// Requestor generates a public key and private key, and should send the public key to receiver.\nexport async function generateKeys() {\n  const keyPair = await crypto.subtle.generateKey({ name: \"ECDH\", namedCurve: \"P-256\" }, true, [\"deriveKey\"]);\n  const publicKeyString = await publicKeyToString(keyPair.publicKey);\n  return { publicKeyString, privateKey: keyPair.privateKey };\n}\n\n// Receiver takes the public key from requestor and passes obj to get a response public key and the encrypted data to return.\nexport async function generatePublicKeyAndEncryptedObject(incomingPublicKeyString, obj) {\n  const iv = new Uint8Array(16);\n  const incomingPublicKey = await stringToPublicKey(incomingPublicKeyString);\n  const keyPair = await crypto.subtle.generateKey({ name: \"ECDH\", namedCurve: \"P-256\" }, true, [\"deriveKey\"]);\n  const publicKeyString = await publicKeyToString(keyPair.publicKey);\n  const secret = await deriveKey(keyPair.privateKey, incomingPublicKey);\n\n  const encryptedData = btoa(\n    arrayBufferToString(\n      await crypto.subtle.encrypt({ name: \"AES-CBC\", iv }, secret, stringToArrayBuffer(JSON.stringify(obj)))\n    )\n  );\n\n  return { publicKeyString, encryptedData };\n}\n\n// Requestor then takes the receiver's public key, the private key (returned from generateKeys()), and the data from the receiver.\nexport async function decryptObject(publicKeyString, privateKey, base64value) {\n  const iv = new Uint8Array(16);\n  const publicKey = await stringToPublicKey(publicKeyString);\n  const secret = await deriveKey(privateKey, publicKey);\n  const ciphertext = stringToArrayBuffer(atob(base64value));\n  const data = await crypto.subtle.decrypt({ name: \"AES-CBC\", iv }, secret, ciphertext);\n  return JSON.parse(arrayBufferToString(data));\n}\n","import { generatePublicKeyAndEncryptedObject, generateKeys, decryptObject } from \"./crypto\";\n\nconst LINK_ACTION_TIMEOUT = 10000;\n\nexport default class LinkChannel {\n  constructor(store) {\n    this.store = store;\n  }\n\n  setSocket = socket => {\n    this.socket = socket;\n  };\n\n  // Returns a promise that, when resolved, will forward an object with three keys:\n  //\n  // code: The code that was made available to use for link.\n  //\n  // cancel: A function that the caller can call to cancel the use of the code.\n  //\n  // onFinished: A promise that, when resolved, indicates the code is no longer usable,\n  // because it was either successfully used by the remote device or it has expired\n  // (\"used\" or \"expired\" is passed to the callback).\n  generateCode = () => {\n    return new Promise(resolve => {\n      const onFinished = new Promise(finished => {\n        const step = () => {\n          const getLetter = () => \"ABCDEFGHI\"[Math.floor(Math.random() * 9)];\n          const code = `${getLetter()}${getLetter()}${getLetter()}${getLetter()}`;\n\n          // Only respond to one link_request in this channel.\n          let readyToSend = false;\n          let leftChannel = false;\n\n          const channel = this.socket.channel(`link:${code}`, { timeout: LINK_ACTION_TIMEOUT });\n\n          const leave = () => {\n            if (!leftChannel) channel.leave();\n            leftChannel = true;\n          };\n\n          const cancel = () => leave();\n\n          channel.on(\"link_expired\", () => finished(\"expired\"));\n\n          channel.on(\"presence_state\", state => {\n            if (readyToSend) return;\n\n            if (Object.keys(state).length > 0) {\n              // Code is in use by someone else, try a new one\n              step();\n            } else {\n              readyToSend = true;\n              resolve({ code, cancel, onFinished });\n            }\n          });\n\n          channel.on(\"link_request\", incoming => {\n            if (readyToSend) {\n              const data = { path: location.pathname };\n\n              // Copy profile data to link'ed device if it's been set.\n              if (this.store.state.activity.hasChangedName) {\n                data.profile = { ...this.store.state.profile };\n              }\n              data.credentials = { ...this.store.state.credentials };\n\n              generatePublicKeyAndEncryptedObject(incoming.public_key, data).then(\n                ({ publicKeyString, encryptedData }) => {\n                  const payload = {\n                    target_session_id: incoming.reply_to_session_id,\n                    public_key: publicKeyString,\n                    data: encryptedData\n                  };\n\n                  if (!leftChannel) {\n                    channel.push(\"link_response\", payload);\n                  }\n\n                  leave();\n\n                  finished(\"used\");\n                  readyToSend = false;\n                }\n              );\n            }\n          });\n\n          channel.join().receive(\"error\", r => console.error(r));\n        };\n\n        step();\n      });\n    });\n  };\n\n  // Attempts to receive a link payload from a remote device using the given code.\n  //\n  // Promise rejects if the code is invalid or there is a problem with the channel.\n  // Promise resolves and passes payload of link source on successful link.\n  attemptLink = code => {\n    return new Promise((resolve, reject) => {\n      const channel = this.socket.channel(`link:${code}`, { timeout: LINK_ACTION_TIMEOUT });\n      let finished = false;\n\n      generateKeys().then(({ publicKeyString, privateKey }) => {\n        channel.on(\"presence_state\", state => {\n          const numOccupants = Object.keys(state).length;\n\n          if (numOccupants === 1) {\n            // Great, only sender is in topic, request link\n            channel.push(\"link_request\", {\n              reply_to_session_id: this.socket.params().session_id,\n              public_key: publicKeyString\n            });\n\n            setTimeout(() => {\n              if (finished) return;\n              channel.leave();\n              reject(new Error(\"no_response\"));\n            }, LINK_ACTION_TIMEOUT);\n          } else if (numOccupants === 0) {\n            // Nobody in this channel, probably a bad code.\n            channel.leave();\n            reject(new Error(\"failed\"));\n          } else {\n            console.warn(\"link code channel already has 2 or more occupants, something fishy is going on.\");\n            channel.leave();\n            reject(new Error(\"in_use\"));\n          }\n        });\n\n        channel.on(\"link_response\", payload => {\n          finished = true;\n          channel.leave();\n\n          decryptObject(payload.public_key, privateKey, payload.data).then(resolve);\n        });\n\n        channel\n          .join()\n          .receive(\"ok\", data => (this.socket.params().session_id = data.session_id))\n          .receive(\"error\", r => console.error(r));\n      });\n    });\n  };\n}\n","import { avatars } from \"../assets/avatars/avatars.js\";\n\nconst names = [\n  \"Baers-Pochard\",\n  \"Baikal-Teal\",\n  \"Barrows-Goldeneye\",\n  \"Blue-Billed\",\n  \"Blue-Duck\",\n  \"Blue-Winged\",\n  \"Brown-Teal\",\n  \"Bufflehead\",\n  \"Canvasback\",\n  \"Cape-Shoveler\",\n  \"Chestnut-Teal\",\n  \"Chiloe-Wigeon\",\n  \"Cinnamon-Teal\",\n  \"Comb-Duck\",\n  \"Common-Eider\",\n  \"Common-Goldeneye\",\n  \"Common-Merganser\",\n  \"Common-Pochard\",\n  \"Common-Scoter\",\n  \"Common-Shelduck\",\n  \"Cotton-Pygmy\",\n  \"Crested-Duck\",\n  \"Crested-Shelduck\",\n  \"Eatons-Pintail\",\n  \"Falcated\",\n  \"Ferruginous\",\n  \"Freckled-Duck\",\n  \"Gadwall\",\n  \"Garganey\",\n  \"Greater-Scaup\",\n  \"Green-Pygmy\",\n  \"Grey-Teal\",\n  \"Hardhead\",\n  \"Harlequin\",\n  \"Hartlaubs\",\n  \"Hooded-Merganser\",\n  \"Hottentot-Teal\",\n  \"Kelp-Goose\",\n  \"King-Eider\",\n  \"Lake-Duck\",\n  \"Laysan-Duck\",\n  \"Lesser-Scaup\",\n  \"Long-Tailed\",\n  \"Maccoa-Duck\",\n  \"Mallard\",\n  \"Mandarin\",\n  \"Marbled-Teal\",\n  \"Mellers-Duck\",\n  \"Merganser\",\n  \"Northern-Pintail\",\n  \"Orinoco-Goose\",\n  \"Paradise-Shelduck\",\n  \"Plumed-Whistler\",\n  \"Puna-Teal\",\n  \"Pygmy-Goose\",\n  \"Radjah-Shelduck\",\n  \"Red-Billed\",\n  \"Red-Crested\",\n  \"Red-Shoveler\",\n  \"Ring-Necked\",\n  \"Ringed-Teal\",\n  \"Rosy-Billed\",\n  \"Ruddy-Shelduck\",\n  \"Salvadoris-Teal\",\n  \"Scaly-Sided\",\n  \"Shelduck\",\n  \"Shoveler\",\n  \"Silver-Teal\",\n  \"Smew\",\n  \"Spectacled-Eider\",\n  \"Spot-Billed\",\n  \"Spotted-Whistler\",\n  \"Steamerduck\",\n  \"Stellers-Eider\",\n  \"Sunda-Teal\",\n  \"Surf-Scoter\",\n  \"Tufted-Duck\",\n  \"Velvet-Scoter\",\n  \"Wandering-Whistler\",\n  \"Whistling-duck\",\n  \"White-Backed\",\n  \"White-Cheeked\",\n  \"White-Winged\",\n  \"Wigeon\",\n  \"Wood-Duck\",\n  \"Yellow-Billed\"\n];\n\nfunction selectRandom(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nexport function generateRandomName() {\n  return `${selectRandom(names)}-${Math.floor(10000 + Math.random() * 10000)}`;\n}\n\nexport const avatarIds = avatars.map(av => av.id);\n\nexport function generateDefaultProfile() {\n  return {\n    avatarId: selectRandom(avatarIds)\n  };\n}\n","import { Validator } from \"jsonschema\";\nimport merge from \"deepmerge\";\nimport Cookies from \"js-cookie\";\nimport jwtDecode from \"jwt-decode\";\n\nconst LOCAL_STORE_KEY = \"___hubs_store\";\nconst STORE_STATE_CACHE_KEY = Symbol();\nconst OAUTH_FLOW_CREDENTIALS_KEY = \"ret-oauth-flow-account-credentials\";\nconst validator = new Validator();\nimport { EventTarget } from \"event-target-shim\";\nimport { generateDefaultProfile, generateRandomName } from \"../utils/identity.js\";\n\n// Durable (via local-storage) schema-enforced state that is meant to be consumed via forward data flow.\n// (Think flux but with way less incidental complexity, at least for now :))\nexport const SCHEMA = {\n  id: \"/HubsStore\",\n\n  definitions: {\n    profile: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        displayName: { type: \"string\", pattern: \"^[A-Za-z0-9-]{3,32}$\" },\n        avatarId: { type: \"string\" },\n        personalAvatarId: { type: \"string\" }\n      }\n    },\n\n    credentials: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        token: { type: [\"null\", \"string\"] },\n        email: { type: [\"null\", \"string\"] }\n      }\n    },\n\n    activity: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        hasFoundFreeze: { type: \"boolean\" },\n        hasChangedName: { type: \"boolean\" },\n        hasAcceptedProfile: { type: \"boolean\" },\n        lastEnteredAt: { type: \"string\" },\n        hasPinned: { type: \"boolean\" },\n        hasRotated: { type: \"boolean\" },\n        hasRecentered: { type: \"boolean\" },\n        hasScaled: { type: \"boolean\" },\n        hasHoveredInWorldHud: { type: \"boolean\" },\n        hasOpenedShare: { type: \"boolean\" }\n      }\n    },\n\n    settings: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        lastUsedMicDeviceId: { type: \"string\" }\n      }\n    },\n\n    // Legacy\n    confirmedDiscordRooms: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n\n    confirmedBroadcastedRooms: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n\n    uploadPromotionTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          fileId: { type: \"string\" },\n          promotionToken: { type: \"string\" }\n        }\n      }\n    },\n\n    creatorAssignmentTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          creatorAssignmentToken: { type: \"string\" }\n        }\n      }\n    },\n\n    embedTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          embedToken: { type: \"string\" }\n        }\n      }\n    }\n  },\n\n  type: \"object\",\n\n  properties: {\n    profile: { $ref: \"#/definitions/profile\" },\n    credentials: { $ref: \"#/definitions/credentials\" },\n    activity: { $ref: \"#/definitions/activity\" },\n    settings: { $ref: \"#/definitions/settings\" },\n    confirmedDiscordRooms: { $ref: \"#/definitions/confirmedDiscordRooms\" }, // Legacy\n    confirmedBroadcastedRooms: { $ref: \"#/definitions/confirmedBroadcastedRooms\" },\n    uploadPromotionTokens: { $ref: \"#/definitions/uploadPromotionTokens\" },\n    creatorAssignmentTokens: { $ref: \"#/definitions/creatorAssignmentTokens\" },\n    embedTokens: { $ref: \"#/definitions/embedTokens\" }\n  },\n\n  additionalProperties: false\n};\n\nexport default class Store extends EventTarget {\n  constructor() {\n    super();\n\n    if (localStorage.getItem(LOCAL_STORE_KEY) === null) {\n      localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify({}));\n    }\n\n    // When storage is updated in another window\n    window.addEventListener(\"storage\", e => {\n      if (e.key !== LOCAL_STORE_KEY) return;\n      delete this[STORE_STATE_CACHE_KEY];\n      this.dispatchEvent(new CustomEvent(\"statechanged\"));\n    });\n\n    this.update({\n      activity: {},\n      settings: {},\n      credentials: {},\n      profile: {},\n      confirmedDiscordRooms: [],\n      confirmedBroadcastedRooms: [],\n      uploadPromotionTokens: [],\n      creatorAssignmentTokens: [],\n      embedTokens: []\n    });\n\n    const oauthFlowCredentials = Cookies.getJSON(OAUTH_FLOW_CREDENTIALS_KEY);\n    if (oauthFlowCredentials) {\n      this.update({ credentials: oauthFlowCredentials });\n      this.resetToRandomLegacyAvatar();\n      Cookies.remove(OAUTH_FLOW_CREDENTIALS_KEY);\n    }\n  }\n\n  // Initializes store with any default bits\n  init = () => {\n    this.update({\n      profile: { ...generateDefaultProfile(), ...(this.state.profile || {}) }\n    });\n\n    // Regenerate name to encourage users to change it.\n    if (!this.state.activity.hasChangedName) {\n      this.update({ profile: { displayName: generateRandomName() } });\n    }\n  };\n\n  resetToRandomLegacyAvatar = () => {\n    this.update({\n      profile: { ...(this.state.profile || {}), ...generateDefaultProfile() }\n    });\n  };\n\n  get state() {\n    if (!this.hasOwnProperty(STORE_STATE_CACHE_KEY)) {\n      this[STORE_STATE_CACHE_KEY] = JSON.parse(localStorage.getItem(LOCAL_STORE_KEY));\n    }\n\n    return this[STORE_STATE_CACHE_KEY];\n  }\n\n  get credentialsAccountId() {\n    if (this.state.credentials.token) {\n      return jwtDecode(this.state.credentials.token).sub;\n    } else {\n      return null;\n    }\n  }\n\n  resetConfirmedBroadcastedRooms() {\n    // merge causing us some annoyance here :(\n    const overwriteMerge = (destinationArray, sourceArray) => sourceArray;\n    this.update({ confirmedBroadcastedRooms: [] }, { arrayMerge: overwriteMerge });\n  }\n\n  resetTipActivityFlags() {\n    this.update({ activity: { hasRotated: false, hasPinned: false, hasRecentered: false, hasScaled: false } });\n  }\n\n  update(newState, mergeOpts) {\n    const finalState = merge(this.state, newState, mergeOpts);\n    const { valid } = validator.validate(finalState, SCHEMA);\n\n    if (!valid) {\n      // Intentionally not including details about the state or validation result here, since we don't want to leak\n      // sensitive data in the error message.\n      throw new Error(`Write to store failed schema validation.`);\n    }\n\n    localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify(finalState));\n    delete this[STORE_STATE_CACHE_KEY];\n\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    return finalState;\n  }\n}\n","import { objectTypeForOriginAndContentType } from \"../object-types\";\nimport { getReticulumFetchUrl } from \"./phoenix-utils\";\nimport mediaHighlightFrag from \"./media-highlight-frag.glsl\";\nimport { mapMaterials } from \"./material-utils\";\n\nconst mediaAPIEndpoint = getReticulumFetchUrl(\"/api/v1/media\");\n\nconst resolveUrlCache = new Map();\nexport const resolveUrl = async (url, index) => {\n  const cacheKey = `${url}|${index}`;\n  if (resolveUrlCache.has(cacheKey)) return resolveUrlCache.get(cacheKey);\n  const resolved = await fetch(mediaAPIEndpoint, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ media: { url, index } })\n  }).then(r => r.json());\n  resolveUrlCache.set(cacheKey, resolved);\n  return resolved;\n};\n\nexport const upload = file => {\n  const formData = new FormData();\n  formData.append(\"media\", file);\n  formData.append(\"promotion_mode\", \"with_token\");\n  return fetch(mediaAPIEndpoint, {\n    method: \"POST\",\n    body: formData\n  }).then(r => r.json());\n};\n\n// https://stackoverflow.com/questions/7584794/accessing-jpeg-exif-rotation-data-in-javascript-on-the-client-side/32490603#32490603\nfunction getOrientation(file, callback) {\n  const reader = new FileReader();\n  reader.onload = function(e) {\n    const view = new DataView(e.target.result);\n    if (view.getUint16(0, false) != 0xffd8) {\n      return callback(-2);\n    }\n    const length = view.byteLength;\n    let offset = 2;\n    while (offset < length) {\n      if (view.getUint16(offset + 2, false) <= 8) return callback(-1);\n      const marker = view.getUint16(offset, false);\n      offset += 2;\n      if (marker == 0xffe1) {\n        if (view.getUint32((offset += 2), false) != 0x45786966) {\n          return callback(-1);\n        }\n\n        const little = view.getUint16((offset += 6), false) == 0x4949;\n        offset += view.getUint32(offset + 4, little);\n        const tags = view.getUint16(offset, little);\n        offset += 2;\n        for (let i = 0; i < tags; i++) {\n          if (view.getUint16(offset + i * 12, little) == 0x0112) {\n            return callback(view.getUint16(offset + i * 12 + 8, little));\n          }\n        }\n      } else if ((marker & 0xff00) != 0xff00) {\n        break;\n      } else {\n        offset += view.getUint16(offset, false);\n      }\n    }\n    return callback(-1);\n  };\n  reader.readAsArrayBuffer(file);\n}\n\nlet interactableId = 0;\nexport const addMedia = (src, template, contentOrigin, resolve = false, resize = false, animate = true) => {\n  const scene = AFRAME.scenes[0];\n\n  const entity = document.createElement(\"a-entity\");\n  entity.id = \"interactable-media-\" + interactableId++;\n  entity.setAttribute(\"networked\", { template: template });\n  const needsToBeUploaded = src instanceof File;\n  entity.setAttribute(\"media-loader\", {\n    resize,\n    resolve,\n    animate,\n    src: typeof src === \"string\" ? src : \"\",\n    fileIsOwned: !needsToBeUploaded\n  });\n\n  entity.object3D.matrixNeedsUpdate = true;\n\n  scene.appendChild(entity);\n\n  const fireLoadingTimeout = setTimeout(() => {\n    scene.emit(\"media-loading\", { src: src });\n  }, 100);\n\n  [\"model-loaded\", \"video-loaded\", \"image-loaded\"].forEach(eventName => {\n    entity.addEventListener(\n      eventName,\n      async () => {\n        clearTimeout(fireLoadingTimeout);\n        scene.emit(\"media-loaded\", { src: src });\n      },\n      { once: true }\n    );\n  });\n\n  const orientation = new Promise(function(resolve) {\n    if (needsToBeUploaded) {\n      getOrientation(src, x => {\n        resolve(x);\n      });\n    } else {\n      resolve(1);\n    }\n  });\n  if (needsToBeUploaded) {\n    upload(src)\n      .then(response => {\n        const srcUrl = new URL(response.raw);\n        srcUrl.searchParams.set(\"token\", response.meta.access_token);\n        entity.setAttribute(\"media-loader\", { resolve: false, src: srcUrl.href, fileId: response.file_id });\n        window.APP.store.update({\n          uploadPromotionTokens: [{ fileId: response.file_id, promotionToken: response.meta.promotion_token }]\n        });\n      })\n      .catch(e => {\n        console.error(\"Media upload failed\", e);\n        entity.setAttribute(\"media-loader\", { src: \"error\" });\n      });\n  } else if (src instanceof MediaStream) {\n    entity.setAttribute(\"media-loader\", { src: `hubs://clients/${NAF.clientId}/video` });\n  }\n\n  if (contentOrigin) {\n    entity.addEventListener(\"media_resolved\", ({ detail }) => {\n      const objectType = objectTypeForOriginAndContentType(contentOrigin, detail.contentType, detail.src);\n      scene.emit(\"object_spawned\", { objectType });\n    });\n  }\n\n  return { entity, orientation };\n};\n\nexport function injectCustomShaderChunks(obj) {\n  const vertexRegex = /\\bskinning_vertex\\b/;\n  const fragRegex = /\\bgl_FragColor\\b/;\n  const validMaterials = [\"MeshStandardMaterial\", \"MeshBasicMaterial\", \"MobileStandardMaterial\"];\n\n  const shaderUniforms = [];\n\n  obj.traverse(object => {\n    if (!object.material) return;\n\n    object.material = mapMaterials(object, material => {\n      if (!validMaterials.includes(material.type)) {\n        return material;\n      }\n\n      // HACK, this routine inadvertently leaves the A-Frame shaders wired to the old, dark\n      // material, so maps cannot be updated at runtime. This breaks UI elements who have\n      // hover/toggle state, so for now just skip these while we figure out a more correct\n      // solution.\n      if (object.el.classList.contains(\"ui\")) return material;\n      if (object.el.classList.contains(\"hud\")) return material;\n      if (object.el.getAttribute(\"text-button\")) return material;\n\n      const newMaterial = material.clone();\n      newMaterial.onBeforeCompile = shader => {\n        if (!vertexRegex.test(shader.vertexShader)) return;\n\n        shader.uniforms.hubs_IsFrozen = { value: false };\n        shader.uniforms.hubs_EnableSweepingEffect = { value: false };\n        shader.uniforms.hubs_SweepParams = { value: [0, 0] };\n        shader.uniforms.hubs_InteractorOnePos = { value: [0, 0, 0] };\n        shader.uniforms.hubs_InteractorTwoPos = { value: [0, 0, 0] };\n        shader.uniforms.hubs_HighlightInteractorOne = { value: false };\n        shader.uniforms.hubs_HighlightInteractorTwo = { value: false };\n        shader.uniforms.hubs_Time = { value: 0 };\n\n        const vchunk = `\n        if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\n          vec4 wt = modelMatrix * vec4(transformed, 1);\n\n          // Used in the fragment shader below.\n          hubs_WorldPosition = wt.xyz;\n        }\n      `;\n\n        const vlines = shader.vertexShader.split(\"\\n\");\n        const vindex = vlines.findIndex(line => vertexRegex.test(line));\n        vlines.splice(vindex + 1, 0, vchunk);\n        vlines.unshift(\"varying vec3 hubs_WorldPosition;\");\n        vlines.unshift(\"uniform bool hubs_IsFrozen;\");\n        vlines.unshift(\"uniform bool hubs_HighlightInteractorOne;\");\n        vlines.unshift(\"uniform bool hubs_HighlightInteractorTwo;\");\n        shader.vertexShader = vlines.join(\"\\n\");\n\n        const flines = shader.fragmentShader.split(\"\\n\");\n        const findex = flines.findIndex(line => fragRegex.test(line));\n        flines.splice(findex + 1, 0, mediaHighlightFrag);\n        flines.unshift(\"varying vec3 hubs_WorldPosition;\");\n        flines.unshift(\"uniform bool hubs_IsFrozen;\");\n        flines.unshift(\"uniform bool hubs_EnableSweepingEffect;\");\n        flines.unshift(\"uniform vec2 hubs_SweepParams;\");\n        flines.unshift(\"uniform bool hubs_HighlightInteractorOne;\");\n        flines.unshift(\"uniform vec3 hubs_InteractorOnePos;\");\n        flines.unshift(\"uniform bool hubs_HighlightInteractorTwo;\");\n        flines.unshift(\"uniform vec3 hubs_InteractorTwoPos;\");\n        flines.unshift(\"uniform float hubs_Time;\");\n        shader.fragmentShader = flines.join(\"\\n\");\n\n        shaderUniforms.push(shader.uniforms);\n      };\n      newMaterial.needsUpdate = true;\n      return newMaterial;\n    });\n  });\n\n  return shaderUniforms;\n}\n\nexport function getPromotionTokenForFile(fileId) {\n  return window.APP.store.state.uploadPromotionTokens.find(upload => upload.fileId === fileId);\n}\n\nconst mediaPos = new THREE.Vector3();\n\nexport function spawnMediaAround(el, media, snapCount, mirrorOrientation = false) {\n  const { entity, orientation } = addMedia(media, \"#interactable-media\", undefined, false);\n\n  const pos = el.object3D.position;\n\n  entity.object3D.position.set(pos.x, pos.y, pos.z);\n  entity.object3D.rotation.copy(el.object3D.rotation);\n\n  if (mirrorOrientation) {\n    entity.object3D.rotateY(Math.PI);\n  }\n\n  // Generate photos in a circle around camera, starting from the bottom.\n  // Prevent z-fighting but place behind viewfinder\n  const idx = (snapCount % 6) + 3;\n\n  mediaPos.set(\n    Math.cos(Math.PI * 2 * (idx / 6.0)) * 0.75,\n    Math.sin(Math.PI * 2 * (idx / 6.0)) * 0.75,\n    -0.05 + idx * 0.001\n  );\n\n  el.object3D.localToWorld(mediaPos);\n  entity.object3D.visible = false;\n\n  entity.addEventListener(\n    \"image-loaded\",\n    () => {\n      entity.object3D.visible = true;\n      entity.setAttribute(\"animation__photo_pos\", {\n        property: \"position\",\n        dur: 800,\n        from: { x: pos.x, y: pos.y, z: pos.z },\n        to: { x: mediaPos.x, y: mediaPos.y, z: mediaPos.z },\n        easing: \"easeOutElastic\"\n      });\n    },\n    { once: true }\n  );\n\n  entity.object3D.matrixNeedsUpdate = true;\n\n  entity.addEventListener(\n    \"media_resolved\",\n    () => {\n      el.emit(\"photo_taken\", entity.components[\"media-loader\"].data.src);\n    },\n    { once: true }\n  );\n\n  return { entity, orientation };\n}\n\nconst textureLoader = new THREE.TextureLoader();\ntextureLoader.setCrossOrigin(\"anonymous\");\nexport function createImageTexture(url) {\n  return new Promise((resolve, reject) => {\n    textureLoader.load(\n      url,\n      texture => {\n        texture.encoding = THREE.sRGBEncoding;\n        texture.minFilter = THREE.LinearFilter;\n        resolve(texture);\n      },\n      null,\n      function(xhr) {\n        reject(`'${url}' could not be fetched (Error code: ${xhr.status}; Response: ${xhr.statusText})`);\n      }\n    );\n  });\n}\n","import screenfull from \"screenfull\";\nimport { showFullScreenIfWasFullScreen } from \"./fullscreen\";\nconst { detect } = require(\"detect-browser\");\n\nconst browser = detect();\nlet isExitingFullscreenDueToFocus = false;\n\n// Utility function that handles a bunch of incidental stuff related to text fields:\n//\n// - On non-mobile platforms, selects the value on focus\n// - If full screen, exits/enters full screen because of firefox full screen issues\nexport function handleTextFieldFocus(target) {\n  if (!window.AFRAME) return;\n  const isMobile = AFRAME.utils.device.isMobile();\n\n  if (screenfull.isFullscreen && !AFRAME.utils.device.isMobileVR() && browser.name === \"firefox\") {\n    // This will prevent focus, but its the only way to avoid getting into a\n    // weird \"firefox reports full screen but actually not\". You end up having to tap\n    // twice to ultimately get the focus.\n    //\n    // We need to keep track of a bit here so that we don't re-full screen when\n    // the text box is blurred by the browser.\n\n    isExitingFullscreenDueToFocus = true;\n    screenfull.exit().then(() => {\n      target.focus();\n    });\n  }\n\n  if (!isMobile) target.select();\n}\n\nexport function handleTextFieldBlur() {\n  // This is the incidental blur event when exiting fullscreen mode on mobile\n  if (isExitingFullscreenDueToFocus) {\n    isExitingFullscreenDueToFocus = false;\n    return;\n  }\n\n  showFullScreenIfWasFullScreen();\n}\n","module.exports = __webpack_public_path__ + \"assets/images/mic_denied-5ce12e4dc9b5eb42ce69b753c46c2174.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_denied@2x-127a94ff73b93a0b4ac89682ce836b91.png\";","const tempVector3 = new THREE.Vector3();\nconst tempQuaternion = new THREE.Quaternion();\n\nexport function getLastWorldPosition(src, target) {\n  src.updateMatrices();\n  target.setFromMatrixPosition(src.matrixWorld);\n  return target;\n}\n\nexport function getLastWorldQuaternion(src, target) {\n  src.updateMatrices();\n  src.matrixWorld.decompose(tempVector3, target, tempVector3);\n  return target;\n}\n\nexport function getLastWorldScale(src, target) {\n  src.updateMatrices();\n  src.matrixWorld.decompose(tempVector3, tempQuaternion, target);\n  return target;\n}\n\nexport function disposeMaterial(mtrl) {\n  if (mtrl.map) mtrl.map.dispose();\n  if (mtrl.lightMap) mtrl.lightMap.dispose();\n  if (mtrl.bumpMap) mtrl.bumpMap.dispose();\n  if (mtrl.normalMap) mtrl.normalMap.dispose();\n  if (mtrl.specularMap) mtrl.specularMap.dispose();\n  if (mtrl.envMap) mtrl.envMap.dispose();\n  mtrl.dispose();\n}\n\nexport function disposeNode(node) {\n  if (!(node instanceof THREE.Mesh)) return;\n\n  if (node.geometry) {\n    node.geometry.dispose();\n  }\n\n  if (node.material) {\n    let materialArray;\n    if (node.material instanceof THREE.MeshFaceMaterial || node.material instanceof THREE.MultiMaterial) {\n      materialArray = node.material.materials;\n    } else if (node.material instanceof Array) {\n      materialArray = node.material;\n    }\n    if (materialArray) {\n      materialArray.forEach(disposeMaterial);\n    } else {\n      disposeMaterial(node.material);\n    }\n  }\n}\n\nexport function setMatrixWorld(object3D, m) {\n  object3D.matrixWorld.copy(m);\n  object3D.matrix = object3D.matrix.getInverse(object3D.parent.matrixWorld).multiply(object3D.matrixWorld);\n  object3D.matrix.decompose(object3D.position, object3D.quaternion, object3D.scale);\n}\n","export function forEachMaterial(object3D, fn) {\n  if (!object3D.material) return;\n\n  if (Array.isArray(object3D.material)) {\n    object3D.material.forEach(fn);\n  } else {\n    fn(object3D.material);\n  }\n}\n\nexport function mapMaterials(object3D, fn) {\n  if (!object3D.material) return;\n\n  if (Array.isArray(object3D.material)) {\n    return object3D.material.map(fn);\n  } else {\n    return fn(object3D.material);\n  }\n}\n","export const avatars = [\n  {\n    id: \"botdefault\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotDefault_Avatar-9f71f8ff22.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botdefault-thumb-42C4C7D3C01D085EAFDAC8BACE591CE6.png\"\n  },\n  {\n    id: \"botbobo\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotBobo_Avatar-f9740a010b.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botbobo-thumb-261278FD5831E9CD89610D15948F23E4.png\"\n  },\n  {\n    id: \"botdom\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotDom_Avatar-0c48bf15a5.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botdom-thumb-1160EB5E81D24F12CE643C520CE1E99E.png\"\n  },\n  {\n    id: \"botgreg\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotGreg_Avatar-98d39797bb.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botgreg-thumb-F2A37F14F9C342EE44DDE9B24DD9B9FC.png\"\n  },\n  {\n    id: \"botguest\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotGuest_Avatar-78cd857332.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botguest-thumb-F7A471250E2C10C2709325C3B02A8BBB.png\"\n  },\n  {\n    id: \"botjim\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotJim_Avatar-d28005a687.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botjim-thumb-A2D195C1A51A082BCED58BD172481B39.png\"\n  },\n  {\n    id: \"botkev\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotKev_Avatar-a95787bb51.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botkev-thumb-90746A7349E3F964C913EA612EE9A53F.png\"\n  },\n  {\n    id: \"botpinky\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotPinky_Avatar-b0b93f8675.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botpinky-thumb-C2E69D4479077766B988DC3EE4F30BE5.png\"\n  },\n  {\n    id: \"botrobert\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotRobert_Avatar-e9554880f3.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botrobert-thumb-9C33F2C752326E2CF4321EAA7BDB4E47.png\"\n  },\n  {\n    id: \"botwoody\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotWoody_Avatar-0140485a23.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botwoody-thumb-F1F1FA7E21301B5AC1D8872B4ED0CC56.png\"\n  }\n];\n","import Raven from \"raven-js\";\n\nconst ga = window.ga;\n\nexport default function registerTelemetry(trackedPage, trackedTitle) {\n  const sentryDsn = process.env.SENTRY_DSN;\n  const gaTrackingId = process.env.GA_TRACKING_ID;\n\n  if (sentryDsn) {\n    console.log(\"Tracking: Sentry DSN: \" + sentryDsn);\n    Raven.config(sentryDsn).install();\n  }\n\n  if (ga && gaTrackingId) {\n    console.log(\"Tracking: Google Analytics ID: \" + gaTrackingId);\n\n    ga(\"create\", gaTrackingId, \"auto\");\n\n    if (trackedPage) {\n      ga(\"set\", \"page\", trackedPage);\n    }\n\n    if (trackedTitle) {\n      ga(\"set\", \"title\", trackedTitle);\n    }\n\n    ga(\"send\", \"pageview\");\n  }\n}\n","import qsTruthy from \"./qs_truthy\";\n\nconst showLog = qsTruthy(\"debug_log\");\n\nif (showLog) {\n  const template = document.createElement(\"template\");\n  template.innerHTML = `\n    <style>\n      #debug-log {\n        position: absolute;\n        top: 13em;\n        background: white;\n        opacity: 0.7;\n        z-index: 1000;\n      }\n      #debug-log, #debug-log-input {\n        font-family: monospace;\n        font-size: 11px;\n        width: 100%;\n      }\n\n      #debug-log-controls {\n        display: flex;\n        padding: 0.2em;\n      }\n\n      #debug-log-eval {\n        display: flex;\n        flex: 1;\n      }\n\n      #debug-log-log {\n        overflow: auto;\n        height: 30vh;\n      }\n      #debug-log-log.minimized {\n        height: auto;\n      }\n      #debug-log-log.minimized .entry {\n        display: none;\n      }\n      #debug-log-log.minimized .entry:last-child {\n        display: block;\n      }\n      #debug-log-log .entry {\n        border: 1px solid grey;\n        margin: 0.2em;\n        padding: 0.2em;\n      }\n      #debug-log-log .entry.error { background-color: pink; }\n      #debug-log-log .entry.warn { background-color: orange; }\n    </style>\n    <div id=\"debug-log\">\n        <div id=\"debug-log-controls\">\n          <form id=\"debug-log-eval\">\n            <input id=\"debug-log-input\" placeholder=\"&gt;&gt;\" autocorrect=\"off\" autocapitalize=\"none\" />\n            <button>&gt;</button>\n          </form>\n          <button id=\"debug-log-minimize\">_</button>\n        </div>\n        <div id=\"debug-log-log\"></div>\n    </div>\n  `;\n\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    document.body.appendChild(template.content);\n  });\n\n  const debugLog = template.content.querySelector(\"#debug-log-log\");\n  debugLog.addEventListener(\"wheel\", e => e.stopPropagation());\n\n  const debugLogInput = template.content.querySelector(\"#debug-log-input\");\n  const debugLogEval = template.content.querySelector(\"#debug-log-eval\");\n  debugLogEval.onsubmit = e => {\n    e.preventDefault();\n    console.log(eval(`(${debugLogInput.value})`));\n  };\n\n  let minimized = false;\n  const debugLogMinimize = template.content.querySelector(\"#debug-log-minimize\");\n  debugLogMinimize.onclick = () => {\n    minimized = !minimized;\n    debugLog.className = minimized ? \"minimized\" : \"\";\n    debugLog.scrollTop = debugLog.scrollHeight - debugLog.clientHeight;\n  };\n\n  const origConsoleLog = console.log;\n  const origConsoleError = console.error;\n  const origConsoleWarn = console.warn;\n\n  const log = function(className, objs) {\n    let entry;\n    if (debugLog.childNodes.length > 1000) {\n      entry = debugLog.firstChild;\n    } else {\n      entry = document.createElement(\"div\");\n      entry.classList.add(\"entry\");\n    }\n    entry.classList.remove(\"warn\", \"error\");\n    entry.classList.add(className);\n\n    const arr = Array.from(objs);\n    const firstObj = arr[0];\n    let content;\n    if (typeof firstObj === \"string\" && firstObj.includes(\"%c\")) {\n      content = firstObj.replace(/%c/g, \"\");\n    } else if (firstObj instanceof Error) {\n      content = `${firstObj.message}\\n${firstObj.stack}`;\n    } else {\n      content = arr\n        .map(obj => {\n          if (typeof obj === \"string\") return obj;\n          return JSON.stringify(obj);\n        })\n        .join(\" \");\n    }\n\n    const time = new Date().toISOString().substring(11, 23);\n    entry.textContent = `[${time}] ${content}`;\n\n    const shouldScroll = debugLog.scrollTop === debugLog.scrollHeight - debugLog.clientHeight;\n    debugLog.append(entry);\n    if (shouldScroll) debugLog.scrollTop = debugLog.scrollHeight - debugLog.clientHeight;\n  };\n\n  console.warn = function() {\n    origConsoleWarn.apply(null, arguments);\n    log(\"warn\", arguments);\n  };\n\n  console.error = function() {\n    origConsoleError.apply(null, arguments);\n    log(\"error\", arguments);\n  };\n\n  console.log = function() {\n    origConsoleLog.apply(null, arguments);\n    log(\"log\", arguments);\n  };\n\n  window.onunhandledrejection = e => log(\"error\", [e.reason.message, e.reason.code, e.reason.name]);\n  window.onerror = e => log(\"error\", [e]);\n}\n","const zeroPos = new THREE.Vector3(0, 0, 0);\nconst zeroQuat = new THREE.Quaternion();\nconst oneScale = new THREE.Vector3(1, 1, 1);\nconst identity = new THREE.Matrix4();\nidentity.identity();\n\n// Patch animation system\nconst bindingSetters = THREE.PropertyBinding.prototype.SetterByBindingTypeAndVersioning;\nconst Versioning = THREE.PropertyBinding.prototype.Versioning;\n\n// For all binding types, monkey patch the setters that require world matrix\n// updates to also flip matrixNeedsUpdate\nfor (let i = 0; i < bindingSetters.length; i++) {\n  const setter = bindingSetters[i][Versioning.MatrixWorldNeedsUpdate];\n  if (!setter) continue;\n\n  bindingSetters[i][Versioning.MatrixWorldNeedsUpdate] = function() {\n    const v = setter.apply(this, arguments);\n    this.targetObject.matrixNeedsUpdate = true;\n    return v;\n  };\n}\n\nTHREE.Object3D.prototype.getWorldPosition = function(target) {\n  if (target === undefined) {\n    console.warn(\"THREE.Object3D: .getWorldPosition() target is now required\");\n    target = new THREE.Vector3();\n  }\n\n  // New function, defined below (used instead of updateMatrixWorld)\n  this.updateMatrices();\n\n  return target.setFromMatrixPosition(this.matrixWorld);\n};\n\nTHREE.Object3D.prototype.getWorldQuaternion = (function() {\n  const position = new THREE.Vector3();\n  const scale = new THREE.Vector3();\n\n  return function getWorldQuaternion(target) {\n    if (target === undefined) {\n      console.warn(\"THREE.Object3D: .getWorldQuaternion() target is now required\");\n      target = new THREE.Quaternion();\n    }\n\n    // New function, defined below (used instead of updateMatrixWorld)\n    this.updateMatrices();\n    this.matrixWorld.decompose(position, target, scale);\n\n    return target;\n  };\n})();\n\nTHREE.Object3D.getWorldScale = (function() {\n  const position = new THREE.Vector3();\n  const quaternion = new THREE.Quaternion();\n\n  return function getWorldScale(target) {\n    if (target === undefined) {\n      console.warn(\"THREE.Object3D: .getWorldScale() target is now required\");\n      target = new THREE.Vector3();\n    }\n\n    // New function, defined below (used instead of updateMatrixWorld)\n    this.updateMatrices();\n    this.matrixWorld.decompose(position, quaternion, target);\n\n    return target;\n  };\n})();\n\nconst handleMatrixModification = o => {\n  if (!o.matrixIsModified) {\n    o.matrixIsModified = true;\n\n    if (o.cachedMatrixWorld) {\n      o.cachedMatrixWorld.copy(o.matrixWorld);\n      o.matrixWorld = o.cachedMatrixWorld;\n    }\n  }\n};\n\nconst updateMatrix = THREE.Object3D.prototype.updateMatrix;\nTHREE.Object3D.prototype.updateMatrix = function() {\n  updateMatrix.apply(this, arguments);\n  handleMatrixModification(this);\n};\n\nconst applyMatrix = THREE.Object3D.prototype.applyMatrix;\nTHREE.Object3D.prototype.applyMatrix = function() {\n  applyMatrix.apply(this, arguments);\n  handleMatrixModification(this);\n};\n\n// By the end of this function this.matrix reflects the updated local matrix\n// and this.matrixWorld reflects the updated world matrix, taking into account\n// parent matrices.\n//\n// forceLocalUpdate - Forces the local matrix to be updated regardless of if it has not\n// been marked dirty.\n//\n// forceWorldUpdate - Forces the world matrix to be updated regardless of if the local matrix\n// has been updated since the last update.\n//\n// skipParents - unless true, all parent matricies are updated before updating this object's\n// local and world matrix.\n//\nTHREE.Object3D.prototype.updateMatrices = function(forceLocalUpdate, forceWorldUpdate, skipParents) {\n  if (!this.hasHadFirstMatrixUpdate) {\n    if (\n      !this.position.equals(zeroPos) ||\n      !this.quaternion.equals(zeroQuat) ||\n      !this.scale.equals(oneScale) ||\n      !this.matrix.equals(identity)\n    ) {\n      // Only update the matrix the first time if its non-identity, this way\n      // this.matrixIsModified will remain false until the default\n      // identity matrix is updated.\n      this.updateMatrix();\n    }\n\n    this.hasHadFirstMatrixUpdate = true;\n    this.matrixWorldNeedsUpdate = true;\n    this.cachedMatrixWorld = this.matrixWorld;\n  } else if (this.matrixNeedsUpdate || this.matrixAutoUpdate || forceLocalUpdate) {\n    this.updateMatrix();\n    if (this.matrixNeedsUpdate) this.matrixNeedsUpdate = false;\n  }\n\n  if (!skipParents && this.parent) {\n    this.parent.updateMatrices(false, forceWorldUpdate, false);\n    this.matrixWorldNeedsUpdate = this.matrixWorldNeedsUpdate || this.parent.childrenNeedMatrixWorldUpdate;\n  }\n\n  if (this.matrixWorldNeedsUpdate || forceWorldUpdate) {\n    if (this.parent === null) {\n      this.matrixWorld.copy(this.matrix);\n    } else {\n      // If the matrix is unmodified, it is the identity matrix,\n      // and hence we can use the parent's world matrix directly.\n      //\n      // Note this assumes all callers will either not pass skipParents=true\n      // *or* will update the parent themselves beforehand as is done in\n      // updateMatrixWorld.\n      if (!this.matrixIsModified) {\n        this.matrixWorld = this.parent.matrixWorld;\n      } else {\n        // Once matrixIsModified === true, this.matrixWorld has been updated to be a local\n        // copy, not a reference to this.parent.matrixWorld (see updateMatrix/applyMatrix)\n        this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix);\n      }\n    }\n\n    this.childrenNeedMatrixWorldUpdate = true;\n    this.matrixWorldNeedsUpdate = false;\n  }\n};\n\n// Computes this object's matrices and then the recursively computes the matrices of all the children.\n//\n// forceWorldUpdate - If true and the object is visible, will force the world matrix to be updated for\n// this node and all of its children.\n//\n// includeInvisible - If true, does not ignore non-visible objects.\nTHREE.Object3D.prototype.updateMatrixWorld = function(forceWorldUpdate, includeInvisible) {\n  if (!this.visible && !includeInvisible) return;\n\n  // Do not recurse upwards, since this is recursing downwards\n  this.updateMatrices(false, forceWorldUpdate, true);\n\n  const children = this.children;\n  const forceChildrenWorldUpdate = this.childrenNeedMatrixWorldUpdate || forceWorldUpdate;\n\n  for (let i = 0, l = children.length; i < l; i++) {\n    children[i].updateMatrixWorld(forceChildrenWorldUpdate, includeInvisible);\n  }\n\n  if (this.childrenNeedMatrixWorldUpdate) this.childrenNeedMatrixWorldUpdate = false;\n};\n\n// Updates this function to use updateMatrices() to avoid extra matrix computations\nTHREE.Object3D.prototype.lookAt = (function() {\n  // This method does not support objects having non-uniformly-scaled parent(s)\n\n  const q1 = new THREE.Quaternion();\n  const m1 = new THREE.Matrix4();\n  const target = new THREE.Vector3();\n  const position = new THREE.Vector3();\n\n  return function lookAt(x, y, z) {\n    if (x.isVector3) {\n      target.copy(x);\n    } else {\n      target.set(x, y, z);\n    }\n\n    const parent = this.parent;\n\n    this.updateMatrices(); // hubs change\n\n    position.setFromMatrixPosition(this.matrixWorld);\n\n    if (this.isCamera || this.isLight) {\n      m1.lookAt(position, target, this.up);\n    } else {\n      m1.lookAt(target, position, this.up);\n    }\n\n    this.quaternion.setFromRotationMatrix(m1);\n\n    if (parent) {\n      m1.extractRotation(parent.matrixWorld);\n      q1.setFromRotationMatrix(m1);\n      this.quaternion.premultiply(q1.inverse());\n    }\n  };\n})();\n","/* eslint-disable */\n\n// Modified version of A-Frame's animation component to set matrixNeedsUpdate = true in the\n// scenario where the transform changes on an object during an animation.\n//\n// Changes are identified w comment // hubs\n//\n// Bugfix added 3/1/19 - If an animation component is removed before its delay setting, then\n// it erroneously restarts.\n\nvar anime = require(\"animejs\").default;\nvar components = AFRAME.components; // hubs\nvar registerComponent = AFRAME.registerComponent; // hubs\n//var THREE = require('../lib/three'); // hubs\nvar utils = AFRAME.utils; // hubs\n\ndelete AFRAME.components.animation; // hubs\n\nvar colorHelperFrom = new THREE.Color();\nvar colorHelperTo = new THREE.Color();\n\nvar getComponentProperty = utils.entity.getComponentProperty;\nvar setComponentProperty = utils.entity.setComponentProperty;\nvar splitCache = {};\n\nvar TYPE_COLOR = \"color\";\nvar PROP_POSITION = \"position\";\nvar PROP_ROTATION = \"rotation\";\nvar PROP_SCALE = \"scale\";\nvar STRING_COMPONENTS = \"components\";\nvar STRING_OBJECT3D = \"object3D\";\n\n/**\n * Animation component for A-Frame using anime.js.\n *\n * The component manually controls the tick by setting `autoplay: false` on anime.js and\n * manually * calling `animation.tick()` in the tick handler. To pause or resume, we toggle a\n * boolean * flag * `isAnimationPlaying`.\n *\n * anime.js animation config for tweenining Javascript objects and values works as:\n *\n *  config = {\n *    targets: {foo: 0.0, bar: '#000'},\n *    foo: 1.0,\n *    bar: '#FFF'\n *  }\n *\n * The above will tween each property in `targets`. The `to` values are set in the root of\n * the config.\n *\n * @member {object} animation - anime.js instance.\n * @member {boolean} animationIsPlaying - Control if animation is playing.\n */\nmodule.exports.Component = registerComponent(\"animation\", {\n  schema: {\n    autoplay: { default: true },\n    delay: { default: 0 },\n    dir: { default: \"\" },\n    dur: { default: 1000 },\n    easing: { default: \"easeInQuad\" },\n    elasticity: { default: 400 },\n    enabled: { default: true },\n    from: { default: \"\" },\n    loop: {\n      default: 0,\n      parse: function(value) {\n        // Boolean or integer.\n        if (value === true || value === \"true\") {\n          return true;\n        }\n        if (value === false || value === \"false\") {\n          return false;\n        }\n        return parseInt(value, 10);\n      }\n    },\n    property: { default: \"\" },\n    startEvents: { type: \"array\" },\n    pauseEvents: { type: \"array\" },\n    resumeEvents: { type: \"array\" },\n    round: { default: false },\n    to: { default: \"\" },\n    type: { default: \"\" },\n    isRawProperty: { default: false }\n  },\n\n  multiple: true,\n\n  init: function() {\n    var self = this;\n\n    this.eventDetail = { name: this.attrName };\n    this.time = 0;\n\n    this.animation = null;\n    this.animationIsPlaying = false;\n    this.onStartEvent = this.onStartEvent.bind(this);\n    this.beginAnimation = this.beginAnimation.bind(this);\n    this.pauseAnimation = this.pauseAnimation.bind(this);\n    this.resumeAnimation = this.resumeAnimation.bind(this);\n\n    this.fromColor = {};\n    this.toColor = {};\n    this.targets = {};\n    this.targetsArray = [];\n\n    this.updateConfigForDefault = this.updateConfigForDefault.bind(this);\n    this.updateConfigForRawColor = this.updateConfigForRawColor.bind(this);\n\n    this.config = {\n      complete: function() {\n        self.animationIsPlaying = false;\n        self.el.emit(\"animationcomplete\", self.eventDetail, false);\n        if (self.id) {\n          self.el.emit(\"animationcomplete__\" + self.id, self.eventDetail, false);\n        }\n      }\n    };\n  },\n\n  update: function(oldData) {\n    var config = this.config;\n    var data = this.data;\n\n    this.animationIsPlaying = false;\n\n    if (!this.data.enabled) {\n      return;\n    }\n\n    if (!data.property) {\n      return;\n    }\n\n    // Base config.\n    config.autoplay = false;\n    config.direction = data.dir;\n    config.duration = data.dur;\n    config.easing = data.easing;\n    config.elasticity = data.elasticity;\n    config.loop = data.loop;\n    config.round = data.round;\n\n    // Start new animation.\n    this.createAndStartAnimation();\n  },\n\n  tick: function(t, dt) {\n    if (!this.animationIsPlaying) {\n      return;\n    }\n    this.time += dt;\n    this.animation.tick(this.time);\n  },\n\n  remove: function() {\n    this.pauseAnimation();\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n  },\n\n  pause: function() {\n    this.paused = true;\n    this.pausedWasPlaying = this.animationIsPlaying;\n    this.pauseAnimation();\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n  },\n\n  /**\n   * `play` handler only for resuming scene.\n   */\n  play: function() {\n    if (!this.paused) {\n      return;\n    }\n    this.paused = false;\n    this.addEventListeners();\n    if (this.pausedWasPlaying) {\n      this.resumeAnimation();\n      this.pausedWasPlaying = false;\n    }\n  },\n\n  /**\n   * Start animation from scratch.\n   */\n  createAndStartAnimation: function() {\n    var data = this.data;\n\n    this.updateConfig();\n    this.animationIsPlaying = false;\n    this.animation = anime(this.config);\n\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n    this.addEventListeners();\n\n    // Wait for start events for animation.\n    if (!data.autoplay || (data.startEvents && data.startEvents.length)) {\n      return;\n    }\n\n    // Delay animation.\n    if (data.delay) {\n      // hubs\n      this.delayTimeout = setTimeout(this.beginAnimation, data.delay);\n      return;\n    }\n\n    // Play animation.\n    this.beginAnimation();\n  },\n\n  /**\n   * This is before animation start (including from startEvents).\n   * Set to initial state (config.from, time = 0, seekTime = 0).\n   */\n  beginAnimation: function() {\n    this.updateConfig();\n    this.time = 0;\n    this.animationIsPlaying = true;\n    this.stopRelatedAnimations();\n    this.el.emit(\"animationbegin\", this.eventDetail, false);\n  },\n\n  pauseAnimation: function() {\n    this.animationIsPlaying = false;\n  },\n\n  resumeAnimation: function() {\n    this.animationIsPlaying = true;\n  },\n\n  /**\n   * startEvents callback.\n   */\n  onStartEvent: function() {\n    if (!this.data.enabled) {\n      return;\n    }\n\n    this.updateConfig();\n    if (this.animation) {\n      this.animation.pause();\n    }\n    this.animation = anime(this.config);\n\n    // Include the delay before each start event.\n    if (this.data.delay) {\n      setTimeout(this.beginAnimation, this.data.delay);\n      return;\n    }\n    this.beginAnimation();\n  },\n\n  /**\n   * rawProperty: true and type: color;\n   */\n  updateConfigForRawColor: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var from;\n    var key;\n    var to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForRawColor)) {\n      return;\n    }\n\n    from = data.from === \"\" ? getRawProperty(el, data.property) : data.from;\n    to = data.to;\n\n    // Use r/g/b vector for color type.\n    this.setColorConfig(from, to);\n    from = this.fromColor;\n    to = this.toColor;\n\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) {\n      config[key] = to[key];\n    }\n\n    config.update = (function() {\n      var lastValue = {};\n      return function(anim) {\n        var value;\n        value = anim.animatables[0].target;\n        // For animation timeline.\n        if (value.r === lastValue.r && value.g === lastValue.g && value.b === lastValue.b) {\n          return;\n        }\n\n        setRawProperty(el, data.property, value, data.type);\n      };\n    })();\n  },\n\n  /**\n   * Stuff property into generic `property` key.\n   */\n  updateConfigForDefault: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var from;\n    var isBoolean;\n    var isNumber;\n    var to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForDefault)) {\n      return;\n    }\n\n    if (data.from === \"\") {\n      // Infer from.\n      from = isRawProperty(data) ? getRawProperty(el, data.property) : getComponentProperty(el, data.property);\n    } else {\n      // Explicit from.\n      from = data.from;\n    }\n\n    to = data.to;\n\n    isNumber = !isNaN(from || to);\n    if (isNumber) {\n      from = parseFloat(from);\n      to = parseFloat(to);\n    } else {\n      from = from ? from.toString() : from;\n      to = to ? to.toString() : to;\n    }\n\n    // Convert booleans to integer to allow boolean flipping.\n    isBoolean = data.to === \"true\" || data.to === \"false\" || data.to === true || data.to === false;\n    if (isBoolean) {\n      from = data.from === \"true\" || data.from === true ? 1 : 0;\n      to = data.to === \"true\" || data.to === true ? 1 : 0;\n    }\n\n    this.targets.aframeProperty = from;\n    config.targets = this.targets;\n    config.aframeProperty = to;\n    config.update = (function() {\n      var lastValue;\n\n      return function(anim) {\n        var value;\n        value = anim.animatables[0].target.aframeProperty;\n\n        // Need to do a last value check for animation timeline since all the tweening\n        // begins simultaenously even if the value has not changed. Also better for perf\n        // anyways.\n        if (value === lastValue) {\n          return;\n        }\n        lastValue = value;\n\n        if (isBoolean) {\n          value = value >= 1;\n        }\n\n        if (isRawProperty(data)) {\n          setRawProperty(el, data.property, value, data.type);\n        } else {\n          setComponentProperty(el, data.property, value);\n        }\n      };\n    })();\n  },\n\n  /**\n   * Extend x/y/z/w onto the config.\n   * Update vector by modifying object3D.\n   */\n  updateConfigForVector: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var key;\n    var from;\n    var to;\n\n    // Parse coordinates.\n    from =\n      data.from !== \"\"\n        ? utils.coordinates.parse(data.from) // If data.from defined, use that.\n        : getComponentProperty(el, data.property); // If data.from not defined, get on the fly.\n    to = utils.coordinates.parse(data.to);\n\n    if (data.property === PROP_ROTATION) {\n      toRadians(from);\n      toRadians(to);\n    }\n\n    // Set to and from.\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) {\n      config[key] = to[key];\n    }\n\n    // If animating object3D transformation, run more optimized updater.\n    if (data.property === PROP_POSITION || data.property === PROP_ROTATION || data.property === PROP_SCALE) {\n      config.update = (function() {\n        var lastValue = {};\n        return function(anim) {\n          var value = anim.animatables[0].target;\n\n          if (data.property === PROP_SCALE) {\n            value.x = Math.max(0.0001, value.x);\n            value.y = Math.max(0.0001, value.y);\n            value.z = Math.max(0.0001, value.z);\n          }\n\n          // For animation timeline.\n          if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n            return;\n          }\n\n          lastValue.x = value.x;\n          lastValue.y = value.y;\n          lastValue.z = value.z;\n\n          el.object3D[data.property].set(value.x, value.y, value.z);\n          el.object3D.matrixNeedsUpdate = true; // hubs\n        };\n      })();\n      return;\n    }\n\n    // Animating some vector.\n    config.update = (function() {\n      var lastValue = {};\n      return function(anim) {\n        var value = anim.animations[0].target;\n\n        // Animate rotation through radians.\n        // For animation timeline.\n        if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n          return;\n        }\n        lastValue.x = value.x;\n        lastValue.y = value.y;\n        lastValue.z = value.z;\n        setComponentProperty(el, data.property, value);\n      };\n    })();\n  },\n\n  /**\n   * Update the config before each run.\n   */\n  updateConfig: function() {\n    var propType;\n\n    // Route config type.\n    propType = getPropertyType(this.el, this.data.property);\n    if (isRawProperty(this.data) && this.data.type === TYPE_COLOR) {\n      this.updateConfigForRawColor();\n    } else if (propType === \"vec2\" || propType === \"vec3\" || propType === \"vec4\") {\n      this.updateConfigForVector();\n    } else {\n      this.updateConfigForDefault();\n    }\n  },\n\n  /**\n   * Wait for component to initialize.\n   */\n  waitComponentInitRawProperty: function(cb) {\n    var componentName;\n    var data = this.data;\n    var el = this.el;\n    var self = this;\n\n    if (data.from !== \"\") {\n      return false;\n    }\n\n    if (!data.property.startsWith(STRING_COMPONENTS)) {\n      return false;\n    }\n\n    componentName = splitDot(data.property)[1];\n    if (el.components[componentName]) {\n      return false;\n    }\n\n    el.addEventListener(\"componentinitialized\", function wait(evt) {\n      if (evt.detail.name !== componentName) {\n        return;\n      }\n      cb();\n      // Since the config was created async, create the animation now since we missed it\n      // earlier.\n      self.animation = anime(self.config);\n      el.removeEventListener(\"componentinitialized\", wait);\n    });\n    return true;\n  },\n\n  /**\n   * Make sure two animations on the same property don't fight each other.\n   * e.g., animation__mouseenter=\"property: material.opacity\"\n   *       animation__mouseleave=\"property: material.opacity\"\n   */\n  stopRelatedAnimations: function() {\n    var component;\n    var componentName;\n    for (componentName in this.el.components) {\n      component = this.el.components[componentName];\n      if (componentName === this.attrName) {\n        continue;\n      }\n      if (component.name !== \"animation\") {\n        continue;\n      }\n      if (!component.animationIsPlaying) {\n        continue;\n      }\n      if (component.data.property !== this.data.property) {\n        continue;\n      }\n      component.animationIsPlaying = false;\n    }\n  },\n\n  addEventListeners: function() {\n    var data = this.data;\n    var el = this.el;\n    addEventListeners(el, data.startEvents, this.onStartEvent);\n    addEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    addEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  removeEventListeners: function() {\n    var data = this.data;\n    var el = this.el;\n    removeEventListeners(el, data.startEvents, this.onStartEvent);\n    removeEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    removeEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  // hubs\n  cancelDelayedStart: function() {\n    if (this.delayTimeout) {\n      clearTimeout(this.delayTimeout);\n      this.delayTimeout = null;\n    }\n  },\n\n  setColorConfig: function(from, to) {\n    colorHelperFrom.set(from);\n    colorHelperTo.set(to);\n    from = this.fromColor;\n    to = this.toColor;\n    from.r = colorHelperFrom.r;\n    from.g = colorHelperFrom.g;\n    from.b = colorHelperFrom.b;\n    to.r = colorHelperTo.r;\n    to.g = colorHelperTo.g;\n    to.b = colorHelperTo.b;\n  }\n});\n\n/**\n * Given property name, check schema to see what type we are animating.\n * We just care whether the property is a vector.\n */\nfunction getPropertyType(el, property) {\n  var component;\n  var componentName;\n  var split;\n  var propertyName;\n\n  split = property.split(\".\");\n  componentName = split[0];\n  propertyName = split[1];\n  component = el.components[componentName] || components[componentName];\n\n  // Primitives.\n  if (!component) {\n    return null;\n  }\n\n  // Dynamic schema. We only care about vectors anyways.\n  if (propertyName && !component.schema[propertyName]) {\n    return null;\n  }\n\n  // Multi-prop.\n  if (propertyName) {\n    return component.schema[propertyName].type;\n  }\n\n  // Single-prop.\n  return component.schema.type;\n}\n\n/**\n * Convert object to radians.\n */\nfunction toRadians(obj) {\n  obj.x = THREE.Math.degToRad(obj.x);\n  obj.y = THREE.Math.degToRad(obj.y);\n  obj.z = THREE.Math.degToRad(obj.z);\n}\n\nfunction addEventListeners(el, eventNames, handler) {\n  var i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.addEventListener(eventNames[i], handler);\n  }\n}\n\nfunction removeEventListeners(el, eventNames, handler) {\n  var i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.removeEventListener(eventNames[i], handler);\n  }\n}\n\nfunction getRawProperty(el, path) {\n  var i;\n  var split;\n  var value;\n  split = splitDot(path);\n  value = el;\n  for (i = 0; i < split.length; i++) {\n    value = value[split[i]];\n  }\n  return value;\n}\n\nfunction setRawProperty(el, path, value, type) {\n  var i;\n  var split;\n  var propertyName;\n  var targetValue;\n\n  if (path.startsWith(\"object3D.rotation\")) {\n    value = THREE.Math.degToRad(value);\n  }\n\n  // Walk.\n  split = splitDot(path);\n  targetValue = el;\n  for (i = 0; i < split.length - 1; i++) {\n    targetValue = targetValue[split[i]];\n  }\n  propertyName = split[split.length - 1];\n\n  // Raw color.\n  if (type === TYPE_COLOR) {\n    if (\"r\" in targetValue[propertyName]) {\n      targetValue[propertyName].r = value.r;\n      targetValue[propertyName].g = value.g;\n      targetValue[propertyName].b = value.b;\n    } else {\n      targetValue[propertyName].x = value.r;\n      targetValue[propertyName].y = value.g;\n      targetValue[propertyName].z = value.b;\n    }\n    return;\n  }\n\n  targetValue[propertyName] = value;\n}\n\nfunction splitDot(path) {\n  if (path in splitCache) {\n    return splitCache[path];\n  }\n  splitCache[path] = path.split(\".\");\n  return splitCache[path];\n}\n\nfunction isRawProperty(data) {\n  return data.isRawProperty || data.property.startsWith(STRING_COMPONENTS) || data.property.startsWith(STRING_OBJECT3D);\n}\n","AFRAME.registerComponent(\"ambient-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.AmbientLight();\n    this.el.setObject3D(\"ambient-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n    this.rendererSystem = this.el.sceneEl.systems.renderer;\n  },\n\n  update(prevData) {\n    if (this.data.color !== prevData.color) {\n      this.light.color.set(this.data.color);\n      this.rendererSystem.applyColorCorrection(this.light.color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      this.light.intensity = this.data.intensity;\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"ambient-light\");\n  }\n});\n","/**\n * Instantiates and updates a THREE.AnimationMixer on an entity.\n * @component animation-mixer\n */\nAFRAME.registerComponent(\"animation-mixer\", {\n  initMixer(animations) {\n    this.mixer = new THREE.AnimationMixer(this.el.object3D);\n    this.el.object3D.animations = animations;\n    this.animations = animations;\n  },\n\n  tick: function(t, dt) {\n    if (this.mixer) {\n      this.mixer.update(dt / 1000);\n    }\n  }\n});\n","// This computation is expensive, so we run on at most one avatar per frame, including quiet avatars.\n// However if we detect an avatar is seen speaking (its volume is above DISABLE_AT_VOLUME_THRESHOLD)\n// then we continue analysis for at least DISABLE_GRACE_PERIOD_MS and disable doing it every frame if\n// the avatar is quiet during that entire duration (eg they are muted)\nconst DISABLE_AT_VOLUME_THRESHOLD = 0.00001;\nconst DISABLE_GRACE_PERIOD_MS = 10000;\n\n/**\n * Emits audioFrequencyChange events based on a networked audio source\n * @namespace avatar\n * @component networked-audio-analyser\n */\nAFRAME.registerComponent(\"networked-audio-analyser\", {\n  async init() {\n    this.volume = 0;\n    this.prevVolume = 0;\n    this.smoothing = 0.3;\n    this.threshold = 0.01;\n    this._updateAnalysis = this._updateAnalysis.bind(this);\n    this._runScheduledWork = this._runScheduledWork.bind(this);\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._updateAnalysis, \"audio-analyser\");\n    this.el.addEventListener(\"sound-source-set\", event => {\n      const ctx = THREE.AudioContext.getContext();\n      this.analyser = ctx.createAnalyser();\n      this.analyser.fftSize = 32;\n      this.levels = new Uint8Array(this.analyser.frequencyBinCount);\n      event.detail.soundSource.connect(this.analyser);\n    });\n  },\n\n  remove: function() {\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._runScheduledWork, \"audio-analyser\");\n  },\n\n  tick: function(t) {\n    if (!this.avatarIsQuiet) {\n      this._updateAnalysis(t);\n    }\n  },\n\n  _runScheduledWork: function() {\n    if (this.avatarIsQuiet) {\n      this._updateAnalysis();\n    }\n  },\n\n  // Updates the analysis/volume. If t is passed, that implies this is called via tick\n  // and so as a performance optimization will check to see if it's been at least DISABLE_GRACE_PERIOD_MS\n  // since the last volume was seen above DISABLE_AT_VOLUME_THRESHOLD, and if so, will disable\n  // tick updates until the volume exceeds the level again.\n  _updateAnalysis: function(t) {\n    if (!this.analyser) return;\n\n    // take care with compatibility, e.g. safari doesn't support getFloatTimeDomainData\n    this.analyser.getByteTimeDomainData(this.levels);\n\n    let sum = 0;\n    for (let i = 0; i < this.levels.length; i++) {\n      const amplitude = (this.levels[i] - 128) / 128;\n      sum += amplitude * amplitude;\n    }\n    let currVolume = Math.sqrt(sum / this.levels.length);\n    if (currVolume < this.threshold) {\n      currVolume = 0;\n    }\n    this.volume = this.smoothing * currVolume + (1 - this.smoothing) * this.prevVolume;\n    this.prevVolume = this.volume;\n\n    if (this.volume < DISABLE_AT_VOLUME_THRESHOLD) {\n      if (t && this.lastSeenVolume && this.lastSeenVolume < t - DISABLE_GRACE_PERIOD_MS) {\n        this.avatarIsQuiet = true;\n      }\n    } else {\n      if (t) {\n        this.lastSeenVolume = t;\n      }\n\n      this.avatarIsQuiet = false;\n    }\n  }\n});\n\n/**\n * Sets an entity's scale base on audioFrequencyChange events.\n * @namespace avatar\n * @component scale-audio-feedback\n */\nAFRAME.registerComponent(\"scale-audio-feedback\", {\n  schema: {\n    minScale: { default: 1 },\n    maxScale: { default: 2 }\n  },\n\n  init() {\n    this._playerCamera = document.getElementById(\"player-camera\").object3D;\n    this._playerCameraWorldPosition = new THREE.Vector3();\n    this._worldPosition = new THREE.Vector3();\n  },\n\n  tick() {\n    // TODO: come up with a cleaner way to handle this.\n    // bone's are \"hidden\" by scaling them with bone-visibility, without this we would overwrite that.\n    if (!this.el.object3D.visible) return;\n\n    const { minScale, maxScale } = this.data;\n\n    const audioAnalyser = this.el.components[\"networked-audio-analyser\"];\n\n    if (!audioAnalyser) return;\n\n    const { object3D } = this.el;\n\n    this._playerCameraWorldPosition.setFromMatrixPosition(this._playerCamera.matrixWorld);\n    this._worldPosition.setFromMatrixPosition(object3D.matrixWorld);\n    const distance = this._worldPosition.distanceTo(this._playerCameraWorldPosition) / 10;\n\n    const scale = Math.min(maxScale, minScale + (maxScale - minScale) * audioAnalyser.volume * 8 * distance);\n\n    object3D.scale.setScalar(scale);\n    object3D.matrixNeedsUpdate = true;\n  }\n});\n","/**\n * Sets the CSS class on an entity.\n * @component css-class\n */\nAFRAME.registerComponent(\"css-class\", {\n  schema: {\n    type: \"string\"\n  },\n  multiple: true,\n  init() {\n    this.el.classList.add(this.data);\n  },\n  update(oldData) {\n    if (this.data !== oldData) {\n      this.el.classList.remove(oldData);\n      this.el.classList.add(this.data);\n    }\n  },\n  remove() {\n    this.el.classList.remove(this.data);\n  }\n});\n","/* global CANNON */\n/**\n * Floats a duck based on its scale.\n * @component duck\n */\nAFRAME.registerComponent(\"duck\", {\n  schema: {\n    initialForce: { default: 0 },\n    maxForce: { default: 6.5 },\n    maxScale: { default: 5 }\n  },\n\n  init: function() {\n    this.physicsSystem = this.el.sceneEl.systems.physics;\n    this.hasBody = false;\n    this.position = new CANNON.Vec3();\n    this.force = new CANNON.Vec3(0, this.data.initialForce, 0);\n    this.initialScale = this.el.object3D.scale.x;\n    this.maxScale = this.data.maxScale * this.initialScale;\n  },\n\n  play: function() {\n    this.physicsSystem.addComponent(this);\n  },\n\n  pause: function() {\n    this.physicsSystem.removeComponent(this);\n  },\n\n  beforeStep: function() {\n    if (this.el.body && NAF.utils.isMine(this.el)) {\n      const currentScale = this.el.object3D.scale.x;\n      const ratio = Math.min(1, (currentScale - this.initialScale) / (this.maxScale - this.initialScale));\n      const force = ratio * this.data.maxForce;\n      if (force > 0) {\n        const angle = Math.random() * Math.PI * 2;\n        const x = Math.cos(angle);\n        const z = Math.sin(angle);\n        this.force.set(x, force, z);\n        this.position.set(x * 0.01, 0, z * 0.01);\n        this.el.object3D.matrixNeedsUpdate = true;\n        this.el.body.applyForce(this.force, this.position);\n      }\n    }\n  }\n});\n","/* global CANNON */\nAFRAME.registerComponent(\"heightfield\", {\n  init() {\n    this.el.addEventListener(\"componentinitialized\", e => {\n      if (e.detail.name === \"static-body\") {\n        this.generateAndAddHeightfield(this.el.components[\"static-body\"]);\n      }\n    });\n    this.el.setAttribute(\"static-body\", { shape: \"none\", mass: 0 });\n  },\n  generateAndAddHeightfield(body) {\n    const { offset, distance, data } = this.data;\n\n    const orientation = new CANNON.Quaternion();\n    orientation.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), -Math.PI / 2);\n\n    const rotation = new CANNON.Quaternion();\n    rotation.setFromAxisAngle(new CANNON.Vec3(0, 1, 0), -Math.PI / 2);\n    rotation.mult(orientation, orientation);\n\n    const cannonOffset = new CANNON.Vec3(offset.x, offset.y, offset.z);\n\n    const shape = new CANNON.Heightfield(data, { elementSize: distance });\n\n    body.addShape(shape, cannonOffset, orientation);\n  }\n});\n","AFRAME.registerComponent(\"hemisphere-light\", {\n  schema: {\n    skyColor: { type: \"color\" },\n    groundColor: { type: \"color\" },\n    intensity: { default: 1.0 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.HemisphereLight();\n    this.light.position.set(0, 0, 0);\n    this.light.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"hemisphere-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n  },\n\n  update(prevData) {\n    if (this.data.skyColor !== prevData.skyColor) {\n      this.light.color.set(this.data.skyColor);\n    }\n\n    if (this.data.groundColor !== prevData.groundColor) {\n      this.light.groundColor.set(this.data.groundColor);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      this.light.intensity = this.data.intensity;\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"hemisphere-light\");\n  }\n});\n","/**\n * Hides entities based on the scene's quality mode\n * @namespace environment\n * @component hide-when-quality\n */\nAFRAME.registerComponent(\"hide-when-quality\", {\n  schema: { type: \"string\", default: \"low\" },\n\n  init() {\n    this.onQualityChanged = this.onQualityChanged.bind(this);\n    this.el.sceneEl.addEventListener(\"quality-changed\", this.onQualityChanged);\n  },\n\n  onQualityChanged(event) {\n    this.updateComponentState(event.detail);\n  },\n\n  update(oldData) {\n    if (this.data !== oldData) {\n      this.updateComponentState(window.APP.quality);\n    }\n  },\n\n  updateComponentState(quality) {\n    this.el.setAttribute(\"visible\", quality !== this.data);\n  }\n});\n","AFRAME.registerComponent(\"point-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    range: { default: 0 },\n    decay: { default: 2 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.PointLight();\n    this.light.shadow.camera.matrixAutoUpdate = true;\n    this.el.setObject3D(\"point-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n    this.rendererSystem = this.el.sceneEl.systems.renderer;\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      const color = new THREE.Color(this.data.color);\n      this.rendererSystem.applyColorCorrection(color);\n      light.color.copy(color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.range !== prevData.range) {\n      light.distance = this.data.range;\n    }\n\n    if (this.data.decay !== prevData.decay) {\n      light.decay = this.data.decay;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"point-light\");\n  }\n});\n","AFRAME.registerComponent(\"spot-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    range: { default: 0 },\n    decay: { default: 2 },\n    innerConeAngle: { default: 0 },\n    outerConeAngle: { default: Math.PI / 4.0 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.SpotLight();\n    this.light.position.set(0, 0, 0);\n    this.light.target.position.set(0, 0, 1);\n    this.light.add(this.light.target);\n    this.light.matrixNeedsUpdate = true;\n    this.light.target.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"spot-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      light.color.set(this.data.color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.range !== prevData.range) {\n      light.distance = this.data.range;\n    }\n\n    if (this.data.decay !== prevData.decay) {\n      light.decay = this.data.decay;\n    }\n\n    if (this.data.innerConeAngle !== prevData.innerConeAngle || this.data.outerConeAngle !== prevData.outerConeAngle) {\n      light.angle = this.data.outerConeAngle;\n      light.penumbra = 1.0 - this.data.innerConeAngle / this.data.outerConeAngle;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"spot-light\");\n  }\n});\n","/* global AFRAME */\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nAFRAME.registerComponent(\"floaty-object\", {\n  schema: {\n    // Make the object locked/kinematic upon load\n    autoLockOnLoad: { default: false },\n\n    // Make the object kinematic immediately upon release\n    autoLockOnRelease: { default: false },\n\n    // On release, modify the gravity based upon gravitySpeedLimit. If less than this, let the object float\n    // otherwise apply releaseGravity.\n    modifyGravityOnRelease: { default: false },\n\n    // Gravity to apply if object is thrown at a speed greated than speed limit.\n    releaseGravity: { default: -2 },\n\n    // If true, the degree to which angular rotation is allowed when floating is reduced (useful for 2d media)\n    reduceAngularFloat: { default: false },\n\n    // Velocity speed limit under which gravity will not be added if modifyGravityOnRelease is true\n    gravitySpeedLimit: { default: 1.85 } // Set to 0 to never apply gravity\n  },\n\n  init() {\n    this.onGrab = this.onGrab.bind(this);\n    this.onRelease = this.onRelease.bind(this);\n  },\n\n  tick() {\n    if (!this.ammoBody) {\n      this.ammoBody = this.el.components[\"ammo-body\"];\n    }\n\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const isHeld = interaction.isHeld(this.el);\n    if (isHeld && !this.wasHeld) {\n      this.onGrab();\n    }\n    if (this.wasHeld && !isHeld) {\n      this.onRelease();\n    }\n\n    if (!isHeld && this._makeStaticWhenAtRest) {\n      const isMine = this.el.components.networked && NAF.utils.isMine(this.el);\n      const linearThreshold = this.ammoBody.data.linearSleepingThreshold;\n      const angularThreshold = this.ammoBody.data.angularSleepingThreshold;\n      const isAtRest =\n        this.ammoBody.body.getLinearVelocity().length2() < linearThreshold * linearThreshold &&\n        this.ammoBody.body.getAngularVelocity().length2() < angularThreshold * angularThreshold;\n\n      if (isAtRest && isMine) {\n        this.el.setAttribute(\"ammo-body\", { type: \"static\" });\n      }\n\n      if (isAtRest || !isMine) {\n        this._makeStaticWhenAtRest = false;\n      }\n    }\n\n    this.wasHeld = isHeld;\n  },\n\n  play() {\n    // We do this in play instead of in init because otherwise NAF.utils.isMine fails\n    if (this.hasBeenHereBefore) return;\n    this.hasBeenHereBefore = true;\n    if (this.el.body) {\n      this._onBodyLoaded();\n    } else {\n      this._onBodyLoaded = this._onBodyLoaded.bind(this);\n      this.el.addEventListener(\"body-loaded\", this._onBodyLoaded, { once: true });\n    }\n  },\n\n  setLocked(locked) {\n    if (this.el.components.networked && !NAF.utils.isMine(this.el)) return;\n\n    this.locked = locked;\n    this.el.setAttribute(\"ammo-body\", { type: locked ? \"kinematic\" : \"dynamic\" });\n  },\n\n  _onBodyLoaded() {\n    if (this.data.autoLockOnLoad) {\n      this.setLocked(true);\n    }\n  },\n\n  onRelease() {\n    if (this.data.modifyGravityOnRelease) {\n      if (\n        this.data.gravitySpeedLimit === 0 ||\n        this.ammoBody.getVelocity().length2() < this.data.gravitySpeedLimit * this.data.gravitySpeedLimit\n      ) {\n        this.el.setAttribute(\"ammo-body\", {\n          gravity: { x: 0, y: 0, z: 0 },\n          angularDamping: this.data.reduceAngularFloat ? 0.98 : 0.5,\n          linearDamping: 0.95,\n          linearSleepingThreshold: 0.1,\n          angularSleepingThreshold: 0.1,\n          collisionFilterMask: COLLISION_LAYERS.HANDS\n        });\n\n        this._makeStaticWhenAtRest = true;\n      } else {\n        this.el.setAttribute(\"ammo-body\", {\n          gravity: { x: 0, y: this.data.releaseGravity, z: 0 },\n          angularDamping: 0.01,\n          linearDamping: 0.01,\n          linearSleepingThreshold: 1.6,\n          angularSleepingThreshold: 2.5,\n          collisionFilterMask: COLLISION_LAYERS.DEFAULT_INTERACTABLE\n        });\n      }\n    } else {\n      this.el.setAttribute(\"ammo-body\", { collisionFilterMask: COLLISION_LAYERS.DEFAULT_INTERACTABLE });\n    }\n\n    if (this.data.autoLockOnRelease) {\n      this.setLocked(true);\n    }\n  },\n\n  onGrab() {\n    this.el.setAttribute(\"ammo-body\", {\n      collisionFilterMask: COLLISION_LAYERS.HANDS\n    });\n    this.setLocked(false);\n  },\n\n  remove() {\n    this.el.removeEventListener(\"body-loaded\", this._onBodyLoaded);\n    if (this.stuckTo) {\n      const stuckTo = this.stuckTo;\n      delete this.stuckTo;\n      stuckTo._unstickObject();\n    }\n  }\n});\n","const sizeVec = new THREE.Vector3();\nconst boundingBoxWorldPositionVec = new THREE.Vector3();\nconst colliderWorldPositionVec = new THREE.Vector3();\n\nAFRAME.registerComponent(\"trigger-volume\", {\n  schema: {\n    colliders: { type: \"selectorAll\" },\n    size: { type: \"vec3\", default: { x: 1, y: 1, z: 1 } },\n    target: { type: \"selector\" },\n    enterComponent: { type: \"string\" },\n    enterProperty: { type: \"string\" },\n    enterValue: {\n      default: \"\",\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    },\n    leaveComponent: { type: \"string\" },\n    leaveProperty: { type: \"string\" },\n    leaveValue: {\n      default: \"\",\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n  init() {\n    this.boundingBox = new THREE.Box3();\n    this.collidingLastFrame = {};\n  },\n  update() {\n    this.el.object3D.getWorldPosition(boundingBoxWorldPositionVec);\n    sizeVec.copy(this.data.size);\n    this.boundingBox.setFromCenterAndSize(boundingBoxWorldPositionVec, sizeVec);\n  },\n  tick() {\n    const colliders = this.data.colliders;\n\n    for (let i = 0; i < colliders.length; i++) {\n      const collider = colliders[i];\n      const object3D = collider.object3D;\n\n      object3D.getWorldPosition(colliderWorldPositionVec);\n      const isColliding = this.boundingBox.containsPoint(colliderWorldPositionVec);\n      const collidingLastFrame = this.collidingLastFrame[object3D.id];\n\n      if (isColliding && !collidingLastFrame) {\n        this.data.target.setAttribute(this.data.enterComponent, this.data.enterProperty, this.data.enterValue);\n      } else if (!isColliding && collidingLastFrame) {\n        this.data.target.setAttribute(this.data.leaveComponent, this.data.leaveProperty, this.data.leaveValue);\n      }\n\n      this.collidingLastFrame[object3D.id] = isColliding;\n    }\n  }\n});\n","// HACK: Setting videoPaused on media-video doesn't work if you are the owner.\n// This component gets around that by calling .togglePlaying() to play/pause the video based on a property change.\nAFRAME.registerComponent(\"video-pause-state\", {\n  schema: {\n    paused: { default: false }\n  },\n\n  init() {\n    this.onPauseStateChange = this.onPauseStateChange.bind(this);\n    this.videoComponent = this.el.components[\"media-video\"];\n\n    if (this.videoComponent) {\n      this.onVideoLoaded();\n    } else {\n      this.onVideoLoaded = this.onVideoLoaded.bind(this);\n      this.el.addEventListener(\"video-loaded\", this.onVideoLoaded);\n    }\n  },\n\n  onVideoLoaded() {\n    this.videoComponent = this.el.components[\"media-video\"];\n    this.video = this.videoComponent.video;\n    this.video.addEventListener(\"pause\", this.onPauseStateChange);\n  },\n\n  onPauseStateChange() {\n    this.el.setAttribute(\"paused\", this.video.paused);\n  },\n\n  update() {\n    if (this.video && this.data.paused !== this.video.paused) {\n      this.videoComponent.togglePlaying();\n    }\n  },\n\n  remove() {\n    this.video.removeEventListener(\"pause\", this.onPauseStateChange);\n    this.el.removeEventListener(\"video-loaded\", this.onVideoLoaded);\n  }\n});\n","/**\n * Logs all events dispatched on an entity\n * @namespace debug\n * @component log-events\n */\nAFRAME.registerComponent(\"log-events\", {\n  init: function() {\n    const el = this.el;\n    const log = this.log.bind(this);\n    const origDispatch = this.el.dispatchEvent;\n    this.el.dispatchEvent = function() {\n      log(Array.from(arguments));\n      return origDispatch.apply(el, arguments);\n    };\n  },\n  log: function([e]) {\n    if ([\"componentchanged\"].includes(e.type)) return;\n    let firstObject = true;\n    const replacer = (k, x) => {\n      if (!x) return x;\n      if (typeof x === \"object\" && x.length === undefined) {\n        if (firstObject) {\n          firstObject = false;\n          return x;\n        }\n        return \"[object]\";\n      }\n      return x;\n    };\n    console.info(`log-events: ${this.el.id} ${e.type} ${JSON.stringify(e.detail, replacer)}`);\n  }\n});\n\n/**\n * Logs all life cycle phases on an entity.\n * @namespace debug\n * @component lifecycle-checker\n */\nAFRAME.registerComponent(\"lifecycle-checker\", {\n  schema: {\n    name: { type: \"string\" },\n    tick: { default: false }\n  },\n  init: function() {\n    this.log(\"init\");\n  },\n  update: function() {\n    this.log(\"update\");\n  },\n  tick: function() {\n    if (this.data.tick) {\n      this.log(\"tick\");\n    }\n  },\n  remove: function() {\n    this.log(\"remove\");\n  },\n  pause: function() {\n    this.log(\"pause\");\n  },\n  play: function() {\n    this.log(\"play\");\n  },\n\n  log: function(method) {\n    console.info(`lifecycle-checker:${this.data.name} ${method}`);\n  }\n});\n","const { Pathfinding } = require(\"three-pathfinding\");\n\nAFRAME.registerSystem(\"nav\", {\n  init: function() {\n    this.pathfinder = new Pathfinding();\n  },\n\n  loadMesh: function(mesh, zone) {\n    this.el.object3D.updateMatrixWorld();\n\n    if (this.mesh && this.mesh.geometry && this.mesh.geometry.dispose) {\n      this.mesh.geometry.dispose();\n    }\n\n    this.mesh = mesh;\n    const geometry = new THREE.Geometry().fromBufferGeometry(mesh.geometry);\n    geometry.applyMatrix(mesh.matrixWorld);\n    this.pathfinder.setZoneData(zone, Pathfinding.createZone(geometry));\n    this.el.sceneEl.emit(\"nav-mesh-loaded\");\n  }\n});\n","/**\n * Listens to events from an event source and re-emits them on this entity\n * @component event-repeater\n */\nAFRAME.registerComponent(\"event-repeater\", {\n  schema: {\n    eventSource: { type: \"selector\" },\n    events: { type: \"array\" }\n  },\n\n  play: function() {\n    this.data.eventListeners = [];\n    const events = this.data.events;\n    for (let i = 0; i < events.length; i++) {\n      const event = events[i];\n      this.data.eventListeners[event] = this._handleEvent.bind(this, event);\n      this.data.eventSource.addEventListener(event, this.data.eventListeners[event]);\n    }\n  },\n\n  pause: function() {\n    const events = this.data.events;\n    for (let i = 0; i < events.length; i++) {\n      const event = events[i];\n      this.data.eventSource.removeEventListener(event, this.data.eventListeners[event]);\n    }\n    this.data.eventListeners = [];\n  },\n\n  _handleEvent: function(event, e) {\n    this.el.emit(event, e.detail);\n  }\n});\n","// Enumeration of spawned object content origins. URL means the content is\n// fetched from a URL, FILE means it was an uploaded/dropped file, and\n// CLIPBOARD means it was raw data pasted in from the clipboard, SPAWNER means\n// it was copied over from a spawner.\nexport const ObjectContentOrigins = {\n  URL: 1,\n  FILE: 2,\n  CLIPBOARD: 3,\n  SPAWNER: 4\n};\n\n// Enumeration of spawnable object types, used for telemetry, which encapsulates\n// both the origin of the content for the object and also the type of content\n// contained in the object.\nexport const ObjectTypes = {\n  URL_IMAGE: 0,\n  URL_VIDEO: 1,\n  URL_MODEL: 2,\n  URL_PDF: 3,\n  URL_AUDIO: 4,\n  //URL_TEXT: 5,\n  //URL_TELEPORTER: 6,\n  FILE_IMAGE: 8,\n  FILE_VIDEO: 9,\n  FILE_MODEL: 10,\n  FILE_PDF: 11,\n  FILE_AUDIO: 12,\n  //FILE_TEXT: 13,\n  CLIPBOARD_IMAGE: 16,\n  CLIPBOARD_VIDEO: 17,\n  CLIPBOARD_MODEL: 18,\n  CLIPBOARD_PDF: 19,\n  CLIPBOARD_AUDIO: 20,\n  //CLIPBOARD_TEXT: 21,\n  SPAWNER_IMAGE: 24,\n  SPAWNER_VIDEO: 25,\n  SPAWNER_MODEL: 26,\n  SPAWNER_PDF: 27,\n  SPAWNER_AUDIO: 28,\n  //SPAWNER_TEXT: 29,\n  CAMERA: 30,\n  UNKNOWN: 31\n};\n\n// Given an origin and three object type values for URL, FILE, and CLIPBOARD\n// origins respectively, return the appropriate one\nfunction objectTypeForOrigin(contentOrigin, urlType, fileType, clipboardType, spawnerType) {\n  if (contentOrigin === ObjectContentOrigins.URL) {\n    return urlType;\n  } else if (contentOrigin === ObjectContentOrigins.FILE) {\n    return fileType;\n  } else if (contentOrigin === ObjectContentOrigins.CLIPBOARD) {\n    return clipboardType;\n  } else {\n    return spawnerType;\n  }\n}\n\n// Lookup table of mime-type prefixes to the set of object types that we should use\n// for objects spawned matching their underlying Content-Type.\nconst objectTypeMimePrefixLookupMap = {\n  \"image/\": [ObjectTypes.URL_IMAGE, ObjectTypes.FILE_IMAGE, ObjectTypes.CLIPBOARD_IMAGE, ObjectTypes.SPAWNER_IMAGE],\n  \"model/\": [ObjectTypes.URL_MODEL, ObjectTypes.FILE_MODEL, ObjectTypes.CLIPBOARD_MODEL, ObjectTypes.SPAWNER_MODEL],\n  \"application/x-zip-compressed\": [\n    ObjectTypes.URL_MODEL,\n    ObjectTypes.FILE_MODEL,\n    ObjectTypes.CLIPBOARD_MODEL,\n    ObjectTypes.SPAWNER_MODEL\n  ],\n  \"video/\": [ObjectTypes.URL_VIDEO, ObjectTypes.FILE_VIDEO, ObjectTypes.CLIPBOARD_VIDEO, ObjectTypes.SPAWNER_VIDEO],\n  \"application/vnd.apple.mpegurl\": [\n    ObjectTypes.URL_VIDEO,\n    ObjectTypes.FILE_VIDEO,\n    ObjectTypes.CLIPBOARD_VIDEO,\n    ObjectTypes.SPAWNER_VIDEO\n  ],\n  \"application/x-mpegurl\": [\n    ObjectTypes.URL_VIDEO,\n    ObjectTypes.FILE_VIDEO,\n    ObjectTypes.CLIPBOARD_VIDEO,\n    ObjectTypes.SPAWNER_VIDEO\n  ],\n  \"audio/\": [ObjectTypes.URL_AUDIO, ObjectTypes.FILE_AUDIO, ObjectTypes.CLIPBOARD_AUDIO, ObjectTypes.SPAWNER_AUDIO],\n  \"application/pdf\": [ObjectTypes.URL_PDF, ObjectTypes.FILE_PDF, ObjectTypes.CLIPBOARD_PDF, ObjectTypes.SPAWNER_PDF]\n};\n\nconst srcSuffixLookupMap = {\n  \".m3u8\": [ObjectTypes.URL_VIDEO, ObjectTypes.FILE_VIDEO, ObjectTypes.CLIPBOARD_VIDEO, ObjectTypes.SPAWNER_VIDEO]\n};\n\n// Given an content origin and the resolved mime type of a piece of content, return\n// the ObjectType, if any, for that content.\nexport function objectTypeForOriginAndContentType(contentOrigin, contentType, src) {\n  for (const prefix in objectTypeMimePrefixLookupMap) {\n    if (contentType.toLowerCase().startsWith(prefix)) {\n      const types = objectTypeMimePrefixLookupMap[prefix];\n      return objectTypeForOrigin(contentOrigin, ...types);\n    }\n  }\n\n  if (src) {\n    for (const suffix in srcSuffixLookupMap) {\n      if (src.toLowerCase().endsWith(suffix)) {\n        const types = srcSuffixLookupMap[suffix];\n        return objectTypeForOrigin(contentOrigin, ...types);\n      }\n    }\n  }\n\n  return ObjectTypes.UNKNOWN;\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport const ReactAudioContext = React.createContext({});\n\nexport const hudHoverSound = \"play_sound-hud_hover_start\";\n\nexport const WithHoverSound = ({ sound, children }) => {\n  return (\n    <ReactAudioContext.Consumer>\n      {context => {\n        return React.cloneElement(children, {\n          onMouseEnter: e => {\n            if (context && context.playSound) {\n              context.playSound(sound || hudHoverSound);\n            }\n            children.props.onMouseEnter && children.props.onMouseEnter(e);\n          }\n        });\n      }}\n    </ReactAudioContext.Consumer>\n  );\n};\n\nWithHoverSound.propTypes = {\n  children: PropTypes.object,\n  sound: PropTypes.string\n};\n","export const createImageBitmap =\n  window.createImageBitmap ||\n  async function(data) {\n    return new Promise(resolve => {\n      // https://dev.to/nektro/createimagebitmap-polyfill-for-safari-and-edge-228\n      // https://gist.github.com/MonsieurV/fb640c29084c171b4444184858a91bc7\n\n      let srcUrl;\n      if (data instanceof Blob) {\n        srcUrl = URL.createObjectURL(data);\n      } else {\n        const canvas = document.createElement(\"canvas\");\n        const ctx = canvas.getContext(\"2d\");\n        canvas.width = data.width;\n        canvas.height = data.height;\n        ctx.putImageData(data, 0, 0);\n        srcUrl = canvas.toDataURL();\n      }\n      const img = document.createElement(\"img\");\n\n      img.addEventListener(\"load\", () => resolve(img));\n\n      img.src = srcUrl;\n    });\n  };\n\nexport function disposeImageBitmap(imageBitmap) {\n  if (imageBitmap instanceof HTMLImageElement && imageBitmap.src.startsWith(\"blob:\")) {\n    URL.revokeObjectURL(imageBitmap.src);\n  } else {\n    imageBitmap.close && imageBitmap.close();\n  }\n}\n","const boundingBox = new THREE.Box3();\nconst frustumBox = new THREE.Box3();\nconst inverseLightMatrixWorld = new THREE.Matrix4();\nconst tempBox = new THREE.Box3();\nconst FRUSTUM_PADDING = 1;\nconst NEAR_CLIPPING_PLANE = -500;\nconst FAR_CLIPPING_PLANE = 500;\nconst verts = [\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3()\n];\n\nexport default function resizeShadowCameraFrustum(light, scene) {\n  // Reset bounding box\n  frustumBox.makeEmpty();\n  boundingBox.makeEmpty();\n\n  // Grow the extents of boundingBox for every geometry in the scene that has castShadow set to true.\n  scene.traverse(node => {\n    const geometry = node.geometry;\n\n    if (geometry && node.castShadow) {\n      if (!geometry.boundingBox) {\n        geometry.computeBoundingBox();\n      }\n\n      tempBox.copy(geometry.boundingBox);\n\n      // Apply matrix transforming bounding box from model space to world space\n      tempBox.applyMatrix4(node.matrixWorld);\n\n      boundingBox.union(tempBox);\n    }\n  });\n\n  // Transform the resulting bounding box from world space to light space.\n  // Construct a new bounding box in light space that contains the corners of the bounding box in world space.\n  const min = boundingBox.min;\n  const max = boundingBox.max;\n\n  verts[0].set(min.x, min.y, min.z);\n  verts[1].set(min.x, min.y, max.z);\n  verts[2].set(min.x, max.y, min.z);\n  verts[3].set(min.x, max.y, max.z);\n  verts[4].set(max.x, min.y, min.z);\n  verts[5].set(max.x, min.y, max.z);\n  verts[6].set(max.x, max.y, min.z);\n  verts[7].set(max.x, max.y, max.z);\n\n  inverseLightMatrixWorld.getInverse(light.shadow.camera.matrixWorld);\n\n  for (let i = 0; i < verts.length; i++) {\n    verts[i].applyMatrix4(inverseLightMatrixWorld);\n    frustumBox.expandByPoint(verts[i]);\n  }\n\n  // Update the camera frustum to fit the resulting bounding box.\n  // Everything in the frustum that has castShadow set to true will cast a shadow.\n  // Everything in the frustum that has receiveShadow set to true will receive a shadow.\n  // FRUSTUM_PADDING is added to avoid clipping the edges of shadows.\n  // TODO: Determine why shadows flicker when light is moved fast. The light's matrixWorld is probably being updated a frame behind.\n  const camera = light.shadow.camera;\n  camera.left = frustumBox.min.x - FRUSTUM_PADDING;\n  camera.right = frustumBox.max.x + FRUSTUM_PADDING;\n  camera.bottom = frustumBox.min.y - FRUSTUM_PADDING;\n  camera.top = frustumBox.max.y + FRUSTUM_PADDING;\n  camera.near = frustumBox.min.z + NEAR_CLIPPING_PLANE;\n  camera.far = frustumBox.max.z + FAR_CLIPPING_PLANE;\n  camera.updateProjectionMatrix();\n}\n","import resizeShadowCameraFrustum from \"../utils/resizeShadowCameraFrustum\";\n\nAFRAME.registerComponent(\"directional-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.DirectionalLight();\n    this.light.position.set(0, 0, 0);\n    this.light.target.position.set(0, 0, 1);\n    this.light.add(this.light.target);\n    this.el.setObject3D(\"directional-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n    this.rendererSystem = this.el.sceneEl.systems.renderer;\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      const color = new THREE.Color(this.data.color);\n      this.rendererSystem.applyColorCorrection(color);\n      light.color.copy(color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n\n    this.light.shadow.camera.matrixNeedsUpdate = true;\n  },\n\n  tick() {\n    if (window.APP && window.APP.quality === \"low\") {\n      return;\n    }\n\n    resizeShadowCameraFrustum(this.light, this.el.sceneEl.object3D);\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"directional-light\");\n  }\n});\n","export const Layers = {\n  // Layers 0 - 2 reserverd by ThreeJS and AFrame.\n  reflection: 3\n};\n\n/**\n * Sets layer flags on the underlying Object3D\n * @namespace environment\n * @component layers\n */\nAFRAME.registerComponent(\"layers\", {\n  schema: {\n    reflection: { type: \"boolean\", default: false },\n    inWorldHud: { type: \"boolean\", default: false },\n    exclusive: { type: \"boolean\", default: false } // if true, only these layers will be set\n  },\n  init() {\n    this.update = this.update.bind(this);\n    this.el.addEventListener(\"model-loaded\", this.update);\n  },\n  update(oldData) {\n    const obj = this.el.object3D;\n\n    if (this.data.exclusive) {\n      obj.traverse(o => (o.layers.mask = 0));\n    }\n\n    for (const [name, layer] of Object.entries(Layers)) {\n      const oldValue = oldData[name];\n      const newValue = this.data[name];\n\n      if (oldValue !== newValue) {\n        if (newValue) {\n          obj.traverse(o => o.layers.enable(layer));\n        } else {\n          obj.traverse(o => o.layers.disable(layer));\n        }\n      }\n    }\n  },\n  remove() {\n    this.el.removeEventListener(\"model-loaded\", this.update);\n  }\n});\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\n\n/**\n * Loops the given clip using this entity's animation mixer\n * @component loop-animation\n */\nAFRAME.registerComponent(\"loop-animation\", {\n  schema: {\n    paused: { type: \"boolean\", default: false },\n    clip: { type: \"string\" }\n  },\n\n  init() {\n    this.mixerEl = findAncestorWithComponent(this.el, \"animation-mixer\");\n\n    if (!this.mixerEl) {\n      console.warn(\"loop-animation component could not find an animation-mixer in its ancestors.\");\n      return;\n    }\n\n    this.updateClip();\n  },\n\n  update(oldData) {\n    if ((oldData.clip !== this.data.clip || oldData.paused !== this.data.paused) && this.mixerEl) {\n      if (oldData.clip !== this.data.clip) {\n        this.updateClip();\n      }\n\n      if (this.currentAction) {\n        this.currentAction.paused = this.data.paused;\n      }\n    }\n  },\n\n  updateClip() {\n    const { mixer, animations } = this.mixerEl.components[\"animation-mixer\"];\n    const clipName = this.data.clip;\n\n    if (animations.length === 0) {\n      return;\n    }\n\n    let clip;\n\n    if (!clipName) {\n      clip = animations[0];\n    } else {\n      clip = animations.find(({ name }) => name === clipName);\n    }\n\n    if (!clip) {\n      return;\n    }\n\n    const action = mixer.clipAction(clip, this.el.object3D);\n    action.enabled = true;\n    action.setLoop(THREE.LoopRepeat, Infinity).play();\n    this.currentAction = action;\n  },\n\n  destroy() {\n    if (this.currentAction) {\n      this.currentAction.enabled = false;\n      this.currentAction.stop();\n    }\n  }\n});\n","import { getBox, getScaleCoefficient } from \"../utils/auto-box-collider\";\nimport { resolveUrl, injectCustomShaderChunks } from \"../utils/media-utils\";\nimport {\n  guessContentType,\n  proxiedUrlFor,\n  isHubsRoomUrl,\n  isHubsSceneUrl,\n  isHubsAvatarUrl\n} from \"../utils/media-url-utils\";\nimport { addAnimationComponents } from \"../utils/animation\";\nimport \"three/examples/js/loaders/GLTFLoader\";\nimport loadingObjectSrc from \"../assets/LoadingObject_Atom.glb\";\nimport { SOUND_MEDIA_LOADING, SOUND_MEDIA_LOADED } from \"../systems/sound-effects-system\";\n\nimport anime from \"animejs\";\n\nconst SHAPE = require(\"aframe-physics-system/src/constants\").SHAPE;\n\nconst gltfLoader = new THREE.GLTFLoader();\nlet loadingObject;\ngltfLoader.load(loadingObjectSrc, gltf => {\n  loadingObject = gltf;\n});\n\nconst fetchContentType = url => {\n  return fetch(url, { method: \"HEAD\" }).then(r => r.headers.get(\"content-type\"));\n};\n\nconst fetchMaxContentIndex = url => {\n  return fetch(url).then(r => parseInt(r.headers.get(\"x-max-content-index\")));\n};\n\nconst boundingBox = new THREE.Box3();\n\nAFRAME.registerComponent(\"media-loader\", {\n  schema: {\n    fileId: { type: \"string\" },\n    fileIsOwned: { type: \"boolean\" },\n    src: { type: \"string\" },\n    resize: { default: false },\n    resolve: { default: false },\n    contentType: { default: null },\n    animate: { default: true },\n    mediaOptions: {\n      default: {},\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n\n  init() {\n    this.onError = this.onError.bind(this);\n    this.showLoader = this.showLoader.bind(this);\n    this.clearLoadingTimeout = this.clearLoadingTimeout.bind(this);\n    this.onMediaLoaded = this.onMediaLoaded.bind(this);\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.networkedEl = networkedEl;\n    });\n  },\n\n  updateScale: (function() {\n    const center = new THREE.Vector3();\n    return function(resize) {\n      const mesh = this.el.getObject3D(\"mesh\");\n      const box = getBox(this.el, mesh);\n      const scaleCoefficient = resize ? getScaleCoefficient(0.5, box) : 1;\n      mesh.scale.multiplyScalar(scaleCoefficient);\n      const { min, max } = box;\n      center.addVectors(min, max).multiplyScalar(0.5 * scaleCoefficient);\n      mesh.position.sub(center);\n      mesh.matrixNeedsUpdate = true;\n    };\n  })(),\n\n  removeShape(id) {\n    if (this.el.getAttribute(\"ammo-shape__\" + id)) {\n      this.el.removeAttribute(\"ammo-shape__\" + id);\n    }\n  },\n\n  tick(t, dt) {\n    if (this.loaderMixer) {\n      this.loaderMixer.update(dt / 1000);\n    }\n  },\n\n  remove() {\n    if (this.loadingSoundNode) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.stopSoundNode(this.loadingSoundNode);\n      this.loadingSoundNode = null;\n    }\n  },\n\n  onError() {\n    this.el.removeAttribute(\"gltf-model-plus\");\n    this.el.removeAttribute(\"media-pager\");\n    this.el.removeAttribute(\"media-video\");\n    this.el.setAttribute(\"media-image\", { src: \"error\" });\n    this.clearLoadingTimeout();\n  },\n\n  showLoader() {\n    if (this.el.object3DMap.mesh) {\n      this.clearLoadingTimeout();\n      return;\n    }\n    const useFancyLoader = !!loadingObject;\n    const mesh = useFancyLoader\n      ? loadingObject.scene.clone()\n      : new THREE.Mesh(new THREE.BoxGeometry(), new THREE.MeshBasicMaterial());\n    this.el.setObject3D(\"mesh\", mesh);\n    this.updateScale(true);\n    if (useFancyLoader) {\n      this.loaderMixer = new THREE.AnimationMixer(mesh);\n\n      this.loadingClip = this.loaderMixer.clipAction(loadingObject.animations[0]);\n      this.loadingScaleClip = this.loaderMixer.clipAction(\n        new THREE.AnimationClip(null, 1000, [\n          new THREE.VectorKeyframeTrack(\".scale\", [0, 0.2], [0, 0, 0, mesh.scale.x, mesh.scale.y, mesh.scale.z])\n        ])\n      );\n      setTimeout(() => {\n        if (!this.loaderMixer) return; // Animation/loader was stopped early\n        this.el.setAttribute(\"ammo-shape__loader\", { type: SHAPE.BOX });\n      }, 200);\n\n      this.loadingClip.play();\n      this.loadingScaleClip.play();\n    }\n    if (this.el.sceneEl.is(\"entered\") && (!this.networkedEl || NAF.utils.isMine(this.networkedEl))) {\n      this.loadingSoundNode = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundLooped(\n        SOUND_MEDIA_LOADING\n      );\n    }\n    delete this.showLoaderTimeout;\n  },\n\n  clearLoadingTimeout() {\n    clearTimeout(this.showLoaderTimeout);\n    if (this.loadingSoundNode) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.stopSoundNode(this.loadingSoundNode);\n      this.loadingSoundNode = null;\n    }\n    if (this.loaderMixer) {\n      this.loadingClip.stop();\n      this.loadingScaleClip.stop();\n      delete this.loaderMixer;\n      delete this.loadingScaleClip;\n      delete this.loadingClip;\n    }\n    delete this.showLoaderTimeout;\n    this.removeShape(\"loader\");\n  },\n\n  updateHoverableVisuals() {\n    const hoverableVisuals = this.el.components[\"hoverable-visuals\"];\n\n    if (hoverableVisuals) {\n      if (!this.injectedCustomShaderChunks) {\n        this.injectedCustomShaderChunks = true;\n        hoverableVisuals.uniforms = injectCustomShaderChunks(this.el.object3D);\n      }\n\n      boundingBox.setFromObject(this.el.object3DMap.mesh);\n      boundingBox.getBoundingSphere(hoverableVisuals.boundingSphere);\n    }\n  },\n\n  onMediaLoaded(physicsShape = null) {\n    const el = this.el;\n    this.clearLoadingTimeout();\n\n    if (this.el.sceneEl.is(\"entered\")) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_MEDIA_LOADED);\n    }\n\n    const finish = () => {\n      if (physicsShape) {\n        el.setAttribute(\"ammo-shape\", {\n          type: physicsShape,\n          minHalfExtent: 0.04\n        });\n      }\n\n      this.updateHoverableVisuals();\n\n      const pager = el.components[\"media-pager\"];\n\n      if (pager) {\n        pager.repositionToolbar();\n      }\n    };\n\n    if (this.data.animate) {\n      const mesh = this.el.getObject3D(\"mesh\");\n      const scale = { x: 0.001, y: 0.001, z: 0.001 };\n      scale.x = mesh.scale.x < scale.x ? mesh.scale.x * 0.001 : scale.x;\n      scale.y = mesh.scale.y < scale.y ? mesh.scale.x * 0.001 : scale.y;\n      scale.z = mesh.scale.z < scale.z ? mesh.scale.x * 0.001 : scale.z;\n      this.addMeshScaleAnimation(mesh, scale, finish);\n    } else {\n      finish();\n    }\n  },\n\n  addMeshScaleAnimation(mesh, initialScale, onComplete) {\n    const step = (function() {\n      const lastValue = {};\n      return function(anim) {\n        const value = anim.animatables[0].target;\n\n        value.x = Math.max(Number.MIN_VALUE, value.x);\n        value.y = Math.max(Number.MIN_VALUE, value.y);\n        value.z = Math.max(Number.MIN_VALUE, value.z);\n\n        // For animation timeline.\n        if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n          return;\n        }\n\n        lastValue.x = value.x;\n        lastValue.y = value.y;\n        lastValue.z = value.z;\n\n        mesh.scale.set(value.x, value.y, value.z);\n        mesh.matrixNeedsUpdate = true;\n      };\n    })();\n\n    const config = {\n      duration: 400,\n      easing: \"easeOutElastic\",\n      elasticity: 400,\n      loop: 0,\n      round: false,\n      x: mesh.scale.x,\n      y: mesh.scale.y,\n      z: mesh.scale.z,\n      targets: [initialScale],\n      update: anim => step(anim),\n      complete: anim => {\n        step(anim);\n        onComplete();\n      }\n    };\n\n    mesh.scale.copy(initialScale);\n    mesh.matrixNeedsUpdate = true;\n\n    return anime(config);\n  },\n\n  async update(oldData) {\n    try {\n      const { src } = this.data;\n\n      if (src !== oldData.src && !this.showLoaderTimeout) {\n        this.showLoaderTimeout = setTimeout(this.showLoader, 100);\n      }\n\n      if (!src) return;\n\n      let canonicalUrl = src;\n      let accessibleUrl = src;\n      let contentType = this.data.contentType;\n      let thumbnail;\n\n      if (this.data.resolve) {\n        const result = await resolveUrl(src);\n        canonicalUrl = result.origin;\n        // handle protocol relative urls\n        if (canonicalUrl.startsWith(\"//\")) {\n          canonicalUrl = location.protocol + canonicalUrl;\n        }\n        contentType = (result.meta && result.meta.expected_content_type) || contentType;\n        thumbnail = result.meta && result.meta.thumbnail && proxiedUrlFor(result.meta.thumbnail);\n      }\n\n      // todo: we don't need to proxy for many things if the canonical URL has permissive CORS headers\n      accessibleUrl = proxiedUrlFor(canonicalUrl, null);\n\n      // if the component creator didn't know the content type, we didn't get it from reticulum, and\n      // we don't think we can infer it from the extension, we need to make a HEAD request to find it out\n      contentType = contentType || guessContentType(canonicalUrl) || (await fetchContentType(accessibleUrl));\n\n      // We don't want to emit media_resolved for index updates.\n      if (src !== oldData.src) {\n        this.el.emit(\"media_resolved\", { src, raw: accessibleUrl, contentType });\n      }\n\n      if (\n        contentType.startsWith(\"video/\") ||\n        contentType.startsWith(\"audio/\") ||\n        AFRAME.utils.material.isHLS(canonicalUrl, contentType)\n      ) {\n        const parsedUrl = new URL(src);\n        const qsTime = parseInt(parsedUrl.searchParams.get(\"t\"));\n        const hashTime = parseInt(new URLSearchParams(parsedUrl.hash.substring(1)).get(\"t\"));\n        const startTime = hashTime || qsTime || 0;\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-image\");\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.addEventListener(\n          \"video-loaded\",\n          e => {\n            this.onMediaLoaded(e.detail.projection === \"flat\" ? SHAPE.BOX : null);\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\n          \"media-video\",\n          Object.assign({}, this.data.mediaOptions, { src: accessibleUrl, time: startTime, contentType })\n        );\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else if (contentType.startsWith(\"image/\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"image-loaded\",\n          e => {\n            this.onMediaLoaded(e.detail.projection === \"flat\" ? SHAPE.BOX : null);\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.setAttribute(\n          \"media-image\",\n          Object.assign({}, this.data.mediaOptions, { src: accessibleUrl, contentType })\n        );\n\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else if (contentType.startsWith(\"application/pdf\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        // two small differences:\n        // 1. we pass the canonical URL to the pager so it can easily make subresource URLs\n        // 2. we don't remove the media-image component -- media-pager uses that internally\n        this.el.setAttribute(\"media-pager\", Object.assign({}, this.data.mediaOptions, { src: canonicalUrl }));\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.addEventListener(\"image-loaded\", this.clearLoadingTimeout, { once: true });\n        this.el.addEventListener(\"preview-loaded\", () => this.onMediaLoaded(SHAPE.BOX), { once: true });\n\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else if (\n        contentType.includes(\"application/octet-stream\") ||\n        contentType.includes(\"x-zip-compressed\") ||\n        contentType.startsWith(\"model/gltf\")\n      ) {\n        this.el.removeAttribute(\"media-image\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"model-loaded\",\n          () => {\n            this.updateScale(this.data.resize);\n            this.onMediaLoaded(SHAPE.HULL);\n            addAnimationComponents(this.el);\n          },\n          { once: true }\n        );\n        this.el.addEventListener(\"model-error\", this.onError, { once: true });\n        this.el.setAttribute(\n          \"gltf-model-plus\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: accessibleUrl,\n            contentType: contentType,\n            inflate: true,\n            modelToWorldScale: this.data.resize ? 0.0001 : 1.0\n          })\n        );\n      } else if (contentType.startsWith(\"text/html\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"image-loaded\",\n          () => {\n            const mayChangeScene = this.el.sceneEl.systems.permissions.can(\"update_hub\");\n\n            if (isHubsAvatarUrl(src)) {\n              this.el.setAttribute(\"hover-menu__hubs-item\", {\n                template: \"#avatar-link-hover-menu\",\n                dirs: [\"forward\", \"back\"]\n              });\n            } else if (isHubsRoomUrl(src) || (isHubsSceneUrl(src) && mayChangeScene)) {\n              this.el.setAttribute(\"hover-menu__hubs-item\", {\n                template: \"#hubs-destination-hover-menu\",\n                dirs: [\"forward\", \"back\"]\n              });\n            } else {\n              this.el.setAttribute(\"hover-menu__link\", { template: \"#link-hover-menu\", dirs: [\"forward\", \"back\"] });\n            }\n            this.onMediaLoaded(SHAPE.BOX);\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.setAttribute(\n          \"media-image\",\n          Object.assign({}, this.data.mediaOptions, { src: thumbnail, contentType: \"image/png\" })\n        );\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else {\n        throw new Error(`Unsupported content type: ${contentType}`);\n      }\n    } catch (e) {\n      console.error(\"Error adding media\", e);\n      this.onError();\n    }\n  }\n});\n\nAFRAME.registerComponent(\"media-pager\", {\n  schema: {\n    src: { type: \"string\" },\n    index: { default: 0 }\n  },\n\n  init() {\n    this.toolbar = null;\n    this.imageSrc = null;\n    this.onNext = this.onNext.bind(this);\n    this.onPrev = this.onPrev.bind(this);\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.networkedEl = networkedEl;\n    });\n\n    this.el.addEventListener(\"image-loaded\", async e => {\n      this.imageSrc = e.detail.src;\n      await this._ensureUI();\n      this.update();\n    });\n  },\n\n  async _ensureUI() {\n    if (this.hasSetupUI || !this.imageSrc) return;\n    this.hasSetupUI = true;\n\n    // unfortunately, since we loaded the page image in an img tag inside media-image, we have to make a second\n    // request for the same page to read out the max-content-index header\n    this.maxIndex = await fetchMaxContentIndex(this.imageSrc);\n    const template = document.getElementById(\"paging-toolbar\");\n    this.el.querySelector(\".interactable-ui\").appendChild(document.importNode(template.content, true));\n    this.toolbar = this.el.querySelector(\".paging-toolbar\");\n    // we have to wait a tick for the attach callbacks to get fired for the elements in a template\n    setTimeout(() => {\n      this.nextButton = this.el.querySelector(\".next-button [text-button]\");\n      this.prevButton = this.el.querySelector(\".prev-button [text-button]\");\n      this.pageLabel = this.el.querySelector(\".page-label\");\n\n      this.nextButton.object3D.addEventListener(\"interact\", this.onNext);\n      this.prevButton.object3D.addEventListener(\"interact\", this.onPrev);\n\n      this.update();\n      this.el.emit(\"preview-loaded\");\n    }, 0);\n  },\n\n  async update() {\n    if (!this.data.src) return;\n\n    const pageSrc = proxiedUrlFor(this.data.src, this.data.index);\n    this.el.setAttribute(\"media-image\", { src: pageSrc, contentType: \"image/png\" });\n\n    await this._ensureUI();\n\n    if (this.pageLabel) {\n      this.pageLabel.setAttribute(\"text\", \"value\", `${this.data.index + 1}/${this.maxIndex + 1}`);\n      this.repositionToolbar();\n    }\n  },\n\n  remove() {\n    if (this.toolbar) {\n      this.toolbar.parentNode.removeChild(this.toolbar);\n    }\n  },\n\n  onNext() {\n    if (!NAF.utils.isMine(this.networkedEl) && !NAF.utils.takeOwnership(this.networkedEl)) return;\n    this.el.setAttribute(\"media-pager\", \"index\", Math.min(this.data.index + 1, this.maxIndex));\n    this.el.emit(\"pager-page-changed\");\n  },\n\n  onPrev() {\n    if (!NAF.utils.isMine(this.networkedEl) && !NAF.utils.takeOwnership(this.networkedEl)) return;\n    this.el.setAttribute(\"media-pager\", \"index\", Math.max(this.data.index - 1, 0));\n    this.el.emit(\"pager-page-changed\");\n  },\n\n  repositionToolbar() {\n    const ammoShape = this.el.getAttribute(\"ammo-shape\");\n    if (!ammoShape) return;\n\n    this.toolbar.object3D.position.y = -0.7;\n    this.toolbar.object3D.matrixNeedsUpdate = true;\n  }\n});\n","import { SOUND_QUACK, SOUND_SPECIAL_QUACK } from \"../systems/sound-effects-system\";\n\nAFRAME.registerComponent(\"quack\", {\n  schema: {\n    quackPercentage: { default: 1 },\n    specialQuackPercentage: { default: 0.01 }\n  },\n\n  init: function() {\n    this._handleGrabStart = this._handleGrabStart.bind(this);\n  },\n\n  play: function() {\n    this.el.object3D.addEventListener(\"interact\", this._handleGrabStart);\n  },\n\n  pause: function() {\n    this.el.object3D.removeEventListener(\"interact\", this._handleGrabStart);\n  },\n\n  _handleGrabStart: function() {\n    const rand = Math.random();\n    if (rand < this.data.specialQuackPercentage) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SPECIAL_QUACK);\n    } else if (rand < this.data.quackPercentage) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_QUACK);\n    }\n  }\n});\n","import { setMatrixWorld } from \"../utils/three-utils\";\nimport { getCurrentStreamer } from \"../utils/component-utils\";\n\nfunction getStreamerCamera() {\n  const streamer = getCurrentStreamer();\n  if (streamer) {\n    return streamer.el.querySelector(\".camera\").object3D;\n  }\n  return null;\n}\n\nfunction lerp(start, end, t) {\n  return (1 - t) * start + t * end;\n}\n\nconst newRot = new THREE.Quaternion();\n\n/**\n * Nicely pans the camera for previewing a scene. There's some weirdness with this right now\n * since it ends up panning in a direction dependent upon the start camera orientation,\n * but it's good enough for now.\n */\nAFRAME.registerComponent(\"scene-preview-camera\", {\n  schema: {\n    duration: { default: 90, type: \"number\" },\n    positionOnly: { default: false, type: \"boolean\" }\n  },\n\n  init: function() {\n    this.startPoint = this.el.object3D.position.clone();\n    this.startRotation = this.el.object3D.quaternion.clone();\n\n    this.targetPoint = this.el.object3D.position.clone();\n    this.targetPoint.y = Math.max(this.targetPoint.y - 1.5, 1);\n    this.targetPoint.add(new THREE.Vector3(2, 0, -2));\n\n    const targetRotDelta = new THREE.Euler(-0.15, 0.0, 0.15);\n    this.targetRotation = new THREE.Quaternion();\n    this.targetRotation.setFromEuler(targetRotDelta);\n    this.targetRotation.premultiply(this.startRotation);\n\n    this.startTime = performance.now();\n    this.backwards = false;\n    this.ranOnePass = false;\n  },\n\n  tick2: function() {\n    const streamerCamera = getStreamerCamera();\n    if (streamerCamera) {\n      setMatrixWorld(this.el.object3D, streamerCamera.matrixWorld);\n      // Move camera forward just a bit so that we don't see the avatar's eye cylinders.\n      this.el.object3D.translateZ(-0.1);\n      this.el.object3D.matrixNeedsUpdate = true;\n    } else {\n      let t = (performance.now() - this.startTime) / (1000.0 * this.data.duration);\n      t = Math.min(1.0, Math.max(0.0, t));\n\n      if (!this.ranOnePass) {\n        t = t * (2 - t);\n      } else {\n        t = t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n      }\n\n      const from = this.backwards ? this.targetPoint : this.startPoint;\n      const to = this.backwards ? this.startPoint : this.targetPoint;\n      const fromRot = this.backwards ? this.targetRotation : this.startRotation;\n      const toRot = this.backwards ? this.startRotation : this.targetRotation;\n\n      THREE.Quaternion.slerp(fromRot, toRot, newRot, t);\n\n      this.el.object3D.position.set(lerp(from.x, to.x, t), lerp(from.y, to.y, t), lerp(from.z, to.z, t));\n\n      if (!this.data.positionOnly) {\n        this.el.object3D.rotation.setFromQuaternion(newRot);\n      }\n\n      this.el.object3D.matrixNeedsUpdate = true;\n\n      if (t >= 0.9999) {\n        this.ranOnePass = true;\n        this.backwards = !this.backwards;\n        this.startTime = performance.now();\n      }\n    }\n  }\n});\n","import \"three/examples/js/pmrem/PMREMGenerator\";\nimport \"three/examples/js/pmrem/PMREMCubeUVPacker\";\nimport qsTruthy from \"../utils/qs_truthy\";\nconst isBotMode = qsTruthy(\"bot\");\n\n/**\n * @author zz85 / https://github.com/zz85\n *\n * Based on \"A Practical Analytic Model for Daylight\"\n * aka The Preetham Model, the de facto standard analytic skydome model\n * http://www.cs.utah.edu/~shirley/papers/sunsky/sunsky.pdf\n *\n * First implemented by Simon Wallner\n * http://www.simonwallner.at/projects/atmospheric-scattering\n *\n * Improved by Martin Upitis\n * http://blenderartists.org/forum/showthread.php?245954-preethams-sky-impementation-HDR\n *\n * Three.js integration by zz85 http://twitter.com/blurspline\n */\n\nTHREE.Sky = function() {\n  const shader = THREE.Sky.SkyShader;\n\n  const material = new THREE.ShaderMaterial({\n    fragmentShader: shader.fragmentShader,\n    vertexShader: shader.vertexShader,\n    uniforms: THREE.UniformsUtils.clone(shader.uniforms),\n    side: THREE.BackSide\n  });\n\n  THREE.Mesh.call(this, new THREE.BoxBufferGeometry(1, 1, 1), material);\n};\n\nTHREE.Sky.prototype = Object.create(THREE.Mesh.prototype);\nTHREE.Sky.prototype.constructor = THREE.Sky;\n\nTHREE.Sky.SkyShader = {\n  uniforms: {\n    luminance: { value: 1 },\n    turbidity: { value: 2 },\n    rayleigh: { value: 1 },\n    mieCoefficient: { value: 0.005 },\n    mieDirectionalG: { value: 0.8 },\n    sunPosition: { value: new THREE.Vector3() }\n  },\n\n  vertexShader: [\n    \"uniform vec3 sunPosition;\",\n    \"uniform float rayleigh;\",\n    \"uniform float turbidity;\",\n    \"uniform float mieCoefficient;\",\n\n    \"varying vec3 vWorldPosition;\",\n    \"varying vec3 vSunDirection;\",\n    \"varying float vSunfade;\",\n    \"varying vec3 vBetaR;\",\n    \"varying vec3 vBetaM;\",\n    \"varying float vSunE;\",\n\n    \"const vec3 up = vec3( 0.0, 1.0, 0.0 );\",\n\n    // constants for atmospheric scattering\n    \"const float e = 2.71828182845904523536028747135266249775724709369995957;\",\n    \"const float pi = 3.141592653589793238462643383279502884197169;\",\n\n    // wavelength of used primaries, according to preetham\n    \"const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\",\n    // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n    // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\n    \"const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\",\n\n    // mie stuff\n    // K coefficient for the primaries\n    \"const float v = 4.0;\",\n    \"const vec3 K = vec3( 0.686, 0.678, 0.666 );\",\n    // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\n    \"const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\",\n\n    // earth shadow hack\n    // cutoffAngle = pi / 1.95;\n    \"const float cutoffAngle = 1.6110731556870734;\",\n    \"const float steepness = 1.5;\",\n    \"const float EE = 1000.0;\",\n\n    \"float sunIntensity( float zenithAngleCos ) {\",\n    \"\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\",\n    \"\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\",\n    \"}\",\n\n    \"vec3 totalMie( float T ) {\",\n    \"\tfloat c = ( 0.2 * T ) * 10E-18;\",\n    \"\treturn 0.434 * c * MieConst;\",\n    \"}\",\n\n    \"void main() {\",\n\n    \"\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\",\n    \"\tvWorldPosition = worldPosition.xyz;\",\n\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n    \"\tvSunDirection = normalize( sunPosition );\",\n\n    \"\tvSunE = sunIntensity( dot( vSunDirection, up ) );\",\n\n    \"\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\",\n\n    \"\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\",\n\n    // extinction (absorbtion + out scattering)\n    // rayleigh coefficients\n    \"\tvBetaR = totalRayleigh * rayleighCoefficient;\",\n\n    // mie coefficients\n    \"\tvBetaM = totalMie( turbidity ) * mieCoefficient;\",\n\n    \"}\"\n  ].join(\"\\n\"),\n\n  fragmentShader: [\n    \"varying vec3 vWorldPosition;\",\n    \"varying vec3 vSunDirection;\",\n    \"varying float vSunfade;\",\n    \"varying vec3 vBetaR;\",\n    \"varying vec3 vBetaM;\",\n    \"varying float vSunE;\",\n\n    \"uniform float luminance;\",\n    \"uniform float mieDirectionalG;\",\n\n    \"const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\",\n\n    // constants for atmospheric scattering\n    \"const float pi = 3.141592653589793238462643383279502884197169;\",\n\n    \"const float n = 1.0003;\", // refractive index of air\n    \"const float N = 2.545E25;\", // number of molecules per unit volume for air at\n    // 288.15K and 1013mb (sea level -45 celsius)\n\n    // optical length at zenith for molecules\n    \"const float rayleighZenithLength = 8.4E3;\",\n    \"const float mieZenithLength = 1.25E3;\",\n    \"const vec3 up = vec3( 0.0, 1.0, 0.0 );\",\n    // 66 arc seconds -> degrees, and the cosine of that\n    \"const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\",\n\n    // 3.0 / ( 16.0 * pi )\n    \"const float THREE_OVER_SIXTEENPI = 0.05968310365946075;\",\n    // 1.0 / ( 4.0 * pi )\n    \"const float ONE_OVER_FOURPI = 0.07957747154594767;\",\n\n    \"float rayleighPhase( float cosTheta ) {\",\n    \"\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\",\n    \"}\",\n\n    \"float hgPhase( float cosTheta, float g ) {\",\n    \"\tfloat g2 = pow( g, 2.0 );\",\n    \"\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\",\n    \"\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\",\n    \"}\",\n\n    // Filmic ToneMapping http://filmicgames.com/archives/75\n    \"const float A = 0.15;\",\n    \"const float B = 0.50;\",\n    \"const float C = 0.10;\",\n    \"const float D = 0.20;\",\n    \"const float E = 0.02;\",\n    \"const float F = 0.30;\",\n\n    \"const float whiteScale = 1.0748724675633854;\", // 1.0 / Uncharted2Tonemap(1000.0)\n\n    \"vec3 Uncharted2Tonemap( vec3 x ) {\",\n    \"\treturn ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;\",\n    \"}\",\n\n    \"void main() {\",\n    // optical length\n    // cutoff angle at 90 to avoid singularity in next formula.\n    \"\tfloat zenithAngle = acos( max( 0.0, dot( up, normalize( vWorldPosition - cameraPos ) ) ) );\",\n    \"\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\",\n    \"\tfloat sR = rayleighZenithLength * inverse;\",\n    \"\tfloat sM = mieZenithLength * inverse;\",\n\n    // combined extinction factor\n    \"\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\",\n\n    // in scattering\n    \"\tfloat cosTheta = dot( normalize( vWorldPosition - cameraPos ), vSunDirection );\",\n\n    \"\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\",\n    \"\tvec3 betaRTheta = vBetaR * rPhase;\",\n\n    \"\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );\",\n    \"\tvec3 betaMTheta = vBetaM * mPhase;\",\n\n    \"\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\",\n    \"\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\",\n\n    // nightsky\n    \"\tvec3 direction = normalize( vWorldPosition - cameraPos );\",\n    \"\tfloat theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]\",\n    \"\tfloat phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]\",\n    \"\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\",\n    \"\tvec3 L0 = vec3( 0.1 ) * Fex;\",\n\n    // composition + solar disc\n    \"\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\",\n    \"\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;\",\n\n    \"\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\",\n\n    \"\tvec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );\",\n    \"\tvec3 color = curr * whiteScale;\",\n\n    \"\tvec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\",\n\n    \"\tgl_FragColor = vec4( retColor, 1.0 );\",\n\n    \"}\"\n  ].join(\"\\n\")\n};\n\nAFRAME.registerComponent(\"skybox\", {\n  schema: {\n    turbidity: { type: \"number\", default: 10 },\n    rayleigh: { type: \"number\", default: 2 },\n    luminance: { type: \"number\", default: 1 },\n    mieCoefficient: { type: \"number\", default: 0.005 },\n    mieDirectionalG: { type: \"number\", default: 0.8 },\n    inclination: { type: \"number\", default: 0 },\n    azimuth: { type: \"number\", default: 0.15 },\n    distance: { type: \"number\", default: 8000 }\n  },\n\n  init() {\n    this.sky = new THREE.Sky();\n    this.el.setObject3D(\"mesh\", this.sky);\n    this.skyScene = new THREE.Scene();\n    this.cubeCamera = new THREE.CubeCamera(1, 100000, 512);\n    this.skyScene.add(this.cubeCamera);\n\n    this.updateEnvironmentMap = this.updateEnvironmentMap.bind(this);\n    // HACK: Render environment map on next frame to avoid bug where the render target texture is black.\n    // This is likely due to the custom elements attached callback being synchronous on Chrome but not Firefox.\n    // Added timeout due to additional case where texture is black in Firefox.\n    requestAnimationFrame(() => setTimeout(this.updateEnvironmentMap));\n  },\n\n  update(oldData) {\n    const uniforms = this.sky.material.uniforms;\n\n    if (this.data.turbidity !== oldData.turbidity) {\n      uniforms.turbidity.value = this.data.turbidity;\n    }\n\n    if (this.data.rayleigh !== oldData.rayleigh) {\n      uniforms.rayleigh.value = this.data.rayleigh;\n    }\n\n    if (this.data.luminance !== oldData.luminance) {\n      uniforms.luminance.value = this.data.luminance;\n    }\n\n    if (this.data.mieCoefficient !== oldData.mieCoefficient) {\n      uniforms.mieCoefficient.value = this.data.mieCoefficient;\n    }\n\n    if (this.data.mieDirectionalG !== oldData.mieDirectionalG) {\n      uniforms.mieDirectionalG.value = this.data.mieDirectionalG;\n    }\n\n    if (\n      this.data.inclination !== oldData.inclination ||\n      this.data.azimuth !== oldData.azimuth ||\n      this.data.distance !== oldData.distance\n    ) {\n      const theta = Math.PI * (this.data.inclination - 0.5);\n      const phi = 2 * Math.PI * (this.data.azimuth - 0.5);\n\n      const distance = this.data.distance;\n\n      const x = distance * Math.cos(phi);\n      const y = distance * Math.sin(phi) * Math.sin(theta);\n      const z = distance * Math.sin(phi) * Math.cos(theta);\n\n      uniforms.sunPosition.value.set(x, y, z).normalize();\n\n      // HACK Remove this if condition and always set the scale based on distance when the existing environments\n      // have their sky scales set to 1.\n      if (this.el.object3D.scale.x === 1) {\n        this.sky.scale.set(distance, distance, distance);\n      }\n\n      this.el.object3D.matrixNeedsUpdate = true;\n    }\n\n    this.updateEnvironmentMap();\n  },\n\n  updateEnvironmentMap() {\n    const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n\n    if (environmentMapComponent && !isBotMode) {\n      const renderer = this.el.sceneEl.renderer;\n      this.skyScene.add(this.sky);\n      this.cubeCamera.update(renderer, this.skyScene);\n      this.el.setObject3D(\"mesh\", this.sky);\n      const vrEnabled = renderer.vr.enabled;\n      renderer.vr.enabled = false;\n      const pmremGenerator = new THREE.PMREMGenerator(this.cubeCamera.renderTarget.texture);\n      pmremGenerator.update(renderer);\n      const pmremCubeUVPacker = new THREE.PMREMCubeUVPacker(pmremGenerator.cubeLods);\n      pmremCubeUVPacker.update(renderer);\n      renderer.vr.enabled = vrEnabled;\n      environmentMapComponent.updateEnvironmentMap(pmremCubeUVPacker.CubeUVRenderTarget.texture);\n      pmremGenerator.dispose();\n      pmremCubeUVPacker.dispose();\n    }\n  },\n\n  remove() {\n    this.el.removeObject3D(\"mesh\");\n  }\n});\n","import { getLastWorldPosition } from \"../utils/three-utils\";\n\n/**\n * Used on a player-rig to move the player to a random spawn point on entry.\n * @namespace avatar\n * @component spawn-controller\n */\nAFRAME.registerComponent(\"spawn-controller\", {\n  schema: {\n    target: { type: \"selector\" },\n    camera: { type: \"selector\", default: \"#player-camera\" },\n    playerHeight: { default: 1.6 },\n    loadedEvent: { type: \"string\" }\n  },\n  init() {\n    this.moveToSpawnPoint = this.moveToSpawnPoint.bind(this);\n    this.data.target.addEventListener(this.data.loadedEvent, this.moveToSpawnPoint);\n  },\n  moveToSpawnPoint() {\n    const spawnPoints = document.querySelectorAll(\"[spawn-point]\");\n\n    if (spawnPoints.length === 0) {\n      // Keep default position\n      return;\n    }\n\n    const camera = this.data.camera;\n    const spawnPointIndex = Math.round((spawnPoints.length - 1) * Math.random());\n    const spawnPoint = spawnPoints[spawnPointIndex];\n\n    getLastWorldPosition(spawnPoint.object3D, this.el.object3D.position);\n    this.el.object3D.rotation.copy(spawnPoint.object3D.rotation);\n\n    if (this.el.sceneEl.is(\"vr-mode\")) {\n      // Rotate the player rig such that the vr-camera faces forward.\n      this.el.object3D.rotation.y -= this.data.camera.object3D.rotation.y;\n    } else {\n      // Reset the camera transform in 2D mode.\n      camera.object3D.position.set(0, this.data.playerHeight, 0);\n      camera.object3D.rotation.set(0, 0, 0);\n      camera.object3D.matrixNeedsUpdate = true;\n    }\n\n    // Camera faces -Z direction. Flip rotation on Y axis to face the correct direction.\n    this.el.object3D.rotation.y += Math.PI;\n    this.el.object3D.matrixNeedsUpdate = true;\n\n    // Reset pitch-yaw-rotator after any scene-preview-camera rotation.\n    if (camera.components[\"pitch-yaw-rotator\"]) {\n      camera.components[\"pitch-yaw-rotator\"].set(camera.object3D.rotation.x, camera.object3D.rotation.y);\n    }\n  }\n});\n\n/**\n * Marks an entity as a potential spawn point.\n * @namespace environment\n * @component spawn-point\n */\nAFRAME.registerComponent(\"spawn-point\", {\n  init() {\n    this.el.object3D.visible = false;\n  }\n});\n","/* global require AFRAME THREE setTimeout clearTimeout */\nimport { addMedia } from \"../utils/media-utils\";\nimport { waitForEvent } from \"../utils/async-utils\";\nimport { ObjectContentOrigins } from \"../object-types\";\nimport { paths } from \"../systems/userinput/paths\";\n\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\n/**\n * Spawns networked objects when grabbed or when a specified event is fired.\n * @namespace network\n * @component super-spawner\n */\nAFRAME.registerComponent(\"super-spawner\", {\n  schema: {\n    /**\n     * Source of the media asset the spawner will spawn when grabbed. This can be a gltf, video, or image, or a url that the reticiulm media API can resolve to a gltf, video, or image.\n     */\n    src: { default: \"\" },\n\n    /**\n     * Whether to use the Reticulum media resolution API to interpret the src URL (e.g. find a video URL for Youtube videos.)\n     */\n    resolve: { default: false },\n\n    /**\n     * Whether to resize the media on load.\n     */\n    resize: { default: false },\n\n    /**\n     * The template to use for this object\n     */\n    template: { default: \"\" },\n\n    /**\n     * Spawn the object at a custom position, rather than at the center of the spanwer.\n     */\n    useCustomSpawnPosition: { default: false },\n    spawnPosition: { type: \"vec3\" },\n\n    /**\n     * Spawn the object with a custom orientation, rather than copying that of the spawner.\n     */\n    useCustomSpawnRotation: { default: false },\n    spawnRotation: { type: \"vec4\" },\n\n    /**\n     * Spawn the object with a custom scale, rather than copying that of the spawner.\n     */\n    useCustomSpawnScale: { default: false },\n    spawnScale: { type: \"vec3\" },\n\n    /**\n     * The spawner will become invisible and ungrabbable for this ammount of time after being grabbed. This can prevent rapidly spawning objects.\n     */\n    spawnCooldown: { default: 1 },\n\n    /**\n     * Center the spawned object on the hand that grabbed it after it finishes loading. By default the object will be grabbed relative to where the spawner was grabbed\n     */\n    centerSpawnedObject: { default: false },\n\n    /**\n     * Optional event to listen for to spawn an object on the preferred superHand\n     */\n    spawnEvent: { type: \"string\" },\n\n    /**\n     * If true, will spawn the object at the cursor and animate it into the hand.\n     */\n    animateFromCursor: { type: \"boolean\" }\n  },\n\n  init() {\n    this.cooldownTimeout = null;\n    this.handPosition = new THREE.Vector3();\n\n    this.onSpawnEvent = this.onSpawnEvent.bind(this);\n\n    this.sceneEl = document.querySelector(\"a-scene\");\n\n    this.tempSpawnHandPosition = new THREE.Vector3();\n  },\n\n  play() {\n    if (this.data.spawnEvent) {\n      this.el.sceneEl.addEventListener(this.data.spawnEvent, this.onSpawnEvent);\n    }\n  },\n\n  pause() {\n    if (this.data.spawnEvent) {\n      this.el.sceneEl.removeEventListener(this.data.spawnEvent, this.onSpawnEvent);\n    }\n    if (this.cooldownTimeout) {\n      clearTimeout(this.cooldownTimeout);\n      this.cooldownTimeout = null;\n      this.el.setAttribute(\"visible\", true);\n      this.el.classList.add(\"interactable\");\n    }\n  },\n\n  async onSpawnEvent() {\n    if (this.cooldownTimeout || !this.el.sceneEl.is(\"entered\")) {\n      return;\n    }\n\n    const entity = addMedia(this.data.src, this.data.template, ObjectContentOrigins.SPAWNER, this.data.resolve, false)\n      .entity;\n\n    const cursor = document.querySelector(\"#cursor\");\n    cursor.object3D.getWorldPosition(entity.object3D.position);\n    cursor.object3D.getWorldQuaternion(entity.object3D.quaternion);\n    entity.object3D.matrixNeedsUpdate = true;\n\n    if (this.data.useCustomSpawnScale) {\n      entity.object3D.scale.copy(this.data.spawnScale);\n    }\n\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const willAnimateFromCursor = this.data.animateFromCursor && userinput.get(paths.actions.rightHand.matrix);\n    if (!willAnimateFromCursor) {\n      interaction.state.rightRemote.held = entity;\n      interaction.state.rightRemote.spawning = true;\n    }\n    this.activateCooldown();\n    await waitForEvent(\"body-loaded\", entity);\n\n    cursor.object3D.getWorldPosition(entity.object3D.position);\n    cursor.object3D.getWorldQuaternion(entity.object3D.quaternion);\n    entity.object3D.matrixNeedsUpdate = true;\n\n    if (willAnimateFromCursor) {\n      document.querySelector(\"#player-right-controller\").object3D.getWorldPosition(this.handPosition);\n      entity.setAttribute(\"animation__spawn-at-cursor\", {\n        property: \"position\",\n        delay: 500,\n        dur: 1500,\n        from: { x: entity.object3D.position.x, y: entity.object3D.position.y, z: entity.object3D.position.z },\n        to: { x: this.handPosition.x, y: this.handPosition.y, z: this.handPosition.z },\n        easing: \"easeInOutBack\"\n      });\n    } else {\n      interaction.state.rightRemote.spawning = false;\n    }\n    entity.components[\"ammo-body\"].syncToPhysics();\n  },\n\n  activateCooldown() {\n    if (this.data.spawnCooldown > 0) {\n      const [sx, sy, sz] = [this.el.object3D.scale.x, this.el.object3D.scale.y, this.el.object3D.scale.z];\n\n      this.el.setAttribute(\"visible\", false);\n      this.el.object3D.scale.set(0.001, 0.001, 0.001);\n      this.el.object3D.matrixNeedsUpdate = true;\n      this.el.classList.remove(\"interactable\");\n      this.el.setAttribute(\"ammo-body\", { collisionFilterMask: COLLISION_LAYERS.NONE });\n      this.cooldownTimeout = setTimeout(() => {\n        this.el.setAttribute(\"visible\", true);\n        this.el.classList.add(\"interactable\");\n        this.el.setAttribute(\"ammo-body\", { collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER });\n        this.el.removeAttribute(\"animation__spawner-cooldown\");\n        this.el.setAttribute(\"animation__spawner-cooldown\", {\n          property: \"scale\",\n          delay: 50,\n          dur: 350,\n          from: { x: 0.001, y: 0.001, z: 0.001 },\n          to: { x: sx, y: sy, z: sz },\n          easing: \"easeOutElastic\"\n        });\n\n        this.cooldownTimeout = null;\n      }, this.data.spawnCooldown * 1000);\n    }\n  }\n});\n","import { Layers } from \"./layers\";\nimport \"../vendor/Water\";\nimport waterNormalMap from \"../assets/waternormals.jpg\";\n\n/**\n * @author jbouny / https://github.com/jbouny\n *\n * Work based on :\n * @author Slayvin / http://slayvin.net : Flat mirror for three.js\n * @author Stemkoski / http://www.adelphi.edu/~stemkoski : An implementation of water shader based on the flat mirror\n * @author Jonas Wagner / http://29a.ch/ && http://29a.ch/slides/2012/webglwater/ : Water shader explanations in WebGL\n */\n\nfunction MobileWater(geometry, options) {\n  THREE.Mesh.call(this, geometry);\n\n  const scope = this;\n\n  options = options || {};\n\n  const time = options.time !== undefined ? options.time : 0.0;\n  const normalSampler = options.waterNormals !== undefined ? options.waterNormals : null;\n  const sunDirection =\n    options.sunDirection !== undefined ? options.sunDirection : new THREE.Vector3(0.70707, 0.70707, 0.0);\n  const sunColor = new THREE.Color(options.sunColor !== undefined ? options.sunColor : 0xffffff);\n  const waterColor = new THREE.Color(options.waterColor !== undefined ? options.waterColor : 0x7f7f7f);\n  const eye = options.eye !== undefined ? options.eye : new THREE.Vector3(0, 0, 0);\n  const distortionScale = options.distortionScale !== undefined ? options.distortionScale : 20.0;\n  const side = options.side !== undefined ? options.side : THREE.FrontSide;\n  const fog = options.fog !== undefined ? options.fog : false;\n\n  const mirrorShader = {\n    uniforms: THREE.UniformsUtils.merge([\n      THREE.UniformsLib[\"lights\"],\n      {\n        normalSampler: { value: null },\n        time: { value: 0.0 },\n        size: { value: 1.0 },\n        distortionScale: { value: 20.0 },\n        sunColor: { value: new THREE.Color(0x7f7f7f) },\n        sunDirection: { value: new THREE.Vector3(0.70707, 0.70707, 0) },\n        eye: { value: new THREE.Vector3() },\n        waterColor: { value: new THREE.Color(0x555555) }\n      }\n    ]),\n\n    vertexShader: `\n      uniform float time;\n      varying vec4 worldPosition;\n\n      void main() {\n      \tworldPosition = modelMatrix * vec4( position, 1.0 );\n      \tvec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );\n      \tgl_Position = projectionMatrix * mvPosition;\n\n      }\n    `,\n\n    fragmentShader: `\n      uniform float time;\n      uniform float size;\n      uniform float distortionScale;\n      uniform sampler2D normalSampler;\n      uniform vec3 sunColor;\n      uniform vec3 sunDirection;\n      uniform vec3 eye;\n      uniform vec3 waterColor;\n\n      varying vec4 worldPosition;\n\n      vec4 getNoise( vec2 uv ) {\n      \tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\n      \tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\n      \tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\n      \tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\n      \tvec4 noise = texture2D( normalSampler, uv0 ) +\n      \t\ttexture2D( normalSampler, uv1 ) +\n      \t\ttexture2D( normalSampler, uv2 ) +\n      \t\ttexture2D( normalSampler, uv3 );\n      \treturn noise * 0.5 - 1.0;\n      }\n\n      void sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {\n      \tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\n      \tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );\n      \tspecularColor += pow( direction, shiny ) * sunColor * spec;\n      \tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\n      }\n\n      ${THREE.ShaderChunk[\"common\"]}\n      ${THREE.ShaderChunk[\"packing\"]}\n      ${THREE.ShaderChunk[\"bsdfs\"]}\n      ${THREE.ShaderChunk[\"lights_pars_begin\"]}\n\n      void main() {\n      \tvec4 noise = getNoise( worldPosition.xz * size );\n      \tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\n\n      \tvec3 diffuseLight = vec3(0.0);\n      \tvec3 specularLight = vec3(0.0);\n\n      \tvec3 worldToEye = eye-worldPosition.xyz;\n      \tvec3 eyeDirection = normalize( worldToEye );\n      \tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\n\n      \tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\n      \tfloat rf0 = 0.3;\n      \tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\n      \tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\n      \tvec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ), ( 0.5 + specularLight ), reflectance);\n      \tvec3 outgoingLight = albedo;\n      \tgl_FragColor = vec4( outgoingLight, 1 );\n      }\n    `\n  };\n\n  const material = new THREE.ShaderMaterial({\n    fragmentShader: mirrorShader.fragmentShader,\n    vertexShader: mirrorShader.vertexShader,\n    uniforms: THREE.UniformsUtils.clone(mirrorShader.uniforms),\n    transparent: false,\n    lights: true,\n    side: side,\n    fog: fog\n  });\n\n  material.uniforms.time.value = time;\n  material.uniforms.normalSampler.value = normalSampler;\n  material.uniforms.sunColor.value = sunColor;\n  material.uniforms.waterColor.value = waterColor;\n  material.uniforms.sunDirection.value = sunDirection;\n  material.uniforms.distortionScale.value = distortionScale;\n\n  material.uniforms.eye.value = eye;\n\n  scope.material = material;\n}\n\nMobileWater.prototype = Object.create(THREE.Mesh.prototype);\nMobileWater.prototype.constructor = THREE.Water;\n\nasync function loadWaterNormals(url) {\n  const texture = await new Promise((resolve, reject) =>\n    new THREE.TextureLoader().load(url, resolve, undefined, reject)\n  );\n  texture.wrapS = texture.wrapT = THREE.RepeatWrapping;\n  texture.needsUpdate = true;\n  return texture;\n}\n\nAFRAME.registerComponent(\"water\", {\n  schema: {\n    waterColor: { type: \"color\", default: \"#001e0f\" },\n    distortionScale: { type: \"number\", default: 3.7 },\n    sunColor: { type: \"color\", default: \"#ffffff\" },\n    inclination: { type: \"number\", default: 0 },\n    azimuth: { type: \"number\", default: 0 },\n    distance: { type: \"number\", default: 1 },\n    speed: { type: \"number\", default: 0.1 },\n    forceMobile: { type: \"boolean\", default: false }\n  },\n  init() {\n    const waterMesh = this.el.getObject3D(\"mesh\");\n    const waterGeometry = waterMesh.geometry;\n\n    // Render THREE.Water shader instead of THREE.Mesh\n    waterMesh.visible = false;\n\n    loadWaterNormals(waterNormalMap).then(waterNormals => {\n      const waterConfig = {\n        textureWidth: 512,\n        textureHeight: 512,\n        waterNormals: waterNormals,\n        sunDirection: this.data.sunDirection,\n        sunColor: new THREE.Color(this.data.sunColor),\n        waterColor: new THREE.Color(this.data.waterColor),\n        distortionScale: this.data.distortionScale,\n        fog: false\n      };\n\n      if (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR() || this.data.forceMobile) {\n        this.water = new MobileWater(waterGeometry, waterConfig);\n      } else {\n        this.water = new THREE.Water(waterGeometry, waterConfig);\n        this.water.mirrorCamera.layers.set(Layers.reflection);\n      }\n\n      this.el.setObject3D(\"water\", this.water);\n    });\n  },\n\n  update(oldData) {\n    if (this.data.forceMobile !== oldData.forceMobile) {\n      this.el.removeObject3D(\"water\");\n      this.init();\n      return;\n    }\n\n    if (!this.water) {\n      return;\n    }\n\n    const uniforms = this.water.material.uniforms;\n\n    if (this.data.waterColor !== oldData.waterColor) {\n      uniforms.waterColor.value.setStyle(this.data.waterColor);\n    }\n\n    if (this.data.distortionScale !== oldData.distortionScale) {\n      uniforms.distortionScale.value = this.data.distortionScale;\n    }\n\n    if (this.data.sunColor !== oldData.sunColor) {\n      uniforms.sunColor.value.setStyle(this.data.sunColor);\n    }\n\n    if (\n      this.data.inclination !== oldData.inclination ||\n      this.data.azimuth !== oldData.azimuth ||\n      this.data.distance !== oldData.distance\n    ) {\n      const theta = Math.PI * (this.data.inclination - 0.5);\n      const phi = 2 * Math.PI * (this.data.azimuth - 0.5);\n\n      const distance = this.data.distance;\n\n      const x = distance * Math.cos(phi);\n      const y = distance * Math.sin(phi) * Math.sin(theta);\n      const z = distance * Math.sin(phi) * Math.cos(theta);\n\n      uniforms.sunDirection.value.set(x, y, z);\n    }\n  },\n\n  tick(time) {\n    if (this.water) {\n      this.water.material.uniforms.time.value = (time / 1000) * this.data.speed;\n    }\n  },\n\n  remove() {\n    this.el.removeObject3D(\"water\");\n    const waterMesh = this.el.getObject3D(\"mesh\");\n    waterMesh.visible = true;\n  }\n});\n","export function getSanitizedComponentMapping(inputComponent, inputProperty, publicComponents) {\n  const publicComponent = publicComponents[inputComponent];\n\n  if (!publicComponent) {\n    throw new Error(`Component \"${inputComponent}\" is not public.`);\n  }\n\n  const publicProperty = publicComponent.publicProperties[inputProperty];\n\n  if (!publicProperty) {\n    throw new Error(`Component \"${inputComponent}\"'s property \"${inputProperty}\" is not public.`);\n  }\n\n  return {\n    mappedComponent: publicComponent.mappedComponent,\n    mappedProperty: publicProperty.mappedProperty,\n    getMappedValue: publicProperty.getMappedValue\n  };\n}\n","import \"./components/gltf-model-plus\";\nimport { getSanitizedComponentMapping } from \"./utils/component-mappings\";\nimport { isHubsDestinationUrl } from \"./utils/media-url-utils\";\nconst PHYSICS_CONSTANTS = require(\"aframe-physics-system/src/constants\"),\n  TYPE = PHYSICS_CONSTANTS.TYPE,\n  SHAPE = PHYSICS_CONSTANTS.SHAPE,\n  FIT = PHYSICS_CONSTANTS.FIT;\nconst COLLISION_LAYERS = require(\"./constants\").COLLISION_LAYERS;\n\nAFRAME.GLTFModelPlus.registerComponent(\"duck\", \"duck\");\nAFRAME.GLTFModelPlus.registerComponent(\"quack\", \"quack\");\nAFRAME.GLTFModelPlus.registerComponent(\"sound\", \"sound\");\nAFRAME.GLTFModelPlus.registerComponent(\"css-class\", \"css-class\");\nAFRAME.GLTFModelPlus.registerComponent(\"interactable\", \"css-class\", (el, componentName) => {\n  el.setAttribute(componentName, \"interactable\");\n});\nAFRAME.GLTFModelPlus.registerComponent(\"super-spawner\", \"super-spawner\", (el, componentName, componentData) => {\n  //TODO: Do not automatically add these components\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n  el.setAttribute(\"hoverable-visuals\", {\n    cursorController: \"#cursor-controller\"\n  });\n  el.setAttribute(componentName, componentData);\n});\nAFRAME.GLTFModelPlus.registerComponent(\"gltf-model-plus\", \"gltf-model-plus\");\nAFRAME.GLTFModelPlus.registerComponent(\"media-loader\", \"media-loader\");\nAFRAME.GLTFModelPlus.registerComponent(\"body\", \"ammo-body\", el => {\n  //This is only required for migration of old environments with super-spawners\n  //will no longer be needed when spawners are added via Spoke instead.\n  el.setAttribute(\"ammo-body\", {\n    mass: 0,\n    type: TYPE.STATIC,\n    collisionFilterGroup: COLLISION_LAYERS.INTERACTABLES,\n    collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER\n  });\n});\nAFRAME.GLTFModelPlus.registerComponent(\"ammo-shape\", \"ammo-shape\");\nAFRAME.GLTFModelPlus.registerComponent(\"hide-when-quality\", \"hide-when-quality\");\nAFRAME.GLTFModelPlus.registerComponent(\"light\", \"light\", (el, componentName, componentData) => {\n  if (componentData.distance === 0) {\n    componentData.decay = 0;\n  }\n  el.setAttribute(componentName, componentData);\n  if (componentData.castShadow) {\n    // HACK: component.light isn't set until one frame after setArrtibute\n    setTimeout(() => {\n      el.components.light.light.shadow.camera.matrixNeedsUpdate = true;\n    }, 0);\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"ambient-light\", \"ambient-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"directional-light\", \"directional-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"hemisphere-light\", \"hemisphere-light\");\nfunction decayMigration(el, componentName, componentData) {\n  if (componentData.range === 0) {\n    componentData.decay = 0;\n  }\n  el.setAttribute(componentName, componentData);\n}\nAFRAME.GLTFModelPlus.registerComponent(\"point-light\", \"point-light\", decayMigration);\nAFRAME.GLTFModelPlus.registerComponent(\"spot-light\", \"spot-light\", decayMigration);\n\nAFRAME.GLTFModelPlus.registerComponent(\"skybox\", \"skybox\");\nAFRAME.GLTFModelPlus.registerComponent(\"layers\", \"layers\");\nAFRAME.GLTFModelPlus.registerComponent(\"shadow\", \"shadow\");\nAFRAME.GLTFModelPlus.registerComponent(\"water\", \"water\");\nAFRAME.GLTFModelPlus.registerComponent(\"scale-audio-feedback\", \"scale-audio-feedback\");\nAFRAME.GLTFModelPlus.registerComponent(\"animation-mixer\", \"animation-mixer\");\nAFRAME.GLTFModelPlus.registerComponent(\"loop-animation\", \"loop-animation\");\nAFRAME.GLTFModelPlus.registerComponent(\n  \"box-collider\",\n  \"ammo-shape\",\n  (() => {\n    const euler = new THREE.Euler();\n    return (el, componentName, componentData) => {\n      const { scale, rotation } = componentData;\n      euler.set(rotation.x, rotation.y, rotation.z);\n      const orientation = new THREE.Quaternion().setFromEuler(euler);\n      el.setAttribute(componentName, {\n        type: SHAPE.BOX,\n        fit: FIT.MANUAL,\n        offset: componentData.position,\n        halfExtents: { x: scale.x / 2, y: scale.y / 2, z: scale.z / 2 },\n        orientation\n      });\n    };\n  })()\n);\nAFRAME.GLTFModelPlus.registerComponent(\"visible\", \"visible\", (el, componentName, componentData) => {\n  if (typeof componentData === \"object\") {\n    el.setAttribute(componentName, componentData.visible);\n  } else {\n    el.setAttribute(componentName, componentData);\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"spawn-point\", \"spawn-point\");\nAFRAME.GLTFModelPlus.registerComponent(\"sticky-zone\", \"sticky-zone\");\nAFRAME.GLTFModelPlus.registerComponent(\"nav-mesh\", \"nav-mesh\", (el, _componentName, componentData) => {\n  const nav = AFRAME.scenes[0].systems.nav;\n  const zone = componentData.zone || \"character\";\n  let found = false;\n  el.object3D.traverse(node => {\n    if (node.isMesh && !found) {\n      found = true;\n      nav.loadMesh(node, zone);\n    }\n  });\n  // There isn't actually an a-frame nav-mesh component, but we want to tag this el as a nav-mesh since\n  // nav-mesh-helper will query for it later.\n  el.setAttribute(\"nav-mesh\");\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"pinnable\", \"pinnable\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"media\", \"media\", (el, componentName, componentData) => {\n  if (componentData.id) {\n    el.setAttribute(\"networked\", {\n      template: \"#interactable-media\",\n      owner: \"scene\",\n      persistent: true,\n      networkId: componentData.id\n    });\n  }\n\n  el.setAttribute(\"media-loader\", {\n    src: componentData.src,\n    resize: true,\n    resolve: true,\n    fileIsOwned: true,\n    animate: false\n  });\n\n  if (componentData.pageIndex) {\n    el.setAttribute(\"media-pager\", { index: componentData.pageIndex });\n  }\n\n  if (componentData.paused !== undefined) {\n    el.setAttribute(\"media-video\", { videoPaused: componentData.paused });\n  }\n\n  if (componentData.time) {\n    el.setAttribute(\"media-video\", { time: componentData.time });\n  }\n});\n\nfunction mediaInflator(el, componentName, componentData, components) {\n  let isControlled = true;\n\n  if (components.networked) {\n    // TODO: When non-hubs links can be traversed, make all link components controlled so you can open them.\n    isControlled =\n      componentData.controls || isHubsDestinationUrl(componentData.src) || isHubsDestinationUrl(componentData.href);\n\n    const hasVolume = componentName === \"video\";\n    const templateName = isControlled || hasVolume ? \"#static-controlled-media\" : \"#static-media\";\n\n    el.setAttribute(\"networked\", {\n      template: templateName,\n      owner: \"scene\",\n      persistent: true,\n      networkId: components.networked.id\n    });\n  }\n\n  const mediaOptions = {};\n\n  if (componentName === \"video\" || componentName === \"image\") {\n    mediaOptions.projection = componentData.projection;\n  }\n\n  if (componentName === \"video\") {\n    mediaOptions.videoPaused = !componentData.autoPlay;\n    mediaOptions.volume = componentData.volume;\n    mediaOptions.loop = componentData.loop;\n    mediaOptions.audioType = componentData.audioType;\n    mediaOptions.hidePlaybackControls = !isControlled;\n\n    if (componentData.audioType === \"pannernode\") {\n      mediaOptions.distanceModel = componentData.distanceModel;\n      mediaOptions.rolloffFactor = componentData.rolloffFactor;\n      mediaOptions.refDistance = componentData.refDistance;\n      mediaOptions.maxDistance = componentData.maxDistance;\n      mediaOptions.coneInnerAngle = componentData.coneInnerAngle;\n      mediaOptions.coneOuterAngle = componentData.coneOuterAngle;\n      mediaOptions.coneOuterGain = componentData.coneOuterGain;\n    }\n\n    el.setAttribute(\"video-pause-state\", { paused: mediaOptions.videoPaused });\n  }\n\n  const src = componentName === \"link\" ? componentData.href : componentData.src;\n\n  el.setAttribute(\"media-loader\", {\n    src,\n    resize: true,\n    resolve: true,\n    fileIsOwned: true,\n    animate: false,\n    mediaOptions\n  });\n}\n\nAFRAME.GLTFModelPlus.registerComponent(\"image\", \"image\", mediaInflator);\nAFRAME.GLTFModelPlus.registerComponent(\"video\", \"video\", mediaInflator, (name, property, value) => {\n  if (property === \"paused\") {\n    return { name: \"video-pause-state\", property, value };\n  } else {\n    return null;\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"link\", \"link\", mediaInflator);\n\nAFRAME.GLTFModelPlus.registerComponent(\"hoverable\", \"is-remote-hover-target\", el => {\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"spawner\", \"spawner\", (el, componentName, componentData) => {\n  el.setAttribute(\"media-loader\", {\n    src: componentData.src,\n    resolve: true,\n    fileIsOwned: true,\n    animate: false\n  });\n  el.setAttribute(\"css-class\", \"interactable\");\n  el.setAttribute(\"super-spawner\", {\n    src: componentData.src,\n    resolve: true,\n    template: \"#interactable-media\"\n  });\n  el.setAttribute(\"hoverable-visuals\", {\n    cursorController: \"#cursor-controller\"\n  });\n  el.setAttribute(\"ammo-body\", {\n    mass: 0,\n    type: TYPE.STATIC,\n    collisionFilterGroup: COLLISION_LAYERS.INTERACTABLES,\n    collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER\n  });\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n});\n\nconst publicComponents = {\n  video: {\n    mappedComponent: \"video-pause-state\",\n    publicProperties: {\n      paused: {\n        mappedProperty: \"paused\",\n        getMappedValue(value) {\n          return !!value;\n        }\n      }\n    }\n  },\n  \"loop-animation\": {\n    mappedComponent: \"loop-animation\",\n    publicProperties: {\n      paused: {\n        mappedProperty: \"paused\",\n        getMappedValue(value) {\n          return !!value;\n        }\n      }\n    }\n  }\n};\n\nAFRAME.GLTFModelPlus.registerComponent(\n  \"trigger-volume\",\n  \"trigger-volume\",\n  (el, componentName, componentData, components, indexToEntityMap) => {\n    const {\n      size,\n      target,\n      enterComponent,\n      enterProperty,\n      enterValue,\n      leaveComponent,\n      leaveProperty,\n      leaveValue\n    } = componentData;\n\n    let enterComponentMapping, leaveComponentMapping, targetEntity;\n\n    try {\n      enterComponentMapping = getSanitizedComponentMapping(enterComponent, enterProperty, publicComponents);\n      leaveComponentMapping = getSanitizedComponentMapping(leaveComponent, leaveProperty, publicComponents);\n\n      targetEntity = indexToEntityMap[target];\n\n      if (!targetEntity) {\n        throw new Error(`Couldn't find target entity with index: ${target}.`);\n      }\n    } catch (e) {\n      console.warn(`Error inflating gltf component \"trigger-volume\": ${e.message}`);\n      return;\n    }\n\n    // Filter out scope and colliders properties.\n    el.setAttribute(\"trigger-volume\", {\n      colliders: \"#player-camera\",\n      size,\n      target: targetEntity,\n      enterComponent: enterComponentMapping.mappedComponent,\n      enterProperty: enterComponentMapping.mappedProperty,\n      enterValue: enterComponentMapping.getMappedValue(enterValue),\n      leaveComponent: leaveComponentMapping.mappedComponent,\n      leaveProperty: leaveComponentMapping.mappedProperty,\n      leaveValue: leaveComponentMapping.getMappedValue(leaveValue)\n    });\n  }\n);\n\nAFRAME.GLTFModelPlus.registerComponent(\"heightfield\", \"heightfield\", (el, componentName, componentData) => {\n  el.setAttribute(\"ammo-shape__heightfield\", {\n    type: SHAPE.HEIGHTFIELD,\n    margin: 0.01,\n    fit: FIT.MANUAL,\n    heightfieldDistance: componentData.distance,\n    offset: componentData.offset,\n    heightfieldData: componentData.data\n  });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"trimesh\", \"trimesh\", el => {\n  el.setAttribute(\"ammo-shape__trimesh\", {\n    type: SHAPE.MESH,\n    margin: 0.01,\n    fit: FIT.ALL,\n    includeInvisible: true\n  });\n});\n","export default function nextTick() {\n  return new Promise(resolve => {\n    setTimeout(resolve, 0);\n  });\n}\n","module.exports = __webpack_public_path__ + \"assets/images/logo-8f1dfd234d060073524bc29912a24f75.svg\";","module.exports = __webpack_public_path__ + \"assets/images/giphy_logo-1dcbee43e18919c0bd0c999be8602628.png\";"],"sourceRoot":""}