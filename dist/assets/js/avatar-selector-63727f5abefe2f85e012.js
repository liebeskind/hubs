!function(e){function t(t){for(var o,r,s=t[0],l=t[1],c=t[2],d=0,h=[];d<s.length;d++)r=s[d],i[r]&&h.push(i[r][0]),i[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(u&&u(t);h.length;)h.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(o=!1)}o&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},i={4:0},a=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;a.push([1463,1,0]),n()}({11:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t,n,i,a,r,s){let l={};const c=(e.location.state&&e.location.state.__historyLength||0)+(t?0:1);(n||r||s)&&(delete(l=e.location.state?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){o(e,t,n[t])})}return e}({},e.location.state):{}).__duplicate,n&&(l[n]=i,l.key=n,l.value=i,l.detail=a));const u=void 0!==r?r:"/"===e.location.pathname?"":e.location.pathname,d=void 0!==s?s:e.location.search,h=e.location.state&&e.location.state.__duplicate,m=t||h?e.replace:e.push;l.__historyLength=c,m({pathname:u,search:d,state:l})}function a(e,t,n,o){i(e,!1,t,n,o)}function r(e,t,n,o){i(e,!0,t,n,o)}function s(e,t,n){i(e,!1,null,null,null,t,n)}function l(e){i(e,!1)}function c(e,t){if(!e.location.state||void 0===e.location.state.__historyLength)return;const n=e.location.state.__historyLength;return 0!==n?new Promise(o=>{const i=e.listen(()=>{i(),e.push({pathname:e.location.pathname,search:e.location.search,state:{__historyLength:0,__duplicate:!0}}),t&&e.go(-2),o()});e.go(-n)}):void 0}function u(e){c(e,!0)}function d(e){return`/${e.pathname.split("/").slice(2).join("/")}`}function h(e,t){return`/${e.pathname.split("/")[1]}${t}`}n.d(t,"e",function(){return a}),n.d(t,"f",function(){return r}),n.d(t,"d",function(){return s}),n.d(t,"a",function(){return l}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return u}),n.d(t,"g",function(){return d}),n.d(t,"h",function(){return h})},111:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return m});var o=n(68),i=n(15),a=n(11),r=n(49),s=n(34);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=["videos","sketchfab","poly","scenes","gifs","images","twitch"],u={scenes:"scene_listings",images:"bing_images",videos:"bing_videos",youtube:"youtube_videos",gifs:"tenor",sketchfab:"sketchfab",poly:"poly",twitch:"twitch"},d={gifs:"trending",sketchfab:"featured",scenes:"featured"},h=["q","filter","cursor"];class m extends o.a{constructor(){super(),l(this,"_update",async e=>{this.result=null,this.dispatchEvent(new CustomEvent("statechanged"));const t=this.getUrlMediaSource(e);if(!t)return;this.previousSource&&this.previousSource===t||(this.dispatchEvent(new CustomEvent("sourcechanged")),this.previousSource=t);const n=new URLSearchParams(e.search);this.requestIndex++;const o=this.requestIndex,a=new URLSearchParams;for(const e of h)n.get(e)&&a.set(e,n.get(e));let r;if(a.get("locale",navigator.languages[0]),"avatars"===t||"scenes"===t){const n="avatars"===t?"avatar":"scene";r=new URLSearchParams(e.search).get("filter").startsWith("my-")?`${n}s`:`${n}_listings`}else r=u[t];a.set("source",r),"avatars"!==r&&"scenes"!==r||a.set("user",window.APP.store.credentialsAccountId);const s=Object(i.f)(`/api/v1/media/search?${a.toString()}`);if(this.lastSavedUrl===s)return;const l=await this._fetchMedia(s,r);this.requestIndex==o&&(this.result=l,this.nextCursor=this.result.meta&&this.result.meta.next_cursor,this.lastFetchedUrl=s,this.dispatchEvent(new CustomEvent("statechanged")))}),l(this,"_fetchMedia",async(e,t)=>{if("avatar_listings"===t&&!Object(s.a)("use_avatar_listings"))return{entries:r.a.map(this._legacyAvatarToSearchEntry)};const n={"Content-Type":"application/json"},o=window.APP.store.state.credentials.token;o&&(n.authorization=`bearer ${o}`);const i=await fetch(e,{method:"GET",headers:n}),a=await i.text();let l;try{l=JSON.parse(a)}catch(e){l=a}return l}),l(this,"_legacyAvatarToSearchEntry",e=>({id:e.id,type:"avatar_listing",url:e.url,images:{preview:{url:e.thumbnail,width:720,height:1280}},gltfs:{avatar:e.model}})),l(this,"pageNavigate",e=>{if(-1===e)this.history.goBack();else{const e=this.history.location,t=new URLSearchParams(e.search);t.set("cursor",this.nextCursor),Object(a.d)(this.history,e.pathname,t.toString())}}),l(this,"filterQueryNavigate",(e,t)=>{const n=this.history.location,o=new URLSearchParams(n.search);t?o.set("q",t):o.delete("q"),e?o.set("filter",e):o.delete("filter"),e?o.set("cursor",e):o.delete("cursor"),Object(a.d)(this.history,n.pathname,o.toString())}),l(this,"getSearchClearedSearchParams",(e,t,n)=>{const o=new URLSearchParams(e.search);return o.delete("q"),o.delete("filter"),o.delete("cursor"),n||o.delete("media_nav"),t||o.delete("media_source"),o}),l(this,"_stashLastSearchParams",e=>{const t=new URLSearchParams(e.search);this._stashedParams={},this._stashedSource=this.getUrlMediaSource(e);for(const e of h){const n=t.get(e);n&&(this._stashedParams[e]=n)}}),l(this,"clearStashedQuery",()=>{this._stashedParams&&delete this._stashedParams.q}),l(this,"sourceNavigate",e=>{this._sourceNavigate(e,!1,!0)}),l(this,"sourceNavigateToDefaultSource",()=>{this._sourceNavigate(this._stashedSource?this._stashedSource:c[0],!1,!0)}),l(this,"sourceNavigateWithNoNav",e=>{this._sourceNavigate(e,!0,!1)}),l(this,"_sourceNavigate",async(e,t,n)=>{const o=new URLSearchParams(this.history.location.search).get("q"),i=this.getSearchClearedSearchParams(this.history.location);if(o)i.set("q",o);else if(n&&this._stashedParams)for(const t of h){const n=this._stashedParams[t],o="q"===t||this._stashedSource===e;n&&o&&i.set(t,n)}else if("avatars"===e){const e=await this._hasAccountWithAvatars();i.set("filter",e?"my-avatars":"featured")}else d[e]&&i.set("filter",d[e]);this._stashedParams=null,this._stashedSource=null,t&&i.set("media_nav","false"),"dev.reticulum.io"!==document.location.host?(i.set("media_source",e),Object(a.d)(this.history,this.history.location.pathname,i.toString())):Object(a.d)(this.history,Object(a.h)(this.history.location,`/media/${e}`),i.toString())}),l(this,"_hasAccountWithAvatars",async()=>{const{credentialsAccountId:e}=window.APP.store;if(!e)return!1;const t=new URLSearchParams;t.set("source","avatars"),t.set("user",e);const n=Object(i.f)(`/api/v1/media/search?${t.toString()}`),o=await this._fetchMedia(n,"avatars");return!(!o||!o.entries)&&o.entries.length>0}),l(this,"getUrlMediaSource",e=>{const{search:t}=e,n=new URLSearchParams(t),o=Object(a.g)(e);return o.startsWith("/media")||n.get("media_source")?n.get("media_source")||o.substring(7):null}),l(this,"pushExitMediaBrowserHistory",(e,t=!0)=>{e||(e=this.history),t&&this._stashLastSearchParams(e.location);const{pathname:n}=e.location,o=Object(a.g)(e.location).startsWith("/media");Object(a.d)(e,o?Object(a.h)(e.location,"/"):n,this.getSearchClearedSearchParams(e.location).toString()),this.dispatchEvent(new CustomEvent("media-exit"))}),this.requestIndex=0}setHistory(e){this.history=e,this._update(this.history.location),this.history.listen(e=>{this._update(e)})}}},134:function(e,t,n){"use strict";function o(e){let t=0;const n={};return e.onmessage=(t=>{const{id:o,result:i,err:a}=t.data,r=n[o];null==r?console.error(`Unknown message with ID ${o} received from ${e}.`):(delete n[o],null!=a?r.reject(new Error(a)):r.resolve(i))}),function(o,i){const a=t++,r=new Promise((e,t)=>{n[a]={resolve:e,reject:t}});return e.postMessage({id:a,payload:o},i),r}}n.d(t,"a",function(){return o})},1463:function(e,t,n){"use strict";n.r(t);n(316);var o=n(36),i=n.n(o),a=n(0),r=n.n(a),s=n(4),l=n(121),c=n.n(l),u=n(35),d=n(227),h=(n(1794),n(288),n(330),n(326),n(327),n(328),n(329),n(170),n(379),n(49)),m=n(58),p=n(165),f=n(1),g=n.n(f),b=n(18),v=n(445),y=n(416),E=n(7);function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class A extends a.Component{constructor(e){super(e),_(this,"state",{initialAvatarIndex:0,avatarIndices:[]}),_(this,"getAvatarIndex",(e=0)=>A.getAvatarIndex(this.props,e)),_(this,"nextAvatarIndex",()=>this.getAvatarIndex(-1)),_(this,"previousAvatarIndex",()=>this.getAvatarIndex(1)),_(this,"emitChangeToNext",()=>{const e=this.props.avatars[this.nextAvatarIndex()].id;this.props.onChange(e)}),_(this,"emitChangeToPrevious",()=>{const e=this.props.avatars[this.previousAvatarIndex()].id;this.props.onChange(e)}),this.state.initialAvatarIndex=A.getAvatarIndex(e),this.state.avatarIndices=[A.nextAvatarIndex(e),this.state.initialAvatarIndex,A.previousAvatarIndex(e)]}UNSAFE_componentWillReceiveProps(e){this.setState(t=>{const n=e.avatars.length;if(t.avatarIndices.length===n)return;const o=n-1,i=this.getAvatarIndex(),a=A.getAvatarIndex(e),r=Array.from(t.avatarIndices),s=i-a<0;let l=-1,c=!1;0===a?i===o?(l=1,c=0!==r.indexOf(o)):(l=-1,c=0!==r.indexOf(1)):a===o?0===i?(l=-1,c=0===r.indexOf(0)):(l=1,c=0!==r.indexOf(o-1)):(l=s?1:-1,c=s);const u=A.getAvatarIndex(e,l);return r.includes(u)?void 0:(c?r.push(u):r.unshift(u),{avatarIndices:r})})}componentDidMount(){this.scene.addEventListener("loaded",()=>{this.scene.setAttribute("light",{defaultLightsEnabled:!1}),this.scene.setAttribute("shadow",{type:"pcfsoft",enabled:"low"!==window.APP.quality})})}componentDidUpdate(e){if(this.props.avatarId!==e.avatarId){const e=this.animation.getAttribute("rotation"),t=e.y,n=this.animation.getAttribute("animation").to.split(" ").map(Number)[1],o=360/this.props.avatars.length;let i=t;Math.abs(n-t)>3*o&&(i=t<n?t+360:t-360),this.animation.setAttribute("animation","from",`${e.x} ${i} ${e.z}`)}}render(){const e=this.props.avatars.map(e=>r.a.createElement("a-asset-item",{id:e.id,key:e.id,"response-type":"arraybuffer",src:`${e.model}`})),t=this.state.avatarIndices.map(e=>[this.props.avatars[e],e]).map(([e,t])=>r.a.createElement("a-entity",{key:e.id,rotation:`0 ${360*-t/this.props.avatars.length} 0`},r.a.createElement("a-entity",{position:"0 0 5","gltf-model-plus":`src: #${e.id}`,animation:`property: rotation; dur: 12000; from: 0.5 0.5 0.5; to: 0 ${this.getAvatarIndex()===t?360:0} 0; loop: true;`}))),n=e=>(360*e/this.props.avatars.length+180)%360,o=n(this.state.initialAvatarIndex),i=n(this.getAvatarIndex());return r.a.createElement("div",{className:"avatar-selector"},r.a.createElement("a-scene",{ref:e=>this.scene=e,background:"color: #aaa","environment-map":"","loading-screen":"enabled: false",renderer:"antialias: true; colorManagement: true; sortObjects: true; physicallyCorrectLights: true; alpha: false; gammaOutput: true;"},r.a.createElement("a-assets",null,e),r.a.createElement("a-entity",{skybox:"turbidity: 20; rayleigh: 0.03; luminance: 0.175; mieCoefficient: 0.004; mieDirectionalG: 0.098; azimuth: 0.37; inclination: 0.14;"}),r.a.createElement("a-entity",{ref:e=>this.animation=e,rotation:`0 ${o} 0`,animation:`property: rotation; dur: 2000; easing: easeOutQuad; to: 0 ${i} 0;`},t),r.a.createElement("a-entity",{position:"0 1.5 -5.6",rotation:"-10 180 0"},r.a.createElement("a-entity",{camera:"far: 1.5;"})),r.a.createElement("a-entity",{"hide-when-quality":"low",light:"type: directional; color: #fdf5c2; intensity: 12",position:"0 10 -15"}),r.a.createElement("a-entity",{"hide-when-quality":"low",light:"type: hemisphere; color: #b1e3ff; groundColor: #b1e3ff; intensity: 1.5;"})),r.a.createElement(E.b,null,r.a.createElement("button",{className:"avatar-selector__previous-button",onClick:this.emitChangeToPrevious},r.a.createElement(b.a,{icon:v.faAngleLeft}))),r.a.createElement(E.b,null,r.a.createElement("button",{className:"avatar-selector__next-button",onClick:this.emitChangeToNext},r.a.createElement(b.a,{icon:y.faAngleRight}))))}}_(A,"propTypes",{avatars:g.a.array,avatarId:g.a.string,onChange:g.a.func}),_(A,"getAvatarIndex",(e,t=0)=>{const n=e.avatars.findIndex(t=>t.id===e.avatarId),o=e.avatars.length;return((n+t)%o+o)%o}),_(A,"nextAvatarIndex",e=>A.getAvatarIndex(e,-1)),_(A,"previousAvatarIndex",e=>A.getAvatarIndex(e,1));var S,w=Object(s.d)(A);function R(e){window.parent.postMessage({avatarId:e},location.origin)}function P(e){i.a.render(r.a.createElement(s.b,{locale:u.a,messages:u.b},r.a.createElement(w,{avatars:h.a,avatarId:e,onChange:R})),document.getElementById("selector-root"))}Object(d.a)(),Object(s.c)([...c.a]),Object(m.a)("/avatars","Hubs Avatar Picker"),window.APP=new p.a,window.APP.quality=(S="quality",new URLSearchParams(location.hash.replace(/^#/,"?")).get(S)||AFRAME.utils.device.isMobile()||AFRAME.utils.device.isMobileVR()?"low":"high"),window.addEventListener("message",e=>{if(e.source!==window.parent)return;const t=e.data.avatarId;"complete"===document.readyState?P(t):document.addEventListener("DOMContentLoaded",()=>{P(t)})})},148:function(e,t){e.exports={COLLISION_LAYERS:{ALL:-1,NONE:0,INTERACTABLES:1,ENVIRONMENT:2,AVATAR:4,HANDS:8,DEFAULT_INTERACTABLE:15,UNOWNED_INTERACTABLE:9,DEFAULT_SPAWNER:9}}},149:function(e,t,n){"use strict";var o=n(75),i=n(53),a=n(229),r=n.n(a);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l="\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n  #include <uv_vertex>\n  #include <uv2_vertex>\n  #include <color_vertex>\n  #include <skinbase_vertex>\n\n  #include <begin_vertex>\n  #include <morphtarget_vertex>\n  #include <skinning_vertex>\n  #include <project_vertex>\n  #include <logdepthbuf_vertex>\n\n  #include <worldpos_vertex>\n  #include <clipping_planes_vertex>\n  #include <fog_vertex>\n}\n",c="\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <aomap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n  #include <clipping_planes_fragment>\n\n  vec4 diffuseColor = vec4(diffuse, opacity);\n  ReflectedLight reflectedLight = ReflectedLight(vec3(0.0), vec3(0.0), vec3(0.0), vec3(0.0));\n  vec3 totalEmissiveRadiance = emissive;\n\n  #include <logdepthbuf_fragment>\n  #include <map_fragment>\n  #include <color_fragment>\n  #include <alphatest_fragment>\n  #include <emissivemap_fragment>\n\n  reflectedLight.indirectDiffuse += vec3(1.0);\n\n  #include <aomap_fragment>\n\n  reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n  vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n  gl_FragColor = vec4(outgoingLight, diffuseColor.a);\n\n  #include <premultiplied_alpha_fragment>\n  #include <tonemapping_fragment>\n  #include <encodings_fragment>\n  #include <fog_fragment>\n}\n";class u extends THREE.ShaderMaterial{constructor(...e){super(...e),s(this,"type","MobileStandardMaterial"),s(this,"isMobileStandardMaterial",!0)}static fromStandardMaterial(e){const t={vertexShader:l,fragmentShader:c,uniforms:{uvTransform:{value:new THREE.Matrix3},diffuse:{value:e.color},opacity:{value:e.opacity},map:{value:e.map},aoMapIntensity:{value:e.aoMapIntensity},aoMap:{value:e.aoMap},emissive:{value:e.emissive},emissiveMap:{value:e.emissiveMap}},fog:!0,lights:!1,opacity:e.opacity,transparent:e.transparent,skinning:e.skinning,morphTargets:e.morphTargets,vertexColors:e.vertexColors},n=new u(t);return n.color=e.color,n.map=e.map,n.aoMap=e.aoMap,n.aoMapIntensity=e.aoMapIntensity,n.emissive=e.emissive,n.emissiveMap=e.emissiveMap,n}clone(){return u.fromStandardMaterial(this)}}var d=n(8),h=n(134),m=n(152);n.d(t,"a",function(){return _}),THREE.Mesh.prototype.raycast=m.b;const p={},f=Object(h.a)(new r.a);function g(e,t,n){if(!AFRAME.components[t])throw new Error(`Inflator failed. "${t}" component does not exist.`);if(AFRAME.components[t].multiple&&Array.isArray(n))for(let o=0;o<n.length;o++)e.setAttribute(t+"__"+o,n[o]);else e.setAttribute(t,n)}function b(e){const t=new Map,n=e.clone();return function e(t,n,o){o(t,n);for(let i=0;i<t.children.length;i++)e(t.children[i],n.children[i],o)}(e,n,function(e,n){t.set(e,n),e.isMesh&&e.geometry.boundsTree&&(n.geometry.boundsTree=e.geometry.boundsTree)}),e.traverse(function(e){if(!e.isSkinnedMesh)return;const n=e.skeleton.bones,o=t.get(e);o.skeleton=e.skeleton.clone(),o.skeleton.bones=n.map(function(e){if(!t.has(e))throw new Error("Required bones are not descendants of the given object.");return t.get(e)}),o.bind(o.skeleton,e.bindMatrix)}),n}function v(e){const t=e.userData.gltfExtensions&&(e.userData.gltfExtensions.MOZ_hubs_components||e.userData.gltfExtensions.HUBS_components),n=e.userData.components;return t||n}AFRAME.GLTFModelPlus={components:{},registerComponent(e,t,n){n=n||g,AFRAME.GLTFModelPlus.components[e]={inflator:n,componentName:t}}};const y=function(e,t,n,o,i=1){"Chest"===t.name?t.name="Spine":"Root Scene"===t.name?t.name="AvatarRoot":"Bot_Skinned"===t.name&&(t.name="AvatarMesh");const a=[],r=t.children.slice(0);for(const t of r){const o=y(e,t,n);o&&a.push(o)}const s=v(t);if(!(!!s||t.name in n)&&!a.length&&!o)return null;const l=document.createElement("a-entity");l.append.apply(l,a);const c=(t.name||t.uuid).replace(/[^\w-]/g,"");l.classList.add(c),"YXZ"!==t.rotation.order&&t.rotation.setFromQuaternion(t.quaternion,"YXZ"),l.object3D.position.copy(t.position),l.object3D.rotation.copy(t.rotation),l.object3D.scale.copy(t.scale).multiplyScalar(i),l.object3D.matrixNeedsUpdate=!0,t.matrixAutoUpdate=!1,t.matrix.identity(),t.matrix.decompose(t.position,t.rotation,t.scale),l.setObject3D(t.type.toLowerCase(),t),s&&"nav-mesh"in s&&l.setObject3D("mesh",t),l.object3D.name=t.name,t.animations&&(t.parent.animations=t.animations);const u=t.userData.gltfIndex;return void 0!==u&&(e[u]=l),l};function E(e,t,n){const o=e.querySelectorAll("."+t);for(const e of o){const t=n.cloneNode(!0);for(const n of t.attributes){const{name:t,value:o}=n;e.setAttribute(t,o)}for(;t.children.length>0;)e.appendChild(t.children[0])}}async function _(e,t,n,o){let a,r=e;(t.includes("model/gltf+zip")||t.includes("application/x-zip-compressed"))&&(a=await f(r),r=a["scene.gtlf"]);const s=new THREE.LoadingManager;s.setURLModifier(Object(d.b)(r));const l=new THREE.GLTFLoader(s),c=await new Promise((e,t)=>l.createParser(r,e,o,t)),h=c.json.materials;if(h)for(let e=0;e<h.length;e++){const t=h[e];if(t.extensions&&t.extensions.MOZ_alt_materials&&void 0!==t.extensions.MOZ_alt_materials[n]){const o=t.extensions.MOZ_alt_materials[n];h[e]=h[o]}}const m=c.json.nodes;if(m)for(let e=0;e<m.length;e++){const t=m[e];t.extras||(t.extras={}),t.extras.gltfIndex=e}const p=await new Promise(c.parse.bind(c));return p.scene.traverse(e=>{e.matrixAutoUpdate=THREE.Object3D.DefaultMatrixAutoUpdate,e.material=Object(i.b)(e,e=>e.isMeshStandardMaterial&&"KHR_materials_unlit"===n?u.fromStandardMaterial(e):e)}),a&&Object.keys(a).forEach(URL.revokeObjectURL),p}AFRAME.registerComponent("gltf-model-plus",{schema:{src:{type:"string"},contentType:{type:"string"},useCache:{default:!0},inflate:{default:!1},modelToWorldScale:{type:"number",default:1}},init(){this.preferredTechnique=window.APP&&"low"===window.APP.quality?"KHR_materials_unlit":"pbrMetallicRoughness",this.loadTemplates()},update(){this.applySrc(this.data.src,this.data.contentType)},loadTemplates(){this.templates={},this.el.querySelectorAll(":scope > template").forEach(e=>{const t=document.importNode(e.firstElementChild||e.content.firstElementChild,!0);this.templates[e.getAttribute("data-name")]=t})},async loadModel(e,t,n,o){return o?(p[e]||(p[e]=await _(e,t,n)),{animations:(i=p[e]).animations,scene:b(i.scene)}):await _(e,t,n);var i},async applySrc(e,t){try{if(e&&"#"===e.charAt(0)){const t=document.getElementById(e.substring(1));e=t.getAttribute("src")}if(e===this.lastSrc)return;if(this.lastSrc=e,!e)return void(this.inflatedEl&&(console.warn("gltf-model-plus set to an empty source, unloading inflated model."),this.disposeLastInflatedEl()));this.el.emit("model-loading");const n=await this.loadModel(e,t,this.preferredTechnique,this.data.useCache);if(e!=this.lastSrc)return;this.disposeLastInflatedEl(),this.model=n.scene||n.scenes[0],this.model.animations=n.animations,n.animations.length>0?(this.el.setAttribute("animation-mixer",{}),this.el.components["animation-mixer"].initMixer(n.animations)):this.model.traverse(e=>{const t=e.isMesh&&e.geometry.isBufferGeometry,n=t&&e.geometry.boundsTree;if(t&&!n&&e.geometry.attributes.position){const t=e.geometry,n=t.index?t.index.count/3:t.attributes.position.count/3;n>1e3&&n<1e6&&(t.boundsTree=new m.a(e.geometry,{strategy:0,maxDepth:30}))}});const i={};let a=this.model;if(this.data.inflate&&(this.inflatedEl=y(i,this.model,this.templates,!0,this.data.modelToWorldScale))){if(this.el.appendChild(this.inflatedEl),a=this.inflatedEl.object3D,await Object(o.a)(),e!=this.lastSrc)return;!function(e,t){e.object3D.traverse(e=>{const n=v(e),o=e.el;if(n&&o)for(const e in n)if(n.hasOwnProperty(e)&&AFRAME.GLTFModelPlus.components.hasOwnProperty(e)){const{componentName:i,inflator:a}=AFRAME.GLTFModelPlus.components[e];a(o,i,n[e],n,t)}})}(this.inflatedEl,i);for(const e in this.templates)E(this.el,e,this.templates[e])}const r=[];a.traverse(e=>{const t=e.el;t&&r.push(()=>e.el=t)});const s=this.el.sceneEl.components["environment-map"];s&&s.applyEnvironmentMap(a),this.el.setObject3D("mesh",a),r.forEach(e=>e()),this.el.emit("model-loaded",{format:"gltf",model:this.model})}catch(t){delete p[e],console.error("Failed to load glTF model",t,this),this.el.emit("model-error",{format:"gltf",src:e})}},disposeLastInflatedEl(){this.inflatedEl&&(this.inflatedEl.parentNode.removeChild(this.inflatedEl),this.inflatedEl.object3D.traverse(e=>{e.material&&e.material.dispose&&e.material.dispose(),e.geometry&&(e.geometry.dispose&&e.geometry.dispose(),e.geometry.boundsTree=null)}),delete this.inflatedEl,this.el.removeAttribute("animation-mixer"))}})},15:function(e,t,n){"use strict";var o=n(104);var i=n(48);n.d(t,"f",function(){return a}),n.d(t,"h",function(){return l}),n.d(t,"g",function(){return c}),n.d(t,"a",function(){return u}),n.d(t,"d",function(){return d}),n.d(t,"c",function(){return h}),n.d(t,"b",function(){return m}),n.d(t,"e",function(){return p}),n.d(t,"i",function(){return f});document.createElement("a");function a(e,t=!1){return`https://dev.reticulum.io${e}`}let r=null,s=!1;async function l(){s=!0,r=null}async function c(){r||(!s&&document.querySelector("meta[name='ret:version']")?r={version:document.querySelector("meta[name='ret:version']").getAttribute("value"),pool:document.querySelector("meta[name='ret:pool']").getAttribute("value"),phx_host:document.querySelector("meta[name='ret:phx_host']").getAttribute("value")}:await fetch(a("/api/v1/meta")).then(async e=>{r=await e.json()}));const e=new URLSearchParams(location.search).get("phx_host");return e&&(r.phx_host=e),r}async function u(e=!1,t=null){const n=new URLSearchParams(location.search),i=async()=>{const e=n.get("phx_protocol")||("https:"===document.location.protocol?"wss:":"ws:");let t=n.get("phx_host"),o=n.get("phx_port");const i=await c();return`${e}//${t=t||i.phx_host}${(o=o||("dev.reticulum.io".includes("hubs.local")?"4000":"443"))?`:${o}`:""}`},a=await i();console.log(`Phoenix Socket URL: ${a}`);const r={};e&&(r.logger=((e,t,n)=>{console.log(`${e}: ${t}`,n)})),t&&(r.params=t);const s=new o.b(`${a}/socket`,r);return s.connect(),s.onError(async()=>{l();const e=new URL(s.endPoint).pathname,t=`${await i()}${e}`;console.log(`Socket error, changed endpoint to ${t}`),s.endPoint=t}),s}function d(e){const t=new URL(e);return a(t.pathname.replace(".png",".html")+t.search,!0)}function h(e,t="GET",n){const{token:o}=window.APP.store.state.credentials,i=a(e),r={headers:{"content-type":"application/json",authorization:`bearer ${o}`},method:t};return n&&(r.body=JSON.stringify(n)),fetch(i,r).then(async e=>{const t=await e.text();try{return JSON.parse(t)}catch(e){return t}})}async function m(e,t,n,o){const r=a("/api/v1/hubs"),s={hub:{name:"Axon Park"}};s.hub.default_environment_gltf_bundle_url="https://s3-us-west-1.amazonaws.com/axonpark/Axon_Park_Cliffside.glb";const l={"content-type":"application/json"},c=new i.b;c.state&&c.state.credentials.token&&(l.authorization=`bearer ${c.state.credentials.token}`);let u=await fetch(r,{body:JSON.stringify(s),headers:l,method:"POST"}).then(e=>e.json());"invalid_token"===u.error&&(c.update({credentials:{token:null,email:null}}),delete l.authorization,u=await fetch(r,{body:JSON.stringify(s),headers:l,method:"POST"}).then(e=>e.json()));const d=u;let h=d.url;const m=d.creator_assignment_token;m&&c.update({creatorAssignmentTokens:[{hubId:d.hub_id,creatorAssignmentToken:m}]}),"dev.reticulum.io"!==document.location.host&&(h=`/hub.html?hub_id=${d.hub_id}`),o?document.location.replace(h):document.location=h}function p(e,t){const n=(Object.entries(e||{}).find(([e])=>e===t)||[])[1];return n&&n.metas&&n.metas[0].profile||{}}function f(e,t,n){const o=t.channel(e.topic,n||e.params);for(let t=0,n=e.bindings.length;t<n;t++){const n=e.bindings[t];o.on(n.event,n.callback)}for(let t=0,n=e.pushBuffer.length;t<n;t++){const n=e.pushBuffer[t];o.push(n.event,n.payload,n.timeout)}const i=e.joinPush,a=o.join();for(let e=0,t=i.recHooks.length;e<t;e++){const t=i.recHooks[e];a.receive(t.status,t.callback)}return new Promise(t=>{a.receive("ok",()=>{e.bindings=[],t(o)})})}},150:function(e,t,n){"use strict";function o(e,t){for(;e&&(!e.components||!e.components[t]);)e=e.parentNode;return e}n.d(t,"a",function(){return o})},158:function(e,t){e.exports="if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\n  float ratio = 0.0;\n\n  if (hubs_EnableSweepingEffect) {\n    float size = hubs_SweepParams.t - hubs_SweepParams.s;\n    float line = mod(hubs_Time / 500.0 * size, size * 3.0) + hubs_SweepParams.s - size / 3.0;\n\n    if (hubs_WorldPosition.y < line) {\n      // Highlight with a sweeping gradient.\n      ratio = max(0.0, 1.0 - (line - hubs_WorldPosition.y) / (size * 1.5));\n    }\n  }\n\n  // Highlight with a gradient falling off with distance.\n  float pulse = 9.0 + 3.0 * (sin(hubs_Time / 1000.0) + 1.0);\n\n  if (hubs_HighlightInteractorOne) {\n    float dist1 = distance(hubs_WorldPosition, hubs_InteractorOnePos);\n    ratio += -min(1.0, pow(dist1 * pulse, 3.0)) + 1.0;\n  } \n\n  if (hubs_HighlightInteractorTwo) {\n    float dist2 = distance(hubs_WorldPosition, hubs_InteractorTwoPos);\n    ratio += -min(1.0, pow(dist2 * pulse, 3.0)) + 1.0;\n  }\n\n  ratio = min(1.0, ratio);\n\n  // Gamma corrected highlight color\n  vec3 highlightColor = vec3(0.184, 0.499, 0.933);\n\n  gl_FragColor.rgb = (gl_FragColor.rgb * (1.0 - ratio)) + (highlightColor * ratio);\n}\n"},159:function(e,t,n){e.exports=n.p+"assets/images/cubemap/posx-d235fb97df77b607be04b84125f40e7c.jpg"},160:function(e,t,n){e.exports=n.p+"assets/images/cubemap/negx-35034574e114423babdea92b6a2eb97a.jpg"},161:function(e,t,n){e.exports=n.p+"assets/images/cubemap/posy-d0c4e1e7979d75923d4d8b49c191bc6e.jpg"},162:function(e,t,n){e.exports=n.p+"assets/images/cubemap/negy-35808d21d1d17ac1b84d3184e365093b.jpg"},163:function(e,t,n){e.exports=n.p+"assets/images/cubemap/posz-de29aa8396196e4b040cd5305e351dbe.jpg"},164:function(e,t,n){e.exports=n.p+"assets/images/cubemap/negz-d73d18a8b7994524dc39a6ea3fcf43fc.jpg"},165:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(48),i=n(111);class a{constructor(){this.scene=null,this.quality="low",this.store=new o.b,this.mediaSearchStore=new i.b}setQuality(e){return this.quality!==e&&(this.quality=e,this.scene&&this.scene.dispatchEvent(new CustomEvent("quality-changed",{detail:e})),!0)}}},170:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var o=n(53),i=n(159),a=n.n(i),r=n(160),s=n.n(r),l=n(161),c=n.n(l),u=n(162),d=n.n(u),h=n(163),m=n.n(h),p=n(164),f=n.n(p);async function g(){const e=[a.a,s.a,c.a,d.a,m.a,f.a],t=await new Promise((t,n)=>(new THREE.CubeTextureLoader).load(e,t,void 0,n));return t.format=THREE.RGBFormat,t}AFRAME.registerComponent("environment-map",{schema:{loadDefault:{type:"boolean",default:!0}},init(){this.environmentMap=null,this.updateEnvironmentMap=this.updateEnvironmentMap.bind(this),this.data.loadDefault&&g().then(this.updateEnvironmentMap)},updateEnvironmentMap(e){this.environmentMap=e,this.applyEnvironmentMap(this.el.object3D)},applyEnvironmentMap(e){e.traverse(e=>{Object(o.a)(e,e=>{e.isMeshStandardMaterial&&(e.envMap=this.environmentMap,e.needsUpdate=!0)})})}})},1794:function(e,t){},225:function(e,t){},227:function(e,t,n){"use strict";n.d(t,"a",function(){return i});const o=AFRAME.THREE;function i(){if(/Android.+Firefox/.test(navigator.userAgent)){const e=WebGLRenderingContext.prototype.getExtension,t=function(){const e=new o.WebGLRenderer,t=new o.Scene,n=new Float32Array(16),i=new o.DataTexture(n,2,2,o.RGBAFormat,o.FloatType),a=new o.Mesh(new o.PlaneBufferGeometry(1,1),new o.MeshBasicMaterial({map:i}));a.material.map.needsUpdate=!0,t.add(a),e.render(t,new o.Camera);const r=0===e.context.getError();return e.dispose(),r}();WebGLRenderingContext.prototype.getExtension=function(n){return"OES_texture_float"!==n||t?e.call(this,n):null}}}},237:function(e,t){},238:function(e,t){},326:function(e,t,n){var o=n(245),i=AFRAME.components,a=AFRAME.registerComponent,r=AFRAME.utils;delete AFRAME.components.animation;var s=new THREE.Color,l=new THREE.Color,c=r.entity.getComponentProperty,u=r.entity.setComponentProperty,d={},h="color",m="components",p="object3D";function f(e){e.x=THREE.Math.degToRad(e.x),e.y=THREE.Math.degToRad(e.y),e.z=THREE.Math.degToRad(e.z)}function g(e,t,n){var o;for(o=0;o<t.length;o++)e.addEventListener(t[o],n)}function b(e,t,n){var o;for(o=0;o<t.length;o++)e.removeEventListener(t[o],n)}function v(e,t){var n,o,i;for(o=E(t),i=e,n=0;n<o.length;n++)i=i[o[n]];return i}function y(e,t,n,o){var i,a,r,s;for(t.startsWith("object3D.rotation")&&(n=THREE.Math.degToRad(n)),a=E(t),s=e,i=0;i<a.length-1;i++)s=s[a[i]];r=a[a.length-1],o!==h?s[r]=n:"r"in s[r]?(s[r].r=n.r,s[r].g=n.g,s[r].b=n.b):(s[r].x=n.r,s[r].y=n.g,s[r].z=n.b)}function E(e){return e in d?d[e]:(d[e]=e.split("."),d[e])}function _(e){return e.isRawProperty||e.property.startsWith(m)||e.property.startsWith(p)}e.exports.Component=a("animation",{schema:{autoplay:{default:!0},delay:{default:0},dir:{default:""},dur:{default:1e3},easing:{default:"easeInQuad"},elasticity:{default:400},enabled:{default:!0},from:{default:""},loop:{default:0,parse:function(e){return!0===e||"true"===e||!1!==e&&"false"!==e&&parseInt(e,10)}},property:{default:""},startEvents:{type:"array"},pauseEvents:{type:"array"},resumeEvents:{type:"array"},round:{default:!1},to:{default:""},type:{default:""},isRawProperty:{default:!1}},multiple:!0,init:function(){var e=this;this.eventDetail={name:this.attrName},this.time=0,this.animation=null,this.animationIsPlaying=!1,this.onStartEvent=this.onStartEvent.bind(this),this.beginAnimation=this.beginAnimation.bind(this),this.pauseAnimation=this.pauseAnimation.bind(this),this.resumeAnimation=this.resumeAnimation.bind(this),this.fromColor={},this.toColor={},this.targets={},this.targetsArray=[],this.updateConfigForDefault=this.updateConfigForDefault.bind(this),this.updateConfigForRawColor=this.updateConfigForRawColor.bind(this),this.config={complete:function(){e.animationIsPlaying=!1,e.el.emit("animationcomplete",e.eventDetail,!1),e.id&&e.el.emit("animationcomplete__"+e.id,e.eventDetail,!1)}}},update:function(e){var t=this.config,n=this.data;this.animationIsPlaying=!1,this.data.enabled&&n.property&&(t.autoplay=!1,t.direction=n.dir,t.duration=n.dur,t.easing=n.easing,t.elasticity=n.elasticity,t.loop=n.loop,t.round=n.round,this.createAndStartAnimation())},tick:function(e,t){this.animationIsPlaying&&(this.time+=t,this.animation.tick(this.time))},remove:function(){this.pauseAnimation(),this.removeEventListeners(),this.cancelDelayedStart()},pause:function(){this.paused=!0,this.pausedWasPlaying=this.animationIsPlaying,this.pauseAnimation(),this.removeEventListeners(),this.cancelDelayedStart()},play:function(){this.paused&&(this.paused=!1,this.addEventListeners(),this.pausedWasPlaying&&(this.resumeAnimation(),this.pausedWasPlaying=!1))},createAndStartAnimation:function(){var e=this.data;this.updateConfig(),this.animationIsPlaying=!1,this.animation=o(this.config),this.removeEventListeners(),this.cancelDelayedStart(),this.addEventListeners(),!e.autoplay||e.startEvents&&e.startEvents.length||(e.delay?this.delayTimeout=setTimeout(this.beginAnimation,e.delay):this.beginAnimation())},beginAnimation:function(){this.updateConfig(),this.time=0,this.animationIsPlaying=!0,this.stopRelatedAnimations(),this.el.emit("animationbegin",this.eventDetail,!1)},pauseAnimation:function(){this.animationIsPlaying=!1},resumeAnimation:function(){this.animationIsPlaying=!0},onStartEvent:function(){this.data.enabled&&(this.updateConfig(),this.animation&&this.animation.pause(),this.animation=o(this.config),this.data.delay?setTimeout(this.beginAnimation,this.data.delay):this.beginAnimation())},updateConfigForRawColor:function(){var e,t,n,o=this.config,i=this.data,a=this.el;if(!this.waitComponentInitRawProperty(this.updateConfigForRawColor)){for(t in e=""===i.from?v(a,i.property):i.from,n=i.to,this.setColorConfig(e,n),e=this.fromColor,n=this.toColor,this.targetsArray.length=0,this.targetsArray.push(e),o.targets=this.targetsArray,n)o[t]=n[t];var r;o.update=(r={},function(e){var t;(t=e.animatables[0].target).r===r.r&&t.g===r.g&&t.b===r.b||y(a,i.property,t,i.type)})}},updateConfigForDefault:function(){var e,t,n,o,i=this.config,a=this.data,r=this.el;this.waitComponentInitRawProperty(this.updateConfigForDefault)||(e=""===a.from?_(a)?v(r,a.property):c(r,a.property):a.from,n=a.to,!isNaN(e||n)?(e=parseFloat(e),n=parseFloat(n)):(e=e?e.toString():e,n=n?n.toString():n),(t="true"===a.to||"false"===a.to||!0===a.to||!1===a.to)&&(e="true"===a.from||!0===a.from?1:0,n="true"===a.to||!0===a.to?1:0),this.targets.aframeProperty=e,i.targets=this.targets,i.aframeProperty=n,i.update=function(e){var n;(n=e.animatables[0].target.aframeProperty)!==o&&(o=n,t&&(n=n>=1),_(a)?y(r,a.property,n,a.type):u(r,a.property,n))})},updateConfigForVector:function(){var e,t,n,o,i=this.config,a=this.data,s=this.el;for(e in t=""!==a.from?r.coordinates.parse(a.from):c(s,a.property),n=r.coordinates.parse(a.to),"rotation"===a.property&&(f(t),f(n)),this.targetsArray.length=0,this.targetsArray.push(t),i.targets=this.targetsArray,n)i[e]=n[e];"position"!==a.property&&"rotation"!==a.property&&"scale"!==a.property?i.update=function(){var e={};return function(t){var n=t.animations[0].target;n.x===e.x&&n.y===e.y&&n.z===e.z||(e.x=n.x,e.y=n.y,e.z=n.z,u(s,a.property,n))}}():i.update=(o={},function(e){var t=e.animatables[0].target;"scale"===a.property&&(t.x=Math.max(1e-4,t.x),t.y=Math.max(1e-4,t.y),t.z=Math.max(1e-4,t.z)),t.x===o.x&&t.y===o.y&&t.z===o.z||(o.x=t.x,o.y=t.y,o.z=t.z,s.object3D[a.property].set(t.x,t.y,t.z),s.object3D.matrixNeedsUpdate=!0)})},updateConfig:function(){var e;e=function(e,t){var n,o,a,r;if(a=t.split("."),o=a[0],r=a[1],!(n=e.components[o]||i[o]))return null;if(r&&!n.schema[r])return null;if(r)return n.schema[r].type;return n.schema.type}(this.el,this.data.property),_(this.data)&&this.data.type===h?this.updateConfigForRawColor():"vec2"===e||"vec3"===e||"vec4"===e?this.updateConfigForVector():this.updateConfigForDefault()},waitComponentInitRawProperty:function(e){var t,n=this.data,i=this.el,a=this;return""===n.from&&(!!n.property.startsWith(m)&&(t=E(n.property)[1],!i.components[t]&&(i.addEventListener("componentinitialized",function n(r){r.detail.name===t&&(e(),a.animation=o(a.config),i.removeEventListener("componentinitialized",n))}),!0)))},stopRelatedAnimations:function(){var e,t;for(t in this.el.components)e=this.el.components[t],t!==this.attrName&&"animation"===e.name&&e.animationIsPlaying&&e.data.property===this.data.property&&(e.animationIsPlaying=!1)},addEventListeners:function(){var e=this.data,t=this.el;g(t,e.startEvents,this.onStartEvent),g(t,e.pauseEvents,this.pauseAnimation),g(t,e.resumeEvents,this.resumeAnimation)},removeEventListeners:function(){var e=this.data,t=this.el;b(t,e.startEvents,this.onStartEvent),b(t,e.pauseEvents,this.pauseAnimation),b(t,e.resumeEvents,this.resumeAnimation)},cancelDelayedStart:function(){this.delayTimeout&&(clearTimeout(this.delayTimeout),this.delayTimeout=null)},setColorConfig:function(e,t){s.set(e),l.set(t),e=this.fromColor,t=this.toColor,e.r=s.r,e.g=s.g,e.b=s.b,t.r=l.r,t.g=l.g,t.b=l.b}})},327:function(e,t){AFRAME.registerComponent("animation-mixer",{initMixer(e){this.mixer=new THREE.AnimationMixer(this.el.object3D),this.el.object3D.animations=e,this.animations=e},tick:function(e,t){this.mixer&&this.mixer.update(t/1e3)}})},328:function(e,t){AFRAME.registerComponent("networked-audio-analyser",{async init(){this.volume=0,this.prevVolume=0,this.smoothing=.3,this.threshold=.01,this.el.addEventListener("sound-source-set",e=>{const t=THREE.AudioContext.getContext();this.analyser=t.createAnalyser(),this.analyser.fftSize=32,this.levels=new Uint8Array(this.analyser.frequencyBinCount),e.detail.soundSource.connect(this.analyser)})},tick:function(){if(!this.analyser)return;this.analyser.getByteTimeDomainData(this.levels);let e=0;for(let t=0;t<this.levels.length;t++){const n=(this.levels[t]-128)/128;e+=n*n}let t=Math.sqrt(e/this.levels.length);t<this.threshold&&(t=0),this.volume=this.smoothing*t+(1-this.smoothing)*this.prevVolume,this.prevVolume=this.volume}}),AFRAME.registerComponent("scale-audio-feedback",{schema:{minScale:{default:1},maxScale:{default:2}},init(){this._playerCamera=document.getElementById("player-camera").object3D,this._playerCameraWorldPosition=new THREE.Vector3,this._worldPosition=new THREE.Vector3},tick(){if(!this.el.object3D.visible)return;const{minScale:e,maxScale:t}=this.data,n=this.el.components["networked-audio-analyser"];if(!n)return;const{object3D:o}=this.el;this._playerCameraWorldPosition.setFromMatrixPosition(this._playerCamera.matrixWorld),this._worldPosition.setFromMatrixPosition(o.matrixWorld);const i=this._worldPosition.distanceTo(this._playerCameraWorldPosition)/10,a=Math.min(t,e+(t-e)*n.volume*8*i);o.scale.setScalar(a),o.matrixNeedsUpdate=!0}})},329:function(e,t,n){"use strict";var o=n(150);AFRAME.registerComponent("loop-animation",{schema:{paused:{type:"boolean",default:!1},clip:{type:"string"}},init(){this.mixerEl=Object(o.a)(this.el,"animation-mixer"),this.mixerEl?this.updateClip():console.warn("loop-animation component could not find an animation-mixer in its ancestors.")},update(e){e.clip===this.data.clip&&e.paused===this.data.paused||!this.mixerEl||(e.clip!==this.data.clip&&this.updateClip(),this.currentAction&&(this.currentAction.paused=this.data.paused))},updateClip(){const{mixer:e,animations:t}=this.mixerEl.components["animation-mixer"],n=this.data.clip;if(0===t.length)return;let o;if(!(o=n?t.find(({name:e})=>e===n):t[0]))return;const i=e.clipAction(o,this.el.object3D);i.enabled=!0,i.setLoop(THREE.LoopRepeat,1/0).play(),this.currentAction=i},destroy(){this.currentAction&&(this.currentAction.enabled=!1,this.currentAction.stop())}})},330:function(e,t,n){"use strict";n(549),n(550);var o=n(34);const i=Object(o.a)("bot");THREE.Sky=function(){const e=THREE.Sky.SkyShader,t=new THREE.ShaderMaterial({fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:THREE.UniformsUtils.clone(e.uniforms),side:THREE.BackSide});THREE.Mesh.call(this,new THREE.BoxBufferGeometry(1,1,1),t)},THREE.Sky.prototype=Object.create(THREE.Mesh.prototype),THREE.Sky.prototype.constructor=THREE.Sky,THREE.Sky.SkyShader={uniforms:{luminance:{value:1},turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new THREE.Vector3}},vertexShader:["uniform vec3 sunPosition;","uniform float rayleigh;","uniform float turbidity;","uniform float mieCoefficient;","varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","const vec3 up = vec3( 0.0, 1.0, 0.0 );","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );","const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );","const float v = 4.0;","const vec3 K = vec3( 0.686, 0.678, 0.666 );","const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );","const float cutoffAngle = 1.6110731556870734;","const float steepness = 1.5;","const float EE = 1000.0;","float sunIntensity( float zenithAngleCos ) {","\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );","\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );","}","vec3 totalMie( float T ) {","\tfloat c = ( 0.2 * T ) * 10E-18;","\treturn 0.434 * c * MieConst;","}","void main() {","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvWorldPosition = worldPosition.xyz;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","\tvSunDirection = normalize( sunPosition );","\tvSunE = sunIntensity( dot( vSunDirection, up ) );","\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );","\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );","\tvBetaR = totalRayleigh * rayleighCoefficient;","\tvBetaM = totalMie( turbidity ) * mieCoefficient;","}"].join("\n"),fragmentShader:["varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","uniform float luminance;","uniform float mieDirectionalG;","const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const vec3 up = vec3( 0.0, 1.0, 0.0 );","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float THREE_OVER_SIXTEENPI = 0.05968310365946075;","const float ONE_OVER_FOURPI = 0.07957747154594767;","float rayleighPhase( float cosTheta ) {","\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );","}","float hgPhase( float cosTheta, float g ) {","\tfloat g2 = pow( g, 2.0 );","\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );","\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );","}","const float A = 0.15;","const float B = 0.50;","const float C = 0.10;","const float D = 0.20;","const float E = 0.02;","const float F = 0.30;","const float whiteScale = 1.0748724675633854;","vec3 Uncharted2Tonemap( vec3 x ) {","\treturn ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;","}","void main() {","\tfloat zenithAngle = acos( max( 0.0, dot( up, normalize( vWorldPosition - cameraPos ) ) ) );","\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );","\tfloat sR = rayleighZenithLength * inverse;","\tfloat sM = mieZenithLength * inverse;","\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );","\tfloat cosTheta = dot( normalize( vWorldPosition - cameraPos ), vSunDirection );","\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );","\tvec3 betaRTheta = vBetaR * rPhase;","\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );","\tvec3 betaMTheta = vBetaM * mPhase;","\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );","\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );","\tvec3 direction = normalize( vWorldPosition - cameraPos );","\tfloat theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]","\tfloat phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]","\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );","\tvec3 L0 = vec3( 0.1 ) * Fex;","\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );","\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;","\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );","\tvec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );","\tvec3 color = curr * whiteScale;","\tvec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );","\tgl_FragColor = vec4( retColor, 1.0 );","}"].join("\n")},AFRAME.registerComponent("skybox",{schema:{turbidity:{type:"number",default:10},rayleigh:{type:"number",default:2},luminance:{type:"number",default:1},mieCoefficient:{type:"number",default:.005},mieDirectionalG:{type:"number",default:.8},inclination:{type:"number",default:0},azimuth:{type:"number",default:.15},distance:{type:"number",default:8e3}},init(){this.sky=new THREE.Sky,this.el.setObject3D("mesh",this.sky),this.skyScene=new THREE.Scene,this.cubeCamera=new THREE.CubeCamera(1,1e5,512),this.skyScene.add(this.cubeCamera),this.updateEnvironmentMap=this.updateEnvironmentMap.bind(this),requestAnimationFrame(()=>setTimeout(this.updateEnvironmentMap))},update(e){const t=this.sky.material.uniforms;if(this.data.turbidity!==e.turbidity&&(t.turbidity.value=this.data.turbidity),this.data.rayleigh!==e.rayleigh&&(t.rayleigh.value=this.data.rayleigh),this.data.luminance!==e.luminance&&(t.luminance.value=this.data.luminance),this.data.mieCoefficient!==e.mieCoefficient&&(t.mieCoefficient.value=this.data.mieCoefficient),this.data.mieDirectionalG!==e.mieDirectionalG&&(t.mieDirectionalG.value=this.data.mieDirectionalG),this.data.inclination!==e.inclination||this.data.azimuth!==e.azimuth||this.data.distance!==e.distance){const e=Math.PI*(this.data.inclination-.5),n=2*Math.PI*(this.data.azimuth-.5),o=this.data.distance,i=o*Math.cos(n),a=o*Math.sin(n)*Math.sin(e),r=o*Math.sin(n)*Math.cos(e);t.sunPosition.value.set(i,a,r).normalize(),1===this.el.object3D.scale.x&&this.sky.scale.set(o,o,o),this.el.object3D.matrixNeedsUpdate=!0}this.updateEnvironmentMap()},updateEnvironmentMap(){const e=this.el.sceneEl.components["environment-map"];if(e&&!i){const t=this.el.sceneEl.renderer;this.skyScene.add(this.sky),this.cubeCamera.update(t,this.skyScene),this.el.setObject3D("mesh",this.sky);const n=t.vr.enabled;t.vr.enabled=!1;const o=new THREE.PMREMGenerator(this.cubeCamera.renderTarget.texture);o.update(t);const i=new THREE.PMREMCubeUVPacker(o.cubeLods);i.update(t),t.vr.enabled=n,e.updateEnvironmentMap(i.CubeUVRenderTarget.texture),o.dispose(),i.dispose()}},remove(){this.el.removeObject3D("mesh")}})},34:function(e,t,n){"use strict";n.d(t,"a",function(){return i});const o=new URLSearchParams(location.search);function i(e){const t=o.get(e);return""===t||/1|on|true|yes/i.test(t)}},35:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r});var o=n(43);const i=(navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage).toLowerCase().split(/[_-]+/)[0],a=o[i]&&i||"en",r=o[a]||o.en},379:function(e,t,n){"use strict";n(149);function o(e,t,n){const o=n[e];if(!o)throw new Error(`Component "${e}" is not public.`);const i=o.publicProperties[t];if(!i)throw new Error(`Component "${e}"'s property "${t}" is not public.`);return{mappedComponent:o.mappedComponent,mappedProperty:i.mappedProperty,getMappedValue:i.getMappedValue}}var i=n(8);const a=n(119),r=a.TYPE,s=a.SHAPE,l=a.FIT,c=n(148).COLLISION_LAYERS;function u(e,t,n){0===n.range&&(n.decay=0),e.setAttribute(t,n)}function d(e,t,n,o){let a=!0;if(o.networked){const r="video"===t,s=(a=n.controls||Object(i.f)(n.src)||Object(i.f)(n.href))||r?"#static-controlled-media":"#static-media";e.setAttribute("networked",{template:s,owner:"scene",persistent:!0,networkId:o.networked.id})}const r={};"video"!==t&&"image"!==t||(r.projection=n.projection),"video"===t&&(r.videoPaused=!n.autoPlay,r.volume=n.volume,r.loop=n.loop,r.audioType=n.audioType,r.hidePlaybackControls=!a,"pannernode"===n.audioType&&(r.distanceModel=n.distanceModel,r.rolloffFactor=n.rolloffFactor,r.refDistance=n.refDistance,r.maxDistance=n.maxDistance,r.coneInnerAngle=n.coneInnerAngle,r.coneOuterAngle=n.coneOuterAngle,r.coneOuterGain=n.coneOuterGain),e.setAttribute("video-pause-state",{paused:r.videoPaused}));const s="link"===t?n.href:n.src;e.setAttribute("media-loader",{src:s,resize:!0,resolve:!0,fileIsOwned:!0,animate:!1,mediaOptions:r})}AFRAME.GLTFModelPlus.registerComponent("duck","duck"),AFRAME.GLTFModelPlus.registerComponent("quack","quack"),AFRAME.GLTFModelPlus.registerComponent("sound","sound"),AFRAME.GLTFModelPlus.registerComponent("css-class","css-class"),AFRAME.GLTFModelPlus.registerComponent("interactable","css-class",(e,t)=>{e.setAttribute(t,"interactable")}),AFRAME.GLTFModelPlus.registerComponent("super-spawner","super-spawner",(e,t,n)=>{e.setAttribute("is-remote-hover-target",""),e.setAttribute("tags",{isHandCollisionTarget:!0}),e.setAttribute("hoverable-visuals",{cursorController:"#cursor-controller"}),e.setAttribute(t,n)}),AFRAME.GLTFModelPlus.registerComponent("gltf-model-plus","gltf-model-plus"),AFRAME.GLTFModelPlus.registerComponent("media-loader","media-loader"),AFRAME.GLTFModelPlus.registerComponent("body","ammo-body",e=>{e.setAttribute("ammo-body",{mass:0,type:r.STATIC,collisionFilterGroup:c.INTERACTABLES,collisionFilterMask:c.DEFAULT_SPAWNER})}),AFRAME.GLTFModelPlus.registerComponent("ammo-shape","ammo-shape"),AFRAME.GLTFModelPlus.registerComponent("hide-when-quality","hide-when-quality"),AFRAME.GLTFModelPlus.registerComponent("light","light",(e,t,n)=>{0===n.distance&&(n.decay=0),e.setAttribute(t,n),n.castShadow&&setTimeout(()=>{e.components.light.light.shadow.camera.matrixNeedsUpdate=!0},0)}),AFRAME.GLTFModelPlus.registerComponent("ambient-light","ambient-light"),AFRAME.GLTFModelPlus.registerComponent("directional-light","directional-light"),AFRAME.GLTFModelPlus.registerComponent("hemisphere-light","hemisphere-light"),AFRAME.GLTFModelPlus.registerComponent("point-light","point-light",u),AFRAME.GLTFModelPlus.registerComponent("spot-light","spot-light",u),AFRAME.GLTFModelPlus.registerComponent("skybox","skybox"),AFRAME.GLTFModelPlus.registerComponent("layers","layers"),AFRAME.GLTFModelPlus.registerComponent("shadow","shadow"),AFRAME.GLTFModelPlus.registerComponent("water","water"),AFRAME.GLTFModelPlus.registerComponent("scale-audio-feedback","scale-audio-feedback"),AFRAME.GLTFModelPlus.registerComponent("animation-mixer","animation-mixer"),AFRAME.GLTFModelPlus.registerComponent("loop-animation","loop-animation"),AFRAME.GLTFModelPlus.registerComponent("box-collider","ammo-shape",(()=>{const e=new THREE.Euler;return(t,n,o)=>{const{scale:i,rotation:a}=o;e.set(a.x,a.y,a.z);const r=(new THREE.Quaternion).setFromEuler(e);t.setAttribute(n,{type:s.BOX,fit:l.MANUAL,offset:o.position,halfExtents:{x:i.x/2,y:i.y/2,z:i.z/2},orientation:r})}})()),AFRAME.GLTFModelPlus.registerComponent("visible","visible",(e,t,n)=>{"object"==typeof n?e.setAttribute(t,n.visible):e.setAttribute(t,n)}),AFRAME.GLTFModelPlus.registerComponent("spawn-point","spawn-point"),AFRAME.GLTFModelPlus.registerComponent("sticky-zone","sticky-zone"),AFRAME.GLTFModelPlus.registerComponent("nav-mesh","nav-mesh",(e,t,n)=>{const o=AFRAME.scenes[0].systems.nav,i=n.zone||"character";let a=!1;e.object3D.traverse(e=>{e.isMesh&&!a&&(a=!0,o.loadMesh(e,i))}),e.setAttribute("nav-mesh")}),AFRAME.GLTFModelPlus.registerComponent("pinnable","pinnable"),AFRAME.GLTFModelPlus.registerComponent("media","media",(e,t,n)=>{n.id&&e.setAttribute("networked",{template:"#interactable-media",owner:"scene",persistent:!0,networkId:n.id}),e.setAttribute("media-loader",{src:n.src,resize:!0,resolve:!0,fileIsOwned:!0,animate:!1}),n.pageIndex&&e.setAttribute("media-pager",{index:n.pageIndex}),void 0!==n.paused&&e.setAttribute("media-video",{videoPaused:n.paused}),n.time&&e.setAttribute("media-video",{time:n.time})}),AFRAME.GLTFModelPlus.registerComponent("image","image",d),AFRAME.GLTFModelPlus.registerComponent("video","video",d,(e,t,n)=>"paused"===t?{name:"video-pause-state",property:t,value:n}:null),AFRAME.GLTFModelPlus.registerComponent("link","link",d),AFRAME.GLTFModelPlus.registerComponent("hoverable","is-remote-hover-target",e=>{e.setAttribute("is-remote-hover-target",""),e.setAttribute("tags",{isHandCollisionTarget:!0})}),AFRAME.GLTFModelPlus.registerComponent("spawner","spawner",(e,t,n)=>{e.setAttribute("media-loader",{src:n.src,resolve:!0,fileIsOwned:!0,animate:!1}),e.setAttribute("css-class","interactable"),e.setAttribute("super-spawner",{src:n.src,resolve:!0,template:"#interactable-media"}),e.setAttribute("hoverable-visuals",{cursorController:"#cursor-controller"}),e.setAttribute("ammo-body",{mass:0,type:r.STATIC,collisionFilterGroup:c.INTERACTABLES,collisionFilterMask:c.DEFAULT_SPAWNER}),e.setAttribute("is-remote-hover-target",""),e.setAttribute("tags",{isHandCollisionTarget:!0})});const h={video:{mappedComponent:"video-pause-state",publicProperties:{paused:{mappedProperty:"paused",getMappedValue:e=>!!e}}},"loop-animation":{mappedComponent:"loop-animation",publicProperties:{paused:{mappedProperty:"paused",getMappedValue:e=>!!e}}}};AFRAME.GLTFModelPlus.registerComponent("trigger-volume","trigger-volume",(e,t,n,i,a)=>{const{size:r,target:s,enterComponent:l,enterProperty:c,enterValue:u,leaveComponent:d,leaveProperty:m,leaveValue:p}=n;let f,g,b;try{if(f=o(l,c,h),g=o(d,m,h),!(b=a[s]))throw new Error(`Couldn't find target entity with index: ${s}.`)}catch(e){return void console.warn(`Error inflating gltf component "trigger-volume": ${e.message}`)}e.setAttribute("trigger-volume",{colliders:"#player-camera",size:r,target:b,enterComponent:f.mappedComponent,enterProperty:f.mappedProperty,enterValue:f.getMappedValue(u),leaveComponent:g.mappedComponent,leaveProperty:g.mappedProperty,leaveValue:g.getMappedValue(p)})})},43:function(e){e.exports={en:{"auth.verifying":"Verifying...","auth.verified-title":"E-Mail Verified!","auth.verified":"Your email has been verified!\nYou can now close this browser tab and return to Hubs.","auth.spoke-verified":"You email has been verified!\nYou can now close this browser tab and return to Spoke.","sign-in.prompt":"Sign in to pin objects in rooms.","sign-in.auth-started":"Email sent!\n\nTo continue, go click on the link in the email using your phone, tablet, or PC.","sign-in.pin":"You'll need to sign in to pin objects.","sign-in.pin-complete":"You are now signed in.","sign-in.unpin":"You'll need to sign in to un-pin objects.","sign-in.unpin-complete":"You are now signed in.","sign-in.change-scene":"You'll need to sign in to change the scene.","sign-in.change-scene-complete":"You are now signed in.","sign-in.rename-room":"You'll need to sign in to rename axon park.","sign-in.rename-room-complete":"You are now signed in.","sign-in.close-room":"You'll need to sign in to close axon park.","sign-in.close-room-complete":"You are now signed in.","sign-in.mute-user":"You'll need to sign in to mute other users.","sign-in.mute-user-complete":"You are now signed in.","sign-in.kick-user":"You'll need to sign in to kick other users.","sign-in.kick-user-complete":"You are now signed in.","sign-in.create-avatar":"You'll need to sign in to create avatars.","sign-in.create-avatar-complete":"You are now signed in.","sign-in.as":"Signed in as","sign-in.in":"Sign In","sign-in.out":"Sign Out","rename-room.message":"Enter the new name for axon park.","rename-room.rename":"Rename Axon Park","close-room.message":"Closing this room will remove yourself and others from axon park, shutting it down permanently.\n\nAre you sure? This action cannot be undone.","close-room.confirm":"Yes, Close Axon Park","close-room.cancel":"Cancel","entry.room":"Immersive Education","entry.enter-room-title":"Lobby","entry.enter-room":"enter or send to device","entry.leave-room":"Leave Axon Park","entry.change-scene":"Choose a Scene","entry.in-lobby-notice":"You are viewing Axon Park from the lobby.","entry.screen-prefix":"Enter on ","entry.desktop-screen":"Screen","entry.mobile-screen":"Phone","entry.mobile-safari":"Safari","entry.generic-prefix":" ","entry.generic-medium":"Connected VR Headset","entry.generic-subtitle-desktop":"Oculus or SteamVR","entry.gearvr-prefix":"Enter on ","entry.gearvr-medium":"Gear VR","entry.choose-device":"Choose Device","entry.device-prefix-desktop":" ","entry.device-prefix-mobile":" ","entry.device-medium":"Send to Device","entry.device-subtitle-desktop":"Standalone VR or Phone","entry.device-subtitle-mobile":"Standalone VR or PC","entry.device-subtitle-vr":"Phone or PC","entry.cardboard":"Enter on Google Cardboard","entry.daydream-prefix":"Enter on ","entry.daydream-medium":"Daydream","entry.daydream-via-chrome":"Using Google Chrome","entry.invite-others":"invite others","entry.invite-others-nag":"invite","entry.invite-team-nag":"Invite a hubs team member","entry.enable-screen-sharing":"Share my desktop","entry.return-to-vr":"Return to VR","entry.enter-in-vr":"Enter in VR","entry.lobby":"Lobby","entry.back":"Back","entry.notify_me":"Notify me when others are here","entry.mute-on-entry":"Mute my microphone","profile.save":"Accept","profile.display_name.validation_warning":"Alphanumerics and hyphens. At least 3 characters, no more than 32","profile.header":"Name & Avatar","profile.avatar-selector.loading":"Loading Avatars...","profile.terms_of_use":"Terms of Use","profile.privacy_notice":"Privacy Notice","profile.choose_avatar":"Choose an Avatar","profile.tabs.legacy":"Default","profile.tabs.skinnable":"Custom Skin","profile.tabs.url":"Custom Model","profile.info":"Resources for creating custom avatar models can be found","profile.info-link":"here","avatar-editor.info":"Resources for creating custom avatar skins can be found","avatar-editor.info-link":"here","media-browser.search-placeholder.scenes":"Search Scenes...","media-browser.search-placeholder.avatars":"Search Avatars...","media-browser.search-placeholder.videos":"Search the web...","media-browser.search-placeholder.images":"Search the web...","media-browser.search-placeholder.youtube":"Search for videos...","media-browser.search-placeholder.gifs":"Search for GIFs...","media-browser.search-placeholder.twitch":"Search for streams...","media-browser.search-placeholder.sketchfab":"Search for models...","media-browser.search-placeholder.poly":"Search for models...","media-browser.search-placeholder.base":"Search...","media-browser.add_custom_object":"Custom URL or File","media-browser.add_custom_scene":"Custom Scene","media-browser.add_custom_avatar":"Avatar GLB URL","media-browser.privacy_policy":"Privacy Policy","media-browser.spoke":"Spoke","media-browser.report_issue":"Report Issue","media-browser.powered_by.images":"Search by Bing | ","media-browser.powered_by.videos":"Search by Bing | ","media-browser.powered_by.youtube":"Search by Google | ","media-browser.powered_by.gifs":"Search by Tenor | ","media-browser.powered_by.sketchfab":"Search by Sketchfab | ","media-browser.powered_by.poly":"Search by Google | ","media-browser.powered_by.twitch":"Search by Twitch | ","media-browser.powered_by.scenes":"Made with ","media-browser.powered_by.avatars":" ","media-browser.nav_title.youtube":"YouTube","media-browser.nav_title.videos":"Videos","media-browser.nav_title.images":"Images","media-browser.nav_title.gifs":"GIFs","media-browser.nav_title.scenes":"Scenes","media-browser.nav_title.avatars":"Avatars","media-browser.nav_title.sketchfab":"Sketchfab","media-browser.nav_title.poly":"Google Poly","media-browser.nav_title.twitch":"Twitch","media-browser.create-avatar":"Create Avatar","media-browser.create-scene":"Create Scene with Spoke","audio.title":"Audio Setup","audio.talk_to_test":"talk","audio.click_to_test":"click","audio.subtitle-desktop":"Confirm HMD speaker output","audio.subtitle-mobile":"Earphones are recommended","audio.enter-now":"Enter Now","audio.hmd-mic-warning":"Your HMD mic is not chosen","audio.grant-title":"Grant mic permissions","audio.grant-subtitle":"Mic access needed to be heard by others","audio.granted-title":"Mic permissions granted","audio.granted-subtitle":"You can still mute yourself in-game","audio.granted-next":"Next","exit.subtitle.exited":"Your session has ended. Refresh your browser to start a new one.","exit.subtitle.closed":"This room is no longer available.","exit.subtitle.denied":"You are not permitted to join this room. Please request permission from the room creator.","exit.subtitle.kicked":"You have been kicked from axon park.","exit.subtitle.left":"You have left axon park.","exit.subtitle.full":"This room is full, please try again later.","exit.subtitle.connect_error":"Unable to connect to this room, please try again later.","exit.subtitle.version_mismatch":"The version you deployed is not available yet. Your browser will refresh in 5 seconds.","autoexit.title":"Auto-ending session in ","autoexit.title_units":" seconds","autoexit.subtitle":"You have started another session.","autoexit.cancel":"CANCEL","presence.entered_room":"entered axon park.","presence.entered_lobby":"entered axon park's lobby.","presence.join_lobby":"joined the axon park lobby.","presence.join_room":"joined axon park.","presence.leave":"left.","presence.name_change":"is now known as","presence.scene_change":"changed the scene to","presence.hub_name_change":"changed the name of the room to","presence.in_lobby":"Axon Park Lobby","presence.in_room":"In Axon Park","home.create_a_room":"Initialize Axon Park","home.take_a_tour":"Take a Tour","home.room_create_options":"options","home.room_create_button":"Initialize Axon Park","home.create_name.validation_warning":"Invalid name, limited to 4 to 64 characters and limited symbols.","home.join_us":"Join the Conversation","home.have_code":"Have an axon park code?","home.add_to_discord_1":"Add the","home.add_to_discord_2":"Hubs Bot","home.add_to_discord_3":"to Discord","home.create_with_spoke":"Create a Scene","home.report_issue":"Report Issues","home.source_link":"Source","home.whats_new_link":"What's New","home.spoke_link":"Spoke","home.about_link":"About","home.community_link":"Community","home.privacy_notice":"Privacy Notice","home.terms_of_use":"Terms of Use","home.get_updates":"Get Updates","home.hero_title":"A new way to get together","home.hero_blurb":"The future of learning is virtual.\nEqualizing access to premier quality education.","home.made_with_love":"made with  by ","home.environment_author_by":" by ","dialog.close":"close","mailing_list.privacy_label":"I'm okay with Mozilla handling my info as explained in","mailing_list.privacy_link":"this Privacy Notice","link.link_page_header_entry":"Enter your code:","link.link_page_header_headset":"Enter Send to Device code:","link.linking_a_headset":"Have a letter code?","link.try_again":"We couldn't find that code.\nPlease try again.","help.report_issue":"Report an Issue","scene.logo_tagline":"A new way to get together","scene.create_button":"Create a room with this scene","scene.tweet_button":"Share on Twitter","scene.unavailable":"This scene is no longer available.","link.in_your_browser":"In your device's browser, go to:","link.enter_code":"Then, enter this one-time code:","link.do_not_close":"Your account and avatar will be transferred to the device.\nKeep this page open to use this code.","link.connect_headset":"Send to Device","link.cancel":"cancel","invite.enter_via":"Enter via ","invite.enter_via_modal":"Others may enter via ","invite.tweet":"tweet","invite.and_enter_code":" with code:","invite.or_visit":"or share permalink","invite.or_visit_modal":"or by visiting permalink","spoke.primary_tagline":"make your space","spoke.secondary_tagline":"Create 3D social scenes for ","spoke.thank_you":"Thank you for downloading Spoke!","spoke.download_win":"Download for Windows","spoke.download_macos":"Download for Mac","spoke.download_linux":"Download for Linux","spoke.download_unsupported":"View Releases","spoke.browse_all_versions":"Browse All Versions","spoke.beginner_tutorial_button":"Learn Spoke in 5 Minutes","spoke.advanced_tutorial_button":"Advanced Spoke in 10 minutes","spoke.play_button":"Learn Spoke in 5 Minutes","commands.fly":"Toggle fly mode.","commands.grow":"Increase your avatar's size.","commands.shrink":"Decrease your avatar's size.","commands.scene":"Change the scene.","commands.rename":"Rename the room.","commands.help":"Show help.","commands.leave":"Disconnect from axon park.","commands.duck":"The duck tested well. Quack.","commands.debug":"Toggle physics debug rendering.","settings.change-avatar":"Set Name & Avatar","settings.change-scene":"Choose a Scene","settings.rename-room":"Set Axon Park Name...","settings.close-room":"Close Axon Park...","settings.room-info":"Axon Park Info","settings.create-room":"New Axon Park...","settings.create-scene":"Get Spoke","settings.send-feedback":"Send Feedback","settings.whats-new":"What's New","settings.features":"Help","settings.controls":"Controls","settings.community":"Join Discord","settings.tips":"Show Tips","settings.report":"Report Issue","settings.terms":"Terms of Use","settings.privacy":"Privacy Notice","settings.help":"Help","settings.row-profile":"Profile","settings.row-room":"Axon Park","tips.mobile.video_share_mode":"Tap to stop sharing video.","tips.mobile.pen_mode":"Tap icon again to end drawing.","tips.mobile.mute_mode":"You are muted. Tap to unmute.","tips.mobile.freeze_mode":"Two-finger tap to hide menus.","tips.mobile.look":"Welcome!  Tap and drag to look around.","tips.mobile.locomotion":"Great! To move, pinch with two fingers.","tips.mobile.spawn_menu-pre":"Use the ","tips.mobile.spawn_menu-post":"at the top to create objects.","tips.mobile.freeze_gesture":"Two-finger tap to show menus.","tips.mobile.object_grab":"Drag an object to move or throw it.","tips.mobile.object_rotate_button-pre":"Tap and drag ","tips.mobile.object_rotate_button-post":" to rotate.","tips.mobile.object_scale_button-pre":"Tap and drag ","tips.mobile.object_scale_button-post":" to scale.","tips.mobile.object_recenter_button-pre":"Tap ","tips.mobile.object_recenter_button-post":" to have the object face you.","tips.mobile.object_pin":"Pin an object to save it to axon park.","tips.mobile.invite":"Use the Invite button to share axon park.","tips.desktop.video_share_mode":"You're streaming. Select again to stop sharing video.","tips.desktop.pen_mode":"Press ESC or right click to drop pen. Ctrl-Z to undo.","tips.desktop.mirror_mode":"Press ESC to end camera mirroring.","tips.desktop.mute_mode":"You are muted. Click or press M to un-mute.","tips.desktop.look":"Welcome to Hubs!  Click and drag to look around.","tips.desktop.locomotion":"Great! Now, use the W A S D keys to move. Hold shift to boost.","tips.desktop.turning":"Perfect. Use the Q and E keys to rotate.","tips.desktop.spawn_menu-pre":"To create objects, click the ","tips.desktop.spawn_menu-post":"button at the top of the screen, or press Ctrl 1 through 7.","tips.desktop.freeze_gesture":"Press and hold spacebar to show object menus.","tips.desktop.menu_hover":"Now, point the cursor at an object to show the menu.","tips.desktop.object_grab":"Click and drag an object to move it. Or, flick to throw it!","tips.desktop.object_pin":"Pin an object to save it to axon park.","tips.desktop.object_zoom":"Scroll to move this object towards and away from you.","tips.desktop.object_rotate_button-pre":"Click and drag ","tips.desktop.object_rotate_button-post":" to rotate the object.","tips.desktop.object_scale_button-pre":"Click and drag ","tips.desktop.object_scale_button-post":" to scale the object.","tips.desktop.object_recenter_button-pre":"Click ","tips.desktop.object_recenter_button-post":" to rotate the object to face you. Helpful if you drop it!","tips.desktop.object_scale":"Hold shift and scroll to scale it bigger and smaller.","tips.desktop.pen_color":"Use Shift-Q and Shift-E to change the pen color.","tips.desktop.pen_size":"Hold Shift and scroll to change the pen size.","tips.desktop.invite":"Nobody else is here. Use the Invite button at the top to share this room.","loader.entering_lobby":"Entering lobby...","loader.loading":"Loading ","loader.object":"object","loader.objects":"objects","change-scene-dialog.change-scene":"Change Scene","change-scene-dialog.create-in-spoke":"Or, create a new scene using Spoke.","change-scene-dialog.new-spoke-project":"Launch Spoke","avatar-url-dialog.apply":"Apply","interstitial.prompt":"Continue","feedback.prompt":"Feedback","discord.primary_tagline":"Share a virtual room with your community.\nWatch videos, play with 3D objects, or just hang out.","discord.secondary_tagline":"No downloads or sign up. Full VR support too.","discord.contact_us":"Request Beta Invite","discord.community_link":"Hubs Discord","discord.splash_tag":"Designed for serious businessing.","client-info.kick-button":"Kick","client-info.hide-button":"Hide","client-info.unhide-button":"Un-hide ","client-info.mute-button":"Mute","client-info.cancel":"Cancel"}}},48:function(e,t,n){"use strict";var o=n(135),i=n(93),a=n(70),r=n.n(a),s=n(112),l=n.n(s),c=n(68),u=n(49);const d=["Baers-Pochard","Baikal-Teal","Barrows-Goldeneye","Blue-Billed","Blue-Duck","Blue-Winged","Brown-Teal","Bufflehead","Canvasback","Cape-Shoveler","Chestnut-Teal","Chiloe-Wigeon","Cinnamon-Teal","Comb-Duck","Common-Eider","Common-Goldeneye","Common-Merganser","Common-Pochard","Common-Scoter","Common-Shelduck","Cotton-Pygmy","Crested-Duck","Crested-Shelduck","Eatons-Pintail","Falcated","Ferruginous","Freckled-Duck","Gadwall","Garganey","Greater-Scaup","Green-Pygmy","Grey-Teal","Hardhead","Harlequin","Hartlaubs","Hooded-Merganser","Hottentot-Teal","Kelp-Goose","King-Eider","Lake-Duck","Laysan-Duck","Lesser-Scaup","Long-Tailed","Maccoa-Duck","Mallard","Mandarin","Marbled-Teal","Mellers-Duck","Merganser","Northern-Pintail","Orinoco-Goose","Paradise-Shelduck","Plumed-Whistler","Puna-Teal","Pygmy-Goose","Radjah-Shelduck","Red-Billed","Red-Crested","Red-Shoveler","Ring-Necked","Ringed-Teal","Rosy-Billed","Ruddy-Shelduck","Salvadoris-Teal","Scaly-Sided","Shelduck","Shoveler","Silver-Teal","Smew","Spectacled-Eider","Spot-Billed","Spotted-Whistler","Steamerduck","Stellers-Eider","Sunda-Teal","Surf-Scoter","Tufted-Duck","Velvet-Scoter","Wandering-Whistler","Whistling-duck","White-Backed","White-Cheeked","White-Winged","Wigeon","Wood-Duck","Yellow-Billed"];function h(e){return e[Math.floor(Math.random()*e.length)]}const m=u.a.map(e=>e.id);function p(){return{avatarId:h(m)}}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){g(e,t,n[t])})}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return _}),n.d(t,"b",function(){return A});const b="___hubs_store",v=Symbol(),y="ret-oauth-flow-account-credentials",E=new o.Validator,_={id:"/HubsStore",definitions:{profile:{type:"object",additionalProperties:!1,properties:{displayName:{type:"string",pattern:"^[A-Za-z0-9-]{3,32}$"},avatarId:{type:"string"},personalAvatarId:{type:"string"}}},credentials:{type:"object",additionalProperties:!1,properties:{token:{type:["null","string"]},email:{type:["null","string"]}}},activity:{type:"object",additionalProperties:!1,properties:{hasFoundFreeze:{type:"boolean"},hasChangedName:{type:"boolean"},hasAcceptedProfile:{type:"boolean"},lastEnteredAt:{type:"string"},hasPinned:{type:"boolean"},hasRotated:{type:"boolean"},hasRecentered:{type:"boolean"},hasScaled:{type:"boolean"},hasHoveredInWorldHud:{type:"boolean"}}},settings:{type:"object",additionalProperties:!1,properties:{lastUsedMicDeviceId:{type:"string"}}},confirmedDiscordRooms:{type:"array",items:{type:"string"}},uploadPromotionTokens:{type:"array",items:{type:"object",additionalProperties:!1,properties:{fileId:{type:"string"},promotionToken:{type:"string"}}}},creatorAssignmentTokens:{type:"array",items:{type:"object",additionalProperties:!1,properties:{hubId:{type:"string"},creatorAssignmentToken:{type:"string"}}}}},type:"object",properties:{profile:{$ref:"#/definitions/profile"},credentials:{$ref:"#/definitions/credentials"},activity:{$ref:"#/definitions/activity"},settings:{$ref:"#/definitions/settings"},confirmedDiscordRooms:{$ref:"#/definitions/confirmedDiscordRooms"},uploadPromotionTokens:{$ref:"#/definitions/uploadPromotionTokens"},creatorAssignmentTokens:{$ref:"#/definitions/creatorAssignmentTokens"}},additionalProperties:!1};class A extends c.a{constructor(){super(),g(this,"init",()=>{this.update({profile:f({},p(),this.state.profile||{})}),this.state.activity.hasChangedName||this.update({profile:{displayName:`${h(d)}-${Math.floor(1e4+1e4*Math.random())}`}})}),g(this,"resetToRandomLegacyAvatar",()=>{this.update({profile:f({},this.state.profile||{},p())})}),null===localStorage.getItem(b)&&localStorage.setItem(b,JSON.stringify({})),this.update({activity:{},settings:{},credentials:{},profile:{},confirmedDiscordRooms:[],uploadPromotionTokens:[],creatorAssignmentTokens:[]});const e=r.a.getJSON(y);e&&(this.update({credentials:e}),this.resetToRandomLegacyAvatar(),r.a.remove(y))}get state(){return this.hasOwnProperty(v)||(this[v]=JSON.parse(localStorage.getItem(b))),this[v]}get credentialsAccountId(){return this.state.credentials.token?l()(this.state.credentials.token).sub:null}resetConfirmedDiscordRooms(){this.update({confirmedDiscordRooms:[]},{arrayMerge:(e,t)=>t})}resetTipActivityFlags(){this.update({activity:{hasRotated:!1,hasPinned:!1,hasRecentered:!1,hasScaled:!1}})}update(e,t){const n=Object(i.default)(this.state,e,t),{valid:o}=E.validate(n,_);if(!o)throw new Error("Write to store failed schema validation.");return localStorage.setItem(b,JSON.stringify(n)),delete this[v],this.dispatchEvent(new CustomEvent("statechanged")),n}}},49:function(e,t,n){"use strict";n.d(t,"a",function(){return o});const o=[{id:"botdefault",model:"https://asset-bundles-prod.reticulum.io/bots/BotDefault_Avatar-9f71f8ff22.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botdefault-thumb-42C4C7D3C01D085EAFDAC8BACE591CE6.png"},{id:"botbobo",model:"https://asset-bundles-prod.reticulum.io/bots/BotBobo_Avatar-f9740a010b.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botbobo-thumb-261278FD5831E9CD89610D15948F23E4.png"},{id:"botdom",model:"https://asset-bundles-prod.reticulum.io/bots/BotDom_Avatar-0c48bf15a5.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botdom-thumb-1160EB5E81D24F12CE643C520CE1E99E.png"},{id:"botgreg",model:"https://asset-bundles-prod.reticulum.io/bots/BotGreg_Avatar-98d39797bb.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botgreg-thumb-F2A37F14F9C342EE44DDE9B24DD9B9FC.png"},{id:"botguest",model:"https://asset-bundles-prod.reticulum.io/bots/BotGuest_Avatar-78cd857332.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botguest-thumb-F7A471250E2C10C2709325C3B02A8BBB.png"},{id:"botjim",model:"https://asset-bundles-prod.reticulum.io/bots/BotJim_Avatar-d28005a687.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botjim-thumb-A2D195C1A51A082BCED58BD172481B39.png"},{id:"botkev",model:"https://asset-bundles-prod.reticulum.io/bots/BotKev_Avatar-a95787bb51.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botkev-thumb-90746A7349E3F964C913EA612EE9A53F.png"},{id:"botpinky",model:"https://asset-bundles-prod.reticulum.io/bots/BotPinky_Avatar-b0b93f8675.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botpinky-thumb-C2E69D4479077766B988DC3EE4F30BE5.png"},{id:"botrobert",model:"https://asset-bundles-prod.reticulum.io/bots/BotRobert_Avatar-e9554880f3.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botrobert-thumb-9C33F2C752326E2CF4321EAA7BDB4E47.png"},{id:"botwoody",model:"https://asset-bundles-prod.reticulum.io/bots/BotWoody_Avatar-0140485a23.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botwoody-thumb-F1F1FA7E21301B5AC1D8872B4ED0CC56.png"}]},53:function(e,t,n){"use strict";function o(e,t){e.material&&(Array.isArray(e.material)?e.material.forEach(t):t(e.material))}function i(e,t){if(e.material)return Array.isArray(e.material)?e.material.map(t):t(e.material)}n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i})},55:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return l});const o={URL:1,FILE:2,CLIPBOARD:3,SPAWNER:4},i={URL_IMAGE:0,URL_VIDEO:1,URL_MODEL:2,URL_PDF:3,URL_AUDIO:4,FILE_IMAGE:8,FILE_VIDEO:9,FILE_MODEL:10,FILE_PDF:11,FILE_AUDIO:12,CLIPBOARD_IMAGE:16,CLIPBOARD_VIDEO:17,CLIPBOARD_MODEL:18,CLIPBOARD_PDF:19,CLIPBOARD_AUDIO:20,SPAWNER_IMAGE:24,SPAWNER_VIDEO:25,SPAWNER_MODEL:26,SPAWNER_PDF:27,SPAWNER_AUDIO:28,CAMERA:30,UNKNOWN:31};function a(e,t,n,i,a){return e===o.URL?t:e===o.FILE?n:e===o.CLIPBOARD?i:a}const r={"image/":[i.URL_IMAGE,i.FILE_IMAGE,i.CLIPBOARD_IMAGE,i.SPAWNER_IMAGE],"model/":[i.URL_MODEL,i.FILE_MODEL,i.CLIPBOARD_MODEL,i.SPAWNER_MODEL],"application/x-zip-compressed":[i.URL_MODEL,i.FILE_MODEL,i.CLIPBOARD_MODEL,i.SPAWNER_MODEL],"video/":[i.URL_VIDEO,i.FILE_VIDEO,i.CLIPBOARD_VIDEO,i.SPAWNER_VIDEO],"application/vnd.apple.mpegurl":[i.URL_VIDEO,i.FILE_VIDEO,i.CLIPBOARD_VIDEO,i.SPAWNER_VIDEO],"application/x-mpegurl":[i.URL_VIDEO,i.FILE_VIDEO,i.CLIPBOARD_VIDEO,i.SPAWNER_VIDEO],"audio/":[i.URL_AUDIO,i.FILE_AUDIO,i.CLIPBOARD_AUDIO,i.SPAWNER_AUDIO],"application/pdf":[i.URL_PDF,i.FILE_PDF,i.CLIPBOARD_PDF,i.SPAWNER_PDF]},s={".m3u8":[i.URL_VIDEO,i.FILE_VIDEO,i.CLIPBOARD_VIDEO,i.SPAWNER_VIDEO]};function l(e,t,n){for(const n in r)if(t.toLowerCase().startsWith(n)){return a(e,...r[n])}if(n)for(const t in s)if(n.toLowerCase().endsWith(t)){return a(e,...s[t])}return i.UNKNOWN}},58:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n(83),i=n.n(o);const a=window.ga;function r(e,t){const n={NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}.SENTRY_DSN,o={NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}.GA_TRACKING_ID;n&&(console.log("Tracking: Sentry DSN: "+n),i.a.config(n).install()),a&&o&&(console.log("Tracking: Google Analytics ID: "+o),a("create",o,"auto"),e&&a("set","page",e),t&&a("set","title",t),a("send","pageview"))}},7:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l});var o=n(0),i=n.n(o),a=n(1),r=n.n(a);const s=i.a.createContext({}),l=({sound:e,children:t})=>i.a.createElement(s.Consumer,null,n=>i.a.cloneElement(t,{onMouseEnter:o=>{n&&n.playSound&&n.playSound(e||"play_sound-hud_hover_start"),t.props.onMouseEnter&&t.props.onMouseEnter(o)}}));l.propTypes={children:r.a.object,sound:r.a.string}},75:function(e,t,n){"use strict";function o(){return new Promise(e=>{setTimeout(e,0)})}n.d(t,"a",function(){return o})},8:function(e,t,n){"use strict";n.d(t,"k",function(){return f}),n.d(t,"i",function(){return g}),n.d(t,"j",function(){return v}),n.d(t,"b",function(){return y}),n.d(t,"d",function(){return E}),n.d(t,"n",function(){return _}),n.d(t,"a",function(){return S}),n.d(t,"e",function(){return w}),n.d(t,"c",function(){return R}),n.d(t,"m",function(){return P}),n.d(t,"l",function(){return k}),n.d(t,"h",function(){return x}),n.d(t,"g",function(){return D}),n.d(t,"f",function(){return I});var o=n(55),i=n(15),a=n(158),r=n.n(a),s=n(53);const l="hubs.local,dev.reticulum.io".split(",");({NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}).CORS_PROXY_SERVER&&l.push({NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}.CORS_PROXY_SERVER);const c=Object(i.f)("/api/v1/media"),u={gltf:"model/gltf",glb:"model/gltf-binary",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",pdf:"application/pdf",mp4:"video/mp4",mp3:"audio/mpeg"},d=n(119),h=d.SHAPE,m=d.FIT;const p=e=>(function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode("0x"+t)))})(e).replace(/=+$/g,"").replace(/\+/g,"-").replace(/\//g,"_"),f=(e,t,n)=>"dev.reticulum.io".includes("hubs.local")&&e.includes("hubs.local")?e:`https://farspark-dev.reticulum.io/thumbnail/${p(e)}?w=${t}&h=${n}`,g=(e,t=null)=>{if(!e.startsWith("http:")&&!e.startsWith("https:"))return e;const n=null!==t;if(!n)try{const t=new URL(e);if(l.find(e=>t.hostname.endsWith(e)))return e}catch(e){}if(n||!{NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}.CORS_PROXY_SERVER){return`https://farspark-dev.reticulum.io/0/${n?"extract":"raw"}/0/0/0/${t||0}/${p(e)}`}return`https://${{NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}.CORS_PROXY_SERVER}/${e}`},b=new Map,v=async(e,t)=>{const n=`${e}|${t}`;if(b.has(n))return b.get(n);const o=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({media:{url:e,index:t}})}).then(e=>e.json());return b.set(n,o),o},y=e=>t=>{if("string"!=typeof t||""===t)return"";if(/^(https?:)?\/\//i.test(t))return t;if(/^data:.*,.*$/i.test(t))return t;if(/^blob:.*$/i.test(t))return t;if({NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}.CORS_PROXY_SERVER){const n=`https://${{NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}.CORS_PROXY_SERVER}/`;if(e.startsWith(n)){const o=decodeURIComponent(e.substring(n.length)).split("/"),i=new URL(t).pathname;return n+(o.slice(0,o.length-1).join("/")+"/"+i)}}return t},E=e=>{if(e.startsWith("hubs://")&&e.endsWith("/video"))return"video/vnd.hubs-webrtc";const t=new URL(e).pathname.split(".").pop();return u[t]},_=e=>{const t=new FormData;return t.append("media",e),t.append("promotion_mode","with_token"),fetch(c,{method:"POST",body:t}).then(e=>e.json())};let A=0;const S=(e,t,n,i=!1,a=!1,r=!0)=>{const s=AFRAME.scenes[0],l=document.createElement("a-entity");l.id="interactable-media-"+A++,l.setAttribute("networked",{template:t});const c=e instanceof File;l.setAttribute("media-loader",{resize:a,resolve:i,animate:r,src:"string"==typeof e?e:"",fileIsOwned:!c}),l.object3D.matrixNeedsUpdate=!0,s.appendChild(l);const u=setTimeout(()=>{s.emit("media-loading",{src:e})},100);["model-loaded","video-loaded","image-loaded"].forEach(t=>{l.addEventListener(t,async()=>{clearTimeout(u),s.emit("media-loaded",{src:e})},{once:!0})});const d=new Promise(function(t){c?function(e,t){const n=new FileReader;n.onload=function(e){const n=new DataView(e.target.result);if(65496!=n.getUint16(0,!1))return t(-2);const o=n.byteLength;let i=2;for(;i<o;){if(n.getUint16(i+2,!1)<=8)return t(-1);const e=n.getUint16(i,!1);if(i+=2,65505==e){if(1165519206!=n.getUint32(i+=2,!1))return t(-1);const e=18761==n.getUint16(i+=6,!1);i+=n.getUint32(i+4,e);const o=n.getUint16(i,e);i+=2;for(let a=0;a<o;a++)if(274==n.getUint16(i+12*a,e))return t(n.getUint16(i+12*a+8,e))}else{if(65280!=(65280&e))break;i+=n.getUint16(i,!1)}}return t(-1)},n.readAsArrayBuffer(e)}(e,e=>{t(e)}):t(1)});return c?_(e).then(e=>{const t=new URL(e.raw);t.searchParams.set("token",e.meta.access_token),l.setAttribute("media-loader",{resolve:!1,src:t.href,fileId:e.file_id}),window.APP.store.update({uploadPromotionTokens:[{fileId:e.file_id,promotionToken:e.meta.promotion_token}]})}).catch(e=>{console.error("Media upload failed",e),l.setAttribute("media-loader",{src:"error"})}):e instanceof MediaStream&&l.setAttribute("media-loader",{src:`hubs://clients/${NAF.clientId}/video`}),n&&l.addEventListener("media_resolved",({detail:e})=>{const t=Object(o.c)(n,e.contentType,e.src);s.emit("object_spawned",{objectType:t})}),{entity:l,orientation:d}};function w(e){const t=/\bskinning_vertex\b/,n=/\bgl_FragColor\b/,o=["MeshStandardMaterial","MeshBasicMaterial","MobileStandardMaterial"],i=[];return e.traverse(e=>{e.material&&(e.material=Object(s.b)(e,a=>{if(!o.includes(a.type))return a;if(e.el.classList.contains("ui"))return a;if(e.el.classList.contains("hud"))return a;if(e.el.getAttribute("text-button"))return a;const s=a.clone();return s.onBeforeCompile=(e=>{if(!t.test(e.vertexShader))return;e.uniforms.hubs_IsFrozen={value:!1},e.uniforms.hubs_EnableSweepingEffect={value:!1},e.uniforms.hubs_SweepParams={value:[0,0]},e.uniforms.hubs_InteractorOnePos={value:[0,0,0]},e.uniforms.hubs_InteractorTwoPos={value:[0,0,0]},e.uniforms.hubs_HighlightInteractorOne={value:!1},e.uniforms.hubs_HighlightInteractorTwo={value:!1},e.uniforms.hubs_Time={value:0};const o=e.vertexShader.split("\n"),a=o.findIndex(e=>t.test(e));o.splice(a+1,0,"\n        if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\n          vec4 wt = modelMatrix * vec4(transformed, 1);\n\n          // Used in the fragment shader below.\n          hubs_WorldPosition = wt.xyz;\n        }\n      "),o.unshift("varying vec3 hubs_WorldPosition;"),o.unshift("uniform bool hubs_IsFrozen;"),o.unshift("uniform bool hubs_HighlightInteractorOne;"),o.unshift("uniform bool hubs_HighlightInteractorTwo;"),e.vertexShader=o.join("\n");const s=e.fragmentShader.split("\n"),l=s.findIndex(e=>n.test(e));s.splice(l+1,0,r.a),s.unshift("varying vec3 hubs_WorldPosition;"),s.unshift("uniform bool hubs_IsFrozen;"),s.unshift("uniform bool hubs_EnableSweepingEffect;"),s.unshift("uniform vec2 hubs_SweepParams;"),s.unshift("uniform bool hubs_HighlightInteractorOne;"),s.unshift("uniform vec3 hubs_InteractorOnePos;"),s.unshift("uniform bool hubs_HighlightInteractorTwo;"),s.unshift("uniform vec3 hubs_InteractorTwoPos;"),s.unshift("uniform float hubs_Time;"),e.fragmentShader=s.join("\n"),i.push(e.uniforms)}),s.needsUpdate=!0,s}))}),i}function R(e){return window.APP.store.state.uploadPromotionTokens.find(t=>t.fileId===e)}const P=function(){const e=[];return function(t){const n=t.object3DMap.mesh;for(;e.length>0;){const{id:t,entity:n}=e.pop();n.removeAttribute(t)}let o=0;n.traverse(e=>{!e.isMesh||THREE.Sky&&e.__proto__==THREE.Sky.prototype||"Floor_Plan"===e.name||"Ground_Plane"===e.name||(o+=e.geometry.attributes.position.count)}),console.group("traverseMeshesAndAddShapes"),console.log(`scene has ${o} vertices from meshes`);const i=n.children.find(e=>"Floor_Plan"===e.name);(o>2e5||0===o)&&i?(console.log("vertex limit of 200000 exceeded, using floor plan with mesh shape"),i.el.setAttribute("ammo-shape__"+i.name,{type:h.MESH,margin:.01,fit:m.ALL}),e.push({id:"ammo-shape__"+i.name,entity:i.el})):o<2e5&&o>0?(t.setAttribute("ammo-shape__environment",{type:h.MESH,margin:.01,fit:m.ALL}),e.push({id:"ammo-shape__environment",entity:t}),console.log("adding compound mesh shape")):(t.setAttribute("ammo-shape__defaultFloor",{type:h.BOX,margin:.01,halfExtents:{x:4e3,y:.5,z:4e3},offset:{x:0,y:-.5,z:0},fit:m.MANUAL}),e.push({id:"ammo-shape__defaultFloor",entity:t}),console.log("adding default floor collision")),console.groupEnd()}}(),C=new THREE.Vector3;function k(e,t,n,o=!1){const{entity:i,orientation:a}=S(t,"#interactable-media",void 0,!1),r=e.object3D.position;i.object3D.position.set(r.x,r.y,r.z),i.object3D.rotation.copy(e.object3D.rotation),o&&i.object3D.rotateY(Math.PI);const s=n%6+3;return C.set(.75*Math.cos(2*Math.PI*(s/6)),.75*Math.sin(2*Math.PI*(s/6)),.001*s-.05),e.object3D.localToWorld(C),i.object3D.visible=!1,i.addEventListener("image-loaded",()=>{i.object3D.visible=!0,i.setAttribute("animation__photo_pos",{property:"position",dur:800,from:{x:r.x,y:r.y,z:r.z},to:{x:C.x,y:C.y,z:C.z},easing:"easeOutElastic"})},{once:!0}),i.object3D.matrixNeedsUpdate=!0,i.addEventListener("media_resolved",()=>{e.emit("photo_taken",i.components["media-loader"].data.src)},{once:!0}),{entity:i,orientation:a}}const M=/https?:\/\/(hubs.local(:\d+)?|(smoke-)?hubs.mozilla.com)\/scenes\/(\w+)\/?\S*/,T=/https?:\/\/(hubs.local(:\d+)?|(smoke-)?hubs.mozilla.com)\/(\w+)\/?\S*/,x=M.test.bind(M),D=e=>!x(e)&&T.test(e),I=e=>x(e)||D(e)}});
//# sourceMappingURL=avatar-selector-63727f5abefe2f85e012.js.map