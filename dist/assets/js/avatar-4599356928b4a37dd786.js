!function(e){function t(t){for(var o,i,s=t[0],c=t[1],l=t[2],d=0,p=[];d<s.length;d++)i=s[d],r[i]&&p.push(r[i][0]),r[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);for(u&&u(t);p.length;)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={4:0},a=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;a.push([1580,1,0]),n()}({11:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t,n,r,a,i,s){let c={};const l=(e.location.state&&e.location.state.__historyLength||0)+(t?0:1);(n||i||s)&&(delete(c=e.location.state?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}({},e.location.state):{}).__duplicate,n&&(c[n]=r,c.key=n,c.value=r,c.detail=a));const u=void 0!==i?i:"/"===e.location.pathname?"":e.location.pathname,d=void 0!==s?s:e.location.search,p=e.location.state&&e.location.state.__duplicate,m=t||p?e.replace:e.push;c.__historyLength=l,m({pathname:u,search:d,state:c})}function a(e,t,n,o){r(e,!1,t,n,o)}function i(e,t,n,o){r(e,!0,t,n,o)}function s(e,t,n){r(e,!1,null,null,null,t,n)}function c(e){r(e,!1)}function l(e,t){if(!e.location.state||void 0===e.location.state.__historyLength)return;const n=e.location.state.__historyLength;return 0!==n?new Promise(o=>{const r=e.listen(()=>{r(),e.push({pathname:e.location.pathname,search:e.location.search,state:{__historyLength:0,__duplicate:!0}}),t&&e.go(-2),o()});e.go(-n)}):void 0}function u(e){l(e,!0)}function d(e){return`/${e.pathname.split("/").slice(2).join("/")}`}function p(e,t){return`/${e.pathname.split("/")[1]}${t}`}n.d(t,"e",function(){return a}),n.d(t,"f",function(){return i}),n.d(t,"d",function(){return s}),n.d(t,"a",function(){return c}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return u}),n.d(t,"g",function(){return d}),n.d(t,"h",function(){return p})},119:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"e",function(){return u}),n.d(t,"b",function(){return p}),n.d(t,"c",function(){return f}),n.d(t,"d",function(){return b});var o=n(15),r=n(18),a=n(67);function i(e,t,n,o,r,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(o,r){var a=e.apply(t,n);function s(e){i(a,o,r,s,c,"next",e)}function c(e){i(a,o,r,s,c,"throw",e)}s(void 0)})}}const c={LEGACY:"legacy",SKINNABLE:"skinnable",URL:"url"},l=a.a.map(e=>e.id);function u(e){return e&&-1===l.indexOf(e)?e.startsWith("http")?c.URL:c.SKINNABLE:c.LEGACY}function d(){return(d=s(function*(e){const t=yield Object(o.d)(`/api/v1/avatars/${e}`);return t&&t.avatars&&t.avatars[0]})).apply(this,arguments)}function p(e){return m.apply(this,arguments)}function m(){return(m=s(function*(e){switch(u(e)){case c.LEGACY:return{avatar_id:e,gltf_url:a.a.find(t=>t.id===e).model};case c.SKINNABLE:return function(e){return d.apply(this,arguments)}(e);case c.URL:return{avatar_id:e,gltf_url:Object(r.g)(e)}}})).apply(this,arguments)}function h(){return(h=s(function*(e){return p(e).then(e=>e&&e.gltf_url)})).apply(this,arguments)}function f(e){switch(u(e)){case c.LEGACY:return`#${e}`;case c.SKINNABLE:return function(e){return h.apply(this,arguments)}(e);case c.URL:return Object(r.g)(e);default:return e}}function b(e){return g.apply(this,arguments)}function g(){return(g=s(function*(e){switch(u(e)){case c.LEGACY:return a.a.find(t=>t.id===e).thumbnail;case c.SKINNABLE:return p(e).then(e=>e.files.thumbnail);default:return"https://asset-bundles-prod.reticulum.io/bots/avatar_unavailable.png"}})).apply(this,arguments)}},128:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return i});const r="\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n  #include <uv_vertex>\n  #include <uv2_vertex>\n  #include <color_vertex>\n  #include <skinbase_vertex>\n\n  #include <begin_vertex>\n  #include <morphtarget_vertex>\n  #include <skinning_vertex>\n  #include <project_vertex>\n  #include <logdepthbuf_vertex>\n\n  #include <worldpos_vertex>\n  #include <clipping_planes_vertex>\n  #include <fog_vertex>\n}\n",a="\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <aomap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n  #include <clipping_planes_fragment>\n\n  vec4 diffuseColor = vec4(diffuse, opacity);\n  ReflectedLight reflectedLight = ReflectedLight(vec3(0.0), vec3(0.0), vec3(0.0), vec3(0.0));\n  vec3 totalEmissiveRadiance = emissive;\n\n  #include <logdepthbuf_fragment>\n  #include <map_fragment>\n  #include <color_fragment>\n  #include <alphatest_fragment>\n  #include <emissivemap_fragment>\n\n  reflectedLight.indirectDiffuse += vec3(1.0);\n\n  #include <aomap_fragment>\n\n  reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n  vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n  gl_FragColor = vec4(outgoingLight, diffuseColor.a);\n\n  #include <premultiplied_alpha_fragment>\n  #include <tonemapping_fragment>\n  #include <encodings_fragment>\n  #include <fog_fragment>\n}\n";class i extends THREE.ShaderMaterial{constructor(...e){super(...e),o(this,"type","MobileStandardMaterial"),o(this,"isMobileStandardMaterial",!0)}static fromStandardMaterial(e){const t={vertexShader:r,fragmentShader:a,uniforms:{uvTransform:{value:new THREE.Matrix3},diffuse:{value:e.color},opacity:{value:e.opacity},map:{value:e.map},aoMapIntensity:{value:e.aoMapIntensity},aoMap:{value:e.aoMap},emissive:{value:e.emissive},emissiveMap:{value:e.emissiveMap}},fog:!0,lights:!1,opacity:e.opacity,transparent:e.transparent,alphaTest:e.alphaTest,skinning:e.skinning,morphTargets:e.morphTargets,vertexColors:e.vertexColors},n=new i(t);return n.color=e.color,n.map=e.map,n.aoMap=e.aoMap,n.aoMapIntensity=e.aoMapIntensity,n.emissive=e.emissive,n.emissiveMap=e.emissiveMap,n}clone(){return i.fromStandardMaterial(this)}}},129:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return h});var o=n(78),r=n(15),a=n(11);function i(e,t,n,o,r,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(o,r){var a=e.apply(t,n);function s(e){i(a,o,r,s,c,"next",e)}function c(e){i(a,o,r,s,c,"throw",e)}s(void 0)})}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l=["poly","sketchfab","videos","scenes","gifs","images","twitch"],u={entries:[],meta:{}},d={scenes:"scene_listings",images:"bing_images",videos:"bing_videos",youtube:"youtube_videos",gifs:"tenor",sketchfab:"sketchfab",poly:"poly",twitch:"twitch",favorites:"favorites"},p={gifs:"trending",sketchfab:"featured",scenes:"featured",favorites:"my-favorites"},m=["q","filter","cursor"];class h extends o.a{constructor(){var e;super(),e=this,c(this,"_update",function(){var t=s(function*(t){e.result=null,e.dispatchEvent(new CustomEvent("statechanged"));const n=e.getUrlMediaSource(t);if(!n)return;e.previousSource&&e.previousSource===n||(e.dispatchEvent(new CustomEvent("sourcechanged")),e.previousSource=n);const o=new URLSearchParams(t.search);e.requestIndex++;const a=e.requestIndex,i=new URLSearchParams,s=new URLSearchParams(t.search),c=s.get("filter")&&s.get("filter").startsWith("my-");for(const e of m)o.get(e)&&i.set(e,o.get(e));let l;if(i.get("locale",navigator.languages[0]),"avatars"===n||"scenes"===n){const e="avatars"===n?"avatar":"scene";l=c?`${e}s`:`${e}_listings`}else l=d[n];i.set("source",l);let p=!0;"avatars"!==l&&"scenes"!==l&&"favorites"!==l||c&&(window.APP.store.credentialsAccountId?i.set("user",window.APP.store.credentialsAccountId):p=!1);const h=`/api/v1/media/search?${i.toString()}`,f=Object(r.g)(h);if(e.lastSavedUrl===f)return;e.isFetching=!0,e.dispatchEvent(new CustomEvent("statechanged"));const b=p?yield Object(r.c)(h):u;e.requestIndex==a&&(e.result=b,e.nextCursor=e.result&&e.result.meta&&e.result.meta.next_cursor,e.lastFetchedUrl=f,e.isFetching=!1,e.dispatchEvent(new CustomEvent("statechanged")))});return function(e){return t.apply(this,arguments)}}()),c(this,"_legacyAvatarToSearchEntry",e=>({id:e.id,type:"avatar_listing",url:e.url,images:{preview:{url:e.thumbnail,width:720,height:1280}},gltfs:{avatar:e.model}})),c(this,"pageNavigate",e=>{if(-1===e)this.history.goBack();else{const e=this.history.location,t=new URLSearchParams(e.search);t.set("cursor",this.nextCursor),Object(a.d)(this.history,e.pathname,t.toString())}}),c(this,"filterQueryNavigate",(e,t)=>{const n=this.history.location,o=new URLSearchParams(n.search);t?o.set("q",t):o.delete("q"),e?o.set("filter",e):o.delete("filter"),e?o.set("cursor",e):o.delete("cursor"),Object(a.d)(this.history,n.pathname,o.toString())}),c(this,"getSearchClearedSearchParams",(e,t,n)=>{const o=new URLSearchParams(e.search);return o.delete("q"),o.delete("filter"),o.delete("cursor"),n||o.delete("media_nav"),t||o.delete("media_source"),o}),c(this,"_stashLastSearchParams",e=>{const t=new URLSearchParams(e.search);this._stashedParams={},this._stashedSource=null;const n=this.getUrlMediaSource(e);if("favorites"!==n){this._stashedSource=n;for(const e of m){const n=t.get(e);n&&(this._stashedParams[e]=n)}}}),c(this,"clearStashedQuery",()=>{this._stashedParams&&delete this._stashedParams.q}),c(this,"sourceNavigate",e=>{this._sourceNavigate(e,!1,!0)}),c(this,"sourceNavigateToDefaultSource",()=>{this._sourceNavigate(this._stashedSource?this._stashedSource:l[0],!1,!0)}),c(this,"sourceNavigateWithNoNav",e=>{this._sourceNavigate(e,!0,!1)}),c(this,"_sourceNavigate",function(){var t=s(function*(t,n,o){const r=new URLSearchParams(e.history.location.search).get("q"),i=e.getSearchClearedSearchParams(e.history.location);if(r)i.set("q",r);else if(o&&e._stashedParams)for(const n of m){const o=e._stashedParams[n],r="q"===n||e._stashedSource===t;o&&r&&i.set(n,o)}else if("avatars"===t){const t=yield e._hasAccountWithAvatars();i.set("filter",t?"my-avatars":"featured")}else p[t]&&i.set("filter",p[t]);e._stashedParams=null,e._stashedSource=null,n&&i.set("media_nav","false"),"dev.reticulum.io"!==document.location.host?(i.set("media_source",t),Object(a.d)(e.history,e.history.location.pathname,i.toString())):Object(a.d)(e.history,Object(a.h)(e.history.location,`/media/${t}`),i.toString())});return function(e,n,o){return t.apply(this,arguments)}}()),c(this,"_hasAccountWithAvatars",s(function*(){const{credentialsAccountId:e}=window.APP.store;if(!e)return!1;const t=new URLSearchParams;t.set("source","avatars"),t.set("user",e);const n=yield Object(r.c)(`/api/v1/media/search?${t.toString()}`);return!(!n||!n.entries)&&n.entries.length>0})),c(this,"getUrlMediaSource",e=>{const{search:t}=e,n=new URLSearchParams(t),o=Object(a.g)(e);return o.startsWith("/media")||n.get("media_source")?n.get("media_source")||o.substring(7):null}),c(this,"pushExitMediaBrowserHistory",(e,t=!0)=>{e||(e=this.history),t&&this._stashLastSearchParams(e.location);const{pathname:n}=e.location,o=Object(a.g)(e.location).startsWith("/media");Object(a.d)(e,o?Object(a.h)(e.location,"/"):n,this.getSearchClearedSearchParams(e.location).toString()),this.dispatchEvent(new CustomEvent("media-exit"))}),this.requestIndex=0}setHistory(e){this.history=e,this._update(this.history.location),this.history.listen(e=>{this._update(e)})}}},15:function(e,t,n){"use strict";var o=n(118);var r=n(20),a=n(49);function i(e,t,n,o,r,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(o,r){var a=e.apply(t,n);function s(e){i(a,o,r,s,c,"next",e)}function c(e){i(a,o,r,s,c,"throw",e)}s(void 0)})}}n.d(t,"g",function(){return c}),n.d(t,"c",function(){return l}),n.d(t,"i",function(){return m}),n.d(t,"h",function(){return f}),n.d(t,"a",function(){return g}),n.d(t,"e",function(){return _}),n.d(t,"d",function(){return y}),n.d(t,"b",function(){return E}),n.d(t,"f",function(){return S}),n.d(t,"j",function(){return R});document.createElement("a");function c(e,t=!1){return`https://dev.reticulum.io${e}`}function l(e){return u.apply(this,arguments)}function u(){return(u=s(function*(e,t=!1){const n={"Content-Type":"application/json"},o=window.APP.store.state.credentials.token;o&&(n.authorization=`bearer ${o}`);const r=yield fetch(c(e,t),{method:"GET",headers:n});if(200!==r.status)return console.warn("Reticulum fetch failed "+e),null;const a=yield r.text();let i;try{i=JSON.parse(a)}catch(e){i=a}return i})).apply(this,arguments)}let d=null,p=!1;function m(){return h.apply(this,arguments)}function h(){return(h=s(function*(){p=!0,d=null})).apply(this,arguments)}function f(){return b.apply(this,arguments)}function b(){return(b=s(function*(){d||(!p&&document.querySelector("meta[name='ret:version']")?d={version:document.querySelector("meta[name='ret:version']").getAttribute("value"),pool:document.querySelector("meta[name='ret:pool']").getAttribute("value"),phx_host:document.querySelector("meta[name='ret:phx_host']").getAttribute("value")}:yield fetch(c("/api/v1/meta")).then(function(){var e=s(function*(e){d=yield e.json()});return function(t){return e.apply(this,arguments)}}()));const e=new URLSearchParams(location.search).get("phx_host");return e&&(d.phx_host=e),d})).apply(this,arguments)}function g(){return v.apply(this,arguments)}function v(){return(v=s(function*(e=!1,t=null){const n=new URLSearchParams(location.search),r=function(){var e=s(function*(){const e=n.get("phx_protocol")||("https:"===document.location.protocol?"wss:":"ws:");let t=n.get("phx_host"),o=n.get("phx_port");const r=yield f();return`${e}//${t=t||{NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}.RETICULUM_SOCKET_SERVER||r.phx_host}${(o=o||new URL(`${e}//dev.reticulum.io`).port)?`:${o}`:""}`});return function(){return e.apply(this,arguments)}}(),a=yield r();console.log(`Phoenix Socket URL: ${a}`);const i={};e&&(i.logger=(e,t,n)=>{console.log(`${e}: ${t}`,n)}),t&&(i.params=t);const c=new o.b(`${a}/socket`,i);return c.connect(),c.onError(s(function*(){m();const e=new URL(c.endPoint).pathname,t=`${yield r()}${e}`;console.log(`Socket error, changed endpoint to ${t}`),c.endPoint=t})),c})).apply(this,arguments)}function _(e){const t=new URL(e);return c(t.pathname.replace(".png",".html")+t.search,!0)}function y(e,t="GET",n){const{token:o}=window.APP.store.state.credentials,r=c(e),a={headers:{"content-type":"application/json"},method:t};return o&&(a.headers.authorization=`bearer ${o}`),n&&(a.body=JSON.stringify(n)),fetch(r,a).then(function(){var e=s(function*(e){const t=yield e.text();try{return JSON.parse(t)}catch(e){return t}});return function(t){return e.apply(this,arguments)}}())}function E(e,t,n,o){return w.apply(this,arguments)}function w(){return(w=s(function*(e,t,n,o){const i=c("/api/v1/hubs");let s={Name:"Test",SceneUrl:null};const l=yield r.a.find("recHqITRS7cBMwn9i");l&&(s=l.fields);const u={hub:{name:s.Name}};u.hub.default_environment_gltf_bundle_url=s.SceneUrl;const d={"content-type":"application/json"},p=new a.b;p.state&&p.state.credentials.token&&(d.authorization=`bearer ${p.state.credentials.token}`);let m=yield fetch(i,{body:JSON.stringify(u),headers:d,method:"POST"}).then(e=>e.json());"invalid_token"===m.error&&(p.update({credentials:{token:null,email:null}}),delete d.authorization,m=yield fetch(i,{body:JSON.stringify(u),headers:d,method:"POST"}).then(e=>e.json()));const h=m;let f=h.url;const b=h.creator_assignment_token;if(b){p.update({creatorAssignmentTokens:[{hubId:h.hub_id,creatorAssignmentToken:b}]});const e=h.embed_token;e&&p.update({embedTokens:[{hubId:h.hub_id,embedToken:e}]})}"dev.reticulum.io"!==document.location.host&&(f=`/hub.html?hub_id=${h.hub_id}`),o?document.location.replace(f):document.location=f})).apply(this,arguments)}function S(e,t){const n=(Object.entries(e||{}).find(([e])=>e===t)||[])[1];return n&&n.metas&&n.metas[0].profile||{}}function R(e,t,n){const o=t.channel(e.topic,n||e.params);for(let t=0,n=e.bindings.length;t<n;t++){const n=e.bindings[t];o.on(n.event,n.callback)}for(let t=0,n=e.pushBuffer.length;t<n;t++){const n=e.pushBuffer[t];o.push(n.event,n.payload,n.timeout)}const r=e.joinPush,a=o.join();for(let e=0,t=r.recHooks.length;e<t;e++){const t=r.recHooks[e];a.receive(t.status,t.callback)}return new Promise(t=>{a.receive("ok",()=>{e.bindings=[],t(o)})})}},151:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var o=n(88),r=n(66),a=n(277),i=n.n(a),s=n(128),c=n(18),l=n(154),u=n(175);function d(e,t,n,o,r,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function p(e){return function(){var t=this,n=arguments;return new Promise(function(o,r){var a=e.apply(t,n);function i(e){d(a,o,r,i,s,"next",e)}function s(e){d(a,o,r,i,s,"throw",e)}i(void 0)})}}THREE.Mesh.prototype.raycast=u.b;const m={},h=Object(l.a)(new i.a);function f(e,t,n){if(!AFRAME.components[t])throw new Error(`Inflator failed. "${t}" component does not exist.`);if(AFRAME.components[t].multiple&&Array.isArray(n))for(let o=0;o<n.length;o++)e.setAttribute(t+"__"+o,n[o]);else e.setAttribute(t,n)}function b(e){const t=new Map,n=e.clone();return function e(t,n,o){o(t,n);for(let r=0;r<t.children.length;r++)e(t.children[r],n.children[r],o)}(e,n,function(e,n){t.set(e,n),e.isMesh&&e.geometry.boundsTree&&(n.geometry.boundsTree=e.geometry.boundsTree)}),e.traverse(function(e){if(!e.isSkinnedMesh)return;const n=e.skeleton.bones,o=t.get(e);o.skeleton=e.skeleton.clone(),o.skeleton.bones=n.map(function(e){if(!t.has(e))throw new Error("Required bones are not descendants of the given object.");return t.get(e)}),o.bind(o.skeleton,e.bindMatrix)}),n}function g(e){const t=e.userData.gltfExtensions&&(e.userData.gltfExtensions.MOZ_hubs_components||e.userData.gltfExtensions.HUBS_components),n=e.userData.components;return t||n}AFRAME.GLTFModelPlus={components:{},registerComponent(e,t,n){n=n||f,AFRAME.GLTFModelPlus.components[e]={inflator:n,componentName:t}}};const v=function(e,t,n,o,r=1){"Chest"===t.name?t.name="Spine":"Root Scene"===t.name?t.name="AvatarRoot":"Bot_Skinned"===t.name&&(t.name="AvatarMesh");const a=[],i=t.children.slice(0);for(const t of i){const o=v(e,t,n);o&&a.push(o)}const s=g(t);if(!(!!s||t.name in n)&&!a.length&&!o)return null;const c=document.createElement("a-entity");c.append.apply(c,a);const l=(t.name||t.uuid).replace(/[^\w-]/g,"");c.classList.add(l),"YXZ"!==t.rotation.order&&t.rotation.setFromQuaternion(t.quaternion,"YXZ"),c.object3D.position.copy(t.position),c.object3D.rotation.copy(t.rotation),c.object3D.scale.copy(t.scale).multiplyScalar(r),c.object3D.matrixNeedsUpdate=!0,t.matrixAutoUpdate=!1,t.matrix.identity(),t.matrix.decompose(t.position,t.rotation,t.scale),c.setObject3D(t.type.toLowerCase(),t),s&&"nav-mesh"in s&&c.setObject3D("mesh",t),c.object3D.name=t.name,t.animations&&(t.parent.animations=t.animations);const u=t.userData.gltfIndex;return void 0!==u&&(e[u]=c),c};function _(e,t,n){const o=e.querySelectorAll("."+t);for(const e of o){const t=n.cloneNode(!0);for(const n of t.attributes){const{name:t,value:o}=n;e.setAttribute(t,o)}for(;t.children.length>0;)e.appendChild(t.children[0])}}function y(e,t,n,o,r){return E.apply(this,arguments)}function E(){return(E=p(function*(e,t,n,o,a){let i,l=e;(t.includes("model/gltf+zip")||t.includes("application/x-zip-compressed"))&&(i=yield h(l),l=i["scene.gtlf"]);const u=new THREE.LoadingManager;u.setURLModifier(Object(c.a)(l));const d=new THREE.GLTFLoader(u),p=yield new Promise((e,t)=>d.createParser(l,e,o,t));a&&(p.json=a(p.json));let m=0;p.json.extensions&&p.json.extensions.MOZ_hubs_components&&p.json.extensions.MOZ_hubs_components.hasOwnProperty("version")&&(m=p.json.extensions.MOZ_hubs_components.version),function(e,t){if(e<2){const e=t.nodes.find(e=>{let t=null;return e.extensions&&e.extensions.MOZ_hubs_components?t=e.extensions.MOZ_hubs_components:e.extensions&&e.extensions.HUBS_components&&(t=e.extensions.HUBS_components),t&&t.heightfield&&t["nav-mesh"]});e&&(e.extensions.MOZ_hubs_components?delete e.extensions.MOZ_hubs_components.heightfield:e.extensions.HUBS_components&&delete e.extensions.HUBS_components.heightfield)}}(m,p.json);const f=p.json.materials;if(f)for(let e=0;e<f.length;e++){const t=f[e];if(t.extensions&&t.extensions.MOZ_alt_materials&&void 0!==t.extensions.MOZ_alt_materials[n]){const o=t.extensions.MOZ_alt_materials[n];f[e]=f[o]}}const b=p.json.nodes;if(b)for(let e=0;e<b.length;e++){const t=b[e];t.extras||(t.extras={}),t.extras.gltfIndex=e}const g=yield new Promise(p.parse.bind(p));return g.scene.traverse(e=>{e.matrixAutoUpdate=THREE.Object3D.DefaultMatrixAutoUpdate,e.material=Object(r.b)(e,e=>e.isMeshStandardMaterial&&"KHR_materials_unlit"===n?s.a.fromStandardMaterial(e):e)}),i&&Object.keys(i).forEach(URL.revokeObjectURL),g})).apply(this,arguments)}AFRAME.registerComponent("gltf-model-plus",{schema:{src:{type:"string"},contentType:{type:"string"},useCache:{default:!0},inflate:{default:!1},modelToWorldScale:{type:"number",default:1}},init(){this.preferredTechnique=window.APP&&"low"===window.APP.quality?"KHR_materials_unlit":"pbrMetallicRoughness",this.jsonPreprocessor=null,this.loadTemplates()},update(){this.applySrc(this.data.src,this.data.contentType)},loadTemplates(){this.templates={},this.el.querySelectorAll(":scope > template").forEach(e=>{const t=document.importNode(e.firstElementChild||e.content.firstElementChild,!0);this.templates[e.getAttribute("data-name")]=t})},loadModel(e,t,n,o){var r=this;return p(function*(){return o?(m[e]||(m[e]=yield y(e,t,n,null,r.jsonPreprocessor)),{animations:(a=m[e]).animations,scene:b(a.scene)}):yield y(e,t,n,null,r.jsonPreprocessor);var a})()},applySrc(e,t){var n=this;return p(function*(){try{if(e&&"#"===e.charAt(0)){const t=document.getElementById(e.substring(1));e=t.getAttribute("src")}if(e===n.lastSrc)return;if(n.lastSrc=e,!e)return void(n.inflatedEl&&(console.warn("gltf-model-plus set to an empty source, unloading inflated model."),n.disposeLastInflatedEl()));n.el.emit("model-loading");const r=yield n.loadModel(e,t,n.preferredTechnique,n.data.useCache);if(e!=n.lastSrc)return;n.disposeLastInflatedEl(),n.model=r.scene||r.scenes[0],n.model.animations=r.animations,r.animations.length>0?(n.el.setAttribute("animation-mixer",{}),n.el.components["animation-mixer"].initMixer(r.animations)):n.model.traverse(e=>{const t=e.isMesh&&e.geometry.isBufferGeometry,n=t&&e.geometry.boundsTree;if(t&&!n&&e.geometry.attributes.position){const t=e.geometry,n=t.index?t.index.count/3:t.attributes.position.count/3;n>1e3&&n<1e6&&(t.boundsTree=new u.a(e.geometry,{strategy:0,maxDepth:30}))}});const a={};let i=n.model;if(n.data.inflate&&(n.inflatedEl=v(a,n.model,n.templates,!0,n.data.modelToWorldScale))){if(n.el.appendChild(n.inflatedEl),i=n.inflatedEl.object3D,yield Object(o.a)(),e!=n.lastSrc)return;!function(e,t){e.object3D.traverse(e=>{const n=g(e),o=e.el;if(n&&o)for(const e in n)if(n.hasOwnProperty(e)&&AFRAME.GLTFModelPlus.components.hasOwnProperty(e)){const{componentName:r,inflator:a}=AFRAME.GLTFModelPlus.components[e];a(o,r,n[e],n,t)}})}(n.inflatedEl,a);for(const e in n.templates)_(n.el,e,n.templates[e])}const s=[];i.traverse(e=>{const t=e.el;t&&s.push(()=>e.el=t)});const c=n.el.sceneEl.components["environment-map"];c&&c.applyEnvironmentMap(i),n.el.setObject3D("mesh",i),s.forEach(e=>e()),n.el.emit("model-loaded",{format:"gltf",model:n.model})}catch(t){delete m[e],console.error("Failed to load glTF model",t,n),n.el.emit("model-error",{format:"gltf",src:e})}})()},disposeLastInflatedEl(){this.inflatedEl&&(this.inflatedEl.parentNode.removeChild(this.inflatedEl),this.inflatedEl.object3D.traverse(e=>{e.material&&e.material.dispose&&e.material.dispose(),e.geometry&&(e.geometry.dispose&&e.geometry.dispose(),e.geometry.boundsTree=null)}),delete this.inflatedEl,this.el.removeAttribute("animation-mixer"))}})},154:function(e,t,n){"use strict";function o(e){let t=0;const n={};return e.onmessage=t=>{const{id:o,result:r,err:a}=t.data,i=n[o];null==i?console.error(`Unknown message with ID ${o} received from ${e}.`):(delete n[o],null!=a?i.reject(new Error(a)):i.resolve(r))},function(o,r){const a=t++,i=new Promise((e,t)=>{n[a]={resolve:e,reject:t}});return e.postMessage({id:a,payload:o},r),i}}n.d(t,"a",function(){return o})},1580:function(e,t,n){"use strict";n.r(t);n(420),n(318);var o=n(20),r=n(38),a=n.n(r),i=n(0),s=n.n(i),c=n(1),l=n.n(c),u=n(3),d=n.n(u),p=n(4),m=n(137),h=n.n(m),f=n(35),b=n(193),g=n(194),v=n(211),_=n(119),y=n(2083),E=n.n(y);n(515);function w(e,t,n,o,r,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function S(e){return function(){var t=this,n=arguments;return new Promise(function(o,r){var a=e.apply(t,n);function i(e){w(a,o,r,i,s,"next",e)}function s(e){w(a,o,r,i,s,"throw",e)}i(void 0)})}}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}console.log(`Hubs version: ${{NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}.BUILD_VERSION||"?"}`),Object(p.c)([...h.a]),Object(b.a)();const k=new URLSearchParams(location.search);window.APP=new g.a;class A extends s.a.Component{constructor(e){var t;super(e),t=this,R(this,"storeUpdated",()=>this.forceUpdate()),R(this,"refetchAvatar",S(function*(){const e=yield Object(_.b)(t.props.avatarId);t.setState({avatar:e})})),R(this,"setAvatar",e=>{e&&e.preventDefault(),this.props.store.update({profile:{avatarId:this.state.avatar.avatar_id}})}),this.state={airtableAssets:o.b}}componentDidMount(){this.props.store.addEventListener("statechanged",this.storeUpdated),this.refetchAvatar(),o.a.find("recHqITRS7cBMwn9i",(e,t)=>this.setState({airtableAssets:t.fields}))}componentWillUnmount(){this.props.store.removeEventListener("statechanged",this.storeUpdated)}render(){const{avatar:e}=this.state;if(!e)return s.a.createElement("div",{className:E.a.avatarLanding},s.a.createElement("div",{className:d()([E.a.box,E.a.darkened])},"Loading"));const t=this.props.store.state.profile.avatarId,n=e.avatar_id===t;return s.a.createElement("form",{onSubmit:this.setAvatar,className:E.a.avatarLanding},s.a.createElement("div",{className:d()([E.a.box,E.a.darkened])},s.a.createElement("label",{className:E.a.title},s.a.createElement("span",null,e.name)),s.a.createElement("div",{className:E.a.attributions},e.attributions&&e.attributions.creator&&s.a.createElement("span",null,`by ${e.attributions.creator}`)),s.a.createElement("div",{className:E.a.preview},e&&s.a.createElement(v.a,{avatarGltfUrl:e.gltf_url})),n?s.a.createElement("span",{className:E.a.selectedMessage},s.a.createElement(p.a,{id:"avatar-landing.selected"})):s.a.createElement("button",{disabled:n,className:E.a.formSubmit,type:"submit"},s.a.createElement(p.a,{id:"avatar-landing.select"}))),s.a.createElement("img",{className:E.a.logo,src:this.state.airtableAssets.DarkLogo}))}}R(A,"propTypes",{avatarId:l.a.string,store:l.a.object,intl:l.a.object}),document.addEventListener("DOMContentLoaded",()=>{const e=k.get("avatar_id")||document.location.pathname.substring(1).split("/")[1];console.log(`Avatar ID: ${e}`),a.a.render(s.a.createElement(p.b,{locale:f.a,messages:f.b},s.a.createElement(A,{avatarId:e,store:window.APP.store})),document.getElementById("ui-root"))})},18:function(e,t,n){"use strict";n.d(t,"h",function(){return i}),n.d(t,"g",function(){return s}),n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l}),n.d(t,"f",function(){return m}),n.d(t,"e",function(){return h}),n.d(t,"d",function(){return f}),n.d(t,"c",function(){return b});const o="hubs.local,dev.reticulum.io".split(",");({NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}).CORS_PROXY_SERVER&&o.push({NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}.CORS_PROXY_SERVER);const r={gltf:"model/gltf",glb:"model/gltf-binary",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",pdf:"application/pdf",mp4:"video/mp4",mp3:"audio/mpeg"};const a=e=>(function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode("0x"+t)))})(e).replace(/=+$/g,"").replace(/\+/g,"-").replace(/\//g,"_"),i=(e,t,n)=>{const o=new URL(e).hostname;if(new URL("https://dev.reticulum.io").hostname===o)return e;return`https://farspark-dev.reticulum.io/thumbnail/${a(e)}?w=${t}&h=${n}`},s=(e,t=null)=>{if(!e.startsWith("http:")&&!e.startsWith("https:"))return e;const n=null!==t;if(!n)try{const t=new URL(e);if(o.find(e=>t.hostname.endsWith(e)))return e}catch(e){}if(n||!{NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}.CORS_PROXY_SERVER){return`https://farspark-dev.reticulum.io/0/${n?"extract":"raw"}/0/0/0/${t||0}/${a(e)}`}return`https://${{NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}.CORS_PROXY_SERVER}/${e}`},c=e=>t=>{if("string"!=typeof t||""===t)return"";if(/^(https?:)?\/\//i.test(t))return t;if(/^data:.*,.*$/i.test(t))return t;if(/^blob:.*$/i.test(t))return t;if({NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}.CORS_PROXY_SERVER){const n=`https://${{NODE_ENV:"production",DEFAULT_SCENE_SID:"JGLt8DP",RETICULUM_SERVER:"dev.reticulum.io",FARSPARK_SERVER:"farspark-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",ASSET_BUNDLE_SERVER:"https://asset-bundles-prod.reticulum.io",EXTRA_ENVIRONMENTS:"",POSTGREST_SERVER:"hubs.local:3000"}.CORS_PROXY_SERVER}/`;if(e.startsWith(n)){const o=decodeURIComponent(e.substring(n.length)).split("/"),r=new URL(t).pathname;return n+(o.slice(0,o.length-1).join("/")+"/"+r)}}return t},l=e=>{if(e.startsWith("hubs://")&&e.endsWith("/video"))return"video/vnd.hubs-webrtc";const t=new URL(e).pathname.split(".").pop();return r[t]},u=/https?:\/\/(hubs.local(:\d+)?|(smoke-)?hubs.mozilla.com)\/scenes\/(\w+)\/?\S*/,d=/https?:\/\/(hubs.local(:\d+)?|(smoke-)?hubs.mozilla.com)\/avatars\/(\w+)\/?\S*/,p=/https?:\/\/(hubs.local(:\d+)?|(smoke-)?hubs.mozilla.com)\/(\w+)\/?\S*/,m=u.test.bind(u),h=e=>!m(e)&&p.test(e),f=e=>m(e)||h(e),b=d.test.bind(d)},185:function(e,t){},186:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var o=n(66),r=n(187),a=n.n(r),i=n(188),s=n.n(i),c=n(189),l=n.n(c),u=n(190),d=n.n(u),p=n(191),m=n.n(p),h=n(192),f=n.n(h);function b(e,t,n,o,r,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function g(){return v.apply(this,arguments)}function v(){var e;return e=function*(){const e=[a.a,s.a,l.a,d.a,m.a,f.a],t=yield new Promise((t,n)=>(new THREE.CubeTextureLoader).load(e,t,void 0,n));return t.format=THREE.RGBFormat,t},(v=function(){var t=this,n=arguments;return new Promise(function(o,r){var a=e.apply(t,n);function i(e){b(a,o,r,i,s,"next",e)}function s(e){b(a,o,r,i,s,"throw",e)}i(void 0)})}).apply(this,arguments)}AFRAME.registerComponent("environment-map",{init(){this.environmentMap=null,this.updateEnvironmentMap=this.updateEnvironmentMap.bind(this)},updateEnvironmentMap(e){this.environmentMap=e,this.applyEnvironmentMap(this.el.object3D)},applyEnvironmentMap(e){e.traverse(e=>{Object(o.a)(e,e=>{e.isMeshStandardMaterial&&(e.envMap=this.environmentMap,e.needsUpdate=!0)})})}})},187:function(e,t,n){e.exports=n.p+"assets/images/cubemap/posx-d235fb97df77b607be04b84125f40e7c.jpg"},188:function(e,t,n){e.exports=n.p+"assets/images/cubemap/negx-35034574e114423babdea92b6a2eb97a.jpg"},189:function(e,t,n){e.exports=n.p+"assets/images/cubemap/posy-d0c4e1e7979d75923d4d8b49c191bc6e.jpg"},190:function(e,t,n){e.exports=n.p+"assets/images/cubemap/negy-35808d21d1d17ac1b84d3184e365093b.jpg"},191:function(e,t,n){e.exports=n.p+"assets/images/cubemap/posz-de29aa8396196e4b040cd5305e351dbe.jpg"},192:function(e,t,n){e.exports=n.p+"assets/images/cubemap/negz-d73d18a8b7994524dc39a6ea3fcf43fc.jpg"},193:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n(127);function r(){if("iOS"!==Object(o.detectOS)(navigator.userAgent))return;let e=0;document.addEventListener("touchmove",e=>{1!==e.scale&&e.preventDefault()}),document.addEventListener("touchend",t=>{const n=(new Date).getTime(),o=n-e<=300;e=n,o&&t.preventDefault()})}},194:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(49),r=n(129);class a{constructor(){this.scene=null,this.quality="low",this.store=new o.b,this.mediaSearchStore=new r.b}setQuality(e){return this.quality!==e&&(this.quality=e,this.scene&&this.scene.dispatchEvent(new CustomEvent("quality-changed",{detail:e})),!0)}}},20:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return c}),n.d(t,"c",function(){return l});var o=n(69),r=n.n(o);function a(e,t,n,o,r,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,r)}r.a.configure({endpointUrl:"https://api.airtable.com",apiKey:"keyOHSVeLr3ryLrL5"});const i=r.a.base("appIR0AlHDFG5WR8z"),s={DarkLogo:null,Name:null,Icon:null},c=i("Assets"),l=i("Messages").select({view:"Grid view"}).firstPage(function(){var e,t=(e=function*(e,t){if(!e)return t[0];console.error(e)},function(){var t=this,n=arguments;return new Promise(function(o,r){var i=e.apply(t,n);function s(e){a(i,o,r,s,c,"next",e)}function c(e){a(i,o,r,s,c,"throw",e)}s(void 0)})});return function(e,n){return t.apply(this,arguments)}}())},2008:function(e,t){e.exports={preview:"avatar-preview__preview__2I8qx"}},2083:function(e,t){e.exports={"avatar-landing":"avatar__avatar-landing__3bdoO",avatarLanding:"avatar__avatar-landing__3bdoO","form-submit":"avatar__form-submit__3OEBN",formSubmit:"avatar__form-submit__3OEBN",title:"avatar__title__PP1dU",attributions:"avatar__attributions__1Ej7c",logo:"avatar__logo__35vmn",box:"avatar__box__vyKNY","selected-message":"avatar__selected-message__25S2j",selectedMessage:"avatar__selected-message__25S2j",preview:"avatar__preview__3T2SV"}},209:function(e,t,n){e.exports=n.p+"assets/images/warning_icon-739d2a2ea906737505bcbc2cb51123a8.png"},210:function(e,t,n){e.exports=n.p+"assets/images/warning_icon@2x-706e4a4db33f9456bac320e956b4120d.png"},211:function(e,t,n){"use strict";var o=n(209),r=n.n(o),a=n(210),i=n.n(a),s=n(0),c=n.n(s),l=n(1),u=n.n(l),d=n(4),p=n(3),m=n.n(p),h=(n(766),n(186)),f=n(151),b=n(58),g=n(83),v=n(2008),_=n.n(v);function y(e,t,n,o,r,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function E(e){return function(){var t=this,n=arguments;return new Promise(function(o,r){var a=e.apply(t,n);function i(e){y(a,o,r,i,s,"next",e)}function s(e){y(a,o,r,i,s,"throw",e)}i(void 0)})}}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const S={base_map:["map"],emissive_map:["emissiveMap"],normal_map:["normalMap"],orm_map:["aoMap","roughnessMap","metalnessMap"]},R=Object.keys(S);function k(e,t=!1,n=!0){const o=e.getContext("webgl2",{alpha:t,depth:!0,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"}),r=new THREE.WebGLRenderer({alpha:t,canvas:e,context:o});return r.gammaOutput=!0,r.gammaFactor=2.2,r.physicallyCorrectLights=!0,n&&r.setPixelRatio(window.devicePixelRatio),r}const A=e=>fetch(e).then(e=>e.blob()).then(g.a),P=new THREE.Euler(-30*THREE.Math.DEG2RAD,30*THREE.Math.DEG2RAD,0),T=1;function x(e,t,n,o=T){const r=Math.max(t.max.y-n.y,n.y-t.min.y),a=THREE.Math.degToRad(e.fov/2);e.position.set(0,0,(r/Math.tan(a)+t.max.z)*o),e.position.applyEuler(P),e.position.add(n),e.lookAt(n)}class M extends s.Component{constructor(e){var t;super(e),t=this,w(this,"componentDidMount",()=>{this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(55,this.canvas.clientWidth/this.canvas.clientHeight,.1,1e3),this.controls=new THREE.OrbitControls(this.camera,this.canvas),this.controls.enablePan=!1;const e=new THREE.DirectionalLight(16250607,1);e.position.set(0,10,10),this.scene.add(e),this.scene.add(new THREE.HemisphereLight(11658239,11658239,2.5)),this.camera.position.set(-.2,.5,.5),this.camera.matrixAutoUpdate=!0,this.controls.target.set(0,.45,0),this.controls.update(),this.props.avatarGltfUrl&&this.loadPreviewAvatar(this.props.avatarGltfUrl).then(this.setAvatar);const t=new THREE.Clock;this.snapshotCanvas=document.createElement("canvas"),this.snapshotCanvas.width=720,this.snapshotCanvas.height=1280,this.snapshotCamera=new THREE.PerspectiveCamera(55,.5625,.1,1e3),this.snapshotCamera.matrixAutoUpdate=!0,this.snapshotRenderer=k(this.snapshotCanvas,!0,!1),this.snapshotRenderer.setClearAlpha(0),this.previewRenderer=k(this.canvas),this.previewRenderer.setClearColor(15395562),this.previewRenderer.setAnimationLoop(()=>{const e=t.getDelta();this.mixer&&this.mixer.update(e),this.previewRenderer.render(this.scene,this.camera)}),window.addEventListener("resize",this.resize),this.resize()}),w(this,"resize",()=>{const e=this.canvas.parentElement.offsetWidth,t=this.canvas.parentElement.offsetHeight;this.previewRenderer.setSize(e,t),this.camera.aspect=e/t,this.camera.updateProjectionMatrix()}),w(this,"setAvatar",e=>{e&&(this.avatar=e,this.scene.add(e),this.resetCamera(),this.setState({error:null,loading:!1}))}),w(this,"resetCamera",(()=>{const e=new THREE.Box3,t=new THREE.Vector3;return()=>{e.setFromObject(this.avatar),e.getCenter(t),t.y=.6*(e.max.y-e.min.y)+e.min.y,x(this.camera,e,t),x(this.snapshotCamera,e,t,.7),this.controls.target.copy(t),this.controls.update()}})()),w(this,"componentWillUnmount",()=>{this.scene&&this.scene.traverse(b.a),this.previewRenderer&&(this.previewRenderer.dispose(),this.previewRenderer.context=null),this.snapshotRenderer&&(this.snapshotRenderer.dispose(),this.snapshotRenderer.context=null),this.controls&&(this.controls.dispose(),this.controls.domElement=null),Object.values(this.imageBitmaps).forEach(e=>Object(g.b)(e)),window.removeEventListener("resize",this.resize)}),w(this,"componentDidUpdate",function(){var e=E(function*(e){e.avatarGltfUrl!==t.props.avatarGltfUrl&&(t.avatar&&(t.scene.remove(t.avatar),t.avatar=null),t.props.avatarGltfUrl&&(t.setState({error:null,loading:!0}),yield t.loadPreviewAvatar(t.props.avatarGltfUrl).then(t.setAvatar))),t.applyMaps(e,t.props)});return function(t){return e.apply(this,arguments)}}()),w(this,"loadPreviewAvatar",function(){var e=E(function*(e){let n;try{n=yield Object(f.a)(e,"model/gltf")}catch(e){return void t.setState({loading:!1,error:!0})}t.previewMesh=n.scene.getObjectByName("AvatarMesh")||n.scene.getObjectByName("Avatar")||n.scene.getObjectByName("Bot_Skinned")||n.scene;const o=n.animations&&n.animations.find(({name:e})=>"idle_eyes"===e);if(o){t.mixer=new THREE.AnimationMixer(t.previewMesh);const e=t.mixer.clipAction(o);e.enabled=!0,e.setLoop(THREE.LoopRepeat,1/0).play(),t.idleAnimationAction=e}const{material:r}=t.previewMesh;if(r){const e=e=>delete r[e].onUpdate&&r[e].image;t.originalMaps={base_map:S.base_map.map(e),emissive_map:S.emissive_map.map(e),normal_map:S.normal_map.map(e),orm_map:S.orm_map.map(e)},yield Promise.all([t.applyMaps({},t.props),Object(h.a)().then(e=>{t.previewMesh.material.envMap=e,t.previewMesh.material.needsUpdate=!0})])}else t.originalMaps={};return n.scene});return function(t){return e.apply(this,arguments)}}()),w(this,"applyMapToPreview",(e,t)=>{this.imageBitmaps[e]&&Object(g.b)(this.imageBitmaps[e]),this.imageBitmaps[e]=t,S[e].forEach(e=>{const n=this.previewMesh.material[e];n.image=t,n.needsUpdate=!0})}),w(this,"revertMap",e=>{this.imageBitmaps[e]&&Object(g.b)(this.imageBitmaps[e]),delete this.imageBitmaps[e],this.originalMaps[e].forEach((t,n)=>{const o=this.previewMesh.material[S[e][n]];o.image=t,o.needsUpdate=!0})}),w(this,"snapshot",()=>new Promise(e=>{this.idleAnimationAction&&this.idleAnimationAction.stop(),this.snapshotRenderer.render(this.scene,this.snapshotCamera),this.snapshotCanvas.toBlob(t=>{this.idleAnimationAction&&this.idleAnimationAction.play(),e(t)})})),this.state={loading:!0,error:null},this.avatar=null,this.imageBitmaps={}}applyMaps(e,t){return Promise.all(R.map(n=>{const o=this.applyMapToPreview.bind(this,n);if(e[n]!=t[n])return t[n]instanceof File?Object(g.a)(t[n]).then(o):t[n]?A(t[n]).then(o):this.revertMap(n)}))}render(){return c.a.createElement("div",{className:m()(_.a.preview,this.props.className)},this.state.loading&&!this.state.error&&c.a.createElement("div",{className:"loader"},c.a.createElement("div",{className:"loader-center"})),this.state.error&&!this.state.loading&&c.a.createElement("div",{className:"error"},c.a.createElement("img",{src:r.a,srcSet:i.a+" 2x",className:"error-icon"}),c.a.createElement(d.a,{id:"avatar-preview.loading-failed"})),c.a.createElement("canvas",{ref:e=>this.canvas=e}))}}w(M,"propTypes",{avatarGltfUrl:u.a.string,className:u.a.string}),t.a=Object(d.d)(M,{withRef:!0})},218:function(e,t){},219:function(e,t){},318:function(e,t,n){"use strict";var o=n(208),r=n.n(o),a=n(34);const i=new URLSearchParams(location.search),s=Object(a.a)("debug"),c=i.get("log_filter")||s&&"naf-janus-adapter:*";c&&r.a.enable(c)},34:function(e,t,n){"use strict";n.d(t,"a",function(){return r});const o=new URLSearchParams(location.search);function r(e){const t=o.get(e);return""===t||/1|on|true|yes/i.test(t)}},35:function(e,t,n){"use strict";var o=n(20);console.log(o.c);var r={en:{"auth.verified-title":"E-Mail Verified!","auth.verified":"Your email has been verified!\nYou can now close this browser tab and return to Hubs.","auth.spoke-verified":"You email has been verified!\nYou can now close this browser tab and return to Spoke.","sign-in.prompt":"Sign in to pin objects in rooms.","sign-in.auth-started":"Email sent!\n\nTo continue, go click on the link in the email using your phone, tablet, or PC.","sign-in.pin":"You'll need to sign in to pin objects.","sign-in.pin-complete":"You are now signed in.","sign-in.unpin":"You'll need to sign in to un-pin objects.","sign-in.unpin-complete":"You are now signed in.","sign-in.change-scene":"You'll need to sign in to change the scene.","sign-in.change-scene-complete":"You are now signed in.","sign-in.rename-room":"You'll need to sign in to rename axon park.","sign-in.rename-room-complete":"You are now signed in.","sign-in.close-room":"You'll need to sign in to close axon park.","sign-in.close-room-complete":"You are now signed in.","sign-in.mute-user":"You'll need to sign in to mute other users.","sign-in.mute-user-complete":"You are now signed in.","sign-in.kick-user":"You'll need to sign in to kick other users.","sign-in.kick-user-complete":"You are now signed in.","sign-in.create-avatar":"You'll need to sign in to create avatars.","sign-in.create-avatar-complete":"You are now signed in.","sign-in.favorite-room":"You'll need to sign in to add this room to your favorites.","sign-in.favorite-rooms":"You'll need to sign in to add favorite rooms.","sign-in.favorite-room-complete":"You are now signed in.","sign-in.favorite-rooms-complete":"You are now signed in.","sign-in.as":"Signed in as","sign-in.in":"Sign In","sign-in.out":"Sign Out","rename-room.message":"Enter the new name for axon park.","rename-room.rename":"Rename Axon Park","close-room.message":"Closing this room will remove yourself and others from axon park, shutting it down permanently.\n\nAre you sure? This action cannot be undone.","close-room.confirm":"Yes, Close Axon Park","close-room.cancel":"Cancel","entry.room":"Immersive Education","entry.enter-room-title":"Lobby","entry.enter-room":"enter or send to device","entry.leave-room":"Leave Axon Park","entry.change-scene":"Choose a Scene","entry.in-lobby-notice":"You are viewing Axon Park from the lobby.","entry.screen-prefix":"Enter on ","entry.desktop-screen":"Screen","entry.mobile-screen":"Phone","entry.mobile-safari":"Safari","entry.generic-prefix":" ","entry.generic-medium":"Connected VR Headset","entry.generic-subtitle-desktop":"Oculus or SteamVR","entry.gearvr-prefix":"Enter on ","entry.gearvr-medium":"Gear VR","entry.choose-device":"Choose Device","entry.device-medium":"Send to Device","entry.device-subtitle-desktop":"Standalone VR or Phone","entry.device-subtitle-mobile":"Standalone VR or PC","entry.device-subtitle-vr":"Phone or PC","entry.cardboard":"Enter on Google Cardboard","entry.daydream-prefix":"Enter on ","entry.daydream-medium":"Daydream","entry.daydream-via-chrome":"Using Google Chrome","entry.invite-others":"invite others","entry.share-button":"share","entry.desktop.invite-tip":"Nobody is here yet. Share this room to get together.","entry.mobile.invite-tip":"Share to get together.","entry.invite-team-nag":"Invite a hubs team member","entry.enable-screen-sharing":"Share my desktop","entry.return-to-vr":"Return to VR","entry.enter-in-vr":"Enter in VR","entry.open-in-window":"Open in Tab","entry.lobby":"Lobby","entry.back":"Back","entry.notify_me":"Notify me when others arrive","entry.mute-on-entry":"Mute my microphone","profile.save":"Accept","profile.display_name.validation_warning":"Alphanumerics and hyphens. At least 3 characters, no more than 32","profile.header":"Name & Avatar","profile.terms_of_use":"Terms of Use","profile.privacy_notice":"Privacy Notice","profile.choose_avatar":"Browse Avatars","profile.tabs.legacy":"Default","profile.tabs.skinnable":"Custom Skin","profile.tabs.url":"Custom Model","profile.info":"Resources for creating custom avatar models can be found","profile.info-link":"here","avatar-editor.info":"Resources for creating custom avatar skins can be found","avatar-editor.info-link":"here","avatar-preview.loading-failed":"Loading failed\nPlease choose another avatar","media-browser.search-placeholder.scenes":"Search Scenes...","media-browser.search-placeholder.avatars":"Search Avatars...","media-browser.search-placeholder.videos":"Search the web...","media-browser.search-placeholder.images":"Search the web...","media-browser.search-placeholder.youtube":"Search for videos...","media-browser.search-placeholder.gifs":"Search for GIFs...","media-browser.search-placeholder.twitch":"Search for streams...","media-browser.search-placeholder.sketchfab":"Search for models...","media-browser.search-placeholder.poly":"Search for models...","media-browser.search-placeholder.base":"Search...","media-browser.favorites-header":"Favorite Rooms","media-browser.add_custom_object":"Custom URL or File","media-browser.add_custom_scene":"Custom Scene","media-browser.add_custom_avatar":"Avatar GLB URL","media-browser.privacy_policy":"Privacy Policy","media-browser.spoke":"Spoke","media-browser.report_issue":"Report Issue","media-browser.powered_by.images":"Search by Bing | ","media-browser.powered_by.videos":"Search by Bing | ","media-browser.powered_by.youtube":"Search by Google | ","media-browser.powered_by.gifs":"Search by Tenor | ","media-browser.powered_by.sketchfab":"Search by Sketchfab | ","media-browser.powered_by.poly":"Search by Google | ","media-browser.powered_by.twitch":"Search by Twitch | ","media-browser.powered_by.scenes":"Made with ","media-browser.powered_by.avatars":" ","media-browser.empty.images":"No results. Try entering a new search above.","media-browser.empty.videos":"No results. Try entering a new search above.","media-browser.empty.youtube":"No results. Try entering a new search above.","media-browser.empty.gifs":"No result. Try entering a new search above.","media-browser.empty.sketchfab":"No results. Try entering a new search above.","media-browser.empty.poly":"No results. Try entering a new search above.","media-browser.empty.twitch":"No results. Try entering a new search above.","media-browser.empty.favorites":"You don't have any favorites. Click a  to add to your favorites.","media-browser.nav_title.youtube":"YouTube","media-browser.nav_title.videos":"Videos","media-browser.nav_title.images":"Images","media-browser.nav_title.gifs":"GIFs","media-browser.nav_title.scenes":"Scenes","media-browser.nav_title.avatars":"Avatars","media-browser.nav_title.sketchfab":"Sketchfab","media-browser.nav_title.poly":"Google Poly","media-browser.nav_title.twitch":"Twitch","media-browser.create-avatar":"Create Avatar","media-browser.create-scene":"Create Scene with Spoke","media-browser.hub.joined-prefix":"Joined ","media-browser.hub.joined-prefix":"Visited ","audio.title":"Audio Setup","audio.talk_to_test":"talk","audio.click_to_test":"click","audio.subtitle-desktop":"Confirm HMD speaker output","audio.subtitle-mobile":"Earphones are recommended","audio.enter-now":"Enter Now","audio.hmd-mic-warning":"Your HMD mic is not chosen","audio.grant-title":"Grant mic permissions","audio.grant-subtitle":"Mic access needed to be heard by others","audio.granted-title":"Mic permissions granted","audio.granted-subtitle":"You can still mute yourself in-game","audio.granted-next":"Next","exit.subtitle.exited":"Your session has ended. Refresh your browser to start a new one.","exit.subtitle.closed":"This room is no longer available.","exit.subtitle.denied":"You are not permitted to join this room. Please request permission from the room creator.","exit.subtitle.kicked":"You have been kicked from axon park.","exit.subtitle.left":"You have left axon park.","exit.subtitle.full":"This room is full, please try again later.","exit.subtitle.connect_error":"Unable to connect to this room, please try again later.","exit.subtitle.version_mismatch":"The version you deployed is not available yet. Your browser will refresh in 5 seconds.","autoexit.title":"Auto-ending session in ","autoexit.title_units":" seconds","autoexit.subtitle":"You have started another session.","autoexit.cancel":"CANCEL","presence.entered_room":"entered axon park.","presence.entered_lobby":"entered axon park's lobby.","presence.join_lobby":"joined the axon park lobby.","presence.join_room":"joined axon park.","presence.leave":"left.","presence.name_change":"is now known as","presence.scene_change":"changed the scene to","presence.hub_name_change":"changed the name of the room to","presence.in_lobby":"Axon Park Lobby","presence.in_room":"In Axon Park","home.create_a_room":"Initialize Axon Park","home.desktop.add_pwa":"Install Desktop App","home.mobile.add_pwa":"Add to Home Screen","home.take_a_tour":"Take a Tour","home.room_create_options":"options","home.room_create_button":"Initialize Axon Park","home.create_name.validation_warning":"Invalid name, limited to 4 to 64 characters and limited symbols.","home.join_us":"Join the Conversation","home.have_code":"Have an axon park code?","home.add_to_discord_1":"Add the","home.add_to_discord_2":"Hubs Bot","home.add_to_discord_3":"to Discord","home.create_with_spoke":"Create a Scene","home.report_issue":"Report Issues","home.source_link":"Source","home.whats_new_link":"What's New","home.spoke_link":"Spoke","home.about_link":"About","home.community_link":"Community","home.privacy_notice":"Privacy Notice","home.terms_of_use":"Terms of Use","home.get_updates":"Get Updates","home.hero_title":"A new way to get together","home.hero_blurb":o.c&&o.c.get("Motto")||"Learn together, from anywhere.\nThe future of learning is virtual.\nEqualizing access to premier quality education.","home.made_with_love":"made with  by ","home.environment_author_by":" by ","dialog.close":"close","mailing_list.privacy_label":"I'm okay with Mozilla handling my info as explained in","mailing_list.privacy_link":"this Privacy Notice","link.link_page_header_entry":"Enter your code:","link.link_page_header_headset":"Enter Send to Device code:","link.linking_a_headset":"Have a letter code?","link.try_again":"We couldn't find that code.\nPlease try again.","help.report_issue":"Report an Issue","scene.logo_tagline":"A new way to get together","scene.create_button":"Create a room with this scene","scene.tweet_button":"Share on Twitter","scene.unavailable":"This scene is no longer available.","link.in_your_browser":"In your device's web browser, go to:","link.enter_code":"Then, enter this one-time letter code:","link.do_not_close":"Your account and avatar will be transferred to the device.\nKeep this page open to use this code.","link.connect_headset":"Send to Device","link.cancel":"cancel","invite.enter_via":"Enter via ","invite.enter_via_modal":"Others may enter via ","invite.tweet":"tweet","invite.and_enter_code":" with code:","invite.or_visit":"or share permalink","invite.or_visit_modal":"or by visiting permalink","invite.embed":"or embed on a page","invite.embed-tip":"Please be mindful of where you embed a Hubs room.\nAnyone who can access the page can enter and create/remove objects.","spoke.primary_tagline":"make your space","spoke.secondary_tagline":"Create 3D social scenes for ","spoke.thank_you":"Thank you for downloading Spoke!","spoke.download_win":"Download for Windows","spoke.download_macos":"Download for Mac","spoke.download_linux":"Download for Linux","spoke.download_unsupported":"View Releases","spoke.browse_all_versions":"Browse All Versions","spoke.beginner_tutorial_button":"Learn Spoke in 5 Minutes","spoke.advanced_tutorial_button":"Advanced Spoke in 10 minutes","spoke.play_button":"Learn Spoke in 5 Minutes","commands.fly":"Toggle fly mode.","commands.grow":"Increase your avatar's size.","commands.shrink":"Decrease your avatar's size.","commands.scene":"Change the scene.","commands.rename":"Rename the room.","commands.help":"Show help.","commands.leave":"Disconnect from axon park.","commands.duck":"The duck tested well. Quack.","commands.capture":"Capture a 15 second video.","commands.debug":"Toggle physics debug rendering.","commands.vrstats":"Toggle stats in VR.","settings.change-avatar":"Set Name & Avatar","settings.change-scene":"Choose a Scene","settings.favorites":"Favorite Rooms","settings.rename-room":"Set Axon Park Name...","settings.close-room":"Close Axon Park...","settings.room-info":"Axon Park Info","settings.create-room":"New Axon Park...","settings.create-scene":"Get Spoke","settings.send-feedback":"Send Feedback","settings.whats-new":"What's New","settings.features":"Help","settings.controls":"Controls","settings.community":"Join Discord","settings.tips":"Show Tips","settings.report":"Report Issue","settings.terms":"Terms of Use","settings.privacy":"Privacy Notice","settings.help":"Help","settings.row-profile":"You","settings.row-room":"Axon Park","tips.mobile.video_share_mode":"Tap to stop sharing video.","tips.mobile.pen_mode":"Tap icon again to end drawing.","tips.mobile.mute_mode":"You are muted. Tap to unmute.","tips.mobile.freeze_mode":"Two-finger tap to hide menus.","tips.mobile.look":"Welcome!  Tap and drag to look around.","tips.mobile.locomotion":"Great! To move, pinch with two fingers.","tips.mobile.spawn_menu-pre":"Use the ","tips.mobile.spawn_menu-post":"at the top to create objects.","tips.mobile.freeze_gesture":"Two-finger tap to show menus.","tips.mobile.object_grab":"Drag an object to move or throw it.","tips.mobile.object_rotate_button-pre":"Tap and drag ","tips.mobile.object_rotate_button-post":" to rotate.","tips.mobile.object_scale_button-pre":"Tap and drag ","tips.mobile.object_scale_button-post":" to scale.","tips.mobile.object_recenter_button-pre":"Tap ","tips.mobile.object_recenter_button-post":" to have the object face you.","tips.mobile.object_pin":"Pin an object to save it to axon park.","tips.mobile.object_pin":"Pin an object to save it to axon park.","tips.mobile.invite":"Use the Invite button to share axon park.","tips.desktop.video_share_mode":"You're streaming. Select again to stop sharing video.","tips.desktop.pen_mode":"Press ESC or right click to drop pen. Ctrl-Z to undo.","tips.desktop.mirror_mode":"Press ESC to end camera mirroring.","tips.desktop.mute_mode":"You are muted. Click or press M to un-mute.","tips.desktop.look":"Welcome to Hubs!  Click and drag to look around.","tips.desktop.locomotion":"Great! Now, use the W A S D keys to move. Hold shift to boost.","tips.desktop.turning":"Perfect. Use the Q and E keys to rotate.","tips.desktop.spawn_menu-pre":"To create objects, click the ","tips.desktop.spawn_menu-post":"button at the top of the screen, or press Ctrl 1 through 7.","tips.desktop.freeze_gesture":"Press and hold spacebar to show object menus.","tips.desktop.menu_hover":"Now, point the cursor at an object to show the menu.","tips.desktop.object_grab":"Click and drag an object to move it. Or, flick to throw it!","tips.desktop.object_pin":"Pin an object to save it to axon park.","tips.desktop.object_zoom":"Scroll to move this object towards and away from you.","tips.desktop.object_rotate_button-pre":"Click and drag ","tips.desktop.object_rotate_button-post":" to rotate the object.","tips.desktop.object_scale_button-pre":"Click and drag ","tips.desktop.object_scale_button-post":" to scale the object.","tips.desktop.object_recenter_button-pre":"Click ","tips.desktop.object_recenter_button-post":" to rotate the object to face you. Helpful if you drop it!","tips.desktop.object_scale":"Hold shift and scroll to scale it bigger and smaller.","tips.desktop.pen_color":"Use Shift-Q and Shift-E to change the pen color.","tips.desktop.pen_size":"Hold Shift and scroll to change the pen size.","tips.desktop.invite":"Nobody else is here. Use the Share button at the top to share this room.","tips.desktop.watching":"You're in the lobby. Others cannot see or hear you.","tips.watching.back":"Enter Room","tips.mobile.watching":"You're in the lobby.","tips.watching-exit":"Back","loader.entering_lobby":"Entering lobby...","loader.loading":"Loading ","loader.object":"object","loader.objects":"objects","change-scene-dialog.change-scene":"Change Scene","change-scene-dialog.create-in-spoke":"Or, create a new scene using Spoke.","change-scene-dialog.new-spoke-project":"Launch Spoke","avatar-url-dialog.apply":"Apply","interstitial.prompt":"Continue","feedback.prompt":"Feedback","hide-ui.prompt":"Hide All","discord.primary_tagline":"Share a virtual room with your community.\nWatch videos, play with 3D objects, or just hang out.","discord.secondary_tagline":"No downloads or sign up. Full VR support too.","discord.contact_us":"Invite Bot to Server","discord.community_link":"Hubs Discord","discord.splash_tag":"Designed for serious businessing.","client-info.kick-button":"Kick","client-info.hide-button":"Hide","client-info.unhide-button":"Un-hide ","client-info.mute-button":"Mute","client-info.cancel":"Cancel","avatar-landing.select":"Select","avatar-landing.selected":"This is your current avatar","leave-room-dialog.join-room.message":"Joining a new room will leave this one. Are you sure?","leave-room-dialog.join-room.confirm":"Join Room","leave-room-dialog.create-room.message":"Creating a new room will leave this one. Are you sure?","leave-room-dialog.create-room.confirm":"Leave Room","embed.load-button":"Load Room","embed.presence-warning":"This room is embedded, so may be visible to visitors on other websites."}};n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s});const a=(navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage).toLowerCase().split(/[_-]+/)[0],i=r[a]&&a||"en",s=r[i]||r.en},49:function(e,t,n){"use strict";var o=n(155),r=n(107),a=n(82),i=n.n(a),s=n(130),c=n.n(s),l=n(78),u=n(67);const d=["Baers-Pochard","Baikal-Teal","Barrows-Goldeneye","Blue-Billed","Blue-Duck","Blue-Winged","Brown-Teal","Bufflehead","Canvasback","Cape-Shoveler","Chestnut-Teal","Chiloe-Wigeon","Cinnamon-Teal","Comb-Duck","Common-Eider","Common-Goldeneye","Common-Merganser","Common-Pochard","Common-Scoter","Common-Shelduck","Cotton-Pygmy","Crested-Duck","Crested-Shelduck","Eatons-Pintail","Falcated","Ferruginous","Freckled-Duck","Gadwall","Garganey","Greater-Scaup","Green-Pygmy","Grey-Teal","Hardhead","Harlequin","Hartlaubs","Hooded-Merganser","Hottentot-Teal","Kelp-Goose","King-Eider","Lake-Duck","Laysan-Duck","Lesser-Scaup","Long-Tailed","Maccoa-Duck","Mallard","Mandarin","Marbled-Teal","Mellers-Duck","Merganser","Northern-Pintail","Orinoco-Goose","Paradise-Shelduck","Plumed-Whistler","Puna-Teal","Pygmy-Goose","Radjah-Shelduck","Red-Billed","Red-Crested","Red-Shoveler","Ring-Necked","Ringed-Teal","Rosy-Billed","Ruddy-Shelduck","Salvadoris-Teal","Scaly-Sided","Shelduck","Shoveler","Silver-Teal","Smew","Spectacled-Eider","Spot-Billed","Spotted-Whistler","Steamerduck","Stellers-Eider","Sunda-Teal","Surf-Scoter","Tufted-Duck","Velvet-Scoter","Wandering-Whistler","Whistling-duck","White-Backed","White-Cheeked","White-Winged","Wigeon","Wood-Duck","Yellow-Billed"];function p(e){return e[Math.floor(Math.random()*e.length)]}const m=u.a.map(e=>e.id);function h(){return{avatarId:p(m)}}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){b(e,t,n[t])})}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return E}),n.d(t,"b",function(){return w});const g="___hubs_store",v=Symbol(),_="ret-oauth-flow-account-credentials",y=new o.Validator,E={id:"/HubsStore",definitions:{profile:{type:"object",additionalProperties:!1,properties:{displayName:{type:"string",pattern:"^[A-Za-z0-9-]{3,32}$"},avatarId:{type:"string"},personalAvatarId:{type:"string"}}},credentials:{type:"object",additionalProperties:!1,properties:{token:{type:["null","string"]},email:{type:["null","string"]}}},activity:{type:"object",additionalProperties:!1,properties:{hasFoundFreeze:{type:"boolean"},hasChangedName:{type:"boolean"},hasAcceptedProfile:{type:"boolean"},lastEnteredAt:{type:"string"},hasPinned:{type:"boolean"},hasRotated:{type:"boolean"},hasRecentered:{type:"boolean"},hasScaled:{type:"boolean"},hasHoveredInWorldHud:{type:"boolean"},hasOpenedShare:{type:"boolean"}}},settings:{type:"object",additionalProperties:!1,properties:{lastUsedMicDeviceId:{type:"string"}}},confirmedDiscordRooms:{type:"array",items:{type:"string"}},confirmedBroadcastedRooms:{type:"array",items:{type:"string"}},uploadPromotionTokens:{type:"array",items:{type:"object",additionalProperties:!1,properties:{fileId:{type:"string"},promotionToken:{type:"string"}}}},creatorAssignmentTokens:{type:"array",items:{type:"object",additionalProperties:!1,properties:{hubId:{type:"string"},creatorAssignmentToken:{type:"string"}}}},embedTokens:{type:"array",items:{type:"object",additionalProperties:!1,properties:{hubId:{type:"string"},embedToken:{type:"string"}}}}},type:"object",properties:{profile:{$ref:"#/definitions/profile"},credentials:{$ref:"#/definitions/credentials"},activity:{$ref:"#/definitions/activity"},settings:{$ref:"#/definitions/settings"},confirmedDiscordRooms:{$ref:"#/definitions/confirmedDiscordRooms"},confirmedBroadcastedRooms:{$ref:"#/definitions/confirmedBroadcastedRooms"},uploadPromotionTokens:{$ref:"#/definitions/uploadPromotionTokens"},creatorAssignmentTokens:{$ref:"#/definitions/creatorAssignmentTokens"},embedTokens:{$ref:"#/definitions/embedTokens"}},additionalProperties:!1};class w extends l.a{constructor(){super(),b(this,"init",()=>{this.update({profile:f({},h(),this.state.profile||{})}),this.state.activity.hasChangedName||this.update({profile:{displayName:`${p(d)}-${Math.floor(1e4+1e4*Math.random())}`}})}),b(this,"resetToRandomLegacyAvatar",()=>{this.update({profile:f({},this.state.profile||{},h())})}),null===localStorage.getItem(g)&&localStorage.setItem(g,JSON.stringify({})),window.addEventListener("storage",e=>{e.key===g&&(delete this[v],this.dispatchEvent(new CustomEvent("statechanged")))}),this.update({activity:{},settings:{},credentials:{},profile:{},confirmedDiscordRooms:[],confirmedBroadcastedRooms:[],uploadPromotionTokens:[],creatorAssignmentTokens:[],embedTokens:[]});const e=i.a.getJSON(_);e&&(this.update({credentials:e}),this.resetToRandomLegacyAvatar(),i.a.remove(_))}get state(){return this.hasOwnProperty(v)||(this[v]=JSON.parse(localStorage.getItem(g))),this[v]}get credentialsAccountId(){return this.state.credentials.token?c()(this.state.credentials.token).sub:null}resetConfirmedBroadcastedRooms(){this.update({confirmedBroadcastedRooms:[]},{arrayMerge:(e,t)=>t})}resetTipActivityFlags(){this.update({activity:{hasRotated:!1,hasPinned:!1,hasRecentered:!1,hasScaled:!1}})}update(e,t){const n=Object(r.default)(this.state,e,t),{valid:o}=y.validate(n,E);if(!o)throw new Error("Write to store failed schema validation.");return localStorage.setItem(g,JSON.stringify(n)),delete this[v],this.dispatchEvent(new CustomEvent("statechanged")),n}}},515:function(e,t,n){e.exports=n.p+"assets/images/hub-preview-white-ccefba3b70ae589a0ca5ae3230c39299.png"},58:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return s}),n.d(t,"d",function(){return c});const o=new THREE.Vector3;new THREE.Quaternion;function r(e,t){return e.updateMatrices(),t.setFromMatrixPosition(e.matrixWorld),t}function a(e,t){return e.updateMatrices(),e.matrixWorld.decompose(o,t,o),t}function i(e){e.map&&e.map.dispose(),e.lightMap&&e.lightMap.dispose(),e.bumpMap&&e.bumpMap.dispose(),e.normalMap&&e.normalMap.dispose(),e.specularMap&&e.specularMap.dispose(),e.envMap&&e.envMap.dispose(),e.dispose()}function s(e){if(e instanceof THREE.Mesh&&(e.geometry&&e.geometry.dispose(),e.material)){let t;e.material instanceof THREE.MeshFaceMaterial||e.material instanceof THREE.MultiMaterial?t=e.material.materials:e.material instanceof Array&&(t=e.material),t?t.forEach(i):i(e.material)}}function c(e,t){e.matrixWorld.copy(t),e.matrix=e.matrix.getInverse(e.parent.matrixWorld).multiply(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale)}},66:function(e,t,n){"use strict";function o(e,t){e.material&&(Array.isArray(e.material)?e.material.forEach(t):t(e.material))}function r(e,t){if(e.material)return Array.isArray(e.material)?e.material.map(t):t(e.material)}n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r})},67:function(e,t,n){"use strict";n.d(t,"a",function(){return o});const o=[{id:"botdefault",model:"https://asset-bundles-prod.reticulum.io/bots/BotDefault_Avatar-9f71f8ff22.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botdefault-thumb-42C4C7D3C01D085EAFDAC8BACE591CE6.png"},{id:"botbobo",model:"https://asset-bundles-prod.reticulum.io/bots/BotBobo_Avatar-f9740a010b.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botbobo-thumb-261278FD5831E9CD89610D15948F23E4.png"},{id:"botdom",model:"https://asset-bundles-prod.reticulum.io/bots/BotDom_Avatar-0c48bf15a5.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botdom-thumb-1160EB5E81D24F12CE643C520CE1E99E.png"},{id:"botgreg",model:"https://asset-bundles-prod.reticulum.io/bots/BotGreg_Avatar-98d39797bb.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botgreg-thumb-F2A37F14F9C342EE44DDE9B24DD9B9FC.png"},{id:"botguest",model:"https://asset-bundles-prod.reticulum.io/bots/BotGuest_Avatar-78cd857332.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botguest-thumb-F7A471250E2C10C2709325C3B02A8BBB.png"},{id:"botjim",model:"https://asset-bundles-prod.reticulum.io/bots/BotJim_Avatar-d28005a687.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botjim-thumb-A2D195C1A51A082BCED58BD172481B39.png"},{id:"botkev",model:"https://asset-bundles-prod.reticulum.io/bots/BotKev_Avatar-a95787bb51.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botkev-thumb-90746A7349E3F964C913EA612EE9A53F.png"},{id:"botpinky",model:"https://asset-bundles-prod.reticulum.io/bots/BotPinky_Avatar-b0b93f8675.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botpinky-thumb-C2E69D4479077766B988DC3EE4F30BE5.png"},{id:"botrobert",model:"https://asset-bundles-prod.reticulum.io/bots/BotRobert_Avatar-e9554880f3.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botrobert-thumb-9C33F2C752326E2CF4321EAA7BDB4E47.png"},{id:"botwoody",model:"https://asset-bundles-prod.reticulum.io/bots/BotWoody_Avatar-0140485a23.gltf",thumbnail:"https://asset-bundles-prod.reticulum.io/bots/botwoody-thumb-F1F1FA7E21301B5AC1D8872B4ED0CC56.png"}]},83:function(e,t,n){"use strict";function o(e,t,n,o,r,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,r)}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});const r=window.createImageBitmap||function(){var e,t=(e=function*(e){return new Promise(t=>{let n;if(e instanceof Blob)n=URL.createObjectURL(e);else{const t=document.createElement("canvas"),o=t.getContext("2d");t.width=e.width,t.height=e.height,o.putImageData(e,0,0),n=t.toDataURL()}const o=document.createElement("img");o.addEventListener("load",()=>t(o)),o.src=n})},function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)})});return function(e){return t.apply(this,arguments)}}();function a(e){e instanceof HTMLImageElement&&e.src.startsWith("blob:")?URL.revokeObjectURL(e.src):e.close&&e.close()}},88:function(e,t,n){"use strict";function o(){return new Promise(e=>{setTimeout(e,0)})}n.d(t,"a",function(){return o})}});
//# sourceMappingURL=avatar-4599356928b4a37dd786.js.map