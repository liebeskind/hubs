{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/utils/next-tick.js","webpack:///./src/utils/resizeShadowCameraFrustum.js","webpack:///./src/components/directional-light.js","webpack:///./src/components/layers.js","webpack:///./src/components/loop-animation.js","webpack:///./src/components/media-loader.js","webpack:///./src/components/quack.js","webpack:///./src/components/scene-preview-camera.js","webpack:///./src/components/skybox.js","webpack:///./src/components/spawn-controller.js","webpack:///./src/components/super-spawner.js","webpack:///./src/components/water.js","webpack:///./src/components/particle-emitter.js","webpack:///./src/utils/component-mappings.js","webpack:///./src/gltf-component-mappings.js","webpack:///./src/utils/phoenix-utils.js","webpack:///./src/assets/stylesheets/scene-ui.scss?ca5c","webpack:///./src/utils/media-url-utils.js","webpack:///./src/utils/history.js","webpack:///./src/assets/images/twitter.svg","webpack:///./src/assets/images/spoke_logo_black.png","webpack:///./src/assets/sfx/tick.mp3","webpack:///./src/materials/MobileStandardMaterial.js","webpack:///./src/storage/media-search-store.js","webpack:///./src/utils/async-utils.js","webpack:///./src/components/gltf-model-plus.js","webpack:///./src/utils/promisify-worker.js","webpack:///./src/systems/userinput/paths.js","webpack:///./src/assets/stylesheets/scene.scss?9a0b","webpack:///./src/components/hoverable-visuals.js","webpack:///./src/react-components/dialog-container.js","webpack:///./src/constants.js","webpack:///./src/react-components/create-room-dialog.js","webpack:///./src/react-components/scene-ui.js","webpack:///./src/scene.js","webpack:///./src/components/environment-map.js","webpack:///./src/utils/media-highlight-frag.glsl","webpack:///./src/assets/images/cubemap/posx.jpg","webpack:///./src/assets/images/cubemap/negx.jpg","webpack:///./src/systems/sound-effects-system.js","webpack:///./src/assets/images/cubemap/posy.jpg","webpack:///./src/assets/images/cubemap/negy.jpg","webpack:///./src/assets/images/cubemap/posz.jpg","webpack:///./src/assets/images/cubemap/negz.jpg","webpack:///./src/utils/disable-ios-zoom.js","webpack:///./src/App.js","webpack:///./src/utils/component-utils.js","webpack:///./src/loaders/HubsTextureLoader.js","webpack:///./src/utils/media-utils.js","webpack:///./src/utils/qs_truthy.js","webpack:///./src/utils/scene-graph.js","webpack:///./src/utils/auto-box-collider.js","webpack:///./src/everyspace/airtable.js","webpack:///./src/everyspace/messages.js","webpack:///./src/everyspace/customization.js","webpack:///./src/utils/i18n.js","webpack:///./src/utils/logging.js","webpack:///./src/components/audio-feedback.js","webpack:///./src/utils/animation.js","webpack:///./src/utils/three-utils.js","webpack:///./src/utils/material-utils.js","webpack:///./src/utils/webgl.js","webpack:///./src/assets/LoadingObject_Atom.glb","webpack:///./src/assets/sfx/teleport-loop.mp3","webpack:///./src/assets/sfx/quickTurn.mp3","webpack:///./src/assets/sfx/tap_mellow.mp3","webpack:///./src/assets/sfx/PenSpawn.mp3","webpack:///./src/assets/sfx/PenDraw1.mp3","webpack:///./src/assets/sfx/PicSnapHey.mp3","webpack:///./src/assets/sfx/welcome.mp3","webpack:///./src/assets/sfx/quack.mp3","webpack:///./src/assets/sfx/specialquack.mp3","webpack:///./src/assets/sfx/pop.mp3","webpack:///./src/assets/sfx/Eb_blip.mp3","webpack:///./src/assets/sfx/tack.mp3","webpack:///./src/assets/sfx/A_bendUp.mp3","webpack:///./src/assets/sfx/suspense.mp3","webpack:///./src/assets/waternormals.jpg","webpack:///./src/utils/identity.js","webpack:///./src/storage/store.js","webpack:///./src/assets/images/hub-preview-white.png","webpack:///./src/object-types.js","webpack:///./src/assets/avatars/avatars.js","webpack:///./src/utils/threejs-world-update.js","webpack:///./src/components/animation.js","webpack:///./src/components/ambient-light.js","webpack:///./src/components/animation-mixer.js","webpack:///./src/components/css-class.js","webpack:///./src/telemetry.js","webpack:///./src/components/duck.js","webpack:///./src/components/heightfield.js","webpack:///./src/components/hemisphere-light.js","webpack:///./src/components/hide-when-quality.js","webpack:///./src/components/point-light.js","webpack:///./src/components/spot-light.js","webpack:///./src/components/floaty-object.js","webpack:///./src/components/trigger-volume.js","webpack:///./src/components/video-pause-state.js","webpack:///./src/components/debug.js","webpack:///./src/react-components/wrap-with-audio.js","webpack:///./src/systems/nav.js","webpack:///./src/components/event-repeater.js","webpack:///./src/utils/permissions-utils.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","9","exports","module","l","e","Promise","resolve","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","nextTick","setTimeout","__webpack_exports__","boundingBox","THREE","Box3","frustumBox","inverseLightMatrixWorld","Matrix4","tempBox","FRUSTUM_PADDING","NEAR_CLIPPING_PLANE","FAR_CLIPPING_PLANE","verts","Vector3","AFRAME","registerComponent","schema","color","type","intensity","default","castShadow","shadowMapResolution","shadowBias","shadowRadius","init","el","this","light","DirectionalLight","position","set","target","add","setObject3D","sceneEl","systems","registerLight","rendererSystem","renderer","update","prevData","Color","applyColorCorrection","copy","shadow","bias","radius","width","height","prevWidth","prevHeight","mapSize","map","dispose","camera","matrixNeedsUpdate","tick","APP","quality","scene","makeEmpty","traverse","node","geometry","computeBoundingBox","applyMatrix4","matrixWorld","union","min","max","x","y","z","getInverse","expandByPoint","left","right","bottom","top","near","far","updateProjectionMatrix","resizeShadowCameraFrustum","object3D","remove","removeObject3D","Layers","reflection","inWorldHud","exclusive","addEventListener","oldData","obj","layers","mask","layer","entries","oldValue","newValue","enable","disable","removeEventListener","paused","clip","mixerEl","findAncestorWithComponent","updateClip","console","warn","currentAction","mixer","animations","components","clipName","find","action","clipAction","enabled","setLoop","LoopRepeat","Infinity","play","destroy","stop","SHAPE","require","loadingObjectEnvMap","loadingObject","GLTFLoader","load","loadingObjectSrc","gltf","batchMeshes","qsTruthy","disableBatching","fileId","fileIsOwned","src","resize","contentType","contentSubtype","animate","mediaOptions","parse","v","JSON","stringify","onError","showLoader","clearLoadingTimeout","onMediaLoaded","animating","NAF","utils","getNetworkedEntity","then","networkedEl","updateScale","center","mesh","getObject3D","box","getBox","scaleCoefficient","getScaleCoefficient","scale","multiplyScalar","addVectors","sub","removeShape","id","getAttribute","removeAttribute","dt","loaderMixer","loadingSoundNode","soundEffectsSystem","stopSoundNode","setAttribute","object3DMap","useFancyLoader","clone","Mesh","BoxGeometry","MeshBasicMaterial","environmentMapComponent","currentEnivronmentMap","environmentMap","applyEnvironmentMap","AnimationMixer","loadingClip","loadingScaleClip","AnimationClip","VectorKeyframeTrack","BOX","is","isMine","playSoundLooped","SOUND_MEDIA_LOADING","showLoaderTimeout","clearTimeout","updateHoverableVisuals","hoverableVisuals","injectedCustomShaderChunks","uniforms","injectCustomShaderChunks","setFromObject","getBoundingSphere","boundingSphere","physicsShape","shouldUpdateScale","playSoundOneShot","SOUND_MEDIA_LOADED","finish","minHalfExtent","pager","repositionToolbar","addMeshScaleAnimation","initialScale","onComplete","step","lastValue","anim","animatables","Math","Number","MIN_VALUE","config","duration","easing","elasticity","loop","round","targets","complete","anime","_this","_asyncToGenerator","thumbnail","canonicalUrl","accessibleUrl","resolveUrl","origin","startsWith","location","protocol","meta","expected_content_type","proxiedUrlFor","guessContentType","url","fetch","method","headers","fetchContentType","emit","raw","material","isHLS","parsedUrl","URL","qsTime","parseInt","searchParams","startTime","URLSearchParams","hash","substring","reduceAngularFloat","releaseGravity","detail","projection","once","assign","time","dirs","template","batch","includes","HULL","addAnimationComponents","inflate","modelToWorldScale","Error","mayChangeScene","permissions","can","isHubsAvatarUrl","isHubsRoomUrl","isHubsSceneUrl","error","index","maxIndex","_this2","toolbar","onNext","onPrev","_ensureUI","_this3","hasSetupUI","document","getElementById","querySelector","appendChild","importNode","content","nextButton","prevButton","pageLabel","_this4","parentNode","removeChild","takeOwnership","newIndex","quackPercentage","specialQuackPercentage","_handleGrabStart","pause","rand","random","SOUND_SPECIAL_QUACK","SOUND_QUACK","lerp","start","end","newRot","Quaternion","positionOnly","startPoint","startRotation","quaternion","targetPoint","targetRotDelta","Euler","targetRotation","setFromEuler","premultiply","performance","now","backwards","ranOnePass","tick2","streamerCamera","streamer","getCurrentStreamer","getStreamerCamera","setMatrixWorld","translateZ","from","to","fromRot","toRot","slerp","rotation","setFromQuaternion","isBotMode","Sky","shader","SkyShader","ShaderMaterial","fragmentShader","vertexShader","UniformsUtils","side","BackSide","BoxBufferGeometry","constructor","luminance","turbidity","rayleigh","mieCoefficient","mieDirectionalG","sunPosition","join","inclination","azimuth","distance","sky","skyScene","Scene","cubeCamera","CubeCamera","updateEnvironmentMap","requestAnimationFrame","theta","PI","phi","cos","sin","normalize","vrEnabled","vr","pmremGenerator","PMREMGenerator","renderTarget","texture","pmremCubeUVPacker","PMREMCubeUVPacker","cubeLods","CubeUVRenderTarget","playerHeight","loadedEvent","moveToSpawnPoint","spawnPoints","querySelectorAll","spawnPoint","getLastWorldPosition","visible","COLLISION_LAYERS","useCustomSpawnPosition","spawnPosition","useCustomSpawnRotation","spawnRotation","useCustomSpawnScale","spawnScale","spawnCooldown","centerSpawnedObject","spawnEvent","animateFromCursor","cooldownTimeout","handPosition","onSpawnEvent","tempSpawnHandPosition","classList","entity","addMedia","ObjectContentOrigins","SPAWNER","cursor","getWorldPosition","getWorldQuaternion","userinput","scenes","interaction","willAnimateFromCursor","paths","actions","rightHand","matrix","state","rightRemote","held","spawning","activateCooldown","waitForEvent","delay","dur","syncToPhysics","sx","sy","sz","collisionFilterMask","NONE","DEFAULT_SPAWNER","MobileWater","options","undefined","normalSampler","waterNormals","sunDirection","sunColor","waterColor","eye","distortionScale","FrontSide","fog","mirrorShader","merge","UniformsLib","size","ShaderChunk","transparent","lights","reject","TextureLoader","wrapS","wrapT","RepeatWrapping","needsUpdate","Water","speed","forceMobile","waterMesh","waterGeometry","loadWaterNormals","waterNormalMap","waterConfig","textureWidth","textureHeight","device","isMobile","isMobileVR","water","mirrorCamera","setStyle","startColor","middleColor","endColor","startOpacity","middleOpacity","endOpacity","colorCurve","sizeCurve","startSize","endSize","sizeRandomness","ageRandomness","lifetime","lifetimeRandomness","particleCount","startVelocity","endVelocity","velocityCurve","angularVelocity","particleEmitter","ParticleEmitter","updateParticles","setTexture","Texture","textureLoader","loadTextureAsync","catch","getSanitizedComponentMapping","inputComponent","inputProperty","publicComponents","publicComponent","publicProperty","publicProperties","mappedComponent","mappedProperty","getMappedValue","PHYSICS_CONSTANTS","TYPE","FIT","decayMigration","componentName","componentData","range","decay","mediaInflator","isControlled","networked","hasVolume","templateName","controls","isHubsDestinationUrl","href","owner","persistent","networkId","videoPaused","autoPlay","volume","audioType","hidePlaybackControls","distanceModel","rolloffFactor","refDistance","maxDistance","coneInnerAngle","coneOuterAngle","coneOuterGain","GLTFModelPlus","isHandCollisionTarget","cursorController","mass","STATIC","collisionFilterGroup","INTERACTABLES","euler","orientation","fit","MANUAL","offset","halfExtents","_componentName","nav","zone","found","isMesh","loadMesh","pageIndex","video","loop-animation","indexToEntityMap","enterComponent","enterProperty","enterValue","leaveComponent","leaveProperty","leaveValue","enterComponentMapping","leaveComponentMapping","targetEntity","message","colliders","HEIGHTFIELD","margin","heightfieldDistance","heightfieldData","MESH","ALL","includeInvisible","createElement","getReticulumFetchUrl","path","absolute","reticulumMeta","invalidatedReticulumMetaThisSession","invalidateReticulumMeta","_invalidateReticulumMeta","arguments","getReticulumMeta","_getReticulumMeta","version","pool","phx_host","_ref2","res","json","_x6","phxHostOverride","search","connectToReticulum","_connectToReticulum","debug","params","qs","getNewSocketUrl","_ref3","socketProtocol","socketHost","socketPort","process","RETICULUM_SOCKET_SERVER","port","socketUrl","log","socketSettings","logger","kind","msg","socket","Socket","connect","endPointPath","endPoint","pathname","newEndPoint","getLandingPageForPhoto","photoUrl","replace","fetchReticulumAuthenticated","payload","token","store","credentials","retUrl","content-type","authorization","body","_ref","text","_x","createAndRedirectToNewHub","_x2","_x3","_x4","_x5","_createAndRedirectToNewHub","sceneId","sceneUrl","createUrl","assets","Name","SceneUrl","hub","getAirtableAssets","default_environment_gltf_bundle_url","Store","email","creatorAssignmentToken","creator_assignment_token","creatorAssignmentTokens","hubId","hub_id","embedToken","embed_token","embedTokens","host","getPresenceEntryForSession","presences","sessionId","presence","k","metas","getPresenceContextForSession","context","getPresenceProfileForSession","profile","migrateChannelToSocket","oldChannel","channel","topic","bindings","item","on","event","callback","pushBuffer","timeout","oldJoinPush","joinPush","recHooks","receive","status","discordBridgesForPresences","channels","values","discordBridges","Array","b","tweetButton","createButton","optionsButton","ui","logoTagline","whiteOverlay","grid","mainPanel","logo","info","attribution","screenshot","screenshotHidden","spoke","madeWith","createButtons","unavailable","scaledThumbnailUrlFor","getCustomGLTFParserURLResolver","nonCorsProxyDomains","split","CORS_PROXY_SERVER","commonKnownContentTypes","glb","png","jpg","jpeg","pdf","mp4","mp3","farsparkEncodeUrl","str","btoa","encodeURIComponent","_","p1","String","fromCharCode","b64EncodeUnicode","farsparkUrl","urlHostname","hostname","domain","endsWith","gltfUrl","test","corsProxyPrefix","originalUrlParts","decodeURIComponent","dataUrlRegex","matches","match","extension","pop","hubsSceneRegex","hubsAvatarRegex","hubsRoomRegex","pushOrUpdateHistory","history","newPathname","newSearch","newLength","__historyLength","_objectSpread","__duplicate","isDuplicate","pushHistoryState","replaceHistoryState","pushHistoryPath","clearHistoryState","popToBeginningOfHubHistory","navigateToPriorPage","len","unsubscribe","listen","go","sluglessPath","withSlug","VERTEX_SHADER","FRAGMENT_SHADER","MobileStandardMaterial","[object Object]","args","super","_defineProperty","parameters","uvTransform","Matrix3","diffuse","opacity","aoMapIntensity","aoMap","emissive","emissiveMap","alphaTest","skinning","morphTargets","vertexColors","mobileMaterial","fromStandardMaterial","SOURCES","EMPTY_RESULT","URL_SOURCE_TO_TO_API_SOURCE","images","videos","youtube","gifs","sketchfab","poly","twitch","favorites","MEDIA_SOURCE_DEFAULT_FILTERS","SEARCH_CONTEXT_PARAMS","MediaSearchStore","EventTarget","dispatchEvent","CustomEvent","urlSource","getUrlMediaSource","previousSource","urlParams","requestIndex","currentRequestIndex","locationSearchParams","isMy","param","source","navigator","languages","singular","credentialsAccountId","toString","lastSavedUrl","isFetching","nextCursor","next_cursor","lastFetchedUrl","legacyAvatar","preview","gltfs","avatar","model","delta","goBack","filter","query","delete","keepSource","keepNav","_stashedParams","_stashedSource","q","_sourceNavigate","hideNav","useLastStashedParams","currentQuery","getSearchClearedSearchParams","useValue","hasAccountWithAvatars","_hasAccountWithAvatars","stashLastSearchParams","_stashLastSearchParams","hasMediaPath","setHistory","_update","waitForDOMContentLoaded","eventName","eventObj","readyState","raycast","acceleratedRaycast","gltfCache","Map","cache","count","retain","has","cacheItem","release","disposeNode","inflightGltfs","extractZipFile","promisifyWorker","SketchfabZipWorker","defaultInflator","multiple","isArray","cloneSkinnedMesh","cloneLookup","parallelTraverse","a","children","sourceNode","clonedNode","boundsTree","sourceMesh","isSkinnedMesh","sourceBones","skeleton","bones","clonedMesh","sourceBone","bindMatrix","cloneGltf","getHubsComponents","hubsComponents","userData","gltfExtensions","MOZ_hubs_components","HUBS_components","legacyComponents","componentKey","inflator","inflateEntities","templates","isRoot","childEntities","child","entityComponents","append","className","uuid","order","matrixAutoUpdate","identity","decompose","toLowerCase","parent","gltfIndex","attachTemplate","root","templateRoot","targetEls","cloneNode","attributes","loadGLTF","_loadGLTF","preferredTechnique","onProgress","jsonPreprocessor","fileMap","loadingManager","LoadingManager","setURLModifier","gltfLoader","parser","createParser","extensions","oldHeightfieldNode","nodes","heightfield","runMigration","materials","MOZ_alt_materials","altMaterialIndex","extras","Object3D","DefaultMatrixAutoUpdate","mapMaterials","isMeshStandardMaterial","keys","forEach","revokeObjectURL","useCache","loadTemplates","applySrc","batchManagerSystem","removeObject","templateEl","firstElementChild","loadModel","technique","promise","charAt","assetEl","lastSrc","inflatedEl","disposeLastInflatedEl","addObject","initMixer","hasBufferGeometry","isBufferGeometry","hasBoundsTree","geo","triCount","MeshBVH","strategy","maxDepth","object3DToSet","inflatedEntity","prop","inflateComponents","rewires","f","format","worker","nextItemId","outstanding","onmessage","err","handlers","transfer","postMessage","toggleScreenShare","snapRotateLeft","snapRotateRight","logDebugFrame","logInteractionState","cameraDelta","lobbyCameraDelta","characterAcceleration","boost","startGazeTeleport","stopGazeTeleport","spawnPen","ensureFrozen","toggleFreeze","thaw","muteMic","toggleFlying","enableMegaphone","focusChat","focusChatCommand","toggleCamera","takeSnapshot","mediaExit","mediaSearch1","mediaSearch2","mediaSearch3","mediaSearch4","mediaSearch5","mediaSearch6","mediaSearch7","mediaSearch8","transformModifier","rayObjectRotation","pose","hideLine","grab","drop","modDelta","startDrawing","stopDrawing","undoDrawing","penNextColor","penPrevColor","scalePenTip","scaleGrabbedGrabbable","mediaVolumeMod","pen","switchDrawMode","startTeleport","stopTeleport","thumb","middleRingPinky","leftHand","exitMirror","haptics","actuators","mouse","coords","movementXY","buttonLeft","buttonRight","wheel","smartMouse","cursorPose","touchscreen","touchCameraDelta","gyroCameraDelta","pinch","initialDistance","currentDistance","isTouching","isTouchingGrabbable","tap1","tap2","tap3","tap4","tap5","gyro","averageDeltaX","averageDeltaY","hud","penButton","keyboard","gamepad","gamepadIndex","button","buttonIndex","pressed","touched","axis","axisIndex","xbox","buttonName","axisName","axesSum","oculusgo","trigger","touchpad","axisX","axisY","gearVRController","daydream","rightOculusTouch","leftOculusTouch","axes","wmrController","wmr","grip","menu","joystick","vive","loading-text","loadingText","validMaterials","_utils_material_utils__WEBPACK_IMPORTED_MODULE_0__","_utils_permissions_utils__WEBPACK_IMPORTED_MODULE_1__","interactorOneTransform","interactorTwoTransform","enableSweepingEffect","Sphere","sweepParams","forEachMaterial","contains","meshToEl","isFrozen","showEffect","showHoverEffect","interactorOne","interactorTwo","hovered","toArray","worldY","elements","scaledRadius","uniform","hubs_EnableSweepingEffect","hubs_IsFrozen","hubs_SweepParams","hubs_HighlightInteractorOne","hubs_InteractorOnePos","hubs_HighlightInteractorTwo","hubs_InteractorTwoPos","hubs_Time","DialogContainer","Component","props","closable","currentTarget","onClose","onKeyDown","onContainerClicked","componentDidMount","componentWillUnmount","render","react__WEBPACK_IMPORTED_MODULE_0___default","classNames","onClick","wide","allowOverflow","additionalClass","_wrap_with_audio__WEBPACK_IMPORTED_MODULE_3__","_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_5__","icon","faTimes","title","PropTypes","isRequired","func","bool","string","ENVIRONMENT","AVATAR","HANDS","DEFAULT_INTERACTABLE","UNOWNED_INTERACTABLE","HUB_NAME_PATTERN","CreateRoomDialog","customRoomName","customSceneUrl","airtableAssets","airtableAssetsInitialState","setState","fetchAirtableAssets","_this$props","onCustomScene","other","_objectWithoutProperties","react_default","dialog_container","_extends","includeScenePrompt","onSubmit","placeholder","pattern","onChange","required","wrap_with_audio","addLocaleData","en","SceneUI","scene_ui_defineProperty","showScreenshot","showCustomRoomDialog","sceneLoaded","onSceneLoaded","index_es","locale","lang","messages","styles","tweetText","sceneName","tweetLink","attributions","toAttributionSpan","rel","author","sceneAttributions","creator","sceneScreenshotURL","hubLogo","createRoom","react_fontawesome_index_es","faEllipsisH","twitter_default","spokeLogo","create_room_dialog_CreateRoomDialog","sceneDescription","BUILD_VERSION","patchWebGLRenderingContext","App","mountUI","ReactDOM","react_components_scene_ui","disableiOSZoom","onReady","uiProps","remountUI","sceneRoot","sceneModelEntity","gltfEl","previewCamera","getObjectByName","sceneInfo","allow_promotion","registerTelemetry","modelUrl","model_url","description","screenshot_url","createDefaultEnvironmentMap","_createDefaultEnvironmentMap","urls","cubeMapPosX","cubeMapNegX","cubeMapPosY","cubeMapNegY","cubeMapPosZ","cubeMapNegZ","CubeTextureLoader","RGBFormat","envMap","SOUND_HOVER_OR_GRAB","SOUND_THAW","SOUND_PEN_STOP_DRAW","SOUND_PEN_UNDO_DRAW","SOUND_PEN_CHANGE_COLOR","SOUND_TOGGLE_MIC","SOUND_TELEPORT_START","SOUND_TELEPORT_END","SOUND_SNAP_ROTATE","SOUND_SPAWN_PEN","SOUND_PEN_START_DRAW","SOUND_CAMERA_TOOL_TOOK_SNAPSHOT","SOUND_ENTER_SCENE","SOUND_CHAT_MESSAGE","SOUND_FREEZE","SOUND_PIN","SOUND_CAMERA_TOOL_COUNTDOWN","SoundEffectsSystem","_assets_sfx_tick_mp3__WEBPACK_IMPORTED_MODULE_0__","_assets_sfx_tick_mp3__WEBPACK_IMPORTED_MODULE_0___default","_assets_sfx_teleport_loop_mp3__WEBPACK_IMPORTED_MODULE_1__","_assets_sfx_teleport_loop_mp3__WEBPACK_IMPORTED_MODULE_1___default","_assets_sfx_quickTurn_mp3__WEBPACK_IMPORTED_MODULE_2__","_assets_sfx_quickTurn_mp3__WEBPACK_IMPORTED_MODULE_2___default","_assets_sfx_tap_mellow_mp3__WEBPACK_IMPORTED_MODULE_3__","_assets_sfx_tap_mellow_mp3__WEBPACK_IMPORTED_MODULE_3___default","_assets_sfx_PenSpawn_mp3__WEBPACK_IMPORTED_MODULE_4__","_assets_sfx_PenSpawn_mp3__WEBPACK_IMPORTED_MODULE_4___default","_assets_sfx_PenDraw1_mp3__WEBPACK_IMPORTED_MODULE_5__","_assets_sfx_PenDraw1_mp3__WEBPACK_IMPORTED_MODULE_5___default","_assets_sfx_PicSnapHey_mp3__WEBPACK_IMPORTED_MODULE_6__","_assets_sfx_PicSnapHey_mp3__WEBPACK_IMPORTED_MODULE_6___default","_assets_sfx_welcome_mp3__WEBPACK_IMPORTED_MODULE_7__","_assets_sfx_welcome_mp3__WEBPACK_IMPORTED_MODULE_7___default","_assets_sfx_quack_mp3__WEBPACK_IMPORTED_MODULE_8__","_assets_sfx_quack_mp3__WEBPACK_IMPORTED_MODULE_8___default","_assets_sfx_specialquack_mp3__WEBPACK_IMPORTED_MODULE_9__","_assets_sfx_specialquack_mp3__WEBPACK_IMPORTED_MODULE_9___default","_assets_sfx_pop_mp3__WEBPACK_IMPORTED_MODULE_10__","_assets_sfx_pop_mp3__WEBPACK_IMPORTED_MODULE_10___default","_assets_sfx_Eb_blip_mp3__WEBPACK_IMPORTED_MODULE_11__","_assets_sfx_Eb_blip_mp3__WEBPACK_IMPORTED_MODULE_11___default","_assets_sfx_tack_mp3__WEBPACK_IMPORTED_MODULE_12__","_assets_sfx_tack_mp3__WEBPACK_IMPORTED_MODULE_12___default","_assets_sfx_A_bendUp_mp3__WEBPACK_IMPORTED_MODULE_13__","_assets_sfx_A_bendUp_mp3__WEBPACK_IMPORTED_MODULE_13___default","_assets_sfx_suspense_mp3__WEBPACK_IMPORTED_MODULE_14__","_assets_sfx_suspense_mp3__WEBPACK_IMPORTED_MODULE_14___default","soundEnum","pendingEffects","audioContext","AudioContext","getContext","soundsAndUrls","URL_TICK","URL_TELEPORT_LOOP","URL_QUICK_TURN","URL_TAP_MELLOW","URL_PEN_SPAWN","URL_PEN_DRAW","URL_CAMERA_SNAPSHOT","URL_WELCOME","URL_QUACK","URL_SPECIAL_QUACK","URL_POP","URL_FREEZE","URL_TACK","URL_MEDIA_LOADING","URL_MEDIA_LOADED","loading","audioBufferPromise","arrayBuffer","decodeAudioData","sounds","sound","audioBuffer","enqueueSound","createBufferSource","buffer","destination","playSoundLoopedWithGain","gain","createGain","indexOf","detect_browser__WEBPACK_IMPORTED_MODULE_0__","detectOS","userAgent","lastTouchAtMs","ev","preventDefault","Date","getTime","isDoubleTouch","_storage_store__WEBPACK_IMPORTED_MODULE_0__","_storage_media_search_store__WEBPACK_IMPORTED_MODULE_1__","mediaSearchStore","setQuality","registerComponentInstance","component","componentRegistry","deregisterComponentInstance","hubChannel","playerInfos","playerInfo","playerSessionId","streaming","HubsTextureLoader","manager","DefaultLoadingManager","onLoad","imageLoader","createImageBitmap","ImageBitmapLoader","flipY","ImageLoader","setCrossOrigin","crossOrigin","setPath","cacheKey","resolveURL","image","loader","loadAsync","Cache","onUpdate","close","mediaAPIEndpoint","resolveUrlCache","media_utils_asyncToGenerator","resultPromise","Content-Type","media","response","ok","statusText","upload","file","desiredContentType","formData","FormData","interactableId","contentOrigin","needsToBeUploaded","File","fireLoadingTimeout","reader","FileReader","onload","view","DataView","getUint16","byteLength","marker","getUint32","little","tags","readAsArrayBuffer","getOrientation","srcUrl","access_token","file_id","uploadPromotionTokens","promotionToken","promotion_token","MediaStream","clientId","objectType","objectTypeForOriginAndContentType","vertexRegex","fragRegex","shaderUniforms","newMaterial","onBeforeCompile","vlines","vindex","findIndex","line","unshift","flines","findex","mediaHighlightFrag","getPromotionTokenForFile","mediaPos","addAndArrangeMedia","snapCount","mirrorOrientation","pos","rotateY","idx","localToWorld","handler","eventType","createImageTexture","_createImageTexture","encoding","sRGBEncoding","anisotropy","val","computeObjectAABB","bounds","boxRoot","updateMatrices","updateMatrixWorld","isEmpty","worldToLocal","matrixWorldNeedsUpdate","dX","abs","dY","dZ","Airtable","configure","endpointUrl","apiKey","base","DarkLogo","Icon","select","firstPage","fields","records","modifiedTranslations","i18n_messages","navigatorLang","language","userLanguage","localeData","debug__WEBPACK_IMPORTED_MODULE_0__","debug__WEBPACK_IMPORTED_MODULE_0___default","_qs_truthy__WEBPACK_IMPORTED_MODULE_1__","isDebug","logFilter","calculateVolume","analyser","levels","getByteTimeDomainData","sum","amplitude","currVolume","sqrt","tempScaleFromPosition","tempScaleToPosition","getAudioFeedbackScale","fromObject","toObject","minScale","maxScale","setFromMatrixPosition","distanceTo","prevVolume","_updateAnalysis","_runScheduledWork","schedule","ctx","createAnalyser","fftSize","Uint8Array","frequencyBinCount","soundSource","unschedule","avatarIsQuiet","currentVolume","lastSeenVolume","registerSystem","mediaStream","stream","createMediaStreamSource","connectAnalyser","_playerCamera","audioAnalyser","setScalar","SPRITE_NAMES","MIC","MIC_HOVER","MIC_OFF","MIC_OFF_HOVER","micLevelForVolume","active","tooltip","tooltipText","activeTooltipText","loudest","prevSpriteName","decayingVolume","hovering","onHover","onHoverOut","textEl","spriteName","modelEl","getLastWorldQuaternion","tempVector3","disposeMaterial","mtrl","lightMap","bumpMap","normalMap","specularMap","materialArray","MeshFaceMaterial","MultiMaterial","multiply","fn","originalGetExtension","WebGLRenderingContext","getExtension","supportsFloatTextures","WebGLRenderer","Float32Array","dataTexture","DataTexture","RGBAFormat","FloatType","PlaneBufferGeometry","Camera","getError","checkFloatTextureSupport","names","selectRandom","arr","floor","avatarIds","avatars","av","generateDefaultProfile","avatarId","LOCAL_STORE_KEY","STORE_STATE_CACHE_KEY","OAUTH_FLOW_CREDENTIALS_KEY","validator","Validator","SCHEMA","definitions","additionalProperties","properties","displayName","personalAvatarId","activity","hasFoundFreeze","hasChangedName","hasAcceptedProfile","lastEnteredAt","hasPinned","hasRotated","hasRecentered","hasScaled","hasHoveredInWorldHud","hasOpenedShare","entryCount","settings","lastUsedMicDeviceId","confirmedDiscordRooms","items","confirmedBroadcastedRooms","onLoadActions","$ref","localStorage","getItem","setItem","oauthFlowCredentials","Cookies","getJSON","resetToRandomLegacyAvatar","jwtDecode","resetConfirmedBroadcastedRooms","clearStoredArray","resetTipActivityFlags","bumpEntryCount","currentEntryCount","enqueueOnLoadAction","executeOnLoadActions","clearOnLoadActions","arrayMerge","destinationArray","sourceArray","newState","mergeOpts","finalState","valid","validate","ObjectTypes","FILE","CLIPBOARD","URL_IMAGE","URL_VIDEO","URL_MODEL","URL_PDF","URL_AUDIO","FILE_IMAGE","FILE_VIDEO","FILE_MODEL","FILE_PDF","FILE_AUDIO","CLIPBOARD_IMAGE","CLIPBOARD_VIDEO","CLIPBOARD_MODEL","CLIPBOARD_PDF","CLIPBOARD_AUDIO","SPAWNER_IMAGE","SPAWNER_VIDEO","SPAWNER_MODEL","SPAWNER_PDF","SPAWNER_AUDIO","CAMERA","UNKNOWN","objectTypeForOrigin","urlType","fileType","clipboardType","spawnerType","objectTypeMimePrefixLookupMap","image/","model/","application/x-zip-compressed","video/","application/vnd.apple.mpegurl","application/x-mpegurl","audio/","application/pdf","srcSuffixLookupMap",".m3u8","prefix","suffix","zeroPos","zeroQuat","oneScale","bindingSetters","PropertyBinding","SetterByBindingTypeAndVersioning","Versioning","setter","MatrixWorldNeedsUpdate","targetObject","getWorldScale","handleMatrixModification","matrixIsModified","cachedMatrixWorld","updateMatrix","applyMatrix","forceLocalUpdate","forceWorldUpdate","skipParents","hasHadFirstMatrixUpdate","equals","childrenNeedMatrixWorldUpdate","multiplyMatrices","forceChildrenWorldUpdate","lookAt","q1","m1","isVector3","isCamera","isLight","up","setFromRotationMatrix","extractRotation","inverse","animation","colorHelperFrom","colorHelperTo","getComponentProperty","setComponentProperty","splitCache","TYPE_COLOR","STRING_COMPONENTS","STRING_OBJECT3D","toRadians","degToRad","addEventListeners","eventNames","removeEventListeners","getRawProperty","splitDot","setRawProperty","propertyName","targetValue","g","isRawProperty","autoplay","dir","startEvents","pauseEvents","resumeEvents","self","eventDetail","attrName","animationIsPlaying","onStartEvent","beginAnimation","pauseAnimation","resumeAnimation","fromColor","toColor","targetsArray","updateConfigForDefault","updateConfigForRawColor","direction","createAndStartAnimation","cancelDelayedStart","pausedWasPlaying","updateConfig","delayTimeout","stopRelatedAnimations","waitComponentInitRawProperty","setColorConfig","isBoolean","isNaN","parseFloat","aframeProperty","updateConfigForVector","coordinates","propType","getPropertyType","cb","wait","evt","AmbientLight","raven_js__WEBPACK_IMPORTED_MODULE_0__","raven_js__WEBPACK_IMPORTED_MODULE_0___default","ga","trackedPage","trackedTitle","sentryDsn","SENTRY_DSN","gaTrackingId","GA_TRACKING_ID","Raven","install","initialForce","maxForce","physicsSystem","physics","hasBody","CANNON","Vec3","force","addComponent","removeComponent","beforeStep","currentScale","angle","applyForce","generateAndAddHeightfield","shape","setFromAxisAngle","mult","cannonOffset","Heightfield","elementSize","addShape","skyColor","groundColor","HemisphereLight","onQualityChanged","updateComponentState","PointLight","innerConeAngle","outerConeAngle","SpotLight","penumbra","autoLockOnLoad","autoLockOnRelease","modifyGravityOnRelease","gravitySpeedLimit","onGrab","onRelease","ammoBody","isHeld","wasHeld","_makeStaticWhenAtRest","linearThreshold","linearSleepingThreshold","angularThreshold","angularSleepingThreshold","isAtRest","getLinearVelocity","length2","getAngularVelocity","hasBeenHereBefore","_onBodyLoaded","setLocked","locked","getVelocity","gravity","angularDamping","linearDamping","stuckTo","_unstickObject","sizeVec","boundingBoxWorldPositionVec","colliderWorldPositionVec","collidingLastFrame","setFromCenterAndSize","isColliding","containsPoint","onPauseStateChange","videoComponent","onVideoLoaded","togglePlaying","origDispatch","firstObject","ReactAudioContext","WithHoverSound","react__WEBPACK_IMPORTED_MODULE_0__","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","React","createContext","Consumer","cloneElement","onMouseEnter","playSound","propTypes","Pathfinding","pathfinder","Geometry","fromBufferGeometry","setZoneData","createZone","eventSource","events","eventListeners","_handleEvent","isPinned","pinnable","pinned","isSpawner","canMove","networkedTemplate","isPen","indexForNonAuthorizedComponent","nonAuthorizedComponent","fullComponent","schemaComponent","authorizeOrSanitizeMessage","nonAuthorizedSchemas","sanitizeMessageData","schemaDict","schemas","nonAuthorizedComponents","initializeNonAuthorizedSchemas","nonAuthorizedIndices","authorizeEntityManipulation","sender","senderPermissions","isCreator","pin_objects","spawn_and_move_media","spawn_camera","spawn_pen","authorizeOrSanitizeMessageData","entities","getEntity","emptyObject","dataType","from_session_id","isFirstSync"],"mappings":"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","file":"assets/js/scene-a748fe7c802370d426fe.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t9: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// The chunk loading function for additional chunks\n \t// Since all referenced chunks are already included\n \t// in this file, this function is empty here.\n \t__webpack_require__.e = function requireEnsure() {\n \t\treturn Promise.resolve();\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([2217,1,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export default function nextTick() {\n  return new Promise(resolve => {\n    setTimeout(resolve, 0);\n  });\n}\n","const boundingBox = new THREE.Box3();\nconst frustumBox = new THREE.Box3();\nconst inverseLightMatrixWorld = new THREE.Matrix4();\nconst tempBox = new THREE.Box3();\nconst FRUSTUM_PADDING = 1;\nconst NEAR_CLIPPING_PLANE = -500;\nconst FAR_CLIPPING_PLANE = 500;\nconst verts = [\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3()\n];\n\nexport default function resizeShadowCameraFrustum(light, scene) {\n  // Reset bounding box\n  frustumBox.makeEmpty();\n  boundingBox.makeEmpty();\n\n  // Grow the extents of boundingBox for every geometry in the scene that has castShadow set to true.\n  scene.traverse(node => {\n    const geometry = node.geometry;\n\n    if (geometry && node.castShadow) {\n      if (!geometry.boundingBox) {\n        geometry.computeBoundingBox();\n      }\n\n      tempBox.copy(geometry.boundingBox);\n\n      // Apply matrix transforming bounding box from model space to world space\n      tempBox.applyMatrix4(node.matrixWorld);\n\n      boundingBox.union(tempBox);\n    }\n  });\n\n  // Transform the resulting bounding box from world space to light space.\n  // Construct a new bounding box in light space that contains the corners of the bounding box in world space.\n  const min = boundingBox.min;\n  const max = boundingBox.max;\n\n  verts[0].set(min.x, min.y, min.z);\n  verts[1].set(min.x, min.y, max.z);\n  verts[2].set(min.x, max.y, min.z);\n  verts[3].set(min.x, max.y, max.z);\n  verts[4].set(max.x, min.y, min.z);\n  verts[5].set(max.x, min.y, max.z);\n  verts[6].set(max.x, max.y, min.z);\n  verts[7].set(max.x, max.y, max.z);\n\n  inverseLightMatrixWorld.getInverse(light.shadow.camera.matrixWorld);\n\n  for (let i = 0; i < verts.length; i++) {\n    verts[i].applyMatrix4(inverseLightMatrixWorld);\n    frustumBox.expandByPoint(verts[i]);\n  }\n\n  // Update the camera frustum to fit the resulting bounding box.\n  // Everything in the frustum that has castShadow set to true will cast a shadow.\n  // Everything in the frustum that has receiveShadow set to true will receive a shadow.\n  // FRUSTUM_PADDING is added to avoid clipping the edges of shadows.\n  // TODO: Determine why shadows flicker when light is moved fast. The light's matrixWorld is probably being updated a frame behind.\n  const camera = light.shadow.camera;\n  camera.left = frustumBox.min.x - FRUSTUM_PADDING;\n  camera.right = frustumBox.max.x + FRUSTUM_PADDING;\n  camera.bottom = frustumBox.min.y - FRUSTUM_PADDING;\n  camera.top = frustumBox.max.y + FRUSTUM_PADDING;\n  camera.near = frustumBox.min.z + NEAR_CLIPPING_PLANE;\n  camera.far = frustumBox.max.z + FAR_CLIPPING_PLANE;\n  camera.updateProjectionMatrix();\n}\n","import resizeShadowCameraFrustum from \"../utils/resizeShadowCameraFrustum\";\n\nAFRAME.registerComponent(\"directional-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.DirectionalLight();\n    this.light.position.set(0, 0, 0);\n    this.light.target.position.set(0, 0, 1);\n    this.light.add(this.light.target);\n    this.el.setObject3D(\"directional-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n    this.rendererSystem = this.el.sceneEl.systems.renderer;\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      const color = new THREE.Color(this.data.color);\n      this.rendererSystem.applyColorCorrection(color);\n      light.color.copy(color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n\n    this.light.shadow.camera.matrixNeedsUpdate = true;\n  },\n\n  tick() {\n    if (window.APP && window.APP.quality === \"low\") {\n      return;\n    }\n\n    resizeShadowCameraFrustum(this.light, this.el.sceneEl.object3D);\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"directional-light\");\n  }\n});\n","export const Layers = {\n  // Layers 0 - 2 reserverd by ThreeJS and AFrame.\n  reflection: 3\n};\n\n/**\n * Sets layer flags on the underlying Object3D\n * @namespace environment\n * @component layers\n */\nAFRAME.registerComponent(\"layers\", {\n  schema: {\n    reflection: { type: \"boolean\", default: false },\n    inWorldHud: { type: \"boolean\", default: false },\n    exclusive: { type: \"boolean\", default: false } // if true, only these layers will be set\n  },\n  init() {\n    this.update = this.update.bind(this);\n    this.el.addEventListener(\"model-loaded\", this.update);\n  },\n  update(oldData) {\n    const obj = this.el.object3D;\n\n    if (this.data.exclusive) {\n      obj.traverse(o => (o.layers.mask = 0));\n    }\n\n    for (const [name, layer] of Object.entries(Layers)) {\n      const oldValue = oldData[name];\n      const newValue = this.data[name];\n\n      if (oldValue !== newValue) {\n        if (newValue) {\n          obj.traverse(o => o.layers.enable(layer));\n        } else {\n          obj.traverse(o => o.layers.disable(layer));\n        }\n      }\n    }\n  },\n  remove() {\n    this.el.removeEventListener(\"model-loaded\", this.update);\n  }\n});\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\n\n/**\n * Loops the given clip using this entity's animation mixer\n * @component loop-animation\n */\nAFRAME.registerComponent(\"loop-animation\", {\n  schema: {\n    paused: { type: \"boolean\", default: false },\n    clip: { type: \"string\" }\n  },\n\n  init() {\n    this.mixerEl = findAncestorWithComponent(this.el, \"animation-mixer\");\n\n    if (!this.mixerEl) {\n      console.warn(\"loop-animation component could not find an animation-mixer in its ancestors.\");\n      return;\n    }\n\n    this.updateClip();\n  },\n\n  update(oldData) {\n    if ((oldData.clip !== this.data.clip || oldData.paused !== this.data.paused) && this.mixerEl) {\n      if (oldData.clip !== this.data.clip) {\n        this.updateClip();\n      }\n\n      if (this.currentAction) {\n        this.currentAction.paused = this.data.paused;\n      }\n    }\n  },\n\n  updateClip() {\n    const { mixer, animations } = this.mixerEl.components[\"animation-mixer\"];\n    const clipName = this.data.clip;\n\n    if (animations.length === 0) {\n      return;\n    }\n\n    let clip;\n\n    if (!clipName) {\n      clip = animations[0];\n    } else {\n      clip = animations.find(({ name }) => name === clipName);\n    }\n\n    if (!clip) {\n      return;\n    }\n\n    const action = mixer.clipAction(clip, this.el.object3D);\n    action.enabled = true;\n    action.setLoop(THREE.LoopRepeat, Infinity).play();\n    this.currentAction = action;\n  },\n\n  destroy() {\n    if (this.currentAction) {\n      this.currentAction.enabled = false;\n      this.currentAction.stop();\n    }\n  }\n});\n","import { getBox, getScaleCoefficient } from \"../utils/auto-box-collider\";\nimport { resolveUrl, injectCustomShaderChunks } from \"../utils/media-utils\";\nimport {\n  guessContentType,\n  proxiedUrlFor,\n  isHubsRoomUrl,\n  isHubsSceneUrl,\n  isHubsAvatarUrl\n} from \"../utils/media-url-utils\";\nimport { addAnimationComponents } from \"../utils/animation\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\nimport \"three/examples/js/loaders/GLTFLoader\";\nimport loadingObjectSrc from \"../assets/LoadingObject_Atom.glb\";\nimport { SOUND_MEDIA_LOADING, SOUND_MEDIA_LOADED } from \"../systems/sound-effects-system\";\n\nimport anime from \"animejs\";\n\nconst SHAPE = require(\"aframe-physics-system/src/constants\").SHAPE;\n\nconst gltfLoader = new THREE.GLTFLoader();\nlet loadingObjectEnvMap;\nlet loadingObject;\ngltfLoader.load(loadingObjectSrc, gltf => {\n  loadingObject = gltf;\n});\n\nconst fetchContentType = url => {\n  return fetch(url, { method: \"HEAD\" }).then(r => r.headers.get(\"content-type\"));\n};\n\nconst boundingBox = new THREE.Box3();\n\nconst batchMeshes = qsTruthy(\"batchMeshes\");\nconst disableBatching = qsTruthy(\"disableBatching\");\n\nAFRAME.registerComponent(\"media-loader\", {\n  schema: {\n    fileId: { type: \"string\" },\n    fileIsOwned: { type: \"boolean\" },\n    src: { type: \"string\" },\n    resize: { default: false },\n    resolve: { default: false },\n    contentType: { default: null },\n    contentSubtype: { default: null },\n    animate: { default: true },\n    mediaOptions: {\n      default: {},\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n\n  init() {\n    this.onError = this.onError.bind(this);\n    this.showLoader = this.showLoader.bind(this);\n    this.clearLoadingTimeout = this.clearLoadingTimeout.bind(this);\n    this.onMediaLoaded = this.onMediaLoaded.bind(this);\n    this.animating = false;\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.networkedEl = networkedEl;\n    });\n  },\n\n  updateScale: (function() {\n    const center = new THREE.Vector3();\n    return function(resize) {\n      const mesh = this.el.getObject3D(\"mesh\");\n      const box = getBox(this.el, mesh);\n      const scaleCoefficient = resize ? getScaleCoefficient(0.5, box) : 1;\n      mesh.scale.multiplyScalar(scaleCoefficient);\n      const { min, max } = box;\n      center.addVectors(min, max).multiplyScalar(0.5 * scaleCoefficient);\n      mesh.position.sub(center);\n      mesh.matrixNeedsUpdate = true;\n    };\n  })(),\n\n  removeShape(id) {\n    if (this.el.getAttribute(\"ammo-shape__\" + id)) {\n      this.el.removeAttribute(\"ammo-shape__\" + id);\n    }\n  },\n\n  tick(t, dt) {\n    if (this.loaderMixer) {\n      this.loaderMixer.update(dt / 1000);\n    }\n  },\n\n  remove() {\n    if (this.loadingSoundNode) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.stopSoundNode(this.loadingSoundNode);\n      this.loadingSoundNode = null;\n    }\n  },\n\n  onError() {\n    this.el.removeAttribute(\"gltf-model-plus\");\n    this.el.removeAttribute(\"media-pager\");\n    this.el.removeAttribute(\"media-video\");\n    this.el.removeAttribute(\"media-pdf\");\n    this.el.setAttribute(\"media-image\", { src: \"error\" });\n    this.clearLoadingTimeout();\n  },\n\n  showLoader() {\n    if (this.el.object3DMap.mesh) {\n      this.clearLoadingTimeout();\n      return;\n    }\n    const useFancyLoader = !!loadingObject;\n\n    const mesh = useFancyLoader\n      ? loadingObject.scene.clone()\n      : new THREE.Mesh(new THREE.BoxGeometry(), new THREE.MeshBasicMaterial());\n    this.el.setObject3D(\"mesh\", mesh);\n\n    this.updateScale(true);\n\n    if (useFancyLoader) {\n      const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n      const currentEnivronmentMap = environmentMapComponent.environmentMap;\n      if (loadingObjectEnvMap !== currentEnivronmentMap) {\n        environmentMapComponent.applyEnvironmentMap(mesh);\n        loadingObjectEnvMap = currentEnivronmentMap;\n      }\n\n      this.loaderMixer = new THREE.AnimationMixer(mesh);\n\n      this.loadingClip = this.loaderMixer.clipAction(loadingObject.animations[0]);\n      this.loadingScaleClip = this.loaderMixer.clipAction(\n        new THREE.AnimationClip(null, 1000, [\n          new THREE.VectorKeyframeTrack(\".scale\", [0, 0.2], [0, 0, 0, mesh.scale.x, mesh.scale.y, mesh.scale.z])\n        ])\n      );\n      setTimeout(() => {\n        if (!this.loaderMixer) return; // Animation/loader was stopped early\n        this.el.setAttribute(\"ammo-shape__loader\", { type: SHAPE.BOX });\n      }, 200);\n\n      this.loadingClip.play();\n      this.loadingScaleClip.play();\n    }\n\n    if (this.el.sceneEl.is(\"entered\") && (!this.networkedEl || NAF.utils.isMine(this.networkedEl))) {\n      this.loadingSoundNode = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundLooped(\n        SOUND_MEDIA_LOADING\n      );\n    }\n\n    delete this.showLoaderTimeout;\n  },\n\n  clearLoadingTimeout() {\n    clearTimeout(this.showLoaderTimeout);\n    if (this.loadingSoundNode) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.stopSoundNode(this.loadingSoundNode);\n      this.loadingSoundNode = null;\n    }\n    if (this.loaderMixer) {\n      this.loadingClip.stop();\n      this.loadingScaleClip.stop();\n      delete this.loaderMixer;\n      delete this.loadingScaleClip;\n      delete this.loadingClip;\n    }\n    delete this.showLoaderTimeout;\n    this.removeShape(\"loader\");\n  },\n\n  updateHoverableVisuals() {\n    const hoverableVisuals = this.el.components[\"hoverable-visuals\"];\n\n    if (hoverableVisuals) {\n      if (!this.injectedCustomShaderChunks) {\n        this.injectedCustomShaderChunks = true;\n        hoverableVisuals.uniforms = injectCustomShaderChunks(this.el.object3D);\n      }\n\n      boundingBox.setFromObject(this.el.object3DMap.mesh);\n      boundingBox.getBoundingSphere(hoverableVisuals.boundingSphere);\n    }\n  },\n\n  onMediaLoaded(physicsShape = null, shouldUpdateScale) {\n    const el = this.el;\n    this.clearLoadingTimeout();\n\n    if (this.el.sceneEl.is(\"entered\")) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_MEDIA_LOADED);\n    }\n\n    const finish = () => {\n      this.animating = false;\n\n      if (physicsShape) {\n        el.setAttribute(\"ammo-shape\", {\n          type: physicsShape,\n          minHalfExtent: 0.04\n        });\n      }\n\n      this.updateHoverableVisuals();\n\n      const pager = el.components[\"media-pager\"];\n\n      if (pager) {\n        pager.repositionToolbar();\n      }\n    };\n\n    if (this.data.animate) {\n      if (!this.animating) {\n        this.animating = true;\n        if (shouldUpdateScale) this.updateScale(this.data.resize);\n        const mesh = this.el.getObject3D(\"mesh\");\n        const scale = { x: 0.001, y: 0.001, z: 0.001 };\n        scale.x = mesh.scale.x < scale.x ? mesh.scale.x * 0.001 : scale.x;\n        scale.y = mesh.scale.y < scale.y ? mesh.scale.x * 0.001 : scale.y;\n        scale.z = mesh.scale.z < scale.z ? mesh.scale.x * 0.001 : scale.z;\n        this.addMeshScaleAnimation(mesh, scale, finish);\n      }\n    } else {\n      if (shouldUpdateScale) this.updateScale(this.data.resize);\n      finish();\n    }\n  },\n\n  addMeshScaleAnimation(mesh, initialScale, onComplete) {\n    const step = (function() {\n      const lastValue = {};\n      return function(anim) {\n        const value = anim.animatables[0].target;\n\n        value.x = Math.max(Number.MIN_VALUE, value.x);\n        value.y = Math.max(Number.MIN_VALUE, value.y);\n        value.z = Math.max(Number.MIN_VALUE, value.z);\n\n        // For animation timeline.\n        if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n          return;\n        }\n\n        lastValue.x = value.x;\n        lastValue.y = value.y;\n        lastValue.z = value.z;\n\n        mesh.scale.set(value.x, value.y, value.z);\n        mesh.matrixNeedsUpdate = true;\n      };\n    })();\n\n    const config = {\n      duration: 400,\n      easing: \"easeOutElastic\",\n      elasticity: 400,\n      loop: 0,\n      round: false,\n      x: mesh.scale.x,\n      y: mesh.scale.y,\n      z: mesh.scale.z,\n      targets: [initialScale],\n      update: anim => step(anim),\n      complete: anim => {\n        step(anim);\n        onComplete();\n      }\n    };\n\n    mesh.scale.copy(initialScale);\n    mesh.matrixNeedsUpdate = true;\n\n    return anime(config);\n  },\n\n  async update(oldData) {\n    try {\n      const { src, contentSubtype } = this.data;\n\n      if (src !== oldData.src && !this.showLoaderTimeout) {\n        this.showLoaderTimeout = setTimeout(this.showLoader, 100);\n      }\n\n      if (!src) return;\n\n      let canonicalUrl = src;\n      let accessibleUrl = src;\n      let contentType = this.data.contentType;\n      let thumbnail;\n\n      if (this.data.resolve) {\n        const result = await resolveUrl(src);\n        canonicalUrl = result.origin;\n        // handle protocol relative urls\n        if (canonicalUrl.startsWith(\"//\")) {\n          canonicalUrl = location.protocol + canonicalUrl;\n        }\n        contentType = (result.meta && result.meta.expected_content_type) || contentType;\n        thumbnail = result.meta && result.meta.thumbnail && proxiedUrlFor(result.meta.thumbnail);\n      }\n\n      // todo: we don't need to proxy for many things if the canonical URL has permissive CORS headers\n      accessibleUrl = proxiedUrlFor(canonicalUrl);\n\n      // if the component creator didn't know the content type, we didn't get it from reticulum, and\n      // we don't think we can infer it from the extension, we need to make a HEAD request to find it out\n      contentType = contentType || guessContentType(canonicalUrl) || (await fetchContentType(accessibleUrl));\n\n      // We don't want to emit media_resolved for index updates.\n      if (src !== oldData.src) {\n        this.el.emit(\"media_resolved\", { src, raw: accessibleUrl, contentType });\n      }\n\n      if (\n        contentType.startsWith(\"video/\") ||\n        contentType.startsWith(\"audio/\") ||\n        AFRAME.utils.material.isHLS(canonicalUrl, contentType)\n      ) {\n        const parsedUrl = new URL(src);\n        const qsTime = parseInt(parsedUrl.searchParams.get(\"t\"));\n        const hashTime = parseInt(new URLSearchParams(parsedUrl.hash.substring(1)).get(\"t\"));\n        const startTime = hashTime || qsTime || 0;\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-image\");\n        this.el.removeAttribute(\"media-pdf\");\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.addEventListener(\n          \"video-loaded\",\n          e => {\n            this.onMediaLoaded(e.detail.projection === \"flat\" ? SHAPE.BOX : null);\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\n          \"media-video\",\n          Object.assign({}, this.data.mediaOptions, { src: accessibleUrl, time: startTime, contentType })\n        );\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else if (contentType.startsWith(\"image/\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"media-pdf\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"image-loaded\",\n          e => {\n            this.onMediaLoaded(e.detail.projection === \"flat\" ? SHAPE.BOX : null);\n\n            if (contentSubtype === \"photo-camera\") {\n              this.el.setAttribute(\"hover-menu__photo\", {\n                template: \"#photo-hover-menu\",\n                dirs: [\"forward\", \"back\"]\n              });\n            }\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.setAttribute(\n          \"media-image\",\n          // Object.assign({}, this.data.mediaOptions, { src: accessibleUrl, contentType, batch: !disableBatching })\n          Object.assign({}, this.data.mediaOptions, { src: accessibleUrl, contentType, batch: false })\n        );\n\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else if (contentType.startsWith(\"application/pdf\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"media-image\");\n        this.el.setAttribute(\n          \"media-pdf\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: accessibleUrl,\n            contentType,\n            batch: false // Batching disabled until atlas is updated properly\n          })\n        );\n        this.el.setAttribute(\"media-pager\", {});\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.addEventListener(\n          \"pdf-loaded\",\n          () => {\n            this.clearLoadingTimeout();\n            this.onMediaLoaded(SHAPE.BOX);\n          },\n          { once: true }\n        );\n\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else if (\n        contentType.includes(\"application/octet-stream\") ||\n        contentType.includes(\"x-zip-compressed\") ||\n        contentType.startsWith(\"model/gltf\")\n      ) {\n        this.el.removeAttribute(\"media-image\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"media-pdf\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"model-loaded\",\n          () => {\n            this.onMediaLoaded(SHAPE.HULL, true);\n            addAnimationComponents(this.el);\n          },\n          { once: true }\n        );\n        this.el.addEventListener(\"model-error\", this.onError, { once: true });\n        this.el.setAttribute(\n          \"gltf-model-plus\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: accessibleUrl,\n            contentType: contentType,\n            inflate: true,\n            batch: !disableBatching && batchMeshes,\n            modelToWorldScale: this.data.resize ? 0.0001 : 1.0\n          })\n        );\n      } else if (contentType.startsWith(\"text/html\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"media-pdf\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"image-loaded\",\n          () => {\n            const mayChangeScene = this.el.sceneEl.systems.permissions.can(\"update_hub\");\n\n            if (isHubsAvatarUrl(src)) {\n              this.el.setAttribute(\"hover-menu__hubs-item\", {\n                template: \"#avatar-link-hover-menu\",\n                dirs: [\"forward\", \"back\"]\n              });\n            } else if (isHubsRoomUrl(src) || (isHubsSceneUrl(src) && mayChangeScene)) {\n              this.el.setAttribute(\"hover-menu__hubs-item\", {\n                template: \"#hubs-destination-hover-menu\",\n                dirs: [\"forward\", \"back\"]\n              });\n            } else {\n              this.el.setAttribute(\"hover-menu__link\", { template: \"#link-hover-menu\", dirs: [\"forward\", \"back\"] });\n            }\n            this.onMediaLoaded(SHAPE.BOX);\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.setAttribute(\n          \"media-image\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: thumbnail,\n            contentType: guessContentType(thumbnail) || \"image/png\",\n            batch: !disableBatching\n          })\n        );\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else {\n        throw new Error(`Unsupported content type: ${contentType}`);\n      }\n    } catch (e) {\n      console.error(\"Error adding media\", e);\n      this.onError();\n    }\n  }\n});\n\nAFRAME.registerComponent(\"media-pager\", {\n  schema: {\n    index: { default: 0 },\n    maxIndex: { default: 0 }\n  },\n\n  init() {\n    this.toolbar = null;\n    this.onNext = this.onNext.bind(this);\n    this.onPrev = this.onPrev.bind(this);\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.networkedEl = networkedEl;\n    });\n\n    this.el.addEventListener(\"pdf-loaded\", async () => {\n      await this._ensureUI();\n      this.update();\n    });\n  },\n\n  async _ensureUI() {\n    if (this.hasSetupUI) return;\n    if (!this.data.maxIndex) return;\n\n    this.hasSetupUI = true;\n\n    // unfortunately, since we loaded the page image in an img tag inside media-image, we have to make a second\n    // request for the same page to read out the max-content-index header\n    const template = document.getElementById(\"paging-toolbar\");\n    this.el.querySelector(\".interactable-ui\").appendChild(document.importNode(template.content, true));\n    this.toolbar = this.el.querySelector(\".paging-toolbar\");\n    // we have to wait a tick for the attach callbacks to get fired for the elements in a template\n    setTimeout(() => {\n      this.nextButton = this.el.querySelector(\".next-button [text-button]\");\n      this.prevButton = this.el.querySelector(\".prev-button [text-button]\");\n      this.pageLabel = this.el.querySelector(\".page-label\");\n\n      this.nextButton.object3D.addEventListener(\"interact\", this.onNext);\n      this.prevButton.object3D.addEventListener(\"interact\", this.onPrev);\n\n      this.update();\n      this.el.emit(\"pager-loaded\");\n    }, 0);\n  },\n\n  async update() {\n    await this._ensureUI();\n\n    if (this.pageLabel) {\n      this.pageLabel.setAttribute(\"text\", \"value\", `${this.data.index + 1}/${this.data.maxIndex + 1}`);\n      this.repositionToolbar();\n    }\n  },\n\n  remove() {\n    if (this.toolbar) {\n      this.toolbar.parentNode.removeChild(this.toolbar);\n    }\n  },\n\n  onNext() {\n    if (!NAF.utils.isMine(this.networkedEl) && !NAF.utils.takeOwnership(this.networkedEl)) return;\n    const newIndex = Math.min(this.data.index + 1, this.data.maxIndex);\n    this.el.setAttribute(\"media-pdf\", \"index\", newIndex);\n    this.el.setAttribute(\"media-pager\", \"index\", newIndex);\n    this.el.emit(\"pager-page-changed\");\n  },\n\n  onPrev() {\n    if (!NAF.utils.isMine(this.networkedEl) && !NAF.utils.takeOwnership(this.networkedEl)) return;\n    const newIndex = Math.max(this.data.index - 1, 0);\n    this.el.setAttribute(\"media-pdf\", \"index\", newIndex);\n    this.el.setAttribute(\"media-pager\", \"index\", newIndex);\n    this.el.emit(\"pager-page-changed\");\n  },\n\n  repositionToolbar() {\n    const ammoShape = this.el.getAttribute(\"ammo-shape\");\n    if (!ammoShape) return;\n    if (!this.toolbar) return;\n\n    this.toolbar.object3D.position.y = -0.7;\n    this.toolbar.object3D.matrixNeedsUpdate = true;\n  }\n});\n","import { SOUND_QUACK, SOUND_SPECIAL_QUACK } from \"../systems/sound-effects-system\";\n\nAFRAME.registerComponent(\"quack\", {\n  schema: {\n    quackPercentage: { default: 1 },\n    specialQuackPercentage: { default: 0.01 }\n  },\n\n  init: function() {\n    this._handleGrabStart = this._handleGrabStart.bind(this);\n  },\n\n  play: function() {\n    this.el.object3D.addEventListener(\"interact\", this._handleGrabStart);\n  },\n\n  pause: function() {\n    this.el.object3D.removeEventListener(\"interact\", this._handleGrabStart);\n  },\n\n  _handleGrabStart: function() {\n    const rand = Math.random();\n    if (rand < this.data.specialQuackPercentage) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SPECIAL_QUACK);\n    } else if (rand < this.data.quackPercentage) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_QUACK);\n    }\n  }\n});\n","import { setMatrixWorld } from \"../utils/three-utils\";\nimport { getCurrentStreamer } from \"../utils/component-utils\";\n\nfunction getStreamerCamera() {\n  const streamer = getCurrentStreamer();\n  if (streamer) {\n    return streamer.el.querySelector(\".camera\").object3D;\n  }\n  return null;\n}\n\nfunction lerp(start, end, t) {\n  return (1 - t) * start + t * end;\n}\n\nconst newRot = new THREE.Quaternion();\n\n/**\n * Nicely pans the camera for previewing a scene. There's some weirdness with this right now\n * since it ends up panning in a direction dependent upon the start camera orientation,\n * but it's good enough for now.\n */\nAFRAME.registerComponent(\"scene-preview-camera\", {\n  schema: {\n    duration: { default: 90, type: \"number\" },\n    positionOnly: { default: false, type: \"boolean\" }\n  },\n\n  init: function() {\n    this.startPoint = this.el.object3D.position.clone();\n    this.startRotation = this.el.object3D.quaternion.clone();\n\n    this.targetPoint = this.el.object3D.position.clone();\n    this.targetPoint.y = Math.max(this.targetPoint.y - 1.5, 1);\n    this.targetPoint.add(new THREE.Vector3(2, 0, -2));\n\n    const targetRotDelta = new THREE.Euler(-0.15, 0.0, 0.15);\n    this.targetRotation = new THREE.Quaternion();\n    this.targetRotation.setFromEuler(targetRotDelta);\n    this.targetRotation.premultiply(this.startRotation);\n\n    this.startTime = performance.now();\n    this.backwards = false;\n    this.ranOnePass = false;\n  },\n\n  tick2: function() {\n    const streamerCamera = getStreamerCamera();\n    if (streamerCamera) {\n      setMatrixWorld(this.el.object3D, streamerCamera.matrixWorld);\n      // Move camera forward just a bit so that we don't see the avatar's eye cylinders.\n      this.el.object3D.translateZ(-0.1);\n      this.el.object3D.matrixNeedsUpdate = true;\n    } else {\n      let t = (performance.now() - this.startTime) / (1000.0 * this.data.duration);\n      t = Math.min(1.0, Math.max(0.0, t));\n\n      if (!this.ranOnePass) {\n        t = t * (2 - t);\n      } else {\n        t = t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n      }\n\n      const from = this.backwards ? this.targetPoint : this.startPoint;\n      const to = this.backwards ? this.startPoint : this.targetPoint;\n      const fromRot = this.backwards ? this.targetRotation : this.startRotation;\n      const toRot = this.backwards ? this.startRotation : this.targetRotation;\n\n      THREE.Quaternion.slerp(fromRot, toRot, newRot, t);\n\n      this.el.object3D.position.set(lerp(from.x, to.x, t), lerp(from.y, to.y, t), lerp(from.z, to.z, t));\n\n      if (!this.data.positionOnly) {\n        this.el.object3D.rotation.setFromQuaternion(newRot);\n      }\n\n      this.el.object3D.matrixNeedsUpdate = true;\n\n      if (t >= 0.9999) {\n        this.ranOnePass = true;\n        this.backwards = !this.backwards;\n        this.startTime = performance.now();\n      }\n    }\n  }\n});\n","import \"three/examples/js/pmrem/PMREMGenerator\";\nimport \"three/examples/js/pmrem/PMREMCubeUVPacker\";\nimport qsTruthy from \"../utils/qs_truthy\";\nconst isBotMode = qsTruthy(\"bot\");\n\n/**\n * @author zz85 / https://github.com/zz85\n *\n * Based on \"A Practical Analytic Model for Daylight\"\n * aka The Preetham Model, the de facto standard analytic skydome model\n * http://www.cs.utah.edu/~shirley/papers/sunsky/sunsky.pdf\n *\n * First implemented by Simon Wallner\n * http://www.simonwallner.at/projects/atmospheric-scattering\n *\n * Improved by Martin Upitis\n * http://blenderartists.org/forum/showthread.php?245954-preethams-sky-impementation-HDR\n *\n * Three.js integration by zz85 http://twitter.com/blurspline\n */\n\nTHREE.Sky = function() {\n  const shader = THREE.Sky.SkyShader;\n\n  const material = new THREE.ShaderMaterial({\n    fragmentShader: shader.fragmentShader,\n    vertexShader: shader.vertexShader,\n    uniforms: THREE.UniformsUtils.clone(shader.uniforms),\n    side: THREE.BackSide\n  });\n\n  THREE.Mesh.call(this, new THREE.BoxBufferGeometry(1, 1, 1), material);\n};\n\nTHREE.Sky.prototype = Object.create(THREE.Mesh.prototype);\nTHREE.Sky.prototype.constructor = THREE.Sky;\n\nTHREE.Sky.SkyShader = {\n  uniforms: {\n    luminance: { value: 1 },\n    turbidity: { value: 2 },\n    rayleigh: { value: 1 },\n    mieCoefficient: { value: 0.005 },\n    mieDirectionalG: { value: 0.8 },\n    sunPosition: { value: new THREE.Vector3() }\n  },\n\n  vertexShader: [\n    \"uniform vec3 sunPosition;\",\n    \"uniform float rayleigh;\",\n    \"uniform float turbidity;\",\n    \"uniform float mieCoefficient;\",\n\n    \"varying vec3 vWorldPosition;\",\n    \"varying vec3 vSunDirection;\",\n    \"varying float vSunfade;\",\n    \"varying vec3 vBetaR;\",\n    \"varying vec3 vBetaM;\",\n    \"varying float vSunE;\",\n\n    \"const vec3 up = vec3( 0.0, 1.0, 0.0 );\",\n\n    // constants for atmospheric scattering\n    \"const float e = 2.71828182845904523536028747135266249775724709369995957;\",\n    \"const float pi = 3.141592653589793238462643383279502884197169;\",\n\n    // wavelength of used primaries, according to preetham\n    \"const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\",\n    // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n    // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\n    \"const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\",\n\n    // mie stuff\n    // K coefficient for the primaries\n    \"const float v = 4.0;\",\n    \"const vec3 K = vec3( 0.686, 0.678, 0.666 );\",\n    // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\n    \"const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\",\n\n    // earth shadow hack\n    // cutoffAngle = pi / 1.95;\n    \"const float cutoffAngle = 1.6110731556870734;\",\n    \"const float steepness = 1.5;\",\n    \"const float EE = 1000.0;\",\n\n    \"float sunIntensity( float zenithAngleCos ) {\",\n    \"\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\",\n    \"\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\",\n    \"}\",\n\n    \"vec3 totalMie( float T ) {\",\n    \"\tfloat c = ( 0.2 * T ) * 10E-18;\",\n    \"\treturn 0.434 * c * MieConst;\",\n    \"}\",\n\n    \"void main() {\",\n\n    \"\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\",\n    \"\tvWorldPosition = worldPosition.xyz;\",\n\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n    \"\tvSunDirection = normalize( sunPosition );\",\n\n    \"\tvSunE = sunIntensity( dot( vSunDirection, up ) );\",\n\n    \"\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\",\n\n    \"\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\",\n\n    // extinction (absorbtion + out scattering)\n    // rayleigh coefficients\n    \"\tvBetaR = totalRayleigh * rayleighCoefficient;\",\n\n    // mie coefficients\n    \"\tvBetaM = totalMie( turbidity ) * mieCoefficient;\",\n\n    \"}\"\n  ].join(\"\\n\"),\n\n  fragmentShader: [\n    \"varying vec3 vWorldPosition;\",\n    \"varying vec3 vSunDirection;\",\n    \"varying float vSunfade;\",\n    \"varying vec3 vBetaR;\",\n    \"varying vec3 vBetaM;\",\n    \"varying float vSunE;\",\n\n    \"uniform float luminance;\",\n    \"uniform float mieDirectionalG;\",\n\n    \"const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\",\n\n    // constants for atmospheric scattering\n    \"const float pi = 3.141592653589793238462643383279502884197169;\",\n\n    \"const float n = 1.0003;\", // refractive index of air\n    \"const float N = 2.545E25;\", // number of molecules per unit volume for air at\n    // 288.15K and 1013mb (sea level -45 celsius)\n\n    // optical length at zenith for molecules\n    \"const float rayleighZenithLength = 8.4E3;\",\n    \"const float mieZenithLength = 1.25E3;\",\n    \"const vec3 up = vec3( 0.0, 1.0, 0.0 );\",\n    // 66 arc seconds -> degrees, and the cosine of that\n    \"const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\",\n\n    // 3.0 / ( 16.0 * pi )\n    \"const float THREE_OVER_SIXTEENPI = 0.05968310365946075;\",\n    // 1.0 / ( 4.0 * pi )\n    \"const float ONE_OVER_FOURPI = 0.07957747154594767;\",\n\n    \"float rayleighPhase( float cosTheta ) {\",\n    \"\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\",\n    \"}\",\n\n    \"float hgPhase( float cosTheta, float g ) {\",\n    \"\tfloat g2 = pow( g, 2.0 );\",\n    \"\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\",\n    \"\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\",\n    \"}\",\n\n    // Filmic ToneMapping http://filmicgames.com/archives/75\n    \"const float A = 0.15;\",\n    \"const float B = 0.50;\",\n    \"const float C = 0.10;\",\n    \"const float D = 0.20;\",\n    \"const float E = 0.02;\",\n    \"const float F = 0.30;\",\n\n    \"const float whiteScale = 1.0748724675633854;\", // 1.0 / Uncharted2Tonemap(1000.0)\n\n    \"vec3 Uncharted2Tonemap( vec3 x ) {\",\n    \"\treturn ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;\",\n    \"}\",\n\n    \"void main() {\",\n    // optical length\n    // cutoff angle at 90 to avoid singularity in next formula.\n    \"\tfloat zenithAngle = acos( max( 0.0, dot( up, normalize( vWorldPosition - cameraPos ) ) ) );\",\n    \"\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\",\n    \"\tfloat sR = rayleighZenithLength * inverse;\",\n    \"\tfloat sM = mieZenithLength * inverse;\",\n\n    // combined extinction factor\n    \"\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\",\n\n    // in scattering\n    \"\tfloat cosTheta = dot( normalize( vWorldPosition - cameraPos ), vSunDirection );\",\n\n    \"\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\",\n    \"\tvec3 betaRTheta = vBetaR * rPhase;\",\n\n    \"\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );\",\n    \"\tvec3 betaMTheta = vBetaM * mPhase;\",\n\n    \"\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\",\n    \"\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\",\n\n    // nightsky\n    \"\tvec3 direction = normalize( vWorldPosition - cameraPos );\",\n    \"\tfloat theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]\",\n    \"\tfloat phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]\",\n    \"\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\",\n    \"\tvec3 L0 = vec3( 0.1 ) * Fex;\",\n\n    // composition + solar disc\n    \"\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\",\n    \"\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;\",\n\n    \"\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\",\n\n    \"\tvec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );\",\n    \"\tvec3 color = curr * whiteScale;\",\n\n    \"\tvec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\",\n\n    \"\tgl_FragColor = vec4( retColor, 1.0 );\",\n\n    \"}\"\n  ].join(\"\\n\")\n};\n\nAFRAME.registerComponent(\"skybox\", {\n  schema: {\n    turbidity: { type: \"number\", default: 10 },\n    rayleigh: { type: \"number\", default: 2 },\n    luminance: { type: \"number\", default: 1 },\n    mieCoefficient: { type: \"number\", default: 0.005 },\n    mieDirectionalG: { type: \"number\", default: 0.8 },\n    inclination: { type: \"number\", default: 0 },\n    azimuth: { type: \"number\", default: 0.15 },\n    distance: { type: \"number\", default: 8000 }\n  },\n\n  init() {\n    this.sky = new THREE.Sky();\n    this.el.setObject3D(\"mesh\", this.sky);\n    this.skyScene = new THREE.Scene();\n    this.cubeCamera = new THREE.CubeCamera(1, 100000, 512);\n    this.skyScene.add(this.cubeCamera);\n\n    this.updateEnvironmentMap = this.updateEnvironmentMap.bind(this);\n    // HACK: Render environment map on next frame to avoid bug where the render target texture is black.\n    // This is likely due to the custom elements attached callback being synchronous on Chrome but not Firefox.\n    // Added timeout due to additional case where texture is black in Firefox.\n    requestAnimationFrame(() => setTimeout(this.updateEnvironmentMap));\n  },\n\n  update(oldData) {\n    const uniforms = this.sky.material.uniforms;\n\n    if (this.data.turbidity !== oldData.turbidity) {\n      uniforms.turbidity.value = this.data.turbidity;\n    }\n\n    if (this.data.rayleigh !== oldData.rayleigh) {\n      uniforms.rayleigh.value = this.data.rayleigh;\n    }\n\n    if (this.data.luminance !== oldData.luminance) {\n      uniforms.luminance.value = this.data.luminance;\n    }\n\n    if (this.data.mieCoefficient !== oldData.mieCoefficient) {\n      uniforms.mieCoefficient.value = this.data.mieCoefficient;\n    }\n\n    if (this.data.mieDirectionalG !== oldData.mieDirectionalG) {\n      uniforms.mieDirectionalG.value = this.data.mieDirectionalG;\n    }\n\n    if (\n      this.data.inclination !== oldData.inclination ||\n      this.data.azimuth !== oldData.azimuth ||\n      this.data.distance !== oldData.distance\n    ) {\n      const theta = Math.PI * (this.data.inclination - 0.5);\n      const phi = 2 * Math.PI * (this.data.azimuth - 0.5);\n\n      const distance = this.data.distance;\n\n      const x = distance * Math.cos(phi);\n      const y = distance * Math.sin(phi) * Math.sin(theta);\n      const z = distance * Math.sin(phi) * Math.cos(theta);\n\n      uniforms.sunPosition.value.set(x, y, z).normalize();\n\n      // HACK Remove this if condition and always set the scale based on distance when the existing environments\n      // have their sky scales set to 1.\n      if (this.el.object3D.scale.x === 1) {\n        this.sky.scale.set(distance, distance, distance);\n      }\n\n      this.el.object3D.matrixNeedsUpdate = true;\n    }\n\n    this.updateEnvironmentMap();\n  },\n\n  updateEnvironmentMap() {\n    const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n\n    if (environmentMapComponent && !isBotMode) {\n      const renderer = this.el.sceneEl.renderer;\n      this.skyScene.add(this.sky);\n      this.cubeCamera.update(renderer, this.skyScene);\n      this.el.setObject3D(\"mesh\", this.sky);\n      const vrEnabled = renderer.vr.enabled;\n      renderer.vr.enabled = false;\n      const pmremGenerator = new THREE.PMREMGenerator(this.cubeCamera.renderTarget.texture);\n      pmremGenerator.update(renderer);\n      const pmremCubeUVPacker = new THREE.PMREMCubeUVPacker(pmremGenerator.cubeLods);\n      pmremCubeUVPacker.update(renderer);\n      renderer.vr.enabled = vrEnabled;\n      environmentMapComponent.updateEnvironmentMap(pmremCubeUVPacker.CubeUVRenderTarget.texture);\n      pmremGenerator.dispose();\n      pmremCubeUVPacker.dispose();\n    }\n  },\n\n  remove() {\n    this.el.removeObject3D(\"mesh\");\n  }\n});\n","import { getLastWorldPosition } from \"../utils/three-utils\";\n\n/**\n * Used on a player-rig to move the player to a random spawn point on entry.\n * @namespace avatar\n * @component spawn-controller\n */\nAFRAME.registerComponent(\"spawn-controller\", {\n  schema: {\n    target: { type: \"selector\" },\n    camera: { type: \"selector\", default: \"#player-camera\" },\n    playerHeight: { default: 1.6 },\n    loadedEvent: { type: \"string\" }\n  },\n  init() {\n    this.moveToSpawnPoint = this.moveToSpawnPoint.bind(this);\n    this.data.target.addEventListener(this.data.loadedEvent, this.moveToSpawnPoint);\n  },\n  moveToSpawnPoint() {\n    const spawnPoints = document.querySelectorAll(\"[spawn-point]\");\n\n    if (spawnPoints.length === 0) {\n      // Keep default position\n      return;\n    }\n\n    const camera = this.data.camera;\n    const spawnPointIndex = Math.round((spawnPoints.length - 1) * Math.random());\n    const spawnPoint = spawnPoints[spawnPointIndex];\n\n    getLastWorldPosition(spawnPoint.object3D, this.el.object3D.position);\n    this.el.object3D.rotation.copy(spawnPoint.object3D.rotation);\n\n    if (this.el.sceneEl.is(\"vr-mode\")) {\n      // Rotate the player rig such that the vr-camera faces forward.\n      this.el.object3D.rotation.y -= this.data.camera.object3D.rotation.y;\n    } else {\n      // Reset the camera transform in 2D mode.\n      camera.object3D.position.set(0, this.data.playerHeight, 0);\n      camera.object3D.rotation.set(0, 0, 0);\n      camera.object3D.matrixNeedsUpdate = true;\n    }\n\n    // Camera faces -Z direction. Flip rotation on Y axis to face the correct direction.\n    this.el.object3D.rotation.y += Math.PI;\n    this.el.object3D.matrixNeedsUpdate = true;\n\n    // Reset pitch-yaw-rotator after any scene-preview-camera rotation.\n    if (camera.components[\"pitch-yaw-rotator\"]) {\n      camera.components[\"pitch-yaw-rotator\"].set(camera.object3D.rotation.x, camera.object3D.rotation.y);\n    }\n  }\n});\n\n/**\n * Marks an entity as a potential spawn point.\n * @namespace environment\n * @component spawn-point\n */\nAFRAME.registerComponent(\"spawn-point\", {\n  init() {\n    this.el.object3D.visible = false;\n  }\n});\n","/* global require AFRAME THREE setTimeout clearTimeout */\nimport { addMedia } from \"../utils/media-utils\";\nimport { waitForEvent } from \"../utils/async-utils\";\nimport { ObjectContentOrigins } from \"../object-types\";\nimport { paths } from \"../systems/userinput/paths\";\n\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\n/**\n * Spawns networked objects when grabbed or when a specified event is fired.\n * @namespace network\n * @component super-spawner\n */\nAFRAME.registerComponent(\"super-spawner\", {\n  schema: {\n    /**\n     * Source of the media asset the spawner will spawn when grabbed. This can be a gltf, video, or image, or a url that the reticiulm media API can resolve to a gltf, video, or image.\n     */\n    src: { default: \"\" },\n\n    /**\n     * Whether to use the Reticulum media resolution API to interpret the src URL (e.g. find a video URL for Youtube videos.)\n     */\n    resolve: { default: false },\n\n    /**\n     * Whether to resize the media on load.\n     */\n    resize: { default: false },\n\n    /**\n     * The template to use for this object\n     */\n    template: { default: \"\" },\n\n    /**\n     * Spawn the object at a custom position, rather than at the center of the spanwer.\n     */\n    useCustomSpawnPosition: { default: false },\n    spawnPosition: { type: \"vec3\" },\n\n    /**\n     * Spawn the object with a custom orientation, rather than copying that of the spawner.\n     */\n    useCustomSpawnRotation: { default: false },\n    spawnRotation: { type: \"vec4\" },\n\n    /**\n     * Spawn the object with a custom scale, rather than copying that of the spawner.\n     */\n    useCustomSpawnScale: { default: false },\n    spawnScale: { type: \"vec3\" },\n\n    /**\n     * The spawner will become invisible and ungrabbable for this ammount of time after being grabbed. This can prevent rapidly spawning objects.\n     */\n    spawnCooldown: { default: 1 },\n\n    /**\n     * Center the spawned object on the hand that grabbed it after it finishes loading. By default the object will be grabbed relative to where the spawner was grabbed\n     */\n    centerSpawnedObject: { default: false },\n\n    /**\n     * Optional event to listen for to spawn an object on the preferred superHand\n     */\n    spawnEvent: { type: \"string\" },\n\n    /**\n     * If true, will spawn the object at the cursor and animate it into the hand.\n     */\n    animateFromCursor: { type: \"boolean\" }\n  },\n\n  init() {\n    this.cooldownTimeout = null;\n    this.handPosition = new THREE.Vector3();\n\n    this.onSpawnEvent = this.onSpawnEvent.bind(this);\n\n    this.sceneEl = document.querySelector(\"a-scene\");\n\n    this.tempSpawnHandPosition = new THREE.Vector3();\n  },\n\n  play() {\n    if (this.data.spawnEvent) {\n      this.el.sceneEl.addEventListener(this.data.spawnEvent, this.onSpawnEvent);\n    }\n  },\n\n  pause() {\n    if (this.data.spawnEvent) {\n      this.el.sceneEl.removeEventListener(this.data.spawnEvent, this.onSpawnEvent);\n    }\n    if (this.cooldownTimeout) {\n      clearTimeout(this.cooldownTimeout);\n      this.cooldownTimeout = null;\n      this.el.setAttribute(\"visible\", true);\n      this.el.classList.add(\"interactable\");\n    }\n  },\n\n  async onSpawnEvent() {\n    if (this.cooldownTimeout || !this.el.sceneEl.is(\"entered\")) {\n      return;\n    }\n\n    const entity = addMedia(\n      this.data.src,\n      this.data.template,\n      ObjectContentOrigins.SPAWNER,\n      null,\n      this.data.resolve,\n      false\n    ).entity;\n\n    const cursor = document.querySelector(\"#cursor\");\n    cursor.object3D.getWorldPosition(entity.object3D.position);\n    cursor.object3D.getWorldQuaternion(entity.object3D.quaternion);\n    entity.object3D.matrixNeedsUpdate = true;\n\n    if (this.data.useCustomSpawnScale) {\n      entity.object3D.scale.copy(this.data.spawnScale);\n    }\n\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const willAnimateFromCursor = this.data.animateFromCursor && userinput.get(paths.actions.rightHand.matrix);\n    if (!willAnimateFromCursor) {\n      interaction.state.rightRemote.held = entity;\n      interaction.state.rightRemote.spawning = true;\n    }\n    this.activateCooldown();\n    await waitForEvent(\"body-loaded\", entity);\n\n    cursor.object3D.getWorldPosition(entity.object3D.position);\n    cursor.object3D.getWorldQuaternion(entity.object3D.quaternion);\n    entity.object3D.matrixNeedsUpdate = true;\n\n    if (willAnimateFromCursor) {\n      document.querySelector(\"#player-right-controller\").object3D.getWorldPosition(this.handPosition);\n      entity.setAttribute(\"animation__spawn-at-cursor\", {\n        property: \"position\",\n        delay: 500,\n        dur: 1500,\n        from: { x: entity.object3D.position.x, y: entity.object3D.position.y, z: entity.object3D.position.z },\n        to: { x: this.handPosition.x, y: this.handPosition.y, z: this.handPosition.z },\n        easing: \"easeInOutBack\"\n      });\n    } else {\n      interaction.state.rightRemote.spawning = false;\n    }\n    entity.components[\"ammo-body\"].syncToPhysics();\n  },\n\n  activateCooldown() {\n    if (this.data.spawnCooldown > 0) {\n      const [sx, sy, sz] = [this.el.object3D.scale.x, this.el.object3D.scale.y, this.el.object3D.scale.z];\n\n      this.el.setAttribute(\"visible\", false);\n      this.el.object3D.scale.set(0.001, 0.001, 0.001);\n      this.el.object3D.matrixNeedsUpdate = true;\n      this.el.classList.remove(\"interactable\");\n      this.el.setAttribute(\"ammo-body\", { collisionFilterMask: COLLISION_LAYERS.NONE });\n      this.cooldownTimeout = setTimeout(() => {\n        this.el.setAttribute(\"visible\", true);\n        this.el.classList.add(\"interactable\");\n        this.el.setAttribute(\"ammo-body\", { collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER });\n        this.el.removeAttribute(\"animation__spawner-cooldown\");\n        this.el.setAttribute(\"animation__spawner-cooldown\", {\n          property: \"scale\",\n          delay: 50,\n          dur: 350,\n          from: { x: 0.001, y: 0.001, z: 0.001 },\n          to: { x: sx, y: sy, z: sz },\n          easing: \"easeOutElastic\"\n        });\n\n        this.cooldownTimeout = null;\n      }, this.data.spawnCooldown * 1000);\n    }\n  }\n});\n","import { Layers } from \"./layers\";\nimport \"../vendor/Water\";\nimport waterNormalMap from \"../assets/waternormals.jpg\";\n\n/**\n * @author jbouny / https://github.com/jbouny\n *\n * Work based on :\n * @author Slayvin / http://slayvin.net : Flat mirror for three.js\n * @author Stemkoski / http://www.adelphi.edu/~stemkoski : An implementation of water shader based on the flat mirror\n * @author Jonas Wagner / http://29a.ch/ && http://29a.ch/slides/2012/webglwater/ : Water shader explanations in WebGL\n */\n\nfunction MobileWater(geometry, options) {\n  THREE.Mesh.call(this, geometry);\n\n  const scope = this;\n\n  options = options || {};\n\n  const time = options.time !== undefined ? options.time : 0.0;\n  const normalSampler = options.waterNormals !== undefined ? options.waterNormals : null;\n  const sunDirection =\n    options.sunDirection !== undefined ? options.sunDirection : new THREE.Vector3(0.70707, 0.70707, 0.0);\n  const sunColor = new THREE.Color(options.sunColor !== undefined ? options.sunColor : 0xffffff);\n  const waterColor = new THREE.Color(options.waterColor !== undefined ? options.waterColor : 0x7f7f7f);\n  const eye = options.eye !== undefined ? options.eye : new THREE.Vector3(0, 0, 0);\n  const distortionScale = options.distortionScale !== undefined ? options.distortionScale : 20.0;\n  const side = options.side !== undefined ? options.side : THREE.FrontSide;\n  const fog = options.fog !== undefined ? options.fog : false;\n\n  const mirrorShader = {\n    uniforms: THREE.UniformsUtils.merge([\n      THREE.UniformsLib[\"lights\"],\n      {\n        normalSampler: { value: null },\n        time: { value: 0.0 },\n        size: { value: 1.0 },\n        distortionScale: { value: 20.0 },\n        sunColor: { value: new THREE.Color(0x7f7f7f) },\n        sunDirection: { value: new THREE.Vector3(0.70707, 0.70707, 0) },\n        eye: { value: new THREE.Vector3() },\n        waterColor: { value: new THREE.Color(0x555555) }\n      }\n    ]),\n\n    vertexShader: `\n      uniform float time;\n      varying vec4 worldPosition;\n\n      void main() {\n      \tworldPosition = modelMatrix * vec4( position, 1.0 );\n      \tvec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );\n      \tgl_Position = projectionMatrix * mvPosition;\n\n      }\n    `,\n\n    fragmentShader: `\n      uniform float time;\n      uniform float size;\n      uniform float distortionScale;\n      uniform sampler2D normalSampler;\n      uniform vec3 sunColor;\n      uniform vec3 sunDirection;\n      uniform vec3 eye;\n      uniform vec3 waterColor;\n\n      varying vec4 worldPosition;\n\n      vec4 getNoise( vec2 uv ) {\n      \tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\n      \tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\n      \tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\n      \tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\n      \tvec4 noise = texture2D( normalSampler, uv0 ) +\n      \t\ttexture2D( normalSampler, uv1 ) +\n      \t\ttexture2D( normalSampler, uv2 ) +\n      \t\ttexture2D( normalSampler, uv3 );\n      \treturn noise * 0.5 - 1.0;\n      }\n\n      void sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {\n      \tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\n      \tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );\n      \tspecularColor += pow( direction, shiny ) * sunColor * spec;\n      \tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\n      }\n\n      ${THREE.ShaderChunk[\"common\"]}\n      ${THREE.ShaderChunk[\"packing\"]}\n      ${THREE.ShaderChunk[\"bsdfs\"]}\n      ${THREE.ShaderChunk[\"lights_pars_begin\"]}\n\n      void main() {\n      \tvec4 noise = getNoise( worldPosition.xz * size );\n      \tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\n\n      \tvec3 diffuseLight = vec3(0.0);\n      \tvec3 specularLight = vec3(0.0);\n\n      \tvec3 worldToEye = eye-worldPosition.xyz;\n      \tvec3 eyeDirection = normalize( worldToEye );\n      \tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\n\n      \tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\n      \tfloat rf0 = 0.3;\n      \tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\n      \tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\n      \tvec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ), ( 0.5 + specularLight ), reflectance);\n      \tvec3 outgoingLight = albedo;\n      \tgl_FragColor = vec4( outgoingLight, 1 );\n      }\n    `\n  };\n\n  const material = new THREE.ShaderMaterial({\n    fragmentShader: mirrorShader.fragmentShader,\n    vertexShader: mirrorShader.vertexShader,\n    uniforms: THREE.UniformsUtils.clone(mirrorShader.uniforms),\n    transparent: false,\n    lights: true,\n    side: side,\n    fog: fog\n  });\n\n  material.uniforms.time.value = time;\n  material.uniforms.normalSampler.value = normalSampler;\n  material.uniforms.sunColor.value = sunColor;\n  material.uniforms.waterColor.value = waterColor;\n  material.uniforms.sunDirection.value = sunDirection;\n  material.uniforms.distortionScale.value = distortionScale;\n\n  material.uniforms.eye.value = eye;\n\n  scope.material = material;\n}\n\nMobileWater.prototype = Object.create(THREE.Mesh.prototype);\nMobileWater.prototype.constructor = THREE.Water;\n\nasync function loadWaterNormals(url) {\n  const texture = await new Promise((resolve, reject) =>\n    new THREE.TextureLoader().load(url, resolve, undefined, reject)\n  );\n  texture.wrapS = texture.wrapT = THREE.RepeatWrapping;\n  texture.needsUpdate = true;\n  return texture;\n}\n\nAFRAME.registerComponent(\"water\", {\n  schema: {\n    waterColor: { type: \"color\", default: \"#001e0f\" },\n    distortionScale: { type: \"number\", default: 3.7 },\n    sunColor: { type: \"color\", default: \"#ffffff\" },\n    inclination: { type: \"number\", default: 0 },\n    azimuth: { type: \"number\", default: 0 },\n    distance: { type: \"number\", default: 1 },\n    speed: { type: \"number\", default: 0.1 },\n    forceMobile: { type: \"boolean\", default: false }\n  },\n  init() {\n    const waterMesh = this.el.getObject3D(\"mesh\");\n    const waterGeometry = waterMesh.geometry;\n\n    // Render THREE.Water shader instead of THREE.Mesh\n    waterMesh.visible = false;\n\n    loadWaterNormals(waterNormalMap).then(waterNormals => {\n      const waterConfig = {\n        textureWidth: 512,\n        textureHeight: 512,\n        waterNormals: waterNormals,\n        sunDirection: this.data.sunDirection,\n        sunColor: new THREE.Color(this.data.sunColor),\n        waterColor: new THREE.Color(this.data.waterColor),\n        distortionScale: this.data.distortionScale,\n        fog: false\n      };\n\n      if (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR() || this.data.forceMobile) {\n        this.water = new MobileWater(waterGeometry, waterConfig);\n      } else {\n        this.water = new THREE.Water(waterGeometry, waterConfig);\n        this.water.mirrorCamera.layers.set(Layers.reflection);\n      }\n\n      this.el.setObject3D(\"water\", this.water);\n    });\n  },\n\n  update(oldData) {\n    if (this.data.forceMobile !== oldData.forceMobile) {\n      this.el.removeObject3D(\"water\");\n      this.init();\n      return;\n    }\n\n    if (!this.water) {\n      return;\n    }\n\n    const uniforms = this.water.material.uniforms;\n\n    if (this.data.waterColor !== oldData.waterColor) {\n      uniforms.waterColor.value.setStyle(this.data.waterColor);\n    }\n\n    if (this.data.distortionScale !== oldData.distortionScale) {\n      uniforms.distortionScale.value = this.data.distortionScale;\n    }\n\n    if (this.data.sunColor !== oldData.sunColor) {\n      uniforms.sunColor.value.setStyle(this.data.sunColor);\n    }\n\n    if (\n      this.data.inclination !== oldData.inclination ||\n      this.data.azimuth !== oldData.azimuth ||\n      this.data.distance !== oldData.distance\n    ) {\n      const theta = Math.PI * (this.data.inclination - 0.5);\n      const phi = 2 * Math.PI * (this.data.azimuth - 0.5);\n\n      const distance = this.data.distance;\n\n      const x = distance * Math.cos(phi);\n      const y = distance * Math.sin(phi) * Math.sin(theta);\n      const z = distance * Math.sin(phi) * Math.cos(theta);\n\n      uniforms.sunDirection.value.set(x, y, z);\n    }\n  },\n\n  tick(time) {\n    if (this.water) {\n      this.water.material.uniforms.time.value = (time / 1000) * this.data.speed;\n    }\n  },\n\n  remove() {\n    this.el.removeObject3D(\"water\");\n    const waterMesh = this.el.getObject3D(\"mesh\");\n    waterMesh.visible = true;\n  }\n});\n","import { ParticleEmitter } from \"@mozillareality/three-particle-emitter\";\nimport { textureLoader } from \"../utils/media-utils\";\nimport { resolveUrl } from \"../utils/media-utils\";\nimport { proxiedUrlFor } from \"../utils/media-url-utils\";\n\nAFRAME.registerComponent(\"particle-emitter\", {\n  schema: {\n    resolve: { type: \"boolean\", default: true },\n    src: { type: \"string\" },\n    startColor: { type: \"color\" },\n    middleColor: { type: \"color\" },\n    endColor: { type: \"color\" },\n    startOpacity: { type: \"number\" },\n    middleOpacity: { type: \"number\" },\n    endOpacity: { type: \"number\" },\n    colorCurve: { type: \"string\" },\n    sizeCurve: { type: \"string\" },\n    startSize: { type: \"number\" },\n    endSize: { type: \"number\" },\n    sizeRandomness: { type: \"number\" },\n    ageRandomness: { type: \"number\" },\n    lifetime: { type: \"number\" },\n    lifetimeRandomness: { type: \"number\" },\n    particleCount: { type: \"number\" },\n    startVelocity: { type: \"vec3\" },\n    endVelocity: { type: \"vec3\" },\n    velocityCurve: { type: \"string\" },\n    angularVelocity: { type: \"number\" }\n  },\n\n  init() {\n    this.particleEmitter = new ParticleEmitter(null);\n    this.particleEmitter.visible = false;\n    this.el.setObject3D(\"particle-emitter\", this.particleEmitter);\n    this.updateParticles = false;\n  },\n\n  async setTexture(src, resolve) {\n    let accessibleUrl = src;\n\n    if (resolve) {\n      const result = await resolveUrl(src);\n      let canonicalUrl = result.origin;\n\n      // handle protocol relative urls\n      if (canonicalUrl.startsWith(\"//\")) {\n        canonicalUrl = location.protocol + canonicalUrl;\n      }\n\n      // todo: we don't need to proxy for many things if the canonical URL has permissive CORS headers\n      accessibleUrl = proxiedUrlFor(canonicalUrl);\n    }\n\n    const texture = new THREE.Texture();\n\n    await textureLoader.loadTextureAsync(texture, accessibleUrl);\n\n    // Guard against src changing while request was in flight\n    if (this.data.src !== src) {\n      return;\n    }\n\n    this.particleEmitter.material.uniforms.map.value = texture;\n    this.particleEmitter.visible = true;\n    this.updateParticles = true;\n  },\n\n  update(prevData) {\n    const data = this.data;\n    const particleEmitter = this.particleEmitter;\n\n    if (prevData.src !== data.src) {\n      this.setTexture(data.src, data.resolve).catch(console.error);\n    }\n\n    if (\n      prevData.startColor !== data.startColor ||\n      prevData.startSize !== data.startSize ||\n      prevData.sizeRandomness !== data.sizeRandomness ||\n      prevData.ageRandomness !== data.ageRandomness ||\n      prevData.lifetime !== data.lifetime ||\n      prevData.lifetimeRandomness !== data.lifetimeRandomness ||\n      prevData.particleCount !== data.particleCount\n    ) {\n      this.updateParticles = true;\n    }\n\n    particleEmitter.startColor.set(data.startColor);\n    particleEmitter.middleColor.set(data.middleColor);\n    particleEmitter.endColor.set(data.endColor);\n    particleEmitter.startOpacity = data.startOpacity;\n    particleEmitter.middleOpacity = data.middleOpacity;\n    particleEmitter.endOpacity = data.endOpacity;\n    particleEmitter.colorCurve = data.colorCurve;\n    particleEmitter.sizeCurve = data.sizeCurve;\n    particleEmitter.startSize = data.startSize;\n    particleEmitter.endSize = data.endSize;\n    particleEmitter.sizeRandomness = data.sizeRandomness;\n    particleEmitter.ageRandomness = data.ageRandomness;\n    particleEmitter.lifetime = data.lifetime;\n    particleEmitter.lifetimeRandomness = data.lifetimeRandomness;\n    particleEmitter.particleCount = data.particleCount;\n    particleEmitter.startVelocity.copy(data.startVelocity);\n    particleEmitter.endVelocity.copy(data.endVelocity);\n    particleEmitter.velocityCurve = data.velocityCurve;\n    particleEmitter.angularVelocity = data.angularVelocity;\n  },\n\n  tick(time, dt) {\n    if (this.updateParticles) {\n      this.particleEmitter.updateParticles();\n      this.updateParticles = false;\n    }\n\n    if (this.particleEmitter.visible) {\n      this.particleEmitter.update(dt / 1000);\n    }\n  }\n});\n","export function getSanitizedComponentMapping(inputComponent, inputProperty, publicComponents) {\n  const publicComponent = publicComponents[inputComponent];\n\n  if (!publicComponent) {\n    throw new Error(`Component \"${inputComponent}\" is not public.`);\n  }\n\n  const publicProperty = publicComponent.publicProperties[inputProperty];\n\n  if (!publicProperty) {\n    throw new Error(`Component \"${inputComponent}\"'s property \"${inputProperty}\" is not public.`);\n  }\n\n  return {\n    mappedComponent: publicComponent.mappedComponent,\n    mappedProperty: publicProperty.mappedProperty,\n    getMappedValue: publicProperty.getMappedValue\n  };\n}\n","import \"./components/gltf-model-plus\";\nimport { getSanitizedComponentMapping } from \"./utils/component-mappings\";\nimport { isHubsDestinationUrl } from \"./utils/media-url-utils\";\nconst PHYSICS_CONSTANTS = require(\"aframe-physics-system/src/constants\"),\n  TYPE = PHYSICS_CONSTANTS.TYPE,\n  SHAPE = PHYSICS_CONSTANTS.SHAPE,\n  FIT = PHYSICS_CONSTANTS.FIT;\nconst COLLISION_LAYERS = require(\"./constants\").COLLISION_LAYERS;\n\nAFRAME.GLTFModelPlus.registerComponent(\"duck\", \"duck\");\nAFRAME.GLTFModelPlus.registerComponent(\"quack\", \"quack\");\nAFRAME.GLTFModelPlus.registerComponent(\"sound\", \"sound\");\nAFRAME.GLTFModelPlus.registerComponent(\"css-class\", \"css-class\");\nAFRAME.GLTFModelPlus.registerComponent(\"interactable\", \"css-class\", (el, componentName) => {\n  el.setAttribute(componentName, \"interactable\");\n});\nAFRAME.GLTFModelPlus.registerComponent(\"super-spawner\", \"super-spawner\", (el, componentName, componentData) => {\n  //TODO: Do not automatically add these components\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n  el.setAttribute(\"hoverable-visuals\", {\n    cursorController: \"#cursor-controller\"\n  });\n  el.setAttribute(componentName, componentData);\n});\nAFRAME.GLTFModelPlus.registerComponent(\"gltf-model-plus\", \"gltf-model-plus\");\nAFRAME.GLTFModelPlus.registerComponent(\"media-loader\", \"media-loader\");\nAFRAME.GLTFModelPlus.registerComponent(\"body\", \"ammo-body\", el => {\n  //This is only required for migration of old environments with super-spawners\n  //will no longer be needed when spawners are added via Spoke instead.\n  el.setAttribute(\"ammo-body\", {\n    mass: 0,\n    type: TYPE.STATIC,\n    collisionFilterGroup: COLLISION_LAYERS.INTERACTABLES,\n    collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER\n  });\n});\nAFRAME.GLTFModelPlus.registerComponent(\"ammo-shape\", \"ammo-shape\");\nAFRAME.GLTFModelPlus.registerComponent(\"hide-when-quality\", \"hide-when-quality\");\nAFRAME.GLTFModelPlus.registerComponent(\"light\", \"light\", (el, componentName, componentData) => {\n  if (componentData.distance === 0) {\n    componentData.decay = 0;\n  }\n  el.setAttribute(componentName, componentData);\n  if (componentData.castShadow) {\n    // HACK: component.light isn't set until one frame after setArrtibute\n    setTimeout(() => {\n      el.components.light.light.shadow.camera.matrixNeedsUpdate = true;\n    }, 0);\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"ambient-light\", \"ambient-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"directional-light\", \"directional-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"hemisphere-light\", \"hemisphere-light\");\nfunction decayMigration(el, componentName, componentData) {\n  if (componentData.range === 0) {\n    componentData.decay = 0;\n  }\n  el.setAttribute(componentName, componentData);\n}\nAFRAME.GLTFModelPlus.registerComponent(\"point-light\", \"point-light\", decayMigration);\nAFRAME.GLTFModelPlus.registerComponent(\"spot-light\", \"spot-light\", decayMigration);\n\nAFRAME.GLTFModelPlus.registerComponent(\"skybox\", \"skybox\");\nAFRAME.GLTFModelPlus.registerComponent(\"layers\", \"layers\");\nAFRAME.GLTFModelPlus.registerComponent(\"shadow\", \"shadow\");\nAFRAME.GLTFModelPlus.registerComponent(\"water\", \"water\");\nAFRAME.GLTFModelPlus.registerComponent(\"scale-audio-feedback\", \"scale-audio-feedback\");\nAFRAME.GLTFModelPlus.registerComponent(\"animation-mixer\", \"animation-mixer\");\nAFRAME.GLTFModelPlus.registerComponent(\"loop-animation\", \"loop-animation\");\nAFRAME.GLTFModelPlus.registerComponent(\n  \"box-collider\",\n  \"ammo-shape\",\n  (() => {\n    const euler = new THREE.Euler();\n    return (el, componentName, componentData) => {\n      const { scale, rotation } = componentData;\n      euler.set(rotation.x, rotation.y, rotation.z);\n      const orientation = new THREE.Quaternion().setFromEuler(euler);\n      el.setAttribute(componentName, {\n        type: SHAPE.BOX,\n        fit: FIT.MANUAL,\n        offset: componentData.position,\n        halfExtents: { x: scale.x / 2, y: scale.y / 2, z: scale.z / 2 },\n        orientation\n      });\n    };\n  })()\n);\nAFRAME.GLTFModelPlus.registerComponent(\"visible\", \"visible\", (el, componentName, componentData) => {\n  if (typeof componentData === \"object\") {\n    el.setAttribute(componentName, componentData.visible);\n  } else {\n    el.setAttribute(componentName, componentData);\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"spawn-point\", \"spawn-point\");\nAFRAME.GLTFModelPlus.registerComponent(\"sticky-zone\", \"sticky-zone\");\nAFRAME.GLTFModelPlus.registerComponent(\"nav-mesh\", \"nav-mesh\", (el, _componentName, componentData) => {\n  const nav = AFRAME.scenes[0].systems.nav;\n  const zone = componentData.zone || \"character\";\n  let found = false;\n  el.object3D.traverse(node => {\n    if (node.isMesh && !found) {\n      found = true;\n      nav.loadMesh(node, zone);\n    }\n  });\n  // There isn't actually an a-frame nav-mesh component, but we want to tag this el as a nav-mesh since\n  // nav-mesh-helper will query for it later.\n  el.setAttribute(\"nav-mesh\");\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"pinnable\", \"pinnable\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"media\", \"media\", (el, componentName, componentData) => {\n  if (componentData.id) {\n    el.setAttribute(\"networked\", {\n      template: \"#interactable-media\",\n      owner: \"scene\",\n      persistent: true,\n      networkId: componentData.id\n    });\n  }\n\n  el.setAttribute(\"media-loader\", {\n    src: componentData.src,\n    resize: true,\n    resolve: true,\n    fileIsOwned: true,\n    animate: false,\n    contentSubtype: componentData.contentSubtype\n  });\n\n  if (componentData.pageIndex) {\n    el.setAttribute(\"media-pdf\", { index: componentData.pageIndex });\n    el.setAttribute(\"media-pager\", { index: componentData.pageIndex });\n  }\n\n  if (componentData.paused !== undefined) {\n    el.setAttribute(\"media-video\", { videoPaused: componentData.paused });\n  }\n\n  if (componentData.time) {\n    el.setAttribute(\"media-video\", { time: componentData.time });\n  }\n});\n\nfunction mediaInflator(el, componentName, componentData, components) {\n  let isControlled = true;\n\n  if (components.networked) {\n    // TODO: When non-hubs links can be traversed, make all link components controlled so you can open them.\n    isControlled =\n      componentData.controls || isHubsDestinationUrl(componentData.src) || isHubsDestinationUrl(componentData.href);\n\n    const hasVolume = componentName === \"video\";\n    const templateName = isControlled || hasVolume ? \"#static-controlled-media\" : \"#static-media\";\n\n    el.setAttribute(\"networked\", {\n      template: templateName,\n      owner: \"scene\",\n      persistent: true,\n      networkId: components.networked.id\n    });\n  }\n\n  const mediaOptions = {};\n\n  if (componentName === \"video\" || componentName === \"image\") {\n    mediaOptions.projection = componentData.projection;\n  }\n\n  if (componentName === \"video\") {\n    mediaOptions.videoPaused = !componentData.autoPlay;\n    mediaOptions.volume = componentData.volume;\n    mediaOptions.loop = componentData.loop;\n    mediaOptions.audioType = componentData.audioType;\n    mediaOptions.hidePlaybackControls = !isControlled;\n\n    if (componentData.audioType === \"pannernode\") {\n      mediaOptions.distanceModel = componentData.distanceModel;\n      mediaOptions.rolloffFactor = componentData.rolloffFactor;\n      mediaOptions.refDistance = componentData.refDistance;\n      mediaOptions.maxDistance = componentData.maxDistance;\n      mediaOptions.coneInnerAngle = componentData.coneInnerAngle;\n      mediaOptions.coneOuterAngle = componentData.coneOuterAngle;\n      mediaOptions.coneOuterGain = componentData.coneOuterGain;\n    }\n\n    el.setAttribute(\"video-pause-state\", { paused: mediaOptions.videoPaused });\n  }\n\n  const src = componentName === \"link\" ? componentData.href : componentData.src;\n\n  el.setAttribute(\"media-loader\", {\n    src,\n    resize: true,\n    resolve: true,\n    fileIsOwned: true,\n    animate: false,\n    mediaOptions\n  });\n}\n\nAFRAME.GLTFModelPlus.registerComponent(\"image\", \"image\", mediaInflator);\nAFRAME.GLTFModelPlus.registerComponent(\"video\", \"video\", mediaInflator, (name, property, value) => {\n  if (property === \"paused\") {\n    return { name: \"video-pause-state\", property, value };\n  } else {\n    return null;\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"link\", \"link\", mediaInflator);\n\nAFRAME.GLTFModelPlus.registerComponent(\"hoverable\", \"is-remote-hover-target\", el => {\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"spawner\", \"spawner\", (el, componentName, componentData) => {\n  el.setAttribute(\"media-loader\", {\n    src: componentData.src,\n    resolve: true,\n    fileIsOwned: true,\n    animate: false\n  });\n  el.setAttribute(\"css-class\", \"interactable\");\n  el.setAttribute(\"super-spawner\", {\n    src: componentData.src,\n    resolve: true,\n    template: \"#interactable-media\"\n  });\n  el.setAttribute(\"hoverable-visuals\", {\n    cursorController: \"#cursor-controller\"\n  });\n  el.setAttribute(\"ammo-body\", {\n    mass: 0,\n    type: TYPE.STATIC,\n    collisionFilterGroup: COLLISION_LAYERS.INTERACTABLES,\n    collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER\n  });\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n});\n\nconst publicComponents = {\n  video: {\n    mappedComponent: \"video-pause-state\",\n    publicProperties: {\n      paused: {\n        mappedProperty: \"paused\",\n        getMappedValue(value) {\n          return !!value;\n        }\n      }\n    }\n  },\n  \"loop-animation\": {\n    mappedComponent: \"loop-animation\",\n    publicProperties: {\n      paused: {\n        mappedProperty: \"paused\",\n        getMappedValue(value) {\n          return !!value;\n        }\n      }\n    }\n  }\n};\n\nAFRAME.GLTFModelPlus.registerComponent(\n  \"trigger-volume\",\n  \"trigger-volume\",\n  (el, componentName, componentData, components, indexToEntityMap) => {\n    const {\n      size,\n      target,\n      enterComponent,\n      enterProperty,\n      enterValue,\n      leaveComponent,\n      leaveProperty,\n      leaveValue\n    } = componentData;\n\n    let enterComponentMapping, leaveComponentMapping, targetEntity;\n\n    try {\n      enterComponentMapping = getSanitizedComponentMapping(enterComponent, enterProperty, publicComponents);\n      leaveComponentMapping = getSanitizedComponentMapping(leaveComponent, leaveProperty, publicComponents);\n\n      targetEntity = indexToEntityMap[target];\n\n      if (!targetEntity) {\n        throw new Error(`Couldn't find target entity with index: ${target}.`);\n      }\n    } catch (e) {\n      console.warn(`Error inflating gltf component \"trigger-volume\": ${e.message}`);\n      return;\n    }\n\n    // Filter out scope and colliders properties.\n    el.setAttribute(\"trigger-volume\", {\n      colliders: \"#player-camera\",\n      size,\n      target: targetEntity,\n      enterComponent: enterComponentMapping.mappedComponent,\n      enterProperty: enterComponentMapping.mappedProperty,\n      enterValue: enterComponentMapping.getMappedValue(enterValue),\n      leaveComponent: leaveComponentMapping.mappedComponent,\n      leaveProperty: leaveComponentMapping.mappedProperty,\n      leaveValue: leaveComponentMapping.getMappedValue(leaveValue)\n    });\n  }\n);\n\nAFRAME.GLTFModelPlus.registerComponent(\"heightfield\", \"heightfield\", (el, componentName, componentData) => {\n  el.setAttribute(\"ammo-shape__heightfield\", {\n    type: SHAPE.HEIGHTFIELD,\n    margin: 0.01,\n    fit: FIT.MANUAL,\n    heightfieldDistance: componentData.distance,\n    offset: componentData.offset,\n    heightfieldData: componentData.data\n  });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"trimesh\", \"trimesh\", el => {\n  el.setAttribute(\"ammo-shape__trimesh\", {\n    type: SHAPE.MESH,\n    margin: 0.01,\n    fit: FIT.ALL,\n    includeInvisible: true\n  });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"particle-emitter\", \"particle-emitter\");\n","import { Socket } from \"phoenix\";\nimport { generateHubName } from \"../utils/name-generation\";\nimport { getAirtableAssets, airtableAssetsInitialState } from '../everyspace/airtable'\n\nimport Store from \"../storage/store\";\n\nconst resolverLink = document.createElement(\"a\");\nexport function getReticulumFetchUrl(path, absolute = false) {\n  if (process.env.RETICULUM_SERVER) {\n    return `https://${process.env.RETICULUM_SERVER}${path}`;\n  } else if (absolute) {\n    resolverLink.href = path;\n    return resolverLink.href;\n  } else {\n    return path;\n  }\n}\n\nlet reticulumMeta = null;\nlet invalidatedReticulumMetaThisSession = false;\n\nexport async function invalidateReticulumMeta() {\n  invalidatedReticulumMetaThisSession = true;\n  reticulumMeta = null;\n}\n\nexport async function getReticulumMeta() {\n  if (!reticulumMeta) {\n    // Initially look up version based upon page, avoiding round-trip, otherwise fetch.\n    if (!invalidatedReticulumMetaThisSession && document.querySelector(\"meta[name='ret:version']\")) {\n      reticulumMeta = {\n        version: document.querySelector(\"meta[name='ret:version']\").getAttribute(\"value\"),\n        pool: document.querySelector(\"meta[name='ret:pool']\").getAttribute(\"value\"),\n        phx_host: document.querySelector(\"meta[name='ret:phx_host']\").getAttribute(\"value\")\n      };\n    } else {\n      await fetch(getReticulumFetchUrl(\"/api/v1/meta\")).then(async res => {\n        reticulumMeta = await res.json();\n      });\n    }\n  }\n\n  const qs = new URLSearchParams(location.search);\n  const phxHostOverride = qs.get(\"phx_host\");\n\n  if (phxHostOverride) {\n    reticulumMeta.phx_host = phxHostOverride;\n  }\n\n  return reticulumMeta;\n}\n\nexport async function connectToReticulum(debug = false, params = null) {\n  const qs = new URLSearchParams(location.search);\n\n  const getNewSocketUrl = async () => {\n    const socketProtocol = qs.get(\"phx_protocol\") || (document.location.protocol === \"https:\" ? \"wss:\" : \"ws:\");\n    let socketHost = qs.get(\"phx_host\");\n    let socketPort = qs.get(\"phx_port\");\n\n    const reticulumMeta = await getReticulumMeta();\n    socketHost = socketHost || process.env.RETICULUM_SOCKET_SERVER || reticulumMeta.phx_host;\n    socketPort =\n      socketPort ||\n      (process.env.RETICULUM_SERVER ? new URL(`${socketProtocol}//${process.env.RETICULUM_SERVER}`).port : \"443\");\n    return `${socketProtocol}//${socketHost}${socketPort ? `:${socketPort}` : \"\"}`;\n  };\n\n  const socketUrl = await getNewSocketUrl();\n  console.log(`Phoenix Socket URL: ${socketUrl}`);\n\n  const socketSettings = {};\n\n  if (debug) {\n    socketSettings.logger = (kind, msg, data) => {\n      console.log(`${kind}: ${msg}`, data);\n    };\n  }\n\n  if (params) {\n    socketSettings.params = params;\n  }\n\n  const socket = new Socket(`${socketUrl}/socket`, socketSettings);\n  socket.connect();\n  socket.onError(async () => {\n    // On error, underlying reticulum node may have died, so rebalance by\n    // fetching a new healthy node to connect to.\n    invalidateReticulumMeta();\n\n    const endPointPath = new URL(socket.endPoint).pathname;\n    const newSocketUrl = await getNewSocketUrl();\n    const newEndPoint = `${newSocketUrl}${endPointPath}`;\n    console.log(`Socket error, changed endpoint to ${newEndPoint}`);\n    socket.endPoint = newEndPoint;\n  });\n\n  return socket;\n}\n\nexport function getLandingPageForPhoto(photoUrl) {\n  const parsedUrl = new URL(photoUrl);\n  return getReticulumFetchUrl(parsedUrl.pathname.replace(\".png\", \".html\") + parsedUrl.search, true);\n}\n\nexport function fetchReticulumAuthenticated(url, method = \"GET\", payload) {\n  const { token } = window.APP.store.state.credentials;\n  const retUrl = getReticulumFetchUrl(url);\n  const params = {\n    headers: { \"content-type\": \"application/json\" },\n    method\n  };\n  if (token) {\n    params.headers.authorization = `bearer ${token}`;\n  }\n  if (payload) {\n    params.body = JSON.stringify(payload);\n  }\n  return fetch(retUrl, params).then(async r => {\n    const result = await r.text();\n    try {\n      return JSON.parse(result);\n    } catch (e) {\n      // Some reticulum responses, particularly DELETE requests, don't return json.\n      return result;\n    }\n  });\n}\n\nexport async function createAndRedirectToNewHub(name, sceneId, sceneUrl, replace) {\n  const createUrl = getReticulumFetchUrl(\"/api/v1/hubs\");\n\n  let assets = {Name: \"Test\", SceneUrl: null};\n    \n  assets = await getAirtableAssets();\n  \n  // const record = await airtableAssets.find('recHqITRS7cBMwn9i')\n\n  // if (record) assets = record.fields;\n  \n  // const payload = { hub: { name: name || generateHubName() } };\n  const payload = { hub: { name: assets.Name } };\n  \n\n  // if (sceneId) {\n    // payload.hub.scene_id = sceneId;\n  // } else {\n    // payload.hub.default_environment_gltf_bundle_url = sceneUrl;\n  // }\n    \n  payload.hub.default_environment_gltf_bundle_url = assets.SceneUrl;\n    \n\n  const headers = { \"content-type\": \"application/json\" };\n  const store = new Store();\n  if (store.state && store.state.credentials.token) {\n    headers.authorization = `bearer ${store.state.credentials.token}`;\n  }\n\n  let res = await fetch(createUrl, {\n    body: JSON.stringify(payload),\n    headers,\n    method: \"POST\"\n  }).then(r => r.json());\n\n  if (res.error === \"invalid_token\") {\n    // Clear the invalid token from store.\n    store.update({ credentials: { token: null, email: null } });\n\n    // Create hub anonymously\n    delete headers.authorization;\n    res = await fetch(createUrl, {\n      body: JSON.stringify(payload),\n      headers,\n      method: \"POST\"\n    }).then(r => r.json());\n  }\n\n  const hub = res;\n  let url = hub.url;\n\n  const creatorAssignmentToken = hub.creator_assignment_token;\n  if (creatorAssignmentToken) {\n    store.update({ creatorAssignmentTokens: [{ hubId: hub.hub_id, creatorAssignmentToken: creatorAssignmentToken }] });\n\n    // Don't need to store the embed token if there's no creator assignment token, since that means\n    // we are the owner and will get the embed token on page load.\n    const embedToken = hub.embed_token;\n\n    if (embedToken) {\n      store.update({ embedTokens: [{ hubId: hub.hub_id, embedToken: embedToken }] });\n    }\n  }\n\n  if (process.env.RETICULUM_SERVER && document.location.host !== process.env.RETICULUM_SERVER) {\n    url = `/hub.html?hub_id=${hub.hub_id}`;\n  }\n\n  if (replace) {\n    document.location.replace(url);\n  } else {\n    document.location = url;\n  }\n}\n\nexport function getPresenceEntryForSession(presences, sessionId) {\n  const entry = Object.entries(presences || {}).find(([k]) => k === sessionId) || [];\n  const presence = entry[1];\n  return (presence && presence.metas && presence.metas[0]) || {};\n}\n\nexport function getPresenceContextForSession(presences, sessionId) {\n  return (getPresenceEntryForSession(presences, sessionId) || {}).context || {};\n}\n\nexport function getPresenceProfileForSession(presences, sessionId) {\n  return (getPresenceEntryForSession(presences, sessionId) || {}).profile || {};\n}\n\n// Takes the given channel, and creates a new channel with the same bindings\n// with the given socket, joins it, and leaves the old channel after joining.\n//\n// NOTE: This function relies upon phoenix channel object internals, so this\n// function will need to be reviewed if/when we ever update phoenix.js\nexport function migrateChannelToSocket(oldChannel, socket, params) {\n  const channel = socket.channel(oldChannel.topic, params || oldChannel.params);\n\n  for (let i = 0, l = oldChannel.bindings.length; i < l; i++) {\n    const item = oldChannel.bindings[i];\n    channel.on(item.event, item.callback);\n  }\n\n  for (let i = 0, l = oldChannel.pushBuffer.length; i < l; i++) {\n    const item = oldChannel.pushBuffer[i];\n    channel.push(item.event, item.payload, item.timeout);\n  }\n\n  const oldJoinPush = oldChannel.joinPush;\n  const joinPush = channel.join();\n\n  for (let i = 0, l = oldJoinPush.recHooks.length; i < l; i++) {\n    const item = oldJoinPush.recHooks[i];\n    joinPush.receive(item.status, item.callback);\n  }\n\n  return new Promise(resolve => {\n    joinPush.receive(\"ok\", () => {\n      // Clear all event handlers first so no duplicate messages come in.\n      oldChannel.bindings = [];\n      resolve(channel);\n    });\n  });\n}\n\nexport function discordBridgesForPresences(presences) {\n  const channels = [];\n  for (const p of Object.values(presences)) {\n    for (const m of p.metas) {\n      if (m.profile && m.profile.discordBridges) {\n        Array.prototype.push.apply(channels, m.profile.discordBridges.map(b => b.channel.name));\n      }\n    }\n  }\n  return channels;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tweetButton\":\"scene-ui__tweetButton__NAR59\",\"createButton\":\"scene-ui__createButton__1DQtQ\",\"optionsButton\":\"scene-ui__optionsButton__lzUHO\",\"ui\":\"scene-ui__ui__3JHPz\",\"logoTagline\":\"scene-ui__logoTagline___LR3I\",\"whiteOverlay\":\"scene-ui__whiteOverlay__1Pz3I\",\"grid\":\"scene-ui__grid__34j9h\",\"mainPanel\":\"scene-ui__mainPanel__IuYxi\",\"logo\":\"scene-ui__logo__26JnS\",\"info\":\"scene-ui__info__3Nznh\",\"name\":\"scene-ui__name__2-7V_\",\"attribution\":\"scene-ui__attribution__3nlIi\",\"screenshot\":\"scene-ui__screenshot__279rF\",\"screenshotHidden\":\"scene-ui__screenshotHidden__3nHWx\",\"spoke\":\"scene-ui__spoke___KrWT\",\"madeWith\":\"scene-ui__madeWith__A5stW\",\"createButtons\":\"scene-ui__createButtons__1COLQ\",\"unavailable\":\"scene-ui__unavailable__21hgO\"};","const nonCorsProxyDomains = (process.env.NON_CORS_PROXY_DOMAINS || \"\").split(\",\");\nif (process.env.CORS_PROXY_SERVER) {\n  nonCorsProxyDomains.push(process.env.CORS_PROXY_SERVER);\n}\n\nconst commonKnownContentTypes = {\n  gltf: \"model/gltf\",\n  glb: \"model/gltf-binary\",\n  png: \"image/png\",\n  jpg: \"image/jpeg\",\n  jpeg: \"image/jpeg\",\n  pdf: \"application/pdf\",\n  mp4: \"video/mp4\",\n  mp3: \"audio/mpeg\"\n};\n\n// thanks to https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding\nfunction b64EncodeUnicode(str) {\n  // first we use encodeURIComponent to get percent-encoded UTF-8, then we convert the percent-encodings\n  // into raw bytes which can be fed into btoa.\n  const CHAR_RE = /%([0-9A-F]{2})/g;\n  return btoa(encodeURIComponent(str).replace(CHAR_RE, (_, p1) => String.fromCharCode(\"0x\" + p1)));\n}\n\nconst farsparkEncodeUrl = url => {\n  // farspark doesn't know how to read '=' base64 padding characters\n  // translate base64 + to - and / to _ for URL safety\n  return b64EncodeUnicode(url)\n    .replace(/=+$/g, \"\")\n    .replace(/\\+/g, \"-\")\n    .replace(/\\//g, \"_\");\n};\n\nexport const scaledThumbnailUrlFor = (url, width, height) => {\n  const farsparkUrl = `https://${process.env.FARSPARK_SERVER}/thumbnail/${farsparkEncodeUrl(\n    url\n  )}?w=${width}&h=${height}`;\n\n  try {\n    const urlHostname = new URL(url).hostname;\n\n    if (process.env.RETICULUM_SERVER) {\n      const retHostname = new URL(`https://${process.env.RETICULUM_SERVER}`).hostname;\n      if (retHostname === urlHostname) return url;\n    }\n  } catch (e) {\n    return farsparkUrl;\n  }\n\n  return farsparkUrl;\n};\n\nexport const proxiedUrlFor = url => {\n  if (!(url.startsWith(\"http:\") || url.startsWith(\"https:\"))) return url;\n\n  // Skip known domains that do not require CORS proxying.\n  try {\n    const parsedUrl = new URL(url);\n    if (nonCorsProxyDomains.find(domain => parsedUrl.hostname.endsWith(domain))) return url;\n  } catch (e) {\n    // Ignore\n  }\n\n  if (!process.env.CORS_PROXY_SERVER) {\n    return `https://${process.env.FARSPARK_SERVER}/0/raw/0/0/0/0/${farsparkEncodeUrl(url)}`;\n  } else {\n    return `https://${process.env.CORS_PROXY_SERVER}/${url}`;\n  }\n};\n\nexport const getCustomGLTFParserURLResolver = gltfUrl => url => {\n  if (typeof url !== \"string\" || url === \"\") return \"\";\n  if (/^(https?:)?\\/\\//i.test(url)) return url;\n  if (/^data:.*,.*$/i.test(url)) return url;\n  if (/^blob:.*$/i.test(url)) return url;\n\n  if (process.env.CORS_PROXY_SERVER) {\n    // For absolute paths with a CORS proxied gltf URL, re-write the url properly to be proxied\n    const corsProxyPrefix = `https://${process.env.CORS_PROXY_SERVER}/`;\n\n    if (gltfUrl.startsWith(corsProxyPrefix)) {\n      const originalUrl = decodeURIComponent(gltfUrl.substring(corsProxyPrefix.length));\n      const originalUrlParts = originalUrl.split(\"/\");\n\n      // Drop the .gltf filename\n      const path = new URL(url).pathname;\n      const assetUrl = originalUrlParts.slice(0, originalUrlParts.length - 1).join(\"/\") + \"/\" + path;\n      return corsProxyPrefix + assetUrl;\n    }\n  }\n\n  return url;\n};\n\nconst dataUrlRegex = /data:([a-zA-Z0-9]+\\/[a-zA-Z0-9-.+]+).*,.*/;\n\nexport const guessContentType = url => {\n  if (url.startsWith(\"hubs://\") && url.endsWith(\"/video\")) return \"video/vnd.hubs-webrtc\";\n  if (url.startsWith(\"data:\")) {\n    const matches = dataUrlRegex.match(url);\n    if (matches.length > 0) {\n      matches[1];\n    }\n  }\n  const extension = new URL(url, window.location).pathname.split(\".\").pop();\n  return commonKnownContentTypes[extension];\n};\nconst hubsSceneRegex = /https?:\\/\\/(hubs.local(:\\d+)?|(smoke-)?hubs.mozilla.com|(dev\\.)?reticulum.io)\\/scenes\\/(\\w+)\\/?\\S*/;\nconst hubsAvatarRegex = /https?:\\/\\/(hubs.local(:\\d+)?|(smoke-)?hubs.mozilla.com|(dev\\.)?reticulum.io)\\/avatars\\/(\\w+)\\/?\\S*/;\nconst hubsRoomRegex = /https?:\\/\\/(hubs.local(:\\d+)?|(smoke-)?hubs.mozilla.com|(dev\\.)?reticulum.io)\\/(\\w+)\\/?\\S*/;\nexport const isHubsSceneUrl = hubsSceneRegex.test.bind(hubsSceneRegex);\nexport const isHubsRoomUrl = url => !isHubsSceneUrl(url) && hubsRoomRegex.test(url);\nexport const isHubsDestinationUrl = url => isHubsSceneUrl(url) || isHubsRoomUrl(url);\nexport const isHubsAvatarUrl = hubsAvatarRegex.test.bind(hubsAvatarRegex);\n","// Utilities for manipulating state history. This provides a number of functions which\n// need to be used to manipulate history state so we can deal with edge cases around\n// entry back button and refreshes once entered.\n//\n// These functions also transparently deal with the room slug, so incoming calls can ignore\n// dealing with it, and provides APIs for getting the non-slug part of the path.\n//\n// The slug cannot be part of the basename for history, because the slug changes intra-session\n// if the room is renamed.\n\n// This pushes/replaces a new k, v pair into the history, while maintaining all the other\n// keys, or clears state if k if null.\n//\n// Also maintains a length key that can be used to find the length of the history chain\n// (across refreshes) for the current room.\nfunction pushOrUpdateHistory(history, replace, k, v, detail, newPathname, newSearch) {\n  let state = {};\n  const newLength = ((history.location.state && history.location.state.__historyLength) || 0) + (replace ? 0 : 1);\n\n  if (k || newPathname || newSearch) {\n    state = history.location.state ? { ...history.location.state } : {};\n    delete state.__duplicate;\n\n    if (k) {\n      state[k] = v;\n      state.key = k;\n      state.value = v;\n      state.detail = detail;\n    }\n  }\n\n  const pathname =\n    newPathname !== undefined ? newPathname : history.location.pathname === \"/\" ? \"\" : history.location.pathname;\n\n  const search = newSearch !== undefined ? newSearch : history.location.search;\n\n  // If popToBeginningOfHubHistory was previously used, there is a duplicate entry\n  // at the top of the history stack (which was needed to wipe out forward history)\n  // so we use this opportunity to replace it.\n  const isDuplicate = history.location.state && history.location.state.__duplicate;\n  const method = replace || isDuplicate ? history.replace : history.push;\n  state.__historyLength = newLength;\n\n  method({ pathname, search, state });\n}\n\nexport function pushHistoryState(history, k, v, detail) {\n  pushOrUpdateHistory(history, false, k, v, detail);\n}\n\nexport function replaceHistoryState(history, k, v, detail) {\n  pushOrUpdateHistory(history, true, k, v, detail);\n}\n\nexport function pushHistoryPath(history, path, search) {\n  pushOrUpdateHistory(history, false, null, null, null, path, search);\n}\n\nexport function clearHistoryState(history) {\n  pushOrUpdateHistory(history, false);\n}\n\n// This will pop the browser history to the first entry that was for this hubs room,\n// and then push a duplicate entry onto the history stack in order to wipe out forward\n// history.\nexport function popToBeginningOfHubHistory(history, navigateToPriorPage) {\n  if (!history.location.state || history.location.state.__historyLength === undefined) return;\n\n  const len = history.location.state.__historyLength;\n  if (len === 0) return;\n\n  return new Promise(resolve => {\n    // After the go() completes, we push a duplicate history entry onto the stack\n    // in order to wipe out forward history. We also optionally go back -2 if we wanted\n    // to go back to the prior page.\n    const unsubscribe = history.listen(() => {\n      unsubscribe();\n      history.push({\n        pathname: history.location.pathname,\n        search: history.location.search,\n        state: { __historyLength: 0, __duplicate: true }\n      });\n      if (navigateToPriorPage) history.go(-2); // Go back to history entry before beginning.\n      resolve();\n    });\n\n    history.go(-len);\n  });\n}\n\n// This will pop the browser history to the entry before the first entry for this hubs room.\nexport function navigateToPriorPage(history) {\n  popToBeginningOfHubHistory(history, true);\n}\n\n// Returns the part of the pathname that does not include the slug\nexport function sluglessPath(location) {\n  const parts = location.pathname.split(\"/\");\n  return `/${parts.slice(2).join(\"/\")}`;\n}\n\n// Returns a new path that includes the current slug as a prefix to the\n// provided path.\nexport function withSlug(location, path) {\n  const parts = location.pathname.split(\"/\");\n  return `/${parts[1]}${path}`;\n}\n","module.exports = __webpack_public_path__ + \"assets/images/twitter-b2e343d39bc8d3294292e506c7173f71.svg\";","module.exports = __webpack_public_path__ + \"assets/images/spoke_logo_black-31d4b5f1f5ef27bb389bc31a4c97b57f.png\";","module.exports = __webpack_public_path__ + \"assets/sfx/tick-b0fcbf1d9b6f92a24bec12f9bae1e42a.mp3\";","const VERTEX_SHADER = `\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n  #include <uv_vertex>\n  #include <uv2_vertex>\n  #include <color_vertex>\n  #include <skinbase_vertex>\n\n  #include <begin_vertex>\n  #include <morphtarget_vertex>\n  #include <skinning_vertex>\n  #include <project_vertex>\n  #include <logdepthbuf_vertex>\n\n  #include <worldpos_vertex>\n  #include <clipping_planes_vertex>\n  #include <fog_vertex>\n}\n`;\n\nconst FRAGMENT_SHADER = `\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <aomap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n  #include <clipping_planes_fragment>\n\n  vec4 diffuseColor = vec4(diffuse, opacity);\n  ReflectedLight reflectedLight = ReflectedLight(vec3(0.0), vec3(0.0), vec3(0.0), vec3(0.0));\n  vec3 totalEmissiveRadiance = emissive;\n\n  #include <logdepthbuf_fragment>\n  #include <map_fragment>\n  #include <color_fragment>\n  #include <alphatest_fragment>\n  #include <emissivemap_fragment>\n\n  reflectedLight.indirectDiffuse += vec3(1.0);\n\n  #include <aomap_fragment>\n\n  reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n  vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n  gl_FragColor = vec4(outgoingLight, diffuseColor.a);\n\n  #include <premultiplied_alpha_fragment>\n  #include <tonemapping_fragment>\n  #include <encodings_fragment>\n  #include <fog_fragment>\n}\n`;\n\nexport default class MobileStandardMaterial extends THREE.ShaderMaterial {\n  type = \"MobileStandardMaterial\";\n  isMobileStandardMaterial = true;\n  static fromStandardMaterial(material) {\n    const parameters = {\n      vertexShader: VERTEX_SHADER,\n      fragmentShader: FRAGMENT_SHADER,\n      uniforms: {\n        uvTransform: { value: new THREE.Matrix3() },\n        diffuse: { value: material.color },\n        opacity: { value: material.opacity },\n        map: { value: material.map },\n        aoMapIntensity: { value: material.aoMapIntensity },\n        aoMap: { value: material.aoMap },\n        emissive: { value: material.emissive },\n        emissiveMap: { value: material.emissiveMap }\n      },\n      fog: true,\n      lights: false,\n      opacity: material.opacity,\n      transparent: material.transparent,\n      alphaTest: material.alphaTest,\n      skinning: material.skinning,\n      morphTargets: material.morphTargets,\n      vertexColors: material.vertexColors\n    };\n\n    const mobileMaterial = new MobileStandardMaterial(parameters);\n\n    mobileMaterial.color = material.color;\n    mobileMaterial.map = material.map;\n    mobileMaterial.aoMap = material.aoMap;\n    mobileMaterial.aoMapIntensity = material.aoMapIntensity;\n    mobileMaterial.emissive = material.emissive;\n    mobileMaterial.emissiveMap = material.emissiveMap;\n\n    return mobileMaterial;\n  }\n  clone() {\n    return MobileStandardMaterial.fromStandardMaterial(this);\n  }\n}\n","import { EventTarget } from \"event-target-shim\";\nimport { getReticulumFetchUrl, fetchReticulumAuthenticated } from \"../utils/phoenix-utils\";\nimport { pushHistoryPath, sluglessPath, withSlug } from \"../utils/history\";\n\nexport const SOURCES = [\"poly\", \"sketchfab\", \"videos\", \"scenes\", \"gifs\", \"images\", \"twitch\"];\n\nconst EMPTY_RESULT = { entries: [], meta: {} };\n\nconst URL_SOURCE_TO_TO_API_SOURCE = {\n  scenes: \"scene_listings\",\n  images: \"bing_images\",\n  videos: \"bing_videos\",\n  youtube: \"youtube_videos\",\n  gifs: \"tenor\",\n  sketchfab: \"sketchfab\",\n  poly: \"poly\",\n  twitch: \"twitch\",\n  favorites: \"favorites\"\n};\n\nexport const MEDIA_SOURCE_DEFAULT_FILTERS = {\n  gifs: \"trending\",\n  sketchfab: \"featured\",\n  scenes: \"featured\",\n  favorites: \"my-favorites\"\n};\n\nconst SEARCH_CONTEXT_PARAMS = [\"q\", \"filter\", \"cursor\"];\n\n// This class is responsible for fetching and storing media search results and provides a\n// convenience API for performing history updates relevant to search navigation.\nexport default class MediaSearchStore extends EventTarget {\n  constructor() {\n    super();\n\n    this.requestIndex = 0;\n  }\n\n  setHistory(history) {\n    this.history = history;\n\n    this._update(this.history.location);\n\n    this.history.listen(location => {\n      this._update(location);\n    });\n  }\n\n  _update = async location => {\n    this.result = null;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    const urlSource = this.getUrlMediaSource(location);\n    if (!urlSource) return;\n\n    if (!this.previousSource || this.previousSource !== urlSource) {\n      this.dispatchEvent(new CustomEvent(\"sourcechanged\"));\n      this.previousSource = urlSource;\n    }\n\n    const urlParams = new URLSearchParams(location.search);\n\n    this.requestIndex++;\n    const currentRequestIndex = this.requestIndex;\n    const searchParams = new URLSearchParams();\n    const locationSearchParams = new URLSearchParams(location.search);\n    const isMy = locationSearchParams.get(\"filter\") && locationSearchParams.get(\"filter\").startsWith(\"my-\");\n\n    for (const param of SEARCH_CONTEXT_PARAMS) {\n      if (!urlParams.get(param)) continue;\n      searchParams.set(param, urlParams.get(param));\n    }\n\n    searchParams.get(\"locale\", navigator.languages[0]);\n\n    let source;\n    if (urlSource === \"avatars\" || urlSource === \"scenes\") {\n      // Avatars + scenes are special since we request them from a different source based on the facet.\n      const singular = urlSource === \"avatars\" ? \"avatar\" : \"scene\";\n      source = isMy ? `${singular}s` : `${singular}_listings`;\n    } else {\n      source = URL_SOURCE_TO_TO_API_SOURCE[urlSource];\n    }\n    searchParams.set(\"source\", source);\n\n    let fetch = true;\n\n    if (source === \"avatars\" || source === \"scenes\" || source === \"favorites\") {\n      if (isMy) {\n        if (window.APP.store.credentialsAccountId) {\n          searchParams.set(\"user\", window.APP.store.credentialsAccountId);\n        } else {\n          fetch = false; // Don't fetch my-* if not signed in\n        }\n      }\n    }\n\n    const path = `/api/v1/media/search?${searchParams.toString()}`;\n    const url = getReticulumFetchUrl(path);\n    if (this.lastSavedUrl === url) return;\n\n    this.isFetching = true;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n    const result = fetch ? await fetchReticulumAuthenticated(path) : EMPTY_RESULT;\n\n    if (this.requestIndex != currentRequestIndex) return;\n\n    this.result = result;\n    this.nextCursor = this.result && this.result.meta && this.result.meta.next_cursor;\n    this.lastFetchedUrl = url;\n    this.isFetching = false;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n  };\n\n  _legacyAvatarToSearchEntry = legacyAvatar => {\n    return {\n      id: legacyAvatar.id,\n      type: \"avatar_listing\",\n      url: legacyAvatar.url,\n      images: { preview: { url: legacyAvatar.thumbnail, width: 720, height: 1280 } },\n      gltfs: { avatar: legacyAvatar.model }\n    };\n  };\n\n  pageNavigate = delta => {\n    if (delta === -1) {\n      this.history.goBack();\n    } else {\n      const location = this.history.location;\n      const searchParams = new URLSearchParams(location.search);\n      searchParams.set(\"cursor\", this.nextCursor);\n      pushHistoryPath(this.history, location.pathname, searchParams.toString());\n    }\n  };\n\n  filterQueryNavigate = (filter, query) => {\n    const location = this.history.location;\n    const searchParams = new URLSearchParams(location.search);\n\n    if (query) {\n      searchParams.set(\"q\", query);\n    } else {\n      searchParams.delete(\"q\");\n    }\n\n    if (filter) {\n      searchParams.set(\"filter\", filter);\n    } else {\n      searchParams.delete(\"filter\");\n    }\n\n    if (filter) {\n      searchParams.set(\"cursor\", filter);\n    } else {\n      searchParams.delete(\"cursor\");\n    }\n\n    pushHistoryPath(this.history, location.pathname, searchParams.toString());\n  };\n\n  getSearchClearedSearchParams = (location, keepSource, keepNav) => {\n    const searchParams = new URLSearchParams(location.search);\n\n    // Strip browsing query params\n    searchParams.delete(\"q\");\n    searchParams.delete(\"filter\");\n    searchParams.delete(\"cursor\");\n\n    if (!keepNav) {\n      searchParams.delete(\"media_nav\");\n    }\n\n    if (!keepSource) {\n      searchParams.delete(\"media_source\");\n    }\n\n    return searchParams;\n  };\n\n  _stashLastSearchParams = location => {\n    const searchParams = new URLSearchParams(location.search);\n\n    this._stashedParams = {};\n    this._stashedSource = null;\n\n    const source = this.getUrlMediaSource(location);\n\n    // HACK for now do not stash favorite search, since that ends up being a source\n    // we do not reveal in the media browser UX. Revisit the rules here when we have a\n    // proper favorites browser. Then, we should have two separate stashes.\n    if (source === \"favorites\") return;\n    this._stashedSource = source;\n\n    for (const param of SEARCH_CONTEXT_PARAMS) {\n      const value = searchParams.get(param);\n\n      if (value) {\n        this._stashedParams[param] = value;\n      }\n    }\n  };\n\n  clearStashedQuery = () => {\n    if (!this._stashedParams) return;\n    delete this._stashedParams.q;\n  };\n\n  sourceNavigate = source => {\n    this._sourceNavigate(source, false, true);\n  };\n\n  sourceNavigateToDefaultSource = () => {\n    this._sourceNavigate(this._stashedSource ? this._stashedSource : SOURCES[0], false, true);\n  };\n\n  sourceNavigateWithNoNav = source => {\n    this._sourceNavigate(source, true, false);\n  };\n\n  _sourceNavigate = async (source, hideNav, useLastStashedParams) => {\n    const currentQuery = new URLSearchParams(this.history.location.search).get(\"q\");\n    const searchParams = this.getSearchClearedSearchParams(this.history.location);\n\n    if (currentQuery) {\n      searchParams.set(\"q\", currentQuery);\n    } else {\n      if (useLastStashedParams && this._stashedParams) {\n        for (const param of SEARCH_CONTEXT_PARAMS) {\n          const value = this._stashedParams[param];\n\n          // Only q param is compatible across sources, so keep it if is stashed.\n          const useValue = param === \"q\" || this._stashedSource === source;\n\n          if (value && useValue) {\n            searchParams.set(param, value);\n          }\n        }\n      } else {\n        if (source === \"avatars\") {\n          const hasAccountWithAvatars = await this._hasAccountWithAvatars();\n          searchParams.set(\"filter\", hasAccountWithAvatars ? \"my-avatars\" : \"featured\");\n        } else if (MEDIA_SOURCE_DEFAULT_FILTERS[source]) {\n          searchParams.set(\"filter\", MEDIA_SOURCE_DEFAULT_FILTERS[source]);\n        }\n      }\n    }\n\n    this._stashedParams = null;\n    this._stashedSource = null;\n\n    if (hideNav) {\n      searchParams.set(\"media_nav\", \"false\");\n    }\n\n    if (process.env.RETICULUM_SERVER && document.location.host !== process.env.RETICULUM_SERVER) {\n      searchParams.set(\"media_source\", source);\n      pushHistoryPath(this.history, this.history.location.pathname, searchParams.toString());\n    } else {\n      pushHistoryPath(this.history, withSlug(this.history.location, `/media/${source}`), searchParams.toString());\n    }\n  };\n\n  _hasAccountWithAvatars = async () => {\n    const { credentialsAccountId } = window.APP.store;\n    if (!credentialsAccountId) return false;\n\n    const searchParams = new URLSearchParams();\n    const source = \"avatars\";\n    searchParams.set(\"source\", source);\n    searchParams.set(\"user\", credentialsAccountId);\n    const result = await fetchReticulumAuthenticated(`/api/v1/media/search?${searchParams.toString()}`);\n    return !!(result && result.entries) && result.entries.length > 0;\n  };\n\n  getUrlMediaSource = location => {\n    const { search } = location;\n    const urlParams = new URLSearchParams(search);\n    const pathname = sluglessPath(location);\n\n    if (!pathname.startsWith(\"/media\") && !urlParams.get(\"media_source\")) return null;\n    return urlParams.get(\"media_source\") || pathname.substring(7);\n  };\n\n  pushExitMediaBrowserHistory = (history, stashLastSearchParams = true) => {\n    if (!history) history = this.history;\n\n    if (stashLastSearchParams) this._stashLastSearchParams(history.location);\n\n    const { pathname } = history.location;\n    const hasMediaPath = sluglessPath(history.location).startsWith(\"/media\");\n    pushHistoryPath(\n      history,\n      hasMediaPath ? withSlug(history.location, \"/\") : pathname,\n      this.getSearchClearedSearchParams(history.location).toString()\n    );\n    this.dispatchEvent(new CustomEvent(\"media-exit\"));\n  };\n}\n","export const waitForEvent = function(eventName, eventObj) {\n  return new Promise(resolve => {\n    eventObj.addEventListener(eventName, resolve, { once: true });\n  });\n};\n\nexport const waitForDOMContentLoaded = function() {\n  if (document.readyState === \"complete\" || document.readyState === \"loaded\" || document.readyState === \"interactive\") {\n    return Promise.resolve(null);\n  } else {\n    return waitForEvent(\"DOMContentLoaded\", window);\n  }\n};\n","import nextTick from \"../utils/next-tick\";\nimport { mapMaterials } from \"../utils/material-utils\";\nimport SketchfabZipWorker from \"../workers/sketchfab-zip.worker.js\";\nimport MobileStandardMaterial from \"../materials/MobileStandardMaterial\";\nimport { textureLoader } from \"../utils/media-utils\";\nimport { getCustomGLTFParserURLResolver } from \"../utils/media-url-utils\";\nimport { promisifyWorker } from \"../utils/promisify-worker.js\";\nimport { MeshBVH, acceleratedRaycast } from \"three-mesh-bvh\";\nimport { disposeNode } from \"../utils/three-utils\";\n\nTHREE.Mesh.prototype.raycast = acceleratedRaycast;\n\nclass GLTFCache {\n  cache = new Map();\n\n  set(src, gltf) {\n    this.cache.set(src, {\n      gltf,\n      count: 0\n    });\n    return this.retain(src);\n  }\n\n  has(src) {\n    return this.cache.has(src);\n  }\n\n  get(src) {\n    return this.cache.get(src);\n  }\n\n  retain(src) {\n    const cacheItem = this.cache.get(src);\n    cacheItem.count++;\n    return cacheItem;\n  }\n\n  release(src) {\n    const cacheItem = this.cache.get(src);\n\n    if (!cacheItem) {\n      console.error(`Releasing uncached gltf ${src}`);\n      return;\n    }\n\n    cacheItem.count--;\n    if (cacheItem.count <= 0) {\n      cacheItem.gltf.scene.traverse(disposeNode);\n      this.cache.delete(src);\n    }\n  }\n}\nconst gltfCache = new GLTFCache();\nconst inflightGltfs = new Map();\n\nconst extractZipFile = promisifyWorker(new SketchfabZipWorker());\n\nfunction defaultInflator(el, componentName, componentData) {\n  if (!AFRAME.components[componentName]) {\n    throw new Error(`Inflator failed. \"${componentName}\" component does not exist.`);\n  }\n  if (AFRAME.components[componentName].multiple && Array.isArray(componentData)) {\n    for (let i = 0; i < componentData.length; i++) {\n      el.setAttribute(componentName + \"__\" + i, componentData[i]);\n    }\n  } else {\n    el.setAttribute(componentName, componentData);\n  }\n}\n\nAFRAME.GLTFModelPlus = {\n  // eslint-disable-next-line no-unused-vars\n  components: {},\n  registerComponent(componentKey, componentName, inflator) {\n    inflator = inflator || defaultInflator;\n    AFRAME.GLTFModelPlus.components[componentKey] = { inflator, componentName };\n  }\n};\n\nfunction parallelTraverse(a, b, callback) {\n  callback(a, b);\n\n  for (let i = 0; i < a.children.length; i++) {\n    parallelTraverse(a.children[i], b.children[i], callback);\n  }\n}\n\nfunction generateMeshBVH(object3D) {\n  object3D.traverse(obj => {\n    // note that we might already have a bounds tree if this was a clone of an object with one\n    const hasBufferGeometry = obj.isMesh && obj.geometry.isBufferGeometry;\n    const hasBoundsTree = hasBufferGeometry && obj.geometry.boundsTree;\n    if (hasBufferGeometry && !hasBoundsTree && obj.geometry.attributes.position) {\n      const geo = obj.geometry;\n      const triCount = geo.index ? geo.index.count / 3 : geo.attributes.position.count / 3;\n      // only bother using memory and time making a BVH if there are a reasonable number of tris,\n      // and if there are too many it's too painful and large to tolerate doing it (at least until\n      // we put this in a web worker)\n      if (triCount > 1000 && triCount < 1000000) {\n        // note that bounds tree construction creates an index as a side effect if one doesn't already exist\n        geo.boundsTree = new MeshBVH(obj.geometry, { strategy: 0, maxDepth: 30 });\n      }\n    }\n  });\n}\n\n// Modified version of Don McCurdy's AnimationUtils.clone\n// https://github.com/mrdoob/three.js/pull/14494\nfunction cloneSkinnedMesh(source) {\n  const cloneLookup = new Map();\n\n  const clone = source.clone();\n\n  parallelTraverse(source, clone, function(sourceNode, clonedNode) {\n    cloneLookup.set(sourceNode, clonedNode);\n    if (sourceNode.isMesh && sourceNode.geometry.boundsTree) {\n      clonedNode.geometry.boundsTree = sourceNode.geometry.boundsTree;\n    }\n  });\n\n  source.traverse(function(sourceMesh) {\n    if (!sourceMesh.isSkinnedMesh) return;\n\n    const sourceBones = sourceMesh.skeleton.bones;\n    const clonedMesh = cloneLookup.get(sourceMesh);\n\n    clonedMesh.skeleton = sourceMesh.skeleton.clone();\n\n    clonedMesh.skeleton.bones = sourceBones.map(function(sourceBone) {\n      if (!cloneLookup.has(sourceBone)) {\n        throw new Error(\"Required bones are not descendants of the given object.\");\n      }\n\n      return cloneLookup.get(sourceBone);\n    });\n\n    clonedMesh.bind(clonedMesh.skeleton, sourceMesh.bindMatrix);\n  });\n\n  return clone;\n}\n\nfunction cloneGltf(gltf) {\n  return {\n    animations: gltf.animations,\n    scene: cloneSkinnedMesh(gltf.scene)\n  };\n}\n\nfunction getHubsComponents(node) {\n  const hubsComponents =\n    node.userData.gltfExtensions &&\n    (node.userData.gltfExtensions.MOZ_hubs_components || node.userData.gltfExtensions.HUBS_components);\n\n  // We can remove support for legacy components when our environment, avatar and interactable models are\n  // updated to match Spoke output.\n  const legacyComponents = node.userData.components;\n\n  return hubsComponents || legacyComponents;\n}\n\n/// Walks the tree of three.js objects starting at the given node, using the GLTF data\n/// and template data to construct A-Frame entities and components when necessary.\n/// (It's unnecessary to construct entities for subtrees that have no component data\n/// or templates associated with any of their nodes.)\n///\n/// Returns the A-Frame entity associated with the given node, if one was constructed.\nconst inflateEntities = function(indexToEntityMap, node, templates, isRoot, modelToWorldScale = 1) {\n  // TODO: Remove this once we update the legacy avatars to the new node names\n  if (node.name === \"Chest\") {\n    node.name = \"Spine\";\n  } else if (node.name === \"Root Scene\") {\n    node.name = \"AvatarRoot\";\n  } else if (node.name === \"Bot_Skinned\") {\n    node.name = \"AvatarMesh\";\n  }\n\n  // inflate subtrees first so that we can determine whether or not this node needs to be inflated\n  const childEntities = [];\n  const children = node.children.slice(0); // setObject3D mutates the node's parent, so we have to copy\n  for (const child of children) {\n    const el = inflateEntities(indexToEntityMap, child, templates);\n    if (el) {\n      childEntities.push(el);\n    }\n  }\n\n  const entityComponents = getHubsComponents(node);\n\n  const nodeHasBehavior = !!entityComponents || node.name in templates;\n  if (!nodeHasBehavior && !childEntities.length && !isRoot) {\n    return null; // we don't need an entity for this node\n  }\n\n  const el = document.createElement(\"a-entity\");\n  el.append.apply(el, childEntities);\n\n  // Remove invalid CSS class name characters.\n  const className = (node.name || node.uuid).replace(/[^\\w-]/g, \"\");\n  el.classList.add(className);\n\n  // AFRAME rotation component expects rotations in YXZ, convert it\n  if (node.rotation.order !== \"YXZ\") {\n    node.rotation.setFromQuaternion(node.quaternion, \"YXZ\");\n  }\n\n  // Copy over the object's transform to the THREE.Group and reset the actual transform of the Object3D\n  // all updates to the object should be done through the THREE.Group wrapper\n  el.object3D.position.copy(node.position);\n  el.object3D.rotation.copy(node.rotation);\n  el.object3D.scale.copy(node.scale).multiplyScalar(modelToWorldScale);\n  el.object3D.matrixNeedsUpdate = true;\n\n  node.matrixAutoUpdate = false;\n  node.matrix.identity();\n  node.matrix.decompose(node.position, node.rotation, node.scale);\n\n  el.setObject3D(node.type.toLowerCase(), node);\n  if (entityComponents && \"nav-mesh\" in entityComponents) {\n    el.setObject3D(\"mesh\", node);\n  }\n\n  // Set the name of the `THREE.Group` to match the name of the node,\n  // so that `THREE.PropertyBinding` will find (and later animate)\n  // the group. See `PropertyBinding.findNode`:\n  // https://github.com/mrdoob/three.js/blob/dev/src/animation/PropertyBinding.js#L211\n  el.object3D.name = node.name;\n  if (node.animations) {\n    // Pass animations up to the group object so that when we can pass the group as\n    // the optional root in `THREE.AnimationMixer.clipAction` and use the hierarchy\n    // preserved under the group (but not the node). Otherwise `clipArray` will be\n    // `null` in `THREE.AnimationClip.findByName`.\n    node.parent.animations = node.animations;\n  }\n\n  const gltfIndex = node.userData.gltfIndex;\n  if (gltfIndex !== undefined) {\n    indexToEntityMap[gltfIndex] = el;\n  }\n\n  return el;\n};\n\nfunction inflateComponents(inflatedEntity, indexToEntityMap) {\n  inflatedEntity.object3D.traverse(object3D => {\n    const entityComponents = getHubsComponents(object3D);\n    const el = object3D.el;\n\n    if (entityComponents && el) {\n      for (const prop in entityComponents) {\n        if (entityComponents.hasOwnProperty(prop) && AFRAME.GLTFModelPlus.components.hasOwnProperty(prop)) {\n          const { componentName, inflator } = AFRAME.GLTFModelPlus.components[prop];\n          inflator(el, componentName, entityComponents[prop], entityComponents, indexToEntityMap);\n        }\n      }\n    }\n  });\n}\n\nfunction attachTemplate(root, name, templateRoot) {\n  const targetEls = root.querySelectorAll(\".\" + name);\n  for (const el of targetEls) {\n    const root = templateRoot.cloneNode(true);\n    // Merge root element attributes with the target element\n    for (const { name, value } of root.attributes) {\n      el.setAttribute(name, value);\n    }\n\n    // Append all child elements\n    while (root.children.length > 0) {\n      el.appendChild(root.children[0]);\n    }\n  }\n}\n\nfunction runMigration(version, json) {\n  if (version < 2) {\n    //old heightfields will be on the same node as the nav-mesh, delete those\n    const oldHeightfieldNode = json.nodes.find(node => {\n      let components = null;\n      if (node.extensions && node.extensions.MOZ_hubs_components) {\n        components = node.extensions.MOZ_hubs_components;\n      } else if (node.extensions && node.extensions.HUBS_components) {\n        components = node.extensions.HUBS_components;\n      }\n      return components && components.heightfield && components[\"nav-mesh\"];\n    });\n    if (oldHeightfieldNode) {\n      if (oldHeightfieldNode.extensions.MOZ_hubs_components) {\n        delete oldHeightfieldNode.extensions.MOZ_hubs_components.heightfield;\n      } else if (oldHeightfieldNode.extensions.HUBS_components) {\n        delete oldHeightfieldNode.extensions.HUBS_components.heightfield;\n      }\n    }\n  }\n}\n\nexport async function loadGLTF(src, contentType, preferredTechnique, onProgress, jsonPreprocessor) {\n  let gltfUrl = src;\n  let fileMap;\n\n  if (contentType.includes(\"model/gltf+zip\") || contentType.includes(\"application/x-zip-compressed\")) {\n    fileMap = await extractZipFile(gltfUrl);\n    gltfUrl = fileMap[\"scene.gtlf\"];\n  }\n\n  const loadingManager = new THREE.LoadingManager();\n  loadingManager.setURLModifier(getCustomGLTFParserURLResolver(gltfUrl));\n  const gltfLoader = new THREE.GLTFLoader(loadingManager);\n\n  const parser = await new Promise((resolve, reject) => gltfLoader.createParser(gltfUrl, resolve, onProgress, reject));\n\n  parser.textureLoader = textureLoader;\n\n  if (jsonPreprocessor) {\n    parser.json = jsonPreprocessor(parser.json);\n  }\n\n  let version = 0;\n  if (\n    parser.json.extensions &&\n    parser.json.extensions.MOZ_hubs_components &&\n    parser.json.extensions.MOZ_hubs_components.hasOwnProperty(\"version\")\n  ) {\n    version = parser.json.extensions.MOZ_hubs_components.version;\n  }\n  runMigration(version, parser.json);\n\n  const materials = parser.json.materials;\n  if (materials) {\n    for (let i = 0; i < materials.length; i++) {\n      const material = materials[i];\n\n      if (\n        material.extensions &&\n        material.extensions.MOZ_alt_materials &&\n        material.extensions.MOZ_alt_materials[preferredTechnique] !== undefined\n      ) {\n        const altMaterialIndex = material.extensions.MOZ_alt_materials[preferredTechnique];\n        materials[i] = materials[altMaterialIndex];\n      }\n    }\n  }\n\n  const nodes = parser.json.nodes;\n\n  if (nodes) {\n    for (let i = 0; i < nodes.length; i++) {\n      const node = nodes[i];\n\n      if (!node.extras) {\n        node.extras = {};\n      }\n\n      node.extras.gltfIndex = i;\n    }\n  }\n\n  const gltf = await new Promise(parser.parse.bind(parser));\n\n  gltf.scene.traverse(object => {\n    // GLTFLoader sets matrixAutoUpdate on animated objects, we want to keep the defaults\n    object.matrixAutoUpdate = THREE.Object3D.DefaultMatrixAutoUpdate;\n\n    object.material = mapMaterials(object, material => {\n      if (material.isMeshStandardMaterial && preferredTechnique === \"KHR_materials_unlit\") {\n        return MobileStandardMaterial.fromStandardMaterial(material);\n      }\n\n      return material;\n    });\n  });\n\n  if (fileMap) {\n    // The GLTF is now cached as a THREE object, we can get rid of the original blobs\n    Object.keys(fileMap).forEach(URL.revokeObjectURL);\n  }\n\n  return gltf;\n}\n\n/**\n * Loads a GLTF model, optionally recursively \"inflates\" the child nodes of a model into a-entities and sets\n * whitelisted components on them if defined in the node's extras.\n * @namespace gltf\n * @component gltf-model-plus\n */\nAFRAME.registerComponent(\"gltf-model-plus\", {\n  schema: {\n    src: { type: \"string\" },\n    contentType: { type: \"string\" },\n    useCache: { default: true },\n    inflate: { default: false },\n    batch: { default: false },\n    modelToWorldScale: { type: \"number\", default: 1 }\n  },\n\n  init() {\n    this.preferredTechnique =\n      window.APP && window.APP.quality === \"low\" ? \"KHR_materials_unlit\" : \"pbrMetallicRoughness\";\n\n    // This can be set externally if a consumer wants to do some node preprocssing.\n    this.jsonPreprocessor = null;\n\n    this.loadTemplates();\n  },\n\n  update() {\n    this.applySrc(this.data.src, this.data.contentType);\n  },\n\n  remove() {\n    if (this.data.batch && this.model) {\n      this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.removeObject(this.el.object3DMap.mesh);\n    }\n    if (this.data.src) {\n      gltfCache.release(this.data.src);\n    }\n  },\n\n  loadTemplates() {\n    this.templates = {};\n    this.el.querySelectorAll(\":scope > template\").forEach(templateEl => {\n      const root = document.importNode(templateEl.firstElementChild || templateEl.content.firstElementChild, true);\n      this.templates[templateEl.getAttribute(\"data-name\")] = root;\n    });\n  },\n\n  async loadModel(src, contentType, technique, useCache) {\n    if (useCache) {\n      if (gltfCache.has(src)) {\n        gltfCache.retain(src);\n        return cloneGltf(gltfCache.get(src).gltf);\n      } else {\n        if (inflightGltfs.has(src)) {\n          const gltf = await inflightGltfs.get(src);\n          gltfCache.retain(src);\n          return cloneGltf(gltf);\n        } else {\n          const promise = loadGLTF(src, contentType, technique, null, this.jsonPreprocessor);\n          inflightGltfs.set(src, promise);\n          const gltf = await promise;\n          inflightGltfs.delete(src);\n          gltfCache.set(src, gltf);\n          return cloneGltf(gltf);\n        }\n      }\n    } else {\n      return loadGLTF(src, contentType, technique, null, this.jsonPreprocessor);\n    }\n  },\n\n  async applySrc(src, contentType) {\n    try {\n      // If the src attribute is a selector, get the url from the asset item.\n      if (src && src.charAt(0) === \"#\") {\n        const assetEl = document.getElementById(src.substring(1));\n        src = assetEl.getAttribute(\"src\");\n      }\n\n      if (src === this.lastSrc) return;\n\n      const lastSrc = this.lastSrc;\n      this.lastSrc = src;\n\n      if (!src) {\n        if (this.inflatedEl) {\n          console.warn(\"gltf-model-plus set to an empty source, unloading inflated model.\");\n          this.disposeLastInflatedEl();\n        }\n        return;\n      }\n\n      this.el.emit(\"model-loading\");\n      const gltf = await this.loadModel(src, contentType, this.preferredTechnique, this.data.useCache);\n\n      // If we started loading something else already\n      // TODO: there should be a way to cancel loading instead\n      if (src != this.lastSrc) return;\n\n      // If we had inflated something already before, clean that up\n      this.disposeLastInflatedEl();\n\n      this.model = gltf.scene || gltf.scenes[0];\n      this.model.animations = gltf.animations;\n\n      if (this.data.batch) {\n        this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.addObject(this.model);\n      }\n\n      if (gltf.animations.length > 0) {\n        this.el.setAttribute(\"animation-mixer\", {});\n        this.el.components[\"animation-mixer\"].initMixer(gltf.animations);\n      } else {\n        generateMeshBVH(this.model);\n      }\n\n      const indexToEntityMap = {};\n\n      let object3DToSet = this.model;\n      if (\n        this.data.inflate &&\n        (this.inflatedEl = inflateEntities(\n          indexToEntityMap,\n          this.model,\n          this.templates,\n          true,\n          this.data.modelToWorldScale\n        ))\n      ) {\n        this.el.appendChild(this.inflatedEl);\n\n        object3DToSet = this.inflatedEl.object3D;\n        // TODO: Still don't fully understand the lifecycle here and how it differs between browsers, we should dig in more\n        // Wait one tick for the appended custom elements to be connected before attaching templates\n        await nextTick();\n        if (src != this.lastSrc) return; // TODO: there must be a nicer pattern for this\n\n        inflateComponents(this.inflatedEl, indexToEntityMap);\n\n        for (const name in this.templates) {\n          attachTemplate(this.el, name, this.templates[name]);\n        }\n      }\n\n      // The call to setObject3D below recursively clobbers any `el` backreferences to entities\n      // in the entire inflated entity graph to point to `object3DToSet`.\n      //\n      // We don't want those overwritten, since lots of code assumes `object3d.el` points to the relevant\n      // A-Frame entity for that three.js object, so we back them up and re-wire them here. If we didn't do\n      // this, all the `el` properties on these object3ds would point to the `object3DToSet` which is either\n      // the model or the root GLTF inflated entity.\n      const rewires = [];\n\n      object3DToSet.traverse(o => {\n        const el = o.el;\n        if (el) rewires.push(() => (o.el = el));\n      });\n\n      const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n\n      if (environmentMapComponent) {\n        environmentMapComponent.applyEnvironmentMap(object3DToSet);\n      }\n\n      if (lastSrc) {\n        gltfCache.release(lastSrc);\n      }\n      this.el.setObject3D(\"mesh\", object3DToSet);\n\n      rewires.forEach(f => f());\n\n      this.el.emit(\"model-loaded\", { format: \"gltf\", model: this.model });\n    } catch (e) {\n      gltfCache.release(src);\n      console.error(\"Failed to load glTF model\", e, this);\n      this.el.emit(\"model-error\", { format: \"gltf\", src });\n    }\n  },\n\n  disposeLastInflatedEl() {\n    if (this.inflatedEl) {\n      this.inflatedEl.parentNode.removeChild(this.inflatedEl);\n\n      this.inflatedEl.object3D.traverse(x => {\n        if (x.material && x.material.dispose) {\n          x.material.dispose();\n        }\n\n        if (x.geometry) {\n          if (x.geometry.dispose) {\n            x.geometry.dispose();\n          }\n\n          x.geometry.boundsTree = null;\n        }\n      });\n\n      delete this.inflatedEl;\n\n      this.el.removeAttribute(\"animation-mixer\");\n    }\n  }\n});\n","// Wrapper for a worker which accepts work items and responds with results.\n//\n// The worker must receive messages with data of the shape { id, payload }, and then respond\n// with messages containing matching IDs of the shape { id, result, err }.\n//\n// Returns a function that accepts a work item, sends it to the worker, and returns a promise that\n// will resolve with the result or reject with the error.\n//\nexport function promisifyWorker(worker) {\n  let nextItemId = 0;\n  const outstanding = {}; // item ID: { resolve, reject }\n\n  worker.onmessage = msg => {\n    const { id, result, err } = msg.data;\n    const handlers = outstanding[id];\n    if (handlers == null) {\n      console.error(`Unknown message with ID ${id} received from ${worker}.`);\n    } else {\n      delete outstanding[id];\n      if (err != null) {\n        handlers.reject(new Error(err));\n      } else {\n        handlers.resolve(result);\n      }\n    }\n  };\n\n  return function(data, transfer) {\n    const id = nextItemId++;\n    const promise = new Promise((resolve, reject) => {\n      outstanding[id] = { resolve, reject };\n    });\n    worker.postMessage({ id, payload: data }, transfer);\n    return promise;\n  };\n}\n","export const paths = {};\npaths.noop = \"/noop\";\npaths.actions = {};\npaths.actions.log = \"/actions/log\";\npaths.actions.toggleScreenShare = \"/actions/toggleScreenShare\";\npaths.actions.snapRotateLeft = \"/actions/snapRotateLeft\";\npaths.actions.snapRotateRight = \"/actions/snapRotateRight\";\npaths.actions.angularVelocity = \"/actions/angularVelocity\";\npaths.actions.logDebugFrame = \"/actions/logDebugFrame\";\npaths.actions.logInteractionState = \"/actions/logInteractionState\";\npaths.actions.cameraDelta = \"/actions/cameraDelta\";\npaths.actions.lobbyCameraDelta = \"/actions/lobbyCameraDelta\";\npaths.actions.characterAcceleration = \"/actions/characterAcceleration\";\npaths.actions.boost = \"/actions/boost\";\npaths.actions.startGazeTeleport = \"/actions/startTeleport\";\npaths.actions.stopGazeTeleport = \"/actions/stopTeleport\";\npaths.actions.spawnPen = \"/actions/spawnPen\";\npaths.actions.ensureFrozen = \"/actions/ensureFrozen\";\npaths.actions.toggleFreeze = \"/actions/toggleFreeze\";\npaths.actions.thaw = \"/actions/thaw\";\npaths.actions.muteMic = \"/actions/muteMic\";\npaths.actions.toggleFlying = \"/actions/toggleFlying\";\npaths.actions.enableMegaphone = \"/actions/enableMegaphone\";\npaths.actions.focusChat = \"/actions/focusChat\";\npaths.actions.focusChatCommand = \"/actions/focusChatCommand\";\npaths.actions.toggleCamera = \"/actions/toggleCamera\";\npaths.actions.takeSnapshot = \"/actions/takeSnapshot\";\npaths.actions.mediaExit = \"/actions/mediaExit\";\npaths.actions.mediaSearch1 = \"/actions/mediaSearch1\";\npaths.actions.mediaSearch2 = \"/actions/mediaSearch2\";\npaths.actions.mediaSearch3 = \"/actions/mediaSearch3\";\npaths.actions.mediaSearch4 = \"/actions/mediaSearch4\";\npaths.actions.mediaSearch5 = \"/actions/mediaSearch5\";\npaths.actions.mediaSearch6 = \"/actions/mediaSearch6\";\npaths.actions.mediaSearch7 = \"/actions/mediaSearch7\";\npaths.actions.mediaSearch8 = \"/actions/mediaSearch8\";\npaths.actions.transformModifier = \"/actions/transformModifier\";\npaths.actions.rayObjectRotation = \"/actions/rayObjectRotation\";\npaths.actions.cursor = {};\npaths.actions.cursor.pose = \"/actions/cursorPose\";\npaths.actions.cursor.hideLine = \"/actions/cursorHideLine\";\npaths.actions.cursor.grab = \"/actions/cursorGrab\";\npaths.actions.cursor.drop = \"/actions/cursorDrop\";\npaths.actions.cursor.modDelta = \"/actions/cursorModDelta\";\npaths.actions.cursor.startDrawing = \"/actions/cursorStartDrawing\";\npaths.actions.cursor.stopDrawing = \"/actions/cursorStopDrawing\";\npaths.actions.cursor.undoDrawing = \"/actions/cursorUndoDrawing\";\npaths.actions.cursor.penNextColor = \"/actions/cursorPenNextColor\";\npaths.actions.cursor.penPrevColor = \"/actions/cursorPenPrevColor\";\npaths.actions.cursor.scalePenTip = \"/actions/cursorScalePenTip\";\npaths.actions.cursor.scaleGrabbedGrabbable = \"/actions/cursorScaleGrabbedGrabbable\";\npaths.actions.cursor.mediaVolumeMod = \"/actions/cursor/mediaVolumeMod\";\npaths.actions.cursor.takeSnapshot = \"/actions/cursorTakeSnapshot\";\npaths.actions.pen = {};\npaths.actions.pen.remove = \"/actions/pen/remove\";\npaths.actions.rightHand = {};\npaths.actions.rightHand.matrix = \"/actions/rightHand/matrix\";\npaths.actions.rightHand.pose = \"/actions/rightHandPose\";\npaths.actions.rightHand.grab = \"/actions/rightHandGrab\";\npaths.actions.rightHand.drop = \"/actions/rightHandDrop\";\npaths.actions.rightHand.modDelta = \"/actions/rightHandModDelta\";\npaths.actions.rightHand.startDrawing = \"/actions/rightHandStartDrawing\";\npaths.actions.rightHand.stopDrawing = \"/actions/rightHandStopDrawing\";\npaths.actions.rightHand.undoDrawing = \"/actions/rightHandUndoDrawing\";\npaths.actions.rightHand.switchDrawMode = \"/actions/rightHandSwitchDrawMode\";\npaths.actions.rightHand.penNextColor = \"/actions/rightHandPenNextColor\";\npaths.actions.rightHand.penPrevColor = \"/actions/rightHandPenPrevColor\";\npaths.actions.rightHand.scalePenTip = \"/actions/rightHandScalePenTip\";\npaths.actions.rightHand.startTeleport = \"/actions/rightHand/startTeleport\";\npaths.actions.rightHand.stopTeleport = \"/actions/rightHand/stopTeleport\";\npaths.actions.rightHand.takeSnapshot = \"/actions/rightHandTakeSnapshot\";\npaths.actions.rightHand.thumb = \"/actions/rightHand/thumbDown\";\npaths.actions.rightHand.index = \"/actions/rightHand/indexDown\";\npaths.actions.rightHand.middleRingPinky = \"/actions/rightHand/middleRingPinkyDown\";\npaths.actions.leftHand = {};\npaths.actions.leftHand.matrix = \"/actions/leftHand/matrix\";\npaths.actions.leftHand.pose = \"/actions/leftHandPose\";\npaths.actions.leftHand.grab = \"/actions/leftHandGrab\";\npaths.actions.leftHand.drop = \"/actions/leftHandDrop\";\npaths.actions.leftHand.modDelta = \"/actions/leftHandModDelta\";\npaths.actions.leftHand.startDrawing = \"/actions/leftHandStartDrawing\";\npaths.actions.leftHand.stopDrawing = \"/actions/leftHandStopDrawing\";\npaths.actions.leftHand.undoDrawing = \"/actions/leftHandUndoDrawing\";\npaths.actions.leftHand.switchDrawMode = \"/actions/leftHandSwitchDrawMode\";\npaths.actions.leftHand.penNextColor = \"/actions/leftHandPenNextColor\";\npaths.actions.leftHand.penPrevColor = \"/actions/leftHandPenPrevColor\";\npaths.actions.leftHand.scalePenTip = \"/actions/leftHandScalePenTip\";\npaths.actions.leftHand.startTeleport = \"/actions/leftHand/startTeleport\";\npaths.actions.leftHand.stopTeleport = \"/actions/leftHand/stopTeleport\";\npaths.actions.leftHand.takeSnapshot = \"/actions/leftHandTakeSnapshot\";\npaths.actions.leftHand.thumb = \"/actions/leftHand/thumbDown\";\npaths.actions.leftHand.index = \"/actions/leftHand/indexDown\";\npaths.actions.leftHand.middleRingPinky = \"/actions/leftHand/middleRingPinkyDown\";\npaths.actions.camera = {};\npaths.actions.camera.exitMirror = \"/actions/cameraExitMirror\";\npaths.haptics = {};\npaths.haptics.actuators = {};\npaths.haptics.actuators.left = \"/haptics/actuators/left\";\npaths.haptics.actuators.right = \"/haptics/actuators/right\";\n\npaths.device = {};\npaths.device.mouse = {};\npaths.device.mouse.coords = \"/device/mouse/coords\";\npaths.device.mouse.movementXY = \"/device/mouse/movementXY\";\npaths.device.mouse.buttonLeft = \"/device/mouse/buttonLeft\";\npaths.device.mouse.buttonRight = \"/device/mouse/buttonRight\";\npaths.device.mouse.wheel = \"/device/mouse/wheel\";\npaths.device.smartMouse = {};\npaths.device.smartMouse.cursorPose = \"/device/smartMouse/cursorPose\";\npaths.device.smartMouse.cameraDelta = \"/device/smartMouse/cameraDelta\";\npaths.device.touchscreen = {};\npaths.device.touchscreen.cursorPose = \"/device/touchscreen/cursorPose\";\npaths.device.touchscreen.touchCameraDelta = \"/device/touchscreen/touchCameraDelta\";\npaths.device.touchscreen.gyroCameraDelta = \"/device/touchscreen/gyroCameraDelta\";\npaths.device.touchscreen.cameraDelta = \"/device/touchscreen/cameraDelta\";\npaths.device.touchscreen.pinch = {};\npaths.device.touchscreen.pinch.delta = \"/device/touchscreen/pinch/delta\";\npaths.device.touchscreen.pinch.initialDistance = \"/device/touchscreen/pinch/initialDistance\";\npaths.device.touchscreen.pinch.currentDistance = \"/device/touchscreen/pinch/currentDistance\";\npaths.device.touchscreen.isTouching = \"/device/touchscreen/isTouching\";\npaths.device.touchscreen.isTouchingGrabbable = \"/device/touchscreen/isTouchingGrabbable\";\npaths.device.touchscreen.tap1 = \"/device/touchscreen/tap1\";\npaths.device.touchscreen.tap2 = \"/device/touchscreen/tap2\";\npaths.device.touchscreen.tap3 = \"/device/touchscreen/tap3\";\npaths.device.touchscreen.tap4 = \"/device/touchscreen/tap4\";\npaths.device.touchscreen.tap5 = \"/device/touchscreen/tap5\";\npaths.device.gyro = {};\npaths.device.gyro.averageDeltaX = \"/device/gyro/averageDeltaX\";\npaths.device.gyro.averageDeltaY = \"/device/gyro/averageDeltaY\";\npaths.device.hud = {};\npaths.device.hud.penButton = \"/device/hud/penButton\";\n\npaths.device.keyboard = {\n  map: new Map(),\n  key: function(k) {\n    let path = this.map.get(k);\n    if (path) {\n      return path;\n    }\n    path = `/device/keyboard/${k.toLowerCase()}`;\n    this.map.set(k, path);\n    return path;\n  }\n};\n\npaths.device.gamepad = gamepadIndex => ({\n  button: buttonIndex => ({\n    pressed: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/pressed`,\n    touched: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/touched`,\n    value: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/value`\n  }),\n  axis: axisIndex => `/device/gamepad/${gamepadIndex}/axis/${axisIndex}`\n});\n\nconst xbox = \"/device/xbox/\";\npaths.device.xbox = {\n  v: name => `/vars/xbox/${name}`,\n  button: buttonName => ({\n    pressed: `${xbox}button/${buttonName}/pressed`,\n    touched: `${xbox}button/${buttonName}/touched`,\n    value: `${xbox}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${xbox}axis/${axisName}`;\n  },\n  axesSum: `${xbox}axis/sum`\n};\n\npaths.device.oculusgo = {\n  // TODO remove these in favor of the direct accessors\n  button: buttonName => ({\n    pressed: `/device/oculusgo/button/${buttonName}/pressed`,\n    touched: `/device/oculusgo/button/${buttonName}/touched`,\n    value: `/device/oculusgo/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/oculusgo/axis/${axisName}`;\n  },\n  //\n  trigger: {\n    pressed: \"/device/oculusgo/button/trigger/pressed\",\n    touched: \"/device/oculusgo/button/trigger/touched\",\n    value: \"/device/oculusgo/button/trigger/value\"\n  },\n  touchpad: {\n    pressed: \"/device/oculusgo/button/touchpad/pressed\",\n    touched: \"/device/oculusgo/button/touchpad/touched\",\n    value: \"/device/oculusgo/button/touchpad/value\",\n    axisX: \"/device/oculusgo/axis/touchpadX\",\n    axisY: \"/device/oculusgo/axis/touchpadY\"\n  },\n  pose: \"/device/oculusgo/pose\",\n  matrix: \"/device/oculusgo/matrix\",\n  v: name => {\n    return `/vars/oculusgo/${name}`;\n  }\n};\n\nconst gearVRController = \"/device/gearVRController/\";\npaths.device.gearVRController = {\n  button: buttonName => ({\n    pressed: `${gearVRController}button/${buttonName}/pressed`,\n    touched: `${gearVRController}button/${buttonName}/touched`,\n    value: `${gearVRController}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${gearVRController}axis/${axisName}`;\n  },\n  pose: `${gearVRController}pose`,\n  matrix: `${gearVRController}matrix`,\n  v: name => {\n    return `/vars/gearVRController/${name}`;\n  }\n};\n\nconst daydream = \"/device/daydream/\";\npaths.device.daydream = {\n  button: buttonName => ({\n    pressed: `${daydream}button/${buttonName}/pressed`,\n    touched: `${daydream}button/${buttonName}/touched`,\n    value: `${daydream}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${daydream}axis/${axisName}`;\n  },\n  pose: `${daydream}pose`,\n  matrix: `${daydream}matrix`\n};\n\nconst rightOculusTouch = \"/device/rightOculusTouch/\";\npaths.device.rightOculusTouch = {\n  button: buttonName => ({\n    pressed: `${rightOculusTouch}button/${buttonName}/pressed`,\n    touched: `${rightOculusTouch}button/${buttonName}/touched`,\n    value: `${rightOculusTouch}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${rightOculusTouch}axis/${axisName}`;\n  },\n  axesSum: `${rightOculusTouch}axis/sum`,\n  pose: `${rightOculusTouch}pose`,\n  matrix: `${rightOculusTouch}matrix`\n};\n\nconst leftOculusTouch = \"/device/leftOculusTouch/\";\npaths.device.leftOculusTouch = {\n  button: buttonName => ({\n    pressed: `${leftOculusTouch}button/${buttonName}/pressed`,\n    touched: `${leftOculusTouch}button/${buttonName}/touched`,\n    value: `${leftOculusTouch}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${leftOculusTouch}axis/${axisName}`;\n  },\n  axesSum: `${leftOculusTouch}axis/sum`,\n  pose: `${leftOculusTouch}pose`,\n  matrix: `${leftOculusTouch}matrix`\n};\n\npaths.device.vive = {};\npaths.device.vive.left = {\n  button: buttonName => ({\n    pressed: `/device/vive/left/button/${buttonName}/pressed`,\n    touched: `/device/vive/left/button/${buttonName}/touched`,\n    value: `/device/vive/left/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/vive/left/axis/${axisName}`;\n  },\n  axesSum: \"/device/vive/left/axis/sum\",\n  pose: `/device/vive/left/pose`,\n  matrix: `/device/vive/left/matrix`\n};\npaths.device.vive.right = {\n  button: buttonName => ({\n    pressed: `/device/vive/right/button/${buttonName}/pressed`,\n    touched: `/device/vive/right/button/${buttonName}/touched`,\n    value: `/device/vive/right/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/vive/right/axis/${axisName}`;\n  },\n  axesSum: \"/device/vive/right/axis/sum\",\n  pose: `/device/vive/right/pose`,\n  matrix: `/device/vive/right/matrix`\n};\n\nfunction button(device, side, name) {\n  return {\n    pressed: `${device}${side}/button/${name}/pressed`,\n    touched: `${device}${side}/button/${name}/touched`,\n    value: `${device}${side}/button/${name}/value`\n  };\n}\n\nfunction axes(device, side, name) {\n  return {\n    axisX: `${device}${side}/axis/${name}X`,\n    axisY: `${device}${side}/axis/${name}Y`\n  };\n}\n\nfunction wmrController(side) {\n  const wmr = \"/device/wmr/\";\n  return {\n    touchpad: {\n      ...button(wmr, side, \"touchpad\"),\n      ...axes(wmr, side, \"touchpad\")\n    },\n    trigger: button(wmr, side, \"trigger\"),\n    grip: button(wmr, side, \"grip\"),\n    menu: button(wmr, side, \"menu\"),\n    joystick: axes(wmr, side, \"joystick\"),\n    pose: `${wmr}${side}/pose`,\n    matrix: `${wmr}${side}/matrix`\n  };\n}\npaths.device.wmr = {};\npaths.device.wmr.v = name => `/vars/wmr/${name}`;\npaths.device.wmr.k = name => `/vars/wmr/keyboard/${name}`;\npaths.device.wmr.left = wmrController(\"left\");\npaths.device.wmr.right = wmrController(\"right\");\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loading-text\":\"scene__loading-text__2zWvK\",\"loadingText\":\"scene__loading-text__2zWvK\"};","import { forEachMaterial } from \"../utils/material-utils\";\nimport { showHoverEffect } from \"../utils/permissions-utils\";\n\nconst interactorOneTransform = [];\nconst interactorTwoTransform = [];\n\nexport const validMaterials = [\"MeshStandardMaterial\", \"MeshBasicMaterial\", \"MobileStandardMaterial\"];\n/**\n * Applies effects to a hoverable based on hover state.\n * @namespace interactables\n * @component hoverable-visuals\n */\nAFRAME.registerComponent(\"hoverable-visuals\", {\n  schema: {\n    enableSweepingEffect: { type: \"boolean\", default: true }\n  },\n  init() {\n    // uniforms and boundingSphere are set from the component responsible for loading the mesh.\n    this.uniforms = null;\n    this.boundingSphere = new THREE.Sphere();\n\n    this.sweepParams = [0, 0];\n  },\n  remove() {\n    this.uniforms = null;\n    this.boundingBox = null;\n\n    // Used when the object is batched\n    const batchManagerSystem = AFRAME.scenes[0].systems[\"hubs-systems\"].batchManagerSystem;\n    this.el.object3D.traverse(object => {\n      if (!object.material) return;\n      forEachMaterial(object, material => {\n        if (\n          !validMaterials.includes(material.type) ||\n          object.el.classList.contains(\"ui\") ||\n          object.el.classList.contains(\"hud\") ||\n          object.el.getAttribute(\"text-button\")\n        )\n          return;\n\n        batchManagerSystem.meshToEl.delete(object);\n      });\n    });\n  },\n  tick(time) {\n    if (!this.uniforms || !this.uniforms.length) return;\n\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n    const showEffect = showHoverEffect(this.el);\n\n    let interactorOne, interactorTwo;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    if (interaction.state.leftHand.hovered === this.el && !interaction.state.leftHand.held) {\n      interactorOne = interaction.options.leftHand.entity.object3D;\n    }\n    if (interaction.state.rightRemote.hovered === this.el && !interaction.state.rightRemote.held) {\n      interactorTwo = interaction.options.rightRemote.entity.object3D;\n    }\n    if (interaction.state.rightHand.hovered === this.el && !interaction.state.rightHand.held) {\n      interactorTwo = interaction.options.rightHand.entity.object3D;\n    }\n\n    if (interactorOne) {\n      interactorOne.matrixWorld.toArray(interactorOneTransform);\n    }\n    if (interactorTwo) {\n      interactorTwo.matrixWorld.toArray(interactorTwoTransform);\n    }\n\n    if (interactorOne || interactorTwo || isFrozen) {\n      const worldY = this.el.object3D.matrixWorld.elements[13];\n      const scaledRadius = this.el.object3D.scale.y * this.boundingSphere.radius;\n      this.sweepParams[0] = worldY - scaledRadius;\n      this.sweepParams[1] = worldY + scaledRadius;\n    }\n\n    for (let i = 0, l = this.uniforms.length; i < l; i++) {\n      const uniform = this.uniforms[i];\n      uniform.hubs_EnableSweepingEffect.value = this.data.enableSweepingEffect && showEffect;\n      uniform.hubs_IsFrozen.value = isFrozen;\n      uniform.hubs_SweepParams.value = this.sweepParams;\n\n      uniform.hubs_HighlightInteractorOne.value = !!interactorOne && showEffect;\n      uniform.hubs_InteractorOnePos.value[0] = interactorOneTransform[12];\n      uniform.hubs_InteractorOnePos.value[1] = interactorOneTransform[13];\n      uniform.hubs_InteractorOnePos.value[2] = interactorOneTransform[14];\n\n      uniform.hubs_HighlightInteractorTwo.value = !!interactorTwo && showEffect;\n      uniform.hubs_InteractorTwoPos.value[0] = interactorTwoTransform[12];\n      uniform.hubs_InteractorTwoPos.value[1] = interactorTwoTransform[13];\n      uniform.hubs_InteractorTwoPos.value[2] = interactorTwoTransform[14];\n\n      if (interactorOne || interactorTwo || isFrozen) {\n        uniform.hubs_Time.value = time;\n      }\n    }\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nexport default class DialogContainer extends Component {\n  static propTypes = {\n    title: PropTypes.node,\n    children: PropTypes.node.isRequired,\n    onClose: PropTypes.func,\n    closable: PropTypes.bool,\n    wide: PropTypes.bool,\n    className: PropTypes.string,\n    allowOverflow: PropTypes.bool,\n    additionalClass: PropTypes.string\n  };\n\n  static defaultProps = {\n    closable: true\n  };\n\n  constructor(props) {\n    super(props);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onContainerClicked = this.onContainerClicked.bind(this);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.onKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.onKeyDown);\n  }\n\n  onKeyDown(e) {\n    if (this.props.closable && e.key === \"Escape\") {\n      this.props.onClose();\n    }\n  }\n\n  onContainerClicked = e => {\n    if (this.props.closable && e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return (\n      <div className={classNames(\"dialog-overlay\", this.props.className)}>\n        <div className=\"dialog\" onClick={this.onContainerClicked}>\n          <div className={`dialog__box ${this.props.wide ? \"dialog__wide\" : \"\"} `}>\n            <div\n              className={classNames(\n                \"dialog__box__contents\",\n                this.props.allowOverflow ? \"dialog__box__contents-overflow\" : null,\n                this.props.additionalClass\n              )}\n            >\n              {this.props.closable &&\n                this.props.onClose && (\n                  <WithHoverSound>\n                    <button className=\"dialog__box__contents__close\" onClick={() => this.props.onClose()}>\n                      <i>\n                        <FontAwesomeIcon icon={faTimes} />\n                      </i>\n                    </button>\n                  </WithHoverSound>\n                )}\n              {this.props.title && <div className=\"dialog__box__contents__title\">{this.props.title}</div>}\n              <div className=\"dialog__box__contents__body\">{this.props.children}</div>\n              <div className=\"dialog__box__contents__button-container\" />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","module.exports = {\n  COLLISION_LAYERS: {\n    ALL: -1,\n    NONE: 0,\n    INTERACTABLES: 1,\n    ENVIRONMENT: 2,\n    AVATAR: 4,\n    HANDS: 8,\n    DEFAULT_INTERACTABLE: 1 | 2 | 4 | 8,\n    UNOWNED_INTERACTABLE: 1 | 8,\n    DEFAULT_SPAWNER: 1 | 8\n  }\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport { getAirtableAssets, airtableAssetsInitialState } from '../everyspace/airtable'\n\nconst HUB_NAME_PATTERN = \"^.{1,64}$\";\n\nexport default class CreateRoomDialog extends Component {\n  static propTypes = {\n    includeScenePrompt: PropTypes.bool,\n    onCustomScene: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  state = {\n    customRoomName: \"\",\n    customSceneUrl: \"\",\n    airtableAssets: airtableAssetsInitialState\n  };\n\n  componentDidMount() {\n    this.fetchAirtableAssets();\n  }\n\n  fetchAirtableAssets = async () => {\n    const airtableAssets = await getAirtableAssets()\n    if (airtableAssets) this.setState({ airtableAssets })\n  }\n\n  render() {\n    const { onCustomScene, onClose, ...other } = this.props;\n    const onCustomSceneClicked = () => {\n      onCustomScene(this.state.customRoomName, this.state.customSceneUrl);\n      onClose();\n    };\n\n    return (\n      <DialogContainer title={`Initialize ${this.state.airtableAssets.Name}`} onClose={onClose} {...other}>\n        <div>\n          {this.props.includeScenePrompt ? (\n            <div>Choose a name and GLTF URL for your room&apos;s scene:</div>\n          ) : (\n            <div>Choose a name for your room:</div>\n          )}\n\n          <form onSubmit={onCustomSceneClicked}>\n            <div className=\"custom-scene-form\">\n              <input\n                type=\"text\"\n                placeholder=\"Room name\"\n                className=\"custom-scene-form__link_field\"\n                value={this.state.customRoomName}\n                pattern={HUB_NAME_PATTERN}\n                title=\"Names must be at most 64 characters.\"\n                onChange={e => this.setState({ customRoomName: e.target.value })}\n                required\n              />\n              {this.props.includeScenePrompt && (\n                <input\n                  type=\"url\"\n                  placeholder=\"URL to Scene GLTF or GLB (Optional)\"\n                  className=\"custom-scene-form__link_field\"\n                  value={this.state.customSceneUrl}\n                  onChange={e => this.setState({ customSceneUrl: e.target.value })}\n                />\n              )}\n              <div className=\"custom-scene-form__buttons\">\n                <WithHoverSound>\n                  <button className=\"custom-scene-form__action-button\">\n                    <span>Initialize ${this.state.airtableAssets.Name}</span>\n                  </button>\n                </WithHoverSound>\n              </div>\n            </div>\n          </form>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { IntlProvider, FormattedMessage, addLocaleData } from \"react-intl\";\nimport en from \"react-intl/locale-data/en\";\nimport styles from \"../assets/stylesheets/scene-ui.scss\";\nimport hubLogo from \"../assets/images/hub-preview-white.png\";\nimport spokeLogo from \"../assets/images/spoke_logo_black.png\";\nimport { createAndRedirectToNewHub } from \"../utils/phoenix-utils\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport CreateRoomDialog from \"./create-room-dialog.js\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faEllipsisH } from \"@fortawesome/free-solid-svg-icons/faEllipsisH\";\n\nimport { lang, messages } from \"../utils/i18n\";\n\naddLocaleData([...en]);\n\nclass SceneUI extends Component {\n  static propTypes = {\n    scene: PropTypes.object,\n    sceneLoaded: PropTypes.bool,\n    sceneId: PropTypes.string,\n    sceneName: PropTypes.string,\n    sceneDescription: PropTypes.string,\n    sceneAttributions: PropTypes.object,\n    sceneScreenshotURL: PropTypes.string,\n    unavailable: PropTypes.bool\n  };\n\n  state = {\n    showScreenshot: false,\n    showCustomRoomDialog: false\n  };\n\n  constructor(props) {\n    super(props);\n\n    // Show screenshot if scene isn't loaded in 5 seconds\n    setTimeout(() => {\n      if (!this.props.sceneLoaded) {\n        this.setState({ showScreenshot: true });\n      }\n    }, 5000);\n  }\n\n  componentDidMount() {\n    this.props.scene.addEventListener(\"loaded\", this.onSceneLoaded);\n  }\n\n  componentWillUnmount() {\n    this.props.scene.removeEventListener(\"loaded\", this.onSceneLoaded);\n  }\n\n  createRoom = () => {\n    createAndRedirectToNewHub(this.state.customRoomName, this.props.sceneId);\n  };\n\n  render() {\n    if (this.props.unavailable) {\n      return (\n        <IntlProvider locale={lang} messages={messages}>\n          <div className={styles.ui}>\n            <div className={styles.unavailable}>\n              <div>\n                <FormattedMessage id=\"scene.unavailable\" />\n              </div>\n            </div>\n          </div>\n        </IntlProvider>\n      );\n    }\n\n    const sceneUrl = [location.protocol, \"//\", location.host, location.pathname].join(\"\");\n    const tweetText = `${this.props.sceneName} in #hubs`;\n    const tweetLink = `https://twitter.com/share?url=${encodeURIComponent(sceneUrl)}&text=${encodeURIComponent(\n      tweetText\n    )}`;\n\n    let attributions;\n\n    const toAttributionSpan = a => {\n      if (a.url) {\n        const source = a.url.includes(\"sketchfab.com\")\n          ? \"on Sketchfab\"\n          : a.url.includes(\"poly.google.com\")\n            ? \"on Google Poly\"\n            : \"\";\n\n        return (\n          <span key={a.url}>\n            <a href={a.url} target=\"_blank\" rel=\"noopener noreferrer\">\n              {a.name} by {a.author} {source}\n            </a>\n            &nbsp;\n          </span>\n        );\n      } else {\n        return (\n          <span key={`${a.name} ${a.author}`}>\n            {a.name} by {a.author}\n            &nbsp;\n          </span>\n        );\n      }\n    };\n\n    if (this.props.sceneAttributions) {\n      if (!this.props.sceneAttributions.extras) {\n        attributions = (\n          <span>\n            <span>{this.props.sceneAttributions.creator ? `by ${this.props.sceneAttributions.creator}` : \"\"}</span>\n            &nbsp;\n            <br />\n            {this.props.sceneAttributions.content && this.props.sceneAttributions.content.map(toAttributionSpan)}\n          </span>\n        );\n      } else {\n        // Legacy\n        attributions = <span>{this.props.sceneAttributions.extras}</span>;\n      }\n    }\n\n    return (\n      <IntlProvider locale={lang} messages={messages}>\n        <div className={styles.ui}>\n          <div\n            className={classNames({\n              [styles.screenshot]: true,\n              [styles.screenshotHidden]: this.props.sceneLoaded\n            })}\n          >\n            {this.state.showScreenshot && <img src={this.props.sceneScreenshotURL} />}\n          </div>\n          <div className={styles.whiteOverlay} />\n          <div className={styles.grid}>\n            <div className={styles.mainPanel}>\n              <WithHoverSound>\n                <a href=\"/\" className={styles.logo}>\n                  <img src={hubLogo} />\n                </a>\n              </WithHoverSound>\n              <div className={styles.logoTagline}>\n                <FormattedMessage id=\"scene.logo_tagline\" />\n              </div>\n              <div className={styles.createButtons}>\n                <WithHoverSound>\n                  <button className={styles.createButton} onClick={this.createRoom}>\n                    <FormattedMessage id=\"scene.create_button\" />\n                  </button>\n                </WithHoverSound>\n                <WithHoverSound>\n                  <button\n                    className={styles.optionsButton}\n                    onClick={() => this.setState({ showCustomRoomDialog: true })}\n                  >\n                    <FontAwesomeIcon icon={faEllipsisH} />\n                  </button>\n                </WithHoverSound>\n              </div>\n              <WithHoverSound>\n                <a href={tweetLink} rel=\"noopener noreferrer\" target=\"_blank\" className={styles.tweetButton}>\n                  <img src=\"../assets/images/twitter.svg\" />\n                  <div>\n                    <FormattedMessage id=\"scene.tweet_button\" />\n                  </div>\n                </a>\n              </WithHoverSound>\n            </div>\n          </div>\n          <div className={styles.info}>\n            <div className={styles.name}>{this.props.sceneName}</div>\n            <div className={styles.attribution}>{attributions}</div>\n          </div>\n          <div className={styles.spoke}>\n            <div className={styles.madeWith}>made with</div>\n            <a href=\"/spoke\">\n              <img src={spokeLogo} />\n            </a>\n          </div>\n          {this.state.showCustomRoomDialog && (\n            <CreateRoomDialog\n              includeScenePrompt={false}\n              onClose={() => this.setState({ showCustomRoomDialog: false })}\n              onCustomScene={name => {\n                this.setState({ showCustomRoomDialog: false, customRoomName: name }, () => this.createRoom());\n              }}\n            />\n          )}\n        </div>\n      </IntlProvider>\n    );\n  }\n}\n\nexport default SceneUI;\n","console.log(`Hubs version: ${process.env.BUILD_VERSION || \"?\"}`);\n\nimport \"./assets/stylesheets/scene.scss\";\n\nimport \"aframe\";\nimport \"./utils/logging\";\nimport \"./utils/threejs-world-update\";\nimport { patchWebGLRenderingContext } from \"./utils/webgl\";\npatchWebGLRenderingContext();\n\nimport \"three/examples/js/loaders/GLTFLoader\";\n\nimport \"./components/scene-components\";\nimport \"./components/debug\";\nimport \"./systems/nav\";\n\nimport { getReticulumFetchUrl } from \"./utils/phoenix-utils\";\n\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\nimport SceneUI from \"./react-components/scene-ui\";\nimport { disableiOSZoom } from \"./utils/disable-ios-zoom\";\n\nimport \"./gltf-component-mappings\";\n\nimport { App } from \"./App\";\n\nwindow.APP = new App();\n\nconst qs = new URLSearchParams(location.search);\nconst isMobile = AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR();\n\nwindow.APP.quality = qs.get(\"quality\") || isMobile ? \"low\" : \"high\";\n\nimport \"aframe-physics-system\";\nimport \"./components/event-repeater\";\n\nimport registerTelemetry from \"./telemetry\";\n\ndisableiOSZoom();\n\nfunction mountUI(scene, props = {}) {\n  ReactDOM.render(\n    <SceneUI\n      {...{\n        scene,\n        ...props\n      }}\n    />,\n    document.getElementById(\"ui-root\")\n  );\n}\n\nconst onReady = async () => {\n  const scene = document.querySelector(\"a-scene\");\n  window.APP.scene = scene;\n\n  const sceneId = qs.get(\"scene_id\") || document.location.pathname.substring(1).split(\"/\")[1];\n  console.log(`Scene ID: ${sceneId}`);\n\n  // Disable shadows on low quality\n  scene.setAttribute(\"shadow\", { enabled: window.APP.quality !== \"low\" });\n\n  let uiProps = { sceneId: sceneId };\n\n  mountUI(scene);\n\n  const remountUI = props => {\n    uiProps = { ...uiProps, ...props };\n    mountUI(scene, uiProps);\n  };\n\n  const sceneRoot = document.querySelector(\"#scene-root\");\n  const sceneModelEntity = document.createElement(\"a-entity\");\n  const gltfEl = document.createElement(\"a-entity\");\n  const camera = document.getElementById(\"camera\");\n\n  sceneModelEntity.addEventListener(\"scene-loaded\", () => {\n    remountUI({ sceneLoaded: true });\n    const previewCamera = gltfEl.object3D.getObjectByName(\"scene-preview-camera\");\n\n    if (previewCamera) {\n      camera.object3D.position.copy(previewCamera.position);\n      camera.object3D.rotation.copy(previewCamera.rotation);\n      camera.object3D.matrixNeedsUpdate = true;\n    }\n\n    camera.setAttribute(\"scene-preview-camera\", \"\");\n  });\n\n  const res = await fetch(getReticulumFetchUrl(`/api/v1/scenes/${sceneId}`)).then(r => r.json());\n  const sceneInfo = res.scenes[0];\n\n  // Delisted/Removed\n  if (!sceneInfo) {\n    remountUI({ unavailable: true });\n    return;\n  }\n\n  if (sceneInfo.allow_promotion) {\n    registerTelemetry(`/scene/${sceneId}`, `Hubs Scene: ${sceneInfo.title}`);\n  } else {\n    registerTelemetry(\"/scene\", \"Hubs Non-Promotable Scene Page\");\n  }\n\n  const modelUrl = sceneInfo.model_url;\n  console.log(`Scene Model URL: ${modelUrl}`);\n\n  gltfEl.setAttribute(\"gltf-model-plus\", { src: modelUrl, useCache: false, inflate: true });\n  gltfEl.addEventListener(\"model-loaded\", () => sceneModelEntity.emit(\"scene-loaded\"));\n  sceneModelEntity.appendChild(gltfEl);\n  sceneRoot.appendChild(sceneModelEntity);\n\n  remountUI({\n    sceneName: sceneInfo.name,\n    sceneDescription: sceneInfo.description,\n    sceneAttributions: sceneInfo.attributions,\n    sceneScreenshotURL: sceneInfo.screenshot_url\n  });\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", onReady);\n","import { forEachMaterial } from \"../utils/material-utils\";\nimport cubeMapPosX from \"../assets/images/cubemap/posx.jpg\";\nimport cubeMapNegX from \"../assets/images/cubemap/negx.jpg\";\nimport cubeMapPosY from \"../assets/images/cubemap/posy.jpg\";\nimport cubeMapNegY from \"../assets/images/cubemap/negy.jpg\";\nimport cubeMapPosZ from \"../assets/images/cubemap/posz.jpg\";\nimport cubeMapNegZ from \"../assets/images/cubemap/negz.jpg\";\n\nexport async function createDefaultEnvironmentMap() {\n  const urls = [cubeMapPosX, cubeMapNegX, cubeMapPosY, cubeMapNegY, cubeMapPosZ, cubeMapNegZ];\n  const texture = await new Promise((resolve, reject) =>\n    new THREE.CubeTextureLoader().load(urls, resolve, undefined, reject)\n  );\n  texture.format = THREE.RGBFormat;\n  return texture;\n}\n\nAFRAME.registerComponent(\"environment-map\", {\n  init() {\n    this.environmentMap = null;\n\n    this.updateEnvironmentMap = this.updateEnvironmentMap.bind(this);\n  },\n\n  updateEnvironmentMap(environmentMap) {\n    this.environmentMap = environmentMap;\n    this.applyEnvironmentMap(this.el.object3D);\n  },\n\n  applyEnvironmentMap(object3D) {\n    object3D.traverse(object => {\n      forEachMaterial(object, material => {\n        if (material.isMeshStandardMaterial) {\n          material.envMap = this.environmentMap;\n          material.needsUpdate = true;\n        }\n      });\n    });\n  }\n});\n","module.exports = \"if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\\n  float ratio = 0.0;\\n\\n  if (hubs_EnableSweepingEffect) {\\n    float size = hubs_SweepParams.t - hubs_SweepParams.s;\\n    float line = mod(hubs_Time / 500.0 * size, size * 3.0) + hubs_SweepParams.s - size / 3.0;\\n\\n    if (hubs_WorldPosition.y < line) {\\n      // Highlight with a sweeping gradient.\\n      ratio = max(0.0, 1.0 - (line - hubs_WorldPosition.y) / (size * 1.5));\\n    }\\n  }\\n\\n  // Highlight with a gradient falling off with distance.\\n  float pulse = 9.0 + 3.0 * (sin(hubs_Time / 1000.0) + 1.0);\\n\\n  if (hubs_HighlightInteractorOne) {\\n    float dist1 = distance(hubs_WorldPosition, hubs_InteractorOnePos);\\n    ratio += -min(1.0, pow(dist1 * pulse, 3.0)) + 1.0;\\n  } \\n\\n  if (hubs_HighlightInteractorTwo) {\\n    float dist2 = distance(hubs_WorldPosition, hubs_InteractorTwoPos);\\n    ratio += -min(1.0, pow(dist2 * pulse, 3.0)) + 1.0;\\n  }\\n\\n  ratio = min(1.0, ratio);\\n\\n  // Gamma corrected highlight color\\n  vec3 highlightColor = vec3(0.184, 0.499, 0.933);\\n\\n  gl_FragColor.rgb = (gl_FragColor.rgb * (1.0 - ratio)) + (highlightColor * ratio);\\n}\\n\"","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posx-d235fb97df77b607be04b84125f40e7c.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negx-35034574e114423babdea92b6a2eb97a.jpg\";","/* global fetch THREE */\nimport URL_TICK from \"../assets/sfx/tick.mp3\";\nimport URL_TELEPORT_LOOP from \"../assets/sfx/teleport-loop.mp3\";\nimport URL_QUICK_TURN from \"../assets/sfx/quickTurn.mp3\";\nimport URL_TAP_MELLOW from \"../assets/sfx/tap_mellow.mp3\";\nimport URL_PEN_SPAWN from \"../assets/sfx/PenSpawn.mp3\";\nimport URL_PEN_DRAW from \"../assets/sfx/PenDraw1.mp3\";\nimport URL_CAMERA_SNAPSHOT from \"../assets/sfx/PicSnapHey.mp3\";\nimport URL_WELCOME from \"../assets/sfx/welcome.mp3\";\nimport URL_QUACK from \"../assets/sfx/quack.mp3\";\nimport URL_SPECIAL_QUACK from \"../assets/sfx/specialquack.mp3\";\nimport URL_POP from \"../assets/sfx/pop.mp3\";\nimport URL_FREEZE from \"../assets/sfx/Eb_blip.mp3\";\nimport URL_TACK from \"../assets/sfx/tack.mp3\";\nimport URL_MEDIA_LOADED from \"../assets/sfx/A_bendUp.mp3\";\nimport URL_MEDIA_LOADING from \"../assets/sfx/suspense.mp3\";\n\nlet soundEnum = 0;\nexport const SOUND_HOVER_OR_GRAB = soundEnum++;\nexport const SOUND_THAW = soundEnum++;\nexport const SOUND_PEN_STOP_DRAW = soundEnum++;\nexport const SOUND_PEN_UNDO_DRAW = soundEnum++;\nexport const SOUND_PEN_CHANGE_COLOR = soundEnum++;\nexport const SOUND_TOGGLE_MIC = soundEnum++;\nexport const SOUND_TELEPORT_START = soundEnum++;\nexport const SOUND_TELEPORT_END = soundEnum++;\nexport const SOUND_SNAP_ROTATE = soundEnum++;\nexport const SOUND_SPAWN_PEN = soundEnum++;\nexport const SOUND_PEN_START_DRAW = soundEnum++;\nexport const SOUND_CAMERA_TOOL_TOOK_SNAPSHOT = soundEnum++;\nexport const SOUND_ENTER_SCENE = soundEnum++;\nexport const SOUND_QUACK = soundEnum++;\nexport const SOUND_SPECIAL_QUACK = soundEnum++;\nexport const SOUND_CHAT_MESSAGE = soundEnum++;\nexport const SOUND_FREEZE = soundEnum++;\nexport const SOUND_PIN = soundEnum++;\nexport const SOUND_MEDIA_LOADING = soundEnum++;\nexport const SOUND_MEDIA_LOADED = soundEnum++;\nexport const SOUND_CAMERA_TOOL_COUNTDOWN = soundEnum++;\n\n// Safari doesn't support the promise form of decodeAudioData, so we polyfill it.\nfunction decodeAudioData(audioContext, arrayBuffer) {\n  return new Promise((resolve, reject) => {\n    audioContext.decodeAudioData(arrayBuffer, resolve, reject);\n  });\n}\n\nexport class SoundEffectsSystem {\n  constructor() {\n    this.pendingEffects = [];\n    this.audioContext = THREE.AudioContext.getContext();\n    const soundsAndUrls = [\n      [SOUND_HOVER_OR_GRAB, URL_TICK],\n      [SOUND_THAW, URL_TICK],\n      [SOUND_PEN_STOP_DRAW, URL_TICK],\n      [SOUND_PEN_UNDO_DRAW, URL_TICK],\n      [SOUND_PEN_CHANGE_COLOR, URL_TICK],\n      [SOUND_TOGGLE_MIC, URL_TICK],\n      [SOUND_CAMERA_TOOL_COUNTDOWN, URL_TICK],\n      [SOUND_TELEPORT_START, URL_TELEPORT_LOOP],\n      [SOUND_TELEPORT_END, URL_QUICK_TURN],\n      [SOUND_SNAP_ROTATE, URL_TAP_MELLOW],\n      [SOUND_SPAWN_PEN, URL_PEN_SPAWN],\n      [SOUND_PEN_START_DRAW, URL_PEN_DRAW],\n      [SOUND_CAMERA_TOOL_TOOK_SNAPSHOT, URL_CAMERA_SNAPSHOT],\n      [SOUND_ENTER_SCENE, URL_WELCOME],\n      [SOUND_QUACK, URL_QUACK],\n      [SOUND_SPECIAL_QUACK, URL_SPECIAL_QUACK],\n      [SOUND_CHAT_MESSAGE, URL_POP],\n      [SOUND_FREEZE, URL_FREEZE],\n      [SOUND_PIN, URL_TACK],\n      [SOUND_MEDIA_LOADING, URL_MEDIA_LOADING],\n      [SOUND_MEDIA_LOADED, URL_MEDIA_LOADED]\n    ];\n    const loading = new Map();\n    const load = url => {\n      let audioBufferPromise = loading.get(url);\n      if (!audioBufferPromise) {\n        audioBufferPromise = fetch(url)\n          .then(r => r.arrayBuffer())\n          .then(arrayBuffer => decodeAudioData(this.audioContext, arrayBuffer));\n        loading.set(url, audioBufferPromise);\n      }\n      return audioBufferPromise;\n    };\n    this.sounds = new Map();\n    soundsAndUrls.map(([sound, url]) => {\n      load(url).then(audioBuffer => {\n        this.sounds.set(sound, audioBuffer);\n      });\n    });\n  }\n\n  enqueueSound(sound, loop) {\n    const audioBuffer = this.sounds.get(sound);\n    if (!audioBuffer) return null;\n    // The nodes are very inexpensive to create, according to\n    // https://developer.mozilla.org/en-US/docs/Web/API/AudioBufferSourceNode\n    const source = this.audioContext.createBufferSource();\n    source.buffer = audioBuffer;\n    source.connect(this.audioContext.destination);\n    source.loop = loop;\n    this.pendingEffects.push(source);\n    return source;\n  }\n\n  playSoundOneShot(sound) {\n    return this.enqueueSound(sound, false);\n  }\n\n  playSoundLooped(sound) {\n    return this.enqueueSound(sound, true);\n  }\n\n  playSoundLoopedWithGain(sound) {\n    const audioBuffer = this.sounds.get(sound);\n    if (!audioBuffer) return null;\n\n    const source = this.audioContext.createBufferSource();\n    const gain = this.audioContext.createGain();\n    source.buffer = audioBuffer;\n    source.connect(gain);\n    gain.connect(this.audioContext.destination);\n    source.loop = true;\n    this.pendingEffects.push(source);\n    return { gain, source };\n  }\n\n  stopSoundNode(node) {\n    const index = this.pendingEffects.indexOf(node);\n    if (index !== -1) {\n      this.pendingEffects.splice(index, 1);\n    } else {\n      node.stop();\n    }\n  }\n\n  tick() {\n    for (let i = 0; i < this.pendingEffects.length; i++) {\n      this.pendingEffects[i].start();\n    }\n    this.pendingEffects.length = 0;\n  }\n}\n","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posy-d0c4e1e7979d75923d4d8b49c191bc6e.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negy-35808d21d1d17ac1b84d3184e365093b.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posz-de29aa8396196e4b040cd5305e351dbe.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negz-d73d18a8b7994524dc39a6ea3fcf43fc.jpg\";","import { detectOS } from \"detect-browser\";\n\nexport function disableiOSZoom() {\n  if (detectOS(navigator.userAgent) !== \"iOS\") return;\n\n  let lastTouchAtMs = 0;\n\n  document.addEventListener(\"touchmove\", ev => {\n    if (ev.scale === 1) return;\n\n    ev.preventDefault();\n  });\n\n  document.addEventListener(\"touchend\", ev => {\n    const now = new Date().getTime();\n    const isDoubleTouch = now - lastTouchAtMs <= 300;\n    lastTouchAtMs = now;\n\n    if (isDoubleTouch) {\n      ev.preventDefault();\n    }\n  });\n}\n","import Store from \"./storage/store\";\nimport MediaSearchStore from \"./storage/media-search-store\";\n\nexport class App {\n  constructor() {\n    this.scene = null;\n    this.quality = \"low\";\n    this.store = new Store();\n    this.mediaSearchStore = new MediaSearchStore();\n  }\n\n  setQuality(quality) {\n    if (this.quality === quality) {\n      return false;\n    }\n\n    this.quality = quality;\n\n    if (this.scene) {\n      this.scene.dispatchEvent(new CustomEvent(\"quality-changed\", { detail: quality }));\n    }\n\n    return true;\n  }\n}\n","// Provides a global registry of running components\nexport function registerComponentInstance(component, name) {\n  window.APP.componentRegistry = window.APP.componentRegistry || {};\n  window.APP.componentRegistry[name] = window.APP.componentRegistry[name] || [];\n  window.APP.componentRegistry[name].push(component);\n}\n\nexport function deregisterComponentInstance(component, name) {\n  if (!window.APP.componentRegistry || !window.APP.componentRegistry[name]) return;\n  window.APP.componentRegistry[name].splice(window.APP.componentRegistry[name].indexOf(component), 1);\n}\n\nexport function getCurrentStreamer() {\n  if (!window.APP || !window.APP.componentRegistry || !window.APP.hubChannel || !window.APP.hubChannel.presence)\n    return null;\n  const playerInfos = window.APP.componentRegistry[\"player-info\"] || [];\n  const presences = window.APP.hubChannel.presence.state;\n\n  for (let i = 0; i < playerInfos.length; i++) {\n    const playerInfo = playerInfos[i];\n    const presence = presences[playerInfo.playerSessionId];\n\n    if (presence && presence.metas[0] && presence.metas[0].streaming) {\n      return playerInfo;\n    }\n  }\n\n  return null;\n}\n","function loadAsync(loader, url, onProgress) {\n  return new Promise((resolve, reject) => loader.load(url, resolve, onProgress, reject));\n}\n\nexport default class HubsTextureLoader {\n  static crossOrigin = \"anonymous\";\n\n  constructor(manager = THREE.DefaultLoadingManager) {\n    this.manager = manager;\n  }\n\n  load(url, onLoad, onProgress, onError) {\n    const texture = new THREE.Texture();\n\n    this.loadTextureAsync(texture, url, onProgress)\n      .then(onLoad)\n      .catch(onError);\n\n    return texture;\n  }\n\n  async loadTextureAsync(texture, src, onProgress) {\n    let imageLoader;\n\n    if (window.createImageBitmap !== undefined) {\n      imageLoader = new THREE.ImageBitmapLoader(this.manager);\n      texture.flipY = false;\n    } else {\n      imageLoader = new THREE.ImageLoader(this.manager);\n    }\n\n    imageLoader.setCrossOrigin(this.crossOrigin);\n    imageLoader.setPath(this.path);\n\n    const cacheKey = this.manager.resolveURL(src);\n\n    texture.image = await loadAsync(imageLoader, src, onProgress);\n\n    // Image was just added to cache before this function gets called, disable caching by immediatly removing it\n    THREE.Cache.remove(cacheKey);\n\n    texture.needsUpdate = true;\n\n    texture.onUpdate = function() {\n      // Delete texture data once it has been uploaded to the GPU\n      texture.image.close && texture.image.close();\n      delete texture.image;\n    };\n\n    return texture;\n  }\n\n  setCrossOrigin(value) {\n    this.crossOrigin = value;\n    return this;\n  }\n\n  setPath(value) {\n    this.path = value;\n    return this;\n  }\n}\n","import { objectTypeForOriginAndContentType } from \"../object-types\";\nimport { getReticulumFetchUrl } from \"./phoenix-utils\";\nimport mediaHighlightFrag from \"./media-highlight-frag.glsl\";\nimport { mapMaterials } from \"./material-utils\";\nimport HubsTextureLoader from \"../loaders/HubsTextureLoader\";\nimport { validMaterials } from \"../components/hoverable-visuals\";\nimport { proxiedUrlFor } from \"../utils/media-url-utils\";\n\nconst mediaAPIEndpoint = getReticulumFetchUrl(\"/api/v1/media\");\n\n// Map<String, Promise<Object>\nconst resolveUrlCache = new Map();\nexport const resolveUrl = async (url, index) => {\n  const cacheKey = `${url}|${index}`;\n  if (resolveUrlCache.has(cacheKey)) return resolveUrlCache.get(cacheKey);\n\n  const resultPromise = fetch(mediaAPIEndpoint, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ media: { url, index } })\n  }).then(async response => {\n    if (!response.ok) {\n      const message = `Error resolving url \"${url}\":`;\n      try {\n        const body = await response.text();\n        throw new Error(message + \" \" + body);\n      } catch (e) {\n        throw new Error(message + \" \" + response.statusText);\n      }\n    }\n    return response.json();\n  });\n\n  resolveUrlCache.set(cacheKey, resultPromise);\n  return resultPromise;\n};\n\nexport const upload = (file, desiredContentType) => {\n  const formData = new FormData();\n  formData.append(\"media\", file);\n  formData.append(\"promotion_mode\", \"with_token\");\n\n  if (desiredContentType) {\n    formData.append(\"desired_content_type\", desiredContentType);\n  }\n\n  return fetch(mediaAPIEndpoint, {\n    method: \"POST\",\n    body: formData\n  }).then(r => r.json());\n};\n\n// https://stackoverflow.com/questions/7584794/accessing-jpeg-exif-rotation-data-in-javascript-on-the-client-side/32490603#32490603\nfunction getOrientation(file, callback) {\n  const reader = new FileReader();\n  reader.onload = function(e) {\n    const view = new DataView(e.target.result);\n    if (view.getUint16(0, false) != 0xffd8) {\n      return callback(-2);\n    }\n    const length = view.byteLength;\n    let offset = 2;\n    while (offset < length) {\n      if (view.getUint16(offset + 2, false) <= 8) return callback(-1);\n      const marker = view.getUint16(offset, false);\n      offset += 2;\n      if (marker == 0xffe1) {\n        if (view.getUint32((offset += 2), false) != 0x45786966) {\n          return callback(-1);\n        }\n\n        const little = view.getUint16((offset += 6), false) == 0x4949;\n        offset += view.getUint32(offset + 4, little);\n        const tags = view.getUint16(offset, little);\n        offset += 2;\n        for (let i = 0; i < tags; i++) {\n          if (view.getUint16(offset + i * 12, little) == 0x0112) {\n            return callback(view.getUint16(offset + i * 12 + 8, little));\n          }\n        }\n      } else if ((marker & 0xff00) != 0xff00) {\n        break;\n      } else {\n        offset += view.getUint16(offset, false);\n      }\n    }\n    return callback(-1);\n  };\n  reader.readAsArrayBuffer(file);\n}\n\nlet interactableId = 0;\nexport const addMedia = (\n  src,\n  template,\n  contentOrigin,\n  contentSubtype = null,\n  resolve = false,\n  resize = false,\n  animate = true\n) => {\n  const scene = AFRAME.scenes[0];\n\n  const entity = document.createElement(\"a-entity\");\n  entity.id = \"interactable-media-\" + interactableId++;\n  entity.setAttribute(\"networked\", { template: template });\n  const needsToBeUploaded = src instanceof File;\n  entity.setAttribute(\"media-loader\", {\n    resize,\n    resolve,\n    animate,\n    src: typeof src === \"string\" ? src : \"\",\n    contentSubtype,\n    fileIsOwned: !needsToBeUploaded\n  });\n\n  entity.object3D.matrixNeedsUpdate = true;\n\n  scene.appendChild(entity);\n\n  const fireLoadingTimeout = setTimeout(() => {\n    scene.emit(\"media-loading\", { src: src });\n  }, 100);\n\n  [\"model-loaded\", \"video-loaded\", \"image-loaded\", \"pdf-loaded\"].forEach(eventName => {\n    entity.addEventListener(\n      eventName,\n      async () => {\n        clearTimeout(fireLoadingTimeout);\n        scene.emit(\"media-loaded\", { src: src });\n      },\n      { once: true }\n    );\n  });\n\n  const orientation = new Promise(function(resolve) {\n    if (needsToBeUploaded) {\n      getOrientation(src, x => {\n        resolve(x);\n      });\n    } else {\n      resolve(1);\n    }\n  });\n  if (needsToBeUploaded) {\n    // Video camera videos are converted to mp4 for compatibility\n    const desiredContentType = contentSubtype === \"video-camera\" ? \"video/mp4\" : null;\n\n    upload(src, desiredContentType)\n      .then(response => {\n        const srcUrl = new URL(proxiedUrlFor(response.origin));\n        srcUrl.searchParams.set(\"token\", response.meta.access_token);\n        entity.setAttribute(\"media-loader\", { resolve: false, src: srcUrl.href, fileId: response.file_id });\n        window.APP.store.update({\n          uploadPromotionTokens: [{ fileId: response.file_id, promotionToken: response.meta.promotion_token }]\n        });\n      })\n      .catch(e => {\n        console.error(\"Media upload failed\", e);\n        entity.setAttribute(\"media-loader\", { src: \"error\" });\n      });\n  } else if (src instanceof MediaStream) {\n    entity.setAttribute(\"media-loader\", { src: `hubs://clients/${NAF.clientId}/video` });\n  }\n\n  if (contentOrigin) {\n    entity.addEventListener(\"media_resolved\", ({ detail }) => {\n      const objectType = objectTypeForOriginAndContentType(contentOrigin, detail.contentType, detail.src);\n      scene.emit(\"object_spawned\", { objectType });\n    });\n  }\n\n  return { entity, orientation };\n};\n\nexport function injectCustomShaderChunks(obj) {\n  const vertexRegex = /\\bskinning_vertex\\b/;\n  const fragRegex = /\\bgl_FragColor\\b/;\n\n  const shaderUniforms = [];\n  const batchManagerSystem = AFRAME.scenes[0].systems[\"hubs-systems\"].batchManagerSystem;\n\n  obj.traverse(object => {\n    if (!object.material) return;\n\n    object.material = mapMaterials(object, material => {\n      if (!validMaterials.includes(material.type)) {\n        return material;\n      }\n\n      // HACK, this routine inadvertently leaves the A-Frame shaders wired to the old, dark\n      // material, so maps cannot be updated at runtime. This breaks UI elements who have\n      // hover/toggle state, so for now just skip these while we figure out a more correct\n      // solution.\n      if (\n        object.el.classList.contains(\"ui\") ||\n        object.el.classList.contains(\"hud\") ||\n        object.el.getAttribute(\"text-button\")\n      )\n        return material;\n\n      // Used when the object is batched\n      batchManagerSystem.meshToEl.set(object, obj.el);\n\n      const newMaterial = material.clone();\n      // This will not run if the object is never rendered unbatched, since its unbatched shader will never be compiled\n      newMaterial.onBeforeCompile = shader => {\n        if (!vertexRegex.test(shader.vertexShader)) return;\n\n        shader.uniforms.hubs_IsFrozen = { value: false };\n        shader.uniforms.hubs_EnableSweepingEffect = { value: false };\n        shader.uniforms.hubs_SweepParams = { value: [0, 0] };\n        shader.uniforms.hubs_InteractorOnePos = { value: [0, 0, 0] };\n        shader.uniforms.hubs_InteractorTwoPos = { value: [0, 0, 0] };\n        shader.uniforms.hubs_HighlightInteractorOne = { value: false };\n        shader.uniforms.hubs_HighlightInteractorTwo = { value: false };\n        shader.uniforms.hubs_Time = { value: 0 };\n\n        const vchunk = `\n        if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\n          vec4 wt = modelMatrix * vec4(transformed, 1);\n\n          // Used in the fragment shader below.\n          hubs_WorldPosition = wt.xyz;\n        }\n      `;\n\n        const vlines = shader.vertexShader.split(\"\\n\");\n        const vindex = vlines.findIndex(line => vertexRegex.test(line));\n        vlines.splice(vindex + 1, 0, vchunk);\n        vlines.unshift(\"varying vec3 hubs_WorldPosition;\");\n        vlines.unshift(\"uniform bool hubs_IsFrozen;\");\n        vlines.unshift(\"uniform bool hubs_HighlightInteractorOne;\");\n        vlines.unshift(\"uniform bool hubs_HighlightInteractorTwo;\");\n        shader.vertexShader = vlines.join(\"\\n\");\n\n        const flines = shader.fragmentShader.split(\"\\n\");\n        const findex = flines.findIndex(line => fragRegex.test(line));\n        flines.splice(findex + 1, 0, mediaHighlightFrag);\n        flines.unshift(\"varying vec3 hubs_WorldPosition;\");\n        flines.unshift(\"uniform bool hubs_IsFrozen;\");\n        flines.unshift(\"uniform bool hubs_EnableSweepingEffect;\");\n        flines.unshift(\"uniform vec2 hubs_SweepParams;\");\n        flines.unshift(\"uniform bool hubs_HighlightInteractorOne;\");\n        flines.unshift(\"uniform vec3 hubs_InteractorOnePos;\");\n        flines.unshift(\"uniform bool hubs_HighlightInteractorTwo;\");\n        flines.unshift(\"uniform vec3 hubs_InteractorTwoPos;\");\n        flines.unshift(\"uniform float hubs_Time;\");\n        shader.fragmentShader = flines.join(\"\\n\");\n\n        shaderUniforms.push(shader.uniforms);\n      };\n      newMaterial.needsUpdate = true;\n      return newMaterial;\n    });\n  });\n\n  return shaderUniforms;\n}\n\nexport function getPromotionTokenForFile(fileId) {\n  return window.APP.store.state.uploadPromotionTokens.find(upload => upload.fileId === fileId);\n}\n\nconst mediaPos = new THREE.Vector3();\n\nexport function addAndArrangeMedia(el, media, contentSubtype, snapCount, mirrorOrientation = false) {\n  const { entity, orientation } = addMedia(media, \"#interactable-media\", undefined, contentSubtype, false);\n\n  const pos = el.object3D.position;\n\n  entity.object3D.position.set(pos.x, pos.y, pos.z);\n  entity.object3D.rotation.copy(el.object3D.rotation);\n\n  if (mirrorOrientation) {\n    entity.object3D.rotateY(Math.PI);\n  }\n\n  // Generate photos in a circle around camera, starting from the bottom.\n  // Prevent z-fighting but place behind viewfinder\n  const idx = (snapCount % 6) + 3;\n\n  mediaPos.set(\n    Math.cos(Math.PI * 2 * (idx / 6.0)) * 0.75,\n    Math.sin(Math.PI * 2 * (idx / 6.0)) * 0.75,\n    -0.05 + idx * 0.001\n  );\n\n  el.object3D.localToWorld(mediaPos);\n  entity.object3D.visible = false;\n\n  const handler = () => {\n    entity.object3D.visible = true;\n    entity.setAttribute(\"animation__photo_pos\", {\n      property: \"position\",\n      dur: 800,\n      from: { x: pos.x, y: pos.y, z: pos.z },\n      to: { x: mediaPos.x, y: mediaPos.y, z: mediaPos.z },\n      easing: \"easeOutElastic\"\n    });\n  };\n\n  let eventType = null;\n\n  if (contentSubtype.startsWith(\"photo\")) {\n    entity.addEventListener(\"image-loaded\", handler, { once: true });\n    eventType = \"photo\";\n  } else if (contentSubtype.startsWith(\"video\")) {\n    entity.addEventListener(\"video-loaded\", handler, { once: true });\n    eventType = \"video\";\n  } else {\n    console.error(\"invalid type \" + contentSubtype);\n    return;\n  }\n\n  entity.object3D.matrixNeedsUpdate = true;\n\n  entity.addEventListener(\n    \"media_resolved\",\n    () => {\n      el.emit(`${eventType}_taken`, entity.components[\"media-loader\"].data.src);\n    },\n    { once: true }\n  );\n\n  return { entity, orientation };\n}\n\nexport const textureLoader = new HubsTextureLoader().setCrossOrigin(\"anonymous\");\n\nexport async function createImageTexture(url) {\n  const texture = new THREE.Texture();\n\n  try {\n    await textureLoader.loadTextureAsync(texture, url);\n  } catch (e) {\n    throw new Error(`'${url}' could not be fetched (Error code: ${e.status}; Response: ${e.statusText})`);\n  }\n\n  texture.encoding = THREE.sRGBEncoding;\n  texture.anisotropy = 4;\n\n  return texture;\n}\n","const qs = new URLSearchParams(location.search);\n\nexport default function qsTruthy(param) {\n  const val = qs.get(param);\n  // if the param exists but is not set (e.g. \"?foo&bar\"), its value is the empty string.\n  return val === \"\" || /1|on|true|yes/i.test(val);\n}\n","export function findAncestorWithComponent(entity, componentName) {\n  while (entity && !(entity.components && entity.components[componentName])) {\n    entity = entity.parentNode;\n  }\n  return entity;\n}\n","// Computes an AABB that surrounds the object in question and all of its children.\n// Note that if the children have rotations, this probably won't return the tightest\n// possible AABB -- we could return a tighter one if we examined all of the vertices\n// of the geometry for ourselves, but we don't care enough for what we're using this\n// for to do so much work.\nconst computeObjectAABB = (function() {\n  const bounds = new THREE.Box3();\n  return function(root, target) {\n    target.makeEmpty();\n    root.traverse(node => {\n      const geometry = node.geometry;\n      if (geometry != null) {\n        if (geometry.boundingBox == null) {\n          geometry.computeBoundingBox();\n        }\n        target.union(bounds.copy(geometry.boundingBox).applyMatrix4(node.matrixWorld));\n      }\n    });\n    return target;\n  };\n})();\n\nconst rotation = new THREE.Euler();\nexport function getBox(entity, boxRoot) {\n  const box = new THREE.Box3();\n\n  rotation.copy(entity.object3D.rotation);\n  entity.object3D.rotation.set(0, 0, 0);\n\n  entity.object3D.updateMatrices(true, true);\n  boxRoot.updateMatrices(true, true);\n  boxRoot.updateMatrixWorld(true);\n\n  computeObjectAABB(boxRoot, box);\n\n  if (!box.isEmpty()) {\n    entity.object3D.worldToLocal(box.min);\n    entity.object3D.worldToLocal(box.max);\n    entity.object3D.rotation.copy(rotation);\n    entity.object3D.matrixNeedsUpdate = true;\n  }\n\n  boxRoot.matrixWorldNeedsUpdate = true;\n  boxRoot.updateMatrices();\n\n  return box;\n}\n\nexport function getScaleCoefficient(length, box) {\n  if (box.isEmpty()) return 1.0;\n\n  const { max, min } = box;\n  const dX = Math.abs(max.x - min.x);\n  const dY = Math.abs(max.y - min.y);\n  const dZ = Math.abs(max.z - min.z);\n  const lengthOfLongestComponent = Math.max(dX, dY, dZ);\n  return length / lengthOfLongestComponent;\n}\n","import Airtable from 'airtable';\nAirtable.configure({\n    endpointUrl: 'https://api.airtable.com',\n    apiKey: 'keyOHSVeLr3ryLrL5'\n});\nconst base = Airtable.base('appIR0AlHDFG5WR8z');\n\nexport const airtableAssetsInitialState = { DarkLogo: null, Name: null, Icon: null }\n\nlet assets;\n\nconst airtableAssets = base('Assets');\n// export const getAirtableAssets = () => airtableAssets.find('recHqITRS7cBMwn9i');\nexport const getAirtableAssets = async () => {\n    if (assets) return assets;\n    const result = await airtableAssets.select({\n        view: 'Grid view'\n    }).firstPage()\n    assets = result[0].fields;\n    return result[0].fields\n}\n\nexport const airtableMessages = base('Messages').select({\n    view: 'Grid view'\n}).firstPage(async (err, records) => {\n    if (err) { console.error(err); return; }\n    const record = records[0];\n    return record;\n});;","import { airtableMessages } from './airtable'\nimport { Name, Hero_Blurb } from './customization'\nimport translations from '../assets/translations.data.json';\nlet modifiedTranslations = translations;\nconst name = Name;\n// const name = airtableMessages && airtableMessages.get('Name') || \"Axon Park\";\n\n// modifiedTranslations.en[\"home.hero_blurb\"] = airtableMessages && airtableMessages.get('Motto') || 'Learn together, from anywhere.\\nThe future of learning is virtual.\\nEqualizing access to premier quality education.';\nmodifiedTranslations.en[\"home.hero_blurb\"] = Hero_Blurb;\nmodifiedTranslations.en[\"sign-in.rename-room\"] = `You'll need to sign in to rename ${name}.`;\nmodifiedTranslations.en[\"sign-in.close-room\"] = `You'll need to sign in to close ${name}.`;\nmodifiedTranslations.en[\"rename-room.message\"] = `Enter the new name for ${name}.`;\nmodifiedTranslations.en[\"rename-room.rename\"] = `Rename ${name}`;\nmodifiedTranslations.en[\"close-room.message\"] =\n  `Closing this room will remove yourself and others from ${name}, shutting it down permanently.\\n\\nAre you sure? This action cannot be undone.`;\nmodifiedTranslations.en[\"close-room.confirm\"] = `Yes, Close ${name}`;\nmodifiedTranslations.en[\"entry.enter-room\"] = `Enter ${name}`;\nmodifiedTranslations.en[\"entry.leave-room\"] = `Leave ${name}`;\nmodifiedTranslations.en[\"entry.in-lobby-notice\"] = `You are viewing ${name} from the lobby.`;\nmodifiedTranslations.en[\"exit.subtitle.kicked\"] = `You have been kicked from ${name}.`;\nmodifiedTranslations.en[\"exit.subtitle.left\"] = `You have left ${name}.`;\nmodifiedTranslations.en[\"exit.subtitle.disconnected\"] = `You have disconnected from ${name}. Refresh the page to try to reconnect.`;\nmodifiedTranslations.en[\"presence.entered_room\"] = `entered ${name}.`;\nmodifiedTranslations.en[\"presence.entered_lobby\"] = `entered ${name}'s lobby.`;\nmodifiedTranslations.en[\"presence.join_lobby\"] = `joined the ${name} lobby.`;\nmodifiedTranslations.en[\"presence.join_room\"] = `joined ${name}.`;\nmodifiedTranslations.en[\"presence.in_lobby\"] = `${name} Lobby`;\nmodifiedTranslations.en[\"presence.in_room\"] = `In ${name}`;\nmodifiedTranslations.en[\"home.create_a_room\"] = `Initialize ${name}`;\nmodifiedTranslations.en[\"home.room_create_button\"] = `Initialize ${name}`;\nmodifiedTranslations.en[\"home.have_code\"] = `Have an ${name} code?`;\nmodifiedTranslations.en[\"commands.leave\"] = `Disconnect from ${name}.`;\nmodifiedTranslations.en[\"settings.rename-room\"] = `Set ${name} Name...`;\nmodifiedTranslations.en[\"settings.close-room\"] = `Close ${name}...`;\nmodifiedTranslations.en[\"settings.leave-room\"] = `Leave ${name}`;\nmodifiedTranslations.en[\"settings.room-info\"] = `${name} Info`;\nmodifiedTranslations.en[\"settings.create-room\"] = `New ${name}...`;\nmodifiedTranslations.en[\"settings.row-room\"] = `${name}`;\nmodifiedTranslations.en[\"settings.room-settings\"] = `${name} Settings`;\nmodifiedTranslations.en[\"tips.mobile.object_pin\"] = `Pin an object to save it to ${name}.`;\nmodifiedTranslations.en[\"tips.mobile.object_pin\"] = `Pin an object to save it to ${name}.`;\nmodifiedTranslations.en[\"tips.mobile.invite\"] = `Use the Invite button to share ${name}.`;\nmodifiedTranslations.en[\"tips.desktop.object_pin\"] = `Pin an object to save it to ${name}.`;\nmodifiedTranslations.en[\"tips.watching.back\"] = `Enter ${name}`;\nmodifiedTranslations.en[\"leave-room-dialog.create-room.confirm\"] = `Leave ${name}.`;\n\nexport default modifiedTranslations;","export const Name = \"Axon Park\";\nexport const Hero_Blurb = 'Learn together, from anywhere.\\nThe future of learning is virtual.\\nEqualizing access to premier quality education.';","import localeData from \"../everyspace/messages.js\";\n// import localeData from \"../assets/translations.data.json\";\nconst navigatorLang = ((navigator.languages && navigator.languages[0]) || navigator.language || navigator.userLanguage)\n  .toLowerCase()\n  .split(/[_-]+/)[0];\nexport const lang = (localeData[navigatorLang] && navigatorLang) || \"en\";\nexport const messages = localeData[lang] || localeData.en;\n","// A-Frame blows away any npm debug log filters so this allow the user to set the log filter\n// via the query string.\nimport debug from \"debug\";\nimport qsTruthy from \"./qs_truthy\";\n\nconst qs = new URLSearchParams(location.search);\nconst isDebug = qsTruthy(\"debug\");\nconst logFilter = qs.get(\"log_filter\") || (isDebug && \"naf-janus-adapter:*\");\n\nif (logFilter) {\n  debug.enable(logFilter);\n}\n","// This computation is expensive, so we run on at most one avatar per frame, including quiet avatars.\n// However if we detect an avatar is seen speaking (its volume is above DISABLE_AT_VOLUME_THRESHOLD)\n// then we continue analysis for at least DISABLE_GRACE_PERIOD_MS and disable doing it every frame if\n// the avatar is quiet during that entire duration (eg they are muted)\nconst DISABLE_AT_VOLUME_THRESHOLD = 0.00001;\nconst DISABLE_GRACE_PERIOD_MS = 10000;\nconst MIN_VOLUME_THRESHOLD = 0.01;\n\nconst calculateVolume = (analyser, levels) => {\n  // take care with compatibility, e.g. safari doesn't support getFloatTimeDomainData\n  analyser.getByteTimeDomainData(levels);\n  let sum = 0;\n  for (let i = 0; i < levels.length; i++) {\n    const amplitude = (levels[i] - 128) / 128;\n    sum += amplitude * amplitude;\n  }\n  const currVolume = Math.sqrt(sum / levels.length);\n  return currVolume < MIN_VOLUME_THRESHOLD ? 0 : currVolume;\n};\n\nconst tempScaleFromPosition = new THREE.Vector3();\nconst tempScaleToPosition = new THREE.Vector3();\n\nexport function getAudioFeedbackScale(fromObject, toObject, minScale, maxScale, volume) {\n  tempScaleToPosition.setFromMatrixPosition(toObject.matrixWorld);\n  tempScaleFromPosition.setFromMatrixPosition(fromObject.matrixWorld);\n  const distance = tempScaleFromPosition.distanceTo(tempScaleToPosition) / 10;\n  return Math.min(maxScale, minScale + (maxScale - minScale) * volume * 8 * distance);\n}\n\n/**\n * Emits audioFrequencyChange events based on a networked audio source\n * @namespace avatar\n * @component networked-audio-analyser\n */\nAFRAME.registerComponent(\"networked-audio-analyser\", {\n  async init() {\n    this.volume = 0;\n    this.prevVolume = 0;\n    this._updateAnalysis = this._updateAnalysis.bind(this);\n    this._runScheduledWork = this._runScheduledWork.bind(this);\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._updateAnalysis, \"audio-analyser\");\n    this.el.addEventListener(\"sound-source-set\", event => {\n      const ctx = THREE.AudioContext.getContext();\n      this.analyser = ctx.createAnalyser();\n      this.analyser.fftSize = 32;\n      this.levels = new Uint8Array(this.analyser.frequencyBinCount);\n      event.detail.soundSource.connect(this.analyser);\n    });\n  },\n\n  remove: function() {\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._runScheduledWork, \"audio-analyser\");\n  },\n\n  tick: function(t) {\n    if (!this.avatarIsQuiet) {\n      this._updateAnalysis(t);\n    }\n  },\n\n  _runScheduledWork: function() {\n    if (this.avatarIsQuiet) {\n      this._updateAnalysis();\n    }\n  },\n\n  // Updates the analysis/volume. If t is passed, that implies this is called via tick\n  // and so as a performance optimization will check to see if it's been at least DISABLE_GRACE_PERIOD_MS\n  // since the last volume was seen above DISABLE_AT_VOLUME_THRESHOLD, and if so, will disable\n  // tick updates until the volume exceeds the level again.\n  _updateAnalysis: function(t) {\n    if (!this.analyser) return;\n\n    const currentVolume = calculateVolume(this.analyser, this.levels);\n    const s = 0.3;\n    this.volume = s * currentVolume + (1 - s) * this.prevVolume;\n    this.prevVolume = this.volume;\n\n    if (this.volume < DISABLE_AT_VOLUME_THRESHOLD) {\n      if (t && this.lastSeenVolume && this.lastSeenVolume < t - DISABLE_GRACE_PERIOD_MS) {\n        this.avatarIsQuiet = true;\n      }\n    } else {\n      if (t) {\n        this.lastSeenVolume = t;\n      }\n\n      this.avatarIsQuiet = false;\n    }\n  }\n});\n\nfunction connectAnalyser(mediaStream) {\n  const ctx = THREE.AudioContext.getContext();\n  const source = ctx.createMediaStreamSource(mediaStream);\n  const analyser = ctx.createAnalyser();\n  analyser.fftSize = 32;\n  const levels = new Uint8Array(analyser.frequencyBinCount);\n  source.connect(analyser);\n  return { analyser, levels };\n}\n\n/**\n * Calculates volume of the local audio stream.\n */\nAFRAME.registerSystem(\"local-audio-analyser\", {\n  init() {\n    this.volume = 0;\n\n    this.el.addEventListener(\"local-media-stream-created\", e => {\n      const mediaStream = e.detail.mediaStream;\n      if (this.stream) {\n        console.warn(\"media stream changed\", this.stream, mediaStream);\n        // TODO: cleanup?\n      }\n      this.stream = mediaStream;\n      const { analyser, levels } = connectAnalyser(mediaStream);\n      this.analyser = analyser;\n      this.levels = levels;\n    });\n  },\n\n  tick: function() {\n    if (!this.analyser) return;\n    this.volume = calculateVolume(this.analyser, this.levels);\n  }\n});\n\n/**\n * Sets an entity's scale base on audioFrequencyChange events.\n * @namespace avatar\n * @component scale-audio-feedback\n */\nAFRAME.registerComponent(\"scale-audio-feedback\", {\n  schema: {\n    minScale: { default: 1 },\n    maxScale: { default: 2 }\n  },\n\n  init() {\n    this._playerCamera = document.getElementById(\"player-camera\").object3D;\n  },\n\n  tick() {\n    // TODO: come up with a cleaner way to handle this.\n    // bone's are \"hidden\" by scaling them with bone-visibility, without this we would overwrite that.\n    if (!this.el.object3D.visible) return;\n\n    const { minScale, maxScale } = this.data;\n\n    const audioAnalyser = this.el.components[\"networked-audio-analyser\"];\n\n    if (!audioAnalyser) return;\n\n    const { object3D } = this.el;\n\n    const scale = getAudioFeedbackScale(this.el.object3D, this._playerCamera, minScale, maxScale, audioAnalyser.volume);\n\n    object3D.scale.setScalar(scale);\n    object3D.matrixNeedsUpdate = true;\n  }\n});\n\nconst SPRITE_NAMES = {\n  MIC: [\"mic-0.png\", \"mic-1.png\", \"mic-2.png\", \"mic-3.png\", \"mic-4.png\", \"mic-5.png\", \"mic-6.png\", \"mic-7.png\"],\n  MIC_HOVER: [\n    \"mic-0_hover.png\",\n    \"mic-1_hover.png\",\n    \"mic-2_hover.png\",\n    \"mic-3_hover.png\",\n    \"mic-4_hover.png\",\n    \"mic-5_hover.png\",\n    \"mic-6_hover.png\",\n    \"mic-7_hover.png\"\n  ],\n  MIC_OFF: [\n    \"mic-off-0.png\",\n    \"mic-off-1.png\",\n    \"mic-off-2.png\",\n    \"mic-off-3.png\",\n    \"mic-off-4.png\",\n    \"mic-off-5.png\",\n    \"mic-off-6.png\",\n    \"mic-off-7.png\"\n  ],\n  MIC_OFF_HOVER: [\n    \"mic-off-0_hover.png\",\n    \"mic-off-1_hover.png\",\n    \"mic-off-2_hover.png\",\n    \"mic-off-3_hover.png\",\n    \"mic-off-4_hover.png\",\n    \"mic-off-5_hover.png\",\n    \"mic-off-6_hover.png\",\n    \"mic-off-7_hover.png\"\n  ]\n};\n\nexport function micLevelForVolume(volume, max) {\n  return max === 0\n    ? 0\n    : volume < max * 0.02\n      ? 0\n      : volume < max * 0.03\n        ? 1\n        : volume < max * 0.06\n          ? 2\n          : volume < max * 0.08\n            ? 3\n            : volume < max * 0.16\n              ? 4\n              : volume < max * 0.32\n                ? 5\n                : volume < max * 0.5\n                  ? 6\n                  : 7;\n}\n\nAFRAME.registerComponent(\"mic-button\", {\n  schema: {\n    active: { type: \"boolean\" },\n    tooltip: { type: \"selector\" },\n    tooltipText: { type: \"string\" },\n    activeTooltipText: { type: \"string\" }\n  },\n\n  init() {\n    this.loudest = 0;\n    this.prevSpriteName = \"\";\n    this.decayingVolume = 0;\n    this.el.object3D.matrixNeedsUpdate = true;\n    this.hovering = false;\n    this.onHover = () => {\n      this.hovering = true;\n      this.data.tooltip.setAttribute(\"visible\", true);\n    };\n    this.onHoverOut = () => {\n      this.hovering = false;\n      this.data.tooltip.setAttribute(\"visible\", false);\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"hovered\", this.onHover);\n    this.el.object3D.addEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"hovered\", this.onHover);\n    this.el.object3D.removeEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  update() {\n    if (this.data.tooltip) {\n      this.textEl = this.data.tooltip.querySelector(\"[text]\");\n    }\n  },\n\n  tick() {\n    const audioAnalyser = this.el.sceneEl.systems[\"local-audio-analyser\"];\n    let volume;\n    if (audioAnalyser.volume > this.decayingVolume) {\n      this.decayingVolume = audioAnalyser.volume;\n      volume = audioAnalyser.volume;\n      this.loudest = Math.max(this.loudest, volume);\n    } else {\n      const s = 0.8;\n      volume = this.decayingVolume * s > 0.001 ? this.decayingVolume * s : 0;\n      this.decayingVolume = volume;\n    }\n\n    const active = this.data.active;\n    const hovering = this.hovering;\n    const spriteNames =\n      SPRITE_NAMES[!active ? (hovering ? \"MIC_HOVER\" : \"MIC\") : hovering ? \"MIC_OFF_HOVER\" : \"MIC_OFF\"];\n    const level = micLevelForVolume(volume, this.loudest);\n    const spriteName = spriteNames[level];\n    if (spriteName !== this.prevSpriteName) {\n      this.prevSpriteName = spriteName;\n      this.el.setAttribute(\"sprite\", \"name\", spriteName);\n    }\n\n    if (this.data.tooltip && hovering) {\n      this.textEl = this.textEl || this.data.tooltip.querySelector(\"[text]\");\n      this.textEl.setAttribute(\"text\", \"value\", active ? this.data.activeTooltipText : this.data.tooltipText);\n    }\n  }\n});\n","export function addAnimationComponents(modelEl) {\n  if (!modelEl.components[\"animation-mixer\"]) {\n    return;\n  }\n\n  if (!modelEl.querySelector(\"[loop-animation]\")) {\n    modelEl.setAttribute(\"loop-animation\", \"\");\n  }\n}\n","const tempVector3 = new THREE.Vector3();\nconst tempQuaternion = new THREE.Quaternion();\n\nexport function getLastWorldPosition(src, target) {\n  src.updateMatrices();\n  target.setFromMatrixPosition(src.matrixWorld);\n  return target;\n}\n\nexport function getLastWorldQuaternion(src, target) {\n  src.updateMatrices();\n  src.matrixWorld.decompose(tempVector3, target, tempVector3);\n  return target;\n}\n\nexport function getLastWorldScale(src, target) {\n  src.updateMatrices();\n  src.matrixWorld.decompose(tempVector3, tempQuaternion, target);\n  return target;\n}\n\nexport function disposeMaterial(mtrl) {\n  if (mtrl.map) mtrl.map.dispose();\n  if (mtrl.lightMap) mtrl.lightMap.dispose();\n  if (mtrl.bumpMap) mtrl.bumpMap.dispose();\n  if (mtrl.normalMap) mtrl.normalMap.dispose();\n  if (mtrl.specularMap) mtrl.specularMap.dispose();\n  if (mtrl.envMap) mtrl.envMap.dispose();\n  mtrl.dispose();\n}\n\nexport function disposeNode(node) {\n  if (!(node instanceof THREE.Mesh)) return;\n\n  if (node.geometry) {\n    node.geometry.dispose();\n  }\n\n  if (node.material) {\n    let materialArray;\n    if (node.material instanceof THREE.MeshFaceMaterial || node.material instanceof THREE.MultiMaterial) {\n      materialArray = node.material.materials;\n    } else if (node.material instanceof Array) {\n      materialArray = node.material;\n    }\n    if (materialArray) {\n      materialArray.forEach(disposeMaterial);\n    } else {\n      disposeMaterial(node.material);\n    }\n  }\n}\n\nexport function setMatrixWorld(object3D, m) {\n  object3D.matrixWorld.copy(m);\n  object3D.matrix = object3D.matrix.getInverse(object3D.parent.matrixWorld).multiply(object3D.matrixWorld);\n  object3D.matrix.decompose(object3D.position, object3D.quaternion, object3D.scale);\n}\n","export function forEachMaterial(object3D, fn) {\n  if (!object3D.material) return;\n\n  if (Array.isArray(object3D.material)) {\n    object3D.material.forEach(fn);\n  } else {\n    fn(object3D.material);\n  }\n}\n\nexport function mapMaterials(object3D, fn) {\n  if (!object3D.material) return;\n\n  if (Array.isArray(object3D.material)) {\n    return object3D.material.map(fn);\n  } else {\n    return fn(object3D.material);\n  }\n}\n","const THREE = AFRAME.THREE;\n\nfunction checkFloatTextureSupport() {\n  const renderer = new THREE.WebGLRenderer();\n\n  const scene = new THREE.Scene();\n  const size = 2;\n  const data = new Float32Array(size * size * 4);\n  const dataTexture = new THREE.DataTexture(data, size, size, THREE.RGBAFormat, THREE.FloatType);\n  const box = new THREE.Mesh(new THREE.PlaneBufferGeometry(1, 1), new THREE.MeshBasicMaterial({ map: dataTexture }));\n  box.material.map.needsUpdate = true;\n  scene.add(box);\n\n  renderer.render(scene, new THREE.Camera());\n  const result = renderer.context.getError() === 0;\n  renderer.dispose();\n  return result;\n}\n\nexport function patchWebGLRenderingContext() {\n  if (/Android.+Firefox/.test(navigator.userAgent)) {\n    // It appears that Galaxy S6 devices falsely report that they support\n    // OES_texture_float in Firefox. This workaround disables float textures\n    // for those devices.\n    // See https://github.com/mozilla/hubs/issues/32 and\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1338656\n    const originalGetExtension = WebGLRenderingContext.prototype.getExtension;\n    const supportsFloatTextures = checkFloatTextureSupport();\n    WebGLRenderingContext.prototype.getExtension = function patchedGetExtension(name) {\n      if (name === \"OES_texture_float\" && !supportsFloatTextures) {\n        return null;\n      }\n      return originalGetExtension.call(this, name);\n    };\n  }\n}\n","module.exports = __webpack_public_path__ + \"assets/LoadingObject_Atom-7dcc3b81897e68b740c1cf12b6cf4c3f.glb\";","module.exports = __webpack_public_path__ + \"assets/sfx/teleport-loop-84e2caa4f62e5c6d6ce339b0c715c06d.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/quickTurn-cda89edb1a7a32e4442cac70cd2694be.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/tap_mellow-673398d6e97818ec4b675708d460bd0f.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/PenSpawn-aac1f534773040f0fafa41e9db76017b.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/PenDraw1-ddbdc17a6beefecbca2685c8c9d0d2d5.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/PicSnapHey-0228ddd197e5a6d88f7bcd2ceb340f8e.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/welcome-0083300978d5dd05eaa376f65761da47.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/quack-1f18502834f8f1db43990b769c2ab193.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/specialquack-6d1a192a6092e8dfed5d3de063755ee2.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/pop-5784f3bcfaf98637147737448d6df8df.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/Eb_blip-8d7302990e83d6798400a6027dce3936.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/tack-0d55b064794faaa1733fcf6bc89cad0c.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/A_bendUp-de32e556413bb2a527fb514984738c70.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/suspense-f27c64840e5ede36ec694c22a030615c.mp3\";","module.exports = __webpack_public_path__ + \"assets/waternormals-4418dde3f6abc21dc32506acf5f5b093.jpg\";","import { avatars } from \"../assets/avatars/avatars.js\";\n\nconst names = [\n  \"Baers-Pochard\",\n  \"Baikal-Teal\",\n  \"Barrows-Goldeneye\",\n  \"Blue-Billed\",\n  \"Blue-Duck\",\n  \"Blue-Winged\",\n  \"Brown-Teal\",\n  \"Bufflehead\",\n  \"Canvasback\",\n  \"Cape-Shoveler\",\n  \"Chestnut-Teal\",\n  \"Chiloe-Wigeon\",\n  \"Cinnamon-Teal\",\n  \"Comb-Duck\",\n  \"Common-Eider\",\n  \"Common-Goldeneye\",\n  \"Common-Merganser\",\n  \"Common-Pochard\",\n  \"Common-Scoter\",\n  \"Common-Shelduck\",\n  \"Cotton-Pygmy\",\n  \"Crested-Duck\",\n  \"Crested-Shelduck\",\n  \"Eatons-Pintail\",\n  \"Falcated\",\n  \"Ferruginous\",\n  \"Freckled-Duck\",\n  \"Gadwall\",\n  \"Garganey\",\n  \"Greater-Scaup\",\n  \"Green-Pygmy\",\n  \"Grey-Teal\",\n  \"Hardhead\",\n  \"Harlequin\",\n  \"Hartlaubs\",\n  \"Hooded-Merganser\",\n  \"Hottentot-Teal\",\n  \"Kelp-Goose\",\n  \"King-Eider\",\n  \"Lake-Duck\",\n  \"Laysan-Duck\",\n  \"Lesser-Scaup\",\n  \"Long-Tailed\",\n  \"Maccoa-Duck\",\n  \"Mallard\",\n  \"Mandarin\",\n  \"Marbled-Teal\",\n  \"Mellers-Duck\",\n  \"Merganser\",\n  \"Northern-Pintail\",\n  \"Orinoco-Goose\",\n  \"Paradise-Shelduck\",\n  \"Plumed-Whistler\",\n  \"Puna-Teal\",\n  \"Pygmy-Goose\",\n  \"Radjah-Shelduck\",\n  \"Red-Billed\",\n  \"Red-Crested\",\n  \"Red-Shoveler\",\n  \"Ring-Necked\",\n  \"Ringed-Teal\",\n  \"Rosy-Billed\",\n  \"Ruddy-Shelduck\",\n  \"Salvadoris-Teal\",\n  \"Scaly-Sided\",\n  \"Shelduck\",\n  \"Shoveler\",\n  \"Silver-Teal\",\n  \"Smew\",\n  \"Spectacled-Eider\",\n  \"Spot-Billed\",\n  \"Spotted-Whistler\",\n  \"Steamerduck\",\n  \"Stellers-Eider\",\n  \"Sunda-Teal\",\n  \"Surf-Scoter\",\n  \"Tufted-Duck\",\n  \"Velvet-Scoter\",\n  \"Wandering-Whistler\",\n  \"Whistling-duck\",\n  \"White-Backed\",\n  \"White-Cheeked\",\n  \"White-Winged\",\n  \"Wigeon\",\n  \"Wood-Duck\",\n  \"Yellow-Billed\"\n];\n\nfunction selectRandom(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nexport function generateRandomName() {\n  return `${selectRandom(names)}-${Math.floor(10000 + Math.random() * 10000)}`;\n}\n\nexport const avatarIds = avatars.map(av => av.id);\n\nexport function generateDefaultProfile() {\n  return {\n    avatarId: selectRandom(avatarIds)\n  };\n}\n","import { Validator } from \"jsonschema\";\nimport merge from \"deepmerge\";\nimport Cookies from \"js-cookie\";\nimport jwtDecode from \"jwt-decode\";\n\nconst LOCAL_STORE_KEY = \"___hubs_store\";\nconst STORE_STATE_CACHE_KEY = Symbol();\nconst OAUTH_FLOW_CREDENTIALS_KEY = \"ret-oauth-flow-account-credentials\";\nconst validator = new Validator();\nimport { EventTarget } from \"event-target-shim\";\nimport { generateDefaultProfile, generateRandomName } from \"../utils/identity.js\";\n\n// Durable (via local-storage) schema-enforced state that is meant to be consumed via forward data flow.\n// (Think flux but with way less incidental complexity, at least for now :))\nexport const SCHEMA = {\n  id: \"/HubsStore\",\n\n  definitions: {\n    profile: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        displayName: { type: \"string\", pattern: \"^[A-Za-z0-9-]{3,32}$\" },\n        avatarId: { type: \"string\" },\n        personalAvatarId: { type: \"string\" }\n      }\n    },\n\n    credentials: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        token: { type: [\"null\", \"string\"] },\n        email: { type: [\"null\", \"string\"] }\n      }\n    },\n\n    activity: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        hasFoundFreeze: { type: \"boolean\" },\n        hasChangedName: { type: \"boolean\" },\n        hasAcceptedProfile: { type: \"boolean\" },\n        lastEnteredAt: { type: \"string\" },\n        hasPinned: { type: \"boolean\" },\n        hasRotated: { type: \"boolean\" },\n        hasRecentered: { type: \"boolean\" },\n        hasScaled: { type: \"boolean\" },\n        hasHoveredInWorldHud: { type: \"boolean\" },\n        hasOpenedShare: { type: \"boolean\" },\n        entryCount: { type: \"number\" }\n      }\n    },\n\n    settings: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        lastUsedMicDeviceId: { type: \"string\" }\n      }\n    },\n\n    // Legacy\n    confirmedDiscordRooms: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n\n    confirmedBroadcastedRooms: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n\n    uploadPromotionTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          fileId: { type: \"string\" },\n          promotionToken: { type: \"string\" }\n        }\n      }\n    },\n\n    creatorAssignmentTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          creatorAssignmentToken: { type: \"string\" }\n        }\n      }\n    },\n\n    embedTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          embedToken: { type: \"string\" }\n        }\n      }\n    },\n\n    onLoadActions: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          action: { type: \"string\" },\n          args: { type: \"object\" }\n        }\n      }\n    }\n  },\n\n  type: \"object\",\n\n  properties: {\n    profile: { $ref: \"#/definitions/profile\" },\n    credentials: { $ref: \"#/definitions/credentials\" },\n    activity: { $ref: \"#/definitions/activity\" },\n    settings: { $ref: \"#/definitions/settings\" },\n    confirmedDiscordRooms: { $ref: \"#/definitions/confirmedDiscordRooms\" }, // Legacy\n    confirmedBroadcastedRooms: { $ref: \"#/definitions/confirmedBroadcastedRooms\" },\n    uploadPromotionTokens: { $ref: \"#/definitions/uploadPromotionTokens\" },\n    creatorAssignmentTokens: { $ref: \"#/definitions/creatorAssignmentTokens\" },\n    embedTokens: { $ref: \"#/definitions/embedTokens\" },\n    onLoadActions: { $ref: \"#/definitions/onLoadActions\" }\n  },\n\n  additionalProperties: false\n};\n\nexport default class Store extends EventTarget {\n  constructor() {\n    super();\n\n    if (localStorage.getItem(LOCAL_STORE_KEY) === null) {\n      localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify({}));\n    }\n\n    // When storage is updated in another window\n    window.addEventListener(\"storage\", e => {\n      if (e.key !== LOCAL_STORE_KEY) return;\n      delete this[STORE_STATE_CACHE_KEY];\n      this.dispatchEvent(new CustomEvent(\"statechanged\"));\n    });\n\n    this.update({\n      activity: {},\n      settings: {},\n      credentials: {},\n      profile: {},\n      confirmedDiscordRooms: [],\n      confirmedBroadcastedRooms: [],\n      uploadPromotionTokens: [],\n      creatorAssignmentTokens: [],\n      embedTokens: [],\n      onLoadActions: []\n    });\n\n    const oauthFlowCredentials = Cookies.getJSON(OAUTH_FLOW_CREDENTIALS_KEY);\n    if (oauthFlowCredentials) {\n      this.update({ credentials: oauthFlowCredentials });\n      this.resetToRandomLegacyAvatar();\n      Cookies.remove(OAUTH_FLOW_CREDENTIALS_KEY);\n    }\n  }\n\n  // Initializes store with any default bits\n  init = () => {\n    this.update({\n      profile: { ...generateDefaultProfile(), ...(this.state.profile || {}) }\n    });\n\n    // Regenerate name to encourage users to change it.\n    if (!this.state.activity.hasChangedName) {\n      this.update({ profile: { displayName: generateRandomName() } });\n    }\n  };\n\n  resetToRandomLegacyAvatar = () => {\n    this.update({\n      profile: { ...(this.state.profile || {}), ...generateDefaultProfile() }\n    });\n  };\n\n  get state() {\n    if (!this.hasOwnProperty(STORE_STATE_CACHE_KEY)) {\n      this[STORE_STATE_CACHE_KEY] = JSON.parse(localStorage.getItem(LOCAL_STORE_KEY));\n    }\n\n    return this[STORE_STATE_CACHE_KEY];\n  }\n\n  get credentialsAccountId() {\n    if (this.state.credentials.token) {\n      return jwtDecode(this.state.credentials.token).sub;\n    } else {\n      return null;\n    }\n  }\n\n  resetConfirmedBroadcastedRooms() {\n    this.clearStoredArray(\"confirmedBroadcastedRooms\");\n  }\n\n  resetTipActivityFlags() {\n    this.update({\n      activity: { hasRotated: false, hasPinned: false, hasRecentered: false, hasScaled: false, entryCount: 0 }\n    });\n  }\n\n  bumpEntryCount() {\n    const currentEntryCount = this.state.activity.entryCount || 0;\n    this.update({ activity: { entryCount: currentEntryCount + 1 } });\n  }\n\n  // Sets a one-time action to perform the next time the page loads\n  enqueueOnLoadAction(action, args) {\n    this.update({ onLoadActions: [{ action, args }] });\n  }\n\n  executeOnLoadActions(sceneEl) {\n    for (let i = 0; i < this.state.onLoadActions.length; i++) {\n      const { action, args } = this.state.onLoadActions[i];\n\n      if (action === \"emit_scene_event\") {\n        sceneEl.emit(args.event, args.detail);\n      }\n    }\n\n    this.clearOnLoadActions();\n  }\n\n  clearOnLoadActions() {\n    this.clearStoredArray(\"onLoadActions\");\n  }\n\n  clearStoredArray(key) {\n    const overwriteMerge = (destinationArray, sourceArray) => sourceArray;\n    const update = {};\n    update[key] = [];\n\n    this.update(update, { arrayMerge: overwriteMerge });\n  }\n\n  update(newState, mergeOpts) {\n    const finalState = merge(this.state, newState, mergeOpts);\n    const { valid } = validator.validate(finalState, SCHEMA);\n\n    if (!valid) {\n      // Intentionally not including details about the state or validation result here, since we don't want to leak\n      // sensitive data in the error message.\n      throw new Error(`Write to store failed schema validation.`);\n    }\n\n    localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify(finalState));\n    delete this[STORE_STATE_CACHE_KEY];\n\n    if (newState.profile !== undefined) {\n      this.dispatchEvent(new CustomEvent(\"profilechanged\"));\n    }\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    return finalState;\n  }\n}\n","module.exports = __webpack_public_path__ + \"assets/images/hub-preview-white-ccefba3b70ae589a0ca5ae3230c39299.png\";","// Enumeration of spawned object content origins. URL means the content is\n// fetched from a URL, FILE means it was an uploaded/dropped file, and\n// CLIPBOARD means it was raw data pasted in from the clipboard, SPAWNER means\n// it was copied over from a spawner.\nexport const ObjectContentOrigins = {\n  URL: 1,\n  FILE: 2,\n  CLIPBOARD: 3,\n  SPAWNER: 4\n};\n\n// Enumeration of spawnable object types, used for telemetry, which encapsulates\n// both the origin of the content for the object and also the type of content\n// contained in the object.\nexport const ObjectTypes = {\n  URL_IMAGE: 0,\n  URL_VIDEO: 1,\n  URL_MODEL: 2,\n  URL_PDF: 3,\n  URL_AUDIO: 4,\n  //URL_TEXT: 5,\n  //URL_TELEPORTER: 6,\n  FILE_IMAGE: 8,\n  FILE_VIDEO: 9,\n  FILE_MODEL: 10,\n  FILE_PDF: 11,\n  FILE_AUDIO: 12,\n  //FILE_TEXT: 13,\n  CLIPBOARD_IMAGE: 16,\n  CLIPBOARD_VIDEO: 17,\n  CLIPBOARD_MODEL: 18,\n  CLIPBOARD_PDF: 19,\n  CLIPBOARD_AUDIO: 20,\n  //CLIPBOARD_TEXT: 21,\n  SPAWNER_IMAGE: 24,\n  SPAWNER_VIDEO: 25,\n  SPAWNER_MODEL: 26,\n  SPAWNER_PDF: 27,\n  SPAWNER_AUDIO: 28,\n  //SPAWNER_TEXT: 29,\n  CAMERA: 30,\n  UNKNOWN: 31\n};\n\n// Given an origin and three object type values for URL, FILE, and CLIPBOARD\n// origins respectively, return the appropriate one\nfunction objectTypeForOrigin(contentOrigin, urlType, fileType, clipboardType, spawnerType) {\n  if (contentOrigin === ObjectContentOrigins.URL) {\n    return urlType;\n  } else if (contentOrigin === ObjectContentOrigins.FILE) {\n    return fileType;\n  } else if (contentOrigin === ObjectContentOrigins.CLIPBOARD) {\n    return clipboardType;\n  } else {\n    return spawnerType;\n  }\n}\n\n// Lookup table of mime-type prefixes to the set of object types that we should use\n// for objects spawned matching their underlying Content-Type.\nconst objectTypeMimePrefixLookupMap = {\n  \"image/\": [ObjectTypes.URL_IMAGE, ObjectTypes.FILE_IMAGE, ObjectTypes.CLIPBOARD_IMAGE, ObjectTypes.SPAWNER_IMAGE],\n  \"model/\": [ObjectTypes.URL_MODEL, ObjectTypes.FILE_MODEL, ObjectTypes.CLIPBOARD_MODEL, ObjectTypes.SPAWNER_MODEL],\n  \"application/x-zip-compressed\": [\n    ObjectTypes.URL_MODEL,\n    ObjectTypes.FILE_MODEL,\n    ObjectTypes.CLIPBOARD_MODEL,\n    ObjectTypes.SPAWNER_MODEL\n  ],\n  \"video/\": [ObjectTypes.URL_VIDEO, ObjectTypes.FILE_VIDEO, ObjectTypes.CLIPBOARD_VIDEO, ObjectTypes.SPAWNER_VIDEO],\n  \"application/vnd.apple.mpegurl\": [\n    ObjectTypes.URL_VIDEO,\n    ObjectTypes.FILE_VIDEO,\n    ObjectTypes.CLIPBOARD_VIDEO,\n    ObjectTypes.SPAWNER_VIDEO\n  ],\n  \"application/x-mpegurl\": [\n    ObjectTypes.URL_VIDEO,\n    ObjectTypes.FILE_VIDEO,\n    ObjectTypes.CLIPBOARD_VIDEO,\n    ObjectTypes.SPAWNER_VIDEO\n  ],\n  \"audio/\": [ObjectTypes.URL_AUDIO, ObjectTypes.FILE_AUDIO, ObjectTypes.CLIPBOARD_AUDIO, ObjectTypes.SPAWNER_AUDIO],\n  \"application/pdf\": [ObjectTypes.URL_PDF, ObjectTypes.FILE_PDF, ObjectTypes.CLIPBOARD_PDF, ObjectTypes.SPAWNER_PDF]\n};\n\nconst srcSuffixLookupMap = {\n  \".m3u8\": [ObjectTypes.URL_VIDEO, ObjectTypes.FILE_VIDEO, ObjectTypes.CLIPBOARD_VIDEO, ObjectTypes.SPAWNER_VIDEO]\n};\n\n// Given an content origin and the resolved mime type of a piece of content, return\n// the ObjectType, if any, for that content.\nexport function objectTypeForOriginAndContentType(contentOrigin, contentType, src) {\n  for (const prefix in objectTypeMimePrefixLookupMap) {\n    if (contentType.toLowerCase().startsWith(prefix)) {\n      const types = objectTypeMimePrefixLookupMap[prefix];\n      return objectTypeForOrigin(contentOrigin, ...types);\n    }\n  }\n\n  if (src) {\n    for (const suffix in srcSuffixLookupMap) {\n      if (src.toLowerCase().endsWith(suffix)) {\n        const types = srcSuffixLookupMap[suffix];\n        return objectTypeForOrigin(contentOrigin, ...types);\n      }\n    }\n  }\n\n  return ObjectTypes.UNKNOWN;\n}\n","export const avatars = [\n  {\n    id: \"botdefault\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotDefault_Avatar-9f71f8ff22.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botdefault-thumb-42C4C7D3C01D085EAFDAC8BACE591CE6.png\"\n  },\n  {\n    id: \"botbobo\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotBobo_Avatar-f9740a010b.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botbobo-thumb-261278FD5831E9CD89610D15948F23E4.png\"\n  },\n  {\n    id: \"botdom\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotDom_Avatar-0c48bf15a5.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botdom-thumb-1160EB5E81D24F12CE643C520CE1E99E.png\"\n  },\n  {\n    id: \"botgreg\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotGreg_Avatar-98d39797bb.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botgreg-thumb-F2A37F14F9C342EE44DDE9B24DD9B9FC.png\"\n  },\n  {\n    id: \"botguest\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotGuest_Avatar-78cd857332.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botguest-thumb-F7A471250E2C10C2709325C3B02A8BBB.png\"\n  },\n  {\n    id: \"botjim\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotJim_Avatar-d28005a687.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botjim-thumb-A2D195C1A51A082BCED58BD172481B39.png\"\n  },\n  {\n    id: \"botkev\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotKev_Avatar-a95787bb51.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botkev-thumb-90746A7349E3F964C913EA612EE9A53F.png\"\n  },\n  {\n    id: \"botpinky\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotPinky_Avatar-b0b93f8675.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botpinky-thumb-C2E69D4479077766B988DC3EE4F30BE5.png\"\n  },\n  {\n    id: \"botrobert\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotRobert_Avatar-e9554880f3.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botrobert-thumb-9C33F2C752326E2CF4321EAA7BDB4E47.png\"\n  },\n  {\n    id: \"botwoody\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotWoody_Avatar-0140485a23.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botwoody-thumb-F1F1FA7E21301B5AC1D8872B4ED0CC56.png\"\n  }\n];\n","const zeroPos = new THREE.Vector3(0, 0, 0);\nconst zeroQuat = new THREE.Quaternion();\nconst oneScale = new THREE.Vector3(1, 1, 1);\nconst identity = new THREE.Matrix4();\nidentity.identity();\n\n// Patch animation system\nconst bindingSetters = THREE.PropertyBinding.prototype.SetterByBindingTypeAndVersioning;\nconst Versioning = THREE.PropertyBinding.prototype.Versioning;\n\n// For all binding types, monkey patch the setters that require world matrix\n// updates to also flip matrixNeedsUpdate\nfor (let i = 0; i < bindingSetters.length; i++) {\n  const setter = bindingSetters[i][Versioning.MatrixWorldNeedsUpdate];\n  if (!setter) continue;\n\n  bindingSetters[i][Versioning.MatrixWorldNeedsUpdate] = function() {\n    const v = setter.apply(this, arguments);\n    this.targetObject.matrixNeedsUpdate = true;\n    return v;\n  };\n}\n\nTHREE.Object3D.prototype.getWorldPosition = function(target) {\n  if (target === undefined) {\n    console.warn(\"THREE.Object3D: .getWorldPosition() target is now required\");\n    target = new THREE.Vector3();\n  }\n\n  // New function, defined below (used instead of updateMatrixWorld)\n  this.updateMatrices();\n\n  return target.setFromMatrixPosition(this.matrixWorld);\n};\n\nTHREE.Object3D.prototype.getWorldQuaternion = (function() {\n  const position = new THREE.Vector3();\n  const scale = new THREE.Vector3();\n\n  return function getWorldQuaternion(target) {\n    if (target === undefined) {\n      console.warn(\"THREE.Object3D: .getWorldQuaternion() target is now required\");\n      target = new THREE.Quaternion();\n    }\n\n    // New function, defined below (used instead of updateMatrixWorld)\n    this.updateMatrices();\n    this.matrixWorld.decompose(position, target, scale);\n\n    return target;\n  };\n})();\n\nTHREE.Object3D.getWorldScale = (function() {\n  const position = new THREE.Vector3();\n  const quaternion = new THREE.Quaternion();\n\n  return function getWorldScale(target) {\n    if (target === undefined) {\n      console.warn(\"THREE.Object3D: .getWorldScale() target is now required\");\n      target = new THREE.Vector3();\n    }\n\n    // New function, defined below (used instead of updateMatrixWorld)\n    this.updateMatrices();\n    this.matrixWorld.decompose(position, quaternion, target);\n\n    return target;\n  };\n})();\n\nconst handleMatrixModification = o => {\n  if (!o.matrixIsModified) {\n    o.matrixIsModified = true;\n\n    if (o.cachedMatrixWorld) {\n      o.cachedMatrixWorld.copy(o.matrixWorld);\n      o.matrixWorld = o.cachedMatrixWorld;\n    }\n  }\n};\n\nconst updateMatrix = THREE.Object3D.prototype.updateMatrix;\nTHREE.Object3D.prototype.updateMatrix = function() {\n  updateMatrix.apply(this, arguments);\n  handleMatrixModification(this);\n};\n\nconst applyMatrix = THREE.Object3D.prototype.applyMatrix;\nTHREE.Object3D.prototype.applyMatrix = function() {\n  applyMatrix.apply(this, arguments);\n  handleMatrixModification(this);\n};\n\n// By the end of this function this.matrix reflects the updated local matrix\n// and this.matrixWorld reflects the updated world matrix, taking into account\n// parent matrices.\n//\n// forceLocalUpdate - Forces the local matrix to be updated regardless of if it has not\n// been marked dirty.\n//\n// forceWorldUpdate - Forces the world matrix to be updated regardless of if the local matrix\n// has been updated since the last update.\n//\n// skipParents - unless true, all parent matricies are updated before updating this object's\n// local and world matrix.\n//\nTHREE.Object3D.prototype.updateMatrices = function(forceLocalUpdate, forceWorldUpdate, skipParents) {\n  if (!this.hasHadFirstMatrixUpdate) {\n    if (\n      !this.position.equals(zeroPos) ||\n      !this.quaternion.equals(zeroQuat) ||\n      !this.scale.equals(oneScale) ||\n      !this.matrix.equals(identity)\n    ) {\n      // Only update the matrix the first time if its non-identity, this way\n      // this.matrixIsModified will remain false until the default\n      // identity matrix is updated.\n      this.updateMatrix();\n    }\n\n    this.hasHadFirstMatrixUpdate = true;\n    this.matrixWorldNeedsUpdate = true;\n    this.cachedMatrixWorld = this.matrixWorld;\n  } else if (this.matrixNeedsUpdate || this.matrixAutoUpdate || forceLocalUpdate) {\n    this.updateMatrix();\n    if (this.matrixNeedsUpdate) this.matrixNeedsUpdate = false;\n  }\n\n  if (!skipParents && this.parent) {\n    this.parent.updateMatrices(false, forceWorldUpdate, false);\n    this.matrixWorldNeedsUpdate = this.matrixWorldNeedsUpdate || this.parent.childrenNeedMatrixWorldUpdate;\n  }\n\n  if (this.matrixWorldNeedsUpdate || forceWorldUpdate) {\n    if (this.parent === null) {\n      this.matrixWorld.copy(this.matrix);\n    } else {\n      // If the matrix is unmodified, it is the identity matrix,\n      // and hence we can use the parent's world matrix directly.\n      //\n      // Note this assumes all callers will either not pass skipParents=true\n      // *or* will update the parent themselves beforehand as is done in\n      // updateMatrixWorld.\n      if (!this.matrixIsModified) {\n        this.matrixWorld = this.parent.matrixWorld;\n      } else {\n        // Once matrixIsModified === true, this.matrixWorld has been updated to be a local\n        // copy, not a reference to this.parent.matrixWorld (see updateMatrix/applyMatrix)\n        this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix);\n      }\n    }\n\n    this.childrenNeedMatrixWorldUpdate = true;\n    this.matrixWorldNeedsUpdate = false;\n  }\n};\n\n// Computes this object's matrices and then the recursively computes the matrices of all the children.\n//\n// forceWorldUpdate - If true and the object is visible, will force the world matrix to be updated for\n// this node and all of its children.\n//\n// includeInvisible - If true, does not ignore non-visible objects.\nTHREE.Object3D.prototype.updateMatrixWorld = function(forceWorldUpdate, includeInvisible) {\n  if (!this.visible && !includeInvisible) return;\n\n  // Do not recurse upwards, since this is recursing downwards\n  this.updateMatrices(false, forceWorldUpdate, true);\n\n  const children = this.children;\n  const forceChildrenWorldUpdate = this.childrenNeedMatrixWorldUpdate || forceWorldUpdate;\n\n  for (let i = 0, l = children.length; i < l; i++) {\n    children[i].updateMatrixWorld(forceChildrenWorldUpdate, includeInvisible);\n  }\n\n  if (this.childrenNeedMatrixWorldUpdate) this.childrenNeedMatrixWorldUpdate = false;\n};\n\n// Updates this function to use updateMatrices() to avoid extra matrix computations\nTHREE.Object3D.prototype.lookAt = (function() {\n  // This method does not support objects having non-uniformly-scaled parent(s)\n\n  const q1 = new THREE.Quaternion();\n  const m1 = new THREE.Matrix4();\n  const target = new THREE.Vector3();\n  const position = new THREE.Vector3();\n\n  return function lookAt(x, y, z) {\n    if (x.isVector3) {\n      target.copy(x);\n    } else {\n      target.set(x, y, z);\n    }\n\n    const parent = this.parent;\n\n    this.updateMatrices(); // hubs change\n\n    position.setFromMatrixPosition(this.matrixWorld);\n\n    if (this.isCamera || this.isLight) {\n      m1.lookAt(position, target, this.up);\n    } else {\n      m1.lookAt(target, position, this.up);\n    }\n\n    this.quaternion.setFromRotationMatrix(m1);\n\n    if (parent) {\n      m1.extractRotation(parent.matrixWorld);\n      q1.setFromRotationMatrix(m1);\n      this.quaternion.premultiply(q1.inverse());\n    }\n  };\n})();\n","/* eslint-disable */\n\n// Modified version of A-Frame's animation component to set matrixNeedsUpdate = true in the\n// scenario where the transform changes on an object during an animation.\n//\n// Changes are identified w comment // hubs\n//\n// Bugfix added 3/1/19 - If an animation component is removed before its delay setting, then\n// it erroneously restarts.\n\nvar anime = require(\"animejs\").default;\nvar components = AFRAME.components; // hubs\nvar registerComponent = AFRAME.registerComponent; // hubs\n//var THREE = require('../lib/three'); // hubs\nvar utils = AFRAME.utils; // hubs\n\ndelete AFRAME.components.animation; // hubs\n\nvar colorHelperFrom = new THREE.Color();\nvar colorHelperTo = new THREE.Color();\n\nvar getComponentProperty = utils.entity.getComponentProperty;\nvar setComponentProperty = utils.entity.setComponentProperty;\nvar splitCache = {};\n\nvar TYPE_COLOR = \"color\";\nvar PROP_POSITION = \"position\";\nvar PROP_ROTATION = \"rotation\";\nvar PROP_SCALE = \"scale\";\nvar STRING_COMPONENTS = \"components\";\nvar STRING_OBJECT3D = \"object3D\";\n\n/**\n * Animation component for A-Frame using anime.js.\n *\n * The component manually controls the tick by setting `autoplay: false` on anime.js and\n * manually * calling `animation.tick()` in the tick handler. To pause or resume, we toggle a\n * boolean * flag * `isAnimationPlaying`.\n *\n * anime.js animation config for tweenining Javascript objects and values works as:\n *\n *  config = {\n *    targets: {foo: 0.0, bar: '#000'},\n *    foo: 1.0,\n *    bar: '#FFF'\n *  }\n *\n * The above will tween each property in `targets`. The `to` values are set in the root of\n * the config.\n *\n * @member {object} animation - anime.js instance.\n * @member {boolean} animationIsPlaying - Control if animation is playing.\n */\nmodule.exports.Component = registerComponent(\"animation\", {\n  schema: {\n    autoplay: { default: true },\n    delay: { default: 0 },\n    dir: { default: \"\" },\n    dur: { default: 1000 },\n    easing: { default: \"easeInQuad\" },\n    elasticity: { default: 400 },\n    enabled: { default: true },\n    from: { default: \"\" },\n    loop: {\n      default: 0,\n      parse: function(value) {\n        // Boolean or integer.\n        if (value === true || value === \"true\") {\n          return true;\n        }\n        if (value === false || value === \"false\") {\n          return false;\n        }\n        return parseInt(value, 10);\n      }\n    },\n    property: { default: \"\" },\n    startEvents: { type: \"array\" },\n    pauseEvents: { type: \"array\" },\n    resumeEvents: { type: \"array\" },\n    round: { default: false },\n    to: { default: \"\" },\n    type: { default: \"\" },\n    isRawProperty: { default: false }\n  },\n\n  multiple: true,\n\n  init: function() {\n    var self = this;\n\n    this.eventDetail = { name: this.attrName };\n    this.time = 0;\n\n    this.animation = null;\n    this.animationIsPlaying = false;\n    this.onStartEvent = this.onStartEvent.bind(this);\n    this.beginAnimation = this.beginAnimation.bind(this);\n    this.pauseAnimation = this.pauseAnimation.bind(this);\n    this.resumeAnimation = this.resumeAnimation.bind(this);\n\n    this.fromColor = {};\n    this.toColor = {};\n    this.targets = {};\n    this.targetsArray = [];\n\n    this.updateConfigForDefault = this.updateConfigForDefault.bind(this);\n    this.updateConfigForRawColor = this.updateConfigForRawColor.bind(this);\n\n    this.config = {\n      complete: function() {\n        self.animationIsPlaying = false;\n        self.el.emit(\"animationcomplete\", self.eventDetail, false);\n        if (self.id) {\n          self.el.emit(\"animationcomplete__\" + self.id, self.eventDetail, false);\n        }\n      }\n    };\n  },\n\n  update: function(oldData) {\n    var config = this.config;\n    var data = this.data;\n\n    this.animationIsPlaying = false;\n\n    if (!this.data.enabled) {\n      return;\n    }\n\n    if (!data.property) {\n      return;\n    }\n\n    // Base config.\n    config.autoplay = false;\n    config.direction = data.dir;\n    config.duration = data.dur;\n    config.easing = data.easing;\n    config.elasticity = data.elasticity;\n    config.loop = data.loop;\n    config.round = data.round;\n\n    // Start new animation.\n    this.createAndStartAnimation();\n  },\n\n  tick: function(t, dt) {\n    if (!this.animationIsPlaying) {\n      return;\n    }\n    this.time += dt;\n    this.animation.tick(this.time);\n  },\n\n  remove: function() {\n    this.pauseAnimation();\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n  },\n\n  pause: function() {\n    this.paused = true;\n    this.pausedWasPlaying = this.animationIsPlaying;\n    this.pauseAnimation();\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n  },\n\n  /**\n   * `play` handler only for resuming scene.\n   */\n  play: function() {\n    if (!this.paused) {\n      return;\n    }\n    this.paused = false;\n    this.addEventListeners();\n    if (this.pausedWasPlaying) {\n      this.resumeAnimation();\n      this.pausedWasPlaying = false;\n    }\n  },\n\n  /**\n   * Start animation from scratch.\n   */\n  createAndStartAnimation: function() {\n    var data = this.data;\n\n    this.updateConfig();\n    this.animationIsPlaying = false;\n    this.animation = anime(this.config);\n\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n    this.addEventListeners();\n\n    // Wait for start events for animation.\n    if (!data.autoplay || (data.startEvents && data.startEvents.length)) {\n      return;\n    }\n\n    // Delay animation.\n    if (data.delay) {\n      // hubs\n      this.delayTimeout = setTimeout(this.beginAnimation, data.delay);\n      return;\n    }\n\n    // Play animation.\n    this.beginAnimation();\n  },\n\n  /**\n   * This is before animation start (including from startEvents).\n   * Set to initial state (config.from, time = 0, seekTime = 0).\n   */\n  beginAnimation: function() {\n    this.updateConfig();\n    this.time = 0;\n    this.animationIsPlaying = true;\n    this.stopRelatedAnimations();\n    this.el.emit(\"animationbegin\", this.eventDetail, false);\n  },\n\n  pauseAnimation: function() {\n    this.animationIsPlaying = false;\n  },\n\n  resumeAnimation: function() {\n    this.animationIsPlaying = true;\n  },\n\n  /**\n   * startEvents callback.\n   */\n  onStartEvent: function() {\n    if (!this.data.enabled) {\n      return;\n    }\n\n    this.updateConfig();\n    if (this.animation) {\n      this.animation.pause();\n    }\n    this.animation = anime(this.config);\n\n    // Include the delay before each start event.\n    if (this.data.delay) {\n      setTimeout(this.beginAnimation, this.data.delay);\n      return;\n    }\n    this.beginAnimation();\n  },\n\n  /**\n   * rawProperty: true and type: color;\n   */\n  updateConfigForRawColor: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var from;\n    var key;\n    var to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForRawColor)) {\n      return;\n    }\n\n    from = data.from === \"\" ? getRawProperty(el, data.property) : data.from;\n    to = data.to;\n\n    // Use r/g/b vector for color type.\n    this.setColorConfig(from, to);\n    from = this.fromColor;\n    to = this.toColor;\n\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) {\n      config[key] = to[key];\n    }\n\n    config.update = (function() {\n      var lastValue = {};\n      return function(anim) {\n        var value;\n        value = anim.animatables[0].target;\n        // For animation timeline.\n        if (value.r === lastValue.r && value.g === lastValue.g && value.b === lastValue.b) {\n          return;\n        }\n\n        setRawProperty(el, data.property, value, data.type);\n      };\n    })();\n  },\n\n  /**\n   * Stuff property into generic `property` key.\n   */\n  updateConfigForDefault: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var from;\n    var isBoolean;\n    var isNumber;\n    var to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForDefault)) {\n      return;\n    }\n\n    if (data.from === \"\") {\n      // Infer from.\n      from = isRawProperty(data) ? getRawProperty(el, data.property) : getComponentProperty(el, data.property);\n    } else {\n      // Explicit from.\n      from = data.from;\n    }\n\n    to = data.to;\n\n    isNumber = !isNaN(from || to);\n    if (isNumber) {\n      from = parseFloat(from);\n      to = parseFloat(to);\n    } else {\n      from = from ? from.toString() : from;\n      to = to ? to.toString() : to;\n    }\n\n    // Convert booleans to integer to allow boolean flipping.\n    isBoolean = data.to === \"true\" || data.to === \"false\" || data.to === true || data.to === false;\n    if (isBoolean) {\n      from = data.from === \"true\" || data.from === true ? 1 : 0;\n      to = data.to === \"true\" || data.to === true ? 1 : 0;\n    }\n\n    this.targets.aframeProperty = from;\n    config.targets = this.targets;\n    config.aframeProperty = to;\n    config.update = (function() {\n      var lastValue;\n\n      return function(anim) {\n        var value;\n        value = anim.animatables[0].target.aframeProperty;\n\n        // Need to do a last value check for animation timeline since all the tweening\n        // begins simultaenously even if the value has not changed. Also better for perf\n        // anyways.\n        if (value === lastValue) {\n          return;\n        }\n        lastValue = value;\n\n        if (isBoolean) {\n          value = value >= 1;\n        }\n\n        if (isRawProperty(data)) {\n          setRawProperty(el, data.property, value, data.type);\n        } else {\n          setComponentProperty(el, data.property, value);\n        }\n      };\n    })();\n  },\n\n  /**\n   * Extend x/y/z/w onto the config.\n   * Update vector by modifying object3D.\n   */\n  updateConfigForVector: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var key;\n    var from;\n    var to;\n\n    // Parse coordinates.\n    from =\n      data.from !== \"\"\n        ? utils.coordinates.parse(data.from) // If data.from defined, use that.\n        : getComponentProperty(el, data.property); // If data.from not defined, get on the fly.\n    to = utils.coordinates.parse(data.to);\n\n    if (data.property === PROP_ROTATION) {\n      toRadians(from);\n      toRadians(to);\n    }\n\n    // Set to and from.\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) {\n      config[key] = to[key];\n    }\n\n    // If animating object3D transformation, run more optimized updater.\n    if (data.property === PROP_POSITION || data.property === PROP_ROTATION || data.property === PROP_SCALE) {\n      config.update = (function() {\n        var lastValue = {};\n        return function(anim) {\n          var value = anim.animatables[0].target;\n\n          if (data.property === PROP_SCALE) {\n            value.x = Math.max(0.0001, value.x);\n            value.y = Math.max(0.0001, value.y);\n            value.z = Math.max(0.0001, value.z);\n          }\n\n          // For animation timeline.\n          if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n            return;\n          }\n\n          lastValue.x = value.x;\n          lastValue.y = value.y;\n          lastValue.z = value.z;\n\n          el.object3D[data.property].set(value.x, value.y, value.z);\n          el.object3D.matrixNeedsUpdate = true; // hubs\n        };\n      })();\n      return;\n    }\n\n    // Animating some vector.\n    config.update = (function() {\n      var lastValue = {};\n      return function(anim) {\n        var value = anim.animations[0].target;\n\n        // Animate rotation through radians.\n        // For animation timeline.\n        if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n          return;\n        }\n        lastValue.x = value.x;\n        lastValue.y = value.y;\n        lastValue.z = value.z;\n        setComponentProperty(el, data.property, value);\n      };\n    })();\n  },\n\n  /**\n   * Update the config before each run.\n   */\n  updateConfig: function() {\n    var propType;\n\n    // Route config type.\n    propType = getPropertyType(this.el, this.data.property);\n    if (isRawProperty(this.data) && this.data.type === TYPE_COLOR) {\n      this.updateConfigForRawColor();\n    } else if (propType === \"vec2\" || propType === \"vec3\" || propType === \"vec4\") {\n      this.updateConfigForVector();\n    } else {\n      this.updateConfigForDefault();\n    }\n  },\n\n  /**\n   * Wait for component to initialize.\n   */\n  waitComponentInitRawProperty: function(cb) {\n    var componentName;\n    var data = this.data;\n    var el = this.el;\n    var self = this;\n\n    if (data.from !== \"\") {\n      return false;\n    }\n\n    if (!data.property.startsWith(STRING_COMPONENTS)) {\n      return false;\n    }\n\n    componentName = splitDot(data.property)[1];\n    if (el.components[componentName]) {\n      return false;\n    }\n\n    el.addEventListener(\"componentinitialized\", function wait(evt) {\n      if (evt.detail.name !== componentName) {\n        return;\n      }\n      cb();\n      // Since the config was created async, create the animation now since we missed it\n      // earlier.\n      self.animation = anime(self.config);\n      el.removeEventListener(\"componentinitialized\", wait);\n    });\n    return true;\n  },\n\n  /**\n   * Make sure two animations on the same property don't fight each other.\n   * e.g., animation__mouseenter=\"property: material.opacity\"\n   *       animation__mouseleave=\"property: material.opacity\"\n   */\n  stopRelatedAnimations: function() {\n    var component;\n    var componentName;\n    for (componentName in this.el.components) {\n      component = this.el.components[componentName];\n      if (componentName === this.attrName) {\n        continue;\n      }\n      if (component.name !== \"animation\") {\n        continue;\n      }\n      if (!component.animationIsPlaying) {\n        continue;\n      }\n      if (component.data.property !== this.data.property) {\n        continue;\n      }\n      component.animationIsPlaying = false;\n    }\n  },\n\n  addEventListeners: function() {\n    var data = this.data;\n    var el = this.el;\n    addEventListeners(el, data.startEvents, this.onStartEvent);\n    addEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    addEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  removeEventListeners: function() {\n    var data = this.data;\n    var el = this.el;\n    removeEventListeners(el, data.startEvents, this.onStartEvent);\n    removeEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    removeEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  // hubs\n  cancelDelayedStart: function() {\n    if (this.delayTimeout) {\n      clearTimeout(this.delayTimeout);\n      this.delayTimeout = null;\n    }\n  },\n\n  setColorConfig: function(from, to) {\n    colorHelperFrom.set(from);\n    colorHelperTo.set(to);\n    from = this.fromColor;\n    to = this.toColor;\n    from.r = colorHelperFrom.r;\n    from.g = colorHelperFrom.g;\n    from.b = colorHelperFrom.b;\n    to.r = colorHelperTo.r;\n    to.g = colorHelperTo.g;\n    to.b = colorHelperTo.b;\n  }\n});\n\n/**\n * Given property name, check schema to see what type we are animating.\n * We just care whether the property is a vector.\n */\nfunction getPropertyType(el, property) {\n  var component;\n  var componentName;\n  var split;\n  var propertyName;\n\n  split = property.split(\".\");\n  componentName = split[0];\n  propertyName = split[1];\n  component = el.components[componentName] || components[componentName];\n\n  // Primitives.\n  if (!component) {\n    return null;\n  }\n\n  // Dynamic schema. We only care about vectors anyways.\n  if (propertyName && !component.schema[propertyName]) {\n    return null;\n  }\n\n  // Multi-prop.\n  if (propertyName) {\n    return component.schema[propertyName].type;\n  }\n\n  // Single-prop.\n  return component.schema.type;\n}\n\n/**\n * Convert object to radians.\n */\nfunction toRadians(obj) {\n  obj.x = THREE.Math.degToRad(obj.x);\n  obj.y = THREE.Math.degToRad(obj.y);\n  obj.z = THREE.Math.degToRad(obj.z);\n}\n\nfunction addEventListeners(el, eventNames, handler) {\n  var i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.addEventListener(eventNames[i], handler);\n  }\n}\n\nfunction removeEventListeners(el, eventNames, handler) {\n  var i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.removeEventListener(eventNames[i], handler);\n  }\n}\n\nfunction getRawProperty(el, path) {\n  var i;\n  var split;\n  var value;\n  split = splitDot(path);\n  value = el;\n  for (i = 0; i < split.length; i++) {\n    value = value[split[i]];\n  }\n  return value;\n}\n\nfunction setRawProperty(el, path, value, type) {\n  var i;\n  var split;\n  var propertyName;\n  var targetValue;\n\n  if (path.startsWith(\"object3D.rotation\")) {\n    value = THREE.Math.degToRad(value);\n  }\n\n  // Walk.\n  split = splitDot(path);\n  targetValue = el;\n  for (i = 0; i < split.length - 1; i++) {\n    targetValue = targetValue[split[i]];\n  }\n  propertyName = split[split.length - 1];\n\n  // Raw color.\n  if (type === TYPE_COLOR) {\n    if (\"r\" in targetValue[propertyName]) {\n      targetValue[propertyName].r = value.r;\n      targetValue[propertyName].g = value.g;\n      targetValue[propertyName].b = value.b;\n    } else {\n      targetValue[propertyName].x = value.r;\n      targetValue[propertyName].y = value.g;\n      targetValue[propertyName].z = value.b;\n    }\n    return;\n  }\n\n  targetValue[propertyName] = value;\n}\n\nfunction splitDot(path) {\n  if (path in splitCache) {\n    return splitCache[path];\n  }\n  splitCache[path] = path.split(\".\");\n  return splitCache[path];\n}\n\nfunction isRawProperty(data) {\n  return data.isRawProperty || data.property.startsWith(STRING_COMPONENTS) || data.property.startsWith(STRING_OBJECT3D);\n}\n","AFRAME.registerComponent(\"ambient-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.AmbientLight();\n    this.el.setObject3D(\"ambient-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n    this.rendererSystem = this.el.sceneEl.systems.renderer;\n  },\n\n  update(prevData) {\n    if (this.data.color !== prevData.color) {\n      this.light.color.set(this.data.color);\n      this.rendererSystem.applyColorCorrection(this.light.color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      this.light.intensity = this.data.intensity;\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"ambient-light\");\n  }\n});\n","/**\n * Instantiates and updates a THREE.AnimationMixer on an entity.\n * @component animation-mixer\n */\nAFRAME.registerComponent(\"animation-mixer\", {\n  initMixer(animations) {\n    this.mixer = new THREE.AnimationMixer(this.el.object3D);\n    this.el.object3D.animations = animations;\n    this.animations = animations;\n  },\n\n  tick: function(t, dt) {\n    if (this.mixer) {\n      this.mixer.update(dt / 1000);\n    }\n  }\n});\n","/**\n * Sets the CSS class on an entity.\n * @component css-class\n */\nAFRAME.registerComponent(\"css-class\", {\n  schema: {\n    type: \"string\"\n  },\n  multiple: true,\n  init() {\n    this.el.classList.add(this.data);\n  },\n  update(oldData) {\n    if (this.data !== oldData) {\n      this.el.classList.remove(oldData);\n      this.el.classList.add(this.data);\n    }\n  },\n  remove() {\n    this.el.classList.remove(this.data);\n  }\n});\n","import Raven from \"raven-js\";\n\nconst ga = window.ga;\n\nexport default function registerTelemetry(trackedPage, trackedTitle) {\n  const sentryDsn = process.env.SENTRY_DSN;\n  const gaTrackingId = process.env.GA_TRACKING_ID;\n\n  if (sentryDsn) {\n    console.log(\"Tracking: Sentry DSN: \" + sentryDsn);\n    Raven.config(sentryDsn).install();\n  }\n\n  if (ga && gaTrackingId) {\n    console.log(\"Tracking: Google Analytics ID: \" + gaTrackingId);\n\n    ga(\"create\", gaTrackingId, \"auto\");\n\n    if (trackedPage) {\n      ga(\"set\", \"page\", trackedPage);\n    }\n\n    if (trackedTitle) {\n      ga(\"set\", \"title\", trackedTitle);\n    }\n\n    ga(\"send\", \"pageview\");\n  }\n}\n","/* global CANNON */\n/**\n * Floats a duck based on its scale.\n * @component duck\n */\nAFRAME.registerComponent(\"duck\", {\n  schema: {\n    initialForce: { default: 0 },\n    maxForce: { default: 6.5 },\n    maxScale: { default: 5 }\n  },\n\n  init: function() {\n    this.physicsSystem = this.el.sceneEl.systems.physics;\n    this.hasBody = false;\n    this.position = new CANNON.Vec3();\n    this.force = new CANNON.Vec3(0, this.data.initialForce, 0);\n    this.initialScale = this.el.object3D.scale.x;\n    this.maxScale = this.data.maxScale * this.initialScale;\n  },\n\n  play: function() {\n    this.physicsSystem.addComponent(this);\n  },\n\n  pause: function() {\n    this.physicsSystem.removeComponent(this);\n  },\n\n  beforeStep: function() {\n    if (this.el.body && NAF.utils.isMine(this.el)) {\n      const currentScale = this.el.object3D.scale.x;\n      const ratio = Math.min(1, (currentScale - this.initialScale) / (this.maxScale - this.initialScale));\n      const force = ratio * this.data.maxForce;\n      if (force > 0) {\n        const angle = Math.random() * Math.PI * 2;\n        const x = Math.cos(angle);\n        const z = Math.sin(angle);\n        this.force.set(x, force, z);\n        this.position.set(x * 0.01, 0, z * 0.01);\n        this.el.object3D.matrixNeedsUpdate = true;\n        this.el.body.applyForce(this.force, this.position);\n      }\n    }\n  }\n});\n","/* global CANNON */\nAFRAME.registerComponent(\"heightfield\", {\n  init() {\n    this.el.addEventListener(\"componentinitialized\", e => {\n      if (e.detail.name === \"static-body\") {\n        this.generateAndAddHeightfield(this.el.components[\"static-body\"]);\n      }\n    });\n    this.el.setAttribute(\"static-body\", { shape: \"none\", mass: 0 });\n  },\n  generateAndAddHeightfield(body) {\n    const { offset, distance, data } = this.data;\n\n    const orientation = new CANNON.Quaternion();\n    orientation.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), -Math.PI / 2);\n\n    const rotation = new CANNON.Quaternion();\n    rotation.setFromAxisAngle(new CANNON.Vec3(0, 1, 0), -Math.PI / 2);\n    rotation.mult(orientation, orientation);\n\n    const cannonOffset = new CANNON.Vec3(offset.x, offset.y, offset.z);\n\n    const shape = new CANNON.Heightfield(data, { elementSize: distance });\n\n    body.addShape(shape, cannonOffset, orientation);\n  }\n});\n","AFRAME.registerComponent(\"hemisphere-light\", {\n  schema: {\n    skyColor: { type: \"color\" },\n    groundColor: { type: \"color\" },\n    intensity: { default: 1.0 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.HemisphereLight();\n    this.light.position.set(0, 0, 0);\n    this.light.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"hemisphere-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n  },\n\n  update(prevData) {\n    if (this.data.skyColor !== prevData.skyColor) {\n      this.light.color.set(this.data.skyColor);\n    }\n\n    if (this.data.groundColor !== prevData.groundColor) {\n      this.light.groundColor.set(this.data.groundColor);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      this.light.intensity = this.data.intensity;\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"hemisphere-light\");\n  }\n});\n","/**\n * Hides entities based on the scene's quality mode\n * @namespace environment\n * @component hide-when-quality\n */\nAFRAME.registerComponent(\"hide-when-quality\", {\n  schema: { type: \"string\", default: \"low\" },\n\n  init() {\n    this.onQualityChanged = this.onQualityChanged.bind(this);\n    this.el.sceneEl.addEventListener(\"quality-changed\", this.onQualityChanged);\n  },\n\n  onQualityChanged(event) {\n    this.updateComponentState(event.detail);\n  },\n\n  update(oldData) {\n    if (this.data !== oldData) {\n      this.updateComponentState(window.APP.quality);\n    }\n  },\n\n  updateComponentState(quality) {\n    this.el.setAttribute(\"visible\", quality !== this.data);\n  }\n});\n","AFRAME.registerComponent(\"point-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    range: { default: 0 },\n    decay: { default: 2 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.PointLight();\n    this.light.shadow.camera.matrixAutoUpdate = true;\n    this.el.setObject3D(\"point-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n    this.rendererSystem = this.el.sceneEl.systems.renderer;\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      const color = new THREE.Color(this.data.color);\n      this.rendererSystem.applyColorCorrection(color);\n      light.color.copy(color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.range !== prevData.range) {\n      light.distance = this.data.range;\n    }\n\n    if (this.data.decay !== prevData.decay) {\n      light.decay = this.data.decay;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"point-light\");\n  }\n});\n","AFRAME.registerComponent(\"spot-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    range: { default: 0 },\n    decay: { default: 2 },\n    innerConeAngle: { default: 0 },\n    outerConeAngle: { default: Math.PI / 4.0 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.SpotLight();\n    this.light.position.set(0, 0, 0);\n    this.light.target.position.set(0, 0, 1);\n    this.light.add(this.light.target);\n    this.light.matrixNeedsUpdate = true;\n    this.light.target.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"spot-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      light.color.set(this.data.color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.range !== prevData.range) {\n      light.distance = this.data.range;\n    }\n\n    if (this.data.decay !== prevData.decay) {\n      light.decay = this.data.decay;\n    }\n\n    if (this.data.innerConeAngle !== prevData.innerConeAngle || this.data.outerConeAngle !== prevData.outerConeAngle) {\n      light.angle = this.data.outerConeAngle;\n      light.penumbra = 1.0 - this.data.innerConeAngle / this.data.outerConeAngle;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"spot-light\");\n  }\n});\n","/* global AFRAME */\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nAFRAME.registerComponent(\"floaty-object\", {\n  schema: {\n    // Make the object locked/kinematic upon load\n    autoLockOnLoad: { default: false },\n\n    // Make the object kinematic immediately upon release\n    autoLockOnRelease: { default: false },\n\n    // On release, modify the gravity based upon gravitySpeedLimit. If less than this, let the object float\n    // otherwise apply releaseGravity.\n    modifyGravityOnRelease: { default: false },\n\n    // Gravity to apply if object is thrown at a speed greated than speed limit.\n    releaseGravity: { default: -2 },\n\n    // If true, the degree to which angular rotation is allowed when floating is reduced (useful for 2d media)\n    reduceAngularFloat: { default: false },\n\n    // Velocity speed limit under which gravity will not be added if modifyGravityOnRelease is true\n    gravitySpeedLimit: { default: 1.85 } // Set to 0 to never apply gravity\n  },\n\n  init() {\n    this.onGrab = this.onGrab.bind(this);\n    this.onRelease = this.onRelease.bind(this);\n  },\n\n  tick() {\n    if (!this.ammoBody) {\n      this.ammoBody = this.el.components[\"ammo-body\"];\n    }\n\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const isHeld = interaction.isHeld(this.el);\n    if (isHeld && !this.wasHeld) {\n      this.onGrab();\n    }\n    if (this.wasHeld && !isHeld) {\n      this.onRelease();\n    }\n\n    if (!isHeld && this._makeStaticWhenAtRest) {\n      const isMine = this.el.components.networked && NAF.utils.isMine(this.el);\n      const linearThreshold = this.ammoBody.data.linearSleepingThreshold;\n      const angularThreshold = this.ammoBody.data.angularSleepingThreshold;\n      const isAtRest =\n        this.ammoBody.body.getLinearVelocity().length2() < linearThreshold * linearThreshold &&\n        this.ammoBody.body.getAngularVelocity().length2() < angularThreshold * angularThreshold;\n\n      if (isAtRest && isMine) {\n        this.el.setAttribute(\"ammo-body\", { type: \"static\" });\n      }\n\n      if (isAtRest || !isMine) {\n        this._makeStaticWhenAtRest = false;\n      }\n    }\n\n    this.wasHeld = isHeld;\n  },\n\n  play() {\n    // We do this in play instead of in init because otherwise NAF.utils.isMine fails\n    if (this.hasBeenHereBefore) return;\n    this.hasBeenHereBefore = true;\n    if (this.el.body) {\n      this._onBodyLoaded();\n    } else {\n      this._onBodyLoaded = this._onBodyLoaded.bind(this);\n      this.el.addEventListener(\"body-loaded\", this._onBodyLoaded, { once: true });\n    }\n  },\n\n  setLocked(locked) {\n    if (this.el.components.networked && !NAF.utils.isMine(this.el)) return;\n\n    this.locked = locked;\n    this.el.setAttribute(\"ammo-body\", { type: locked ? \"kinematic\" : \"dynamic\" });\n  },\n\n  _onBodyLoaded() {\n    if (this.data.autoLockOnLoad) {\n      this.setLocked(true);\n    }\n  },\n\n  onRelease() {\n    if (this.data.modifyGravityOnRelease) {\n      if (\n        this.data.gravitySpeedLimit === 0 ||\n        this.ammoBody.getVelocity().length2() < this.data.gravitySpeedLimit * this.data.gravitySpeedLimit\n      ) {\n        this.el.setAttribute(\"ammo-body\", {\n          gravity: { x: 0, y: 0, z: 0 },\n          angularDamping: this.data.reduceAngularFloat ? 0.98 : 0.5,\n          linearDamping: 0.95,\n          linearSleepingThreshold: 0.1,\n          angularSleepingThreshold: 0.1,\n          collisionFilterMask: COLLISION_LAYERS.HANDS\n        });\n\n        this._makeStaticWhenAtRest = true;\n      } else {\n        this.el.setAttribute(\"ammo-body\", {\n          gravity: { x: 0, y: this.data.releaseGravity, z: 0 },\n          angularDamping: 0.01,\n          linearDamping: 0.01,\n          linearSleepingThreshold: 1.6,\n          angularSleepingThreshold: 2.5,\n          collisionFilterMask: COLLISION_LAYERS.DEFAULT_INTERACTABLE\n        });\n      }\n    } else {\n      this.el.setAttribute(\"ammo-body\", { collisionFilterMask: COLLISION_LAYERS.DEFAULT_INTERACTABLE });\n    }\n\n    if (this.data.autoLockOnRelease) {\n      this.setLocked(true);\n    }\n  },\n\n  onGrab() {\n    this.el.setAttribute(\"ammo-body\", {\n      collisionFilterMask: COLLISION_LAYERS.HANDS\n    });\n    this.setLocked(false);\n  },\n\n  remove() {\n    this.el.removeEventListener(\"body-loaded\", this._onBodyLoaded);\n    if (this.stuckTo) {\n      const stuckTo = this.stuckTo;\n      delete this.stuckTo;\n      stuckTo._unstickObject();\n    }\n  }\n});\n","const sizeVec = new THREE.Vector3();\nconst boundingBoxWorldPositionVec = new THREE.Vector3();\nconst colliderWorldPositionVec = new THREE.Vector3();\n\nAFRAME.registerComponent(\"trigger-volume\", {\n  schema: {\n    colliders: { type: \"selectorAll\" },\n    size: { type: \"vec3\", default: { x: 1, y: 1, z: 1 } },\n    target: { type: \"selector\" },\n    enterComponent: { type: \"string\" },\n    enterProperty: { type: \"string\" },\n    enterValue: {\n      default: \"\",\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    },\n    leaveComponent: { type: \"string\" },\n    leaveProperty: { type: \"string\" },\n    leaveValue: {\n      default: \"\",\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n  init() {\n    this.boundingBox = new THREE.Box3();\n    this.collidingLastFrame = {};\n  },\n  update() {\n    this.el.object3D.getWorldPosition(boundingBoxWorldPositionVec);\n    sizeVec.copy(this.data.size);\n    this.boundingBox.setFromCenterAndSize(boundingBoxWorldPositionVec, sizeVec);\n  },\n  tick() {\n    const colliders = this.data.colliders;\n\n    for (let i = 0; i < colliders.length; i++) {\n      const collider = colliders[i];\n      const object3D = collider.object3D;\n\n      object3D.getWorldPosition(colliderWorldPositionVec);\n      const isColliding = this.boundingBox.containsPoint(colliderWorldPositionVec);\n      const collidingLastFrame = this.collidingLastFrame[object3D.id];\n\n      if (isColliding && !collidingLastFrame) {\n        this.data.target.setAttribute(this.data.enterComponent, this.data.enterProperty, this.data.enterValue);\n      } else if (!isColliding && collidingLastFrame) {\n        this.data.target.setAttribute(this.data.leaveComponent, this.data.leaveProperty, this.data.leaveValue);\n      }\n\n      this.collidingLastFrame[object3D.id] = isColliding;\n    }\n  }\n});\n","// HACK: Setting videoPaused on media-video doesn't work if you are the owner.\n// This component gets around that by calling .togglePlaying() to play/pause the video based on a property change.\nAFRAME.registerComponent(\"video-pause-state\", {\n  schema: {\n    paused: { default: false }\n  },\n\n  init() {\n    this.onPauseStateChange = this.onPauseStateChange.bind(this);\n    this.videoComponent = this.el.components[\"media-video\"];\n\n    if (this.videoComponent) {\n      this.onVideoLoaded();\n    } else {\n      this.onVideoLoaded = this.onVideoLoaded.bind(this);\n      this.el.addEventListener(\"video-loaded\", this.onVideoLoaded);\n    }\n  },\n\n  onVideoLoaded() {\n    this.videoComponent = this.el.components[\"media-video\"];\n    this.video = this.videoComponent.video;\n    this.video.addEventListener(\"pause\", this.onPauseStateChange);\n  },\n\n  onPauseStateChange() {\n    this.el.setAttribute(\"paused\", this.video.paused);\n  },\n\n  update() {\n    if (this.video && this.data.paused !== this.video.paused) {\n      this.videoComponent.togglePlaying();\n    }\n  },\n\n  remove() {\n    this.video.removeEventListener(\"pause\", this.onPauseStateChange);\n    this.el.removeEventListener(\"video-loaded\", this.onVideoLoaded);\n  }\n});\n","/**\n * Logs all events dispatched on an entity\n * @namespace debug\n * @component log-events\n */\nAFRAME.registerComponent(\"log-events\", {\n  init: function() {\n    const el = this.el;\n    const log = this.log.bind(this);\n    const origDispatch = this.el.dispatchEvent;\n    this.el.dispatchEvent = function() {\n      log(Array.from(arguments));\n      return origDispatch.apply(el, arguments);\n    };\n  },\n  log: function([e]) {\n    if ([\"componentchanged\"].includes(e.type)) return;\n    let firstObject = true;\n    const replacer = (k, x) => {\n      if (!x) return x;\n      if (typeof x === \"object\" && x.length === undefined) {\n        if (firstObject) {\n          firstObject = false;\n          return x;\n        }\n        return \"[object]\";\n      }\n      return x;\n    };\n    console.info(`log-events: ${this.el.id} ${e.type} ${JSON.stringify(e.detail, replacer)}`);\n  }\n});\n\n/**\n * Logs all life cycle phases on an entity.\n * @namespace debug\n * @component lifecycle-checker\n */\nAFRAME.registerComponent(\"lifecycle-checker\", {\n  schema: {\n    name: { type: \"string\" },\n    tick: { default: false }\n  },\n  init: function() {\n    this.log(\"init\");\n  },\n  update: function() {\n    this.log(\"update\");\n  },\n  tick: function() {\n    if (this.data.tick) {\n      this.log(\"tick\");\n    }\n  },\n  remove: function() {\n    this.log(\"remove\");\n  },\n  pause: function() {\n    this.log(\"pause\");\n  },\n  play: function() {\n    this.log(\"play\");\n  },\n\n  log: function(method) {\n    console.info(`lifecycle-checker:${this.data.name} ${method}`);\n  }\n});\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport const ReactAudioContext = React.createContext({});\n\nexport const hudHoverSound = \"play_sound-hud_hover_start\";\n\nexport const WithHoverSound = ({ sound, children }) => {\n  return (\n    <ReactAudioContext.Consumer>\n      {context => {\n        return React.cloneElement(children, {\n          onMouseEnter: e => {\n            if (context && context.playSound) {\n              context.playSound(sound || hudHoverSound);\n            }\n            children.props.onMouseEnter && children.props.onMouseEnter(e);\n          }\n        });\n      }}\n    </ReactAudioContext.Consumer>\n  );\n};\n\nWithHoverSound.propTypes = {\n  children: PropTypes.object,\n  sound: PropTypes.string\n};\n","const { Pathfinding } = require(\"three-pathfinding\");\n\nAFRAME.registerSystem(\"nav\", {\n  init: function() {\n    this.pathfinder = new Pathfinding();\n  },\n\n  loadMesh: function(mesh, zone) {\n    this.el.object3D.updateMatrixWorld();\n\n    if (this.mesh && this.mesh.geometry && this.mesh.geometry.dispose) {\n      this.mesh.geometry.dispose();\n    }\n\n    this.mesh = mesh;\n    const geometry = new THREE.Geometry().fromBufferGeometry(mesh.geometry);\n    geometry.applyMatrix(mesh.matrixWorld);\n    this.pathfinder.setZoneData(zone, Pathfinding.createZone(geometry));\n    this.el.sceneEl.emit(\"nav-mesh-loaded\");\n  }\n});\n","/**\n * Listens to events from an event source and re-emits them on this entity\n * @component event-repeater\n */\nAFRAME.registerComponent(\"event-repeater\", {\n  schema: {\n    eventSource: { type: \"selector\" },\n    events: { type: \"array\" }\n  },\n\n  play: function() {\n    this.data.eventListeners = [];\n    const events = this.data.events;\n    for (let i = 0; i < events.length; i++) {\n      const event = events[i];\n      this.data.eventListeners[event] = this._handleEvent.bind(this, event);\n      this.data.eventSource.addEventListener(event, this.data.eventListeners[event]);\n    }\n  },\n\n  pause: function() {\n    const events = this.data.events;\n    for (let i = 0; i < events.length; i++) {\n      const event = events[i];\n      this.data.eventSource.removeEventListener(event, this.data.eventListeners[event]);\n    }\n    this.data.eventListeners = [];\n  },\n\n  _handleEvent: function(event, e) {\n    this.el.emit(event, e.detail);\n  }\n});\n","export function showHoverEffect(el) {\n  const isFrozen = el.sceneEl.is(\"frozen\");\n  const isPinned = el.components.pinnable && el.components.pinnable.data.pinned;\n  const isSpawner = !!el.components[\"super-spawner\"];\n  const canMove =\n    window.APP.hubChannel.can(\"spawn_and_move_media\") && (!isPinned || window.APP.hubChannel.can(\"pin_objects\"));\n  return (isSpawner || !isPinned || isFrozen) && canMove;\n}\n\nexport function canMove(entity) {\n  const isPinned = entity.components.pinnable && entity.components.pinnable.data.pinned;\n  const networkedTemplate = entity && entity.components.networked && entity.components.networked.data.template;\n  const isCamera = networkedTemplate === \"#interactable-camera\";\n  const isPen = networkedTemplate === \"#interactable-pen\";\n  return (\n    window.APP.hubChannel.can(\"spawn_and_move_media\") &&\n    (!isPinned || window.APP.hubChannel.can(\"pin_objects\")) &&\n    (!isCamera || window.APP.hubChannel.can(\"spawn_camera\")) &&\n    (!isPen || window.APP.hubChannel.can(\"spawn_drawing\"))\n  );\n}\n\nfunction indexForNonAuthorizedComponent(nonAuthorizedComponent, schema) {\n  const fullComponent = typeof nonAuthorizedComponent === \"string\";\n  const componentName = fullComponent ? nonAuthorizedComponent : nonAuthorizedComponent.component;\n\n  if (fullComponent) {\n    return schema.components.findIndex(schemaComponent => schemaComponent === componentName);\n  } else {\n    return schema.components.findIndex(\n      schemaComponent =>\n        schemaComponent.component === componentName && schemaComponent.property === nonAuthorizedComponent.property\n    );\n  }\n}\n\nlet nonAuthorizedSchemas = null;\nfunction initializeNonAuthorizedSchemas() {\n  /*\n  Takes the NAF schemas defined in network-schemas.js and produces a data structure of template name to non-authorized\n  component indices:\n  {\n    \"#interactable-media\": [\"4\", \"5\", \"6\"]\n  }\n  */\n  nonAuthorizedSchemas = {};\n  const { schemaDict } = NAF.schemas;\n  for (const template in schemaDict) {\n    if (!schemaDict.hasOwnProperty(template)) continue;\n    const schema = schemaDict[template];\n    nonAuthorizedSchemas[template] = (schema.nonAuthorizedComponents || [])\n      .map(nonAuthorizedComponent => indexForNonAuthorizedComponent(nonAuthorizedComponent, schema))\n      .map(index => index.toString());\n  }\n}\n\nfunction sanitizeMessageData(template, data) {\n  if (nonAuthorizedSchemas === null) {\n    initializeNonAuthorizedSchemas();\n  }\n  const nonAuthorizedIndices = nonAuthorizedSchemas[template];\n  for (const index in data.components) {\n    if (!data.components.hasOwnProperty(index)) continue;\n    if (!nonAuthorizedIndices.includes(index)) {\n      data.components[index] = null;\n    }\n  }\n  return data;\n}\n\nfunction authorizeEntityManipulation(entity, sender, senderPermissions) {\n  const { template, creator } = entity.components.networked.data;\n  const isPinned = entity.components.pinnable && entity.components.pinnable.data.pinned;\n  const isCreator = sender === creator;\n\n  if (template.endsWith(\"-avatar\")) {\n    return isCreator;\n  } else if (template.endsWith(\"-media\")) {\n    return (!isPinned || senderPermissions.pin_objects) && (isCreator || senderPermissions.spawn_and_move_media);\n  } else if (template.endsWith(\"-camera\")) {\n    return isCreator || senderPermissions.spawn_camera;\n  } else if (template.endsWith(\"-pen\")) {\n    return isCreator || senderPermissions.spawn_pen;\n  } else {\n    return false;\n  }\n}\n\nfunction authorizeOrSanitizeMessageData(data, sender, senderPermissions) {\n  const entity = NAF.entities.getEntity(data.networkId);\n  if (!entity) return false;\n\n  if (authorizeEntityManipulation(entity, sender, senderPermissions)) {\n    return true;\n  } else {\n    const { template } = entity.components.networked.data;\n    sanitizeMessageData(template, data);\n    return true;\n  }\n}\n\nconst emptyObject = {};\nexport function authorizeOrSanitizeMessage(message) {\n  const { dataType, from_session_id } = message;\n\n  if (dataType === \"u\" && message.data.isFirstSync && !message.data.persistent) {\n    // The server has already authorized first sync messages that result in an instantiation.\n    return message;\n  }\n\n  const senderPermissions = from_session_id\n    ? window.APP.hubChannel.presence.state[from_session_id].metas[0].permissions\n    : null;\n\n  if (dataType === \"um\") {\n    for (const index in message.data.d) {\n      if (!message.data.d.hasOwnProperty(index)) continue;\n      const authorizedOrSanitized = authorizeOrSanitizeMessageData(\n        message.data.d[index],\n        from_session_id,\n        senderPermissions\n      );\n      if (!authorizedOrSanitized) {\n        message.data.d[index] = emptyObject;\n      }\n    }\n    return message;\n  } else if (dataType === \"u\") {\n    const authorizedOrSanitized = authorizeOrSanitizeMessageData(message.data, from_session_id, senderPermissions);\n    if (authorizedOrSanitized) {\n      return message;\n    } else {\n      return emptyObject;\n    }\n  } else if (dataType === \"r\") {\n    const entity = NAF.entities.getEntity(message.data.networkId);\n    if (!entity) return emptyObject;\n    if (authorizeEntityManipulation(entity, from_session_id, senderPermissions)) {\n      return message;\n    } else {\n      return emptyObject;\n    }\n  } else {\n    // Fall through for other data types. Namely, \"drawing-<networkId>\" messages at the moment.\n    return message;\n  }\n}\n"],"sourceRoot":""}