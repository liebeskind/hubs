{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/utils/phoenix-utils.js","webpack:///./src/utils/history.js","webpack:///./src/utils/avatar-utils.js","webpack:///./src/materials/MobileStandardMaterial.js","webpack:///./src/storage/media-search-store.js","webpack:///./src/utils/media-url-utils.js","webpack:///./src/components/gltf-model-plus.js","webpack:///./src/utils/promisify-worker.js","webpack:///./src/components/hoverable-visuals.js","webpack:///./src/avatar.js","webpack:///./src/components/environment-map.js","webpack:///./src/utils/media-highlight-frag.glsl","webpack:///./src/assets/images/cubemap/posx.jpg","webpack:///./src/assets/images/cubemap/negx.jpg","webpack:///./src/assets/images/cubemap/posy.jpg","webpack:///./src/assets/images/cubemap/negy.jpg","webpack:///./src/assets/images/cubemap/posz.jpg","webpack:///./src/assets/images/cubemap/negz.jpg","webpack:///./src/utils/disable-ios-zoom.js","webpack:///./src/App.js","webpack:///./src/airtable.js","webpack:///./src/assets/images/warning_icon.png","webpack:///./src/assets/images/warning_icon@2x.png","webpack:///./src/react-components/avatar-preview.js","webpack:///./src/assets/stylesheets/avatar-preview.scss","webpack:///./src/assets/stylesheets/avatar.scss","webpack:///./src/utils/qs_truthy.js","webpack:///./src/axonpark/messages.js","webpack:///./src/utils/i18n.js","webpack:///./src/utils/logging.js","webpack:///./src/loaders/HubsTextureLoader.js","webpack:///./src/utils/media-utils.js","webpack:///./src/utils/three-utils.js","webpack:///./src/utils/material-utils.js","webpack:///./src/utils/identity.js","webpack:///./src/storage/store.js","webpack:///./src/assets/images/hub-preview-white.png","webpack:///./src/object-types.js","webpack:///./src/assets/avatars/avatars.js","webpack:///./src/utils/image-bitmap-utils.js","webpack:///./src/utils/next-tick.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","4","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","document","createElement","getReticulumFetchUrl","path","absolute","reticulumMeta","invalidatedReticulumMetaThisSession","invalidateReticulumMeta","_invalidateReticulumMeta","this","arguments","getReticulumMeta","_getReticulumMeta","querySelector","version","getAttribute","pool","phx_host","fetch","then","_ref2","_asyncToGenerator","res","json","_x6","phxHostOverride","URLSearchParams","location","search","connectToReticulum","_connectToReticulum","debug","params","qs","getNewSocketUrl","_ref3","socketProtocol","protocol","socketHost","socketPort","process","RETICULUM_SOCKET_SERVER","URL","port","socketUrl","console","log","socketSettings","logger","kind","msg","socket","Socket","connect","onError","endPointPath","endPoint","pathname","newEndPoint","getLandingPageForPhoto","photoUrl","parsedUrl","replace","fetchReticulumAuthenticated","url","method","payload","token","APP","store","state","credentials","retUrl","headers","content-type","authorization","body","JSON","stringify","_ref","text","parse","e","_x","createAndRedirectToNewHub","_x2","_x3","_x4","_x5","_createAndRedirectToNewHub","sceneId","sceneUrl","createUrl","assets","Name","SceneUrl","record","airtableAssets","find","fields","hub","default_environment_gltf_bundle_url","Store","error","update","email","creatorAssignmentToken","creator_assignment_token","creatorAssignmentTokens","hubId","hub_id","embedToken","embed_token","embedTokens","host","getPresenceEntryForSession","presences","sessionId","presence","entries","k","metas","getPresenceContextForSession","context","getPresenceProfileForSession","profile","migrateChannelToSocket","oldChannel","channel","topic","bindings","item","on","event","callback","pushBuffer","timeout","oldJoinPush","joinPush","join","recHooks","receive","status","Promise","resolve","discordBridgesForPresences","channels","values","discordBridges","Array","map","b","pushOrUpdateHistory","history","v","detail","newPathname","newSearch","newLength","__historyLength","_objectSpread","__duplicate","undefined","isDuplicate","pushHistoryState","replaceHistoryState","pushHistoryPath","clearHistoryState","popToBeginningOfHubHistory","navigateToPriorPage","len","unsubscribe","listen","go","sluglessPath","split","withSlug","AVATAR_TYPES","LEGACY","SKINNABLE","legacyAvatarIds","avatars","a","id","getAvatarType","avatarId","indexOf","startsWith","resp","fetchAvatar","_fetchAvatar","avatar_id","gltf_url","avatar","model","fetchSkinnableAvatar","proxiedUrlFor","getAvatarSrc","fetchAvatarGltfUrl","getAvatarThumbnailUrl","_getAvatarThumbnailUrl","thumbnail","files","VERTEX_SHADER","FRAGMENT_SHADER","MobileStandardMaterial","THREE","ShaderMaterial","[object Object]","args","super","_defineProperty","material","parameters","vertexShader","fragmentShader","uniforms","uvTransform","Matrix3","diffuse","color","opacity","aoMapIntensity","aoMap","emissive","emissiveMap","fog","lights","transparent","alphaTest","skinning","morphTargets","vertexColors","mobileMaterial","clone","fromStandardMaterial","SOURCES","EMPTY_RESULT","meta","URL_SOURCE_TO_TO_API_SOURCE","scenes","images","videos","youtube","gifs","sketchfab","poly","twitch","favorites","MEDIA_SOURCE_DEFAULT_FILTERS","SEARCH_CONTEXT_PARAMS","MediaSearchStore","EventTarget","constructor","_this","dispatchEvent","CustomEvent","urlSource","getUrlMediaSource","previousSource","urlParams","requestIndex","currentRequestIndex","searchParams","locationSearchParams","isMy","param","set","source","navigator","languages","singular","credentialsAccountId","toString","lastSavedUrl","isFetching","nextCursor","next_cursor","lastFetchedUrl","legacyAvatar","type","preview","width","height","gltfs","delta","goBack","filter","query","delete","keepSource","keepNav","_stashedParams","_stashedSource","q","_sourceNavigate","hideNav","useLastStashedParams","currentQuery","getSearchClearedSearchParams","useValue","hasAccountWithAvatars","_hasAccountWithAvatars","substring","stashLastSearchParams","_stashLastSearchParams","hasMediaPath","setHistory","_update","__webpack_exports__","scaledThumbnailUrlFor","getCustomGLTFParserURLResolver","guessContentType","isHubsSceneUrl","isHubsRoomUrl","isHubsDestinationUrl","isHubsAvatarUrl","nonCorsProxyDomains","CORS_PROXY_SERVER","commonKnownContentTypes","gltf","glb","png","jpg","jpeg","pdf","mp4","mp3","farsparkEncodeUrl","str","btoa","encodeURIComponent","_","p1","String","fromCharCode","b64EncodeUnicode","urlHostname","hostname","index","hasIndex","domain","endsWith","gltfUrl","test","corsProxyPrefix","originalUrlParts","decodeURIComponent","dataUrlRegex","matches","match","extension","pop","hubsSceneRegex","hubsAvatarRegex","hubsRoomRegex","Mesh","raycast","acceleratedRaycast","gltfCache","Map","src","cache","count","retain","has","cacheItem","release","scene","traverse","disposeNode","inflightGltfs","extractZipFile","promisifyWorker","SketchfabZipWorker","defaultInflator","el","componentName","componentData","AFRAME","components","Error","multiple","isArray","setAttribute","cloneSkinnedMesh","cloneLookup","parallelTraverse","children","sourceNode","clonedNode","isMesh","geometry","boundsTree","sourceMesh","isSkinnedMesh","sourceBones","skeleton","bones","clonedMesh","sourceBone","bindMatrix","cloneGltf","animations","getHubsComponents","node","hubsComponents","userData","gltfExtensions","MOZ_hubs_components","HUBS_components","legacyComponents","GLTFModelPlus","registerComponent","componentKey","inflator","inflateEntities","indexToEntityMap","templates","isRoot","modelToWorldScale","childEntities","child","entityComponents","append","className","uuid","classList","add","rotation","order","setFromQuaternion","quaternion","object3D","position","copy","scale","multiplyScalar","matrixNeedsUpdate","matrixAutoUpdate","matrix","identity","decompose","setObject3D","toLowerCase","parent","gltfIndex","attachTemplate","root","templateRoot","targetEls","querySelectorAll","cloneNode","attributes","appendChild","loadGLTF","_loadGLTF","contentType","preferredTechnique","onProgress","jsonPreprocessor","fileMap","includes","loadingManager","LoadingManager","setURLModifier","gltfLoader","GLTFLoader","parser","reject","createParser","textureLoader","extensions","oldHeightfieldNode","nodes","heightfield","runMigration","materials","MOZ_alt_materials","altMaterialIndex","extras","Object3D","DefaultMatrixAutoUpdate","mapMaterials","isMeshStandardMaterial","keys","forEach","revokeObjectURL","schema","useCache","default","inflate","batch","init","quality","loadTemplates","applySrc","remove","sceneEl","systems","batchManagerSystem","removeObject","object3DMap","mesh","templateEl","importNode","firstElementChild","content","loadModel","technique","promise","_this2","charAt","assetEl","getElementById","lastSrc","inflatedEl","warn","disposeLastInflatedEl","emit","addObject","initMixer","obj","hasBufferGeometry","isBufferGeometry","hasBoundsTree","geo","triCount","MeshBVH","strategy","maxDepth","object3DToSet","nextTick","inflatedEntity","prop","inflateComponents","rewires","environmentMapComponent","applyEnvironmentMap","f","format","parentNode","removeChild","x","dispose","removeAttribute","worker","nextItemId","outstanding","onmessage","err","handlers","transfer","postMessage","validMaterials","_utils_material_utils__WEBPACK_IMPORTED_MODULE_0__","interactorOneTransform","interactorTwoTransform","enableSweepingEffect","boundingSphere","Sphere","sweepParams","boundingBox","forEachMaterial","contains","meshToEl","tick","time","isPinned","pinnable","pinned","isSpawner","isFrozen","is","hideDueToPinning","interactorOne","interactorTwo","interaction","leftHand","hovered","held","options","entity","rightRemote","rightHand","matrixWorld","toArray","worldY","elements","scaledRadius","y","radius","uniform","hubs_EnableSweepingEffect","hubs_IsFrozen","hubs_SweepParams","hubs_HighlightInteractorOne","hubs_InteractorOnePos","hubs_HighlightInteractorTwo","hubs_InteractorTwoPos","hubs_Time","BUILD_VERSION","addLocaleData","en","disableiOSZoom","App","AvatarUI","React","Component","props","forceUpdate","setState","preventDefault","airtableAssetsInitialState","componentDidMount","addEventListener","storeUpdated","refetchAvatar","componentWillUnmount","removeEventListener","render","react__WEBPACK_IMPORTED_MODULE_4___default","styles","avatarLanding","classNames","box","darkened","selectedAvatarId","isSelected","onSubmit","setAvatar","title","attributions","creator","_react_components_avatar_preview__WEBPACK_IMPORTED_MODULE_12__","avatarGltfUrl","selectedMessage","react_intl__WEBPACK_IMPORTED_MODULE_7__","disabled","formSubmit","logo","DarkLogo","PropTypes","string","intl","ReactDOM","locale","lang","messages","createDefaultEnvironmentMap","_createDefaultEnvironmentMap","urls","cubeMapPosX","cubeMapNegX","cubeMapPosY","cubeMapNegY","cubeMapPosZ","cubeMapNegZ","texture","CubeTextureLoader","load","RGBFormat","environmentMap","updateEnvironmentMap","envMap","needsUpdate","detect_browser__WEBPACK_IMPORTED_MODULE_0__","detectOS","userAgent","lastTouchAtMs","ev","now","Date","getTime","isDoubleTouch","_storage_store__WEBPACK_IMPORTED_MODULE_0__","_storage_media_search_store__WEBPACK_IMPORTED_MODULE_1__","mediaSearchStore","setQuality","Airtable","configure","endpointUrl","apiKey","base","Icon","airtableMessages","select","view","firstPage","records","TEXTURE_PROPS","base_map","emissive_map","normal_map","orm_map","ALL_MAPS","createRenderer","canvas","alpha","useDevicePixelRatio","getContext","depth","antialias","premultipliedAlpha","preserveDrawingBuffer","powerPreference","renderer","WebGLRenderer","gammaOutput","gammaFactor","physicallyCorrectLights","setPixelRatio","devicePixelRatio","createImageBitmapFromURL","blob","createImageBitmap","ORBIT_ANGLE","Euler","Math","DEG2RAD","DEFAULT_MARGIN","fitBoxInFrustum","camera","center","margin","halfYExtents","max","min","halfVertFOV","degToRad","fov","tan","z","applyEuler","lookAt","AvatarPreview","Scene","PerspectiveCamera","clientWidth","clientHeight","controls","OrbitControls","enablePan","light","DirectionalLight","HemisphereLight","target","loadPreviewAvatar","clock","Clock","snapshotCanvas","snapshotCamera","snapshotRenderer","setClearAlpha","previewRenderer","setClearColor","setAnimationLoop","dt","getDelta","mixer","resize","parentElement","offsetWidth","offsetHeight","setSize","aspect","updateProjectionMatrix","resetCamera","loading","Box3","Vector3","setFromObject","getCenter","domElement","imageBitmaps","img","disposeImageBitmap","oldProps","applyMaps","previewMesh","getObjectByName","idleAnimation","AnimationMixer","action","clipAction","enabled","setLoop","LoopRepeat","Infinity","play","idleAnimationAction","getImage","onUpdate","image","originalMaps","all","bm","stop","toBlob","newProps","mapName","applyMap","applyMapToPreview","File","revertMap","react__WEBPACK_IMPORTED_MODULE_2___default","_assets_images_warning_icon_png__WEBPACK_IMPORTED_MODULE_0___default","srcSet","_assets_images_warning_icon_2x_png__WEBPACK_IMPORTED_MODULE_1___default","react_intl__WEBPACK_IMPORTED_MODULE_4__","ref","injectIntl","withRef","avatar-landing","form-submit","selected-message","qsTruthy","val","auth.verified-title","auth.verified","auth.spoke-verified","sign-in.prompt","sign-in.auth-started","sign-in.pin","sign-in.pin-complete","sign-in.unpin","sign-in.unpin-complete","sign-in.change-scene","sign-in.change-scene-complete","sign-in.rename-room","sign-in.rename-room-complete","sign-in.close-room","sign-in.close-room-complete","sign-in.mute-user","sign-in.mute-user-complete","sign-in.kick-user","sign-in.kick-user-complete","sign-in.create-avatar","sign-in.create-avatar-complete","sign-in.favorite-room","sign-in.favorite-rooms","sign-in.favorite-room-complete","sign-in.favorite-rooms-complete","sign-in.as","sign-in.in","sign-in.out","rename-room.message","rename-room.rename","close-room.message","close-room.confirm","close-room.cancel","entry.room","entry.enter-room-title","entry.enter-room","entry.leave-room","entry.change-scene","entry.in-lobby-notice","entry.screen-prefix","entry.desktop-screen","entry.mobile-screen","entry.mobile-safari","entry.generic-prefix","entry.generic-medium","entry.generic-subtitle-desktop","entry.gearvr-prefix","entry.gearvr-medium","entry.choose-device","entry.device-medium","entry.device-subtitle-desktop","entry.device-subtitle-mobile","entry.device-subtitle-vr","entry.cardboard","entry.daydream-prefix","entry.daydream-medium","entry.daydream-via-chrome","entry.invite-others","entry.share-button","entry.desktop.invite-tip","entry.mobile.invite-tip","entry.invite-team-nag","entry.enable-screen-sharing","entry.return-to-vr","entry.enter-in-vr","entry.open-in-window","entry.lobby","entry.back","entry.notify_me","entry.mute-on-entry","profile.save","profile.display_name.validation_warning","profile.header","profile.terms_of_use","profile.privacy_notice","profile.choose_avatar","profile.tabs.legacy","profile.tabs.skinnable","profile.tabs.url","profile.info","profile.info-link","avatar-editor.info","avatar-editor.info-link","avatar-preview.loading-failed","media-browser.search-placeholder.scenes","media-browser.search-placeholder.avatars","media-browser.search-placeholder.videos","media-browser.search-placeholder.images","media-browser.search-placeholder.youtube","media-browser.search-placeholder.gifs","media-browser.search-placeholder.twitch","media-browser.search-placeholder.sketchfab","media-browser.search-placeholder.poly","media-browser.search-placeholder.base","media-browser.favorites-header","media-browser.add_custom_object","media-browser.add_custom_scene","media-browser.add_custom_avatar","media-browser.privacy_policy","media-browser.spoke","media-browser.report_issue","media-browser.powered_by.images","media-browser.powered_by.videos","media-browser.powered_by.youtube","media-browser.powered_by.gifs","media-browser.powered_by.sketchfab","media-browser.powered_by.poly","media-browser.powered_by.twitch","media-browser.powered_by.scenes","media-browser.powered_by.avatars","media-browser.empty.images","media-browser.empty.videos","media-browser.empty.youtube","media-browser.empty.gifs","media-browser.empty.sketchfab","media-browser.empty.poly","media-browser.empty.twitch","media-browser.empty.favorites","media-browser.nav_title.youtube","media-browser.nav_title.videos","media-browser.nav_title.images","media-browser.nav_title.gifs","media-browser.nav_title.scenes","media-browser.nav_title.avatars","media-browser.nav_title.sketchfab","media-browser.nav_title.poly","media-browser.nav_title.twitch","media-browser.create-avatar","media-browser.create-scene","media-browser.hub.joined-prefix","audio.title","audio.talk_to_test","audio.click_to_test","audio.subtitle-desktop","audio.subtitle-mobile","audio.enter-now","audio.hmd-mic-warning","audio.grant-title","audio.grant-subtitle","audio.granted-title","audio.granted-subtitle","audio.granted-next","exit.subtitle.exited","exit.subtitle.closed","exit.subtitle.denied","exit.subtitle.kicked","exit.subtitle.left","exit.subtitle.full","exit.subtitle.connect_error","exit.subtitle.version_mismatch","autoexit.title","autoexit.title_units","autoexit.subtitle","autoexit.cancel","presence.entered_room","presence.entered_lobby","presence.join_lobby","presence.join_room","presence.leave","presence.name_change","presence.scene_change","presence.hub_name_change","presence.in_lobby","presence.in_room","home.create_a_room","home.desktop.add_pwa","home.mobile.add_pwa","home.take_a_tour","home.room_create_options","home.room_create_button","home.create_name.validation_warning","home.join_us","home.have_code","home.add_to_discord_1","home.add_to_discord_2","home.add_to_discord_3","home.create_with_spoke","home.report_issue","home.source_link","home.whats_new_link","home.spoke_link","home.about_link","home.community_link","home.privacy_notice","home.terms_of_use","home.get_updates","home.hero_title","home.hero_blurb","home.made_with_love","home.environment_author_by","dialog.close","mailing_list.privacy_label","mailing_list.privacy_link","link.link_page_header_entry","link.link_page_header_headset","link.linking_a_headset","link.try_again","help.report_issue","scene.logo_tagline","scene.create_button","scene.tweet_button","scene.unavailable","link.in_your_browser","link.enter_code","link.do_not_close","link.connect_headset","link.cancel","invite.enter_via","invite.enter_via_modal","invite.tweet","invite.and_enter_code","invite.or_visit","invite.or_visit_modal","invite.embed","invite.embed-tip","spoke.primary_tagline","spoke.secondary_tagline","spoke.thank_you","spoke.download_win","spoke.download_macos","spoke.download_linux","spoke.download_unsupported","spoke.browse_all_versions","spoke.beginner_tutorial_button","spoke.advanced_tutorial_button","spoke.play_button","commands.fly","commands.grow","commands.shrink","commands.scene","commands.rename","commands.help","commands.leave","commands.duck","commands.capture","commands.debug","commands.vrstats","settings.change-avatar","settings.change-scene","settings.favorites","settings.rename-room","settings.close-room","settings.room-info","settings.create-room","settings.create-scene","settings.send-feedback","settings.whats-new","settings.features","settings.controls","settings.community","settings.tips","settings.report","settings.terms","settings.privacy","settings.help","settings.row-profile","settings.row-room","tips.mobile.video_share_mode","tips.mobile.pen_mode","tips.mobile.mute_mode","tips.mobile.freeze_mode","tips.mobile.look","tips.mobile.locomotion","tips.mobile.spawn_menu-pre","tips.mobile.spawn_menu-post","tips.mobile.freeze_gesture","tips.mobile.object_grab","tips.mobile.object_rotate_button-pre","tips.mobile.object_rotate_button-post","tips.mobile.object_scale_button-pre","tips.mobile.object_scale_button-post","tips.mobile.object_recenter_button-pre","tips.mobile.object_recenter_button-post","tips.mobile.object_pin","tips.mobile.invite","tips.desktop.video_share_mode","tips.desktop.pen_mode","tips.desktop.mirror_mode","tips.desktop.mute_mode","tips.desktop.look","tips.desktop.locomotion","tips.desktop.turning","tips.desktop.spawn_menu-pre","tips.desktop.spawn_menu-post","tips.desktop.freeze_gesture","tips.desktop.menu_hover","tips.desktop.object_grab","tips.desktop.object_pin","tips.desktop.object_zoom","tips.desktop.object_rotate_button-pre","tips.desktop.object_rotate_button-post","tips.desktop.object_scale_button-pre","tips.desktop.object_scale_button-post","tips.desktop.object_recenter_button-pre","tips.desktop.object_recenter_button-post","tips.desktop.object_scale","tips.desktop.pen_color","tips.desktop.pen_size","tips.desktop.invite","tips.desktop.watching","tips.watching.back","tips.mobile.watching","tips.watching-exit","loader.entering_lobby","loader.loading","loader.object","loader.objects","change-scene-dialog.change-scene","change-scene-dialog.create-in-spoke","change-scene-dialog.new-spoke-project","avatar-url-dialog.apply","interstitial.prompt","feedback.prompt","hide-ui.prompt","discord.primary_tagline","discord.secondary_tagline","discord.contact_us","discord.community_link","discord.splash_tag","client-info.kick-button","client-info.hide-button","client-info.unhide-button","client-info.mute-button","client-info.cancel","avatar-landing.select","avatar-landing.selected","leave-room-dialog.join-room.message","leave-room-dialog.join-room.confirm","leave-room-dialog.create-room.message","leave-room-dialog.create-room.confirm","embed.load-button","embed.presence-warning","i18n_messages","navigatorLang","language","userLanguage","localeData","debug__WEBPACK_IMPORTED_MODULE_0__","debug__WEBPACK_IMPORTED_MODULE_0___default","_qs_truthy__WEBPACK_IMPORTED_MODULE_1__","isDebug","logFilter","enable","PNGFileSignature","Uint8Array","JPEGFileSignature","signaturesEqual","referenceFileSignature","arrayBuffer","signatureLength","byteLength","bufferView","loadAsync","loader","getChunkType","byteOffset","arr","HubsTextureLoader","manager","DefaultLoadingManager","onLoad","Texture","loadTextureAsync","catch","fileLoader","FileLoader","setResponseType","bytes","Response","dataView","DataView","colorType","getUint8","chunkHeaderSize","curChunkOffset","curChunkType","getUint32","imageLoader","createObjectURL","ImageBitmapLoader","flipY","ImageLoader","setCrossOrigin","crossOrigin","setPath","cacheKey","resolveURL","Cache","RGBAFormat","close","mediaAPIEndpoint","resolveUrlCache","resolveUrl","media_utils_asyncToGenerator","response","Content-Type","media","ok","message","statusText","resolved","upload","file","formData","FormData","interactableId","addMedia","template","contentOrigin","contentSubtype","animate","needsToBeUploaded","fileIsOwned","fireLoadingTimeout","setTimeout","eventName","clearTimeout","once","orientation","reader","FileReader","onload","getUint16","offset","marker","little","tags","readAsArrayBuffer","getOrientation","srcUrl","raw","access_token","href","fileId","file_id","uploadPromotionTokens","promotionToken","promotion_token","MediaStream","NAF","clientId","objectType","objectTypeForOriginAndContentType","injectCustomShaderChunks","vertexRegex","fragRegex","shaderUniforms","newMaterial","onBeforeCompile","shader","vlines","vindex","findIndex","line","unshift","flines","findex","mediaHighlightFrag","getPromotionTokenForFile","mediaPos","spawnMediaAround","snapCount","mirrorOrientation","pos","rotateY","PI","idx","cos","sin","localToWorld","visible","dur","from","to","easing","createImageTexture","_createImageTexture","encoding","sRGBEncoding","anisotropy","getLastWorldPosition","getLastWorldQuaternion","setMatrixWorld","tempVector3","Quaternion","updateMatrices","setFromMatrixPosition","disposeMaterial","mtrl","lightMap","bumpMap","normalMap","specularMap","materialArray","MeshFaceMaterial","MultiMaterial","getInverse","multiply","fn","names","selectRandom","floor","random","avatarIds","av","generateDefaultProfile","LOCAL_STORE_KEY","STORE_STATE_CACHE_KEY","OAUTH_FLOW_CREDENTIALS_KEY","validator","Validator","SCHEMA","definitions","additionalProperties","properties","displayName","pattern","personalAvatarId","activity","hasFoundFreeze","hasChangedName","hasAcceptedProfile","lastEnteredAt","hasPinned","hasRotated","hasRecentered","hasScaled","hasHoveredInWorldHud","hasOpenedShare","entryCount","settings","lastUsedMicDeviceId","confirmedDiscordRooms","items","confirmedBroadcastedRooms","onLoadActions","$ref","localStorage","getItem","setItem","oauthFlowCredentials","Cookies","getJSON","resetToRandomLegacyAvatar","jwtDecode","sub","resetConfirmedBroadcastedRooms","clearStoredArray","resetTipActivityFlags","bumpEntryCount","currentEntryCount","enqueueOnLoadAction","executeOnLoadActions","clearOnLoadActions","arrayMerge","destinationArray","sourceArray","newState","mergeOpts","finalState","merge","valid","validate","ObjectContentOrigins","ObjectTypes","FILE","CLIPBOARD","SPAWNER","URL_IMAGE","URL_VIDEO","URL_MODEL","URL_PDF","URL_AUDIO","FILE_IMAGE","FILE_VIDEO","FILE_MODEL","FILE_PDF","FILE_AUDIO","CLIPBOARD_IMAGE","CLIPBOARD_VIDEO","CLIPBOARD_MODEL","CLIPBOARD_PDF","CLIPBOARD_AUDIO","SPAWNER_IMAGE","SPAWNER_VIDEO","SPAWNER_MODEL","SPAWNER_PDF","SPAWNER_AUDIO","CAMERA","UNKNOWN","objectTypeForOrigin","urlType","fileType","clipboardType","spawnerType","objectTypeMimePrefixLookupMap","image/","model/","application/x-zip-compressed","video/","application/vnd.apple.mpegurl","application/x-mpegurl","audio/","application/pdf","srcSuffixLookupMap",".m3u8","prefix","suffix","Blob","ctx","putImageData","toDataURL","imageBitmap","HTMLImageElement"],"mappings":"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","file":"assets/js/avatar-3521616db01d4d12c125.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t4: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([1971,1,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import { Socket } from \"phoenix\";\nimport { generateHubName } from \"../utils/name-generation\";\nimport { airtableAssets, airtableAssetsInitialState } from '../airtable'\n\nimport Store from \"../storage/store\";\n\nconst resolverLink = document.createElement(\"a\");\nexport function getReticulumFetchUrl(path, absolute = false) {\n  if (process.env.RETICULUM_SERVER) {\n    return `https://${process.env.RETICULUM_SERVER}${path}`;\n  } else if (absolute) {\n    resolverLink.href = path;\n    return resolverLink.href;\n  } else {\n    return path;\n  }\n}\n\nlet reticulumMeta = null;\nlet invalidatedReticulumMetaThisSession = false;\n\nexport async function invalidateReticulumMeta() {\n  invalidatedReticulumMetaThisSession = true;\n  reticulumMeta = null;\n}\n\nexport async function getReticulumMeta() {\n  if (!reticulumMeta) {\n    // Initially look up version based upon page, avoiding round-trip, otherwise fetch.\n    if (!invalidatedReticulumMetaThisSession && document.querySelector(\"meta[name='ret:version']\")) {\n      reticulumMeta = {\n        version: document.querySelector(\"meta[name='ret:version']\").getAttribute(\"value\"),\n        pool: document.querySelector(\"meta[name='ret:pool']\").getAttribute(\"value\"),\n        phx_host: document.querySelector(\"meta[name='ret:phx_host']\").getAttribute(\"value\")\n      };\n    } else {\n      await fetch(getReticulumFetchUrl(\"/api/v1/meta\")).then(async res => {\n        reticulumMeta = await res.json();\n      });\n    }\n  }\n\n  const qs = new URLSearchParams(location.search);\n  const phxHostOverride = qs.get(\"phx_host\");\n\n  if (phxHostOverride) {\n    reticulumMeta.phx_host = phxHostOverride;\n  }\n\n  return reticulumMeta;\n}\n\nexport async function connectToReticulum(debug = false, params = null) {\n  const qs = new URLSearchParams(location.search);\n\n  const getNewSocketUrl = async () => {\n    const socketProtocol = qs.get(\"phx_protocol\") || (document.location.protocol === \"https:\" ? \"wss:\" : \"ws:\");\n    let socketHost = qs.get(\"phx_host\");\n    let socketPort = qs.get(\"phx_port\");\n\n    const reticulumMeta = await getReticulumMeta();\n    socketHost = socketHost || process.env.RETICULUM_SOCKET_SERVER || reticulumMeta.phx_host;\n    socketPort =\n      socketPort ||\n      (process.env.RETICULUM_SERVER ? new URL(`${socketProtocol}//${process.env.RETICULUM_SERVER}`).port : \"443\");\n    return `${socketProtocol}//${socketHost}${socketPort ? `:${socketPort}` : \"\"}`;\n  };\n\n  const socketUrl = await getNewSocketUrl();\n  console.log(`Phoenix Socket URL: ${socketUrl}`);\n\n  const socketSettings = {};\n\n  if (debug) {\n    socketSettings.logger = (kind, msg, data) => {\n      console.log(`${kind}: ${msg}`, data);\n    };\n  }\n\n  if (params) {\n    socketSettings.params = params;\n  }\n\n  const socket = new Socket(`${socketUrl}/socket`, socketSettings);\n  socket.connect();\n  socket.onError(async () => {\n    // On error, underlying reticulum node may have died, so rebalance by\n    // fetching a new healthy node to connect to.\n    invalidateReticulumMeta();\n\n    const endPointPath = new URL(socket.endPoint).pathname;\n    const newSocketUrl = await getNewSocketUrl();\n    const newEndPoint = `${newSocketUrl}${endPointPath}`;\n    console.log(`Socket error, changed endpoint to ${newEndPoint}`);\n    socket.endPoint = newEndPoint;\n  });\n\n  return socket;\n}\n\nexport function getLandingPageForPhoto(photoUrl) {\n  const parsedUrl = new URL(photoUrl);\n  return getReticulumFetchUrl(parsedUrl.pathname.replace(\".png\", \".html\") + parsedUrl.search, true);\n}\n\nexport function fetchReticulumAuthenticated(url, method = \"GET\", payload) {\n  const { token } = window.APP.store.state.credentials;\n  const retUrl = getReticulumFetchUrl(url);\n  const params = {\n    headers: { \"content-type\": \"application/json\" },\n    method\n  };\n  if (token) {\n    params.headers.authorization = `bearer ${token}`;\n  }\n  if (payload) {\n    params.body = JSON.stringify(payload);\n  }\n  return fetch(retUrl, params).then(async r => {\n    const result = await r.text();\n    try {\n      return JSON.parse(result);\n    } catch (e) {\n      // Some reticulum responses, particularly DELETE requests, don't return json.\n      return result;\n    }\n  });\n}\n\nexport async function createAndRedirectToNewHub(name, sceneId, sceneUrl, replace) {\n  const createUrl = getReticulumFetchUrl(\"/api/v1/hubs\");\n\n  let assets = {Name: \"Test\", SceneUrl: null};\n\n  const record = await airtableAssets.find('recHqITRS7cBMwn9i')\n\n  if (record) assets = record.fields;\n  \n  // const payload = { hub: { name: name || generateHubName() } };\n  const payload = { hub: { name: assets.Name } };\n  \n\n  // if (sceneId) {\n  //   payload.hub.scene_id = sceneId;\n  // } else {\n    // payload.hub.default_environment_gltf_bundle_url = sceneUrl;\n    \n    // payload.hub.default_environment_gltf_bundle_url = 'https://www.dropbox.com/s/ayl3t33p2ymnxux/Axon%20Park_Cliffside.glb';\n    // payload.hub.default_environment_gltf_bundle_url = 'https://s3-us-west-1.amazonaws.com/axonpark/Axon_Park_Cliffside.glb';\n    payload.hub.default_environment_gltf_bundle_url = assets.SceneUrl;\n    // payload.hub.default_environment_gltf_bundle_url = '/assets/Axon_Park_Cliffside.glb';\n  // }\n\n  const headers = { \"content-type\": \"application/json\" };\n  const store = new Store();\n  if (store.state && store.state.credentials.token) {\n    headers.authorization = `bearer ${store.state.credentials.token}`;\n  }\n\n  let res = await fetch(createUrl, {\n    body: JSON.stringify(payload),\n    headers,\n    method: \"POST\"\n  }).then(r => r.json());\n\n  if (res.error === \"invalid_token\") {\n    // Clear the invalid token from store.\n    store.update({ credentials: { token: null, email: null } });\n\n    // Create hub anonymously\n    delete headers.authorization;\n    res = await fetch(createUrl, {\n      body: JSON.stringify(payload),\n      headers,\n      method: \"POST\"\n    }).then(r => r.json());\n  }\n\n  const hub = res;\n  let url = hub.url;\n\n  const creatorAssignmentToken = hub.creator_assignment_token;\n  if (creatorAssignmentToken) {\n    store.update({ creatorAssignmentTokens: [{ hubId: hub.hub_id, creatorAssignmentToken: creatorAssignmentToken }] });\n\n    // Don't need to store the embed token if there's no creator assignment token, since that means\n    // we are the owner and will get the embed token on page load.\n    const embedToken = hub.embed_token;\n\n    if (embedToken) {\n      store.update({ embedTokens: [{ hubId: hub.hub_id, embedToken: embedToken }] });\n    }\n  }\n\n  if (process.env.RETICULUM_SERVER && document.location.host !== process.env.RETICULUM_SERVER) {\n    url = `/hub.html?hub_id=${hub.hub_id}`;\n  }\n\n  if (replace) {\n    document.location.replace(url);\n  } else {\n    document.location = url;\n  }\n}\n\nexport function getPresenceEntryForSession(presences, sessionId) {\n  const entry = Object.entries(presences || {}).find(([k]) => k === sessionId) || [];\n  const presence = entry[1];\n  return (presence && presence.metas && presence.metas[0]) || {};\n}\n\nexport function getPresenceContextForSession(presences, sessionId) {\n  return (getPresenceEntryForSession(presences, sessionId) || {}).context || {};\n}\n\nexport function getPresenceProfileForSession(presences, sessionId) {\n  return (getPresenceEntryForSession(presences, sessionId) || {}).profile || {};\n}\n\n// Takes the given channel, and creates a new channel with the same bindings\n// with the given socket, joins it, and leaves the old channel after joining.\n//\n// NOTE: This function relies upon phoenix channel object internals, so this\n// function will need to be reviewed if/when we ever update phoenix.js\nexport function migrateChannelToSocket(oldChannel, socket, params) {\n  const channel = socket.channel(oldChannel.topic, params || oldChannel.params);\n\n  for (let i = 0, l = oldChannel.bindings.length; i < l; i++) {\n    const item = oldChannel.bindings[i];\n    channel.on(item.event, item.callback);\n  }\n\n  for (let i = 0, l = oldChannel.pushBuffer.length; i < l; i++) {\n    const item = oldChannel.pushBuffer[i];\n    channel.push(item.event, item.payload, item.timeout);\n  }\n\n  const oldJoinPush = oldChannel.joinPush;\n  const joinPush = channel.join();\n\n  for (let i = 0, l = oldJoinPush.recHooks.length; i < l; i++) {\n    const item = oldJoinPush.recHooks[i];\n    joinPush.receive(item.status, item.callback);\n  }\n\n  return new Promise(resolve => {\n    joinPush.receive(\"ok\", () => {\n      // Clear all event handlers first so no duplicate messages come in.\n      oldChannel.bindings = [];\n      resolve(channel);\n    });\n  });\n}\n\nexport function discordBridgesForPresences(presences) {\n  const channels = [];\n  for (const p of Object.values(presences)) {\n    for (const m of p.metas) {\n      if (m.profile && m.profile.discordBridges) {\n        Array.prototype.push.apply(channels, m.profile.discordBridges.map(b => b.channel.name));\n      }\n    }\n  }\n  return channels;\n}\n","// Utilities for manipulating state history. This provides a number of functions which\n// need to be used to manipulate history state so we can deal with edge cases around\n// entry back button and refreshes once entered.\n//\n// These functions also transparently deal with the room slug, so incoming calls can ignore\n// dealing with it, and provides APIs for getting the non-slug part of the path.\n//\n// The slug cannot be part of the basename for history, because the slug changes intra-session\n// if the room is renamed.\n\n// This pushes/replaces a new k, v pair into the history, while maintaining all the other\n// keys, or clears state if k if null.\n//\n// Also maintains a length key that can be used to find the length of the history chain\n// (across refreshes) for the current room.\nfunction pushOrUpdateHistory(history, replace, k, v, detail, newPathname, newSearch) {\n  let state = {};\n  const newLength = ((history.location.state && history.location.state.__historyLength) || 0) + (replace ? 0 : 1);\n\n  if (k || newPathname || newSearch) {\n    state = history.location.state ? { ...history.location.state } : {};\n    delete state.__duplicate;\n\n    if (k) {\n      state[k] = v;\n      state.key = k;\n      state.value = v;\n      state.detail = detail;\n    }\n  }\n\n  const pathname =\n    newPathname !== undefined ? newPathname : history.location.pathname === \"/\" ? \"\" : history.location.pathname;\n\n  const search = newSearch !== undefined ? newSearch : history.location.search;\n\n  // If popToBeginningOfHubHistory was previously used, there is a duplicate entry\n  // at the top of the history stack (which was needed to wipe out forward history)\n  // so we use this opportunity to replace it.\n  const isDuplicate = history.location.state && history.location.state.__duplicate;\n  const method = replace || isDuplicate ? history.replace : history.push;\n  state.__historyLength = newLength;\n\n  method({ pathname, search, state });\n}\n\nexport function pushHistoryState(history, k, v, detail) {\n  pushOrUpdateHistory(history, false, k, v, detail);\n}\n\nexport function replaceHistoryState(history, k, v, detail) {\n  pushOrUpdateHistory(history, true, k, v, detail);\n}\n\nexport function pushHistoryPath(history, path, search) {\n  pushOrUpdateHistory(history, false, null, null, null, path, search);\n}\n\nexport function clearHistoryState(history) {\n  pushOrUpdateHistory(history, false);\n}\n\n// This will pop the browser history to the first entry that was for this hubs room,\n// and then push a duplicate entry onto the history stack in order to wipe out forward\n// history.\nexport function popToBeginningOfHubHistory(history, navigateToPriorPage) {\n  if (!history.location.state || history.location.state.__historyLength === undefined) return;\n\n  const len = history.location.state.__historyLength;\n  if (len === 0) return;\n\n  return new Promise(resolve => {\n    // After the go() completes, we push a duplicate history entry onto the stack\n    // in order to wipe out forward history. We also optionally go back -2 if we wanted\n    // to go back to the prior page.\n    const unsubscribe = history.listen(() => {\n      unsubscribe();\n      history.push({\n        pathname: history.location.pathname,\n        search: history.location.search,\n        state: { __historyLength: 0, __duplicate: true }\n      });\n      if (navigateToPriorPage) history.go(-2); // Go back to history entry before beginning.\n      resolve();\n    });\n\n    history.go(-len);\n  });\n}\n\n// This will pop the browser history to the entry before the first entry for this hubs room.\nexport function navigateToPriorPage(history) {\n  popToBeginningOfHubHistory(history, true);\n}\n\n// Returns the part of the pathname that does not include the slug\nexport function sluglessPath(location) {\n  const parts = location.pathname.split(\"/\");\n  return `/${parts.slice(2).join(\"/\")}`;\n}\n\n// Returns a new path that includes the current slug as a prefix to the\n// provided path.\nexport function withSlug(location, path) {\n  const parts = location.pathname.split(\"/\");\n  return `/${parts[1]}${path}`;\n}\n","import { fetchReticulumAuthenticated } from \"./phoenix-utils\";\nimport { proxiedUrlFor } from \"./media-url-utils\";\nimport { avatars } from \"../assets/avatars/avatars\";\n\nexport const AVATAR_TYPES = {\n  LEGACY: \"legacy\",\n  SKINNABLE: \"skinnable\",\n  URL: \"url\"\n};\n\nconst legacyAvatarIds = avatars.map(a => a.id);\nexport function getAvatarType(avatarId) {\n  if (!avatarId || legacyAvatarIds.indexOf(avatarId) !== -1) return AVATAR_TYPES.LEGACY;\n  if (avatarId.startsWith(\"http\")) return AVATAR_TYPES.URL;\n  return AVATAR_TYPES.SKINNABLE;\n}\n\nasync function fetchSkinnableAvatar(avatarId) {\n  const resp = await fetchReticulumAuthenticated(`/api/v1/avatars/${avatarId}`);\n  return resp && resp.avatars && resp.avatars[0];\n}\n\nexport async function fetchAvatar(avatarId) {\n  switch (getAvatarType(avatarId)) {\n    case AVATAR_TYPES.LEGACY:\n      return {\n        avatar_id: avatarId,\n        gltf_url: avatars.find(avatar => avatar.id === avatarId).model\n      };\n    case AVATAR_TYPES.SKINNABLE:\n      return fetchSkinnableAvatar(avatarId);\n    case AVATAR_TYPES.URL:\n      return {\n        avatar_id: avatarId,\n        gltf_url: proxiedUrlFor(avatarId)\n      };\n  }\n}\n\nasync function fetchAvatarGltfUrl(avatarId) {\n  return fetchAvatar(avatarId).then(avatar => avatar && avatar.gltf_url);\n}\n\nexport function getAvatarSrc(avatarId) {\n  switch (getAvatarType(avatarId)) {\n    case AVATAR_TYPES.LEGACY:\n      return `#${avatarId}`;\n    case AVATAR_TYPES.SKINNABLE:\n      return fetchAvatarGltfUrl(avatarId);\n    case AVATAR_TYPES.URL:\n      return proxiedUrlFor(avatarId);\n    default:\n      return avatarId;\n  }\n}\n\nexport async function getAvatarThumbnailUrl(avatarId) {\n  switch (getAvatarType(avatarId)) {\n    case AVATAR_TYPES.LEGACY:\n      return avatars.find(avatar => avatar.id === avatarId).thumbnail;\n    case AVATAR_TYPES.SKINNABLE:\n      return fetchAvatar(avatarId).then(avatar => avatar.files.thumbnail);\n    default:\n      return \"https://asset-bundles-prod.reticulum.io/bots/avatar_unavailable.png\";\n  }\n}\n","const VERTEX_SHADER = `\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n  #include <uv_vertex>\n  #include <uv2_vertex>\n  #include <color_vertex>\n  #include <skinbase_vertex>\n\n  #include <begin_vertex>\n  #include <morphtarget_vertex>\n  #include <skinning_vertex>\n  #include <project_vertex>\n  #include <logdepthbuf_vertex>\n\n  #include <worldpos_vertex>\n  #include <clipping_planes_vertex>\n  #include <fog_vertex>\n}\n`;\n\nconst FRAGMENT_SHADER = `\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <aomap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n  #include <clipping_planes_fragment>\n\n  vec4 diffuseColor = vec4(diffuse, opacity);\n  ReflectedLight reflectedLight = ReflectedLight(vec3(0.0), vec3(0.0), vec3(0.0), vec3(0.0));\n  vec3 totalEmissiveRadiance = emissive;\n\n  #include <logdepthbuf_fragment>\n  #include <map_fragment>\n  #include <color_fragment>\n  #include <alphatest_fragment>\n  #include <emissivemap_fragment>\n\n  reflectedLight.indirectDiffuse += vec3(1.0);\n\n  #include <aomap_fragment>\n\n  reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n  vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n  gl_FragColor = vec4(outgoingLight, diffuseColor.a);\n\n  #include <premultiplied_alpha_fragment>\n  #include <tonemapping_fragment>\n  #include <encodings_fragment>\n  #include <fog_fragment>\n}\n`;\n\nexport default class MobileStandardMaterial extends THREE.ShaderMaterial {\n  type = \"MobileStandardMaterial\";\n  isMobileStandardMaterial = true;\n  static fromStandardMaterial(material) {\n    const parameters = {\n      vertexShader: VERTEX_SHADER,\n      fragmentShader: FRAGMENT_SHADER,\n      uniforms: {\n        uvTransform: { value: new THREE.Matrix3() },\n        diffuse: { value: material.color },\n        opacity: { value: material.opacity },\n        map: { value: material.map },\n        aoMapIntensity: { value: material.aoMapIntensity },\n        aoMap: { value: material.aoMap },\n        emissive: { value: material.emissive },\n        emissiveMap: { value: material.emissiveMap }\n      },\n      fog: true,\n      lights: false,\n      opacity: material.opacity,\n      transparent: material.transparent,\n      alphaTest: material.alphaTest,\n      skinning: material.skinning,\n      morphTargets: material.morphTargets,\n      vertexColors: material.vertexColors\n    };\n\n    const mobileMaterial = new MobileStandardMaterial(parameters);\n\n    mobileMaterial.color = material.color;\n    mobileMaterial.map = material.map;\n    mobileMaterial.aoMap = material.aoMap;\n    mobileMaterial.aoMapIntensity = material.aoMapIntensity;\n    mobileMaterial.emissive = material.emissive;\n    mobileMaterial.emissiveMap = material.emissiveMap;\n\n    return mobileMaterial;\n  }\n  clone() {\n    return MobileStandardMaterial.fromStandardMaterial(this);\n  }\n}\n","import { EventTarget } from \"event-target-shim\";\nimport { getReticulumFetchUrl, fetchReticulumAuthenticated } from \"../utils/phoenix-utils\";\nimport { pushHistoryPath, sluglessPath, withSlug } from \"../utils/history\";\n\nexport const SOURCES = [\"poly\", \"sketchfab\", \"videos\", \"scenes\", \"gifs\", \"images\", \"twitch\"];\n\nconst EMPTY_RESULT = { entries: [], meta: {} };\n\nconst URL_SOURCE_TO_TO_API_SOURCE = {\n  scenes: \"scene_listings\",\n  images: \"bing_images\",\n  videos: \"bing_videos\",\n  youtube: \"youtube_videos\",\n  gifs: \"tenor\",\n  sketchfab: \"sketchfab\",\n  poly: \"poly\",\n  twitch: \"twitch\",\n  favorites: \"favorites\"\n};\n\nexport const MEDIA_SOURCE_DEFAULT_FILTERS = {\n  gifs: \"trending\",\n  sketchfab: \"featured\",\n  scenes: \"featured\",\n  favorites: \"my-favorites\"\n};\n\nconst SEARCH_CONTEXT_PARAMS = [\"q\", \"filter\", \"cursor\"];\n\n// This class is responsible for fetching and storing media search results and provides a\n// convenience API for performing history updates relevant to search navigation.\nexport default class MediaSearchStore extends EventTarget {\n  constructor() {\n    super();\n\n    this.requestIndex = 0;\n  }\n\n  setHistory(history) {\n    this.history = history;\n\n    this._update(this.history.location);\n\n    this.history.listen(location => {\n      this._update(location);\n    });\n  }\n\n  _update = async location => {\n    this.result = null;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    const urlSource = this.getUrlMediaSource(location);\n    if (!urlSource) return;\n\n    if (!this.previousSource || this.previousSource !== urlSource) {\n      this.dispatchEvent(new CustomEvent(\"sourcechanged\"));\n      this.previousSource = urlSource;\n    }\n\n    const urlParams = new URLSearchParams(location.search);\n\n    this.requestIndex++;\n    const currentRequestIndex = this.requestIndex;\n    const searchParams = new URLSearchParams();\n    const locationSearchParams = new URLSearchParams(location.search);\n    const isMy = locationSearchParams.get(\"filter\") && locationSearchParams.get(\"filter\").startsWith(\"my-\");\n\n    for (const param of SEARCH_CONTEXT_PARAMS) {\n      if (!urlParams.get(param)) continue;\n      searchParams.set(param, urlParams.get(param));\n    }\n\n    searchParams.get(\"locale\", navigator.languages[0]);\n\n    let source;\n    if (urlSource === \"avatars\" || urlSource === \"scenes\") {\n      // Avatars + scenes are special since we request them from a different source based on the facet.\n      const singular = urlSource === \"avatars\" ? \"avatar\" : \"scene\";\n      source = isMy ? `${singular}s` : `${singular}_listings`;\n    } else {\n      source = URL_SOURCE_TO_TO_API_SOURCE[urlSource];\n    }\n    searchParams.set(\"source\", source);\n\n    let fetch = true;\n\n    if (source === \"avatars\" || source === \"scenes\" || source === \"favorites\") {\n      if (isMy) {\n        if (window.APP.store.credentialsAccountId) {\n          searchParams.set(\"user\", window.APP.store.credentialsAccountId);\n        } else {\n          fetch = false; // Don't fetch my-* if not signed in\n        }\n      }\n    }\n\n    const path = `/api/v1/media/search?${searchParams.toString()}`;\n    const url = getReticulumFetchUrl(path);\n    if (this.lastSavedUrl === url) return;\n\n    this.isFetching = true;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n    const result = fetch ? await fetchReticulumAuthenticated(path) : EMPTY_RESULT;\n\n    if (this.requestIndex != currentRequestIndex) return;\n\n    this.result = result;\n    this.nextCursor = this.result && this.result.meta && this.result.meta.next_cursor;\n    this.lastFetchedUrl = url;\n    this.isFetching = false;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n  };\n\n  _legacyAvatarToSearchEntry = legacyAvatar => {\n    return {\n      id: legacyAvatar.id,\n      type: \"avatar_listing\",\n      url: legacyAvatar.url,\n      images: { preview: { url: legacyAvatar.thumbnail, width: 720, height: 1280 } },\n      gltfs: { avatar: legacyAvatar.model }\n    };\n  };\n\n  pageNavigate = delta => {\n    if (delta === -1) {\n      this.history.goBack();\n    } else {\n      const location = this.history.location;\n      const searchParams = new URLSearchParams(location.search);\n      searchParams.set(\"cursor\", this.nextCursor);\n      pushHistoryPath(this.history, location.pathname, searchParams.toString());\n    }\n  };\n\n  filterQueryNavigate = (filter, query) => {\n    const location = this.history.location;\n    const searchParams = new URLSearchParams(location.search);\n\n    if (query) {\n      searchParams.set(\"q\", query);\n    } else {\n      searchParams.delete(\"q\");\n    }\n\n    if (filter) {\n      searchParams.set(\"filter\", filter);\n    } else {\n      searchParams.delete(\"filter\");\n    }\n\n    if (filter) {\n      searchParams.set(\"cursor\", filter);\n    } else {\n      searchParams.delete(\"cursor\");\n    }\n\n    pushHistoryPath(this.history, location.pathname, searchParams.toString());\n  };\n\n  getSearchClearedSearchParams = (location, keepSource, keepNav) => {\n    const searchParams = new URLSearchParams(location.search);\n\n    // Strip browsing query params\n    searchParams.delete(\"q\");\n    searchParams.delete(\"filter\");\n    searchParams.delete(\"cursor\");\n\n    if (!keepNav) {\n      searchParams.delete(\"media_nav\");\n    }\n\n    if (!keepSource) {\n      searchParams.delete(\"media_source\");\n    }\n\n    return searchParams;\n  };\n\n  _stashLastSearchParams = location => {\n    const searchParams = new URLSearchParams(location.search);\n\n    this._stashedParams = {};\n    this._stashedSource = null;\n\n    const source = this.getUrlMediaSource(location);\n\n    // HACK for now do not stash favorite search, since that ends up being a source\n    // we do not reveal in the media browser UX. Revisit the rules here when we have a\n    // proper favorites browser. Then, we should have two separate stashes.\n    if (source === \"favorites\") return;\n    this._stashedSource = source;\n\n    for (const param of SEARCH_CONTEXT_PARAMS) {\n      const value = searchParams.get(param);\n\n      if (value) {\n        this._stashedParams[param] = value;\n      }\n    }\n  };\n\n  clearStashedQuery = () => {\n    if (!this._stashedParams) return;\n    delete this._stashedParams.q;\n  };\n\n  sourceNavigate = source => {\n    this._sourceNavigate(source, false, true);\n  };\n\n  sourceNavigateToDefaultSource = () => {\n    this._sourceNavigate(this._stashedSource ? this._stashedSource : SOURCES[0], false, true);\n  };\n\n  sourceNavigateWithNoNav = source => {\n    this._sourceNavigate(source, true, false);\n  };\n\n  _sourceNavigate = async (source, hideNav, useLastStashedParams) => {\n    const currentQuery = new URLSearchParams(this.history.location.search).get(\"q\");\n    const searchParams = this.getSearchClearedSearchParams(this.history.location);\n\n    if (currentQuery) {\n      searchParams.set(\"q\", currentQuery);\n    } else {\n      if (useLastStashedParams && this._stashedParams) {\n        for (const param of SEARCH_CONTEXT_PARAMS) {\n          const value = this._stashedParams[param];\n\n          // Only q param is compatible across sources, so keep it if is stashed.\n          const useValue = param === \"q\" || this._stashedSource === source;\n\n          if (value && useValue) {\n            searchParams.set(param, value);\n          }\n        }\n      } else {\n        if (source === \"avatars\") {\n          const hasAccountWithAvatars = await this._hasAccountWithAvatars();\n          searchParams.set(\"filter\", hasAccountWithAvatars ? \"my-avatars\" : \"featured\");\n        } else if (MEDIA_SOURCE_DEFAULT_FILTERS[source]) {\n          searchParams.set(\"filter\", MEDIA_SOURCE_DEFAULT_FILTERS[source]);\n        }\n      }\n    }\n\n    this._stashedParams = null;\n    this._stashedSource = null;\n\n    if (hideNav) {\n      searchParams.set(\"media_nav\", \"false\");\n    }\n\n    if (process.env.RETICULUM_SERVER && document.location.host !== process.env.RETICULUM_SERVER) {\n      searchParams.set(\"media_source\", source);\n      pushHistoryPath(this.history, this.history.location.pathname, searchParams.toString());\n    } else {\n      pushHistoryPath(this.history, withSlug(this.history.location, `/media/${source}`), searchParams.toString());\n    }\n  };\n\n  _hasAccountWithAvatars = async () => {\n    const { credentialsAccountId } = window.APP.store;\n    if (!credentialsAccountId) return false;\n\n    const searchParams = new URLSearchParams();\n    const source = \"avatars\";\n    searchParams.set(\"source\", source);\n    searchParams.set(\"user\", credentialsAccountId);\n    const result = await fetchReticulumAuthenticated(`/api/v1/media/search?${searchParams.toString()}`);\n    return !!(result && result.entries) && result.entries.length > 0;\n  };\n\n  getUrlMediaSource = location => {\n    const { search } = location;\n    const urlParams = new URLSearchParams(search);\n    const pathname = sluglessPath(location);\n\n    if (!pathname.startsWith(\"/media\") && !urlParams.get(\"media_source\")) return null;\n    return urlParams.get(\"media_source\") || pathname.substring(7);\n  };\n\n  pushExitMediaBrowserHistory = (history, stashLastSearchParams = true) => {\n    if (!history) history = this.history;\n\n    if (stashLastSearchParams) this._stashLastSearchParams(history.location);\n\n    const { pathname } = history.location;\n    const hasMediaPath = sluglessPath(history.location).startsWith(\"/media\");\n    pushHistoryPath(\n      history,\n      hasMediaPath ? withSlug(history.location, \"/\") : pathname,\n      this.getSearchClearedSearchParams(history.location).toString()\n    );\n    this.dispatchEvent(new CustomEvent(\"media-exit\"));\n  };\n}\n","const nonCorsProxyDomains = (process.env.NON_CORS_PROXY_DOMAINS || \"\").split(\",\");\nif (process.env.CORS_PROXY_SERVER) {\n  nonCorsProxyDomains.push(process.env.CORS_PROXY_SERVER);\n}\n\nconst commonKnownContentTypes = {\n  gltf: \"model/gltf\",\n  glb: \"model/gltf-binary\",\n  png: \"image/png\",\n  jpg: \"image/jpeg\",\n  jpeg: \"image/jpeg\",\n  pdf: \"application/pdf\",\n  mp4: \"video/mp4\",\n  mp3: \"audio/mpeg\"\n};\n\n// thanks to https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding\nfunction b64EncodeUnicode(str) {\n  // first we use encodeURIComponent to get percent-encoded UTF-8, then we convert the percent-encodings\n  // into raw bytes which can be fed into btoa.\n  const CHAR_RE = /%([0-9A-F]{2})/g;\n  return btoa(encodeURIComponent(str).replace(CHAR_RE, (_, p1) => String.fromCharCode(\"0x\" + p1)));\n}\n\nconst farsparkEncodeUrl = url => {\n  // farspark doesn't know how to read '=' base64 padding characters\n  // translate base64 + to - and / to _ for URL safety\n  return b64EncodeUnicode(url)\n    .replace(/=+$/g, \"\")\n    .replace(/\\+/g, \"-\")\n    .replace(/\\//g, \"_\");\n};\n\nexport const scaledThumbnailUrlFor = (url, width, height) => {\n  const urlHostname = new URL(url).hostname;\n\n  if (process.env.RETICULUM_SERVER) {\n    const retHostname = new URL(`https://${process.env.RETICULUM_SERVER}`).hostname;\n    if (retHostname === urlHostname) return url;\n  }\n\n  return `https://${process.env.FARSPARK_SERVER}/thumbnail/${farsparkEncodeUrl(url)}?w=${width}&h=${height}`;\n};\n\nexport const proxiedUrlFor = (url, index = null) => {\n  if (!(url.startsWith(\"http:\") || url.startsWith(\"https:\"))) return url;\n\n  const hasIndex = index !== null;\n\n  if (!hasIndex) {\n    // Skip known domains that do not require CORS proxying.\n    try {\n      const parsedUrl = new URL(url);\n      if (nonCorsProxyDomains.find(domain => parsedUrl.hostname.endsWith(domain))) return url;\n    } catch (e) {\n      // Ignore\n    }\n  }\n\n  if (hasIndex || !process.env.CORS_PROXY_SERVER) {\n    const method = hasIndex ? \"extract\" : \"raw\";\n    return `https://${process.env.FARSPARK_SERVER}/0/${method}/0/0/0/${index || 0}/${farsparkEncodeUrl(url)}`;\n  } else {\n    return `https://${process.env.CORS_PROXY_SERVER}/${url}`;\n  }\n};\n\nexport const getCustomGLTFParserURLResolver = gltfUrl => url => {\n  if (typeof url !== \"string\" || url === \"\") return \"\";\n  if (/^(https?:)?\\/\\//i.test(url)) return url;\n  if (/^data:.*,.*$/i.test(url)) return url;\n  if (/^blob:.*$/i.test(url)) return url;\n\n  if (process.env.CORS_PROXY_SERVER) {\n    // For absolute paths with a CORS proxied gltf URL, re-write the url properly to be proxied\n    const corsProxyPrefix = `https://${process.env.CORS_PROXY_SERVER}/`;\n\n    if (gltfUrl.startsWith(corsProxyPrefix)) {\n      const originalUrl = decodeURIComponent(gltfUrl.substring(corsProxyPrefix.length));\n      const originalUrlParts = originalUrl.split(\"/\");\n\n      // Drop the .gltf filename\n      const path = new URL(url).pathname;\n      const assetUrl = originalUrlParts.slice(0, originalUrlParts.length - 1).join(\"/\") + \"/\" + path;\n      return corsProxyPrefix + assetUrl;\n    }\n  }\n\n  return url;\n};\n\nconst dataUrlRegex = /data:([a-zA-Z0-9]+\\/[a-zA-Z0-9-.+]+).*,.*/;\n\nexport const guessContentType = url => {\n  if (url.startsWith(\"hubs://\") && url.endsWith(\"/video\")) return \"video/vnd.hubs-webrtc\";\n  if (url.startsWith(\"data:\")) {\n    const matches = dataUrlRegex.match(url);\n    if (matches.length > 0) {\n      matches[1];\n    }\n  }\n  const extension = new URL(url, window.location).pathname.split(\".\").pop();\n  return commonKnownContentTypes[extension];\n};\nconst hubsSceneRegex = /https?:\\/\\/(hubs.local(:\\d+)?|(smoke-)?hubs.mozilla.com)\\/scenes\\/(\\w+)\\/?\\S*/;\nconst hubsAvatarRegex = /https?:\\/\\/(hubs.local(:\\d+)?|(smoke-)?hubs.mozilla.com)\\/avatars\\/(\\w+)\\/?\\S*/;\nconst hubsRoomRegex = /https?:\\/\\/(hubs.local(:\\d+)?|(smoke-)?hubs.mozilla.com)\\/(\\w+)\\/?\\S*/;\nexport const isHubsSceneUrl = hubsSceneRegex.test.bind(hubsSceneRegex);\nexport const isHubsRoomUrl = url => !isHubsSceneUrl(url) && hubsRoomRegex.test(url);\nexport const isHubsDestinationUrl = url => isHubsSceneUrl(url) || isHubsRoomUrl(url);\nexport const isHubsAvatarUrl = hubsAvatarRegex.test.bind(hubsAvatarRegex);\n","import nextTick from \"../utils/next-tick\";\nimport { mapMaterials } from \"../utils/material-utils\";\nimport SketchfabZipWorker from \"../workers/sketchfab-zip.worker.js\";\nimport MobileStandardMaterial from \"../materials/MobileStandardMaterial\";\nimport { textureLoader } from \"../utils/media-utils\";\nimport { getCustomGLTFParserURLResolver } from \"../utils/media-url-utils\";\nimport { promisifyWorker } from \"../utils/promisify-worker.js\";\nimport { MeshBVH, acceleratedRaycast } from \"three-mesh-bvh\";\nimport { disposeNode } from \"../utils/three-utils\";\n\nTHREE.Mesh.prototype.raycast = acceleratedRaycast;\n\nclass GLTFCache {\n  cache = new Map();\n\n  set(src, gltf) {\n    this.cache.set(src, {\n      gltf,\n      count: 0\n    });\n    return this.retain(src);\n  }\n\n  has(src) {\n    return this.cache.has(src);\n  }\n\n  get(src) {\n    return this.cache.get(src);\n  }\n\n  retain(src) {\n    const cacheItem = this.cache.get(src);\n    cacheItem.count++;\n    return cacheItem;\n  }\n\n  release(src) {\n    const cacheItem = this.cache.get(src);\n\n    if (!cacheItem) {\n      console.error(`Releasing uncached gltf ${src}`);\n      return;\n    }\n\n    cacheItem.count--;\n    if (cacheItem.count <= 0) {\n      cacheItem.gltf.scene.traverse(disposeNode);\n      this.cache.delete(src);\n    }\n  }\n}\nconst gltfCache = new GLTFCache();\nconst inflightGltfs = new Map();\n\nconst extractZipFile = promisifyWorker(new SketchfabZipWorker());\n\nfunction defaultInflator(el, componentName, componentData) {\n  if (!AFRAME.components[componentName]) {\n    throw new Error(`Inflator failed. \"${componentName}\" component does not exist.`);\n  }\n  if (AFRAME.components[componentName].multiple && Array.isArray(componentData)) {\n    for (let i = 0; i < componentData.length; i++) {\n      el.setAttribute(componentName + \"__\" + i, componentData[i]);\n    }\n  } else {\n    el.setAttribute(componentName, componentData);\n  }\n}\n\nAFRAME.GLTFModelPlus = {\n  // eslint-disable-next-line no-unused-vars\n  components: {},\n  registerComponent(componentKey, componentName, inflator) {\n    inflator = inflator || defaultInflator;\n    AFRAME.GLTFModelPlus.components[componentKey] = { inflator, componentName };\n  }\n};\n\nfunction parallelTraverse(a, b, callback) {\n  callback(a, b);\n\n  for (let i = 0; i < a.children.length; i++) {\n    parallelTraverse(a.children[i], b.children[i], callback);\n  }\n}\n\nfunction generateMeshBVH(object3D) {\n  object3D.traverse(obj => {\n    // note that we might already have a bounds tree if this was a clone of an object with one\n    const hasBufferGeometry = obj.isMesh && obj.geometry.isBufferGeometry;\n    const hasBoundsTree = hasBufferGeometry && obj.geometry.boundsTree;\n    if (hasBufferGeometry && !hasBoundsTree && obj.geometry.attributes.position) {\n      const geo = obj.geometry;\n      const triCount = geo.index ? geo.index.count / 3 : geo.attributes.position.count / 3;\n      // only bother using memory and time making a BVH if there are a reasonable number of tris,\n      // and if there are too many it's too painful and large to tolerate doing it (at least until\n      // we put this in a web worker)\n      if (triCount > 1000 && triCount < 1000000) {\n        // note that bounds tree construction creates an index as a side effect if one doesn't already exist\n        geo.boundsTree = new MeshBVH(obj.geometry, { strategy: 0, maxDepth: 30 });\n      }\n    }\n  });\n}\n\n// Modified version of Don McCurdy's AnimationUtils.clone\n// https://github.com/mrdoob/three.js/pull/14494\nfunction cloneSkinnedMesh(source) {\n  const cloneLookup = new Map();\n\n  const clone = source.clone();\n\n  parallelTraverse(source, clone, function(sourceNode, clonedNode) {\n    cloneLookup.set(sourceNode, clonedNode);\n    if (sourceNode.isMesh && sourceNode.geometry.boundsTree) {\n      clonedNode.geometry.boundsTree = sourceNode.geometry.boundsTree;\n    }\n  });\n\n  source.traverse(function(sourceMesh) {\n    if (!sourceMesh.isSkinnedMesh) return;\n\n    const sourceBones = sourceMesh.skeleton.bones;\n    const clonedMesh = cloneLookup.get(sourceMesh);\n\n    clonedMesh.skeleton = sourceMesh.skeleton.clone();\n\n    clonedMesh.skeleton.bones = sourceBones.map(function(sourceBone) {\n      if (!cloneLookup.has(sourceBone)) {\n        throw new Error(\"Required bones are not descendants of the given object.\");\n      }\n\n      return cloneLookup.get(sourceBone);\n    });\n\n    clonedMesh.bind(clonedMesh.skeleton, sourceMesh.bindMatrix);\n  });\n\n  return clone;\n}\n\nfunction cloneGltf(gltf) {\n  return {\n    animations: gltf.animations,\n    scene: cloneSkinnedMesh(gltf.scene)\n  };\n}\n\nfunction getHubsComponents(node) {\n  const hubsComponents =\n    node.userData.gltfExtensions &&\n    (node.userData.gltfExtensions.MOZ_hubs_components || node.userData.gltfExtensions.HUBS_components);\n\n  // We can remove support for legacy components when our environment, avatar and interactable models are\n  // updated to match Spoke output.\n  const legacyComponents = node.userData.components;\n\n  return hubsComponents || legacyComponents;\n}\n\n/// Walks the tree of three.js objects starting at the given node, using the GLTF data\n/// and template data to construct A-Frame entities and components when necessary.\n/// (It's unnecessary to construct entities for subtrees that have no component data\n/// or templates associated with any of their nodes.)\n///\n/// Returns the A-Frame entity associated with the given node, if one was constructed.\nconst inflateEntities = function(indexToEntityMap, node, templates, isRoot, modelToWorldScale = 1) {\n  // TODO: Remove this once we update the legacy avatars to the new node names\n  if (node.name === \"Chest\") {\n    node.name = \"Spine\";\n  } else if (node.name === \"Root Scene\") {\n    node.name = \"AvatarRoot\";\n  } else if (node.name === \"Bot_Skinned\") {\n    node.name = \"AvatarMesh\";\n  }\n\n  // inflate subtrees first so that we can determine whether or not this node needs to be inflated\n  const childEntities = [];\n  const children = node.children.slice(0); // setObject3D mutates the node's parent, so we have to copy\n  for (const child of children) {\n    const el = inflateEntities(indexToEntityMap, child, templates);\n    if (el) {\n      childEntities.push(el);\n    }\n  }\n\n  const entityComponents = getHubsComponents(node);\n\n  const nodeHasBehavior = !!entityComponents || node.name in templates;\n  if (!nodeHasBehavior && !childEntities.length && !isRoot) {\n    return null; // we don't need an entity for this node\n  }\n\n  const el = document.createElement(\"a-entity\");\n  el.append.apply(el, childEntities);\n\n  // Remove invalid CSS class name characters.\n  const className = (node.name || node.uuid).replace(/[^\\w-]/g, \"\");\n  el.classList.add(className);\n\n  // AFRAME rotation component expects rotations in YXZ, convert it\n  if (node.rotation.order !== \"YXZ\") {\n    node.rotation.setFromQuaternion(node.quaternion, \"YXZ\");\n  }\n\n  // Copy over the object's transform to the THREE.Group and reset the actual transform of the Object3D\n  // all updates to the object should be done through the THREE.Group wrapper\n  el.object3D.position.copy(node.position);\n  el.object3D.rotation.copy(node.rotation);\n  el.object3D.scale.copy(node.scale).multiplyScalar(modelToWorldScale);\n  el.object3D.matrixNeedsUpdate = true;\n\n  node.matrixAutoUpdate = false;\n  node.matrix.identity();\n  node.matrix.decompose(node.position, node.rotation, node.scale);\n\n  el.setObject3D(node.type.toLowerCase(), node);\n  if (entityComponents && \"nav-mesh\" in entityComponents) {\n    el.setObject3D(\"mesh\", node);\n  }\n\n  // Set the name of the `THREE.Group` to match the name of the node,\n  // so that `THREE.PropertyBinding` will find (and later animate)\n  // the group. See `PropertyBinding.findNode`:\n  // https://github.com/mrdoob/three.js/blob/dev/src/animation/PropertyBinding.js#L211\n  el.object3D.name = node.name;\n  if (node.animations) {\n    // Pass animations up to the group object so that when we can pass the group as\n    // the optional root in `THREE.AnimationMixer.clipAction` and use the hierarchy\n    // preserved under the group (but not the node). Otherwise `clipArray` will be\n    // `null` in `THREE.AnimationClip.findByName`.\n    node.parent.animations = node.animations;\n  }\n\n  const gltfIndex = node.userData.gltfIndex;\n  if (gltfIndex !== undefined) {\n    indexToEntityMap[gltfIndex] = el;\n  }\n\n  return el;\n};\n\nfunction inflateComponents(inflatedEntity, indexToEntityMap) {\n  inflatedEntity.object3D.traverse(object3D => {\n    const entityComponents = getHubsComponents(object3D);\n    const el = object3D.el;\n\n    if (entityComponents && el) {\n      for (const prop in entityComponents) {\n        if (entityComponents.hasOwnProperty(prop) && AFRAME.GLTFModelPlus.components.hasOwnProperty(prop)) {\n          const { componentName, inflator } = AFRAME.GLTFModelPlus.components[prop];\n          inflator(el, componentName, entityComponents[prop], entityComponents, indexToEntityMap);\n        }\n      }\n    }\n  });\n}\n\nfunction attachTemplate(root, name, templateRoot) {\n  const targetEls = root.querySelectorAll(\".\" + name);\n  for (const el of targetEls) {\n    const root = templateRoot.cloneNode(true);\n    // Merge root element attributes with the target element\n    for (const { name, value } of root.attributes) {\n      el.setAttribute(name, value);\n    }\n\n    // Append all child elements\n    while (root.children.length > 0) {\n      el.appendChild(root.children[0]);\n    }\n  }\n}\n\nfunction runMigration(version, json) {\n  if (version < 2) {\n    //old heightfields will be on the same node as the nav-mesh, delete those\n    const oldHeightfieldNode = json.nodes.find(node => {\n      let components = null;\n      if (node.extensions && node.extensions.MOZ_hubs_components) {\n        components = node.extensions.MOZ_hubs_components;\n      } else if (node.extensions && node.extensions.HUBS_components) {\n        components = node.extensions.HUBS_components;\n      }\n      return components && components.heightfield && components[\"nav-mesh\"];\n    });\n    if (oldHeightfieldNode) {\n      if (oldHeightfieldNode.extensions.MOZ_hubs_components) {\n        delete oldHeightfieldNode.extensions.MOZ_hubs_components.heightfield;\n      } else if (oldHeightfieldNode.extensions.HUBS_components) {\n        delete oldHeightfieldNode.extensions.HUBS_components.heightfield;\n      }\n    }\n  }\n}\n\nexport async function loadGLTF(src, contentType, preferredTechnique, onProgress, jsonPreprocessor) {\n  let gltfUrl = src;\n  let fileMap;\n\n  if (contentType.includes(\"model/gltf+zip\") || contentType.includes(\"application/x-zip-compressed\")) {\n    fileMap = await extractZipFile(gltfUrl);\n    gltfUrl = fileMap[\"scene.gtlf\"];\n  }\n\n  const loadingManager = new THREE.LoadingManager();\n  loadingManager.setURLModifier(getCustomGLTFParserURLResolver(gltfUrl));\n  const gltfLoader = new THREE.GLTFLoader(loadingManager);\n\n  const parser = await new Promise((resolve, reject) => gltfLoader.createParser(gltfUrl, resolve, onProgress, reject));\n\n  parser.textureLoader = textureLoader;\n\n  if (jsonPreprocessor) {\n    parser.json = jsonPreprocessor(parser.json);\n  }\n\n  let version = 0;\n  if (\n    parser.json.extensions &&\n    parser.json.extensions.MOZ_hubs_components &&\n    parser.json.extensions.MOZ_hubs_components.hasOwnProperty(\"version\")\n  ) {\n    version = parser.json.extensions.MOZ_hubs_components.version;\n  }\n  runMigration(version, parser.json);\n\n  const materials = parser.json.materials;\n  if (materials) {\n    for (let i = 0; i < materials.length; i++) {\n      const material = materials[i];\n\n      if (\n        material.extensions &&\n        material.extensions.MOZ_alt_materials &&\n        material.extensions.MOZ_alt_materials[preferredTechnique] !== undefined\n      ) {\n        const altMaterialIndex = material.extensions.MOZ_alt_materials[preferredTechnique];\n        materials[i] = materials[altMaterialIndex];\n      }\n    }\n  }\n\n  const nodes = parser.json.nodes;\n\n  if (nodes) {\n    for (let i = 0; i < nodes.length; i++) {\n      const node = nodes[i];\n\n      if (!node.extras) {\n        node.extras = {};\n      }\n\n      node.extras.gltfIndex = i;\n    }\n  }\n\n  const gltf = await new Promise(parser.parse.bind(parser));\n\n  gltf.scene.traverse(object => {\n    // GLTFLoader sets matrixAutoUpdate on animated objects, we want to keep the defaults\n    object.matrixAutoUpdate = THREE.Object3D.DefaultMatrixAutoUpdate;\n\n    object.material = mapMaterials(object, material => {\n      if (material.isMeshStandardMaterial && preferredTechnique === \"KHR_materials_unlit\") {\n        return MobileStandardMaterial.fromStandardMaterial(material);\n      }\n\n      return material;\n    });\n  });\n\n  if (fileMap) {\n    // The GLTF is now cached as a THREE object, we can get rid of the original blobs\n    Object.keys(fileMap).forEach(URL.revokeObjectURL);\n  }\n\n  return gltf;\n}\n\n/**\n * Loads a GLTF model, optionally recursively \"inflates\" the child nodes of a model into a-entities and sets\n * whitelisted components on them if defined in the node's extras.\n * @namespace gltf\n * @component gltf-model-plus\n */\nAFRAME.registerComponent(\"gltf-model-plus\", {\n  schema: {\n    src: { type: \"string\" },\n    contentType: { type: \"string\" },\n    useCache: { default: true },\n    inflate: { default: false },\n    batch: { default: false },\n    modelToWorldScale: { type: \"number\", default: 1 }\n  },\n\n  init() {\n    this.preferredTechnique =\n      window.APP && window.APP.quality === \"low\" ? \"KHR_materials_unlit\" : \"pbrMetallicRoughness\";\n\n    // This can be set externally if a consumer wants to do some node preprocssing.\n    this.jsonPreprocessor = null;\n\n    this.loadTemplates();\n  },\n\n  update() {\n    this.applySrc(this.data.src, this.data.contentType);\n  },\n\n  remove() {\n    if (this.data.batch && this.model) {\n      this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.removeObject(this.el.object3DMap.mesh);\n    }\n    if (this.data.src) {\n      gltfCache.release(this.data.src);\n    }\n  },\n\n  loadTemplates() {\n    this.templates = {};\n    this.el.querySelectorAll(\":scope > template\").forEach(templateEl => {\n      const root = document.importNode(templateEl.firstElementChild || templateEl.content.firstElementChild, true);\n      this.templates[templateEl.getAttribute(\"data-name\")] = root;\n    });\n  },\n\n  async loadModel(src, contentType, technique, useCache) {\n    if (useCache) {\n      if (gltfCache.has(src)) {\n        gltfCache.retain(src);\n        return cloneGltf(gltfCache.get(src).gltf);\n      } else {\n        if (inflightGltfs.has(src)) {\n          const gltf = await inflightGltfs.get(src);\n          gltfCache.retain(src);\n          return cloneGltf(gltf);\n        } else {\n          const promise = loadGLTF(src, contentType, technique, null, this.jsonPreprocessor);\n          inflightGltfs.set(src, promise);\n          const gltf = await promise;\n          inflightGltfs.delete(src);\n          gltfCache.set(src, gltf);\n          return cloneGltf(gltf);\n        }\n      }\n    } else {\n      return loadGLTF(src, contentType, technique, null, this.jsonPreprocessor);\n    }\n  },\n\n  async applySrc(src, contentType) {\n    try {\n      // If the src attribute is a selector, get the url from the asset item.\n      if (src && src.charAt(0) === \"#\") {\n        const assetEl = document.getElementById(src.substring(1));\n        src = assetEl.getAttribute(\"src\");\n      }\n\n      if (src === this.lastSrc) return;\n\n      if (this.lastSrc) {\n        gltfCache.release(this.lastSrc);\n      }\n\n      this.lastSrc = src;\n\n      if (!src) {\n        if (this.inflatedEl) {\n          console.warn(\"gltf-model-plus set to an empty source, unloading inflated model.\");\n          this.disposeLastInflatedEl();\n        }\n        return;\n      }\n\n      this.el.emit(\"model-loading\");\n      const gltf = await this.loadModel(src, contentType, this.preferredTechnique, this.data.useCache);\n\n      // If we started loading something else already\n      // TODO: there should be a way to cancel loading instead\n      if (src != this.lastSrc) return;\n\n      // If we had inflated something already before, clean that up\n      this.disposeLastInflatedEl();\n\n      this.model = gltf.scene || gltf.scenes[0];\n      this.model.animations = gltf.animations;\n\n      if (this.data.batch) {\n        this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.addObject(this.model);\n      }\n\n      if (gltf.animations.length > 0) {\n        this.el.setAttribute(\"animation-mixer\", {});\n        this.el.components[\"animation-mixer\"].initMixer(gltf.animations);\n      } else {\n        generateMeshBVH(this.model);\n      }\n\n      const indexToEntityMap = {};\n\n      let object3DToSet = this.model;\n      if (\n        this.data.inflate &&\n        (this.inflatedEl = inflateEntities(\n          indexToEntityMap,\n          this.model,\n          this.templates,\n          true,\n          this.data.modelToWorldScale\n        ))\n      ) {\n        this.el.appendChild(this.inflatedEl);\n\n        object3DToSet = this.inflatedEl.object3D;\n        // TODO: Still don't fully understand the lifecycle here and how it differs between browsers, we should dig in more\n        // Wait one tick for the appended custom elements to be connected before attaching templates\n        await nextTick();\n        if (src != this.lastSrc) return; // TODO: there must be a nicer pattern for this\n\n        inflateComponents(this.inflatedEl, indexToEntityMap);\n\n        for (const name in this.templates) {\n          attachTemplate(this.el, name, this.templates[name]);\n        }\n      }\n\n      // The call to setObject3D below recursively clobbers any `el` backreferences to entities\n      // in the entire inflated entity graph to point to `object3DToSet`.\n      //\n      // We don't want those overwritten, since lots of code assumes `object3d.el` points to the relevant\n      // A-Frame entity for that three.js object, so we back them up and re-wire them here. If we didn't do\n      // this, all the `el` properties on these object3ds would point to the `object3DToSet` which is either\n      // the model or the root GLTF inflated entity.\n      const rewires = [];\n\n      object3DToSet.traverse(o => {\n        const el = o.el;\n        if (el) rewires.push(() => (o.el = el));\n      });\n\n      const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n\n      if (environmentMapComponent) {\n        environmentMapComponent.applyEnvironmentMap(object3DToSet);\n      }\n\n      this.el.setObject3D(\"mesh\", object3DToSet);\n\n      rewires.forEach(f => f());\n\n      this.el.emit(\"model-loaded\", { format: \"gltf\", model: this.model });\n    } catch (e) {\n      gltfCache.release(src);\n      console.error(\"Failed to load glTF model\", e, this);\n      this.el.emit(\"model-error\", { format: \"gltf\", src });\n    }\n  },\n\n  disposeLastInflatedEl() {\n    if (this.inflatedEl) {\n      this.inflatedEl.parentNode.removeChild(this.inflatedEl);\n\n      this.inflatedEl.object3D.traverse(x => {\n        if (x.material && x.material.dispose) {\n          x.material.dispose();\n        }\n\n        if (x.geometry) {\n          if (x.geometry.dispose) {\n            x.geometry.dispose();\n          }\n\n          x.geometry.boundsTree = null;\n        }\n      });\n\n      delete this.inflatedEl;\n\n      this.el.removeAttribute(\"animation-mixer\");\n    }\n  }\n});\n","// Wrapper for a worker which accepts work items and responds with results.\n//\n// The worker must receive messages with data of the shape { id, payload }, and then respond\n// with messages containing matching IDs of the shape { id, result, err }.\n//\n// Returns a function that accepts a work item, sends it to the worker, and returns a promise that\n// will resolve with the result or reject with the error.\n//\nexport function promisifyWorker(worker) {\n  let nextItemId = 0;\n  const outstanding = {}; // item ID: { resolve, reject }\n\n  worker.onmessage = msg => {\n    const { id, result, err } = msg.data;\n    const handlers = outstanding[id];\n    if (handlers == null) {\n      console.error(`Unknown message with ID ${id} received from ${worker}.`);\n    } else {\n      delete outstanding[id];\n      if (err != null) {\n        handlers.reject(new Error(err));\n      } else {\n        handlers.resolve(result);\n      }\n    }\n  };\n\n  return function(data, transfer) {\n    const id = nextItemId++;\n    const promise = new Promise((resolve, reject) => {\n      outstanding[id] = { resolve, reject };\n    });\n    worker.postMessage({ id, payload: data }, transfer);\n    return promise;\n  };\n}\n","import { forEachMaterial } from \"../utils/material-utils\";\n\nconst interactorOneTransform = [];\nconst interactorTwoTransform = [];\n\nexport const validMaterials = [\"MeshStandardMaterial\", \"MeshBasicMaterial\", \"MobileStandardMaterial\"];\n/**\n * Applies effects to a hoverable based on hover state.\n * @namespace interactables\n * @component hoverable-visuals\n */\nAFRAME.registerComponent(\"hoverable-visuals\", {\n  schema: {\n    enableSweepingEffect: { type: \"boolean\", default: true }\n  },\n  init() {\n    // uniforms and boundingSphere are set from the component responsible for loading the mesh.\n    this.uniforms = null;\n    this.boundingSphere = new THREE.Sphere();\n\n    this.sweepParams = [0, 0];\n  },\n  remove() {\n    this.uniforms = null;\n    this.boundingBox = null;\n\n    // Used when the object is batched\n    const batchManagerSystem = AFRAME.scenes[0].systems[\"hubs-systems\"].batchManagerSystem;\n    this.el.object3D.traverse(object => {\n      if (!object.material) return;\n      forEachMaterial(object, material => {\n        if (\n          !validMaterials.includes(material.type) ||\n          object.el.classList.contains(\"ui\") ||\n          object.el.classList.contains(\"hud\") ||\n          object.el.getAttribute(\"text-button\")\n        )\n          return;\n\n        batchManagerSystem.meshToEl.delete(object);\n      });\n    });\n  },\n  tick(time) {\n    if (!this.uniforms || !this.uniforms.length) return;\n\n    const isPinned = this.el.components.pinnable && this.el.components.pinnable.data.pinned;\n    const isSpawner = !!this.el.components[\"super-spawner\"];\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n    const hideDueToPinning = !isSpawner && isPinned && !isFrozen;\n\n    let interactorOne, interactorTwo;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    if (interaction.state.leftHand.hovered === this.el || interaction.state.leftHand.held === this.el) {\n      interactorOne = interaction.options.leftHand.entity.object3D;\n    }\n    if (interaction.state.rightRemote.hovered === this.el || interaction.state.rightRemote.held === this.el) {\n      interactorTwo = interaction.options.rightRemote.entity.object3D;\n    }\n    if (interaction.state.rightHand.hovered === this.el || interaction.state.rightHand.held === this.el) {\n      interactorTwo = interaction.options.rightHand.entity.object3D;\n    }\n\n    if (interactorOne) {\n      interactorOne.matrixWorld.toArray(interactorOneTransform);\n    }\n    if (interactorTwo) {\n      interactorTwo.matrixWorld.toArray(interactorTwoTransform);\n    }\n\n    if (interactorOne || interactorTwo || isFrozen) {\n      const worldY = this.el.object3D.matrixWorld.elements[13];\n      const scaledRadius = this.el.object3D.scale.y * this.boundingSphere.radius;\n      this.sweepParams[0] = worldY - scaledRadius;\n      this.sweepParams[1] = worldY + scaledRadius;\n    }\n\n    for (let i = 0, l = this.uniforms.length; i < l; i++) {\n      const uniform = this.uniforms[i];\n      uniform.hubs_EnableSweepingEffect.value = this.data.enableSweepingEffect && !hideDueToPinning;\n      uniform.hubs_IsFrozen.value = isFrozen;\n      uniform.hubs_SweepParams.value = this.sweepParams;\n\n      uniform.hubs_HighlightInteractorOne.value = !!interactorOne && !hideDueToPinning;\n      uniform.hubs_InteractorOnePos.value[0] = interactorOneTransform[12];\n      uniform.hubs_InteractorOnePos.value[1] = interactorOneTransform[13];\n      uniform.hubs_InteractorOnePos.value[2] = interactorOneTransform[14];\n\n      uniform.hubs_HighlightInteractorTwo.value = !!interactorTwo && !hideDueToPinning;\n      uniform.hubs_InteractorTwoPos.value[0] = interactorTwoTransform[12];\n      uniform.hubs_InteractorTwoPos.value[1] = interactorTwoTransform[13];\n      uniform.hubs_InteractorTwoPos.value[2] = interactorTwoTransform[14];\n\n      if (interactorOne || interactorTwo || isFrozen) {\n        uniform.hubs_Time.value = time;\n      }\n    }\n  }\n});\n","console.log(`Hubs version: ${process.env.BUILD_VERSION || \"?\"}`);\n\n// We should technically be able to just include three here, but our dependancies are tangled such that not having aframe is a bit difficult\nimport \"aframe\";\nimport \"./utils/logging\";\n\nimport { airtableAssets, airtableAssetsInitialState } from './airtable'\n\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\n\nimport { IntlProvider, FormattedMessage, addLocaleData } from \"react-intl\";\nimport en from \"react-intl/locale-data/en\";\nimport { lang, messages } from \"./utils/i18n\";\naddLocaleData([...en]);\n\nimport { disableiOSZoom } from \"./utils/disable-ios-zoom\";\ndisableiOSZoom();\n\nimport { App } from \"./App\";\n\nimport AvatarPreview from \"./react-components/avatar-preview\";\n\nimport { fetchAvatar } from \"./utils/avatar-utils\";\n\nimport styles from \"./assets/stylesheets/avatar.scss\";\nimport hubLogo from \"./assets/images/hub-preview-white.png\";\n\nconst qs = new URLSearchParams(location.search);\nwindow.APP = new App();\n\nclass AvatarUI extends React.Component {\n  static propTypes = {\n    avatarId: PropTypes.string,\n    store: PropTypes.object,\n    intl: PropTypes.object\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {airtableAssets: airtableAssetsInitialState};\n  }\n\n  componentDidMount() {\n    this.props.store.addEventListener(\"statechanged\", this.storeUpdated);\n    this.refetchAvatar();\n\n    airtableAssets.find('recHqITRS7cBMwn9i', (err, record) => \n       this.setState({airtableAssets: record.fields})\n    )\n  }\n\n  componentWillUnmount() {\n    this.props.store.removeEventListener(\"statechanged\", this.storeUpdated);\n  }\n\n  storeUpdated = () => this.forceUpdate();\n\n  refetchAvatar = async () => {\n    const avatar = await fetchAvatar(this.props.avatarId);\n    this.setState({ avatar });\n  };\n\n  setAvatar = e => {\n    e && e.preventDefault();\n    this.props.store.update({\n      profile: { avatarId: this.state.avatar.avatar_id }\n    });\n  };\n\n  render() {\n    const { avatar } = this.state;\n    if (!avatar) {\n      return (\n        <div className={styles.avatarLanding}>\n          <div className={classNames([styles.box, styles.darkened])}>Loading</div>\n        </div>\n      );\n    }\n\n    const selectedAvatarId = this.props.store.state.profile.avatarId;\n    const isSelected = avatar.avatar_id === selectedAvatarId;\n\n    return (\n      <form onSubmit={this.setAvatar} className={styles.avatarLanding}>\n        <div className={classNames([styles.box, styles.darkened])}>\n          <label className={styles.title}>\n            <span>{avatar.name}</span>\n          </label>\n          <div className={styles.attributions}>\n            {avatar.attributions && avatar.attributions.creator && <span>{`by ${avatar.attributions.creator}`}</span>}\n          </div>\n          <div className={styles.preview}>{avatar && <AvatarPreview avatarGltfUrl={avatar.gltf_url} />}</div>\n          {isSelected ? (\n            <span className={styles.selectedMessage}>\n              <FormattedMessage id=\"avatar-landing.selected\" />\n            </span>\n          ) : (\n            <button disabled={isSelected} className={styles.formSubmit} type=\"submit\">\n              <FormattedMessage id=\"avatar-landing.select\" />\n            </button>\n          )}\n        </div>\n        <img className={styles.logo} src={this.state.airtableAssets.DarkLogo} />\n      </form>\n    );\n  }\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const avatarId = qs.get(\"avatar_id\") || document.location.pathname.substring(1).split(\"/\")[1];\n  console.log(`Avatar ID: ${avatarId}`);\n  ReactDOM.render(\n    <IntlProvider locale={lang} messages={messages}>\n      <AvatarUI avatarId={avatarId} store={window.APP.store} />\n    </IntlProvider>,\n    document.getElementById(\"ui-root\")\n  );\n});\n","import { forEachMaterial } from \"../utils/material-utils\";\nimport cubeMapPosX from \"../assets/images/cubemap/posx.jpg\";\nimport cubeMapNegX from \"../assets/images/cubemap/negx.jpg\";\nimport cubeMapPosY from \"../assets/images/cubemap/posy.jpg\";\nimport cubeMapNegY from \"../assets/images/cubemap/negy.jpg\";\nimport cubeMapPosZ from \"../assets/images/cubemap/posz.jpg\";\nimport cubeMapNegZ from \"../assets/images/cubemap/negz.jpg\";\n\nexport async function createDefaultEnvironmentMap() {\n  const urls = [cubeMapPosX, cubeMapNegX, cubeMapPosY, cubeMapNegY, cubeMapPosZ, cubeMapNegZ];\n  const texture = await new Promise((resolve, reject) =>\n    new THREE.CubeTextureLoader().load(urls, resolve, undefined, reject)\n  );\n  texture.format = THREE.RGBFormat;\n  return texture;\n}\n\nAFRAME.registerComponent(\"environment-map\", {\n  init() {\n    this.environmentMap = null;\n\n    this.updateEnvironmentMap = this.updateEnvironmentMap.bind(this);\n  },\n\n  updateEnvironmentMap(environmentMap) {\n    this.environmentMap = environmentMap;\n    this.applyEnvironmentMap(this.el.object3D);\n  },\n\n  applyEnvironmentMap(object3D) {\n    object3D.traverse(object => {\n      forEachMaterial(object, material => {\n        if (material.isMeshStandardMaterial) {\n          material.envMap = this.environmentMap;\n          material.needsUpdate = true;\n        }\n      });\n    });\n  }\n});\n","module.exports = \"if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\\n  float ratio = 0.0;\\n\\n  if (hubs_EnableSweepingEffect) {\\n    float size = hubs_SweepParams.t - hubs_SweepParams.s;\\n    float line = mod(hubs_Time / 500.0 * size, size * 3.0) + hubs_SweepParams.s - size / 3.0;\\n\\n    if (hubs_WorldPosition.y < line) {\\n      // Highlight with a sweeping gradient.\\n      ratio = max(0.0, 1.0 - (line - hubs_WorldPosition.y) / (size * 1.5));\\n    }\\n  }\\n\\n  // Highlight with a gradient falling off with distance.\\n  float pulse = 9.0 + 3.0 * (sin(hubs_Time / 1000.0) + 1.0);\\n\\n  if (hubs_HighlightInteractorOne) {\\n    float dist1 = distance(hubs_WorldPosition, hubs_InteractorOnePos);\\n    ratio += -min(1.0, pow(dist1 * pulse, 3.0)) + 1.0;\\n  } \\n\\n  if (hubs_HighlightInteractorTwo) {\\n    float dist2 = distance(hubs_WorldPosition, hubs_InteractorTwoPos);\\n    ratio += -min(1.0, pow(dist2 * pulse, 3.0)) + 1.0;\\n  }\\n\\n  ratio = min(1.0, ratio);\\n\\n  // Gamma corrected highlight color\\n  vec3 highlightColor = vec3(0.184, 0.499, 0.933);\\n\\n  gl_FragColor.rgb = (gl_FragColor.rgb * (1.0 - ratio)) + (highlightColor * ratio);\\n}\\n\"","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posx-d235fb97df77b607be04b84125f40e7c.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negx-35034574e114423babdea92b6a2eb97a.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posy-d0c4e1e7979d75923d4d8b49c191bc6e.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negy-35808d21d1d17ac1b84d3184e365093b.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posz-de29aa8396196e4b040cd5305e351dbe.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negz-d73d18a8b7994524dc39a6ea3fcf43fc.jpg\";","import { detectOS } from \"detect-browser\";\n\nexport function disableiOSZoom() {\n  if (detectOS(navigator.userAgent) !== \"iOS\") return;\n\n  let lastTouchAtMs = 0;\n\n  document.addEventListener(\"touchmove\", ev => {\n    if (ev.scale === 1) return;\n\n    ev.preventDefault();\n  });\n\n  document.addEventListener(\"touchend\", ev => {\n    const now = new Date().getTime();\n    const isDoubleTouch = now - lastTouchAtMs <= 300;\n    lastTouchAtMs = now;\n\n    if (isDoubleTouch) {\n      ev.preventDefault();\n    }\n  });\n}\n","import Store from \"./storage/store\";\nimport MediaSearchStore from \"./storage/media-search-store\";\n\nexport class App {\n  constructor() {\n    this.scene = null;\n    this.quality = \"low\";\n    this.store = new Store();\n    this.mediaSearchStore = new MediaSearchStore();\n  }\n\n  setQuality(quality) {\n    if (this.quality === quality) {\n      return false;\n    }\n\n    this.quality = quality;\n\n    if (this.scene) {\n      this.scene.dispatchEvent(new CustomEvent(\"quality-changed\", { detail: quality }));\n    }\n\n    return true;\n  }\n}\n","import Airtable from 'airtable';\nAirtable.configure({\n    endpointUrl: 'https://api.airtable.com',\n    apiKey: 'keyOHSVeLr3ryLrL5'\n});\n\nconst base = Airtable.base('appIR0AlHDFG5WR8z');\n\nexport const airtableAssetsInitialState = { DarkLogo: null, Name: null, Icon: null }\nexport const airtableAssets = base('Assets');\n\nexport const airtableMessages = base('Messages').select({\n    view: 'Grid view'\n}).firstPage(async (err, records) => {\n    if (err) { console.error(err); return; }\n    const record = records[0];\n    // console.log(record.get('Motto'))\n    return record;\n\n    // records.forEach(function(record) {\n    //     console.log('Retrieved', record.get('Motto'));\n    // });\n});;\n// .find('recHqITRS7cBMwn9i', (err, record) => record.fields);\n// export const airtableAssets = () => base('Assets')\n\n// export default base;","module.exports = __webpack_public_path__ + \"assets/images/warning_icon-739d2a2ea906737505bcbc2cb51123a8.png\";","module.exports = __webpack_public_path__ + \"assets/images/warning_icon@2x-706e4a4db33f9456bac320e956b4120d.png\";","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport \"three/examples/js/controls/OrbitControls\";\n\nimport { createDefaultEnvironmentMap } from \"../components/environment-map\";\nimport { loadGLTF } from \"../components/gltf-model-plus\";\nimport { disposeNode } from \"../utils/three-utils\";\nimport { createImageBitmap, disposeImageBitmap } from \"../utils/image-bitmap-utils\";\nimport styles from \"../assets/stylesheets/avatar-preview.scss\";\n\nconst TEXTURE_PROPS = {\n  base_map: [\"map\"],\n  emissive_map: [\"emissiveMap\"],\n  normal_map: [\"normalMap\"],\n  orm_map: [\"aoMap\", \"roughnessMap\", \"metalnessMap\"]\n};\n\nconst ALL_MAPS = Object.keys(TEXTURE_PROPS);\n\n// This should match our aframe renderer=\"antialias: true; colorManagement: true; sortObjects: true;\n// physicallyCorrectLights: true; webgl2: true; multiview: false;\"\nfunction createRenderer(canvas, alpha = false, useDevicePixelRatio = true) {\n  const context = canvas.getContext(\"webgl2\", {\n    alpha,\n    depth: true,\n    antialias: true,\n    premultipliedAlpha: true,\n    preserveDrawingBuffer: false,\n    powerPreference: \"default\"\n  });\n\n  const renderer = new THREE.WebGLRenderer({ alpha, canvas, context });\n  renderer.gammaOutput = true;\n  renderer.gammaFactor = 2.2;\n  renderer.physicallyCorrectLights = true;\n  if (useDevicePixelRatio) {\n    renderer.setPixelRatio(window.devicePixelRatio);\n  }\n  return renderer;\n}\n\nconst createImageBitmapFromURL = url =>\n  fetch(url)\n    .then(r => r.blob())\n    .then(createImageBitmap);\n\nconst ORBIT_ANGLE = new THREE.Euler(-30 * THREE.Math.DEG2RAD, 30 * THREE.Math.DEG2RAD, 0);\nconst DEFAULT_MARGIN = 1;\n\nfunction fitBoxInFrustum(camera, box, center, margin = DEFAULT_MARGIN) {\n  const halfYExtents = Math.max(box.max.y - center.y, center.y - box.min.y);\n  const halfVertFOV = THREE.Math.degToRad(camera.fov / 2);\n  camera.position.set(0, 0, (halfYExtents / Math.tan(halfVertFOV) + box.max.z) * margin);\n  camera.position.applyEuler(ORBIT_ANGLE);\n  camera.position.add(center);\n  camera.lookAt(center);\n}\n\nclass AvatarPreview extends Component {\n  static propTypes = {\n    avatarGltfUrl: PropTypes.string,\n    className: PropTypes.string\n  };\n  constructor(props) {\n    super(props);\n    this.state = { loading: true, error: null };\n    this.avatar = null;\n    this.imageBitmaps = {};\n  }\n\n  componentDidMount = () => {\n    this.scene = new THREE.Scene();\n\n    this.camera = new THREE.PerspectiveCamera(55, this.canvas.clientWidth / this.canvas.clientHeight, 0.1, 1000);\n    this.controls = new THREE.OrbitControls(this.camera, this.canvas);\n    this.controls.enablePan = false;\n\n    const light = new THREE.DirectionalLight(0xf7f6ef, 1);\n    light.position.set(0, 10, 10);\n    this.scene.add(light);\n    this.scene.add(new THREE.HemisphereLight(0xb1e3ff, 0xb1e3ff, 2.5));\n\n    this.camera.position.set(-0.2, 0.5, 0.5);\n    this.camera.matrixAutoUpdate = true;\n\n    this.controls.target.set(0, 0.45, 0);\n    this.controls.update();\n\n    if (this.props.avatarGltfUrl) {\n      this.loadPreviewAvatar(this.props.avatarGltfUrl).then(this.setAvatar);\n    }\n\n    const clock = new THREE.Clock();\n\n    this.snapshotCanvas = document.createElement(\"canvas\");\n    this.snapshotCanvas.width = 720;\n    this.snapshotCanvas.height = 1280;\n    this.snapshotCamera = new THREE.PerspectiveCamera(55, 720 / 1280, 0.1, 1000);\n    this.snapshotCamera.matrixAutoUpdate = true;\n    this.snapshotRenderer = createRenderer(this.snapshotCanvas, true, false);\n    this.snapshotRenderer.setClearAlpha(0);\n\n    this.previewRenderer = createRenderer(this.canvas);\n    this.previewRenderer.setClearColor(0xeaeaea);\n    this.previewRenderer.setAnimationLoop(() => {\n      const dt = clock.getDelta();\n      this.mixer && this.mixer.update(dt);\n      this.previewRenderer.render(this.scene, this.camera);\n    });\n    window.addEventListener(\"resize\", this.resize);\n    this.resize();\n  };\n\n  resize = () => {\n    const width = this.canvas.parentElement.offsetWidth;\n    const height = this.canvas.parentElement.offsetHeight;\n    this.previewRenderer.setSize(width, height);\n    this.camera.aspect = width / height;\n    this.camera.updateProjectionMatrix();\n  };\n\n  setAvatar = avatar => {\n    if (!avatar) return;\n    this.avatar = avatar;\n    this.scene.add(avatar);\n    this.resetCamera();\n    this.setState({ error: null, loading: false });\n  };\n\n  resetCamera = (() => {\n    const box = new THREE.Box3();\n    const center = new THREE.Vector3();\n    return () => {\n      box.setFromObject(this.avatar);\n      box.getCenter(center);\n\n      // Shift the center vertically in order to frame the avatar nicely.\n      center.y = (box.max.y - box.min.y) * 0.6 + box.min.y;\n\n      fitBoxInFrustum(this.camera, box, center);\n      fitBoxInFrustum(this.snapshotCamera, box, center, 0.7);\n\n      this.controls.target.copy(center);\n      this.controls.update();\n    };\n  })();\n\n  componentWillUnmount = () => {\n    // Gotta be particularly careful about disposing things here since we will likely create many avatar\n    // previews during a session and Chrome will eventually discard the oldest webgl context if we leak\n    // contexts by holding on to them directly or indirectly.\n\n    this.scene && this.scene.traverse(disposeNode);\n    if (this.previewRenderer) {\n      this.previewRenderer.dispose();\n      this.previewRenderer.context = null;\n    }\n    if (this.snapshotRenderer) {\n      this.snapshotRenderer.dispose();\n      this.snapshotRenderer.context = null;\n    }\n    if (this.controls) {\n      this.controls.dispose();\n      this.controls.domElement = null;\n    }\n\n    Object.values(this.imageBitmaps).forEach(img => disposeImageBitmap(img));\n    window.removeEventListener(\"resize\", this.resize);\n  };\n\n  componentDidUpdate = async oldProps => {\n    if (oldProps.avatarGltfUrl !== this.props.avatarGltfUrl) {\n      if (this.avatar) {\n        this.scene.remove(this.avatar);\n        this.avatar = null;\n      }\n      if (this.props.avatarGltfUrl) {\n        this.setState({ error: null, loading: true });\n        await this.loadPreviewAvatar(this.props.avatarGltfUrl).then(this.setAvatar);\n      }\n    }\n    this.applyMaps(oldProps, this.props);\n  };\n\n  applyMaps(oldProps, newProps) {\n    return Promise.all(\n      ALL_MAPS.map(mapName => {\n        const applyMap = this.applyMapToPreview.bind(this, mapName);\n        if (oldProps[mapName] != newProps[mapName]) {\n          if (newProps[mapName] instanceof File) {\n            return createImageBitmap(newProps[mapName]).then(applyMap);\n          } else if (newProps[mapName]) {\n            return createImageBitmapFromURL(newProps[mapName]).then(applyMap);\n          } else {\n            return this.revertMap(mapName);\n          }\n        }\n      })\n    );\n  }\n\n  loadPreviewAvatar = async avatarGltfUrl => {\n    let gltf;\n    try {\n      gltf = await loadGLTF(avatarGltfUrl, \"model/gltf\");\n    } catch (e) {\n      this.setState({ loading: false, error: true });\n      return;\n    }\n\n    // On the backend we look for a material called Bot_PBS, here we are looking for a mesh called Avatar.\n    // When we \"officially\" support uploading custom GLTFs we need to decide what we are going to key things on\n    this.previewMesh =\n      gltf.scene.getObjectByName(\"AvatarMesh\") ||\n      gltf.scene.getObjectByName(\"Avatar\") ||\n      gltf.scene.getObjectByName(\"Bot_Skinned\") ||\n      gltf.scene;\n\n    const idleAnimation = gltf.animations && gltf.animations.find(({ name }) => name === \"idle_eyes\");\n    if (idleAnimation) {\n      this.mixer = new THREE.AnimationMixer(this.previewMesh);\n      const action = this.mixer.clipAction(idleAnimation);\n      action.enabled = true;\n      action.setLoop(THREE.LoopRepeat, Infinity).play();\n      this.idleAnimationAction = action;\n    }\n\n    const { material } = this.previewMesh;\n    if (material) {\n      // We delete onUpdate here to opt out of the auto texture cleanup after GPU upload.\n      const getImage = p => delete material[p].onUpdate && material[p].image;\n      this.originalMaps = {\n        base_map: TEXTURE_PROPS[\"base_map\"].map(getImage),\n        emissive_map: TEXTURE_PROPS[\"emissive_map\"].map(getImage),\n        normal_map: TEXTURE_PROPS[\"normal_map\"].map(getImage),\n        orm_map: TEXTURE_PROPS[\"orm_map\"].map(getImage)\n      };\n\n      await Promise.all([\n        this.applyMaps({}, this.props), // Apply initial maps\n        createDefaultEnvironmentMap().then(t => {\n          this.previewMesh.material.envMap = t;\n          this.previewMesh.material.needsUpdate = true;\n        })\n      ]);\n    } else {\n      this.originalMaps = {};\n    }\n\n    return gltf.scene;\n  };\n\n  applyMapToPreview = (name, image) => {\n    if (this.imageBitmaps[name]) {\n      disposeImageBitmap(this.imageBitmaps[name]);\n    }\n    this.imageBitmaps[name] = image;\n    TEXTURE_PROPS[name].forEach(prop => {\n      const texture = this.previewMesh.material[prop];\n      texture.image = image;\n      texture.needsUpdate = true;\n    });\n  };\n\n  revertMap = name => {\n    if (this.imageBitmaps[name]) {\n      disposeImageBitmap(this.imageBitmaps[name]);\n    }\n    delete this.imageBitmaps[name];\n    this.originalMaps[name].forEach((bm, i) => {\n      const texture = this.previewMesh.material[TEXTURE_PROPS[name][i]];\n      texture.image = bm;\n      texture.needsUpdate = true;\n    });\n  };\n\n  snapshot = () => {\n    return new Promise(resolve => {\n      if (this.idleAnimationAction) this.idleAnimationAction.stop();\n      this.snapshotRenderer.render(this.scene, this.snapshotCamera);\n      this.snapshotCanvas.toBlob(blob => {\n        if (this.idleAnimationAction) this.idleAnimationAction.play();\n        resolve(blob);\n      });\n    });\n  };\n\n  render() {\n    return (\n      <div className={classNames(styles.preview, this.props.className)}>\n        {this.state.loading &&\n          !this.state.error && (\n            <div className=\"loader\">\n              <div className=\"loader-center\" />\n            </div>\n          )}\n        {this.state.error &&\n          !this.state.loading && (\n            <div className=\"error\">\n              <img\n                src=\"../assets/images/warning_icon.png\"\n                srcSet=\"../assets/images/warning_icon@2x.png 2x\"\n                className=\"error-icon\"\n              />\n              <FormattedMessage id=\"avatar-preview.loading-failed\" />\n            </div>\n          )}\n        <canvas ref={c => (this.canvas = c)} />\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(AvatarPreview, { withRef: true });\n","// removed by extract-text-webpack-plugin\nmodule.exports = {\"preview\":\"avatar-preview__preview__2I8qx\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"avatar-landing\":\"avatar__avatar-landing__3bdoO\",\"avatarLanding\":\"avatar__avatar-landing__3bdoO\",\"form-submit\":\"avatar__form-submit__3OEBN\",\"formSubmit\":\"avatar__form-submit__3OEBN\",\"title\":\"avatar__title__PP1dU\",\"attributions\":\"avatar__attributions__1Ej7c\",\"logo\":\"avatar__logo__35vmn\",\"box\":\"avatar__box__vyKNY\",\"selected-message\":\"avatar__selected-message__25S2j\",\"selectedMessage\":\"avatar__selected-message__25S2j\",\"preview\":\"avatar__preview__3T2SV\"};","const qs = new URLSearchParams(location.search);\n\nexport default function qsTruthy(param) {\n  const val = qs.get(param);\n  // if the param exists but is not set (e.g. \"?foo&bar\"), its value is the empty string.\n  return val === \"\" || /1|on|true|yes/i.test(val);\n}\n","import {airtableMessages} from '../airtable'\n\n// let fields;\n\n// airtableAssets.find('recHqITRS7cBMwn9i', (err, record) => \n//    fields = record.fields\n// )\n\nasync () => {\n\tawait console.log(airtableMessages)\n}\n\nlet motto = airtableMessages && airtableMessages.get('Motto') || 'Learn together, from anywhere.\\nThe future of learning is virtual.\\nEqualizing access to premier quality education.'\n\n\nexport default {\n  \"en\": {\n    \"auth.verified-title\": \"E-Mail Verified!\",\n    \"auth.verified\": \"Your email has been verified!\\nYou can now close this browser tab and return to Hubs.\",\n    \"auth.spoke-verified\": \"You email has been verified!\\nYou can now close this browser tab and return to Spoke.\",\n    \"sign-in.prompt\": \"Sign in to pin objects in rooms.\",\n    \"sign-in.auth-started\":\n      \"Email sent!\\n\\nTo continue, go click on the link in the email using your phone, tablet, or PC.\",\n    \"sign-in.pin\": \"You'll need to sign in to pin objects.\",\n    \"sign-in.pin-complete\": \"You are now signed in.\",\n    \"sign-in.unpin\": \"You'll need to sign in to un-pin objects.\",\n    \"sign-in.unpin-complete\": \"You are now signed in.\",\n    \"sign-in.change-scene\": \"You'll need to sign in to change the scene.\",\n    \"sign-in.change-scene-complete\": \"You are now signed in.\",\n    \"sign-in.rename-room\": \"You'll need to sign in to rename axon park.\",\n    \"sign-in.rename-room-complete\": \"You are now signed in.\",\n    \"sign-in.close-room\": \"You'll need to sign in to close axon park.\",\n    \"sign-in.close-room-complete\": \"You are now signed in.\",\n    \"sign-in.mute-user\": \"You'll need to sign in to mute other users.\",\n    \"sign-in.mute-user-complete\": \"You are now signed in.\",\n    \"sign-in.kick-user\": \"You'll need to sign in to kick other users.\",\n    \"sign-in.kick-user-complete\": \"You are now signed in.\",\n    \"sign-in.create-avatar\": \"You'll need to sign in to create avatars.\",\n    \"sign-in.create-avatar-complete\": \"You are now signed in.\",\n    \"sign-in.favorite-room\": \"You'll need to sign in to add this room to your favorites.\",\n    \"sign-in.favorite-rooms\": \"You'll need to sign in to add favorite rooms.\",\n    \"sign-in.favorite-room-complete\": \"You are now signed in.\",\n    \"sign-in.favorite-rooms-complete\": \"You are now signed in.\",\n    \"sign-in.as\": \"Signed in as\",\n    \"sign-in.in\": \"Sign In\",\n    \"sign-in.out\": \"Sign Out\",\n    \"rename-room.message\": \"Enter the new name for axon park.\",\n    \"rename-room.rename\": \"Rename Axon Park\",\n    \"close-room.message\":\n      \"Closing this room will remove yourself and others from axon park, shutting it down permanently.\\n\\nAre you sure? This action cannot be undone.\",\n    \"close-room.confirm\": \"Yes, Close Axon Park\",\n    \"close-room.cancel\": \"Cancel\",\n    \"entry.room\": \"Immersive Education\",\n    \"entry.enter-room-title\": \"Lobby\",\n    \"entry.enter-room\": \"enter or send to device\",\n    \"entry.leave-room\": \"Leave Axon Park\",\n    \"entry.change-scene\": \"Choose a Scene\",\n    \"entry.in-lobby-notice\": \"You are viewing Axon Park from the lobby.\",\n    \"entry.screen-prefix\": \"Enter on \",\n    \"entry.desktop-screen\": \"Screen\",\n    \"entry.mobile-screen\": \"Phone\",\n    \"entry.mobile-safari\": \"Safari\",\n    \"entry.generic-prefix\": \" \",\n    \"entry.generic-medium\": \"Connected VR Headset\",\n    \"entry.generic-subtitle-desktop\": \"Oculus or SteamVR\",\n    \"entry.gearvr-prefix\": \"Enter on \",\n    \"entry.gearvr-medium\": \"Gear VR\",\n    \"entry.choose-device\": \"Choose Device\",\n    \"entry.device-medium\": \"Send to Device\",\n    \"entry.device-subtitle-desktop\": \"Standalone VR or Phone\",\n    \"entry.device-subtitle-mobile\": \"Standalone VR or PC\",\n    \"entry.device-subtitle-vr\": \"Phone or PC\",\n    \"entry.cardboard\": \"Enter on Google Cardboard\",\n    \"entry.daydream-prefix\": \"Enter on \",\n    \"entry.daydream-medium\": \"Daydream\",\n    \"entry.daydream-via-chrome\": \"Using Google Chrome\",\n    \"entry.invite-others\": \"invite others\",\n    \"entry.share-button\": \"share\",\n    \"entry.desktop.invite-tip\": \"Nobody is here yet. Share this room to get together.\",\n    \"entry.mobile.invite-tip\": \"Share to get together.\",\n    \"entry.invite-team-nag\": \"Invite a hubs team member\",\n    \"entry.enable-screen-sharing\": \"Share my desktop\",\n    \"entry.return-to-vr\": \"Return to VR\",\n    \"entry.enter-in-vr\": \"Enter in VR\",\n    \"entry.open-in-window\": \"Open in Tab\",\n    \"entry.lobby\": \"Lobby\",\n    \"entry.back\": \"Back\",\n    \"entry.notify_me\": \"Notify me when others arrive\",\n    \"entry.mute-on-entry\": \"Mute my microphone\",\n    \"profile.save\": \"Accept\",\n    \"profile.display_name.validation_warning\": \"Alphanumerics and hyphens. At least 3 characters, no more than 32\",\n    \"profile.header\": \"Name & Avatar\",\n    \"profile.terms_of_use\": \"Terms of Use\",\n    \"profile.privacy_notice\": \"Privacy Notice\",\n    \"profile.choose_avatar\": \"Browse Avatars\",\n    \"profile.tabs.legacy\": \"Default\",\n    \"profile.tabs.skinnable\": \"Custom Skin\",\n    \"profile.tabs.url\": \"Custom Model\",\n    \"profile.info\": \"Resources for creating custom avatar models can be found\",\n    \"profile.info-link\": \"here\",\n    \"avatar-editor.info\": \"Resources for creating custom avatar skins can be found\",\n    \"avatar-editor.info-link\": \"here\",\n    \"avatar-preview.loading-failed\": \"Loading failed\\nPlease choose another avatar\",\n    \"media-browser.search-placeholder.scenes\": \"Search Scenes...\",\n    \"media-browser.search-placeholder.avatars\": \"Search Avatars...\",\n    \"media-browser.search-placeholder.videos\": \"Search the web...\",\n    \"media-browser.search-placeholder.images\": \"Search the web...\",\n    \"media-browser.search-placeholder.youtube\": \"Search for videos...\",\n    \"media-browser.search-placeholder.gifs\": \"Search for GIFs...\",\n    \"media-browser.search-placeholder.twitch\": \"Search for streams...\",\n    \"media-browser.search-placeholder.sketchfab\": \"Search for models...\",\n    \"media-browser.search-placeholder.poly\": \"Search for models...\",\n    \"media-browser.search-placeholder.base\": \"Search...\",\n    \"media-browser.favorites-header\": \"Favorite Rooms\",\n    \"media-browser.add_custom_object\": \"Custom URL or File\",\n    \"media-browser.add_custom_scene\": \"Custom Scene\",\n    \"media-browser.add_custom_avatar\": \"Avatar GLB URL\",\n    \"media-browser.privacy_policy\": \"Privacy Policy\",\n    \"media-browser.spoke\": \"Spoke\",\n    \"media-browser.report_issue\": \"Report Issue\",\n    \"media-browser.powered_by.images\": \"Search by Bing | \",\n    \"media-browser.powered_by.videos\": \"Search by Bing | \",\n    \"media-browser.powered_by.youtube\": \"Search by Google | \",\n    \"media-browser.powered_by.gifs\": \"Search by Tenor | \",\n    \"media-browser.powered_by.sketchfab\": \"Search by Sketchfab | \",\n    \"media-browser.powered_by.poly\": \"Search by Google | \",\n    \"media-browser.powered_by.twitch\": \"Search by Twitch | \",\n    \"media-browser.powered_by.scenes\": \"Made with \",\n    \"media-browser.powered_by.avatars\": \" \",\n    \"media-browser.empty.images\": \"No results. Try entering a new search above.\",\n    \"media-browser.empty.videos\": \"No results. Try entering a new search above.\",\n    \"media-browser.empty.youtube\": \"No results. Try entering a new search above.\",\n    \"media-browser.empty.gifs\": \"No result. Try entering a new search above.\",\n    \"media-browser.empty.sketchfab\": \"No results. Try entering a new search above.\",\n    \"media-browser.empty.poly\": \"No results. Try entering a new search above.\",\n    \"media-browser.empty.twitch\": \"No results. Try entering a new search above.\",\n    \"media-browser.empty.favorites\": \"You don't have any favorites. Click a ⭐ to add to your favorites.\",\n    \"media-browser.nav_title.youtube\": \"YouTube\",\n    \"media-browser.nav_title.videos\": \"Videos\",\n    \"media-browser.nav_title.images\": \"Images\",\n    \"media-browser.nav_title.gifs\": \"GIFs\",\n    \"media-browser.nav_title.scenes\": \"Scenes\",\n    \"media-browser.nav_title.avatars\": \"Avatars\",\n    \"media-browser.nav_title.sketchfab\": \"Sketchfab\",\n    \"media-browser.nav_title.poly\": \"Google Poly\",\n    \"media-browser.nav_title.twitch\": \"Twitch\",\n    \"media-browser.create-avatar\": \"Create Avatar\",\n    \"media-browser.create-scene\": \"Create Scene with Spoke\",\n    \"media-browser.hub.joined-prefix\": \"Joined \",\n    \"media-browser.hub.joined-prefix\": \"Visited \",\n    \"audio.title\": \"Audio Setup\",\n    \"audio.talk_to_test\": \"talk\",\n    \"audio.click_to_test\": \"click\",\n    \"audio.subtitle-desktop\": \"Confirm HMD speaker output\",\n    \"audio.subtitle-mobile\": \"Earphones are recommended\",\n    \"audio.enter-now\": \"Enter Now\",\n    \"audio.hmd-mic-warning\": \"Your HMD mic is not chosen\",\n    \"audio.grant-title\": \"Grant mic permissions\",\n    \"audio.grant-subtitle\": \"Mic access needed to be heard by others\",\n    \"audio.granted-title\": \"Mic permissions granted\",\n    \"audio.granted-subtitle\": \"You can still mute yourself in-game\",\n    \"audio.granted-next\": \"Next\",\n    \"exit.subtitle.exited\": \"Your session has ended. Refresh your browser to start a new one.\",\n    \"exit.subtitle.closed\": \"This room is no longer available.\",\n    \"exit.subtitle.denied\": \"You are not permitted to join this room. Please request permission from the room creator.\",\n    \"exit.subtitle.kicked\": \"You have been kicked from axon park.\",\n    \"exit.subtitle.left\": \"You have left axon park.\",\n    \"exit.subtitle.full\": \"This room is full, please try again later.\",\n    \"exit.subtitle.connect_error\": \"Unable to connect to this room, please try again later.\",\n    \"exit.subtitle.version_mismatch\":\n      \"The version you deployed is not available yet. Your browser will refresh in 5 seconds.\",\n    \"autoexit.title\": \"Auto-ending session in \",\n    \"autoexit.title_units\": \" seconds\",\n    \"autoexit.subtitle\": \"You have started another session.\",\n    \"autoexit.cancel\": \"CANCEL\",\n    \"presence.entered_room\": \"entered axon park.\",\n    \"presence.entered_lobby\": \"entered axon park's lobby.\",\n    \"presence.join_lobby\": \"joined the axon park lobby.\",\n    \"presence.join_room\": \"joined axon park.\",\n    \"presence.leave\": \"left.\",\n    \"presence.name_change\": \"is now known as\",\n    \"presence.scene_change\": \"changed the scene to\",\n    \"presence.hub_name_change\": \"changed the name of the room to\",\n    \"presence.in_lobby\": \"Axon Park Lobby\",\n    \"presence.in_room\": \"In Axon Park\",\n    \"home.create_a_room\": \"Initialize Axon Park\",\n    \"home.desktop.add_pwa\": \"Install Desktop App\",\n    \"home.mobile.add_pwa\": \"Add to Home Screen\",\n    \"home.take_a_tour\": \"Take a Tour\",\n    \"home.room_create_options\": \"options\",\n    \"home.room_create_button\": \"Initialize Axon Park\",\n    \"home.create_name.validation_warning\": \"Invalid name, limited to 4 to 64 characters and limited symbols.\",\n    \"home.join_us\": \"Join the Conversation\",\n    \"home.have_code\": \"Have an axon park code?\",\n    \"home.add_to_discord_1\": \"Add the\",\n    \"home.add_to_discord_2\": \"Hubs Bot\",\n    \"home.add_to_discord_3\": \"to Discord\",\n    \"home.create_with_spoke\": \"Create a Scene\",\n    \"home.report_issue\": \"Report Issues\",\n    \"home.source_link\": \"Source\",\n    \"home.whats_new_link\": \"What's New\",\n    \"home.spoke_link\": \"Spoke\",\n    \"home.about_link\": \"About\",\n    \"home.community_link\": \"Community\",\n    \"home.privacy_notice\": \"Privacy Notice\",\n    \"home.terms_of_use\": \"Terms of Use\",\n    \"home.get_updates\": \"Get Updates\",\n    \"home.hero_title\": \"A new way to get together\",\n    \"home.hero_blurb\": motto,\n    \"home.made_with_love\": \"made with 🦆 by \",\n    \"home.environment_author_by\": \" by \",\n    \"dialog.close\": \"close\",\n    \"mailing_list.privacy_label\": \"I'm okay with Mozilla handling my info as explained in\",\n    \"mailing_list.privacy_link\": \"this Privacy Notice\",\n    \"link.link_page_header_entry\": \"Enter your code:\",\n    \"link.link_page_header_headset\": \"Enter Send to Device code:\",\n    \"link.linking_a_headset\": \"Have a letter code?\",\n    \"link.try_again\": \"We couldn't find that code.\\nPlease try again.\",\n    \"help.report_issue\": \"Report an Issue\",\n    \"scene.logo_tagline\": \"A new way to get together\",\n    \"scene.create_button\": \"Create a room with this scene\",\n    \"scene.tweet_button\": \"Share on Twitter\",\n    \"scene.unavailable\": \"This scene is no longer available.\",\n    \"link.in_your_browser\": \"In your device's web browser, go to:\",\n    \"link.enter_code\": \"Then, enter this one-time letter code:\",\n    \"link.do_not_close\":\n      \"Your account and avatar will be transferred to the device.\\nKeep this page open to use this code.\",\n    \"link.connect_headset\": \"Send to Device\",\n    \"link.cancel\": \"cancel\",\n    \"invite.enter_via\": \"Enter via \",\n    \"invite.enter_via_modal\": \"Others may enter via \",\n    \"invite.tweet\": \"tweet\",\n    \"invite.and_enter_code\": \" with code:\",\n    \"invite.or_visit\": \"or share permalink\",\n    \"invite.or_visit_modal\": \"or by visiting permalink\",\n    \"invite.embed\": \"or embed on a page\",\n    \"invite.embed-tip\":\n      \"Please be mindful of where you embed a Hubs room.\\nAnyone who can access the page can enter and create/remove objects.\",\n    \"spoke.primary_tagline\": \"make your space\",\n    \"spoke.secondary_tagline\": \"Create 3D social scenes for \",\n    \"spoke.thank_you\": \"Thank you for downloading Spoke!\",\n    \"spoke.download_win\": \"Download for Windows\",\n    \"spoke.download_macos\": \"Download for Mac\",\n    \"spoke.download_linux\": \"Download for Linux\",\n    \"spoke.download_unsupported\": \"View Releases\",\n    \"spoke.browse_all_versions\": \"Browse All Versions\",\n    \"spoke.beginner_tutorial_button\": \"Learn Spoke in 5 Minutes\",\n    \"spoke.advanced_tutorial_button\": \"Advanced Spoke in 10 minutes\",\n    \"spoke.play_button\": \"Learn Spoke in 5 Minutes\",\n    \"commands.fly\": \"Toggle fly mode.\",\n    \"commands.grow\": \"Increase your avatar's size.\",\n    \"commands.shrink\": \"Decrease your avatar's size.\",\n    \"commands.scene\": \"Change the scene.\",\n    \"commands.rename\": \"Rename the room.\",\n    \"commands.help\": \"Show help.\",\n    \"commands.leave\": \"Disconnect from axon park.\",\n    \"commands.duck\": \"The duck tested well. Quack.\",\n    \"commands.capture\": \"Capture a 15 second video.\",\n    \"commands.debug\": \"Toggle physics debug rendering.\",\n    \"commands.vrstats\": \"Toggle stats in VR.\",\n    \"settings.change-avatar\": \"Set Name & Avatar\",\n    \"settings.change-scene\": \"Choose a Scene\",\n\n    \"settings.favorites\": \"Favorite Rooms\",\n    \"settings.rename-room\": \"Set Axon Park Name...\",\n    \"settings.close-room\": \"Close Axon Park...\",\n    \"settings.room-info\": \"Axon Park Info\",\n    \"settings.create-room\": \"New Axon Park...\",\n\n    \"settings.create-scene\": \"Get Spoke\",\n    \"settings.send-feedback\": \"Send Feedback\",\n    \"settings.whats-new\": \"What's New\",\n    \"settings.features\": \"Help\",\n    \"settings.controls\": \"Controls\",\n    \"settings.community\": \"Join Discord\",\n    \"settings.tips\": \"Show Tips\",\n    \"settings.report\": \"Report Issue\",\n    \"settings.terms\": \"Terms of Use\",\n    \"settings.privacy\": \"Privacy Notice\",\n    \"settings.help\": \"Help\",\n\n    \"settings.row-profile\": \"You\",\n    \"settings.row-room\": \"Axon Park\",\n\n    \"tips.mobile.video_share_mode\": \"Tap to stop sharing video.\",\n    \"tips.mobile.pen_mode\": \"Tap icon again to end drawing.\",\n    \"tips.mobile.mute_mode\": \"You are muted. Tap to unmute.\",\n    \"tips.mobile.freeze_mode\": \"Two-finger tap to hide menus.\",\n    \"tips.mobile.look\": \"Welcome! 👋 Tap and drag to look around.\",\n    \"tips.mobile.locomotion\": \"Great! To move, pinch with two fingers.\",\n    \"tips.mobile.spawn_menu-pre\": \"Use the \",\n    \"tips.mobile.spawn_menu-post\": \"at the top to create objects.\",\n    \"tips.mobile.freeze_gesture\": \"Two-finger tap to show menus.\",\n    \"tips.mobile.object_grab\": \"Drag an object to move or throw it.\",\n    \"tips.mobile.object_rotate_button-pre\": \"Tap and drag \",\n    \"tips.mobile.object_rotate_button-post\": \" to rotate.\",\n    \"tips.mobile.object_scale_button-pre\": \"Tap and drag \",\n    \"tips.mobile.object_scale_button-post\": \" to scale.\",\n    \"tips.mobile.object_recenter_button-pre\": \"Tap \",\n    \"tips.mobile.object_recenter_button-post\": \" to have the object face you.\",\n\n    \"tips.mobile.object_pin\": \"Pin an object to save it to axon park.\",\n    \"tips.mobile.object_pin\": \"Pin an object to save it to axon park.\",\n    \"tips.mobile.invite\": \"Use the Invite button to share axon park.\",\n\n    \"tips.desktop.video_share_mode\": \"You're streaming. Select again to stop sharing video.\",\n    \"tips.desktop.pen_mode\": \"Press ESC or right click to drop pen. Ctrl-Z to undo.\",\n    \"tips.desktop.mirror_mode\": \"Press ESC to end camera mirroring.\",\n    \"tips.desktop.mute_mode\": \"You are muted. Click or press M to un-mute.\",\n    \"tips.desktop.look\": \"Welcome to Hubs! 👋 Click and drag to look around.\",\n    \"tips.desktop.locomotion\": \"Great! Now, use the W A S D keys to move. Hold shift to boost.\",\n    \"tips.desktop.turning\": \"Perfect. Use the Q and E keys to rotate.\",\n    \"tips.desktop.spawn_menu-pre\": \"To create objects, click the \",\n    \"tips.desktop.spawn_menu-post\": \"button at the top of the screen, or press Ctrl 1 through 7.\",\n    \"tips.desktop.freeze_gesture\": \"Press and hold spacebar to show object menus.\",\n    \"tips.desktop.menu_hover\": \"Now, point the cursor at an object to show the menu.\",\n    \"tips.desktop.object_grab\": \"Click and drag an object to move it. Or, flick to throw it!\",\n    \"tips.desktop.object_pin\": \"Pin an object to save it to axon park.\",\n    \"tips.desktop.object_zoom\": \"Scroll to move this object towards and away from you.\",\n    \"tips.desktop.object_rotate_button-pre\": \"Click and drag \",\n    \"tips.desktop.object_rotate_button-post\": \" to rotate the object.\",\n    \"tips.desktop.object_scale_button-pre\": \"Click and drag \",\n    \"tips.desktop.object_scale_button-post\": \" to scale the object.\",\n    \"tips.desktop.object_recenter_button-pre\": \"Click \",\n    \"tips.desktop.object_recenter_button-post\": \" to rotate the object to face you. Helpful if you drop it!\",\n    \"tips.desktop.object_scale\": \"Hold shift and scroll to scale it bigger and smaller.\",\n    \"tips.desktop.pen_color\": \"Use Shift-Q and Shift-E to change the pen color.\",\n    \"tips.desktop.pen_size\": \"Hold Shift and scroll to change the pen size.\",\n    \"tips.desktop.invite\": \"Nobody else is here. Use the Share button at the top to share this room.\",\n    \"tips.desktop.watching\": \"You're in the lobby. Others cannot see or hear you.\",\n    \"tips.watching.back\": \"Enter Room\",\n    \"tips.mobile.watching\": \"You're in the lobby.\",\n    \"tips.watching-exit\": \"Back\",\n    \"loader.entering_lobby\": \"Entering lobby...\",\n    \"loader.loading\": \"Loading \",\n    \"loader.object\": \"object\",\n    \"loader.objects\": \"objects\",\n    \"change-scene-dialog.change-scene\": \"Change Scene\",\n    \"change-scene-dialog.create-in-spoke\": \"Or, create a new scene using Spoke.\",\n    \"change-scene-dialog.new-spoke-project\": \"Launch Spoke\",\n    \"avatar-url-dialog.apply\": \"Apply\",\n    \"interstitial.prompt\": \"Continue\",\n    \"feedback.prompt\": \"Feedback\",\n    \"hide-ui.prompt\": \"Hide All\",\n    \"discord.primary_tagline\":\n      \"Share a virtual room with your community.\\nWatch videos, play with 3D objects, or just hang out.\",\n    \"discord.secondary_tagline\": \"No downloads or sign up. Full VR support too.\",\n    \"discord.contact_us\": \"Invite Bot to Server\",\n    \"discord.community_link\": \"Hubs Discord\",\n    \"discord.splash_tag\": \"Designed for serious businessing.\",\n    \"client-info.kick-button\": \"Kick\",\n    \"client-info.hide-button\": \"Hide\",\n    \"client-info.unhide-button\": \"Un-hide \",\n    \"client-info.mute-button\": \"Mute\",\n    \"client-info.cancel\": \"Cancel\",\n    \"avatar-landing.select\": \"Select\",\n    \"avatar-landing.selected\": \"This is your current avatar\",\n    \"leave-room-dialog.join-room.message\": \"Joining a new room will leave this one. Are you sure?\",\n    \"leave-room-dialog.join-room.confirm\": \"Join Room\",\n    \"leave-room-dialog.create-room.message\": \"Creating a new room will leave this one. Are you sure?\",\n    \"leave-room-dialog.create-room.confirm\": \"Leave Room\",\n    \"embed.load-button\": \"Load Room\",\n    \"embed.presence-warning\": \"This room is embedded, so may be visible to visitors on other websites.\"\n  }\n}\n","import localeData from \"../axonpark/messages.js\";\n// import localeData from \"../assets/translations.data.json\";\nconst navigatorLang = ((navigator.languages && navigator.languages[0]) || navigator.language || navigator.userLanguage)\n  .toLowerCase()\n  .split(/[_-]+/)[0];\nexport const lang = (localeData[navigatorLang] && navigatorLang) || \"en\";\nexport const messages = localeData[lang] || localeData.en;\n","// A-Frame blows away any npm debug log filters so this allow the user to set the log filter\n// via the query string.\nimport debug from \"debug\";\nimport qsTruthy from \"./qs_truthy\";\n\nconst qs = new URLSearchParams(location.search);\nconst isDebug = qsTruthy(\"debug\");\nconst logFilter = qs.get(\"log_filter\") || (isDebug && \"naf-janus-adapter:*\");\n\nif (logFilter) {\n  debug.enable(logFilter);\n}\n","//\n// Based on THREE.TextureLoader\n// https://github.com/mrdoob/three.js/blob/master/src/loaders/TextureLoader.js\n// Licensed under the MIT license.\n// https://github.com/mrdoob/three.js/blob/master/LICENSE\n//\n\n// http://www.libpng.org/pub/png/spec/1.2/PNG-Structure.html\nconst PNGFileSignature = new Uint8Array([137, 80, 78, 71, 13, 10, 26, 10]);\n\n// https://en.wikipedia.org/wiki/JPEG_File_Interchange_Format#File_format_structure\n// SOI Chunk Header: FF D8\n// JFIF / EXIF Chunk Header: FF ?? (either E0 or E1)\nconst JPEGFileSignature = new Uint8Array([255, 216, 255]);\n\nfunction signaturesEqual(referenceFileSignature, arrayBuffer) {\n  const signatureLength = referenceFileSignature.byteLength;\n\n  if (signatureLength > arrayBuffer.byteLength) {\n    return false;\n  }\n\n  const bufferView = new Uint8Array(arrayBuffer, 0, signatureLength);\n\n  for (let i = 0; i < signatureLength; i++) {\n    if (referenceFileSignature[i] !== bufferView[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction loadAsync(loader, url, onProgress) {\n  return new Promise((resolve, reject) => loader.load(url, resolve, onProgress, reject));\n}\n\nfunction getChunkType(arrayBuffer, byteOffset) {\n  const arr = new Uint8Array(arrayBuffer, byteOffset, 4);\n  return String.fromCharCode.apply(null, arr);\n}\n\nexport default class HubsTextureLoader {\n  static crossOrigin = \"anonymous\";\n\n  constructor(manager = THREE.DefaultLoadingManager) {\n    this.manager = manager;\n  }\n\n  load(url, onLoad, onProgress, onError) {\n    const texture = new THREE.Texture();\n\n    this.loadTextureAsync(texture, url, onProgress)\n      .then(onLoad)\n      .catch(onError);\n\n    return texture;\n  }\n\n  async loadTextureAsync(texture, src, onProgress) {\n    let url = src;\n    let transparent = true;\n\n    const fileLoader = new THREE.FileLoader(this.manager);\n    fileLoader.setResponseType(\"blob\");\n\n    const blob = await loadAsync(fileLoader, src, onProgress);\n\n    const bytes = await new Response(blob).arrayBuffer();\n\n    if (signaturesEqual(PNGFileSignature, bytes)) {\n      const dataView = new DataView(bytes);\n      const colorType = dataView.getUint8(25);\n\n      if (colorType === 3) {\n        // Chunk layout:\n        // length - 4 bytes\n        // type - 4 bytes\n        // data - length bytes\n        // crc - 4 bytes\n\n        const chunkHeaderSize = 12; // length + type + crc (excludes data)\n\n        let curChunkOffset = PNGFileSignature.byteLength;\n        let curChunkType = getChunkType(bytes, curChunkOffset + 4);\n\n        while (curChunkType !== \"IEND\") {\n          if (curChunkType === \"tRNS\") {\n            transparent = true;\n            break;\n          }\n\n          curChunkOffset = curChunkOffset + dataView.getUint32(curChunkOffset) + chunkHeaderSize;\n          curChunkType = getChunkType(bytes, curChunkOffset + 4);\n        }\n      } else if (colorType === 0 || colorType === 2) {\n        transparent = false;\n      }\n    } else if (signaturesEqual(JPEGFileSignature, bytes)) {\n      // JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\n      transparent = false;\n    } else {\n      console.warn(`Couldn't detect image type for: \"${src}\". Using RGBA pixel format.`);\n    }\n\n    url = URL.createObjectURL(blob);\n\n    let imageLoader;\n\n    if (window.createImageBitmap !== undefined) {\n      imageLoader = new THREE.ImageBitmapLoader(this.manager);\n      texture.flipY = false;\n    } else {\n      imageLoader = new THREE.ImageLoader(this.manager);\n    }\n\n    imageLoader.setCrossOrigin(this.crossOrigin);\n    imageLoader.setPath(this.path);\n\n    const cacheKey = this.manager.resolveURL(src);\n\n    let image;\n\n    try {\n      image = await loadAsync(imageLoader, url, onProgress);\n    } catch (e) {\n      // Clean up blob url if loading the image fails.\n      URL.revokeObjectURL(url);\n      throw e;\n    }\n\n    // Image was just added to cache before this function gets called, disable caching by immediatly removing it\n    THREE.Cache.remove(cacheKey);\n\n    texture.image = image;\n    texture.format = transparent ? THREE.RGBAFormat : THREE.RGBFormat;\n    texture.needsUpdate = true;\n\n    texture.onUpdate = function() {\n      // Delete texture data once it has been uploaded to the GPU\n      texture.image.close && texture.image.close();\n      delete texture.image;\n      URL.revokeObjectURL(url);\n    };\n\n    return texture;\n  }\n\n  setCrossOrigin(value) {\n    this.crossOrigin = value;\n    return this;\n  }\n\n  setPath(value) {\n    this.path = value;\n    return this;\n  }\n}\n","import { objectTypeForOriginAndContentType } from \"../object-types\";\nimport { getReticulumFetchUrl } from \"./phoenix-utils\";\nimport mediaHighlightFrag from \"./media-highlight-frag.glsl\";\nimport { mapMaterials } from \"./material-utils\";\nimport HubsTextureLoader from \"../loaders/HubsTextureLoader\";\nimport { validMaterials } from \"../components/hoverable-visuals\";\n\nconst mediaAPIEndpoint = getReticulumFetchUrl(\"/api/v1/media\");\n\nconst resolveUrlCache = new Map();\nexport const resolveUrl = async (url, index) => {\n  const cacheKey = `${url}|${index}`;\n  if (resolveUrlCache.has(cacheKey)) return resolveUrlCache.get(cacheKey);\n\n  const response = await fetch(mediaAPIEndpoint, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ media: { url, index } })\n  });\n\n  if (!response.ok) {\n    const message = `Error resolving url \"${url}\":`;\n    try {\n      const body = await response.text();\n      throw new Error(message + \" \" + body);\n    } catch (e) {\n      throw new Error(message + \" \" + response.statusText);\n    }\n  }\n\n  const resolved = await response.json();\n  resolveUrlCache.set(cacheKey, resolved);\n  return resolved;\n};\n\nexport const upload = file => {\n  const formData = new FormData();\n  formData.append(\"media\", file);\n  formData.append(\"promotion_mode\", \"with_token\");\n  return fetch(mediaAPIEndpoint, {\n    method: \"POST\",\n    body: formData\n  }).then(r => r.json());\n};\n\n// https://stackoverflow.com/questions/7584794/accessing-jpeg-exif-rotation-data-in-javascript-on-the-client-side/32490603#32490603\nfunction getOrientation(file, callback) {\n  const reader = new FileReader();\n  reader.onload = function(e) {\n    const view = new DataView(e.target.result);\n    if (view.getUint16(0, false) != 0xffd8) {\n      return callback(-2);\n    }\n    const length = view.byteLength;\n    let offset = 2;\n    while (offset < length) {\n      if (view.getUint16(offset + 2, false) <= 8) return callback(-1);\n      const marker = view.getUint16(offset, false);\n      offset += 2;\n      if (marker == 0xffe1) {\n        if (view.getUint32((offset += 2), false) != 0x45786966) {\n          return callback(-1);\n        }\n\n        const little = view.getUint16((offset += 6), false) == 0x4949;\n        offset += view.getUint32(offset + 4, little);\n        const tags = view.getUint16(offset, little);\n        offset += 2;\n        for (let i = 0; i < tags; i++) {\n          if (view.getUint16(offset + i * 12, little) == 0x0112) {\n            return callback(view.getUint16(offset + i * 12 + 8, little));\n          }\n        }\n      } else if ((marker & 0xff00) != 0xff00) {\n        break;\n      } else {\n        offset += view.getUint16(offset, false);\n      }\n    }\n    return callback(-1);\n  };\n  reader.readAsArrayBuffer(file);\n}\n\nlet interactableId = 0;\nexport const addMedia = (\n  src,\n  template,\n  contentOrigin,\n  contentSubtype = null,\n  resolve = false,\n  resize = false,\n  animate = true\n) => {\n  const scene = AFRAME.scenes[0];\n\n  const entity = document.createElement(\"a-entity\");\n  entity.id = \"interactable-media-\" + interactableId++;\n  entity.setAttribute(\"networked\", { template: template });\n  const needsToBeUploaded = src instanceof File;\n  entity.setAttribute(\"media-loader\", {\n    resize,\n    resolve,\n    animate,\n    src: typeof src === \"string\" ? src : \"\",\n    contentSubtype,\n    fileIsOwned: !needsToBeUploaded\n  });\n\n  entity.object3D.matrixNeedsUpdate = true;\n\n  scene.appendChild(entity);\n\n  const fireLoadingTimeout = setTimeout(() => {\n    scene.emit(\"media-loading\", { src: src });\n  }, 100);\n\n  [\"model-loaded\", \"video-loaded\", \"image-loaded\"].forEach(eventName => {\n    entity.addEventListener(\n      eventName,\n      async () => {\n        clearTimeout(fireLoadingTimeout);\n        scene.emit(\"media-loaded\", { src: src });\n      },\n      { once: true }\n    );\n  });\n\n  const orientation = new Promise(function(resolve) {\n    if (needsToBeUploaded) {\n      getOrientation(src, x => {\n        resolve(x);\n      });\n    } else {\n      resolve(1);\n    }\n  });\n  if (needsToBeUploaded) {\n    upload(src)\n      .then(response => {\n        const srcUrl = new URL(response.raw);\n        srcUrl.searchParams.set(\"token\", response.meta.access_token);\n        entity.setAttribute(\"media-loader\", { resolve: false, src: srcUrl.href, fileId: response.file_id });\n        window.APP.store.update({\n          uploadPromotionTokens: [{ fileId: response.file_id, promotionToken: response.meta.promotion_token }]\n        });\n      })\n      .catch(e => {\n        console.error(\"Media upload failed\", e);\n        entity.setAttribute(\"media-loader\", { src: \"error\" });\n      });\n  } else if (src instanceof MediaStream) {\n    entity.setAttribute(\"media-loader\", { src: `hubs://clients/${NAF.clientId}/video` });\n  }\n\n  if (contentOrigin) {\n    entity.addEventListener(\"media_resolved\", ({ detail }) => {\n      const objectType = objectTypeForOriginAndContentType(contentOrigin, detail.contentType, detail.src);\n      scene.emit(\"object_spawned\", { objectType });\n    });\n  }\n\n  return { entity, orientation };\n};\n\nexport function injectCustomShaderChunks(obj) {\n  const vertexRegex = /\\bskinning_vertex\\b/;\n  const fragRegex = /\\bgl_FragColor\\b/;\n\n  const shaderUniforms = [];\n  const batchManagerSystem = AFRAME.scenes[0].systems[\"hubs-systems\"].batchManagerSystem;\n\n  obj.traverse(object => {\n    if (!object.material) return;\n\n    object.material = mapMaterials(object, material => {\n      if (!validMaterials.includes(material.type)) {\n        return material;\n      }\n\n      // HACK, this routine inadvertently leaves the A-Frame shaders wired to the old, dark\n      // material, so maps cannot be updated at runtime. This breaks UI elements who have\n      // hover/toggle state, so for now just skip these while we figure out a more correct\n      // solution.\n      if (\n        object.el.classList.contains(\"ui\") ||\n        object.el.classList.contains(\"hud\") ||\n        object.el.getAttribute(\"text-button\")\n      )\n        return material;\n\n      // Used when the object is batched\n      batchManagerSystem.meshToEl.set(object, obj.el);\n\n      const newMaterial = material.clone();\n      // This will not run if the object is never rendered unbatched, since its unbatched shader will never be compiled\n      newMaterial.onBeforeCompile = shader => {\n        if (!vertexRegex.test(shader.vertexShader)) return;\n\n        shader.uniforms.hubs_IsFrozen = { value: false };\n        shader.uniforms.hubs_EnableSweepingEffect = { value: false };\n        shader.uniforms.hubs_SweepParams = { value: [0, 0] };\n        shader.uniforms.hubs_InteractorOnePos = { value: [0, 0, 0] };\n        shader.uniforms.hubs_InteractorTwoPos = { value: [0, 0, 0] };\n        shader.uniforms.hubs_HighlightInteractorOne = { value: false };\n        shader.uniforms.hubs_HighlightInteractorTwo = { value: false };\n        shader.uniforms.hubs_Time = { value: 0 };\n\n        const vchunk = `\n        if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\n          vec4 wt = modelMatrix * vec4(transformed, 1);\n\n          // Used in the fragment shader below.\n          hubs_WorldPosition = wt.xyz;\n        }\n      `;\n\n        const vlines = shader.vertexShader.split(\"\\n\");\n        const vindex = vlines.findIndex(line => vertexRegex.test(line));\n        vlines.splice(vindex + 1, 0, vchunk);\n        vlines.unshift(\"varying vec3 hubs_WorldPosition;\");\n        vlines.unshift(\"uniform bool hubs_IsFrozen;\");\n        vlines.unshift(\"uniform bool hubs_HighlightInteractorOne;\");\n        vlines.unshift(\"uniform bool hubs_HighlightInteractorTwo;\");\n        shader.vertexShader = vlines.join(\"\\n\");\n\n        const flines = shader.fragmentShader.split(\"\\n\");\n        const findex = flines.findIndex(line => fragRegex.test(line));\n        flines.splice(findex + 1, 0, mediaHighlightFrag);\n        flines.unshift(\"varying vec3 hubs_WorldPosition;\");\n        flines.unshift(\"uniform bool hubs_IsFrozen;\");\n        flines.unshift(\"uniform bool hubs_EnableSweepingEffect;\");\n        flines.unshift(\"uniform vec2 hubs_SweepParams;\");\n        flines.unshift(\"uniform bool hubs_HighlightInteractorOne;\");\n        flines.unshift(\"uniform vec3 hubs_InteractorOnePos;\");\n        flines.unshift(\"uniform bool hubs_HighlightInteractorTwo;\");\n        flines.unshift(\"uniform vec3 hubs_InteractorTwoPos;\");\n        flines.unshift(\"uniform float hubs_Time;\");\n        shader.fragmentShader = flines.join(\"\\n\");\n\n        shaderUniforms.push(shader.uniforms);\n      };\n      newMaterial.needsUpdate = true;\n      return newMaterial;\n    });\n  });\n\n  return shaderUniforms;\n}\n\nexport function getPromotionTokenForFile(fileId) {\n  return window.APP.store.state.uploadPromotionTokens.find(upload => upload.fileId === fileId);\n}\n\nconst mediaPos = new THREE.Vector3();\n\nexport function spawnMediaAround(el, media, contentSubtype, snapCount, mirrorOrientation = false) {\n  const { entity, orientation } = addMedia(media, \"#interactable-media\", undefined, contentSubtype, false);\n\n  const pos = el.object3D.position;\n\n  entity.object3D.position.set(pos.x, pos.y, pos.z);\n  entity.object3D.rotation.copy(el.object3D.rotation);\n\n  if (mirrorOrientation) {\n    entity.object3D.rotateY(Math.PI);\n  }\n\n  // Generate photos in a circle around camera, starting from the bottom.\n  // Prevent z-fighting but place behind viewfinder\n  const idx = (snapCount % 6) + 3;\n\n  mediaPos.set(\n    Math.cos(Math.PI * 2 * (idx / 6.0)) * 0.75,\n    Math.sin(Math.PI * 2 * (idx / 6.0)) * 0.75,\n    -0.05 + idx * 0.001\n  );\n\n  el.object3D.localToWorld(mediaPos);\n  entity.object3D.visible = false;\n\n  entity.addEventListener(\n    \"image-loaded\",\n    () => {\n      entity.object3D.visible = true;\n      entity.setAttribute(\"animation__photo_pos\", {\n        property: \"position\",\n        dur: 800,\n        from: { x: pos.x, y: pos.y, z: pos.z },\n        to: { x: mediaPos.x, y: mediaPos.y, z: mediaPos.z },\n        easing: \"easeOutElastic\"\n      });\n    },\n    { once: true }\n  );\n\n  entity.object3D.matrixNeedsUpdate = true;\n\n  entity.addEventListener(\n    \"media_resolved\",\n    () => {\n      el.emit(\"photo_taken\", entity.components[\"media-loader\"].data.src);\n    },\n    { once: true }\n  );\n\n  return { entity, orientation };\n}\n\nexport const textureLoader = new HubsTextureLoader().setCrossOrigin(\"anonymous\");\n\nexport async function createImageTexture(url) {\n  const texture = new THREE.Texture();\n\n  try {\n    await textureLoader.loadTextureAsync(texture, url);\n  } catch (e) {\n    throw new Error(`'${url}' could not be fetched (Error code: ${e.status}; Response: ${e.statusText})`);\n  }\n\n  texture.encoding = THREE.sRGBEncoding;\n  texture.anisotropy = 4;\n\n  return texture;\n}\n","const tempVector3 = new THREE.Vector3();\nconst tempQuaternion = new THREE.Quaternion();\n\nexport function getLastWorldPosition(src, target) {\n  src.updateMatrices();\n  target.setFromMatrixPosition(src.matrixWorld);\n  return target;\n}\n\nexport function getLastWorldQuaternion(src, target) {\n  src.updateMatrices();\n  src.matrixWorld.decompose(tempVector3, target, tempVector3);\n  return target;\n}\n\nexport function getLastWorldScale(src, target) {\n  src.updateMatrices();\n  src.matrixWorld.decompose(tempVector3, tempQuaternion, target);\n  return target;\n}\n\nexport function disposeMaterial(mtrl) {\n  if (mtrl.map) mtrl.map.dispose();\n  if (mtrl.lightMap) mtrl.lightMap.dispose();\n  if (mtrl.bumpMap) mtrl.bumpMap.dispose();\n  if (mtrl.normalMap) mtrl.normalMap.dispose();\n  if (mtrl.specularMap) mtrl.specularMap.dispose();\n  if (mtrl.envMap) mtrl.envMap.dispose();\n  mtrl.dispose();\n}\n\nexport function disposeNode(node) {\n  if (!(node instanceof THREE.Mesh)) return;\n\n  if (node.geometry) {\n    node.geometry.dispose();\n  }\n\n  if (node.material) {\n    let materialArray;\n    if (node.material instanceof THREE.MeshFaceMaterial || node.material instanceof THREE.MultiMaterial) {\n      materialArray = node.material.materials;\n    } else if (node.material instanceof Array) {\n      materialArray = node.material;\n    }\n    if (materialArray) {\n      materialArray.forEach(disposeMaterial);\n    } else {\n      disposeMaterial(node.material);\n    }\n  }\n}\n\nexport function setMatrixWorld(object3D, m) {\n  object3D.matrixWorld.copy(m);\n  object3D.matrix = object3D.matrix.getInverse(object3D.parent.matrixWorld).multiply(object3D.matrixWorld);\n  object3D.matrix.decompose(object3D.position, object3D.quaternion, object3D.scale);\n}\n","export function forEachMaterial(object3D, fn) {\n  if (!object3D.material) return;\n\n  if (Array.isArray(object3D.material)) {\n    object3D.material.forEach(fn);\n  } else {\n    fn(object3D.material);\n  }\n}\n\nexport function mapMaterials(object3D, fn) {\n  if (!object3D.material) return;\n\n  if (Array.isArray(object3D.material)) {\n    return object3D.material.map(fn);\n  } else {\n    return fn(object3D.material);\n  }\n}\n","import { avatars } from \"../assets/avatars/avatars.js\";\n\nconst names = [\n  \"Baers-Pochard\",\n  \"Baikal-Teal\",\n  \"Barrows-Goldeneye\",\n  \"Blue-Billed\",\n  \"Blue-Duck\",\n  \"Blue-Winged\",\n  \"Brown-Teal\",\n  \"Bufflehead\",\n  \"Canvasback\",\n  \"Cape-Shoveler\",\n  \"Chestnut-Teal\",\n  \"Chiloe-Wigeon\",\n  \"Cinnamon-Teal\",\n  \"Comb-Duck\",\n  \"Common-Eider\",\n  \"Common-Goldeneye\",\n  \"Common-Merganser\",\n  \"Common-Pochard\",\n  \"Common-Scoter\",\n  \"Common-Shelduck\",\n  \"Cotton-Pygmy\",\n  \"Crested-Duck\",\n  \"Crested-Shelduck\",\n  \"Eatons-Pintail\",\n  \"Falcated\",\n  \"Ferruginous\",\n  \"Freckled-Duck\",\n  \"Gadwall\",\n  \"Garganey\",\n  \"Greater-Scaup\",\n  \"Green-Pygmy\",\n  \"Grey-Teal\",\n  \"Hardhead\",\n  \"Harlequin\",\n  \"Hartlaubs\",\n  \"Hooded-Merganser\",\n  \"Hottentot-Teal\",\n  \"Kelp-Goose\",\n  \"King-Eider\",\n  \"Lake-Duck\",\n  \"Laysan-Duck\",\n  \"Lesser-Scaup\",\n  \"Long-Tailed\",\n  \"Maccoa-Duck\",\n  \"Mallard\",\n  \"Mandarin\",\n  \"Marbled-Teal\",\n  \"Mellers-Duck\",\n  \"Merganser\",\n  \"Northern-Pintail\",\n  \"Orinoco-Goose\",\n  \"Paradise-Shelduck\",\n  \"Plumed-Whistler\",\n  \"Puna-Teal\",\n  \"Pygmy-Goose\",\n  \"Radjah-Shelduck\",\n  \"Red-Billed\",\n  \"Red-Crested\",\n  \"Red-Shoveler\",\n  \"Ring-Necked\",\n  \"Ringed-Teal\",\n  \"Rosy-Billed\",\n  \"Ruddy-Shelduck\",\n  \"Salvadoris-Teal\",\n  \"Scaly-Sided\",\n  \"Shelduck\",\n  \"Shoveler\",\n  \"Silver-Teal\",\n  \"Smew\",\n  \"Spectacled-Eider\",\n  \"Spot-Billed\",\n  \"Spotted-Whistler\",\n  \"Steamerduck\",\n  \"Stellers-Eider\",\n  \"Sunda-Teal\",\n  \"Surf-Scoter\",\n  \"Tufted-Duck\",\n  \"Velvet-Scoter\",\n  \"Wandering-Whistler\",\n  \"Whistling-duck\",\n  \"White-Backed\",\n  \"White-Cheeked\",\n  \"White-Winged\",\n  \"Wigeon\",\n  \"Wood-Duck\",\n  \"Yellow-Billed\"\n];\n\nfunction selectRandom(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nexport function generateRandomName() {\n  return `${selectRandom(names)}-${Math.floor(10000 + Math.random() * 10000)}`;\n}\n\nexport const avatarIds = avatars.map(av => av.id);\n\nexport function generateDefaultProfile() {\n  return {\n    avatarId: selectRandom(avatarIds)\n  };\n}\n","import { Validator } from \"jsonschema\";\nimport merge from \"deepmerge\";\nimport Cookies from \"js-cookie\";\nimport jwtDecode from \"jwt-decode\";\n\nconst LOCAL_STORE_KEY = \"___hubs_store\";\nconst STORE_STATE_CACHE_KEY = Symbol();\nconst OAUTH_FLOW_CREDENTIALS_KEY = \"ret-oauth-flow-account-credentials\";\nconst validator = new Validator();\nimport { EventTarget } from \"event-target-shim\";\nimport { generateDefaultProfile, generateRandomName } from \"../utils/identity.js\";\n\n// Durable (via local-storage) schema-enforced state that is meant to be consumed via forward data flow.\n// (Think flux but with way less incidental complexity, at least for now :))\nexport const SCHEMA = {\n  id: \"/HubsStore\",\n\n  definitions: {\n    profile: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        displayName: { type: \"string\", pattern: \"^[A-Za-z0-9-]{3,32}$\" },\n        avatarId: { type: \"string\" },\n        personalAvatarId: { type: \"string\" }\n      }\n    },\n\n    credentials: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        token: { type: [\"null\", \"string\"] },\n        email: { type: [\"null\", \"string\"] }\n      }\n    },\n\n    activity: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        hasFoundFreeze: { type: \"boolean\" },\n        hasChangedName: { type: \"boolean\" },\n        hasAcceptedProfile: { type: \"boolean\" },\n        lastEnteredAt: { type: \"string\" },\n        hasPinned: { type: \"boolean\" },\n        hasRotated: { type: \"boolean\" },\n        hasRecentered: { type: \"boolean\" },\n        hasScaled: { type: \"boolean\" },\n        hasHoveredInWorldHud: { type: \"boolean\" },\n        hasOpenedShare: { type: \"boolean\" },\n        entryCount: { type: \"number\" }\n      }\n    },\n\n    settings: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        lastUsedMicDeviceId: { type: \"string\" }\n      }\n    },\n\n    // Legacy\n    confirmedDiscordRooms: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n\n    confirmedBroadcastedRooms: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n\n    uploadPromotionTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          fileId: { type: \"string\" },\n          promotionToken: { type: \"string\" }\n        }\n      }\n    },\n\n    creatorAssignmentTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          creatorAssignmentToken: { type: \"string\" }\n        }\n      }\n    },\n\n    embedTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          embedToken: { type: \"string\" }\n        }\n      }\n    },\n\n    onLoadActions: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          action: { type: \"string\" },\n          args: { type: \"object\" }\n        }\n      }\n    }\n  },\n\n  type: \"object\",\n\n  properties: {\n    profile: { $ref: \"#/definitions/profile\" },\n    credentials: { $ref: \"#/definitions/credentials\" },\n    activity: { $ref: \"#/definitions/activity\" },\n    settings: { $ref: \"#/definitions/settings\" },\n    confirmedDiscordRooms: { $ref: \"#/definitions/confirmedDiscordRooms\" }, // Legacy\n    confirmedBroadcastedRooms: { $ref: \"#/definitions/confirmedBroadcastedRooms\" },\n    uploadPromotionTokens: { $ref: \"#/definitions/uploadPromotionTokens\" },\n    creatorAssignmentTokens: { $ref: \"#/definitions/creatorAssignmentTokens\" },\n    embedTokens: { $ref: \"#/definitions/embedTokens\" },\n    onLoadActions: { $ref: \"#/definitions/onLoadActions\" }\n  },\n\n  additionalProperties: false\n};\n\nexport default class Store extends EventTarget {\n  constructor() {\n    super();\n\n    if (localStorage.getItem(LOCAL_STORE_KEY) === null) {\n      localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify({}));\n    }\n\n    // When storage is updated in another window\n    window.addEventListener(\"storage\", e => {\n      if (e.key !== LOCAL_STORE_KEY) return;\n      delete this[STORE_STATE_CACHE_KEY];\n      this.dispatchEvent(new CustomEvent(\"statechanged\"));\n    });\n\n    this.update({\n      activity: {},\n      settings: {},\n      credentials: {},\n      profile: {},\n      confirmedDiscordRooms: [],\n      confirmedBroadcastedRooms: [],\n      uploadPromotionTokens: [],\n      creatorAssignmentTokens: [],\n      embedTokens: [],\n      onLoadActions: []\n    });\n\n    const oauthFlowCredentials = Cookies.getJSON(OAUTH_FLOW_CREDENTIALS_KEY);\n    if (oauthFlowCredentials) {\n      this.update({ credentials: oauthFlowCredentials });\n      this.resetToRandomLegacyAvatar();\n      Cookies.remove(OAUTH_FLOW_CREDENTIALS_KEY);\n    }\n  }\n\n  // Initializes store with any default bits\n  init = () => {\n    this.update({\n      profile: { ...generateDefaultProfile(), ...(this.state.profile || {}) }\n    });\n\n    // Regenerate name to encourage users to change it.\n    if (!this.state.activity.hasChangedName) {\n      this.update({ profile: { displayName: generateRandomName() } });\n    }\n  };\n\n  resetToRandomLegacyAvatar = () => {\n    this.update({\n      profile: { ...(this.state.profile || {}), ...generateDefaultProfile() }\n    });\n  };\n\n  get state() {\n    if (!this.hasOwnProperty(STORE_STATE_CACHE_KEY)) {\n      this[STORE_STATE_CACHE_KEY] = JSON.parse(localStorage.getItem(LOCAL_STORE_KEY));\n    }\n\n    return this[STORE_STATE_CACHE_KEY];\n  }\n\n  get credentialsAccountId() {\n    if (this.state.credentials.token) {\n      return jwtDecode(this.state.credentials.token).sub;\n    } else {\n      return null;\n    }\n  }\n\n  resetConfirmedBroadcastedRooms() {\n    this.clearStoredArray(\"confirmedBroadcastedRooms\");\n  }\n\n  resetTipActivityFlags() {\n    this.update({\n      activity: { hasRotated: false, hasPinned: false, hasRecentered: false, hasScaled: false, entryCount: 0 }\n    });\n  }\n\n  bumpEntryCount() {\n    const currentEntryCount = this.state.activity.entryCount || 0;\n    this.update({ activity: { entryCount: currentEntryCount + 1 } });\n  }\n\n  // Sets a one-time action to perform the next time the page loads\n  enqueueOnLoadAction(action, args) {\n    this.update({ onLoadActions: [{ action, args }] });\n  }\n\n  executeOnLoadActions(sceneEl) {\n    for (let i = 0; i < this.state.onLoadActions.length; i++) {\n      const { action, args } = this.state.onLoadActions[i];\n\n      if (action === \"emit_scene_event\") {\n        sceneEl.emit(args.event, args.detail);\n      }\n    }\n\n    this.clearOnLoadActions();\n  }\n\n  clearOnLoadActions() {\n    this.clearStoredArray(\"onLoadActions\");\n  }\n\n  clearStoredArray(key) {\n    const overwriteMerge = (destinationArray, sourceArray) => sourceArray;\n    const update = {};\n    update[key] = [];\n\n    this.update(update, { arrayMerge: overwriteMerge });\n  }\n\n  update(newState, mergeOpts) {\n    const finalState = merge(this.state, newState, mergeOpts);\n    const { valid } = validator.validate(finalState, SCHEMA);\n\n    if (!valid) {\n      // Intentionally not including details about the state or validation result here, since we don't want to leak\n      // sensitive data in the error message.\n      throw new Error(`Write to store failed schema validation.`);\n    }\n\n    localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify(finalState));\n    delete this[STORE_STATE_CACHE_KEY];\n\n    if (newState.profile !== undefined) {\n      this.dispatchEvent(new CustomEvent(\"profilechanged\"));\n    }\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    return finalState;\n  }\n}\n","module.exports = __webpack_public_path__ + \"assets/images/hub-preview-white-ccefba3b70ae589a0ca5ae3230c39299.png\";","// Enumeration of spawned object content origins. URL means the content is\n// fetched from a URL, FILE means it was an uploaded/dropped file, and\n// CLIPBOARD means it was raw data pasted in from the clipboard, SPAWNER means\n// it was copied over from a spawner.\nexport const ObjectContentOrigins = {\n  URL: 1,\n  FILE: 2,\n  CLIPBOARD: 3,\n  SPAWNER: 4\n};\n\n// Enumeration of spawnable object types, used for telemetry, which encapsulates\n// both the origin of the content for the object and also the type of content\n// contained in the object.\nexport const ObjectTypes = {\n  URL_IMAGE: 0,\n  URL_VIDEO: 1,\n  URL_MODEL: 2,\n  URL_PDF: 3,\n  URL_AUDIO: 4,\n  //URL_TEXT: 5,\n  //URL_TELEPORTER: 6,\n  FILE_IMAGE: 8,\n  FILE_VIDEO: 9,\n  FILE_MODEL: 10,\n  FILE_PDF: 11,\n  FILE_AUDIO: 12,\n  //FILE_TEXT: 13,\n  CLIPBOARD_IMAGE: 16,\n  CLIPBOARD_VIDEO: 17,\n  CLIPBOARD_MODEL: 18,\n  CLIPBOARD_PDF: 19,\n  CLIPBOARD_AUDIO: 20,\n  //CLIPBOARD_TEXT: 21,\n  SPAWNER_IMAGE: 24,\n  SPAWNER_VIDEO: 25,\n  SPAWNER_MODEL: 26,\n  SPAWNER_PDF: 27,\n  SPAWNER_AUDIO: 28,\n  //SPAWNER_TEXT: 29,\n  CAMERA: 30,\n  UNKNOWN: 31\n};\n\n// Given an origin and three object type values for URL, FILE, and CLIPBOARD\n// origins respectively, return the appropriate one\nfunction objectTypeForOrigin(contentOrigin, urlType, fileType, clipboardType, spawnerType) {\n  if (contentOrigin === ObjectContentOrigins.URL) {\n    return urlType;\n  } else if (contentOrigin === ObjectContentOrigins.FILE) {\n    return fileType;\n  } else if (contentOrigin === ObjectContentOrigins.CLIPBOARD) {\n    return clipboardType;\n  } else {\n    return spawnerType;\n  }\n}\n\n// Lookup table of mime-type prefixes to the set of object types that we should use\n// for objects spawned matching their underlying Content-Type.\nconst objectTypeMimePrefixLookupMap = {\n  \"image/\": [ObjectTypes.URL_IMAGE, ObjectTypes.FILE_IMAGE, ObjectTypes.CLIPBOARD_IMAGE, ObjectTypes.SPAWNER_IMAGE],\n  \"model/\": [ObjectTypes.URL_MODEL, ObjectTypes.FILE_MODEL, ObjectTypes.CLIPBOARD_MODEL, ObjectTypes.SPAWNER_MODEL],\n  \"application/x-zip-compressed\": [\n    ObjectTypes.URL_MODEL,\n    ObjectTypes.FILE_MODEL,\n    ObjectTypes.CLIPBOARD_MODEL,\n    ObjectTypes.SPAWNER_MODEL\n  ],\n  \"video/\": [ObjectTypes.URL_VIDEO, ObjectTypes.FILE_VIDEO, ObjectTypes.CLIPBOARD_VIDEO, ObjectTypes.SPAWNER_VIDEO],\n  \"application/vnd.apple.mpegurl\": [\n    ObjectTypes.URL_VIDEO,\n    ObjectTypes.FILE_VIDEO,\n    ObjectTypes.CLIPBOARD_VIDEO,\n    ObjectTypes.SPAWNER_VIDEO\n  ],\n  \"application/x-mpegurl\": [\n    ObjectTypes.URL_VIDEO,\n    ObjectTypes.FILE_VIDEO,\n    ObjectTypes.CLIPBOARD_VIDEO,\n    ObjectTypes.SPAWNER_VIDEO\n  ],\n  \"audio/\": [ObjectTypes.URL_AUDIO, ObjectTypes.FILE_AUDIO, ObjectTypes.CLIPBOARD_AUDIO, ObjectTypes.SPAWNER_AUDIO],\n  \"application/pdf\": [ObjectTypes.URL_PDF, ObjectTypes.FILE_PDF, ObjectTypes.CLIPBOARD_PDF, ObjectTypes.SPAWNER_PDF]\n};\n\nconst srcSuffixLookupMap = {\n  \".m3u8\": [ObjectTypes.URL_VIDEO, ObjectTypes.FILE_VIDEO, ObjectTypes.CLIPBOARD_VIDEO, ObjectTypes.SPAWNER_VIDEO]\n};\n\n// Given an content origin and the resolved mime type of a piece of content, return\n// the ObjectType, if any, for that content.\nexport function objectTypeForOriginAndContentType(contentOrigin, contentType, src) {\n  for (const prefix in objectTypeMimePrefixLookupMap) {\n    if (contentType.toLowerCase().startsWith(prefix)) {\n      const types = objectTypeMimePrefixLookupMap[prefix];\n      return objectTypeForOrigin(contentOrigin, ...types);\n    }\n  }\n\n  if (src) {\n    for (const suffix in srcSuffixLookupMap) {\n      if (src.toLowerCase().endsWith(suffix)) {\n        const types = srcSuffixLookupMap[suffix];\n        return objectTypeForOrigin(contentOrigin, ...types);\n      }\n    }\n  }\n\n  return ObjectTypes.UNKNOWN;\n}\n","export const avatars = [\n  {\n    id: \"botdefault\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotDefault_Avatar-9f71f8ff22.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botdefault-thumb-42C4C7D3C01D085EAFDAC8BACE591CE6.png\"\n  },\n  {\n    id: \"botbobo\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotBobo_Avatar-f9740a010b.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botbobo-thumb-261278FD5831E9CD89610D15948F23E4.png\"\n  },\n  {\n    id: \"botdom\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotDom_Avatar-0c48bf15a5.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botdom-thumb-1160EB5E81D24F12CE643C520CE1E99E.png\"\n  },\n  {\n    id: \"botgreg\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotGreg_Avatar-98d39797bb.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botgreg-thumb-F2A37F14F9C342EE44DDE9B24DD9B9FC.png\"\n  },\n  {\n    id: \"botguest\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotGuest_Avatar-78cd857332.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botguest-thumb-F7A471250E2C10C2709325C3B02A8BBB.png\"\n  },\n  {\n    id: \"botjim\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotJim_Avatar-d28005a687.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botjim-thumb-A2D195C1A51A082BCED58BD172481B39.png\"\n  },\n  {\n    id: \"botkev\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotKev_Avatar-a95787bb51.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botkev-thumb-90746A7349E3F964C913EA612EE9A53F.png\"\n  },\n  {\n    id: \"botpinky\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotPinky_Avatar-b0b93f8675.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botpinky-thumb-C2E69D4479077766B988DC3EE4F30BE5.png\"\n  },\n  {\n    id: \"botrobert\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotRobert_Avatar-e9554880f3.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botrobert-thumb-9C33F2C752326E2CF4321EAA7BDB4E47.png\"\n  },\n  {\n    id: \"botwoody\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotWoody_Avatar-0140485a23.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botwoody-thumb-F1F1FA7E21301B5AC1D8872B4ED0CC56.png\"\n  }\n];\n","export const createImageBitmap =\n  window.createImageBitmap ||\n  async function(data) {\n    return new Promise(resolve => {\n      // https://dev.to/nektro/createimagebitmap-polyfill-for-safari-and-edge-228\n      // https://gist.github.com/MonsieurV/fb640c29084c171b4444184858a91bc7\n\n      let srcUrl;\n      if (data instanceof Blob) {\n        srcUrl = URL.createObjectURL(data);\n      } else {\n        const canvas = document.createElement(\"canvas\");\n        const ctx = canvas.getContext(\"2d\");\n        canvas.width = data.width;\n        canvas.height = data.height;\n        ctx.putImageData(data, 0, 0);\n        srcUrl = canvas.toDataURL();\n      }\n      const img = document.createElement(\"img\");\n\n      img.addEventListener(\"load\", () => resolve(img));\n\n      img.src = srcUrl;\n    });\n  };\n\nexport function disposeImageBitmap(imageBitmap) {\n  if (imageBitmap instanceof HTMLImageElement && imageBitmap.src.startsWith(\"blob:\")) {\n    URL.revokeObjectURL(imageBitmap.src);\n  } else {\n    imageBitmap.close && imageBitmap.close();\n  }\n}\n","export default function nextTick() {\n  return new Promise(resolve => {\n    setTimeout(resolve, 0);\n  });\n}\n"],"sourceRoot":""}