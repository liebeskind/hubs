{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/react-components/link-root.js","webpack:///./src/link.js","webpack:///./src/utils/phoenix-utils.js","webpack:///./src/assets/stylesheets/link.scss","webpack:///./src/utils/disable-ios-zoom.js","webpack:///./src/assets/images/hub-preview-light-no-shadow.png","webpack:///./src/utils/i18n.js","webpack:///./src/utils/crypto.js","webpack:///./src/utils/link-channel.js","webpack:///./src/utils/identity.js","webpack:///./src/storage/store.js","webpack:///./src/assets/avatars/avatars.js","webpack:///./src/telemetry.js","webpack:///./src/react-components/wrap-with-audio.js","webpack:///./src/assets/images/generic_vr_headset.svg"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","8","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","MAX_DIGITS","MAX_LETTERS","addLocaleData","en","disableiOSZoom","hasTouchEvents","document","documentElement","LinkRoot","Component","[object Object]","args","super","_defineProperty","this","entered","isAlphaMode","failedAtLeastOnce","addEventListener","handleKeyDown","attachTouchEvents","ref","entries","buttonRefs","ontouchstart","removeChar","toggleMode","addToEntry","removeEventListener","e","keyCode","state","preventDefault","stopPropagation","ch","maxAllowedChars","newChars","setState","attemptLookup","substring","async","props","linkChannel","attemptLink","code","then","response","profile","hasChangedName","store","activity","update","credentials","path","location","href","catch","Error","message","url","fetch","status","attemptEntry","render","react_default","a","createElement","index_es","locale","lang","messages","className","styles","link","linkContents","logo","src","hub_preview_light_no_shadow_default","classNames","codeLoadingPanel","enteredContents","header","id","charInput","type","pattern","onChange","ev","target","match","toUpperCase","enteredFooter","wrap_with_audio","onClick","keypad","map","disabled","keypadButton","toString","keypadToggleMode","keypadZeroButton","keypadBackspace","footer","linkHeadsetFooterLink","style","visibility","HeadsetIcon","headsetIcon","intl","PropTypes","registerTelemetry","Store","init","LinkChannel","socket","connectToReticulum","setSocket","ReactDOM","link_root","getElementById","__webpack_exports__","getReticulumFetchUrl","invalidateReticulumMeta","getReticulumMeta","getLandingPageForPhoto","fetchReticulumAuthenticated","createAndRedirectToNewHub","getPresenceProfileForSession","migrateChannelToSocket","absolute","reticulumMeta","invalidatedReticulumMetaThisSession","querySelector","version","getAttribute","pool","phx_host","res","json","phxHostOverride","URLSearchParams","search","debug","params","qs","getNewSocketUrl","socketProtocol","protocol","socketHost","socketPort","process","includes","socketUrl","console","log","socketSettings","logger","kind","msg","Socket","connect","onError","endPointPath","URL","endPoint","pathname","newEndPoint","photoUrl","parsedUrl","replace","method","payload","token","APP","retUrl","headers","content-type","authorization","body","JSON","stringify","text","parse","sceneId","sceneUrl","createUrl","hub","default_environment_gltf_bundle_url","error","email","creatorAssignmentToken","creator_assignment_token","creatorAssignmentTokens","hubId","hub_id","host","presences","sessionId","presence","find","k","metas","oldChannel","channel","topic","bindings","item","on","event","callback","pushBuffer","timeout","oldJoinPush","joinPush","join","recHooks","receive","Promise","resolve","keypad-button","char-input","loading-text","loadingText","link-contents","entered-footer","entered-contents","code-loading-panel","entry-footer-image","entryFooterImage","footer-image","footerImage","keypad-backspace","keypad-toggle-mode","char","headset-icon","link-headset-footer-link","detect_browser__WEBPACK_IMPORTED_MODULE_0__","detectOS","navigator","userAgent","lastTouchAtMs","scale","now","Date","getTime","isDoubleTouch","_assets_translations_data_json__WEBPACK_IMPORTED_MODULE_0__","navigatorLang","languages","language","userLanguage","toLowerCase","split","localeData","deriveKey","privateKey","publicKey","crypto","subtle","public","publicKeyToString","exportKey","stringToPublicKey","importKey","namedCurve","stringToArrayBuffer","buf","Uint8Array","charCodeAt","arrayBufferToString","b","byteLength","String","fromCharCode","LINK_ACTION_TIMEOUT","constructor","onFinished","finished","step","getLetter","Math","floor","random","readyToSend","leftChannel","leave","cancel","keys","incoming","_objectSpread","incomingPublicKeyString","obj","iv","incomingPublicKey","keyPair","generateKey","publicKeyString","secret","encryptedData","btoa","encrypt","generatePublicKeyAndEncryptedObject","public_key","target_session_id","reply_to_session_id","reject","generateKeys","numOccupants","session_id","setTimeout","warn","base64value","ciphertext","atob","decrypt","decryptObject","names","selectRandom","arr","avatarIds","avatars","av","generateDefaultProfile","avatarId","LOCAL_STORE_KEY","STORE_STATE_CACHE_KEY","OAUTH_FLOW_CREDENTIALS_KEY","validator","Validator","SCHEMA","definitions","additionalProperties","properties","displayName","personalAvatarId","hasFoundFreeze","hasAcceptedProfile","lastEnteredAt","hasPinned","hasRotated","hasRecentered","hasScaled","hasHoveredInWorldHud","settings","lastUsedMicDeviceId","confirmedDiscordRooms","items","uploadPromotionTokens","fileId","promotionToken","$ref","EventTarget","localStorage","getItem","setItem","oauthFlowCredentials","Cookies","getJSON","resetToRandomLegacyAvatar","remove","credentialsAccountId","jwtDecode","sub","resetConfirmedDiscordRooms","arrayMerge","destinationArray","sourceArray","resetTipActivityFlags","newState","mergeOpts","finalState","merge","valid","validate","dispatchEvent","CustomEvent","model","thumbnail","raven_js__WEBPACK_IMPORTED_MODULE_0__","raven_js__WEBPACK_IMPORTED_MODULE_0___default","ga","trackedPage","trackedTitle","sentryDsn","SENTRY_DSN","gaTrackingId","GA_TRACKING_ID","Raven","config","install","ReactAudioContext","WithHoverSound","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","React","createContext","sound","children","Consumer","context","cloneElement","onMouseEnter","playSound","propTypes","string"],"mappings":"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","file":"assets/js/link-753bda50073aa701d76f.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t8: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([1464,1,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { IntlProvider, FormattedMessage, addLocaleData } from \"react-intl\";\nimport en from \"react-intl/locale-data/en\";\n\nimport { lang, messages } from \"../utils/i18n\";\nimport classNames from \"classnames\";\nimport styles from \"../assets/stylesheets/link.scss\";\nimport { disableiOSZoom } from \"../utils/disable-ios-zoom\";\nimport HeadsetIcon from \"../assets/images/generic_vr_headset.svg\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nconst MAX_DIGITS = 6;\nconst MAX_LETTERS = 4;\n\naddLocaleData([...en]);\ndisableiOSZoom();\nconst hasTouchEvents = \"ontouchstart\" in document.documentElement;\n\nclass LinkRoot extends Component {\n  static propTypes = {\n    intl: PropTypes.object,\n    store: PropTypes.object,\n    linkChannel: PropTypes.object\n  };\n\n  state = {\n    entered: \"\",\n    isAlphaMode: false,\n    failedAtLeastOnce: false\n  };\n\n  buttonRefs = {};\n\n  componentDidMount = () => {\n    document.addEventListener(\"keydown\", this.handleKeyDown);\n    this.attachTouchEvents();\n  };\n\n  attachTouchEvents = () => {\n    // https://github.com/facebook/react/issues/9809#issuecomment-413978405\n    if (hasTouchEvents) {\n      for (const [name, ref] of Object.entries(this.buttonRefs)) {\n        if (!ref) continue;\n        if (name === \"remove\") {\n          ref.ontouchstart = () => this.removeChar();\n        } else if (name === \"toggle\") {\n          ref.ontouchstart = () => this.toggleMode();\n        } else {\n          ref.ontouchstart = () => this.addToEntry(name);\n        }\n      }\n    }\n  };\n\n  componentDidUpdate = () => {\n    this.attachTouchEvents();\n  };\n\n  componentWillUnmount = () => {\n    document.removeEventListener(\"keydown\", this.handleKeyDown);\n  };\n\n  handleKeyDown = e => {\n    // Number keys 0-9\n    if ((e.keyCode < 48 || e.keyCode > 57) && !this.state.isAlphaMode) {\n      return;\n    }\n\n    // Alpha keys A-I\n    if ((e.keyCode < 65 || e.keyCode > 73) && this.state.isAlphaMode) {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (this.state.isAlphaMode) {\n      this.addToEntry(\"IHGFEDCBA\"[73 - e.keyCode]);\n    } else {\n      this.addToEntry(e.keyCode - 48);\n    }\n  };\n\n  maxAllowedChars = () => {\n    return this.state.isAlphaMode ? MAX_LETTERS : MAX_DIGITS;\n  };\n\n  addToEntry = ch => {\n    if (this.state.entered.length >= this.maxAllowedChars()) return;\n    const newChars = `${this.state.entered}${ch}`;\n\n    this.setState({ entered: newChars }, () => {\n      if (this.state.entered.length === this.maxAllowedChars()) {\n        this.attemptLookup(this.state.entered);\n      }\n    });\n  };\n\n  removeChar = () => {\n    const entered = this.state.entered;\n    if (entered.length === 0) return;\n    this.setState({ entered: entered.substring(0, entered.length - 1) });\n  };\n\n  attemptLink = async code => {\n    this.props.linkChannel\n      .attemptLink(code)\n      .then(response => {\n        // If there is a profile from the linked device, copy it over if we don't have one yet.\n        if (response.profile) {\n          const { hasChangedName } = this.props.store.state.activity;\n\n          if (!hasChangedName) {\n            this.props.store.update({ activity: { hasChangedName: true }, profile: response.profile });\n          }\n        }\n        this.props.store.update({ credentials: response.credentials });\n\n        if (response.path) {\n          window.location.href = response.path;\n        }\n      })\n      .catch(e => {\n        this.setState({ failedAtLeastOnce: true, entered: \"\" });\n\n        if (!(e instanceof Error && (e.message === \"in_use\" || e.message === \"failed\"))) {\n          throw e;\n        }\n      });\n  };\n\n  attemptEntry = async code => {\n    const url = \"/link/\" + code;\n    const res = await fetch(url);\n\n    if (res.status >= 400) {\n      this.setState({ failedAtLeastOnce: true, entered: \"\" });\n    } else {\n      document.location = url;\n    }\n  };\n\n  attemptLookup = async code => {\n    if (this.state.isAlphaMode) {\n      // Headset link code\n      this.attemptLink(code);\n    } else {\n      // Room entry code\n      this.attemptEntry(code);\n    }\n  };\n\n  toggleMode = () => {\n    this.setState({ isAlphaMode: !this.state.isAlphaMode, entered: \"\", failedAtLeastOnce: false });\n  };\n\n  render() {\n    // Note we use type \"tel\" for the input due to https://bugzilla.mozilla.org/show_bug.cgi?id=1005603\n\n    return (\n      <IntlProvider locale={lang} messages={messages}>\n        <div className={styles.link}>\n          <div className={styles.linkContents}>\n            <div className={styles.logo}>\n              <img src=\"../assets/images/hub-preview-light-no-shadow.png\" />\n            </div>\n            {this.state.entered.length === this.maxAllowedChars() && (\n              <div className={classNames(\"loading-panel\", styles.codeLoadingPanel)}>\n                <div className=\"loader-wrap\">\n                  <div className=\"loader\">\n                    <div className=\"loader-center\" />\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <div className={styles.enteredContents}>\n              <div className={styles.header}>\n                <FormattedMessage\n                  id={\n                    this.state.failedAtLeastOnce\n                      ? \"link.try_again\"\n                      : \"link.link_page_header_\" + (!this.state.isAlphaMode ? \"entry\" : \"headset\")\n                  }\n                />\n              </div>\n\n              <div className={styles.entered}>\n                <input\n                  className={styles.charInput}\n                  type={this.state.isAlphaMode ? \"text\" : \"tel\"}\n                  pattern=\"[0-9A-I]*\"\n                  value={this.state.entered}\n                  onChange={ev => {\n                    if (!this.state.isAlphaMode && ev.target.value.match(/[a-z]/i)) {\n                      this.setState({ isAlphaMode: true });\n                    }\n\n                    this.setState({ entered: ev.target.value.toUpperCase() }, () => {\n                      if (this.state.entered.length === this.maxAllowedChars()) {\n                        this.attemptLookup(this.state.entered);\n                      }\n                    });\n                  }}\n                />\n              </div>\n\n              <div className={styles.enteredFooter}>\n                {!this.state.isAlphaMode && (\n                  <span>\n                    <WithHoverSound>\n                      <a href=\"#\" onClick={() => this.toggleMode()}>\n                        <FormattedMessage id=\"link.linking_a_headset\" />\n                      </a>\n                    </WithHoverSound>\n                  </span>\n                )}\n              </div>\n            </div>\n\n            <div className={styles.keypad}>\n              {(this.state.isAlphaMode\n                ? [\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\"]\n                : [1, 2, 3, 4, 5, 6, 7, 8, 9]\n              ).map((d, i) => (\n                <WithHoverSound key={`char_${i}`}>\n                  <button\n                    disabled={this.state.entered.length === this.maxAllowedChars()}\n                    className={styles.keypadButton}\n                    key={`char_${i}`}\n                    onClick={() => {\n                      if (!hasTouchEvents) this.addToEntry(d);\n                    }}\n                    ref={r => (this.buttonRefs[d.toString()] = r)}\n                  >\n                    {d}\n                  </button>\n                </WithHoverSound>\n              ))}\n              <WithHoverSound>\n                <button\n                  className={classNames(styles.keypadButton, styles.keypadToggleMode)}\n                  ref={r => (this.buttonRefs[\"toggle\"] = r)}\n                  onClick={() => {\n                    if (!hasTouchEvents) this.toggleMode();\n                  }}\n                >\n                  {this.state.isAlphaMode ? \"123\" : \"ABC\"}\n                </button>\n              </WithHoverSound>\n              {!this.state.isAlphaMode && (\n                <WithHoverSound>\n                  <button\n                    disabled={this.state.entered.length === this.maxAllowedChars()}\n                    className={classNames(styles.keypadButton, styles.keypadZeroButton)}\n                    ref={r => (this.buttonRefs[\"0\"] = r)}\n                    onClick={() => {\n                      if (!hasTouchEvents) this.addToEntry(0);\n                    }}\n                  >\n                    0\n                  </button>\n                </WithHoverSound>\n              )}\n              <WithHoverSound>\n                <button\n                  disabled={this.state.entered.length === 0 || this.state.entered.length === this.maxAllowedChars()}\n                  className={classNames(styles.keypadButton, styles.keypadBackspace)}\n                  ref={r => (this.buttonRefs[\"remove\"] = r)}\n                  onClick={() => {\n                    if (!hasTouchEvents) this.removeChar();\n                  }}\n                >\n                  ⌫\n                </button>\n              </WithHoverSound>\n            </div>\n\n            <div className={styles.footer}>\n              {!this.state.isAlphaMode && (\n                <div\n                  className={styles.linkHeadsetFooterLink}\n                  style={{ visibility: this.state.isAlphaMode ? \"hidden\" : \"visible\" }}\n                >\n                  <WithHoverSound>\n                    <img onClick={() => this.toggleMode()} src={HeadsetIcon} className={styles.headsetIcon} />\n                  </WithHoverSound>\n                  <span>\n                    <WithHoverSound>\n                      <a href=\"#\" onClick={() => this.toggleMode()}>\n                        <FormattedMessage id=\"link.linking_a_headset\" />\n                      </a>\n                    </WithHoverSound>\n                  </span>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </IntlProvider>\n    );\n  }\n}\n\nexport default LinkRoot;\n","import \"./assets/stylesheets/link.scss\";\nimport \"aframe\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport registerTelemetry from \"./telemetry\";\nimport LinkRoot from \"./react-components/link-root\";\nimport LinkChannel from \"./utils/link-channel\";\nimport { connectToReticulum } from \"./utils/phoenix-utils\";\nimport Store from \"./storage/store\";\n\nregisterTelemetry(\"/link\", \"Hubs Device Link\");\n\nconst store = new Store();\nstore.init();\n\nconst linkChannel = new LinkChannel(store);\n\n(async () => {\n  const socket = await connectToReticulum();\n  linkChannel.setSocket(socket);\n})();\n\nReactDOM.render(<LinkRoot store={store} linkChannel={linkChannel} />, document.getElementById(\"link-root\"));\n","import { Socket } from \"phoenix\";\nimport { generateHubName } from \"../utils/name-generation\";\n\nimport Store from \"../storage/store\";\n\nconst resolverLink = document.createElement(\"a\");\nexport function getReticulumFetchUrl(path, absolute = false) {\n  if (process.env.RETICULUM_SERVER) {\n    return `https://${process.env.RETICULUM_SERVER}${path}`;\n  } else if (absolute) {\n    resolverLink.href = path;\n    return resolverLink.href;\n  } else {\n    return path;\n  }\n}\n\nlet reticulumMeta = null;\nlet invalidatedReticulumMetaThisSession = false;\n\nexport async function invalidateReticulumMeta() {\n  invalidatedReticulumMetaThisSession = true;\n  reticulumMeta = null;\n}\n\nexport async function getReticulumMeta() {\n  if (!reticulumMeta) {\n    // Initially look up version based upon page, avoiding round-trip, otherwise fetch.\n    if (!invalidatedReticulumMetaThisSession && document.querySelector(\"meta[name='ret:version']\")) {\n      reticulumMeta = {\n        version: document.querySelector(\"meta[name='ret:version']\").getAttribute(\"value\"),\n        pool: document.querySelector(\"meta[name='ret:pool']\").getAttribute(\"value\"),\n        phx_host: document.querySelector(\"meta[name='ret:phx_host']\").getAttribute(\"value\")\n      };\n    } else {\n      await fetch(getReticulumFetchUrl(\"/api/v1/meta\")).then(async res => {\n        reticulumMeta = await res.json();\n      });\n    }\n  }\n\n  const qs = new URLSearchParams(location.search);\n  const phxHostOverride = qs.get(\"phx_host\");\n\n  if (phxHostOverride) {\n    reticulumMeta.phx_host = phxHostOverride;\n  }\n\n  return reticulumMeta;\n}\n\nexport async function connectToReticulum(debug = false, params = null) {\n  const qs = new URLSearchParams(location.search);\n\n  const getNewSocketUrl = async () => {\n    const socketProtocol = qs.get(\"phx_protocol\") || (document.location.protocol === \"https:\" ? \"wss:\" : \"ws:\");\n    let socketHost = qs.get(\"phx_host\");\n    let socketPort = qs.get(\"phx_port\");\n\n    const reticulumMeta = await getReticulumMeta();\n    socketHost = socketHost || reticulumMeta.phx_host;\n    socketPort = socketPort || (process.env.RETICULUM_SERVER.includes(\"hubs.local\") ? \"4000\" : \"443\"); // TODO phx_port\n    return `${socketProtocol}//${socketHost}${socketPort ? `:${socketPort}` : \"\"}`;\n  };\n\n  const socketUrl = await getNewSocketUrl();\n  console.log(`Phoenix Socket URL: ${socketUrl}`);\n\n  const socketSettings = {};\n\n  if (debug) {\n    socketSettings.logger = (kind, msg, data) => {\n      console.log(`${kind}: ${msg}`, data);\n    };\n  }\n\n  if (params) {\n    socketSettings.params = params;\n  }\n\n  const socket = new Socket(`${socketUrl}/socket`, socketSettings);\n  socket.connect();\n  socket.onError(async () => {\n    // On error, underlying reticulum node may have died, so rebalance by\n    // fetching a new healthy node to connect to.\n    invalidateReticulumMeta();\n\n    const endPointPath = new URL(socket.endPoint).pathname;\n    const newSocketUrl = await getNewSocketUrl();\n    const newEndPoint = `${newSocketUrl}${endPointPath}`;\n    console.log(`Socket error, changed endpoint to ${newEndPoint}`);\n    socket.endPoint = newEndPoint;\n  });\n\n  return socket;\n}\n\nexport function getLandingPageForPhoto(photoUrl) {\n  const parsedUrl = new URL(photoUrl);\n  return getReticulumFetchUrl(parsedUrl.pathname.replace(\".png\", \".html\") + parsedUrl.search, true);\n}\n\nexport function fetchReticulumAuthenticated(url, method = \"GET\", payload) {\n  const { token } = window.APP.store.state.credentials;\n  const retUrl = getReticulumFetchUrl(url);\n  const params = {\n    headers: {\n      \"content-type\": \"application/json\",\n      authorization: `bearer ${token}`\n    },\n    method\n  };\n  if (payload) {\n    params.body = JSON.stringify(payload);\n  }\n  return fetch(retUrl, params).then(async r => {\n    const result = await r.text();\n    try {\n      return JSON.parse(result);\n    } catch (e) {\n      // Some reticulum responses, particularly DELETE requests, don't return json.\n      return result;\n    }\n  });\n}\n\nexport async function createAndRedirectToNewHub(name, sceneId, sceneUrl, replace) {\n  const createUrl = getReticulumFetchUrl(\"/api/v1/hubs\");\n  // const payload = { hub: { name: name || generateHubName() } };\n  const payload = { hub: { name: 'Axon Park' } };\n\n  // if (sceneId) {\n  //   payload.hub.scene_id = sceneId;\n  // } else {\n    // payload.hub.default_environment_gltf_bundle_url = sceneUrl;\n    \n    // payload.hub.default_environment_gltf_bundle_url = 'https://www.dropbox.com/s/ayl3t33p2ymnxux/Axon%20Park_Cliffside.glb';\n    payload.hub.default_environment_gltf_bundle_url = 'https://s3-us-west-1.amazonaws.com/axonpark/Axon_Park_Cliffside.glb';\n    // payload.hub.default_environment_gltf_bundle_url = '/assets/Axon_Park_Cliffside.glb';\n  // }\n\n  const headers = { \"content-type\": \"application/json\" };\n  const store = new Store();\n  if (store.state && store.state.credentials.token) {\n    headers.authorization = `bearer ${store.state.credentials.token}`;\n  }\n\n  let res = await fetch(createUrl, {\n    body: JSON.stringify(payload),\n    headers,\n    method: \"POST\"\n  }).then(r => r.json());\n\n  if (res.error === \"invalid_token\") {\n    // Clear the invalid token from store.\n    store.update({ credentials: { token: null, email: null } });\n\n    // Create hub anonymously\n    delete headers.authorization;\n    res = await fetch(createUrl, {\n      body: JSON.stringify(payload),\n      headers,\n      method: \"POST\"\n    }).then(r => r.json());\n  }\n\n  const hub = res;\n  let url = hub.url;\n\n  const creatorAssignmentToken = hub.creator_assignment_token;\n  if (creatorAssignmentToken) {\n    store.update({ creatorAssignmentTokens: [{ hubId: hub.hub_id, creatorAssignmentToken: creatorAssignmentToken }] });\n  }\n\n  if (process.env.RETICULUM_SERVER && document.location.host !== process.env.RETICULUM_SERVER) {\n    url = `/hub.html?hub_id=${hub.hub_id}`;\n  }\n\n  if (replace) {\n    document.location.replace(url);\n  } else {\n    document.location = url;\n  }\n}\n\nexport function getPresenceProfileForSession(presences, sessionId) {\n  const entry = Object.entries(presences || {}).find(([k]) => k === sessionId) || [];\n  const presence = entry[1];\n  return (presence && presence.metas && presence.metas[0].profile) || {};\n}\n\n// Takes the given channel, and creates a new channel with the same bindings\n// with the given socket, joins it, and leaves the old channel after joining.\n//\n// NOTE: This function relies upon phoenix channel object internals, so this\n// function will need to be reviewed if/when we ever update phoenix.js\nexport function migrateChannelToSocket(oldChannel, socket, params) {\n  const channel = socket.channel(oldChannel.topic, params || oldChannel.params);\n\n  for (let i = 0, l = oldChannel.bindings.length; i < l; i++) {\n    const item = oldChannel.bindings[i];\n    channel.on(item.event, item.callback);\n  }\n\n  for (let i = 0, l = oldChannel.pushBuffer.length; i < l; i++) {\n    const item = oldChannel.pushBuffer[i];\n    channel.push(item.event, item.payload, item.timeout);\n  }\n\n  const oldJoinPush = oldChannel.joinPush;\n  const joinPush = channel.join();\n\n  for (let i = 0, l = oldJoinPush.recHooks.length; i < l; i++) {\n    const item = oldJoinPush.recHooks[i];\n    joinPush.receive(item.status, item.callback);\n  }\n\n  return new Promise(resolve => {\n    joinPush.receive(\"ok\", () => {\n      // Clear all event handlers first so no duplicate messages come in.\n      oldChannel.bindings = [];\n      resolve(channel);\n    });\n  });\n}\n","// removed by extract-text-webpack-plugin\nmodule.exports = {\"keypad-button\":\"link__keypad-button__2ElvK\",\"keypadButton\":\"link__keypad-button__2ElvK\",\"entered\":\"link__entered__1NNNd\",\"char-input\":\"link__char-input__3Uver\",\"charInput\":\"link__char-input__3Uver\",\"loading-text\":\"link__loading-text__2VpEE\",\"loadingText\":\"link__loading-text__2VpEE\",\"logo\":\"link__logo__dzO36\",\"link\":\"link__link__3kJ6B\",\"link-contents\":\"link__link-contents__3L1rY\",\"linkContents\":\"link__link-contents__3L1rY\",\"entered-footer\":\"link__entered-footer__2Oi0C\",\"enteredFooter\":\"link__entered-footer__2Oi0C\",\"entered-contents\":\"link__entered-contents__2ZmCP\",\"enteredContents\":\"link__entered-contents__2ZmCP\",\"code-loading-panel\":\"link__code-loading-panel__21IQD\",\"codeLoadingPanel\":\"link__code-loading-panel__21IQD\",\"entry-footer-image\":\"link__entry-footer-image__1XOeK\",\"entryFooterImage\":\"link__entry-footer-image__1XOeK\",\"footer-image\":\"link__footer-image__AsDh-\",\"footerImage\":\"link__footer-image__AsDh-\",\"header\":\"link__header__ID1fV\",\"footer\":\"link__footer__DERRP\",\"keypad\":\"link__keypad__1FVTF\",\"keypad-backspace\":\"link__keypad-backspace__M4x5m\",\"keypadBackspace\":\"link__keypad-backspace__M4x5m\",\"keypad-toggle-mode\":\"link__keypad-toggle-mode__2sIRG\",\"keypadToggleMode\":\"link__keypad-toggle-mode__2sIRG\",\"char\":\"link__char__20D9j\",\"headset-icon\":\"link__headset-icon__22_kp\",\"headsetIcon\":\"link__headset-icon__22_kp\",\"link-headset-footer-link\":\"link__link-headset-footer-link__pGQB8\",\"linkHeadsetFooterLink\":\"link__link-headset-footer-link__pGQB8\"};","import { detectOS } from \"detect-browser\";\n\nexport function disableiOSZoom() {\n  if (detectOS(navigator.userAgent) !== \"iOS\") return;\n\n  let lastTouchAtMs = 0;\n\n  document.addEventListener(\"touchmove\", ev => {\n    if (ev.scale === 1) return;\n\n    ev.preventDefault();\n  });\n\n  document.addEventListener(\"touchend\", ev => {\n    const now = new Date().getTime();\n    const isDoubleTouch = now - lastTouchAtMs <= 300;\n    lastTouchAtMs = now;\n\n    if (isDoubleTouch) {\n      ev.preventDefault();\n    }\n  });\n}\n","module.exports = __webpack_public_path__ + \"assets/images/hub-preview-light-no-shadow-5ebb166e8580d819b445892173ec0286.png\";","import localeData from \"../assets/translations.data.json\";\nconst navigatorLang = ((navigator.languages && navigator.languages[0]) || navigator.language || navigator.userLanguage)\n  .toLowerCase()\n  .split(/[_-]+/)[0];\nexport const lang = (localeData[navigatorLang] && navigatorLang) || \"en\";\nexport const messages = localeData[lang] || localeData.en;\n","// NOTE: We do not use an IV since we generate a new keypair each time we use these routines.\n\nasync function deriveKey(privateKey, publicKey) {\n  return crypto.subtle.deriveKey(\n    { name: \"ECDH\", public: publicKey },\n    privateKey,\n    { name: \"AES-CBC\", length: 256 },\n    true,\n    [\"encrypt\", \"decrypt\"]\n  );\n}\n\nasync function publicKeyToString(key) {\n  return JSON.stringify(await crypto.subtle.exportKey(\"jwk\", key));\n}\n\nasync function stringToPublicKey(s) {\n  return await crypto.subtle.importKey(\"jwk\", JSON.parse(s), { name: \"ECDH\", namedCurve: \"P-256\" }, true, []);\n}\n\nfunction stringToArrayBuffer(s) {\n  const buf = new Uint8Array(s.length);\n\n  for (let i = 0; i < s.length; i++) {\n    buf[i] = s.charCodeAt(i);\n  }\n\n  return buf;\n}\n\nfunction arrayBufferToString(b) {\n  const buf = new Uint8Array(b);\n  let s = \"\";\n\n  for (let i = 0; i < buf.byteLength; i++) {\n    s += String.fromCharCode(buf[i]);\n  }\n\n  return s;\n}\n\n// This allows a single object to be passed encrypted from a receiver in a req -> response flow\n\n// Requestor generates a public key and private key, and should send the public key to receiver.\nexport async function generateKeys() {\n  const keyPair = await crypto.subtle.generateKey({ name: \"ECDH\", namedCurve: \"P-256\" }, true, [\"deriveKey\"]);\n  const publicKeyString = await publicKeyToString(keyPair.publicKey);\n  return { publicKeyString, privateKey: keyPair.privateKey };\n}\n\n// Receiver takes the public key from requestor and passes obj to get a response public key and the encrypted data to return.\nexport async function generatePublicKeyAndEncryptedObject(incomingPublicKeyString, obj) {\n  const iv = new Uint8Array(16);\n  const incomingPublicKey = await stringToPublicKey(incomingPublicKeyString);\n  const keyPair = await crypto.subtle.generateKey({ name: \"ECDH\", namedCurve: \"P-256\" }, true, [\"deriveKey\"]);\n  const publicKeyString = await publicKeyToString(keyPair.publicKey);\n  const secret = await deriveKey(keyPair.privateKey, incomingPublicKey);\n\n  const encryptedData = btoa(\n    arrayBufferToString(\n      await crypto.subtle.encrypt({ name: \"AES-CBC\", iv }, secret, stringToArrayBuffer(JSON.stringify(obj)))\n    )\n  );\n\n  return { publicKeyString, encryptedData };\n}\n\n// Requestor then takes the receiver's public key, the private key (returned from generateKeys()), and the data from the receiver.\nexport async function decryptObject(publicKeyString, privateKey, base64value) {\n  const iv = new Uint8Array(16);\n  const publicKey = await stringToPublicKey(publicKeyString);\n  const secret = await deriveKey(privateKey, publicKey);\n  const ciphertext = stringToArrayBuffer(atob(base64value));\n  const data = await crypto.subtle.decrypt({ name: \"AES-CBC\", iv }, secret, ciphertext);\n  return JSON.parse(arrayBufferToString(data));\n}\n","import { generatePublicKeyAndEncryptedObject, generateKeys, decryptObject } from \"./crypto\";\n\nconst LINK_ACTION_TIMEOUT = 10000;\n\nexport default class LinkChannel {\n  constructor(store) {\n    this.store = store;\n  }\n\n  setSocket = socket => {\n    this.socket = socket;\n  };\n\n  // Returns a promise that, when resolved, will forward an object with three keys:\n  //\n  // code: The code that was made available to use for link.\n  //\n  // cancel: A function that the caller can call to cancel the use of the code.\n  //\n  // onFinished: A promise that, when resolved, indicates the code is no longer usable,\n  // because it was either successfully used by the remote device or it has expired\n  // (\"used\" or \"expired\" is passed to the callback).\n  generateCode = () => {\n    return new Promise(resolve => {\n      const onFinished = new Promise(finished => {\n        const step = () => {\n          const getLetter = () => \"ABCDEFGHI\"[Math.floor(Math.random() * 9)];\n          const code = `${getLetter()}${getLetter()}${getLetter()}${getLetter()}`;\n\n          // Only respond to one link_request in this channel.\n          let readyToSend = false;\n          let leftChannel = false;\n\n          const channel = this.socket.channel(`link:${code}`, { timeout: LINK_ACTION_TIMEOUT });\n\n          const leave = () => {\n            if (!leftChannel) channel.leave();\n            leftChannel = true;\n          };\n\n          const cancel = () => leave();\n\n          channel.on(\"link_expired\", () => finished(\"expired\"));\n\n          channel.on(\"presence_state\", state => {\n            if (readyToSend) return;\n\n            if (Object.keys(state).length > 0) {\n              // Code is in use by someone else, try a new one\n              step();\n            } else {\n              readyToSend = true;\n              resolve({ code, cancel, onFinished });\n            }\n          });\n\n          channel.on(\"link_request\", incoming => {\n            if (readyToSend) {\n              const data = { path: location.pathname };\n\n              // Copy profile data to link'ed device if it's been set.\n              if (this.store.state.activity.hasChangedName) {\n                data.profile = { ...this.store.state.profile };\n              }\n              data.credentials = { ...this.store.state.credentials };\n\n              generatePublicKeyAndEncryptedObject(incoming.public_key, data).then(\n                ({ publicKeyString, encryptedData }) => {\n                  const payload = {\n                    target_session_id: incoming.reply_to_session_id,\n                    public_key: publicKeyString,\n                    data: encryptedData\n                  };\n\n                  if (!leftChannel) {\n                    channel.push(\"link_response\", payload);\n                  }\n\n                  leave();\n\n                  finished(\"used\");\n                  readyToSend = false;\n                }\n              );\n            }\n          });\n\n          channel.join().receive(\"error\", r => console.error(r));\n        };\n\n        step();\n      });\n    });\n  };\n\n  // Attempts to receive a link payload from a remote device using the given code.\n  //\n  // Promise rejects if the code is invalid or there is a problem with the channel.\n  // Promise resolves and passes payload of link source on successful link.\n  attemptLink = code => {\n    return new Promise((resolve, reject) => {\n      const channel = this.socket.channel(`link:${code}`, { timeout: LINK_ACTION_TIMEOUT });\n      let finished = false;\n\n      generateKeys().then(({ publicKeyString, privateKey }) => {\n        channel.on(\"presence_state\", state => {\n          const numOccupants = Object.keys(state).length;\n\n          if (numOccupants === 1) {\n            // Great, only sender is in topic, request link\n            channel.push(\"link_request\", {\n              reply_to_session_id: this.socket.params().session_id,\n              public_key: publicKeyString\n            });\n\n            setTimeout(() => {\n              if (finished) return;\n              channel.leave();\n              reject(new Error(\"no_response\"));\n            }, LINK_ACTION_TIMEOUT);\n          } else if (numOccupants === 0) {\n            // Nobody in this channel, probably a bad code.\n            channel.leave();\n            reject(new Error(\"failed\"));\n          } else {\n            console.warn(\"link code channel already has 2 or more occupants, something fishy is going on.\");\n            channel.leave();\n            reject(new Error(\"in_use\"));\n          }\n        });\n\n        channel.on(\"link_response\", payload => {\n          finished = true;\n          channel.leave();\n\n          decryptObject(payload.public_key, privateKey, payload.data).then(resolve);\n        });\n\n        channel\n          .join()\n          .receive(\"ok\", data => (this.socket.params().session_id = data.session_id))\n          .receive(\"error\", r => console.error(r));\n      });\n    });\n  };\n}\n","import { avatars } from \"../assets/avatars/avatars.js\";\n\nconst names = [\n  \"Baers-Pochard\",\n  \"Baikal-Teal\",\n  \"Barrows-Goldeneye\",\n  \"Blue-Billed\",\n  \"Blue-Duck\",\n  \"Blue-Winged\",\n  \"Brown-Teal\",\n  \"Bufflehead\",\n  \"Canvasback\",\n  \"Cape-Shoveler\",\n  \"Chestnut-Teal\",\n  \"Chiloe-Wigeon\",\n  \"Cinnamon-Teal\",\n  \"Comb-Duck\",\n  \"Common-Eider\",\n  \"Common-Goldeneye\",\n  \"Common-Merganser\",\n  \"Common-Pochard\",\n  \"Common-Scoter\",\n  \"Common-Shelduck\",\n  \"Cotton-Pygmy\",\n  \"Crested-Duck\",\n  \"Crested-Shelduck\",\n  \"Eatons-Pintail\",\n  \"Falcated\",\n  \"Ferruginous\",\n  \"Freckled-Duck\",\n  \"Gadwall\",\n  \"Garganey\",\n  \"Greater-Scaup\",\n  \"Green-Pygmy\",\n  \"Grey-Teal\",\n  \"Hardhead\",\n  \"Harlequin\",\n  \"Hartlaubs\",\n  \"Hooded-Merganser\",\n  \"Hottentot-Teal\",\n  \"Kelp-Goose\",\n  \"King-Eider\",\n  \"Lake-Duck\",\n  \"Laysan-Duck\",\n  \"Lesser-Scaup\",\n  \"Long-Tailed\",\n  \"Maccoa-Duck\",\n  \"Mallard\",\n  \"Mandarin\",\n  \"Marbled-Teal\",\n  \"Mellers-Duck\",\n  \"Merganser\",\n  \"Northern-Pintail\",\n  \"Orinoco-Goose\",\n  \"Paradise-Shelduck\",\n  \"Plumed-Whistler\",\n  \"Puna-Teal\",\n  \"Pygmy-Goose\",\n  \"Radjah-Shelduck\",\n  \"Red-Billed\",\n  \"Red-Crested\",\n  \"Red-Shoveler\",\n  \"Ring-Necked\",\n  \"Ringed-Teal\",\n  \"Rosy-Billed\",\n  \"Ruddy-Shelduck\",\n  \"Salvadoris-Teal\",\n  \"Scaly-Sided\",\n  \"Shelduck\",\n  \"Shoveler\",\n  \"Silver-Teal\",\n  \"Smew\",\n  \"Spectacled-Eider\",\n  \"Spot-Billed\",\n  \"Spotted-Whistler\",\n  \"Steamerduck\",\n  \"Stellers-Eider\",\n  \"Sunda-Teal\",\n  \"Surf-Scoter\",\n  \"Tufted-Duck\",\n  \"Velvet-Scoter\",\n  \"Wandering-Whistler\",\n  \"Whistling-duck\",\n  \"White-Backed\",\n  \"White-Cheeked\",\n  \"White-Winged\",\n  \"Wigeon\",\n  \"Wood-Duck\",\n  \"Yellow-Billed\"\n];\n\nfunction selectRandom(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nexport function generateRandomName() {\n  return `${selectRandom(names)}-${Math.floor(10000 + Math.random() * 10000)}`;\n}\n\nexport const avatarIds = avatars.map(av => av.id);\n\nexport function generateDefaultProfile() {\n  return {\n    avatarId: selectRandom(avatarIds)\n  };\n}\n","import { Validator } from \"jsonschema\";\nimport merge from \"deepmerge\";\nimport Cookies from \"js-cookie\";\nimport jwtDecode from \"jwt-decode\";\n\nconst LOCAL_STORE_KEY = \"___hubs_store\";\nconst STORE_STATE_CACHE_KEY = Symbol();\nconst OAUTH_FLOW_CREDENTIALS_KEY = \"ret-oauth-flow-account-credentials\";\nconst validator = new Validator();\nimport { EventTarget } from \"event-target-shim\";\nimport { generateDefaultProfile, generateRandomName } from \"../utils/identity.js\";\n\n// Durable (via local-storage) schema-enforced state that is meant to be consumed via forward data flow.\n// (Think flux but with way less incidental complexity, at least for now :))\nexport const SCHEMA = {\n  id: \"/HubsStore\",\n\n  definitions: {\n    profile: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        displayName: { type: \"string\", pattern: \"^[A-Za-z0-9-]{3,32}$\" },\n        avatarId: { type: \"string\" },\n        personalAvatarId: { type: \"string\" }\n      }\n    },\n\n    credentials: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        token: { type: [\"null\", \"string\"] },\n        email: { type: [\"null\", \"string\"] }\n      }\n    },\n\n    activity: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        hasFoundFreeze: { type: \"boolean\" },\n        hasChangedName: { type: \"boolean\" },\n        hasAcceptedProfile: { type: \"boolean\" },\n        lastEnteredAt: { type: \"string\" },\n        hasPinned: { type: \"boolean\" },\n        hasRotated: { type: \"boolean\" },\n        hasRecentered: { type: \"boolean\" },\n        hasScaled: { type: \"boolean\" },\n        hasHoveredInWorldHud: { type: \"boolean\" }\n      }\n    },\n\n    settings: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        lastUsedMicDeviceId: { type: \"string\" }\n      }\n    },\n\n    confirmedDiscordRooms: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n\n    uploadPromotionTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          fileId: { type: \"string\" },\n          promotionToken: { type: \"string\" }\n        }\n      }\n    },\n\n    creatorAssignmentTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          creatorAssignmentToken: { type: \"string\" }\n        }\n      }\n    }\n  },\n\n  type: \"object\",\n\n  properties: {\n    profile: { $ref: \"#/definitions/profile\" },\n    credentials: { $ref: \"#/definitions/credentials\" },\n    activity: { $ref: \"#/definitions/activity\" },\n    settings: { $ref: \"#/definitions/settings\" },\n    confirmedDiscordRooms: { $ref: \"#/definitions/confirmedDiscordRooms\" },\n    uploadPromotionTokens: { $ref: \"#/definitions/uploadPromotionTokens\" },\n    creatorAssignmentTokens: { $ref: \"#/definitions/creatorAssignmentTokens\" }\n  },\n\n  additionalProperties: false\n};\n\nexport default class Store extends EventTarget {\n  constructor() {\n    super();\n\n    if (localStorage.getItem(LOCAL_STORE_KEY) === null) {\n      localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify({}));\n    }\n    this.update({\n      activity: {},\n      settings: {},\n      credentials: {},\n      profile: {},\n      confirmedDiscordRooms: [],\n      uploadPromotionTokens: [],\n      creatorAssignmentTokens: []\n    });\n\n    const oauthFlowCredentials = Cookies.getJSON(OAUTH_FLOW_CREDENTIALS_KEY);\n    if (oauthFlowCredentials) {\n      this.update({ credentials: oauthFlowCredentials });\n      this.resetToRandomLegacyAvatar();\n      Cookies.remove(OAUTH_FLOW_CREDENTIALS_KEY);\n    }\n  }\n\n  // Initializes store with any default bits\n  init = () => {\n    this.update({\n      profile: { ...generateDefaultProfile(), ...(this.state.profile || {}) }\n    });\n\n    // Regenerate name to encourage users to change it.\n    if (!this.state.activity.hasChangedName) {\n      this.update({ profile: { displayName: generateRandomName() } });\n    }\n  };\n\n  resetToRandomLegacyAvatar = () => {\n    this.update({\n      profile: { ...(this.state.profile || {}), ...generateDefaultProfile() }\n    });\n  };\n\n  get state() {\n    if (!this.hasOwnProperty(STORE_STATE_CACHE_KEY)) {\n      this[STORE_STATE_CACHE_KEY] = JSON.parse(localStorage.getItem(LOCAL_STORE_KEY));\n    }\n\n    return this[STORE_STATE_CACHE_KEY];\n  }\n\n  get credentialsAccountId() {\n    if (this.state.credentials.token) {\n      return jwtDecode(this.state.credentials.token).sub;\n    } else {\n      return null;\n    }\n  }\n\n  resetConfirmedDiscordRooms() {\n    // merge causing us some annoyance here :(\n    const overwriteMerge = (destinationArray, sourceArray) => sourceArray;\n    this.update({ confirmedDiscordRooms: [] }, { arrayMerge: overwriteMerge });\n  }\n\n  resetTipActivityFlags() {\n    this.update({ activity: { hasRotated: false, hasPinned: false, hasRecentered: false, hasScaled: false } });\n  }\n\n  update(newState, mergeOpts) {\n    const finalState = merge(this.state, newState, mergeOpts);\n    const { valid } = validator.validate(finalState, SCHEMA);\n\n    if (!valid) {\n      // Intentionally not including details about the state or validation result here, since we don't want to leak\n      // sensitive data in the error message.\n      throw new Error(`Write to store failed schema validation.`);\n    }\n\n    localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify(finalState));\n    delete this[STORE_STATE_CACHE_KEY];\n\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    return finalState;\n  }\n}\n","export const avatars = [\n  {\n    id: \"botdefault\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotDefault_Avatar-9f71f8ff22.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botdefault-thumb-42C4C7D3C01D085EAFDAC8BACE591CE6.png\"\n  },\n  {\n    id: \"botbobo\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotBobo_Avatar-f9740a010b.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botbobo-thumb-261278FD5831E9CD89610D15948F23E4.png\"\n  },\n  {\n    id: \"botdom\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotDom_Avatar-0c48bf15a5.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botdom-thumb-1160EB5E81D24F12CE643C520CE1E99E.png\"\n  },\n  {\n    id: \"botgreg\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotGreg_Avatar-98d39797bb.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botgreg-thumb-F2A37F14F9C342EE44DDE9B24DD9B9FC.png\"\n  },\n  {\n    id: \"botguest\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotGuest_Avatar-78cd857332.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botguest-thumb-F7A471250E2C10C2709325C3B02A8BBB.png\"\n  },\n  {\n    id: \"botjim\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotJim_Avatar-d28005a687.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botjim-thumb-A2D195C1A51A082BCED58BD172481B39.png\"\n  },\n  {\n    id: \"botkev\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotKev_Avatar-a95787bb51.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botkev-thumb-90746A7349E3F964C913EA612EE9A53F.png\"\n  },\n  {\n    id: \"botpinky\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotPinky_Avatar-b0b93f8675.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botpinky-thumb-C2E69D4479077766B988DC3EE4F30BE5.png\"\n  },\n  {\n    id: \"botrobert\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotRobert_Avatar-e9554880f3.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botrobert-thumb-9C33F2C752326E2CF4321EAA7BDB4E47.png\"\n  },\n  {\n    id: \"botwoody\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotWoody_Avatar-0140485a23.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botwoody-thumb-F1F1FA7E21301B5AC1D8872B4ED0CC56.png\"\n  }\n];\n","import Raven from \"raven-js\";\n\nconst ga = window.ga;\n\nexport default function registerTelemetry(trackedPage, trackedTitle) {\n  const sentryDsn = process.env.SENTRY_DSN;\n  const gaTrackingId = process.env.GA_TRACKING_ID;\n\n  if (sentryDsn) {\n    console.log(\"Tracking: Sentry DSN: \" + sentryDsn);\n    Raven.config(sentryDsn).install();\n  }\n\n  if (ga && gaTrackingId) {\n    console.log(\"Tracking: Google Analytics ID: \" + gaTrackingId);\n\n    ga(\"create\", gaTrackingId, \"auto\");\n\n    if (trackedPage) {\n      ga(\"set\", \"page\", trackedPage);\n    }\n\n    if (trackedTitle) {\n      ga(\"set\", \"title\", trackedTitle);\n    }\n\n    ga(\"send\", \"pageview\");\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport const ReactAudioContext = React.createContext({});\n\nexport const hudHoverSound = \"play_sound-hud_hover_start\";\n\nexport const WithHoverSound = ({ sound, children }) => {\n  return (\n    <ReactAudioContext.Consumer>\n      {context => {\n        return React.cloneElement(children, {\n          onMouseEnter: e => {\n            if (context && context.playSound) {\n              context.playSound(sound || hudHoverSound);\n            }\n            children.props.onMouseEnter && children.props.onMouseEnter(e);\n          }\n        });\n      }}\n    </ReactAudioContext.Consumer>\n  );\n};\n\nWithHoverSound.propTypes = {\n  children: PropTypes.object,\n  sound: PropTypes.string\n};\n","module.exports = __webpack_public_path__ + \"assets/images/generic_vr_headset-6cb5c6205420ac7e9c3ca3e0c0a6db2c.svg\";"],"sourceRoot":""}