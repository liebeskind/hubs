{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/utils/history.js","webpack:///./src/storage/media-search-store.js","webpack:///./src/assets/sfx/tick.mp3","webpack:///./src/utils/promisify-worker.js","webpack:///./src/react-components/create-room-dialog.js","webpack:///./src/react-components/scene-ui.js","webpack:///./src/scene.js","webpack:///./src/constants.js","webpack:///./src/materials/MobileStandardMaterial.js","webpack:///./src/components/gltf-model-plus.js","webpack:///./src/utils/phoenix-utils.js","webpack:///./src/utils/scene-graph.js","webpack:///./src/utils/media-highlight-frag.glsl","webpack:///./src/assets/images/cubemap/posx.jpg","webpack:///./src/assets/images/cubemap/negx.jpg","webpack:///./src/assets/images/cubemap/posy.jpg","webpack:///./src/assets/images/cubemap/negy.jpg","webpack:///./src/assets/images/cubemap/posz.jpg","webpack:///./src/assets/images/cubemap/negz.jpg","webpack:///./src/App.js","webpack:///./src/components/environment-map.js","webpack:///./src/assets/stylesheets/scene.scss","webpack:///./src/assets/stylesheets/scene-ui.scss","webpack:///./src/systems/userinput/paths.js","webpack:///./src/systems/sound-effects-system.js","webpack:///./src/utils/auto-box-collider.js","webpack:///./src/utils/webgl.js","webpack:///./src/utils/disable-ios-zoom.js","webpack:///./src/react-components/dialog-container.js","webpack:///./src/utils/animation.js","webpack:///./src/utils/logging.js","webpack:///./src/components/animation.js","webpack:///./src/components/animation-mixer.js","webpack:///./src/components/audio-feedback.js","webpack:///./src/components/loop-animation.js","webpack:///./src/components/skybox.js","webpack:///./src/utils/qs_truthy.js","webpack:///./src/utils/i18n.js","webpack:///./src/utils/component-mappings.js","webpack:///./src/gltf-component-mappings.js","webpack:///./src/assets/LoadingObject_Atom.glb","webpack:///./src/assets/sfx/teleport-loop.mp3","webpack:///./src/assets/sfx/quickTurn.mp3","webpack:///./src/assets/sfx/tap_mellow.mp3","webpack:///./src/assets/sfx/PenSpawn.mp3","webpack:///./src/assets/sfx/PenDraw1.mp3","webpack:///./src/assets/sfx/PicSnapHey.mp3","webpack:///./src/assets/sfx/welcome.mp3","webpack:///./src/assets/sfx/quack.mp3","webpack:///./src/assets/sfx/specialquack.mp3","webpack:///./src/assets/sfx/pop.mp3","webpack:///./src/assets/sfx/Eb_blip.mp3","webpack:///./src/assets/sfx/tack.mp3","webpack:///./src/assets/sfx/A_bendUp.mp3","webpack:///./src/assets/sfx/suspense.mp3","webpack:///./src/assets/waternormals.jpg","webpack:///./src/assets/images/hub-preview-white.png","webpack:///./src/utils/identity.js","webpack:///./src/storage/store.js","webpack:///./src/assets/avatars/avatars.js","webpack:///./src/utils/material-utils.js","webpack:///./src/utils/threejs-world-update.js","webpack:///./src/components/ambient-light.js","webpack:///./src/components/css-class.js","webpack:///./src/components/duck.js","webpack:///./src/components/heightfield.js","webpack:///./src/components/hemisphere-light.js","webpack:///./src/components/hide-when-quality.js","webpack:///./src/components/point-light.js","webpack:///./src/components/scene-preview-camera.js","webpack:///./src/object-types.js","webpack:///./src/components/spot-light.js","webpack:///./src/components/floaty-object.js","webpack:///./src/components/trigger-volume.js","webpack:///./src/components/video-pause-state.js","webpack:///./src/components/debug.js","webpack:///./src/systems/nav.js","webpack:///./src/components/event-repeater.js","webpack:///./src/telemetry.js","webpack:///./src/react-components/wrap-with-audio.js","webpack:///./src/utils/resizeShadowCameraFrustum.js","webpack:///./src/components/directional-light.js","webpack:///./src/components/layers.js","webpack:///./src/components/media-loader.js","webpack:///./src/components/quack.js","webpack:///./src/components/spawn-controller.js","webpack:///./src/components/super-spawner.js","webpack:///./src/utils/async-utils.js","webpack:///./src/components/water.js","webpack:///./src/utils/next-tick.js","webpack:///./src/utils/three-utils.js","webpack:///./src/utils/media-utils.js","webpack:///./src/assets/images/twitter.svg","webpack:///./src/assets/images/spoke_logo_black.png"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","9","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","pushOrUpdateHistory","history","replace","k","v","detail","newPathname","newSearch","state","newLength","location","__historyLength","_objectSpread","__duplicate","pathname","undefined","search","isDuplicate","method","pushHistoryState","replaceHistoryState","pushHistoryPath","path","clearHistoryState","popToBeginningOfHubHistory","navigateToPriorPage","len","Promise","resolve","unsubscribe","listen","go","sluglessPath","split","join","withSlug","SOURCES","URL_SOURCE_TO_TO_API_SOURCE","scenes","images","videos","youtube","gifs","sketchfab","poly","twitch","MEDIA_SOURCE_DEFAULT_FILTERS","SEARCH_CONTEXT_PARAMS","MediaSearchStore","EventTarget","constructor","super","_defineProperty","this","async","dispatchEvent","CustomEvent","urlSource","getUrlMediaSource","previousSource","urlParams","URLSearchParams","requestIndex","currentRequestIndex","searchParams","param","set","source","navigator","languages","singular","startsWith","APP","store","credentialsAccountId","url","getReticulumFetchUrl","toString","lastSavedUrl","_fetchMedia","nextCursor","meta","next_cursor","lastFetchedUrl","qsTruthy","entries","avatars","map","_legacyAvatarToSearchEntry","headers","Content-Type","credentialsToken","credentials","token","authorization","res","fetch","body","text","JSON","parse","e","legacyAvatar","id","type","preview","thumbnail","width","height","gltfs","avatar","model","delta","goBack","filter","query","delete","keepSource","keepNav","_stashedParams","_stashedSource","q","_sourceNavigate","hideNav","useLastStashedParams","currentQuery","getSearchClearedSearchParams","useValue","hasAccountWithAvatars","_hasAccountWithAvatars","process","document","host","substring","stashLastSearchParams","_stashLastSearchParams","hasMediaPath","setHistory","_update","promisifyWorker","worker","nextItemId","outstanding","onmessage","msg","err","handlers","console","error","reject","Error","transfer","promise","postMessage","payload","__webpack_exports__","HUB_NAME_PATTERN","CreateRoomDialog","Component","[object Object]","args","customRoomName","customSceneUrl","render","_this$props","props","onCustomScene","onClose","other","_objectWithoutProperties","react_default","a","createElement","dialog_container","_extends","title","includeScenePrompt","onSubmit","className","placeholder","pattern","onChange","setState","target","required","wrap_with_audio","PropTypes","bool","func","addLocaleData","en","SceneUI","scene_ui_defineProperty","showScreenshot","showCustomRoomDialog","createAndRedirectToNewHub","sceneId","setTimeout","sceneLoaded","componentDidMount","scene","addEventListener","onSceneLoaded","componentWillUnmount","removeEventListener","unavailable","index_es","locale","lang","messages","styles","ui","sceneUrl","protocol","tweetText","sceneName","tweetLink","encodeURIComponent","attributions","toAttributionSpan","includes","href","rel","author","sceneAttributions","extras","creator","content","classNames","screenshot","screenshotHidden","src","sceneScreenshotURL","whiteOverlay","grid","mainPanel","logo","hubLogo","logoTagline","createButtons","createButton","onClick","createRoom","optionsButton","react_fontawesome_index_es","icon","faEllipsisH","tweetButton","twitter_default","info","attribution","spoke","madeWith","spokeLogo","create_room_dialog_CreateRoomDialog","string","sceneDescription","log","BUILD_VERSION","patchWebGLRenderingContext","App","qs","isMobile","AFRAME","utils","device","isMobileVR","mountUI","ReactDOM","react_components_scene_ui","getElementById","quality","disableiOSZoom","querySelector","setAttribute","enabled","uiProps","remountUI","sceneRoot","sceneModelEntity","gltfEl","camera","previewCamera","object3D","getObjectByName","position","copy","rotation","matrixNeedsUpdate","sceneInfo","then","json","allow_promotion","registerTelemetry","modelUrl","model_url","useCache","inflate","emit","appendChild","description","screenshot_url","COLLISION_LAYERS","ALL","NONE","INTERACTABLES","ENVIRONMENT","AVATAR","HANDS","DEFAULT_INTERACTABLE","UNOWNED_INTERACTABLE","DEFAULT_SPAWNER","VERTEX_SHADER","FRAGMENT_SHADER","MobileStandardMaterial","THREE","ShaderMaterial","material","parameters","vertexShader","fragmentShader","uniforms","uvTransform","Matrix3","diffuse","color","opacity","aoMapIntensity","aoMap","emissive","emissiveMap","fog","lights","transparent","skinning","morphTargets","vertexColors","mobileMaterial","clone","fromStandardMaterial","loadGLTF","Mesh","raycast","acceleratedRaycast","GLTFCache","extractZipFile","SketchfabZipWorker","defaultInflator","el","componentName","componentData","components","multiple","Array","isArray","cloneSkinnedMesh","cloneLookup","Map","parallelTraverse","b","callback","children","sourceNode","clonedNode","isMesh","geometry","boundsTree","traverse","sourceMesh","isSkinnedMesh","sourceBones","skeleton","bones","clonedMesh","sourceBone","has","bindMatrix","getHubsComponents","node","hubsComponents","userData","gltfExtensions","MOZ_hubs_components","HUBS_components","legacyComponents","GLTFModelPlus","registerComponent","componentKey","inflator","inflateEntities","indexToEntityMap","templates","isRoot","modelToWorldScale","childEntities","child","entityComponents","append","uuid","classList","add","order","setFromQuaternion","quaternion","scale","multiplyScalar","matrixAutoUpdate","matrix","identity","decompose","setObject3D","toLowerCase","animations","parent","gltfIndex","attachTemplate","root","templateRoot","targetEls","querySelectorAll","cloneNode","_ref","attributes","contentType","preferredTechnique","onProgress","fileMap","gltfUrl","loadingManager","LoadingManager","setURLModifier","getCustomGLTFParserURLResolver","gltfLoader","GLTFLoader","parser","createParser","materials","extensions","MOZ_alt_materials","altMaterialIndex","nodes","gltf","Object3D","DefaultMatrixAutoUpdate","mapMaterials","isMeshStandardMaterial","keys","forEach","URL","revokeObjectURL","schema","default","init","loadTemplates","update","applySrc","templateEl","importNode","firstElementChild","getAttribute","technique","charAt","assetEl","lastSrc","inflatedEl","warn","disposeLastInflatedEl","loadModel","initMixer","obj","hasBufferGeometry","isBufferGeometry","hasBoundsTree","geo","triCount","index","count","MeshBVH","strategy","maxDepth","object3DToSet","nextTick","inflatedEntity","prop","inflateComponents","rewires","environmentMapComponent","sceneEl","applyEnvironmentMap","f","format","parentNode","removeChild","x","dispose","removeAttribute","invalidateReticulumMeta","getReticulumMeta","connectToReticulum","getLandingPageForPhoto","fetchReticulumAuthenticated","getPresenceProfileForSession","migrateChannelToSocket","absolute","reticulumMeta","invalidatedReticulumMetaThisSession","version","pool","phx_host","phxHostOverride","debug","params","getNewSocketUrl","socketProtocol","socketHost","socketPort","socketUrl","socketSettings","logger","kind","socket","Socket","connect","onError","endPointPath","endPoint","newEndPoint","photoUrl","parsedUrl","retUrl","content-type","stringify","createUrl","hub","scene_id","default_environment_gltf_bundle_url","Store","email","creatorAssignmentToken","creator_assignment_token","creatorAssignmentTokens","hubId","hub_id","presences","sessionId","presence","find","metas","profile","oldChannel","channel","topic","bindings","item","on","event","pushBuffer","timeout","oldJoinPush","joinPush","recHooks","receive","status","findAncestorWithComponent","entity","_storage_store__WEBPACK_IMPORTED_MODULE_0__","_storage_media_search_store__WEBPACK_IMPORTED_MODULE_1__","mediaSearchStore","setQuality","createDefaultEnvironmentMap","_utils_material_utils__WEBPACK_IMPORTED_MODULE_0__","_assets_images_cubemap_posx_jpg__WEBPACK_IMPORTED_MODULE_1__","_assets_images_cubemap_posx_jpg__WEBPACK_IMPORTED_MODULE_1___default","_assets_images_cubemap_negx_jpg__WEBPACK_IMPORTED_MODULE_2__","_assets_images_cubemap_negx_jpg__WEBPACK_IMPORTED_MODULE_2___default","_assets_images_cubemap_posy_jpg__WEBPACK_IMPORTED_MODULE_3__","_assets_images_cubemap_posy_jpg__WEBPACK_IMPORTED_MODULE_3___default","_assets_images_cubemap_negy_jpg__WEBPACK_IMPORTED_MODULE_4__","_assets_images_cubemap_negy_jpg__WEBPACK_IMPORTED_MODULE_4___default","_assets_images_cubemap_posz_jpg__WEBPACK_IMPORTED_MODULE_5__","_assets_images_cubemap_posz_jpg__WEBPACK_IMPORTED_MODULE_5___default","_assets_images_cubemap_negz_jpg__WEBPACK_IMPORTED_MODULE_6__","_assets_images_cubemap_negz_jpg__WEBPACK_IMPORTED_MODULE_6___default","urls","cubeMapPosX","cubeMapNegX","cubeMapPosY","cubeMapNegY","cubeMapPosZ","cubeMapNegZ","texture","CubeTextureLoader","load","RGBFormat","loadDefault","environmentMap","updateEnvironmentMap","forEachMaterial","envMap","needsUpdate","loading-text","loadingText","paths","actions","toggleScreenShare","snapRotateLeft","snapRotateRight","logDebugFrame","logInteractionState","cameraDelta","characterAcceleration","boost","startGazeTeleport","stopGazeTeleport","spawnPen","ensureFrozen","toggleFreeze","thaw","muteMic","focusChat","focusChatCommand","toggleCamera","takeSnapshot","mediaExit","mediaSearch1","mediaSearch2","mediaSearch3","mediaSearch4","mediaSearch5","mediaSearch6","mediaSearch7","mediaSearch8","transformModifier","rayObjectRotation","cursor","pose","grab","drop","modDelta","startDrawing","stopDrawing","undoDrawing","penNextColor","penPrevColor","scalePenTip","scaleGrabbedGrabbable","mediaVolumeMod","pen","remove","rightHand","startTeleport","stopTeleport","thumb","middleRingPinky","leftHand","exitMirror","haptics","actuators","left","right","mouse","coords","movementXY","buttonLeft","buttonRight","wheel","smartMouse","cursorPose","touchscreen","touchCameraDelta","gyroCameraDelta","pinch","initialDistance","currentDistance","isTouching","isTouchingGrabbable","tap1","tap2","tap3","tap4","tap5","gyro","averageDeltaX","averageDeltaY","hud","penButton","keyboard","gamepad","gamepadIndex","button","buttonIndex","pressed","touched","axis","axisIndex","xbox","buttonName","axisName","oculusgo","trigger","touchpad","axisX","axisY","gearVRController","daydream","rightOculusTouch","leftOculusTouch","side","axes","wmrController","wmr","grip","menu","joystick","vive","SOUND_HOVER_OR_GRAB","SOUND_THAW","SOUND_PEN_STOP_DRAW","SOUND_PEN_UNDO_DRAW","SOUND_PEN_CHANGE_COLOR","SOUND_TOGGLE_MIC","SOUND_TELEPORT_START","SOUND_TELEPORT_END","SOUND_SNAP_ROTATE","SOUND_SPAWN_PEN","SOUND_PEN_START_DRAW","SOUND_CAMERA_TOOL_TOOK_SNAPSHOT","SOUND_ENTER_SCENE","SOUND_QUACK","SOUND_SPECIAL_QUACK","SOUND_CHAT_MESSAGE","SOUND_FREEZE","SOUND_PIN","SOUND_MEDIA_LOADING","SOUND_MEDIA_LOADED","SoundEffectsSystem","_assets_sfx_tick_mp3__WEBPACK_IMPORTED_MODULE_0__","_assets_sfx_tick_mp3__WEBPACK_IMPORTED_MODULE_0___default","_assets_sfx_teleport_loop_mp3__WEBPACK_IMPORTED_MODULE_1__","_assets_sfx_teleport_loop_mp3__WEBPACK_IMPORTED_MODULE_1___default","_assets_sfx_quickTurn_mp3__WEBPACK_IMPORTED_MODULE_2__","_assets_sfx_quickTurn_mp3__WEBPACK_IMPORTED_MODULE_2___default","_assets_sfx_tap_mellow_mp3__WEBPACK_IMPORTED_MODULE_3__","_assets_sfx_tap_mellow_mp3__WEBPACK_IMPORTED_MODULE_3___default","_assets_sfx_PenSpawn_mp3__WEBPACK_IMPORTED_MODULE_4__","_assets_sfx_PenSpawn_mp3__WEBPACK_IMPORTED_MODULE_4___default","_assets_sfx_PenDraw1_mp3__WEBPACK_IMPORTED_MODULE_5__","_assets_sfx_PenDraw1_mp3__WEBPACK_IMPORTED_MODULE_5___default","_assets_sfx_PicSnapHey_mp3__WEBPACK_IMPORTED_MODULE_6__","_assets_sfx_PicSnapHey_mp3__WEBPACK_IMPORTED_MODULE_6___default","_assets_sfx_welcome_mp3__WEBPACK_IMPORTED_MODULE_7__","_assets_sfx_welcome_mp3__WEBPACK_IMPORTED_MODULE_7___default","_assets_sfx_quack_mp3__WEBPACK_IMPORTED_MODULE_8__","_assets_sfx_quack_mp3__WEBPACK_IMPORTED_MODULE_8___default","_assets_sfx_specialquack_mp3__WEBPACK_IMPORTED_MODULE_9__","_assets_sfx_specialquack_mp3__WEBPACK_IMPORTED_MODULE_9___default","_assets_sfx_pop_mp3__WEBPACK_IMPORTED_MODULE_10__","_assets_sfx_pop_mp3__WEBPACK_IMPORTED_MODULE_10___default","_assets_sfx_Eb_blip_mp3__WEBPACK_IMPORTED_MODULE_11__","_assets_sfx_Eb_blip_mp3__WEBPACK_IMPORTED_MODULE_11___default","_assets_sfx_tack_mp3__WEBPACK_IMPORTED_MODULE_12__","_assets_sfx_tack_mp3__WEBPACK_IMPORTED_MODULE_12___default","_assets_sfx_A_bendUp_mp3__WEBPACK_IMPORTED_MODULE_13__","_assets_sfx_A_bendUp_mp3__WEBPACK_IMPORTED_MODULE_13___default","_assets_sfx_suspense_mp3__WEBPACK_IMPORTED_MODULE_14__","_assets_sfx_suspense_mp3__WEBPACK_IMPORTED_MODULE_14___default","soundEnum","pendingEffects","audioContext","AudioContext","getContext","soundsAndUrls","URL_TICK","URL_TELEPORT_LOOP","URL_QUICK_TURN","URL_TAP_MELLOW","URL_PEN_SPAWN","URL_PEN_DRAW","URL_CAMERA_SNAPSHOT","URL_WELCOME","URL_QUACK","URL_SPECIAL_QUACK","URL_POP","URL_FREEZE","URL_TACK","URL_MEDIA_LOADING","URL_MEDIA_LOADED","loading","audioBufferPromise","arrayBuffer","decodeAudioData","sounds","sound","audioBuffer","enqueueSound","loop","createBufferSource","buffer","destination","playSoundOneShot","playSoundLooped","playSoundLoopedWithGain","gain","createGain","stopSoundNode","indexOf","stop","tick","start","getBox","getScaleCoefficient","computeObjectAABB","bounds","Box3","makeEmpty","boundingBox","computeBoundingBox","union","applyMatrix4","matrixWorld","Euler","boxRoot","box","updateMatrices","updateMatrixWorld","isEmpty","worldToLocal","min","max","matrixWorldNeedsUpdate","dX","Math","abs","dY","y","dZ","z","test","userAgent","originalGetExtension","WebGLRenderingContext","getExtension","supportsFloatTextures","renderer","WebGLRenderer","Scene","Float32Array","size","dataTexture","DataTexture","RGBAFormat","FloatType","PlaneBufferGeometry","MeshBasicMaterial","Camera","context","getError","checkFloatTextureSupport","detect_browser__WEBPACK_IMPORTED_MODULE_0__","detectOS","lastTouchAtMs","ev","preventDefault","now","Date","getTime","isDoubleTouch","DialogContainer","closable","currentTarget","onKeyDown","onContainerClicked","react__WEBPACK_IMPORTED_MODULE_0___default","wide","_wrap_with_audio__WEBPACK_IMPORTED_MODULE_3__","_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_5__","faTimes","isRequired","addAnimationComponents","modelEl","debug__WEBPACK_IMPORTED_MODULE_0__","debug__WEBPACK_IMPORTED_MODULE_0___default","_qs_truthy__WEBPACK_IMPORTED_MODULE_1__","isDebug","logFilter","enable","anime","require","animation","colorHelperFrom","Color","colorHelperTo","getComponentProperty","setComponentProperty","splitCache","TYPE_COLOR","STRING_COMPONENTS","STRING_OBJECT3D","toRadians","degToRad","addEventListeners","eventNames","handler","removeEventListeners","getRawProperty","splitDot","setRawProperty","propertyName","targetValue","g","isRawProperty","autoplay","delay","dir","dur","easing","elasticity","from","parseInt","startEvents","pauseEvents","resumeEvents","round","to","self","eventDetail","attrName","time","animationIsPlaying","onStartEvent","beginAnimation","pauseAnimation","resumeAnimation","fromColor","toColor","targets","targetsArray","updateConfigForDefault","updateConfigForRawColor","config","complete","oldData","direction","duration","createAndStartAnimation","dt","cancelDelayedStart","pause","paused","pausedWasPlaying","play","updateConfig","delayTimeout","stopRelatedAnimations","waitComponentInitRawProperty","setColorConfig","lastValue","anim","animatables","isBoolean","isNaN","parseFloat","aframeProperty","updateConfigForVector","coordinates","propType","component","getPropertyType","cb","wait","evt","clearTimeout","mixer","AnimationMixer","volume","prevVolume","smoothing","threshold","ctx","analyser","createAnalyser","fftSize","levels","Uint8Array","frequencyBinCount","soundSource","getByteTimeDomainData","sum","amplitude","currVolume","sqrt","minScale","maxScale","_playerCamera","_playerCameraWorldPosition","Vector3","_worldPosition","visible","audioAnalyser","setFromMatrixPosition","distance","distanceTo","setScalar","_utils_scene_graph__WEBPACK_IMPORTED_MODULE_0__","clip","mixerEl","updateClip","currentAction","clipName","action","clipAction","setLoop","LoopRepeat","Infinity","destroy","_utils_qs_truthy__WEBPACK_IMPORTED_MODULE_2__","isBotMode","Sky","shader","SkyShader","UniformsUtils","BackSide","BoxBufferGeometry","luminance","turbidity","rayleigh","mieCoefficient","mieDirectionalG","sunPosition","inclination","azimuth","sky","skyScene","cubeCamera","CubeCamera","requestAnimationFrame","theta","PI","phi","cos","sin","normalize","vrEnabled","vr","pmremGenerator","PMREMGenerator","renderTarget","pmremCubeUVPacker","PMREMCubeUVPacker","cubeLods","CubeUVRenderTarget","removeObject3D","val","_assets_translations_data_json__WEBPACK_IMPORTED_MODULE_0__","navigatorLang","language","userLanguage","localeData","getSanitizedComponentMapping","inputComponent","inputProperty","publicComponents","publicComponent","publicProperty","publicProperties","mappedComponent","mappedProperty","getMappedValue","PHYSICS_CONSTANTS","TYPE","SHAPE","FIT","decayMigration","range","decay","mediaInflator","isControlled","networked","hasVolume","templateName","controls","isHubsDestinationUrl","template","owner","persistent","networkId","mediaOptions","projection","videoPaused","autoPlay","audioType","hidePlaybackControls","distanceModel","rolloffFactor","refDistance","maxDistance","coneInnerAngle","coneOuterAngle","coneOuterGain","resize","fileIsOwned","animate","isHandCollisionTarget","cursorController","mass","STATIC","collisionFilterGroup","collisionFilterMask","castShadow","light","shadow","euler","orientation","Quaternion","setFromEuler","BOX","fit","MANUAL","offset","halfExtents","_componentName","nav","systems","zone","found","loadMesh","pageIndex","video","loop-animation","enterComponent","enterProperty","enterValue","leaveComponent","leaveProperty","leaveValue","enterComponentMapping","leaveComponentMapping","targetEntity","message","colliders","names","selectRandom","arr","floor","random","avatarIds","av","generateDefaultProfile","avatarId","LOCAL_STORE_KEY","STORE_STATE_CACHE_KEY","OAUTH_FLOW_CREDENTIALS_KEY","validator","Validator","SCHEMA","definitions","additionalProperties","properties","displayName","personalAvatarId","activity","hasFoundFreeze","hasChangedName","hasAcceptedProfile","lastEnteredAt","hasPinned","hasRotated","hasRecentered","hasScaled","hasHoveredInWorldHud","settings","lastUsedMicDeviceId","confirmedDiscordRooms","items","uploadPromotionTokens","fileId","promotionToken","$ref","localStorage","getItem","setItem","oauthFlowCredentials","Cookies","getJSON","resetToRandomLegacyAvatar","jwtDecode","sub","resetConfirmedDiscordRooms","arrayMerge","destinationArray","sourceArray","resetTipActivityFlags","newState","mergeOpts","finalState","merge","valid","validate","fn","zeroPos","zeroQuat","oneScale","Matrix4","bindingSetters","PropertyBinding","SetterByBindingTypeAndVersioning","Versioning","setter","MatrixWorldNeedsUpdate","arguments","targetObject","getWorldPosition","getWorldQuaternion","getWorldScale","handleMatrixModification","matrixIsModified","cachedMatrixWorld","updateMatrix","applyMatrix","forceLocalUpdate","forceWorldUpdate","skipParents","hasHadFirstMatrixUpdate","equals","childrenNeedMatrixWorldUpdate","multiplyMatrices","includeInvisible","forceChildrenWorldUpdate","lookAt","q1","m1","isVector3","isCamera","isLight","up","setFromRotationMatrix","extractRotation","premultiply","inverse","intensity","AmbientLight","registerLight","rendererSystem","prevData","applyColorCorrection","initialForce","maxForce","physicsSystem","physics","hasBody","CANNON","Vec3","force","initialScale","addComponent","removeComponent","beforeStep","NAF","isMine","currentScale","angle","applyForce","generateAndAddHeightfield","shape","setFromAxisAngle","mult","cannonOffset","Heightfield","elementSize","addShape","skyColor","groundColor","HemisphereLight","onQualityChanged","updateComponentState","shadowMapResolution","shadowBias","shadowRadius","PointLight","bias","radius","prevWidth","prevHeight","mapSize","lerp","end","newRot","positionOnly","startPoint","startRotation","targetPoint","targetRotDelta","targetRotation","startTime","performance","backwards","ranOnePass","fromRot","toRot","slerp","ObjectContentOrigins","ObjectTypes","objectTypeForOriginAndContentType","FILE","CLIPBOARD","SPAWNER","URL_IMAGE","URL_VIDEO","URL_MODEL","URL_PDF","URL_AUDIO","FILE_IMAGE","FILE_VIDEO","FILE_MODEL","FILE_PDF","FILE_AUDIO","CLIPBOARD_IMAGE","CLIPBOARD_VIDEO","CLIPBOARD_MODEL","CLIPBOARD_PDF","CLIPBOARD_AUDIO","SPAWNER_IMAGE","SPAWNER_VIDEO","SPAWNER_MODEL","SPAWNER_PDF","SPAWNER_AUDIO","CAMERA","UNKNOWN","objectTypeForOrigin","contentOrigin","urlType","fileType","clipboardType","spawnerType","objectTypeMimePrefixLookupMap","image/","model/","application/x-zip-compressed","video/","application/vnd.apple.mpegurl","application/x-mpegurl","audio/","application/pdf","srcSuffixLookupMap",".m3u8","prefix","suffix","endsWith","innerConeAngle","outerConeAngle","SpotLight","penumbra","autoLockOnLoad","autoLockOnRelease","modifyGravityOnRelease","releaseGravity","reduceAngularFloat","gravitySpeedLimit","onGrab","onRelease","ammoBody","isHeld","interaction","wasHeld","_makeStaticWhenAtRest","linearThreshold","linearSleepingThreshold","angularThreshold","angularSleepingThreshold","isAtRest","getLinearVelocity","length2","getAngularVelocity","hasBeenHereBefore","_onBodyLoaded","once","setLocked","locked","getVelocity","gravity","angularDamping","linearDamping","stuckTo","_unstickObject","sizeVec","boundingBoxWorldPositionVec","colliderWorldPositionVec","collidingLastFrame","setFromCenterAndSize","isColliding","containsPoint","onPauseStateChange","videoComponent","onVideoLoaded","togglePlaying","origDispatch","firstObject","Pathfinding","registerSystem","pathfinder","mesh","Geometry","fromBufferGeometry","setZoneData","createZone","eventSource","events","eventListeners","_handleEvent","raven_js__WEBPACK_IMPORTED_MODULE_0__","raven_js__WEBPACK_IMPORTED_MODULE_0___default","ga","trackedPage","trackedTitle","sentryDsn","SENTRY_DSN","gaTrackingId","GA_TRACKING_ID","Raven","install","ReactAudioContext","WithHoverSound","react__WEBPACK_IMPORTED_MODULE_0__","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","React","createContext","Consumer","cloneElement","onMouseEnter","playSound","propTypes","frustumBox","inverseLightMatrixWorld","tempBox","FRUSTUM_PADDING","NEAR_CLIPPING_PLANE","FAR_CLIPPING_PLANE","verts","DirectionalLight","getInverse","expandByPoint","bottom","top","near","far","updateProjectionMatrix","resizeShadowCameraFrustum","Layers","reflection","inWorldHud","exclusive","layers","mask","layer","oldValue","newValue","disable","loadingObject","loadingObjectSrc","showLoader","clearLoadingTimeout","onMediaLoaded","getNetworkedEntity","networkedEl","updateScale","center","getObject3D","scaleCoefficient","addVectors","removeShape","loaderMixer","loadingSoundNode","soundEffectsSystem","object3DMap","useFancyLoader","BoxGeometry","loadingClip","loadingScaleClip","AnimationClip","VectorKeyframeTrack","is","showLoaderTimeout","updateHoverableVisuals","hoverableVisuals","injectedCustomShaderChunks","injectCustomShaderChunks","setFromObject","getBoundingSphere","boundingSphere","physicsShape","finish","minHalfExtent","pager","repositionToolbar","addMeshScaleAnimation","onComplete","canonicalUrl","accessibleUrl","resolveUrl","origin","expected_content_type","proxiedUrlFor","guessContentType","fetchContentType","raw","isHLS","qsTime","hash","assign","dirs","HULL","mayChangeScene","permissions","can","isHubsRoomUrl","isHubsSceneUrl","toolbar","imageSrc","onNext","onPrev","_ensureUI","hasSetupUI","maxIndex","fetchMaxContentIndex","nextButton","prevButton","pageLabel","pageSrc","takeOwnership","quackPercentage","specialQuackPercentage","_handleGrabStart","rand","playerHeight","loadedEvent","moveToSpawnPoint","spawnPoints","spawnPoint","getLastWorldPosition","useCustomSpawnPosition","spawnPosition","useCustomSpawnRotation","spawnRotation","useCustomSpawnScale","spawnScale","spawnCooldown","centerSpawnedObject","spawnEvent","animateFromCursor","cooldownTimeout","handPosition","onSpawnEvent","tempSpawnHandPosition","addMedia","userinput","willAnimateFromCursor","eventName","eventObj","rightRemote","held","spawning","activateCooldown","syncToPhysics","sx","sy","sz","MobileWater","options","normalSampler","waterNormals","sunDirection","sunColor","waterColor","eye","distortionScale","FrontSide","mirrorShader","UniformsLib","ShaderChunk","Water","speed","forceMobile","waterMesh","waterGeometry","TextureLoader","wrapS","wrapT","RepeatWrapping","loadWaterNormals","waterNormalMap","waterConfig","textureWidth","textureHeight","water","mirrorCamera","setStyle","disposeNode","disposeMaterial","mtrl","lightMap","bumpMap","normalMap","specularMap","materialArray","MeshFaceMaterial","MultiMaterial","scaledThumbnailUrlFor","upload","getPromotionTokenForFile","traverseMeshesAndAddShapes","spawnMediaAround","_object_types__WEBPACK_IMPORTED_MODULE_0__","_phoenix_utils__WEBPACK_IMPORTED_MODULE_1__","_media_highlight_frag_glsl__WEBPACK_IMPORTED_MODULE_2__","_media_highlight_frag_glsl__WEBPACK_IMPORTED_MODULE_2___default","_material_utils__WEBPACK_IMPORTED_MODULE_3__","nonCorsProxyDomains","CORS_PROXY_SERVER","mediaAPIEndpoint","commonKnownContentTypes","glb","png","jpg","jpeg","pdf","mp4","mp3","farsparkEncodeUrl","str","btoa","_","p1","String","fromCharCode","b64EncodeUnicode","hasIndex","domain","hostname","resolveUrlCache","cacheKey","resolved","media","corsProxyPrefix","originalUrlParts","decodeURIComponent","extension","pop","file","formData","FormData","interactableId","needsToBeUploaded","File","fireLoadingTimeout","reader","FileReader","onload","view","DataView","getUint16","byteLength","marker","getUint32","little","tags","readAsArrayBuffer","getOrientation","response","srcUrl","access_token","file_id","promotion_token","catch","MediaStream","clientId","objectType","vertexRegex","fragRegex","validMaterials","shaderUniforms","contains","newMaterial","onBeforeCompile","hubs_IsFrozen","hubs_EnableSweepingEffect","hubs_SweepParams","hubs_InteractorOnePos","hubs_InteractorTwoPos","hubs_HighlightInteractorOne","hubs_HighlightInteractorTwo","hubs_Time","vlines","vindex","findIndex","line","unshift","flines","findex","mediaHighlightFrag","shapes","meshRoot","vertexCount","__proto__","group","floorPlan","MESH","margin","shapePrefix","groupEnd","mediaPos","snapCount","mirrorOrientation","pos","rotateY","idx","localToWorld","hubsSceneRegex","hubsRoomRegex"],"mappings":"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","file":"assets/js/scene-720ed1015be80c9a4378.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t9: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([1462,1,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","// Utilities for manipulating state history. This provides a number of functions which\n// need to be used to manipulate history state so we can deal with edge cases around\n// entry back button and refreshes once entered.\n//\n// These functions also transparently deal with the room slug, so incoming calls can ignore\n// dealing with it, and provides APIs for getting the non-slug part of the path.\n//\n// The slug cannot be part of the basename for history, because the slug changes intra-session\n// if the room is renamed.\n\n// This pushes/replaces a new k, v pair into the history, while maintaining all the other\n// keys, or clears state if k if null.\n//\n// Also maintains a length key that can be used to find the length of the history chain\n// (across refreshes) for the current room.\nfunction pushOrUpdateHistory(history, replace, k, v, detail, newPathname, newSearch) {\n  let state = {};\n  const newLength = ((history.location.state && history.location.state.__historyLength) || 0) + (replace ? 0 : 1);\n\n  if (k || newPathname || newSearch) {\n    state = history.location.state ? { ...history.location.state } : {};\n    delete state.__duplicate;\n\n    if (k) {\n      state[k] = v;\n      state.key = k;\n      state.value = v;\n      state.detail = detail;\n    }\n  }\n\n  const pathname =\n    newPathname !== undefined ? newPathname : history.location.pathname === \"/\" ? \"\" : history.location.pathname;\n\n  const search = newSearch !== undefined ? newSearch : history.location.search;\n\n  // If popToBeginningOfHubHistory was previously used, there is a duplicate entry\n  // at the top of the history stack (which was needed to wipe out forward history)\n  // so we use this opportunity to replace it.\n  const isDuplicate = history.location.state && history.location.state.__duplicate;\n  const method = replace || isDuplicate ? history.replace : history.push;\n  state.__historyLength = newLength;\n\n  method({ pathname, search, state });\n}\n\nexport function pushHistoryState(history, k, v, detail) {\n  pushOrUpdateHistory(history, false, k, v, detail);\n}\n\nexport function replaceHistoryState(history, k, v, detail) {\n  pushOrUpdateHistory(history, true, k, v, detail);\n}\n\nexport function pushHistoryPath(history, path, search) {\n  pushOrUpdateHistory(history, false, null, null, null, path, search);\n}\n\nexport function clearHistoryState(history) {\n  pushOrUpdateHistory(history, false);\n}\n\n// This will pop the browser history to the first entry that was for this hubs room,\n// and then push a duplicate entry onto the history stack in order to wipe out forward\n// history.\nexport function popToBeginningOfHubHistory(history, navigateToPriorPage) {\n  if (!history.location.state || history.location.state.__historyLength === undefined) return;\n\n  const len = history.location.state.__historyLength;\n  if (len === 0) return;\n\n  return new Promise(resolve => {\n    // After the go() completes, we push a duplicate history entry onto the stack\n    // in order to wipe out forward history. We also optionally go back -2 if we wanted\n    // to go back to the prior page.\n    const unsubscribe = history.listen(() => {\n      unsubscribe();\n      history.push({\n        pathname: history.location.pathname,\n        search: history.location.search,\n        state: { __historyLength: 0, __duplicate: true }\n      });\n      if (navigateToPriorPage) history.go(-2); // Go back to history entry before beginning.\n      resolve();\n    });\n\n    history.go(-len);\n  });\n}\n\n// This will pop the browser history to the entry before the first entry for this hubs room.\nexport function navigateToPriorPage(history) {\n  popToBeginningOfHubHistory(history, true);\n}\n\n// Returns the part of the pathname that does not include the slug\nexport function sluglessPath(location) {\n  const parts = location.pathname.split(\"/\");\n  return `/${parts.slice(2).join(\"/\")}`;\n}\n\n// Returns a new path that includes the current slug as a prefix to the\n// provided path.\nexport function withSlug(location, path) {\n  const parts = location.pathname.split(\"/\");\n  return `/${parts[1]}${path}`;\n}\n","import { EventTarget } from \"event-target-shim\";\nimport { getReticulumFetchUrl } from \"../utils/phoenix-utils\";\nimport { pushHistoryPath, sluglessPath, withSlug } from \"../utils/history\";\nimport { avatars } from \"../assets/avatars/avatars\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\nexport const SOURCES = [\"videos\", \"sketchfab\", \"poly\", \"scenes\", \"gifs\", \"images\", \"twitch\"];\n\nconst URL_SOURCE_TO_TO_API_SOURCE = {\n  scenes: \"scene_listings\",\n  images: \"bing_images\",\n  videos: \"bing_videos\",\n  youtube: \"youtube_videos\",\n  gifs: \"tenor\",\n  sketchfab: \"sketchfab\",\n  poly: \"poly\",\n  twitch: \"twitch\"\n};\n\nexport const MEDIA_SOURCE_DEFAULT_FILTERS = {\n  gifs: \"trending\",\n  sketchfab: \"featured\",\n  scenes: \"featured\"\n};\n\nconst SEARCH_CONTEXT_PARAMS = [\"q\", \"filter\", \"cursor\"];\n\n// This class is responsible for fetching and storing media search results and provides a\n// convenience API for performing history updates relevant to search navigation.\nexport default class MediaSearchStore extends EventTarget {\n  constructor() {\n    super();\n\n    this.requestIndex = 0;\n  }\n\n  setHistory(history) {\n    this.history = history;\n\n    this._update(this.history.location);\n\n    this.history.listen(location => {\n      this._update(location);\n    });\n  }\n\n  _update = async location => {\n    this.result = null;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    const urlSource = this.getUrlMediaSource(location);\n    if (!urlSource) return;\n\n    if (!this.previousSource || this.previousSource !== urlSource) {\n      this.dispatchEvent(new CustomEvent(\"sourcechanged\"));\n      this.previousSource = urlSource;\n    }\n\n    const urlParams = new URLSearchParams(location.search);\n\n    this.requestIndex++;\n    const currentRequestIndex = this.requestIndex;\n    const searchParams = new URLSearchParams();\n\n    for (const param of SEARCH_CONTEXT_PARAMS) {\n      if (!urlParams.get(param)) continue;\n      searchParams.set(param, urlParams.get(param));\n    }\n\n    searchParams.get(\"locale\", navigator.languages[0]);\n\n    let source;\n    if (urlSource === \"avatars\" || urlSource === \"scenes\") {\n      // Avatars + scenes are special since we request them from a different source based on the facet.\n      const singular = urlSource === \"avatars\" ? \"avatar\" : \"scene\";\n      const filter = new URLSearchParams(location.search);\n      source = filter.get(\"filter\").startsWith(\"my-\") ? `${singular}s` : `${singular}_listings`;\n    } else {\n      source = URL_SOURCE_TO_TO_API_SOURCE[urlSource];\n    }\n    searchParams.set(\"source\", source);\n\n    if (source === \"avatars\" || source === \"scenes\") {\n      searchParams.set(\"user\", window.APP.store.credentialsAccountId);\n    }\n\n    const url = getReticulumFetchUrl(`/api/v1/media/search?${searchParams.toString()}`);\n    if (this.lastSavedUrl === url) return;\n\n    const result = await this._fetchMedia(url, source);\n\n    if (this.requestIndex != currentRequestIndex) return;\n\n    this.result = result;\n    this.nextCursor = this.result.meta && this.result.meta.next_cursor;\n    this.lastFetchedUrl = url;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n  };\n\n  _fetchMedia = async (url, source) => {\n    if (source === \"avatar_listings\" && !qsTruthy(\"use_avatar_listings\")) {\n      // Use our legacy avatars until we are ready with real featured avatars.\n      return { entries: avatars.map(this._legacyAvatarToSearchEntry) };\n    }\n\n    const headers = { \"Content-Type\": \"application/json\" };\n    const credentialsToken = window.APP.store.state.credentials.token;\n    if (credentialsToken) headers.authorization = `bearer ${credentialsToken}`;\n\n    const res = await fetch(url, { method: \"GET\", headers });\n    const body = await res.text();\n\n    let result;\n    try {\n      result = JSON.parse(body);\n    } catch (e) {\n      result = body;\n    }\n\n    return result;\n  };\n\n  _legacyAvatarToSearchEntry = legacyAvatar => {\n    return {\n      id: legacyAvatar.id,\n      type: \"avatar_listing\",\n      url: legacyAvatar.url,\n      images: { preview: { url: legacyAvatar.thumbnail, width: 720, height: 1280 } },\n      gltfs: { avatar: legacyAvatar.model }\n    };\n  };\n\n  pageNavigate = delta => {\n    if (delta === -1) {\n      this.history.goBack();\n    } else {\n      const location = this.history.location;\n      const searchParams = new URLSearchParams(location.search);\n      searchParams.set(\"cursor\", this.nextCursor);\n      pushHistoryPath(this.history, location.pathname, searchParams.toString());\n    }\n  };\n\n  filterQueryNavigate = (filter, query) => {\n    const location = this.history.location;\n    const searchParams = new URLSearchParams(location.search);\n\n    if (query) {\n      searchParams.set(\"q\", query);\n    } else {\n      searchParams.delete(\"q\");\n    }\n\n    if (filter) {\n      searchParams.set(\"filter\", filter);\n    } else {\n      searchParams.delete(\"filter\");\n    }\n\n    if (filter) {\n      searchParams.set(\"cursor\", filter);\n    } else {\n      searchParams.delete(\"cursor\");\n    }\n\n    pushHistoryPath(this.history, location.pathname, searchParams.toString());\n  };\n\n  getSearchClearedSearchParams = (location, keepSource, keepNav) => {\n    const searchParams = new URLSearchParams(location.search);\n\n    // Strip browsing query params\n    searchParams.delete(\"q\");\n    searchParams.delete(\"filter\");\n    searchParams.delete(\"cursor\");\n\n    if (!keepNav) {\n      searchParams.delete(\"media_nav\");\n    }\n\n    if (!keepSource) {\n      searchParams.delete(\"media_source\");\n    }\n\n    return searchParams;\n  };\n\n  _stashLastSearchParams = location => {\n    const searchParams = new URLSearchParams(location.search);\n    this._stashedParams = {};\n    this._stashedSource = this.getUrlMediaSource(location);\n\n    for (const param of SEARCH_CONTEXT_PARAMS) {\n      const value = searchParams.get(param);\n\n      if (value) {\n        this._stashedParams[param] = value;\n      }\n    }\n  };\n\n  clearStashedQuery = () => {\n    if (!this._stashedParams) return;\n    delete this._stashedParams.q;\n  };\n\n  sourceNavigate = source => {\n    this._sourceNavigate(source, false, true);\n  };\n\n  sourceNavigateToDefaultSource = () => {\n    this._sourceNavigate(this._stashedSource ? this._stashedSource : SOURCES[0], false, true);\n  };\n\n  sourceNavigateWithNoNav = source => {\n    this._sourceNavigate(source, true, false);\n  };\n\n  _sourceNavigate = async (source, hideNav, useLastStashedParams) => {\n    const currentQuery = new URLSearchParams(this.history.location.search).get(\"q\");\n    const searchParams = this.getSearchClearedSearchParams(this.history.location);\n\n    if (currentQuery) {\n      searchParams.set(\"q\", currentQuery);\n    } else {\n      if (useLastStashedParams && this._stashedParams) {\n        for (const param of SEARCH_CONTEXT_PARAMS) {\n          const value = this._stashedParams[param];\n\n          // Only q param is compatible across sources, so keep it if is stashed.\n          const useValue = param === \"q\" || this._stashedSource === source;\n\n          if (value && useValue) {\n            searchParams.set(param, value);\n          }\n        }\n      } else {\n        if (source === \"avatars\") {\n          const hasAccountWithAvatars = await this._hasAccountWithAvatars();\n          searchParams.set(\"filter\", hasAccountWithAvatars ? \"my-avatars\" : \"featured\");\n        } else if (MEDIA_SOURCE_DEFAULT_FILTERS[source]) {\n          searchParams.set(\"filter\", MEDIA_SOURCE_DEFAULT_FILTERS[source]);\n        }\n      }\n    }\n\n    this._stashedParams = null;\n    this._stashedSource = null;\n\n    if (hideNav) {\n      searchParams.set(\"media_nav\", \"false\");\n    }\n\n    if (process.env.RETICULUM_SERVER && document.location.host !== process.env.RETICULUM_SERVER) {\n      searchParams.set(\"media_source\", source);\n      pushHistoryPath(this.history, this.history.location.pathname, searchParams.toString());\n    } else {\n      pushHistoryPath(this.history, withSlug(this.history.location, `/media/${source}`), searchParams.toString());\n    }\n  };\n\n  _hasAccountWithAvatars = async () => {\n    const { credentialsAccountId } = window.APP.store;\n    if (!credentialsAccountId) return false;\n\n    const searchParams = new URLSearchParams();\n    const source = \"avatars\";\n    searchParams.set(\"source\", source);\n    searchParams.set(\"user\", credentialsAccountId);\n    const url = getReticulumFetchUrl(`/api/v1/media/search?${searchParams.toString()}`);\n    const result = await this._fetchMedia(url, source);\n    return !!(result && result.entries) && result.entries.length > 0;\n  };\n\n  getUrlMediaSource = location => {\n    const { search } = location;\n    const urlParams = new URLSearchParams(search);\n    const pathname = sluglessPath(location);\n\n    if (!pathname.startsWith(\"/media\") && !urlParams.get(\"media_source\")) return null;\n    return urlParams.get(\"media_source\") || pathname.substring(7);\n  };\n\n  pushExitMediaBrowserHistory = (history, stashLastSearchParams = true) => {\n    if (!history) history = this.history;\n\n    if (stashLastSearchParams) this._stashLastSearchParams(history.location);\n\n    const { pathname } = history.location;\n    const hasMediaPath = sluglessPath(history.location).startsWith(\"/media\");\n    pushHistoryPath(\n      history,\n      hasMediaPath ? withSlug(history.location, \"/\") : pathname,\n      this.getSearchClearedSearchParams(history.location).toString()\n    );\n    this.dispatchEvent(new CustomEvent(\"media-exit\"));\n  };\n}\n","module.exports = __webpack_public_path__ + \"assets/sfx/tick-b0fcbf1d9b6f92a24bec12f9bae1e42a.mp3\";","// Wrapper for a worker which accepts work items and responds with results.\n//\n// The worker must receive messages with data of the shape { id, payload }, and then respond\n// with messages containing matching IDs of the shape { id, result, err }.\n//\n// Returns a function that accepts a work item, sends it to the worker, and returns a promise that\n// will resolve with the result or reject with the error.\n//\nexport function promisifyWorker(worker) {\n  let nextItemId = 0;\n  const outstanding = {}; // item ID: { resolve, reject }\n\n  worker.onmessage = msg => {\n    const { id, result, err } = msg.data;\n    const handlers = outstanding[id];\n    if (handlers == null) {\n      console.error(`Unknown message with ID ${id} received from ${worker}.`);\n    } else {\n      delete outstanding[id];\n      if (err != null) {\n        handlers.reject(new Error(err));\n      } else {\n        handlers.resolve(result);\n      }\n    }\n  };\n\n  return function(data, transfer) {\n    const id = nextItemId++;\n    const promise = new Promise((resolve, reject) => {\n      outstanding[id] = { resolve, reject };\n    });\n    worker.postMessage({ id, payload: data }, transfer);\n    return promise;\n  };\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nconst HUB_NAME_PATTERN = \"^.{1,64}$\";\n\nexport default class CreateRoomDialog extends Component {\n  static propTypes = {\n    includeScenePrompt: PropTypes.bool,\n    onCustomScene: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  state = {\n    customRoomName: \"\",\n    customSceneUrl: \"\"\n  };\n\n  render() {\n    const { onCustomScene, onClose, ...other } = this.props;\n    const onCustomSceneClicked = () => {\n      onCustomScene(this.state.customRoomName, this.state.customSceneUrl);\n      onClose();\n    };\n\n    return (\n      <DialogContainer title=\"Create a Room\" onClose={onClose} {...other}>\n        <div>\n          {this.props.includeScenePrompt ? (\n            <div>Choose a name and GLTF URL for your room&apos;s scene:</div>\n          ) : (\n            <div>Choose a name for your room:</div>\n          )}\n\n          <form onSubmit={onCustomSceneClicked}>\n            <div className=\"custom-scene-form\">\n              <input\n                type=\"text\"\n                placeholder=\"Room name\"\n                className=\"custom-scene-form__link_field\"\n                value={this.state.customRoomName}\n                pattern={HUB_NAME_PATTERN}\n                title=\"Names must be at most 64 characters.\"\n                onChange={e => this.setState({ customRoomName: e.target.value })}\n                required\n              />\n              {this.props.includeScenePrompt && (\n                <input\n                  type=\"url\"\n                  placeholder=\"URL to Scene GLTF or GLB (Optional)\"\n                  className=\"custom-scene-form__link_field\"\n                  value={this.state.customSceneUrl}\n                  onChange={e => this.setState({ customSceneUrl: e.target.value })}\n                />\n              )}\n              <div className=\"custom-scene-form__buttons\">\n                <WithHoverSound>\n                  <button className=\"custom-scene-form__action-button\">\n                    <span>Create Room</span>\n                  </button>\n                </WithHoverSound>\n              </div>\n            </div>\n          </form>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { IntlProvider, FormattedMessage, addLocaleData } from \"react-intl\";\nimport en from \"react-intl/locale-data/en\";\nimport styles from \"../assets/stylesheets/scene-ui.scss\";\nimport hubLogo from \"../assets/images/hub-preview-white.png\";\nimport spokeLogo from \"../assets/images/spoke_logo_black.png\";\nimport { createAndRedirectToNewHub } from \"../utils/phoenix-utils\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport CreateRoomDialog from \"./create-room-dialog.js\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faEllipsisH } from \"@fortawesome/free-solid-svg-icons/faEllipsisH\";\n\nimport { lang, messages } from \"../utils/i18n\";\n\naddLocaleData([...en]);\n\nclass SceneUI extends Component {\n  static propTypes = {\n    scene: PropTypes.object,\n    sceneLoaded: PropTypes.bool,\n    sceneId: PropTypes.string,\n    sceneName: PropTypes.string,\n    sceneDescription: PropTypes.string,\n    sceneAttributions: PropTypes.object,\n    sceneScreenshotURL: PropTypes.string,\n    unavailable: PropTypes.bool\n  };\n\n  state = {\n    showScreenshot: false,\n    showCustomRoomDialog: false\n  };\n\n  constructor(props) {\n    super(props);\n\n    // Show screenshot if scene isn't loaded in 5 seconds\n    setTimeout(() => {\n      if (!this.props.sceneLoaded) {\n        this.setState({ showScreenshot: true });\n      }\n    }, 5000);\n  }\n\n  componentDidMount() {\n    this.props.scene.addEventListener(\"loaded\", this.onSceneLoaded);\n  }\n\n  componentWillUnmount() {\n    this.props.scene.removeEventListener(\"loaded\", this.onSceneLoaded);\n  }\n\n  createRoom = () => {\n    createAndRedirectToNewHub(this.state.customRoomName, this.props.sceneId);\n  };\n\n  render() {\n    if (this.props.unavailable) {\n      return (\n        <IntlProvider locale={lang} messages={messages}>\n          <div className={styles.ui}>\n            <div className={styles.unavailable}>\n              <div>\n                <FormattedMessage id=\"scene.unavailable\" />\n              </div>\n            </div>\n          </div>\n        </IntlProvider>\n      );\n    }\n\n    const sceneUrl = [location.protocol, \"//\", location.host, location.pathname].join(\"\");\n    const tweetText = `${this.props.sceneName} in #hubs`;\n    const tweetLink = `https://twitter.com/share?url=${encodeURIComponent(sceneUrl)}&text=${encodeURIComponent(\n      tweetText\n    )}`;\n\n    let attributions;\n\n    const toAttributionSpan = a => {\n      if (a.url) {\n        const source = a.url.includes(\"sketchfab.com\")\n          ? \"on Sketchfab\"\n          : a.url.includes(\"poly.google.com\")\n            ? \"on Google Poly\"\n            : \"\";\n\n        return (\n          <span key={a.url}>\n            <a href={a.url} target=\"_blank\" rel=\"noopener noreferrer\">\n              {a.name} by {a.author} {source}\n            </a>\n            &nbsp;\n          </span>\n        );\n      } else {\n        return (\n          <span key={`${a.name} ${a.author}`}>\n            {a.name} by {a.author}\n            &nbsp;\n          </span>\n        );\n      }\n    };\n\n    if (this.props.sceneAttributions) {\n      if (!this.props.sceneAttributions.extras) {\n        attributions = (\n          <span>\n            <span>{this.props.sceneAttributions.creator ? `by ${this.props.sceneAttributions.creator}` : \"\"}</span>\n            &nbsp;\n            <br />\n            {this.props.sceneAttributions.content && this.props.sceneAttributions.content.map(toAttributionSpan)}\n          </span>\n        );\n      } else {\n        // Legacy\n        attributions = <span>{this.props.sceneAttributions.extras}</span>;\n      }\n    }\n\n    return (\n      <IntlProvider locale={lang} messages={messages}>\n        <div className={styles.ui}>\n          <div\n            className={classNames({\n              [styles.screenshot]: true,\n              [styles.screenshotHidden]: this.props.sceneLoaded\n            })}\n          >\n            {this.state.showScreenshot && <img src={this.props.sceneScreenshotURL} />}\n          </div>\n          <div className={styles.whiteOverlay} />\n          <div className={styles.grid}>\n            <div className={styles.mainPanel}>\n              <WithHoverSound>\n                <a href=\"/\" className={styles.logo}>\n                  <img src={hubLogo} />\n                </a>\n              </WithHoverSound>\n              <div className={styles.logoTagline}>\n                <FormattedMessage id=\"scene.logo_tagline\" />\n              </div>\n              <div className={styles.createButtons}>\n                <WithHoverSound>\n                  <button className={styles.createButton} onClick={this.createRoom}>\n                    <FormattedMessage id=\"scene.create_button\" />\n                  </button>\n                </WithHoverSound>\n                <WithHoverSound>\n                  <button\n                    className={styles.optionsButton}\n                    onClick={() => this.setState({ showCustomRoomDialog: true })}\n                  >\n                    <FontAwesomeIcon icon={faEllipsisH} />\n                  </button>\n                </WithHoverSound>\n              </div>\n              <WithHoverSound>\n                <a href={tweetLink} rel=\"noopener noreferrer\" target=\"_blank\" className={styles.tweetButton}>\n                  <img src=\"../assets/images/twitter.svg\" />\n                  <div>\n                    <FormattedMessage id=\"scene.tweet_button\" />\n                  </div>\n                </a>\n              </WithHoverSound>\n            </div>\n          </div>\n          <div className={styles.info}>\n            <div className={styles.name}>{this.props.sceneName}</div>\n            <div className={styles.attribution}>{attributions}</div>\n          </div>\n          <div className={styles.spoke}>\n            <div className={styles.madeWith}>made with</div>\n            <a href=\"/spoke\">\n              <img src={spokeLogo} />\n            </a>\n          </div>\n          {this.state.showCustomRoomDialog && (\n            <CreateRoomDialog\n              includeScenePrompt={false}\n              onClose={() => this.setState({ showCustomRoomDialog: false })}\n              onCustomScene={name => {\n                this.setState({ showCustomRoomDialog: false, customRoomName: name }, () => this.createRoom());\n              }}\n            />\n          )}\n        </div>\n      </IntlProvider>\n    );\n  }\n}\n\nexport default SceneUI;\n","console.log(`Hubs version: ${process.env.BUILD_VERSION || \"?\"}`);\n\nimport \"./assets/stylesheets/scene.scss\";\n\nimport \"aframe\";\nimport \"./utils/logging\";\nimport \"./utils/threejs-world-update\";\nimport { patchWebGLRenderingContext } from \"./utils/webgl\";\npatchWebGLRenderingContext();\n\nimport \"three/examples/js/loaders/GLTFLoader\";\n\nimport \"./components/scene-components\";\nimport \"./components/debug\";\nimport \"./systems/nav\";\n\nimport { getReticulumFetchUrl } from \"./utils/phoenix-utils\";\n\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\nimport SceneUI from \"./react-components/scene-ui\";\nimport { disableiOSZoom } from \"./utils/disable-ios-zoom\";\n\nimport \"./gltf-component-mappings\";\n\nimport { App } from \"./App\";\n\nwindow.APP = new App();\n\nconst qs = new URLSearchParams(location.search);\nconst isMobile = AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR();\n\nwindow.APP.quality = qs.get(\"quality\") || isMobile ? \"low\" : \"high\";\n\nimport \"aframe-physics-system\";\nimport \"./components/event-repeater\";\n\nimport registerTelemetry from \"./telemetry\";\n\ndisableiOSZoom();\n\nfunction mountUI(scene, props = {}) {\n  ReactDOM.render(\n    <SceneUI\n      {...{\n        scene,\n        ...props\n      }}\n    />,\n    document.getElementById(\"ui-root\")\n  );\n}\n\nconst onReady = async () => {\n  const scene = document.querySelector(\"a-scene\");\n  window.APP.scene = scene;\n\n  const sceneId = qs.get(\"scene_id\") || document.location.pathname.substring(1).split(\"/\")[1];\n  console.log(`Scene ID: ${sceneId}`);\n\n  // Disable shadows on low quality\n  scene.setAttribute(\"shadow\", { enabled: window.APP.quality !== \"low\" });\n\n  let uiProps = { sceneId: sceneId };\n\n  mountUI(scene);\n\n  const remountUI = props => {\n    uiProps = { ...uiProps, ...props };\n    mountUI(scene, uiProps);\n  };\n\n  const sceneRoot = document.querySelector(\"#scene-root\");\n  const sceneModelEntity = document.createElement(\"a-entity\");\n  const gltfEl = document.createElement(\"a-entity\");\n  const camera = document.getElementById(\"camera\");\n\n  sceneModelEntity.addEventListener(\"scene-loaded\", () => {\n    remountUI({ sceneLoaded: true });\n    const previewCamera = gltfEl.object3D.getObjectByName(\"scene-preview-camera\");\n\n    if (previewCamera) {\n      camera.object3D.position.copy(previewCamera.position);\n      camera.object3D.rotation.copy(previewCamera.rotation);\n      camera.object3D.matrixNeedsUpdate = true;\n    }\n\n    camera.setAttribute(\"scene-preview-camera\", \"\");\n  });\n\n  const res = await fetch(getReticulumFetchUrl(`/api/v1/scenes/${sceneId}`)).then(r => r.json());\n  const sceneInfo = res.scenes[0];\n\n  // Delisted/Removed\n  if (!sceneInfo) {\n    remountUI({ unavailable: true });\n    return;\n  }\n\n  if (sceneInfo.allow_promotion) {\n    registerTelemetry(`/scene/${sceneId}`, `Hubs Scene: ${sceneInfo.title}`);\n  } else {\n    registerTelemetry(\"/scene\", \"Hubs Non-Promotable Scene Page\");\n  }\n\n  const modelUrl = sceneInfo.model_url;\n  console.log(`Scene Model URL: ${modelUrl}`);\n\n  gltfEl.setAttribute(\"gltf-model-plus\", { src: modelUrl, useCache: false, inflate: true });\n  gltfEl.addEventListener(\"model-loaded\", () => sceneModelEntity.emit(\"scene-loaded\"));\n  sceneModelEntity.appendChild(gltfEl);\n  sceneRoot.appendChild(sceneModelEntity);\n\n  remountUI({\n    sceneName: sceneInfo.name,\n    sceneDescription: sceneInfo.description,\n    sceneAttributions: sceneInfo.attributions,\n    sceneScreenshotURL: sceneInfo.screenshot_url\n  });\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", onReady);\n","module.exports = {\n  COLLISION_LAYERS: {\n    ALL: -1,\n    NONE: 0,\n    INTERACTABLES: 1,\n    ENVIRONMENT: 2,\n    AVATAR: 4,\n    HANDS: 8,\n    DEFAULT_INTERACTABLE: 1 | 2 | 4 | 8,\n    UNOWNED_INTERACTABLE: 1 | 8,\n    DEFAULT_SPAWNER: 1 | 8\n  }\n};\n","const VERTEX_SHADER = `\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n  #include <uv_vertex>\n  #include <uv2_vertex>\n  #include <color_vertex>\n  #include <skinbase_vertex>\n\n  #include <begin_vertex>\n  #include <morphtarget_vertex>\n  #include <skinning_vertex>\n  #include <project_vertex>\n  #include <logdepthbuf_vertex>\n\n  #include <worldpos_vertex>\n  #include <clipping_planes_vertex>\n  #include <fog_vertex>\n}\n`;\n\nconst FRAGMENT_SHADER = `\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <aomap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n  #include <clipping_planes_fragment>\n\n  vec4 diffuseColor = vec4(diffuse, opacity);\n  ReflectedLight reflectedLight = ReflectedLight(vec3(0.0), vec3(0.0), vec3(0.0), vec3(0.0));\n  vec3 totalEmissiveRadiance = emissive;\n\n  #include <logdepthbuf_fragment>\n  #include <map_fragment>\n  #include <color_fragment>\n  #include <alphatest_fragment>\n  #include <emissivemap_fragment>\n\n  reflectedLight.indirectDiffuse += vec3(1.0);\n\n  #include <aomap_fragment>\n\n  reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n  vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n  gl_FragColor = vec4(outgoingLight, diffuseColor.a);\n\n  #include <premultiplied_alpha_fragment>\n  #include <tonemapping_fragment>\n  #include <encodings_fragment>\n  #include <fog_fragment>\n}\n`;\n\nexport default class MobileStandardMaterial extends THREE.ShaderMaterial {\n  type = \"MobileStandardMaterial\";\n  isMobileStandardMaterial = true;\n  static fromStandardMaterial(material) {\n    const parameters = {\n      vertexShader: VERTEX_SHADER,\n      fragmentShader: FRAGMENT_SHADER,\n      uniforms: {\n        uvTransform: { value: new THREE.Matrix3() },\n        diffuse: { value: material.color },\n        opacity: { value: material.opacity },\n        map: { value: material.map },\n        aoMapIntensity: { value: material.aoMapIntensity },\n        aoMap: { value: material.aoMap },\n        emissive: { value: material.emissive },\n        emissiveMap: { value: material.emissiveMap }\n      },\n      fog: true,\n      lights: false,\n      opacity: material.opacity,\n      transparent: material.transparent,\n      skinning: material.skinning,\n      morphTargets: material.morphTargets,\n      vertexColors: material.vertexColors\n    };\n\n    const mobileMaterial = new MobileStandardMaterial(parameters);\n\n    mobileMaterial.color = material.color;\n    mobileMaterial.map = material.map;\n    mobileMaterial.aoMap = material.aoMap;\n    mobileMaterial.aoMapIntensity = material.aoMapIntensity;\n    mobileMaterial.emissive = material.emissive;\n    mobileMaterial.emissiveMap = material.emissiveMap;\n\n    return mobileMaterial;\n  }\n  clone() {\n    return MobileStandardMaterial.fromStandardMaterial(this);\n  }\n}\n","import nextTick from \"../utils/next-tick\";\nimport { mapMaterials } from \"../utils/material-utils\";\nimport SketchfabZipWorker from \"../workers/sketchfab-zip.worker.js\";\nimport MobileStandardMaterial from \"../materials/MobileStandardMaterial\";\nimport { getCustomGLTFParserURLResolver } from \"../utils/media-utils\";\nimport { promisifyWorker } from \"../utils/promisify-worker.js\";\nimport { MeshBVH, acceleratedRaycast } from \"three-mesh-bvh\";\nTHREE.Mesh.prototype.raycast = acceleratedRaycast;\n\nconst GLTFCache = {};\nconst extractZipFile = promisifyWorker(new SketchfabZipWorker());\n\nfunction defaultInflator(el, componentName, componentData) {\n  if (!AFRAME.components[componentName]) {\n    throw new Error(`Inflator failed. \"${componentName}\" component does not exist.`);\n  }\n  if (AFRAME.components[componentName].multiple && Array.isArray(componentData)) {\n    for (let i = 0; i < componentData.length; i++) {\n      el.setAttribute(componentName + \"__\" + i, componentData[i]);\n    }\n  } else {\n    el.setAttribute(componentName, componentData);\n  }\n}\n\nAFRAME.GLTFModelPlus = {\n  // eslint-disable-next-line no-unused-vars\n  components: {},\n  registerComponent(componentKey, componentName, inflator) {\n    inflator = inflator || defaultInflator;\n    AFRAME.GLTFModelPlus.components[componentKey] = { inflator, componentName };\n  }\n};\n\nfunction parallelTraverse(a, b, callback) {\n  callback(a, b);\n\n  for (let i = 0; i < a.children.length; i++) {\n    parallelTraverse(a.children[i], b.children[i], callback);\n  }\n}\n\nfunction generateMeshBVH(object3D) {\n  object3D.traverse(obj => {\n    // note that we might already have a bounds tree if this was a clone of an object with one\n    const hasBufferGeometry = obj.isMesh && obj.geometry.isBufferGeometry;\n    const hasBoundsTree = hasBufferGeometry && obj.geometry.boundsTree;\n    if (hasBufferGeometry && !hasBoundsTree && obj.geometry.attributes.position) {\n      const geo = obj.geometry;\n      const triCount = geo.index ? geo.index.count / 3 : geo.attributes.position.count / 3;\n      // only bother using memory and time making a BVH if there are a reasonable number of tris,\n      // and if there are too many it's too painful and large to tolerate doing it (at least until\n      // we put this in a web worker)\n      if (triCount > 1000 && triCount < 1000000) {\n        // note that bounds tree construction creates an index as a side effect if one doesn't already exist\n        geo.boundsTree = new MeshBVH(obj.geometry, { strategy: 0, maxDepth: 30 });\n      }\n    }\n  });\n}\n\n// Modified version of Don McCurdy's AnimationUtils.clone\n// https://github.com/mrdoob/three.js/pull/14494\nfunction cloneSkinnedMesh(source) {\n  const cloneLookup = new Map();\n\n  const clone = source.clone();\n\n  parallelTraverse(source, clone, function(sourceNode, clonedNode) {\n    cloneLookup.set(sourceNode, clonedNode);\n    if (sourceNode.isMesh && sourceNode.geometry.boundsTree) {\n      clonedNode.geometry.boundsTree = sourceNode.geometry.boundsTree;\n    }\n  });\n\n  source.traverse(function(sourceMesh) {\n    if (!sourceMesh.isSkinnedMesh) return;\n\n    const sourceBones = sourceMesh.skeleton.bones;\n    const clonedMesh = cloneLookup.get(sourceMesh);\n\n    clonedMesh.skeleton = sourceMesh.skeleton.clone();\n\n    clonedMesh.skeleton.bones = sourceBones.map(function(sourceBone) {\n      if (!cloneLookup.has(sourceBone)) {\n        throw new Error(\"Required bones are not descendants of the given object.\");\n      }\n\n      return cloneLookup.get(sourceBone);\n    });\n\n    clonedMesh.bind(clonedMesh.skeleton, sourceMesh.bindMatrix);\n  });\n\n  return clone;\n}\n\nfunction cloneGltf(gltf) {\n  return {\n    animations: gltf.animations,\n    scene: cloneSkinnedMesh(gltf.scene)\n  };\n}\n\nfunction getHubsComponents(node) {\n  const hubsComponents =\n    node.userData.gltfExtensions &&\n    (node.userData.gltfExtensions.MOZ_hubs_components || node.userData.gltfExtensions.HUBS_components);\n\n  // We can remove support for legacy components when our environment, avatar and interactable models are\n  // updated to match Spoke output.\n  const legacyComponents = node.userData.components;\n\n  return hubsComponents || legacyComponents;\n}\n\n/// Walks the tree of three.js objects starting at the given node, using the GLTF data\n/// and template data to construct A-Frame entities and components when necessary.\n/// (It's unnecessary to construct entities for subtrees that have no component data\n/// or templates associated with any of their nodes.)\n///\n/// Returns the A-Frame entity associated with the given node, if one was constructed.\nconst inflateEntities = function(indexToEntityMap, node, templates, isRoot, modelToWorldScale = 1) {\n  // TODO: Remove this once we update the legacy avatars to the new node names\n  if (node.name === \"Chest\") {\n    node.name = \"Spine\";\n  } else if (node.name === \"Root Scene\") {\n    node.name = \"AvatarRoot\";\n  } else if (node.name === \"Bot_Skinned\") {\n    node.name = \"AvatarMesh\";\n  }\n\n  // inflate subtrees first so that we can determine whether or not this node needs to be inflated\n  const childEntities = [];\n  const children = node.children.slice(0); // setObject3D mutates the node's parent, so we have to copy\n  for (const child of children) {\n    const el = inflateEntities(indexToEntityMap, child, templates);\n    if (el) {\n      childEntities.push(el);\n    }\n  }\n\n  const entityComponents = getHubsComponents(node);\n\n  const nodeHasBehavior = !!entityComponents || node.name in templates;\n  if (!nodeHasBehavior && !childEntities.length && !isRoot) {\n    return null; // we don't need an entity for this node\n  }\n\n  const el = document.createElement(\"a-entity\");\n  el.append.apply(el, childEntities);\n\n  // Remove invalid CSS class name characters.\n  const className = (node.name || node.uuid).replace(/[^\\w-]/g, \"\");\n  el.classList.add(className);\n\n  // AFRAME rotation component expects rotations in YXZ, convert it\n  if (node.rotation.order !== \"YXZ\") {\n    node.rotation.setFromQuaternion(node.quaternion, \"YXZ\");\n  }\n\n  // Copy over the object's transform to the THREE.Group and reset the actual transform of the Object3D\n  // all updates to the object should be done through the THREE.Group wrapper\n  el.object3D.position.copy(node.position);\n  el.object3D.rotation.copy(node.rotation);\n  el.object3D.scale.copy(node.scale).multiplyScalar(modelToWorldScale);\n  el.object3D.matrixNeedsUpdate = true;\n\n  node.matrixAutoUpdate = false;\n  node.matrix.identity();\n  node.matrix.decompose(node.position, node.rotation, node.scale);\n\n  el.setObject3D(node.type.toLowerCase(), node);\n  if (entityComponents && \"nav-mesh\" in entityComponents) {\n    el.setObject3D(\"mesh\", node);\n  }\n\n  // Set the name of the `THREE.Group` to match the name of the node,\n  // so that `THREE.PropertyBinding` will find (and later animate)\n  // the group. See `PropertyBinding.findNode`:\n  // https://github.com/mrdoob/three.js/blob/dev/src/animation/PropertyBinding.js#L211\n  el.object3D.name = node.name;\n  if (node.animations) {\n    // Pass animations up to the group object so that when we can pass the group as\n    // the optional root in `THREE.AnimationMixer.clipAction` and use the hierarchy\n    // preserved under the group (but not the node). Otherwise `clipArray` will be\n    // `null` in `THREE.AnimationClip.findByName`.\n    node.parent.animations = node.animations;\n  }\n\n  const gltfIndex = node.userData.gltfIndex;\n  if (gltfIndex !== undefined) {\n    indexToEntityMap[gltfIndex] = el;\n  }\n\n  return el;\n};\n\nfunction inflateComponents(inflatedEntity, indexToEntityMap) {\n  inflatedEntity.object3D.traverse(object3D => {\n    const entityComponents = getHubsComponents(object3D);\n    const el = object3D.el;\n\n    if (entityComponents && el) {\n      for (const prop in entityComponents) {\n        if (entityComponents.hasOwnProperty(prop) && AFRAME.GLTFModelPlus.components.hasOwnProperty(prop)) {\n          const { componentName, inflator } = AFRAME.GLTFModelPlus.components[prop];\n          inflator(el, componentName, entityComponents[prop], entityComponents, indexToEntityMap);\n        }\n      }\n    }\n  });\n}\n\nfunction attachTemplate(root, name, templateRoot) {\n  const targetEls = root.querySelectorAll(\".\" + name);\n  for (const el of targetEls) {\n    const root = templateRoot.cloneNode(true);\n    // Merge root element attributes with the target element\n    for (const { name, value } of root.attributes) {\n      el.setAttribute(name, value);\n    }\n\n    // Append all child elements\n    while (root.children.length > 0) {\n      el.appendChild(root.children[0]);\n    }\n  }\n}\n\nexport async function loadGLTF(src, contentType, preferredTechnique, onProgress) {\n  let gltfUrl = src;\n  let fileMap;\n\n  if (contentType.includes(\"model/gltf+zip\") || contentType.includes(\"application/x-zip-compressed\")) {\n    fileMap = await extractZipFile(gltfUrl);\n    gltfUrl = fileMap[\"scene.gtlf\"];\n  }\n\n  const loadingManager = new THREE.LoadingManager();\n  loadingManager.setURLModifier(getCustomGLTFParserURLResolver(gltfUrl));\n  const gltfLoader = new THREE.GLTFLoader(loadingManager);\n\n  const parser = await new Promise((resolve, reject) => gltfLoader.createParser(gltfUrl, resolve, onProgress, reject));\n\n  const materials = parser.json.materials;\n  if (materials) {\n    for (let i = 0; i < materials.length; i++) {\n      const material = materials[i];\n\n      if (\n        material.extensions &&\n        material.extensions.MOZ_alt_materials &&\n        material.extensions.MOZ_alt_materials[preferredTechnique] !== undefined\n      ) {\n        const altMaterialIndex = material.extensions.MOZ_alt_materials[preferredTechnique];\n        materials[i] = materials[altMaterialIndex];\n      }\n    }\n  }\n\n  const nodes = parser.json.nodes;\n\n  if (nodes) {\n    for (let i = 0; i < nodes.length; i++) {\n      const node = nodes[i];\n\n      if (!node.extras) {\n        node.extras = {};\n      }\n\n      node.extras.gltfIndex = i;\n    }\n  }\n\n  const gltf = await new Promise(parser.parse.bind(parser));\n\n  gltf.scene.traverse(object => {\n    // GLTFLoader sets matrixAutoUpdate on animated objects, we want to keep the defaults\n    object.matrixAutoUpdate = THREE.Object3D.DefaultMatrixAutoUpdate;\n\n    object.material = mapMaterials(object, material => {\n      if (material.isMeshStandardMaterial && preferredTechnique === \"KHR_materials_unlit\") {\n        return MobileStandardMaterial.fromStandardMaterial(material);\n      }\n\n      return material;\n    });\n  });\n\n  if (fileMap) {\n    // The GLTF is now cached as a THREE object, we can get rid of the original blobs\n    Object.keys(fileMap).forEach(URL.revokeObjectURL);\n  }\n\n  return gltf;\n}\n\n/**\n * Loads a GLTF model, optionally recursively \"inflates\" the child nodes of a model into a-entities and sets\n * whitelisted components on them if defined in the node's extras.\n * @namespace gltf\n * @component gltf-model-plus\n */\nAFRAME.registerComponent(\"gltf-model-plus\", {\n  schema: {\n    src: { type: \"string\" },\n    contentType: { type: \"string\" },\n    useCache: { default: true },\n    inflate: { default: false },\n    modelToWorldScale: { type: \"number\", default: 1 }\n  },\n\n  init() {\n    this.preferredTechnique =\n      window.APP && window.APP.quality === \"low\" ? \"KHR_materials_unlit\" : \"pbrMetallicRoughness\";\n    this.loadTemplates();\n  },\n\n  update() {\n    this.applySrc(this.data.src, this.data.contentType);\n  },\n\n  loadTemplates() {\n    this.templates = {};\n    this.el.querySelectorAll(\":scope > template\").forEach(templateEl => {\n      const root = document.importNode(templateEl.firstElementChild || templateEl.content.firstElementChild, true);\n      this.templates[templateEl.getAttribute(\"data-name\")] = root;\n    });\n  },\n\n  async loadModel(src, contentType, technique, useCache) {\n    if (useCache) {\n      if (!GLTFCache[src]) {\n        GLTFCache[src] = await loadGLTF(src, contentType, technique);\n      }\n\n      return cloneGltf(GLTFCache[src]);\n    } else {\n      return await loadGLTF(src, contentType, technique);\n    }\n  },\n\n  async applySrc(src, contentType) {\n    try {\n      // If the src attribute is a selector, get the url from the asset item.\n      if (src && src.charAt(0) === \"#\") {\n        const assetEl = document.getElementById(src.substring(1));\n        src = assetEl.getAttribute(\"src\");\n      }\n\n      if (src === this.lastSrc) return;\n      this.lastSrc = src;\n\n      if (!src) {\n        if (this.inflatedEl) {\n          console.warn(\"gltf-model-plus set to an empty source, unloading inflated model.\");\n          this.disposeLastInflatedEl();\n        }\n        return;\n      }\n\n      this.el.emit(\"model-loading\");\n      const gltf = await this.loadModel(src, contentType, this.preferredTechnique, this.data.useCache);\n\n      // If we started loading something else already\n      // TODO: there should be a way to cancel loading instead\n      if (src != this.lastSrc) return;\n\n      // If we had inflated something already before, clean that up\n      this.disposeLastInflatedEl();\n\n      this.model = gltf.scene || gltf.scenes[0];\n      this.model.animations = gltf.animations;\n\n      if (gltf.animations.length > 0) {\n        this.el.setAttribute(\"animation-mixer\", {});\n        this.el.components[\"animation-mixer\"].initMixer(gltf.animations);\n      } else {\n        generateMeshBVH(this.model);\n      }\n\n      const indexToEntityMap = {};\n\n      let object3DToSet = this.model;\n      if (\n        this.data.inflate &&\n        (this.inflatedEl = inflateEntities(\n          indexToEntityMap,\n          this.model,\n          this.templates,\n          true,\n          this.data.modelToWorldScale\n        ))\n      ) {\n        this.el.appendChild(this.inflatedEl);\n\n        object3DToSet = this.inflatedEl.object3D;\n        // TODO: Still don't fully understand the lifecycle here and how it differs between browsers, we should dig in more\n        // Wait one tick for the appended custom elements to be connected before attaching templates\n        await nextTick();\n        if (src != this.lastSrc) return; // TODO: there must be a nicer pattern for this\n\n        inflateComponents(this.inflatedEl, indexToEntityMap);\n\n        for (const name in this.templates) {\n          attachTemplate(this.el, name, this.templates[name]);\n        }\n      }\n\n      // The call to setObject3D below recursively clobbers any `el` backreferences to entities\n      // in the entire inflated entity graph to point to `object3DToSet`.\n      //\n      // We don't want those overwritten, since lots of code assumes `object3d.el` points to the relevant\n      // A-Frame entity for that three.js object, so we back them up and re-wire them here. If we didn't do\n      // this, all the `el` properties on these object3ds would point to the `object3DToSet` which is either\n      // the model or the root GLTF inflated entity.\n      const rewires = [];\n\n      object3DToSet.traverse(o => {\n        const el = o.el;\n        if (el) rewires.push(() => (o.el = el));\n      });\n\n      const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n\n      if (environmentMapComponent) {\n        environmentMapComponent.applyEnvironmentMap(object3DToSet);\n      }\n\n      this.el.setObject3D(\"mesh\", object3DToSet);\n\n      rewires.forEach(f => f());\n\n      this.el.emit(\"model-loaded\", { format: \"gltf\", model: this.model });\n    } catch (e) {\n      delete GLTFCache[src];\n      console.error(\"Failed to load glTF model\", e, this);\n      this.el.emit(\"model-error\", { format: \"gltf\", src });\n    }\n  },\n\n  disposeLastInflatedEl() {\n    if (this.inflatedEl) {\n      this.inflatedEl.parentNode.removeChild(this.inflatedEl);\n\n      this.inflatedEl.object3D.traverse(x => {\n        if (x.material && x.material.dispose) {\n          x.material.dispose();\n        }\n\n        if (x.geometry) {\n          if (x.geometry.dispose) {\n            x.geometry.dispose();\n          }\n\n          x.geometry.boundsTree = null;\n        }\n      });\n\n      delete this.inflatedEl;\n\n      this.el.removeAttribute(\"animation-mixer\");\n    }\n  }\n});\n","import { Socket } from \"phoenix\";\nimport { generateHubName } from \"../utils/name-generation\";\n\nimport Store from \"../storage/store\";\n\nconst resolverLink = document.createElement(\"a\");\nexport function getReticulumFetchUrl(path, absolute = false) {\n  if (process.env.RETICULUM_SERVER) {\n    return `https://${process.env.RETICULUM_SERVER}${path}`;\n  } else if (absolute) {\n    resolverLink.href = path;\n    return resolverLink.href;\n  } else {\n    return path;\n  }\n}\n\nlet reticulumMeta = null;\nlet invalidatedReticulumMetaThisSession = false;\n\nexport async function invalidateReticulumMeta() {\n  invalidatedReticulumMetaThisSession = true;\n  reticulumMeta = null;\n}\n\nexport async function getReticulumMeta() {\n  if (!reticulumMeta) {\n    // Initially look up version based upon page, avoiding round-trip, otherwise fetch.\n    if (!invalidatedReticulumMetaThisSession && document.querySelector(\"meta[name='ret:version']\")) {\n      reticulumMeta = {\n        version: document.querySelector(\"meta[name='ret:version']\").getAttribute(\"value\"),\n        pool: document.querySelector(\"meta[name='ret:pool']\").getAttribute(\"value\"),\n        phx_host: document.querySelector(\"meta[name='ret:phx_host']\").getAttribute(\"value\")\n      };\n    } else {\n      await fetch(getReticulumFetchUrl(\"/api/v1/meta\")).then(async res => {\n        reticulumMeta = await res.json();\n      });\n    }\n  }\n\n  const qs = new URLSearchParams(location.search);\n  const phxHostOverride = qs.get(\"phx_host\");\n\n  if (phxHostOverride) {\n    reticulumMeta.phx_host = phxHostOverride;\n  }\n\n  return reticulumMeta;\n}\n\nexport async function connectToReticulum(debug = false, params = null) {\n  const qs = new URLSearchParams(location.search);\n\n  const getNewSocketUrl = async () => {\n    const socketProtocol = qs.get(\"phx_protocol\") || (document.location.protocol === \"https:\" ? \"wss:\" : \"ws:\");\n    let socketHost = qs.get(\"phx_host\");\n    let socketPort = qs.get(\"phx_port\");\n\n    const reticulumMeta = await getReticulumMeta();\n    socketHost = socketHost || reticulumMeta.phx_host;\n    socketPort = socketPort || (process.env.RETICULUM_SERVER.includes(\"hubs.local\") ? \"4000\" : \"443\"); // TODO phx_port\n    return `${socketProtocol}//${socketHost}${socketPort ? `:${socketPort}` : \"\"}`;\n  };\n\n  const socketUrl = await getNewSocketUrl();\n  console.log(`Phoenix Socket URL: ${socketUrl}`);\n\n  const socketSettings = {};\n\n  if (debug) {\n    socketSettings.logger = (kind, msg, data) => {\n      console.log(`${kind}: ${msg}`, data);\n    };\n  }\n\n  if (params) {\n    socketSettings.params = params;\n  }\n\n  const socket = new Socket(`${socketUrl}/socket`, socketSettings);\n  socket.connect();\n  socket.onError(async () => {\n    // On error, underlying reticulum node may have died, so rebalance by\n    // fetching a new healthy node to connect to.\n    invalidateReticulumMeta();\n\n    const endPointPath = new URL(socket.endPoint).pathname;\n    const newSocketUrl = await getNewSocketUrl();\n    const newEndPoint = `${newSocketUrl}${endPointPath}`;\n    console.log(`Socket error, changed endpoint to ${newEndPoint}`);\n    socket.endPoint = newEndPoint;\n  });\n\n  return socket;\n}\n\nexport function getLandingPageForPhoto(photoUrl) {\n  const parsedUrl = new URL(photoUrl);\n  return getReticulumFetchUrl(parsedUrl.pathname.replace(\".png\", \".html\") + parsedUrl.search, true);\n}\n\nexport function fetchReticulumAuthenticated(url, method = \"GET\", payload) {\n  const { token } = window.APP.store.state.credentials;\n  const retUrl = getReticulumFetchUrl(url);\n  const params = {\n    headers: {\n      \"content-type\": \"application/json\",\n      authorization: `bearer ${token}`\n    },\n    method\n  };\n  if (payload) {\n    params.body = JSON.stringify(payload);\n  }\n  return fetch(retUrl, params).then(async r => {\n    const result = await r.text();\n    try {\n      return JSON.parse(result);\n    } catch (e) {\n      // Some reticulum responses, particularly DELETE requests, don't return json.\n      return result;\n    }\n  });\n}\n\nexport async function createAndRedirectToNewHub(name, sceneId, sceneUrl, replace) {\n  const createUrl = getReticulumFetchUrl(\"/api/v1/hubs\");\n  // const payload = { hub: { name: name || generateHubName() } };\n  const payload = { hub: { name: 'Axon Park' } };\n\n  if (sceneId) {\n    payload.hub.scene_id = sceneId;\n  } else {\n    payload.hub.default_environment_gltf_bundle_url = sceneUrl;\n  }\n\n  const headers = { \"content-type\": \"application/json\" };\n  const store = new Store();\n  if (store.state && store.state.credentials.token) {\n    headers.authorization = `bearer ${store.state.credentials.token}`;\n  }\n\n  let res = await fetch(createUrl, {\n    body: JSON.stringify(payload),\n    headers,\n    method: \"POST\"\n  }).then(r => r.json());\n\n  if (res.error === \"invalid_token\") {\n    // Clear the invalid token from store.\n    store.update({ credentials: { token: null, email: null } });\n\n    // Create hub anonymously\n    delete headers.authorization;\n    res = await fetch(createUrl, {\n      body: JSON.stringify(payload),\n      headers,\n      method: \"POST\"\n    }).then(r => r.json());\n  }\n\n  const hub = res;\n  let url = hub.url;\n\n  const creatorAssignmentToken = hub.creator_assignment_token;\n  if (creatorAssignmentToken) {\n    store.update({ creatorAssignmentTokens: [{ hubId: hub.hub_id, creatorAssignmentToken: creatorAssignmentToken }] });\n  }\n\n  if (process.env.RETICULUM_SERVER && document.location.host !== process.env.RETICULUM_SERVER) {\n    url = `/hub.html?hub_id=${hub.hub_id}`;\n  }\n\n  if (replace) {\n    document.location.replace(url);\n  } else {\n    document.location = url;\n  }\n}\n\nexport function getPresenceProfileForSession(presences, sessionId) {\n  const entry = Object.entries(presences || {}).find(([k]) => k === sessionId) || [];\n  const presence = entry[1];\n  return (presence && presence.metas && presence.metas[0].profile) || {};\n}\n\n// Takes the given channel, and creates a new channel with the same bindings\n// with the given socket, joins it, and leaves the old channel after joining.\n//\n// NOTE: This function relies upon phoenix channel object internals, so this\n// function will need to be reviewed if/when we ever update phoenix.js\nexport function migrateChannelToSocket(oldChannel, socket, params) {\n  const channel = socket.channel(oldChannel.topic, params || oldChannel.params);\n\n  for (let i = 0, l = oldChannel.bindings.length; i < l; i++) {\n    const item = oldChannel.bindings[i];\n    channel.on(item.event, item.callback);\n  }\n\n  for (let i = 0, l = oldChannel.pushBuffer.length; i < l; i++) {\n    const item = oldChannel.pushBuffer[i];\n    channel.push(item.event, item.payload, item.timeout);\n  }\n\n  const oldJoinPush = oldChannel.joinPush;\n  const joinPush = channel.join();\n\n  for (let i = 0, l = oldJoinPush.recHooks.length; i < l; i++) {\n    const item = oldJoinPush.recHooks[i];\n    joinPush.receive(item.status, item.callback);\n  }\n\n  return new Promise(resolve => {\n    joinPush.receive(\"ok\", () => {\n      // Clear all event handlers first so no duplicate messages come in.\n      oldChannel.bindings = [];\n      resolve(channel);\n    });\n  });\n}\n","export function findAncestorWithComponent(entity, componentName) {\n  while (entity && !(entity.components && entity.components[componentName])) {\n    entity = entity.parentNode;\n  }\n  return entity;\n}\n","module.exports = \"if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\\n  float ratio = 0.0;\\n\\n  if (hubs_EnableSweepingEffect) {\\n    float size = hubs_SweepParams.t - hubs_SweepParams.s;\\n    float line = mod(hubs_Time / 500.0 * size, size * 3.0) + hubs_SweepParams.s - size / 3.0;\\n\\n    if (hubs_WorldPosition.y < line) {\\n      // Highlight with a sweeping gradient.\\n      ratio = max(0.0, 1.0 - (line - hubs_WorldPosition.y) / (size * 1.5));\\n    }\\n  }\\n\\n  // Highlight with a gradient falling off with distance.\\n  float pulse = 9.0 + 3.0 * (sin(hubs_Time / 1000.0) + 1.0);\\n\\n  if (hubs_HighlightInteractorOne) {\\n    float dist1 = distance(hubs_WorldPosition, hubs_InteractorOnePos);\\n    ratio += -min(1.0, pow(dist1 * pulse, 3.0)) + 1.0;\\n  } \\n\\n  if (hubs_HighlightInteractorTwo) {\\n    float dist2 = distance(hubs_WorldPosition, hubs_InteractorTwoPos);\\n    ratio += -min(1.0, pow(dist2 * pulse, 3.0)) + 1.0;\\n  }\\n\\n  ratio = min(1.0, ratio);\\n\\n  // Gamma corrected highlight color\\n  vec3 highlightColor = vec3(0.184, 0.499, 0.933);\\n\\n  gl_FragColor.rgb = (gl_FragColor.rgb * (1.0 - ratio)) + (highlightColor * ratio);\\n}\\n\"","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posx-d235fb97df77b607be04b84125f40e7c.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negx-35034574e114423babdea92b6a2eb97a.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posy-d0c4e1e7979d75923d4d8b49c191bc6e.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negy-35808d21d1d17ac1b84d3184e365093b.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posz-de29aa8396196e4b040cd5305e351dbe.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negz-d73d18a8b7994524dc39a6ea3fcf43fc.jpg\";","import Store from \"./storage/store\";\nimport MediaSearchStore from \"./storage/media-search-store\";\n\nexport class App {\n  constructor() {\n    this.scene = null;\n    this.quality = \"low\";\n    this.store = new Store();\n    this.mediaSearchStore = new MediaSearchStore();\n  }\n\n  setQuality(quality) {\n    if (this.quality === quality) {\n      return false;\n    }\n\n    this.quality = quality;\n\n    if (this.scene) {\n      this.scene.dispatchEvent(new CustomEvent(\"quality-changed\", { detail: quality }));\n    }\n\n    return true;\n  }\n}\n","import { forEachMaterial } from \"../utils/material-utils\";\nimport cubeMapPosX from \"../assets/images/cubemap/posx.jpg\";\nimport cubeMapNegX from \"../assets/images/cubemap/negx.jpg\";\nimport cubeMapPosY from \"../assets/images/cubemap/posy.jpg\";\nimport cubeMapNegY from \"../assets/images/cubemap/negy.jpg\";\nimport cubeMapPosZ from \"../assets/images/cubemap/posz.jpg\";\nimport cubeMapNegZ from \"../assets/images/cubemap/negz.jpg\";\n\nexport async function createDefaultEnvironmentMap() {\n  const urls = [cubeMapPosX, cubeMapNegX, cubeMapPosY, cubeMapNegY, cubeMapPosZ, cubeMapNegZ];\n  const texture = await new Promise((resolve, reject) =>\n    new THREE.CubeTextureLoader().load(urls, resolve, undefined, reject)\n  );\n  texture.format = THREE.RGBFormat;\n  return texture;\n}\n\nAFRAME.registerComponent(\"environment-map\", {\n  schema: {\n    loadDefault: { type: \"boolean\", default: true }\n  },\n\n  init() {\n    this.environmentMap = null;\n\n    this.updateEnvironmentMap = this.updateEnvironmentMap.bind(this);\n\n    if (this.data.loadDefault) {\n      // Used in the avatar selector scene because there is no skybox.\n      createDefaultEnvironmentMap().then(this.updateEnvironmentMap);\n    }\n  },\n\n  updateEnvironmentMap(environmentMap) {\n    this.environmentMap = environmentMap;\n    this.applyEnvironmentMap(this.el.object3D);\n  },\n\n  applyEnvironmentMap(object3D) {\n    object3D.traverse(object => {\n      forEachMaterial(object, material => {\n        if (material.isMeshStandardMaterial) {\n          material.envMap = this.environmentMap;\n          material.needsUpdate = true;\n        }\n      });\n    });\n  }\n});\n","// removed by extract-text-webpack-plugin\nmodule.exports = {\"loading-text\":\"scene__loading-text__2zWvK\",\"loadingText\":\"scene__loading-text__2zWvK\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"tweetButton\":\"scene-ui__tweetButton__NAR59\",\"createButton\":\"scene-ui__createButton__1DQtQ\",\"optionsButton\":\"scene-ui__optionsButton__lzUHO\",\"ui\":\"scene-ui__ui__3JHPz\",\"logoTagline\":\"scene-ui__logoTagline___LR3I\",\"whiteOverlay\":\"scene-ui__whiteOverlay__1Pz3I\",\"grid\":\"scene-ui__grid__34j9h\",\"mainPanel\":\"scene-ui__mainPanel__IuYxi\",\"logo\":\"scene-ui__logo__26JnS\",\"info\":\"scene-ui__info__3Nznh\",\"name\":\"scene-ui__name__2-7V_\",\"attribution\":\"scene-ui__attribution__3nlIi\",\"screenshot\":\"scene-ui__screenshot__279rF\",\"screenshotHidden\":\"scene-ui__screenshotHidden__3nHWx\",\"spoke\":\"scene-ui__spoke___KrWT\",\"madeWith\":\"scene-ui__madeWith__A5stW\",\"createButtons\":\"scene-ui__createButtons__1COLQ\",\"unavailable\":\"scene-ui__unavailable__21hgO\"};","export const paths = {};\npaths.noop = \"/noop\";\npaths.actions = {};\npaths.actions.log = \"/actions/log\";\npaths.actions.toggleScreenShare = \"/actions/toggleScreenShare\";\npaths.actions.snapRotateLeft = \"/actions/snapRotateLeft\";\npaths.actions.snapRotateRight = \"/actions/snapRotateRight\";\npaths.actions.logDebugFrame = \"/actions/logDebugFrame\";\npaths.actions.logInteractionState = \"/actions/logInteractionState\";\npaths.actions.cameraDelta = \"/actions/cameraDelta\";\npaths.actions.characterAcceleration = \"/actions/characterAcceleration\";\npaths.actions.boost = \"/actions/boost\";\npaths.actions.startGazeTeleport = \"/actions/startTeleport\";\npaths.actions.stopGazeTeleport = \"/actions/stopTeleport\";\npaths.actions.spawnPen = \"/actions/spawnPen\";\npaths.actions.ensureFrozen = \"/actions/ensureFrozen\";\npaths.actions.toggleFreeze = \"/actions/toggleFreeze\";\npaths.actions.thaw = \"/actions/thaw\";\npaths.actions.muteMic = \"/actions/muteMic\";\npaths.actions.focusChat = \"/actions/focusChat\";\npaths.actions.focusChatCommand = \"/actions/focusChatCommand\";\npaths.actions.toggleCamera = \"/actions/toggleCamera\";\npaths.actions.takeSnapshot = \"/actions/takeSnapshot\";\npaths.actions.mediaExit = \"/actions/mediaExit\";\npaths.actions.mediaSearch1 = \"/actions/mediaSearch1\";\npaths.actions.mediaSearch2 = \"/actions/mediaSearch2\";\npaths.actions.mediaSearch3 = \"/actions/mediaSearch3\";\npaths.actions.mediaSearch4 = \"/actions/mediaSearch4\";\npaths.actions.mediaSearch5 = \"/actions/mediaSearch5\";\npaths.actions.mediaSearch6 = \"/actions/mediaSearch6\";\npaths.actions.mediaSearch7 = \"/actions/mediaSearch7\";\npaths.actions.mediaSearch8 = \"/actions/mediaSearch8\";\npaths.actions.transformModifier = \"/actions/transformModifier\";\npaths.actions.rayObjectRotation = \"/actions/rayObjectRotation\";\npaths.actions.cursor = {};\npaths.actions.cursor.pose = \"/actions/cursorPose\";\npaths.actions.cursor.grab = \"/actions/cursorGrab\";\npaths.actions.cursor.drop = \"/actions/cursorDrop\";\npaths.actions.cursor.modDelta = \"/actions/cursorModDelta\";\npaths.actions.cursor.startDrawing = \"/actions/cursorStartDrawing\";\npaths.actions.cursor.stopDrawing = \"/actions/cursorStopDrawing\";\npaths.actions.cursor.undoDrawing = \"/actions/cursorUndoDrawing\";\npaths.actions.cursor.penNextColor = \"/actions/cursorPenNextColor\";\npaths.actions.cursor.penPrevColor = \"/actions/cursorPenPrevColor\";\npaths.actions.cursor.scalePenTip = \"/actions/cursorScalePenTip\";\npaths.actions.cursor.scaleGrabbedGrabbable = \"/actions/cursorScaleGrabbedGrabbable\";\npaths.actions.cursor.mediaVolumeMod = \"/actions/cursor/mediaVolumeMod\";\npaths.actions.cursor.takeSnapshot = \"/actions/cursorTakeSnapshot\";\npaths.actions.pen = {};\npaths.actions.pen.remove = \"/actions/pen/remove\";\npaths.actions.rightHand = {};\npaths.actions.rightHand.matrix = \"/actions/rightHand/matrix\";\npaths.actions.rightHand.pose = \"/actions/rightHandPose\";\npaths.actions.rightHand.grab = \"/actions/rightHandGrab\";\npaths.actions.rightHand.drop = \"/actions/rightHandDrop\";\npaths.actions.rightHand.modDelta = \"/actions/rightHandModDelta\";\npaths.actions.rightHand.startDrawing = \"/actions/rightHandStartDrawing\";\npaths.actions.rightHand.stopDrawing = \"/actions/rightHandStopDrawing\";\npaths.actions.rightHand.undoDrawing = \"/actions/rightHandUndoDrawing\";\npaths.actions.rightHand.penNextColor = \"/actions/rightHandPenNextColor\";\npaths.actions.rightHand.penPrevColor = \"/actions/rightHandPenPrevColor\";\npaths.actions.rightHand.scalePenTip = \"/actions/rightHandScalePenTip\";\npaths.actions.rightHand.startTeleport = \"/actions/rightHand/startTeleport\";\npaths.actions.rightHand.stopTeleport = \"/actions/rightHand/stopTeleport\";\npaths.actions.rightHand.takeSnapshot = \"/actions/rightHandTakeSnapshot\";\npaths.actions.rightHand.thumb = \"/actions/rightHand/thumbDown\";\npaths.actions.rightHand.index = \"/actions/rightHand/indexDown\";\npaths.actions.rightHand.middleRingPinky = \"/actions/rightHand/middleRingPinkyDown\";\npaths.actions.leftHand = {};\npaths.actions.leftHand.matrix = \"/actions/leftHand/matrix\";\npaths.actions.leftHand.pose = \"/actions/leftHandPose\";\npaths.actions.leftHand.grab = \"/actions/leftHandGrab\";\npaths.actions.leftHand.drop = \"/actions/leftHandDrop\";\npaths.actions.leftHand.modDelta = \"/actions/leftHandModDelta\";\npaths.actions.leftHand.startDrawing = \"/actions/leftHandStartDrawing\";\npaths.actions.leftHand.stopDrawing = \"/actions/leftHandStopDrawing\";\npaths.actions.leftHand.undoDrawing = \"/actions/leftHandUndoDrawing\";\npaths.actions.leftHand.penNextColor = \"/actions/leftHandPenNextColor\";\npaths.actions.leftHand.penPrevColor = \"/actions/leftHandPenPrevColor\";\npaths.actions.leftHand.scalePenTip = \"/actions/leftHandScalePenTip\";\npaths.actions.leftHand.startTeleport = \"/actions/leftHand/startTeleport\";\npaths.actions.leftHand.stopTeleport = \"/actions/leftHand/stopTeleport\";\npaths.actions.leftHand.takeSnapshot = \"/actions/leftHandTakeSnapshot\";\npaths.actions.leftHand.thumb = \"/actions/leftHand/thumbDown\";\npaths.actions.leftHand.index = \"/actions/leftHand/indexDown\";\npaths.actions.leftHand.middleRingPinky = \"/actions/leftHand/middleRingPinkyDown\";\npaths.actions.camera = {};\npaths.actions.camera.exitMirror = \"/actions/cameraExitMirror\";\npaths.haptics = {};\npaths.haptics.actuators = {};\npaths.haptics.actuators.left = \"/haptics/actuators/left\";\npaths.haptics.actuators.right = \"/haptics/actuators/right\";\n\npaths.device = {};\npaths.device.mouse = {};\npaths.device.mouse.coords = \"/device/mouse/coords\";\npaths.device.mouse.movementXY = \"/device/mouse/movementXY\";\npaths.device.mouse.buttonLeft = \"/device/mouse/buttonLeft\";\npaths.device.mouse.buttonRight = \"/device/mouse/buttonRight\";\npaths.device.mouse.wheel = \"/device/mouse/wheel\";\npaths.device.smartMouse = {};\npaths.device.smartMouse.cursorPose = \"/device/smartMouse/cursorPose\";\npaths.device.smartMouse.cameraDelta = \"/device/smartMouse/cameraDelta\";\npaths.device.touchscreen = {};\npaths.device.touchscreen.cursorPose = \"/device/touchscreen/cursorPose\";\npaths.device.touchscreen.touchCameraDelta = \"/device/touchscreen/touchCameraDelta\";\npaths.device.touchscreen.gyroCameraDelta = \"/device/touchscreen/gyroCameraDelta\";\npaths.device.touchscreen.cameraDelta = \"/device/touchscreen/cameraDelta\";\npaths.device.touchscreen.pinch = {};\npaths.device.touchscreen.pinch.delta = \"/device/touchscreen/pinch/delta\";\npaths.device.touchscreen.pinch.initialDistance = \"/device/touchscreen/pinch/initialDistance\";\npaths.device.touchscreen.pinch.currentDistance = \"/device/touchscreen/pinch/currentDistance\";\npaths.device.touchscreen.isTouching = \"/device/touchscreen/isTouching\";\npaths.device.touchscreen.isTouchingGrabbable = \"/device/touchscreen/isTouchingGrabbable\";\npaths.device.touchscreen.tap1 = \"/device/touchscreen/tap1\";\npaths.device.touchscreen.tap2 = \"/device/touchscreen/tap2\";\npaths.device.touchscreen.tap3 = \"/device/touchscreen/tap3\";\npaths.device.touchscreen.tap4 = \"/device/touchscreen/tap4\";\npaths.device.touchscreen.tap5 = \"/device/touchscreen/tap5\";\npaths.device.gyro = {};\npaths.device.gyro.averageDeltaX = \"/device/gyro/averageDeltaX\";\npaths.device.gyro.averageDeltaY = \"/device/gyro/averageDeltaY\";\npaths.device.hud = {};\npaths.device.hud.penButton = \"/device/hud/penButton\";\n\npaths.device.keyboard = {\n  map: new Map(),\n  key: function(k) {\n    let path = this.map.get(k);\n    if (path) {\n      return path;\n    }\n    path = `/device/keyboard/${k.toLowerCase()}`;\n    this.map.set(k, path);\n    return path;\n  }\n};\n\npaths.device.gamepad = gamepadIndex => ({\n  button: buttonIndex => ({\n    pressed: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/pressed`,\n    touched: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/touched`,\n    value: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/value`\n  }),\n  axis: axisIndex => `/device/gamepad/${gamepadIndex}/axis/${axisIndex}`\n});\n\nconst xbox = \"/device/xbox/\";\npaths.device.xbox = {\n  button: buttonName => ({\n    pressed: `${xbox}button/${buttonName}/pressed`,\n    touched: `${xbox}button/${buttonName}/touched`,\n    value: `${xbox}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${xbox}axis/${axisName}`;\n  }\n};\n\npaths.device.oculusgo = {\n  // TODO remove these in favor of the direct accessors\n  button: buttonName => ({\n    pressed: `/device/oculusgo/button/${buttonName}/pressed`,\n    touched: `/device/oculusgo/button/${buttonName}/touched`,\n    value: `/device/oculusgo/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/oculusgo/axis/${axisName}`;\n  },\n  //\n  trigger: {\n    pressed: \"/device/oculusgo/button/trigger/pressed\",\n    touched: \"/device/oculusgo/button/trigger/touched\",\n    value: \"/device/oculusgo/button/trigger/value\"\n  },\n  touchpad: {\n    pressed: \"/device/oculusgo/button/touchpad/pressed\",\n    touched: \"/device/oculusgo/button/touchpad/touched\",\n    value: \"/device/oculusgo/button/touchpad/value\",\n    axisX: \"/device/oculusgo/axis/touchpadX\",\n    axisY: \"/device/oculusgo/axis/touchpadY\"\n  },\n  pose: \"/device/oculusgo/pose\",\n  matrix: \"/device/oculusgo/matrix\",\n  v: name => {\n    return `/vars/oculusgo/${name}`;\n  }\n};\n\nconst gearVRController = \"/device/gearVRController/\";\npaths.device.gearVRController = {\n  button: buttonName => ({\n    pressed: `${gearVRController}button/${buttonName}/pressed`,\n    touched: `${gearVRController}button/${buttonName}/touched`,\n    value: `${gearVRController}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${gearVRController}axis/${axisName}`;\n  },\n  pose: `${gearVRController}pose`,\n  matrix: `${gearVRController}matrix`,\n  v: name => {\n    return `/vars/gearVRController/${name}`;\n  }\n};\n\nconst daydream = \"/device/daydream/\";\npaths.device.daydream = {\n  button: buttonName => ({\n    pressed: `${daydream}button/${buttonName}/pressed`,\n    touched: `${daydream}button/${buttonName}/touched`,\n    value: `${daydream}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${daydream}axis/${axisName}`;\n  },\n  pose: `${daydream}pose`,\n  matrix: `${daydream}matrix`\n};\n\nconst rightOculusTouch = \"/device/rightOculusTouch/\";\npaths.device.rightOculusTouch = {\n  button: buttonName => ({\n    pressed: `${rightOculusTouch}button/${buttonName}/pressed`,\n    touched: `${rightOculusTouch}button/${buttonName}/touched`,\n    value: `${rightOculusTouch}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${rightOculusTouch}axis/${axisName}`;\n  },\n  pose: `${rightOculusTouch}pose`,\n  matrix: `${rightOculusTouch}matrix`\n};\n\nconst leftOculusTouch = \"/device/leftOculusTouch/\";\npaths.device.leftOculusTouch = {\n  button: buttonName => ({\n    pressed: `${leftOculusTouch}button/${buttonName}/pressed`,\n    touched: `${leftOculusTouch}button/${buttonName}/touched`,\n    value: `${leftOculusTouch}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${leftOculusTouch}axis/${axisName}`;\n  },\n  pose: `${leftOculusTouch}pose`,\n  matrix: `${leftOculusTouch}matrix`\n};\n\npaths.device.vive = {};\npaths.device.vive.left = {\n  button: buttonName => ({\n    pressed: `/device/vive/left/button/${buttonName}/pressed`,\n    touched: `/device/vive/left/button/${buttonName}/touched`,\n    value: `/device/vive/left/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/vive/left/axis/${axisName}`;\n  },\n  pose: `/device/vive/left/pose`,\n  matrix: `/device/vive/left/matrix`\n};\npaths.device.vive.right = {\n  button: buttonName => ({\n    pressed: `/device/vive/right/button/${buttonName}/pressed`,\n    touched: `/device/vive/right/button/${buttonName}/touched`,\n    value: `/device/vive/right/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/vive/right/axis/${axisName}`;\n  },\n  pose: `/device/vive/right/pose`,\n  matrix: `/device/vive/right/matrix`\n};\n\nfunction button(device, side, name) {\n  return {\n    pressed: `${device}${side}/button/${name}/pressed`,\n    touched: `${device}${side}/button/${name}/touched`,\n    value: `${device}${side}/button/${name}/value`\n  };\n}\n\nfunction axes(device, side, name) {\n  return {\n    axisX: `${device}${side}/axis/${name}X`,\n    axisY: `${device}${side}/axis/${name}Y`\n  };\n}\n\nfunction wmrController(side) {\n  const wmr = \"/device/wmr/\";\n  return {\n    touchpad: {\n      ...button(wmr, side, \"touchpad\"),\n      ...axes(wmr, side, \"touchpad\")\n    },\n    trigger: button(wmr, side, \"trigger\"),\n    grip: button(wmr, side, \"grip\"),\n    menu: button(wmr, side, \"menu\"),\n    joystick: axes(wmr, side, \"joystick\"),\n    pose: `${wmr}${side}/pose`,\n    matrix: `${wmr}${side}/matrix`\n  };\n}\npaths.device.wmr = {};\npaths.device.wmr.v = name => `/vars/wmr/${name}`;\npaths.device.wmr.k = name => `/vars/wmr/keyboard/${name}`;\npaths.device.wmr.left = wmrController(\"left\");\npaths.device.wmr.right = wmrController(\"right\");\n","/* global fetch THREE */\nimport URL_TICK from \"../assets/sfx/tick.mp3\";\nimport URL_TELEPORT_LOOP from \"../assets/sfx/teleport-loop.mp3\";\nimport URL_QUICK_TURN from \"../assets/sfx/quickTurn.mp3\";\nimport URL_TAP_MELLOW from \"../assets/sfx/tap_mellow.mp3\";\nimport URL_PEN_SPAWN from \"../assets/sfx/PenSpawn.mp3\";\nimport URL_PEN_DRAW from \"../assets/sfx/PenDraw1.mp3\";\nimport URL_CAMERA_SNAPSHOT from \"../assets/sfx/PicSnapHey.mp3\";\nimport URL_WELCOME from \"../assets/sfx/welcome.mp3\";\nimport URL_QUACK from \"../assets/sfx/quack.mp3\";\nimport URL_SPECIAL_QUACK from \"../assets/sfx/specialquack.mp3\";\nimport URL_POP from \"../assets/sfx/pop.mp3\";\nimport URL_FREEZE from \"../assets/sfx/Eb_blip.mp3\";\nimport URL_TACK from \"../assets/sfx/tack.mp3\";\nimport URL_MEDIA_LOADED from \"../assets/sfx/A_bendUp.mp3\";\nimport URL_MEDIA_LOADING from \"../assets/sfx/suspense.mp3\";\n\nlet soundEnum = 0;\nexport const SOUND_HOVER_OR_GRAB = soundEnum++;\nexport const SOUND_THAW = soundEnum++;\nexport const SOUND_PEN_STOP_DRAW = soundEnum++;\nexport const SOUND_PEN_UNDO_DRAW = soundEnum++;\nexport const SOUND_PEN_CHANGE_COLOR = soundEnum++;\nexport const SOUND_TOGGLE_MIC = soundEnum++;\nexport const SOUND_TELEPORT_START = soundEnum++;\nexport const SOUND_TELEPORT_END = soundEnum++;\nexport const SOUND_SNAP_ROTATE = soundEnum++;\nexport const SOUND_SPAWN_PEN = soundEnum++;\nexport const SOUND_PEN_START_DRAW = soundEnum++;\nexport const SOUND_CAMERA_TOOL_TOOK_SNAPSHOT = soundEnum++;\nexport const SOUND_ENTER_SCENE = soundEnum++;\nexport const SOUND_QUACK = soundEnum++;\nexport const SOUND_SPECIAL_QUACK = soundEnum++;\nexport const SOUND_CHAT_MESSAGE = soundEnum++;\nexport const SOUND_FREEZE = soundEnum++;\nexport const SOUND_PIN = soundEnum++;\nexport const SOUND_MEDIA_LOADING = soundEnum++;\nexport const SOUND_MEDIA_LOADED = soundEnum++;\n\nexport class SoundEffectsSystem {\n  constructor() {\n    this.pendingEffects = [];\n    this.audioContext = THREE.AudioContext.getContext();\n    const soundsAndUrls = [\n      [SOUND_HOVER_OR_GRAB, URL_TICK],\n      [SOUND_THAW, URL_TICK],\n      [SOUND_PEN_STOP_DRAW, URL_TICK],\n      [SOUND_PEN_UNDO_DRAW, URL_TICK],\n      [SOUND_PEN_CHANGE_COLOR, URL_TICK],\n      [SOUND_TOGGLE_MIC, URL_TICK],\n      [SOUND_TELEPORT_START, URL_TELEPORT_LOOP],\n      [SOUND_TELEPORT_END, URL_QUICK_TURN],\n      [SOUND_SNAP_ROTATE, URL_TAP_MELLOW],\n      [SOUND_SPAWN_PEN, URL_PEN_SPAWN],\n      [SOUND_PEN_START_DRAW, URL_PEN_DRAW],\n      [SOUND_CAMERA_TOOL_TOOK_SNAPSHOT, URL_CAMERA_SNAPSHOT],\n      [SOUND_ENTER_SCENE, URL_WELCOME],\n      [SOUND_QUACK, URL_QUACK],\n      [SOUND_SPECIAL_QUACK, URL_SPECIAL_QUACK],\n      [SOUND_CHAT_MESSAGE, URL_POP],\n      [SOUND_FREEZE, URL_FREEZE],\n      [SOUND_PIN, URL_TACK],\n      [SOUND_MEDIA_LOADING, URL_MEDIA_LOADING],\n      [SOUND_MEDIA_LOADED, URL_MEDIA_LOADED]\n    ];\n    const loading = new Map();\n    const load = url => {\n      let audioBufferPromise = loading.get(url);\n      if (!audioBufferPromise) {\n        audioBufferPromise = fetch(url)\n          .then(r => r.arrayBuffer())\n          .then(arrayBuffer => this.audioContext.decodeAudioData(arrayBuffer));\n        loading.set(url, audioBufferPromise);\n      }\n      return audioBufferPromise;\n    };\n    this.sounds = new Map();\n    soundsAndUrls.map(([sound, url]) => {\n      load(url).then(audioBuffer => {\n        this.sounds.set(sound, audioBuffer);\n      });\n    });\n  }\n\n  enqueueSound(sound, loop) {\n    const audioBuffer = this.sounds.get(sound);\n    if (!audioBuffer) return null;\n    // The nodes are very inexpensive to create, according to\n    // https://developer.mozilla.org/en-US/docs/Web/API/AudioBufferSourceNode\n    const source = this.audioContext.createBufferSource();\n    source.buffer = audioBuffer;\n    source.connect(this.audioContext.destination);\n    source.loop = loop;\n    this.pendingEffects.push(source);\n    return source;\n  }\n\n  playSoundOneShot(sound) {\n    return this.enqueueSound(sound, false);\n  }\n\n  playSoundLooped(sound) {\n    return this.enqueueSound(sound, true);\n  }\n\n  playSoundLoopedWithGain(sound) {\n    const audioBuffer = this.sounds.get(sound);\n    if (!audioBuffer) return null;\n\n    const source = this.audioContext.createBufferSource();\n    const gain = this.audioContext.createGain();\n    source.buffer = audioBuffer;\n    source.connect(gain);\n    gain.connect(this.audioContext.destination);\n    source.loop = true;\n    this.pendingEffects.push(source);\n    return { gain, source };\n  }\n\n  stopSoundNode(node) {\n    const index = this.pendingEffects.indexOf(node);\n    if (index !== -1) {\n      this.pendingEffects.splice(index, 1);\n    } else {\n      node.stop();\n    }\n  }\n\n  tick() {\n    for (let i = 0; i < this.pendingEffects.length; i++) {\n      this.pendingEffects[i].start();\n    }\n    this.pendingEffects.length = 0;\n  }\n}\n","// Computes an AABB that surrounds the object in question and all of its children.\n// Note that if the children have rotations, this probably won't return the tightest\n// possible AABB -- we could return a tighter one if we examined all of the vertices\n// of the geometry for ourselves, but we don't care enough for what we're using this\n// for to do so much work.\nconst computeObjectAABB = (function() {\n  const bounds = new THREE.Box3();\n  return function(root, target) {\n    target.makeEmpty();\n    root.traverse(node => {\n      const geometry = node.geometry;\n      if (geometry != null) {\n        if (geometry.boundingBox == null) {\n          geometry.computeBoundingBox();\n        }\n        target.union(bounds.copy(geometry.boundingBox).applyMatrix4(node.matrixWorld));\n      }\n    });\n    return target;\n  };\n})();\n\nconst rotation = new THREE.Euler();\nexport function getBox(entity, boxRoot) {\n  const box = new THREE.Box3();\n\n  rotation.copy(entity.object3D.rotation);\n  entity.object3D.rotation.set(0, 0, 0);\n\n  entity.object3D.updateMatrices(true, true);\n  boxRoot.updateMatrices(true, true);\n  boxRoot.updateMatrixWorld(true);\n\n  computeObjectAABB(boxRoot, box);\n\n  if (!box.isEmpty()) {\n    entity.object3D.worldToLocal(box.min);\n    entity.object3D.worldToLocal(box.max);\n    entity.object3D.rotation.copy(rotation);\n    entity.object3D.matrixNeedsUpdate = true;\n  }\n\n  boxRoot.matrixWorldNeedsUpdate = true;\n  boxRoot.updateMatrices();\n\n  return box;\n}\n\nexport function getScaleCoefficient(length, box) {\n  if (box.isEmpty()) return 1.0;\n\n  const { max, min } = box;\n  const dX = Math.abs(max.x - min.x);\n  const dY = Math.abs(max.y - min.y);\n  const dZ = Math.abs(max.z - min.z);\n  const lengthOfLongestComponent = Math.max(dX, dY, dZ);\n  return length / lengthOfLongestComponent;\n}\n","const THREE = AFRAME.THREE;\n\nfunction checkFloatTextureSupport() {\n  const renderer = new THREE.WebGLRenderer();\n\n  const scene = new THREE.Scene();\n  const size = 2;\n  const data = new Float32Array(size * size * 4);\n  const dataTexture = new THREE.DataTexture(data, size, size, THREE.RGBAFormat, THREE.FloatType);\n  const box = new THREE.Mesh(new THREE.PlaneBufferGeometry(1, 1), new THREE.MeshBasicMaterial({ map: dataTexture }));\n  box.material.map.needsUpdate = true;\n  scene.add(box);\n\n  renderer.render(scene, new THREE.Camera());\n  const result = renderer.context.getError() === 0;\n  renderer.dispose();\n  return result;\n}\n\nexport function patchWebGLRenderingContext() {\n  if (/Android.+Firefox/.test(navigator.userAgent)) {\n    // It appears that Galaxy S6 devices falsely report that they support\n    // OES_texture_float in Firefox. This workaround disables float textures\n    // for those devices.\n    // See https://github.com/mozilla/hubs/issues/32 and\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1338656\n    const originalGetExtension = WebGLRenderingContext.prototype.getExtension;\n    const supportsFloatTextures = checkFloatTextureSupport();\n    WebGLRenderingContext.prototype.getExtension = function patchedGetExtension(name) {\n      if (name === \"OES_texture_float\" && !supportsFloatTextures) {\n        return null;\n      }\n      return originalGetExtension.call(this, name);\n    };\n  }\n}\n","import { detectOS } from \"detect-browser\";\n\nexport function disableiOSZoom() {\n  if (detectOS(navigator.userAgent) !== \"iOS\") return;\n\n  let lastTouchAtMs = 0;\n\n  document.addEventListener(\"touchmove\", ev => {\n    if (ev.scale === 1) return;\n\n    ev.preventDefault();\n  });\n\n  document.addEventListener(\"touchend\", ev => {\n    const now = new Date().getTime();\n    const isDoubleTouch = now - lastTouchAtMs <= 300;\n    lastTouchAtMs = now;\n\n    if (isDoubleTouch) {\n      ev.preventDefault();\n    }\n  });\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nexport default class DialogContainer extends Component {\n  static propTypes = {\n    title: PropTypes.node,\n    children: PropTypes.node.isRequired,\n    onClose: PropTypes.func,\n    closable: PropTypes.bool,\n    wide: PropTypes.bool,\n    className: PropTypes.string\n  };\n\n  static defaultProps = {\n    closable: true\n  };\n\n  constructor(props) {\n    super(props);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onContainerClicked = this.onContainerClicked.bind(this);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.onKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.onKeyDown);\n  }\n\n  onKeyDown(e) {\n    if (this.props.closable && e.key === \"Escape\") {\n      this.props.onClose();\n    }\n  }\n\n  onContainerClicked = e => {\n    if (this.props.closable && e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return (\n      <div className={classNames(\"dialog-overlay\", this.props.className)}>\n        <div className=\"dialog\" onClick={this.onContainerClicked}>\n          <div className={`dialog__box ${this.props.wide ? \"dialog__wide\" : \"\"} `}>\n            <div className=\"dialog__box__contents\">\n              {this.props.closable &&\n                this.props.onClose && (\n                  <WithHoverSound>\n                    <button className=\"dialog__box__contents__close\" onClick={() => this.props.onClose()}>\n                      <i>\n                        <FontAwesomeIcon icon={faTimes} />\n                      </i>\n                    </button>\n                  </WithHoverSound>\n                )}\n              <div className=\"dialog__box__contents__title\">{this.props.title}</div>\n              <div className=\"dialog__box__contents__body\">{this.props.children}</div>\n              <div className=\"dialog__box__contents__button-container\" />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","export function addAnimationComponents(modelEl) {\n  if (!modelEl.components[\"animation-mixer\"]) {\n    return;\n  }\n\n  if (!modelEl.querySelector(\"[loop-animation]\")) {\n    modelEl.setAttribute(\"loop-animation\", \"\");\n  }\n}\n","// A-Frame blows away any npm debug log filters so this allow the user to set the log filter\n// via the query string.\nimport debug from \"debug\";\nimport qsTruthy from \"./qs_truthy\";\n\nconst qs = new URLSearchParams(location.search);\nconst isDebug = qsTruthy(\"debug\");\nconst logFilter = qs.get(\"log_filter\") || (isDebug && \"naf-janus-adapter:*\");\n\nif (logFilter) {\n  debug.enable(logFilter);\n}\n","/* eslint-disable */\n\n// Modified version of A-Frame's animation component to set matrixNeedsUpdate = true in the\n// scenario where the transform changes on an object during an animation.\n//\n// Changes are identified w comment // hubs\n//\n// Bugfix added 3/1/19 - If an animation component is removed before its delay setting, then\n// it erroneously restarts.\n\nvar anime = require(\"animejs\");\nvar components = AFRAME.components; // hubs\nvar registerComponent = AFRAME.registerComponent; // hubs\n//var THREE = require('../lib/three'); // hubs\nvar utils = AFRAME.utils; // hubs\n\ndelete AFRAME.components.animation; // hubs\n\nvar colorHelperFrom = new THREE.Color();\nvar colorHelperTo = new THREE.Color();\n\nvar getComponentProperty = utils.entity.getComponentProperty;\nvar setComponentProperty = utils.entity.setComponentProperty;\nvar splitCache = {};\n\nvar TYPE_COLOR = \"color\";\nvar PROP_POSITION = \"position\";\nvar PROP_ROTATION = \"rotation\";\nvar PROP_SCALE = \"scale\";\nvar STRING_COMPONENTS = \"components\";\nvar STRING_OBJECT3D = \"object3D\";\n\n/**\n * Animation component for A-Frame using anime.js.\n *\n * The component manually controls the tick by setting `autoplay: false` on anime.js and\n * manually * calling `animation.tick()` in the tick handler. To pause or resume, we toggle a\n * boolean * flag * `isAnimationPlaying`.\n *\n * anime.js animation config for tweenining Javascript objects and values works as:\n *\n *  config = {\n *    targets: {foo: 0.0, bar: '#000'},\n *    foo: 1.0,\n *    bar: '#FFF'\n *  }\n *\n * The above will tween each property in `targets`. The `to` values are set in the root of\n * the config.\n *\n * @member {object} animation - anime.js instance.\n * @member {boolean} animationIsPlaying - Control if animation is playing.\n */\nmodule.exports.Component = registerComponent(\"animation\", {\n  schema: {\n    autoplay: { default: true },\n    delay: { default: 0 },\n    dir: { default: \"\" },\n    dur: { default: 1000 },\n    easing: { default: \"easeInQuad\" },\n    elasticity: { default: 400 },\n    enabled: { default: true },\n    from: { default: \"\" },\n    loop: {\n      default: 0,\n      parse: function(value) {\n        // Boolean or integer.\n        if (value === true || value === \"true\") {\n          return true;\n        }\n        if (value === false || value === \"false\") {\n          return false;\n        }\n        return parseInt(value, 10);\n      }\n    },\n    property: { default: \"\" },\n    startEvents: { type: \"array\" },\n    pauseEvents: { type: \"array\" },\n    resumeEvents: { type: \"array\" },\n    round: { default: false },\n    to: { default: \"\" },\n    type: { default: \"\" },\n    isRawProperty: { default: false }\n  },\n\n  multiple: true,\n\n  init: function() {\n    var self = this;\n\n    this.eventDetail = { name: this.attrName };\n    this.time = 0;\n\n    this.animation = null;\n    this.animationIsPlaying = false;\n    this.onStartEvent = this.onStartEvent.bind(this);\n    this.beginAnimation = this.beginAnimation.bind(this);\n    this.pauseAnimation = this.pauseAnimation.bind(this);\n    this.resumeAnimation = this.resumeAnimation.bind(this);\n\n    this.fromColor = {};\n    this.toColor = {};\n    this.targets = {};\n    this.targetsArray = [];\n\n    this.updateConfigForDefault = this.updateConfigForDefault.bind(this);\n    this.updateConfigForRawColor = this.updateConfigForRawColor.bind(this);\n\n    this.config = {\n      complete: function() {\n        self.animationIsPlaying = false;\n        self.el.emit(\"animationcomplete\", self.eventDetail, false);\n        if (self.id) {\n          self.el.emit(\"animationcomplete__\" + self.id, self.eventDetail, false);\n        }\n      }\n    };\n  },\n\n  update: function(oldData) {\n    var config = this.config;\n    var data = this.data;\n\n    this.animationIsPlaying = false;\n\n    if (!this.data.enabled) {\n      return;\n    }\n\n    if (!data.property) {\n      return;\n    }\n\n    // Base config.\n    config.autoplay = false;\n    config.direction = data.dir;\n    config.duration = data.dur;\n    config.easing = data.easing;\n    config.elasticity = data.elasticity;\n    config.loop = data.loop;\n    config.round = data.round;\n\n    // Start new animation.\n    this.createAndStartAnimation();\n  },\n\n  tick: function(t, dt) {\n    if (!this.animationIsPlaying) {\n      return;\n    }\n    this.time += dt;\n    this.animation.tick(this.time);\n  },\n\n  remove: function() {\n    this.pauseAnimation();\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n  },\n\n  pause: function() {\n    this.paused = true;\n    this.pausedWasPlaying = this.animationIsPlaying;\n    this.pauseAnimation();\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n  },\n\n  /**\n   * `play` handler only for resuming scene.\n   */\n  play: function() {\n    if (!this.paused) {\n      return;\n    }\n    this.paused = false;\n    this.addEventListeners();\n    if (this.pausedWasPlaying) {\n      this.resumeAnimation();\n      this.pausedWasPlaying = false;\n    }\n  },\n\n  /**\n   * Start animation from scratch.\n   */\n  createAndStartAnimation: function() {\n    var data = this.data;\n\n    this.updateConfig();\n    this.animationIsPlaying = false;\n    this.animation = anime(this.config);\n\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n    this.addEventListeners();\n\n    // Wait for start events for animation.\n    if (!data.autoplay || (data.startEvents && data.startEvents.length)) {\n      return;\n    }\n\n    // Delay animation.\n    if (data.delay) {\n      // hubs\n      this.delayTimeout = setTimeout(this.beginAnimation, data.delay);\n      return;\n    }\n\n    // Play animation.\n    this.beginAnimation();\n  },\n\n  /**\n   * This is before animation start (including from startEvents).\n   * Set to initial state (config.from, time = 0, seekTime = 0).\n   */\n  beginAnimation: function() {\n    this.updateConfig();\n    this.time = 0;\n    this.animationIsPlaying = true;\n    this.stopRelatedAnimations();\n    this.el.emit(\"animationbegin\", this.eventDetail, false);\n  },\n\n  pauseAnimation: function() {\n    this.animationIsPlaying = false;\n  },\n\n  resumeAnimation: function() {\n    this.animationIsPlaying = true;\n  },\n\n  /**\n   * startEvents callback.\n   */\n  onStartEvent: function() {\n    if (!this.data.enabled) {\n      return;\n    }\n\n    this.updateConfig();\n    if (this.animation) {\n      this.animation.pause();\n    }\n    this.animation = anime(this.config);\n\n    // Include the delay before each start event.\n    if (this.data.delay) {\n      setTimeout(this.beginAnimation, this.data.delay);\n      return;\n    }\n    this.beginAnimation();\n  },\n\n  /**\n   * rawProperty: true and type: color;\n   */\n  updateConfigForRawColor: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var from;\n    var key;\n    var to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForRawColor)) {\n      return;\n    }\n\n    from = data.from === \"\" ? getRawProperty(el, data.property) : data.from;\n    to = data.to;\n\n    // Use r/g/b vector for color type.\n    this.setColorConfig(from, to);\n    from = this.fromColor;\n    to = this.toColor;\n\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) {\n      config[key] = to[key];\n    }\n\n    config.update = (function() {\n      var lastValue = {};\n      return function(anim) {\n        var value;\n        value = anim.animatables[0].target;\n        // For animation timeline.\n        if (value.r === lastValue.r && value.g === lastValue.g && value.b === lastValue.b) {\n          return;\n        }\n\n        setRawProperty(el, data.property, value, data.type);\n      };\n    })();\n  },\n\n  /**\n   * Stuff property into generic `property` key.\n   */\n  updateConfigForDefault: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var from;\n    var isBoolean;\n    var isNumber;\n    var to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForDefault)) {\n      return;\n    }\n\n    if (data.from === \"\") {\n      // Infer from.\n      from = isRawProperty(data) ? getRawProperty(el, data.property) : getComponentProperty(el, data.property);\n    } else {\n      // Explicit from.\n      from = data.from;\n    }\n\n    to = data.to;\n\n    isNumber = !isNaN(from || to);\n    if (isNumber) {\n      from = parseFloat(from);\n      to = parseFloat(to);\n    } else {\n      from = from ? from.toString() : from;\n      to = to ? to.toString() : to;\n    }\n\n    // Convert booleans to integer to allow boolean flipping.\n    isBoolean = data.to === \"true\" || data.to === \"false\" || data.to === true || data.to === false;\n    if (isBoolean) {\n      from = data.from === \"true\" || data.from === true ? 1 : 0;\n      to = data.to === \"true\" || data.to === true ? 1 : 0;\n    }\n\n    this.targets.aframeProperty = from;\n    config.targets = this.targets;\n    config.aframeProperty = to;\n    config.update = (function() {\n      var lastValue;\n\n      return function(anim) {\n        var value;\n        value = anim.animatables[0].target.aframeProperty;\n\n        // Need to do a last value check for animation timeline since all the tweening\n        // begins simultaenously even if the value has not changed. Also better for perf\n        // anyways.\n        if (value === lastValue) {\n          return;\n        }\n        lastValue = value;\n\n        if (isBoolean) {\n          value = value >= 1;\n        }\n\n        if (isRawProperty(data)) {\n          setRawProperty(el, data.property, value, data.type);\n        } else {\n          setComponentProperty(el, data.property, value);\n        }\n      };\n    })();\n  },\n\n  /**\n   * Extend x/y/z/w onto the config.\n   * Update vector by modifying object3D.\n   */\n  updateConfigForVector: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var key;\n    var from;\n    var to;\n\n    // Parse coordinates.\n    from =\n      data.from !== \"\"\n        ? utils.coordinates.parse(data.from) // If data.from defined, use that.\n        : getComponentProperty(el, data.property); // If data.from not defined, get on the fly.\n    to = utils.coordinates.parse(data.to);\n\n    if (data.property === PROP_ROTATION) {\n      toRadians(from);\n      toRadians(to);\n    }\n\n    // Set to and from.\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) {\n      config[key] = to[key];\n    }\n\n    // If animating object3D transformation, run more optimized updater.\n    if (data.property === PROP_POSITION || data.property === PROP_ROTATION || data.property === PROP_SCALE) {\n      config.update = (function() {\n        var lastValue = {};\n        return function(anim) {\n          var value = anim.animatables[0].target;\n\n          if (data.property === PROP_SCALE) {\n            value.x = Math.max(0.0001, value.x);\n            value.y = Math.max(0.0001, value.y);\n            value.z = Math.max(0.0001, value.z);\n          }\n\n          // For animation timeline.\n          if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n            return;\n          }\n\n          lastValue.x = value.x;\n          lastValue.y = value.y;\n          lastValue.z = value.z;\n\n          el.object3D[data.property].set(value.x, value.y, value.z);\n          el.object3D.matrixNeedsUpdate = true; // hubs\n        };\n      })();\n      return;\n    }\n\n    // Animating some vector.\n    config.update = (function() {\n      var lastValue = {};\n      return function(anim) {\n        var value = anim.animations[0].target;\n\n        // Animate rotation through radians.\n        // For animation timeline.\n        if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n          return;\n        }\n        lastValue.x = value.x;\n        lastValue.y = value.y;\n        lastValue.z = value.z;\n        setComponentProperty(el, data.property, value);\n      };\n    })();\n  },\n\n  /**\n   * Update the config before each run.\n   */\n  updateConfig: function() {\n    var propType;\n\n    // Route config type.\n    propType = getPropertyType(this.el, this.data.property);\n    if (isRawProperty(this.data) && this.data.type === TYPE_COLOR) {\n      this.updateConfigForRawColor();\n    } else if (propType === \"vec2\" || propType === \"vec3\" || propType === \"vec4\") {\n      this.updateConfigForVector();\n    } else {\n      this.updateConfigForDefault();\n    }\n  },\n\n  /**\n   * Wait for component to initialize.\n   */\n  waitComponentInitRawProperty: function(cb) {\n    var componentName;\n    var data = this.data;\n    var el = this.el;\n    var self = this;\n\n    if (data.from !== \"\") {\n      return false;\n    }\n\n    if (!data.property.startsWith(STRING_COMPONENTS)) {\n      return false;\n    }\n\n    componentName = splitDot(data.property)[1];\n    if (el.components[componentName]) {\n      return false;\n    }\n\n    el.addEventListener(\"componentinitialized\", function wait(evt) {\n      if (evt.detail.name !== componentName) {\n        return;\n      }\n      cb();\n      // Since the config was created async, create the animation now since we missed it\n      // earlier.\n      self.animation = anime(self.config);\n      el.removeEventListener(\"componentinitialized\", wait);\n    });\n    return true;\n  },\n\n  /**\n   * Make sure two animations on the same property don't fight each other.\n   * e.g., animation__mouseenter=\"property: material.opacity\"\n   *       animation__mouseleave=\"property: material.opacity\"\n   */\n  stopRelatedAnimations: function() {\n    var component;\n    var componentName;\n    for (componentName in this.el.components) {\n      component = this.el.components[componentName];\n      if (componentName === this.attrName) {\n        continue;\n      }\n      if (component.name !== \"animation\") {\n        continue;\n      }\n      if (!component.animationIsPlaying) {\n        continue;\n      }\n      if (component.data.property !== this.data.property) {\n        continue;\n      }\n      component.animationIsPlaying = false;\n    }\n  },\n\n  addEventListeners: function() {\n    var data = this.data;\n    var el = this.el;\n    addEventListeners(el, data.startEvents, this.onStartEvent);\n    addEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    addEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  removeEventListeners: function() {\n    var data = this.data;\n    var el = this.el;\n    removeEventListeners(el, data.startEvents, this.onStartEvent);\n    removeEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    removeEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  // hubs\n  cancelDelayedStart: function() {\n    if (this.delayTimeout) {\n      clearTimeout(this.delayTimeout);\n      this.delayTimeout = null;\n    }\n  },\n\n  setColorConfig: function(from, to) {\n    colorHelperFrom.set(from);\n    colorHelperTo.set(to);\n    from = this.fromColor;\n    to = this.toColor;\n    from.r = colorHelperFrom.r;\n    from.g = colorHelperFrom.g;\n    from.b = colorHelperFrom.b;\n    to.r = colorHelperTo.r;\n    to.g = colorHelperTo.g;\n    to.b = colorHelperTo.b;\n  }\n});\n\n/**\n * Given property name, check schema to see what type we are animating.\n * We just care whether the property is a vector.\n */\nfunction getPropertyType(el, property) {\n  var component;\n  var componentName;\n  var split;\n  var propertyName;\n\n  split = property.split(\".\");\n  componentName = split[0];\n  propertyName = split[1];\n  component = el.components[componentName] || components[componentName];\n\n  // Primitives.\n  if (!component) {\n    return null;\n  }\n\n  // Dynamic schema. We only care about vectors anyways.\n  if (propertyName && !component.schema[propertyName]) {\n    return null;\n  }\n\n  // Multi-prop.\n  if (propertyName) {\n    return component.schema[propertyName].type;\n  }\n\n  // Single-prop.\n  return component.schema.type;\n}\n\n/**\n * Convert object to radians.\n */\nfunction toRadians(obj) {\n  obj.x = THREE.Math.degToRad(obj.x);\n  obj.y = THREE.Math.degToRad(obj.y);\n  obj.z = THREE.Math.degToRad(obj.z);\n}\n\nfunction addEventListeners(el, eventNames, handler) {\n  var i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.addEventListener(eventNames[i], handler);\n  }\n}\n\nfunction removeEventListeners(el, eventNames, handler) {\n  var i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.removeEventListener(eventNames[i], handler);\n  }\n}\n\nfunction getRawProperty(el, path) {\n  var i;\n  var split;\n  var value;\n  split = splitDot(path);\n  value = el;\n  for (i = 0; i < split.length; i++) {\n    value = value[split[i]];\n  }\n  return value;\n}\n\nfunction setRawProperty(el, path, value, type) {\n  var i;\n  var split;\n  var propertyName;\n  var targetValue;\n\n  if (path.startsWith(\"object3D.rotation\")) {\n    value = THREE.Math.degToRad(value);\n  }\n\n  // Walk.\n  split = splitDot(path);\n  targetValue = el;\n  for (i = 0; i < split.length - 1; i++) {\n    targetValue = targetValue[split[i]];\n  }\n  propertyName = split[split.length - 1];\n\n  // Raw color.\n  if (type === TYPE_COLOR) {\n    if (\"r\" in targetValue[propertyName]) {\n      targetValue[propertyName].r = value.r;\n      targetValue[propertyName].g = value.g;\n      targetValue[propertyName].b = value.b;\n    } else {\n      targetValue[propertyName].x = value.r;\n      targetValue[propertyName].y = value.g;\n      targetValue[propertyName].z = value.b;\n    }\n    return;\n  }\n\n  targetValue[propertyName] = value;\n}\n\nfunction splitDot(path) {\n  if (path in splitCache) {\n    return splitCache[path];\n  }\n  splitCache[path] = path.split(\".\");\n  return splitCache[path];\n}\n\nfunction isRawProperty(data) {\n  return data.isRawProperty || data.property.startsWith(STRING_COMPONENTS) || data.property.startsWith(STRING_OBJECT3D);\n}\n","/**\n * Instantiates and updates a THREE.AnimationMixer on an entity.\n * @component animation-mixer\n */\nAFRAME.registerComponent(\"animation-mixer\", {\n  initMixer(animations) {\n    this.mixer = new THREE.AnimationMixer(this.el.object3D);\n    this.el.object3D.animations = animations;\n    this.animations = animations;\n  },\n\n  tick: function(t, dt) {\n    if (this.mixer) {\n      this.mixer.update(dt / 1000);\n    }\n  }\n});\n","/**\n * Emits audioFrequencyChange events based on a networked audio source\n * @namespace avatar\n * @component networked-audio-analyser\n */\nAFRAME.registerComponent(\"networked-audio-analyser\", {\n  async init() {\n    this.volume = 0;\n    this.prevVolume = 0;\n    this.smoothing = 0.3;\n    this.threshold = 0.01;\n    this.el.addEventListener(\"sound-source-set\", event => {\n      const ctx = THREE.AudioContext.getContext();\n      this.analyser = ctx.createAnalyser();\n      this.analyser.fftSize = 32;\n      this.levels = new Uint8Array(this.analyser.frequencyBinCount);\n      event.detail.soundSource.connect(this.analyser);\n    });\n  },\n\n  tick: function() {\n    if (!this.analyser) return;\n\n    // take care with compatibility, e.g. safari doesn't support getFloatTimeDomainData\n    this.analyser.getByteTimeDomainData(this.levels);\n\n    let sum = 0;\n    for (let i = 0; i < this.levels.length; i++) {\n      const amplitude = (this.levels[i] - 128) / 128;\n      sum += amplitude * amplitude;\n    }\n    let currVolume = Math.sqrt(sum / this.levels.length);\n    if (currVolume < this.threshold) {\n      currVolume = 0;\n    }\n    this.volume = this.smoothing * currVolume + (1 - this.smoothing) * this.prevVolume;\n    this.prevVolume = this.volume;\n  }\n});\n\n/**\n * Sets an entity's scale base on audioFrequencyChange events.\n * @namespace avatar\n * @component scale-audio-feedback\n */\nAFRAME.registerComponent(\"scale-audio-feedback\", {\n  schema: {\n    minScale: { default: 1 },\n    maxScale: { default: 2 }\n  },\n\n  init() {\n    this._playerCamera = document.getElementById(\"player-camera\").object3D;\n    this._playerCameraWorldPosition = new THREE.Vector3();\n    this._worldPosition = new THREE.Vector3();\n  },\n\n  tick() {\n    // TODO: come up with a cleaner way to handle this.\n    // bone's are \"hidden\" by scaling them with bone-visibility, without this we would overwrite that.\n    if (!this.el.object3D.visible) return;\n\n    const { minScale, maxScale } = this.data;\n\n    const audioAnalyser = this.el.components[\"networked-audio-analyser\"];\n\n    if (!audioAnalyser) return;\n\n    const { object3D } = this.el;\n\n    this._playerCameraWorldPosition.setFromMatrixPosition(this._playerCamera.matrixWorld);\n    this._worldPosition.setFromMatrixPosition(object3D.matrixWorld);\n    const distance = this._worldPosition.distanceTo(this._playerCameraWorldPosition) / 10;\n\n    const scale = Math.min(maxScale, minScale + (maxScale - minScale) * audioAnalyser.volume * 8 * distance);\n\n    object3D.scale.setScalar(scale);\n    object3D.matrixNeedsUpdate = true;\n  }\n});\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\n\n/**\n * Loops the given clip using this entity's animation mixer\n * @component loop-animation\n */\nAFRAME.registerComponent(\"loop-animation\", {\n  schema: {\n    paused: { type: \"boolean\", default: false },\n    clip: { type: \"string\" }\n  },\n\n  init() {\n    this.mixerEl = findAncestorWithComponent(this.el, \"animation-mixer\");\n\n    if (!this.mixerEl) {\n      console.warn(\"loop-animation component could not find an animation-mixer in its ancestors.\");\n      return;\n    }\n\n    this.updateClip();\n  },\n\n  update(oldData) {\n    if ((oldData.clip !== this.data.clip || oldData.paused !== this.data.paused) && this.mixerEl) {\n      if (oldData.clip !== this.data.clip) {\n        this.updateClip();\n      }\n\n      if (this.currentAction) {\n        this.currentAction.paused = this.data.paused;\n      }\n    }\n  },\n\n  updateClip() {\n    const { mixer, animations } = this.mixerEl.components[\"animation-mixer\"];\n    const clipName = this.data.clip;\n\n    if (animations.length === 0) {\n      return;\n    }\n\n    let clip;\n\n    if (!clipName) {\n      clip = animations[0];\n    } else {\n      clip = animations.find(({ name }) => name === clipName);\n    }\n\n    if (!clip) {\n      return;\n    }\n\n    const action = mixer.clipAction(clip, this.el.object3D);\n    action.enabled = true;\n    action.setLoop(THREE.LoopRepeat, Infinity).play();\n    this.currentAction = action;\n  },\n\n  destroy() {\n    if (this.currentAction) {\n      this.currentAction.enabled = false;\n      this.currentAction.stop();\n    }\n  }\n});\n","import \"three/examples/js/pmrem/PMREMGenerator\";\nimport \"three/examples/js/pmrem/PMREMCubeUVPacker\";\nimport qsTruthy from \"../utils/qs_truthy\";\nconst isBotMode = qsTruthy(\"bot\");\n\n/**\n * @author zz85 / https://github.com/zz85\n *\n * Based on \"A Practical Analytic Model for Daylight\"\n * aka The Preetham Model, the de facto standard analytic skydome model\n * http://www.cs.utah.edu/~shirley/papers/sunsky/sunsky.pdf\n *\n * First implemented by Simon Wallner\n * http://www.simonwallner.at/projects/atmospheric-scattering\n *\n * Improved by Martin Upitis\n * http://blenderartists.org/forum/showthread.php?245954-preethams-sky-impementation-HDR\n *\n * Three.js integration by zz85 http://twitter.com/blurspline\n */\n\nTHREE.Sky = function() {\n  const shader = THREE.Sky.SkyShader;\n\n  const material = new THREE.ShaderMaterial({\n    fragmentShader: shader.fragmentShader,\n    vertexShader: shader.vertexShader,\n    uniforms: THREE.UniformsUtils.clone(shader.uniforms),\n    side: THREE.BackSide\n  });\n\n  THREE.Mesh.call(this, new THREE.BoxBufferGeometry(1, 1, 1), material);\n};\n\nTHREE.Sky.prototype = Object.create(THREE.Mesh.prototype);\nTHREE.Sky.prototype.constructor = THREE.Sky;\n\nTHREE.Sky.SkyShader = {\n  uniforms: {\n    luminance: { value: 1 },\n    turbidity: { value: 2 },\n    rayleigh: { value: 1 },\n    mieCoefficient: { value: 0.005 },\n    mieDirectionalG: { value: 0.8 },\n    sunPosition: { value: new THREE.Vector3() }\n  },\n\n  vertexShader: [\n    \"uniform vec3 sunPosition;\",\n    \"uniform float rayleigh;\",\n    \"uniform float turbidity;\",\n    \"uniform float mieCoefficient;\",\n\n    \"varying vec3 vWorldPosition;\",\n    \"varying vec3 vSunDirection;\",\n    \"varying float vSunfade;\",\n    \"varying vec3 vBetaR;\",\n    \"varying vec3 vBetaM;\",\n    \"varying float vSunE;\",\n\n    \"const vec3 up = vec3( 0.0, 1.0, 0.0 );\",\n\n    // constants for atmospheric scattering\n    \"const float e = 2.71828182845904523536028747135266249775724709369995957;\",\n    \"const float pi = 3.141592653589793238462643383279502884197169;\",\n\n    // wavelength of used primaries, according to preetham\n    \"const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\",\n    // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n    // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\n    \"const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\",\n\n    // mie stuff\n    // K coefficient for the primaries\n    \"const float v = 4.0;\",\n    \"const vec3 K = vec3( 0.686, 0.678, 0.666 );\",\n    // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\n    \"const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\",\n\n    // earth shadow hack\n    // cutoffAngle = pi / 1.95;\n    \"const float cutoffAngle = 1.6110731556870734;\",\n    \"const float steepness = 1.5;\",\n    \"const float EE = 1000.0;\",\n\n    \"float sunIntensity( float zenithAngleCos ) {\",\n    \"\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\",\n    \"\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\",\n    \"}\",\n\n    \"vec3 totalMie( float T ) {\",\n    \"\tfloat c = ( 0.2 * T ) * 10E-18;\",\n    \"\treturn 0.434 * c * MieConst;\",\n    \"}\",\n\n    \"void main() {\",\n\n    \"\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\",\n    \"\tvWorldPosition = worldPosition.xyz;\",\n\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n    \"\tvSunDirection = normalize( sunPosition );\",\n\n    \"\tvSunE = sunIntensity( dot( vSunDirection, up ) );\",\n\n    \"\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\",\n\n    \"\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\",\n\n    // extinction (absorbtion + out scattering)\n    // rayleigh coefficients\n    \"\tvBetaR = totalRayleigh * rayleighCoefficient;\",\n\n    // mie coefficients\n    \"\tvBetaM = totalMie( turbidity ) * mieCoefficient;\",\n\n    \"}\"\n  ].join(\"\\n\"),\n\n  fragmentShader: [\n    \"varying vec3 vWorldPosition;\",\n    \"varying vec3 vSunDirection;\",\n    \"varying float vSunfade;\",\n    \"varying vec3 vBetaR;\",\n    \"varying vec3 vBetaM;\",\n    \"varying float vSunE;\",\n\n    \"uniform float luminance;\",\n    \"uniform float mieDirectionalG;\",\n\n    \"const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\",\n\n    // constants for atmospheric scattering\n    \"const float pi = 3.141592653589793238462643383279502884197169;\",\n\n    \"const float n = 1.0003;\", // refractive index of air\n    \"const float N = 2.545E25;\", // number of molecules per unit volume for air at\n    // 288.15K and 1013mb (sea level -45 celsius)\n\n    // optical length at zenith for molecules\n    \"const float rayleighZenithLength = 8.4E3;\",\n    \"const float mieZenithLength = 1.25E3;\",\n    \"const vec3 up = vec3( 0.0, 1.0, 0.0 );\",\n    // 66 arc seconds -> degrees, and the cosine of that\n    \"const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\",\n\n    // 3.0 / ( 16.0 * pi )\n    \"const float THREE_OVER_SIXTEENPI = 0.05968310365946075;\",\n    // 1.0 / ( 4.0 * pi )\n    \"const float ONE_OVER_FOURPI = 0.07957747154594767;\",\n\n    \"float rayleighPhase( float cosTheta ) {\",\n    \"\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\",\n    \"}\",\n\n    \"float hgPhase( float cosTheta, float g ) {\",\n    \"\tfloat g2 = pow( g, 2.0 );\",\n    \"\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\",\n    \"\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\",\n    \"}\",\n\n    // Filmic ToneMapping http://filmicgames.com/archives/75\n    \"const float A = 0.15;\",\n    \"const float B = 0.50;\",\n    \"const float C = 0.10;\",\n    \"const float D = 0.20;\",\n    \"const float E = 0.02;\",\n    \"const float F = 0.30;\",\n\n    \"const float whiteScale = 1.0748724675633854;\", // 1.0 / Uncharted2Tonemap(1000.0)\n\n    \"vec3 Uncharted2Tonemap( vec3 x ) {\",\n    \"\treturn ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;\",\n    \"}\",\n\n    \"void main() {\",\n    // optical length\n    // cutoff angle at 90 to avoid singularity in next formula.\n    \"\tfloat zenithAngle = acos( max( 0.0, dot( up, normalize( vWorldPosition - cameraPos ) ) ) );\",\n    \"\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\",\n    \"\tfloat sR = rayleighZenithLength * inverse;\",\n    \"\tfloat sM = mieZenithLength * inverse;\",\n\n    // combined extinction factor\n    \"\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\",\n\n    // in scattering\n    \"\tfloat cosTheta = dot( normalize( vWorldPosition - cameraPos ), vSunDirection );\",\n\n    \"\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\",\n    \"\tvec3 betaRTheta = vBetaR * rPhase;\",\n\n    \"\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );\",\n    \"\tvec3 betaMTheta = vBetaM * mPhase;\",\n\n    \"\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\",\n    \"\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\",\n\n    // nightsky\n    \"\tvec3 direction = normalize( vWorldPosition - cameraPos );\",\n    \"\tfloat theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]\",\n    \"\tfloat phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]\",\n    \"\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\",\n    \"\tvec3 L0 = vec3( 0.1 ) * Fex;\",\n\n    // composition + solar disc\n    \"\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\",\n    \"\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;\",\n\n    \"\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\",\n\n    \"\tvec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );\",\n    \"\tvec3 color = curr * whiteScale;\",\n\n    \"\tvec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\",\n\n    \"\tgl_FragColor = vec4( retColor, 1.0 );\",\n\n    \"}\"\n  ].join(\"\\n\")\n};\n\nAFRAME.registerComponent(\"skybox\", {\n  schema: {\n    turbidity: { type: \"number\", default: 10 },\n    rayleigh: { type: \"number\", default: 2 },\n    luminance: { type: \"number\", default: 1 },\n    mieCoefficient: { type: \"number\", default: 0.005 },\n    mieDirectionalG: { type: \"number\", default: 0.8 },\n    inclination: { type: \"number\", default: 0 },\n    azimuth: { type: \"number\", default: 0.15 },\n    distance: { type: \"number\", default: 8000 }\n  },\n\n  init() {\n    this.sky = new THREE.Sky();\n    this.el.setObject3D(\"mesh\", this.sky);\n    this.skyScene = new THREE.Scene();\n    this.cubeCamera = new THREE.CubeCamera(1, 100000, 512);\n    this.skyScene.add(this.cubeCamera);\n\n    this.updateEnvironmentMap = this.updateEnvironmentMap.bind(this);\n    // HACK: Render environment map on next frame to avoid bug where the render target texture is black.\n    // EXTRA HACK: Added timeout due to additional case where texture is black in avatar-selector in Firefox.\n    // This is likely due to the custom elements attached callback being synchronous on Chrome but not Firefox.\n    requestAnimationFrame(() => setTimeout(this.updateEnvironmentMap));\n  },\n\n  update(oldData) {\n    const uniforms = this.sky.material.uniforms;\n\n    if (this.data.turbidity !== oldData.turbidity) {\n      uniforms.turbidity.value = this.data.turbidity;\n    }\n\n    if (this.data.rayleigh !== oldData.rayleigh) {\n      uniforms.rayleigh.value = this.data.rayleigh;\n    }\n\n    if (this.data.luminance !== oldData.luminance) {\n      uniforms.luminance.value = this.data.luminance;\n    }\n\n    if (this.data.mieCoefficient !== oldData.mieCoefficient) {\n      uniforms.mieCoefficient.value = this.data.mieCoefficient;\n    }\n\n    if (this.data.mieDirectionalG !== oldData.mieDirectionalG) {\n      uniforms.mieDirectionalG.value = this.data.mieDirectionalG;\n    }\n\n    if (\n      this.data.inclination !== oldData.inclination ||\n      this.data.azimuth !== oldData.azimuth ||\n      this.data.distance !== oldData.distance\n    ) {\n      const theta = Math.PI * (this.data.inclination - 0.5);\n      const phi = 2 * Math.PI * (this.data.azimuth - 0.5);\n\n      const distance = this.data.distance;\n\n      const x = distance * Math.cos(phi);\n      const y = distance * Math.sin(phi) * Math.sin(theta);\n      const z = distance * Math.sin(phi) * Math.cos(theta);\n\n      uniforms.sunPosition.value.set(x, y, z).normalize();\n\n      // HACK Remove this if condition and always set the scale based on distance when the existing environments\n      // have their sky scales set to 1.\n      if (this.el.object3D.scale.x === 1) {\n        this.sky.scale.set(distance, distance, distance);\n      }\n\n      this.el.object3D.matrixNeedsUpdate = true;\n    }\n\n    this.updateEnvironmentMap();\n  },\n\n  updateEnvironmentMap() {\n    const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n\n    if (environmentMapComponent && !isBotMode) {\n      const renderer = this.el.sceneEl.renderer;\n      this.skyScene.add(this.sky);\n      this.cubeCamera.update(renderer, this.skyScene);\n      this.el.setObject3D(\"mesh\", this.sky);\n      const vrEnabled = renderer.vr.enabled;\n      renderer.vr.enabled = false;\n      const pmremGenerator = new THREE.PMREMGenerator(this.cubeCamera.renderTarget.texture);\n      pmremGenerator.update(renderer);\n      const pmremCubeUVPacker = new THREE.PMREMCubeUVPacker(pmremGenerator.cubeLods);\n      pmremCubeUVPacker.update(renderer);\n      renderer.vr.enabled = vrEnabled;\n      environmentMapComponent.updateEnvironmentMap(pmremCubeUVPacker.CubeUVRenderTarget.texture);\n      pmremGenerator.dispose();\n      pmremCubeUVPacker.dispose();\n    }\n  },\n\n  remove() {\n    this.el.removeObject3D(\"mesh\");\n  }\n});\n","const qs = new URLSearchParams(location.search);\n\nexport default function qsTruthy(param) {\n  const val = qs.get(param);\n  // if the param exists but is not set (e.g. \"?foo&bar\"), its value is the empty string.\n  return val === \"\" || /1|on|true|yes/i.test(val);\n}\n","import localeData from \"../assets/translations.data.json\";\nconst navigatorLang = ((navigator.languages && navigator.languages[0]) || navigator.language || navigator.userLanguage)\n  .toLowerCase()\n  .split(/[_-]+/)[0];\nexport const lang = (localeData[navigatorLang] && navigatorLang) || \"en\";\nexport const messages = localeData[lang] || localeData.en;\n","export function getSanitizedComponentMapping(inputComponent, inputProperty, publicComponents) {\n  const publicComponent = publicComponents[inputComponent];\n\n  if (!publicComponent) {\n    throw new Error(`Component \"${inputComponent}\" is not public.`);\n  }\n\n  const publicProperty = publicComponent.publicProperties[inputProperty];\n\n  if (!publicProperty) {\n    throw new Error(`Component \"${inputComponent}\"'s property \"${inputProperty}\" is not public.`);\n  }\n\n  return {\n    mappedComponent: publicComponent.mappedComponent,\n    mappedProperty: publicProperty.mappedProperty,\n    getMappedValue: publicProperty.getMappedValue\n  };\n}\n","import \"./components/gltf-model-plus\";\nimport { getSanitizedComponentMapping } from \"./utils/component-mappings\";\nimport { isHubsDestinationUrl } from \"./utils/media-utils\";\nconst PHYSICS_CONSTANTS = require(\"aframe-physics-system/src/constants\"),\n  TYPE = PHYSICS_CONSTANTS.TYPE,\n  SHAPE = PHYSICS_CONSTANTS.SHAPE,\n  FIT = PHYSICS_CONSTANTS.FIT;\nconst COLLISION_LAYERS = require(\"./constants\").COLLISION_LAYERS;\n\nAFRAME.GLTFModelPlus.registerComponent(\"duck\", \"duck\");\nAFRAME.GLTFModelPlus.registerComponent(\"quack\", \"quack\");\nAFRAME.GLTFModelPlus.registerComponent(\"sound\", \"sound\");\nAFRAME.GLTFModelPlus.registerComponent(\"css-class\", \"css-class\");\nAFRAME.GLTFModelPlus.registerComponent(\"interactable\", \"css-class\", (el, componentName) => {\n  el.setAttribute(componentName, \"interactable\");\n});\nAFRAME.GLTFModelPlus.registerComponent(\"super-spawner\", \"super-spawner\", (el, componentName, componentData) => {\n  //TODO: Do not automatically add these components\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n  el.setAttribute(\"hoverable-visuals\", {\n    cursorController: \"#cursor-controller\"\n  });\n  el.setAttribute(componentName, componentData);\n});\nAFRAME.GLTFModelPlus.registerComponent(\"gltf-model-plus\", \"gltf-model-plus\");\nAFRAME.GLTFModelPlus.registerComponent(\"media-loader\", \"media-loader\");\nAFRAME.GLTFModelPlus.registerComponent(\"body\", \"ammo-body\", el => {\n  //This is only required for migration of old environments with super-spawners\n  //will no longer be needed when spawners are added via Spoke instead.\n  el.setAttribute(\"ammo-body\", {\n    mass: 0,\n    type: TYPE.STATIC,\n    collisionFilterGroup: COLLISION_LAYERS.INTERACTABLES,\n    collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER\n  });\n});\nAFRAME.GLTFModelPlus.registerComponent(\"ammo-shape\", \"ammo-shape\");\nAFRAME.GLTFModelPlus.registerComponent(\"hide-when-quality\", \"hide-when-quality\");\nAFRAME.GLTFModelPlus.registerComponent(\"light\", \"light\", (el, componentName, componentData) => {\n  if (componentData.distance === 0) {\n    componentData.decay = 0;\n  }\n  el.setAttribute(componentName, componentData);\n  if (componentData.castShadow) {\n    // HACK: component.light isn't set until one frame after setArrtibute\n    setTimeout(() => {\n      el.components.light.light.shadow.camera.matrixNeedsUpdate = true;\n    }, 0);\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"ambient-light\", \"ambient-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"directional-light\", \"directional-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"hemisphere-light\", \"hemisphere-light\");\nfunction decayMigration(el, componentName, componentData) {\n  if (componentData.range === 0) {\n    componentData.decay = 0;\n  }\n  el.setAttribute(componentName, componentData);\n}\nAFRAME.GLTFModelPlus.registerComponent(\"point-light\", \"point-light\", decayMigration);\nAFRAME.GLTFModelPlus.registerComponent(\"spot-light\", \"spot-light\", decayMigration);\n\nAFRAME.GLTFModelPlus.registerComponent(\"skybox\", \"skybox\");\nAFRAME.GLTFModelPlus.registerComponent(\"layers\", \"layers\");\nAFRAME.GLTFModelPlus.registerComponent(\"shadow\", \"shadow\");\nAFRAME.GLTFModelPlus.registerComponent(\"water\", \"water\");\nAFRAME.GLTFModelPlus.registerComponent(\"scale-audio-feedback\", \"scale-audio-feedback\");\nAFRAME.GLTFModelPlus.registerComponent(\"animation-mixer\", \"animation-mixer\");\nAFRAME.GLTFModelPlus.registerComponent(\"loop-animation\", \"loop-animation\");\nAFRAME.GLTFModelPlus.registerComponent(\n  \"box-collider\",\n  \"ammo-shape\",\n  (() => {\n    const euler = new THREE.Euler();\n    return (el, componentName, componentData) => {\n      const { scale, rotation } = componentData;\n      euler.set(rotation.x, rotation.y, rotation.z);\n      const orientation = new THREE.Quaternion().setFromEuler(euler);\n      el.setAttribute(componentName, {\n        type: SHAPE.BOX,\n        fit: FIT.MANUAL,\n        offset: componentData.position,\n        halfExtents: { x: scale.x / 2, y: scale.y / 2, z: scale.z / 2 },\n        orientation\n      });\n    };\n  })()\n);\nAFRAME.GLTFModelPlus.registerComponent(\"visible\", \"visible\", (el, componentName, componentData) => {\n  if (typeof componentData === \"object\") {\n    el.setAttribute(componentName, componentData.visible);\n  } else {\n    el.setAttribute(componentName, componentData);\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"spawn-point\", \"spawn-point\");\nAFRAME.GLTFModelPlus.registerComponent(\"sticky-zone\", \"sticky-zone\");\nAFRAME.GLTFModelPlus.registerComponent(\"nav-mesh\", \"nav-mesh\", (el, _componentName, componentData) => {\n  const nav = AFRAME.scenes[0].systems.nav;\n  const zone = componentData.zone || \"character\";\n  let found = false;\n  el.object3D.traverse(node => {\n    if (node.isMesh && !found) {\n      found = true;\n      nav.loadMesh(node, zone);\n    }\n  });\n  // There isn't actually an a-frame nav-mesh component, but we want to tag this el as a nav-mesh since\n  // nav-mesh-helper will query for it later.\n  el.setAttribute(\"nav-mesh\");\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"pinnable\", \"pinnable\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"media\", \"media\", (el, componentName, componentData) => {\n  if (componentData.id) {\n    el.setAttribute(\"networked\", {\n      template: \"#interactable-media\",\n      owner: \"scene\",\n      persistent: true,\n      networkId: componentData.id\n    });\n  }\n\n  el.setAttribute(\"media-loader\", {\n    src: componentData.src,\n    resize: true,\n    resolve: true,\n    fileIsOwned: true,\n    animate: false\n  });\n\n  if (componentData.pageIndex) {\n    el.setAttribute(\"media-pager\", { index: componentData.pageIndex });\n  }\n\n  if (componentData.paused !== undefined) {\n    el.setAttribute(\"media-video\", { videoPaused: componentData.paused });\n  }\n\n  if (componentData.time) {\n    el.setAttribute(\"media-video\", { time: componentData.time });\n  }\n});\n\nfunction mediaInflator(el, componentName, componentData, components) {\n  let isControlled = true;\n\n  if (components.networked) {\n    // TODO: When non-hubs links can be traversed, make all link components controlled so you can open them.\n    isControlled =\n      componentData.controls || isHubsDestinationUrl(componentData.src) || isHubsDestinationUrl(componentData.href);\n\n    const hasVolume = componentName === \"video\";\n    const templateName = isControlled || hasVolume ? \"#static-controlled-media\" : \"#static-media\";\n\n    el.setAttribute(\"networked\", {\n      template: templateName,\n      owner: \"scene\",\n      persistent: true,\n      networkId: components.networked.id\n    });\n  }\n\n  const mediaOptions = {};\n\n  if (componentName === \"video\" || componentName === \"image\") {\n    mediaOptions.projection = componentData.projection;\n  }\n\n  if (componentName === \"video\") {\n    mediaOptions.videoPaused = !componentData.autoPlay;\n    mediaOptions.volume = componentData.volume;\n    mediaOptions.loop = componentData.loop;\n    mediaOptions.audioType = componentData.audioType;\n    mediaOptions.hidePlaybackControls = !isControlled;\n\n    if (componentData.audioType === \"pannernode\") {\n      mediaOptions.distanceModel = componentData.distanceModel;\n      mediaOptions.rolloffFactor = componentData.rolloffFactor;\n      mediaOptions.refDistance = componentData.refDistance;\n      mediaOptions.maxDistance = componentData.maxDistance;\n      mediaOptions.coneInnerAngle = componentData.coneInnerAngle;\n      mediaOptions.coneOuterAngle = componentData.coneOuterAngle;\n      mediaOptions.coneOuterGain = componentData.coneOuterGain;\n    }\n\n    el.setAttribute(\"video-pause-state\", { paused: mediaOptions.videoPaused });\n  }\n\n  const src = componentName === \"link\" ? componentData.href : componentData.src;\n\n  el.setAttribute(\"media-loader\", {\n    src,\n    resize: true,\n    resolve: true,\n    fileIsOwned: true,\n    animate: false,\n    mediaOptions\n  });\n}\n\nAFRAME.GLTFModelPlus.registerComponent(\"image\", \"image\", mediaInflator);\nAFRAME.GLTFModelPlus.registerComponent(\"video\", \"video\", mediaInflator, (name, property, value) => {\n  if (property === \"paused\") {\n    return { name: \"video-pause-state\", property, value };\n  } else {\n    return null;\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"link\", \"link\", mediaInflator);\n\nAFRAME.GLTFModelPlus.registerComponent(\"hoverable\", \"is-remote-hover-target\", el => {\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"spawner\", \"spawner\", (el, componentName, componentData) => {\n  el.setAttribute(\"media-loader\", {\n    src: componentData.src,\n    resolve: true,\n    fileIsOwned: true,\n    animate: false\n  });\n  el.setAttribute(\"css-class\", \"interactable\");\n  el.setAttribute(\"super-spawner\", {\n    src: componentData.src,\n    resolve: true,\n    template: \"#interactable-media\"\n  });\n  el.setAttribute(\"hoverable-visuals\", {\n    cursorController: \"#cursor-controller\"\n  });\n  el.setAttribute(\"ammo-body\", {\n    mass: 0,\n    type: TYPE.STATIC,\n    collisionFilterGroup: COLLISION_LAYERS.INTERACTABLES,\n    collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER\n  });\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n});\n\nconst publicComponents = {\n  video: {\n    mappedComponent: \"video-pause-state\",\n    publicProperties: {\n      paused: {\n        mappedProperty: \"paused\",\n        getMappedValue(value) {\n          return !!value;\n        }\n      }\n    }\n  },\n  \"loop-animation\": {\n    mappedComponent: \"loop-animation\",\n    publicProperties: {\n      paused: {\n        mappedProperty: \"paused\",\n        getMappedValue(value) {\n          return !!value;\n        }\n      }\n    }\n  }\n};\n\nAFRAME.GLTFModelPlus.registerComponent(\n  \"trigger-volume\",\n  \"trigger-volume\",\n  (el, componentName, componentData, components, indexToEntityMap) => {\n    const {\n      size,\n      target,\n      enterComponent,\n      enterProperty,\n      enterValue,\n      leaveComponent,\n      leaveProperty,\n      leaveValue\n    } = componentData;\n\n    let enterComponentMapping, leaveComponentMapping, targetEntity;\n\n    try {\n      enterComponentMapping = getSanitizedComponentMapping(enterComponent, enterProperty, publicComponents);\n      leaveComponentMapping = getSanitizedComponentMapping(leaveComponent, leaveProperty, publicComponents);\n\n      targetEntity = indexToEntityMap[target];\n\n      if (!targetEntity) {\n        throw new Error(`Couldn't find target entity with index: ${target}.`);\n      }\n    } catch (e) {\n      console.warn(`Error inflating gltf component \"trigger-volume\": ${e.message}`);\n      return;\n    }\n\n    // Filter out scope and colliders properties.\n    el.setAttribute(\"trigger-volume\", {\n      colliders: \"#player-camera\",\n      size,\n      target: targetEntity,\n      enterComponent: enterComponentMapping.mappedComponent,\n      enterProperty: enterComponentMapping.mappedProperty,\n      enterValue: enterComponentMapping.getMappedValue(enterValue),\n      leaveComponent: leaveComponentMapping.mappedComponent,\n      leaveProperty: leaveComponentMapping.mappedProperty,\n      leaveValue: leaveComponentMapping.getMappedValue(leaveValue)\n    });\n  }\n);\n","module.exports = __webpack_public_path__ + \"assets/LoadingObject_Atom-7dcc3b81897e68b740c1cf12b6cf4c3f.glb\";","module.exports = __webpack_public_path__ + \"assets/sfx/teleport-loop-84e2caa4f62e5c6d6ce339b0c715c06d.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/quickTurn-cda89edb1a7a32e4442cac70cd2694be.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/tap_mellow-673398d6e97818ec4b675708d460bd0f.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/PenSpawn-aac1f534773040f0fafa41e9db76017b.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/PenDraw1-ddbdc17a6beefecbca2685c8c9d0d2d5.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/PicSnapHey-0228ddd197e5a6d88f7bcd2ceb340f8e.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/welcome-0083300978d5dd05eaa376f65761da47.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/quack-1f18502834f8f1db43990b769c2ab193.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/specialquack-6d1a192a6092e8dfed5d3de063755ee2.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/pop-5784f3bcfaf98637147737448d6df8df.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/Eb_blip-8d7302990e83d6798400a6027dce3936.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/tack-0d55b064794faaa1733fcf6bc89cad0c.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/A_bendUp-de32e556413bb2a527fb514984738c70.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/suspense-f27c64840e5ede36ec694c22a030615c.mp3\";","module.exports = __webpack_public_path__ + \"assets/waternormals-4418dde3f6abc21dc32506acf5f5b093.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/hub-preview-white-ccefba3b70ae589a0ca5ae3230c39299.png\";","import { avatars } from \"../assets/avatars/avatars.js\";\n\nconst names = [\n  \"Baers-Pochard\",\n  \"Baikal-Teal\",\n  \"Barrows-Goldeneye\",\n  \"Blue-Billed\",\n  \"Blue-Duck\",\n  \"Blue-Winged\",\n  \"Brown-Teal\",\n  \"Bufflehead\",\n  \"Canvasback\",\n  \"Cape-Shoveler\",\n  \"Chestnut-Teal\",\n  \"Chiloe-Wigeon\",\n  \"Cinnamon-Teal\",\n  \"Comb-Duck\",\n  \"Common-Eider\",\n  \"Common-Goldeneye\",\n  \"Common-Merganser\",\n  \"Common-Pochard\",\n  \"Common-Scoter\",\n  \"Common-Shelduck\",\n  \"Cotton-Pygmy\",\n  \"Crested-Duck\",\n  \"Crested-Shelduck\",\n  \"Eatons-Pintail\",\n  \"Falcated\",\n  \"Ferruginous\",\n  \"Freckled-Duck\",\n  \"Gadwall\",\n  \"Garganey\",\n  \"Greater-Scaup\",\n  \"Green-Pygmy\",\n  \"Grey-Teal\",\n  \"Hardhead\",\n  \"Harlequin\",\n  \"Hartlaubs\",\n  \"Hooded-Merganser\",\n  \"Hottentot-Teal\",\n  \"Kelp-Goose\",\n  \"King-Eider\",\n  \"Lake-Duck\",\n  \"Laysan-Duck\",\n  \"Lesser-Scaup\",\n  \"Long-Tailed\",\n  \"Maccoa-Duck\",\n  \"Mallard\",\n  \"Mandarin\",\n  \"Marbled-Teal\",\n  \"Mellers-Duck\",\n  \"Merganser\",\n  \"Northern-Pintail\",\n  \"Orinoco-Goose\",\n  \"Paradise-Shelduck\",\n  \"Plumed-Whistler\",\n  \"Puna-Teal\",\n  \"Pygmy-Goose\",\n  \"Radjah-Shelduck\",\n  \"Red-Billed\",\n  \"Red-Crested\",\n  \"Red-Shoveler\",\n  \"Ring-Necked\",\n  \"Ringed-Teal\",\n  \"Rosy-Billed\",\n  \"Ruddy-Shelduck\",\n  \"Salvadoris-Teal\",\n  \"Scaly-Sided\",\n  \"Shelduck\",\n  \"Shoveler\",\n  \"Silver-Teal\",\n  \"Smew\",\n  \"Spectacled-Eider\",\n  \"Spot-Billed\",\n  \"Spotted-Whistler\",\n  \"Steamerduck\",\n  \"Stellers-Eider\",\n  \"Sunda-Teal\",\n  \"Surf-Scoter\",\n  \"Tufted-Duck\",\n  \"Velvet-Scoter\",\n  \"Wandering-Whistler\",\n  \"Whistling-duck\",\n  \"White-Backed\",\n  \"White-Cheeked\",\n  \"White-Winged\",\n  \"Wigeon\",\n  \"Wood-Duck\",\n  \"Yellow-Billed\"\n];\n\nfunction selectRandom(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nexport function generateRandomName() {\n  return `${selectRandom(names)}-${Math.floor(10000 + Math.random() * 10000)}`;\n}\n\nexport const avatarIds = avatars.map(av => av.id);\n\nexport function generateDefaultProfile() {\n  return {\n    avatarId: selectRandom(avatarIds)\n  };\n}\n","import { Validator } from \"jsonschema\";\nimport merge from \"deepmerge\";\nimport Cookies from \"js-cookie\";\nimport jwtDecode from \"jwt-decode\";\n\nconst LOCAL_STORE_KEY = \"___hubs_store\";\nconst STORE_STATE_CACHE_KEY = Symbol();\nconst OAUTH_FLOW_CREDENTIALS_KEY = \"ret-oauth-flow-account-credentials\";\nconst validator = new Validator();\nimport { EventTarget } from \"event-target-shim\";\nimport { generateDefaultProfile, generateRandomName } from \"../utils/identity.js\";\n\n// Durable (via local-storage) schema-enforced state that is meant to be consumed via forward data flow.\n// (Think flux but with way less incidental complexity, at least for now :))\nexport const SCHEMA = {\n  id: \"/HubsStore\",\n\n  definitions: {\n    profile: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        displayName: { type: \"string\", pattern: \"^[A-Za-z0-9-]{3,32}$\" },\n        avatarId: { type: \"string\" },\n        personalAvatarId: { type: \"string\" }\n      }\n    },\n\n    credentials: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        token: { type: [\"null\", \"string\"] },\n        email: { type: [\"null\", \"string\"] }\n      }\n    },\n\n    activity: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        hasFoundFreeze: { type: \"boolean\" },\n        hasChangedName: { type: \"boolean\" },\n        hasAcceptedProfile: { type: \"boolean\" },\n        lastEnteredAt: { type: \"string\" },\n        hasPinned: { type: \"boolean\" },\n        hasRotated: { type: \"boolean\" },\n        hasRecentered: { type: \"boolean\" },\n        hasScaled: { type: \"boolean\" },\n        hasHoveredInWorldHud: { type: \"boolean\" }\n      }\n    },\n\n    settings: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        lastUsedMicDeviceId: { type: \"string\" }\n      }\n    },\n\n    confirmedDiscordRooms: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n\n    uploadPromotionTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          fileId: { type: \"string\" },\n          promotionToken: { type: \"string\" }\n        }\n      }\n    },\n\n    creatorAssignmentTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          creatorAssignmentToken: { type: \"string\" }\n        }\n      }\n    }\n  },\n\n  type: \"object\",\n\n  properties: {\n    profile: { $ref: \"#/definitions/profile\" },\n    credentials: { $ref: \"#/definitions/credentials\" },\n    activity: { $ref: \"#/definitions/activity\" },\n    settings: { $ref: \"#/definitions/settings\" },\n    confirmedDiscordRooms: { $ref: \"#/definitions/confirmedDiscordRooms\" },\n    uploadPromotionTokens: { $ref: \"#/definitions/uploadPromotionTokens\" },\n    creatorAssignmentTokens: { $ref: \"#/definitions/creatorAssignmentTokens\" }\n  },\n\n  additionalProperties: false\n};\n\nexport default class Store extends EventTarget {\n  constructor() {\n    super();\n\n    if (localStorage.getItem(LOCAL_STORE_KEY) === null) {\n      localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify({}));\n    }\n    this.update({\n      activity: {},\n      settings: {},\n      credentials: {},\n      profile: {},\n      confirmedDiscordRooms: [],\n      uploadPromotionTokens: [],\n      creatorAssignmentTokens: []\n    });\n\n    const oauthFlowCredentials = Cookies.getJSON(OAUTH_FLOW_CREDENTIALS_KEY);\n    if (oauthFlowCredentials) {\n      this.update({ credentials: oauthFlowCredentials });\n      this.resetToRandomLegacyAvatar();\n      Cookies.remove(OAUTH_FLOW_CREDENTIALS_KEY);\n    }\n  }\n\n  // Initializes store with any default bits\n  init = () => {\n    this.update({\n      profile: { ...generateDefaultProfile(), ...(this.state.profile || {}) }\n    });\n\n    // Regenerate name to encourage users to change it.\n    if (!this.state.activity.hasChangedName) {\n      this.update({ profile: { displayName: generateRandomName() } });\n    }\n  };\n\n  resetToRandomLegacyAvatar = () => {\n    this.update({\n      profile: { ...(this.state.profile || {}), ...generateDefaultProfile() }\n    });\n  };\n\n  get state() {\n    if (!this.hasOwnProperty(STORE_STATE_CACHE_KEY)) {\n      this[STORE_STATE_CACHE_KEY] = JSON.parse(localStorage.getItem(LOCAL_STORE_KEY));\n    }\n\n    return this[STORE_STATE_CACHE_KEY];\n  }\n\n  get credentialsAccountId() {\n    if (this.state.credentials.token) {\n      return jwtDecode(this.state.credentials.token).sub;\n    } else {\n      return null;\n    }\n  }\n\n  resetConfirmedDiscordRooms() {\n    // merge causing us some annoyance here :(\n    const overwriteMerge = (destinationArray, sourceArray) => sourceArray;\n    this.update({ confirmedDiscordRooms: [] }, { arrayMerge: overwriteMerge });\n  }\n\n  resetTipActivityFlags() {\n    this.update({ activity: { hasRotated: false, hasPinned: false, hasRecentered: false, hasScaled: false } });\n  }\n\n  update(newState, mergeOpts) {\n    const finalState = merge(this.state, newState, mergeOpts);\n    const { valid } = validator.validate(finalState, SCHEMA);\n\n    if (!valid) {\n      // Intentionally not including details about the state or validation result here, since we don't want to leak\n      // sensitive data in the error message.\n      throw new Error(`Write to store failed schema validation.`);\n    }\n\n    localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify(finalState));\n    delete this[STORE_STATE_CACHE_KEY];\n\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    return finalState;\n  }\n}\n","export const avatars = [\n  {\n    id: \"botdefault\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotDefault_Avatar-9f71f8ff22.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botdefault-thumb-42C4C7D3C01D085EAFDAC8BACE591CE6.png\"\n  },\n  {\n    id: \"botbobo\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotBobo_Avatar-f9740a010b.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botbobo-thumb-261278FD5831E9CD89610D15948F23E4.png\"\n  },\n  {\n    id: \"botdom\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotDom_Avatar-0c48bf15a5.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botdom-thumb-1160EB5E81D24F12CE643C520CE1E99E.png\"\n  },\n  {\n    id: \"botgreg\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotGreg_Avatar-98d39797bb.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botgreg-thumb-F2A37F14F9C342EE44DDE9B24DD9B9FC.png\"\n  },\n  {\n    id: \"botguest\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotGuest_Avatar-78cd857332.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botguest-thumb-F7A471250E2C10C2709325C3B02A8BBB.png\"\n  },\n  {\n    id: \"botjim\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotJim_Avatar-d28005a687.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botjim-thumb-A2D195C1A51A082BCED58BD172481B39.png\"\n  },\n  {\n    id: \"botkev\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotKev_Avatar-a95787bb51.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botkev-thumb-90746A7349E3F964C913EA612EE9A53F.png\"\n  },\n  {\n    id: \"botpinky\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotPinky_Avatar-b0b93f8675.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botpinky-thumb-C2E69D4479077766B988DC3EE4F30BE5.png\"\n  },\n  {\n    id: \"botrobert\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotRobert_Avatar-e9554880f3.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botrobert-thumb-9C33F2C752326E2CF4321EAA7BDB4E47.png\"\n  },\n  {\n    id: \"botwoody\",\n    model: \"https://asset-bundles-prod.reticulum.io/bots/BotWoody_Avatar-0140485a23.gltf\",\n    thumbnail: \"https://asset-bundles-prod.reticulum.io/bots/botwoody-thumb-F1F1FA7E21301B5AC1D8872B4ED0CC56.png\"\n  }\n];\n","export function forEachMaterial(object3D, fn) {\n  if (!object3D.material) return;\n\n  if (Array.isArray(object3D.material)) {\n    object3D.material.forEach(fn);\n  } else {\n    fn(object3D.material);\n  }\n}\n\nexport function mapMaterials(object3D, fn) {\n  if (!object3D.material) return;\n\n  if (Array.isArray(object3D.material)) {\n    return object3D.material.map(fn);\n  } else {\n    return fn(object3D.material);\n  }\n}\n","const zeroPos = new THREE.Vector3(0, 0, 0);\nconst zeroQuat = new THREE.Quaternion();\nconst oneScale = new THREE.Vector3(1, 1, 1);\nconst identity = new THREE.Matrix4();\nidentity.identity();\n\n// Patch animation system\nconst bindingSetters = THREE.PropertyBinding.prototype.SetterByBindingTypeAndVersioning;\nconst Versioning = THREE.PropertyBinding.prototype.Versioning;\n\n// For all binding types, monkey patch the setters that require world matrix\n// updates to also flip matrixNeedsUpdate\nfor (let i = 0; i < bindingSetters.length; i++) {\n  const setter = bindingSetters[i][Versioning.MatrixWorldNeedsUpdate];\n  if (!setter) continue;\n\n  bindingSetters[i][Versioning.MatrixWorldNeedsUpdate] = function() {\n    const v = setter.apply(this, arguments);\n    this.targetObject.matrixNeedsUpdate = true;\n    return v;\n  };\n}\n\nTHREE.Object3D.prototype.getWorldPosition = function(target) {\n  if (target === undefined) {\n    console.warn(\"THREE.Object3D: .getWorldPosition() target is now required\");\n    target = new THREE.Vector3();\n  }\n\n  // New function, defined below (used instead of updateMatrixWorld)\n  this.updateMatrices();\n\n  return target.setFromMatrixPosition(this.matrixWorld);\n};\n\nTHREE.Object3D.prototype.getWorldQuaternion = (function() {\n  const position = new THREE.Vector3();\n  const scale = new THREE.Vector3();\n\n  return function getWorldQuaternion(target) {\n    if (target === undefined) {\n      console.warn(\"THREE.Object3D: .getWorldQuaternion() target is now required\");\n      target = new THREE.Quaternion();\n    }\n\n    // New function, defined below (used instead of updateMatrixWorld)\n    this.updateMatrices();\n    this.matrixWorld.decompose(position, target, scale);\n\n    return target;\n  };\n})();\n\nTHREE.Object3D.getWorldScale = (function() {\n  const position = new THREE.Vector3();\n  const quaternion = new THREE.Quaternion();\n\n  return function getWorldScale(target) {\n    if (target === undefined) {\n      console.warn(\"THREE.Object3D: .getWorldScale() target is now required\");\n      target = new THREE.Vector3();\n    }\n\n    // New function, defined below (used instead of updateMatrixWorld)\n    this.updateMatrices();\n    this.matrixWorld.decompose(position, quaternion, target);\n\n    return target;\n  };\n})();\n\nconst handleMatrixModification = o => {\n  if (!o.matrixIsModified) {\n    o.matrixIsModified = true;\n\n    if (o.cachedMatrixWorld) {\n      o.cachedMatrixWorld.copy(o.matrixWorld);\n      o.matrixWorld = o.cachedMatrixWorld;\n    }\n  }\n};\n\nconst updateMatrix = THREE.Object3D.prototype.updateMatrix;\nTHREE.Object3D.prototype.updateMatrix = function() {\n  updateMatrix.apply(this, arguments);\n  handleMatrixModification(this);\n};\n\nconst applyMatrix = THREE.Object3D.prototype.applyMatrix;\nTHREE.Object3D.prototype.applyMatrix = function() {\n  applyMatrix.apply(this, arguments);\n  handleMatrixModification(this);\n};\n\n// By the end of this function this.matrix reflects the updated local matrix\n// and this.matrixWorld reflects the updated world matrix, taking into account\n// parent matrices.\n//\n// forceLocalUpdate - Forces the local matrix to be updated regardless of if it has not\n// been marked dirty.\n//\n// forceWorldUpdate - Forces the world matrix to be updated regardless of if the local matrix\n// has been updated since the last update.\n//\n// skipParents - unless true, all parent matricies are updated before updating this object's\n// local and world matrix.\n//\nTHREE.Object3D.prototype.updateMatrices = function(forceLocalUpdate, forceWorldUpdate, skipParents) {\n  if (!this.hasHadFirstMatrixUpdate) {\n    if (\n      !this.position.equals(zeroPos) ||\n      !this.quaternion.equals(zeroQuat) ||\n      !this.scale.equals(oneScale) ||\n      !this.matrix.equals(identity)\n    ) {\n      // Only update the matrix the first time if its non-identity, this way\n      // this.matrixIsModified will remain false until the default\n      // identity matrix is updated.\n      this.updateMatrix();\n    }\n\n    this.hasHadFirstMatrixUpdate = true;\n    this.matrixWorldNeedsUpdate = true;\n    this.cachedMatrixWorld = this.matrixWorld;\n  } else if (this.matrixNeedsUpdate || this.matrixAutoUpdate || forceLocalUpdate) {\n    this.updateMatrix();\n    if (this.matrixNeedsUpdate) this.matrixNeedsUpdate = false;\n  }\n\n  if (!skipParents && this.parent) {\n    this.parent.updateMatrices(false, forceWorldUpdate, false);\n    this.matrixWorldNeedsUpdate = this.matrixWorldNeedsUpdate || this.parent.childrenNeedMatrixWorldUpdate;\n  }\n\n  if (this.matrixWorldNeedsUpdate || forceWorldUpdate) {\n    if (this.parent === null) {\n      this.matrixWorld.copy(this.matrix);\n    } else {\n      // If the matrix is unmodified, it is the identity matrix,\n      // and hence we can use the parent's world matrix directly.\n      //\n      // Note this assumes all callers will either not pass skipParents=true\n      // *or* will update the parent themselves beforehand as is done in\n      // updateMatrixWorld.\n      if (!this.matrixIsModified) {\n        this.matrixWorld = this.parent.matrixWorld;\n      } else {\n        // Once matrixIsModified === true, this.matrixWorld has been updated to be a local\n        // copy, not a reference to this.parent.matrixWorld (see updateMatrix/applyMatrix)\n        this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix);\n      }\n    }\n\n    this.childrenNeedMatrixWorldUpdate = true;\n    this.matrixWorldNeedsUpdate = false;\n  }\n};\n\n// Computes this object's matrices and then the recursively computes the matrices of all the children.\n//\n// forceWorldUpdate - If true and the object is visible, will force the world matrix to be updated for\n// this node and all of its children.\n//\n// includeInvisible - If true, does not ignore non-visible objects.\nTHREE.Object3D.prototype.updateMatrixWorld = function(forceWorldUpdate, includeInvisible) {\n  if (!this.visible && !includeInvisible) return;\n\n  // Do not recurse upwards, since this is recursing downwards\n  this.updateMatrices(false, forceWorldUpdate, true);\n\n  const children = this.children;\n  const forceChildrenWorldUpdate = this.childrenNeedMatrixWorldUpdate || forceWorldUpdate;\n\n  for (let i = 0, l = children.length; i < l; i++) {\n    children[i].updateMatrixWorld(forceChildrenWorldUpdate, includeInvisible);\n  }\n\n  if (this.childrenNeedMatrixWorldUpdate) this.childrenNeedMatrixWorldUpdate = false;\n};\n\n// Updates this function to use updateMatrices() to avoid extra matrix computations\nTHREE.Object3D.prototype.lookAt = (function() {\n  // This method does not support objects having non-uniformly-scaled parent(s)\n\n  const q1 = new THREE.Quaternion();\n  const m1 = new THREE.Matrix4();\n  const target = new THREE.Vector3();\n  const position = new THREE.Vector3();\n\n  return function lookAt(x, y, z) {\n    if (x.isVector3) {\n      target.copy(x);\n    } else {\n      target.set(x, y, z);\n    }\n\n    const parent = this.parent;\n\n    this.updateMatrices(); // hubs change\n\n    position.setFromMatrixPosition(this.matrixWorld);\n\n    if (this.isCamera || this.isLight) {\n      m1.lookAt(position, target, this.up);\n    } else {\n      m1.lookAt(target, position, this.up);\n    }\n\n    this.quaternion.setFromRotationMatrix(m1);\n\n    if (parent) {\n      m1.extractRotation(parent.matrixWorld);\n      q1.setFromRotationMatrix(m1);\n      this.quaternion.premultiply(q1.inverse());\n    }\n  };\n})();\n","AFRAME.registerComponent(\"ambient-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.AmbientLight();\n    this.el.setObject3D(\"ambient-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n    this.rendererSystem = this.el.sceneEl.systems.renderer;\n  },\n\n  update(prevData) {\n    if (this.data.color !== prevData.color) {\n      this.light.color.set(this.data.color);\n      this.rendererSystem.applyColorCorrection(this.light.color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      this.light.intensity = this.data.intensity;\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"ambient-light\");\n  }\n});\n","/**\n * Sets the CSS class on an entity.\n * @component css-class\n */\nAFRAME.registerComponent(\"css-class\", {\n  schema: {\n    type: \"string\"\n  },\n  multiple: true,\n  init() {\n    this.el.classList.add(this.data);\n  },\n  update(oldData) {\n    if (this.data !== oldData) {\n      this.el.classList.remove(oldData);\n      this.el.classList.add(this.data);\n    }\n  },\n  remove() {\n    this.el.classList.remove(this.data);\n  }\n});\n","/* global CANNON */\n/**\n * Floats a duck based on its scale.\n * @component duck\n */\nAFRAME.registerComponent(\"duck\", {\n  schema: {\n    initialForce: { default: 0 },\n    maxForce: { default: 6.5 },\n    maxScale: { default: 5 }\n  },\n\n  init: function() {\n    this.physicsSystem = this.el.sceneEl.systems.physics;\n    this.hasBody = false;\n    this.position = new CANNON.Vec3();\n    this.force = new CANNON.Vec3(0, this.data.initialForce, 0);\n    this.initialScale = this.el.object3D.scale.x;\n    this.maxScale = this.data.maxScale * this.initialScale;\n  },\n\n  play: function() {\n    this.physicsSystem.addComponent(this);\n  },\n\n  pause: function() {\n    this.physicsSystem.removeComponent(this);\n  },\n\n  beforeStep: function() {\n    if (this.el.body && NAF.utils.isMine(this.el)) {\n      const currentScale = this.el.object3D.scale.x;\n      const ratio = Math.min(1, (currentScale - this.initialScale) / (this.maxScale - this.initialScale));\n      const force = ratio * this.data.maxForce;\n      if (force > 0) {\n        const angle = Math.random() * Math.PI * 2;\n        const x = Math.cos(angle);\n        const z = Math.sin(angle);\n        this.force.set(x, force, z);\n        this.position.set(x * 0.01, 0, z * 0.01);\n        this.el.object3D.matrixNeedsUpdate = true;\n        this.el.body.applyForce(this.force, this.position);\n      }\n    }\n  }\n});\n","/* global CANNON */\nAFRAME.registerComponent(\"heightfield\", {\n  init() {\n    this.el.addEventListener(\"componentinitialized\", e => {\n      if (e.detail.name === \"static-body\") {\n        this.generateAndAddHeightfield(this.el.components[\"static-body\"]);\n      }\n    });\n    this.el.setAttribute(\"static-body\", { shape: \"none\", mass: 0 });\n  },\n  generateAndAddHeightfield(body) {\n    const { offset, distance, data } = this.data;\n\n    const orientation = new CANNON.Quaternion();\n    orientation.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), -Math.PI / 2);\n\n    const rotation = new CANNON.Quaternion();\n    rotation.setFromAxisAngle(new CANNON.Vec3(0, 1, 0), -Math.PI / 2);\n    rotation.mult(orientation, orientation);\n\n    const cannonOffset = new CANNON.Vec3(offset.x, offset.y, offset.z);\n\n    const shape = new CANNON.Heightfield(data, { elementSize: distance });\n\n    body.addShape(shape, cannonOffset, orientation);\n  }\n});\n","AFRAME.registerComponent(\"hemisphere-light\", {\n  schema: {\n    skyColor: { type: \"color\" },\n    groundColor: { type: \"color\" },\n    intensity: { default: 1.0 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.HemisphereLight();\n    this.light.position.set(0, 0, 0);\n    this.light.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"hemisphere-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n  },\n\n  update(prevData) {\n    if (this.data.skyColor !== prevData.skyColor) {\n      this.light.color.set(this.data.skyColor);\n    }\n\n    if (this.data.groundColor !== prevData.groundColor) {\n      this.light.groundColor.set(this.data.groundColor);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      this.light.intensity = this.data.intensity;\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"hemisphere-light\");\n  }\n});\n","/**\n * Hides entities based on the scene's quality mode\n * @namespace environment\n * @component hide-when-quality\n */\nAFRAME.registerComponent(\"hide-when-quality\", {\n  schema: { type: \"string\", default: \"low\" },\n\n  init() {\n    this.onQualityChanged = this.onQualityChanged.bind(this);\n    this.el.sceneEl.addEventListener(\"quality-changed\", this.onQualityChanged);\n  },\n\n  onQualityChanged(event) {\n    this.updateComponentState(event.detail);\n  },\n\n  update(oldData) {\n    if (this.data !== oldData) {\n      this.updateComponentState(window.APP.quality);\n    }\n  },\n\n  updateComponentState(quality) {\n    this.el.setAttribute(\"visible\", quality !== this.data);\n  }\n});\n","AFRAME.registerComponent(\"point-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    range: { default: 0 },\n    decay: { default: 2 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.PointLight();\n    this.light.shadow.camera.matrixAutoUpdate = true;\n    this.el.setObject3D(\"point-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n    this.rendererSystem = this.el.sceneEl.systems.renderer;\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      const color = new THREE.Color(this.data.color);\n      this.rendererSystem.applyColorCorrection(color);\n      light.color.copy(color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.range !== prevData.range) {\n      light.distance = this.data.range;\n    }\n\n    if (this.data.decay !== prevData.decay) {\n      light.decay = this.data.decay;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"point-light\");\n  }\n});\n","/**\n * Nicely pans the camera for previewing a scene. There's some weirdness with this right now\n * since it ends up panning in a direction dependent upon the start camera orientation,\n * but it's good enough for now.\n */\nfunction lerp(start, end, t) {\n  return (1 - t) * start + t * end;\n}\n\nconst newRot = new THREE.Quaternion();\n\nAFRAME.registerComponent(\"scene-preview-camera\", {\n  schema: {\n    duration: { default: 90, type: \"number\" },\n    positionOnly: { default: false, type: \"boolean\" }\n  },\n\n  init: function() {\n    this.startPoint = this.el.object3D.position.clone();\n    this.startRotation = new THREE.Quaternion();\n    this.startRotation.setFromEuler(this.el.object3D.rotation);\n\n    this.targetPoint = new THREE.Vector3(1, 0.5, -0.5);\n    this.targetPoint.applyMatrix4(this.el.object3D.matrix);\n    this.targetPoint.add(new THREE.Vector3(0, 0, -2));\n\n    const targetRotDelta = new THREE.Euler(-0.15, 0.0, 0.15);\n    this.targetRotation = new THREE.Quaternion();\n    this.targetRotation.setFromEuler(targetRotDelta);\n    this.targetRotation.premultiply(this.startRotation);\n\n    this.startTime = performance.now();\n    this.backwards = false;\n    this.ranOnePass = false;\n  },\n\n  tick: function() {\n    let t = (performance.now() - this.startTime) / (1000.0 * this.data.duration);\n    t = Math.min(1.0, Math.max(0.0, t));\n\n    if (!this.ranOnePass) {\n      t = t * (2 - t);\n    } else {\n      t = t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n    }\n\n    const from = this.backwards ? this.targetPoint : this.startPoint;\n    const to = this.backwards ? this.startPoint : this.targetPoint;\n    const fromRot = this.backwards ? this.targetRotation : this.startRotation;\n    const toRot = this.backwards ? this.startRotation : this.targetRotation;\n\n    THREE.Quaternion.slerp(fromRot, toRot, newRot, t);\n\n    this.el.object3D.position.set(lerp(from.x, to.x, t), lerp(from.y, to.y, t), lerp(from.z, to.z, t));\n\n    if (!this.data.positionOnly) {\n      this.el.object3D.rotation.setFromQuaternion(newRot);\n    }\n\n    this.el.object3D.matrixNeedsUpdate = true;\n\n    if (t >= 0.9999) {\n      this.ranOnePass = true;\n      this.backwards = !this.backwards;\n      this.startTime = performance.now();\n    }\n  }\n});\n","// Enumeration of spawned object content origins. URL means the content is\n// fetched from a URL, FILE means it was an uploaded/dropped file, and\n// CLIPBOARD means it was raw data pasted in from the clipboard, SPAWNER means\n// it was copied over from a spawner.\nexport const ObjectContentOrigins = {\n  URL: 1,\n  FILE: 2,\n  CLIPBOARD: 3,\n  SPAWNER: 4\n};\n\n// Enumeration of spawnable object types, used for telemetry, which encapsulates\n// both the origin of the content for the object and also the type of content\n// contained in the object.\nexport const ObjectTypes = {\n  URL_IMAGE: 0,\n  URL_VIDEO: 1,\n  URL_MODEL: 2,\n  URL_PDF: 3,\n  URL_AUDIO: 4,\n  //URL_TEXT: 5,\n  //URL_TELEPORTER: 6,\n  FILE_IMAGE: 8,\n  FILE_VIDEO: 9,\n  FILE_MODEL: 10,\n  FILE_PDF: 11,\n  FILE_AUDIO: 12,\n  //FILE_TEXT: 13,\n  CLIPBOARD_IMAGE: 16,\n  CLIPBOARD_VIDEO: 17,\n  CLIPBOARD_MODEL: 18,\n  CLIPBOARD_PDF: 19,\n  CLIPBOARD_AUDIO: 20,\n  //CLIPBOARD_TEXT: 21,\n  SPAWNER_IMAGE: 24,\n  SPAWNER_VIDEO: 25,\n  SPAWNER_MODEL: 26,\n  SPAWNER_PDF: 27,\n  SPAWNER_AUDIO: 28,\n  //SPAWNER_TEXT: 29,\n  CAMERA: 30,\n  UNKNOWN: 31\n};\n\n// Given an origin and three object type values for URL, FILE, and CLIPBOARD\n// origins respectively, return the appropriate one\nfunction objectTypeForOrigin(contentOrigin, urlType, fileType, clipboardType, spawnerType) {\n  if (contentOrigin === ObjectContentOrigins.URL) {\n    return urlType;\n  } else if (contentOrigin === ObjectContentOrigins.FILE) {\n    return fileType;\n  } else if (contentOrigin === ObjectContentOrigins.CLIPBOARD) {\n    return clipboardType;\n  } else {\n    return spawnerType;\n  }\n}\n\n// Lookup table of mime-type prefixes to the set of object types that we should use\n// for objects spawned matching their underlying Content-Type.\nconst objectTypeMimePrefixLookupMap = {\n  \"image/\": [ObjectTypes.URL_IMAGE, ObjectTypes.FILE_IMAGE, ObjectTypes.CLIPBOARD_IMAGE, ObjectTypes.SPAWNER_IMAGE],\n  \"model/\": [ObjectTypes.URL_MODEL, ObjectTypes.FILE_MODEL, ObjectTypes.CLIPBOARD_MODEL, ObjectTypes.SPAWNER_MODEL],\n  \"application/x-zip-compressed\": [\n    ObjectTypes.URL_MODEL,\n    ObjectTypes.FILE_MODEL,\n    ObjectTypes.CLIPBOARD_MODEL,\n    ObjectTypes.SPAWNER_MODEL\n  ],\n  \"video/\": [ObjectTypes.URL_VIDEO, ObjectTypes.FILE_VIDEO, ObjectTypes.CLIPBOARD_VIDEO, ObjectTypes.SPAWNER_VIDEO],\n  \"application/vnd.apple.mpegurl\": [\n    ObjectTypes.URL_VIDEO,\n    ObjectTypes.FILE_VIDEO,\n    ObjectTypes.CLIPBOARD_VIDEO,\n    ObjectTypes.SPAWNER_VIDEO\n  ],\n  \"application/x-mpegurl\": [\n    ObjectTypes.URL_VIDEO,\n    ObjectTypes.FILE_VIDEO,\n    ObjectTypes.CLIPBOARD_VIDEO,\n    ObjectTypes.SPAWNER_VIDEO\n  ],\n  \"audio/\": [ObjectTypes.URL_AUDIO, ObjectTypes.FILE_AUDIO, ObjectTypes.CLIPBOARD_AUDIO, ObjectTypes.SPAWNER_AUDIO],\n  \"application/pdf\": [ObjectTypes.URL_PDF, ObjectTypes.FILE_PDF, ObjectTypes.CLIPBOARD_PDF, ObjectTypes.SPAWNER_PDF]\n};\n\nconst srcSuffixLookupMap = {\n  \".m3u8\": [ObjectTypes.URL_VIDEO, ObjectTypes.FILE_VIDEO, ObjectTypes.CLIPBOARD_VIDEO, ObjectTypes.SPAWNER_VIDEO]\n};\n\n// Given an content origin and the resolved mime type of a piece of content, return\n// the ObjectType, if any, for that content.\nexport function objectTypeForOriginAndContentType(contentOrigin, contentType, src) {\n  for (const prefix in objectTypeMimePrefixLookupMap) {\n    if (contentType.toLowerCase().startsWith(prefix)) {\n      const types = objectTypeMimePrefixLookupMap[prefix];\n      return objectTypeForOrigin(contentOrigin, ...types);\n    }\n  }\n\n  if (src) {\n    for (const suffix in srcSuffixLookupMap) {\n      if (src.toLowerCase().endsWith(suffix)) {\n        const types = srcSuffixLookupMap[suffix];\n        return objectTypeForOrigin(contentOrigin, ...types);\n      }\n    }\n  }\n\n  return ObjectTypes.UNKNOWN;\n}\n","AFRAME.registerComponent(\"spot-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    range: { default: 0 },\n    decay: { default: 2 },\n    innerConeAngle: { default: 0 },\n    outerConeAngle: { default: Math.PI / 4.0 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.SpotLight();\n    this.light.position.set(0, 0, 0);\n    this.light.target.position.set(0, 0, 1);\n    this.light.add(this.light.target);\n    this.light.matrixNeedsUpdate = true;\n    this.light.target.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"spot-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      light.color.set(this.data.color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.range !== prevData.range) {\n      light.distance = this.data.range;\n    }\n\n    if (this.data.decay !== prevData.decay) {\n      light.decay = this.data.decay;\n    }\n\n    if (this.data.innerConeAngle !== prevData.innerConeAngle || this.data.outerConeAngle !== prevData.outerConeAngle) {\n      light.angle = this.data.outerConeAngle;\n      light.penumbra = 1.0 - this.data.innerConeAngle / this.data.outerConeAngle;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"spot-light\");\n  }\n});\n","/* global AFRAME */\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nAFRAME.registerComponent(\"floaty-object\", {\n  schema: {\n    // Make the object locked/kinematic upon load\n    autoLockOnLoad: { default: false },\n\n    // Make the object kinematic immediately upon release\n    autoLockOnRelease: { default: false },\n\n    // On release, modify the gravity based upon gravitySpeedLimit. If less than this, let the object float\n    // otherwise apply releaseGravity.\n    modifyGravityOnRelease: { default: false },\n\n    // Gravity to apply if object is thrown at a speed greated than speed limit.\n    releaseGravity: { default: -2 },\n\n    // If true, the degree to which angular rotation is allowed when floating is reduced (useful for 2d media)\n    reduceAngularFloat: { default: false },\n\n    // Velocity speed limit under which gravity will not be added if modifyGravityOnRelease is true\n    gravitySpeedLimit: { default: 1.85 } // Set to 0 to never apply gravity\n  },\n\n  init() {\n    this.onGrab = this.onGrab.bind(this);\n    this.onRelease = this.onRelease.bind(this);\n  },\n\n  tick() {\n    if (!this.ammoBody) {\n      this.ammoBody = this.el.components[\"ammo-body\"];\n    }\n\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const isHeld = interaction.isHeld(this.el);\n    if (isHeld && !this.wasHeld) {\n      this.onGrab();\n    }\n    if (this.wasHeld && !isHeld) {\n      this.onRelease();\n    }\n\n    if (this._makeStaticWhenAtRest) {\n      const isMine = this.el.components.networked && NAF.utils.isMine(this.el);\n      const linearThreshold = this.ammoBody.data.linearSleepingThreshold;\n      const angularThreshold = this.ammoBody.data.angularSleepingThreshold;\n      const isAtRest =\n        this.ammoBody.body.getLinearVelocity().length2() < linearThreshold * linearThreshold &&\n        this.ammoBody.body.getAngularVelocity().length2() < angularThreshold * angularThreshold;\n\n      if (isAtRest && isMine) {\n        this.el.setAttribute(\"ammo-body\", { type: \"static\" });\n      }\n\n      if (isAtRest || !isMine) {\n        this._makeStaticWhenAtRest = false;\n      }\n    }\n\n    this.wasHeld = isHeld;\n  },\n\n  play() {\n    // We do this in play instead of in init because otherwise NAF.utils.isMine fails\n    if (this.hasBeenHereBefore) return;\n    this.hasBeenHereBefore = true;\n    if (this.el.body) {\n      this._onBodyLoaded();\n    } else {\n      this._onBodyLoaded = this._onBodyLoaded.bind(this);\n      this.el.addEventListener(\"body-loaded\", this._onBodyLoaded, { once: true });\n    }\n  },\n\n  setLocked(locked) {\n    if (this.el.components.networked && !NAF.utils.isMine(this.el)) return;\n\n    this.locked = locked;\n    this.el.setAttribute(\"ammo-body\", { type: locked ? \"kinematic\" : \"dynamic\" });\n  },\n\n  _onBodyLoaded() {\n    if (this.data.autoLockOnLoad) {\n      this.setLocked(true);\n    }\n  },\n\n  onRelease() {\n    if (this.data.modifyGravityOnRelease) {\n      if (\n        this.data.gravitySpeedLimit === 0 ||\n        this.ammoBody.getVelocity().length2() < this.data.gravitySpeedLimit * this.data.gravitySpeedLimit\n      ) {\n        this.el.setAttribute(\"ammo-body\", {\n          gravity: { x: 0, y: 0, z: 0 },\n          angularDamping: this.data.reduceAngularFloat ? 0.98 : 0.5,\n          linearDamping: 0.95,\n          linearSleepingThreshold: 0.1,\n          angularSleepingThreshold: 0.1\n        });\n\n        this._makeStaticWhenAtRest = true;\n      } else {\n        this.el.setAttribute(\"ammo-body\", {\n          gravity: { x: 0, y: this.data.releaseGravity, z: 0 },\n          angularDamping: 0.01,\n          linearDamping: 0.01,\n          linearSleepingThreshold: 1.6,\n          angularSleepingThreshold: 2.5\n        });\n      }\n    }\n\n    if (this.data.autoLockOnRelease) {\n      this.setLocked(true);\n    }\n\n    this.el.setAttribute(\"ammo-body\", { collisionFilterMask: COLLISION_LAYERS.DEFAULT_INTERACTABLE });\n  },\n\n  onGrab() {\n    this.el.setAttribute(\"ammo-body\", {\n      collisionFilterMask: this.locked ? COLLISION_LAYERS.HANDS : COLLISION_LAYERS.DEFAULT_INTERACTABLE\n    });\n    this.setLocked(false);\n  },\n\n  remove() {\n    this.el.removeEventListener(\"body-loaded\", this._onBodyLoaded);\n    if (this.stuckTo) {\n      const stuckTo = this.stuckTo;\n      delete this.stuckTo;\n      stuckTo._unstickObject();\n    }\n  }\n});\n","const sizeVec = new THREE.Vector3();\nconst boundingBoxWorldPositionVec = new THREE.Vector3();\nconst colliderWorldPositionVec = new THREE.Vector3();\n\nAFRAME.registerComponent(\"trigger-volume\", {\n  schema: {\n    colliders: { type: \"selectorAll\" },\n    size: { type: \"vec3\", default: { x: 1, y: 1, z: 1 } },\n    target: { type: \"selector\" },\n    enterComponent: { type: \"string\" },\n    enterProperty: { type: \"string\" },\n    enterValue: {\n      default: \"\",\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    },\n    leaveComponent: { type: \"string\" },\n    leaveProperty: { type: \"string\" },\n    leaveValue: {\n      default: \"\",\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n  init() {\n    this.boundingBox = new THREE.Box3();\n    this.collidingLastFrame = {};\n  },\n  update() {\n    this.el.object3D.getWorldPosition(boundingBoxWorldPositionVec);\n    sizeVec.copy(this.data.size);\n    this.boundingBox.setFromCenterAndSize(boundingBoxWorldPositionVec, sizeVec);\n  },\n  tick() {\n    const colliders = this.data.colliders;\n\n    for (let i = 0; i < colliders.length; i++) {\n      const collider = colliders[i];\n      const object3D = collider.object3D;\n\n      object3D.getWorldPosition(colliderWorldPositionVec);\n      const isColliding = this.boundingBox.containsPoint(colliderWorldPositionVec);\n      const collidingLastFrame = this.collidingLastFrame[object3D.id];\n\n      if (isColliding && !collidingLastFrame) {\n        this.data.target.setAttribute(this.data.enterComponent, this.data.enterProperty, this.data.enterValue);\n      } else if (!isColliding && collidingLastFrame) {\n        this.data.target.setAttribute(this.data.leaveComponent, this.data.leaveProperty, this.data.leaveValue);\n      }\n\n      this.collidingLastFrame[object3D.id] = isColliding;\n    }\n  }\n});\n","// HACK: Setting videoPaused on media-video doesn't work if you are the owner.\n// This component gets around that by calling .togglePlaying() to play/pause the video based on a property change.\nAFRAME.registerComponent(\"video-pause-state\", {\n  schema: {\n    paused: { default: false }\n  },\n\n  init() {\n    this.onPauseStateChange = this.onPauseStateChange.bind(this);\n    this.videoComponent = this.el.components[\"media-video\"];\n\n    if (this.videoComponent) {\n      this.onVideoLoaded();\n    } else {\n      this.onVideoLoaded = this.onVideoLoaded.bind(this);\n      this.el.addEventListener(\"video-loaded\", this.onVideoLoaded);\n    }\n  },\n\n  onVideoLoaded() {\n    this.videoComponent = this.el.components[\"media-video\"];\n    this.video = this.videoComponent.video;\n    this.video.addEventListener(\"pause\", this.onPauseStateChange);\n  },\n\n  onPauseStateChange() {\n    this.el.setAttribute(\"paused\", this.video.paused);\n  },\n\n  update() {\n    if (this.video && this.data.paused !== this.video.paused) {\n      this.videoComponent.togglePlaying();\n    }\n  },\n\n  remove() {\n    this.video.removeEventListener(\"pause\", this.onPauseStateChange);\n    this.el.removeEventListener(\"video-loaded\", this.onVideoLoaded);\n  }\n});\n","/**\n * Logs all events dispatched on an entity\n * @namespace debug\n * @component log-events\n */\nAFRAME.registerComponent(\"log-events\", {\n  init: function() {\n    const el = this.el;\n    const log = this.log.bind(this);\n    const origDispatch = this.el.dispatchEvent;\n    this.el.dispatchEvent = function() {\n      log(Array.from(arguments));\n      return origDispatch.apply(el, arguments);\n    };\n  },\n  log: function([e]) {\n    if ([\"componentchanged\"].includes(e.type)) return;\n    let firstObject = true;\n    const replacer = (k, x) => {\n      if (!x) return x;\n      if (typeof x === \"object\" && x.length === undefined) {\n        if (firstObject) {\n          firstObject = false;\n          return x;\n        }\n        return \"[object]\";\n      }\n      return x;\n    };\n    console.info(`log-events: ${this.el.id} ${e.type} ${JSON.stringify(e.detail, replacer)}`);\n  }\n});\n\n/**\n * Logs all life cycle phases on an entity.\n * @namespace debug\n * @component lifecycle-checker\n */\nAFRAME.registerComponent(\"lifecycle-checker\", {\n  schema: {\n    name: { type: \"string\" },\n    tick: { default: false }\n  },\n  init: function() {\n    this.log(\"init\");\n  },\n  update: function() {\n    this.log(\"update\");\n  },\n  tick: function() {\n    if (this.data.tick) {\n      this.log(\"tick\");\n    }\n  },\n  remove: function() {\n    this.log(\"remove\");\n  },\n  pause: function() {\n    this.log(\"pause\");\n  },\n  play: function() {\n    this.log(\"play\");\n  },\n\n  log: function(method) {\n    console.info(`lifecycle-checker:${this.data.name} ${method}`);\n  }\n});\n","const { Pathfinding } = require(\"three-pathfinding\");\n\nAFRAME.registerSystem(\"nav\", {\n  init: function() {\n    this.pathfinder = new Pathfinding();\n  },\n\n  loadMesh: function(mesh, zone) {\n    this.el.object3D.updateMatrixWorld();\n\n    if (this.mesh && this.mesh.geometry && this.mesh.geometry.dispose) {\n      this.mesh.geometry.dispose();\n    }\n\n    this.mesh = mesh;\n    const geometry = new THREE.Geometry().fromBufferGeometry(mesh.geometry);\n    geometry.applyMatrix(mesh.matrixWorld);\n    this.pathfinder.setZoneData(zone, Pathfinding.createZone(geometry));\n    this.el.sceneEl.emit(\"nav-mesh-loaded\");\n  }\n});\n","/**\n * Listens to events from an event source and re-emits them on this entity\n * @component event-repeater\n */\nAFRAME.registerComponent(\"event-repeater\", {\n  schema: {\n    eventSource: { type: \"selector\" },\n    events: { type: \"array\" }\n  },\n\n  play: function() {\n    this.data.eventListeners = [];\n    const events = this.data.events;\n    for (let i = 0; i < events.length; i++) {\n      const event = events[i];\n      this.data.eventListeners[event] = this._handleEvent.bind(this, event);\n      this.data.eventSource.addEventListener(event, this.data.eventListeners[event]);\n    }\n  },\n\n  pause: function() {\n    const events = this.data.events;\n    for (let i = 0; i < events.length; i++) {\n      const event = events[i];\n      this.data.eventSource.removeEventListener(event, this.data.eventListeners[event]);\n    }\n    this.data.eventListeners = [];\n  },\n\n  _handleEvent: function(event, e) {\n    this.el.emit(event, e.detail);\n  }\n});\n","import Raven from \"raven-js\";\n\nconst ga = window.ga;\n\nexport default function registerTelemetry(trackedPage, trackedTitle) {\n  const sentryDsn = process.env.SENTRY_DSN;\n  const gaTrackingId = process.env.GA_TRACKING_ID;\n\n  if (sentryDsn) {\n    console.log(\"Tracking: Sentry DSN: \" + sentryDsn);\n    Raven.config(sentryDsn).install();\n  }\n\n  if (ga && gaTrackingId) {\n    console.log(\"Tracking: Google Analytics ID: \" + gaTrackingId);\n\n    ga(\"create\", gaTrackingId, \"auto\");\n\n    if (trackedPage) {\n      ga(\"set\", \"page\", trackedPage);\n    }\n\n    if (trackedTitle) {\n      ga(\"set\", \"title\", trackedTitle);\n    }\n\n    ga(\"send\", \"pageview\");\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport const ReactAudioContext = React.createContext({});\n\nexport const hudHoverSound = \"play_sound-hud_hover_start\";\n\nexport const WithHoverSound = ({ sound, children }) => {\n  return (\n    <ReactAudioContext.Consumer>\n      {context => {\n        return React.cloneElement(children, {\n          onMouseEnter: e => {\n            if (context && context.playSound) {\n              context.playSound(sound || hudHoverSound);\n            }\n            children.props.onMouseEnter && children.props.onMouseEnter(e);\n          }\n        });\n      }}\n    </ReactAudioContext.Consumer>\n  );\n};\n\nWithHoverSound.propTypes = {\n  children: PropTypes.object,\n  sound: PropTypes.string\n};\n","const boundingBox = new THREE.Box3();\nconst frustumBox = new THREE.Box3();\nconst inverseLightMatrixWorld = new THREE.Matrix4();\nconst tempBox = new THREE.Box3();\nconst FRUSTUM_PADDING = 1;\nconst NEAR_CLIPPING_PLANE = -500;\nconst FAR_CLIPPING_PLANE = 500;\nconst verts = [\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3()\n];\n\nexport default function resizeShadowCameraFrustum(light, scene) {\n  // Reset bounding box\n  frustumBox.makeEmpty();\n  boundingBox.makeEmpty();\n\n  // Grow the extents of boundingBox for every geometry in the scene that has castShadow set to true.\n  scene.traverse(node => {\n    const geometry = node.geometry;\n\n    if (geometry && node.castShadow) {\n      if (!geometry.boundingBox) {\n        geometry.computeBoundingBox();\n      }\n\n      tempBox.copy(geometry.boundingBox);\n\n      // Apply matrix transforming bounding box from model space to world space\n      tempBox.applyMatrix4(node.matrixWorld);\n\n      boundingBox.union(tempBox);\n    }\n  });\n\n  // Transform the resulting bounding box from world space to light space.\n  // Construct a new bounding box in light space that contains the corners of the bounding box in world space.\n  const min = boundingBox.min;\n  const max = boundingBox.max;\n\n  verts[0].set(min.x, min.y, min.z);\n  verts[1].set(min.x, min.y, max.z);\n  verts[2].set(min.x, max.y, min.z);\n  verts[3].set(min.x, max.y, max.z);\n  verts[4].set(max.x, min.y, min.z);\n  verts[5].set(max.x, min.y, max.z);\n  verts[6].set(max.x, max.y, min.z);\n  verts[7].set(max.x, max.y, max.z);\n\n  inverseLightMatrixWorld.getInverse(light.shadow.camera.matrixWorld);\n\n  for (let i = 0; i < verts.length; i++) {\n    verts[i].applyMatrix4(inverseLightMatrixWorld);\n    frustumBox.expandByPoint(verts[i]);\n  }\n\n  // Update the camera frustum to fit the resulting bounding box.\n  // Everything in the frustum that has castShadow set to true will cast a shadow.\n  // Everything in the frustum that has receiveShadow set to true will receive a shadow.\n  // FRUSTUM_PADDING is added to avoid clipping the edges of shadows.\n  // TODO: Determine why shadows flicker when light is moved fast. The light's matrixWorld is probably being updated a frame behind.\n  const camera = light.shadow.camera;\n  camera.left = frustumBox.min.x - FRUSTUM_PADDING;\n  camera.right = frustumBox.max.x + FRUSTUM_PADDING;\n  camera.bottom = frustumBox.min.y - FRUSTUM_PADDING;\n  camera.top = frustumBox.max.y + FRUSTUM_PADDING;\n  camera.near = frustumBox.min.z + NEAR_CLIPPING_PLANE;\n  camera.far = frustumBox.max.z + FAR_CLIPPING_PLANE;\n  camera.updateProjectionMatrix();\n}\n","import resizeShadowCameraFrustum from \"../utils/resizeShadowCameraFrustum\";\n\nAFRAME.registerComponent(\"directional-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.DirectionalLight();\n    this.light.position.set(0, 0, 0);\n    this.light.target.position.set(0, 0, 1);\n    this.light.add(this.light.target);\n    this.el.setObject3D(\"directional-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n    this.rendererSystem = this.el.sceneEl.systems.renderer;\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      const color = new THREE.Color(this.data.color);\n      this.rendererSystem.applyColorCorrection(color);\n      light.color.copy(color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n\n    this.light.shadow.camera.matrixNeedsUpdate = true;\n  },\n\n  tick() {\n    if (window.APP && window.APP.quality === \"low\") {\n      return;\n    }\n\n    resizeShadowCameraFrustum(this.light, this.el.sceneEl.object3D);\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"directional-light\");\n  }\n});\n","export const Layers = {\n  // Layers 0 - 2 reserverd by ThreeJS and AFrame.\n  reflection: 3\n};\n\n/**\n * Sets layer flags on the underlying Object3D\n * @namespace environment\n * @component layers\n */\nAFRAME.registerComponent(\"layers\", {\n  schema: {\n    reflection: { type: \"boolean\", default: false },\n    inWorldHud: { type: \"boolean\", default: false },\n    exclusive: { type: \"boolean\", default: false } // if true, only these layers will be set\n  },\n  init() {\n    this.update = this.update.bind(this);\n    this.el.addEventListener(\"model-loaded\", this.update);\n  },\n  update(oldData) {\n    const obj = this.el.object3D;\n\n    if (this.data.exclusive) {\n      obj.traverse(o => (o.layers.mask = 0));\n    }\n\n    for (const [name, layer] of Object.entries(Layers)) {\n      const oldValue = oldData[name];\n      const newValue = this.data[name];\n\n      if (oldValue !== newValue) {\n        if (newValue) {\n          obj.traverse(o => o.layers.enable(layer));\n        } else {\n          obj.traverse(o => o.layers.disable(layer));\n        }\n      }\n    }\n  },\n  remove() {\n    this.el.removeEventListener(\"model-loaded\", this.update);\n  }\n});\n","import { getBox, getScaleCoefficient } from \"../utils/auto-box-collider\";\nimport {\n  guessContentType,\n  proxiedUrlFor,\n  resolveUrl,\n  injectCustomShaderChunks,\n  isHubsRoomUrl,\n  isHubsSceneUrl\n} from \"../utils/media-utils\";\nimport { addAnimationComponents } from \"../utils/animation\";\nimport \"three/examples/js/loaders/GLTFLoader\";\nimport loadingObjectSrc from \"../assets/LoadingObject_Atom.glb\";\nimport { SOUND_MEDIA_LOADING, SOUND_MEDIA_LOADED } from \"../systems/sound-effects-system\";\n\nconst anime = require(\"animejs\");\n\nconst SHAPE = require(\"aframe-physics-system/src/constants\").SHAPE;\n\nconst gltfLoader = new THREE.GLTFLoader();\nlet loadingObject;\ngltfLoader.load(loadingObjectSrc, gltf => {\n  loadingObject = gltf;\n});\n\nconst fetchContentType = url => {\n  return fetch(url, { method: \"HEAD\" }).then(r => r.headers.get(\"content-type\"));\n};\n\nconst fetchMaxContentIndex = url => {\n  return fetch(url).then(r => parseInt(r.headers.get(\"x-max-content-index\")));\n};\n\nconst boundingBox = new THREE.Box3();\n\nAFRAME.registerComponent(\"media-loader\", {\n  schema: {\n    fileId: { type: \"string\" },\n    fileIsOwned: { type: \"boolean\" },\n    src: { type: \"string\" },\n    resize: { default: false },\n    resolve: { default: false },\n    contentType: { default: null },\n    animate: { default: true },\n    mediaOptions: {\n      default: {},\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n\n  init() {\n    this.onError = this.onError.bind(this);\n    this.showLoader = this.showLoader.bind(this);\n    this.clearLoadingTimeout = this.clearLoadingTimeout.bind(this);\n    this.onMediaLoaded = this.onMediaLoaded.bind(this);\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.networkedEl = networkedEl;\n    });\n  },\n\n  updateScale: (function() {\n    const center = new THREE.Vector3();\n    return function(resize) {\n      const mesh = this.el.getObject3D(\"mesh\");\n      const box = getBox(this.el, mesh);\n      const scaleCoefficient = resize ? getScaleCoefficient(0.5, box) : 1;\n      mesh.scale.multiplyScalar(scaleCoefficient);\n      const { min, max } = box;\n      center.addVectors(min, max).multiplyScalar(0.5 * scaleCoefficient);\n      mesh.position.sub(center);\n      mesh.matrixNeedsUpdate = true;\n    };\n  })(),\n\n  removeShape(id) {\n    if (this.el.getAttribute(\"ammo-shape__\" + id)) {\n      this.el.removeAttribute(\"ammo-shape__\" + id);\n    }\n  },\n\n  tick(t, dt) {\n    if (this.loaderMixer) {\n      this.loaderMixer.update(dt / 1000);\n    }\n  },\n\n  remove() {\n    if (this.loadingSoundNode) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.stopSoundNode(this.loadingSoundNode);\n      this.loadingSoundNode = null;\n    }\n  },\n\n  onError() {\n    this.el.removeAttribute(\"gltf-model-plus\");\n    this.el.removeAttribute(\"media-pager\");\n    this.el.removeAttribute(\"media-video\");\n    this.el.setAttribute(\"media-image\", { src: \"error\" });\n    this.clearLoadingTimeout();\n  },\n\n  showLoader() {\n    if (this.el.object3DMap.mesh) {\n      this.clearLoadingTimeout();\n      return;\n    }\n    const useFancyLoader = !!loadingObject;\n    const mesh = useFancyLoader\n      ? loadingObject.scene.clone()\n      : new THREE.Mesh(new THREE.BoxGeometry(), new THREE.MeshBasicMaterial());\n    this.el.setObject3D(\"mesh\", mesh);\n    this.updateScale(true);\n    if (useFancyLoader) {\n      this.loaderMixer = new THREE.AnimationMixer(mesh);\n\n      this.loadingClip = this.loaderMixer.clipAction(loadingObject.animations[0]);\n      this.loadingScaleClip = this.loaderMixer.clipAction(\n        new THREE.AnimationClip(null, 1000, [\n          new THREE.VectorKeyframeTrack(\".scale\", [0, 0.2], [0, 0, 0, mesh.scale.x, mesh.scale.y, mesh.scale.z])\n        ])\n      );\n      setTimeout(() => {\n        if (!this.loaderMixer) return; // Animation/loader was stopped early\n        this.el.setAttribute(\"ammo-shape__loader\", { type: SHAPE.BOX });\n      }, 200);\n\n      this.loadingClip.play();\n      this.loadingScaleClip.play();\n    }\n    if (this.el.sceneEl.is(\"entered\") && (!this.networkedEl || NAF.utils.isMine(this.networkedEl))) {\n      this.loadingSoundNode = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundLooped(\n        SOUND_MEDIA_LOADING\n      );\n    }\n    delete this.showLoaderTimeout;\n  },\n\n  clearLoadingTimeout() {\n    clearTimeout(this.showLoaderTimeout);\n    if (this.loadingSoundNode) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.stopSoundNode(this.loadingSoundNode);\n      this.loadingSoundNode = null;\n    }\n    if (this.loaderMixer) {\n      this.loadingClip.stop();\n      this.loadingScaleClip.stop();\n      delete this.loaderMixer;\n      delete this.loadingScaleClip;\n      delete this.loadingClip;\n    }\n    delete this.showLoaderTimeout;\n    this.removeShape(\"loader\");\n  },\n\n  updateHoverableVisuals() {\n    const hoverableVisuals = this.el.components[\"hoverable-visuals\"];\n\n    if (hoverableVisuals) {\n      if (!this.injectedCustomShaderChunks) {\n        this.injectedCustomShaderChunks = true;\n        hoverableVisuals.uniforms = injectCustomShaderChunks(this.el.object3D);\n      }\n\n      boundingBox.setFromObject(this.el.object3DMap.mesh);\n      boundingBox.getBoundingSphere(hoverableVisuals.boundingSphere);\n    }\n  },\n\n  onMediaLoaded(physicsShape = null) {\n    const el = this.el;\n    this.clearLoadingTimeout();\n\n    if (this.el.sceneEl.is(\"entered\")) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_MEDIA_LOADED);\n    }\n\n    const finish = () => {\n      if (physicsShape) {\n        el.setAttribute(\"ammo-shape\", {\n          type: physicsShape,\n          minHalfExtent: 0.04\n        });\n      }\n\n      this.updateHoverableVisuals();\n\n      const pager = el.components[\"media-pager\"];\n\n      if (pager) {\n        pager.repositionToolbar();\n      }\n    };\n\n    if (this.data.animate) {\n      this.addMeshScaleAnimation(this.el.getObject3D(\"mesh\"), { x: 0.001, y: 0.001, z: 0.001 }, finish);\n    } else {\n      finish();\n    }\n  },\n\n  addMeshScaleAnimation(mesh, initialScale, onComplete) {\n    const config = {\n      duration: 400,\n      easing: \"easeOutElastic\",\n      elasticity: 400,\n      loop: 0,\n      round: false,\n      x: mesh.scale.x,\n      y: mesh.scale.y,\n      z: mesh.scale.z,\n      targets: [initialScale],\n      update: (function() {\n        const lastValue = {};\n        return function(anim) {\n          const value = anim.animatables[0].target;\n\n          value.x = Math.max(0.0001, value.x);\n          value.y = Math.max(0.0001, value.y);\n          value.z = Math.max(0.0001, value.z);\n\n          // For animation timeline.\n          if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n            return;\n          }\n\n          lastValue.x = value.x;\n          lastValue.y = value.y;\n          lastValue.z = value.z;\n\n          mesh.scale.set(value.x, value.y, value.z);\n          mesh.matrixNeedsUpdate = true;\n        };\n      })(),\n      complete: onComplete\n    };\n\n    mesh.scale.copy(initialScale);\n    mesh.matrixNeedsUpdate = true;\n\n    return anime(config);\n  },\n\n  async update(oldData) {\n    try {\n      const { src } = this.data;\n\n      if (src !== oldData.src && !this.showLoaderTimeout) {\n        this.showLoaderTimeout = setTimeout(this.showLoader, 100);\n      }\n\n      if (!src) return;\n\n      let canonicalUrl = src;\n      let accessibleUrl = src;\n      let contentType = this.data.contentType;\n      let thumbnail;\n\n      if (this.data.resolve) {\n        const result = await resolveUrl(src);\n        canonicalUrl = result.origin;\n        // handle protocol relative urls\n        if (canonicalUrl.startsWith(\"//\")) {\n          canonicalUrl = location.protocol + canonicalUrl;\n        }\n        contentType = (result.meta && result.meta.expected_content_type) || contentType;\n        thumbnail = result.meta && result.meta.thumbnail && proxiedUrlFor(result.meta.thumbnail);\n      }\n\n      // todo: we don't need to proxy for many things if the canonical URL has permissive CORS headers\n      accessibleUrl = proxiedUrlFor(canonicalUrl, null);\n\n      // if the component creator didn't know the content type, we didn't get it from reticulum, and\n      // we don't think we can infer it from the extension, we need to make a HEAD request to find it out\n      contentType = contentType || guessContentType(canonicalUrl) || (await fetchContentType(accessibleUrl));\n\n      // We don't want to emit media_resolved for index updates.\n      if (src !== oldData.src) {\n        this.el.emit(\"media_resolved\", { src, raw: accessibleUrl, contentType });\n      }\n\n      if (\n        contentType.startsWith(\"video/\") ||\n        contentType.startsWith(\"audio/\") ||\n        AFRAME.utils.material.isHLS(canonicalUrl, contentType)\n      ) {\n        const parsedUrl = new URL(src);\n        const qsTime = parseInt(parsedUrl.searchParams.get(\"t\"));\n        const hashTime = parseInt(new URLSearchParams(parsedUrl.hash.substring(1)).get(\"t\"));\n        const startTime = hashTime || qsTime || 0;\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-image\");\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.addEventListener(\n          \"video-loaded\",\n          e => {\n            this.onMediaLoaded(e.detail.projection === \"flat\" ? SHAPE.BOX : null);\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\n          \"media-video\",\n          Object.assign({}, this.data.mediaOptions, { src: accessibleUrl, time: startTime, contentType })\n        );\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else if (contentType.startsWith(\"image/\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"image-loaded\",\n          e => {\n            this.onMediaLoaded(e.detail.projection === \"flat\" ? SHAPE.BOX : null);\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.setAttribute(\n          \"media-image\",\n          Object.assign({}, this.data.mediaOptions, { src: accessibleUrl, contentType })\n        );\n\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else if (contentType.startsWith(\"application/pdf\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        // two small differences:\n        // 1. we pass the canonical URL to the pager so it can easily make subresource URLs\n        // 2. we don't remove the media-image component -- media-pager uses that internally\n        this.el.setAttribute(\"media-pager\", Object.assign({}, this.data.mediaOptions, { src: canonicalUrl }));\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.addEventListener(\"image-loaded\", this.clearLoadingTimeout, { once: true });\n        this.el.addEventListener(\"preview-loaded\", () => this.onMediaLoaded(SHAPE.BOX), { once: true });\n\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else if (\n        contentType.includes(\"application/octet-stream\") ||\n        contentType.includes(\"x-zip-compressed\") ||\n        contentType.startsWith(\"model/gltf\")\n      ) {\n        this.el.removeAttribute(\"media-image\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"model-loaded\",\n          () => {\n            this.updateScale(this.data.resize);\n            this.onMediaLoaded(SHAPE.HULL);\n            addAnimationComponents(this.el);\n          },\n          { once: true }\n        );\n        this.el.addEventListener(\"model-error\", this.onError, { once: true });\n        this.el.setAttribute(\n          \"gltf-model-plus\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: accessibleUrl,\n            contentType: contentType,\n            inflate: true,\n            modelToWorldScale: this.data.resize ? 0.0001 : 1.0\n          })\n        );\n      } else if (contentType.startsWith(\"text/html\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"image-loaded\",\n          () => {\n            const mayChangeScene = this.el.sceneEl.systems.permissions.can(\"update_hub\");\n\n            if (isHubsRoomUrl(src) || (isHubsSceneUrl(src) && mayChangeScene)) {\n              this.el.setAttribute(\"hover-menu__hubs-item\", {\n                template: \"#hubs-destination-hover-menu\",\n                dirs: [\"forward\", \"back\"]\n              });\n            } else {\n              this.el.setAttribute(\"hover-menu__link\", { template: \"#link-hover-menu\", dirs: [\"forward\", \"back\"] });\n            }\n            this.onMediaLoaded(SHAPE.BOX);\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.setAttribute(\n          \"media-image\",\n          Object.assign({}, this.data.mediaOptions, { src: thumbnail, contentType: \"image/png\" })\n        );\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else {\n        throw new Error(`Unsupported content type: ${contentType}`);\n      }\n    } catch (e) {\n      console.error(\"Error adding media\", e);\n      this.onError();\n    }\n  }\n});\n\nAFRAME.registerComponent(\"media-pager\", {\n  schema: {\n    src: { type: \"string\" },\n    index: { default: 0 }\n  },\n\n  init() {\n    this.toolbar = null;\n    this.imageSrc = null;\n    this.onNext = this.onNext.bind(this);\n    this.onPrev = this.onPrev.bind(this);\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.networkedEl = networkedEl;\n    });\n\n    this.el.addEventListener(\"image-loaded\", async e => {\n      this.imageSrc = e.detail.src;\n      await this._ensureUI();\n      this.update();\n    });\n  },\n\n  async _ensureUI() {\n    if (this.hasSetupUI || !this.imageSrc) return;\n    this.hasSetupUI = true;\n\n    // unfortunately, since we loaded the page image in an img tag inside media-image, we have to make a second\n    // request for the same page to read out the max-content-index header\n    this.maxIndex = await fetchMaxContentIndex(this.imageSrc);\n    const template = document.getElementById(\"paging-toolbar\");\n    this.el.querySelector(\".interactable-ui\").appendChild(document.importNode(template.content, true));\n    this.toolbar = this.el.querySelector(\".paging-toolbar\");\n    // we have to wait a tick for the attach callbacks to get fired for the elements in a template\n    setTimeout(() => {\n      this.nextButton = this.el.querySelector(\".next-button [text-button]\");\n      this.prevButton = this.el.querySelector(\".prev-button [text-button]\");\n      this.pageLabel = this.el.querySelector(\".page-label\");\n\n      this.nextButton.object3D.addEventListener(\"interact\", this.onNext);\n      this.prevButton.object3D.addEventListener(\"interact\", this.onPrev);\n\n      this.update();\n      this.el.emit(\"preview-loaded\");\n    }, 0);\n  },\n\n  async update() {\n    if (!this.data.src) return;\n\n    const pageSrc = proxiedUrlFor(this.data.src, this.data.index);\n    this.el.setAttribute(\"media-image\", { src: pageSrc, contentType: \"image/png\" });\n\n    await this._ensureUI();\n\n    if (this.pageLabel) {\n      this.pageLabel.setAttribute(\"text\", \"value\", `${this.data.index + 1}/${this.maxIndex + 1}`);\n      this.repositionToolbar();\n    }\n  },\n\n  remove() {\n    if (this.toolbar) {\n      this.toolbar.parentNode.removeChild(this.toolbar);\n    }\n  },\n\n  onNext() {\n    if (!NAF.utils.isMine(this.networkedEl) && !NAF.utils.takeOwnership(this.networkedEl)) return;\n    this.el.setAttribute(\"media-pager\", \"index\", Math.min(this.data.index + 1, this.maxIndex));\n    this.el.emit(\"pager-page-changed\");\n  },\n\n  onPrev() {\n    if (!NAF.utils.isMine(this.networkedEl) && !NAF.utils.takeOwnership(this.networkedEl)) return;\n    this.el.setAttribute(\"media-pager\", \"index\", Math.max(this.data.index - 1, 0));\n    this.el.emit(\"pager-page-changed\");\n  },\n\n  repositionToolbar() {\n    const ammoShape = this.el.getAttribute(\"ammo-shape\");\n    if (!ammoShape) return;\n\n    this.toolbar.object3D.position.y = -0.7;\n    this.toolbar.object3D.matrixNeedsUpdate = true;\n  }\n});\n","import { SOUND_QUACK, SOUND_SPECIAL_QUACK } from \"../systems/sound-effects-system\";\n\nAFRAME.registerComponent(\"quack\", {\n  schema: {\n    quackPercentage: { default: 1 },\n    specialQuackPercentage: { default: 0.01 }\n  },\n\n  init: function() {\n    this._handleGrabStart = this._handleGrabStart.bind(this);\n  },\n\n  play: function() {\n    this.el.object3D.addEventListener(\"interact\", this._handleGrabStart);\n  },\n\n  pause: function() {\n    this.el.object3D.removeEventListener(\"interact\", this._handleGrabStart);\n  },\n\n  _handleGrabStart: function() {\n    const rand = Math.random();\n    if (rand < this.data.specialQuackPercentage) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SPECIAL_QUACK);\n    } else if (rand < this.data.quackPercentage) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_QUACK);\n    }\n  }\n});\n","import { getLastWorldPosition } from \"../utils/three-utils\";\n\n/**\n * Used on a player-rig to move the player to a random spawn point on entry.\n * @namespace avatar\n * @component spawn-controller\n */\nAFRAME.registerComponent(\"spawn-controller\", {\n  schema: {\n    target: { type: \"selector\" },\n    camera: { type: \"selector\", default: \"#player-camera\" },\n    playerHeight: { default: 1.6 },\n    loadedEvent: { type: \"string\" }\n  },\n  init() {\n    this.moveToSpawnPoint = this.moveToSpawnPoint.bind(this);\n    this.data.target.addEventListener(this.data.loadedEvent, this.moveToSpawnPoint);\n  },\n  moveToSpawnPoint() {\n    const spawnPoints = document.querySelectorAll(\"[spawn-point]\");\n\n    if (spawnPoints.length === 0) {\n      // Keep default position\n      return;\n    }\n\n    const camera = this.data.camera;\n    const spawnPointIndex = Math.round((spawnPoints.length - 1) * Math.random());\n    const spawnPoint = spawnPoints[spawnPointIndex];\n\n    getLastWorldPosition(spawnPoint.object3D, this.el.object3D.position);\n    this.el.object3D.rotation.copy(spawnPoint.object3D.rotation);\n\n    if (this.el.sceneEl.is(\"vr-mode\")) {\n      // Rotate the player rig such that the vr-camera faces forward.\n      this.el.object3D.rotation.y -= this.data.camera.object3D.rotation.y;\n    } else {\n      // Reset the camera transform in 2D mode.\n      camera.object3D.position.set(0, this.data.playerHeight, 0);\n      camera.object3D.rotation.set(0, 0, 0);\n      camera.object3D.matrixNeedsUpdate = true;\n    }\n\n    // Camera faces -Z direction. Flip rotation on Y axis to face the correct direction.\n    this.el.object3D.rotation.y += Math.PI;\n    this.el.object3D.matrixNeedsUpdate = true;\n\n    // Reset pitch-yaw-rotator after any scene-preview-camera rotation.\n    if (camera.components[\"pitch-yaw-rotator\"]) {\n      camera.components[\"pitch-yaw-rotator\"].set(camera.object3D.rotation.x, camera.object3D.rotation.y);\n    }\n  }\n});\n\n/**\n * Marks an entity as a potential spawn point.\n * @namespace environment\n * @component spawn-point\n */\nAFRAME.registerComponent(\"spawn-point\", {\n  init() {\n    this.el.object3D.visible = false;\n  }\n});\n","/* global require AFRAME THREE setTimeout clearTimeout */\nimport { addMedia } from \"../utils/media-utils\";\nimport { waitForEvent } from \"../utils/async-utils\";\nimport { ObjectContentOrigins } from \"../object-types\";\nimport { paths } from \"../systems/userinput/paths\";\n\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\n/**\n * Spawns networked objects when grabbed or when a specified event is fired.\n * @namespace network\n * @component super-spawner\n */\nAFRAME.registerComponent(\"super-spawner\", {\n  schema: {\n    /**\n     * Source of the media asset the spawner will spawn when grabbed. This can be a gltf, video, or image, or a url that the reticiulm media API can resolve to a gltf, video, or image.\n     */\n    src: { default: \"\" },\n\n    /**\n     * Whether to use the Reticulum media resolution API to interpret the src URL (e.g. find a video URL for Youtube videos.)\n     */\n    resolve: { default: false },\n\n    /**\n     * Whether to resize the media on load.\n     */\n    resize: { default: false },\n\n    /**\n     * The template to use for this object\n     */\n    template: { default: \"\" },\n\n    /**\n     * Spawn the object at a custom position, rather than at the center of the spanwer.\n     */\n    useCustomSpawnPosition: { default: false },\n    spawnPosition: { type: \"vec3\" },\n\n    /**\n     * Spawn the object with a custom orientation, rather than copying that of the spawner.\n     */\n    useCustomSpawnRotation: { default: false },\n    spawnRotation: { type: \"vec4\" },\n\n    /**\n     * Spawn the object with a custom scale, rather than copying that of the spawner.\n     */\n    useCustomSpawnScale: { default: false },\n    spawnScale: { type: \"vec3\" },\n\n    /**\n     * The spawner will become invisible and ungrabbable for this ammount of time after being grabbed. This can prevent rapidly spawning objects.\n     */\n    spawnCooldown: { default: 1 },\n\n    /**\n     * Center the spawned object on the hand that grabbed it after it finishes loading. By default the object will be grabbed relative to where the spawner was grabbed\n     */\n    centerSpawnedObject: { default: false },\n\n    /**\n     * Optional event to listen for to spawn an object on the preferred superHand\n     */\n    spawnEvent: { type: \"string\" },\n\n    /**\n     * If true, will spawn the object at the cursor and animate it into the hand.\n     */\n    animateFromCursor: { type: \"boolean\" }\n  },\n\n  init() {\n    this.cooldownTimeout = null;\n    this.handPosition = new THREE.Vector3();\n\n    this.onSpawnEvent = this.onSpawnEvent.bind(this);\n\n    this.sceneEl = document.querySelector(\"a-scene\");\n\n    this.tempSpawnHandPosition = new THREE.Vector3();\n  },\n\n  play() {\n    if (this.data.spawnEvent) {\n      this.el.sceneEl.addEventListener(this.data.spawnEvent, this.onSpawnEvent);\n    }\n  },\n\n  pause() {\n    if (this.data.spawnEvent) {\n      this.el.sceneEl.removeEventListener(this.data.spawnEvent, this.onSpawnEvent);\n    }\n    if (this.cooldownTimeout) {\n      clearTimeout(this.cooldownTimeout);\n      this.cooldownTimeout = null;\n      this.el.setAttribute(\"visible\", true);\n      this.el.classList.add(\"interactable\");\n    }\n  },\n\n  async onSpawnEvent() {\n    if (this.cooldownTimeout || !this.el.sceneEl.is(\"entered\")) {\n      return;\n    }\n\n    const entity = addMedia(this.data.src, this.data.template, ObjectContentOrigins.SPAWNER, this.data.resolve, false)\n      .entity;\n\n    const cursor = document.querySelector(\"#cursor\");\n    cursor.object3D.getWorldPosition(entity.object3D.position);\n    cursor.object3D.getWorldQuaternion(entity.object3D.quaternion);\n    entity.object3D.matrixNeedsUpdate = true;\n\n    if (this.data.useCustomSpawnScale) {\n      entity.object3D.scale.copy(this.data.spawnScale);\n    }\n\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const willAnimateFromCursor =\n      this.data.animateFromCursor && userinput.get(paths.actions.rightHand.matrix) && !AFRAME.utils.device.isMobileVR();\n    if (!willAnimateFromCursor) {\n      interaction.state.rightRemote.held = entity;\n      interaction.state.rightRemote.spawning = true;\n    }\n    this.activateCooldown();\n    await waitForEvent(\"body-loaded\", entity);\n\n    cursor.object3D.getWorldPosition(entity.object3D.position);\n    cursor.object3D.getWorldQuaternion(entity.object3D.quaternion);\n    entity.object3D.matrixNeedsUpdate = true;\n\n    if (willAnimateFromCursor) {\n      document.querySelector(\"#player-right-controller\").object3D.getWorldPosition(this.handPosition);\n      entity.setAttribute(\"animation__spawn-at-cursor\", {\n        property: \"position\",\n        delay: 500,\n        dur: 1500,\n        from: { x: entity.object3D.position.x, y: entity.object3D.position.y, z: entity.object3D.position.z },\n        to: { x: this.handPosition.x, y: this.handPosition.y, z: this.handPosition.z },\n        easing: \"easeInOutBack\"\n      });\n    } else {\n      interaction.state.rightRemote.spawning = false;\n    }\n    entity.components[\"ammo-body\"].syncToPhysics();\n  },\n\n  activateCooldown() {\n    if (this.data.spawnCooldown > 0) {\n      const [sx, sy, sz] = [this.el.object3D.scale.x, this.el.object3D.scale.y, this.el.object3D.scale.z];\n\n      this.el.setAttribute(\"visible\", false);\n      this.el.object3D.scale.set(0.001, 0.001, 0.001);\n      this.el.object3D.matrixNeedsUpdate = true;\n      this.el.classList.remove(\"interactable\");\n      this.el.setAttribute(\"ammo-body\", { collisionFilterMask: COLLISION_LAYERS.NONE });\n      this.cooldownTimeout = setTimeout(() => {\n        this.el.setAttribute(\"visible\", true);\n        this.el.classList.add(\"interactable\");\n        this.el.setAttribute(\"ammo-body\", { collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER });\n        this.el.removeAttribute(\"animation__spawner-cooldown\");\n        this.el.setAttribute(\"animation__spawner-cooldown\", {\n          property: \"scale\",\n          delay: 50,\n          dur: 350,\n          from: { x: 0.001, y: 0.001, z: 0.001 },\n          to: { x: sx, y: sy, z: sz },\n          easing: \"easeOutElastic\"\n        });\n\n        this.cooldownTimeout = null;\n      }, this.data.spawnCooldown * 1000);\n    }\n  }\n});\n","export const waitForEvent = function(eventName, eventObj) {\n  return new Promise(resolve => {\n    eventObj.addEventListener(eventName, resolve, { once: true });\n  });\n};\n","import { Layers } from \"./layers\";\nimport \"../vendor/Water\";\nimport waterNormalMap from \"../assets/waternormals.jpg\";\n\n/**\n * @author jbouny / https://github.com/jbouny\n *\n * Work based on :\n * @author Slayvin / http://slayvin.net : Flat mirror for three.js\n * @author Stemkoski / http://www.adelphi.edu/~stemkoski : An implementation of water shader based on the flat mirror\n * @author Jonas Wagner / http://29a.ch/ && http://29a.ch/slides/2012/webglwater/ : Water shader explanations in WebGL\n */\n\nfunction MobileWater(geometry, options) {\n  THREE.Mesh.call(this, geometry);\n\n  const scope = this;\n\n  options = options || {};\n\n  const time = options.time !== undefined ? options.time : 0.0;\n  const normalSampler = options.waterNormals !== undefined ? options.waterNormals : null;\n  const sunDirection =\n    options.sunDirection !== undefined ? options.sunDirection : new THREE.Vector3(0.70707, 0.70707, 0.0);\n  const sunColor = new THREE.Color(options.sunColor !== undefined ? options.sunColor : 0xffffff);\n  const waterColor = new THREE.Color(options.waterColor !== undefined ? options.waterColor : 0x7f7f7f);\n  const eye = options.eye !== undefined ? options.eye : new THREE.Vector3(0, 0, 0);\n  const distortionScale = options.distortionScale !== undefined ? options.distortionScale : 20.0;\n  const side = options.side !== undefined ? options.side : THREE.FrontSide;\n  const fog = options.fog !== undefined ? options.fog : false;\n\n  const mirrorShader = {\n    uniforms: THREE.UniformsUtils.merge([\n      THREE.UniformsLib[\"lights\"],\n      {\n        normalSampler: { value: null },\n        time: { value: 0.0 },\n        size: { value: 1.0 },\n        distortionScale: { value: 20.0 },\n        sunColor: { value: new THREE.Color(0x7f7f7f) },\n        sunDirection: { value: new THREE.Vector3(0.70707, 0.70707, 0) },\n        eye: { value: new THREE.Vector3() },\n        waterColor: { value: new THREE.Color(0x555555) }\n      }\n    ]),\n\n    vertexShader: `\n      uniform float time;\n      varying vec4 worldPosition;\n\n      void main() {\n      \tworldPosition = modelMatrix * vec4( position, 1.0 );\n      \tvec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );\n      \tgl_Position = projectionMatrix * mvPosition;\n\n      }\n    `,\n\n    fragmentShader: `\n      uniform float time;\n      uniform float size;\n      uniform float distortionScale;\n      uniform sampler2D normalSampler;\n      uniform vec3 sunColor;\n      uniform vec3 sunDirection;\n      uniform vec3 eye;\n      uniform vec3 waterColor;\n\n      varying vec4 worldPosition;\n\n      vec4 getNoise( vec2 uv ) {\n      \tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\n      \tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\n      \tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\n      \tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\n      \tvec4 noise = texture2D( normalSampler, uv0 ) +\n      \t\ttexture2D( normalSampler, uv1 ) +\n      \t\ttexture2D( normalSampler, uv2 ) +\n      \t\ttexture2D( normalSampler, uv3 );\n      \treturn noise * 0.5 - 1.0;\n      }\n\n      void sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {\n      \tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\n      \tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );\n      \tspecularColor += pow( direction, shiny ) * sunColor * spec;\n      \tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\n      }\n\n      ${THREE.ShaderChunk[\"common\"]}\n      ${THREE.ShaderChunk[\"packing\"]}\n      ${THREE.ShaderChunk[\"bsdfs\"]}\n      ${THREE.ShaderChunk[\"lights_pars_begin\"]}\n\n      void main() {\n      \tvec4 noise = getNoise( worldPosition.xz * size );\n      \tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\n\n      \tvec3 diffuseLight = vec3(0.0);\n      \tvec3 specularLight = vec3(0.0);\n\n      \tvec3 worldToEye = eye-worldPosition.xyz;\n      \tvec3 eyeDirection = normalize( worldToEye );\n      \tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\n\n      \tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\n      \tfloat rf0 = 0.3;\n      \tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\n      \tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\n      \tvec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ), ( 0.5 + specularLight ), reflectance);\n      \tvec3 outgoingLight = albedo;\n      \tgl_FragColor = vec4( outgoingLight, 1 );\n      }\n    `\n  };\n\n  const material = new THREE.ShaderMaterial({\n    fragmentShader: mirrorShader.fragmentShader,\n    vertexShader: mirrorShader.vertexShader,\n    uniforms: THREE.UniformsUtils.clone(mirrorShader.uniforms),\n    transparent: false,\n    lights: true,\n    side: side,\n    fog: fog\n  });\n\n  material.uniforms.time.value = time;\n  material.uniforms.normalSampler.value = normalSampler;\n  material.uniforms.sunColor.value = sunColor;\n  material.uniforms.waterColor.value = waterColor;\n  material.uniforms.sunDirection.value = sunDirection;\n  material.uniforms.distortionScale.value = distortionScale;\n\n  material.uniforms.eye.value = eye;\n\n  scope.material = material;\n}\n\nMobileWater.prototype = Object.create(THREE.Mesh.prototype);\nMobileWater.prototype.constructor = THREE.Water;\n\nasync function loadWaterNormals(url) {\n  const texture = await new Promise((resolve, reject) =>\n    new THREE.TextureLoader().load(url, resolve, undefined, reject)\n  );\n  texture.wrapS = texture.wrapT = THREE.RepeatWrapping;\n  texture.needsUpdate = true;\n  return texture;\n}\n\nAFRAME.registerComponent(\"water\", {\n  schema: {\n    waterColor: { type: \"color\", default: \"#001e0f\" },\n    distortionScale: { type: \"number\", default: 3.7 },\n    sunColor: { type: \"color\", default: \"#ffffff\" },\n    inclination: { type: \"number\", default: 0 },\n    azimuth: { type: \"number\", default: 0 },\n    distance: { type: \"number\", default: 1 },\n    speed: { type: \"number\", default: 0.1 },\n    forceMobile: { type: \"boolean\", default: false }\n  },\n  init() {\n    const waterMesh = this.el.getObject3D(\"mesh\");\n    const waterGeometry = waterMesh.geometry;\n\n    // Render THREE.Water shader instead of THREE.Mesh\n    waterMesh.visible = false;\n\n    loadWaterNormals(waterNormalMap).then(waterNormals => {\n      const waterConfig = {\n        textureWidth: 512,\n        textureHeight: 512,\n        waterNormals: waterNormals,\n        sunDirection: this.data.sunDirection,\n        sunColor: new THREE.Color(this.data.sunColor),\n        waterColor: new THREE.Color(this.data.waterColor),\n        distortionScale: this.data.distortionScale,\n        fog: false\n      };\n\n      if (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR() || this.data.forceMobile) {\n        this.water = new MobileWater(waterGeometry, waterConfig);\n      } else {\n        this.water = new THREE.Water(waterGeometry, waterConfig);\n        this.water.mirrorCamera.layers.set(Layers.reflection);\n      }\n\n      this.el.setObject3D(\"water\", this.water);\n    });\n  },\n\n  update(oldData) {\n    if (this.data.forceMobile !== oldData.forceMobile) {\n      this.el.removeObject3D(\"water\");\n      this.init();\n      return;\n    }\n\n    if (!this.water) {\n      return;\n    }\n\n    const uniforms = this.water.material.uniforms;\n\n    if (this.data.waterColor !== oldData.waterColor) {\n      uniforms.waterColor.value.setStyle(this.data.waterColor);\n    }\n\n    if (this.data.distortionScale !== oldData.distortionScale) {\n      uniforms.distortionScale.value = this.data.distortionScale;\n    }\n\n    if (this.data.sunColor !== oldData.sunColor) {\n      uniforms.sunColor.value.setStyle(this.data.sunColor);\n    }\n\n    if (\n      this.data.inclination !== oldData.inclination ||\n      this.data.azimuth !== oldData.azimuth ||\n      this.data.distance !== oldData.distance\n    ) {\n      const theta = Math.PI * (this.data.inclination - 0.5);\n      const phi = 2 * Math.PI * (this.data.azimuth - 0.5);\n\n      const distance = this.data.distance;\n\n      const x = distance * Math.cos(phi);\n      const y = distance * Math.sin(phi) * Math.sin(theta);\n      const z = distance * Math.sin(phi) * Math.cos(theta);\n\n      uniforms.sunDirection.value.set(x, y, z);\n    }\n  },\n\n  tick(time) {\n    if (this.water) {\n      this.water.material.uniforms.time.value = (time / 1000) * this.data.speed;\n    }\n  },\n\n  remove() {\n    this.el.removeObject3D(\"water\");\n    const waterMesh = this.el.getObject3D(\"mesh\");\n    waterMesh.visible = true;\n  }\n});\n","export default function nextTick() {\n  return new Promise(resolve => {\n    setTimeout(resolve, 0);\n  });\n}\n","const tempVector3 = new THREE.Vector3();\nconst tempQuaternion = new THREE.Quaternion();\n\nexport function getLastWorldPosition(src, target) {\n  target.setFromMatrixPosition(src.matrixWorld);\n  return target;\n}\n\nexport function getLastWorldQuaternion(src, target) {\n  src.matrixWorld.decompose(tempVector3, target, tempVector3);\n  return target;\n}\n\nexport function getLastWorldScale(src, target) {\n  src.matrixWorld.decompose(tempVector3, tempQuaternion, target);\n  return target;\n}\n\nexport function disposeMaterial(mtrl) {\n  if (mtrl.map) mtrl.map.dispose();\n  if (mtrl.lightMap) mtrl.lightMap.dispose();\n  if (mtrl.bumpMap) mtrl.bumpMap.dispose();\n  if (mtrl.normalMap) mtrl.normalMap.dispose();\n  if (mtrl.specularMap) mtrl.specularMap.dispose();\n  if (mtrl.envMap) mtrl.envMap.dispose();\n  mtrl.dispose();\n}\n\nexport function disposeNode(node) {\n  if (!(node instanceof THREE.Mesh)) return;\n\n  if (node.geometry) {\n    node.geometry.dispose();\n  }\n\n  if (node.material) {\n    let materialArray;\n    if (node.material instanceof THREE.MeshFaceMaterial || node.material instanceof THREE.MultiMaterial) {\n      materialArray = node.material.materials;\n    } else if (node.material instanceof Array) {\n      materialArray = node.material;\n    }\n    if (materialArray) {\n      materialArray.forEach(disposeMaterial);\n    } else {\n      disposeMaterial(node.material);\n    }\n  }\n}\n","import { objectTypeForOriginAndContentType } from \"../object-types\";\nimport { getReticulumFetchUrl } from \"./phoenix-utils\";\nimport mediaHighlightFrag from \"./media-highlight-frag.glsl\";\nimport { mapMaterials } from \"./material-utils\";\n\nconst nonCorsProxyDomains = (process.env.NON_CORS_PROXY_DOMAINS || \"\").split(\",\");\nif (process.env.CORS_PROXY_SERVER) {\n  nonCorsProxyDomains.push(process.env.CORS_PROXY_SERVER);\n}\nconst mediaAPIEndpoint = getReticulumFetchUrl(\"/api/v1/media\");\n\nconst commonKnownContentTypes = {\n  gltf: \"model/gltf\",\n  glb: \"model/gltf-binary\",\n  png: \"image/png\",\n  jpg: \"image/jpeg\",\n  jpeg: \"image/jpeg\",\n  pdf: \"application/pdf\",\n  mp4: \"video/mp4\",\n  mp3: \"audio/mpeg\"\n};\n\nconst PHYSICS_CONSTANTS = require(\"aframe-physics-system/src/constants\"),\n  SHAPE = PHYSICS_CONSTANTS.SHAPE,\n  FIT = PHYSICS_CONSTANTS.FIT;\n\n// thanks to https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding\nfunction b64EncodeUnicode(str) {\n  // first we use encodeURIComponent to get percent-encoded UTF-8, then we convert the percent-encodings\n  // into raw bytes which can be fed into btoa.\n  const CHAR_RE = /%([0-9A-F]{2})/g;\n  return btoa(encodeURIComponent(str).replace(CHAR_RE, (_, p1) => String.fromCharCode(\"0x\" + p1)));\n}\n\nconst farsparkEncodeUrl = url => {\n  // farspark doesn't know how to read '=' base64 padding characters\n  // translate base64 + to - and / to _ for URL safety\n  return b64EncodeUnicode(url)\n    .replace(/=+$/g, \"\")\n    .replace(/\\+/g, \"-\")\n    .replace(/\\//g, \"_\");\n};\n\nexport const scaledThumbnailUrlFor = (url, width, height) => {\n  if (\n    process.env.RETICULUM_SERVER &&\n    process.env.RETICULUM_SERVER.includes(\"hubs.local\") &&\n    url.includes(\"hubs.local\")\n  ) {\n    return url;\n  }\n\n  return `https://${process.env.FARSPARK_SERVER}/thumbnail/${farsparkEncodeUrl(url)}?w=${width}&h=${height}`;\n};\n\nexport const proxiedUrlFor = (url, index = null) => {\n  if (!(url.startsWith(\"http:\") || url.startsWith(\"https:\"))) return url;\n\n  const hasIndex = index !== null;\n\n  if (!hasIndex) {\n    // Skip known domains that do not require CORS proxying.\n    try {\n      const parsedUrl = new URL(url);\n      if (nonCorsProxyDomains.find(domain => parsedUrl.hostname.endsWith(domain))) return url;\n    } catch (e) {\n      // Ignore\n    }\n  }\n\n  if (hasIndex || !process.env.CORS_PROXY_SERVER) {\n    const method = hasIndex ? \"extract\" : \"raw\";\n    return `https://${process.env.FARSPARK_SERVER}/0/${method}/0/0/0/${index || 0}/${farsparkEncodeUrl(url)}`;\n  } else {\n    return `https://${process.env.CORS_PROXY_SERVER}/${url}`;\n  }\n};\n\nconst resolveUrlCache = new Map();\nexport const resolveUrl = async (url, index) => {\n  const cacheKey = `${url}|${index}`;\n  if (resolveUrlCache.has(cacheKey)) return resolveUrlCache.get(cacheKey);\n  const resolved = await fetch(mediaAPIEndpoint, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ media: { url, index } })\n  }).then(r => r.json());\n  resolveUrlCache.set(cacheKey, resolved);\n  return resolved;\n};\n\nexport const getCustomGLTFParserURLResolver = gltfUrl => url => {\n  if (typeof url !== \"string\" || url === \"\") return \"\";\n  if (/^(https?:)?\\/\\//i.test(url)) return url;\n  if (/^data:.*,.*$/i.test(url)) return url;\n  if (/^blob:.*$/i.test(url)) return url;\n\n  if (process.env.CORS_PROXY_SERVER) {\n    // For absolute paths with a CORS proxied gltf URL, re-write the url properly to be proxied\n    const corsProxyPrefix = `https://${process.env.CORS_PROXY_SERVER}/`;\n\n    if (gltfUrl.startsWith(corsProxyPrefix)) {\n      const originalUrl = decodeURIComponent(gltfUrl.substring(corsProxyPrefix.length));\n      const originalUrlParts = originalUrl.split(\"/\");\n\n      // Drop the .gltf filename\n      const path = new URL(url).pathname;\n      const assetUrl = originalUrlParts.slice(0, originalUrlParts.length - 1).join(\"/\") + \"/\" + path;\n      return corsProxyPrefix + assetUrl;\n    }\n  }\n\n  return url;\n};\n\nexport const guessContentType = url => {\n  if (url.startsWith(\"hubs://\") && url.endsWith(\"/video\")) return \"video/vnd.hubs-webrtc\";\n  const extension = new URL(url).pathname.split(\".\").pop();\n  return commonKnownContentTypes[extension];\n};\n\nexport const upload = file => {\n  const formData = new FormData();\n  formData.append(\"media\", file);\n  formData.append(\"promotion_mode\", \"with_token\");\n  return fetch(mediaAPIEndpoint, {\n    method: \"POST\",\n    body: formData\n  }).then(r => r.json());\n};\n\n// https://stackoverflow.com/questions/7584794/accessing-jpeg-exif-rotation-data-in-javascript-on-the-client-side/32490603#32490603\nfunction getOrientation(file, callback) {\n  const reader = new FileReader();\n  reader.onload = function(e) {\n    const view = new DataView(e.target.result);\n    if (view.getUint16(0, false) != 0xffd8) {\n      return callback(-2);\n    }\n    const length = view.byteLength;\n    let offset = 2;\n    while (offset < length) {\n      if (view.getUint16(offset + 2, false) <= 8) return callback(-1);\n      const marker = view.getUint16(offset, false);\n      offset += 2;\n      if (marker == 0xffe1) {\n        if (view.getUint32((offset += 2), false) != 0x45786966) {\n          return callback(-1);\n        }\n\n        const little = view.getUint16((offset += 6), false) == 0x4949;\n        offset += view.getUint32(offset + 4, little);\n        const tags = view.getUint16(offset, little);\n        offset += 2;\n        for (let i = 0; i < tags; i++) {\n          if (view.getUint16(offset + i * 12, little) == 0x0112) {\n            return callback(view.getUint16(offset + i * 12 + 8, little));\n          }\n        }\n      } else if ((marker & 0xff00) != 0xff00) {\n        break;\n      } else {\n        offset += view.getUint16(offset, false);\n      }\n    }\n    return callback(-1);\n  };\n  reader.readAsArrayBuffer(file);\n}\n\nlet interactableId = 0;\nexport const addMedia = (src, template, contentOrigin, resolve = false, resize = false, animate = true) => {\n  const scene = AFRAME.scenes[0];\n\n  const entity = document.createElement(\"a-entity\");\n  entity.id = \"interactable-media-\" + interactableId++;\n  entity.setAttribute(\"networked\", { template: template });\n  const needsToBeUploaded = src instanceof File;\n  entity.setAttribute(\"media-loader\", {\n    resize,\n    resolve,\n    animate,\n    src: typeof src === \"string\" ? src : \"\",\n    fileIsOwned: !needsToBeUploaded\n  });\n\n  entity.object3D.matrixNeedsUpdate = true;\n\n  scene.appendChild(entity);\n\n  const fireLoadingTimeout = setTimeout(() => {\n    scene.emit(\"media-loading\", { src: src });\n  }, 100);\n\n  [\"model-loaded\", \"video-loaded\", \"image-loaded\"].forEach(eventName => {\n    entity.addEventListener(\n      eventName,\n      async () => {\n        clearTimeout(fireLoadingTimeout);\n        scene.emit(\"media-loaded\", { src: src });\n      },\n      { once: true }\n    );\n  });\n\n  const orientation = new Promise(function(resolve) {\n    if (needsToBeUploaded) {\n      getOrientation(src, x => {\n        resolve(x);\n      });\n    } else {\n      resolve(1);\n    }\n  });\n  if (needsToBeUploaded) {\n    upload(src)\n      .then(response => {\n        const srcUrl = new URL(response.raw);\n        srcUrl.searchParams.set(\"token\", response.meta.access_token);\n        entity.setAttribute(\"media-loader\", { resolve: false, src: srcUrl.href, fileId: response.file_id });\n        window.APP.store.update({\n          uploadPromotionTokens: [{ fileId: response.file_id, promotionToken: response.meta.promotion_token }]\n        });\n      })\n      .catch(e => {\n        console.error(\"Media upload failed\", e);\n        entity.setAttribute(\"media-loader\", { src: \"error\" });\n      });\n  } else if (src instanceof MediaStream) {\n    entity.setAttribute(\"media-loader\", { src: `hubs://clients/${NAF.clientId}/video` });\n  }\n\n  if (contentOrigin) {\n    entity.addEventListener(\"media_resolved\", ({ detail }) => {\n      const objectType = objectTypeForOriginAndContentType(contentOrigin, detail.contentType, detail.src);\n      scene.emit(\"object_spawned\", { objectType });\n    });\n  }\n\n  return { entity, orientation };\n};\n\nexport function injectCustomShaderChunks(obj) {\n  const vertexRegex = /\\bskinning_vertex\\b/;\n  const fragRegex = /\\bgl_FragColor\\b/;\n  const validMaterials = [\"MeshStandardMaterial\", \"MeshBasicMaterial\", \"MobileStandardMaterial\"];\n\n  const shaderUniforms = [];\n\n  obj.traverse(object => {\n    if (!object.material) return;\n\n    object.material = mapMaterials(object, material => {\n      if (!validMaterials.includes(material.type)) {\n        return material;\n      }\n\n      // HACK, this routine inadvertently leaves the A-Frame shaders wired to the old, dark\n      // material, so maps cannot be updated at runtime. This breaks UI elements who have\n      // hover/toggle state, so for now just skip these while we figure out a more correct\n      // solution.\n      if (object.el.classList.contains(\"ui\")) return material;\n      if (object.el.classList.contains(\"hud\")) return material;\n      if (object.el.getAttribute(\"text-button\")) return material;\n\n      const newMaterial = material.clone();\n      newMaterial.onBeforeCompile = shader => {\n        if (!vertexRegex.test(shader.vertexShader)) return;\n\n        shader.uniforms.hubs_IsFrozen = { value: false };\n        shader.uniforms.hubs_EnableSweepingEffect = { value: false };\n        shader.uniforms.hubs_SweepParams = { value: [0, 0] };\n        shader.uniforms.hubs_InteractorOnePos = { value: [0, 0, 0] };\n        shader.uniforms.hubs_InteractorTwoPos = { value: [0, 0, 0] };\n        shader.uniforms.hubs_HighlightInteractorOne = { value: false };\n        shader.uniforms.hubs_HighlightInteractorTwo = { value: false };\n        shader.uniforms.hubs_Time = { value: 0 };\n\n        const vchunk = `\n        if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\n          vec4 wt = modelMatrix * vec4(transformed, 1);\n\n          // Used in the fragment shader below.\n          hubs_WorldPosition = wt.xyz;\n        }\n      `;\n\n        const vlines = shader.vertexShader.split(\"\\n\");\n        const vindex = vlines.findIndex(line => vertexRegex.test(line));\n        vlines.splice(vindex + 1, 0, vchunk);\n        vlines.unshift(\"varying vec3 hubs_WorldPosition;\");\n        vlines.unshift(\"uniform bool hubs_IsFrozen;\");\n        vlines.unshift(\"uniform bool hubs_HighlightInteractorOne;\");\n        vlines.unshift(\"uniform bool hubs_HighlightInteractorTwo;\");\n        shader.vertexShader = vlines.join(\"\\n\");\n\n        const flines = shader.fragmentShader.split(\"\\n\");\n        const findex = flines.findIndex(line => fragRegex.test(line));\n        flines.splice(findex + 1, 0, mediaHighlightFrag);\n        flines.unshift(\"varying vec3 hubs_WorldPosition;\");\n        flines.unshift(\"uniform bool hubs_IsFrozen;\");\n        flines.unshift(\"uniform bool hubs_EnableSweepingEffect;\");\n        flines.unshift(\"uniform vec2 hubs_SweepParams;\");\n        flines.unshift(\"uniform bool hubs_HighlightInteractorOne;\");\n        flines.unshift(\"uniform vec3 hubs_InteractorOnePos;\");\n        flines.unshift(\"uniform bool hubs_HighlightInteractorTwo;\");\n        flines.unshift(\"uniform vec3 hubs_InteractorTwoPos;\");\n        flines.unshift(\"uniform float hubs_Time;\");\n        shader.fragmentShader = flines.join(\"\\n\");\n\n        shaderUniforms.push(shader.uniforms);\n      };\n      newMaterial.needsUpdate = true;\n      return newMaterial;\n    });\n  });\n\n  return shaderUniforms;\n}\n\nexport function getPromotionTokenForFile(fileId) {\n  return window.APP.store.state.uploadPromotionTokens.find(upload => upload.fileId === fileId);\n}\n\nexport const traverseMeshesAndAddShapes = (function() {\n  const vertexLimit = 200000;\n  const shapePrefix = \"ammo-shape__\";\n  const shapes = [];\n  return function(el) {\n    const meshRoot = el.object3DMap.mesh;\n    while (shapes.length > 0) {\n      const { id, entity } = shapes.pop();\n      entity.removeAttribute(id);\n    }\n\n    let vertexCount = 0;\n    meshRoot.traverse(o => {\n      if (\n        o.isMesh &&\n        (!THREE.Sky || o.__proto__ != THREE.Sky.prototype) &&\n        o.name !== \"Floor_Plan\" &&\n        o.name !== \"Ground_Plane\"\n      ) {\n        vertexCount += o.geometry.attributes.position.count;\n      }\n    });\n\n    console.group(\"traverseMeshesAndAddShapes\");\n\n    console.log(`scene has ${vertexCount} vertices from meshes`);\n\n    const floorPlan = meshRoot.children.find(obj => {\n      return obj.name === \"Floor_Plan\";\n    });\n    if ((vertexCount > vertexLimit || vertexCount === 0) && floorPlan) {\n      console.log(`vertex limit of ${vertexLimit} exceeded, using floor plan with mesh shape`);\n      floorPlan.el.setAttribute(shapePrefix + floorPlan.name, {\n        type: SHAPE.MESH,\n        margin: 0.01,\n        fit: FIT.ALL\n      });\n      shapes.push({ id: shapePrefix + floorPlan.name, entity: floorPlan.el });\n    } else if (vertexCount < vertexLimit && vertexCount > 0) {\n      el.setAttribute(shapePrefix + \"environment\", {\n        type: SHAPE.MESH,\n        margin: 0.01,\n        fit: FIT.ALL\n      });\n      shapes.push({ id: shapePrefix + \"environment\", entity: el });\n      console.log(\"adding compound mesh shape\");\n    } else {\n      el.setAttribute(shapePrefix + \"defaultFloor\", {\n        type: SHAPE.BOX,\n        margin: 0.01,\n        halfExtents: { x: 4000, y: 0.5, z: 4000 },\n        offset: { x: 0, y: -0.5, z: 0 },\n        fit: FIT.MANUAL\n      });\n      shapes.push({ id: shapePrefix + \"defaultFloor\", entity: el });\n      console.log(\"adding default floor collision\");\n    }\n    console.groupEnd();\n  };\n})();\n\nconst mediaPos = new THREE.Vector3();\n\nexport function spawnMediaAround(el, media, snapCount, mirrorOrientation = false) {\n  const { entity, orientation } = addMedia(media, \"#interactable-media\", undefined, false);\n\n  const pos = el.object3D.position;\n\n  entity.object3D.position.set(pos.x, pos.y, pos.z);\n  entity.object3D.rotation.copy(el.object3D.rotation);\n\n  if (mirrorOrientation) {\n    entity.object3D.rotateY(Math.PI);\n  }\n\n  // Generate photos in a circle around camera, starting from the bottom.\n  // Prevent z-fighting but place behind viewfinder\n  const idx = (snapCount % 6) + 3;\n\n  mediaPos.set(\n    Math.cos(Math.PI * 2 * (idx / 6.0)) * 0.75,\n    Math.sin(Math.PI * 2 * (idx / 6.0)) * 0.75,\n    -0.05 + idx * 0.001\n  );\n\n  el.object3D.localToWorld(mediaPos);\n  entity.object3D.visible = false;\n\n  entity.addEventListener(\n    \"image-loaded\",\n    () => {\n      entity.object3D.visible = true;\n      entity.setAttribute(\"animation__photo_pos\", {\n        property: \"position\",\n        dur: 800,\n        from: { x: pos.x, y: pos.y, z: pos.z },\n        to: { x: mediaPos.x, y: mediaPos.y, z: mediaPos.z },\n        easing: \"easeOutElastic\"\n      });\n    },\n    { once: true }\n  );\n\n  entity.object3D.matrixNeedsUpdate = true;\n\n  entity.addEventListener(\n    \"media_resolved\",\n    () => {\n      el.emit(\"photo_taken\", entity.components[\"media-loader\"].data.src);\n    },\n    { once: true }\n  );\n\n  return { entity, orientation };\n}\n\nconst hubsSceneRegex = /https?:\\/\\/(hubs.local(:\\d+)?|(smoke-)?hubs.mozilla.com)\\/scenes\\/(\\w+)\\/?\\S*/;\nconst hubsRoomRegex = /https?:\\/\\/(hubs.local(:\\d+)?|(smoke-)?hubs.mozilla.com)\\/(\\w+)\\/?\\S*/;\nexport const isHubsSceneUrl = hubsSceneRegex.test.bind(hubsSceneRegex);\nexport const isHubsRoomUrl = url => !isHubsSceneUrl(url) && hubsRoomRegex.test(url);\nexport const isHubsDestinationUrl = url => isHubsSceneUrl(url) || isHubsRoomUrl(url);\n","module.exports = __webpack_public_path__ + \"assets/images/twitter-b2e343d39bc8d3294292e506c7173f71.svg\";","module.exports = __webpack_public_path__ + \"assets/images/spoke_logo_black-31d4b5f1f5ef27bb389bc31a4c97b57f.png\";"],"sourceRoot":""}